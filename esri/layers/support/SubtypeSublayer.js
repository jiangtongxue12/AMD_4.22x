// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../PopupTemplate ../../renderers/ClassBreaksRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/Renderer ../../renderers/SimpleRenderer ../../renderers/UniqueValueRenderer ../../renderers/support/jsonUtils ../../renderers/support/types ../../symbols ../../core/HandleOwner ../../core/Identifiable ../../core/Loadable ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/extensions/serializableProperty/reader ./commonProperties ./FeatureTemplate ./LabelClass ./labelingInfo ../../support/popupUtils".split(" "),
function(r,d,x,n,L,M,N,y,t,u,z,A,B,b,C,D,E,F,e,O,P,Q,l,G,H,h,v,I,w,J){const K=E.getLogger("esri.layers.FeatureLayer"),p=H.createTypeReader({types:B.symbolTypesRenderer});n={key:"type",base:y,typeMap:{simple:t,"unique-value":u,"class-breaks":n},errorContext:"renderer"};b=function(m){function k(a){a=m.call(this,a)||this;a.type="subtype-sublayer";a.labelsVisible=!0;a.labelingInfo=null;a.legendEnabled=!0;a.minScale=0;a.maxScale=0;a.popupEnabled=!0;a.popupTemplate=null;a.subtypeCode=null;a.templates=null;
a.title=null;a.visible=!0;return a}r._inheritsLoose(k,m);var f=k.prototype;f.readRenderer=function(a,c,g){c=c.layerDefinition||c;if(a=c.drawingInfo&&c.drawingInfo.renderer||void 0)return(a=z.read(a,c,g)||void 0)||K.error("Failed to create renderer",{rendererDefinition:c.drawingInfo.renderer,layer:this,context:g}),a;if(c.defaultSymbol)return c.types&&c.types.length?new u({defaultSymbol:p(c.defaultSymbol,c,g),field:c.typeIdField,uniqueValueInfos:c.types.map(q=>({id:q.id,symbol:p(q.symbol,q,g)}))}):
new t({symbol:p(c.defaultSymbol,c,g)})};f.readTemplates=function(a,c){return a=a&&a.map(g=>v.fromJSON(g))};f.readVisible=function(a,c){if(c.layerDefinition&&null!=c.layerDefinition.defaultVisibility)return!!c.layerDefinition.defaultVisibility;if(null!=c.visibility)return!!c.visibility};f.createPopupTemplate=function(a){return J.createPopupTemplate({...this,fields:this.parent.fields},a)};r._createClass(k,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",
set:function(a){this._set("renderer",a)}}]);return k}(b.HandleOwnerMixin(F.MultiOriginJSONMixin(C.IdentifiableMixin(D))));d.__decorate([e.property({json:{read:!1}})],b.prototype,"type",void 0);d.__decorate([e.property(h.labelsVisible)],b.prototype,"labelsVisible",void 0);d.__decorate([e.property({type:[I],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:w.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:w.reader},
write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],b.prototype,"labelingInfo",void 0);d.__decorate([e.property(h.legendEnabled)],b.prototype,"legendEnabled",void 0);d.__decorate([e.property(h.minScale)],b.prototype,"minScale",void 0);d.__decorate([e.property(h.maxScale)],b.prototype,"maxScale",void 0);d.__decorate([e.property(h.opacityDrawingInfo)],b.prototype,"opacity",void 0);d.__decorate([e.property()],b.prototype,"parent",void 0);d.__decorate([e.property(h.popupEnabled)],b.prototype,
"popupEnabled",void 0);d.__decorate([e.property({type:x,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],b.prototype,"popupTemplate",void 0);d.__decorate([e.property({readOnly:!0})],b.prototype,"defaultPopupTemplate",null);d.__decorate([e.property({types:n,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:A.webSceneRendererTypes,write:{overridePolicy(m,k,f){return{ignoreOrigin:null==f?void 0:f.writeLayerSchema}}}}},
write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy(m,k,f){return{ignoreOrigin:null==f?void 0:f.writeLayerSchema}}}}})],b.prototype,"renderer",null);d.__decorate([l.reader("service","renderer",["drawingInfo.renderer","defaultSymbol"]),l.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],b.prototype,"readRenderer",null);d.__decorate([e.property({type:Number,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.subtypeCode"},
write:{target:"layerDefinition.subtypeCode"}}})],b.prototype,"subtypeCode",void 0);d.__decorate([e.property({type:[v]})],b.prototype,"templates",void 0);d.__decorate([l.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],b.prototype,"readTemplates",null);d.__decorate([e.property()],b.prototype,"title",void 0);d.__decorate([e.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],b.prototype,"visible",void 0);d.__decorate([l.reader("portal-item",
"visible",["visibility","layerDefinition.defaultVisibility"])],b.prototype,"readVisible",null);return b=d.__decorate([G.subclass("esri.layers.support.SubtypeSublayer")],b)});