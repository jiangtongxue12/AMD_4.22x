// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/maybe","../PixelBlock"],function(y,E,A){function z(a){return E.isSome(a)&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length}function U(a,c){a=Math.min(Math.max(a,-100),100);c=Math.min(Math.max(c,-100),100);let b,f;const h=new Uint8Array(256);for(b=0;256>b;b++)0<a&&100>a?f=(200*b-25500+510*c)/(2*(100-a))+128:0>=a&&-100<a?f=(200*b-25500+510*c)*(100+a)/2E4+128:100===a?(f=200*b-25500+256*(100-a)+510*c,f=0<f?255:0):-100===a&&(f=128),h[b]=255<
f?255:0>f?0:f;return h}function V(a,c,b,f,h,m,l,k){return{xmin:h<=b*a?0:h<b*a+a?h-b*a:a,ymin:m<=f*c?0:m<f*c+c?m-f*c:c,xmax:h+l<=b*a?0:h+l<b*a+a?h+l-b*a:a,ymax:m+k<=f*c?0:m+k<f*c+c?m+k-f*c:c}}function P(a,c,b,f,h,m){const {width:l,height:k}=b.block,{x:d,y:g}=b.offset,{width:e,height:p}=b.mosaic;b=V(l,k,f,h,d,g,e,p);let q=0;var n=0;if(m){var t=m.hasGCSSShiftTransform?360:m.halfWorldWidth,u=l*m.resolutionX,r=m.startX+f*u;u=r+u;r<t&&u>t?n=m.rightPadding:r>=t&&(q=m.leftMargin-m.rightPadding,n=0)}b.xmax-=
n;if("number"===typeof c)for(m=b.ymin;m<b.ymax;m++)for(n=(h*k+m-g)*e+(f*l-d)+q,t=b.xmin;t<b.xmax;t++)a[n+t]=c;else for(m=b.ymin;m<b.ymax;m++)for(n=(h*k+m-g)*e+(f*l-d)+q,t=m*l,r=b.xmin;r<b.xmax;r++)a[n+r]=c[t+r]}function W(a,c,b={}){const {clipOffset:f,clipSize:h,alignmentInfo:m,blockWidths:l}=b;if(l)return aa(a,c,{blockWidths:l});var k=a.filter(w=>z(w))[0];if(E.isNone(k))return null;b=h?h.width:c.width;const d=h?h.height:c.height;var g=k.width,e=k.height;const p=c.width/g,q=c.height/e;c={offset:f||
{x:0,y:0},mosaic:h||c,block:{width:g,height:e}};g=k.pixelType;e=A.getPixelArrayConstructor(g);var n=k.pixels.length;k=[];for(var t=0;t<n;t++){var u=new e(b*d);for(let w=0;w<q;w++)for(let x=0;x<p;x++){var r=a[w*p+x];z(r)&&(r=r.pixels[t],P(u,r,c,x,w,m))}k.push(u)}let v;if(a.some(w=>E.isNone(w)||w.mask&&0<w.mask.length))for(v=new Uint8Array(b*d),e=0;e<q;e++)for(n=0;n<p;n++)u=a[e*p+n],(t=E.isSome(u)?u.mask:null)?P(v,t,c,n,e,m):u?P(v,1,c,n,e,m):P(v,0,c,n,e,m);a=new A({width:b,height:d,pixels:k,pixelType:g,
mask:v});a.updateStatistics();return a}function aa(a,c,b){const f=a.find(n=>E.isSome(n));if(!E.isSome(f))return null;var h=a.some(n=>E.isSome(n)?!!n.mask:!0);const {width:m,height:l}=c;c=h?new Uint8Array(m*l):null;({blockWidths:b}=b);const k=[],d=f.getPlaneCount(),g=A.getPixelArrayConstructor(f.pixelType);if(h)for(let n=0,t=0;n<a.length;t+=b[n],n++)if(h=a[n],z(h)){var e=h.mask;for(var p=0;p<l;p++)for(var q=0;q<b[n];q++)c[p*m+q+t]=null==e?255:e[p*h.width+q]}for(h=0;h<d;h++){e=new g(m*l);for(let n=
0,t=0;n<a.length;t+=b[n],n++)if(p=a[n],z(p)&&(q=p.pixels[h],null!=q))for(let u=0;u<l;u++)for(let r=0;r<b[n];r++)e[u*m+r+t]=q[u*p.width+r];k.push(e)}a=new A({width:m,height:l,mask:c,pixels:k,pixelType:f.pixelType});a.updateStatistics();return a}function X(a){if(!z(a))return null;const c=a.clone(),{width:b,height:f,pixels:h,mask:m}=a;var l=h[0];a=c.pixels[0];for(let g=2;g<f-1;g++){const e=new Map;for(var k=g-2;k<g+2;k++)for(var d=0;4>d;d++){const p=k*b+d;M(e,l[p],m?m[p]:1)}a[g*b]=Y(e);a[g*b+1]=a[g*
b+2]=a[g*b];for(k=3;k<b-1;k++)d=(g-2)*b+k+1,M(e,l[d],m?m[d]:1),d=(g-1)*b+k+1,M(e,l[d],m?m[d]:1),d=g*b+k+1,M(e,l[d],m?m[d]:1),d=(g+1)*b+k+1,M(e,l[d],m?m[d]:1),d=(g-2)*b+k-3,Q(e,l[d],m?m[d]:1),d=(g-1)*b+k-3,Q(e,l[d],m?m[d]:1),d=g*b+k-3,Q(e,l[d],m?m[d]:1),d=(g+1)*b+k-3,Q(e,l[d],m?m[d]:1),a[g*b+k]=Y(e);a[g*b+k+1]=a[g*b+k]}for(l=0;l<b;l++)a[l]=a[b+l]=a[2*b+l],a[(f-1)*b+l]=a[(f-2)*b+l];c.updateStatistics();return c}function Y(a){if(0===a.size)return 0;let c=0,b=-1,f=0;const h=a.keys();let m=h.next();for(;!m.done;)f=
a.get(m.value),f>c&&(b=m.value,c=f),m=h.next();return b}function Q(a,c,b){0!==b&&(b=a.get(c),1===b?a.delete(c):a.set(c,b-1))}function M(a,c,b){0!==b&&a.set(c,a.has(c)?a.get(c)+1:1)}function Z(a,c,b){let {x:f,y:h}=c;const {width:m,height:l}=b;if(0===f&&0===h&&l===a.height&&m===a.width)return a;const {width:k,height:d}=a;c=Math.max(0,h);const g=Math.max(0,f),e=Math.min(f+m,k),p=Math.min(h+l,d);if(0>e||0>p||!z(a))return null;f=Math.max(0,-f);h=Math.max(0,-h);const {pixels:q,mask:n}=a;var t=m*l,u=q.length;
const r=[];for(var v=0;v<u;v++){var w=q[v],x=A.createEmptyBand(a.pixelType,t);for(let B=c;B<p;B++){const I=B*k;let J=(B+h-c)*m+f;for(let F=g;F<e;F++)x[J++]=w[I+F]}r.push(x)}t=new Uint8Array(t);for(u=c;u<p;u++)for(v=u*k,w=(u+h-c)*m+f,x=g;x<e;x++)t[w++]=n?n[v+x]:1;a=new A({width:b.width,height:b.height,pixelType:a.pixelType,pixels:r,mask:t});a.updateStatistics();return a}function ba(a,c=!0){if(!z(a))return null;const {pixels:b,width:f,height:h,mask:m,pixelType:l}=a;a=[];const k=Math.round(f/2),d=Math.round(h/
2),g=h-1,e=f-1;for(var p=0;p<b.length;p++){var q=b[p],n=A.createEmptyBand(l,k*d),t=0;for(var u=0;u<h;u+=2)for(var r=0;r<f;r+=2){var v=q[u*f+r];if(c){var w=r===e?v:q[u*f+r+1];const x=u===g?v:q[u*f+r+f],B=r===e?x:u===g?w:q[u*f+r+f+1];n[t++]=(v+w+x+B)/4}else n[t++]=v}a.push(n)}p=null;if(m)for(p=new Uint8Array(k*d),q=0,n=0;n<h;n+=2)for(t=0;t<f;t+=2)u=m[n*f+t],c?(r=t===e?u:m[n*f+t+1],v=n===g?u:m[n*f+t+f],w=t===e?v:n===g?r:m[n*f+t+f+1],p[q++]=u*r*v*w?1:0):p[q++]=u;return new A({width:k,height:d,pixelType:l,
pixels:a,mask:p})}y.approximateTransform=function(a,c,b,f,h="nearest"){if(!z(a))return null;"majority"===h&&(a=X(a));const {pixels:m,mask:l,pixelType:k}=a,d=a.width;var g=a.height;a=A.getPixelArrayConstructor(k);var e=m.length;const {width:p,height:q}=c;c=f.cols;var n=f.rows;const t=Math.ceil(p/c-.1/c),u=Math.ceil(q/n-.1/n);f=!1;for(var r=0;r<b.length;r+=3)-1===b[r]&&-1===b[r+1]&&-1===b[r+2]&&(f=!0);let v,w,x,B,I,J;const F=t*c;r=F*u*n;const N=new Float32Array(r),O=new Float32Array(r);r=0;let K,L;
const R="majority"===h?0:.5;for(let G=0;G<u;G++)for(let H=0;H<t;H++){v=12*(G*t+H);h=b[v];w=b[v+1];x=b[v+2];B=b[v+3];I=b[v+4];J=b[v+5];for(var C=0;C<n;C++){r=(G*n+C)*F+H*c;L=(C+.5)/n;for(var D=0;D<C;D++)K=(D+.5)/c,N[r+D]=Math.round((h*K+w*L+x)*d-R),O[r+D]=Math.round((B*K+I*L+J)*g-R)}v+=6;h=b[v];w=b[v+1];x=b[v+2];B=b[v+3];I=b[v+4];J=b[v+5];for(C=0;C<n;C++)for(r=(G*n+C)*F+H*c,L=(C+.5)/n,D=C;D<c;D++)K=(D+.5)/c,N[r+D]=Math.round((h*K+w*L+x)*d-R),O[r+D]=Math.round((B*K+I*L+J)*g-R)}b=(G,H)=>{for(let S=0;S<
q;S++){v=S*F;for(let T=0;T<p;T++)G[S*p+T]=0>N[v]||0>O[v]?0:H[N[v]+O[v]*d],v++}};g=[];for(n=0;n<e;n++)c=new a(p*q),b(c,m[n]),g.push(c);a=new A({width:p,height:q,pixelType:k,pixels:g});if(l)a.mask=new Uint8Array(p*q),b(a.mask,l);else if(f)for(a.mask=new Uint8Array(p*q),e=0;e<p*q;e++)a.mask[e]=0>N[e]||0>O[e]?0:1;a.updateStatistics();return a};y.clip=Z;y.colorize=function(a,c){if(!z(a)||!c&&(c.indexedColormap||c.indexed2DColormap))return a;const b=a.clone();var f=b.pixels;let h=b.mask;const m=b.width*
b.height;if(1!==f.length)return a;const {indexedColormap:l,indexed2DColormap:k,offset:d,alphaSpecified:g}=c;c=l.length-1;a=0;f=f[0];const e=new Uint8Array(f.length),p=new Uint8Array(f.length),q=new Uint8Array(f.length);let n=0;if(l)if(h)for(a=0;a<m;a++)h[a]&&(n=4*(f[a]-d),n<d||n>c?h[a]=0:(e[a]=l[n],p[a]=l[n+1],q[a]=l[n+2],h[a]=l[n+3]));else{h=new Uint8Array(m);for(a=0;a<m;a++)n=4*(f[a]-d),n<d||n>c?h[a]=0:(e[a]=l[n],p[a]=l[n+1],q[a]=l[n+2],h[a]=l[n+3]);b.mask=h}else if(h)for(a=0;a<m;a++)h[a]&&(c=k[f[a]],
e[a]=c[0],p[a]=c[1],q[a]=c[2],h[a]=c[3]);else{h=new Uint8Array(m);for(a=0;a<m;a++)c=k[f[a]],e[a]=c[0],p[a]=c[1],q[a]=c[2],h[a]=c[3];b.mask=h}b.pixels=[e,p,q];b.statistics=null;b.pixelType="u8";b.maskIsAlpha=g;return b};y.createColormapLUT=function(a){if(a){var c=a.colormap;if(c&&0!==c.length){c=c.sort((g,e)=>g[0]-e[0]);var b=0;0>c[0][0]&&(b=c[0][0]);var f=Math.max(256,c[c.length-1][0]-b+1),h=new Uint8Array(4*f),m=[],l=0,k=0,d=5===c[0].length;if(65536<f)return c.forEach(g=>{m[g[0]-b]=d?g.slice(1):
g.slice(1).concat([255])}),{indexed2DColormap:m,offset:b,alphaSpecified:d};if(a.fillUnspecified)for(a=c[k],l=a[0]-b;l<f;l++)h[4*l]=a[1],h[4*l+1]=a[2],h[4*l+2]=a[3],h[4*l+3]=d?a[4]:255,l===a[0]-b&&(a=k===c.length-1?a:c[++k]);else for(l=0;l<c.length;l++)a=c[l],k=4*(a[0]-b),h[k]=a[1],h[k+1]=a[2],h[k+2]=a[3],h[k+3]=d?a[4]:255;return{indexedColormap:h,offset:b,alphaSpecified:d}}}};y.createContrastBrightnessLUT=U;y.createHistogramEqualizationLUT=function(a,c=256){c=Math.min(c,256);const {size:b,counts:f}=
a;a=new Uint8Array(b);var h=f.reduce((g,e)=>g+e/c,0);let m=0;var l=0;let k=0,d=h;for(let g=0;g<b;g++)if(k+=f[g],!(g<b-1&&k+f[g+1]<d)){for(;m<c-1&&d<k;)m++,d+=h;for(;l<=g;l++)a[l]=m;l=g+1}for(h=l;h<b;h++)a[h]=c-1;return a};y.createStretchLUT=function(a){const {minCutOff:c,maxCutOff:b,gamma:f,pixelType:h}=a,m=a.outMin||0,l=a.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(h))return null;const k=c.length;let d;let g=0;"s8"===h?g=-127:"s16"===h&&(g=-32767);let e=256;-1<["u16","s16"].indexOf(h)&&(e=
65536);const p=[],q=l-m;for(d=0;d<k;d++)p[d]=b[d]-c[d];var n=f&&f.length>=k;const t=[];if(n)for(d=0;d<k;d++)t[d]=1<f[d]?2<f[d]?6.5+(f[d]-2)**2.5:6.5+100*(2-f[d])**4:1;let u;const r=[];let v,w,x;if(n)for(d=0;d<k;d++){x=[];for(n=0;n<e;n++)v=n+g,u=(v-c[d])/p[d],w=1,1<f[d]&&(w-=(1/q)**(u*t[d])),x[n]=v<b[d]&&v>c[d]?Math.floor(w*q*u**(1/f[d]))+m:v>=b[d]?l:m;r[d]=x}else for(d=0;d<k;d++){x=[];for(n=0;n<e;n++)v=n+g,x[n]=v<=c[d]?m:v>=b[d]?l:Math.floor((v-c[d])/p[d]*q)+m;r[d]=x}if(null!=a.contrastOffset)for(a=
U(a.contrastOffset,a.brightnessOffset),d=0;d<k;d++)for(x=r[d],n=0;n<e;n++)x[n]=a[x[n]];return{lut:r,offset:g}};y.estimateStatisticsFromHistograms=function(a){const c=[];for(let m=0;m<a.length;m++){const {min:l,max:k,size:d,counts:g}=a[m];let e=0;var b=0;for(var f=0;f<d;f++)e+=g[f],b+=f*g[f];b/=e;f=0;for(var h=0;h<d;h++)f+=g[h]*(h-b)**2;h=(k-l)/d;c.push({min:l,max:k,avg:(b+.5)*h+l,stddev:Math.sqrt(f/(e-1))*h})}return c};y.estimateStatisticsHistograms=function(a){if(!z(a))return null;a.statistics||
a.updateStatistics();const {pixels:c,mask:b,pixelType:f,statistics:h}=a;a=a.width*a.height;const m=c.length;let l,k;let d;var g;const e=[],p=[];for(d=0;d<m;d++){var q=new Uint32Array(256);var n=c[d];if("u8"===f)if(l=-.5,k=255.5,b)for(g=0;g<a;g++)b[g]&&q[n[g]]++;else for(g=0;g<a;g++)q[n[g]]++;else{l=h[d].minValue;k=h[d].maxValue;var t=(k-l)/256;var u=new Uint32Array(257);if(b)for(g=0;g<a;g++)b[g]&&u[Math.floor((n[g]-l)/t)]++;else for(g=0;g<a;g++)u[Math.floor((n[g]-l)/t)]++;for(g=0;255>g;g++)q[g]=u[g];
q[255]=u[255]+u[256]}e.push({min:l,max:k,size:256,counts:q});for(g=n=u=t=0;256>g;g++)t+=q[g],u+=g*q[g];u/=t;for(g=0;256>g;g++)n+=q[g]*(g-u)**2;q=Math.sqrt(n/(t-1));t=(k-l)/256;g=(u+.5)*t+l;q*=t;p.push({min:l,max:k,avg:g,stddev:q})}return{statistics:p,histograms:e}};y.extractBands=function(a,c){if(null==c||!c.length||!z(a))return a;const b=a.pixels.length;return c&&c.some(f=>f>=b)||1===b&&1===c.length&&0===c[0]||b===c.length&&!c.some((f,h)=>f!==h)?a:new A({pixelType:a.pixelType,width:a.width,height:a.height,
mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,pixels:c.map(f=>a.pixels[f]),statistics:a.statistics&&c.map(f=>a.statistics[f])})};y.getClipBounds=V;y.isValidPixelBlock=z;y.lookupPixels=function(a,c){if(!z(a))return null;const {pixels:b,mask:f}=a,h=a.width*a.height,m=b.length;let l=c.lut;({offset:c}=c);let k,d;l&&1===l[0].length&&(l=b.map(()=>l));const g=[];let e,p,q;if(c)if(null==f)for(k=0;k<m;k++){e=b[k];p=l[k];q=new Uint8Array(h);for(d=0;d<h;d++)q[d]=p[e[d]-c];g.push(q)}else for(k=
0;k<m;k++){e=b[k];p=l[k];q=new Uint8Array(h);for(d=0;d<h;d++)f[d]&&(q[d]=p[e[d]-c]);g.push(q)}else if(null==f)for(k=0;k<m;k++){e=b[k];p=l[k];q=new Uint8Array(h);for(d=0;d<h;d++)q[d]=p[e[d]];g.push(q)}else for(k=0;k<m;k++){e=b[k];p=l[k];q=new Uint8Array(h);for(d=0;d<h;d++)f[d]&&(q[d]=p[e[d]]);g.push(q)}a=new A({width:a.width,height:a.height,pixels:g,mask:f,pixelType:"u8"});a.updateStatistics();return a};y.mosaic=W;y.mosaicPixelData=function(a,c){if(!a||0===a.length)return null;var b=a.filter(p=>p.pixelBlock)[0];
if(!b||E.isNone(b.pixelBlock))return null;var f=(b.extent.xmax-b.extent.xmin)/b.pixelBlock.width;const h=(b.extent.ymax-b.extent.ymin)/b.pixelBlock.height,m=.01*Math.min(f,h),l=a.sort((p,q)=>Math.abs(p.extent.ymax-q.extent.ymax)>m?q.extent.ymax-p.extent.ymax:Math.abs(p.extent.xmin-q.extent.xmin)>m?p.extent.xmin-q.extent.xmin:0);var k=Math.min.apply(null,l.map(p=>p.extent.xmin));const d=Math.min.apply(null,l.map(p=>p.extent.ymin)),g=Math.max.apply(null,l.map(p=>p.extent.xmax)),e=Math.max.apply(null,
l.map(p=>p.extent.ymax));a={x:Math.round((c.xmin-k)/f),y:Math.round((e-c.ymax)/h)};k={width:Math.round((g-k)/f),height:Math.round((e-d)/h)};f={width:Math.round((c.xmax-c.xmin)/f),height:Math.round((c.ymax-c.ymin)/h)};if(Math.round(k.width/b.pixelBlock.width)*Math.round(k.height/b.pixelBlock.height)!==l.length||0>a.x||0>a.y||k.width<f.width||k.height<f.height)return null;b=l.map(p=>p.pixelBlock);b=W(b,k,{clipOffset:a,clipSize:f});return{extent:c,pixelBlock:b}};y.remapColor=function(a,c){if(!z(a))return null;
a=a.clone();var {pixels:b}=a;const f=a.width*a.height,h=c.length,m=Math.floor(h/2),l=c[Math.floor(m)];b=b[0];let k,d,g,e,p,q,n=!1;const t=new Uint8Array(f),u=new Uint8Array(f),r=new Uint8Array(f);let v=a.mask;const w=4===c[0].mappedColor.length;v||(v=new Uint8Array(f),v.fill(w?255:1),a.mask=v);for(p=0;p<f;p++)if(v[p]){k=b[p];n=!1;q=m;d=l;g=0;for(e=h-1;1<e-g;){if(k===d.value){n=!0;break}k>d.value?g=q:e=q;q=Math.floor((g+e)/2);d=c[Math.floor(q)]}n||(k===c[g].value?(d=c[g],n=!0):k===c[e].value?(d=c[e],
n=!0):k<c[g].value?(n=!1,d=null):k>c[g].value&&(k<c[e].value?(d=c[g],n=!0):e===h-1?(n=!1,d=null):(d=c[e],n=!0)));n?(t[p]=d.mappedColor[0],u[p]=d.mappedColor[1],r[p]=d.mappedColor[2],v[p]=d.mappedColor[3]):t[p]=u[p]=r[p]=v[p]=0}a.pixels=[t,u,r];a.mask=v;a.pixelType="u8";a.maskIsAlpha=w;return a};y.resampleByMajority=X;y.setValidBoundary=function(a,c,b){if(!z(a))return null;const {width:f,height:h}=a,m=c.x;c=c.y;const l=b.width+m;b=b.height+c;if(0>m||0>c||l>f||b>h||0===m&&0===c&&l===f&&b===h)return a;
a.mask||(a.mask=new Uint8Array(f*h));const k=a.mask;for(let d=0;d<h;d++){const g=d*f;for(let e=0;e<f;e++)k[g+e]=d<c||d>=b||e<m||e>=l?0:1}a.updateStatistics();return a};y.split=function(a,c,b){if(!z(a))return null;const {width:f,height:h}=c;let {width:m,height:l}=a;const k=new Map,d={x:0,y:0};b=null==b?1:1+b;for(let g=0;g<b;g++){const e=Math.ceil(m/f),p=Math.ceil(l/h);for(let q=0;q<p;q++){d.y=q*h;for(let n=0;n<e;n++){d.x=n*f;const t=Z(a,d,c);k.set(`${g}/${q}/${n}`,t)}}g<b-1&&(a=ba(a));m=Math.round(m/
2);l=Math.round(l/2)}return k};y.stretch=function(a,c){if(!z(a))return null;a=a.clone();const {pixels:b,mask:f}=a,{minCutOff:h,maxCutOff:m,gamma:l}=c,k=c.outMin||0;c=c.outMax||255;const d=a.width*a.height,g=b.length;let e;let p,q,n;const t=c-k,u=[];for(e=0;e<g;e++)u[e]=m[e]-h[e];var r=l&&l.length>=g;const v=[];if(r)for(e=0;e<g;e++)v[e]=1<l[e]?2<l[e]?6.5+(l[e]-2)**2.5:6.5+100*(2-l[e])**4:1;if(r)if(null!=f)for(r=0;r<d;r++){if(f[r])for(e=0;e<g;e++)p=b[e][r],n=(p-h[e])/u[e],q=1,1<l[e]&&(q-=(1/t)**(n*
v[e])),b[e][r]=p<m[e]&&p>h[e]?Math.floor(q*t*n**(1/l[e]))+k:p>=m[e]?c:k}else for(r=0;r<d;r++)for(e=0;e<g;e++)p=b[e][r],n=(p-h[e])/u[e],q=1,1<l[e]&&(q-=(1/t)**(n*v[e])),b[e][r]=p<m[e]&&p>h[e]?Math.floor(q*t*n**(1/l[e]))+k:p>=m[e]?c:k;else if(null!=f)for(r=0;r<d;r++){if(f[r])for(e=0;e<g;e++)p=b[e][r],b[e][r]=p<m[e]&&p>h[e]?Math.floor((p-h[e])/u[e]*t)+k:p>=m[e]?c:k}else for(r=0;r<d;r++)for(e=0;e<g;e++)p=b[e][r],b[e][r]=p<m[e]&&p>h[e]?Math.floor((p-h[e])/u[e]*t)+k:p>=m[e]?c:k;a.pixelType="u8";a.updateStatistics();
return a};Object.defineProperty(y,"__esModule",{value:!0})});