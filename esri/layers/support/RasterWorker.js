// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(S){return function(){function y(T){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(T&&T.steps)for(const x of T.steps)x instanceof S?this.steps.push(x):this.steps.push(new S({wkid:x.wkid,wkt:x.wkt,isInverse:x.isInverse}))}y.cacheKey=function(T,x){return[void 0!==T.wkid&&null!==T.wkid?T.wkid.toString():"-1",void 0!==T.wkt&&null!==T.wkt?T.wkt.toString():
"",void 0!==x.wkid&&null!==x.wkid?x.wkid.toString():"-1",void 0!==x.wkt&&null!==x.wkt?x.wkt.toString():""].join()};y.fromGE=function(T){const x=new y;let P="";for(const ea of T.steps)T=S.fromGE(ea),x.steps.push(T),P+=T.uid.toString()+",";x._cached_projection={};x._gtlistentry=null;x._chain=P;return x};var aa=y.prototype;aa.getInverse=function(){const T=new y;T.steps=[];for(let x=this.steps.length-1;0<=x;x--)T.steps.push(this.steps[x].getInverse());return T};aa.getGTListEntry=function(){let T="";for(const x of this.steps)T+=
x.uid.toString()+",";T!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=T);return this._gtlistentry};aa.assignCachedGe=function(T,x,P){this._cached_projection[y.cacheKey(T,x)]=P};aa.getCachedGeTransformation=function(T,x){let P="";for(const ea of this.steps)P+=ea.uid.toString()+",";P!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=P);T=this._cached_projection[y.cacheKey(T,x)];return void 0===T?null:T};return y}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(S){let y=0;return function(){function aa(T=null){this.uid=y++;T?(this._wkt=void 0!==T.wkt?T.wkt:null,this._wkid=void 0!==T.wkid?T.wkid:-1,this._isInverse=void 0!==T.isInverse?!0===T.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}aa.fromGE=function(T){const x=new aa;x._wkt=T.wkt;x._wkid=T.wkid;x._isInverse=T.isInverse;return x};aa.prototype.getInverse=function(){const T=new aa;T._wkt=this.wkt;T._wkid=this._wkid;T._isInverse=!this.isInverse;return T};S._createClass(aa,[{key:"wkt",
get:function(){return this._wkt},set:function(T){this._wkt=T;this.uid=y++}},{key:"wkid",get:function(){return this._wkid},set:function(T){this._wkid=T;this.uid=y++}},{key:"isInverse",get:function(){return this._isInverse},set:function(T){this._isInverse=T;this.uid=y++}}]);return aa}()})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(S,y,aa,T,x,P,ea,na,X,la,ba){var Y;const U=ea.getLogger("esri.layers.support.PixelBlock");aa=Y=function(F){function G(c){c=F.call(this,c)||this;c.width=null;c.height=null;c.pixelType="f32";c.validPixelCount=null;c.mask=null;c.maskIsAlpha=!1;c.pixels=null;c.statistics=null;return c}S._inheritsLoose(G,F);G.createEmptyBand=function(c,l){return new (Y.getPixelArrayConstructor(c))(l)};G.getPixelArrayConstructor=function(c){let l;switch(c){case "u1":case "u2":case "u4":case "u8":l=Uint8Array;break;
case "u16":l=Uint16Array;break;case "u32":l=Uint32Array;break;case "s8":l=Int8Array;break;case "s16":l=Int16Array;break;case "s32":l=Int32Array;break;case "u32":l=Uint32Array;break;case "f32":l=Float32Array;break;case "f64":l=Float64Array;break;case "c64":case "c128":case "unknown":l=Float32Array}return l};var d=G.prototype;d.castPixelType=function(c){if(!c)return"f32";c=c.toLowerCase();-1<["u1","u2","u4"].indexOf(c)?c="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(c)&&(c="f32");
return c};d.getPlaneCount=function(){return this.pixels&&this.pixels.length};d.addData=function(c){if(!c.pixels||c.pixels.length!==this.width*this.height)throw new T("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(c.pixels);this.statistics.push(c.statistics||{minValue:null,maxValue:null})};d.getAsRGBA=function(){const c=new ArrayBuffer(this.width*
this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(c);break;default:this._fillFrom8Bit(c)}return new Uint8ClampedArray(c)};d.getAsRGBAFloat=function(){const c=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(c);return c};d.updateStatistics=function(){this.statistics=this.pixels.map(E=>this._calculateBandStatistics(E,this.mask));const c=this.mask;let l=0;if(c)for(let E=0;E<c.length;E++)c[E]&&l++;else l=
this.width*this.height;this.validPixelCount=l};d.clamp=function(c){if(c&&"f64"!==c&&"f32"!==c){switch(c){case "u8":var l=[0,255];break;case "u16":l=[0,65535];break;case "u32":l=[0,4294967295];break;case "s8":l=[-128,127];break;case "s16":l=[-32768,32767];break;case "s32":l=[-2147483648,2147483647];break;default:l=[-3.4*1E39,3.4*1E39]}var [E,q]=l;l=this.pixels;var u=this.width*this.height,w=l.length,h=[];for(let m=0;m<w;m++){var e=Y.createEmptyBand(c,u);var n=l[m];for(let v=0;v<u;v++){var r=n[v];e[v]=
r>q?q:r<E?E:r}h.push(e)}this.pixels=h;this.pixelType=c}};d.extractBands=function(c){if(na.isNone(c)||0===c.length||null==this.pixels||0===this.pixels.length)return this;var l=this.pixels.length;const E=c.some(q=>q>=this.pixels.length);l=l===c.length&&!c.some((q,u)=>q!==u);return E||l?this:new Y({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:c.map(q=>this.pixels[q]),statistics:this.statistics&&c.map(q=>
this.statistics[q])})};d.clone=function(){const c=new Y({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(c.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let l;const E=Y.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){c.pixels=[];const q=this.pixels[0].slice;for(l=0;l<this.pixels.length;l++)c.pixels[l]=q?this.pixels[l].slice(0,this.pixels[l].length):
new E(this.pixels[l])}if(this.statistics)for(c.statistics=[],l=0;l<this.statistics.length;l++)c.statistics[l]=P.clone(this.statistics[l]);return c};d._fillFrom8Bit=function(c){const {mask:l,maskIsAlpha:E,pixels:q}=this;if(c&&q&&q.length){var u,w;var h=u=w=q[0];3<=q.length?(u=q[1],w=q[2]):2===q.length&&(u=q[1]);var e=new Uint32Array(c),n=this.width*this.height;if(h.length!==n)U.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(l&&l.length===n)if(E)for(c=0;c<n;c++)l[c]&&
(e[c]=l[c]<<24|w[c]<<16|u[c]<<8|h[c]);else for(c=0;c<n;c++)l[c]&&(e[c]=-16777216|w[c]<<16|u[c]<<8|h[c]);else for(c=0;c<n;c++)e[c]=-16777216|w[c]<<16|u[c]<<8|h[c]}else U.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};d._fillFromNon8Bit=function(c){const {pixels:l,mask:E,statistics:q}=this;if(c&&l&&l.length){var u=this.pixelType,w=1,h=0;w=1;q&&0<q.length?(h=q.map(v=>v.minValue).reduce((v,C)=>Math.min(v,C)),w=q.map(v=>v.maxValue-v.minValue).reduce((v,C)=>Math.max(v,
C)),w=255/w):(w=255,"s8"===u?(h=-128,w=127):"u16"===u?w=65535:"s16"===u?(h=-32768,w=32767):"u32"===u?w=4294967295:"s32"===u?(h=-2147483648,w=2147483647):"f32"===u?(h=-3.4*1E39,w=3.4*1E39):"f64"===u&&(h=-Number.MAX_VALUE,w=Number.MAX_VALUE),w=255/(w-h));c=new Uint32Array(c);u=this.width*this.height;var e,n,r;var m=e=n=l[0];if(m.length!==u)return U.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=l.length)if(e=l[1],3<=l.length&&(n=l[2]),E&&E.length===u)for(r=0;r<u;r++)E[r]&&
(c[r]=-16777216|(n[r]-h)*w<<16|(e[r]-h)*w<<8|(m[r]-h)*w);else for(r=0;r<u;r++)c[r]=-16777216|(n[r]-h)*w<<16|(e[r]-h)*w<<8|(m[r]-h)*w;else if(E&&E.length===u)for(r=0;r<u;r++)e=(m[r]-h)*w,E[r]&&(c[r]=-16777216|e<<16|e<<8|e);else for(r=0;r<u;r++)e=(m[r]-h)*w,c[r]=-16777216|e<<16|e<<8|e}else U.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};d._fillFrom32Bit=function(c){const {pixels:l,mask:E}=this;if(!c||!l||!l.length)return U.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let q,u,w,h;q=u=w=l[0];3<=l.length?(u=l[1],w=l[2]):2===l.length&&(u=l[1]);const e=this.width*this.height;if(q.length!==e)return U.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let n=0;if(E&&E.length===e)for(h=0;h<e;h++)c[n++]=q[h],c[n++]=u[h],c[n++]=w[h],c[n++]=E[h]&1;else for(h=0;h<e;h++)c[n++]=q[h],c[n++]=u[h],c[n++]=w[h],c[n++]=1};d._calculateBandStatistics=function(c,l){let E=Infinity,q=-Infinity;const u=c.length;let w,h=0;if(l)for(w=0;w<u;w++)l[w]&&(h=c[w],
E=h<E?h:E,q=h>q?h:q);else for(w=0;w<u;w++)h=c[w],E=h<E?h:E,q=h>q?h:q;return{minValue:E,maxValue:q}};return G}(x.JSONSupport);y.__decorate([X.property({json:{write:!0}})],aa.prototype,"width",void 0);y.__decorate([X.property({json:{write:!0}})],aa.prototype,"height",void 0);y.__decorate([X.property({json:{write:!0}})],aa.prototype,"pixelType",void 0);y.__decorate([la.cast("pixelType")],aa.prototype,"castPixelType",null);y.__decorate([X.property({json:{write:!0}})],aa.prototype,"validPixelCount",void 0);
y.__decorate([X.property({json:{write:!0}})],aa.prototype,"mask",void 0);y.__decorate([X.property({json:{write:!0}})],aa.prototype,"maskIsAlpha",void 0);y.__decorate([X.property({json:{write:!0}})],aa.prototype,"pixels",void 0);y.__decorate([X.property({json:{write:!0}})],aa.prototype,"statistics",void 0);return aa=Y=y.__decorate([ba.subclass("esri.layers.support.PixelBlock")],aa)})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ../../../chunks/TiffDecoder ../../../chunks/LercCodec ./Lzw ../../../chunks/Zlib ./Raw ./utils".split(" "),
function(S,y,aa,T,x,P,ea,na,X,la,ba,Y){function U(t,B){if(!Y.isPlatformLittleEndian)throw new aa("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:p,height:f,pixelType:D}=B;var z=n(D);const g=z.pixelTypeCtor;B=null==B.noDataValue?z.noDataValue:B.noDataValue;z=0;let k,A=0,J;const I=t.byteLength-10;for(;A<I;){var K=na.decode(t,{inputOffset:A,encodedMaskData:k,returnMask:0===z?!0:!1,returnEncodedMask:0===z?!0:!1,returnFileInfo:!0,pixelType:g,noDataValue:B});if(p&&
f&&(K.width!==p||K.height!==f))throw new aa("rasterCoded:decode","lerc decoded result has width or height different from specified in options");A=K.fileInfo.eofOffset;0===z&&(k=K.encodedMaskData,J=new T({width:K.width,height:K.height,pixels:[],pixelType:D,mask:K.maskData,statistics:[]}));z++;J.addData({pixels:K.pixelData,statistics:{minValue:K.minValue,maxValue:K.maxValue,noDataValue:K.noDataValue}});10<I-A&&(K=String.fromCharCode.apply(null,new Uint8Array(t,A,10)),A+=-1<K.indexOf("CntZ")?K.indexOf("CntZ"):
0)}return J}function F(t,B){if(!Y.isPlatformLittleEndian)throw new aa("rasterCoded:decode","lerc decoder is not supported on big endian platform");var p=0,f=B.offset||0,D=0;let z;let g;const k=B.eof||t.byteLength-10,A=[],{width:J,height:I}=B;for(B=0;f<k;){var K;var O=ea.Lerc2Codec.decode(t,{inputOffset:f,maskData:z,returnFileInfo:!0});if(J&&I&&(O.width!==J||O.height!==I))throw new aa("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");f=O.fileInfo.eofOffset;
z=O.maskData;0===p&&(D=O.fileInfo.numValidPixel,g=new T({width:O.width,height:O.height,pixels:[],pixelType:O.fileInfo.pixelType,mask:z,statistics:[]}));O.fileInfo.mask&&0<O.fileInfo.mask.numBytes&&B++;z&&A.push(z);if(1<O.dimCount&&(null==(K=O.pixelData)?void 0:K.length)===O.width*O.height*O.dimCount){var R,V,Z,Q;O.pixelData=O.pixelData.slice(-O.width*O.height);const da=null==(R=O.dimStats)?void 0:null==(V=R.minValues)?void 0:V[O.dimCount-1],a=null==(Z=O.dimStats)?void 0:null==(Q=Z.maxValues)?void 0:
Q[O.dimCount-1];null!=da&&null!=a&&(O.minValue=da,O.maxValue=a)}p++;g.addData({pixels:O.pixelData,statistics:{minValue:O.minValue,maxValue:O.maxValue}});10<k-f&&(O=String.fromCharCode.apply(null,new Uint8Array(t,f,10)),f+=-1<O.indexOf("Lerc")?O.indexOf("Lerc"):0)}f=p=t=0;if(1<B){f=g.width*g.height;z=new Uint8Array(f);z.set(A[0]);for(t=1;t<A.length;t++)for(D=A[t],p=0;p<f;p++)z[p]&=D[p];for(p=D=0;p<f;p++)D+=z[p];g.mask=z}g.validPixelCount=D;return g}function G(t,B){t=ea.decode(t,B.pyramidLevel||0);
t=new T({width:t.width,height:t.height,pixels:t.pixels,pixelType:t.pixelType.toLowerCase(),mask:t.mask,statistics:null});t.updateStatistics();return t}function d(t,B){const p=B.pixelType||"u8",f=T.getPixelArrayConstructor(p),D="u8"===p?t:new f(t.buffer),z=[],g=B.planes||1;if(1===g)z.push(D);else for(let k=0;k<g;k++){const A=(B.width||1)*(B.height||t.length),J=new f(A);for(let I=0;I<A;I++)J[I]=D[I*g+k];z.push(J)}t=new T({width:B.width||1,height:B.height||t.length,pixels:z,pixelType:p,statistics:null});
t.updateStatistics();return t}function c(t,B){t=(new la.Zlib(new Uint8Array(t))).getBytes();return d(t,B)}function l(t,B){t=X.decode(t,B.offset,B.eof,!B.isInputBigEndian);return d(t,B)}function E(t){t=P.decode(t);t=new T({width:t.width,height:t.height,pixels:t.pixels,pixelType:"U8",mask:t.mask,statistics:null});t.updateStatistics();return t}function q(t,B){t=new Uint8Array(t);t=new v(t);const {width:p,height:f}=B;B=p*f;t=t.decode();let D=0;var z=0;let g;z=new Uint8Array(B);for(D=0;D<B;D++)z[D]=t[4*
D+3];const k=new T({width:p,height:f,pixels:[],pixelType:"U8",mask:z,statistics:[]});for(D=0;3>D;D++){g=new Uint8Array(B);for(z=0;z<B;z++)g[z]=t[4*z+D];k.addData({pixels:g})}k.updateStatistics();return k}function u(t,B,p,f){return w.apply(this,arguments)}function w(){w=y._asyncToGenerator(function*(t,B,p,f){t=yield(new x).decode(t,{applyJpegMask:!1,format:B,...p},f);t=new T(t);t.updateStatistics();return t});return w.apply(this,arguments)}function h(t){if(null==t)throw new aa("rasterCodec:decode",
"parameter encodeddata is required.");t=new Uint8Array(t,0,10);let B="";255===t[0]&&216===t[1]?B="jpg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?B="png":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===t[7]&&101===t[8]&&32===t[9]?B="lerc":76===t[0]&&101===t[1]&&114===t[2]&&99===t[3]&&50===t[4]&&32===t[5]?B="lerc2":73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]||73===t[0]&&73===t[1]&&43===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&
0===t[2]&&43===t[3]?B="tiff":71===t[0]&&73===t[1]&&70===t[2]?B="gif":66===t[0]&&77===t[1]?B="bmp":-1<String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")&&(B="error");return B}function e(t){let B=null;switch(t){case "lerc":B=U;break;case "lerc2":B=F;break;case "jpg":B=E;break;case "png":B=q;break;case "bsq":case "bip":B=(p,f)=>{{const {pixelTypeCtor:D}=n(f.pixelType),z=ba.decode;p=z(p,{width:f.width,height:f.height,pixelType:D,format:t});f=new T({width:f.width,height:f.height,pixels:p.pixels,
pixelType:f.pixelType,mask:p.mask,statistics:null});f.updateStatistics()}return f};break;case "tiff":B=G;break;case "deflate":B=c;break;case "lzw":B=l;break;case "error":B=()=>{throw new aa("rasterCodec:decode","input data contains error");};break;default:B=()=>{throw new aa("rasterCodec:decode","unsupported raster format");}}return B}function n(t){let B=null,p=null;switch(t?t.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":p=255;B=Uint8Array;break;case "u16":p=p||65535;B=Uint16Array;
break;case "u32":p=p||2**32-1;B=Uint32Array;break;case "s8":p=p||-128;B=Int8Array;break;case "s16":p=p||-32768;B=Int16Array;break;case "s32":p=p||-(2**31);B=Int32Array;break;default:B=Float32Array}return{pixelTypeCtor:B,noDataValue:p}}function r(t,B=1){if(t){var {pixels:p,width:f,height:D,mask:z}=t;if(p&&0!==p.length){var g=p.length,k=f-1,A=D-1,J=[],I,K,O=T.getPixelArrayConstructor(t.pixelType);if(0===B){for(B=0;B<g;B++){var R=p[B];var V=new O(k*A);for(I=0;I<A;I++){var Z=I*f;for(K=0;K<k;K++)V[I*k+
K]=R[Z+K]}J.push(V)}if(z){var Q=new Uint8Array(k*A);for(I=0;I<A;I++)for(Z=I*f,K=0;K<k;K++)Q[I*k+K]=z[Z+K]}}else{for(B=0;B<g;B++){R=p[B];V=new O(k*A);for(I=0;I<A;I++)for(Z=I*f,K=0;K<k;K++)V[I*k+K]=(R[Z+K]+R[Z+K+1]+R[Z+f+K]+R[Z+f+K+1])/4;J.push(V)}if(z)for(Q=new Uint8Array(k*A),I=0;I<A;I++)for(Z=I*f,K=0;K<k;K++)Q[I*k+K]=Math.min.apply(null,[z[Z+K],z[Z+K+1],z[Z+f+K],z[Z+f+K+1]])}t.width=k;t.height=A;t.mask=Q;t.pixels=J}}}function m(){m=y._asyncToGenerator(function*(t,B={},p){if(null==t)throw new aa("rasterCodec:decode",
"missing encodeddata parameter.");let f=B.format&&B.format.toLowerCase();if(!("bsq"!==f&&"bip"!==f||null!=B.width&&null!=B.height))throw new aa("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===f&&B.customOptions)return B=ea.decodeTileOrStrip(t,B.customOptions),B=new T({width:B.width,height:B.height,pixels:B.pixels,pixelType:B.pixelType.toLowerCase(),mask:B.mask,statistics:null}),B.updateStatistics(),B;if(!f||"bsq"!==f&&"bip"!==f&&"deflate"!==f&&"lzw"!==f)f=h(t);
B.useCanvas&&C.has(f)?t=yield u(t,f,B,p):(p=e(f),B.isPoint&&(B={...B},B.width++,B.height++),t=p(t,B),B.isPoint&&r(t));return t});return m.apply(this,arguments)}var v=function(t){function B(z){var g,k;this.data=z;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(k=null;;){var A=this.readUInt32();var J=z=void 0;z=[];for(J=0;4>J;++J)z.push(String.fromCharCode(this.data[this.pos++]));z=z.join("");switch(z){case "IHDR":this.width=this.readUInt32();this.height=
this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(A);break;case "fcTL":k&&this.animation.frames.push(k);this.pos+=4;k={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),
yOffset:this.readUInt32()};z=this.readUInt16();A=this.readUInt16()||100;k.delay=1E3*z/A;k.disposeOp=this.data[this.pos++];k.blendOp=this.data[this.pos++];k.data=[];break;case "IDAT":case "fdAT":"fdAT"===z&&(this.pos+=4,A-=4);z=(null!=k?k.data:void 0)||this.imgData;for(J=0;0<=A?J<A:J>A;0<=A?++J:--J)z.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(A);A=255-this.transparency.indexed.length;if(0<A)for(z=0;0<=A?z<A:z>
A;0<=A?++z:--z)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(A)[0];break;case 2:this.transparency.rgb=this.read(A)}break;case "tEXt":J=this.read(A);A=J.indexOf(0);z=String.fromCharCode.apply(String,J.slice(0,A));this.text[z]=String.fromCharCode.apply(String,J.slice(A+1));break;case "IEND":k&&this.animation.frames.push(k);a:{switch(this.colorType){case 0:case 3:case 4:k=1;break a;case 2:case 6:k=3;break a}k=void 0}this.colors=k;this.hasAlphaChannel=4===(g=this.colorType)||
6===g;g=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*g;a:{switch(this.colors){case 1:g="DeviceGray";break a;case 3:g="DeviceRGB";break a}g=void 0}this.colorSpace=g;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=A}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var p;B.load=function(z,g,k){"function"===typeof g&&(k=g);var A=new XMLHttpRequest;A.open("GET",z,!0);A.responseType="arraybuffer";A.onload=function(){var J=
new Uint8Array(A.response||A.mozResponseArrayBuffer);J=new B(J);"function"===typeof(null!=g?g.getContext:void 0)&&J.render(g);return"function"===typeof k?k(J):void 0};return A.send(null)};B.prototype.read=function(z){var g;var k=[];for(g=0;0<=z?g<z:g>z;0<=z?++g:--g)k.push(this.data[this.pos++]);return k};B.prototype.readUInt32=function(){var z=this.data[this.pos++]<<24;var g=this.data[this.pos++]<<16;var k=this.data[this.pos++]<<8;var A=this.data[this.pos++];return z|g|k|A};B.prototype.readUInt16=
function(){var z=this.data[this.pos++]<<8;var g=this.data[this.pos++];return z|g};B.prototype.decodePixels=function(z){var g,k,A,J,I,K,O,R;null==z&&(z=this.imgData);if(0===z.length)return new Uint8Array(0);z=new la.Zlib(z);z=z.getBytes();var V=this.pixelBitlength/8;var Z=V*this.width;var Q=new Uint8Array(Z*this.height);var da=z.length;for(k=J=I=0;J<da;){switch(z[J++]){case 0:for(A=g=0;g<Z;A=g+=1)Q[k++]=z[J++];break;case 1:for(A=K=0;K<Z;A=K+=1){g=z[J++];var a=A<V?0:Q[k-V];Q[k++]=(g+a)%256}break;case 2:for(A=
a=0;a<Z;A=a+=1){g=z[J++];var b=(A-A%V)/V;K=I&&Q[(I-1)*Z+b*V+A%V];Q[k++]=(K+g)%256}break;case 3:for(A=R=0;R<Z;A=R+=1)g=z[J++],b=(A-A%V)/V,a=A<V?0:Q[k-V],K=I&&Q[(I-1)*Z+b*V+A%V],Q[k++]=(g+Math.floor((a+K)/2))%256;break;case 4:for(A=R=0;R<Z;A=R+=1){g=z[J++];b=(A-A%V)/V;a=A<V?0:Q[k-V];0===I?K=O=0:(K=Q[(I-1)*Z+b*V+A%V],O=b&&Q[(I-1)*Z+(b-1)*V+A%V]);var H=a+K-O;A=Math.abs(H-a);b=Math.abs(H-K);H=Math.abs(H-O);a=A<=b&&A<=H?a:b<=H?K:O;Q[k++]=(g+a)%256}break;default:throw Error("Invalid filter algorithm: "+
z[J-1]);}I++}return Q};B.prototype.decodePalette=function(){var z,g,k,A,J;var I=this.palette;var K=this.transparency.indexed||[];var O=new Uint8Array((K.length||0)+I.length);var R=k=z=g=0;for(A=I.length;k<A;R=k+=3)O[g++]=I[R],O[g++]=I[R+1],O[g++]=I[R+2],O[g++]=null!=(J=K[z++])?J:255;return O};B.prototype.copyToImageData=function(z,g){var k,A;var J=this.colors;var I=null;var K=this.hasAlphaChannel;this.palette.length&&(I=null!=(k=this._decodedPalette)?k:this._decodedPalette=this.decodePalette(),J=
4,K=!0);z=z.data||z;var O=z.length;var R=I||g;k=A=0;if(1===J)for(;k<O;)J=I?4*g[k/4]:A,A=R[J++],z[k++]=A,z[k++]=A,z[k++]=A,z[k++]=K?R[J++]:this.transparency.grayscale&&this.transparency.grayscale===A?0:255,A=J;else for(;k<O;)J=I?4*g[k/4]:A,z[k++]=R[J++],z[k++]=R[J++],z[k++]=R[J++],z[k++]=K?R[J++]:this.transparency.rgb&&this.transparency.rgb[1]===R[J-3]&&this.transparency.rgb[3]===R[J-2]&&this.transparency.rgb[5]===R[J-1]?0:255,A=J};B.prototype.decode=function(){var z=new Uint8Array(this.width*this.height*
4);this.copyToImageData(z,this.decodePixels());return z};var f=(p=t.document&&t.document.createElement("canvas"))&&p.getContext("2d");var D=function(z){f.width=z.width;f.height=z.height;f.clearRect(0,0,z.width,z.height);f.putImageData(z,0,0);z=new Image;z.src=p.toDataURL();return z};B.prototype.decodeFrames=function(z){var g,k;if(this.animation){var A=this.animation.frames;var J=[];var I=g=0;for(k=A.length;g<k;I=++g){I=A[I];var K=z.createImageData(I.width,I.height);var O=this.decodePixels(new Uint8Array(I.data));
this.copyToImageData(K,O);I.imageData=K;J.push(I.image=D(K))}return J}};B.prototype.renderFrame=function(z,g){var k=this.animation.frames;var A=k[g];k=k[g-1];0===g&&z.clearRect(0,0,this.width,this.height);1===(null!=k?k.disposeOp:void 0)?z.clearRect(k.xOffset,k.yOffset,k.width,k.height):2===(null!=k?k.disposeOp:void 0)&&z.putImageData(k.imageData,k.xOffset,k.yOffset);0===A.blendOp&&z.clearRect(A.xOffset,A.yOffset,A.width,A.height);return z.drawImage(A.image,A.xOffset,A.yOffset)};B.prototype.animate=
function(z){var g,k=this;var A=0;var J=this.animation;var I=J.numFrames;var K=J.frames;var O=J.numPlays;return(g=function(){var R=A++%I;var V=K[R];k.renderFrame(z,R);if(1<I&&A/I<O)return k.animation._timeout=setTimeout(g,V.delay)})()};B.prototype.stopAnimation=function(){var z;return clearTimeout(null!=(z=this.animation)?z._timeout:void 0)};B.prototype.render=function(z){z._png&&z._png.stopAnimation();z._png=this;z.width=this.width;z.height=this.height;z=z.getContext("2d");if(this.animation)return this.decodeFrames(z),
this.animate(z);var g=z.createImageData(this.width,this.height);this.copyToImageData(g,this.decodePixels());return z.putImageData(g,0,0)};return B}(self);const C=new Set(["jpg","png","bmp","gif"]);S.decode=function(t){return m.apply(this,arguments)};S.decodeLerc2=F;S.getFormat=function(t){t=h(t);"lerc2"===t?t="lerc":"error"===t&&(t="");return t};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils",
"../../../chunks/Zlib"],function(S,y,aa){return function(){function T(x){x&&(this.canvas=x.canvas,this.ctx=x.ctx||x.canvas&&x.canvas.getContext("2d"))}T.prototype.decode=function(x,P,ea){if(!x||10>x.byteLength)throw new S("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:na,height:X,format:la}=P;const {applyJpegMask:ba}=P;if(ba&&(!na||!X))throw new S("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((Y,
U)=>{let F=null;"jpg"===la&&ba&&(F=T.getMask(x,{width:na,height:X}));const G=new Blob([new Uint8Array(x)],{type:"jpg"==="image/"+la?"jpeg":la}),d=URL.createObjectURL(G),c=new Image;let l;c.src=d;c.onload=()=>{URL.revokeObjectURL(d);if(y.isAborted(ea))U(y.createAbortError());else{na=c.width;X=c.height;if(this.canvas){if(this.canvas.width!==na||this.canvas.height!==X)this.canvas.width=na,this.canvas.height=X;this.ctx.clearRect(0,0,na,X)}else this.canvas=document.createElement("canvas"),this.canvas.width=
na,this.canvas.height=X,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(c,0,0);var E=this.ctx.getImageData(0,0,na,X);l=E.data;var q;if(P.renderOnCanvas){if(F)for(q=0;q<F.length;q++)l[4*q+3]=F[q]?255:0;this.ctx.putImageData(E,0,0);Y(null)}else{E=na*X;var u=new Uint8Array(E),w=new Uint8Array(E),h=new Uint8Array(E);if(F)for(q=0;q<E;q++)u[q]=l[4*q],w[q]=l[4*q+1],h[q]=l[4*q+2];else for(F=new Uint8Array(E),q=0;q<E;q++)u[q]=l[4*q],w[q]=l[4*q+1],h[q]=l[4*q+2],F[q]=l[4*q+3];Y({width:na,height:X,pixels:[u,
w,h],mask:F,pixelType:"u8"})}}};c.onerror=()=>{URL.revokeObjectURL(d);U("cannot load image")}})};T.getMask=function(x,P){let ea=null;try{var na=new Uint8Array(x);x=0;var X=na.length-2;for(x=Math.ceil(na.length/2);x<X&&(255!==na[x]||217!==na[x+1]);x++);x+=2;if(x<na.length-1){const la=(new aa.Zlib(na.subarray(x))).getBytes();ea=new Uint8Array(P.width*P.height);P=0;for(na=0;na<la.length;na++)for(X=7;0<=X;X--)ea[P++]=la[na]>>X&1}}catch(la){}return ea};return T}()})},"esri/chunks/Zlib":function(){define(["exports"],
function(S){var y={exports:{}};(function(aa){(function(T){T=T();void 0!==T&&(aa.exports=T)})(function(){var T=function(){function x(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}x.prototype={ensureBuffer:function(P){var ea=this.buffer,na=ea?ea.byteLength:0;if(P<na)return ea;for(var X=512;X<P;)X<<=1;P=new Uint8Array(X);for(X=0;X<na;++X)P[X]=ea[X];return this.buffer=P},getByte:function(){for(var P=this.pos;this.bufferLength<=P;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},
getBytes:function(P){var ea=this.pos;if(P){this.ensureBuffer(ea+P);for(P=ea+P;!this.eof&&this.bufferLength<P;)this.readBlock();var na=this.bufferLength;P>na&&(P=na)}else{for(;!this.eof;)this.readBlock();P=this.bufferLength}this.pos=P;return this.buffer.subarray(ea,P)},lookChar:function(){for(var P=this.pos;this.bufferLength<=P;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var P=this.pos;this.bufferLength<=P;){if(this.eof)return null;
this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(P,ea,na){for(var X=P+ea;this.bufferLength<=X&&!this.eof;)this.readBlock();return new Stream(this.buffer,P,ea,na)},skip:function(P){P||(P=1);this.pos+=P},reset:function(){this.pos=0}};return x}();return function(){function x(Y){throw Error(Y);}function P(Y){var U=0,F=Y[U++],G=Y[U++];-1!=F&&-1!=G||x("Invalid header in flate stream");8!=(F&15)&&x("Unknown compression method in flate stream");0!=((F<<8)+G)%31&&
x("Bad FCHECK in flate stream");G&32&&x("FDICT bit set in flate stream");this.bytes=Y;this.bytesPos=U;this.codeBuf=this.codeSize=0;T.call(this)}if(!self||!self.Uint32Array)return null;var ea=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),na=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),X=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,
196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),la=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,
459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,
459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,
459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,
459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,
459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,
459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,
459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],ba=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];P.prototype=Object.create(T.prototype);
P.prototype.getBits=function(Y){for(var U=this.codeSize,F=this.codeBuf,G=this.bytes,d=this.bytesPos,c;U<Y;)"undefined"==typeof(c=G[d++])&&x("Bad encoding in flate stream"),F|=c<<U,U+=8;this.codeBuf=F>>Y;this.codeSize=U-=Y;this.bytesPos=d;return F&(1<<Y)-1};P.prototype.getCode=function(Y){var U=Y[0],F=Y[1];Y=this.codeSize;for(var G=this.codeBuf,d=this.bytes,c=this.bytesPos;Y<F;){var l;"undefined"==typeof(l=d[c++])&&x("Bad encoding in flate stream");G|=l<<Y;Y+=8}F=U[G&(1<<F)-1];U=F>>16;F&=65535;(0==
Y||Y<U||0==U)&&x("Bad encoding in flate stream");this.codeBuf=G>>U;this.codeSize=Y-U;this.bytesPos=c;return F};P.prototype.generateHuffmanTable=function(Y){for(var U=Y.length,F=0,G=0;G<U;++G)Y[G]>F&&(F=Y[G]);for(var d=1<<F,c=new Uint32Array(d),l=1,E=0,q=2;l<=F;++l,E<<=1,q<<=1)for(var u=0;u<U;++u)if(Y[u]==l){var w=0,h=E;for(G=0;G<l;++G)w=w<<1|h&1,h>>=1;for(G=w;G<d;G+=q)c[G]=l<<16|u;++E}return[c,F]};P.prototype.readBlock=function(){function Y(w,h,e,n,r){for(w=w.getBits(e)+n;0<w--;)h[E++]=r}var U=this.getBits(3);
U&1&&(this.eof=!0);U>>=1;if(0==U){var F=this.bytes,G=this.bytesPos,d;"undefined"==typeof(d=F[G++])&&x("Bad block header in flate stream");var c=d;"undefined"==typeof(d=F[G++])&&x("Bad block header in flate stream");c|=d<<8;"undefined"==typeof(d=F[G++])&&x("Bad block header in flate stream");U=d;"undefined"==typeof(d=F[G++])&&x("Bad block header in flate stream");(U|d<<8)!=(~c&65535)&&x("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;d=this.bufferLength;U=this.ensureBuffer(d+
c);this.bufferLength=c=d+c;for(var l=d;l<c;++l){if("undefined"==typeof(d=F[G++])){this.eof=!0;break}U[l]=d}this.bytesPos=G}else{if(1==U)G=la,d=ba;else if(2==U){U=this.getBits(5)+257;d=this.getBits(5)+1;F=this.getBits(4)+4;G=Array(ea.length);for(var E=0;E<F;)G[ea[E++]]=this.getBits(3);G=this.generateHuffmanTable(G);E=F=0;d=U+d;for(c=Array(d);E<d;)l=this.getCode(G),16==l?Y(this,c,2,3,F):17==l?Y(this,c,3,3,F=0):18==l?Y(this,c,7,11,F=0):c[E++]=F=l;G=this.generateHuffmanTable(c.slice(0,U));d=this.generateHuffmanTable(c.slice(U,
d))}else x("Unknown block type in flate stream");c=(U=this.buffer)?U.length:0;for(l=this.bufferLength;;){var q=this.getCode(G);if(256>q)l+1>=c&&(U=this.ensureBuffer(l+1),c=U.length),U[l++]=q;else{if(256==q){this.bufferLength=l;break}q-=257;q=na[q];var u=q>>16;0<u&&(u=this.getBits(u));F=(q&65535)+u;q=this.getCode(d);q=X[q];u=q>>16;0<u&&(u=this.getBits(u));q=(q&65535)+u;l+F>=c&&(U=this.ensureBuffer(l+F),c=U.length);for(u=0;u<F;++u,++l)U[l]=U[l-q]}}}};return P}()})})(y);S.Zlib=y.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(S,y){return function(){function aa(){}aa.decode=function(T){var x=new Uint8Array(T);T=new S.JpegImage;T.parse(x);const {width:P,height:ea,numComponents:na,eof:X}=T;T=T.getData(P,ea,!0);let la;const ba=P*ea;let Y=0;var U=0,F=0;if(X<x.length-1)for(x=(new y.Zlib(x.subarray(X))).getBytes(),la=new Uint8Array(ba),Y=U=0;Y<x.length;Y++)for(F=7;0<=F;F--)la[U++]=x[Y]>>F&1;x=null;if(1===na)x=[T,T,T];else{x=[];for(Y=0;3>Y;Y++)F=new Uint8Array(ba),x.push(F);for(U=F=0;U<ba;U++)for(Y=
0;3>Y;Y++)x[Y][U]=T[F++]}return{width:P,height:ea,pixels:x,mask:la}};return aa}()})},"esri/chunks/Jpg":function(){define(["exports"],function(S){var y={exports:{}};(function(aa){(function(T){T=T();void 0!==T&&(aa.exports=T)})(function(){var T=function(){function x(P){this.message="JPEG error: "+P}x.prototype=Error();x.prototype.name="JpegError";return x.constructor=x}();return function(){function x(){this.decodeTransform=null;this.colorTransform=-1}function P(ba,Y){for(var U=0,F=[],G,d,c=16;0<c&&
!ba[c-1];)c--;F.push({children:[],index:0});var l=F[0],E;for(G=0;G<c;G++){for(d=0;d<ba[G];d++){l=F.pop();for(l.children[l.index]=Y[U];0<l.index;)l=F.pop();l.index++;for(F.push(l);F.length<=G;)F.push(E={children:[],index:0}),l.children[l.index]=E.children,l=E;U++}G+1<c&&(F.push(E={children:[],index:0}),l.children[l.index]=E.children,l=E)}return F[0].children}function ea(ba,Y,U,F,G,d,c,l,E){function q(){if(0<p)return p--,B>>p&1;B=ba[Y++];if(255===B){var Q=ba[Y++];if(Q)throw new T("unexpected marker "+
(B<<8|Q).toString(16));}p=7;return B>>>7}function u(Q){for(;;){Q=Q[q()];if("number"===typeof Q)return Q;if("object"!==typeof Q)throw new T("invalid huffman sequence");}}function w(Q){for(var da=0;0<Q;)da=da<<1|q(),Q--;return da}function h(Q){if(1===Q)return 1===q()?1:-1;var da=w(Q);return da>=1<<Q-1?da:da+(-1<<Q)+1}function e(Q,da){var a=u(Q.huffmanTableDC);a=0===a?0:h(a);Q.blockData[da]=Q.pred+=a;for(a=1;64>a;){var b=u(Q.huffmanTableAC),H=b&15;b>>=4;if(0===H){if(15>b)break;a+=16}else a+=b,Q.blockData[da+
la[a]]=h(H),a++}}function n(Q,da){var a=u(Q.huffmanTableDC);a=0===a?0:h(a)<<E;Q.blockData[da]=Q.pred+=a}function r(Q,da){Q.blockData[da]|=q()<<E}function m(Q,da){if(0<f)f--;else for(var a=d;a<=c;){var b=u(Q.huffmanTableAC),H=b&15;b>>=4;if(0===H){if(15>b){f=w(b)+(1<<b)-1;break}a+=16}else a+=b,Q.blockData[da+la[a]]=h(H)*(1<<E),a++}}function v(Q,da){for(var a=d,b=0,H;a<=c;){H=la[a];switch(D){case 0:b=u(Q.huffmanTableAC);H=b&15;b>>=4;if(0===H)15>b?(f=w(b)+(1<<b),D=4):(b=16,D=1);else{if(1!==H)throw new T("invalid ACn encoding");
z=h(H);D=b?2:3}continue;case 1:case 2:Q.blockData[da+H]?Q.blockData[da+H]+=q()<<E:(b--,0===b&&(D=2===D?3:0));break;case 3:Q.blockData[da+H]?Q.blockData[da+H]+=q()<<E:(Q.blockData[da+H]=z<<E,D=0);break;case 4:Q.blockData[da+H]&&(Q.blockData[da+H]+=q()<<E)}a++}4===D&&(f--,0===f&&(D=0))}var C=U.mcusPerLine,t=Y,B=0,p=0,f=0,D=0,z,g=F.length,k,A,J,I;l=U.progressive?0===d?0===l?n:r:0===l?m:v:e;var K=0;U=1===g?F[0].blocksPerLine*F[0].blocksPerColumn:C*U.mcusPerColumn;for(var O,R;K<U;){var V=G?Math.min(U-
K,G):U;for(k=0;k<g;k++)F[k].pred=0;f=0;if(1===g){var Z=F[0];for(I=0;I<V;I++)l(Z,64*((Z.blocksPerLine+1)*(K/Z.blocksPerLine|0)+K%Z.blocksPerLine)),K++}else for(I=0;I<V;I++){for(k=0;k<g;k++)for(Z=F[k],O=Z.h,R=Z.v,A=0;A<R;A++)for(J=0;J<O;J++)l(Z,64*((Z.blocksPerLine+1)*((K/C|0)*Z.v+A)+(K%C*Z.h+J)));K++}p=0;(Z=X(ba,Y))&&Z.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+Z.invalid),Y=Z.offset);Z=Z&&Z.marker;if(!Z||65280>=Z)throw new T("marker was not found");if(65488<=Z&&65495>=
Z)Y+=2;else break}(Z=X(ba,Y))&&Z.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+Z.invalid),Y=Z.offset);return Y-t}function na(ba,Y){ba=Y.blocksPerLine;for(var U=Y.blocksPerColumn,F=new Int16Array(64),G=0;G<U;G++)for(var d=0;d<ba;d++){var c=void 0,l=void 0,E=void 0,q=void 0,u=void 0,w=void 0,h=void 0,e=void 0,n=u=w=q=l=c=void 0,r=void 0,m=void 0,v=void 0,C=64*((Y.blocksPerLine+1)*G+d),t=F,B=Y.quantizationTable,p=Y.blockData;if(!B)throw new T("missing required Quantization Table.");
for(var f=0;64>f;f+=8)c=p[C+f],e=p[C+f+1],h=p[C+f+2],w=p[C+f+3],u=p[C+f+4],q=p[C+f+5],E=p[C+f+6],l=p[C+f+7],c*=B[f],0===(e|h|w|u|q|E|l)?(c=5793*c+512>>10,t[f]=c,t[f+1]=c,t[f+2]=c,t[f+3]=c,t[f+4]=c,t[f+5]=c,t[f+6]=c,t[f+7]=c):(e*=B[f+1],h*=B[f+2],w*=B[f+3],u*=B[f+4],q*=B[f+5],E*=B[f+6],l*=B[f+7],v=5793*c+128>>8,m=5793*u+128>>8,r=h,n=E,u=2896*(e-l)+128>>8,l=2896*(e+l)+128>>8,w<<=4,q<<=4,v=v+m+1>>1,m=v-m,c=3784*r+1567*n+128>>8,r=1567*r-3784*n+128>>8,n=c,u=u+q+1>>1,q=u-q,l=l+w+1>>1,w=l-w,v=v+n+1>>1,n=
v-n,m=m+r+1>>1,r=m-r,c=2276*u+3406*l+2048>>12,u=3406*u-2276*l+2048>>12,l=c,c=799*w+4017*q+2048>>12,w=4017*w-799*q+2048>>12,q=c,t[f]=v+l,t[f+7]=v-l,t[f+1]=m+q,t[f+6]=m-q,t[f+2]=r+w,t[f+5]=r-w,t[f+3]=n+u,t[f+4]=n-u);for(B=0;8>B;++B)c=t[B],e=t[B+8],h=t[B+16],w=t[B+24],u=t[B+32],q=t[B+40],E=t[B+48],l=t[B+56],0===(e|h|w|u|q|E|l)?(c=5793*c+8192>>14,c=-2040>c?0:2024<=c?255:c+2056>>4,p[C+B]=c,p[C+B+8]=c,p[C+B+16]=c,p[C+B+24]=c,p[C+B+32]=c,p[C+B+40]=c,p[C+B+48]=c,p[C+B+56]=c):(v=5793*c+2048>>12,m=5793*u+2048>>
12,r=h,n=E,u=2896*(e-l)+2048>>12,l=2896*(e+l)+2048>>12,v=(v+m+1>>1)+4112,m=v-m,c=3784*r+1567*n+2048>>12,r=1567*r-3784*n+2048>>12,n=c,u=u+q+1>>1,q=u-q,l=l+w+1>>1,w=l-w,v=v+n+1>>1,n=v-n,m=m+r+1>>1,r=m-r,c=2276*u+3406*l+2048>>12,u=3406*u-2276*l+2048>>12,l=c,c=799*w+4017*q+2048>>12,w=4017*w-799*q+2048>>12,q=c,c=v+l,l=v-l,e=m+q,E=m-q,h=r+w,q=r-w,w=n+u,u=n-u,c=16>c?0:4080<=c?255:c>>4,e=16>e?0:4080<=e?255:e>>4,h=16>h?0:4080<=h?255:h>>4,w=16>w?0:4080<=w?255:w>>4,u=16>u?0:4080<=u?255:u>>4,q=16>q?0:4080<=q?
255:q>>4,E=16>E?0:4080<=E?255:E>>4,l=16>l?0:4080<=l?255:l>>4,p[C+B]=c,p[C+B+8]=e,p[C+B+16]=h,p[C+B+24]=w,p[C+B+32]=u,p[C+B+40]=q,p[C+B+48]=E,p[C+B+56]=l)}return Y.blockData}function X(ba,Y,U){var F=ba.length-1;U=U<Y?U:Y;if(Y>=F)return null;var G=ba[Y]<<8|ba[Y+1];if(65472<=G&&65534>=G)return{invalid:null,marker:G,offset:Y};for(Y=ba[U]<<8|ba[U+1];!(65472<=Y&&65534>=Y);){if(++U>=F)return null;Y=ba[U]<<8|ba[U+1]}return{invalid:G.toString(16),marker:Y,offset:U}}if(!self||!self.Uint8ClampedArray)return null;
var la=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);x.prototype={parse:function(ba){function Y(){var B=ba[G]<<8|ba[G+1];G+=2;return B}function U(){var B=Y();B=G+B-2;var p=X(ba,B,G);p&&p.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+p.invalid),B=p.offset);B=ba.subarray(G,B);G+=B.length;return B}function F(B){for(var p=
Math.ceil(B.samplesPerLine/8/B.maxH),f=Math.ceil(B.scanLines/8/B.maxV),D=0;D<B.components.length;D++){t=B.components[D];var z=Math.ceil(Math.ceil(B.samplesPerLine/8)*t.h/B.maxH),g=Math.ceil(Math.ceil(B.scanLines/8)*t.v/B.maxV);t.blockData=new Int16Array(64*f*t.v*(p*t.h+1));t.blocksPerLine=z;t.blocksPerColumn=g}B.mcusPerLine=p;B.mcusPerColumn=f}var G=0,d=null,c=null,l=[],E=[],q=[],u=Y();if(65496!==u)throw new T("SOI not found");for(u=Y();65497!==u;){switch(u){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var w=
U();65504===u&&74===w[0]&&70===w[1]&&73===w[2]&&70===w[3]&&0===w[4]&&(d={version:{major:w[5],minor:w[6]},densityUnits:w[7],xDensity:w[8]<<8|w[9],yDensity:w[10]<<8|w[11],thumbWidth:w[12],thumbHeight:w[13],thumbData:w.subarray(14,14+3*w[12]*w[13])});65518===u&&65===w[0]&&100===w[1]&&111===w[2]&&98===w[3]&&101===w[4]&&(c={version:w[5]<<8|w[6],flags0:w[7]<<8|w[8],flags1:w[9]<<8|w[10],transformCode:w[11]});break;case 65499:u=Y()+G-2;for(var h;G<u;){var e=ba[G++],n=new Uint16Array(64);if(0===e>>4)for(w=
0;64>w;w++)h=la[w],n[h]=ba[G++];else if(1===e>>4)for(w=0;64>w;w++)h=la[w],n[h]=Y();else throw new T("DQT - invalid table spec");l[e&15]=n}break;case 65472:case 65473:case 65474:if(r)throw new T("Only single frame JPEGs supported");Y();var r={};r.extended=65473===u;r.progressive=65474===u;r.precision=ba[G++];r.scanLines=Y();r.samplesPerLine=Y();r.components=[];r.componentIds={};w=ba[G++];for(u=n=e=0;u<w;u++){h=ba[G];var m=ba[G+1]>>4;var v=ba[G+1]&15;e<m&&(e=m);n<v&&(n=v);m=r.components.push({h:m,v,
quantizationId:ba[G+2],quantizationTable:null});r.componentIds[h]=m-1;G+=3}r.maxH=e;r.maxV=n;F(r);break;case 65476:h=Y();for(u=2;u<h;){e=ba[G++];n=new Uint8Array(16);for(w=m=0;16>w;w++,G++)m+=n[w]=ba[G];v=new Uint8Array(m);for(w=0;w<m;w++,G++)v[w]=ba[G];u+=17+m;(0===e>>4?q:E)[e&15]=P(n,v)}break;case 65501:Y();var C=Y();break;case 65498:Y();h=ba[G++];w=[];for(u=0;u<h;u++){e=r.componentIds[ba[G++]];var t=r.components[e];e=ba[G++];t.huffmanTableDC=q[e>>4];t.huffmanTableAC=E[e&15];w.push(t)}u=ba[G++];
h=ba[G++];e=ba[G++];u=ea(ba,G,r,w,C,u,h,e>>4,e&15);G+=u;break;case 65535:255!==ba[G]&&G--;break;default:if(255===ba[G-3]&&192<=ba[G-2]&&254>=ba[G-2])G-=3;else throw new T("unknown marker "+u.toString(16));}u=Y()}this.width=r.samplesPerLine;this.height=r.scanLines;this.jfif=d;this.eof=G;this.adobe=c;this.components=[];for(u=0;u<r.components.length;u++){t=r.components[u];if(d=l[t.quantizationId])t.quantizationTable=d;this.components.push({output:na(r,t),scaleX:t.h/r.maxH,scaleY:t.v/r.maxV,blocksPerLine:t.blocksPerLine,
blocksPerColumn:t.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(ba,Y){var U=this.width/ba,F=this.height/Y,G,d,c=0,l=this.components.length,E=ba*Y*l,q=new Uint8ClampedArray(E),u=new Uint32Array(ba);for(d=0;d<l;d++){var w=this.components[d];var h=w.scaleX*U;var e=w.scaleY*F;c=d;var n=w.output;var r=w.blocksPerLine+1<<3;for(G=0;G<ba;G++)w=0|G*h,u[G]=(w&4294967288)<<3|w&7;for(h=0;h<Y;h++)for(w=0|h*e,w=r*(w&4294967288)|(w&7)<<3,G=0;G<ba;G++)q[c]=n[w+u[G]],
c+=l}if(Y=this.decodeTransform)for(d=0;d<E;)for(ba=w=0;w<l;w++,d++,ba+=2)q[d]=(q[d]*Y[ba]>>8)+Y[ba+1];return q},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(ba){for(var Y,U,F,G=0,d=ba.length;G<d;G+=3)Y=ba[G],U=ba[G+1],F=ba[G+2],ba[G]=Y-179.456+1.402*F,ba[G+1]=Y+135.459-.344*U-.714*F,ba[G+2]=Y-226.816+1.772*U;return ba},_convertYcckToRgb:function(ba){for(var Y,
U,F,G,d=0,c=0,l=ba.length;c<l;c+=4)Y=ba[c],U=ba[c+1],F=ba[c+2],G=ba[c+3],ba[d++]=-122.67195406894+U*(-6.60635669420364E-5*U+4.37130475926232E-4*F-5.4080610064599E-5*Y+4.8449797120281E-4*G-.154362151871126)+F*(-9.57964378445773E-4*F+8.17076911346625E-4*Y-.00477271405408747*G+1.53380253221734)+Y*(9.61250184130688E-4*Y-.00266257332283933*G+.48357088451265)+G*(-3.36197177618394E-4*G+.484791561490776),ba[d++]=107.268039397724+U*(2.19927104525741E-5*U-6.40992018297945E-4*F+6.59397001245577E-4*Y+4.26105652938837E-4*
G-.176491792462875)+F*(-7.78269941513683E-4*F+.00130872261408275*Y+7.70482631801132E-4*G-.151051492775562)+Y*(.00126935368114843*Y-.00265090189010898*G+.25802910206845)+G*(-3.18913117588328E-4*G-.213742400323665),ba[d++]=-20.810012546947+U*(-5.70115196973677E-4*U-2.63409051004589E-5*F+.0020741088115012*Y-.00288260236853442*G+.814272968359295)+F*(-1.53496057440975E-5*F-1.32689043961446E-4*Y+5.60833691242812E-4*G-.195152027534049)+Y*(.00174418132927582*Y-.00255243321439347*G+.116935020465145)+G*(-3.43531996510555E-4*
G+.24165260232407);return ba},_convertYcckToCmyk:function(ba){for(var Y,U,F,G=0,d=ba.length;G<d;G+=4)Y=ba[G],U=ba[G+1],F=ba[G+2],ba[G]=434.456-Y-1.402*F,ba[G+1]=119.541-Y+.344*U+.714*F,ba[G+2]=481.816-Y-1.772*U;return ba},_convertCmykToRgb:function(ba){for(var Y,U,F,G,d=0,c=1/255,l=0,E=ba.length;l<E;l+=4)Y=ba[l]*c,U=ba[l+1]*c,F=ba[l+2]*c,G=ba[l+3]*c,ba[d++]=255+Y*(-4.387332384609988*Y+54.48615194189176*U+18.82290502165302*F+212.25662451639585*G-285.2331026137004)+U*(1.7149763477362134*U-5.6096736904047315*
F-17.873870861415444*G-5.497006427196366)+F*(-2.5217340131683033*F-21.248923337353073*G+17.5119270841813)-G*(21.86122147463605*G+189.48180835922747),ba[d++]=255+Y*(8.841041422036149*Y+60.118027045597366*U+6.871425592049007*F+31.159100130055922*G-79.2970844816548)+U*(-15.310361306967817*U+17.575251261109482*F+131.35250912493976*G-190.9453302588951)+F*(4.444339102852739*F+9.8632861493405*G-24.86741582555878)-G*(20.737325471181034*G+187.80453709719578),ba[d++]=255+Y*(.8842522430003296*Y+8.078677503112928*
U+30.89978309703729*F-.23883238689178934*G-14.183576799673286)+U*(10.49593273432072*U+63.02378494754052*F+50.606957656360734*G-112.23884253719248)+F*(.03296041114873217*F+115.60384449646641*G-193.58209356861505)-G*(22.33816807309886*G+180.12613974708367);return ba},getData:function(ba,Y,U){if(4<this.numComponents)throw new T("Unsupported color mode");ba=this._getLinearizedBlockData(ba,Y);if(1===this.numComponents&&U){U=ba.length;Y=new Uint8ClampedArray(3*U);for(var F=0,G=0;G<U;G++){var d=ba[G];Y[F++]=
d;Y[F++]=d;Y[F++]=d}return Y}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(ba);if(4===this.numComponents){if(this._isColorConversionNeeded())return U?this._convertYcckToRgb(ba):this._convertYcckToCmyk(ba);if(U)return this._convertCmykToRgb(ba)}return ba}};return x}()})})(y);S.JpegImage=y.exports})},"esri/chunks/TiffDecoder":function(){define("exports ../layers/support/rasterDatasets/byteStreamUtils ./Jpg ../layers/support/rasterFormats/Lzw ../layers/support/rasterFormats/TiffTags ../layers/support/rasterFormats/utils ./Zlib".split(" "),
function(S,y,aa,T,x,P,ea){function na(p,f){let D="unknown";3===p?D="f32":1===p?1===f?D="u1":2===f?D="u2":4===f?D="u4":8>=f?D="u8":16>=f?D="u16":32>=f&&(D="u32"):2===p&&(8>=f?D="s8":16>=f?D="s16":32>=f&&(D="s32"));return D}function X(p){let f=null;switch(p?p.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":f=Uint8Array;break;case "u16":f=Uint16Array;break;case "u32":f=Uint32Array;break;case "s8":f=Int8Array;break;case "s16":f=Int16Array;break;case "s32":f=Int32Array;break;default:f=Float32Array}return f}
function la(p,f){return{x:f[0]*p.x+f[1]*p.y+f[2],y:f[3]*p.x+f[4]*p.y+f[5]}}function ba(p,f){var D;return null==(D=p.get(f))?void 0:D.values}function Y(p,f){var D;return null==(D=p.get(f))?void 0:D.values}function U(p,f){var D;return null==(D=p.get(f))?void 0:D.values[0]}function F(p,f){var D;return null==(D=p.get(f))?void 0:D.values[0]}function G(p,f,D,z=0,g=x.TIFF_TAGS,k=4){var A=8===k;const J=A?q(new DataView(p,D,8),0,f):(new DataView(p,D,2)).getUint16(0,f),I=4+2*k;var K=A?8:2;A=K+J*I;if(D+A>p.byteLength)return{success:!1,
ifd:null,nextIFD:null,requiredBufferSize:A};const O=D+A+4<=p.byteLength?u(new DataView(p,D+A,8===k?8:4),0,f,8===k):null;D+=K;K=new Map;let R,V,Z,Q,da;for(let b=0;b<J;b++){var a=new DataView(p,D+I*b,I);R=a.getUint16(0,f);Z=a.getUint16(2,f);V=x.getTagName(R,g);const H=[];2===k?(Q=a.getUint16(4,f),da=a.getUint16(6,f)):4===k?(Q=a.getUint32(4,f),da=a.getUint32(8,f)):8===k&&(Q=u(a,4,f,!0),da=u(a,12,f,!0),H.push(a.getUint32(12,f)),H.push(a.getUint32(16,f)));a={id:R,type:Z,valueCount:Q,valueOffset:da,valueOffsets:H,
values:null};d(p,f,a,z,!1,k);K.set(V,a)}return{success:!0,ifd:K,nextIFD:O,requiredBufferSize:A}}function d(p,f,D,z=0,g=!1,k=4){if(D.values)return!0;var A=D.type,J=D.valueCount,I=D.valueOffset;let K=[];var O=m[A],R=8*O,V=J*O,Z=J*m[A]*8,Q=8===k?64:32;k=D.valueOffsets;if(Z>Q&&V>(g?p.byteLength:p?p.byteLength-I+z:0))return D.offlineOffsetSize=[I,V],D.values=null,!1;if(Z<=Q)if(f||(32>=Q?I>>>=32-Z:(p=null!=k&&k.length?k[0]:I>>>0,f=null!=k&&k.length?k[1]:Math.round((I-p)/4294967296),32>=Z?(I=p>>>32-Z,k[0]=
I):(I=p*2**(32-Z)+(f>>>32-Z),k[0]=p,k[1]=f>>>32-Z))),1===J&&R===Q)K=[I];else if(64===Q)for(p=null!=k&&k.length?k[0]:I>>>0,I=null!=k&&k.length?k[1]:Math.round((I-p)/4294967296),f=p,O=32,p=1;p<=J;p++)V=32-R*p%32,O<R?(V=f<<V>>>32-O,Z=I<<32-O>>>32-O,f=I,K.push(V+Z*2**(R-O)),O-=32-(R-O)):(K.push(f<<V>>>32-R),O-=R),0===O&&(O=32,f=I);else for(p=1;p<=J;p++)K.push(I<<32-R*p>>>32-R);else for(I-=z,g&&(I=0),J=I;J<I+V;J+=O){switch(A){case 1:R=(new DataView(p,J,1)).getUint8(0);break;case 2:R=(new DataView(p,J,
1)).getUint8(0);break;case 3:R=(new DataView(p,J,2)).getUint16(0,f);break;case 4:case 13:R=(new DataView(p,J,4)).getUint32(0,f);break;case 5:R=(new DataView(p,J,4)).getUint32(0,f)/(new DataView(p,J+4,4)).getUint32(0,f);break;case 6:R=(new DataView(p,J,1)).getInt8(0);break;case 7:R=(new DataView(p,J,1)).getUint8(0);break;case 8:R=(new DataView(p,J,2)).getInt16(0,f);break;case 9:R=(new DataView(p,J,4)).getInt32(0,f);break;case 10:R=(new DataView(p,J,4)).getInt32(0,f)/(new DataView(p,J+4,4)).getInt32(0,
f);break;case 11:R=(new DataView(p,J,4)).getFloat32(0,f);break;case 12:R=(new DataView(p,J,8)).getFloat64(0,f);break;case 16:case 18:R=q(new DataView(p,J,8),0,f);break;case 17:k=new DataView(p,J,8);Z=(R=f)?k.getInt32(0,R):k.getUint32(0,R);k=R?k.getUint32(4,R):k.getInt32(4,R);Q=0<=(R?Z:k)?1:-1;R?Z*=Q:k*=Q;R=Q*(R?4294967296*k+Z:4294967296*Z+k);break;default:R=null}K.push(R)}if(2===A){A="";I=K;K=[];for(p=0;p<I.length;p++)0===I[p]&&""!==A?(K.push(A),A=""):A+=String.fromCharCode(I[p]);""===A&&0!==K.length||
K.push(A)}D.values=K;return!0}function c(p){var f,D,z=p[0];const g=F(z,"TILEWIDTH"),k=F(z,"TILELENGTH"),A=F(z,"IMAGEWIDTH"),J=F(z,"IMAGELENGTH");var I=F(z,"BITSPERSAMPLE");const K=F(z,"SAMPLESPERPIXEL");var O=null!=(f=F(z,"SAMPLEFORMAT"))?f:1;f=na(O,I);const R=l(z);var V=ba(z,"GDAL_NODATA");let Z;null!=V&&V.length&&(Z=V.map(oa=>parseFloat(oa)),Z.some(oa=>isNaN(oa))&&(Z=null));var Q=null!=(D=F(z,"COMPRESSION"))?D:1;switch(Q){case 1:D="NONE";break;case 2:case 3:case 4:case 32771:D="CCITT";break;case 5:D=
"LZW";break;case 6:case 7:D="JPEG";break;case 32773:D="PACKBITS";break;case 8:case 32946:D="DEFLATE";break;case 34712:D="JPEG2000";break;case 34887:D="LERC";break;default:D=String(Q)}V=!0;let da="";v.has(Q)||(V=!1,da+="unsupported tag compression "+Q);3<O&&(V=!1,da+="unsupported tag sampleFormat "+O);0!==I%8&&(V=!1,da+="unsupported tag bitsPerSample "+I);I=U(z,"GEOASCIIPARAMS");if(I){var a=(a=I.split("|").filter(oa=>-1<oa.indexOf("ESRI PE String \x3d "))[0])?a.replace("ESRI PE String \x3d ",""):"";
a=a.startsWith("COMPD_CS")||a.startsWith("PROJCS")||a.startsWith("GEOGCS")?{wkid:null,wkt:a}:null}O=Y(z,"GEOTIEPOINTS");I=Y(z,"GEOPIXELSCALE");Q=Y(z,"GEOTRANSMATRIX");var b=z.has("GEOKEYDIRECTORY")?z.get("GEOKEYDIRECTORY").data:null;z=!1;if(b){z=2===F(b,"GTRasterTypeGeoKey");var H=F(b,"GTModelTypeGeoKey");2===H?(b=F(b,"GeographicTypeGeoKey"),1024<=b&&32766>=b&&(a={wkid:b})):1===H&&(b=F(b,"ProjectedCSTypeGeoKey"),1024<=b&&32766>=b&&(a={wkid:b}))}let M;I&&O&&6<=O.length?(M=[I[0],0,O[3]-O[0]*I[0],0,
-Math.abs(I[1]),O[4]-O[1]*I[1]],z&&(M[2]-=.5*M[0]+.5*M[1],M[5]-=.5*M[3]+.5*M[4])):Q&&16===Q.length&&(M=z?[Q[0],Q[1],Q[3]-.5*Q[0],Q[4],Q[5],Q[7]-.5*Q[5]]:[Q[0],Q[1],Q[3],Q[4],Q[5],Q[7]]);if(M){z=[{x:0,y:J},{x:0,y:0},{x:A,y:J},{x:A,y:0}];b=Q=Number.POSITIVE_INFINITY;let oa=H=Number.NEGATIVE_INFINITY;for(let ia=0;ia<z.length;ia++)O=la(z[ia],M),Q=O.x>Q?Q:O.x,H=O.x<H?H:O.x,b=O.y>b?b:O.y,oa=O.y<oa?oa:O.y;a={xmin:Q,xmax:H,ymin:b,ymax:oa,spatialReference:a}}else a={xmin:-.5,ymin:.5-J,xmax:A-.5,ymax:.5,spatialReference:a};
z=p.filter(oa=>1===U(oa,"NEWSUBFILETYPE"));let ca,ja,ka;if(0<z.length){ca=Math.round(Math.log(A/F(z[0],"IMAGEWIDTH"))/Math.LN2);var fa=z[z.length-1];ja=Math.round(Math.log(A/F(fa,"IMAGEWIDTH"))/Math.LN2);ka=F(fa,"TILEWIDTH");fa=F(fa,"TILELENGTH")}ka=0<ja?ka||g:null;fa=0<ja?fa||k:null;let ma;g&&(ma=[{maxCol:Math.ceil(A/g)-1,maxRow:Math.ceil(J/k)-1,minRow:0,minCol:0}],z.forEach(oa=>{ma.push({maxCol:Math.ceil(F(oa,"IMAGEWIDTH")/F(oa,"TILEWIDTH"))-1,maxRow:Math.ceil(F(oa,"IMAGELENGTH")/F(oa,"TILELENGTH"))-
1,minRow:0,minCol:0})}));z=U(p[0],"GDAL_METADATA");z=B(z);da+=" "+e({width:A,height:J,tileWidth:g,tileHeight:k,planes:K,ifds:p});return{width:A,height:J,tileWidth:g,tileHeight:k,planes:K,isBSQ:R,pixelType:f,compression:D,noData:Z,isSupported:V,message:da,extent:a,affine:I?null:M,firstPyramidLevel:ca,maximumPyramidLevel:ja,pyramidBlockWidth:ka,pyramidBlockHeight:fa,tileBoundary:ma,metadata:z}}function l(p,f){return(p=ba(p,"PLANARCONFIGURATION"))?2===p[0]:f?f.isBSQ:!1}function E(p){const {littleEndian:f,
isBigTiff:D,firstIFD:z}=w(p);var g=z;const k=[];do if(g=h(p,f,g,0,x.TIFF_TAGS,D?8:4),g.success)k.push(g.ifd),g=g.nextIFD;else break;while(0<g);return{...c(k),littleEndian:f,isBigTiff:D,ifds:k}}function q(p,f,D){const z=p.getUint32(f,D);p=p.getUint32(f+4,D);return D?4294967296*p+z:4294967296*z+p}function u(p,f,D,z){return z?q(p,f,D):p.getUint32(f,D)}function w(p){var f=new DataView(p,0,16),D=f.getUint16(0,!1);p=null;if(18761===D)p=!0;else if(19789===D)p=!1;else throw"unexpected endianess byte";var z=
f.getUint16(2,p);if(42!==z&&43!==z)throw"unexpected tiff identifier";D=4;if(z=43===z){const g=f.getUint16(D,p);D+=2;if(8!==g)throw"unsupported bigtiff version";if(0!==f.getUint16(D,p))throw"unsupported bigtiff version";D+=2}f=u(f,D,p,z);return{littleEndian:p,isBigTiff:z,firstIFD:f}}function h(p,f,D,z=0,g=x.TIFF_TAGS,k=4){D=G(p,f,D,z,g,k);let A;const J=D.ifd;J&&(x.ifdTags.forEach((I,K)=>{J.has(K)&&(A=J.get(K),A.data=G(p,f,A.valueOffset-z,z,I).ifd)}),J.has("GEOKEYDIRECTORY")&&(A=J.get("GEOKEYDIRECTORY"),
(g=A.values)&&4<g.length&&(g=g[0]+"."+g[1]+"."+g[2],A.data=G(p,f,A.valueOffset+6-z,z,x.GEO_KEYS,2).ifd,A.data&&A.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[g]}))),J.has("XMP")&&(A=J.get("XMP"),g=A.values,"number"===typeof g[0]&&7===A.type&&(A.values=[y.bytesToUTF8(new Uint8Array(g))])));return D}function e(p){const {width:f,height:D,tileHeight:z,tileWidth:g}=p,k=p.planes,A=g?g*z:f*D;p=F(p.ifds[0],"BITSPERSAMPLE");let J="";A*k>2**30/(8<p?p/8:1)&&(J=g?"tiled tiff exceeding 1 gigabits per tile is not supported":
"scanline tiff exceeding 1 gigabits is not supported");return J}var n={exports:{}};(function(p){(function(f){f=f();void 0!==f&&(p.exports=f)})(function(){var f={unstuff:function(g,k,A,J,I,K,O,R){var V=(1<<A)-1,Z=0,Q,da=0;g[g.length-1]<<=8*(4*g.length-Math.ceil(A*J/8));if(I)for(Q=0;Q<J;Q++){if(0===da){var a=g[Z++];da=32}if(da>=A){var b=a>>>da-A&V;da-=A}else da=A-da,b=(a&V)<<da&V,a=g[Z++],da=32-da,b+=a>>>da;k[Q]=I[b]}else for(I=Math.ceil((R-K)/O),Q=0;Q<J;Q++)0===da&&(a=g[Z++],da=32),da>=A?(b=a>>>da-
A&V,da-=A):(da=A-da,b=(a&V)<<da&V,a=g[Z++],da=32-da,b+=a>>>da),k[Q]=b<I?K+b*O:R},unstuffLUT:function(g,k,A,J,I,K){var O=(1<<k)-1,R=0,V=0,Z=0,Q=Z=0,da=[];g[g.length-1]<<=8*(4*g.length-Math.ceil(k*A/8));var a=Math.ceil((K-J)/I);for(V=0;V<A;V++){if(0===Z){var b=g[R++];Z=32}Z>=k?(Q=b>>>Z-k&O,Z-=k):(Z=k-Z,Q=(b&O)<<Z&O,b=g[R++],Z=32-Z,Q+=b>>>Z);da[V]=Q<a?J+Q*I:K}da.unshift(J);return da},unstuff2:function(g,k,A,J,I,K,O,R){var V=(1<<A)-1,Z=0,Q,da=0,a=0;if(I)for(Q=0;Q<J;Q++){if(0===da){var b=g[Z++];da=32;
a=0}if(da>=A){var H=b>>>a&V;da-=A;a+=A}else{var M=A-da;H=b>>>a&V;b=g[Z++];da=32-M;H|=(b&(1<<M)-1)<<A-M;a=M}k[Q]=I[H]}else for(I=Math.ceil((R-K)/O),Q=0;Q<J;Q++)0===da&&(b=g[Z++],da=32,a=0),da>=A?(H=b>>>a&V,da-=A,a+=A):(M=A-da,H=b>>>a&V,b=g[Z++],da=32-M,H|=(b&(1<<M)-1)<<A-M,a=M),k[Q]=H<I?K+H*O:R;return k},unstuffLUT2:function(g,k,A,J,I,K){var O=(1<<k)-1,R=0,V=0,Z=0,Q=0,da=0,a=0,b=[],H=Math.ceil((K-J)/I);for(V=0;V<A;V++){if(0===Q){var M=g[R++];Q=32;a=0}Q>=k?(da=M>>>a&O,Q-=k,a+=k):(Z=k-Q,da=M>>>a&O,M=
g[R++],Q=32-Z,da|=(M&(1<<Z)-1)<<k-Z,a=Z);b[V]=da<H?J+da*I:K}b.unshift(J);return b},originalUnstuff:function(g,k,A,J){var I=(1<<A)-1,K=0,O,R=0;g[g.length-1]<<=8*(4*g.length-Math.ceil(A*J/8));for(O=0;O<J;O++){if(0===R){var V=g[K++];R=32}if(R>=A){var Z=V>>>R-A&I;R-=A}else R=A-R,Z=(V&I)<<R&I,V=g[K++],R=32-R,Z+=V>>>R;k[O]=Z}return k},originalUnstuff2:function(g,k,A,J){var I=(1<<A)-1,K=0,O,R=0,V=0;for(O=0;O<J;O++){if(0===R){var Z=g[K++];R=32;V=0}if(R>=A){var Q=Z>>>V&I;R-=A;V+=A}else{var da=A-R;Q=Z>>>V&
I;Z=g[K++];R=32-da;Q|=(Z&(1<<da)-1)<<A-da;V=da}k[O]=Q}return k}},D={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(g){for(var k=65535,A=65535,J=g.length,I=Math.floor(J/2),K=0;I;){var O=359<=I?359:I;I-=O;do k+=g[K++]<<8,A+=k+=g[K++];while(--O);k=(k&65535)+(k>>>16);A=(A&65535)+(A>>>16)}J&1&&(A+=k+=g[K]<<8);return((A&65535)+(A>>>16)<<16|(k&65535)+(k>>>16))>>>0},readHeaderInfo:function(g,k){var A=k.ptr,J=new Uint8Array(g,A,6),I={};I.fileIdentifierString=String.fromCharCode.apply(null,J);if(0!==
I.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+I.fileIdentifierString;A+=6;J=new DataView(g,A,8);var K=J.getInt32(0,!0);I.fileVersion=K;A+=4;3<=K&&(I.checksum=J.getUint32(4,!0),A+=4);J=new DataView(g,A,12);I.height=J.getUint32(0,!0);I.width=J.getUint32(4,!0);A+=8;4<=K?(I.numDims=J.getUint32(8,!0),A+=4):I.numDims=1;J=new DataView(g,A,40);I.numValidPixel=J.getUint32(0,!0);I.microBlockSize=J.getInt32(4,!0);I.blobSize=J.getInt32(8,!0);I.imageType=
J.getInt32(12,!0);I.maxZError=J.getFloat64(16,!0);I.zMin=J.getFloat64(24,!0);I.zMax=J.getFloat64(32,!0);A+=40;k.headerInfo=I;k.ptr=A;if(3<=K&&(g=this.computeChecksumFletcher32(new Uint8Array(g,A-(4<=K?52:48),I.blobSize-14)),g!==I.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(g,k){var A=k.headerInfo,J=this.getDataTypeArray(A.imageType),I=A.numDims*this.getDataTypeSize(A.imageType),K=this.readSubArray(g,k.ptr,J,I);g=this.readSubArray(g,k.ptr+I,J,I);k.ptr+=2*I;I=!0;for(k=0;k<
A.numDims;k++)if(K[k]!==g[k]){I=!1;break}A.minValues=K;A.maxValues=g;return I},readSubArray:function(g,k,A,J){if(A===Uint8Array)g=new Uint8Array(g,k,J);else{var I=new ArrayBuffer(J);(new Uint8Array(I)).set(new Uint8Array(g,k,J));g=new A(I)}return g},readMask:function(g,k){var A=k.ptr,J=k.headerInfo,I=J.width*J.height,K=J.numValidPixel,O=new DataView(g,A,4);J={};J.numBytes=O.getUint32(0,!0);A+=4;if((0===K||I===K)&&0!==J.numBytes)throw"invalid mask";if(0===K)K=new Uint8Array(Math.ceil(I/8)),J.bitset=
K,O=new Uint8Array(I),k.pixels.resultMask=O,A+=J.numBytes;else if(0<J.numBytes){K=new Uint8Array(Math.ceil(I/8));O=new DataView(g,A,J.numBytes);g=O.getInt16(0,!0);var R=2,V=0,Z=0;do{if(0<g)for(;g--;)K[V++]=O.getUint8(R++);else for(Z=O.getUint8(R++),g=-g;g--;)K[V++]=Z;g=O.getInt16(R,!0);R+=2}while(R<J.numBytes);if(-32768!==g||V<K.length)throw"Unexpected end of mask RLE encoding";O=new Uint8Array(I);for(R=R=g=0;R<I;R++)R&7?(g=K[R>>3],g<<=R&7):g=K[R>>3],g&128&&(O[R]=1);k.pixels.resultMask=O;J.bitset=
K;A+=J.numBytes}k.ptr=A;k.mask=J;return!0},readDataOneSweep:function(g,k,A,J){var I=k.ptr,K=k.headerInfo,O=K.numDims,R=K.width*K.height;K=K.numValidPixel*D.getDataTypeSize(K.imageType)*O;var V=k.pixels.resultMask;if(A===Uint8Array)g=new Uint8Array(g,I,K);else{var Z=new ArrayBuffer(K);(new Uint8Array(Z)).set(new Uint8Array(g,I,K));g=new A(Z)}if(g.length===R*O)k.pixels.resultPixels=J?D.swapDimensionOrder(g,R,O,A,!0):g;else{k.pixels.resultPixels=new A(R*O);var Q=Z=A=0,da=0;if(1<O)if(J)for(Z=0;Z<R;Z++){if(V[Z])for(da=
Z,Q=0;Q<O;Q++,da+=R)k.pixels.resultPixels[da]=g[A++]}else for(Z=0;Z<R;Z++){if(V[Z])for(da=Z*O,Q=0;Q<O;Q++)k.pixels.resultPixels[da+Q]=g[A++]}else for(Z=0;Z<R;Z++)V[Z]&&(k.pixels.resultPixels[Z]=g[A++])}k.ptr=I+K;return!0},readHuffmanTree:function(g,k){var A=this.HUFFMAN_LUT_BITS_MAX,J=new DataView(g,k.ptr,16);k.ptr+=16;if(2>J.getInt32(0,!0))throw"unsupported Huffman version";var I=J.getInt32(4,!0),K=J.getInt32(8,!0);J=J.getInt32(12,!0);if(K>=J)return!1;var O=new Uint32Array(J-K);D.decodeBits(g,k,
O);var R=[],V;for(V=K;V<J;V++){var Z=V-(V<I?0:I);R[Z]={first:O[V-K],second:null}}V=g.byteLength-k.ptr;O=new ArrayBuffer(4*Math.ceil(V/4));(new Uint8Array(O)).set(new Uint8Array(g,k.ptr,V));g=new Uint32Array(O);k=0;O=0;var Q=g[0];for(V=K;V<J;V++){Z=V-(V<I?0:I);var da=R[Z].first;0<da&&(R[Z].second=Q<<k>>>32-da,32-k>=da?(k+=da,32===k&&(k=0,O++,Q=g[O])):(k+=da-32,O++,Q=g[O],R[Z].second|=Q>>>32-k))}var a=Q=0,b=new z;for(V=0;V<R.length;V++)void 0!==R[V]&&(Q=Math.max(Q,R[V].first));a=Q>=A?A:Q;A=[];var H;
for(V=K;V<J;V++)if(Z=V-(V<I?0:I),da=R[Z].first,0<da)if(K=[da,Z],da<=a){Z=R[Z].second<<a-da;var M=1<<a-da;for(da=0;da<M;da++)A[Z|da]=K}else for(Z=R[Z].second,M=b,--da;0<=da;da--)(H=Z>>>da&1)?(M.right||(M.right=new z),M=M.right):(M.left||(M.left=new z),M=M.left),0!==da||M.val||(M.val=K[1]);return{decodeLut:A,numBitsLUTQick:a,numBitsLUT:Q,tree:b,stuffedData:g,srcPtr:O,bitPos:k}},readHuffman:function(g,k,A,J){var I=k.headerInfo.numDims,K=k.headerInfo.height,O=k.headerInfo.width,R=O*K,V=this.readHuffmanTree(g,
k);g=V.decodeLut;var Z=V.tree,Q=V.stuffedData,da=V.srcPtr,a=V.bitPos,b=V.numBitsLUTQick;V=V.numBitsLUT;var H=0===k.headerInfo.imageType?128:0,M=k.pixels.resultMask,ca,ja,ka,fa,ma,oa,ia=0;0<a&&(da++,a=0);var pa=Q[da],ra=1===k.encodeMode,sa=new A(R*I),xa=sa,va;if(2>I||ra)for(va=0;va<I;va++)if(1<I&&(xa=new A(sa.buffer,R*va,R),ia=0),k.headerInfo.numValidPixel===O*K)for(ka=ma=0;ka<K;ka++)for(fa=0;fa<O;fa++,ma++){var ta=0;var wa=ca=pa<<a>>>32-b;32-a<b&&(wa=ca|=Q[da+1]>>>64-a-b);if(g[wa])ta=g[wa][1],a+=
g[wa][0];else for(wa=ca=pa<<a>>>32-V,32-a<V&&(wa=ca|=Q[da+1]>>>64-a-V),wa=Z,oa=0;oa<V;oa++)if(wa=(ja=ca>>>V-oa-1&1)?wa.right:wa.left,!wa.left&&!wa.right){ta=wa.val;a=a+oa+1;break}32<=a&&(a-=32,da++,pa=Q[da]);ta-=H;ra?(ta=0<fa?ta+ia:0<ka?ta+xa[ma-O]:ta+ia,ta&=255,ia=xa[ma]=ta):xa[ma]=ta}else for(ka=ma=0;ka<K;ka++)for(fa=0;fa<O;fa++,ma++){if(M[ma]){ta=0;wa=ca=pa<<a>>>32-b;32-a<b&&(wa=ca|=Q[da+1]>>>64-a-b);if(g[wa])ta=g[wa][1],a+=g[wa][0];else for(wa=ca=pa<<a>>>32-V,32-a<V&&(wa=ca|=Q[da+1]>>>64-a-V),
wa=Z,oa=0;oa<V;oa++)if(wa=(ja=ca>>>V-oa-1&1)?wa.right:wa.left,!wa.left&&!wa.right){ta=wa.val;a=a+oa+1;break}32<=a&&(a-=32,da++,pa=Q[da]);ta-=H;ra?(ta=0<fa&&M[ma-1]?ta+ia:0<ka&&M[ma-O]?ta+xa[ma-O]:ta+ia,ta&=255,ia=xa[ma]=ta):xa[ma]=ta}}else for(ka=ma=0;ka<K;ka++)for(fa=0;fa<O;fa++)if(ma=ka*O+fa,!M||M[ma])for(va=0;va<I;va++,ma+=R){ta=0;wa=ca=pa<<a>>>32-b;32-a<b&&(wa=ca|=Q[da+1]>>>64-a-b);if(g[wa])ta=g[wa][1],a+=g[wa][0];else for(wa=ca=pa<<a>>>32-V,32-a<V&&(wa=ca|=Q[da+1]>>>64-a-V),wa=Z,oa=0;oa<V;oa++)if(wa=
(ja=ca>>>V-oa-1&1)?wa.right:wa.left,!wa.left&&!wa.right){ta=wa.val;a=a+oa+1;break}32<=a&&(a-=32,da++,pa=Q[da]);ta-=H;xa[ma]=ta}k.ptr=k.ptr+4*(da+1)+(0<a?4:0);k.pixels.resultPixels=sa;1<I&&!J&&(k.pixels.resultPixels=D.swapDimensionOrder(sa,R,I,A))},decodeBits:function(g,k,A,J,I){var K=k.headerInfo,O=K.fileVersion,R=0,V=new DataView(g,k.ptr,5<=g.byteLength-k.ptr?5:g.byteLength-k.ptr),Z=V.getUint8(0);R++;var Q=Z>>6,da=0===Q?4:3-Q,a=0<(Z&32)?!0:!1;Q=Z&31;Z=0;if(1===da)Z=V.getUint8(R),R++;else if(2===
da)Z=V.getUint16(R,!0),R+=2;else if(4===da)Z=V.getUint32(R,!0),R+=4;else throw"Invalid valid pixel count type";da=2*K.maxZError;I=1<K.numDims?K.maxValues[I]:K.zMax;if(a){k.counter.lut++;a=V.getUint8(R);R++;K=Math.ceil((a-1)*Q/8);var b=Math.ceil(K/4);b=new ArrayBuffer(4*b);var H=new Uint8Array(b);k.ptr+=R;H.set(new Uint8Array(g,k.ptr,K));R=new Uint32Array(b);k.ptr+=K;for(V=0;a-1>>>V;)V++;K=Math.ceil(Z*V/8);b=Math.ceil(K/4);b=new ArrayBuffer(4*b);H=new Uint8Array(b);H.set(new Uint8Array(g,k.ptr,K));
g=new Uint32Array(b);k.ptr+=K;k=3<=O?f.unstuffLUT2(R,Q,a-1,J,da,I):f.unstuffLUT(R,Q,a-1,J,da,I);3<=O?f.unstuff2(g,A,V,Z,k):f.unstuff(g,A,V,Z,k)}else k.counter.bitstuffer++,V=Q,k.ptr+=R,0<V&&(K=Math.ceil(Z*V/8),b=Math.ceil(K/4),b=new ArrayBuffer(4*b),H=new Uint8Array(b),H.set(new Uint8Array(g,k.ptr,K)),g=new Uint32Array(b),k.ptr+=K,3<=O?null==J?f.originalUnstuff2(g,A,V,Z):f.unstuff2(g,A,V,Z,!1,J,da,I):null==J?f.originalUnstuff(g,A,V,Z):f.unstuff(g,A,V,Z,!1,J,da,I))},readTiles:function(g,k,A,J){var I=
k.headerInfo,K=I.width,O=I.height,R=K*O,V=I.microBlockSize,Z=I.imageType,Q=D.getDataTypeSize(Z),da=Math.ceil(K/V),a=Math.ceil(O/V);k.pixels.numBlocksY=a;k.pixels.numBlocksX=da;var b=k.pixels.ptr=0,H=0,M=0,ca=0,ja=0,ka=0,fa=0,ma=0,oa=b=0,ia=0,pa=0,ra=fa=0;fa=fa=0;var sa=new A(V*V);O=O%V||V;var xa=K%V||V,va=I.numDims,ta,wa=k.pixels.resultMask,ya=k.pixels.resultPixels,Aa=5<=I.fileVersion?14:15,Da=I.zMax;for(M=0;M<a;M++)for(ja=M!==a-1?V:O,ca=0;ca<da;ca++)for(ka=ca!==da-1?V:xa,ia=M*K*V+ca*V,pa=K-ka,ta=
0;ta<va;ta++){1<va?(ra=ya,ia=M*K*V+ca*V,ya=new A(k.pixels.resultPixels.buffer,R*ta*Q,R),Da=I.maxValues[ta]):ra=null;fa=g.byteLength-k.ptr;H=new DataView(g,k.ptr,Math.min(10,fa));var Ba={};fa=0;ma=H.getUint8(0);fa++;var Fa=5<=I.fileVersion?ma&4:0;b=ma>>6&255;oa=ma>>2&Aa;if(oa!==(ca*V>>3&Aa))throw"integrity issue";if(Fa&&0===ta)throw"integrity issue";ma&=3;if(3<ma)throw k.ptr+=fa,"Invalid block encoding ("+ma+")";if(2===ma){if(Fa)if(wa)for(b=0;b<ja;b++)for(H=0;H<ka;H++)wa[ia]&&(ya[ia]=ra[ia]),ia++;
else for(b=0;b<ja;b++)for(H=0;H<ka;H++)ya[ia]=ra[ia],ia++;k.counter.constant++;k.ptr+=fa}else if(0===ma){if(Fa)throw"integrity issue";k.counter.uncompressed++;k.ptr+=fa;fa=ja*ka*Q;ra=g.byteLength-k.ptr;fa=fa<ra?fa:ra;ra=new ArrayBuffer(0===fa%Q?fa:fa+Q-fa%Q);Fa=new Uint8Array(ra);Fa.set(new Uint8Array(g,k.ptr,fa));ra=new A(ra);fa=0;if(wa)for(b=0;b<ja;b++){for(H=0;H<ka;H++)wa[ia]&&(ya[ia]=ra[fa++]),ia++;ia+=pa}else for(b=0;b<ja;b++){for(H=0;H<ka;H++)ya[ia++]=ra[fa++];ia+=pa}k.ptr+=fa*Q}else if(b=D.getDataTypeUsed(Fa&&
6>Z?4:Z,b),Ba=D.getOnePixel(Ba,fa,b,H),fa+=D.getDataTypeSize(b),3===ma)if(k.ptr+=fa,k.counter.constantoffset++,wa)for(b=0;b<ja;b++){for(H=0;H<ka;H++)wa[ia]&&(ya[ia]=Fa?Math.min(Da,ra[ia]+Ba):Ba),ia++;ia+=pa}else for(b=0;b<ja;b++){for(H=0;H<ka;H++)ya[ia]=Fa?Math.min(Da,ra[ia]+Ba):Ba,ia++;ia+=pa}else if(k.ptr+=fa,D.decodeBits(g,k,sa,Ba,ta),fa=0,Fa)if(wa)for(b=0;b<ja;b++){for(H=0;H<ka;H++)wa[ia]&&(ya[ia]=sa[fa++]+ra[ia]),ia++;ia+=pa}else for(b=0;b<ja;b++){for(H=0;H<ka;H++)ya[ia]=sa[fa++]+ra[ia],ia++;
ia+=pa}else if(wa)for(b=0;b<ja;b++){for(H=0;H<ka;H++)wa[ia]&&(ya[ia]=sa[fa++]),ia++;ia+=pa}else for(b=0;b<ja;b++){for(H=0;H<ka;H++)ya[ia++]=sa[fa++];ia+=pa}}1<va&&!J&&(k.pixels.resultPixels=D.swapDimensionOrder(k.pixels.resultPixels,R,va,A))},formatFileInfo:function(g){return{fileIdentifierString:g.headerInfo.fileIdentifierString,fileVersion:g.headerInfo.fileVersion,imageType:g.headerInfo.imageType,height:g.headerInfo.height,width:g.headerInfo.width,numValidPixel:g.headerInfo.numValidPixel,microBlockSize:g.headerInfo.microBlockSize,
blobSize:g.headerInfo.blobSize,maxZError:g.headerInfo.maxZError,pixelType:D.getPixelType(g.headerInfo.imageType),eofOffset:g.eofOffset,mask:g.mask?{numBytes:g.mask.numBytes}:null,pixels:{numBlocksX:g.pixels.numBlocksX,numBlocksY:g.pixels.numBlocksY,maxValue:g.headerInfo.zMax,minValue:g.headerInfo.zMin,noDataValue:g.noDataValue}}},constructConstantSurface:function(g,k){var A=g.headerInfo.zMax,J=g.headerInfo.zMin,I=g.headerInfo.maxValues,K=g.headerInfo.numDims,O=g.headerInfo.height*g.headerInfo.width,
R=0,V=0,Z=0,Q=g.pixels.resultMask;g=g.pixels.resultPixels;if(Q)if(1<K)if(k)for(R=0;R<K;R++)for(Z=R*O,A=I[R],V=0;V<O;V++)Q[V]&&(g[Z+V]=A);else for(V=0;V<O;V++){if(Q[V])for(Z=V*K,R=0;R<K;R++)g[Z+K]=I[R]}else for(V=0;V<O;V++)Q[V]&&(g[V]=A);else if(1<K&&J!==A)if(k)for(R=0;R<K;R++)for(Z=R*O,A=I[R],V=0;V<O;V++)g[Z+V]=A;else for(V=0;V<O;V++)for(Z=V*K,R=0;R<K;R++)g[Z+R]=I[R];else for(V=0;V<O*K;V++)g[V]=A},getDataTypeArray:function(g){switch(g){case 0:g=Int8Array;break;case 1:g=Uint8Array;break;case 2:g=Int16Array;
break;case 3:g=Uint16Array;break;case 4:g=Int32Array;break;case 5:g=Uint32Array;break;case 6:g=Float32Array;break;case 7:g=Float64Array;break;default:g=Float32Array}return g},getPixelType:function(g){switch(g){case 0:g="S8";break;case 1:g="U8";break;case 2:g="S16";break;case 3:g="U16";break;case 4:g="S32";break;case 5:g="U32";break;case 6:g="F32";break;case 7:g="F64";break;default:g="F32"}return g},isValidPixelValue:function(g,k){if(null==k)return!1;switch(g){case 0:g=-128<=k&&127>=k;break;case 1:g=
0<=k&&255>=k;break;case 2:g=-32768<=k&&32767>=k;break;case 3:g=0<=k&&65536>=k;break;case 4:g=-2147483648<=k&&2147483647>=k;break;case 5:g=0<=k&&4294967296>=k;break;case 6:g=-3.4027999387901484E38<=k&&3.4027999387901484E38>=k;break;case 7:g=4.9E-324<=k&&1.7976931348623157E308>=k;break;default:g=!1}return g},getDataTypeSize:function(g){var k=0;switch(g){case 0:case 1:k=1;break;case 2:case 3:k=2;break;case 4:case 5:case 6:k=4;break;case 7:k=8;break;default:k=g}return k},getDataTypeUsed:function(g,k){var A=
g;switch(g){case 2:case 4:A=g-k;break;case 3:case 5:A=g-2*k;break;case 6:A=0===k?g:1===k?2:1;break;case 7:A=0===k?g:g-2*k+1;break;default:A=g}return A},getOnePixel:function(g,k,A,J){g=0;switch(A){case 0:g=J.getInt8(k);break;case 1:g=J.getUint8(k);break;case 2:g=J.getInt16(k,!0);break;case 3:g=J.getUint16(k,!0);break;case 4:g=J.getInt32(k,!0);break;case 5:g=J.getUInt32(k,!0);break;case 6:g=J.getFloat32(k,!0);break;case 7:g=J.getFloat64(k,!0);break;default:throw"the decoder does not understand this pixel type";
}return g},swapDimensionOrder:function(g,k,A,J,I){var K=0,O=0,R=0,V=0,Z=g;if(1<A)if(Z=new J(k*A),I)for(K=0;K<k;K++)for(V=K,R=0;R<A;R++,V+=k)Z[V]=g[O++];else for(K=0;K<k;K++)for(V=K,R=0;R<A;R++,V+=k)Z[O++]=g[V];return Z}},z=function(g,k,A){this.val=g;this.left=k;this.right=A};return{decode:function(g,k){k=k||{};var A=k.noDataValue,J=0,I={};I.ptr=k.inputOffset||0;I.pixels={};D.readHeaderInfo(g,I);J=I.headerInfo;var K=J.fileVersion,O=D.getDataTypeArray(J.imageType);if(5<K)throw"unsupported lerc version 2."+
K;D.readMask(g,I);J.numValidPixel===J.width*J.height||I.pixels.resultMask||(I.pixels.resultMask=k.maskData);var R=J.width*J.height;I.pixels.resultPixels=new O(R*J.numDims);I.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var V=!k.returnPixelInterleavedDims;if(0!==J.numValidPixel)if(J.zMax===J.zMin)D.constructConstantSurface(I,V);else if(4<=K&&D.checkMinMaxRanges(g,I))D.constructConstantSurface(I,V);else{var Z=new DataView(g,I.ptr,2),Q=Z.getUint8(0);I.ptr++;if(Q)D.readDataOneSweep(g,
I,O,V);else if(1<K&&1>=J.imageType&&1E-5>Math.abs(J.maxZError-.5)){Z=Z.getUint8(1);I.ptr++;I.encodeMode=Z;if(2<Z||4>K&&1<Z)throw"Invalid Huffman flag "+Z;Z?D.readHuffman(g,I,O,V):D.readTiles(g,I,O,V)}else D.readTiles(g,I,O,V)}I.eofOffset=I.ptr;k.inputOffset?(g=I.headerInfo.blobSize+k.inputOffset-I.ptr,1<=Math.abs(g)&&(I.eofOffset=k.inputOffset+I.headerInfo.blobSize)):(g=I.headerInfo.blobSize-I.ptr,1<=Math.abs(g)&&(I.eofOffset=I.headerInfo.blobSize));g={width:J.width,height:J.height,pixelData:I.pixels.resultPixels,
minValue:J.zMin,maxValue:J.zMax,validPixelCount:J.numValidPixel,dimCount:J.numDims,dimStats:{minValues:J.minValues,maxValues:J.maxValues},maskData:I.pixels.resultMask};if(I.pixels.resultMask&&D.isValidPixelValue(J.imageType,A)){K=I.pixels.resultMask;for(J=0;J<R;J++)K[J]||(g.pixelData[J]=A);g.noDataValue=A}I.noDataValue=A;k.returnFileInfo&&(g.fileInfo=D.formatFileInfo(I));return g},getBandCount:function(g){for(var k=0,A=0,J={ptr:0,pixels:{}};A<g.byteLength-58;)D.readHeaderInfo(g,J),A+=J.headerInfo.blobSize,
k++,J.ptr=A;return k}}})})(n);const r=n.exports,m=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],v=new Set([1,5,6,7,8,34712,34887]),C=function(p,f,D,z,g){var k,A,J=P.isPlatformLittleEndian===f,I=F(D,"BITSPERSAMPLE");const K=null!=(k=F(D,"SAMPLEFORMAT"))?k:1;k=na(K,I);I=null!=(A=F(D,"COMPRESSION"))?A:1;A=X(k);if(34887===I)return r.decode(p,{inputOffset:z,returnFileInfo:!0}).pixelData;if(1===I){var O=p.slice(z,z+g);var R=new Uint8Array(O)}else if(8===I||32946===I)R=new Uint8Array(p,z,g),R=new ea.Zlib(R),
p=R.getBytes(),O=new ArrayBuffer(p.length),R=new Uint8Array(O),R.set(p);else if(6===I)R=new Uint8Array(p,z,g),O=new aa.JpegImage,O.parse(R),p=O.getData(O.width,O.height,!0),O=new ArrayBuffer(p.length),R=new Uint8Array(O),R.set(p);else if(7===I){f=D.get("JPEGTABLES").values;O=f.length-2;R=new Uint8Array(O+g-2);for(D=0;D<O;D++)R[D]=f[D];p=new Uint8Array(p,z+2,g-2);for(z=0;z<p.length;z++)R[O+z]=p[z];O=new aa.JpegImage;O.parse(R);p=O.getData(O.width,O.height,!0);O=new ArrayBuffer(p.length);R=new Uint8Array(O);
R.set(p)}else 5===I&&(R=T.decode(p,z,g,f),O=R.buffer);if("u8"!==k&&"s8"!==k&&!J)switch(O=new ArrayBuffer(R.length),J=new Uint8Array(O),k){case "u16":case "s16":for(k=0;k<R.length;k+=2)J[k]=R[k+1],J[k+1]=R[k];break;case "u32":case "s32":case "f32":for(k=0;k<R.length;k+=4)J[k]=R[k+3],J[k+1]=R[k+2],J[k+2]=R[k+1],J[k+3]=R[k]}return new A(O)},t=function(p,f,D){if(!(p&&0<p.length&&f&&D))return null;let z,g,k;const A=p[0].length,J=p.length,I=new Uint8Array(A);for(let O=0;O<J;O++)if(z=p[O],g=f[O],k=D[O],
0===O)for(var K=0;K<A;K++)I[K]=z[K]<g||z[K]>k?0:1;else for(K=0;K<A;K++)I[K]&&(I[K]=z[K]<g||z[K]>k?0:1);return I},B=function(p){if(!p)return null;var f=p.match(/<Item(.*?)Item>/gi);if(!f||0===f.length)return null;p=new Map;var D;for(var z=0;z<f.length;z++){var g=f[z];var k=g.slice(6,g.indexOf("\x3e"));var A=g.indexOf("sample\x3d");-1<A&&(D=g.slice(A+8,g.indexOf('"',A+8)));A=g.indexOf("name\x3d");-1<A&&(k=g.slice(A+6,g.indexOf('"',A+6)));k&&(g=g.slice(g.indexOf("\x3e")+1,g.indexOf("\x3c/Item\x3e")).trim(),
null!=D?p.has(k)?p.get(k)[D]=g:p.set(k,[g]):p.set(k,g));D=null}f=p.get("STATISTICS_MINIMUM");k=p.get("STATISTICS_MAXIMUM");z=p.get("STATISTICS_MEAN");g=p.get("STATISTICS_STDDEV");D=null;if(f&&k)for(D=[],A=0;A<f.length;A++)D.push({min:parseFloat(f[A]),max:parseFloat(k[A]),avg:z&&parseFloat(z[A]),stddev:g&&parseFloat(g[A])});k=p.get("BandName");z=p.get("WavelengthMin");g=p.get("WavelengthMax");f=null;if(k)for(f=[],A=0;A<k.length;A++)f.push({BandName:k[A],WavelengthMin:z&&parseFloat(z[A]),WavelengthMax:g&&
parseFloat(g[A])});k=p.get("DataType");return{statistics:D,bandProperties:f,dataType:k,rawMetadata:p}};S.Lerc2Codec=r;S.decode=function(p,f=0,D){D=D||E(p);const {ifds:z,noData:g}=D;if(0===z.length)throw"no valid image file directory";var k=e(D);if(k)throw k;k=-1===f?z[z.length-1]:z[f];f=g?g[0]:null;if(D.tileWidth){var A=D,J,I=Y(k,"TILEOFFSETS");if(void 0===I)k=null;else{D=Y(k,"TILEBYTECOUNTS");var {width:K,height:O,pixelType:R,tileWidth:V,tileHeight:Z}=c([k]),Q=l(k,A),da=A.planes,a=K*O,b=F(k,"BITSPERSAMPLE"),
H=34887===(null!=(J=F(k,"COMPRESSION"))?J:1),M=X(R);J=[];for(var ca=0;ca<da;ca++)J.push(new M(a));var ja,ka;a=Math.ceil(K/V);if(0===b%8)if(H&&Q&&1<da)for(Q=Math.round(I.length/da),b=0;b<Q;b++){var fa=Math.floor(b/a)*Z;var ma=b%a*V;M=fa*K+ma;for(H=0;H<da;H++){ca=b*da+H;ca=C(p,A.littleEndian,k,I[ca],D[ca]);var oa=0;var ia=M;var pa=Math.min(V,K-ma);var ra=Math.min(Z,O-fa);var sa=J[H];for(ja=0;ja<ra;ja++)for(ia=M+ja*K,oa=ja*V,ka=0;ka<pa;ka++,ia++,oa++)sa[ia]=ca[oa]}}else for(b=0;b<I.length;b++)for(fa=
Math.floor(b/a)*Z,ma=b%a*V,M=fa*K+ma,ca=C(p,A.littleEndian,k,I[b],D[b]),oa=0,ia=M,pa=Math.min(V,K-ma),ra=Math.min(Z,O-fa),fa=0;fa<da;fa++)if(sa=J[fa],Q||H)for(ja=0;ja<ra;ja++)for(ia=M+ja*K,oa=V*Z*fa+ja*V,ka=0;ka<pa;ka++,ia++,oa++)sa[ia]=ca[oa];else for(ja=0;ja<ra;ja++)for(ia=M+ja*K,oa=ja*V*da+fa,ka=0;ka<pa;ka++,ia++,oa+=da)sa[ia]=ca[oa];k={width:K,height:O,pixelType:R,pixels:J}}}else if(a=D,ja=P.isPlatformLittleEndian===a.littleEndian,ka=Y(k,"STRIPOFFSETS"),void 0===ka)k=null;else{var {width:xa,height:va,
pixelType:ta}=c([k]);D=a.planes;da=xa*va;b=F(k,"BITSPERSAMPLE");I=X(ta);J=new I(da*D);M=Y(k,"STRIPBYTECOUNTS");ca=F(k,"ROWSPERSTRIP");fa=null!=(ma=F(k,"COMPRESSION"))?ma:1;ia=ca;if(0===b%8)for(k=0;k<ka.length;k++){ma=k*ca*xa*D;ia=(k+1)*ca>va?va-k*ca:ca;if("u8"===ta||"s8"===ta||ja)8===fa||32946===fa?(Q=new Uint8Array(p,ka[k],M[k]),Q=new ea.Zlib(Q),oa=Q.getBytes(),H=new ArrayBuffer(oa.length),Q=new Uint8Array(H),Q.set(oa),Q.length!==ia*xa*D*b/8&&console.log("strip byte counts is different than expected")):
6===fa?(Q=new Uint8Array(p,ka[k],M[k]),H=new aa.JpegImage,H.parse(Q),ia=H.getData(H.width,H.height,!0),H=new ArrayBuffer(ia.length),Q=new Uint8Array(H),Q.set(ia)):5===fa?(Q=T.decode(p,ka[k],M[k],a.littleEndian),H=Q.buffer):1===fa&&(M[k]!==ia*xa*D*b/8&&console.log("strip byte counts is different than expected"),H=p.slice(ka[k],ka[k]+M[k]));else switch(6===fa||8===fa||32946===fa?(Q=new Uint8Array(p,ka[k],M[k]),Q=new ea.Zlib(Q),Q=Q.getBytes(),H=new ArrayBuffer(Q.length),A=new Uint8Array(H),Q.length!==
ia*xa*D*b/8&&console.log("strip byte counts is different than expected")):1===fa&&(M[k]!==ia*xa*D*b/8&&console.log("strip byte counts is different than expected"),H=new ArrayBuffer(M[k]),Q=new Uint8Array(p,ka[k],M[k]),A=new Uint8Array(H)),ta){case "u16":case "s16":for(ia=0;ia<Q.length;ia+=2)A[ia]=Q[ia+1],A[ia+1]=Q[ia];break;case "u32":case "s32":case "f32":for(ia=0;ia<Q.length;ia+=4)A[ia]=Q[ia+3],A[ia+1]=Q[ia+2],A[ia+2]=Q[ia+1],A[ia+3]=Q[ia]}ia=new I(H);J.set(ia,ma)}Q=[];if(1===D)Q.push(J);else for(k=
0;k<D;k++){A=new I(da);for(p=0;p<da;p++)A[p]=J[p*D+k];Q.push(A)}k={width:xa,height:va,pixelType:ta,pixels:Q}}if(null!==f){k.mask=new Uint8Array(k.width*k.height);if(1E24<Math.abs(f))for(p=0;p<k.width*k.height;p++)k.mask[p]=1E-6>Math.abs((k.pixels[0][p]-f)/f)?0:1;else for(p=0;p<k.width*k.height;p++)k.mask[p]=k.pixels[0][p]===f?0:1;k.noDataValue=f}return k};S.decodeTileOrStrip=function(p,f){var D;const {headerInfo:z,ifd:g,offsets:k,sizes:A}=f;var J=k.map((ca,ja)=>C(p,z.littleEndian,g,ca,A[ja]||p.byteLength)),
I=l(g,z);const {pixelType:K,planes:O}=z;var R=X(K);const V=F(g,"TILEWIDTH"),Z=F(g,"TILELENGTH");var Q=null!=(D=F(g,"COMPRESSION"))?D:1;D=V*Z;const da=[];let a=J[0];const b=34887===Q;for(let ca=0;ca<O;ca++){Q=new R(D);if(I&&b){a=J[ca];for(var H=0;H<D;H++)Q[H]=a[ca][H+ca]}else if(I||b&&!I)Q=a.slice(D*ca,D*(ca+1));else for(H=0;H<D;H++)Q[H]=a[H*O+ca];da.push(Q)}J=z.noData?z.noData[0]:null;I=(R=z.metadata?z.metadata.statistics:null)?R.map(ca=>ca.min):null;R=R?R.map(ca=>ca.max):null;let M;if(null!=J)if(M=
new Uint8Array(D),1E24<Math.abs(J))for(f=0;f<D;f++)M[f]=1E-6>Math.abs((da[0][f]-J)/J)?0:1;else for(f=0;f<D;f++)M[f]=da[0][f]===J?0:1;else I&&R&&f.applyMinMaxConstraint&&(M=t(da,I,R));return{pixelType:K,width:V,height:Z,pixels:da,mask:M,noDataValue:J}};S.getImageInfo=c;S.isBSQConfig=l;S.parseFieldValues=d;S.parseHeader=E;S.parseIFD=h;S.parseSignature=w})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(S){S.bytesToUTF8=function(y,aa){let T=0,x="",P=0,ea=
0;const na=y.length;for(;T<na;)if(ea=y[T++],P=ea>>4,8>P?P=1:15===P?(P=4,ea=(ea&7)<<18|(y[T++]&63)<<12|(y[T++]&63)<<6|y[T++]&63):14===P?(P=3,ea=(ea&15)<<12|(y[T++]&63)<<6|y[T++]&63):(P=2,ea=(ea&31)<<6|y[T++]&63),0!==ea||aa)x+=String.fromCharCode(ea);return x};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(S){function y(P,ea,na,X=!0){if(0!==ea%4||0!==na%4){var la=new ArrayBuffer(4*Math.ceil(na/4));la=new Uint8Array(la);
P=new Uint8Array(P,ea,na);if(X)for(X=0;X<la.length;X+=4)la[X]=P[X+3],la[X+1]=P[X+2],la[X+2]=P[X+1],la[X+3]=P[X];else la.set(P);return new Uint32Array(la.buffer)}if(X){X=new Uint8Array(P,ea,na);la=new Uint8Array(X.length);for(P=0;P<la.length;P+=4)la[P]=X[P+3],la[P+1]=X[P+2],la[P+2]=X[P+1],la[P+3]=X[P];return new Uint32Array(la.buffer)}return new Uint32Array(P,ea,na/4)}function aa(){const P=[];for(let ea=0;257>=ea;ea++)P[ea]=[ea];return P}function T(P,ea){for(let na=0;na<ea.length;na++)P.push(ea[na])}
const x=new Set;x.add(511);x.add(1023);x.add(2047);x.add(4095);x.add(8191);S.decode=function(P,ea,na,X=!0){P=y(P,ea,na,X);ea=9;X=aa();let la=32,ba=X.length,Y=[],U=1,F=P[0],G=0;const d=P.length;na=8*(4*d-na);const c=[];for(;null!=F;){if(la>=ea)la-=ea,G=F>>>32-ea,F<<=ea;else{G=F>>>32-la;F=P[U++];var l=ea-la;la=32-l;G=(G<<l)+(F>>>la);F<<=l}if(257===G)break;if(256===G)ea=9,X=aa(),ba=X.length,Y=[];else{l=X[G];if(null==l){if(G>X.length)throw"data integrity issue: code does not exist on code page";Y.push(Y[0]);
X[ba++]=Y.slice();T(c,Y)}else T(c,l),Y.push(l[0]),1<Y.length&&(X[ba++]=Y.slice()),Y=l.slice();x.has(ba)&&ea++;0===la&&(F=P[U++],la=32);if(U>d||U===d&&la<=na)break}}return new Uint8Array(c)};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const S=(()=>{const x=[];x[254]="NEWSUBFILETYPE";x[255]="SUBFILETYPE";x[256]="IMAGEWIDTH";x[257]="IMAGELENGTH";x[258]="BITSPERSAMPLE";x[259]="COMPRESSION";x[262]="PHOTOMETRICINTERPRETATION";
x[263]="THRESHHOLDING";x[264]="CELLWIDTH";x[265]="CELLLENGTH";x[266]="FILLORDER";x[269]="DOCUMENTNAME";x[270]="IMAGEDESCRIPTION";x[271]="MAKE";x[272]="MODEL";x[273]="STRIPOFFSETS";x[274]="ORIENTATION";x[277]="SAMPLESPERPIXEL";x[278]="ROWSPERSTRIP";x[279]="STRIPBYTECOUNTS";x[280]="MINSAMPLEVALUE";x[281]="MAXSAMPLEVALUE";x[282]="XRESOLUTION";x[283]="YRESOLUTION";x[284]="PLANARCONFIGURATION";x[285]="PAGENAME";x[286]="XPOSITION";x[287]="YPOSITION";x[288]="FREEOFFSETS";x[289]="FREEBYTECOUNTS";x[290]="GRAYRESPONSEUNIT";
x[291]="GRAYRESPONSECURVE";x[292]="T4OPTIONS";x[293]="T6OPTIONS";x[296]="RESOLUTIONUNIT";x[297]="PAGENUMBER";x[300]="COLORRESPONSEUNIT";x[301]="TRANSFERFUNCTION";x[305]="SOFTWARE";x[306]="DATETIME";x[315]="ARTIST";x[316]="HOSTCOMPUTER";x[317]="PREDICTOR";x[318]="WHITEPOINT";x[319]="PRIMARYCHROMATICITIES";x[320]="COLORMAP";x[321]="HALFTONEHINTS";x[322]="TILEWIDTH";x[323]="TILELENGTH";x[324]="TILEOFFSETS";x[325]="TILEBYTECOUNTS";x[326]="BADFAXLINES";x[327]="CLEANFAXDATA";x[328]="CONSECUTIVEBADFAXLINES";
x[330]="SUBIFD";x[332]="INKSET";x[333]="INKNAMES";x[334]="NUMBEROFINKS";x[336]="DOTRANGE";x[337]="TARGETPRINTER";x[338]="EXTRASAMPLES";x[339]="SAMPLEFORMAT";x[340]="SMINSAMPLEVALUE";x[341]="SMAXSAMPLEVALUE";x[342]="TRANSFERRANGE";x[347]="JPEGTABLES";x[512]="JPEGPROC";x[513]="JPEGIFOFFSET";x[514]="JPEGIFBYTECOUNT";x[515]="JPEGRESTARTINTERVAL";x[517]="JPEGLOSSLESSPREDICTORS";x[518]="JPEGPOINTTRANSFORM";x[519]="JPEGQTABLES";x[520]="JPEGDCTABLES";x[521]="JPEGACTABLES";x[529]="YCBCRCOEFFICIENTS";x[530]=
"YCBCRSUBSAMPLING";x[531]="YCBCRPOSITIONING";x[532]="REFERENCEBLACKWHITE";x[700]="XMP";x[33550]="GEOPIXELSCALE";x[33922]="GEOTIEPOINTS";x[33432]="COPYRIGHT";x[42112]="GDAL_METADATA";x[42113]="GDAL_NODATA";x[50844]="RPCCOEFFICIENT";x[34264]="GEOTRANSMATRIX";x[34735]="GEOKEYDIRECTORY";x[34736]="GEODOUBLEPARAMS";x[34737]="GEOASCIIPARAMS";x[34665]="EXIFIFD";x[34853]="GPSIFD";x[40965]="INTEROPERABILITYIFD";return x})(),y=(()=>{const x=[].concat(S);x[36864]="ExifVersion";x[40960]="FlashpixVersion";x[40961]=
"ColorSpace";x[42240]="Gamma";x[37121]="ComponentsConfiguration";x[37122]="CompressedBitsPerPixel";x[40962]="PixelXDimension";x[40963]="PixelYDimension";x[37500]="MakerNote";x[37510]="UserComment";x[40964]="RelatedSoundFile";x[36867]="DateTimeOriginal";x[36868]="DateTimeDigitized";x[36880]="OffsetTime";x[36881]="OffsetTimeOriginal";x[36882]="OffsetTimeDigitized";x[37520]="SubSecTime";x[37521]="SubSecTimeOriginal";x[37522]="SubSecTimeDigitized";x[37888]="Temperature";x[37889]="Humidity";x[37890]="Pressure";
x[37891]="WaterDepth";x[37892]="Acceleration";x[37893]="CameraElevationAngle";x[42016]="ImageUniqueID";x[42032]="CameraOwnerName";x[42033]="BodySerialNumber";x[42034]="LensSpecification";x[42035]="LensMake";x[42036]="LensModel";x[42037]="LensSerialNumber";x[33434]="ExposureTime";x[33437]="FNumber";x[34850]="ExposureProgram";x[34852]="SpectralSensitivity";x[34855]="PhotographicSensitivity";x[34856]="OECF";x[34864]="SensitivityType";x[34865]="StandardOutputSensitivity";x[34866]="RecommendedExposureIndex";
x[34867]="ISOSpeed";x[34868]="ISOSpeedLatitudeyyy";x[34869]="ISOSpeedLatitudezzz";x[37377]="ShutterSpeedValue";x[37378]="ApertureValue";x[37379]="BrightnessValue";x[37380]="ExposureBiasValue";x[37381]="MaxApertureValue";x[37382]="SubjectDistance";x[37383]="MeteringMode";x[37384]="LightSource";x[37385]="Flash";x[37386]="FocalLength";x[37396]="SubjectArea";x[41483]="FlashEnergy";x[41484]="SpatialFrequencyResponse";x[41486]="FocalPlaneXResolution";x[41487]="FocalPlaneYResolution";x[41488]="FocalPlaneResolutionUnit";
x[41492]="SubjectLocation";x[41493]="ExposureIndex";x[41495]="SensingMethod";x[41728]="FileSource";x[41729]="SceneType";x[41730]="CFAPattern";x[41985]="CustomRendered";x[41986]="ExposureMode";x[41987]="WhiteBalance";x[41988]="DigitalZoomRatio";x[41989]="FocalLengthIn35mmFilm";x[41990]="SceneCaptureType";x[41991]="GainControl";x[41992]="Contrast";x[41993]="Saturation";x[41994]="Sharpness";x[41995]="DeviceSettingDescription";x[41996]="SubjectDistanceRange";return x})(),aa=(()=>{const x=[];x[1024]="GTModelTypeGeoKey";
x[1025]="GTRasterTypeGeoKey";x[1026]="GTCitationGeoKey";x[2048]="GeographicTypeGeoKey";x[2049]="GeogCitationGeoKey";x[2050]="GeogGeodeticDatumGeoKey";x[2051]="GeogPrimeMeridianGeoKey";x[2052]="GeogLinearUnitsGeoKey";x[2053]="GeogLinearUnitSizeGeoKey";x[2054]="GeogAngularUnitsGeoKey";x[2055]="GeogAngularUnitSizeGeoKey";x[2056]="GeogEllipsoidGeoKey";x[2057]="GeogSemiMajorAxisGeoKey";x[2058]="GeogSemiMinorAxisGeoKey";x[2059]="GeogInvFlatteningGeoKey";x[2061]="GeogPrimeMeridianLongGeoKey";x[2060]="GeogAzimuthUnitsGeoKey";
x[3072]="ProjectedCSTypeGeoKey";x[3073]="PCSCitationGeoKey";x[3074]="ProjectionGeoKey";x[3075]="ProjCoordTransGeoKey";x[3076]="ProjLinearUnitsGeoKey";x[3077]="ProjLinearUnitSizeGeoKey";x[3078]="ProjStdParallel1GeoKey";x[3079]="ProjStdParallel2GeoKey";x[3080]="ProjNatOriginLongGeoKey";x[3081]="ProjNatOriginLatGeoKey";x[3082]="ProjFalseEastingGeoKey";x[3083]="ProjFalseNorthingGeoKey";x[3084]="ProjFalseOriginLongGeoKey";x[3085]="ProjFalseOriginLatGeoKey";x[3086]="ProjFalseOriginEastingGeoKey";x[3087]=
"ProjFalseOriginNorthingGeoKey";x[3088]="ProjCenterLongGeoKey";x[3090]="ProjCenterEastingGeoKey";x[3091]="ProjCenterNorthingGeoKey";x[3092]="ProjScaleAtNatOriginGeoKey";x[3093]="ProjScaleAtCenterGeoKey";x[3094]="ProjAzimuthAngleGeoKey";x[3095]="ProjStraightVertPoleLongGeoKey";x[4096]="VerticalCSTypeGeoKey";x[4097]="VerticalCitationGeoKey";x[4098]="VerticalDatumGeoKey";x[4099]="VerticalUnitsGeoKey";return x})(),T=new Map;T.set("EXIFIFD",y);T.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:S,ifdTags:T,GEO_KEYS:aa,getTagName:function(x,P){P=(P||S)[x];void 0===P&&(P="unknown"+String(x));return P}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(S){{var y=new ArrayBuffer(4);const aa=new Uint8Array(y);(new Uint32Array(y))[0]=1;y=1===aa[0]}S.isPlatformLittleEndian=y;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/chunks/LercCodec":function(){define(["exports","../core/mathUtils"],function(S,y){var aa=y.clampFloat32(-Infinity);
S.decode=function(T,x){x=x||{};var P=x.inputOffset||0;var ea=x.encodedMaskData||null===x.encodedMaskData;var na=new Uint8Array(T,P,10);na=String.fromCharCode.apply(null,na);if("CntZImage"!=na.trim())throw"Unexpected file identifier string: "+na;P+=10;var X=new DataView(T,P,24);var la=X.getInt32(0,!0);var ba=X.getInt32(4,!0);var Y=X.getUint32(8,!0);var U=X.getUint32(12,!0);var F=X.getFloat64(16,!0);P+=24;if(!ea){X=new DataView(T,P,16);var G={};G.numBlocksY=X.getUint32(0,!0);G.numBlocksX=X.getUint32(4,
!0);G.numBytes=X.getUint32(8,!0);G.maxValue=X.getFloat32(12,!0);P+=16;if(0<G.numBytes){ea=new Uint8Array(Math.ceil(U*Y/8));X=new DataView(T,P,G.numBytes);var d=X.getInt16(0,!0);var c=2;var l=0;do{if(0<d)for(;d--;)ea[l++]=X.getUint8(c++);else{var E=X.getUint8(c++);for(d=-d;d--;)ea[l++]=E}d=X.getInt16(c,!0);c+=2}while(c<G.numBytes);if(-32768!==d||l<ea.length)throw"Unexpected end of mask RLE encoding";G.bitset=ea;P+=G.numBytes}else 0===(G.numBytes|G.numBlocksY|G.maxValue)&&(ea=new Uint8Array(Math.ceil(U*
Y/8)),G.bitset=ea)}X=new DataView(T,P,16);var q=ea=E=l=c=d=void 0;d=X.getUint32(0,!0);c=X.getUint32(4,!0);l=X.getUint32(8,!0);E=X.getFloat32(12,!0);P+=16;q=c;ea=d;q+=0<U%q?1:0;var u=ea+(0<Y%ea?1:0);ea=Array(q*u);for(var w=1E9,h=0,e=0;e<u;e++)for(var n=0;n<q;n++){var r=0;X=new DataView(T,P,Math.min(10,T.byteLength-P));var m={};ea[h++]=m;var v=X.getUint8(0);r++;m.encoding=v&63;if(3<m.encoding)throw"Invalid block encoding ("+m.encoding+")";if(2===m.encoding)P++,w=Math.min(w,0);else{if(0!==v&&2!==v){v>>=
6;m.offsetType=v;if(2===v)m.offset=X.getInt8(1),r++;else if(1===v)m.offset=X.getInt16(1,!0),r+=2;else if(0===v)m.offset=X.getFloat32(1,!0),r+=4;else throw"Invalid block offset type";w=Math.min(m.offset,w);if(1===m.encoding)if(v=X.getUint8(r),r++,m.bitsPerPixel=v&63,v>>=6,m.numValidPixelsType=v,2===v)m.numValidPixels=X.getUint8(r),r++;else if(1===v)m.numValidPixels=X.getUint16(r,!0),r+=2;else if(0===v)m.numValidPixels=X.getUint32(r,!0),r+=4;else throw"Invalid valid pixel count type";}P+=r;if(3!=m.encoding)if(0===
m.encoding){X=(l-1)/4;if(X!==Math.floor(X))throw"uncompressed block has invalid length";r=new ArrayBuffer(4*X);v=new Uint8Array(r);v.set(new Uint8Array(T,P,4*X));r=new Float32Array(r);for(v=0;v<r.length;v++)w=Math.min(w,r[v]);m.rawData=r;P+=4*X}else 1===m.encoding&&(X=Math.ceil(m.numValidPixels*m.bitsPerPixel/8),r=new ArrayBuffer(4*Math.ceil(X/4)),v=new Uint8Array(r),v.set(new Uint8Array(T,P,X)),m.stuffedData=new Uint32Array(r),P+=X)}}q=w;T=P;P=null!=x.noDataValue?y.clampFloat32(x.noDataValue):aa;
u=x.encodedMaskData;v=x.returnMask;w=0;h=c;e=d;n=Math.floor(U/h);m=Math.floor(Y/e);r=2*F;u=u||(G?G.bitset:null);var C;X=new (x.pixelType||Float32Array)(U*Y);v&&u&&(C=new Uint8Array(U*Y));v=new Float32Array(n*m);for(var t,B,p=0;p<=e;p++){var f=p!==e?m:Y%e;if(0!==f)for(var D=0;D<=h;D++){var z=D!==h?n:U%h;if(0!==z){var g=p*U*m+D*n,k=U-z,A=ea[w],J;if(2>A.encoding){if(0===A.encoding)var I=A.rawData;else{t=J=I=void 0;B=A.stuffedData;var K=A.bitsPerPixel,O=A.numValidPixels,R=A.offset,V=r,Z=v,Q=E,da=(1<<
K)-1,a=0,b=0,H=Math.ceil((Q-R)/V);B[B.length-1]<<=8*(4*B.length-Math.ceil(K*O/8));for(t=0;t<O;t++)0===b&&(I=B[a++],b=32),b>=K?(J=I>>>b-K&da,b-=K):(b=K-b,J=(I&da)<<b&da,I=B[a++],b=32-b,J+=I>>>b),Z[t]=J<H?R+J*V:Q;I=v}J=0}else var M=2===A.encoding?0:A.offset;if(u)for(B=0;B<f;B++){if(g&7){var ca=u[g>>3];ca<<=g&7}for(t=0;t<z;t++)g&7||(ca=u[g>>3]),ca&128?(C&&(C[g]=1),X[g++]=2>A.encoding?I[J++]:M):(C&&(C[g]=0),X[g++]=P),ca<<=1;g+=k}else if(2>A.encoding)for(B=0;B<f;B++){for(t=0;t<z;t++)X[g++]=I[J++];g+=k}else for(B=
0;B<f;B++)if(X.fill)X.fill(M,g,g+z),g+=z+k;else{for(t=0;t<z;t++)X[g++]=M;g+=k}if(1===A.encoding&&J!==A.numValidPixels)throw"Block and Mask do not match";w++}}}M=C;C={width:U,height:Y,pixelData:X,minValue:q,maxValue:E,noDataValue:P};M&&(C.maskData=M);x.returnEncodedMask&&G&&(C.encodedMaskData=G.bitset?G.bitset:null);if(x.returnFileInfo&&(C.fileInfo={fileIdentifierString:na,fileVersion:la,imageType:ba,height:Y,width:U,maxZError:F,eofOffset:T,mask:G?{numBlocksX:G.numBlocksX,numBlocksY:G.numBlocksY,numBytes:G.numBytes,
maxValue:G.maxValue}:null,pixels:{numBlocksX:c,numBlocksY:d,numBytes:l,maxValue:E,minValue:q,noDataValue:P}},x.computeUsedBitDepths)){x=C.fileInfo;G=c*d;na={};for(la=0;la<G;la++)ba=ea[la],0===ba.encoding?na.float32=!0:1===ba.encoding?na[ba.bitsPerPixel]=!0:na[0]=!0;G=Object.keys(na);x.bitDepths=G}return C}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const S=function(y){let aa=1;switch(y){case Uint8Array:case Int8Array:aa=1;break;case Uint16Array:case Int16Array:aa=2;break;
case Uint32Array:case Int32Array:case Float32Array:aa=4;break;case Float64Array:aa=8}return aa};return function(){function y(){}y.decode=function(aa,T){var x=T.pixelType;const P=[],ea=T.width*T.height;var na=Math.floor(aa.byteLength/(T.width*T.height*S(T.pixelType)));const {bandIds:X,format:la}=T;T=X&&X.length||Math.floor(aa.byteLength/(T.width*T.height*S(T.pixelType)));var ba=aa.byteLength-aa.byteLength%(ea*S(x));const Y=new x(aa,0,ea*na);let U,F;let G,d;if("bip"===la)for(U=0;U<T;U++){G=new x(ea);
d=X?X[U]:U;for(F=0;F<ea;F++)G[F]=Y[F*na+d];P.push(G)}else if("bsq"===la)for(U=0;U<T;U++)d=X?X[U]:U,P.push(Y.subarray(d*ea,(d+1)*ea));if(ba<aa.byteLength-1)if(aa=aa.slice(ba),8*aa.byteLength<ea)var c=null;else{aa=new Uint8Array(aa,0,Math.ceil(ea/8));x=new Uint8Array(ea);for(T=ba=T=c=na=0;T<aa.length-1;T++)for(c=aa[T],ba=7;0<=ba;ba--)x[na++]=c>>ba&1;for(ba=7;na<ea-1;)c=aa[aa.length-1],x[na++]=c>>ba&1,ba--;c=x}return{pixels:P,mask:c}};return y}()})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports",
"../../../core/maybe","../PixelBlock"],function(S,y,aa){function T(d){return y.isSome(d)&&"esri.layers.support.PixelBlock"===d.declaredClass&&d.pixels&&0<d.pixels.length}function x(d,c){d=Math.min(Math.max(d,-100),100);c=Math.min(Math.max(c,-100),100);let l,E;const q=new Uint8Array(256);for(l=0;256>l;l++)0<d&&100>d?E=(200*l-25500+510*c)/(2*(100-d))+128:0>=d&&-100<d?E=(200*l-25500+510*c)*(100+d)/2E4+128:100===d?(E=200*l-25500+256*(100-d)+510*c,E=0<E?255:0):-100===d&&(E=128),q[l]=255<E?255:0>E?0:E;
return q}function P(d,c,l,E,q,u,w,h){return{xmin:q<=l*d?0:q<l*d+d?q-l*d:d,ymin:u<=E*c?0:u<E*c+c?u-E*c:c,xmax:q+w<=l*d?0:q+w<l*d+d?q+w-l*d:d,ymax:u+h<=E*c?0:u+h<E*c+c?u+h-E*c:c}}function ea(d,c,l,E,q,u){const {width:w,height:h}=l.block,{x:e,y:n}=l.offset,{width:r,height:m}=l.mosaic;l=P(w,h,E,q,e,n,r,m);let v=0;var C=0;if(u){var t=u.hasGCSSShiftTransform?360:u.halfWorldWidth,B=w*u.resolutionX,p=u.startX+E*B;B=p+B;p<t&&B>t?C=u.rightPadding:p>=t&&(v=u.leftMargin-u.rightPadding,C=0)}l.xmax-=C;if("number"===
typeof c)for(u=l.ymin;u<l.ymax;u++)for(C=(q*h+u-n)*r+(E*w-e)+v,t=l.xmin;t<l.xmax;t++)d[C+t]=c;else for(u=l.ymin;u<l.ymax;u++)for(C=(q*h+u-n)*r+(E*w-e)+v,t=u*w,p=l.xmin;p<l.xmax;p++)d[C+p]=c[t+p]}function na(d,c,l={}){const {clipOffset:E,clipSize:q,alignmentInfo:u,blockWidths:w}=l;if(w)return X(d,c,{blockWidths:w});var h=d.filter(D=>T(D))[0];if(y.isNone(h))return null;l=q?q.width:c.width;const e=q?q.height:c.height;var n=h.width,r=h.height;const m=c.width/n,v=c.height/r;c={offset:E||{x:0,y:0},mosaic:q||
c,block:{width:n,height:r}};n=h.pixelType;r=aa.getPixelArrayConstructor(n);var C=h.pixels.length;h=[];for(var t=0;t<C;t++){var B=new r(l*e);for(let D=0;D<v;D++)for(let z=0;z<m;z++){var p=d[D*m+z];T(p)&&(p=p.pixels[t],ea(B,p,c,z,D,u))}h.push(B)}let f;if(d.some(D=>y.isNone(D)||D.mask&&0<D.mask.length))for(f=new Uint8Array(l*e),r=0;r<v;r++)for(C=0;C<m;C++)B=d[r*m+C],(t=y.isSome(B)?B.mask:null)?ea(f,t,c,C,r,u):B?ea(f,1,c,C,r,u):ea(f,0,c,C,r,u);d=new aa({width:l,height:e,pixels:h,pixelType:n,mask:f});
d.updateStatistics();return d}function X(d,c,l){const E=d.find(C=>y.isSome(C));if(!y.isSome(E))return null;var q=d.some(C=>y.isSome(C)?!!C.mask:!0);const {width:u,height:w}=c;c=q?new Uint8Array(u*w):null;({blockWidths:l}=l);const h=[],e=E.getPlaneCount(),n=aa.getPixelArrayConstructor(E.pixelType);if(q)for(let C=0,t=0;C<d.length;t+=l[C],C++)if(q=d[C],T(q)){var r=q.mask;for(var m=0;m<w;m++)for(var v=0;v<l[C];v++)c[m*u+v+t]=null==r?255:r[m*q.width+v]}for(q=0;q<e;q++){r=new n(u*w);for(let C=0,t=0;C<d.length;t+=
l[C],C++)if(m=d[C],T(m)&&(v=m.pixels[q],null!=v))for(let B=0;B<w;B++)for(let p=0;p<l[C];p++)r[B*u+p+t]=v[B*m.width+p];h.push(r)}d=new aa({width:u,height:w,mask:c,pixels:h,pixelType:E.pixelType});d.updateStatistics();return d}function la(d){if(!T(d))return null;const c=d.clone(),{width:l,height:E,pixels:q,mask:u}=d;var w=q[0];d=c.pixels[0];for(let n=2;n<E-1;n++){const r=new Map;for(var h=n-2;h<n+2;h++)for(var e=0;4>e;e++){const m=h*l+e;U(r,w[m],u?u[m]:1)}d[n*l]=ba(r);d[n*l+1]=d[n*l+2]=d[n*l];for(h=
3;h<l-1;h++)e=(n-2)*l+h+1,U(r,w[e],u?u[e]:1),e=(n-1)*l+h+1,U(r,w[e],u?u[e]:1),e=n*l+h+1,U(r,w[e],u?u[e]:1),e=(n+1)*l+h+1,U(r,w[e],u?u[e]:1),e=(n-2)*l+h-3,Y(r,w[e],u?u[e]:1),e=(n-1)*l+h-3,Y(r,w[e],u?u[e]:1),e=n*l+h-3,Y(r,w[e],u?u[e]:1),e=(n+1)*l+h-3,Y(r,w[e],u?u[e]:1),d[n*l+h]=ba(r);d[n*l+h+1]=d[n*l+h]}for(w=0;w<l;w++)d[w]=d[l+w]=d[2*l+w],d[(E-1)*l+w]=d[(E-2)*l+w];c.updateStatistics();return c}function ba(d){if(0===d.size)return 0;let c=0,l=-1,E=0;const q=d.keys();let u=q.next();for(;!u.done;)E=d.get(u.value),
E>c&&(l=u.value,c=E),u=q.next();return l}function Y(d,c,l){0!==l&&(l=d.get(c),1===l?d.delete(c):d.set(c,l-1))}function U(d,c,l){0!==l&&d.set(c,d.has(c)?d.get(c)+1:1)}function F(d,c,l){let {x:E,y:q}=c;const {width:u,height:w}=l;if(0===E&&0===q&&w===d.height&&u===d.width)return d;const {width:h,height:e}=d;c=Math.max(0,q);const n=Math.max(0,E),r=Math.min(E+u,h),m=Math.min(q+w,e);if(0>r||0>m||!T(d))return null;E=Math.max(0,-E);q=Math.max(0,-q);const {pixels:v,mask:C}=d;var t=u*w,B=v.length;const p=[];
for(var f=0;f<B;f++){var D=v[f],z=aa.createEmptyBand(d.pixelType,t);for(let g=c;g<m;g++){const k=g*h;let A=(g+q-c)*u+E;for(let J=n;J<r;J++)z[A++]=D[k+J]}p.push(z)}t=new Uint8Array(t);for(B=c;B<m;B++)for(f=B*h,D=(B+q-c)*u+E,z=n;z<r;z++)t[D++]=C?C[f+z]:1;d=new aa({width:l.width,height:l.height,pixelType:d.pixelType,pixels:p,mask:t});d.updateStatistics();return d}function G(d,c=!0){if(!T(d))return null;const {pixels:l,width:E,height:q,mask:u,pixelType:w}=d;d=[];const h=Math.round(E/2),e=Math.round(q/
2),n=q-1,r=E-1;for(var m=0;m<l.length;m++){var v=l[m],C=aa.createEmptyBand(w,h*e),t=0;for(var B=0;B<q;B+=2)for(var p=0;p<E;p+=2){var f=v[B*E+p];if(c){var D=p===r?f:v[B*E+p+1];const z=B===n?f:v[B*E+p+E],g=p===r?z:B===n?D:v[B*E+p+E+1];C[t++]=(f+D+z+g)/4}else C[t++]=f}d.push(C)}m=null;if(u)for(m=new Uint8Array(h*e),v=0,C=0;C<q;C+=2)for(t=0;t<E;t+=2)B=u[C*E+t],c?(p=t===r?B:u[C*E+t+1],f=C===n?B:u[C*E+t+E],D=t===r?f:C===n?p:u[C*E+t+E+1],m[v++]=B*p*f*D?1:0):m[v++]=B;return new aa({width:h,height:e,pixelType:w,
pixels:d,mask:m})}S.approximateTransform=function(d,c,l,E,q="nearest"){if(!T(d))return null;"majority"===q&&(d=la(d));const {pixels:u,mask:w,pixelType:h}=d,e=d.width;var n=d.height;d=aa.getPixelArrayConstructor(h);var r=u.length;const {width:m,height:v}=c;c=E.cols;var C=E.rows;const t=Math.ceil(m/c-.1/c),B=Math.ceil(v/C-.1/C);E=!1;for(var p=0;p<l.length;p+=3)-1===l[p]&&-1===l[p+1]&&-1===l[p+2]&&(E=!0);let f,D,z,g,k,A;const J=t*c;p=J*B*C;const I=new Float32Array(p),K=new Float32Array(p);p=0;let O,
R;const V="majority"===q?0:.5;for(let da=0;da<B;da++)for(let a=0;a<t;a++){f=12*(da*t+a);q=l[f];D=l[f+1];z=l[f+2];g=l[f+3];k=l[f+4];A=l[f+5];for(var Z=0;Z<C;Z++){p=(da*C+Z)*J+a*c;R=(Z+.5)/C;for(var Q=0;Q<Z;Q++)O=(Q+.5)/c,I[p+Q]=Math.round((q*O+D*R+z)*e-V),K[p+Q]=Math.round((g*O+k*R+A)*n-V)}f+=6;q=l[f];D=l[f+1];z=l[f+2];g=l[f+3];k=l[f+4];A=l[f+5];for(Z=0;Z<C;Z++)for(p=(da*C+Z)*J+a*c,R=(Z+.5)/C,Q=Z;Q<c;Q++)O=(Q+.5)/c,I[p+Q]=Math.round((q*O+D*R+z)*e-V),K[p+Q]=Math.round((g*O+k*R+A)*n-V)}l=(da,a)=>{for(let b=
0;b<v;b++){f=b*J;for(let H=0;H<m;H++)da[b*m+H]=0>I[f]||0>K[f]?0:a[I[f]+K[f]*e],f++}};n=[];for(C=0;C<r;C++)c=new d(m*v),l(c,u[C]),n.push(c);d=new aa({width:m,height:v,pixelType:h,pixels:n});if(w)d.mask=new Uint8Array(m*v),l(d.mask,w);else if(E)for(d.mask=new Uint8Array(m*v),r=0;r<m*v;r++)d.mask[r]=0>I[r]||0>K[r]?0:1;d.updateStatistics();return d};S.clip=F;S.colorize=function(d,c){if(!T(d)||!c&&(c.indexedColormap||c.indexed2DColormap))return d;const l=d.clone();var E=l.pixels;let q=l.mask;const u=l.width*
l.height;if(1!==E.length)return d;const {indexedColormap:w,indexed2DColormap:h,offset:e,alphaSpecified:n}=c;c=w.length-1;d=0;E=E[0];const r=new Uint8Array(E.length),m=new Uint8Array(E.length),v=new Uint8Array(E.length);let C=0;if(w)if(q)for(d=0;d<u;d++)q[d]&&(C=4*(E[d]-e),C<e||C>c?q[d]=0:(r[d]=w[C],m[d]=w[C+1],v[d]=w[C+2],q[d]=w[C+3]));else{q=new Uint8Array(u);for(d=0;d<u;d++)C=4*(E[d]-e),C<e||C>c?q[d]=0:(r[d]=w[C],m[d]=w[C+1],v[d]=w[C+2],q[d]=w[C+3]);l.mask=q}else if(q)for(d=0;d<u;d++)q[d]&&(c=h[E[d]],
r[d]=c[0],m[d]=c[1],v[d]=c[2],q[d]=c[3]);else{q=new Uint8Array(u);for(d=0;d<u;d++)c=h[E[d]],r[d]=c[0],m[d]=c[1],v[d]=c[2],q[d]=c[3];l.mask=q}l.pixels=[r,m,v];l.statistics=null;l.pixelType="u8";l.maskIsAlpha=n;return l};S.createColormapLUT=function(d){if(d){var c=d.colormap;if(c&&0!==c.length){c=c.sort((n,r)=>n[0]-r[0]);var l=0;0>c[0][0]&&(l=c[0][0]);var E=Math.max(256,c[c.length-1][0]-l+1),q=new Uint8Array(4*E),u=[],w=0,h=0,e=5===c[0].length;if(65536<E)return c.forEach(n=>{u[n[0]-l]=e?n.slice(1):
n.slice(1).concat([255])}),{indexed2DColormap:u,offset:l,alphaSpecified:e};if(d.fillUnspecified)for(d=c[h],w=d[0]-l;w<E;w++)q[4*w]=d[1],q[4*w+1]=d[2],q[4*w+2]=d[3],q[4*w+3]=e?d[4]:255,w===d[0]-l&&(d=h===c.length-1?d:c[++h]);else for(w=0;w<c.length;w++)d=c[w],h=4*(d[0]-l),q[h]=d[1],q[h+1]=d[2],q[h+2]=d[3],q[h+3]=e?d[4]:255;return{indexedColormap:q,offset:l,alphaSpecified:e}}}};S.createContrastBrightnessLUT=x;S.createHistogramEqualizationLUT=function(d,c=256){c=Math.min(c,256);const {size:l,counts:E}=
d;d=new Uint8Array(l);var q=E.reduce((n,r)=>n+r/c,0);let u=0;var w=0;let h=0,e=q;for(let n=0;n<l;n++)if(h+=E[n],!(n<l-1&&h+E[n+1]<e)){for(;u<c-1&&e<h;)u++,e+=q;for(;w<=n;w++)d[w]=u;w=n+1}for(q=w;q<l;q++)d[q]=c-1;return d};S.createStretchLUT=function(d){const {minCutOff:c,maxCutOff:l,gamma:E,pixelType:q}=d,u=d.outMin||0,w=d.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(q))return null;const h=c.length;let e;let n=0;"s8"===q?n=-127:"s16"===q&&(n=-32767);let r=256;-1<["u16","s16"].indexOf(q)&&(r=
65536);const m=[],v=w-u;for(e=0;e<h;e++)m[e]=l[e]-c[e];var C=E&&E.length>=h;const t=[];if(C)for(e=0;e<h;e++)t[e]=1<E[e]?2<E[e]?6.5+(E[e]-2)**2.5:6.5+100*(2-E[e])**4:1;let B;const p=[];let f,D,z;if(C)for(e=0;e<h;e++){z=[];for(C=0;C<r;C++)f=C+n,B=(f-c[e])/m[e],D=1,1<E[e]&&(D-=(1/v)**(B*t[e])),z[C]=f<l[e]&&f>c[e]?Math.floor(D*v*B**(1/E[e]))+u:f>=l[e]?w:u;p[e]=z}else for(e=0;e<h;e++){z=[];for(C=0;C<r;C++)f=C+n,z[C]=f<=c[e]?u:f>=l[e]?w:Math.floor((f-c[e])/m[e]*v)+u;p[e]=z}if(null!=d.contrastOffset)for(d=
x(d.contrastOffset,d.brightnessOffset),e=0;e<h;e++)for(z=p[e],C=0;C<r;C++)z[C]=d[z[C]];return{lut:p,offset:n}};S.estimateStatisticsFromHistograms=function(d){const c=[];for(let u=0;u<d.length;u++){const {min:w,max:h,size:e,counts:n}=d[u];let r=0;var l=0;for(var E=0;E<e;E++)r+=n[E],l+=E*n[E];l/=r;E=0;for(var q=0;q<e;q++)E+=n[q]*(q-l)**2;q=(h-w)/e;c.push({min:w,max:h,avg:(l+.5)*q+w,stddev:Math.sqrt(E/(r-1))*q})}return c};S.estimateStatisticsHistograms=function(d){if(!T(d))return null;d.statistics||
d.updateStatistics();const {pixels:c,mask:l,pixelType:E,statistics:q}=d;d=d.width*d.height;const u=c.length;let w,h;let e;var n;const r=[],m=[];for(e=0;e<u;e++){var v=new Uint32Array(256);var C=c[e];if("u8"===E)if(w=-.5,h=255.5,l)for(n=0;n<d;n++)l[n]&&v[C[n]]++;else for(n=0;n<d;n++)v[C[n]]++;else{w=q[e].minValue;h=q[e].maxValue;var t=(h-w)/256;var B=new Uint32Array(257);if(l)for(n=0;n<d;n++)l[n]&&B[Math.floor((C[n]-w)/t)]++;else for(n=0;n<d;n++)B[Math.floor((C[n]-w)/t)]++;for(n=0;255>n;n++)v[n]=B[n];
v[255]=B[255]+B[256]}r.push({min:w,max:h,size:256,counts:v});for(n=C=B=t=0;256>n;n++)t+=v[n],B+=n*v[n];B/=t;for(n=0;256>n;n++)C+=v[n]*(n-B)**2;v=Math.sqrt(C/(t-1));t=(h-w)/256;n=(B+.5)*t+w;v*=t;m.push({min:w,max:h,avg:n,stddev:v})}return{statistics:m,histograms:r}};S.extractBands=function(d,c){if(null==c||!c.length||!T(d))return d;const l=d.pixels.length;return c&&c.some(E=>E>=l)||1===l&&1===c.length&&0===c[0]||l===c.length&&!c.some((E,q)=>E!==q)?d:new aa({pixelType:d.pixelType,width:d.width,height:d.height,
mask:d.mask,validPixelCount:d.validPixelCount,maskIsAlpha:d.maskIsAlpha,pixels:c.map(E=>d.pixels[E]),statistics:d.statistics&&c.map(E=>d.statistics[E])})};S.getClipBounds=P;S.isValidPixelBlock=T;S.lookupPixels=function(d,c){if(!T(d))return null;const {pixels:l,mask:E}=d,q=d.width*d.height,u=l.length;let w=c.lut;({offset:c}=c);let h,e;w&&1===w[0].length&&(w=l.map(()=>w));const n=[];let r,m,v;if(c)if(null==E)for(h=0;h<u;h++){r=l[h];m=w[h];v=new Uint8Array(q);for(e=0;e<q;e++)v[e]=m[r[e]-c];n.push(v)}else for(h=
0;h<u;h++){r=l[h];m=w[h];v=new Uint8Array(q);for(e=0;e<q;e++)E[e]&&(v[e]=m[r[e]-c]);n.push(v)}else if(null==E)for(h=0;h<u;h++){r=l[h];m=w[h];v=new Uint8Array(q);for(e=0;e<q;e++)v[e]=m[r[e]];n.push(v)}else for(h=0;h<u;h++){r=l[h];m=w[h];v=new Uint8Array(q);for(e=0;e<q;e++)E[e]&&(v[e]=m[r[e]]);n.push(v)}d=new aa({width:d.width,height:d.height,pixels:n,mask:E,pixelType:"u8"});d.updateStatistics();return d};S.mosaic=na;S.mosaicPixelData=function(d,c){if(!d||0===d.length)return null;var l=d.filter(m=>
m.pixelBlock)[0];if(!l||y.isNone(l.pixelBlock))return null;var E=(l.extent.xmax-l.extent.xmin)/l.pixelBlock.width;const q=(l.extent.ymax-l.extent.ymin)/l.pixelBlock.height,u=.01*Math.min(E,q),w=d.sort((m,v)=>Math.abs(m.extent.ymax-v.extent.ymax)>u?v.extent.ymax-m.extent.ymax:Math.abs(m.extent.xmin-v.extent.xmin)>u?m.extent.xmin-v.extent.xmin:0);var h=Math.min.apply(null,w.map(m=>m.extent.xmin));const e=Math.min.apply(null,w.map(m=>m.extent.ymin)),n=Math.max.apply(null,w.map(m=>m.extent.xmax)),r=Math.max.apply(null,
w.map(m=>m.extent.ymax));d={x:Math.round((c.xmin-h)/E),y:Math.round((r-c.ymax)/q)};h={width:Math.round((n-h)/E),height:Math.round((r-e)/q)};E={width:Math.round((c.xmax-c.xmin)/E),height:Math.round((c.ymax-c.ymin)/q)};if(Math.round(h.width/l.pixelBlock.width)*Math.round(h.height/l.pixelBlock.height)!==w.length||0>d.x||0>d.y||h.width<E.width||h.height<E.height)return null;l=w.map(m=>m.pixelBlock);l=na(l,h,{clipOffset:d,clipSize:E});return{extent:c,pixelBlock:l}};S.remapColor=function(d,c){if(!T(d))return null;
d=d.clone();var {pixels:l}=d;const E=d.width*d.height,q=c.length,u=Math.floor(q/2),w=c[Math.floor(u)];l=l[0];let h,e,n,r,m,v,C=!1;const t=new Uint8Array(E),B=new Uint8Array(E),p=new Uint8Array(E);let f=d.mask;const D=4===c[0].mappedColor.length;f||(f=new Uint8Array(E),f.fill(D?255:1),d.mask=f);for(m=0;m<E;m++)if(f[m]){h=l[m];C=!1;v=u;e=w;n=0;for(r=q-1;1<r-n;){if(h===e.value){C=!0;break}h>e.value?n=v:r=v;v=Math.floor((n+r)/2);e=c[Math.floor(v)]}C||(h===c[n].value?(e=c[n],C=!0):h===c[r].value?(e=c[r],
C=!0):h<c[n].value?(C=!1,e=null):h>c[n].value&&(h<c[r].value?(e=c[n],C=!0):r===q-1?(C=!1,e=null):(e=c[r],C=!0)));C?(t[m]=e.mappedColor[0],B[m]=e.mappedColor[1],p[m]=e.mappedColor[2],f[m]=e.mappedColor[3]):t[m]=B[m]=p[m]=f[m]=0}d.pixels=[t,B,p];d.mask=f;d.pixelType="u8";d.maskIsAlpha=D;return d};S.resampleByMajority=la;S.setValidBoundary=function(d,c,l){if(!T(d))return null;const {width:E,height:q}=d,u=c.x;c=c.y;const w=l.width+u;l=l.height+c;if(0>u||0>c||w>E||l>q||0===u&&0===c&&w===E&&l===q)return d;
d.mask||(d.mask=new Uint8Array(E*q));const h=d.mask;for(let e=0;e<q;e++){const n=e*E;for(let r=0;r<E;r++)h[n+r]=e<c||e>=l||r<u||r>=w?0:1}d.updateStatistics();return d};S.split=function(d,c,l){if(!T(d))return null;const {width:E,height:q}=c;let {width:u,height:w}=d;const h=new Map,e={x:0,y:0};l=null==l?1:1+l;for(let n=0;n<l;n++){const r=Math.ceil(u/E),m=Math.ceil(w/q);for(let v=0;v<m;v++){e.y=v*q;for(let C=0;C<r;C++){e.x=C*E;const t=F(d,e,c);h.set(`${n}/${v}/${C}`,t)}}n<l-1&&(d=G(d));u=Math.round(u/
2);w=Math.round(w/2)}return h};S.stretch=function(d,c){if(!T(d))return null;d=d.clone();const {pixels:l,mask:E}=d,{minCutOff:q,maxCutOff:u,gamma:w}=c,h=c.outMin||0;c=c.outMax||255;const e=d.width*d.height,n=l.length;let r;let m,v,C;const t=c-h,B=[];for(r=0;r<n;r++)B[r]=u[r]-q[r];var p=w&&w.length>=n;const f=[];if(p)for(r=0;r<n;r++)f[r]=1<w[r]?2<w[r]?6.5+(w[r]-2)**2.5:6.5+100*(2-w[r])**4:1;if(p)if(null!=E)for(p=0;p<e;p++){if(E[p])for(r=0;r<n;r++)m=l[r][p],C=(m-q[r])/B[r],v=1,1<w[r]&&(v-=(1/t)**(C*
f[r])),l[r][p]=m<u[r]&&m>q[r]?Math.floor(v*t*C**(1/w[r]))+h:m>=u[r]?c:h}else for(p=0;p<e;p++)for(r=0;r<n;r++)m=l[r][p],C=(m-q[r])/B[r],v=1,1<w[r]&&(v-=(1/t)**(C*f[r])),l[r][p]=m<u[r]&&m>q[r]?Math.floor(v*t*C**(1/w[r]))+h:m>=u[r]?c:h;else if(null!=E)for(p=0;p<e;p++){if(E[p])for(r=0;r<n;r++)m=l[r][p],l[r][p]=m<u[r]&&m>q[r]?Math.floor((m-q[r])/B[r]*t)+h:m>=u[r]?c:h}else for(p=0;p<e;p++)for(r=0;r<n;r++)m=l[r][p],l[r][p]=m<u[r]&&m>q[r]?Math.floor((m-q[r])/B[r]*t)+h:m>=u[r]?c:h;d.pixelType="u8";d.updateStatistics();
return d};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point".split(" "),function(S,y,aa,T,x,P,ea,na,X){function la(m,v,C){return!ea.canProjectWithoutEngine(m,v,C)}function ba(m,v,C){if((m=la(m,v,C))&&!ea.isLoaded())throw new T("rasterprojectionhelper-project",
"projection engine is not loaded");return m}function Y(){Y=y._asyncToGenerator(function*(){if(ea.isLoaded())return null;yield ea.load()});return Y.apply(this,arguments)}function U(m,v,C,t=null){if(m.spatialReference.equals(v))return m;ba(m.spatialReference,v,t);C=C.center;m=new na({xmin:C.x-m.x/2,xmax:C.x+m.x/2,ymin:C.y-m.y/2,ymax:C.y+m.y/2,spatialReference:m.spatialReference});v=ea.project(m,v,t);return x.isNone(v)?null:{x:v.xmax-v.xmin,y:v.ymax-v.ymin}}function F(m,v=.01){return P.getMetersPerUnitForSR(m)?
v/P.getMetersPerUnitForSR(m):0}function G(m,v,C=null,t=!0){const B=m.spatialReference;if(B.equals(v))return m;ba(B,v,C);C=ea.project(m,v,C);if(t&&v.isGeographic){const [p,f]=u(B,!0);(v=F(B))&&null!=p&&null!=f&&(Math.abs(m.x-p)<v&&5E-4>Math.abs(180-C.x)?C.x-=360:Math.abs(m.x-f)<v&&5E-4>Math.abs(180+C.x)&&(C.x+=360))}return C}function d(m,v,C=null){const t=m[0].spatialReference;if(t.equals(v))return m;ba(t,v,C);return ea.project(m,v,C)}function c(m){const v=q(m[0].spatialReference);if(2>m.length||!x.isSome(v))return m[0];
let {xmin:C,xmax:t,ymin:B,ymax:p}=m[0];for(let f=1;f<m.length;f++){const D=m[f];t=D.xmax+v*f;B=Math.min(B,D.ymin);p=Math.max(p,D.ymax)}return new na({xmin:C,xmax:t,ymin:B,ymax:p,spatialReference:m[0].spatialReference})}function l(m,v,C=null,t=!0){if(m.spatialReference.equals(v))return m;const B=h(m),p=q(m.spatialReference,!0);if(!x.isSome(p)||0===B)return E(m,v,C,t);m=m.clone().normalize().map(f=>E(f,v,C,t));return c(m)}function E(m,v,C=null,t=!0){const B=m.spatialReference;if(B.equals(v))return m;
ba(B,v,C);const p=ea.project(m,v,C);let [f,D]=u(B,!0);p&&t&&B.isWebMercator&&v.isGeographic&&null!=f&&null!=D&&(.001>Math.abs(m.xmin-f)&&1E3<Math.abs(D-m.xmax)&&5E-4>Math.abs(180-p.xmax)&&(p.xmin=-180,t=[],t.push(new X(m.xmax,m.ymin,B)),t.push(new X(m.xmax,(m.ymin+m.ymax)/2,B)),t.push(new X(m.xmax,m.ymax,B)),t=t.map(z=>G(z,v,C)).filter(z=>!isNaN(null==z?void 0:z.x)).map(z=>z.x),p.xmax=Math.max.apply(null,t)),.001>Math.abs(m.xmax-D)&&1E3<Math.abs(f-m.xmin)&&5E-4>Math.abs(180+p.xmin)&&(p.xmax=180,t=
[],t.push(new X(m.xmin,m.ymin,B)),t.push(new X(m.xmin,(m.ymin+m.ymax)/2,B)),t.push(new X(m.xmin,m.ymax,B)),m=t.map(z=>G(z,v,C)).filter(z=>!isNaN(null==z?void 0:z.x)).map(z=>z.x),p.xmin=Math.min.apply(null,m)));[f,D]=u(v,!0);(m=F(v))&&null!=f&&null!=D&&p&&(Math.abs(p.xmin-f)<m&&(p.xmin=f),Math.abs(p.xmax-D)<m&&(p.xmax=D));return p}function q(m,v=!1){return m.isWebMercator?2*(v?2.0037508342787E7:2.0037508342788905E7):m.wkid&&m.isGeographic?360:2*r[m.wkid]||null}function u(m,v=!1){const C=[];m=q(m,v);
x.isSome(m)&&(C.push(-m/2),C.push(m/2));return C}function w(m,v,C,t){m=(m-v)/C;0!==m-Math.floor(m)?m=Math.floor(m):t&&--m;return m}function h(m,v=!1){const C=q(m.spatialReference);if(!x.isSome(C))return 0;const t=v?0:-(C/2);v=w(m.xmax,t,C,!0);m=w(m.xmin,t,C,!1);return v-m}function e(m){const {projectedExtent:v,srcBufferExtent:C,pixelSize:t,datumTransformation:B,rasterTransform:p}=m;var f=v.spatialReference,D=C.spatialReference;ba(f,D);const {xmin:z,ymin:g,xmax:k,ymax:A}=v,J=q(D),I=m.hasWrapAround||
"gcs-shift"===(null==p?void 0:p.type);m=m.spacing||[32,32];var K=m[0]*t.x,O=m[1]*t.y,R=Math.ceil((k-z)/K-.1/m[0])+1,V=Math.ceil((A-g)/O-.1/m[1])+1;const Z=[];let Q,da=0;var a=[];for(let b=0;b<R;b++)for(let H=0;H<V;H++)a.push(new X({x:z+K*b,y:A-O*H,spatialReference:f}));f=d(a,D,B);for(D=0;D<R;D++){K=[];for(O=0;O<V;O++)a=f[D*V+O],p&&(a=p.inverseTransform(a)),K.push(a),0<D&&I&&a&&Q[O]&&x.isSome(J)&&a.x<Q[O].x&&(a.x+=J),a?(Z.push((a.x-C.xmin)/(C.xmax-C.xmin)),Z.push((C.ymax-a.y)/(C.ymax-C.ymin))):(Z.push(NaN),
Z.push(NaN),da++);Q=K}return{offsets:Z,error:null,coefficients:null,outofBoundPointCount:da,spacing:m,size:[R-1,V-1]}}const n=function(m,v,C){var t=(m[0]+m[4]+m[4*v.cols]+m[4*v.cols+4])/4;const B=(m[1]+m[5]+m[4*v.rows+1]+m[4*v.rows+5])/4,p=(m[4*v.cols]-m[0]+m[4*v.cols+4]-m[4])/C[0]*.5;C=(m[4*v.cols+1]-m[1]+m[4*v.cols+5]-m[5])/C[1]*.5;t=0===p||isNaN(p)?0:Math.abs(t-m[2*v.rows+2])/Math.abs(p);m=0===C||isNaN(C)?0:Math.abs(B-m[2*v.rows+3])/Math.abs(C);return[t,m]},r={3395:2.0037508342789244E7,3410:1.7334193943686873E7,
3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,
54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7};S.computeProjectedScales=function(m,v,C=512,t=!0){const {extent:B,spatialReference:p,pixelSize:f}=m,D=U(new X({x:f.x,y:f.y,spatialReference:p}),v,B);if(null==D)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var z=(D.x+D.y)/2,g=P.getMetersPerUnitForSR(v);z=z*g*96*39.37;const k=
v.isGeographic?256/C*2.958287637958547E8:256/C*5.91657527591555E8;C="vector-magdir"===m.dataType||"vector-uv"===m.dataType;const A=l(B,v);C||t&&(v.isGeographic||v.isWebMercator)&&(C=0>A.xmin*A.xmax);t=z;if(C)t=k,m=v.isGeographic?1.341104507446289E-6:.29858214164761665,g=96*m*g*39.37,v=U(new X({x:m,y:m,spatialReference:{wkid:v.isGeographic?4326:3857}}),p,A),v.x*=t/g,v.y*=t/g;else{v={x:f.x,y:f.y};m=Math.ceil(Math.log(Math.min(m.width,m.height)/32)/Math.LN2);for(g=0;t<.5005*k&&g<m;)g++,t*=2,v.x*=2,v.y*=
2;1.001>=Math.max(t,k)/Math.min(t,k)&&(t=k)}m=[t];g=[{x:v.x,y:v.y}];for(z=Math.min(70.5310735,z)/1.001;t>=z;)t/=2,v.x/=2,v.y/=2,m.push(t),g.push({x:v.x,y:v.y});return{projectedPixelSize:D,scales:m,srcResolutions:g,isCustomTilingScheme:!C}};S.defaultGridSpacing=32;S.defaultProjectionToleranceInPixels=4;S.getDefaultDatumTransformationForDataset=function(m,v,C){return ba(m.spatialReference,v)?C?ea.getTransformation(v,m.spatialReference,m):ea.getTransformation(m.spatialReference,v,m):null};S.getProjectionOffsetGrid=
function(m){var v=m.isAdaptive&&null==m.spacing,C=m.spacing||[32,32];let t=e(m);var B={cols:t.size[0]+1,rows:t.size[1]+1},p=n(t.offsets,B,C),f=(p[0]+p[1])/2,D=0<t.outofBoundPointCount&&t.outofBoundPointCount<t.offsets.length/2;v&&(D||4<f)&&(t=e({...m,spacing:[4,4]}),B={cols:t.size[0]+1,rows:t.size[1]+1},p=n(t.offsets,B,C));t.error=p;m=t;{v=t.offsets;const {cols:I,rows:K}=B;B=new Float32Array((I-1)*(K-1)*12);C=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);p=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(f=
0;f<I-1;f++){for(var z=0;z<K-1;z++){var g=f*K*2+2*z,k=v[g];const O=v[g+1];var A=v[g+2],J=v[g+3];g+=2*K;const R=v[g],V=v[g+1],Z=v[g+2];g=v[g+3];let Q=0,da=12*(z*(I-1)+f);for(let a=0;3>a;a++)B[da++]=C[Q++]*k+C[Q++]*A+C[Q++]*Z;Q=0;for(A=0;3>A;A++)B[da++]=C[Q++]*O+C[Q++]*J+C[Q++]*g;Q=0;for(J=0;3>J;J++)B[da++]=p[Q++]*k+p[Q++]*R+p[Q++]*Z;Q=0;for(k=0;3>k;k++)B[da++]=p[Q++]*O+p[Q++]*V+p[Q++]*g}if(D)for(z=0;z<B.length;z++)isNaN(B[z])&&(B[z]=-1)}D=B}m.coefficients=D;return t};S.getRasterDatasetAlignmentInfo=
function(m){const v=m.storageInfo.origin.x;var C=q(m.spatialReference,!0);if(!x.isSome(C))return{originX:v,halfWorldWidth:null,pyramidsInfo:null};const t=C/2,{nativePixelSize:B,storageInfo:p,extent:f}=m,{maximumPyramidLevel:D,blockWidth:z,pyramidScalingFactor:g}=p;let k=B.x;const A=[];m=x.isSome(m.transform)&&"gcs-shift"===m.transform.type;const J=v+(m?0:t);C=m?C-v:t-v;for(let I=0;I<=D;I++){const K=(f.xmax-v)/k/z,O=C/k/z;A.push({resolutionX:k,blockWidth:z,datsetColumnCount:0===K-Math.floor(K)?K:Math.ceil(K),
worldColumnCountFromOrigin:0===O-Math.floor(O)?O:Math.ceil(O),leftMargin:Math.round(J/k)%z,rightPadding:(z-Math.round(C/k)%z)%z,originColumnOffset:Math.floor(J/k/z)});k*=g}return{originX:v,halfWorldWidth:t,pyramidsInfo:A,hasGCSSShiftTransform:m}};S.getWorldWidth=q;S.getWorldWrapCount=h;S.load=function(){return Y.apply(this,arguments)};S.minimumGridSpacing=4;S.projectExtent=l;S.projectPoint=G;S.projectResolution=U;S.requirePE=la;S.snapExtent=function(m){m=m.clone().normalize();return 1===m.length?
m[0]:c(m)};S.snapPyramid=function(m,v,C){const {storageInfo:t,pixelSize:B}=v;let p=!1;var {pyramidResolutions:f}=t;if(x.isSome(f)&&f.length){m=(m.x+m.y)/2;var D=f[f.length-1];D=(D.x+D.y)/2;var z=(B.x+B.y)/2;if(m<=z)var g=0;else if(m>=D)g=f.length,p=8<m/D;else{D=z;for(let k=1;k<=f.length;k++){z=(f[k-1].x+f[k-1].y)/2;if(m<=z){m===z?g=k:"down"===C?(g=k-1,p=8<m/D):g="up"===C?k:m-D>z-m||2<m/D?k:k-1;break}D=z}}C=0===g?B:f[g-1];return{pyramidLevel:g,pyramidResolution:new X({x:C.x,y:C.y,spatialReference:v.spatialReference}),
excessiveReading:p}}g=Math.log(m.x/B.x)/Math.LN2;m=Math.log(m.y/B.y)/Math.LN2;f=v.storageInfo.maximumPyramidLevel||0;g="down"===C?Math.floor(Math.min(g,m)):"up"===C?Math.ceil(Math.max(g,m)):Math.round((g+m)/2);0>g?g=0:g>f&&(p=g>f+3,g=f);C=2**g;v=new X({x:C*v.nativePixelSize.x,y:C*v.nativePixelSize.y,spatialReference:v.spatialReference});return{pyramidLevel:g,pyramidResolution:v,excessiveReading:p}};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(S,y,aa,T,x,P,ea,na,X){function la(f){if(f=t[f])return f;throw Error("unknown measure");}function ba(f){return C[f].baseUnit}function Y(f,D=null){D=D||la(f);return C[D].baseUnit===f}function U(f,D,z){if(D===z)return f;const g=la(D);if(g!==la(z))throw Error("incompatible units");f=Y(D,g)?f:f*C[g].units[D].inBaseUnits;return Y(z,g)?f:f/C[g].units[z].inBaseUnits}function F(f,D){return 3E3>U(f,D,"meters")?"meters":"kilometers"}function G(f,D){return 1E5>U(f,D,"meters")?"meters":"kilometers"}function d(f,
D){return 1E3>U(f,D,"feet")?"feet":"miles"}function c(f,D){return 1E5>U(f,D,"feet")?"feet":"miles"}function l(f){return v.fromJSON(f.toLowerCase())||null}function E(f,D=ea.earth.metersPerDegree){return q(f,!0)||D}function q(f,D=!1){let z,g,k=null;null!=f&&("object"===typeof f?(z=f.wkid,g=f.wkt):"number"===typeof f?z=f:"string"===typeof f&&(g=f));if(z){if(na.isWKIDFromMars(z))return ea.mars.metersPerDegree;if(na.isWKIDFromMoon(z))return ea.moon.metersPerDegree;k=n.values[n[z]];!k&&D&&m.has(z)&&(k=
h)}else g&&(/^PROJCS/i.test(g)?k=u(e.exec(g),k):/^GEOCCS/i.test(g)&&(k=u(r.exec(g),k)));return k}function u(f,D){return f&&f[1]?parseFloat(f[1].split(",")[1]):D}function w(f){var D=null;if(null!=f)if("object"===typeof f){var z=f.wkid;var g=f.wkt}else"number"===typeof f?z=f:"string"===typeof f&&(g=f);if(z)D=n.units[n[z]];else if(g&&(f=/^PROJCS/i.test(g)?e:/^GEOCCS/i.test(g)?r:null)&&(g=f.exec(g))&&g[1]&&(g=g[1],D=(D=/[\\"\\']{1}([^\\"\\']+)/.exec(g))&&D[1],!D||-1===n.units.indexOf(D)))for(g=parseFloat(g.split(",")[1]),
D=null,f=n.values,z=0;z<f.length;++z)if(1E-7>Math.abs(g-f[z])){D=n.units[z];break}return T.isSome(D)?l(D):null}const h=ea.earth.radius*Math.PI/200,e=/UNIT\[([^\]]+)\]\]$/i,n=X,r=/UNIT\[([^\]]+)\]/i,m=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),v=aa.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",
chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});y={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},
"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};X={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(f=>f*f)(1200/3937)},acres:{inBaseUnits:4046.8564224},
ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const C={length:{baseUnit:"meters",units:y},area:{baseUnit:"square-meters",units:X},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},
"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},t=function(){const f={};for(const D in C)for(const z in C[D].units)f[z]=D;return f}(),B={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",
esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},p={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};y=aa.strict()(B);X=aa.strict()(p);aa=aa.strict()({...B,...p});S.areaUnitsJSONMap=y;S.baseUnitForMeasure=ba;S.baseUnitForUnit=
function(f){return ba(la(f))};S.convertUnit=U;S.getDefaultUnitSystem=function(f){if(!f)return null;switch(w(f)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};S.getMetersPerUnit=
q;S.getMetersPerUnitForSR=E;S.getMetersPerVerticalUnitForSR=function(f){if(f&&"object"===typeof f&&!na.isEarth(f))return 1;f=E(f);return 1E5<f?1:f};S.getUnitString=w;S.getVerticalUnitStringForSR=function(f){const D=E(f),z=f instanceof P?x.getReferenceEllipsoid(f).metersPerDegree:1E5;return D>=z?"meters":w(f)};S.inchesPerMeter=39.37;S.isBaseUnit=Y;S.isMeasurementSystem=function(f){return"imperial"===f||"metric"===f};S.lengthToDegrees=function(f,D,z){return U(f,D,"meters")/(z*Math.PI/180)};S.lengthUnitsJSONMap=
X;S.measureForUnit=la;S.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");S.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");S.preferredImperialAreaUnit=function(f,D){return 1E6>U(f,D,"square-feet")?"square-feet":"square-miles"};S.preferredImperialLengthUnit=d;S.preferredImperialVerticalLengthUnit=c;S.preferredLengthUnit=
function(f,D,z){switch(z){case "metric":return F(f,D);case "imperial":return d(f,D);default:return z}};S.preferredMetricAreaUnit=function(f,D){return 3E6>U(f,D,"square-meters")?"square-meters":"square-kilometers"};S.preferredMetricLengthUnit=F;S.preferredMetricVerticalLengthUnit=G;S.preferredVerticalLengthUnit=function(f,D,z){switch(z){case "metric":return G(f,D);case "imperial":return c(f,D);default:return z}};S.unitFromRESTJSON=l;S.unitToRESTJSON=function(f){return v.toJSON(f)||null};S.unitsJSONMap=
aa;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(S,y,aa,T){function x(la){return new y({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${la.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const P=x(aa.earth),ea=x(aa.mars),na=x(aa.moon),X=new y({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${aa.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});S.SphericalECEFSpatialReference=P;S.SphericalPCPFMars=
ea;S.SphericalPCPFMoon=na;S.WGS84ECEFSpatialReference=X;S.createSphericalPCPF=x;S.getReferenceEllipsoid=function(la){return la&&(T.isMars(la)||la===ea)?aa.mars:la&&(T.isMoon(la)||la===na)?aa.moon:aa.earth};S.getReferenceEllipsoidFromWKID=function(la){return T.isWKIDFromMars(la)?aa.mars:T.isWKIDFromMoon(la)?aa.moon:aa.earth};S.getSphericalPCPF=function(la){return la&&(T.isMars(la)||la===ea)?ea:la&&(T.isMoon(la)||la===na)?na:P};S.getSphericalPCPFForEllipsoid=function(la){return la&&la===aa.mars?ea:
la&&la===aa.moon?na:P};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/zscale".split(" "),
function(S,y,aa,T,x,P,ea,na,X,la,ba,Y,U,F,G,d,c,l,E,q,u,w,h,e){function n(){return!!Ja&&F.isLoaded()}function r(N){P.isNone(Na)&&(Na=Promise.all([F.load(),(new Promise((W,L)=>S(["../chunks/geometryEngineBase"],W,L))).then(W=>W.geometryEngineBase),new Promise((W,L)=>S(["./geometryAdapters/hydrated"],W,L))]));return Na.then(([,W,{hydratedAdapter:L}])=>{ea.throwIfAborted(N);Ma=L;Ja=W.default;Ja._enableProjection(F.pe)})}function m(N,W,L=null){return Array.isArray(N)?0===N.length?[]:v(Ma,N,N[0].spatialReference,
W,L):v(Ma,[N],N.spatialReference,W,L)[0]}function v(N,W,L,ha,qa=null){if(P.isNone(L)||P.isNone(ha))return W;if(t(L,ha,qa))return W.map(ua=>P.unwrap(p(ua,L,ha)));if(P.isNone(qa)){const ua=w.cacheKey(L,ha);void 0!==Oa[ua]?qa=Oa[ua]:(qa=C(L,ha,null),P.isNone(qa)&&(qa=new w),Oa[ua]=qa)}if(P.isNone(Ja))throw new Ga;return Ja._project(N,W,L,ha,qa)}function C(N,W,L=null){if(P.isNone(Ja))throw new Ga;if(P.isNone(N)||P.isNone(W))return null;N=Ja._getTransformation(Ma,N,W,L,null==L?void 0:L.spatialReference);
return null!==N?w.fromGE(N):null}function t(N,W,L){return L?!1:h.equals(N,W)?!0:h.isValid(N)&&h.isValid(W)&&!!Fa(N,W,bb)}function B(){B=aa._asyncToGenerator(function*(N,W,L,ha){if(!n())if(Array.isArray(N))for(const {source:qa,dest:ua,geographicTransformation:za}of N){if(!t(qa,ua,za))return r(ha)}else if(!t(N,W,L))return r(ha)});return B.apply(this,arguments)}function p(N,W,L){return N?"x"in N?f(N,W,new G,L,0):"xmin"in N?k(N,W,new Y,L,0):"rings"in N?g(N,W,new d,L,0):"paths"in N?z(N,W,new c,L,0):"points"in
N?D(N,W,new U,L,0):null:null}function f(N,W,L,ha,qa){Ea[0]=N.x;Ea[1]=N.y;const ua=N.z;Ea[2]=void 0!==ua?ua:qa;if(!K(Ea,W,0,Ea,ha,0,1))return null;L.x=Ea[0];L.y=Ea[1];L.spatialReference=ha;void 0===ua?(L.z=void 0,L.hasZ=!1):(L.z=Ea[2],L.hasZ=!0);void 0===N.m?(L.m=void 0,L.hasM=!1):(L.m=N.m,L.hasM=!0);return L}function D(N,W,L,ha,qa){const {points:ua,hasZ:za,hasM:Ca}=N;N=[];const La=ua.length,Ka=[];for(var Ia of ua)Ka.push(Ia[0],Ia[1],za?Ia[2]:qa);if(!K(Ka,W,0,Ka,ha,0,La))return null;for(W=0;W<La;++W){qa=
3*W;Ia=Ka[qa];const Qa=Ka[qa+1];za&&Ca?N.push([Ia,Qa,Ka[qa+2],ua[W][3]]):za?N.push([Ia,Qa,Ka[qa+2]]):Ca?N.push([Ia,Qa,ua[W][2]]):N.push([Ia,Qa])}L.points=N;L.spatialReference=ha;L.hasZ=za;L.hasM=Ca;return L}function z(N,W,L,ha,qa){const {paths:ua,hasZ:za,hasM:Ca}=N;N=[];if(!O(ua,za,Ca,W,N,ha,qa))return null;L.paths=N;L.spatialReference=ha;L.hasZ=za;L.hasM=Ca;return L}function g(N,W,L,ha,qa){const {rings:ua,hasZ:za,hasM:Ca}=N;N=[];if(!O(ua,za,Ca,W,N,ha,qa))return null;L.rings=N;L.spatialReference=
ha;L.hasZ=za;L.hasM=Ca;return L}function k(N,W,L,ha,qa){const {xmin:ua,ymin:za,xmax:Ca,ymax:La,hasZ:Ka,hasM:Ia}=N;if(!A(ua,za,Ka?N.zmin:qa,W,Ea,ha))return null;L.xmin=Ea[0];L.ymin=Ea[1];Ka&&(L.zmin=Ea[2]);if(!A(Ca,La,Ka?N.zmax:qa,W,Ea,ha))return null;L.xmax=Ea[0];L.ymax=Ea[1];Ka&&(L.zmax=Ea[2]);Ia&&(L.mmin=N.mmin,L.mmax=N.mmax);L.spatialReference=ha;return L}function A(N,W,L,ha,qa,ua){Ha[0]=N;Ha[1]=W;Ha[2]=L;return K(Ha,ha,0,qa,ua,0,1)}function J(N,W,L,ha){if(P.isNone(W)||P.isNone(ha)||2>N.length)return!1;
2===N.length&&(Ha[0]=N[0],Ha[1]=N[1],Ha[2]=0,N=Ha);return K(N,W,0,L,ha,0,1)}function I(N,W,L){if(P.isNone(W))return!1;W=Q(W,$a);W=Ua[W][6];if(P.isNone(W))return!1;W(N,0,Ha,0);L!==Ha&&(L[0]=Ha[0],L[1]=Ha[1],2<L.length&&(L[2]=Ha[2]));return!0}function K(N,W,L,ha,qa,ua,za=1){W=Fa(W,qa,bb);if(P.isNone(W))return!1;if(W===da){if(N===ha&&L===ua)return!0;za=L+3*za;for(let Ca=L,La=ua;Ca<za;Ca++,La++)ha[La]=N[Ca];return!0}za=L+3*za;for(let Ca=L,La=ua;Ca<za;Ca+=3,La+=3)W(N,Ca,ha,La);return!0}function O(N,W,
L,ha,qa,ua,za=0){const Ca=[];for(const La of N)for(const Ka of La)Ca.push(Ka[0],Ka[1],W?Ka[2]:za);if(!K(Ca,ha,0,Ca,ua,0,Ca.length/3))return!1;ha=0;qa.length=0;for(const La of N){N=[];for(const Ka of La)W&&L?N.push([Ca[ha++],Ca[ha++],Ca[ha++],Ka[3]]):W?N.push([Ca[ha++],Ca[ha++],Ca[ha++]]):(L?N.push([Ca[ha++],Ca[ha++],Ka[2]]):N.push([Ca[ha++],Ca[ha++]]),ha++);qa.push(N)}return!0}function R(N,W,L,ha){N=Math.abs(Sa*N)+Math.asin(L/(ha+W));return N>=Math.PI/2?Number.MAX_VALUE:L/Math.cos(N)}function V(N,
W,L){const ha=Math.sin(N);N=Math.cos(N);const qa=Math.sin(W);W=Math.cos(W);L[0]=-ha;L[4]=-qa*N;L[8]=W*N;L[12]=0;L[1]=N;L[5]=-qa*ha;L[9]=W*ha;L[13]=0;L[2]=0;L[6]=W;L[10]=qa;L[14]=0;L[3]=0;L[7]=0;L[11]=0;L[15]=1;return L}function Z(N,W,L){V(N,W,L);X.transpose(L,L);return L}function Q(N,W){if(W.spatialReference===N)return W.spatialReferenceId;W.spatialReference=N;"metersPerUnit"in W&&(W.metersPerUnit=na.getMetersPerUnitForSR(N,1));return N.wkt===l.SphericalECEFSpatialReference.wkt?W.spatialReferenceId=
1:h.isWGS84(N)?W.spatialReferenceId=2:h.isWebMercator(N)?W.spatialReferenceId=3:h.isPlateCarree(N)?W.spatialReferenceId=12:N.wkt===l.WGS84ECEFSpatialReference.wkt?W.spatialReferenceId=4:4490===N.wkid?W.spatialReferenceId=5:N.wkt===l.SphericalPCPFMars.wkt?W.spatialReferenceId=7:N.wkt===l.SphericalPCPFMoon.wkt?W.spatialReferenceId=9:h.isMars(N)?W.spatialReferenceId=8:h.isMoon(N)?W.spatialReferenceId=10:W.spatialReferenceId=0}function da(N,W,L,ha){N!==L&&(L[ha++]=N[W++],L[ha++]=N[W++],L[ha]=N[W])}function a(N,
W,L,ha){L[ha++]=Ya*(N[W++]/q.earth.radius);L[ha++]=Ya*(Math.PI/2-2*Math.atan(Math.exp(-N[W++]/q.earth.radius)));L[ha]=N[W]}function b(N,W,L,ha){a(N,W,L,ha);pa(L,ha,L,ha)}function H(N,W,L,ha){a(N,W,L,ha);ya(L,ha,L,ha)}function M(N,W,L,ha,qa){var ua=.4999999*Math.PI;ua=x.clamp(Sa*N[W+1],-ua,ua);ua=Math.sin(ua);L[ha++]=Sa*N[W]*qa.radius;L[ha++]=qa.halfSemiMajorAxis*Math.log((1+ua)/(1-ua));L[ha]=N[W+2]}function ca(N,W,L,ha){M(N,W,L,ha,q.earth)}function ja(N,W,L,ha){L[ha]=N[W]*Za;L[ha+1]=N[W+1]*Za;L[ha+
2]=N[W+2]}function ka(N,W,L,ha){L[ha]=N[W]*Xa;L[ha+1]=N[W+1]*Xa;L[ha+2]=N[W+2]}function fa(N,W,L,ha){a(N,W,L,ha);ja(L,ha,L,ha)}function ma(N,W,L,ha,qa){qa+=N[W+2];const ua=Sa*N[W+1];N=Sa*N[W];W=Math.cos(ua);L[ha++]=Math.cos(N)*W*qa;L[ha++]=Math.sin(N)*W*qa;L[ha]=Math.sin(ua)*qa}function oa(N,W,L,ha){ma(N,W,L,ha,q.moon.radius)}function ia(N,W,L,ha){ma(N,W,L,ha,q.mars.radius)}function pa(N,W,L,ha){ma(N,W,L,ha,q.earth.radius)}function ra(N,W,L,ha,qa){var ua=N[W];const za=N[W+1];W=N[W+2];N=Math.sqrt(ua*
ua+za*za+W*W);W=x.asinClamped(W/(0===N?1:N));ua=Math.atan2(za,ua);L[ha++]=Ya*ua;L[ha++]=Ya*W;L[ha]=N-qa}function sa(N,W,L,ha){ra(N,W,L,ha,q.moon.radius)}function xa(N,W,L,ha){ra(N,W,L,ha,q.mars.radius)}function va(N,W,L,ha){ra(N,W,L,ha,q.earth.radius)}function ta(N,W,L,ha){va(N,W,L,ha);ca(L,ha,L,ha)}function wa(N,W,L,ha){va(N,W,L,ha);ya(L,ha,L,ha)}function ya(N,W,L,ha){{var qa=q.earth;const za=Sa*N[W];var ua=Sa*N[W+1];N=N[W+2];W=Math.sin(ua);ua=Math.cos(ua);const Ca=qa.radius/Math.sqrt(1-qa.eccentricitySquared*
W*W);L[ha++]=(Ca+N)*ua*Math.cos(za);L[ha++]=(Ca+N)*ua*Math.sin(za);L[ha++]=(Ca*(1-qa.eccentricitySquared)+N)*W}}function Aa(N,W,L,ha){var qa=u.earthEllipsoidConstants,ua=N[W],za=N[W+1];N=N[W+2];let Ca;W=Math.abs(N);var La=ua*ua+za*za;var Ka=Math.sqrt(La);var Ia=La+N*N;var Qa=Math.sqrt(Ia);ua=Math.atan2(za,ua);var Va=N*N/Ia;Ia=La/Ia;za=qa.a2/Qa;La=qa.a3-qa.a4/Qa;.3<Ia?(Va=W/Qa*(1+Ia*(qa.a1+za+Va*La)/Qa),Qa=Math.asin(Va),za=Va*Va,Ia=Math.sqrt(1-za)):(Ia=Ka/Qa*(1-Va*(qa.a5-za-Ia*La)/Qa),Qa=Math.acos(Ia),
za=1-Ia*Ia,Va=Math.sqrt(za));Ca=1-q.earth.eccentricitySquared*za;za=q.earth.radius/Math.sqrt(Ca);qa=qa.a6*za;za=Ka-za*Ia;La=W-qa*Va;W=Ia*za+Va*La;Ka=Ia*La-Va*za;qa=Ka/(qa/Ca+W);Qa+=qa;0>N&&(Qa=-Qa);L[ha++]=Ya*ua;L[ha++]=Ya*Qa;L[ha]=W+Ka*qa/2}function Da(N,W,L,ha){Aa(N,W,L,ha);pa(L,ha,L,ha)}function Ba(N,W,L,ha){Aa(N,W,L,ha);ca(L,ha,L,ha)}function Fa(N,W,L=Pa()){return P.isNone(N)||P.isNone(W)?null:Ra(N,W,L).projector}function Ra(N,W,L){if(P.isNone(N)||P.isNone(W)||L.source.spatialReference===N&&L.dest.spatialReference===
W)return L;const ha=Q(N,L.source),qa=Q(W,L.dest);0===ha&&0===qa?h.equals(N,W)?L.projector=da:L.projector=null:L.projector=Ua[ha][qa];return L}function Pa(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:da}}let Ja=null,Ma=null,Na=null,Oa={},Ga=function(N){function W(){return N.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}aa._inheritsLoose(W,
N);return W}(T);const Za=q.earth.radius*Math.PI/180,Xa=180/(q.earth.radius*Math.PI),Ua={[2]:{[5]:null,[8]:null,[10]:null,[11]:da,[6]:da,[1]:pa,[7]:null,[9]:null,[0]:null,[3]:ca,[12]:ja,[2]:da,[4]:ya},[5]:{[5]:da,[8]:null,[10]:null,[11]:da,[6]:da,[1]:pa,[7]:null,[9]:null,[0]:null,[3]:null,[12]:ja,[2]:null,[4]:ya},[8]:{[5]:null,[8]:da,[10]:null,[11]:da,[6]:null,[1]:null,[7]:ia,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:da,[11]:da,[6]:null,[1]:null,[7]:null,
[9]:oa,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:a,[6]:a,[1]:b,[7]:null,[9]:null,[0]:null,[3]:da,[12]:fa,[2]:a,[4]:H},[4]:{[5]:Aa,[8]:null,[10]:null,[11]:Aa,[6]:Aa,[1]:Da,[7]:null,[9]:null,[0]:null,[3]:Ba,[12]:function(N,W,L,ha){Aa(N,W,L,ha);ja(L,ha,L,ha)},[2]:Aa,[4]:da},[1]:{[5]:va,[8]:null,[10]:null,[11]:va,[6]:va,[1]:da,[7]:null,[9]:null,[0]:null,[3]:ta,[12]:function(N,W,L,ha){va(N,W,L,ha);ja(L,ha,L,ha)},[2]:va,[4]:wa},[7]:{[5]:null,[8]:xa,[10]:null,[11]:xa,
[6]:null,[1]:null,[7]:da,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:sa,[11]:sa,[6]:null,[1]:null,[7]:null,[9]:da,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:da,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:da,[8]:da,[10]:da,[11]:da,[6]:da,[1]:pa,[7]:ia,[9]:oa,[0]:null,[3]:ca,[12]:ja,[2]:da,[4]:ya},[6]:{[5]:null,[8]:null,[10]:null,[11]:da,[6]:da,[1]:pa,[7]:null,[9]:null,
[0]:null,[3]:null,[12]:ja,[2]:da,[4]:ya},[12]:{[5]:ka,[8]:null,[10]:null,[11]:ka,[6]:ka,[1]:function(N,W,L,ha){ka(N,W,L,ha);pa(L,ha,L,ha)},[7]:null,[9]:null,[0]:null,[3]:function(N,W,L,ha){ka(N,W,L,ha);ca(L,ha,L,ha)},[12]:da,[2]:ka,[4]:function(N,W,L,ha){ka(N,W,L,ha);ya(L,ha,L,ha)}}},$a={spatialReference:null,spatialReferenceId:0},cb={spatialReference:null,spatialReferenceId:0},bb=Pa(),db=Pa(),Sa=x.deg2rad(1),Ya=x.rad2deg(1),Ha=ba.create(),Ta=ba.create(),Wa=ba.create(),Ea=ba.create(),ab=ba.create();
y.canProjectToWGS84ComparableLonLat=function(N){if(P.isNone(N))return!1;N=Q(N,$a);return!!Ua[N][6]};y.canProjectWithoutEngine=t;y.computeENUToSphericalPCPFLocalRotation=V;y.computeSphericalPCPFToENULocalRotation=Z;y.computeTranslationToOriginAndRotation=function(N,W,L,ha){if(P.isNone(N)||P.isNone(ha))return!1;var qa=Q(N,$a),ua=Q(ha,cb);if(qa===ua&&1!==ua&&7!==ua&&9!==ua&&(0!==qa||h.equals(N,ha)))return X.identity(L),X.translate(L,L,W),!0;if(1===ua||7===ua||9===ua){qa=Ua[qa][11];ua=Ua[11][ua];if(P.isNone(qa)||
P.isNone(ua))return!1;qa(W,0,Ta,0);ua(Ta,0,Wa,0);V(Sa*Ta[0],Sa*Ta[1],L);L[12]=Wa[0];L[13]=Wa[1];L[14]=Wa[2];return!0}if(!(3!==ua&&12!==ua||2!==qa&&1!==qa&&3!==qa)){N=Ua[qa][11];ua=Ua[11][ua];if(P.isNone(N)||P.isNone(ua))return!1;N(W,0,Ta,0);ua(Ta,0,Wa,0);1===qa?Z(Sa*Ta[0],Sa*Ta[1],L):X.identity(L);L[12]=Wa[0];L[13]=Wa[1];L[14]=Wa[2];return!0}return!1};y.getProjectorName=function(N,W){switch(Fa(N,W,bb)){case da:return"copy3";case pa:return"wgs84ToSphericalECEF";case ca:return"wgs84ToWebMercator";case ja:return"wgs84ToPlateCarree";
case ya:return"wgs84ToWGS84ECEF";case a:return"webMercatorToWGS84";case b:return"webMercatorToSphericalECEF";case H:return"webMercatorToWGS84ECEF";case fa:return"webMercatorToPlateCarree";case Aa:return"wgs84ECEFToWGS84";case Da:return"wgs84ECEFToSphericalECEF";case Ba:return"wgs84ECEFToWebMercator";case va:return"sphericalECEFToWGS84";case ta:return"sphericalECEFToWebMercator";case xa:return"sphericalMarsPCPFToMars2000";case sa:return"sphericalMoonPCPFToMoon2000";case wa:return"sphericalECEFToWGS84ECEF";
case ia:return"mars2000ToSphericalPCPF";case oa:return"moon2000ToSphericalPCPF";default:return null}};y.getTransformation=C;y.getTransformations=function(N,W,L=null){if(P.isNone(Ja))throw new Ga;N=Ja._getTransformationBySuitability(Ma,N,W,L,null==L?void 0:L.spatialReference);if(null!==N){W=[];for(const ha of N)W.push(w.fromGE(ha));return W}return[]};y.initializeProjection=function(N,W,L,ha){return B.apply(this,arguments)};y.isLoaded=n;y.load=r;y.localLinearScaleFactors=function(N,W,L,ha){if(P.isNone(W)||
P.isNone(ha))return!1;const qa=Q(W,$a);var ua=Q(ha,cb);if(qa===ua&&0!==qa||h.equals(W,ha))return L[0]=1,L[1]=1,L[2]=1,!0;if(1===qa){W=la.length(N);N=W/Math.sqrt(N[0]*N[0]+N[1]*N[1]);W/=q.earth.radius;if(3===ua)return L[0]=N*W,L[1]=N*W,L[2]=1,!0;if(2===ua||5===ua)return ua=180/(q.earth.radius*Math.PI),L[0]=ua*N*W,L[1]=ua*W,L[2]=1,!0}else if(12===qa&&(2===ua||5===ua))return L[0]=Xa,L[1]=Xa,L[2]=1,!0;return!1};y.lonLatToSphericalPCPF=function(N,W,L,ha,qa=0){ha+=qa;qa=Math.cos(L);N[0]=Math.cos(W)*qa*
ha;N[1]=Math.sin(W)*qa*ha;N[2]=Math.sin(L)*ha};y.lonLatToWebMercatorComparable=M;y.project=m;y.projectBoundingRect=function(N,W,L,ha){if(null==N)return!1;if(h.equals(W,ha))return E.copy(L,N),!0;Ha[0]=N[0];Ha[1]=N[1];Ha[2]=0;if(!K(Ha,W,0,Ha,ha,0,1))return!1;L[0]=Ha[0];L[1]=Ha[1];Ha[0]=N[2];Ha[1]=N[3];Ha[2]=0;if(!K(Ha,W,0,Ha,ha,0,1))return!1;L[2]=Ha[0];L[3]=Ha[1];return!0};y.projectBoundingSphere=function(N,W,L,ha){if(P.isNone(W)||P.isNone(ha))return!1;W=Ra(W,ha,db);if(W.projector===da)return L[0]=
N[0],L[1]=N[1],L[2]=N[2],L[3]=N[3],!0;if(P.isNone(W.projector))return!1;const {source:qa,dest:ua}=W;if(3===ua.spatialReferenceId){W=Ua[qa.spatialReferenceId][2];if(P.isNone(W))return!1;W(N,0,Ta,0);ca(Ta,0,L,0);L[3]=R(Ta[1],N[2],N[3],q.earth.radius);return!0}if(2!==qa.spatialReferenceId&&5!==qa.spatialReferenceId||12!==ua.spatialReferenceId)W.projector(N,0,L,0),L[3]=N[3]*qa.metersPerUnit/ua.metersPerUnit;else{ha=Ua[1][12];let za=N[3];P.isSome(Ua[qa.spatialReferenceId][1])&&P.isSome(ha)&&(za=R(N[1],
N[2],N[3],q.earth.radius));W.projector(N,0,L,0);L[3]=za}return!0};y.projectBuffer=K;y.projectDirection=function(N,W,L,ha,qa){la.copy(Ea,N);la.add(ab,N,W);J(Ea,L,Ea,qa);J(ab,L,ab,qa);la.subtract(ha,ab,Ea);la.normalize(ha,ha)};y.projectExtent=function(N,W,L=W.spatialReference,ha=0){return P.isSome(L)&&P.isSome(k(N,N.spatialReference,W,L,ha))};y.projectMany=v;y.projectMultipoint=function(N,W,L=W.spatialReference,ha=0){return P.isNone(L)?!1:P.isSome(D(N,N.spatialReference,W,L,ha))};y.projectPoint=function(N,
W,L=W.spatialReference,ha=0){return P.isNone(L)?!1:P.isSome(f(N,N.spatialReference,W,L,ha))};y.projectPointToVector=function(N,W,L,ha=0){Ea[0]=N.x;Ea[1]=N.y;const qa=N.z;Ea[2]=void 0!==qa?qa:ha;return K(Ea,N.spatialReference,0,W,L,0,1)};y.projectPointToWGS84ComparableLonLat=function(N,W){Ea[0]=N.x;Ea[1]=N.y;const L=N.z;Ea[2]=void 0!==L?L:0;return I(Ea,N.spatialReference,W)};y.projectPolygon=function(N,W,L=W.spatialReference,ha=0){return P.isSome(L)&&P.isSome(g(N,N.spatialReference,W,L,ha))};y.projectPolyline=
function(N,W,L=W.spatialReference,ha=0){return P.isSome(L)&&P.isSome(z(N,N.spatialReference,W,L,ha))};y.projectVectorToDehydratedPoint=function(N,W,L){return K(N,W,0,Ea,L.spatialReference,0,1)?(L.x=Ea[0],L.y=Ea[1],L.z=Ea[2],L):null};y.projectVectorToPoint=function(N,W,L){if(P.isNone(W)||P.isNone(L))return null;const ha=new G({spatialReference:L});return K(N,W,0,Ea,L,0,1)?(ha.x=Ea[0],ha.y=Ea[1],ha.z=Ea[2],ha):null};y.projectVectorToVector=J;y.projectVectorToWGS84ComparableLonLat=function(N,W,L){return I(N,
W,L)};y.projectWithoutEngine=p;y.projectXYZToVector=A;y.sphericalPCPFtoLonLatElevation=ra;y.tryProjectWithZConversion=function(N,W){try{const L=m(N,W);if(null==L)return null;"xmin"in N&&"xmin"in L&&(L.zmin=N.zmin,L.zmax=N.zmax);const ha=e.getGeometryZScaler(L.type,N.spatialReference,W);P.isSome(ha)&&ha(L);return L}catch(L){if(!(L instanceof Ga))throw L;return null}};y.unload=function(){Na=Ma=Ja=null;Oa={}};Object.defineProperty(y,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports",
"./vec3f64","./common"],function(S,y,aa){function T(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function x(a,b,H,M,ca,ja,ka,fa,ma,oa,ia,pa,ra,sa,xa,va,ta){a[0]=b;a[1]=H;a[2]=M;a[3]=ca;a[4]=ja;a[5]=ka;a[6]=fa;a[7]=ma;a[8]=oa;a[9]=ia;a[10]=pa;a[11]=ra;a[12]=sa;a[13]=xa;a[14]=va;a[15]=ta;return a}function P(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=
0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ea(a,b){if(a===b){const H=b[1],M=b[2],ca=b[3],ja=b[6],ka=b[7],fa=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=H;a[6]=b[9];a[7]=b[13];a[8]=M;a[9]=ja;a[11]=b[14];a[12]=ca;a[13]=ka;a[14]=fa}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}function na(a,b){const H=b[0],M=b[1],ca=b[2],ja=b[3],
ka=b[4],fa=b[5],ma=b[6],oa=b[7],ia=b[8],pa=b[9],ra=b[10],sa=b[11],xa=b[12],va=b[13],ta=b[14];b=b[15];const wa=H*fa-M*ka,ya=H*ma-ca*ka,Aa=H*oa-ja*ka,Da=M*ma-ca*fa,Ba=M*oa-ja*fa,Fa=ca*oa-ja*ma,Ra=ia*va-pa*xa,Pa=ia*ta-ra*xa,Ja=ia*b-sa*xa,Ma=pa*ta-ra*va,Na=pa*b-sa*va,Oa=ra*b-sa*ta;let Ga=wa*Oa-ya*Na+Aa*Ma+Da*Ja-Ba*Pa+Fa*Ra;if(!Ga)return null;Ga=1/Ga;a[0]=(fa*Oa-ma*Na+oa*Ma)*Ga;a[1]=(ca*Na-M*Oa-ja*Ma)*Ga;a[2]=(va*Fa-ta*Ba+b*Da)*Ga;a[3]=(ra*Ba-pa*Fa-sa*Da)*Ga;a[4]=(ma*Ja-ka*Oa-oa*Pa)*Ga;a[5]=(H*Oa-ca*Ja+
ja*Pa)*Ga;a[6]=(ta*Aa-xa*Fa-b*ya)*Ga;a[7]=(ia*Fa-ra*Aa+sa*ya)*Ga;a[8]=(ka*Na-fa*Ja+oa*Ra)*Ga;a[9]=(M*Ja-H*Na-ja*Ra)*Ga;a[10]=(xa*Ba-va*Aa+b*wa)*Ga;a[11]=(pa*Aa-ia*Ba-sa*wa)*Ga;a[12]=(fa*Pa-ka*Ma-ma*Ra)*Ga;a[13]=(H*Ma-M*Pa+ca*Ra)*Ga;a[14]=(va*ya-xa*Da-ta*wa)*Ga;a[15]=(ia*Da-pa*ya+ra*wa)*Ga;return a}function X(a,b){const H=b[0],M=b[1],ca=b[2],ja=b[3],ka=b[4],fa=b[5],ma=b[6],oa=b[7],ia=b[8],pa=b[9],ra=b[10],sa=b[11],xa=b[12],va=b[13],ta=b[14];b=b[15];a[0]=fa*(ra*b-sa*ta)-pa*(ma*b-oa*ta)+va*(ma*sa-oa*
ra);a[1]=-(M*(ra*b-sa*ta)-pa*(ca*b-ja*ta)+va*(ca*sa-ja*ra));a[2]=M*(ma*b-oa*ta)-fa*(ca*b-ja*ta)+va*(ca*oa-ja*ma);a[3]=-(M*(ma*sa-oa*ra)-fa*(ca*sa-ja*ra)+pa*(ca*oa-ja*ma));a[4]=-(ka*(ra*b-sa*ta)-ia*(ma*b-oa*ta)+xa*(ma*sa-oa*ra));a[5]=H*(ra*b-sa*ta)-ia*(ca*b-ja*ta)+xa*(ca*sa-ja*ra);a[6]=-(H*(ma*b-oa*ta)-ka*(ca*b-ja*ta)+xa*(ca*oa-ja*ma));a[7]=H*(ma*sa-oa*ra)-ka*(ca*sa-ja*ra)+ia*(ca*oa-ja*ma);a[8]=ka*(pa*b-sa*va)-ia*(fa*b-oa*va)+xa*(fa*sa-oa*pa);a[9]=-(H*(pa*b-sa*va)-ia*(M*b-ja*va)+xa*(M*sa-ja*pa));a[10]=
H*(fa*b-oa*va)-ka*(M*b-ja*va)+xa*(M*oa-ja*fa);a[11]=-(H*(fa*sa-oa*pa)-ka*(M*sa-ja*pa)+ia*(M*oa-ja*fa));a[12]=-(ka*(pa*ta-ra*va)-ia*(fa*ta-ma*va)+xa*(fa*ra-ma*pa));a[13]=H*(pa*ta-ra*va)-ia*(M*ta-ca*va)+xa*(M*ra-ca*pa);a[14]=-(H*(fa*ta-ma*va)-ka*(M*ta-ca*va)+xa*(M*ma-ca*fa));a[15]=H*(fa*ra-ma*pa)-ka*(M*ra-ca*pa)+ia*(M*ma-ca*fa);return a}function la(a){const b=a[0],H=a[1],M=a[2],ca=a[3],ja=a[4],ka=a[5],fa=a[6],ma=a[7],oa=a[8],ia=a[9],pa=a[10],ra=a[11],sa=a[12],xa=a[13],va=a[14];a=a[15];return(b*ka-H*
ja)*(pa*a-ra*va)-(b*fa-M*ja)*(ia*a-ra*xa)+(b*ma-ca*ja)*(ia*va-pa*xa)+(H*fa-M*ka)*(oa*a-ra*sa)-(H*ma-ca*ka)*(oa*va-pa*sa)+(M*ma-ca*fa)*(oa*xa-ia*sa)}function ba(a,b,H){const M=b[0],ca=b[1],ja=b[2],ka=b[3],fa=b[4],ma=b[5],oa=b[6],ia=b[7],pa=b[8],ra=b[9],sa=b[10],xa=b[11],va=b[12],ta=b[13],wa=b[14];b=b[15];let ya=H[0],Aa=H[1],Da=H[2],Ba=H[3];a[0]=ya*M+Aa*fa+Da*pa+Ba*va;a[1]=ya*ca+Aa*ma+Da*ra+Ba*ta;a[2]=ya*ja+Aa*oa+Da*sa+Ba*wa;a[3]=ya*ka+Aa*ia+Da*xa+Ba*b;ya=H[4];Aa=H[5];Da=H[6];Ba=H[7];a[4]=ya*M+Aa*fa+
Da*pa+Ba*va;a[5]=ya*ca+Aa*ma+Da*ra+Ba*ta;a[6]=ya*ja+Aa*oa+Da*sa+Ba*wa;a[7]=ya*ka+Aa*ia+Da*xa+Ba*b;ya=H[8];Aa=H[9];Da=H[10];Ba=H[11];a[8]=ya*M+Aa*fa+Da*pa+Ba*va;a[9]=ya*ca+Aa*ma+Da*ra+Ba*ta;a[10]=ya*ja+Aa*oa+Da*sa+Ba*wa;a[11]=ya*ka+Aa*ia+Da*xa+Ba*b;ya=H[12];Aa=H[13];Da=H[14];Ba=H[15];a[12]=ya*M+Aa*fa+Da*pa+Ba*va;a[13]=ya*ca+Aa*ma+Da*ra+Ba*ta;a[14]=ya*ja+Aa*oa+Da*sa+Ba*wa;a[15]=ya*ka+Aa*ia+Da*xa+Ba*b;return a}function Y(a,b,H){const M=H[0],ca=H[1];H=H[2];let ja=void 0,ka=void 0,fa=void 0,ma=void 0,
oa=void 0,ia=void 0,pa=void 0,ra=void 0,sa=void 0,xa=void 0,va=void 0,ta=void 0;b===a?(a[12]=b[0]*M+b[4]*ca+b[8]*H+b[12],a[13]=b[1]*M+b[5]*ca+b[9]*H+b[13],a[14]=b[2]*M+b[6]*ca+b[10]*H+b[14],a[15]=b[3]*M+b[7]*ca+b[11]*H+b[15]):(ja=b[0],ka=b[1],fa=b[2],ma=b[3],oa=b[4],ia=b[5],pa=b[6],ra=b[7],sa=b[8],xa=b[9],va=b[10],ta=b[11],a[0]=ja,a[1]=ka,a[2]=fa,a[3]=ma,a[4]=oa,a[5]=ia,a[6]=pa,a[7]=ra,a[8]=sa,a[9]=xa,a[10]=va,a[11]=ta,a[12]=ja*M+oa*ca+sa*H+b[12],a[13]=ka*M+ia*ca+xa*H+b[13],a[14]=fa*M+pa*ca+va*H+
b[14],a[15]=ma*M+ra*ca+ta*H+b[15]);return a}function U(a,b,H){const M=H[0],ca=H[1];H=H[2];a[0]=b[0]*M;a[1]=b[1]*M;a[2]=b[2]*M;a[3]=b[3]*M;a[4]=b[4]*ca;a[5]=b[5]*ca;a[6]=b[6]*ca;a[7]=b[7]*ca;a[8]=b[8]*H;a[9]=b[9]*H;a[10]=b[10]*H;a[11]=b[11]*H;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function F(a,b,H,M){let ca=M[0],ja=M[1];M=M[2];let ka=Math.sqrt(ca*ca+ja*ja+M*M);var fa=void 0,ma=void 0;let oa=void 0,ia=void 0,pa=void 0,ra=void 0,sa=void 0,xa=void 0,va=void 0,ta=void 0,wa=void 0,ya=
void 0,Aa=void 0,Da=void 0,Ba=void 0,Fa=void 0,Ra=void 0,Pa=void 0,Ja=void 0,Ma=void 0,Na=void 0,Oa=void 0;ma=fa=void 0;if(ka<aa.EPSILON)return null;ka=1/ka;ca*=ka;ja*=ka;M*=ka;fa=Math.sin(H);ma=Math.cos(H);oa=1-ma;ia=b[0];pa=b[1];ra=b[2];sa=b[3];xa=b[4];va=b[5];ta=b[6];wa=b[7];ya=b[8];Aa=b[9];Da=b[10];Ba=b[11];Fa=ca*ca*oa+ma;Ra=ja*ca*oa+M*fa;Pa=M*ca*oa-ja*fa;Ja=ca*ja*oa-M*fa;Ma=ja*ja*oa+ma;Na=M*ja*oa+ca*fa;Oa=ca*M*oa+ja*fa;fa=ja*M*oa-ca*fa;ma=M*M*oa+ma;a[0]=ia*Fa+xa*Ra+ya*Pa;a[1]=pa*Fa+va*Ra+Aa*
Pa;a[2]=ra*Fa+ta*Ra+Da*Pa;a[3]=sa*Fa+wa*Ra+Ba*Pa;a[4]=ia*Ja+xa*Ma+ya*Na;a[5]=pa*Ja+va*Ma+Aa*Na;a[6]=ra*Ja+ta*Ma+Da*Na;a[7]=sa*Ja+wa*Ma+Ba*Na;a[8]=ia*Oa+xa*fa+ya*ma;a[9]=pa*Oa+va*fa+Aa*ma;a[10]=ra*Oa+ta*fa+Da*ma;a[11]=sa*Oa+wa*fa+Ba*ma;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}function G(a,b,H){const M=Math.sin(H);H=Math.cos(H);const ca=b[4],ja=b[5],ka=b[6],fa=b[7],ma=b[8],oa=b[9],ia=b[10],pa=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=
b[14],a[15]=b[15]);a[4]=ca*H+ma*M;a[5]=ja*H+oa*M;a[6]=ka*H+ia*M;a[7]=fa*H+pa*M;a[8]=ma*H-ca*M;a[9]=oa*H-ja*M;a[10]=ia*H-ka*M;a[11]=pa*H-fa*M;return a}function d(a,b,H){const M=Math.sin(H);H=Math.cos(H);const ca=b[0],ja=b[1],ka=b[2],fa=b[3],ma=b[8],oa=b[9],ia=b[10],pa=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=ca*H-ma*M;a[1]=ja*H-oa*M;a[2]=ka*H-ia*M;a[3]=fa*H-pa*M;a[8]=ca*M+ma*H;a[9]=ja*M+oa*H;a[10]=ka*M+ia*H;a[11]=fa*M+pa*H;return a}
function c(a,b,H){const M=Math.sin(H);H=Math.cos(H);const ca=b[0],ja=b[1],ka=b[2],fa=b[3],ma=b[4],oa=b[5],ia=b[6],pa=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=ca*H+ma*M;a[1]=ja*H+oa*M;a[2]=ka*H+ia*M;a[3]=fa*H+pa*M;a[4]=ma*H-ca*M;a[5]=oa*H-ja*M;a[6]=ia*H-ka*M;a[7]=pa*H-fa*M;return a}function l(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}
function E(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function q(a,b,H){let M=H[0],ca=H[1];H=H[2];let ja=Math.sqrt(M*M+ca*ca+H*H),ka=void 0,fa=void 0,ma=void 0;if(ja<aa.EPSILON)return null;ja=1/ja;M*=ja;ca*=ja;H*=ja;ka=Math.sin(b);fa=Math.cos(b);ma=1-fa;a[0]=M*M*ma+fa;a[1]=ca*M*ma+H*ka;a[2]=H*M*ma-ca*ka;a[3]=0;a[4]=M*ca*ma-H*ka;a[5]=ca*ca*ma+fa;a[6]=H*ca*ma+M*ka;a[7]=0;a[8]=M*H*ma+ca*ka;a[9]=ca*H*ma-
M*ka;a[10]=H*H*ma+fa;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function u(a,b){const H=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=H;a[7]=0;a[8]=0;a[9]=-H;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function w(a,b){const H=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-H;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=H;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function h(a,b){const H=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=H;a[2]=0;a[3]=
0;a[4]=-H;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function e(a,b,H){var M=b[0],ca=b[1],ja=b[2],ka=b[3],fa=M+M,ma=ca+ca;const oa=ja+ja;b=M*fa;const ia=M*ma;M*=oa;const pa=ca*ma;ca*=oa;ja*=oa;fa*=ka;ma*=ka;ka*=oa;a[0]=1-(pa+ja);a[1]=ia+ka;a[2]=M-ma;a[3]=0;a[4]=ia-ka;a[5]=1-(b+ja);a[6]=ca+fa;a[7]=0;a[8]=M+ma;a[9]=ca-fa;a[10]=1-(b+pa);a[11]=0;a[12]=H[0];a[13]=H[1];a[14]=H[2];a[15]=1;return a}function n(a,b){const H=da,M=-b[0],ca=-b[1],ja=-b[2],ka=b[3],
fa=b[4],ma=b[5],oa=b[6],ia=b[7],pa=M*M+ca*ca+ja*ja+ka*ka;0<pa?(H[0]=2*(fa*ka+ia*M+ma*ja-oa*ca)/pa,H[1]=2*(ma*ka+ia*ca+oa*M-fa*ja)/pa,H[2]=2*(oa*ka+ia*ja+fa*ca-ma*M)/pa):(H[0]=2*(fa*ka+ia*M+ma*ja-oa*ca),H[1]=2*(ma*ka+ia*ca+oa*M-fa*ja),H[2]=2*(oa*ka+ia*ja+fa*ca-ma*M));e(a,b,H);return a}function r(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a}function m(a,b){const H=b[0],M=b[1],ca=b[2],ja=b[4],ka=b[5],fa=b[6],ma=b[8],oa=b[9];b=b[10];a[0]=Math.sqrt(H*H+M*M+ca*ca);a[1]=Math.sqrt(ja*ja+ka*ka+fa*fa);a[2]=
Math.sqrt(ma*ma+oa*oa+b*b);return a}function v(a,b){const H=b[0]+b[5]+b[10];let M=0;0<H?(M=2*Math.sqrt(H+1),a[3]=.25*M,a[0]=(b[6]-b[9])/M,a[1]=(b[8]-b[2])/M,a[2]=(b[1]-b[4])/M):b[0]>b[5]&&b[0]>b[10]?(M=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/M,a[0]=.25*M,a[1]=(b[1]+b[4])/M,a[2]=(b[8]+b[2])/M):b[5]>b[10]?(M=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/M,a[0]=(b[1]+b[4])/M,a[1]=.25*M,a[2]=(b[6]+b[9])/M):(M=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/M,a[0]=(b[8]+b[2])/M,a[1]=(b[6]+b[9])/
M,a[2]=.25*M);return a}function C(a,b,H,M){var ca=b[0],ja=b[1],ka=b[2],fa=b[3],ma=ca+ca,oa=ja+ja,ia=ka+ka;b=ca*ma;const pa=ca*oa;ca*=ia;const ra=ja*oa;ja*=ia;ka*=ia;ma*=fa;oa*=fa;fa*=ia;ia=M[0];const sa=M[1];M=M[2];a[0]=(1-(ra+ka))*ia;a[1]=(pa+fa)*ia;a[2]=(ca-oa)*ia;a[3]=0;a[4]=(pa-fa)*sa;a[5]=(1-(b+ka))*sa;a[6]=(ja+ma)*sa;a[7]=0;a[8]=(ca+oa)*M;a[9]=(ja-ma)*M;a[10]=(1-(b+ra))*M;a[11]=0;a[12]=H[0];a[13]=H[1];a[14]=H[2];a[15]=1;return a}function t(a,b,H,M,ca){var ja=b[0],ka=b[1],fa=b[2],ma=b[3],oa=
ja+ja,ia=ka+ka,pa=fa+fa;b=ja*oa;var ra=ja*ia,sa=ja*pa;ja=ka*ia;ka*=pa;var xa=fa*pa;fa=ma*oa;ia*=ma;const va=ma*pa;var ta=M[0],wa=M[1];pa=M[2];M=ca[0];ma=ca[1];ca=ca[2];oa=(1-(ja+xa))*ta;const ya=(ra+va)*ta;ta*=sa-ia;ra=(ra-va)*wa;xa=(1-(b+xa))*wa;wa*=ka+fa;sa=(sa+ia)*pa;ka=(ka-fa)*pa;b=(1-(b+ja))*pa;a[0]=oa;a[1]=ya;a[2]=ta;a[3]=0;a[4]=ra;a[5]=xa;a[6]=wa;a[7]=0;a[8]=sa;a[9]=ka;a[10]=b;a[11]=0;a[12]=H[0]+M-(oa*M+ra*ma+sa*ca);a[13]=H[1]+ma-(ya*M+xa*ma+ka*ca);a[14]=H[2]+ca-(ta*M+wa*ma+b*ca);a[15]=1;return a}
function B(a,b){var H=b[0],M=b[1],ca=b[2];b=b[3];var ja=H+H,ka=M+M;const fa=ca+ca;H*=ja;const ma=M*ja;M*=ka;const oa=ca*ja,ia=ca*ka;ca*=fa;ja*=b;ka*=b;b*=fa;a[0]=1-M-ca;a[1]=ma+b;a[2]=oa-ka;a[3]=0;a[4]=ma-b;a[5]=1-H-ca;a[6]=ia+ja;a[7]=0;a[8]=oa+ka;a[9]=ia-ja;a[10]=1-H-M;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function p(a,b,H,M,ca,ja,ka){const fa=1/(H-b),ma=1/(ca-M),oa=1/(ja-ka);a[0]=2*ja*fa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*ja*ma;a[6]=0;a[7]=0;a[8]=(H+b)*fa;a[9]=(ca+M)*ma;a[10]=(ka+ja)*
oa;a[11]=-1;a[12]=0;a[13]=0;a[14]=ka*ja*2*oa;a[15]=0;return a}function f(a,b,H,M,ca){b=1/Math.tan(b/2);let ja=void 0;a[0]=b/H;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=ca&&Infinity!==ca?(ja=1/(M-ca),a[10]=(ca+M)*ja,a[14]=2*ca*M*ja):(a[10]=-1,a[14]=-2*M);return a}function D(a,b,H,M){const ca=Math.tan(b.upDegrees*Math.PI/180),ja=Math.tan(b.downDegrees*Math.PI/180),ka=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);
const fa=2/(ka+b),ma=2/(ca+ja);a[0]=fa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=ma;a[6]=0;a[7]=0;a[8]=-((ka-b)*fa*.5);a[9]=(ca-ja)*ma*.5;a[10]=M/(H-M);a[11]=-1;a[12]=0;a[13]=0;a[14]=M*H/(H-M);a[15]=0;return a}function z(a,b,H,M,ca,ja,ka){const fa=1/(b-H),ma=1/(M-ca),oa=1/(ja-ka);a[0]=-2*fa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*ma;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*oa;a[11]=0;a[12]=(b+H)*fa;a[13]=(ca+M)*ma;a[14]=(ka+ja)*oa;a[15]=1;return a}function g(a,b,H,M){let ca=void 0,ja=void 0;var ka=void 0,fa=void 0;
let ma=void 0,oa=void 0;var ia=void 0,pa=void 0;let ra=void 0,sa=void 0;const xa=b[0],va=b[1];b=b[2];ka=M[0];fa=M[1];M=M[2];ia=H[0];pa=H[1];H=H[2];if(Math.abs(xa-ia)<aa.EPSILON&&Math.abs(va-pa)<aa.EPSILON&&Math.abs(b-H)<aa.EPSILON)return P(a);ia=xa-ia;pa=va-pa;ra=b-H;sa=1/Math.sqrt(ia*ia+pa*pa+ra*ra);ia*=sa;pa*=sa;ra*=sa;ca=fa*ra-M*pa;ja=M*ia-ka*ra;ka=ka*pa-fa*ia;(sa=Math.sqrt(ca*ca+ja*ja+ka*ka))?(sa=1/sa,ca*=sa,ja*=sa,ka*=sa):ka=ja=ca=0;fa=pa*ka-ra*ja;ma=ra*ca-ia*ka;oa=ia*ja-pa*ca;(sa=Math.sqrt(fa*
fa+ma*ma+oa*oa))?(sa=1/sa,fa*=sa,ma*=sa,oa*=sa):oa=ma=fa=0;a[0]=ca;a[1]=fa;a[2]=ia;a[3]=0;a[4]=ja;a[5]=ma;a[6]=pa;a[7]=0;a[8]=ka;a[9]=oa;a[10]=ra;a[11]=0;a[12]=-(ca*xa+ja*va+ka*b);a[13]=-(fa*xa+ma*va+oa*b);a[14]=-(ia*xa+pa*va+ra*b);a[15]=1;return a}function k(a,b,H,M){const ca=b[0],ja=b[1];b=b[2];var ka=M[0];const fa=M[1];var ma=M[2];M=ca-H[0];let oa=ja-H[1];H=b-H[2];let ia=M*M+oa*oa+H*H;0<ia&&(ia=1/Math.sqrt(ia),M*=ia,oa*=ia,H*=ia);let pa=fa*H-ma*oa;ma=ma*M-ka*H;ka=ka*oa-fa*M;ia=pa*pa+ma*ma+ka*ka;
0<ia&&(ia=1/Math.sqrt(ia),pa*=ia,ma*=ia,ka*=ia);a[0]=pa;a[1]=ma;a[2]=ka;a[3]=0;a[4]=oa*ka-H*ma;a[5]=H*pa-M*ka;a[6]=M*ma-oa*pa;a[7]=0;a[8]=M;a[9]=oa;a[10]=H;a[11]=0;a[12]=ca;a[13]=ja;a[14]=b;a[15]=1;return a}function A(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function J(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**
2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function I(a,b,H){a[0]=b[0]+H[0];a[1]=b[1]+H[1];a[2]=b[2]+H[2];a[3]=b[3]+H[3];a[4]=b[4]+H[4];a[5]=b[5]+H[5];a[6]=b[6]+H[6];a[7]=b[7]+H[7];a[8]=b[8]+H[8];a[9]=b[9]+H[9];a[10]=b[10]+H[10];a[11]=b[11]+H[11];a[12]=b[12]+H[12];a[13]=b[13]+H[13];a[14]=b[14]+H[14];a[15]=b[15]+H[15];return a}function K(a,b,H){a[0]=b[0]-H[0];a[1]=b[1]-H[1];a[2]=b[2]-H[2];a[3]=b[3]-H[3];a[4]=b[4]-H[4];a[5]=b[5]-H[5];a[6]=b[6]-H[6];a[7]=b[7]-H[7];a[8]=b[8]-H[8];
a[9]=b[9]-H[9];a[10]=b[10]-H[10];a[11]=b[11]-H[11];a[12]=b[12]-H[12];a[13]=b[13]-H[13];a[14]=b[14]-H[14];a[15]=b[15]-H[15];return a}function O(a,b,H){a[0]=b[0]*H;a[1]=b[1]*H;a[2]=b[2]*H;a[3]=b[3]*H;a[4]=b[4]*H;a[5]=b[5]*H;a[6]=b[6]*H;a[7]=b[7]*H;a[8]=b[8]*H;a[9]=b[9]*H;a[10]=b[10]*H;a[11]=b[11]*H;a[12]=b[12]*H;a[13]=b[13]*H;a[14]=b[14]*H;a[15]=b[15]*H;return a}function R(a,b,H,M){a[0]=b[0]+H[0]*M;a[1]=b[1]+H[1]*M;a[2]=b[2]+H[2]*M;a[3]=b[3]+H[3]*M;a[4]=b[4]+H[4]*M;a[5]=b[5]+H[5]*M;a[6]=b[6]+H[6]*M;
a[7]=b[7]+H[7]*M;a[8]=b[8]+H[8]*M;a[9]=b[9]+H[9]*M;a[10]=b[10]+H[10]*M;a[11]=b[11]+H[11]*M;a[12]=b[12]+H[12]*M;a[13]=b[13]+H[13]*M;a[14]=b[14]+H[14]*M;a[15]=b[15]+H[15]*M;return a}function V(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function Z(a,b){if(a===b)return!0;const H=a[0],M=a[1],ca=a[2],ja=a[3],ka=a[4],fa=
a[5],ma=a[6],oa=a[7],ia=a[8],pa=a[9],ra=a[10],sa=a[11],xa=a[12],va=a[13],ta=a[14];a=a[15];const wa=b[0],ya=b[1],Aa=b[2],Da=b[3],Ba=b[4],Fa=b[5],Ra=b[6],Pa=b[7],Ja=b[8],Ma=b[9],Na=b[10],Oa=b[11],Ga=b[12],Za=b[13],Xa=b[14];b=b[15];return Math.abs(H-wa)<=aa.EPSILON*Math.max(1,Math.abs(H),Math.abs(wa))&&Math.abs(M-ya)<=aa.EPSILON*Math.max(1,Math.abs(M),Math.abs(ya))&&Math.abs(ca-Aa)<=aa.EPSILON*Math.max(1,Math.abs(ca),Math.abs(Aa))&&Math.abs(ja-Da)<=aa.EPSILON*Math.max(1,Math.abs(ja),Math.abs(Da))&&Math.abs(ka-
Ba)<=aa.EPSILON*Math.max(1,Math.abs(ka),Math.abs(Ba))&&Math.abs(fa-Fa)<=aa.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Fa))&&Math.abs(ma-Ra)<=aa.EPSILON*Math.max(1,Math.abs(ma),Math.abs(Ra))&&Math.abs(oa-Pa)<=aa.EPSILON*Math.max(1,Math.abs(oa),Math.abs(Pa))&&Math.abs(ia-Ja)<=aa.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ja))&&Math.abs(pa-Ma)<=aa.EPSILON*Math.max(1,Math.abs(pa),Math.abs(Ma))&&Math.abs(ra-Na)<=aa.EPSILON*Math.max(1,Math.abs(ra),Math.abs(Na))&&Math.abs(sa-Oa)<=aa.EPSILON*Math.max(1,Math.abs(sa),
Math.abs(Oa))&&Math.abs(xa-Ga)<=aa.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ga))&&Math.abs(va-Za)<=aa.EPSILON*Math.max(1,Math.abs(va),Math.abs(Za))&&Math.abs(ta-Xa)<=aa.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Xa))&&Math.abs(a-b)<=aa.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}function Q(a){const b=aa.EPSILON,H=a[0],M=a[1],ca=a[2],ja=a[4],ka=a[5],fa=a[6],ma=a[8],oa=a[9];a=a[10];return Math.abs(1-(H*H+ja*ja+ma*ma))<=b&&Math.abs(1-(M*M+ka*ka+oa*oa))<=b&&Math.abs(1-(ca*ca+fa*fa+a*a))<=b}const da=y.create();
y=Object.freeze({__proto__:null,copy:T,set:x,identity:P,transpose:ea,invert:na,adjoint:X,determinant:la,multiply:ba,translate:Y,scale:U,rotate:F,rotateX:G,rotateY:d,rotateZ:c,fromTranslation:l,fromScaling:E,fromRotation:q,fromXRotation:u,fromYRotation:w,fromZRotation:h,fromRotationTranslation:e,fromQuat2:n,getTranslation:r,getScaling:m,getRotation:v,fromRotationTranslationScale:C,fromRotationTranslationScaleOrigin:t,fromQuat:B,frustum:p,perspective:f,perspectiveFromFieldOfView:D,ortho:z,lookAt:g,
targetTo:k,str:A,frob:J,add:I,subtract:K,multiplyScalar:O,multiplyScalarAndAdd:R,exactEquals:V,equals:Z,isOrthoNormal:Q,mul:ba,sub:K});S.add=I;S.adjoint=X;S.copy=T;S.determinant=la;S.equals=Z;S.exactEquals=V;S.frob=J;S.fromQuat=B;S.fromQuat2=n;S.fromRotation=q;S.fromRotationTranslation=e;S.fromRotationTranslationScale=C;S.fromRotationTranslationScaleOrigin=t;S.fromScaling=E;S.fromTranslation=l;S.fromXRotation=u;S.fromYRotation=w;S.fromZRotation=h;S.frustum=p;S.getRotation=v;S.getScaling=m;S.getTranslation=
r;S.identity=P;S.invert=na;S.isOrthoNormal=Q;S.lookAt=g;S.mat4=y;S.mul=ba;S.multiply=ba;S.multiplyScalar=O;S.multiplyScalarAndAdd=R;S.ortho=z;S.perspective=f;S.perspectiveFromFieldOfView=D;S.rotate=F;S.rotateX=G;S.rotateY=d;S.rotateZ=c;S.scale=U;S.set=x;S.str=A;S.sub=K;S.subtract=K;S.targetTo=k;S.translate=Y;S.transpose=ea})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(S,y,aa,T,x){function P(){return!!y._pe}function ea(){return!!x("esri-wasm")}
function na(){return F?F:F=(new Promise((d,c)=>S(["./pe-wasm"],d,c))).then(d=>d.peWasm).then(({default:d})=>d({locateFile:c=>T.getAssetUrl(`esri/geometry/support/${c}`)})).then(d=>{X(d)})}function X(d){function c(q,u,w){q[u]=w(q[u])}y._pe=d;y.PeDefs.init();y.PeGTlistExtended.init();y.PeNotationMgrs.init();y.PeNotationUtm.init();y.PePCSInfo.init();y.PeGCSExtent=function(q){function u(){return q.apply(this,arguments)||this}aa._inheritsLoose(u,q);u.prototype.destroy=function(){y._pe.destroy(this)};return u}(y._pe.PeGCSExtent);
d=[y._pe.PeDatum,y._pe.PeGeogcs,y._pe.PeGeogtran,y._pe.PeObject,y._pe.PeParameter,y._pe.PePrimem,y._pe.PeProjcs,y._pe.PeSpheroid,y._pe.PeUnit];for(var l of d)c(l.prototype,"getName",q=>function(){return q.call(this,Array(y.PeDefs.PE_NAME_MAX))});for(const q of[y._pe.PeGeogtran,y._pe.PeProjcs])c(q.prototype,"getParameters",u=>function(){const w=Array(y.PeDefs.PE_PARM_MAX);let h=u.call(this);for(let e=0;e<w.length;e++){const n=y._pe.getValue(h,"*");w[e]=n?y._pe.wrapPointer(n,y._pe.PeParameter):null;
h+=Int32Array.BYTES_PER_ELEMENT}return w});c(y._pe.PeHorizon.prototype,"getCoord",q=>function(){const u=this.getSize();if(!u)return null;const w=[],h=q.call(this);U(w,u,h);return w});c(y._pe.PeGTlistExtendedEntry.prototype,"getEntries",q=>{const u=y._pe._pe_getPeGTlistExtendedGTsSize();return function(){let w=null;var h=q.call(this);if(!y._pe.compare(h,y._pe.NULL)){w=[h];const e=this.getSteps();if(1<e){h=y._pe.getPointer(h);for(let n=1;n<e;n++)w.push(y._pe.wrapPointer(h+u*n,y._pe.PeGTlistExtendedGTs))}}return w}});
const E=y._pe._pe_getPeHorizonSize();l=q=>function(){let u=this._cache;u||(this._cache=u=new Map);if(u.has(q))return u.get(q);let w=null;var h=q.call(this);if(!y._pe.compare(h,y._pe.NULL)){w=[h];const e=h.getNump();if(1<e){h=y._pe.getPointer(h);for(let n=1;n<e;n++)w.push(y._pe.wrapPointer(h+E*n,y._pe.PeHorizon))}}u.set(q,w);return w};c(y._pe.PeProjcs.prototype,"horizonGcsGenerate",l);c(y._pe.PeProjcs.prototype,"horizonPcsGenerate",l);y._pe.PeObject.prototype.toString=function(q=y.PeDefs.PE_STR_OPTS_NONE){y._pe.ensureCache.prepare();
const u=y._pe.getPointer(this),w=y._pe.ensureInt8(Array(y.PeDefs.PE_BUFFER_MAX));return y._pe.UTF8ToString(y._pe._pe_object_to_string_ext(u,q,w))}}function la(d){if(d){var c=y._pe.getClass(d);c&&(c=y._pe.getCache(c))&&(d=y._pe.getPointer(d))&&delete c[d]}}function ba(d,c){const l=[];c=Array(c);for(let E=0;E<d;E++)l.push(y._pe.ensureInt8(c));return l}function Y(d){let c;Array.isArray(d[0])?(c=[],d.forEach(l=>{c.push(l[0],l[1])})):c=d;return c}function U(d,c,l,E=!1){if(E)for(E=0;E<2*c;E++)d[E]=y._pe.getValue(l+
E*Float64Array.BYTES_PER_ELEMENT,"double");else{E=0===d.length;for(let q=0;q<c;q++)E&&(d[q]=Array(2)),d[q][0]=y._pe.getValue(l,"double"),d[q][1]=y._pe.getValue(l+Float64Array.BYTES_PER_ELEMENT,"double"),l+=2*Float64Array.BYTES_PER_ELEMENT}}let F;y._pe=null;y.PeCSTransformations=void 0;(function(d){function c(q,u,w){y._pe.ensureCache.prepare();var h=Y(w);const e=w===h;h=y._pe.ensureFloat64(h);(q=y._pe._pe_geog_to_proj(y._pe.getPointer(q),u,h))&&U(w,u,h,e);return q}function l(q,u,w){return E(q,u,w,
0)}function E(q,u,w,h){y._pe.ensureCache.prepare();var e=Y(w);const n=w===e;e=y._pe.ensureFloat64(e);(q=y._pe._pe_proj_to_geog_center(y._pe.getPointer(q),u,e,h))&&U(w,u,e,n);return q}d.geogToProj=c;d.projGeog=function(q,u,w,h){switch(h){case y.PeDefs.PE_TRANSFORM_P_TO_G:return l(q,u,w);case y.PeDefs.PE_TRANSFORM_G_TO_P:return c(q,u,w)}return 0};d.projToGeog=l;d.projToGeogCenter=E})(y.PeCSTransformations||(y.PeCSTransformations={}));y.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=y._pe.PeDefs.prototype.PE_BUFFER_MAX;
d.PE_NAME_MAX=y._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=y._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=y._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=y._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=y._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=y._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=y._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=y._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=y._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=y._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=
y._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=y._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=y._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=y._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=y._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=y._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=y._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=y._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=y._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=
y._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=y._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=y._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=y._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=y._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=y._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=y._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=y._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=y._pe.PeDefs.prototype.PE_HORIZON_LINE;
d.PE_HORIZON_DELTA=y._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(y.PeDefs||(y.PeDefs={}));y.PeFactory=void 0;(function(d){function c(u,w){let h=null,e=l[u];e||(e={},l[u]=e);e.hasOwnProperty(String(w))?h=e[w]:(u=y._pe.PeFactory.prototype.factoryByType(u,w),y._pe.compare(u,y._pe.NULL)||(h=u,e[w]=h));return h=q(h)}const l={},E={},q=u=>{if(u){const w=u.getType();switch(w){case y.PeDefs.PE_TYPE_GEOGCS:u=y._pe.castObject(u,y._pe.PeGeogcs);break;case y.PeDefs.PE_TYPE_PROJCS:u=y._pe.castObject(u,y._pe.PeProjcs);
break;case y.PeDefs.PE_TYPE_GEOGTRAN:u=y._pe.castObject(u,y._pe.PeGeogtran);break;default:w&y.PeDefs.PE_TYPE_UNIT&&(u=y._pe.castObject(u,y._pe.PeUnit))}}return u};d.initialize=function(){y._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(u){return c(y.PeDefs.PE_TYPE_COORDSYS,u)};d.factoryByType=c;d.fromString=function(u,w){let h=null,e=E[u];e||(e={},E[u]=e);e.hasOwnProperty(w)?h=e[w]:(u=y._pe.PeFactory.prototype.fromString(u,w),y._pe.compare(u,y._pe.NULL)||(h=u,e[w]=h));return h=q(h)};
d.geogcs=function(u){return c(y.PeDefs.PE_TYPE_GEOGCS,u)};d.geogtran=function(u){return c(y.PeDefs.PE_TYPE_GEOGTRAN,u)};d.getCode=function(u){return y._pe.PeFactory.prototype.getCode(u)};d.projcs=function(u){return c(y.PeDefs.PE_TYPE_PROJCS,u)};d.unit=function(u){return c(y.PeDefs.PE_TYPE_UNIT,u)}})(y.PeFactory||(y.PeFactory={}));y.PeGCSExtent=null;y.PeGTlistExtended=void 0;(function(d){let c;d.init=function(){d.PE_GTLIST_OPTS_COMMON=y._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;c=y._pe._pe_getPeGTlistExtendedEntrySize()};
d.getGTlist=function(l,E,q,u,w,h){let e=null;const n=new y._pe.PeInteger(h);try{const r=y._pe.PeGTlistExtended.prototype.getGTlist(l,E,q,u,w,n);if(h=n.val)if(e=[r],1<h){const m=y._pe.getPointer(r);for(l=1;l<h;l++)e.push(y._pe.wrapPointer(m+c*l,y._pe.PeGTlistExtendedEntry))}}finally{y._pe.destroy(n)}return e}})(y.PeGTlistExtended||(y.PeGTlistExtended={}));y.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(c){if(c&&c.length){for(const l of c)la(l),l.getEntries().forEach(E=>{la(E);E=E.getGeogtran();
la(E);E.getParameters().forEach(la);[E.getGeogcs1(),E.getGeogcs2()].forEach(q=>{la(q);const u=q.getDatum();la(u);la(u.getSpheroid());la(q.getPrimem());la(q.getUnit())})});y._pe.PeGTlistExtendedEntry.prototype.Delete(c[0])}}})(y.PeGTlistExtendedEntry||(y.PeGTlistExtendedEntry={}));y.PeGTTransformations=void 0;(function(d){d.geogToGeog=function(c,l,E,q,u){y._pe.ensureCache.prepare();var w=Y(E);const h=E===w;w=y._pe.ensureFloat64(w);let e=0;q&&(e=y._pe.ensureFloat64(q));(c=y._pe._pe_geog_to_geog(y._pe.getPointer(c),
l,w,e,u))&&U(E,l,w,h);return c}})(y.PeGTTransformations||(y.PeGTTransformations={}));y.PeNotationDms=void 0;(function(d){const c=(E,q,u,w,h,e)=>{y._pe.ensureCache.prepare();switch(E){case "dd":var n=y._pe._pe_geog_to_dd;var r=y.PeDefs.PE_DD_MAX;break;case "ddm":n=y._pe._pe_geog_to_ddm;r=y.PeDefs.PE_DDM_MAX;break;case "dms":n=y._pe._pe_geog_to_dms,r=y.PeDefs.PE_DMS_MAX}E=0;q&&(E=y._pe.getPointer(q));q=Y(w);q=y._pe.ensureFloat64(q);r=ba(u,r);w=y._pe.ensureInt32(r);if(h=n(E,u,q,h,w))for(n=0;n<u;n++)e[n]=
y._pe.UTF8ToString(r[n]);return h},l=(E,q,u,w,h)=>{y._pe.ensureCache.prepare();switch(E){case "dd":var e=y._pe._pe_dd_to_geog;break;case "ddm":e=y._pe._pe_ddm_to_geog;break;case "dms":e=y._pe._pe_dms_to_geog}E=0;q&&(E=y._pe.getPointer(q));q=w.map(n=>y._pe.ensureString(n));w=y._pe.ensureInt32(q);q=y._pe.ensureFloat64(Array(2*u));(e=e(E,u,w,q))&&U(h,u,q);return e};d.geog_to_dms=function(E,q,u,w,h){return c("dms",E,q,u,w,h)};d.dms_to_geog=function(E,q,u,w){return l("dms",E,q,u,w)};d.geog_to_ddm=function(E,
q,u,w,h){return c("ddm",E,q,u,w,h)};d.ddm_to_geog=function(E,q,u,w){return l("ddm",E,q,u,w)};d.geog_to_dd=function(E,q,u,w,h){return c("dd",E,q,u,w,h)};d.dd_to_geog=function(E,q,u,w){return l("dd",E,q,u,w)}})(y.PeNotationDms||(y.PeNotationDms={}));y.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=y._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=y._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=y._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
d.PE_MGRS_180_ZONE_1_PLUS=y._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=y._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geog_to_mgrs_extended=function(c,l,E,q,u,w,h){y._pe.ensureCache.prepare();let e=0;c&&(e=y._pe.getPointer(c));c=Y(E);E=y._pe.ensureFloat64(c);c=ba(l,y.PeDefs.PE_MGRS_MAX);const n=y._pe.ensureInt32(c);if(q=y._pe._pe_geog_to_mgrs_extended(e,l,E,q,u,w,n))for(u=0;u<l;u++)h[u]=y._pe.UTF8ToString(c[u]);return q};d.mgrs_to_geog_extended=function(c,l,E,
q,u){y._pe.ensureCache.prepare();let w=0;c&&(w=y._pe.getPointer(c));c=E.map(h=>y._pe.ensureString(h));E=y._pe.ensureInt32(c);c=y._pe.ensureFloat64(Array(2*l));(q=y._pe._pe_mgrs_to_geog_extended(w,l,E,q,c))&&U(u,l,c);return q}})(y.PeNotationMgrs||(y.PeNotationMgrs={}));y.PeNotationUsng=void 0;(function(d){d.geog_to_usng=function(c,l,E,q,u,w,h){y._pe.ensureCache.prepare();let e=0;c&&(e=y._pe.getPointer(c));c=Y(E);E=y._pe.ensureFloat64(c);c=ba(l,y.PeDefs.PE_MGRS_MAX);const n=y._pe.ensureInt32(c);if(q=
y._pe._pe_geog_to_usng(e,l,E,q,u,w,n))for(u=0;u<l;u++)h[u]=y._pe.UTF8ToString(c[u]);return q};d.usng_to_geog=function(c,l,E,q){y._pe.ensureCache.prepare();var u=0;c&&(u=y._pe.getPointer(c));c=E.map(w=>y._pe.ensureString(w));E=y._pe.ensureInt32(c);c=y._pe.ensureFloat64(Array(2*l));(u=y._pe._pe_usng_to_geog(u,l,E,c))&&U(q,l,c);return u}})(y.PeNotationUsng||(y.PeNotationUsng={}));y.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=y._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=
y._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=y._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geog_to_utm=function(c,l,E,q,u){y._pe.ensureCache.prepare();var w=0;c&&(w=y._pe.getPointer(c));c=Y(E);E=y._pe.ensureFloat64(c);c=ba(l,y.PeDefs.PE_UTM_MAX);const h=y._pe.ensureInt32(c);if(q=y._pe._pe_geog_to_utm(w,l,E,q,h))for(w=0;w<l;w++)u[w]=y._pe.UTF8ToString(c[w]);return q};d.utm_to_geog=function(c,l,E,q,u){y._pe.ensureCache.prepare();let w=0;c&&(w=y._pe.getPointer(c));c=E.map(h=>
y._pe.ensureString(h));E=y._pe.ensureInt32(c);c=y._pe.ensureFloat64(Array(2*l));(q=y._pe._pe_utm_to_geog(w,l,E,q,c))&&U(u,l,c);return q}})(y.PeNotationUtm||(y.PeNotationUtm={}));y.PePCSInfo=void 0;(function(d){const c=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=y._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=y._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=y._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=y._pe.PePCSInfo.prototype.PE_POLE_POINT};
d.generate=function(l,E=d.PE_PCSINFO_OPTION_DOMAIN){let q,u;c.has(l)&&(u=c.get(l),u[E]&&(q=u[E]));q||(q=y._pe.PePCSInfo.prototype.generate(l,E),u||(u=[],c.set(l,u)),u[E]=q);return q}})(y.PePCSInfo||(y.PePCSInfo={}));y.PeVersion=void 0;(function(d){d.version_string=function(){return y._pe.PeVersion.prototype.version_string()}})(y.PeVersion||(y.PeVersion={}));const G=Object.freeze({__proto__:null,get _pe(){return y._pe},isLoaded:P,isSupported:ea,load:na,get PeCSTransformations(){return y.PeCSTransformations},
get PeDefs(){return y.PeDefs},get PeFactory(){return y.PeFactory},get PeGCSExtent(){return y.PeGCSExtent},get PeGTlistExtended(){return y.PeGTlistExtended},get PeGTlistExtendedEntry(){return y.PeGTlistExtendedEntry},get PeGTTransformations(){return y.PeGTTransformations},get PeNotationDms(){return y.PeNotationDms},get PeNotationMgrs(){return y.PeNotationMgrs},get PeNotationUsng(){return y.PeNotationUsng},get PeNotationUtm(){return y.PeNotationUtm},get PePCSInfo(){return y.PePCSInfo},get PeVersion(){return y.PeVersion},
_init:X});y._init=X;y.isLoaded=P;y.isSupported=ea;y.load=na;y.pe=G})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(S,y,aa,T,x){function P(F=U){return[F[0],F[1],F[2],F[3]]}function ea(F,G){F!==G&&(F[0]=G[0],F[1]=G[1],F[2]=G[2],F[3]=G[3]);return F}function na(F){return T.isNone(F)||F[0]>=F[2]?0:F[2]-F[0]}function X(F){return F[1]>=F[3]?0:F[3]-F[1]}function la(F,G,d){return G>=F[0]&&d>=F[1]&&G<=F[2]&&
d<=F[3]}function ba(F){return null!=F&&4===F.length}const Y=[Infinity,Infinity,-Infinity,-Infinity],U=[0,0,0,0];S.NEGATIVE_INFINITY=Y;S.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];S.UNIT=[0,0,1,1];S.ZERO=U;S.allFinite=function(F){for(let G=0;4>G;G++)if(!isFinite(F[G]))return!1;return!0};S.area=function(F){return na(F)*X(F)};S.center=function(F,G=[0,0]){G[0]=(F[0]+F[2])/2;G[1]=(F[1]+F[3])/2;return G};S.clone=function(F){return[F[0],F[1],F[2],F[3]]};S.contains=function(F,G){return G[0]>=
F[0]&&G[2]<=F[2]&&G[1]>=F[1]&&G[3]<=F[3]};S.containsPoint=function(F,G){return la(F,G[0],G[1])};S.containsPointObject=function(F,G){return la(F,G.x,G.y)};S.containsPointWithMargin=function(F,G,d){return G[0]>=F[0]-d&&G[1]>=F[1]-d&&G[0]<=F[2]+d&&G[1]<=F[3]+d};S.containsXY=la;S.copy=ea;S.create=P;S.distance=function(F,G){const d=(F[1]+F[3])/2,c=Math.max(Math.abs(G[0]-(F[0]+F[2])/2)-na(F)/2,0);F=Math.max(Math.abs(G[1]-d)-X(F)/2,0);return Math.sqrt(c*c+F*F)};S.empty=function(F){return F?ea(F,Y):P(Y)};
S.equals=function(F,G){return ba(F)&&ba(G)?F[0]===G[0]&&F[1]===G[1]&&F[2]===G[2]&&F[3]===G[3]:F===G};S.expand=function(F,G,d){if(T.isNone(G))ea(d,F);else if("length"in G)if(ba(G))d[0]=Math.min(F[0],G[0]),d[1]=Math.min(F[1],G[1]),d[2]=Math.max(F[2],G[2]),d[3]=Math.max(F[3],G[3]);else{if(2===G.length||3===G.length)d[0]=Math.min(F[0],G[0]),d[1]=Math.min(F[1],G[1]),d[2]=Math.max(F[2],G[0]),d[3]=Math.max(F[3],G[1])}else switch(G.type){case "extent":d[0]=Math.min(F[0],G.xmin);d[1]=Math.min(F[1],G.ymin);
d[2]=Math.max(F[2],G.xmax);d[3]=Math.max(F[3],G.ymax);break;case "point":d[0]=Math.min(F[0],G.x),d[1]=Math.min(F[1],G.y),d[2]=Math.max(F[2],G.x),d[3]=Math.max(F[3],G.y)}};S.expandPointInPlace=function(F,G){G[0]<F[0]&&(F[0]=G[0]);G[0]>F[2]&&(F[2]=G[0]);G[1]<F[1]&&(F[1]=G[1]);G[1]>F[3]&&(F[3]=G[1])};S.expandWithNestedArray=function(F,G,d=F){const c=G.length;let l=F[0],E=F[1],q=F[2];F=F[3];for(let u=0;u<c;u++){const w=G[u];l=Math.min(l,w[0]);E=Math.min(E,w[1]);q=Math.max(q,w[0]);F=Math.max(F,w[1])}d[0]=
l;d[1]=E;d[2]=q;d[3]=F;return d};S.fromExtent=function(F,G=P()){G[0]=F.xmin;G[1]=F.ymin;G[2]=F.xmax;G[3]=F.ymax;return G};S.fromValues=function(F,G,d,c,l=P()){l[0]=F;l[1]=G;l[2]=d;l[3]=c;return l};S.height=X;S.intersection=function(F,G,d){if(T.isNone(G))return ea(d,F);const c=G[0],l=G[1],E=G[2];G=G[3];d[0]=aa.clamp(F[0],c,E);d[1]=aa.clamp(F[1],l,G);d[2]=aa.clamp(F[2],c,E);d[3]=aa.clamp(F[3],l,G);return d};S.intersects=function(F,G){return Math.max(G[0],F[0])<=Math.min(G[2],F[2])&&Math.max(G[1],F[1])<=
Math.min(G[3],F[3])};S.intersectsSphere=function(F,G){const d=G[3];var c=Math.abs(G[0]-.5*(F[0]+F[2]));const l=.5*(F[2]-F[0]);if(c>d+l)return!1;var E=.5*(F[3]-F[1]);F=Math.abs(G[1]-.5*(F[1]+F[3]));if(F>d+E)return!1;if(c<l||F<E)return!0;c-=l;E=F-E;return c*c+E*E<=d*d};S.is=ba;S.isPoint=function(F){return(0===na(F)||!isFinite(F[0]))&&(0===X(F)||!isFinite(F[1]))};S.offset=function(F,G,d,c=F){c[0]=F[0]+G;c[1]=F[1]+d;c[2]=F[2]+G;c[3]=F[3]+d;return c};S.pad=function(F,G,d=F){d[0]=F[0]-G;d[1]=F[1]-G;d[2]=
F[2]+G;d[3]=F[3]+G;return d};S.setMax=function(F,G,d=F){d[2]=G[0];d[3]=G[1];d!==F&&(d[0]=F[0],d[1]=F[1]);return F};S.setMin=function(F,G,d=F){d[0]=G[0];d[1]=G[1];d!==F&&(d[2]=F[2],d[3]=F[3]);return d};S.size=function(F,G){G[0]=F[2]-F[0];G[1]=F[3]-F[1]};S.toExtent=function(F,G){return new x({xmin:F[0],ymin:F[1],xmax:F[2],ymax:F[3],spatialReference:G})};S.width=na;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],
function(S,y){const aa=Math.PI/180;var T=y.earth.radius;const x=y.earth.eccentricitySquared;T={a1:T*x,a2:T*x*T*x,a3:T*x*x/2,a4:T*x*T*x*2.5,a5:T*x+T*x*x/2,a6:1-x};y={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:y.earth.radius,f:y.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:y.moon.radius,f:y.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:y.mars.radius,f:y.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,
f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,
f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},
104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:y.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};S.WKT_SPHEROID_REGEX=
/SPHEROID\[([^\]]+)]/i;S.earthEllipsoidConstants=T;S.spheroids=y;S.toRadians=aa;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(S,y,aa,T){S.getGeometryZScaler=function(x,P,ea){if(y.isNone(P)||y.isNone(ea)||ea.vcsWkid||T.equals(P,ea))return null;P=aa.getMetersPerVerticalUnitForSR(P);ea=aa.getMetersPerVerticalUnitForSR(ea);const na=P/ea;if(1===na)return null;
switch(x){case "point":case "esriGeometryPoint":return X=>{X&&null!=X.z&&(X.z*=na)};case "polyline":case "esriGeometryPolyline":return X=>{if(X)for(const la of X.paths)for(const ba of la)2<ba.length&&(ba[2]*=na)};case "polygon":case "esriGeometryPolygon":return X=>{if(X)for(const la of X.rings)for(const ba of la)2<ba.length&&(ba[2]*=na)};case "multipoint":case "esriGeometryMultipoint":return X=>{if(X)for(const la of X.points)2<la.length&&(la[2]*=na)};case "extent":case "esriGeometryExtent":return X=>
{X&&null!=X.zmin&&null!=X.zmax&&(X.zmin*=na,X.zmax*=na)};default:return null}};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(S,y,aa,T,x){function P(h,e){return G.get(h)/G.get(e)||1}function ea(h,e="geographic"){const [n,r]=h;h=Math.sqrt(n*n+r*r);let m=Math.atan2(r,n)*d;m=(360+m)%360;"geographic"===e&&(m=(450-m)%360);return[h,
m]}function na(h,e="geographic"){let n=h[1];"geographic"===e&&(n=(450-n)%360);n%=360;h=h[0];return[h*Math.cos(n/d),h*Math.sin(n/d)]}function X(h=0,e=Math.PI,n=!0){n&&(e=(2*Math.PI-e)%(2*Math.PI));var r=n?-1:1;n=5*r;const m=20*r,v=25*r;r*=2;let [C,t]=[5,0-m],[B,p]=[C+2,t],[f,D]=[B-0,p+r],[z,g]=[-5,0-v],[k,A]=[z+0,g-r];h=Math.ceil(h/5);let J=Math.floor(h/10);h-=8*J;const I=[],K=[];for(let H=0;H<h/2;H++,J--){0>=J&&1===h%2&&H===(h-1)/2&&(z=0,k=z+0,g=(g+t)/2,A=g-r);const [M,ca]=la(z,g,e,45);if(0<J){const [ja,
ka]=la(B,g,e,45),[fa,ma]=la(C,t,e,45);I.push(ja);I.push(ka);I.push(M);I.push(ca);I.push(fa);I.push(ma)}else{const [ja,ka]=la(B,p,e,45),[fa,ma]=la(f,D,e,45),[oa,ia]=la(k,A,e,45);K.push(M);K.push(ca);K.push(oa);K.push(ia);K.push(fa);K.push(ma);K.push(ja);K.push(ka)}g+=n;t+=n;p+=n;D+=n;A+=n}const [O,R]=la(5,0+m,e,45),[V,Z]=la(7,0+m,e,45),[Q,da]=la(5,0-v,e,45),[a,b]=la(7,0-v,e,45);return{pennants:I,barbs:K,shaft:[O,R,V,Z,Q,da,a,b]}}function la(h,e,n,r=1){return[Math.sqrt(h*h+e*e)/r,(2*Math.PI+(2*Math.PI+
Math.atan2(e,h))%(2*Math.PI)-n)%(2*Math.PI)]}function ba(h,e,n,r){n=P(r||"knots",n);for(r=1;r<e.length;r++)if(r===e.length-1){if(h<e[r]*n)break}else if(h<=e[r]*n)break;return Math.min(r-1,e.length-2)}function Y(h,e,n,r,m){let v=0;switch(e){case "beaufort_kn":v=ba(h,E,"knots",n);break;case "beaufort_km":v=ba(h,E,"kilometer-per-hour",n);break;case "beaufort_ft":v=ba(h,E,"feet-per-second",n);break;case "beaufort_m":v=ba(h,E,"meter-per-second",n);break;case "classified_arrow":v=ba(h,m,r,n);break;case "ocean_current_m":v=
ba(h,q,"meter-per-second",n);break;case "ocean_current_kn":v=ba(h,u,"knots",n)}return v}function U(h,e){const {style:n,inputUnit:r,outputUnit:m,breakValues:v}=e;e=c.fromJSON(r);const C=c.fromJSON(m);let t=0,B=0;const {width:p,height:f,mask:D}=h,z=h.pixels[0];h=h.pixels[1];var g=D?D.filter(I=>0<I).length:p*f;const k=new Float32Array(42*g);g=new Uint32Array(15*g);for(let I=0;I<f;I++)for(let K=0;K<p;K++){var A=I*p+K;if(!D||D[I*p+K]){var J;const O=null!=(J=(h[A]+360)%360/180*Math.PI)?J:2*Math.PI*Math.random(),
R=Y(z[A],n,e,C,v);for(let V=0;V<l.length;V+=2)k[t++]=(K+.5)/p,k[t++]=(I+.5)/f,k[t++]=l[V],k[t++]=l[V+1]+O,k[t++]=R,k[t++]=z[A];A=7*(t/42-1);g[B++]=A;g[B++]=A+1;g[B++]=A+2;g[B++]=A+0;g[B++]=A+4;g[B++]=A+3;g[B++]=A+0;g[B++]=A+2;g[B++]=A+3;g[B++]=A+2;g[B++]=A+5;g[B++]=A+3;g[B++]=A+5;g[B++]=A+6;g[B++]=A+3}}return{vertexData:k,indexData:g}}function F(h,e){let n=0,r=0;const {width:m,height:v,mask:C}=h;h=h.pixels[0];const t=[],B=[];e="wind_speed"===e.style?5:Number.MAX_VALUE;for(let f=0;f<v;f++)for(let D=
0;D<m;D++){var p=f*m+D;if((!C||C[f*m+D])&&h[p]<e){for(let z=0;4>z;z++)t[n++]=(D+.5)/m,t[n++]=(f+.5)/v,t[n++]=2>z?-.5:.5,t[n++]=0===z%2?-.5:.5,t[n++]=0,t[n++]=h[p];p=4*(n/24-1);B[r++]=p;B[r++]=p+1;B[r++]=p+2;B[r++]=p+1;B[r++]=p+2;B[r++]=p+3}}return{vertexData:new Float32Array(t),indexData:new Uint32Array(B)}}const G=new Map;G.set("meter-per-second",1);G.set("kilometer-per-hour",.277778);G.set("knots",.514444);G.set("feet-per-second",.3048);G.set("mile-per-hour",.44704);const d=180/Math.PI,c=new y.JSONMap({esriMetersPerSecond:"meter-per-second",
esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),l=function(h=0,e=0,n=Math.PI,r=!0){r&&(n=(2*Math.PI-n)%(2*Math.PI));r=r?-1:1;const m=-7*r,v=-2*r,C=-16*r,[t,B]=la(0,e+13*r,n,29),[p,f]=la(h-5.5,e+m,n,29),[D,z]=la(h+5.5,e+m,n,29),[g,k]=la(h-1.5,e+v,n,29),[A,J]=la(h+1.5,e+v,n,29),[I,K]=la(h-1.5,e+C,n,29),[O,R]=la(h+1.5,e+C,n,29);return[t,B,p,f,g,k,A,J,D,z,I,K,O,R]}(0,0,0),E=[0,1,3,6,10,16,21,27,33,40,47,55,63],q=[0,.5,
1,1.5,2],u=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],w=[];S.convertVectorFieldData=function(h,e,n="geographic",r=1){if(!x.isValidPixelBlock(h))return h;const {pixels:m,width:v,height:C}=h;var t=v*C;const B=m[0],p=m[1],f=T.createEmptyBand(h.pixelType,t);t=T.createEmptyBand(h.pixelType,t);let D=0;for(let z=0;z<C;z++)for(let g=0;g<v;g++)"vector-uv"===e?([f[D],t[D]]=ea([B[D],p[D]],n),f[D]*=r):([f[D],t[D]]=na([B[D],p[D]],n),f[D]*=r,t[D]*=r),D++;h=new T({pixelType:h.pixelType,width:h.width,height:h.height,mask:h.mask,
validPixelCount:h.validPixelCount,maskIsAlpha:h.maskIsAlpha,pixels:[f,t]});h.updateStatistics();return h};S.convertVectorFieldUnit=function(h,e,n=1){if(1===n||!x.isValidPixelBlock(h))return h;h=h.clone();const {pixels:r,width:m,height:v}=h,C=r[0],t=r[1];let B=0;for(let p=0;p<v;p++)for(let f=0;f<m;f++)"vector-uv"===e?(C[B]*=n,t[B]*=n):C[B]*=n,B++;h.updateStatistics();return h};S.createVFMesh=function(h,e){if("simple_scalar"===e.style)var n=F(h,e);else if("wind_speed"===e.style){{if(0===w.length)for(var r=
0;30>r;r++)w.push(X(5*r,0));e=c.fromJSON(e.inputUnit);e=P(e,"knots");const {width:t,height:B,mask:p}=h;r=h.pixels[0];h=h.pixels[1];const f=[],D=[];let z=0,g=0;for(let k=0;k<B;k++)for(let A=0;A<t;A++){var m=k*t+A,v=r[m]*e;if((!p||p[k*t+A])&&5<=v){const J=null!=(n=(h[m]+360)%360/180*Math.PI)?n:2*Math.PI*Math.random(),{pennants:I,barbs:K,shaft:O}=w[Math.min(Math.floor(v/5),29)];if(0===I.length+K.length)continue;m=f.length/6;const R=(A+.5)/t,V=(k+.5)/B;for(var C=0;C<I.length;C+=2)f[z++]=R,f[z++]=V,f[z++]=
I[C],f[z++]=I[C+1]+J,f[z++]=0,f[z++]=v;for(C=0;C<K.length;C+=2)f[z++]=R,f[z++]=V,f[z++]=K[C],f[z++]=K[C+1]+J,f[z++]=0,f[z++]=v;for(C=0;C<O.length;C+=2)f[z++]=R,f[z++]=V,f[z++]=O[C],f[z++]=O[C+1]+J,f[z++]=0,f[z++]=v;for(v=0;v<I.length/6;v++)D[g++]=m,D[g++]=m+1,D[g++]=m+2,m+=3;for(v=0;v<K.length/8;v++)D[g++]=m,D[g++]=m+1,D[g++]=m+2,D[g++]=m+1,D[g++]=m+2,D[g++]=m+3,m+=4;D[g++]=m+0;D[g++]=m+1;D[g++]=m+2;D[g++]=m+1;D[g++]=m+3;D[g++]=m+2;m+=4}}n={vertexData:new Float32Array(f),indexData:new Uint32Array(D)}}}else n=
U(h,e);return n};S.createVFMeshScalar=F;S.getUnitConversionFactor=P;S.sampleVectorField=function(h,e,n,r=[0,0],m=.5){const {width:v,height:C,mask:t}=h,[B,p]=h.pixels,[f,D]=r;h=Math.round((v-f)/n);r=Math.round((C-D)/n);var z=h*r;const g=new Float32Array(z),k=new Float32Array(z);z=new Uint8Array(z);e="vector-uv"===e;for(let J=0;J<r;J++)for(let I=0;I<h;I++){let K=0;const O=J*h+I,R=Math.max(0,J*n+D),V=Math.max(0,I*n+f),Z=Math.min(C,R+n),Q=Math.min(v,V+n);for(let da=R;da<Z;da++)for(let a=V;a<Q;a++){var A=
da*v+a;if(!t||t[A]){K++;A=e?[B[A],p[A]]:[B[A],(360+p[A])%360];const [b,H]=e?A:na(A);g[O]+=b;k[O]+=H}}if(K>=(Z-R)*(Q-V)*(1-m)){z[O]=1;const [da,a]=ea([g[O]/K,k[O]/K]);g[O]=da;k[O]=a}else z[O]=0,g[O]=0,k[O]=0}n=new T({width:h,height:r,pixels:[g,k],mask:z});n.updateStatistics();return n};S.snapImageToSymbolTile=function(h,e,n,r,m){if(!aa.isSome(m)||!m.spatialReference.equals(h.spatialReference))return{extent:h,width:e,height:n,resolution:h.width/e};const v=m.xmin;m=m.ymax;r=Math.max(r||0,30);e=((h.xmax-
h.xmin)/Math.ceil(1/r*e)+(h.ymax-h.ymin)/Math.ceil(1/r*n))/2;h.xmin=v+Math.floor((h.xmin-v)/e)*e;h.xmax=v+Math.ceil((h.xmax-v)/e)*e;h.ymin=m+Math.floor((h.ymin-m)/e)*e;h.ymax=m+Math.ceil((h.ymax-m)/e)*e;return{extent:h,width:Math.round(h.width/e),height:Math.round(h.height/e),resolution:e}};S.unitKebabDict=c;S.uvComponentToVector=ea;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./GCSShiftTransform","./IdentityTransform",
"./PolynomialTransform"],function(S,y,aa,T){const x={GCSShiftXform:y,IdentityXform:aa,PolynomialXform:T},P=Object.keys(x);S.isTransformSupported=function(ea){const na=null==ea?void 0:ea.type;return!ea||P.includes(na)};S.readTransform=function(ea){if(null==ea||!ea.type)return null;var na=x[null==ea?void 0:ea.type];return na?(na=new na,na.read(ea),na):null};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(S,y,aa,T,x,P,ea,na,X){T=function(la){function ba(){var U=la.apply(this,arguments)||this;U.type="gcs-shift";U.tolerance=1E-8;return U}S._inheritsLoose(ba,la);var Y=ba.prototype;Y.forwardTransform=function(U){U=U.clone();if("point"===U.type)return U.x>180+this.tolerance&&(U.x-=360),U;U.xmin>=180-this.tolerance?(U.xmax-=360,U.xmin-=360):U.xmax>180+this.tolerance&&(U.xmin=-180,U.xmax=180);return U};Y.inverseTransform=function(U){U=U.clone();if("point"===U.type)return U.x<-this.tolerance&&(U.x+=
360),U;U.xmin<-this.tolerance&&(U.xmin+=360,U.xmax+=360);return U};return ba}(X);y.__decorate([ea.enumeration({GCSShiftXform:"gcs-shift"})],T.prototype,"type",void 0);y.__decorate([aa.property()],T.prototype,"tolerance",void 0);return T=y.__decorate([na.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],T)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(S,y,aa){S.enumeration=function(T,x={}){var P;T=T instanceof
y.JSONMap?T:new y.JSONMap(T,x);T={type:(null!=(P=null==x?void 0:x.ignoreUnknown)?P:1)?T.apiValues:String,readOnly:null==x?void 0:x.readOnly,json:{type:T.jsonValues,read:null!=x&&x.readOnly?!1:{reader:T.read},write:{writer:T.write}}};void 0!==(null==x?void 0:x.default)&&(T.json.default=x.default);void 0!==(null==x?void 0:x.name)&&(T.json.name=x.name);return aa.property(T)};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(S,y,aa,T,x,P,ea,na){aa=function(X){function la(){return X.apply(this,arguments)||this}S._inheritsLoose(la,X);var ba=la.prototype;ba.forwardTransform=function(Y){return Y};ba.inverseTransform=function(Y){return Y};S._createClass(la,[{key:"affectsPixelSize",get:function(){return!1}}]);return la}(aa.JSONSupport);y.__decorate([T.property()],aa.prototype,"affectsPixelSize",null);y.__decorate([T.property({json:{write:!0}})],aa.prototype,"spatialReference",void 0);return aa=y.__decorate([na.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
aa)})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(S,y,aa,T,x,P,ea,na,X,la){aa=function(ba){function Y(){var U=ba.apply(this,
arguments)||this;U.type="identity";return U}S._inheritsLoose(Y,ba);return Y}(la);y.__decorate([na.enumeration({IdentityXform:"identity"})],aa.prototype,"type",void 0);return aa=y.__decorate([X.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],aa)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(S,y,aa,T,x,P,ea,na,X,la,ba,Y,U,F){function G(c,l,E){const {x:q,y:u}=l;if(2>E)return{x:c[0]+q*c[2]+u*c[4],y:c[1]+q*c[3]+u*c[5]};if(2===E){l=q*q;E=u*u;var w=q*u;return{x:c[0]+q*c[2]+u*c[4]+l*c[6]+w*c[8]+E*c[10],y:c[1]+q*c[3]+u*c[5]+l*c[7]+w*c[9]+E*c[11]}}l=q*q;E=u*u;w=q*u;const h=l*q,e=l*u,n=q*E,r=u*E;return{x:c[0]+q*c[2]+u*c[4]+l*c[6]+w*c[8]+E*c[10]+h*c[12]+e*c[14]+n*c[16]+r*c[18],y:c[1]+q*c[3]+u*c[5]+l*c[7]+w*c[9]+E*c[11]+h*c[13]+e*c[15]+n*c[17]+r*c[19]}}function d(c,l,E){const {xmin:q,ymin:u,
xmax:w,ymax:h,spatialReference:e}=l;l=[];if(2>E)l.push({x:q,y:h}),l.push({x:w,y:h}),l.push({x:q,y:u}),l.push({x:w,y:u});else{var n=10;for(var r=0;r<n;r++)l.push({x:q,y:u+(h-u)*r/(n-1)}),l.push({x:w,y:u+(h-u)*r/(n-1)});n=8;for(r=1;r<=n;r++)l.push({x:q+(w-q)*r/n,y:u}),l.push({x:q+(w-q)*r/n,y:h})}l=l.map(m=>G(c,m,E));n=l.map(m=>m.x);l=l.map(m=>m.y);return new F({xmin:Math.min.apply(null,n),xmax:Math.max.apply(null,n),ymin:Math.min.apply(null,l),ymax:Math.max.apply(null,l),spatialReference:e})}aa=function(c){function l(){var q=
c.apply(this,arguments)||this;q.polynomialOrder=1;q.type="polynomial";return q}S._inheritsLoose(l,c);var E=l.prototype;E.readForwardCoefficients=function(q,u){const {coeffX:w,coeffY:h}=u;if(null==w||!w.length||null==h||!h.length||w.length!==h.length)return null;q=[];for(u=0;u<w.length;u++)q.push(w[u]),q.push(h[u]);return q};E.writeForwardCoefficients=function(q,u,w){w=[];const h=[];for(let e=0;e<(null==q?void 0:q.length);e++)0===e%2?w.push(q[e]):h.push(q[e]);u.coeffX=w;u.coeffY=h};E.readInverseCoefficients=
function(q,u){const {inverseCoeffX:w,inverseCoeffY:h}=u;if(null==w||!w.length||null==h||!h.length||w.length!==h.length)return null;q=[];for(u=0;u<w.length;u++)q.push(w[u]),q.push(h[u]);return q};E.writeInverseCoefficients=function(q,u,w){w=[];const h=[];for(let e=0;e<(null==q?void 0:q.length);e++)0===e%2?w.push(q[e]):h.push(q[e]);u.inverseCoeffX=w;u.inverseCoeffY=h};E.forwardTransform=function(q){if("point"===q.type){const u=G(this.forwardCoefficients,q,this.polynomialOrder);return new U({x:u.x,y:u.y,
spatialReference:q.spatialReference})}return d(this.forwardCoefficients,q,this.polynomialOrder)};E.inverseTransform=function(q){if("point"===q.type){const u=G(this.inverseCoefficients,q,this.polynomialOrder);return new U({x:u.x,y:u.y,spatialReference:q.spatialReference})}return d(this.inverseCoefficients,q,this.polynomialOrder)};S._createClass(l,[{key:"inverseCoefficients",get:function(){var q=this._get("inverseCoefficients"),u=this._get("forwardCoefficients");if(!q&&u&&2>this.polynomialOrder){{const [w,
h,e,n,r,m]=u;q=e*m-r*n;u=r*n-e*m;q=[(r*h-w*m)/q,(e*h-w*n)/u,m/q,n/u,-r/q,-e/u]}}return q},set:function(q){this._set("inverseCoefficients",q)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return l}(Y);y.__decorate([T.property({json:{write:!0}})],aa.prototype,"polynomialOrder",void 0);y.__decorate([T.property()],aa.prototype,"forwardCoefficients",void 0);y.__decorate([X.reader("forwardCoefficients",["coeffX","coeffY"])],aa.prototype,"readForwardCoefficients",null);y.__decorate([ba.writer("forwardCoefficients")],
aa.prototype,"writeForwardCoefficients",null);y.__decorate([T.property({json:{write:!0}})],aa.prototype,"inverseCoefficients",null);y.__decorate([X.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],aa.prototype,"readInverseCoefficients",null);y.__decorate([ba.writer("inverseCoefficients")],aa.prototype,"writeInverseCoefficients",null);y.__decorate([T.property()],aa.prototype,"affectsPixelSize",null);y.__decorate([na.enumeration({PolynomialXform:"polynomial"})],aa.prototype,"type",void 0);
return aa=y.__decorate([la.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],aa)})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(S,y,aa,T,x,P,ea,na,X,la,ba,Y,U,F,G){function d(u,w){const {attributeTable:h,bandCount:e}=u;return!P.isSome(h)||1<e||w&&null==h.fields.find(n=>n.name.toLowerCase()===w.toLowerCase())?!1:!0}function c(u){const {bandCount:w,colormap:h}=u;return P.isSome(h)&&h.length&&1===w}function l(u){return U.isValidPixelBlock(u)&&0!==u.validPixelCount}const E=x.getLogger("esri.renderers.support.RasterSymbolizer"),q={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,
4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};T=function(u){function w(e){return u.call(this,e)||this}S._inheritsLoose(w,u);var h=w.prototype;h.bind=function(){const {rendererJSON:e}=this;if(!e)return{success:!1};this.lookup={rendererJSON:{}};let n;switch(e.type){case "uniqueValue":n={success:this._updateUVRenderer(e)};break;case "rasterColormap":n={success:this._updateColormapRenderer(e)};break;case "rasterStretch":n={success:this._updateStretchRenderer(e)};
break;case "classBreaks":n={success:this._updateClassBreaksRenderer(e)};break;case "rasterShadedRelief":n={success:this._updateShadedReliefRenderer(e)};break;case "vectorField":n={success:this._updateVectorFieldRenderer()};break;case "animatedFlow":n=this._updateAnimatedFlowRenderer()}return n};h.symbolize=function(e){let n=e&&e.pixelBlock;if(!l(n))return n;if(e.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(n,e.simpleStretchParams);try{3<n.pixels.length&&
(n=U.extractBands(n,[0,1,2]));let r;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":r=this._symbolize_colormap(n);break;case "classBreaks":r=this._symbolize_classBreaks(n);break;case "rasterStretch":r=this._symbolize_stretch(n,e.bandIds);break;case "rasterShadedRelief":({extent:e}=e),r=this._symbolize_shadedRelief(n,{isGCS:e.spatialReference.isGeographic,resolution:{x:(e.xmax-e.xmin)/n.width,y:(e.ymax-e.ymin)/n.height}})}return r}catch(r){return E.error("symbolize",r.message),
n}};h.simpleStretch=function(e,n){if(!l(e))return e;try{return 3<e.pixels.length&&(e=U.extractBands(e,[0,1,2])),U.stretch(e,n)}catch(r){return E.error("symbolize",r.message),e}};h.generateWebGLParameters=function(e){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var n;const {indexedColormap:t,offset:B}=(null==(n=this.lookup)?void 0:n.colormapLut)||{};return{colormap:t,colormapOffset:B,type:"lut"}}const {pixelBlock:r,isGCS:m,resolution:v,bandIds:C}=e;({rendererJSON:e}=
this);return"rasterStretch"===e.type?this.generateStretchWebGLParams(r,e,C):"rasterShadedRelief"===e.type?this.generateShadedReliefWebGLParams(e,m,v):"vectorField"===e.type?this._generateVectorFieldWebGLParams(e):null};h._isLUTChanged=function(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const n=this.rendererJSON.colorRamp;if(e)return JSON.stringify(n)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==
JSON.stringify(this.lookup.rendererJSON)};h._symbolize_colormap=function(e){return this._isLUTChanged()&&!this.bind().success?e:U.colorize(e,this.lookup.colormapLut)};h._symbolize_classBreaks=function(e){const n=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind().success?e:n?U.colorize(e,this.lookup.colormapLut):U.remapColor(e,this.lookup.remapLut)};h._symbolize_stretch=function(e,n){const {pixelType:r,bandCount:m}=this.rasterInfo,v=this.rendererJSON,
C=-1<["u8","u16","s8","s16"].indexOf(r);let t;var {dra:B}=v;var p=v.useGamma?v.gamma:null;if("histogramEqualization"===v.stretchType){var f=B?null:this.lookup.histogramLut;n=this.getStretchCutoff(v,e,n,!f);p=U.stretch(e,{...n,gamma:p});p=U.lookupPixels(p,{lut:B?n.histogramLut:f,offset:0})}else if(C){var D;if(B)B=this.getStretchCutoff(v,e,n),t=U.createStretchLUT({pixelType:r,...B,gamma:p});else{if(this._isLUTChanged()&&!this.bind().success)return e;t=this.lookup?this.lookup.stretchLut:null}if(!t)return e;
1<m&&(null==n?void 0:n.length)===(null==(f=P.unwrap(e))?void 0:f.pixels.length)&&(null==(D=t)?void 0:D.lut.length)===m&&(t={lut:n.map(z=>t.lut[z]),offset:t.offset});p=U.lookupPixels(e,t)}else B=this.getStretchCutoff(v,e,n),p=U.stretch(e,{...B,gamma:p});if(v.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;p=U.colorize(p,this.lookup.colormapLut)}return p};h._symbolize_shadedRelief=function(e,n){var r,m,v=this.rendererJSON;n=F.hillshade(e,{...v,...n});if(!v.colorRamp||this._isLUTChanged(!0)&&
!this.bind().success)return n;v=this.lookup?this.lookup.hsvMap:null;if(!v)return n;const C=null!=(r=null==(m=P.unwrap(this.rasterInfo.statistics))?void 0:m[0])?r:{min:0,max:8E3};F.tintHillshade(n,e,v,C);return n};h._updateVectorFieldRenderer=function(){const {bandCount:e,dataType:n}=this.rasterInfo;return 2===e&&("vector-magdir"===n||"vector-uv"===n)};h._updateAnimatedFlowRenderer=function(){const {bandCount:e,dataType:n}=this.rasterInfo;return 2!==e||"vector-magdir"!==n&&"vector-uv"!==n?{success:!1,
error:`Unsupported data type "${n}"; AnimatedFlowRenderer only supports "vector-magdir" and "vector-uv".`}:{success:!0}};h._updateUVRenderer=function(e){const {bandCount:n,attributeTable:r,pixelType:m}=this.rasterInfo,v=e.field1;if(!v)return!1;const C=e.defaultSymbol;var t=1===n&&["u8","s8"].includes(m);if(!d(this.rasterInfo,v)&&!t)return!1;const B=[];if(r){const p=r.fields.filter(f=>"value"===f.name.toLowerCase())[0];if(!p)return!1;r.features.forEach(f=>{var D,z=e.uniqueValueInfos.filter(g=>String(g.value)===
String(f.attributes[v]))[0];(z=null==z?void 0:null==(D=z.symbol)?void 0:D.color)?B.push([f.attributes[p.name]].concat(z)):C&&B.push([f.attributes[p.name]].concat(C.color))})}else{if("value"!==v.toLowerCase())return!1;e.uniqueValueInfos.forEach(p=>{var f;const D=null==p?void 0:null==(f=p.symbol)?void 0:f.color;D?B.push([parseInt(""+p.value,10)].concat(D)):C&&B.push([parseInt(""+p.value,10)].concat(C.color))})}if(0===B.length)return!1;t=U.createColormapLUT({colormap:B});this.lookup={rendererJSON:e,
colormapLut:t};return this.canRenderInWebGL=!0};h._updateColormapRenderer=function(e){if(!c(this.rasterInfo))return!1;var n=e.colormapInfos.map(r=>[r.value].concat(r.color)).sort((r,m)=>r[0]-m[0]);if(!n||0===n.length)return!1;n=U.createColormapLUT({colormap:n});this.lookup={rendererJSON:e,colormapLut:n};return this.canRenderInWebGL=!0};h._updateShadedReliefRenderer=function(e){if("elevation"!==this.rasterInfo.dataType)return!1;if(e.colorRamp){var n=G.convertColorRampToColormap(e.colorRamp,256,!0);
n=U.createColormapLUT({colormap:n});const r=[],m=n.indexedColormap;for(let v=0;v<m.length;v+=4){const C=aa.toHSV({r:m[v],g:m[v+1],b:m[v+2]});r.push([C.h/60,C.s/100,255*C.v/100])}this.lookup={rendererJSON:e,colormapLut:n,hsvMap:r}}else this.lookup=null;return this.canRenderInWebGL=!0};h._updateClassBreaksRenderer=function(e){var n=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),r=e.classBreakInfos;if(null==r||!r.length)return!1;r=r.sort((B,p)=>B.classMaxValue-p.classMaxValue);const m=
r[r.length-1];var v=e.minValue;if(!n){n=[];for(var C=0;C<r.length;C++){var t;n.push({value:null!=(t=r[C].classMinValue)?t:v,mappedColor:r[C].symbol.color});v=r[C].classMaxValue}n.push({value:m.classMaxValue,mappedColor:m.symbol.color});this.lookup={rendererJSON:e,remapLut:n};this.canRenderInWebGL=!1;return!0}t=[];v=Math.floor(e.minValue);for(n=0;n<r.length;n++){for(C=r[n];v<C.classMaxValue;v++)t.push([v].concat(C.symbol.color));v=Math.ceil(C.classMaxValue)}m.classMaxValue===v&&t.push([m.classMaxValue].concat(m.symbol.color));
r=U.createColormapLUT({colormap:t,fillUnspecified:!1});this.lookup={rendererJSON:e,colormapLut:r};return this.canRenderInWebGL=!0};h._isHistogramRequired=function(e){return"percentClip"===e||"histogramEqualization"===e};h._isValidRasterStatistics=function(e){return P.isSome(e)&&0<e.length&&null!=e[0].min&&null!=e[0].max};h._updateStretchRenderer=function(e){var n;let {stretchType:r,dra:m}=e;if(!("none"===r||null!=(n=e.statistics)&&n.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
m))return!1;var v=P.unwrap(e.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(e.stretchType)||null!=v&&v.length||m||(r="minMax");const {gamma:C,useGamma:t,colorRamp:B}=e;n=this.rasterInfo.pixelType;const p=!m&&-1<["u8","u16","s8","s16"].indexOf(n);"histogramEqualization"===r?(n=v.map(f=>U.createHistogramEqualizationLUT(f)),this.lookup={rendererJSON:e,histogramLut:n}):p&&(v=this.getStretchCutoff(e),n=U.createStretchLUT({pixelType:n,...v,gamma:t?C:null}),this.lookup={rendererJSON:e,
stretchLut:n});B&&(n=G.convertColorRampToColormap(B,256,!0),this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=U.createColormapLUT({colormap:n}),this.lookup.rendererJSON=e);return this.canRenderInWebGL=!0};h.getStretchCutoff=function(e,n=null,r,m){var v,C,t,B=e.stretchType;if(e.dra)if("minMax"===B&&P.isSome(n)&&n.statistics)n=n.statistics.map(I=>[I.minValue,I.maxValue,0,0]);else{var p=U.estimateStatisticsHistograms(n);n=P.isSome(p)?p.statistics:null;p=P.isSome(p)?p.histograms:null}else{var f;
n=0<(null==(f=e.statistics)?void 0:f.length)?e.statistics:P.unwrap(this.rasterInfo.statistics);p=e.histograms||P.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(B)||null!=(v=p)&&v.length||(B="minMax");f=(null==(C=n)?void 0:C.length)||(null==(t=p)?void 0:t.length)||this.rasterInfo.bandCount;C=[];t=[];let D;let z,g,k;n&&!Array.isArray(n[0])&&(n=n.map(I=>[I.min,I.max,I.avg,I.stddev]));switch(B){case "none":n=q[this.rasterInfo.pixelType]||q.f32;for(v=0;v<f;v++)C[v]=n[0],t[v]=n[1];break;
case "minMax":for(v=0;v<f;v++)C[v]=n[v][0],t[v]=n[v][1];break;case "standardDeviation":for(v=0;v<f;v++)C[v]=n[v][2]-e.numberOfStandardDeviations*n[v][3],t[v]=n[v][2]+e.numberOfStandardDeviations*n[v][3],C[v]<n[v][0]&&(C[v]=n[v][0]),t[v]>n[v][1]&&(t[v]=n[v][1]);break;case "histogramEqualization":for(v=0;v<f;v++)C[v]=p[v].min,t[v]=p[v].max;break;case "percentClip":for(v=0;v<p.length;v++){n=p[v];z=new Uint32Array(n.size);var A=n.counts;D=0;f=(n.max-n.min)/n.size;g=-.5===n.min&&1===f?.5:0;for(k=0;k<n.size;k++)D+=
A[k],z[k]=D;A=(e.minPercent||0)*D/100;for(k=0;k<n.size;k++)if(z[k]>A){C[v]=n.min+f*(k+g);break}A=(1-(e.maxPercent||0)/100)*D;for(k=n.size-2;0<=k;k--)if(z[k]<A){t[v]=n.min+f*(k+2-g);break}}break;default:for(v=0;v<f;v++)C[v]=n[v][0],t[v]=n[v][1]}let J;"histogramEqualization"===B?(B=p[0].size||256,e=0,m&&(J=p.map(I=>U.createHistogramEqualizationLUT(I)))):(B=e.max||255,e=e.min||0);return this.getSelectedBandCutoffs({minCutOff:C,maxCutOff:t,outMax:B,outMin:e,histogramLut:J},r)};h.getSelectedBandCutoffs=
function(e,n){if(null==n||0===n.length)return e;const r=Math.max.apply(null,n),{minCutOff:m,maxCutOff:v,outMin:C,outMax:t,histogramLut:B}=e;return m.length===n.length||m.length<=r?e:{minCutOff:n.map(p=>m[p]),maxCutOff:n.map(p=>v[p]),histogramLut:B?n.map(p=>B[p]):null,outMin:C,outMax:t}};h.generateStretchWebGLParams=function(e,n,r){let m=null,v=null;var C=this.lookup&&this.lookup.colormapLut;n.colorRamp&&C&&(m=C.indexedColormap,v=C.offset);"histogramEqualization"===n.stretchType&&(n={...n,stretchType:"minMax"});
({gamma:C}=n);const t=!!(n.useGamma&&C&&C.some(A=>1!==A)),{minCutOff:B,maxCutOff:p,outMin:f,outMax:D}=this.getStretchCutoff(n,e,r);var z=0;P.isSome(e)&&(z=e.getPlaneCount(),2===z&&(e=e.clone(),e.statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));e=Math.min(3,(null==r?void 0:r.length)||z||this.rasterInfo.bandCount);r=new Float32Array(e);z=m||t?1:255;let g;for(g=0;g<e;g++)r[g]=(D-f)/(p[g]-B[g])/z;const k=new Float32Array(e);if(t)for(g=0;g<e;g++)k[g]=1<C[g]?2<C[g]?6.5+(C[g]-2)**2.5:6.5+100*(2-C[g])**
4:1;return{bandCount:e,outMin:f/z,outMax:D/z,minCutOff:B,maxCutOff:p,factor:r,useGamma:t,gamma:t?C:[1,1,1],gammaCorrection:t?k:[1,1,1],colormap:m,colormapOffset:v,stretchType:n.stretchType,type:"stretch"}};h.generateShadedReliefWebGLParams=function(e,n,r){var m,v,C;let t=null,B=null;const p=this.lookup&&this.lookup.colormapLut;e.colorRamp&&p&&(t=p.indexedColormap,B=p.offset);n=F.calculateHillshadeParams({...e,isGCS:n,resolution:r});r=null==(m=P.unwrap(this.rasterInfo.statistics))?void 0:m[0];return{...n,
minValue:null!=(v=null==r?void 0:r.min)?v:0,maxValue:null!=(C=null==r?void 0:r.max)?C:8E3,hillshadeType:"traditional"===e.hillshadeType?0:1,type:"hillshade",colormap:t,colormapOffset:B}};h._generateVectorFieldWebGLParams=function(e){var n,r,m,v,C,t;const {style:B,inputUnit:p,outputUnit:f,visualVariables:D,symbolTileSize:z,flowRepresentation:g}=e;let k;var A=null!=(n=null==D?void 0:D.find(J=>"sizeInfo"===J.type))?n:{type:"sizeInfo",field:"Magnitude",maxDataValue:null==(r=this.rasterInfo.statistics)?
void 0:r[0].max,maxSize:.8*z,minDataValue:null==(m=this.rasterInfo.statistics)?void 0:m[0].min,minSize:.2*z};n=A?A.minDataValue:null==(v=this.rasterInfo.statistics)?void 0:v[0].min;r=A?A.maxDataValue:null==(C=this.rasterInfo.statistics)?void 0:C[0].max;C=P.isSome(A.maxSize)&&P.isSome(A.minSize)?[A.minSize/z,A.maxSize/z]:[.2,.8];if("wind_speed"===B||"simple_scalar"===B)C[0]=C[1]=(C[0]+C[1])/2;v=P.isSome(n)&&P.isSome(r)?[n,r]:null;if("classified_arrow"===B)if(P.isSome(n)&&P.isSome(r)&&P.isSome(A))for(k=
[],n=(A.maxDataValue-A.minDataValue)/5,r=0;6>r;r++)k.push(A.minDataValue+n*r);else k=[0,1E-6,3.5,7,10.5,14];A="flow_to"===g===("ocean_current_kn"===B||"ocean_current_m"===B)?0:Math.PI;n=null==D?void 0:D.find(J=>"rotationInfo"===J.type);e=(null==(t=this.rasterInfo.storageInfo)?0:t.tileInfo)&&"vector-uv"===this.rasterInfo.dataType?"geographic":(null==n?void 0:n.rotationType)||e.rotationType;return{breakValues:k,dataRange:v,inputUnit:p,outputUnit:f,symbolTileSize:z,symbolPercentRange:C,style:B||"single_arrow",
rotation:A,rotationType:e,type:"vectorField"}};return w}(T.JSONSupport);y.__decorate([ea.property({json:{write:!0}})],T.prototype,"rendererJSON",void 0);y.__decorate([ea.property({type:Y,json:{write:!0}})],T.prototype,"rasterInfo",void 0);y.__decorate([ea.property({json:{write:!0}})],T.prototype,"lookup",void 0);y.__decorate([ea.property()],T.prototype,"canRenderInWebGL",void 0);return T=y.__decorate([ba.subclass("esri.renderers.support.RasterSymbolizer")],T)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(S,y,aa,T,x,P,ea,na,X,la,ba,Y){aa=function(U){function F(G){G=U.call(this,G)||this;G.attributeTable=null;G.bandCount=null;G.colormap=null;G.extent=null;G.format=void 0;G.height=null;G.width=null;G.histograms=null;G.keyProperties={};G.multidimensionalInfo=null;G.noDataValue=null;G.pixelSize=null;G.pixelType=null;G.isPseudoSpatialReference=!1;G.spatialReference=null;G.statistics=null;G.storageInfo=null;G.transform=null;return G}S._inheritsLoose(F,U);S._createClass(F,[{key:"dataType",get:function(){var G,
d,c;const l=null!=(G=null==(d=this.keyProperties)?void 0:null==(c=d.DataType)?void 0:c.toLowerCase())?G:"generic";return"stdtime"===l?"standard-time":l}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(G){G&&this._set("nativeExtent",G)}},{key:"nativePixelSize",get:function(){if(!T.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const G=this.nativeExtent;return{x:G.width/this.width,y:G.height/this.height}}}]);return F}(aa.JSONSupport);
y.__decorate([x.property({json:{write:!0}})],aa.prototype,"attributeTable",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"bandCount",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"colormap",void 0);y.__decorate([x.property({type:String,readOnly:!0})],aa.prototype,"dataType",null);y.__decorate([x.property({type:la,json:{write:!0}})],aa.prototype,"extent",void 0);y.__decorate([x.property({type:la,json:{write:!0}})],aa.prototype,"nativeExtent",null);y.__decorate([x.property({json:{write:!0}})],
aa.prototype,"nativePixelSize",null);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"format",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"height",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"width",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"histograms",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"keyProperties",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"multidimensionalInfo",
void 0);y.__decorate([x.property()],aa.prototype,"noDataValue",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"pixelSize",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"pixelType",void 0);y.__decorate([x.property()],aa.prototype,"isPseudoSpatialReference",void 0);y.__decorate([x.property({type:ba,json:{write:!0}})],aa.prototype,"spatialReference",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"statistics",void 0);y.__decorate([x.property({type:Y,
json:{write:!0}})],aa.prototype,"storageInfo",void 0);y.__decorate([x.property({json:{write:!0}})],aa.prototype,"transform",void 0);return aa=y.__decorate([X.subclass("esri.layers.support.RasterInfo")],aa)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(S,y,aa,T,x,P,ea,na,X){aa=function(la){function ba(){var Y=la.apply(this,arguments)||this;Y.blockWidth=void 0;Y.blockHeight=void 0;Y.compression=null;Y.origin=null;Y.firstPyramidLevel=null;Y.maximumPyramidLevel=null;Y.pyramidScalingFactor=2;Y.pyramidBlockWidth=null;Y.pyramidBlockHeight=null;Y.isVirtualTileInfo=!1;Y.tileInfo=null;Y.blockBoundary=null;return Y}S._inheritsLoose(ba,la);return ba}(aa.JSONSupport);y.__decorate([T.property({type:Number,json:{write:!0}})],aa.prototype,"blockWidth",
void 0);y.__decorate([T.property({type:Number,json:{write:!0}})],aa.prototype,"blockHeight",void 0);y.__decorate([T.property({type:String,json:{write:!0}})],aa.prototype,"compression",void 0);y.__decorate([T.property({type:X,json:{write:!0}})],aa.prototype,"origin",void 0);y.__decorate([T.property({type:Number,json:{write:!0}})],aa.prototype,"firstPyramidLevel",void 0);y.__decorate([T.property({type:Number,json:{write:!0}})],aa.prototype,"maximumPyramidLevel",void 0);y.__decorate([T.property({json:{write:!0}})],
aa.prototype,"pyramidResolutions",void 0);y.__decorate([T.property({type:Number,json:{write:!0}})],aa.prototype,"pyramidScalingFactor",void 0);y.__decorate([T.property({type:Number,json:{write:!0}})],aa.prototype,"pyramidBlockWidth",void 0);y.__decorate([T.property({type:Number,json:{write:!0}})],aa.prototype,"pyramidBlockHeight",void 0);y.__decorate([T.property({type:Boolean,json:{write:!0}})],aa.prototype,"isVirtualTileInfo",void 0);y.__decorate([T.property({json:{write:!0}})],aa.prototype,"tileInfo",
void 0);y.__decorate([T.property()],aa.prototype,"blockBoundary",void 0);return aa=y.__decorate([na.subclass("esri.layers.support.RasterStorageInfo")],aa)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(S,y,aa){function T(x){let {altitude:P,azimuth:ea}=x;const {hillshadeType:na,pixelSizePower:X,pixelSizeFactor:la,scalingType:ba,isGCS:Y,resolution:U}=x;var F="multi-directional"===na?2*x.zFactor:x.zFactor;const {x:G,y:d}=U;
x=F/(8*G);var c=F/(8*d);Y&&.001<F&&(x/=111E3,c/=111E3);"adjusted"===ba&&(Y?(x=111E3*G,c=111E3*d,x=(F+x**X*la)/(8*x),c=(F+c**X*la)/(8*c)):(x=(F+G**X*la)/(8*G),c=(F+d**X*la)/(8*d)));var l=(90-P)*Math.PI/180;F=Math.cos(l);let E=(360-ea+90)*Math.PI/180,q=Math.sin(l)*Math.cos(E);l=Math.sin(l)*Math.sin(E);const u=[315,270,225,360,180,0],w=[60,60,60,60,60,90];var h=new Float32Array([3,5,3,2,1,4]);const e=h.reduce((C,t)=>C+t);h=h.map(C=>C/e);const n="multi-directional"===na?u.length:1,r=new Float32Array(6),
m=new Float32Array(6),v=new Float32Array(6);if("multi-directional"===na)for(let C=0;C<n;C++)P=w[C],ea=u[C],l=(90-P)*Math.PI/180,F=Math.cos(l),E=(360-ea+90)*Math.PI/180,q=Math.sin(l)*Math.cos(E),l=Math.sin(l)*Math.sin(E),r[C]=F,m[C]=q,v[C]=l;else r.fill(F),m.fill(q),v.fill(l);return{resolution:U,factor:[x,c],sinZcosA:q,sinZsinA:l,cosZ:F,sinZcosAs:m,sinZsinAs:v,cosZs:r,weights:h,hillshadeType:["traditional","multi-directional"].indexOf(na)}}S.calculateHillshadeParams=T;S.hillshade=function(x,P){if(!aa.isValidPixelBlock(x))return x;
const {width:ea,height:na,mask:X}=x,la=new Uint8Array(ea*na);X&&la.set(X);const {factor:ba,sinZcosA:Y,sinZsinA:U,cosZ:F,sinZcosAs:G,sinZsinAs:d,cosZs:c,weights:l}=T(P),[E,q]=ba;var {hillshadeType:u}=P;const w=x.pixels[0];P=new Uint8Array(ea*na);let h;for(let B=1;B<na-1;B++){const p=B*ea;for(let f=1;f<ea-1;f++)if(X&&!X[p+f])P[p+f]=0;else{var e=8;if(X&&(e=X[p-ea+f-1]+X[p-ea+f]+X[p-ea+f+1]+X[p+f-1]+X[p+f+1]+X[p+ea+f-1]+X[p+ea+f]+X[p+ea+f+1],7>e)){P[p+f]=0;la[p+f]=0;continue}if(7===e){var n=X[p-ea+f-
1]?w[p-ea+f-1]:w[p+f];var r=X[p-ea+f]?w[p-ea+f]:w[p+f];var m=X[p-ea+f+1]?w[p-ea+f+1]:w[p+f];e=X[p+f-1]?w[p+f-1]:w[p+f];h=X[p+f+1]?w[p+f+1]:w[p+f];var v=X[p+ea+f-1]?w[p+ea+f-1]:w[p+f];var C=X[p+ea+f]?w[p+ea+f]:w[p+f];var t=X[p+ea+f+1]?w[p+ea+f+1]:w[p+f]}else n=w[p-ea+f-1],r=w[p-ea+f],m=w[p-ea+f+1],e=w[p+f-1],h=w[p+f+1],v=w[p+ea+f-1],C=w[p+ea+f],t=w[p+ea+f+1];e=(m+h+h+t-(n+e+e+v))*E;n=(v+C+C+t-(n+r+r+m))*q;r=Math.sqrt(1+e*e+n*n);m=0;if("traditional"===u)e=255*(F+U*n-Y*e)/r,0>e&&(e=0),m=e;else for(v=
d.length,C=0;C<v;C++)t=255*(c[C]+d[C]*n-G[C]*e)/r,0>t&&(t=0),m+=t*l[C];P[p+f]=m&255}}for(u=0;u<na;u++)P[u*ea]=P[u*ea+1],P[(u+1)*ea-1]=P[(u+1)*ea-2];for(u=1;u<ea-1;u++)P[u]=P[u+ea],P[u+(na-1)*ea]=P[u+(na-2)*ea];return new y({width:ea,height:na,pixels:[P],mask:X?la:null,pixelType:"u8",validPixelCount:x.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};S.tintHillshade=function(x,P,ea,na){if(aa.isValidPixelBlock(x)&&aa.isValidPixelBlock(P)){var {min:X,max:la}=na;na=x.pixels[0];var {pixels:ba,
mask:Y}=P;P=ba[0];var U=255.00001/(la-X),F=new Uint8ClampedArray(P.length),G=new Uint8ClampedArray(P.length),d=new Uint8ClampedArray(P.length),c=ea.length-1;for(let q=0;q<P.length;q++){if(Y&&0===Y[q])continue;var l=Math.floor((P[q]-X)*U);const [u,w]=ea[0>l?0:l>c?c:l];var E=na[q];l=E*w;const h=l*(1-Math.abs(u%2-1));E-=l;switch(Math.floor(u)){case 0:F[q]=l+E;G[q]=h+E;d[q]=E;break;case 1:F[q]=h+E;G[q]=l+E;d[q]=E;break;case 2:F[q]=E;G[q]=l+E;d[q]=h+E;break;case 3:F[q]=E;G[q]=h+E;d[q]=l+E;break;case 4:F[q]=
h+E;G[q]=E;d[q]=l+E;break;case 5:case 6:F[q]=l+E,G[q]=E,d[q]=h+E}}x.pixels=[F,G,d];x.updateStatistics()}};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(S,y,aa){function T(na,X){if(!na||!X||na.length!==X.length)return!1;for(let la=0;la<na.length;la++)if(na[la]>X[la]+2||na[la]<X[la]-2)return!1;return!0}function x(na,X){if(na){X=X?X:P;var la=null,ba;"algorithmic"===na.type?X.some(Y=>
{if(T(na.fromColor.toRgb(),Y.fromColor)&&T(na.toColor.toRgb(),Y.toColor))return la=Y.id,!0}):"multipart"===na.type&&X.some(Y=>{if(na.colorRamps&&Y.colorRamps&&na.colorRamps.length===Y.colorRamps.length&&(ba=na.colorRamps,!Y.colorRamps.some((U,F)=>{if(!T(ba[F].fromColor.toRgb(),(new y(U.fromColor)).toRgb())||!T(ba[F].toColor.toRgb(),(new y(U.toColor)).toRgb()))return!0}))){if(la)return!0;la=Y.id}});return la}}const P=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,
45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},
{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,
0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,
179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,
96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,
16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",
type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,
0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,
0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,
245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,
0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,
153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,
0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,
255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],ea={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",
blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",
cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",
partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",
purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",
redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",
yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};S.PREDEFINED_COLOR_RAMP_NAME_MAP=ea;S.PREDEFINED_JSON_COLOR_RAMPS=P;S.convertColorRampToColormap=function(na,X,la=!1){if(na&&X&&!(1>X)){var ba="toJSON"in na?na.toJSON():na,Y="multipart"===ba.type?ba.colorRamps.length:1;na=[];var U=[],F,G,d,c=0;if(1===X){var l="multipart"===ba.type?ba.colorRamps[0].fromColor:ba.fromColor;U.push([0].concat(l));return U}for(let q=0;q<Y;q++)na[q]={start:null,
end:null},na[q].start=c,na[q].end=c+1/Y,c=na[q].end;for(let q=0;q<X;q++){var E=q/(X-1);na.forEach((u,w)=>{if(E>=u.start&&(E<u.end||q===X-1&&w===Y-1)){d=(E-u.start)/(u.end-u.start);"multipart"===ba.type?(l=ba.colorRamps[w].fromColor,F=ba.colorRamps[w].toColor):(l=ba.fromColor,F=ba.toColor);if(0===q)U.push([q].concat(l.slice(0,3)));else if(q===X-1)U.push([q].concat(F.slice(0,3)));else{var h={r:F[0],g:F[1],b:F[2]};u=d;w=aa.toLAB({r:l[0],g:l[1],b:l[2]});h=aa.toLAB(h);G=aa.toRGB({l:w.l*(1-u)+u*h.l,a:w.a*
(1-u)+u*h.a,b:w.b*(1-u)+u*h.b});U.push([q,G.r,G.g,G.b])}u=null!=l[3]?1<l[3]?l[3]/255:l[3]:1;w=null!=F[3]?1<F[3]?F[3]/255:F[3]:1;la&&U[q].push(Math.min(255,Math.round(255*(u*(1-d)+w*d))))}})}return U}};S.getColorRampId=x;S.getColorRampName=function(na){return(na=x(na))?ea[na]:null};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(S,y,aa,T,x,P,ea,na,X,la){function ba(){ba=y._asyncToGenerator(function*(h,e,n){const r=performance.now();var m=Y(h,e);const v=performance.now();m=F(h,m,e.width,e.height);e=performance.now();var C=d(m,!0);m=performance.now();C=c(C);const t=performance.now();h.profile&&w.info("createStreamlinesMesh profile",{"_createFlowFieldFromData()":Math.round(v-r),"_getStreamlines()":Math.round(e-v),"createAnimatedLinesData()":Math.round(m-e),"createLinesMesh()":Math.round(t-m),"Total elapsed time":Math.round(t-
r)});yield Promise.resolve();ea.throwIfAborted(n);return C});return ba.apply(this,arguments)}function Y(h,e){const n=G(e.data,e.width,e.height,h.smoothing);return h.interpolate?(r,m)=>{const v=Math.floor(r),C=Math.floor(m);if(0>v||v>=e.width||0>C||C>=e.height)return[0,0];r-=v;m-=C;const t=v<e.width-1?v+1:v,B=C<e.height-1?C+1:C;return[(n[2*(C*e.width+v)]*(1-m)+n[2*(B*e.width+v)]*m)*(1-r)+(n[2*(C*e.width+t)]*(1-m)+n[2*(B*e.width+t)]*m)*r,(n[2*(C*e.width+v)+1]*(1-m)+n[2*(B*e.width+v)+1]*m)*(1-r)+(n[2*
(C*e.width+t)+1]*(1-m)+n[2*(B*e.width+t)+1]*m)*r]}:(r,m)=>{r=Math.round(r);m=Math.round(m);return 0>r||r>=e.width||0>m||m>=e.height?[0,0]:[n[2*(m*e.width+r)],n[2*(m*e.width+r)+1]]}}function U(h,e,n,r,m,v,C,t,B){const p=[];let f=0;p.push({x:n,y:r,t:f});for(let k=0;k<h.verticesPerLine;k++){let [A,J]=e(n,r);A*=h.velocityScale;J*=h.velocityScale;var D=Math.sqrt(A*A+J*J);if(D<h.minSpeedThreshold)break;const I=A/D,K=J/D;n+=I*h.segmentLength;r+=K*h.segmentLength;f+=h.segmentLength/D;if(Math.acos(I*z+K*g)>
h.maxTurnAngle)break;if(h.mergeLines){var z=Math.round(n*B);var g=Math.round(r*B);if(0>z||z>C-1||0>g||g>t-1)break;D=v[g*C+z];if(-1!==D&&D!==m)break;v[g*C+z]=m}p.push({x:n,y:r,t:f});z=I;g=K}return p}function F(h,e,n,r){const m=[],v=new na,C=1/Math.max(h.lineCollisionWidth,1),t=Math.round(n*C),B=Math.round(r*C),p=new Int32Array(t*B);for(var f=0;f<p.length;f++)p[f]=-1;f=[];for(let D=0;D<r;D+=h.lineSpacing)for(let z=0;z<n;z+=h.lineSpacing)f.push({x:z,y:D,sort:v.getFloat()});f.sort((D,z)=>D.sort-z.sort);
for(const {x:D,y:z}of f)v.getFloat()<h.density&&(n=U(h,e,D,z,m.length,p,t,B,C),2>n.length||m.push(n));return m}function G(h,e,n,r){if(0===r)return h;const m=Math.round(3*r),v=Array(2*m+1);var C=0;for(var t=-m;t<=m;t++){var B=Math.exp(-t*t/(r*r));v[t+m]=B;C+=B}for(r=-m;r<=m;r++)v[r+m]/=C;C=new Float32Array(h.length);for(r=0;r<n;r++)for(t=0;t<e;t++){var p=B=0;for(var f=-m;f<=m;f++)if(!(0>t+f||t+f>=e)){var D=v[f+m];B+=D*h[2*(r*e+(t+f))];p+=D*h[2*(r*e+(t+f))+1]}C[2*(r*e+t)]=B;C[2*(r*e+t)+1]=p}h=new Float32Array(h.length);
for(r=0;r<e;r++)for(t=0;t<n;t++){p=B=0;for(f=-m;f<=m;f++)0>t+f||t+f>=n||(D=v[f+m],B+=D*C[2*((t+f)*e+r)],p+=D*C[2*((t+f)*e+r)+1]);h[2*(t*e+r)]=B;h[2*(t*e+r)+1]=p}return h}function d(h,e){const n=new na;var r=h.reduce((t,B)=>t+B.length,0);r=new Float32Array(3*r);const m=Array(h.length);let v=0,C=0;for(const t of h){h=v;for(const B of t)r[3*v]=B.x,r[3*v+1]=B.y,r[3*v+2]=B.t,v++;m[C++]={startVertex:h,numberOfVertices:t.length,totalTime:t[t.length-1].t,timeSeed:e?n.getFloat():0}}return{lineVertices:r,lineDescriptors:m}}
function c(h,e=10){function n(z,g,k,A,J,I,K){const O=8*B;let R=0;t[O+R++]=z;t[O+R++]=g;t[O+R++]=1;t[O+R++]=k;t[O+R++]=I;t[O+R++]=K;t[O+R++]=A;t[O+R++]=J;B++;t[O+R++]=z;t[O+R++]=g;t[O+R++]=-1;t[O+R++]=k;t[O+R++]=I;t[O+R++]=K;t[O+R++]=-A;t[O+R++]=-J;B++}const {lineVertices:r,lineDescriptors:m}=h;var v=h=0;for(var C of m)h+=2*C.numberOfVertices,v+=6*(C.numberOfVertices-1);const t=new Float32Array(8*h);C=new Uint32Array(v);let B=0;h=0;for(const z of m){const {totalTime:g,timeSeed:k}=z;let A=v=null,J=
null;var p=null,f=null;for(let I=0;I<z.numberOfVertices;I++){const K=r[3*(z.startVertex+I)],O=r[3*(z.startVertex+I)+1],R=r[3*(z.startVertex+I)+2];let V=null,Z=null;var D=null;let Q=null;0<I&&(V=K-v,Z=O-A,D=Math.sqrt(V*V+Z*Z),V/=D,Z/=D,1<I?(p=V+p,f=Z+f,D=Math.sqrt(p*p+f*f),p/=D,f/=D,D=Math.min(1/(p*V+f*Z),e),p*=D,f*=D,D=-f,Q=p):(D=-Z,Q=V),null!==D&&null!==Q&&(n(v,A,J,D,Q,g,k),C[h++]=B-2,C[h++]=B,C[h++]=B-1,C[h++]=B,C[h++]=B+1,C[h++]=B-1));v=K;A=O;J=R;p=V;f=Z}n(v,A,J,-f,p,g,k)}return{vertexData:t,indexData:C}}
function l(h,e){const n=e.pixels,{width:r,height:m}=e;e=new Float32Array(r*m*2);if("vector-uv"===h)for(h=0;h<r*m;h++)e[2*h]=n[0][h],e[2*h+1]=-n[1][h];else if("vector-magdir"===h)for(h=0;h<r*m;h++){const v=n[0][h],C=x.deg2rad(n[1][h]),t=Math.sin(C-Math.PI/2);e[2*h]=Math.cos(C-Math.PI/2)*v;e[2*h+1]=t*v}return{data:e,width:r,height:m}}function E(){E=y._asyncToGenerator(function*(h,e,n,r,m){var v=X.getInfo(e.spatialReference);if(!v)return q(h,e,n,r,m);const [C,t]=v.valid;v=Math.ceil(e.width/(t-C));const B=
e.width/v,p=Math.round(n/v);let f=e.xmin;const D=[];for(let z=0;z<v;z++){const g=new la({xmin:f,xmax:f+B,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference});D.push(q(h,g,p,r,m));f+=B}e=yield Promise.all(D);r={data:new Float32Array(n*r*2),width:n,height:r};h=0;for(const z of e){for(e=0;e<z.height;e++)for(m=0;m<z.width;m++)h+m>=n||(r.data[2*(e*n+h+m)]=z.data[2*(e*z.width+m)],r.data[2*(e*n+h+m)+1]=z.data[2*(e*z.width+m)+1]);h+=z.width}return r});return E.apply(this,arguments)}function q(h,
e,n,r,m){return u.apply(this,arguments)}function u(){u=y._asyncToGenerator(function*(h,e,n,r,m){if("imagery"===h.type){yield h.load({signal:m});var v=h.rasterInfo.dataType;h=yield h.fetchImage(e,n,r,{signal:m});return!h||P.isNone(h.pixelData)||P.isNone(h.pixelData.pixelBlock)?{data:new Float32Array(n*r*2),width:n,height:r}:l(v,h.pixelData.pixelBlock)}yield h.load({signal:m});v=h.rasterInfo.dataType;h=yield h.fetchPixels(e,n,r,{signal:m});return!h||P.isNone(h.pixelBlock)?{data:new Float32Array(n*r*
2),width:n,height:r}:l(v,h.pixelBlock)});return u.apply(this,arguments)}const w=T.getLogger("esri.views.2d.engine.flow.dataUtils");S.createAnimatedLinesData=d;S.createLinesMesh=c;S.createStreamlinesMesh=function(h,e,n){return ba.apply(this,arguments)};S.fetchPart=q;S.loadImagery=function(h,e,n,r,m){return E.apply(this,arguments)};Object.defineProperty(S,"__esModule",{value:!0})})},"*noref":1}});
define("../../chunks/_rollupPluginBabelHelpers ../../geometry ../../core/maybe ../../geometry/support/GeographicTransformation ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ./rasterFunctions/rasterProjectionHelper ./rasterFunctions/vectorFieldUtils ./rasterTransforms/utils ../../renderers/support/RasterSymbolizer ../../views/2d/engine/flow/dataUtils ../../geometry/Extent".split(" "),function(S,y,aa,T,x,P,ea,na,X,la,ba,Y,U){return function(){function F(){}var G=F.prototype;
G.convertVectorFieldData=function(d){const c=x.fromJSON(d.pixelBlock);d=X.convertVectorFieldData(c,d.type);return Promise.resolve(aa.isSome(d)&&d.toJSON())};G.decode=function(){var d=S._asyncToGenerator(function*(c){return(c=yield P.decode(c.data,c.options))&&c.toJSON()});return function(c){return d.apply(this,arguments)}}();G.symbolize=function(d){d.pixelBlock=x.fromJSON(d.pixelBlock);d.extent=d.extent?U.fromJSON(d.extent):null;d=this.symbolizer.symbolize(d);return Promise.resolve(aa.isSome(d)&&
d.toJSON())};G.updateSymbolizer=function(){var d=S._asyncToGenerator(function*(c){var l;this.symbolizer=ba.fromJSON(c.symbolizerJSON);c.histograms&&"rasterStretch"===(null==(l=this.symbolizer)?void 0:l.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=c.histograms)});return function(c){return d.apply(this,arguments)}}();G.stretch=function(d){d=this.symbolizer.simpleStretch(x.fromJSON(d.srcPixelBlock),d.stretchParams);return Promise.resolve(aa.isSome(d)&&d.toJSON())};G.estimateStatisticsHistograms=
function(d){d=ea.estimateStatisticsHistograms(x.fromJSON(d.srcPixelBlock));return Promise.resolve(d)};G.split=function(d){const c=ea.split(x.fromJSON(d.srcPixelBlock),d.tileSize,d.maximumPyramidLevel);c&&c.forEach((l,E)=>{c.set(E,null==l?void 0:l.toJSON())});return Promise.resolve(c)};G.mosaicAndTransform=function(){var d=S._asyncToGenerator(function*(c){var l=c.srcPixelBlocks.map(E=>E?new x(E):null);l=ea.mosaic(l,c.srcMosaicSize,{blockWidths:c.blockWidths,alignmentInfo:c.alignmentInfo});return c.coefs?
(c=ea.approximateTransform(l,c.destDimension,c.coefs,c.sampleSpacing,c.interpolation))&&c.toJSON():l&&l.toJSON()});return function(c){return d.apply(this,arguments)}}();G.createStreamlinesMesh=function(){var d=S._asyncToGenerator(function*(c,l){const E={data:new Float32Array(c.flowData.buffer),width:c.flowData.width,height:c.flowData.height},{vertexData:q,indexData:u}=yield Y.createStreamlinesMesh(c.rendererSettings,E,l.signal);return{result:{vertexBuffer:q.buffer,indexBuffer:u.buffer},transferList:[q.buffer,
u.buffer]}});return function(c,l){return d.apply(this,arguments)}}();G.getProjectionOffsetGrid=function(){var d=S._asyncToGenerator(function*(c){const l=U.fromJSON(c.projectedExtent),E=U.fromJSON(c.srcBufferExtent);let q=null;c.datumTransformationStemps&&(q=new T({steps:c.datumTransformationStemps}));na.requirePE(l.spatialReference,E.spatialReference,q)&&(yield na.load());const u=c.rasterTransform?la.readTransform(c.rasterTransform):null;return na.getProjectionOffsetGrid({...c,projectedExtent:l,srcBufferExtent:E,
datumTransformation:q,rasterTransform:u})});return function(c){return d.apply(this,arguments)}}();return F}()});