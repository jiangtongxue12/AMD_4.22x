// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/Error ../../core/jsonMap ../../core/lang ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators/aliasOf ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageryRendererUtils ../support/MosaicRule ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../core/unitUtils ../../kernel ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtils ../support/arcgisLayerUrl ../../core/pbf ../../geometry/support/spatialReferenceUtils ../../rest/support/Query ../../rest/query/executeForIds ../../rest/query/executeQueryJSON ../../core/has ../graphics/featureConversionUtils ../../rest/support/FeatureSet ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/support/ImageAngleParameters ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImagePixelLocationParameters ../../rest/support/ImageSampleParameters ../../views/2d/engine/flow/dataUtils ../../geometry/SpatialReference".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w,G,y,f,a,c,m,k,A,B,h,b,d,l,C,z,I,x,t,e,p,E,v,q,n,D,R,N,T,Y,X,ba,K,J,aa,Z,ca,ea,ja,ma,ra,pa,la,va,ta,ha,za,xa,Ha,Ea,Da,ya,wa,Ka,Oa){function Sa(na){if(!na)return null;na=JSON.stringify(na).match(/"rasterFunction":"(.*?")/gi);return(na=null==na?void 0:na.map(Na=>Na.replace('"rasterFunction":"',"").replace('"',"")))?na.join("/"):null}const Ma=F.getLogger("esri.layers.mixins.ArcGISImageService"),La=P.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",
U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),Za=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),$a=a.ensureRange(f.ensureNumber,{min:0,max:255});V.ArcGISImageService=na=>{na=function(Na){function Ta(){var L=Na.apply(this,arguments)||this;L._functionRasterInfos={};L._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};L._symbolizer=null;L._defaultServiceMosaicRule=null;L._serviceSourceType=null;L._serviceSupportsMosaicRule=
null;L.rasterAttributeTableFieldPrefix="Raster.";L.adjustAspectRatio=null;L.bandCount=null;L.bandIds=void 0;L.capabilities=null;L.compressionQuality=void 0;L.compressionTolerance=.01;L.copyright=null;L.definitionExpression=null;L.exportImageServiceParameters=null;L.rasterInfo=null;L.fields=null;L.fullExtent=null;L.hasMultidimensions=!1;L.imageMaxHeight=4100;L.imageMaxWidth=4100;L.interpolation=void 0;L.minScale=0;L.maxScale=0;L.multidimensionalInfo=null;L.noData=null;L.noDataInterpretation=void 0;
L.objectIdField=null;L.geometryType="polygon";L.typeIdField=null;L.types=[];L.pixelSizeX=null;L.pixelSizeY=null;L.pixelFilter=null;L.raster=void 0;L.viewId=void 0;L.renderer=null;L.rasterAttributeTable=null;L.rasterFunctionInfos=null;L.serviceDataType=null;L.spatialReference=null;L.pixelType=null;L.serviceRasterInfo=null;L.sourceJSON=null;L.url=null;L.version=null;return L}H._inheritsLoose(Ta,Na);var oa=Ta.prototype;oa.initialize=function(){this._set("exportImageServiceParameters",new h.ExportImageServiceParameters({layer:this}))};
oa.readDefaultServiceMosaicRule=function(L,M){return this._serviceSupportsMosaicRule?C.fromJSON(M):null};oa.readServiceSourceType=function(L,M){return this._isMosaicDataset(M)?"mosaic-dataset":"raster-dataset"};oa.readServiceSupportsMosaicRule=function(L,M){return this._isMosaicRuleSupported(M)};oa.readBandIds=function(L,M){if(Array.isArray(L)&&0<L.length&&L.every(da=>"number"===typeof da))return L};oa.readCapabilities=function(L,M){return this._readCapabilities(M)};oa.writeCompressionQuality=function(L,
M,da){null!=L&&"lerc"!==this.format&&(M[da]=L)};oa.writeCompressionTolerance=function(L,M,da){"lerc"===this.format&&null!=L&&(M[da]=L)};oa.readFormat=function(L,M){return"esriImageServiceDataTypeVector-UV"===M.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===M.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};oa.readMinScale=function(L,M){return null!=M.minLOD&&null!=M.maxLOD?L:0};oa.readMaxScale=function(L,M){return null!=M.minLOD&&null!=M.maxLOD?L:0};oa.readMosaicRule=function(L,
M){return(L=L||M.mosaicRule)?C.fromJSON(L):this._isMosaicRuleSupported(M)?C.fromJSON(M):null};oa.writeMosaicRule=function(L,M,da){L=this.mosaicRule;const fa=this.definitionExpression;L?fa&&fa!==L.where&&(L=L.clone(),L.where=fa):fa&&(L=new C({where:fa}));this._isValidCustomizedMosaicRule(L)&&(M[da]=L.toJSON())};oa.writeNoData=function(L,M,da){null!=L&&"number"===typeof L&&(M[da]=$a(L))};oa.readObjectIdField=function(L,M){L||(L=(L=M.fields.filter(da=>"esriFieldTypeOID"===da.type||"oid"===da.type))&&
L[0]&&L[0].name);return L};oa.readRenderer=function(L,M,da){var fa,ia;L=null==M?void 0:null==(fa=M.layerDefinition)?void 0:null==(ia=fa.drawingInfo)?void 0:ia.renderer;da=W.read(L,da);if(null==da)return null;"vector-field"===da.type&&M.symbolTileSize&&!L.symbolTileSize&&(da.symbolTileSize=M.symbolTileSize);l.isSupportedRendererType(da)||Ma.warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return da};oa.writeRenderer=function(L,M,da){M.layerDefinition=M.layerDefinition||
{};M.layerDefinition.drawingInfo=M.layerDefinition.drawingInfo||{};M.layerDefinition.drawingInfo.renderer=L.toJSON();"vector-field"===L.type&&(M.symbolTileSize=L.symbolTileSize)};oa.readRenderingRule=function(L,M){L=M.rasterFunctionInfos;return M.renderingRule||L&&L.length&&"None"!==L[0].name?x.fromJSON(M.renderingRule||{rasterFunctionInfos:M.rasterFunctionInfos}):null};oa.writeRenderingRule=function(L,M,da){this._isRFTJson(L)||(M[da]=L.toJSON())};oa.readSpatialReference=function(L,M){return(L=L||
M.extent.spatialReference)?Oa.fromJSON(L):null};oa.readPixelType=function(L){return La.fromJSON(L)||L};oa.writePixelType=function(L,M,da){if(g.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)M[da]=La.toJSON(L)};oa.readVersion=function(L,M){(L=M.currentVersion)||(L=M.hasOwnProperty("fields")||M.hasOwnProperty("timeInfo")?10:9.3);return L};oa.applyFilter=function(L){let M=L;this.pixelFilter&&(M=this._clonePixelData(L),this.pixelFilter(M));return M};oa.applyRenderer=
function(){var L=H._asyncToGenerator(function*(M,da){var fa=M;if(!this._isPicture()&&this.renderer&&this._symbolizer&&!this.pixelFilter){fa=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON());const ia=this._rasterJobHandler.instance,{bandIds:ka}=this;ia?(fa&&(this._symbolizer.bind(),yield ia.updateSymbolizer(this._symbolizer,da),this._cachedRendererJson=this.renderer.toJSON()),da=yield ia.symbolize({bandIds:ka,...M},da),fa={extent:M.extent,pixelBlock:da}):fa={extent:M.extent,
pixelBlock:this._symbolizer.symbolize({bandIds:ka,...M})}}return fa});return function(M,da){return L.apply(this,arguments)}}();oa.destroy=function(){this._shutdownJobHandler()};oa.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};oa.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};oa.computeAngles=function(){var L=H._asyncToGenerator(function*(M,da){yield this._fetchCapabilities(null==
da?void 0:da.signal);if(!this.capabilities.operations.supportsComputeAngles)throw new U("imagery-layer:compute-angles","this operation is not supported on the input image service");M=f.ensureClass(Ha,M).clone();return n.computeAngles(this.url,M,this._getRequestOptions(da))});return function(M,da){return L.apply(this,arguments)}}();oa.computePixelSpaceLocations=function(){var L=H._asyncToGenerator(function*(M,da){yield this._fetchCapabilities(null==da?void 0:da.signal);if(!this.capabilities.operations.supportsComputePixelLocation)throw new U("imagery-layer:compute-pixel-space-locations",
"this operation is not supported on the input image service");M=f.ensureClass(ya,M).clone();return n.computePixelSpaceLocations(this.url,M,this._getRequestOptions(da))});return function(M,da){return L.apply(this,arguments)}}();oa.computeHistograms=function(){var L=H._asyncToGenerator(function*(M,da){yield this._fetchCapabilities(null==da?void 0:da.signal);if(!this.capabilities.operations.supportsComputeHistograms)throw new U("imagery-layer:compute-histograms","this operation is not supported on the input image service");
M=f.ensureClass(Ea,M).clone();const {raster:fa,mosaicRule:ia,renderingRule:ka}=this;ka&&null==M.renderingRule&&(M.renderingRule=ka);ia&&null==M.mosaicRule&&(M.mosaicRule=ia);fa&&null==M.raster&&(M.raster=fa);return n.computeHistograms(this.url,M,this._getRequestOptions(da))});return function(M,da){return L.apply(this,arguments)}}();oa.computeStatisticsHistograms=function(){var L=H._asyncToGenerator(function*(M,da){yield this._fetchCapabilities(null==da?void 0:da.signal);if(!this.capabilities.operations.supportsComputeStatisticsHistograms)throw new U("imagery-layer:compute-statistics-histograms",
"this operation is not supported on the input image service");M=f.ensureClass(Ea,M).clone();const {raster:fa,mosaicRule:ia,renderingRule:ka}=this;ka&&null==M.renderingRule&&(M.renderingRule=ka);ia&&null==M.mosaicRule&&(M.mosaicRule=ia);fa&&null==M.raster&&(M.raster=fa);return n.computeStatisticsHistograms(this.url,M,this._getRequestOptions(da))});return function(M,da){return L.apply(this,arguments)}}();oa.getField=function(L){const {fieldsIndex:M}=this;return g.isSome(M)?M.get(L):void 0};oa.getFieldDomain=
function(L,M){return(L=this.getField(L))?L.domain:null};oa.fetchImage=function(L,M,da,fa={}){if(null==L||null==M||null==da)return Promise.reject(new U("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));const ia=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,{signal:fa.signal}):null;return w.when(ia).then(ka=>{ka&&(this.rasterInfo=ka);ka={imageServiceParameters:this.getExportImageServiceParameters(L,
M,da,fa.timeExtent),imageProps:{extent:L,width:M,height:da,format:this.format},requestAsImageElement:fa.requestAsImageElement&&!this.pixelFilter||!1,signal:fa.signal};return this._requestArrayBuffer(ka)})};oa.fetchKeyProperties=function(L){L=L&&L.renderingRule&&L.renderingRule.toJSON();return S(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version&&L?JSON.stringify(L):null})}).then(M=>M.data)};oa.fetchRasterAttributeTable=function(L){L=L&&L.renderingRule&&
L.renderingRule.toJSON();return 10.1>this.version?Promise.reject(new U("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):S(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version&&L?JSON.stringify(L):null})}).then(M=>ha.fromJSON(M.data))};oa.getCatalogItemRasterInfo=function(){var L=H._asyncToGenerator(function*(M,da){var fa=S(this.parsedUrl.path+"/"+M+"/info",{query:this._getQueryParams(),...da}).then(ia=>ia.data);M=S(this.parsedUrl.path+
"/"+M+"/info/keyProperties",{query:this._getQueryParams(),...da}).then(ia=>ia.data).catch(()=>{});fa=yield Promise.all([fa,M]);if(fa[0])return M=X.fromJSON(fa[0].extent),da=fa[0].statistics?fa[0].statistics.map(ia=>({min:ia[0],max:ia[1],avg:ia[2],stddev:ia[3]})):null,new t({bandCount:fa[0].bandCount,extent:M,spatialReference:M.sr,pixelSize:new J({x:fa[0].pixelSizeX,y:fa[0].pixelSizeY,spatialReference:M.sr}),pixelType:fa[0].pixelType.toLowerCase(),statistics:da,histograms:fa[0].histograms,keyProperties:fa[1]||
{}})});return function(M,da){return L.apply(this,arguments)}}();oa.getCatalogItemICSInfo=function(){var L=H._asyncToGenerator(function*(M,da){var {data:fa}=yield S(this.parsedUrl.path+"/"+M+"/info/ics",{query:this._getQueryParams(),...da});if(fa=fa&&fa.ics){var ia=null;try{ia=(yield S(this.parsedUrl.path+"/"+M+"/info",{query:this._getQueryParams(),...da})).data.extent}catch{}if(!ia||!ia.spatialReference)return{ics:fa,icsToPixelTransform:null,icsExtent:null,northDirection:null};var ka=10.7<=this.version?
S(this.parsedUrl.path+"/"+M+"/info/icstopixel",{query:this._getQueryParams(),...da}).then(Ia=>Ia.data).catch(()=>({})):{},ua=ia.spatialReference,sa={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[ia]}),inSR:ua.wkid||JSON.stringify(ua),outSR:"0:"+M};sa=S(this.parsedUrl.path+"/project",{query:this._getQueryParams(sa),...da}).then(Ia=>Ia.data).catch(()=>({}));var qa=(ia.xmin+ia.xmax)/2,Aa=(ia.ymax-ia.ymin)/6;ia=ia.ymin+Aa;var Ca=[];for(let Ia=0;5>Ia;Ia++)Ca.push({x:qa,y:ia+
Aa*Ia});M={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:Ca}),inSR:ua.wkid||JSON.stringify(ua),outSR:"0:"+M};da=S(this.parsedUrl.path+"/project",{query:this._getQueryParams(M),...da}).then(Ia=>Ia.data).catch(()=>({}));ka=yield Promise.all([ka,sa,da]);da=ka[0].ipxf;if(null==da){var Fa,Ba,Ga;M=null==(Fa=fa.geodataXform)?void 0:Fa.xf_0;"topup"===(null==M?void 0:null==(Ba=M.name)?void 0:Ba.toLowerCase())&&6===(null==M?void 0:null==(Ga=M.coefficients)?void 0:Ga.length)&&(da={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",
coefficients:M.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}if(Fa=X.fromJSON(ka[1]&&ka[1].geometries&&ka[1].geometries[0]))Fa.spatialReference=new Oa({wkid:0,imageCoordinateSystem:fa});Ba=ka[2].geometries?ka[2].geometries.filter(Ia=>null!=Ia&&null!=Ia.x&&null!=Ia.y&&"NaN"!==Ia.x&&"NaN"!==Ia.y):[];Ga=Ba.length;if(3>Ga)return{ics:fa,icsToPixelTransform:da,icsExtent:Fa,northDirection:null};ua=sa=M=ka=0;for(qa=0;qa<Ga;qa++)ka+=Ba[qa].x,M+=Ba[qa].y,sa+=Ba[qa].x*Ba[qa].x,ua+=Ba[qa].x*Ba[qa].y;
Ga=(Ga*ua-ka*M)/(Ga*sa-ka*ka);ka=0;M=Ba[4].x>Ba[0].x;Ba=Ba[4].y>Ba[0].y;Infinity===Ga?ka=Ba?90:270:0===Ga?ka=M?0:180:0<Ga?ka=M?180*Math.atan(Ga)/Math.PI:180*Math.atan(Ga)/Math.PI+180:0>Ga&&(ka=Ba?180+180*Math.atan(Ga)/Math.PI:360+180*Math.atan(Ga)/Math.PI);return{ics:fa,icsToPixelTransform:da,icsExtent:Fa,northDirection:ka}}});return function(M,da){return L.apply(this,arguments)}}();oa.generateRasterInfo=function(){var L=H._asyncToGenerator(function*(M,da){if((!M||"none"===M.functionName.toLowerCase()||
this._isVectorFieldResampleFunction(M))&&g.isSome(this.serviceRasterInfo))return this.serviceRasterInfo;const fa=Sa(M);if(this._functionRasterInfos[fa])return this._functionRasterInfos[fa];M=this._generateRasterInfo(M,da);this._functionRasterInfos[fa]=M;try{return yield M}catch{return this._functionRasterInfos[fa]=null}});return function(M,da){return L.apply(this,arguments)}}();oa.getExportImageServiceParameters=function(L,M,da,fa){L=L.clone().shiftCentralMeridian();const ia=n.getImageSpatialReferenceQueryParameter(L.spatialReference,
this.parsedUrl.path);g.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const ka=this.exportImageServiceParameters.toJSON(),{bandIds:ua,noData:sa}=ka;var {renderingRule:qa}=ka,Aa=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase(),Ca=!this.renderer||"raster-stretch"===this.renderer.type;null!=ua&&ua.length&&Aa&&Ca?(Aa={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:ua}},
"Stretch"===qa.rasterFunction?(Aa.rasterFunctionArguments.Raster=qa.rasterFunctionArguments.Raster,qa.rasterFunctionArguments.Raster=Aa):"Colormap"===qa.rasterFunction?(Ca=qa.rasterFunctionArguments.Raster,"Stretch"===(null==Ca?void 0:Ca.rasterFunction)?(Aa.rasterFunctionArguments.Raster=Ca.rasterFunctionArguments.Raster,Ca.rasterFunctionArguments.Raster=Aa):(Aa.rasterFunctionArguments.Raster=Ca,qa.rasterFunctionArguments.Raster=Aa)):(Aa.rasterFunctionArguments.Raster=qa,qa=Aa),ka.bandIds=void 0):
ka.bandIds=null==ua?void 0:ua.join(",");sa instanceof Array&&0<sa.length&&(ka.noData=sa.join(","));Aa=this._serviceSupportsMosaicRule?this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,fa):null;ka.mosaicRule=Aa&&JSON.stringify(Aa);ka.renderingRule=qa&&JSON.stringify(qa);qa={};if(fa){const {start:Fa,end:Ba}=fa.toJSON();if(Fa&&Ba&&Fa===Ba)qa.time=""+Fa;else if(null!=Fa||null!=Ba)qa.time=`${null==Fa?"null":Fa},${null==Ba?"null":Ba}`}return{bbox:L.xmin+","+L.ymin+","+L.xmax+
","+L.ymax,bboxSR:ia,imageSR:ia,size:M+","+da,...ka,...qa}};oa.getSamples=function(){var L=H._asyncToGenerator(function*(M,da){yield this._fetchCapabilities(null==da?void 0:da.signal);if(!this.capabilities.operations.supportsGetSamples)throw new U("imagery-layer:get-samples","getSamples operation is not supported on the input image service");M=f.ensureClass(wa,M).clone();const {raster:fa}=this;fa&&null==M.raster&&(M.raster=fa);return n.getSamples(this.url,M,this._getRequestOptions(da))});return function(M,
da){return L.apply(this,arguments)}}();oa.identify=function(){var L=H._asyncToGenerator(function*(M,da){yield this._fetchCapabilities(null==da?void 0:da.signal);if(!this.capabilities.operations.supportsIdentify)throw new U("imagery-layer:query-rasters","query operation is not supported on the input image service");M=f.ensureClass(Da,M).clone();const {raster:fa,mosaicRule:ia,renderingRule:ka}=this;ka&&null==M.renderingRule&&(M.renderingRule=ka);if(ia&&null==M.mosaicRule){const ua=this._combineMosaicRuleWithTimeExtent(ia,
M.timeExtent);M.mosaicRule=g.unwrap(ua)}fa&&null==M.raster&&(M.raster=fa);return n.identify(this.url,M,this._getRequestOptions(da))});return function(M,da){return L.apply(this,arguments)}}();oa.createQuery=function(){const L=new ra;L.outFields=["*"];L.returnGeometry=!0;L.where=this.definitionExpression||"1\x3d1";return L};oa.queryRasters=function(){var L=H._asyncToGenerator(function*(M,da){({query:M,requestOptions:da}=yield this._prepareForQuery(M,da));return la.executeQueryJSON(this.url,M,da)});
return function(M,da){return L.apply(this,arguments)}}();oa.queryObjectIds=function(){var L=H._asyncToGenerator(function*(M,da){({query:M,requestOptions:da}=yield this._prepareForQuery(M,da));return pa.executeForIds(this.url,M,da)});return function(M,da){return L.apply(this,arguments)}}();oa.queryRasterCount=function(){var L=H._asyncToGenerator(function*(M,da){({query:M,requestOptions:da}=yield this._prepareForQuery(M,da));return Y.executeForCount(this.url,M,da)});return function(M,da){return L.apply(this,
arguments)}}();oa.queryVisibleRasters=function(L,M){if(!L)return Promise.reject(new U("imagery-layer: query-visible-rasters","missing query parameter"));const {pixelSize:da,returnDomainValues:fa,returnTopmostRaster:ia,showNoDataRecords:ka}=M||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let ua=!1;var sa=null;let qa=null;const Aa=this.rasterFunctionNamesIndex;if(g.isSome(L.outFields)&&(ua=L.outFields.some(Ja=>-1===Ja.toLowerCase().indexOf("raster.servicepixelvalue")),
10.4<=this.version)){var Ca=L.outFields.filter(Ja=>-1<Ja.toLowerCase().indexOf("raster.servicepixelvalue")&&24<Ja.length).map(Ja=>{Ja=Ja.slice(25);return[this._updateRenderingRulesFunctionName(Ja,Aa),Ja]});sa=Ca.map(Ja=>new x({functionName:Ja[0]}));qa=Ca.map(Ja=>Ja[1]);0===sa.length?this.renderingRule?(sa.push(this.renderingRule),qa.push(this.renderingRule.functionName)):sa=null:this.renderingRule&&!sa.some(Ja=>Ja.functionName===this.renderingRule.functionName)&&(sa.push(this.renderingRule),qa.push(this.renderingRule.functionName))}const Fa=
g.isNone(L.outSpatialReference)||L.outSpatialReference.equals(this.spatialReference);Ca=L.timeExtent||this.timeExtent;const Ba=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,Ca);sa=this._getQueryParams({geometry:L.geometry,timeExtent:Ca,mosaicRule:Ba,renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:sa,pixelSize:da,returnCatalogItems:ua,returnGeometry:Fa,raster:this.raster,maxItemCount:ia?1:null});delete sa.f;const Ga=new Da(sa),Ia=this.generateRasterInfo(this.renderingRule);
return new Promise(Ja=>{Ia.then(()=>{n.identify(this.url,Ga,{signal:null==M?void 0:M.signal,query:{...this.customParameters}}).then(Qa=>{var Ra;const Wa=L.outFields,ab=-1<Qa.value.toLowerCase().indexOf("nodata");if(ua&&!Fa&&null!=Qa&&null!=(Ra=Qa.catalogItems)&&Ra.features.length&&(ka||!ab)){const Ua=this.objectIdField||"ObjectId",Xa=Qa.catalogItems.features;Ra=Xa.map(Pa=>Pa.attributes&&Pa.attributes[Ua]);Ra=new ra({objectIds:Ra,returnGeometry:!0,outSpatialReference:L.outSpatialReference,outFields:[Ua]});
return this.queryRasters(Ra).then(Pa=>{Pa&&Pa.features&&0<Pa.features.length&&Pa.features.forEach(Ya=>{Xa.forEach(Va=>{Va.attributes[Ua]===Ya.attributes[Ua]&&(Va.geometry=new aa(Ya.geometry),Va.geometry.spatialReference=L.outSpatialReference)})});Ja(this._processVisibleRastersResponse(Qa,{returnDomainValues:fa,templateRRFunctionNames:qa,showNoDataRecords:ka,templateFields:Wa}))}).catch(()=>{throw new U("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry");
})}Ja(this._processVisibleRastersResponse(Qa,{returnDomainValues:fa,templateRRFunctionNames:qa,showNoDataRecords:ka,templateFields:Wa}))}).catch(()=>{throw new U("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");})})})};oa.fetchVariableStatisticsHistograms=function(){var L=H._asyncToGenerator(function*(M,da){var fa=S(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:M}),signal:da}).then(ia=>{var ka;return null==(ka=ia.data)?void 0:ka.statistics});
M=S(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:M}),signal:da}).then(ia=>{var ka;return null==(ka=ia.data)?void 0:ka.histograms});fa=yield Promise.all([fa,M]);fa[0]&&fa[0].forEach(ia=>{ia.avg=ia.mean;ia.stddev=ia.standardDeviation});return{statistics:fa[0]||null,histograms:fa[1]||null}});return function(M,da){return L.apply(this,arguments)}}();oa.createStreamlinesMesh=function(){var L=H._asyncToGenerator(function*(M,da){const fa=this._rasterJobHandler.instance;return fa?
fa.createStreamlinesMesh(M,da):Ka.createStreamlinesMesh(M.rendererSettings,M.flowData,g.isSome(da.signal)?da.signal:(new AbortController).signal)});return function(M,da){return L.apply(this,arguments)}}();oa._fetchService=function(){var L=H._asyncToGenerator(function*(M){yield this._fetchServiceInfo(M);g.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo);var da=this.sourceJSON;da=g.isSome(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:da,
signal:M}).then(ia=>{this._set("serviceRasterInfo",ia);return ia});M=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,{signal:M}):null;const fa=this._getRasterFunctionInfos();return Promise.all([da,M,fa]).then(ia=>{ia[1]?this._set("rasterInfo",ia[1]):this._set("rasterInfo",ia[0]);ia[2]&&this._set("rasterFunctionInfos",ia[2]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this.renderer=null,Ma.warn("ArcGISImageService",
"Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._configDefaultRenderer();this.watch("renderer",()=>this._configDefaultRenderer());this.watch("renderingRule",ka=>{(this.renderer||this._symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(ka).then(ua=>{ua&&(this.rasterInfo=ua)})});(ia=g.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.multidimensionalInfo)&&this._updateMultidimensionalDefinition(ia)})});return function(M){return L.apply(this,
arguments)}}();oa._combineMosaicRuleWithTimeExtent=function(L,M){var da=this.timeInfo;if(g.isNone(L)||g.isNone(this.multidimensionalInfo)||g.isNone(M)||g.isNone(null==da?void 0:da.startField))return L;const {startField:fa}=da;L=L.clone();if("mosaic-dataset"===this._serviceSourceType){var ia;L.multidimensionalDefinition=null==(ia=L.multidimensionalDefinition)?void 0:ia.filter(qa=>qa.dimensionName!==fa);return this._cleanupMultidimensionalDefinition(L)}L.multidimensionalDefinition=L.multidimensionalDefinition||
[];da=L.multidimensionalDefinition.filter(qa=>qa.dimensionName===fa);ia=g.isSome(M.start)?M.start.getTime():null;M=g.isSome(M.end)?M.end.getTime():null;const ka=null==ia||null==M||ia===M,ua=ka?[ia||M]:[[ia,M]],sa=10.8<=this.version;da.length?da.forEach(qa=>{qa.dimensionName===fa&&(sa?(qa.dimensionName=null,qa.isSlice=null,qa.values=null):(qa.isSlice=ka,qa.values=ua))}):sa||(M=L.multidimensionalDefinition.filter(qa=>null!=qa.variableName&&null==qa.dimensionName),M.length?M.forEach(qa=>{qa.dimensionName=
fa;qa.isSlice=ka;qa.values=ua}):L.multidimensionalDefinition.push(new B({variableName:"",dimensionName:fa,isSlice:ka,values:ua})));return this._cleanupMultidimensionalDefinition(L)};oa._cleanupMultidimensionalDefinition=function(L){if(g.isNone(L))return null;L.multidimensionalDefinition&&(L.multidimensionalDefinition=L.multidimensionalDefinition.filter(M=>!(!M.variableName&&!M.dimensionName)),0===L.multidimensionalDefinition.length&&(L.multidimensionalDefinition=null));return"mosaic-dataset"!==this._serviceSourceType&&
null==L.multidimensionalDefinition?null:L};oa._prepareForQuery=function(){var L=H._asyncToGenerator(function*(M,da){var fa;yield this._fetchCapabilities(null==(fa=da)?void 0:fa.signal);if(!this.capabilities.operations.supportsQuery)throw new U("imagery-layer:query-rasters","query operation is not supported on the input image service");M=g.isSome(M)?f.ensureClass(ra,M):this.createQuery();da=this._getRequestOptions(da);this.raster&&(da.query={...da.query,raster:this.raster});return{query:M,requestOptions:da}});
return function(M,da){return L.apply(this,arguments)}}();oa._initJobHandler=function(){var L=H._asyncToGenerator(function*(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const M=new e;this._rasterJobHandler.connectionPromise=M.initialize().then(()=>{this._rasterJobHandler.instance=M},()=>null);yield this._rasterJobHandler.connectionPromise});return function(){return L.apply(this,arguments)}}();oa._shutdownJobHandler=function(){this._rasterJobHandler.instance&&
this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0};oa._isSupportedRenderer=function(L){const {rasterInfo:M,renderingRule:da}=this;return"unique-value"===L.type&&da&&"none"!==da.functionName.toLowerCase()&&1===M.bandCount&&["u8","s8"].includes(M.pixelType)||v.getSupportedRendererTypes(this.rasterInfo).includes(this.renderer.type)};oa._fetchCapabilities=function(){var L=H._asyncToGenerator(function*(M){if(this.capabilities)return this.capabilities;
yield this._fetchServiceInfo(M);return this.capabilities});return function(M){return L.apply(this,arguments)}}();oa._fetchServiceInfo=function(){var L=H._asyncToGenerator(function*(M){var da;let fa=this.sourceJSON;if(!fa){const {data:ia,ssl:ka}=yield S(this.parsedUrl.path,{query:this._getQueryParams(),signal:M});this.sourceJSON=fa=ia;ka&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<(null==(da=fa.capabilities)?void 0:da.toLowerCase().split(",").map(ia=>ia.trim()).indexOf("tilesonly")))throw new U("imagery-layer:fetch-service-info",
"use ImageryTileLayer to open tiles-only image services");this.read(fa,{origin:"service",url:this.parsedUrl})});return function(M){return L.apply(this,arguments)}}();oa._isMosaicDataset=function(L){var M;return L.serviceSourceType?"esriImageServiceSourceTypeMosaicDataset"===L.serviceSourceType:0<(null==(M=L.fields)?void 0:M.length)};oa._isMosaicRuleSupported=function(L){var M;if(!L)return!1;const da=this._isMosaicDataset(L);L=10.71<=L.currentVersion&&L.hasMultidimensions&&L.timeInfo&&!(L.objectIdField&&
1<(null==(M=L.fields)?void 0:M.length));return da||L};oa._isVectorFieldResampleFunction=function(L){if(!g.isSome(L))return!1;const {functionName:M,functionArguments:da}=L;L="resample"===M.toLowerCase();const fa=(null==da?void 0:da.ResampleType)||(null==da?void 0:da.resampleType);return L&&(7===fa||10===fa)};oa._isPicture=function(){return!this.format||-1<this.format.indexOf("jpg")||-1<this.format.indexOf("png")};oa._configDefaultRenderer=function(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&
3<=this.rasterInfo.bandCount){const da=v.getDefaultBandCombination(this.rasterInfo);!da||3===this.rasterInfo.bandCount&&0===da[0]&&1===da[1]&&2===da[2]||(this.bandIds=da)}if(!this.renderer){var L,M;this.renderer=v.createDefaultRenderer(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null==(L=this.mosaicRule)?void 0:null==(M=L.multidimensionalDefinition)?void 0:M[0].variableName})}this._symbolizer?(this._symbolizer.rendererJSON=v.normalizeRendererJSON(this.renderer.toJSON()),
this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new q({rendererJSON:this.renderer.toJSON(),rasterInfo:this.rasterInfo});this._symbolizer.bind().success||(this._symbolizer=null)}};oa._clonePixelData=function(L){return null==L?L:{extent:L.extent&&L.extent.clone(),pixelBlock:g.isSome(L.pixelBlock)&&L.pixelBlock.clone()}};oa._getQueryParams=function(L){const {raster:M,viewId:da}=this;return{raster:M,viewId:da,f:"json",...L,...this.customParameters}};oa._getRequestOptions=function(L){return{...L,
query:{...null==L?void 0:L.query,...this.customParameters}}};oa._decodePixelBlock=function(L,M,da){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:L,options:M}):p.decode(L,M,da)};oa._fetchMultidimensionalInfo=function(){var L=H._asyncToGenerator(function*(M){var da;M=yield S(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),signal:M}).then(fa=>{var ia;return null==(ia=fa.data)?void 0:ia.multidimensionalInfo});null!=(da=M.variables)&&da.length&&
M.variables.forEach(fa=>{var ia;null!=(ia=fa.statistics)&&ia.length&&fa.statistics.forEach(ka=>{ka.avg=ka.mean;ka.stddev=ka.standardDeviation})});return M});return function(M){return L.apply(this,arguments)}}();oa._getRasterFunctionInfos=function(){var L=H._asyncToGenerator(function*(M){const da=this.sourceJSON.rasterFunctionInfos;return this.serviceRasterInfo?da:da&&10.3<=this.version?1===da.length&&"none"===da[0].name.toLowerCase()?da:S(this.parsedUrl.path+"/rasterFunctionInfos",{query:this._getQueryParams(),
signal:M}).then(fa=>{var ia;return null==(ia=fa.data)?void 0:ia.rasterFunctionInfos}):null});return function(M){return L.apply(this,arguments)}}();oa._fetchAuxiliaryRasterInfo=function(L){const M=L&&L.serviceInfo;if(!M)return Promise.reject(new U("imagery-layer:fetch-metadata","valid serviceInfo is required"));var da=L.renderingRule?JSON.stringify(L.renderingRule.toJSON()):null,fa=L.signal;L=M.hasRasterAttributeTable&&10.1<=this.version?S(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.1<=
this.version?da:null}),signal:fa}).then(ua=>ha.fromJSON(ua.data)).catch(()=>null):!1;const ia=M.hasColormap&&10.1<=this.version?S(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:10.6<=this.version?da:null}),signal:fa}).then(ua=>{var sa;return null==(sa=ua.data)?void 0:sa.colormap}):!1,ka=M.hasHistograms&&10.1<=this.version?S(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:10.1<=this.version?da:null}),signal:fa}).then(ua=>{var sa;return null==
(sa=ua.data)?void 0:sa.histograms}):!1;da=10.3<=this.version?S(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:da}),signal:fa}).then(ua=>ua.data).catch(()=>{}):!1;fa=M.hasMultidimensions&&10.3<=this.version?this._fetchMultidimensionalInfo():!1;return Promise.all([L,ia,ka,da,fa]).then(ua=>{let sa=null;if(M.minValues&&M.minValues.length===M.bandCount){sa=[];for(var qa=0;qa<M.minValues.length;qa++)sa.push({min:M.minValues[qa],max:M.maxValues[qa],avg:M.meanValues[qa],stddev:M.stdvValues[qa]})}qa=
Math.ceil((M.extent.xmax-M.extent.xmin)/M.pixelSizeX-.1);const Aa=Math.ceil((M.extent.ymax-M.extent.ymin)/M.pixelSizeY-.1),Ca=Oa.fromJSON(M.spatialReference||M.extent.spatialReference);return new t({width:qa,height:Aa,bandCount:M.bandCount,extent:X.fromJSON(M.extent),spatialReference:Ca,pixelSize:new J({x:M.pixelSizeX,y:M.pixelSizeY,spatialReference:Ca}),pixelType:M.pixelType.toLowerCase(),statistics:sa,attributeTable:ua[0]||null,colormap:ua[1]||null,histograms:ua[2]||null,keyProperties:ua[3]||{},
multidimensionalInfo:ua[4]||null})})};oa._requestArrayBuffer=function(L){const {imageProps:M,requestAsImageElement:da,signal:fa}=L;if(da&&!this.pixelFilter&&M.format&&-1<M.format.indexOf("png"))return S(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",...L.imageServiceParameters}),signal:fa}).then(ka=>({imageElement:ka.data,params:M}));const ia=this._initJobHandler();L=S(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",
...L.imageServiceParameters}),signal:fa});return Promise.all([L,ia]).then(ka=>{ka=ka[0].data;const ua=M.format||"jpgpng";var sa=ua;"bsq"!==sa&&"bip"!==sa&&(sa=p.getFormat(ka));if(!sa)throw new U("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(ka)));sa="gif"===ua||"bmp"===ua||-1<ua.indexOf("png")&&("png"===sa||"jpg"===sa);const qa={signal:fa};return sa?p.decode(ka,{useCanvas:!0,...M},qa).then(Aa=>({pixelData:{pixelBlock:Aa,extent:M.extent},
params:M})):this._decodePixelBlock(ka,{width:M.width,height:M.height,planes:null,pixelType:null,noDataValue:null,format:ua},qa).then(Aa=>({pixelData:{pixelBlock:Aa,extent:M.extent},params:M}))})};oa._generateRasterInfo=function(){var L=H._asyncToGenerator(function*(M,da){const {data:fa}=yield S(this.parsedUrl.path,{query:this._getQueryParams({renderingRule:M}),...da});return yield this._fetchAuxiliaryRasterInfo({serviceInfo:fa,renderingRule:M,...da})});return function(M,da){return L.apply(this,arguments)}}();
oa._isValidCustomizedMosaicRule=function(L){return L&&JSON.stringify(L.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())};oa._updateMultidimensionalDefinition=function(L){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var M=L.variables[0].dimensions;L=[];for(var da in M)if(M.hasOwnProperty(da)){const fa=M[da],ia=fa.extent;let ka=!0,ua=[ia[0]];fa.hasRanges&&!0===fa.hasRanges?(ka=!1,ua=[fa.values[0]]):"stdz"===fa.name.toLowerCase()&&Math.abs(ia[1])<=
Math.abs(ia[0])&&(ua=[ia[1]]);L.push(new B({variableName:"",dimensionName:M[da].name,isSlice:ka,values:ua}))}0<L.length&&(this.mosaicRule=this.mosaicRule||new C,da=this.mosaicRule.multidimensionalDefinition,!da||da&&0>=da.length)&&(this.mosaicRule.multidimensionalDefinition=L)}};oa._formatAttributeValue=function(L,M){if("string"===typeof L&&(M=(M=this._getFieldInfo(this.popupTemplate&&this.popupTemplate.fieldInfos,M))&&M.format)){let da,fa;return-1<L.trim().indexOf(",")?(da=",",fa=da+" ",this._formatDelimitedString(L,
da,fa,M)):-1<L.trim().indexOf(" ")?(da=fa=" ",this._formatDelimitedString(L,da,fa,M)):this._formatNumberFromString(L,M)}return L};oa._getFieldInfo=function(L,M){if(L&&L.length&&M){var da=M.toLowerCase(),fa=void 0;L.some(ia=>!ia.fieldName||ia.fieldName.toLowerCase()!==da&&ia.fieldName.toLowerCase()!==da.replace(/ /g,"_")?!1:(fa=ia,!0));return fa}};oa._formatDelimitedString=function(L,M,da,fa){return L&&M&&da&&fa?L.trim().split(M).map(ia=>this._formatNumberFromString(ia,fa)).join(da):L};oa._formatNumberFromString=
function(L,M){if(!L||!M)return L;const da=Number(L);return isNaN(da)?L:M.format(da)};oa._processVisibleRastersResponse=function(L,M){M=M||{};const da=L.value,{templateRRFunctionNames:fa,showNoDataRecords:ia,returnDomainValues:ka,templateFields:ua}=M;M=L.processedValues;var sa=L.catalogItems&&L.catalogItems.features;let qa=L.properties&&L.properties.Values&&L.properties.Values.map(Ia=>Ia.replace(/ /gi,", "))||[];var Aa=this.objectIdField||"ObjectId",Ca="string"===typeof da&&-1<da.toLowerCase().indexOf("nodata");
L=[];!da||sa||Ca||(sa={},sa[Aa]=0,sa=new r(this.fullExtent,null,sa),qa=[da],sa=[sa]);if(!sa)return[];this._updateResponseFieldNames(sa,ua);Ca&&!ia&&(sa=[]);for(Aa=0;Aa<sa.length;Aa++){Ca=sa[Aa];if(null!=da){var Fa=qa[Aa];var Ba=this.renderingRule&&M&&0<M.length&&fa&&0<fa.length&&-1<fa.indexOf(this.renderingRule.functionName)?M[fa.indexOf(this.renderingRule.functionName)]:da;if("nodata"===Fa.toLowerCase()&&!ia)continue;Ca.attributes["Raster.ItemPixelValue"]=this._formatAttributeValue(Fa,"Raster.ItemPixelValue");
Ca.attributes["Raster.ServicePixelValue"]=this._formatAttributeValue(Ba,"Raster.ServicePixelValue");this._updateFeatureWithMagDirValues(Ca,Fa);var Ga=this.fields&&0<this.fields.length;Ba=this.renderingRule&&g.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?Ga?Fa:da:Ba;this.renderingRule||(Ba=Ga?Fa:da);this._updateFeatureWithRasterAttributeTableValues(Ca,Ba)}Ca.sourceLayer=this;ka&&this._updateFeatureWithDomainValues(Ca);if(fa&&M&&fa.length===M.length)for(Fa=0;Fa<fa.length;Fa++)Ga=
"Raster.ServicePixelValue."+fa[Fa],Ca.attributes[Ga]=this._formatAttributeValue(M[Fa],Ga);L.push(sa[Aa])}return L};oa._updateFeatureWithRasterAttributeTableValues=function(L,M){var da=this.rasterInfo&&this.rasterInfo.attributeTable||g.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable;const fa=da&&da.features;if(fa){da=da.fields;var ia=da.map(sa=>sa.name).filter(sa=>"value"===sa.toLowerCase()),ka=ia&&ia[0];if(ka){var ua=fa.filter(sa=>sa.attributes[ka]===(null!=M?parseInt(M,10):
null));ua&&ua[0]&&da.forEach(sa=>{const qa=this.rasterAttributeTableFieldPrefix+sa.name;L.attributes[qa]=this._formatAttributeValue(ua[0].attributes[sa.name],qa)})}}};oa._updateFeatureWithMagDirValues=function(L,M){if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType){var da=M.split(/,\s*/).map(fa=>parseFloat(fa));M=da.map(fa=>[fa]);da=da.map(fa=>({minValue:fa,maxValue:fa,noDataValue:null}));M=new z({height:1,width:1,pixelType:"f32",
pixels:M,statistics:da});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:M,extent:new X(0,0,0,0,this.spatialReference)});M="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[M.pixels[0][0],M.pixels[1][0]]:E.uvComponentToVector([M.pixels[0][0],M.pixels[1][0]]);L.attributes["Raster.Magnitude"]=M[0];L.attributes["Raster.Direction"]=M[1]}};oa._updateFeatureWithDomainValues=function(L){const M=this.fields&&this.fields.filter(da=>da.domain&&"coded-value"===da.domain.type);null!=M&&M.forEach(da=>
{const fa=L.attributes[da.name];if(null!=fa){const ia=da.domain.codedValues.filter(ka=>ka.code===fa)[0];ia&&(L.attributes[da.name]=ia.name)}})};oa._updateResponseFieldNames=function(L,M){if(M&&!(1>M.length)){var da=this.fieldsIndex;g.isSome(da)&&L.forEach(fa=>{if(fa&&fa.attributes)for(const ia of M)if(da.has(ia)){const ka=da.get(ia).name;ka!==ia&&(fa.attributes[ia]=fa.attributes[ka],delete fa.attributes[ka])}})}};oa._updateRenderingRulesFunctionName=function(L,M){if(L&&!(1>L.length)){if("Raw"===L)return L.replace("Raw",
"None");var da=L.toLowerCase().replace(/ /gi,"_");return M.has(da)?M.get(da):L}};oa._isRFTJson=function(L){return L.name&&L.arguments&&L.function&&L.hasOwnProperty("functionType")};oa._readCapabilities=function(L){const M=L.capabilities?L.capabilities.toLowerCase().split(",").map(Aa=>Aa.trim()):["image","catalog"],{currentVersion:da,advancedQueryCapabilities:fa,maxRecordCount:ia}=L,ka=-1<M.indexOf("image"),ua="esriImageServiceDataTypeElevation"===L.serviceDataType,sa=!!(L.spatialReference||L.extent&&
L.extent.spatialReference),qa=M.includes("edit");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:ka,supportsExportImage:ka,supportsIdentify:ka,supportsMeasure:-1<M.indexOf("mensuration")&&sa,supportsDownload:-1<M.indexOf("download"),supportsQuery:-1<M.indexOf("catalog")&&L.fields&&0<L.fields.length,supportsGetSamples:10.2<=da&&ka,supportsProject:10.3<=da&&ka,supportsComputeStatisticsHistograms:10.4<=da&&ka,supportsQueryBoundary:10.6<=da&&ka,supportsCalculateVolume:10.7<=
da&&ua,supportsComputePixelLocation:10.7<=da&&-1<M.indexOf("catalog"),supportsComputeAngles:10.91<=da,supportsAdd:qa,supportsDelete:qa,supportsEditing:qa,supportsUpdate:qa,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:ia,maxRecordCountFactor:void 0,supportsStatistics:!(null==fa||!fa.supportsStatistics),supportsOrderBy:!(null==
fa||!fa.supportsOrderBy),supportsDistinct:!(null==fa||!fa.supportsDistinct),supportsPagination:!(null==fa||!fa.supportsPagination),supportsStandardizedQueriesOnly:!(null==fa||!fa.useStandardizedQueries),supportsPercentileStatistics:!(null==fa||!fa.supportsPercentileStatistics),supportsCentroid:!(null==fa||!fa.supportsReturningGeometryCentroid),supportsDistance:!(null==fa||!fa.supportsQueryWithDistance),supportsExtent:!(null==fa||!fa.supportsReturningQueryExtent),supportsGeometryProperties:!(null==
fa||!fa.supportsReturningGeometryProperties),supportsHavingClause:!(null==fa||!fa.supportsHavingClause),supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}};H._createClass(Ta,
[{key:"rasterFunctionNamesIndex",get:function(){const L=new Map;if(!this.rasterFunctionInfos||g.isSome(this.rasterFunctionInfos)&&1>this.rasterFunctionInfos.length)return L;g.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(M=>{L.set(M.name.toLowerCase().replace(/ /gi,"_"),M.name)});return L}},{key:"fieldsIndex",get:function(){return this.fields?new d(this.fields):null}},{key:"format",set:function(L){L&&Za.has(L.toLowerCase())&&this._set("format",L.toLowerCase())}},{key:"mosaicRule",
set:function(L){L&&L.mosaicMethod&&(L=C.fromJSON({...L.toJSON(),mosaicMethod:L.mosaicMethod,mosaicOperation:L.mosaicOperation}));this._set("mosaicRule",L)}},{key:"parsedUrl",get:function(){return this.url?G.urlToObject(this.url):null}},{key:"rasterFields",get:function(){const L=this.rasterAttributeTableFieldPrefix||"Raster.";var M=new b({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const da=new b({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",
domain:null,editable:!1,length:50,type:"string"}),fa=new b({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let ia=this.fields?O.clone(this.fields):[];ia.push(da);this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length&&ia.push(M);10.4<=this.version&&g.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(ka=>"none"===ka.name.toLowerCase())&&ia.push(fa);g.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter(ka=>
"none"!==ka.name.toLowerCase()).forEach(ka=>{ia.push(new b({name:"Raster.ServicePixelValue."+ka.name,alias:ka.name,domain:null,editable:!1,length:50,type:"string"}))});null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(ia.push(new b({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),ia.push(new b({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));
(M=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null)&&0<M.length&&(M=M.filter(ka=>"esriFieldTypeOID"!==ka.type&&"value"!==ka.name.toLowerCase()).map(ka=>{const ua=O.clone(ka);ua.name=L+ka.name;return ua}),ia=ia.concat(M));return ia}},{key:"renderingRule",set:function(L){L&&L.rasterFunction&&(L=x.fromJSON({...L.toJSON(),rasterFunction:L.rasterFunction,rasterFunctionArguments:L.rasterFunctionArguments}));this._set("renderingRule",L)}}]);return Ta}(na);u.__decorate([a.property()],
na.prototype,"_functionRasterInfos",void 0);u.__decorate([a.property()],na.prototype,"_rasterJobHandler",void 0);u.__decorate([a.property()],na.prototype,"_symbolizer",void 0);u.__decorate([a.property({dependsOn:["_serviceSupportsMosaicRule"]})],na.prototype,"_defaultServiceMosaicRule",void 0);u.__decorate([c.reader("_defaultServiceMosaicRule",["defaultMosaicMethod"])],na.prototype,"readDefaultServiceMosaicRule",null);u.__decorate([a.property()],na.prototype,"_cachedRendererJson",void 0);u.__decorate([a.property({readOnly:!0})],
na.prototype,"_serviceSourceType",void 0);u.__decorate([c.reader("_serviceSourceType",["serviceSourceType","fields"])],na.prototype,"readServiceSourceType",null);u.__decorate([a.property({readOnly:!0})],na.prototype,"_serviceSupportsMosaicRule",void 0);u.__decorate([c.reader("_serviceSupportsMosaicRule",["currentVersion","fields"])],na.prototype,"readServiceSupportsMosaicRule",null);u.__decorate([a.property()],na.prototype,"rasterAttributeTableFieldPrefix",void 0);u.__decorate([a.property({readOnly:!0})],
na.prototype,"rasterFunctionNamesIndex",null);u.__decorate([a.property()],na.prototype,"adjustAspectRatio",void 0);u.__decorate([a.property({readOnly:!0}),y.aliasOf("serviceRasterInfo.bandCount")],na.prototype,"bandCount",void 0);u.__decorate([a.property({type:[f.Integer],json:{write:!0}})],na.prototype,"bandIds",void 0);u.__decorate([c.reader("bandIds")],na.prototype,"readBandIds",null);u.__decorate([a.property({readOnly:!0,json:{read:!1}})],na.prototype,"capabilities",void 0);u.__decorate([c.reader("service",
"capabilities",["capabilities","currentVersion","serviceDataType"])],na.prototype,"readCapabilities",null);u.__decorate([a.property({type:Number})],na.prototype,"compressionQuality",void 0);u.__decorate([k.writer("compressionQuality")],na.prototype,"writeCompressionQuality",null);u.__decorate([a.property({type:Number})],na.prototype,"compressionTolerance",void 0);u.__decorate([k.writer("compressionTolerance")],na.prototype,"writeCompressionTolerance",null);u.__decorate([a.property({json:{read:{source:"copyrightText"}}})],
na.prototype,"copyright",void 0);u.__decorate([a.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],na.prototype,"definitionExpression",void 0);u.__decorate([a.property({readOnly:!0,constructOnly:!0})],na.prototype,"exportImageServiceParameters",void 0);u.__decorate([a.property()],na.prototype,"rasterInfo",void 0);u.__decorate([a.property({readOnly:!0,type:[b]})],na.prototype,"fields",void 0);u.__decorate([a.property({readOnly:!0})],na.prototype,
"fieldsIndex",null);u.__decorate([a.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],na.prototype,"format",null);u.__decorate([c.reader("service","format",["serviceDataType"])],na.prototype,"readFormat",null);u.__decorate([a.property({type:X})],na.prototype,"fullExtent",void 0);u.__decorate([a.property({readOnly:!0})],na.prototype,"hasMultidimensions",void 0);u.__decorate([a.property({json:{read:{source:"maxImageHeight"}}})],na.prototype,"imageMaxHeight",
void 0);u.__decorate([a.property({json:{read:{source:"maxImageWidth"}}})],na.prototype,"imageMaxWidth",void 0);u.__decorate([a.property({type:String,json:{type:I.interpolationKebab.jsonValues,read:I.interpolationKebab.read,write:I.interpolationKebab.write}})],na.prototype,"interpolation",void 0);u.__decorate([a.property()],na.prototype,"minScale",void 0);u.__decorate([c.reader("service","minScale")],na.prototype,"readMinScale",null);u.__decorate([a.property()],na.prototype,"maxScale",void 0);u.__decorate([c.reader("service",
"maxScale")],na.prototype,"readMaxScale",null);u.__decorate([a.property({type:C})],na.prototype,"mosaicRule",null);u.__decorate([c.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],na.prototype,"readMosaicRule",null);u.__decorate([k.writer("mosaicRule")],na.prototype,"writeMosaicRule",null);u.__decorate([a.property({readOnly:!0}),y.aliasOf("serviceRasterInfo.multidimensionalInfo")],na.prototype,"multidimensionalInfo",void 0);u.__decorate([a.property({json:{type:f.Integer}})],na.prototype,
"noData",void 0);u.__decorate([k.writer("noData")],na.prototype,"writeNoData",null);u.__decorate([a.property({type:String,json:{type:I.noDataInterpretationKebab.jsonValues,read:I.noDataInterpretationKebab.read,write:I.noDataInterpretationKebab.write}})],na.prototype,"noDataInterpretation",void 0);u.__decorate([a.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],na.prototype,"objectIdField",void 0);u.__decorate([c.reader("objectIdField")],na.prototype,"readObjectIdField",null);u.__decorate([a.property({})],
na.prototype,"geometryType",void 0);u.__decorate([a.property({})],na.prototype,"typeIdField",void 0);u.__decorate([a.property({})],na.prototype,"types",void 0);u.__decorate([a.property({readOnly:!0})],na.prototype,"parsedUrl",null);u.__decorate([a.property({readOnly:!0}),y.aliasOf("serviceRasterInfo.pixelSize.x")],na.prototype,"pixelSizeX",void 0);u.__decorate([a.property({readOnly:!0}),y.aliasOf("serviceRasterInfo.pixelSize.y")],na.prototype,"pixelSizeY",void 0);u.__decorate([a.property({type:Function})],
na.prototype,"pixelFilter",void 0);u.__decorate([a.property()],na.prototype,"raster",void 0);u.__decorate([a.property()],na.prototype,"viewId",void 0);u.__decorate([a.property({types:W.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:W.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(Na){return{enabled:Na&&"vector-field"!==Na.type&&"animated-flow"!==Na.type}}}}}}})],na.prototype,"renderer",void 0);u.__decorate([c.reader("renderer")],
na.prototype,"readRenderer",null);u.__decorate([k.writer("renderer")],na.prototype,"writeRenderer",null);u.__decorate([a.property(A.opacity)],na.prototype,"opacity",void 0);u.__decorate([a.property({readOnly:!0}),y.aliasOf("serviceRasterInfo.attributeTable")],na.prototype,"rasterAttributeTable",void 0);u.__decorate([a.property({readOnly:!0})],na.prototype,"rasterFields",null);u.__decorate([a.property({constructOnly:!0})],na.prototype,"rasterFunctionInfos",void 0);u.__decorate([a.property({type:x})],
na.prototype,"renderingRule",null);u.__decorate([c.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],na.prototype,"readRenderingRule",null);u.__decorate([k.writer("renderingRule")],na.prototype,"writeRenderingRule",null);u.__decorate([a.property()],na.prototype,"serviceDataType",void 0);u.__decorate([a.property({readOnly:!0,type:Oa})],na.prototype,"spatialReference",void 0);u.__decorate([c.reader("spatialReference",["spatialReference","extent"])],na.prototype,"readSpatialReference",
null);u.__decorate([a.property({json:{type:La.jsonValues}})],na.prototype,"pixelType",void 0);u.__decorate([c.reader("pixelType")],na.prototype,"readPixelType",null);u.__decorate([k.writer("pixelType")],na.prototype,"writePixelType",null);u.__decorate([a.property({constructOnly:!0,type:t})],na.prototype,"serviceRasterInfo",void 0);u.__decorate([a.property()],na.prototype,"sourceJSON",void 0);u.__decorate([a.property(A.url)],na.prototype,"url",void 0);u.__decorate([a.property({readOnly:!0})],na.prototype,
"version",void 0);u.__decorate([c.reader("version",["currentVersion","fields","timeInfo"])],na.prototype,"readVersion",null);return na=u.__decorate([m.subclass("esri.layers.mixins.ArcGISImageService")],na)};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/AnimatedFlowRenderer ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),
function(V,H,u,Q,r,W,S,U,P){function O(G,y){if(!G)return null;if("classBreaks"===G.type&&G.classificationMethod){var f=G.authoringInfo||{classificationMethod:""};f.classificationMethod=G.classificationMethod;G.authoringInfo=f}f=G?w[G.type]||null:null;if(f)return f=new f,f.read(G,y),f;y&&y.messages&&G&&y.messages.push(new H("renderer:unsupported","Renderers of type '"+(G.type||"unknown")+"' are not supported",{definition:G,context:y}));return null}const F={key:"type",base:null,typeMap:{"unique-value":U,
"class-breaks":Q,"raster-colormap":r,"raster-stretch":S,"vector-field":P,"raster-shaded-relief":W,"animated-flow":u}},g={...F,typeMap:{...F.typeMap}};delete g.typeMap["vector-field"];delete g.typeMap["animated-flow"];const w={uniqueValue:U,classBreaks:Q,rasterStretch:S,rasterColormap:r,vectorField:P,rasterShadedRelief:W,animatedFlow:u};V.AnimatedFlowRenderer=u;V.ClassBreaksRenderer=Q;V.RasterColormapRenderer=r;V.RasterShadedReliefRenderer=W;V.RasterStretchRenderer=S;V.UniqueValueRenderer=U;V.VectorFieldRenderer=
P;V.fromJSON=function(G,y){return O(G,y)};V.rasterRendererTypes=F;V.read=O;V.websceneRasterRendererTypes=g;Object.defineProperty(V,"__esModule",{value:!0})})},"esri/renderers/AnimatedFlowRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F){var g;Q=g=function(w){function G(y){y=w.call(this,y)||this;y.density=.8;y.lineColor=new u([255,255,255,1]);y.lineLength=200;y.lineWidth=1.5;y.lineSpeed=10;y.fadeDuration=100;y.smoothing=0;y.type="animated-flow";return y}V._inheritsLoose(G,w);G.prototype.clone=function(){const {density:y,lineLength:f,lineWidth:a,lineSpeed:c,fadeDuration:m,smoothing:k}=this,A=this.lineColor.clone();return new g({density:y,lineColor:A,lineLength:f,lineWidth:a,lineSpeed:c,fadeDuration:m,
smoothing:k})};return G}(Q.JSONSupport);H.__decorate([W.property({type:Number,json:{write:!0}})],Q.prototype,"density",void 0);H.__decorate([W.property({type:u,json:{write:{allowNull:!0}}})],Q.prototype,"lineColor",void 0);H.__decorate([W.property({type:Number,cast:r.toPt,json:{write:!0}})],Q.prototype,"lineLength",void 0);H.__decorate([W.property({type:Number,cast:r.toPt,json:{write:!0}})],Q.prototype,"lineWidth",void 0);H.__decorate([W.property({type:Number,json:{write:!0}})],Q.prototype,"lineSpeed",
void 0);H.__decorate([W.property({type:Number,json:{write:!0}})],Q.prototype,"fadeDuration",void 0);H.__decorate([W.property({type:Number,cast:r.toPt,json:{write:!0}})],Q.prototype,"smoothing",void 0);H.__decorate([O.enumeration({animatedFlow:"animated-flow"})],Q.prototype,"type",void 0);return Q=g=H.__decorate([F.subclass("esri.renderers.AnimatedFlowRenderer")],Q)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F){var g;u=g=function(w){function G(f){f=w.call(this,f)||this;f.colormapInfos=null;f.type="raster-colormap";return f}V._inheritsLoose(G,w);G.createFromColormap=function(f,a){if(!f)return null;const c=5===f[0].length;f=[...f].sort(m=>m[0][0]-m[1][0]).map(m=>{var k;return O.fromJSON({value:m[0],color:c?m.slice(1,5):m.slice(1,4).concat([255]),label:a?null!=(k=a[m[0]])?k:"":m[0]})});return new g({colormapInfos:f})};G.createFromColorramp=function(f){f=F.convertColorRampToColormap(f,
256);return g.createFromColormap(f)};var y=G.prototype;y.clone=function(){return new g({colormapInfos:this.colormapInfos.map(f=>f.toJSON())})};y.extractColormap=function(){return this.colormapInfos.map(f=>[f.value,f.color.r,f.color.g,f.color.b,1<f.color.a?f.color.a:255*f.color.a&255]).sort((f,a)=>f[0]-a[0])};return G}(u.JSONSupport);H.__decorate([Q.property({type:[O],json:{write:!0}})],u.prototype,"colormapInfos",void 0);H.__decorate([U.enumeration({rasterColormap:"raster-colormap"})],u.prototype,
"type",void 0);return u=g=H.__decorate([P.subclass("esri.renderers.RasterColormapRenderer")],u)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(V,H,u,Q,r,W,S,U,P){Q=function(O){function F(){var g=O.apply(this,
arguments)||this;g.value=null;g.label=null;g.color=null;return g}V._inheritsLoose(F,O);return F}(Q.JSONSupport);H.__decorate([r.property({type:Number,json:{write:!0}})],Q.prototype,"value",void 0);H.__decorate([r.property({type:String,json:{write:!0}})],Q.prototype,"label",void 0);H.__decorate([r.property({type:u,json:{type:[U.Integer],write:!0}})],Q.prototype,"color",void 0);return Q=H.__decorate([P.subclass("esri.renderers.support.ColormapInfo")],Q)})},"esri/renderers/support/colorRampUtils":function(){define(["exports",
"../../Color","../../core/colorUtils"],function(V,H,u){function Q(U,P){if(!U||!P||U.length!==P.length)return!1;for(let O=0;O<U.length;O++)if(U[O]>P[O]+2||U[O]<P[O]-2)return!1;return!0}function r(U,P){if(U){P=P?P:W;var O=null,F;"algorithmic"===U.type?P.some(g=>{if(Q(U.fromColor.toRgb(),g.fromColor)&&Q(U.toColor.toRgb(),g.toColor))return O=g.id,!0}):"multipart"===U.type&&P.some(g=>{if(U.colorRamps&&g.colorRamps&&U.colorRamps.length===g.colorRamps.length&&(F=U.colorRamps,!g.colorRamps.some((w,G)=>{if(!Q(F[G].fromColor.toRgb(),
(new H(w.fromColor)).toRgb())||!Q(F[G].toColor.toRgb(),(new H(w.toColor)).toRgb()))return!0}))){if(O)return!0;O=g.id}});return O}}const W=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},
{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",
fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",
type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,
240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,
255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",
fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",
type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",
type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,
102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",
fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,
213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},
{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",
colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},
{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,
255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,
252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],S={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",
brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",
greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",
precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",
redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",
surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};V.PREDEFINED_COLOR_RAMP_NAME_MAP=S;V.PREDEFINED_JSON_COLOR_RAMPS=W;V.convertColorRampToColormap=function(U,P,O=!1){if(U&&P&&!(1>
P)){var F="toJSON"in U?U.toJSON():U,g="multipart"===F.type?F.colorRamps.length:1;U=[];var w=[],G,y,f,a=0;if(1===P){var c="multipart"===F.type?F.colorRamps[0].fromColor:F.fromColor;w.push([0].concat(c));return w}for(let k=0;k<g;k++)U[k]={start:null,end:null},U[k].start=a,U[k].end=a+1/g,a=U[k].end;for(let k=0;k<P;k++){var m=k/(P-1);U.forEach((A,B)=>{if(m>=A.start&&(m<A.end||k===P-1&&B===g-1)){f=(m-A.start)/(A.end-A.start);"multipart"===F.type?(c=F.colorRamps[B].fromColor,G=F.colorRamps[B].toColor):
(c=F.fromColor,G=F.toColor);if(0===k)w.push([k].concat(c.slice(0,3)));else if(k===P-1)w.push([k].concat(G.slice(0,3)));else{var h={r:G[0],g:G[1],b:G[2]};A=f;B=u.toLAB({r:c[0],g:c[1],b:c[2]});h=u.toLAB(h);y=u.toRGB({l:B.l*(1-A)+A*h.l,a:B.a*(1-A)+A*h.a,b:B.b*(1-A)+A*h.b});w.push([k,y.r,y.g,y.b])}A=null!=c[3]?1<c[3]?c[3]/255:c[3]:1;B=null!=G[3]?1<G[3]?G[3]/255:G[3]:1;O&&w[k].push(Math.min(255,Math.round(255*(A*(1-f)+B*f))))}})}return w}};V.getColorRampId=r;V.getColorRampName=function(U){return(U=r(U))?
S[U]:null};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(V){function H(O,F){const g=[];let w,G;if(O[0].length!==F.length)throw"dimensions do not match";const y=O.length,f=O[0].length;let a=0;for(w=0;w<y;w++){for(G=a=0;G<f;G++)a+=O[w][G]*F[G];g.push(a)}return g}function u(O){O=[O.r/255,O.g/255,O.b/255].map(F=>.04045>=F?F/12.92:((F+.055)/1.055)**2.4);O=H(U,O);return{x:100*O[0],y:100*O[1],z:100*O[2]}}function Q(O){O=H(P,[O.x/100,O.y/
100,O.z/100]).map(F=>Math.min(1,Math.max(.0031308>=F?12.92*F:1.055*F**(1/2.4)-.055,0)));return{r:Math.round(255*O[0]),g:Math.round(255*O[1]),b:Math.round(255*O[2])}}function r(O){O=[O.x/95.047,O.y/100,O.z/108.883].map(F=>F>(6/29)**3?F**(1/3):1/3*(29/6)**2*F+4/29);return{l:116*O[1]-16,a:500*(O[0]-O[1]),b:200*(O[1]-O[2])}}function W(O){const F=O.l;O=[(F+16)/116+O.a/500,(F+16)/116,(F+16)/116-O.b/200].map(g=>g>6/29?g**3:3*(6/29)**2*(g-4/29));return{x:95.047*O[0],y:100*O[1],z:108.883*O[2]}}function S(O){if("r"in
O&&"g"in O&&"b"in O)return O;if("l"in O&&"c"in O&&"h"in O){var F=O.c;var g=O.h;F={l:O.l,a:F*Math.cos(g),b:F*Math.sin(g)};return Q(W(F))}if("l"in O&&"a"in O&&"b"in O)return Q(W(O));if("x"in O&&"y"in O&&"z"in O)return Q(O);if("h"in O&&"s"in O&&"v"in O){{g=(O.h+360)%360/60;F=O.v/100*255;O=O.s/100*F;const w=O*(1-Math.abs(g%2-1));switch(Math.floor(g)){case 0:g={r:O,g:w,b:0};break;case 1:g={r:w,g:O,b:0};break;case 2:g={r:0,g:O,b:w};break;case 3:g={r:0,g:w,b:O};break;case 4:g={r:w,g:0,b:O};break;case 5:case 6:g=
{r:O,g:0,b:w};break;default:g={r:0,g:0,b:0}}g.r=Math.round(g.r+F-O);g.g=Math.round(g.g+F-O);g.b=Math.round(g.b+F-O);F=g}return F}return O}const U=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],P=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];V.darken=function(O,F){O=r(u(O));O.l*=1-F;return Q(W(O))};V.toHSV=function(O){if("h"in O&&"s"in O&&"v"in O)return O;var F=S(O);{O=F.r;const g=F.g,w=F.b;F=Math.max(O,g,w);const G=F-Math.min(O,g,w);O=0===G?0:F===O?(g-w)/G%6:F===
g?(w-O)/G+2:(O-g)/G+4;0>O&&(O+=6);O={h:60*O,s:100*(0===G?0:G/F),v:100/255*F}}return O};V.toLAB=function(O){return"l"in O&&"a"in O&&"b"in O?O:r(u(S(O)))};V.toLCH=function(O){if(!("l"in O&&"c"in O&&"h"in O)){{var F=r(u(S(O)));O=F.l;var g=F.a;const w=F.b;F=Math.sqrt(g*g+w*w);g=Math.atan2(w,g);g=0<g?g:g+2*Math.PI;O={l:O,c:F,h:g}}}return O};V.toRGB=S;V.toXYZ=function(O){return"x"in O&&"y"in O&&"z"in O?O:u(S(O))};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(V,H,u,Q,r,W,S,U,P,O){var F;u=F=function(g){function w(y){y=g.call(this,y)||this;y.altitude=45;y.azimuth=315;y.colorRamp=null;y.hillshadeType="multi-directional";y.pixelSizePower=.664;y.pixelSizeFactor=.024;y.scalingType="none";y.type="raster-shaded-relief";y.zFactor=1;return y}V._inheritsLoose(w,g);var G=w.prototype;G.readColorRamp=function(y){return O.fromJSON(y)};G.clone=function(){return new F({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Q.clone(this.colorRamp)})};return w}(u.JSONSupport);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"altitude",void 0);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"azimuth",void 0);H.__decorate([r.property({types:O.types,json:{write:!0}})],u.prototype,"colorRamp",void 0);H.__decorate([U.reader("colorRamp")],u.prototype,"readColorRamp",null);H.__decorate([r.property({type:["traditional",
"multi-directional"],json:{write:!0}})],u.prototype,"hillshadeType",void 0);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"pixelSizePower",void 0);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"pixelSizeFactor",void 0);H.__decorate([r.property({type:["none","adjusted"],json:{write:!0}})],u.prototype,"scalingType",void 0);H.__decorate([S.enumeration({rasterShadedRelief:"raster-shaded-relief"})],u.prototype,"type",void 0);H.__decorate([r.property({type:Number,
json:{write:!0}})],u.prototype,"zFactor",void 0);return u=F=H.__decorate([P.subclass("esri.renderers.RasterShadedReliefRenderer")],u)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g){var w;u=w=function(G){function y(a){a=G.call(this,a)||this;a.colorRamp=null;a.computeGamma=!1;a.dynamicRangeAdjustment=!1;a.gamma=[];a.maxPercent=null;a.minPercent=null;a.numberOfStandardDeviations=null;a.outputMax=null;a.outputMin=null;a.sigmoidStrengthLevel=null;a.statistics=[];a.histograms=null;a.useGamma=!1;a.stretchType="none";a.type="raster-stretch";return a}V._inheritsLoose(y,G);var f=y.prototype;f.readColorRamp=function(a){if(a)return g.fromJSON(a)};f.writeStatistics=
function(a,c,m){var k;null!=(k=a)&&k.length&&(Array.isArray(a[0])||(a=a.map(A=>[A.min,A.max,A.avg,A.stddev])),c[m]=a)};f.readStretchType=function(a,c){a=c.stretchType;"number"===typeof a&&(a=F.stretchTypeFunctionEnum[a]);return F.stretchTypeJSONDict.read(a)};f.clone=function(){return new w({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Q.clone(this.statistics),gamma:Q.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Q.clone(this.colorRamp),histograms:Q.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return y}(u.JSONSupport);H.__decorate([r.property({types:g.types,json:{write:!0}})],u.prototype,"colorRamp",void 0);H.__decorate([U.reader("colorRamp")],u.prototype,"readColorRamp",null);H.__decorate([r.property({type:Boolean,json:{write:!0}})],u.prototype,"computeGamma",
void 0);H.__decorate([r.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],u.prototype,"dynamicRangeAdjustment",void 0);H.__decorate([r.property({type:[Number],json:{write:!0}})],u.prototype,"gamma",void 0);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"maxPercent",void 0);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"minPercent",void 0);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"numberOfStandardDeviations",
void 0);H.__decorate([r.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],u.prototype,"outputMax",void 0);H.__decorate([r.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],u.prototype,"outputMin",void 0);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"sigmoidStrengthLevel",void 0);H.__decorate([r.property({json:{type:[[Number]],write:!0}})],u.prototype,"statistics",void 0);H.__decorate([r.property()],u.prototype,"histograms",void 0);
H.__decorate([O.writer("statistics")],u.prototype,"writeStatistics",null);H.__decorate([r.property({type:Boolean,json:{write:!0}})],u.prototype,"useGamma",void 0);H.__decorate([r.property({type:F.stretchTypeJSONDict.apiValues,json:{type:F.stretchTypeJSONDict.jsonValues,write:F.stretchTypeJSONDict.write}})],u.prototype,"stretchType",void 0);H.__decorate([U.reader("stretchType",["stretchType"])],u.prototype,"readStretchType",null);H.__decorate([S.enumeration({rasterStretch:"raster-stretch"})],u.prototype,
"type",void 0);return u=w=H.__decorate([P.subclass("esri.renderers.RasterStretchRenderer")],u)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(V,H){H=new H.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});V.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
V.stretchTypeJSONDict=H;Object.defineProperty(V,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w,G,y,f,a,c,m,k,A,B,h,b,d,l,C,z){var I;const x=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);Q=new S.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
S=new S.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});U=I=function(t){function e(E){E=t.call(this,E)||this;E.attributeField="Magnitude";E.flowRepresentation="flow-from";E.rotationType="arithmetic";E.style="single-arrow";E.symbolTileSize=50;E.type="vector-field";return E}V._inheritsLoose(e,t);var p=e.prototype;p.readInputUnit=function(E,v){return x.has(E)?a.unitKebabDict.fromJSON(E):null};p.readOutputUnit=function(E,v){return x.has(E)?a.unitKebabDict.fromJSON(E):null};p.clone=function(){return new I({attributeField:this.attributeField,
flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:P.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};p.getGraphicsFromPixelData=function(){var E=V._asyncToGenerator(function*(v,q=!1,n=[]){var D;const R=[];var N=a.getUnitConversionFactor(this.inputUnit,this.outputUnit),T=(null==(D=this.rotationVariables[0])?void 0:D.rotationType)||this.rotationType;q=q?a.convertVectorFieldData(v.pixelBlock,
"vector-uv",T,N):a.convertVectorFieldUnit(v.pixelBlock,"vector-magdir",N);if(O.isNone(q))return R;v=v.extent;D=q.mask&&0<q.mask.length;N=0;T=(v.xmax-v.xmin)/q.width;const Y=(v.ymax-v.ymin)/q.height;for(let ba=0;ba<q.height;ba++)for(let K=0;K<q.width;K++,N++){let J=new z({x:v.xmin+K*T+T/2,y:v.ymax-ba*Y-Y/2,spatialReference:v.spatialReference});J=(yield f.normalizeCentralMeridian(J))[0];var X=n.some(aa=>aa.intersects(J));D&&!q.mask[N]||X||(X=new r({geometry:{type:"point",x:J.x,y:J.y,spatialReference:v.spatialReference},
attributes:{Magnitude:q.pixels[0][N],Direction:q.pixels[1][N]}}),X.symbol=this._getVisualVariablesAppliedSymbol(X),R.push(X))}return R});return function(v){return E.apply(this,arguments)}}();p.getSymbol=function(E,v){};p.getSymbolAsync=function(){var E=V._asyncToGenerator(function*(v,q){});return function(v,q){return E.apply(this,arguments)}}();p.getSymbols=function(){return[]};p.getClassBreakInfos=function(){var E;return null==(E=this.styleRenderer)?void 0:E.classBreakInfos};p.getDefaultSymbol=function(){var E;
return null==(E=this.styleRenderer)?void 0:E.defaultSymbol};p._getDefaultSymbol=function(E){return new d({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new b({width:0}),size:20,color:E||new u([0,92,230])})};p._getVisualVariablesAppliedSymbol=function(E){if(E){var v=this.styleRenderer&&this.styleRenderer.getSymbol(E);v=v.clone();var q=this.sizeVariables,n=this.rotationVariables;q&&q.length&&this.sizeVariables.forEach(D=>l.applySizesToSymbol(v,h.getAllSizes([D],E)));n&&n.length&&(E.attributes.Direction+=
"flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(D=>l.applyRotationToSymbol(v,h.getRotationAngle(D,E),D.axis)));return v}};p._createStyleRenderer=function(E){let v={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(E){case "single-arrow":v=this._createSingleArrowRenderer();break;case "beaufort-kn":v=this._createBeaufortKnotsRenderer();break;case "beaufort-m":v=this._createBeaufortMeterRenderer();
break;case "beaufort-ft":v=this._createBeaufortFeetRenderer();break;case "beaufort-mi":v=this._createBeaufortMilesRenderer();break;case "beaufort-km":v=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":v=this._createCurrentMeterRenderer();break;case "ocean-current-kn":v=this._createCurrentKnotsRenderer();break;case "simple-scalar":v=this._createSimpleScalarRenderer();break;case "wind-barb":v=this._createWindBarbsRenderer();break;case "classified-arrow":v=this._createClassifiedArrowRenderer()}return new c(v)};
p._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};p._createBeaufortKnotsRenderer=function(){const E=this._getDefaultSymbol(new u([214,47,39])),v=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:E,classBreakInfos:v}};p._createBeaufortMeterRenderer=function(){const E=this._getDefaultSymbol(new u([214,
47,39])),v=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:E,classBreakInfos:v}};p._createBeaufortFeetRenderer=function(){const E=this._getDefaultSymbol(new u([214,47,39]));var v=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];v=v.map(q=>3.28084*q);v=this._getClassBreaks(v,[[69,
117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:E,classBreakInfos:v}};p._createBeaufortMilesRenderer=function(){const E=this._getDefaultSymbol(new u([214,47,39]));var v=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];v=v.map(q=>2.23694*q);v=this._getClassBreaks(v,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],
[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:E,classBreakInfos:v}};p._createBeaufortKilometersRenderer=function(){const E=this._getDefaultSymbol(new u([214,47,39]));var v=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];v=v.map(q=>3.6*q);v=this._getClassBreaks(v,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:E,
classBreakInfos:v}};p._createCurrentMeterRenderer=function(){const E=this._getDefaultSymbol(new u([177,177,177])),v=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:E,classBreakInfos:v}};p._createCurrentKnotsRenderer=function(){const E=this._getDefaultSymbol(new u([177,177,177])),v=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);
return{defaultSymbol:E,classBreakInfos:v}};p._createClassifiedArrowRenderer=function(){var E;const v=this._getDefaultSymbol(new u([56,168,0]));var q=[0,1E-6,3.5,7,10.5,14];if(null!=(E=this.sizeVariables)&&E.length){const n=this.sizeVariables[0].minDataValue;E=this.sizeVariables[0].maxDataValue;if(n&&E){const D=(E-n)/5;q=Array.from(Array(6).keys()).map(R=>n+D*R)}}q=this._getClassBreaks(q,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:v,classBreakInfos:q}};p._createSimpleScalarRenderer=
function(){return{defaultSymbol:C.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};p._createWindBarbsRenderer=function(){const E=Array.from(Array(31).keys()).map(D=>5*D),v=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],q=C.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),n=E.map((D,R)=>{if(R!==E.length-1)if(0===R)var N={minValue:D,maxValue:E[R+1],symbol:q};else N=C.fromJSON({type:"esriPMS",imageData:v[R].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),N={minValue:D,maxValue:E[R+1],symbol:N};return new k(N)});return{defaultSymbol:q,classBreakInfos:n}};p._getClassBreaks=function(E,v){return v.map((q,n)=>new k({minValue:E[n],maxValue:E[n+1],symbol:this._getDefaultSymbol(new u(q))}))};V._createClass(e,[{key:"styleRenderer",
get:function(){const E=this.attributeField,v=this._createStyleRenderer(this.style);v.field=E;return v}},{key:"sizeVariables",get:function(){const E=[];if(this.visualVariables)for(var v of this.visualVariables)"size"===v.type&&E.push(v);0===E.length&&(v=new B({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(v):this._set("visualVariables",[v]),E.push(v));return E}},{key:"rotationVariables",get:function(){const E=[];if(this.visualVariables)for(var v of this.visualVariables)"rotation"===
v.type&&E.push(v);0===E.length&&(v=new A({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(v):this._set("visualVariables",[v]),E.push(v));return E}}]);return e}(m.VisualVariablesMixin(U.JSONSupport));H.__decorate([F.property({type:String,json:{write:!0}})],U.prototype,"attributeField",void 0);H.__decorate([F.property({type:S.apiValues,json:{type:S.jsonValues,read:{reader:S.read},write:{writer:S.write}}})],U.prototype,"flowRepresentation",void 0);H.__decorate([F.property({type:["geographic",
"arithmetic"],json:{write:!0}})],U.prototype,"rotationType",void 0);H.__decorate([F.property({type:Q.apiValues,json:{type:Q.jsonValues,read:{reader:Q.read},write:{writer:Q.write}}})],U.prototype,"style",void 0);H.__decorate([F.property({json:{write:!0}})],U.prototype,"symbolTileSize",void 0);H.__decorate([F.property({type:a.unitKebabDict.apiValues,json:{type:a.unitKebabDict.jsonValues,write:{writer:a.unitKebabDict.write}}})],U.prototype,"inputUnit",void 0);H.__decorate([G.reader("inputUnit")],U.prototype,
"readInputUnit",null);H.__decorate([F.property({type:a.unitKebabDict.apiValues,json:{type:a.unitKebabDict.jsonValues,read:{reader:a.unitKebabDict.read},write:{writer:a.unitKebabDict.write}}})],U.prototype,"outputUnit",void 0);H.__decorate([G.reader("outputUnit")],U.prototype,"readOutputUnit",null);H.__decorate([w.enumeration({vectorField:"vector-field"})],U.prototype,"type",void 0);H.__decorate([F.property({type:c})],U.prototype,"styleRenderer",null);H.__decorate([F.property({type:B})],U.prototype,
"sizeVariables",null);H.__decorate([F.property({type:A})],U.prototype,"rotationVariables",null);return U=I=H.__decorate([y.subclass("esri.renderers.VectorFieldRenderer")],U)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(V,H,u,Q,r){function W(h,b){return y.get(h)/y.get(b)||1}function S(h,b="geographic"){const [d,l]=h;h=Math.sqrt(d*d+l*l);let C=Math.atan2(l,d)*f;C=(360+C)%
360;"geographic"===b&&(C=(450-C)%360);return[h,C]}function U(h,b="geographic"){let d=h[1];"geographic"===b&&(d=(450-d)%360);d%=360;h=h[0];return[h*Math.cos(d/f),h*Math.sin(d/f)]}function P(h=0,b=Math.PI,d=!0){d&&(b=(2*Math.PI-b)%(2*Math.PI));var l=d?-1:1;d=5*l;const C=20*l,z=25*l;l*=2;let [I,x]=[5,0-C],[t,e]=[I+2,x],[p,E]=[t-0,e+l],[v,q]=[-5,0-z],[n,D]=[v+0,q-l];h=Math.ceil(h/5);let R=Math.floor(h/10);h-=8*R;const N=[],T=[];for(let ea=0;ea<h/2;ea++,R--){0>=R&&1===h%2&&ea===(h-1)/2&&(v=0,n=v+0,q=(q+
x)/2,D=q-l);const [ja,ma]=O(v,q,b,45);if(0<R){const [ra,pa]=O(t,q,b,45),[la,va]=O(I,x,b,45);N.push(ra);N.push(pa);N.push(ja);N.push(ma);N.push(la);N.push(va)}else{const [ra,pa]=O(t,e,b,45),[la,va]=O(p,E,b,45),[ta,ha]=O(n,D,b,45);T.push(ja);T.push(ma);T.push(ta);T.push(ha);T.push(la);T.push(va);T.push(ra);T.push(pa)}q+=d;x+=d;e+=d;E+=d;D+=d}const [Y,X]=O(5,0+C,b,45),[ba,K]=O(7,0+C,b,45),[J,aa]=O(5,0-z,b,45),[Z,ca]=O(7,0-z,b,45);return{pennants:N,barbs:T,shaft:[Y,X,ba,K,J,aa,Z,ca]}}function O(h,b,d,
l=1){return[Math.sqrt(h*h+b*b)/l,(2*Math.PI+(2*Math.PI+Math.atan2(b,h))%(2*Math.PI)-d)%(2*Math.PI)]}function F(h,b,d,l){d=W(l||"knots",d);for(l=1;l<b.length;l++)if(l===b.length-1){if(h<b[l]*d)break}else if(h<=b[l]*d)break;return Math.min(l-1,b.length-2)}function g(h,b,d,l,C){let z=0;switch(b){case "beaufort_kn":z=F(h,m,"knots",d);break;case "beaufort_km":z=F(h,m,"kilometer-per-hour",d);break;case "beaufort_ft":z=F(h,m,"feet-per-second",d);break;case "beaufort_m":z=F(h,m,"meter-per-second",d);break;
case "classified_arrow":z=F(h,C,l,d);break;case "ocean_current_m":z=F(h,k,"meter-per-second",d);break;case "ocean_current_kn":z=F(h,A,"knots",d)}return z}function w(h,b){const {style:d,inputUnit:l,outputUnit:C,breakValues:z}=b;b=a.fromJSON(l);const I=a.fromJSON(C);let x=0,t=0;const {width:e,height:p,mask:E}=h,v=h.pixels[0];h=h.pixels[1];var q=E?E.filter(N=>0<N).length:e*p;const n=new Float32Array(42*q);q=new Uint32Array(15*q);for(let N=0;N<p;N++)for(let T=0;T<e;T++){var D=N*e+T;if(!E||E[N*e+T]){var R;
const Y=null!=(R=(h[D]+360)%360/180*Math.PI)?R:2*Math.PI*Math.random(),X=g(v[D],d,b,I,z);for(let ba=0;ba<c.length;ba+=2)n[x++]=(T+.5)/e,n[x++]=(N+.5)/p,n[x++]=c[ba],n[x++]=c[ba+1]+Y,n[x++]=X,n[x++]=v[D];D=7*(x/42-1);q[t++]=D;q[t++]=D+1;q[t++]=D+2;q[t++]=D+0;q[t++]=D+4;q[t++]=D+3;q[t++]=D+0;q[t++]=D+2;q[t++]=D+3;q[t++]=D+2;q[t++]=D+5;q[t++]=D+3;q[t++]=D+5;q[t++]=D+6;q[t++]=D+3}}return{vertexData:n,indexData:q}}function G(h,b){let d=0,l=0;const {width:C,height:z,mask:I}=h;h=h.pixels[0];const x=[],t=
[];b="wind_speed"===b.style?5:Number.MAX_VALUE;for(let p=0;p<z;p++)for(let E=0;E<C;E++){var e=p*C+E;if((!I||I[p*C+E])&&h[e]<b){for(let v=0;4>v;v++)x[d++]=(E+.5)/C,x[d++]=(p+.5)/z,x[d++]=2>v?-.5:.5,x[d++]=0===v%2?-.5:.5,x[d++]=0,x[d++]=h[e];e=4*(d/24-1);t[l++]=e;t[l++]=e+1;t[l++]=e+2;t[l++]=e+1;t[l++]=e+2;t[l++]=e+3}}return{vertexData:new Float32Array(x),indexData:new Uint32Array(t)}}const y=new Map;y.set("meter-per-second",1);y.set("kilometer-per-hour",.277778);y.set("knots",.514444);y.set("feet-per-second",
.3048);y.set("mile-per-hour",.44704);const f=180/Math.PI,a=new H.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),c=function(h=0,b=0,d=Math.PI,l=!0){l&&(d=(2*Math.PI-d)%(2*Math.PI));l=l?-1:1;const C=-7*l,z=-2*l,I=-16*l,[x,t]=O(0,b+13*l,d,29),[e,p]=O(h-5.5,b+C,d,29),[E,v]=O(h+5.5,b+C,d,29),[q,n]=O(h-1.5,b+z,d,29),[D,R]=O(h+1.5,b+z,d,29),[N,T]=O(h-1.5,b+I,d,29),[Y,X]=O(h+
1.5,b+I,d,29);return[x,t,e,p,q,n,D,R,E,v,N,T,Y,X]}(0,0,0),m=[0,1,3,6,10,16,21,27,33,40,47,55,63],k=[0,.5,1,1.5,2],A=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],B=[];V.convertVectorFieldData=function(h,b,d="geographic",l=1){if(!r.isValidPixelBlock(h))return h;const {pixels:C,width:z,height:I}=h;var x=z*I;const t=C[0],e=C[1],p=Q.createEmptyBand(h.pixelType,x);x=Q.createEmptyBand(h.pixelType,x);let E=0;for(let v=0;v<I;v++)for(let q=0;q<z;q++)"vector-uv"===b?([p[E],x[E]]=S([t[E],e[E]],d),p[E]*=l):([p[E],x[E]]=U([t[E],
e[E]],d),p[E]*=l,x[E]*=l),E++;h=new Q({pixelType:h.pixelType,width:h.width,height:h.height,mask:h.mask,validPixelCount:h.validPixelCount,maskIsAlpha:h.maskIsAlpha,pixels:[p,x]});h.updateStatistics();return h};V.convertVectorFieldUnit=function(h,b,d=1){if(1===d||!r.isValidPixelBlock(h))return h;h=h.clone();const {pixels:l,width:C,height:z}=h,I=l[0],x=l[1];let t=0;for(let e=0;e<z;e++)for(let p=0;p<C;p++)"vector-uv"===b?(I[t]*=d,x[t]*=d):I[t]*=d,t++;h.updateStatistics();return h};V.createVFMesh=function(h,
b){if("simple_scalar"===b.style)var d=G(h,b);else if("wind_speed"===b.style){{if(0===B.length)for(var l=0;30>l;l++)B.push(P(5*l,0));b=a.fromJSON(b.inputUnit);b=W(b,"knots");const {width:x,height:t,mask:e}=h;l=h.pixels[0];h=h.pixels[1];const p=[],E=[];let v=0,q=0;for(let n=0;n<t;n++)for(let D=0;D<x;D++){var C=n*x+D,z=l[C]*b;if((!e||e[n*x+D])&&5<=z){const R=null!=(d=(h[C]+360)%360/180*Math.PI)?d:2*Math.PI*Math.random(),{pennants:N,barbs:T,shaft:Y}=B[Math.min(Math.floor(z/5),29)];if(0===N.length+T.length)continue;
C=p.length/6;const X=(D+.5)/x,ba=(n+.5)/t;for(var I=0;I<N.length;I+=2)p[v++]=X,p[v++]=ba,p[v++]=N[I],p[v++]=N[I+1]+R,p[v++]=0,p[v++]=z;for(I=0;I<T.length;I+=2)p[v++]=X,p[v++]=ba,p[v++]=T[I],p[v++]=T[I+1]+R,p[v++]=0,p[v++]=z;for(I=0;I<Y.length;I+=2)p[v++]=X,p[v++]=ba,p[v++]=Y[I],p[v++]=Y[I+1]+R,p[v++]=0,p[v++]=z;for(z=0;z<N.length/6;z++)E[q++]=C,E[q++]=C+1,E[q++]=C+2,C+=3;for(z=0;z<T.length/8;z++)E[q++]=C,E[q++]=C+1,E[q++]=C+2,E[q++]=C+1,E[q++]=C+2,E[q++]=C+3,C+=4;E[q++]=C+0;E[q++]=C+1;E[q++]=C+2;
E[q++]=C+1;E[q++]=C+3;E[q++]=C+2;C+=4}}d={vertexData:new Float32Array(p),indexData:new Uint32Array(E)}}}else d=w(h,b);return d};V.createVFMeshScalar=G;V.getUnitConversionFactor=W;V.sampleVectorField=function(h,b,d,l=[0,0],C=.5){const {width:z,height:I,mask:x}=h,[t,e]=h.pixels,[p,E]=l;h=Math.round((z-p)/d);l=Math.round((I-E)/d);var v=h*l;const q=new Float32Array(v),n=new Float32Array(v);v=new Uint8Array(v);b="vector-uv"===b;for(let R=0;R<l;R++)for(let N=0;N<h;N++){let T=0;const Y=R*h+N,X=Math.max(0,
R*d+E),ba=Math.max(0,N*d+p),K=Math.min(I,X+d),J=Math.min(z,ba+d);for(let aa=X;aa<K;aa++)for(let Z=ba;Z<J;Z++){var D=aa*z+Z;if(!x||x[D]){T++;D=b?[t[D],e[D]]:[t[D],(360+e[D])%360];const [ca,ea]=b?D:U(D);q[Y]+=ca;n[Y]+=ea}}if(T>=(K-X)*(J-ba)*(1-C)){v[Y]=1;const [aa,Z]=S([q[Y]/T,n[Y]/T]);q[Y]=aa;n[Y]=Z}else v[Y]=0,q[Y]=0,n[Y]=0}d=new Q({width:h,height:l,pixels:[q,n],mask:v});d.updateStatistics();return d};V.snapImageToSymbolTile=function(h,b,d,l,C){if(!u.isSome(C)||!C.spatialReference.equals(h.spatialReference))return{extent:h,
width:b,height:d,resolution:h.width/b};const z=C.xmin;C=C.ymax;l=Math.max(l||0,30);b=((h.xmax-h.xmin)/Math.ceil(1/l*b)+(h.ymax-h.ymin)/Math.ceil(1/l*d))/2;h.xmin=z+Math.floor((h.xmin-z)/b)*b;h.xmax=z+Math.ceil((h.xmax-z)/b)*b;h.ymin=C+Math.floor((h.ymin-C)/b)*b;h.ymax=C+Math.ceil((h.ymax-C)/b)*b;return{extent:h,width:Math.round(h.width/b),height:Math.round(h.height/b),resolution:b}};V.unitKebabDict=a;V.uvComponentToVector=S;Object.defineProperty(V,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F){var g;const w=S.getLogger("esri.layers.support.PixelBlock");u=g=function(G){function y(a){a=G.call(this,a)||this;a.width=null;a.height=null;a.pixelType="f32";a.validPixelCount=null;a.mask=null;a.maskIsAlpha=!1;a.pixels=null;a.statistics=null;return a}V._inheritsLoose(y,G);y.createEmptyBand=function(a,c){return new (g.getPixelArrayConstructor(a))(c)};y.getPixelArrayConstructor=function(a){let c;switch(a){case "u1":case "u2":case "u4":case "u8":c=Uint8Array;break;case "u16":c=
Uint16Array;break;case "u32":c=Uint32Array;break;case "s8":c=Int8Array;break;case "s16":c=Int16Array;break;case "s32":c=Int32Array;break;case "u32":c=Uint32Array;break;case "f32":c=Float32Array;break;case "f64":c=Float64Array;break;case "c64":case "c128":case "unknown":c=Float32Array}return c};var f=y.prototype;f.castPixelType=function(a){if(!a)return"f32";a=a.toLowerCase();-1<["u1","u2","u4"].indexOf(a)?a="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(a)&&(a="f32");return a};
f.getPlaneCount=function(){return this.pixels&&this.pixels.length};f.addData=function(a){if(!a.pixels||a.pixels.length!==this.width*this.height)throw new Q("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(a.pixels);this.statistics.push(a.statistics||{minValue:null,maxValue:null})};f.getAsRGBA=function(){const a=new ArrayBuffer(this.width*
this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(a);break;default:this._fillFrom8Bit(a)}return new Uint8ClampedArray(a)};f.getAsRGBAFloat=function(){const a=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(a);return a};f.updateStatistics=function(){this.statistics=this.pixels.map(m=>this._calculateBandStatistics(m,this.mask));const a=this.mask;let c=0;if(a)for(let m=0;m<a.length;m++)a[m]&&c++;else c=
this.width*this.height;this.validPixelCount=c};f.clamp=function(a){if(a&&"f64"!==a&&"f32"!==a){switch(a){case "u8":var c=[0,255];break;case "u16":c=[0,65535];break;case "u32":c=[0,4294967295];break;case "s8":c=[-128,127];break;case "s16":c=[-32768,32767];break;case "s32":c=[-2147483648,2147483647];break;default:c=[-3.4*1E39,3.4*1E39]}var [m,k]=c;c=this.pixels;var A=this.width*this.height,B=c.length,h=[];for(let C=0;C<B;C++){var b=g.createEmptyBand(a,A);var d=c[C];for(let z=0;z<A;z++){var l=d[z];b[z]=
l>k?k:l<m?m:l}h.push(b)}this.pixels=h;this.pixelType=a}};f.extractBands=function(a){if(U.isNone(a)||0===a.length||null==this.pixels||0===this.pixels.length)return this;var c=this.pixels.length;const m=a.some(k=>k>=this.pixels.length);c=c===a.length&&!a.some((k,A)=>k!==A);return m||c?this:new g({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:a.map(k=>this.pixels[k]),statistics:this.statistics&&a.map(k=>
this.statistics[k])})};f.clone=function(){const a=new g({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(a.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let c;const m=g.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){a.pixels=[];const k=this.pixels[0].slice;for(c=0;c<this.pixels.length;c++)a.pixels[c]=k?this.pixels[c].slice(0,this.pixels[c].length):
new m(this.pixels[c])}if(this.statistics)for(a.statistics=[],c=0;c<this.statistics.length;c++)a.statistics[c]=W.clone(this.statistics[c]);return a};f._fillFrom8Bit=function(a){const {mask:c,maskIsAlpha:m,pixels:k}=this;if(a&&k&&k.length){var A,B;var h=A=B=k[0];3<=k.length?(A=k[1],B=k[2]):2===k.length&&(A=k[1]);var b=new Uint32Array(a),d=this.width*this.height;if(h.length!==d)w.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(c&&c.length===d)if(m)for(a=0;a<d;a++)c[a]&&
(b[a]=c[a]<<24|B[a]<<16|A[a]<<8|h[a]);else for(a=0;a<d;a++)c[a]&&(b[a]=-16777216|B[a]<<16|A[a]<<8|h[a]);else for(a=0;a<d;a++)b[a]=-16777216|B[a]<<16|A[a]<<8|h[a]}else w.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};f._fillFromNon8Bit=function(a){const {pixels:c,mask:m,statistics:k}=this;if(a&&c&&c.length){var A=this.pixelType,B=1,h=0;B=1;k&&0<k.length?(h=k.map(z=>z.minValue).reduce((z,I)=>Math.min(z,I)),B=k.map(z=>z.maxValue-z.minValue).reduce((z,I)=>Math.max(z,
I)),B=255/B):(B=255,"s8"===A?(h=-128,B=127):"u16"===A?B=65535:"s16"===A?(h=-32768,B=32767):"u32"===A?B=4294967295:"s32"===A?(h=-2147483648,B=2147483647):"f32"===A?(h=-3.4*1E39,B=3.4*1E39):"f64"===A&&(h=-Number.MAX_VALUE,B=Number.MAX_VALUE),B=255/(B-h));a=new Uint32Array(a);A=this.width*this.height;var b,d,l;var C=b=d=c[0];if(C.length!==A)return w.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=c.length)if(b=c[1],3<=c.length&&(d=c[2]),m&&m.length===A)for(l=0;l<A;l++)m[l]&&
(a[l]=-16777216|(d[l]-h)*B<<16|(b[l]-h)*B<<8|(C[l]-h)*B);else for(l=0;l<A;l++)a[l]=-16777216|(d[l]-h)*B<<16|(b[l]-h)*B<<8|(C[l]-h)*B;else if(m&&m.length===A)for(l=0;l<A;l++)b=(C[l]-h)*B,m[l]&&(a[l]=-16777216|b<<16|b<<8|b);else for(l=0;l<A;l++)b=(C[l]-h)*B,a[l]=-16777216|b<<16|b<<8|b}else w.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};f._fillFrom32Bit=function(a){const {pixels:c,mask:m}=this;if(!a||!c||!c.length)return w.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let k,A,B,h;k=A=B=c[0];3<=c.length?(A=c[1],B=c[2]):2===c.length&&(A=c[1]);const b=this.width*this.height;if(k.length!==b)return w.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let d=0;if(m&&m.length===b)for(h=0;h<b;h++)a[d++]=k[h],a[d++]=A[h],a[d++]=B[h],a[d++]=m[h]&1;else for(h=0;h<b;h++)a[d++]=k[h],a[d++]=A[h],a[d++]=B[h],a[d++]=1};f._calculateBandStatistics=function(a,c){let m=Infinity,k=-Infinity;const A=a.length;let B,h=0;if(c)for(B=0;B<A;B++)c[B]&&(h=a[B],
m=h<m?h:m,k=h>k?h:k);else for(B=0;B<A;B++)h=a[B],m=h<m?h:m,k=h>k?h:k;return{minValue:m,maxValue:k}};return y}(r.JSONSupport);H.__decorate([P.property({json:{write:!0}})],u.prototype,"width",void 0);H.__decorate([P.property({json:{write:!0}})],u.prototype,"height",void 0);H.__decorate([P.property({json:{write:!0}})],u.prototype,"pixelType",void 0);H.__decorate([O.cast("pixelType")],u.prototype,"castPixelType",null);H.__decorate([P.property({json:{write:!0}})],u.prototype,"validPixelCount",void 0);
H.__decorate([P.property({json:{write:!0}})],u.prototype,"mask",void 0);H.__decorate([P.property({json:{write:!0}})],u.prototype,"maskIsAlpha",void 0);H.__decorate([P.property({json:{write:!0}})],u.prototype,"pixels",void 0);H.__decorate([P.property({json:{write:!0}})],u.prototype,"statistics",void 0);return u=g=H.__decorate([F.subclass("esri.layers.support.PixelBlock")],u)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(V,
H,u){function Q(f){return H.isSome(f)&&"esri.layers.support.PixelBlock"===f.declaredClass&&f.pixels&&0<f.pixels.length}function r(f,a){f=Math.min(Math.max(f,-100),100);a=Math.min(Math.max(a,-100),100);let c,m;const k=new Uint8Array(256);for(c=0;256>c;c++)0<f&&100>f?m=(200*c-25500+510*a)/(2*(100-f))+128:0>=f&&-100<f?m=(200*c-25500+510*a)*(100+f)/2E4+128:100===f?(m=200*c-25500+256*(100-f)+510*a,m=0<m?255:0):-100===f&&(m=128),k[c]=255<m?255:0>m?0:m;return k}function W(f,a,c,m,k,A,B,h){return{xmin:k<=
c*f?0:k<c*f+f?k-c*f:f,ymin:A<=m*a?0:A<m*a+a?A-m*a:a,xmax:k+B<=c*f?0:k+B<c*f+f?k+B-c*f:f,ymax:A+h<=m*a?0:A+h<m*a+a?A+h-m*a:a}}function S(f,a,c,m,k,A){const {width:B,height:h}=c.block,{x:b,y:d}=c.offset,{width:l,height:C}=c.mosaic;c=W(B,h,m,k,b,d,l,C);let z=0;var I=0;if(A){var x=A.hasGCSSShiftTransform?360:A.halfWorldWidth,t=B*A.resolutionX,e=A.startX+m*t;t=e+t;e<x&&t>x?I=A.rightPadding:e>=x&&(z=A.leftMargin-A.rightPadding,I=0)}c.xmax-=I;if("number"===typeof a)for(A=c.ymin;A<c.ymax;A++)for(I=(k*h+A-
d)*l+(m*B-b)+z,x=c.xmin;x<c.xmax;x++)f[I+x]=a;else for(A=c.ymin;A<c.ymax;A++)for(I=(k*h+A-d)*l+(m*B-b)+z,x=A*B,e=c.xmin;e<c.xmax;e++)f[I+e]=a[x+e]}function U(f,a,c={}){const {clipOffset:m,clipSize:k,alignmentInfo:A,blockWidths:B}=c;if(B)return P(f,a,{blockWidths:B});var h=f.filter(E=>Q(E))[0];if(H.isNone(h))return null;c=k?k.width:a.width;const b=k?k.height:a.height;var d=h.width,l=h.height;const C=a.width/d,z=a.height/l;a={offset:m||{x:0,y:0},mosaic:k||a,block:{width:d,height:l}};d=h.pixelType;l=
u.getPixelArrayConstructor(d);var I=h.pixels.length;h=[];for(var x=0;x<I;x++){var t=new l(c*b);for(let E=0;E<z;E++)for(let v=0;v<C;v++){var e=f[E*C+v];Q(e)&&(e=e.pixels[x],S(t,e,a,v,E,A))}h.push(t)}let p;if(f.some(E=>H.isNone(E)||E.mask&&0<E.mask.length))for(p=new Uint8Array(c*b),l=0;l<z;l++)for(I=0;I<C;I++)t=f[l*C+I],(x=H.isSome(t)?t.mask:null)?S(p,x,a,I,l,A):t?S(p,1,a,I,l,A):S(p,0,a,I,l,A);f=new u({width:c,height:b,pixels:h,pixelType:d,mask:p});f.updateStatistics();return f}function P(f,a,c){const m=
f.find(I=>H.isSome(I));if(!H.isSome(m))return null;var k=f.some(I=>H.isSome(I)?!!I.mask:!0);const {width:A,height:B}=a;a=k?new Uint8Array(A*B):null;({blockWidths:c}=c);const h=[],b=m.getPlaneCount(),d=u.getPixelArrayConstructor(m.pixelType);if(k)for(let I=0,x=0;I<f.length;x+=c[I],I++)if(k=f[I],Q(k)){var l=k.mask;for(var C=0;C<B;C++)for(var z=0;z<c[I];z++)a[C*A+z+x]=null==l?255:l[C*k.width+z]}for(k=0;k<b;k++){l=new d(A*B);for(let I=0,x=0;I<f.length;x+=c[I],I++)if(C=f[I],Q(C)&&(z=C.pixels[k],null!=
z))for(let t=0;t<B;t++)for(let e=0;e<c[I];e++)l[t*A+e+x]=z[t*C.width+e];h.push(l)}f=new u({width:A,height:B,mask:a,pixels:h,pixelType:m.pixelType});f.updateStatistics();return f}function O(f){if(!Q(f))return null;const a=f.clone(),{width:c,height:m,pixels:k,mask:A}=f;var B=k[0];f=a.pixels[0];for(let d=2;d<m-1;d++){const l=new Map;for(var h=d-2;h<d+2;h++)for(var b=0;4>b;b++){const C=h*c+b;w(l,B[C],A?A[C]:1)}f[d*c]=F(l);f[d*c+1]=f[d*c+2]=f[d*c];for(h=3;h<c-1;h++)b=(d-2)*c+h+1,w(l,B[b],A?A[b]:1),b=(d-
1)*c+h+1,w(l,B[b],A?A[b]:1),b=d*c+h+1,w(l,B[b],A?A[b]:1),b=(d+1)*c+h+1,w(l,B[b],A?A[b]:1),b=(d-2)*c+h-3,g(l,B[b],A?A[b]:1),b=(d-1)*c+h-3,g(l,B[b],A?A[b]:1),b=d*c+h-3,g(l,B[b],A?A[b]:1),b=(d+1)*c+h-3,g(l,B[b],A?A[b]:1),f[d*c+h]=F(l);f[d*c+h+1]=f[d*c+h]}for(B=0;B<c;B++)f[B]=f[c+B]=f[2*c+B],f[(m-1)*c+B]=f[(m-2)*c+B];a.updateStatistics();return a}function F(f){if(0===f.size)return 0;let a=0,c=-1,m=0;const k=f.keys();let A=k.next();for(;!A.done;)m=f.get(A.value),m>a&&(c=A.value,a=m),A=k.next();return c}
function g(f,a,c){0!==c&&(c=f.get(a),1===c?f.delete(a):f.set(a,c-1))}function w(f,a,c){0!==c&&f.set(a,f.has(a)?f.get(a)+1:1)}function G(f,a,c){let {x:m,y:k}=a;const {width:A,height:B}=c;if(0===m&&0===k&&B===f.height&&A===f.width)return f;const {width:h,height:b}=f;a=Math.max(0,k);const d=Math.max(0,m),l=Math.min(m+A,h),C=Math.min(k+B,b);if(0>l||0>C||!Q(f))return null;m=Math.max(0,-m);k=Math.max(0,-k);const {pixels:z,mask:I}=f;var x=A*B,t=z.length;const e=[];for(var p=0;p<t;p++){var E=z[p],v=u.createEmptyBand(f.pixelType,
x);for(let q=a;q<C;q++){const n=q*h;let D=(q+k-a)*A+m;for(let R=d;R<l;R++)v[D++]=E[n+R]}e.push(v)}x=new Uint8Array(x);for(t=a;t<C;t++)for(p=t*h,E=(t+k-a)*A+m,v=d;v<l;v++)x[E++]=I?I[p+v]:1;f=new u({width:c.width,height:c.height,pixelType:f.pixelType,pixels:e,mask:x});f.updateStatistics();return f}function y(f,a=!0){if(!Q(f))return null;const {pixels:c,width:m,height:k,mask:A,pixelType:B}=f;f=[];const h=Math.round(m/2),b=Math.round(k/2),d=k-1,l=m-1;for(var C=0;C<c.length;C++){var z=c[C],I=u.createEmptyBand(B,
h*b),x=0;for(var t=0;t<k;t+=2)for(var e=0;e<m;e+=2){var p=z[t*m+e];if(a){var E=e===l?p:z[t*m+e+1];const v=t===d?p:z[t*m+e+m],q=e===l?v:t===d?E:z[t*m+e+m+1];I[x++]=(p+E+v+q)/4}else I[x++]=p}f.push(I)}C=null;if(A)for(C=new Uint8Array(h*b),z=0,I=0;I<k;I+=2)for(x=0;x<m;x+=2)t=A[I*m+x],a?(e=x===l?t:A[I*m+x+1],p=I===d?t:A[I*m+x+m],E=x===l?p:I===d?e:A[I*m+x+m+1],C[z++]=t*e*p*E?1:0):C[z++]=t;return new u({width:h,height:b,pixelType:B,pixels:f,mask:C})}V.approximateTransform=function(f,a,c,m,k="nearest"){if(!Q(f))return null;
"majority"===k&&(f=O(f));const {pixels:A,mask:B,pixelType:h}=f,b=f.width;var d=f.height;f=u.getPixelArrayConstructor(h);var l=A.length;const {width:C,height:z}=a;a=m.cols;var I=m.rows;const x=Math.ceil(C/a-.1/a),t=Math.ceil(z/I-.1/I);m=!1;for(var e=0;e<c.length;e+=3)-1===c[e]&&-1===c[e+1]&&-1===c[e+2]&&(m=!0);let p,E,v,q,n,D;const R=x*a;e=R*t*I;const N=new Float32Array(e),T=new Float32Array(e);e=0;let Y,X;const ba="majority"===k?0:.5;for(let aa=0;aa<t;aa++)for(let Z=0;Z<x;Z++){p=12*(aa*x+Z);k=c[p];
E=c[p+1];v=c[p+2];q=c[p+3];n=c[p+4];D=c[p+5];for(var K=0;K<I;K++){e=(aa*I+K)*R+Z*a;X=(K+.5)/I;for(var J=0;J<K;J++)Y=(J+.5)/a,N[e+J]=Math.round((k*Y+E*X+v)*b-ba),T[e+J]=Math.round((q*Y+n*X+D)*d-ba)}p+=6;k=c[p];E=c[p+1];v=c[p+2];q=c[p+3];n=c[p+4];D=c[p+5];for(K=0;K<I;K++)for(e=(aa*I+K)*R+Z*a,X=(K+.5)/I,J=K;J<a;J++)Y=(J+.5)/a,N[e+J]=Math.round((k*Y+E*X+v)*b-ba),T[e+J]=Math.round((q*Y+n*X+D)*d-ba)}c=(aa,Z)=>{for(let ca=0;ca<z;ca++){p=ca*R;for(let ea=0;ea<C;ea++)aa[ca*C+ea]=0>N[p]||0>T[p]?0:Z[N[p]+T[p]*
b],p++}};d=[];for(I=0;I<l;I++)a=new f(C*z),c(a,A[I]),d.push(a);f=new u({width:C,height:z,pixelType:h,pixels:d});if(B)f.mask=new Uint8Array(C*z),c(f.mask,B);else if(m)for(f.mask=new Uint8Array(C*z),l=0;l<C*z;l++)f.mask[l]=0>N[l]||0>T[l]?0:1;f.updateStatistics();return f};V.clip=G;V.colorize=function(f,a){if(!Q(f)||!a&&(a.indexedColormap||a.indexed2DColormap))return f;const c=f.clone();var m=c.pixels;let k=c.mask;const A=c.width*c.height;if(1!==m.length)return f;const {indexedColormap:B,indexed2DColormap:h,
offset:b,alphaSpecified:d}=a;a=B.length-1;f=0;m=m[0];const l=new Uint8Array(m.length),C=new Uint8Array(m.length),z=new Uint8Array(m.length);let I=0;if(B)if(k)for(f=0;f<A;f++)k[f]&&(I=4*(m[f]-b),I<b||I>a?k[f]=0:(l[f]=B[I],C[f]=B[I+1],z[f]=B[I+2],k[f]=B[I+3]));else{k=new Uint8Array(A);for(f=0;f<A;f++)I=4*(m[f]-b),I<b||I>a?k[f]=0:(l[f]=B[I],C[f]=B[I+1],z[f]=B[I+2],k[f]=B[I+3]);c.mask=k}else if(k)for(f=0;f<A;f++)k[f]&&(a=h[m[f]],l[f]=a[0],C[f]=a[1],z[f]=a[2],k[f]=a[3]);else{k=new Uint8Array(A);for(f=
0;f<A;f++)a=h[m[f]],l[f]=a[0],C[f]=a[1],z[f]=a[2],k[f]=a[3];c.mask=k}c.pixels=[l,C,z];c.statistics=null;c.pixelType="u8";c.maskIsAlpha=d;return c};V.createColormapLUT=function(f){if(f){var a=f.colormap;if(a&&0!==a.length){a=a.sort((d,l)=>d[0]-l[0]);var c=0;0>a[0][0]&&(c=a[0][0]);var m=Math.max(256,a[a.length-1][0]-c+1),k=new Uint8Array(4*m),A=[],B=0,h=0,b=5===a[0].length;if(65536<m)return a.forEach(d=>{A[d[0]-c]=b?d.slice(1):d.slice(1).concat([255])}),{indexed2DColormap:A,offset:c,alphaSpecified:b};
if(f.fillUnspecified)for(f=a[h],B=f[0]-c;B<m;B++)k[4*B]=f[1],k[4*B+1]=f[2],k[4*B+2]=f[3],k[4*B+3]=b?f[4]:255,B===f[0]-c&&(f=h===a.length-1?f:a[++h]);else for(B=0;B<a.length;B++)f=a[B],h=4*(f[0]-c),k[h]=f[1],k[h+1]=f[2],k[h+2]=f[3],k[h+3]=b?f[4]:255;return{indexedColormap:k,offset:c,alphaSpecified:b}}}};V.createContrastBrightnessLUT=r;V.createHistogramEqualizationLUT=function(f,a=256){a=Math.min(a,256);const {size:c,counts:m}=f;f=new Uint8Array(c);var k=m.reduce((d,l)=>d+l/a,0);let A=0;var B=0;let h=
0,b=k;for(let d=0;d<c;d++)if(h+=m[d],!(d<c-1&&h+m[d+1]<b)){for(;A<a-1&&b<h;)A++,b+=k;for(;B<=d;B++)f[B]=A;B=d+1}for(k=B;k<c;k++)f[k]=a-1;return f};V.createStretchLUT=function(f){const {minCutOff:a,maxCutOff:c,gamma:m,pixelType:k}=f,A=f.outMin||0,B=f.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(k))return null;const h=a.length;let b;let d=0;"s8"===k?d=-127:"s16"===k&&(d=-32767);let l=256;-1<["u16","s16"].indexOf(k)&&(l=65536);const C=[],z=B-A;for(b=0;b<h;b++)C[b]=c[b]-a[b];var I=m&&m.length>=
h;const x=[];if(I)for(b=0;b<h;b++)x[b]=1<m[b]?2<m[b]?6.5+(m[b]-2)**2.5:6.5+100*(2-m[b])**4:1;let t;const e=[];let p,E,v;if(I)for(b=0;b<h;b++){v=[];for(I=0;I<l;I++)p=I+d,t=(p-a[b])/C[b],E=1,1<m[b]&&(E-=(1/z)**(t*x[b])),v[I]=p<c[b]&&p>a[b]?Math.floor(E*z*t**(1/m[b]))+A:p>=c[b]?B:A;e[b]=v}else for(b=0;b<h;b++){v=[];for(I=0;I<l;I++)p=I+d,v[I]=p<=a[b]?A:p>=c[b]?B:Math.floor((p-a[b])/C[b]*z)+A;e[b]=v}if(null!=f.contrastOffset)for(f=r(f.contrastOffset,f.brightnessOffset),b=0;b<h;b++)for(v=e[b],I=0;I<l;I++)v[I]=
f[v[I]];return{lut:e,offset:d}};V.estimateStatisticsFromHistograms=function(f){const a=[];for(let A=0;A<f.length;A++){const {min:B,max:h,size:b,counts:d}=f[A];let l=0;var c=0;for(var m=0;m<b;m++)l+=d[m],c+=m*d[m];c/=l;m=0;for(var k=0;k<b;k++)m+=d[k]*(k-c)**2;k=(h-B)/b;a.push({min:B,max:h,avg:(c+.5)*k+B,stddev:Math.sqrt(m/(l-1))*k})}return a};V.estimateStatisticsHistograms=function(f){if(!Q(f))return null;f.statistics||f.updateStatistics();const {pixels:a,mask:c,pixelType:m,statistics:k}=f;f=f.width*
f.height;const A=a.length;let B,h;let b;var d;const l=[],C=[];for(b=0;b<A;b++){var z=new Uint32Array(256);var I=a[b];if("u8"===m)if(B=-.5,h=255.5,c)for(d=0;d<f;d++)c[d]&&z[I[d]]++;else for(d=0;d<f;d++)z[I[d]]++;else{B=k[b].minValue;h=k[b].maxValue;var x=(h-B)/256;var t=new Uint32Array(257);if(c)for(d=0;d<f;d++)c[d]&&t[Math.floor((I[d]-B)/x)]++;else for(d=0;d<f;d++)t[Math.floor((I[d]-B)/x)]++;for(d=0;255>d;d++)z[d]=t[d];z[255]=t[255]+t[256]}l.push({min:B,max:h,size:256,counts:z});for(d=I=t=x=0;256>
d;d++)x+=z[d],t+=d*z[d];t/=x;for(d=0;256>d;d++)I+=z[d]*(d-t)**2;z=Math.sqrt(I/(x-1));x=(h-B)/256;d=(t+.5)*x+B;z*=x;C.push({min:B,max:h,avg:d,stddev:z})}return{statistics:C,histograms:l}};V.extractBands=function(f,a){if(null==a||!a.length||!Q(f))return f;const c=f.pixels.length;return a&&a.some(m=>m>=c)||1===c&&1===a.length&&0===a[0]||c===a.length&&!a.some((m,k)=>m!==k)?f:new u({pixelType:f.pixelType,width:f.width,height:f.height,mask:f.mask,validPixelCount:f.validPixelCount,maskIsAlpha:f.maskIsAlpha,
pixels:a.map(m=>f.pixels[m]),statistics:f.statistics&&a.map(m=>f.statistics[m])})};V.getClipBounds=W;V.isValidPixelBlock=Q;V.lookupPixels=function(f,a){if(!Q(f))return null;const {pixels:c,mask:m}=f,k=f.width*f.height,A=c.length;let B=a.lut;({offset:a}=a);let h,b;B&&1===B[0].length&&(B=c.map(()=>B));const d=[];let l,C,z;if(a)if(null==m)for(h=0;h<A;h++){l=c[h];C=B[h];z=new Uint8Array(k);for(b=0;b<k;b++)z[b]=C[l[b]-a];d.push(z)}else for(h=0;h<A;h++){l=c[h];C=B[h];z=new Uint8Array(k);for(b=0;b<k;b++)m[b]&&
(z[b]=C[l[b]-a]);d.push(z)}else if(null==m)for(h=0;h<A;h++){l=c[h];C=B[h];z=new Uint8Array(k);for(b=0;b<k;b++)z[b]=C[l[b]];d.push(z)}else for(h=0;h<A;h++){l=c[h];C=B[h];z=new Uint8Array(k);for(b=0;b<k;b++)m[b]&&(z[b]=C[l[b]]);d.push(z)}f=new u({width:f.width,height:f.height,pixels:d,mask:m,pixelType:"u8"});f.updateStatistics();return f};V.mosaic=U;V.mosaicPixelData=function(f,a){if(!f||0===f.length)return null;var c=f.filter(C=>C.pixelBlock)[0];if(!c||H.isNone(c.pixelBlock))return null;var m=(c.extent.xmax-
c.extent.xmin)/c.pixelBlock.width;const k=(c.extent.ymax-c.extent.ymin)/c.pixelBlock.height,A=.01*Math.min(m,k),B=f.sort((C,z)=>Math.abs(C.extent.ymax-z.extent.ymax)>A?z.extent.ymax-C.extent.ymax:Math.abs(C.extent.xmin-z.extent.xmin)>A?C.extent.xmin-z.extent.xmin:0);var h=Math.min.apply(null,B.map(C=>C.extent.xmin));const b=Math.min.apply(null,B.map(C=>C.extent.ymin)),d=Math.max.apply(null,B.map(C=>C.extent.xmax)),l=Math.max.apply(null,B.map(C=>C.extent.ymax));f={x:Math.round((a.xmin-h)/m),y:Math.round((l-
a.ymax)/k)};h={width:Math.round((d-h)/m),height:Math.round((l-b)/k)};m={width:Math.round((a.xmax-a.xmin)/m),height:Math.round((a.ymax-a.ymin)/k)};if(Math.round(h.width/c.pixelBlock.width)*Math.round(h.height/c.pixelBlock.height)!==B.length||0>f.x||0>f.y||h.width<m.width||h.height<m.height)return null;c=B.map(C=>C.pixelBlock);c=U(c,h,{clipOffset:f,clipSize:m});return{extent:a,pixelBlock:c}};V.remapColor=function(f,a){if(!Q(f))return null;f=f.clone();var {pixels:c}=f;const m=f.width*f.height,k=a.length,
A=Math.floor(k/2),B=a[Math.floor(A)];c=c[0];let h,b,d,l,C,z,I=!1;const x=new Uint8Array(m),t=new Uint8Array(m),e=new Uint8Array(m);let p=f.mask;const E=4===a[0].mappedColor.length;p||(p=new Uint8Array(m),p.fill(E?255:1),f.mask=p);for(C=0;C<m;C++)if(p[C]){h=c[C];I=!1;z=A;b=B;d=0;for(l=k-1;1<l-d;){if(h===b.value){I=!0;break}h>b.value?d=z:l=z;z=Math.floor((d+l)/2);b=a[Math.floor(z)]}I||(h===a[d].value?(b=a[d],I=!0):h===a[l].value?(b=a[l],I=!0):h<a[d].value?(I=!1,b=null):h>a[d].value&&(h<a[l].value?(b=
a[d],I=!0):l===k-1?(I=!1,b=null):(b=a[l],I=!0)));I?(x[C]=b.mappedColor[0],t[C]=b.mappedColor[1],e[C]=b.mappedColor[2],p[C]=b.mappedColor[3]):x[C]=t[C]=e[C]=p[C]=0}f.pixels=[x,t,e];f.mask=p;f.pixelType="u8";f.maskIsAlpha=E;return f};V.resampleByMajority=O;V.setValidBoundary=function(f,a,c){if(!Q(f))return null;const {width:m,height:k}=f,A=a.x;a=a.y;const B=c.width+A;c=c.height+a;if(0>A||0>a||B>m||c>k||0===A&&0===a&&B===m&&c===k)return f;f.mask||(f.mask=new Uint8Array(m*k));const h=f.mask;for(let b=
0;b<k;b++){const d=b*m;for(let l=0;l<m;l++)h[d+l]=b<a||b>=c||l<A||l>=B?0:1}f.updateStatistics();return f};V.split=function(f,a,c){if(!Q(f))return null;const {width:m,height:k}=a;let {width:A,height:B}=f;const h=new Map,b={x:0,y:0};c=null==c?1:1+c;for(let d=0;d<c;d++){const l=Math.ceil(A/m),C=Math.ceil(B/k);for(let z=0;z<C;z++){b.y=z*k;for(let I=0;I<l;I++){b.x=I*m;const x=G(f,b,a);h.set(`${d}/${z}/${I}`,x)}}d<c-1&&(f=y(f));A=Math.round(A/2);B=Math.round(B/2)}return h};V.stretch=function(f,a){if(!Q(f))return null;
f=f.clone();const {pixels:c,mask:m}=f,{minCutOff:k,maxCutOff:A,gamma:B}=a,h=a.outMin||0;a=a.outMax||255;const b=f.width*f.height,d=c.length;let l;let C,z,I;const x=a-h,t=[];for(l=0;l<d;l++)t[l]=A[l]-k[l];var e=B&&B.length>=d;const p=[];if(e)for(l=0;l<d;l++)p[l]=1<B[l]?2<B[l]?6.5+(B[l]-2)**2.5:6.5+100*(2-B[l])**4:1;if(e)if(null!=m)for(e=0;e<b;e++){if(m[e])for(l=0;l<d;l++)C=c[l][e],I=(C-k[l])/t[l],z=1,1<B[l]&&(z-=(1/x)**(I*p[l])),c[l][e]=C<A[l]&&C>k[l]?Math.floor(z*x*I**(1/B[l]))+h:C>=A[l]?a:h}else for(e=
0;e<b;e++)for(l=0;l<d;l++)C=c[l][e],I=(C-k[l])/t[l],z=1,1<B[l]&&(z-=(1/x)**(I*p[l])),c[l][e]=C<A[l]&&C>k[l]?Math.floor(z*x*I**(1/B[l]))+h:C>=A[l]?a:h;else if(null!=m)for(e=0;e<b;e++){if(m[e])for(l=0;l<d;l++)C=c[l][e],c[l][e]=C<A[l]&&C>k[l]?Math.floor((C-k[l])/t[l]*x)+h:C>=A[l]?a:h}else for(e=0;e<b;e++)for(l=0;l<d;l++)C=c[l][e],c[l][e]=C<A[l]&&C>k[l]?Math.floor((C-k[l])/t[l]*x)+h:C>=A[l]?a:h;f.pixelType="u8";f.updateStatistics();return f};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w){function G(t){t=t.symbolLayers;if(!t)return null;let e=null;t.forEach(p=>{if("object"!==p.type||null==p.resource.href)e="water"===p.type?U.unwrap(p.color):U.isSome(p.material)?U.unwrap(p.material.color):null});return e?new Q(e):null}function y(t,e){if(null==e)return t;t=t.toRgba();t[3]*=e;return new Q(t)}function f(t,e,p){if(t=t.symbolLayers){var E=v=>{v=U.isSome(v)?v:null;e=e||v||null!=p&&x;return y(e,p)};t.forEach(v=>{if("object"!==v.type||null==v.resource.href||
e)if("water"===v.type)v.color=E(v.color);else{var q=U.isSome(v.material)?v.material.color:null;q=E(q);U.isNone(v.material)?v.material=new w.default({color:q}):v.material.color=q;null!=p&&"outline"in v&&U.isSome(v.outline)&&U.isSome(v.outline.color)&&(v.outline.color=y(v.outline.color,p))}})}}function a(t,e){return c.apply(this,arguments)}function c(){c=u._asyncToGenerator(function*(t,e){(t=t.symbolLayers)&&(yield W.forEach(t,function(){var p=u._asyncToGenerator(function*(E){return m(E,e)});return function(E){return p.apply(this,
arguments)}}()))});return c.apply(this,arguments)}function m(t,e){return k.apply(this,arguments)}function k(){k=u._asyncToGenerator(function*(t,e){switch(t.type){case "extrude":t.size="number"===typeof e[2]?e[2]:0;break;case "icon":case "line":case "text":e=A(e);U.isSome(e)&&(t.size=e);break;case "path":{const p=b(e,O.ONES,[t.width,void 0,t.height]);t.width=C(e[0],t.width,1,p);t.height=C(e[2],t.height,1,p)}break;case "object":yield B(t,e)}});return k.apply(this,arguments)}function A(t){for(const e of t)if("number"===
typeof e)return e;return null}function B(t,e){return h.apply(this,arguments)}function h(){h=u._asyncToGenerator(function*(t,e){const {resourceSize:p,symbolSize:E}=yield d(t),v=b(e,p,E);t.width=C(e[0],E[0],p[0],v);t.depth=C(e[1],E[1],p[1],v);t.height=C(e[2],E[2],p[2],v)});return h.apply(this,arguments)}function b(t,e,p){for(let E=0;3>E;E++){const v=t[E];switch(v){case "symbol-value":return null!=p[E]?p[E]/e[E]:1;case "proportional":break;default:if(v&&e[E])return v/e[E]}}return 1}function d(t){return l.apply(this,
arguments)}function l(){l=u._asyncToGenerator(function*(t){const e=yield(yield new Promise((D,R)=>V(["./symbolLayerUtils"],D,R))).computeObjectLayerResourceSize(t,10),{width:p,height:E,depth:v}=t;t=[p,v,E];let q=1;for(var n=0;3>n;n++)if(null!=t[n]){q=t[n]/e[n];break}for(n=0;3>n;n++)null==t[n]&&(t[n]=e[n]*q);return{resourceSize:e,symbolSize:t}});return l.apply(this,arguments)}function C(t,e,p,E){switch(t){case "proportional":return p*E;case "symbol-value":return null!=e?e:p;default:return t}}function z(){z=
u._asyncToGenerator(function*(t,e){if(t&&e){if(r.isSymbol3D(t))return a(t,e);if(r.isSymbol2D(t)&&(e=A(e),!U.isNone(e)))switch(t.type){case "simple-marker":t.size=e;break;case "picture-marker":{const p=t.width/t.height;1<p?(t.width=e,t.height=e*p):(t.width=e*p,t.height=e);break}case "simple-line":t.width=e;break;case "text":t.font.size=e}}});return z.apply(this,arguments)}const I=/\/resource\/(.*?)\.svg$/,x=new Q("white");H.applyColorToSymbol=function(t,e,p){if(t&&(e||null!=p))if(e&&(e=new Q(e)),r.isSymbol3D(t))f(t,
e,p);else if(r.isSymbol2D(t)){if(e=e||t.color)t.color=y(e,p);null!=p&&"outline"in t&&t.outline&&t.outline.color&&(t.outline.color=y(t.outline.color,p))}};H.applyOpacityToColor=y;H.applyRotationToSymbol=function(t,e,p){t&&null!=e&&(r.isSymbol3D(t)?(t=t.symbolLayers)&&t.forEach(E=>{if(E&&"object"===E.type)switch(p){case "tilt":E.tilt=e;break;case "roll":E.roll=e;break;default:E.heading=e}}):!r.isSymbol2D(t)||"simple-marker"!==t.type&&"picture-marker"!==t.type&&"text"!==t.type||(t.angle=e))};H.applySizesToSymbol=
function(t,e){return z.apply(this,arguments)};H.getCSSFilterFromEffectList=function(t){if(!t)return null;t=t.effects.filter(e=>"bloom"!==e.type).map(e=>e.toJSON());return F.effectFunctionsFromJSON(t)};H.getColorFromSymbol=function(t,e){if(!t)return null;let p=null;r.isSymbol3D(t)?p=G(t):r.isSymbol2D(t)&&(p=t.color?new Q(t.color):null);return p?y(p,e):null};H.getIconHref=function(t,e){e=e.resource.href;return!S("esri-canvas-svg-support")&&t.styleOrigin&&I.test(e)?e.replace(I,"/resource/png/$1.png"):
e};H.getSymbolOutlineSize=function(t){if(!t)return 0;if(r.isSymbol3D(t)){{const e=t.symbolLayers&&t.symbolLayers.length;e?(t=t.symbolLayers.getItemAt(e-1),t="outline"in t?U.get(t,"outline","size"):void 0):t=void 0}return U.isSome(t)?t:0}return(t=g.getStroke(t))&&P.px2pt(t.width)||0};H.isVolumetricSymbol=function(t){if(U.isNone(t)||!("symbolLayers"in t)||U.isNone(t.symbolLayers))return!1;switch(t.type){case "point-3d":return t.symbolLayers.some(e=>"object"===e.type);case "line-3d":return t.symbolLayers.some(e=>
"path"===e.type);case "polygon-3d":return t.symbolLayers.some(e=>"object"===e.type||"extrude"===e.type);default:return!1}};Object.defineProperty(H,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(V,H,u,Q,r,W,S){function U(w){if(!w)return null;let G;switch(w.type){case "simple-fill":case "picture-fill":case "simple-marker":G=U(w.outline);break;
case "simple-line":{const y=W.pt2px(w.width);"none"!==w.style&&0!==y&&(G={color:w.color,style:g(w.style),width:y,cap:w.cap,join:"miter"===w.join?W.pt2px(w.miterLimit):w.join});break}default:G=null}return G}const P={left:"start",center:"middle",right:"end",justify:"start"},O={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},F=new r(1E3),g=function(){const w={};return function(G){if(w[G])return w[G];const y=G.replace(/-/g,"");return w[G]=y}}();u=new u([128,128,
128]);V.defaultThematicColor=u;V.dekebabifyLineStyle=g;V.getFill=function(w){const G=w.style;let y=null;if(w)switch(w.type){case "simple-marker":"cross"!==G&&"x"!==G&&(y=w.color);break;case "simple-fill":"solid"===G?y=w.color:"none"!==G&&(y={type:"pattern",x:0,y:0,src:H.getAssetUrl(`esri/symbols/patterns/${G}.png`),width:5,height:5});break;case "picture-fill":y={type:"pattern",src:w.url,width:W.pt2px(w.width)*w.xscale,height:W.pt2px(w.height)*w.yscale,x:W.pt2px(w.xoffset),y:W.pt2px(w.yoffset)};break;
case "text":y=w.color;break;case "cim":y=S.getCIMSymbolColor(w)}return y};V.getPatternUrlWithColor=function(w,G){const y=w+"-"+G;return void 0!==F.get(y)?Promise.resolve(F.get(y)):Q(w,{responseType:"image"}).then(f=>{f=f.data;const a=f.naturalWidth,c=f.naturalHeight,m=document.createElement("canvas");m.width=a;m.height=c;const k=m.getContext("2d");k.fillStyle=G;k.fillRect(0,0,a,c);k.globalCompositeOperation="destination-in";k.drawImage(f,0,0);f=m.toDataURL();F.put(y,f);return f})};V.getSVGAlign=function(w){return w=
(w=w.horizontalAlignment)&&P[w.toLowerCase()]||"middle"};V.getSVGBaseline=function(w){return(w=w.verticalAlignment)&&O[w.toLowerCase()]||"alphabetic"};V.getSVGBaselineShift=function(w){return"bottom"===w.verticalAlignment?"super":null};V.getStroke=U;Object.defineProperty(V,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(V){return function(){function H(Q,r){this._storage=new V.MemCacheStorage;this._storage.maxSize=Q;r&&this._storage.registerRemoveFunc("",
r)}var u=H.prototype;u.put=function(Q,r){this._storage.put(Q,r,1,1)};u.pop=function(Q){return this._storage.pop(Q)};u.get=function(Q){return this._storage.get(Q)};u.clear=function(){this._storage.clearAll()};u.destroy=function(){this._storage.destroy()};return H}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(V,H,u){function Q(g){g=u.toCIMSymbolJSON(g);if("CIMTextSymbol"===g.type)return g.height;let w=0;if(g.symbolLayers)for(const G of g.symbolLayers)u.isCIMMarker(G)&&
G.size>w?w=G.size:u.isCIMStroke(G)&&G.width>w?w=G.width:u.isCIMFill(G);return w}function r(g,w,G,y){if("CIMTextSymbol"===g.type)g.height*=w;else{if(G&&g.effects)for(const f of g.effects)U(f,w);if(g.symbolLayers)for(const f of g.symbolLayers)switch(f.type){case "CIMPictureMarker":case "CIMVectorMarker":W(f,w,y);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=y&&y.preserveOutlineWidth||(f.width*=w);break;case "CIMPictureFill":f.height*=w;f.offsetX*=w;f.offsetY*=w;break;case "CIMHatchFill":r(f.lineSymbol,
w,!0,{...y,preserveOutlineWidth:!1}),f.offsetX*=w,f.offsetY*=w,f.separation*=w}}}function W(g,w,G){g.markerPlacement&&S(g.markerPlacement,w);g.offsetX*=w;g.offsetY*=w;g.anchorPoint&&"Absolute"===g.anchorPointUnits&&(g.anchorPoint={x:g.anchorPoint.x*w,y:g.anchorPoint.y*w});g.size*=w;if("CIMVectorMarker"===g.type&&g.markerGraphics)for(const y of g.markerGraphics)g.scaleSymbolsProportionally||r(y.symbol,w,!0,G)}function S(g,w){u.isCIMMarkerStrokePlacement(g)&&(g.offset*=w);switch(g.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":g.customEndingOffset*=
w;g.offsetAlongLine*=w;if(g.placementTemplate&&g.placementTemplate.length){var G=g.placementTemplate.map(y=>y*w);g.placementTemplate=G}break;case "CIMMarkerPlacementAlongLineVariableSize":g.maxRandomOffset*=w;g.placementTemplate&&g.placementTemplate.length&&(G=g.placementTemplate.map(y=>y*w),g.placementTemplate=G);break;case "CIMMarkerPlacementOnLine":g.startPointOffset*=w;break;case "CIMMarkerPlacementAtExtremities":g.offsetAlongLine*=w;break;case "CIMMarkerPlacementAtRatioPositions":g.beginPosition*=
w;g.endPosition*=w;break;case "CIMMarkerPlacementPolygonCenter":g.offsetX*=w;g.offsetY*=w;break;case "CIMMarkerPlacementInsidePolygon":g.offsetX*=w,g.offsetY*=w,g.stepX*=w,g.stepY*=w}}function U(g,w){switch(g.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":g.width*=w;break;case "CIMGeometricEffectBuffer":g.size*=w;break;case "CIMGeometricEffectCut":g.beginCut*=w;g.endCut*=w;g.middleCut*=w;break;case "CIMGeometricEffectDashes":g.customEndingOffset*=w;g.offsetAlongLine*=w;if(g.dashTemplate&&
g.dashTemplate.length){const G=g.dashTemplate.map(y=>y*w);g.dashTemplate=G}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":g.length*=w;break;case "CIMGeometricEffectMove":g.offsetX*=w;g.offsetY*=w;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":g.offset*=w;break;case "CIMGeometricEffectRegularPolygon":g.radius*=w;break;case "CIMGeometricEffectTaperedPolygon":g.fromWidth*=w;g.length*=w;g.toWidth*=w;break;case "CIMGeometricEffectWave":g.amplitude*=
w,g.period*=w}}function P(g,w){let G;G="CIMTextSymbol"===g.type?g.symbol:g;g="CIMPolygonSymbol"===g.type;if(G.symbolLayers)for(const y of G.symbolLayers)if(!(y.colorLocked||g&&(u.isCIMStroke(y)||u.isCIMMarker(y)&&y.markerPlacement&&u.isCIMMarkerStrokePlacement(y.markerPlacement))))switch(y.type){case "CIMVectorMarker":y.markerGraphics.forEach(f=>{P(f.symbol,w)});break;case "CIMSolidStroke":case "CIMSolidFill":O(w,y.color);break;case "CIMHatchFill":P(y.lineSymbol,w)}}function O(g,w){for(const G of g)if(G.join(".")===
w.join("."))return;g.push(w)}function F(g,w){var G="CIMTextSymbol"===g.type?g.symbol:g;g="CIMPolygonSymbol"===g.type?!0:!1;if(G.symbolLayers)for(const y of G.symbolLayers)if(!(y.colorLocked||g&&(u.isCIMStroke(y)||u.isCIMMarker(y)&&y.markerPlacement&&u.isCIMMarkerStrokePlacement(y.markerPlacement))))switch(G=w.toArray(0),y.type){case "CIMVectorMarker":y.markerGraphics.forEach(f=>{F(f.symbol,w)});break;case "CIMSolidStroke":case "CIMSolidFill":y.color=G;break;case "CIMHatchFill":F(y.lineSymbol,w)}}
V.applyCIMSymbolColor=function(g,w){w instanceof H||(w=new H(w));g=u.toCIMSymbolJSON(g);F(g,w)};V.applyCIMSymbolRotation=function(g,w,G=!1){g=u.toCIMSymbolJSON(g);G&&0!==w&&(w=360-w);if("CIMTextSymbol"===g.type)g.angle=w;else if("CIMPointSymbol"===g.type&&g.symbolLayers){G=w-(g.angle||0);for(const y of g.symbolLayers)if(u.isCIMMarker(y)){let f=y.rotation||0;f=y.rotateClockwise?f-G:f+G;y.rotation=f}g.angle=w}};V.getCIMSymbolColor=function(g){g=u.toCIMSymbolJSON(g);const w=[];P(g,w);return w.length?
new H(u.fromCIMColor(w[0])):null};V.getCIMSymbolRotation=function(g,w=!1){g=u.toCIMSymbolJSON(g);return"CIMTextSymbol"===g.type||"CIMPointSymbol"===g.type?w&&0!==g.angle?360-g.angle:g.angle||0:0};V.getCIMSymbolSize=Q;V.scaleCIMMarker=W;V.scaleCIMSymbolTo=function(g,w,G){const y=u.toCIMSymbolJSON(g);g=Q(g);if(0===g)if("CIMTextSymbol"===y.type)y.height=w;else{if(y.symbolLayers)for(const f of y.symbolLayers)switch(f.type){case "CIMPictureMarker":case "CIMVectorMarker":f.size=w;break;case "CIMPictureStroke":case "CIMSolidStroke":f.width=
w}}else r(y,w/g,!1,G)};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(V){function H(u,Q){"string"!==typeof u&&(u=String(u));switch(Q){case "LowerCase":return u.toLowerCase();case "Allcaps":return u.toUpperCase();default:return u}}V._adjustTextCase=H;V.colorToArray=function(u){return[u.r,u.g,u.b,u.a]};V.createLabelOverrideFunction=function(u,Q,r){const W=O=>{let F=O.length;for(;F--;)if(-1===" /-,\n".indexOf(O.charAt(F)))return!1;
return!0},S=[];var U=0;let P=-1;do P=Q.indexOf("[",U),P>=U&&(P>U&&(U=Q.substr(U,P-U),S.push([U,null,W(U)])),U=P+1,P=Q.indexOf("]",U),P>=U&&(P>U&&(U=Q.substr(U,P-U),(U=u[U])&&S.push([null,U,!1])),U=P+1));while(-1!==P);U<Q.length-1&&(u=Q.substr(U),S.push([u,null,W(u)]));return O=>{let F="",g=null;for(const w of S){const [G,y,f]=w;if(G)f?g=G:(g&&(F+=g,g=null),F+=G);else{const a=O.attributes[y];a&&(g&&(F+=g,g=null),F+=a)}}return H(F,r)}};V.evaluateValueOrFunction=function(u,Q,r,W){return"function"===
typeof u?u(Q,r,W):u};V.fromCIMColor=function(u){return u?{r:u[0],g:u[1],b:u[2],a:u[3]/255}:{r:0,g:0,b:0,a:0}};V.getValue=u=>isNaN(u)||!u?0:u;V.isCIMFill=function(u){return"CIMGradientFill"===u.type||"CIMHatchFill"===u.type||"CIMPictureFill"===u.type||"CIMSolidFill"===u.type||"CIMWaterFill"===u.type};V.isCIMMarker=function(u){return"CIMVectorMarker"===u.type||"CIMPictureMarker"===u.type||"CIMBarChartMarker"===u.type||"CIMCharacterMarker"===u.type||"CIMPieChartMarker"===u.type||"CIMStackedBarChartMarker"===
u.type};V.isCIMMarkerStrokePlacement=function(u){return"CIMMarkerPlacementAlongLineRandomSize"===u.type||"CIMMarkerPlacementAlongLineSameSize"===u.type||"CIMMarkerPlacementAlongLineVariableSize"===u.type||"CIMMarkerPlacementAtExtremities"===u.type||"CIMMarkerPlacementAtMeasuredUnits"===u.type||"CIMMarkerPlacementAtRatioPositions"===u.type||"CIMMarkerPlacementOnLine"===u.type||"CIMMarkerPlacementOnVertices"===u.type};V.isCIMStroke=function(u){return"CIMGradientStroke"===u.type||"CIMPictureStroke"===
u.type||"CIMSolidStroke"===u.type};V.resampleHermite=function(u,Q,r,W,S,U,P=!0){const O=Q/S;r/=U;const F=Math.ceil(O/2),g=Math.ceil(r/2);for(let y=0;y<U;y++)for(let f=0;f<S;f++){const a=4*(f+(P?U-y-1:y)*S);var w=0;let c=0,m=0,k=0,A=0,B=0,h=0;const b=(y+.5)*r;for(let d=Math.floor(y*r);d<(y+1)*r;d++){var G=Math.abs(b-(d+.5))/g;const l=(f+.5)*O;G*=G;for(let C=Math.floor(f*O);C<(f+1)*O;C++){let z=Math.abs(l-(C+.5))/F;w=Math.sqrt(G+z*z);-1<=w&&1>=w&&(w=2*w*w*w-3*w*w+1,0<w&&(z=4*(C+d*Q),h+=w*u[z+3],m+=
w,255>u[z+3]&&(w=w*u[z+3]/250),k+=w*u[z],A+=w*u[z+1],B+=w*u[z+2],c+=w))}}W[a]=k/c;W[a+1]=A/c;W[a+2]=B/c;W[a+3]=h/m}};V.toCIMSymbolJSON=function(u){var Q;return null==(Q=u.data)?void 0:Q.symbol};V.toKebabCase=u=>u&&u.toLowerCase().replace(/\s+/g,"-");Object.defineProperty(V,"__esModule",{value:!0})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(V,H,u,Q,r,W,S){var U;u=U=function(P){function O(F){F=P.call(this,F)||this;F.variableName=null;F.dimensionName=null;F.values=[];F.isSlice=!1;return F}V._inheritsLoose(O,P);O.prototype.clone=function(){return new U({variableName:this.variableName,dimensionName:this.dimensionName,values:Q.clone(this.values),isSlice:this.isSlice})};return O}(u.JSONSupport);H.__decorate([r.property({type:String,json:{write:!0}})],u.prototype,"variableName",void 0);H.__decorate([r.property({type:String,json:{write:!0}})],
u.prototype,"dimensionName",void 0);H.__decorate([r.property({type:W.types.array(W.types.oneOf([W.types.native(Number),W.types.array(W.types.native(Number))])),json:{write:!0}})],u.prototype,"values",void 0);H.__decorate([r.property({type:Boolean,json:{write:!0}})],u.prototype,"isSlice",void 0);return u=U=H.__decorate([S.subclass("esri.layers.support.DimensionalDefinition")],u)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w,G,y){V.ExportImageServiceParameters=function(f){function a(){var m=f.apply(this,arguments)||this;m.layer=null;m.adjustAspectRatio=void 0;m.bandIds=void 0;m.compression=void 0;m.compressionQuality=void 0;m.compressionTolerance=.01;m.format=null;m.interpolation=null;m.noData=null;m.noDataInterpretation=void 0;m.pixelType=void 0;m.lercVersion=2;return m}H._inheritsLoose(a,f);var c=a.prototype;c.writeAdjustAspectRatio=function(m,k,A){10.3>this.layer.version||(k[A]=m)};
c.writeCompressionQuality=function(m,k,A){this.format&&-1<this.format.toLowerCase().indexOf("jpg")&&null!=m&&(k[A]=m)};c.writeCompressionTolerance=function(m,k,A){"lerc"===this.format&&null!=m&&(k[A]=m)};c.writeLercVersion=function(m,k,A){"lerc"===this.format&&10.5<=this.layer.version&&(k[A]=m)};c.combineRendererWithRenderingRule=function(){var m;const k=this.layer,{rasterInfo:A,renderingRule:B,renderer:h}=k;return h&&g.isSupportedRendererType(h)?g.combineRenderingRules(g.convertRendererToRenderingRule(h,
{rasterAttributeTable:A.attributeTable,pixelType:A.pixelType,dataType:A.dataType,bandProperties:null==(m=A.keyProperties)?void 0:m.BandProperties,convertColorRampToColormap:10.6>k.version}),B):B};c._addResampleRasterFunction=function(m){var k;if("vector-field"!==(null==(k=this.layer.renderer)?void 0:k.type)||"Resample"===(null==m?void 0:m.functionName))return m;k=new y({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,
InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}});return g.combineRenderingRules(k,m)};H._createClass(a,[{key:"version",get:function(){const m=this.layer;m.commitProperty("bandIds");m.commitProperty("format");m.commitProperty("compressionQuality");m.commitProperty("compressionTolerance");m.commitProperty("interpolation");m.commitProperty("noData");m.commitProperty("noDataInterpretation");m.commitProperty("mosaicRule");m.commitProperty("renderingRule");m.commitProperty("adjustAspectRatio");
m.commitProperty("pixelFilter");m.commitProperty("renderer");m.commitProperty("definitionExpression");return(this._get("version")||0)+1},set:function(m){this._set("version",m)}},{key:"mosaicRule",get:function(){var m=this.layer;let k=m.mosaicRule;m=m.definitionExpression;k?m&&m!==k.where&&(k=k.clone(),k.where=m):m&&(k=new w({where:m}));return k}},{key:"renderingRule",get:function(){var m=this.layer;let k=m.renderingRule;const A=m.pixelFilter;m=!m.format||-1<m.format.indexOf("jpg")||-1<m.format.indexOf("png");
k=this._addResampleRasterFunction(k);m&&!A&&(k=this.combineRendererWithRenderingRule());return k}}]);return a}(Q.JSONSupport);u.__decorate([P.property()],V.ExportImageServiceParameters.prototype,"layer",void 0);u.__decorate([P.property({json:{write:!0}})],V.ExportImageServiceParameters.prototype,"adjustAspectRatio",void 0);u.__decorate([F.writer("adjustAspectRatio")],V.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);u.__decorate([P.property({json:{write:!0}}),r.aliasOf("layer.bandIds")],
V.ExportImageServiceParameters.prototype,"bandIds",void 0);u.__decorate([P.property({json:{write:!0}})],V.ExportImageServiceParameters.prototype,"compression",void 0);u.__decorate([P.property({json:{write:!0}}),r.aliasOf("layer.compressionQuality")],V.ExportImageServiceParameters.prototype,"compressionQuality",void 0);u.__decorate([F.writer("compressionQuality")],V.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);u.__decorate([P.property({json:{write:!0}}),r.aliasOf("layer.compressionTolerance")],
V.ExportImageServiceParameters.prototype,"compressionTolerance",void 0);u.__decorate([F.writer("compressionTolerance")],V.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);u.__decorate([P.property({json:{write:!0}}),r.aliasOf("layer.format")],V.ExportImageServiceParameters.prototype,"format",void 0);u.__decorate([P.property({type:String,json:{read:{reader:G.interpolationKebab.read},write:{writer:G.interpolationKebab.write}}}),r.aliasOf("layer.interpolation")],V.ExportImageServiceParameters.prototype,
"interpolation",void 0);u.__decorate([P.property({json:{write:!0}}),r.aliasOf("layer.noData")],V.ExportImageServiceParameters.prototype,"noData",void 0);u.__decorate([P.property({type:String,json:{read:{reader:G.noDataInterpretationKebab.read},write:{writer:G.noDataInterpretationKebab.write}}}),r.aliasOf("layer.noDataInterpretation")],V.ExportImageServiceParameters.prototype,"noDataInterpretation",void 0);u.__decorate([P.property({json:{write:!0}})],V.ExportImageServiceParameters.prototype,"pixelType",
void 0);u.__decorate([P.property({json:{write:!0}})],V.ExportImageServiceParameters.prototype,"lercVersion",void 0);u.__decorate([F.writer("lercVersion")],V.ExportImageServiceParameters.prototype,"writeLercVersion",null);u.__decorate([P.property({type:Number})],V.ExportImageServiceParameters.prototype,"version",null);u.__decorate([P.property({json:{write:!0}})],V.ExportImageServiceParameters.prototype,"mosaicRule",null);u.__decorate([P.property({json:{write:!0}})],V.ExportImageServiceParameters.prototype,
"renderingRule",null);V.ExportImageServiceParameters=u.__decorate([O.subclass("esri.layers.mixins.ExportImageServiceParameters")],V.ExportImageServiceParameters);Object.defineProperty(V,"__esModule",{value:!0})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ./RasterFunction ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),function(V,H,u,Q,r,W){function S(c){const m=
c.Raster;return m&&"esri.layers.support.RasterFunction"===m.declaredClass?S(m.functionArguments):c}function U(c,m){const k=new u;k.functionName="VectorFieldRenderer";const {dataType:A,bandProperties:B}=m;m="vector-uv"===A?!0:!1;let h,b;B&&2===B.length&&(h=B.map(z=>z.BandName.toLowerCase()).indexOf("magnitude"),b=B.map(z=>z.BandName.toLowerCase()).indexOf("direction"));if(-1===h||null===h)h=0,b=1;const d="arithmetic"===c.rotationType?1:2,l="flow-from"===c.flowRepresentation?0:1,C=c.visualVariables?
c.visualVariables.filter(z=>"Magnitude"===z.field)[0]:new W;c={magnitudeBandID:h,directionBandID:b,isUVComponents:m,referenceSystem:d,massFlowAngleRepresentation:l,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:y[c.style.toLowerCase().replace("-","_")],minimumMagnitude:C.minDataValue,maximumMagnitude:C.maxDataValue,minimumSymbolSize:C.minSize,maximumSymbolSize:C.maxSize};k.functionArguments=c;return k}function P(c,m){const k=[],A=[],B=[],h=[],{pixelType:b,
rasterAttributeTable:d}=m,l=d&&d.features,C=F(d);if(l&&Array.isArray(l)&&c.classBreakInfos){c.classBreakInfos.forEach((x,t)=>{const e=x.symbol.color;let p;e.a&&l.forEach(E=>{p=E.attributes[c.field];(p>=x.minValue&&p<x.maxValue||t===c.classBreakInfos.length-1&&p>=x.minValue)&&h.push([E.attributes[C],e.r,e.g,e.b])})});m=b?O(h,b):h;var z=new u;z.functionName="Colormap";z.functionArguments={};z.functionArguments.Colormap=m;z.variableName="Raster";return z}c.classBreakInfos.forEach((x,t)=>{const e=x.symbol&&
x.symbol.color;e.a?(0===t?k.push(x.minValue,x.maxValue+1E-6):k.push(x.minValue+1E-6,x.maxValue+1E-6),A.push(t),h.push([t,e.r,e.g,e.b])):B.push(x.minValue,x.maxValue)});m=b?O(h,b):h;z=new u;z.functionName="Remap";z.functionArguments={InputRanges:k,OutputValues:A,NoDataRanges:B};z.variableName="Raster";const I=new u;I.functionName="Colormap";I.functionArguments={Colormap:m,Raster:z};return I}function O(c,m){(m=G[String(m).toLowerCase()])&&c.push([Math.floor(m[0]-1),0,0,0],[Math.ceil(m[1]+1),0,0,0]);
return c}function F(c){if(c)return{fields:c}=c,(c=c&&c.find(m=>m&&m.name&&"value"===m.name.toLowerCase()))&&c.name}function g(c,m){var k;const A=[],{pixelType:B,rasterAttributeTable:h}=m;m=h&&h.features;const b=F(h),d=null==(k=c.defaultSymbol)?void 0:k.color;let l=!1;c.uniqueValueInfos&&(m?m.forEach(C=>{var z;const I=null==(z=c.uniqueValueInfos.find(x=>String(C.attributes[c.field])===String(x.value)))?void 0:z.symbol.color;I?A.push([C.attributes[b],I.r,I.g,I.b]):d&&A.push([C.attributes[b],d.r,d.g,
d.b])}):c.uniqueValueInfos.forEach(C=>{var z;null!=(z=C.symbol.color)&&z.a&&(z=C.symbol.color,isNaN(+C.value)?l=!0:A.push([+C.value,z.r,z.g,z.b]))}));if(l)return null;k=B&&0<A.length?O(A,B):A;m=new u;m.functionName="Colormap";m.functionArguments={};m.functionArguments.Colormap=k;m.variableName="Raster";return m}function w(c){const m=[];c.forEach(k=>{Array.isArray(k)?m.push(k):null!=k.min&&null!=k.max&&m.push([k.min,k.max,k.avg||0,k.stddev||0])});return m}const G={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,
255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},y={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},f=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),a={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,
sigmoid:9};V.combineRenderingRules=function(c,m){if(!c||!m)return H.clone(c||m);c=H.clone(c);"none"!==m.functionName.toLowerCase()&&(S(c.functionArguments).Raster=m);return c};V.convertRendererToRenderingRule=function(c,m){m=m||{};switch(c.type){case "raster-stretch":var k=new u;k.functionName="Stretch";var A=a[r.stretchTypeJSONDict.toJSON(c.stretchType)],B=w(c.statistics);B={StretchType:A,Statistics:B,DRA:c.dynamicRangeAdjustment,UseGamma:c.useGamma,Gamma:c.gamma,ComputeGamma:c.computeGamma};null!=
c.outputMin&&(B.Min=c.outputMin);null!=c.outputMax&&(B.Max=c.outputMax);A===a.standardDeviation?(B.NumberOfStandardDeviations=c.numberOfStandardDeviations,k.outputPixelType="u8"):A===a.percentClip?(B.MinPercent=c.minPercent,B.MaxPercent=c.maxPercent,k.outputPixelType="u8"):A===a.minMax?k.outputPixelType="u8":A===a.sigmoid&&(B.SigmoidStrengthLevel=c.sigmoidStrengthLevel);k.functionArguments=B;k.variableName="Raster";if(c.colorRamp){A=c.colorRamp;B=new u;const h=Q.getColorRampName(A);B.functionArguments=
h?{colorRamp:h}:!m.convertColorRampToColormap||"algorithmic"!==A.type&&"multipart"!==A.type?{colorRamp:c.colorRamp.toJSON()}:{Colormap:Q.convertColorRampToColormap(A,256)};B.variableName="Raster";B.functionName="Colormap";B.functionArguments.Raster=k;c=B}else c=k;return c;case "class-breaks":return P(c,m);case "unique-value":return g(c,m);case "raster-colormap":return(c=c.extractColormap())&&0!==c.length?({pixelType:m}=m,c=m?O(c,m):c,m=new u,m.functionName="Colormap",m.functionArguments={},m.functionArguments.Colormap=
c,c=m):c=void 0,c;case "vector-field":return U(c,m);case "raster-shaded-relief":return"elevation"!==m.dataType?c=new u:(m=new u,m.functionName="Hillshade",k="traditional"===c.hillshadeType?0:1,A="none"===c.scalingType?1:3,B={HillshadeType:k,SlopeType:A,ZFactor:c.zFactor},0===k&&(B.Azimuth=c.azimuth,B.Altitude=c.altitude),3===A&&(B.PSPower=c.pixelSizePower,B.PSZFactor=c.pixelSizeFactor),m.functionArguments=B,m.variableName="Raster",c.colorRamp&&(m.functionName="ShadedRelief",B.Colormap=Q.convertColorRampToColormap(c.colorRamp,
256)),c=m),c;case "animated-flow":throw Error("Unsupported rendering rule.");}};V.isSupportedRendererType=function(c){return f.has(c.type)};V.pixelTypeRanges=G;Object.defineProperty(V,"__esModule",{value:!0})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(V,H,u,Q,r,W,S,U,P,O){var F;const g=new Set(["raster","raster2","dem","fillraster"]),w=new Set(["rasters"]),G=k=>k&&k.rasterFunction?m.fromJSON(k):k,y=k=>k&&k instanceof m?k.toJSON():k,f=k=>(null==k?void 0:k.functionName)&&!k.declaredClass,a=k=>f(k)?new m(k):k;var c;(function(k){k[k.MOSAIC=0]="MOSAIC";k[k.GROUP=1]="GROUP";k[k.ITEM=2]="ITEM"})(c||(c={}));let m=F=function(k){function A(h){h=k.call(this,h)||this;h.functionName=null;h.outputPixelType="unknown";h.variableName=null;h.description=
null;h.functionDefinition=null;h.thumbnail=null;return h}V._inheritsLoose(A,k);var B=A.prototype;B.readFunctionArguments=function(h,b){h=b.arguments||b.rasterFunctionArguments;if(null==h)var d=null;else{h=Q.clone(h);b={};for(d of Object.keys(h))g.has(d.toLowerCase())?b[d]=G(h[d]):w.has(d.toLowerCase())&&Array.isArray(h[d])?b[d]=h[d].map(G):b[d]=h[d];d=b}return d};B.writeFunctionArguments=function(h,b,d){const l={};for(const C of Object.keys(h))g.has(C.toLowerCase())?l[C]=y(h[C]):w.has(C.toLowerCase())&&
Array.isArray(h[C])?l[C]=h[C].map(y):l[C]=y(h[C]);this.functionDefinition?b.arguments=l:b[d]=l};B.readFunctionName=function(h,b){h=b.rasterFunctionInfos;const d=b.name;return d?d:h&&h.length&&"None"!==h[0].name?h[0].name:b.rasterFunction};B.writeFunctionName=function(h,b,d){this.functionDefinition?b.name=h:b[d]=h};B.readFunctionType=function(h){return c[h]};B.writeFunctionType=function(h,b,d){b[d]=c[h]};B.clone=function(){return new F({functionName:this.functionName,functionArguments:Q.clone(this.functionArguments),
outputPixelType:this.outputPixelType,variableName:this.variableName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})};V._createClass(A,[{key:"functionArguments",set:function(h){if(h){const b=Object.keys(h);if(b.some(d=>g.has(d.toLowerCase())&&f(h[d]))||b.some(d=>w.has(d.toLowerCase())&&Array.isArray(h[d])&&h[d].some(l=>f(l)))){h=Q.clone(h);for(const d of b)g.has(d.toLowerCase())?h[d]=a(h[d]):w.has(d.toLowerCase())&&Array.isArray(h[d])&&
(h[d]=h[d].map(l=>a(l)))}}this._set("functionArguments",h)}}]);return A}(u.JSONSupport);H.__decorate([r.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],m.prototype,"functionArguments",null);H.__decorate([U.reader("functionArguments",["rasterFunctionArguments","arguments"])],m.prototype,"readFunctionArguments",null);H.__decorate([O.writer("functionArguments")],m.prototype,"writeFunctionArguments",null);H.__decorate([r.property({json:{type:String,write:{target:"rasterFunction"}}})],
m.prototype,"functionName",void 0);H.__decorate([U.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],m.prototype,"readFunctionName",null);H.__decorate([O.writer("functionName")],m.prototype,"writeFunctionName",null);H.__decorate([S.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),r.property({json:{default:"unknown"}})],m.prototype,"outputPixelType",void 0);
H.__decorate([r.property({type:String,json:{read:!0,write:!0}})],m.prototype,"variableName",void 0);H.__decorate([r.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],m.prototype,"description",void 0);H.__decorate([r.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],m.prototype,"functionType",void 0);H.__decorate([U.reader("functionType")],m.prototype,"readFunctionType",null);H.__decorate([O.writer("functionType")],m.prototype,"writeFunctionType",
null);H.__decorate([r.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],m.prototype,"functionDefinition",void 0);H.__decorate([r.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],m.prototype,"thumbnail",void 0);return m=F=H.__decorate([P.subclass("esri.layers.support.RasterFunction")],m)})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w){var G;const y=u.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),f=u.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});u=G=function(a){function c(k){k=a.call(this,k)||this;k.ascending=!0;k.itemRenderingRule=
null;k.lockRasterIds=null;k.method=null;k.multidimensionalDefinition=null;k.objectIds=null;k.operation=null;k.sortField=null;k.sortValue=null;k.viewpoint=null;k.where=null;return k}V._inheritsLoose(c,a);var m=c.prototype;m.readAscending=function(k,A){return null!=A.ascending?A.ascending:null!=A.sortAscending?A.sortAscending:!0};m.readMethod=function(k,A){k=A.mosaicMethod||A.defaultMosaicMethod;switch(k?k.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":k="esriMosaicAttribute";
break;case "lockraster":k="esriMosaicLockRaster";break;case "center":k="esriMosaicCenter";break;case "northwest":k="esriMosaicNorthwest";break;case "nadir":k="esriMosaicNadir";break;case "viewpoint":k="esriMosaicViewpoint";break;case "seamline":k="esriMosaicSeamline";break;case "none":k="esriMosaicNone";break;default:k="esriMosaicNone"}return k=f.fromJSON(k)};m.readOperation=function(k,A){k=A.mosaicOperation;A=A.mosaicOperator&&A.mosaicOperator.toLowerCase();A=k||(A?y.toJSON(A):null);return y.fromJSON(A)||
"first"};m.castSortValue=function(k){return null==k||"string"===typeof k||"number"===typeof k?k:`${k}`};m.clone=function(){return new G({ascending:this.ascending,itemRenderingRule:r.clone(this.itemRenderingRule),lockRasterIds:r.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:r.clone(this.multidimensionalDefinition),objectIds:r.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:r.clone(this.viewpoint),where:this.where})};
return c}(Q.JSONSupport);H.__decorate([W.property({type:Boolean,json:{write:!0}})],u.prototype,"ascending",void 0);H.__decorate([U.reader("ascending",["ascending","sortAscending"])],u.prototype,"readAscending",null);H.__decorate([W.property({type:w,json:{write:!0}})],u.prototype,"itemRenderingRule",void 0);H.__decorate([W.property({type:[O.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],u.prototype,"lockRasterIds",void 0);H.__decorate([W.property({type:String,
json:{type:f.jsonValues,write:{target:"mosaicMethod",writer:f.write}}})],u.prototype,"method",void 0);H.__decorate([U.reader("method",["mosaicMethod","defaultMosaicMethod"])],u.prototype,"readMethod",null);H.__decorate([W.property({type:[g],json:{write:!0}})],u.prototype,"multidimensionalDefinition",void 0);H.__decorate([W.property({type:[O.Integer],json:{name:"fids",write:!0}})],u.prototype,"objectIds",void 0);H.__decorate([W.property({json:{type:y.jsonValues,read:{reader:y.read},write:{target:"mosaicOperation",
writer:y.write}}})],u.prototype,"operation",void 0);H.__decorate([U.reader("operation",["mosaicOperation","mosaicOperator"])],u.prototype,"readOperation",null);H.__decorate([W.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],u.prototype,"sortField",void 0);H.__decorate([W.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],u.prototype,"sortValue",void 0);H.__decorate([S.cast("sortValue")],
u.prototype,"castSortValue",null);H.__decorate([W.property({type:F,json:{write:!0}})],u.prototype,"viewpoint",void 0);H.__decorate([W.property({type:String,json:{write:!0}})],u.prototype,"where",void 0);return u=G=H.__decorate([P.subclass("esri.layers.support.MosaicRule")],u)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(V,H){const u=H.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});
H=H.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});V.interpolationKebab=u;V.noDataInterpretationKebab=H;Object.defineProperty(V,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g){u=function(w){function G(y){y=w.call(this,y)||this;y.attributeTable=null;y.bandCount=null;y.colormap=null;y.extent=null;y.format=void 0;y.height=null;y.width=null;y.histograms=null;y.keyProperties={};y.multidimensionalInfo=null;y.noDataValue=null;y.pixelSize=null;y.pixelType=null;y.isPseudoSpatialReference=!1;y.spatialReference=null;y.statistics=null;y.storageInfo=null;y.transform=null;return y}V._inheritsLoose(G,w);V._createClass(G,[{key:"dataType",get:function(){var y,
f,a;const c=null!=(y=null==(f=this.keyProperties)?void 0:null==(a=f.DataType)?void 0:a.toLowerCase())?y:"generic";return"stdtime"===c?"standard-time":c}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(y){y&&this._set("nativeExtent",y)}},{key:"nativePixelSize",get:function(){if(!Q.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const y=this.nativeExtent;return{x:y.width/this.width,y:y.height/this.height}}}]);return G}(u.JSONSupport);
H.__decorate([r.property({json:{write:!0}})],u.prototype,"attributeTable",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"bandCount",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"colormap",void 0);H.__decorate([r.property({type:String,readOnly:!0})],u.prototype,"dataType",null);H.__decorate([r.property({type:O,json:{write:!0}})],u.prototype,"extent",void 0);H.__decorate([r.property({type:O,json:{write:!0}})],u.prototype,"nativeExtent",null);H.__decorate([r.property({json:{write:!0}})],
u.prototype,"nativePixelSize",null);H.__decorate([r.property({json:{write:!0}})],u.prototype,"format",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"height",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"width",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"histograms",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"keyProperties",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"multidimensionalInfo",void 0);
H.__decorate([r.property()],u.prototype,"noDataValue",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"pixelSize",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"pixelType",void 0);H.__decorate([r.property()],u.prototype,"isPseudoSpatialReference",void 0);H.__decorate([r.property({type:F,json:{write:!0}})],u.prototype,"spatialReference",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"statistics",void 0);H.__decorate([r.property({type:g,json:{write:!0}})],
u.prototype,"storageInfo",void 0);H.__decorate([r.property({json:{write:!0}})],u.prototype,"transform",void 0);return u=H.__decorate([P.subclass("esri.layers.support.RasterInfo")],u)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(V,H,u,Q,r,W,S,U,P){u=function(O){function F(){var g=O.apply(this,arguments)||this;g.blockWidth=void 0;g.blockHeight=void 0;g.compression=null;g.origin=null;g.firstPyramidLevel=null;g.maximumPyramidLevel=null;g.pyramidScalingFactor=2;g.pyramidBlockWidth=null;g.pyramidBlockHeight=null;g.isVirtualTileInfo=!1;g.tileInfo=null;g.blockBoundary=null;return g}V._inheritsLoose(F,O);return F}(u.JSONSupport);H.__decorate([Q.property({type:Number,json:{write:!0}})],u.prototype,"blockWidth",void 0);H.__decorate([Q.property({type:Number,
json:{write:!0}})],u.prototype,"blockHeight",void 0);H.__decorate([Q.property({type:String,json:{write:!0}})],u.prototype,"compression",void 0);H.__decorate([Q.property({type:P,json:{write:!0}})],u.prototype,"origin",void 0);H.__decorate([Q.property({type:Number,json:{write:!0}})],u.prototype,"firstPyramidLevel",void 0);H.__decorate([Q.property({type:Number,json:{write:!0}})],u.prototype,"maximumPyramidLevel",void 0);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"pyramidResolutions",void 0);
H.__decorate([Q.property({type:Number,json:{write:!0}})],u.prototype,"pyramidScalingFactor",void 0);H.__decorate([Q.property({type:Number,json:{write:!0}})],u.prototype,"pyramidBlockWidth",void 0);H.__decorate([Q.property({type:Number,json:{write:!0}})],u.prototype,"pyramidBlockHeight",void 0);H.__decorate([Q.property({type:Boolean,json:{write:!0}})],u.prototype,"isVirtualTileInfo",void 0);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"tileInfo",void 0);H.__decorate([Q.property()],u.prototype,
"blockBoundary",void 0);return u=H.__decorate([U.subclass("esri.layers.support.RasterStorageInfo")],u)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","../../core/workers/workers","./PixelBlock"],function(V,H,u,Q,r){return function(){function W(){this._workerThread=null;this._destroyed=!1}var S=W.prototype;S.initialize=function(){var U=V._asyncToGenerator(function*(){const P=yield Q.open("RasterWorker");this._destroyed?
P.close():this._workerThread=P});return function(){return U.apply(this,arguments)}}();S.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};S.convertVectorFieldData=function(){var U=V._asyncToGenerator(function*(P,O){if(!this._workerThread)throw new H("raster-jobhandler:no-connection","no available worker connection");return(P=yield this._workerThread.invoke("convertVectorFieldData",{pixelBlock:P.pixelBlock.toJSON(),type:P.dataType},O))?
new r(P):null});return function(P,O){return U.apply(this,arguments)}}();S.decode=function(){var U=V._asyncToGenerator(function*(P,O){if(!this._workerThread)throw new H("raster-jobhandler:no-connection","no available worker connection");return(P=yield this._workerThread.invoke("decode",P,O))?new r(P):null});return function(P,O){return U.apply(this,arguments)}}();S.symbolize=function(){var U=V._asyncToGenerator(function*(P,O){if(!this._workerThread)throw new H("raster-jobhandler:no-connection","no available worker connection");
P={extent:P.extent&&P.extent.toJSON(),pixelBlock:u.isSome(P.pixelBlock)&&P.pixelBlock.toJSON(),simpleStretchParams:P.simpleStretchParams,bandIds:P.bandIds};return(O=yield this._workerThread.invoke("symbolize",P,O))?new r(O):null});return function(P,O){return U.apply(this,arguments)}}();S.updateSymbolizer=function(){var U=V._asyncToGenerator(function*(P,O){var F;if(!this._workerThread)throw new H("raster-jobhandler:no-connection","no available worker connection");const g=null==P?void 0:null==(F=P.rendererJSON)?
void 0:F.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:P.toJSON(),histograms:g},O))});return function(P,O){return U.apply(this,arguments)}}();S.stretch=function(){var U=V._asyncToGenerator(function*(P,O){if(!this._workerThread)throw new H("raster-jobhandler:no-connection","no available worker connection");if(null==P||!P.pixelBlock)return null;P={srcPixelBlock:P.pixelBlock.toJSON(),stretchParams:P.stretchParams};return(O=yield this._workerThread.invoke("stretch",
P,O))?new r(O):null});return function(P,O){return U.apply(this,arguments)}}();S.split=function(){var U=V._asyncToGenerator(function*(P,O){if(!this._workerThread)throw new H("raster-jobhandler:no-connection","no available worker connection");if(null==P||!P.pixelBlock)return null;P={srcPixelBlock:P.pixelBlock.toJSON(),tileSize:P.tileSize,maximumPyramidLevel:P.maximumPyramidLevel};const F=yield this._workerThread.invoke("split",P,O);F&&F.forEach((g,w)=>{F.set(w,g?r.fromJSON(g):null)});return Promise.resolve(F)});
return function(P,O){return U.apply(this,arguments)}}();S.estimateStatisticsHistograms=function(){var U=V._asyncToGenerator(function*(P,O){if(!this._workerThread)throw new H("raster-jobhandler:no-connection","no available worker connection");if(null==P||!P.pixelBlock)return null;P={srcPixelBlock:P.pixelBlock.toJSON()};O=yield this._workerThread.invoke("estimateStatisticsHistograms",P,O);return Promise.resolve(O)});return function(P,O){return U.apply(this,arguments)}}();S.mosaicAndTransform=function(){var U=
V._asyncToGenerator(function*(P,O){var F;if(!this._workerThread)throw new H("raster-jobhandler:no-connection","no available worker connection");if(null==P||null==(F=P.srcPixelBlocks)||!F.length)return null;P={...P,srcPixelBlocks:P.srcPixelBlocks.map(g=>u.isSome(g)?g.toJSON():null)};return(O=yield this._workerThread.invoke("mosaicAndTransform",P,O))?new r(O):null});return function(P,O){return U.apply(this,arguments)}}();S.createStreamlinesMesh=function(){var U=V._asyncToGenerator(function*(P,O){if(!this._workerThread)throw new H("raster-jobhandler:no-connection",
"no available worker connection");const F={buffer:P.flowData.data.buffer,width:P.flowData.width,height:P.flowData.height};P=yield this._workerThread.invoke("createStreamlinesMesh",{flowData:F,rendererSettings:P.rendererSettings},{...O,transferList:[F.buffer]});return{vertexData:new Float32Array(P.vertexBuffer),indexData:new Uint32Array(P.indexBuffer)}});return function(P,O){return U.apply(this,arguments)}}();S.getProjectionOffsetGrid=function(U,P){if(!this._workerThread)throw new H("raster-jobhandler:no-connection",
"no available worker connection");const O=u.isSome(U.datumTransformation)?U.datumTransformation.steps.map(g=>({wkid:g.wkid,wkt:g.wkt,isInverse:g.isInverse})):null,F=u.isSome(U.rasterTransform)?U.rasterTransform.toJSON():null;U={projectedExtent:U.projectedExtent.toJSON(),srcBufferExtent:U.srcBufferExtent.toJSON(),pixelSize:U.pixelSize,hasWrapAround:U.hasWrapAround,spacing:U.spacing,datumTransformationSteps:O,rasterTransform:F,isAdaptive:U.isAdaptive};return this._workerThread.invoke("getProjectionOffsetGrid",
U,P)};return W}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ../../../chunks/TiffDecoder ../../../chunks/LercCodec ./Lzw ../../../chunks/Zlib ./Raw ./utils".split(" "),function(V,H,u,Q,r,W,S,U,P,O,F,g){function w(x,t){if(!g.isPlatformLittleEndian)throw new u("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:e,height:p,
pixelType:E}=t;var v=d(E);const q=v.pixelTypeCtor;t=null==t.noDataValue?v.noDataValue:t.noDataValue;v=0;let n,D=0,R;const N=x.byteLength-10;for(;D<N;){var T=U.decode(x,{inputOffset:D,encodedMaskData:n,returnMask:0===v?!0:!1,returnEncodedMask:0===v?!0:!1,returnFileInfo:!0,pixelType:q,noDataValue:t});if(e&&p&&(T.width!==e||T.height!==p))throw new u("rasterCoded:decode","lerc decoded result has width or height different from specified in options");D=T.fileInfo.eofOffset;0===v&&(n=T.encodedMaskData,R=
new Q({width:T.width,height:T.height,pixels:[],pixelType:E,mask:T.maskData,statistics:[]}));v++;R.addData({pixels:T.pixelData,statistics:{minValue:T.minValue,maxValue:T.maxValue,noDataValue:T.noDataValue}});10<N-D&&(T=String.fromCharCode.apply(null,new Uint8Array(x,D,10)),D+=-1<T.indexOf("CntZ")?T.indexOf("CntZ"):0)}return R}function G(x,t){if(!g.isPlatformLittleEndian)throw new u("rasterCoded:decode","lerc decoder is not supported on big endian platform");var e=0,p=t.offset||0,E=0;let v;let q;const n=
t.eof||x.byteLength-10,D=[],{width:R,height:N}=t;for(t=0;p<n;){var T;var Y=S.Lerc2Codec.decode(x,{inputOffset:p,maskData:v,returnFileInfo:!0});if(R&&N&&(Y.width!==R||Y.height!==N))throw new u("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");p=Y.fileInfo.eofOffset;v=Y.maskData;0===e&&(E=Y.fileInfo.numValidPixel,q=new Q({width:Y.width,height:Y.height,pixels:[],pixelType:Y.fileInfo.pixelType,mask:v,statistics:[]}));Y.fileInfo.mask&&0<Y.fileInfo.mask.numBytes&&
t++;v&&D.push(v);if(1<Y.dimCount&&(null==(T=Y.pixelData)?void 0:T.length)===Y.width*Y.height*Y.dimCount){var X,ba,K,J;Y.pixelData=Y.pixelData.slice(-Y.width*Y.height);const aa=null==(X=Y.dimStats)?void 0:null==(ba=X.minValues)?void 0:ba[Y.dimCount-1],Z=null==(K=Y.dimStats)?void 0:null==(J=K.maxValues)?void 0:J[Y.dimCount-1];null!=aa&&null!=Z&&(Y.minValue=aa,Y.maxValue=Z)}e++;q.addData({pixels:Y.pixelData,statistics:{minValue:Y.minValue,maxValue:Y.maxValue}});10<n-p&&(Y=String.fromCharCode.apply(null,
new Uint8Array(x,p,10)),p+=-1<Y.indexOf("Lerc")?Y.indexOf("Lerc"):0)}p=e=x=0;if(1<t){p=q.width*q.height;v=new Uint8Array(p);v.set(D[0]);for(x=1;x<D.length;x++)for(E=D[x],e=0;e<p;e++)v[e]&=E[e];for(e=E=0;e<p;e++)E+=v[e];q.mask=v}q.validPixelCount=E;return q}function y(x,t){x=S.decode(x,t.pyramidLevel||0);x=new Q({width:x.width,height:x.height,pixels:x.pixels,pixelType:x.pixelType.toLowerCase(),mask:x.mask,statistics:null});x.updateStatistics();return x}function f(x,t){const e=t.pixelType||"u8",p=Q.getPixelArrayConstructor(e),
E="u8"===e?x:new p(x.buffer),v=[],q=t.planes||1;if(1===q)v.push(E);else for(let n=0;n<q;n++){const D=(t.width||1)*(t.height||x.length),R=new p(D);for(let N=0;N<D;N++)R[N]=E[N*q+n];v.push(R)}x=new Q({width:t.width||1,height:t.height||x.length,pixels:v,pixelType:e,statistics:null});x.updateStatistics();return x}function a(x,t){x=(new O.Zlib(new Uint8Array(x))).getBytes();return f(x,t)}function c(x,t){x=P.decode(x,t.offset,t.eof,!t.isInputBigEndian);return f(x,t)}function m(x){x=W.decode(x);x=new Q({width:x.width,
height:x.height,pixels:x.pixels,pixelType:"U8",mask:x.mask,statistics:null});x.updateStatistics();return x}function k(x,t){x=new Uint8Array(x);x=new z(x);const {width:e,height:p}=t;t=e*p;x=x.decode();let E=0;var v=0;let q;v=new Uint8Array(t);for(E=0;E<t;E++)v[E]=x[4*E+3];const n=new Q({width:e,height:p,pixels:[],pixelType:"U8",mask:v,statistics:[]});for(E=0;3>E;E++){q=new Uint8Array(t);for(v=0;v<t;v++)q[v]=x[4*v+E];n.addData({pixels:q})}n.updateStatistics();return n}function A(x,t,e,p){return B.apply(this,
arguments)}function B(){B=H._asyncToGenerator(function*(x,t,e,p){x=yield(new r).decode(x,{applyJpegMask:!1,format:t,...e},p);x=new Q(x);x.updateStatistics();return x});return B.apply(this,arguments)}function h(x){if(null==x)throw new u("rasterCodec:decode","parameter encodeddata is required.");x=new Uint8Array(x,0,10);let t="";255===x[0]&&216===x[1]?t="jpg":137===x[0]&&80===x[1]&&78===x[2]&&71===x[3]?t="png":67===x[0]&&110===x[1]&&116===x[2]&&90===x[3]&&73===x[4]&&109===x[5]&&97===x[6]&&103===x[7]&&
101===x[8]&&32===x[9]?t="lerc":76===x[0]&&101===x[1]&&114===x[2]&&99===x[3]&&50===x[4]&&32===x[5]?t="lerc2":73===x[0]&&73===x[1]&&42===x[2]&&0===x[3]||77===x[0]&&77===x[1]&&0===x[2]&&42===x[3]||73===x[0]&&73===x[1]&&43===x[2]&&0===x[3]||77===x[0]&&77===x[1]&&0===x[2]&&43===x[3]?t="tiff":71===x[0]&&73===x[1]&&70===x[2]?t="gif":66===x[0]&&77===x[1]?t="bmp":-1<String.fromCharCode.apply(null,x).toLowerCase().indexOf("error")&&(t="error");return t}function b(x){let t=null;switch(x){case "lerc":t=w;break;
case "lerc2":t=G;break;case "jpg":t=m;break;case "png":t=k;break;case "bsq":case "bip":t=(e,p)=>{{const {pixelTypeCtor:E}=d(p.pixelType),v=F.decode;e=v(e,{width:p.width,height:p.height,pixelType:E,format:x});p=new Q({width:p.width,height:p.height,pixels:e.pixels,pixelType:p.pixelType,mask:e.mask,statistics:null});p.updateStatistics()}return p};break;case "tiff":t=y;break;case "deflate":t=a;break;case "lzw":t=c;break;case "error":t=()=>{throw new u("rasterCodec:decode","input data contains error");
};break;default:t=()=>{throw new u("rasterCodec:decode","unsupported raster format");}}return t}function d(x){let t=null,e=null;switch(x?x.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":e=255;t=Uint8Array;break;case "u16":e=e||65535;t=Uint16Array;break;case "u32":e=e||2**32-1;t=Uint32Array;break;case "s8":e=e||-128;t=Int8Array;break;case "s16":e=e||-32768;t=Int16Array;break;case "s32":e=e||-(2**31);t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:e}}function l(x,
t=1){if(x){var {pixels:e,width:p,height:E,mask:v}=x;if(e&&0!==e.length){var q=e.length,n=p-1,D=E-1,R=[],N,T,Y=Q.getPixelArrayConstructor(x.pixelType);if(0===t){for(t=0;t<q;t++){var X=e[t];var ba=new Y(n*D);for(N=0;N<D;N++){var K=N*p;for(T=0;T<n;T++)ba[N*n+T]=X[K+T]}R.push(ba)}if(v){var J=new Uint8Array(n*D);for(N=0;N<D;N++)for(K=N*p,T=0;T<n;T++)J[N*n+T]=v[K+T]}}else{for(t=0;t<q;t++){X=e[t];ba=new Y(n*D);for(N=0;N<D;N++)for(K=N*p,T=0;T<n;T++)ba[N*n+T]=(X[K+T]+X[K+T+1]+X[K+p+T]+X[K+p+T+1])/4;R.push(ba)}if(v)for(J=
new Uint8Array(n*D),N=0;N<D;N++)for(K=N*p,T=0;T<n;T++)J[N*n+T]=Math.min.apply(null,[v[K+T],v[K+T+1],v[K+p+T],v[K+p+T+1]])}x.width=n;x.height=D;x.mask=J;x.pixels=R}}}function C(){C=H._asyncToGenerator(function*(x,t={},e){if(null==x)throw new u("rasterCodec:decode","missing encodeddata parameter.");let p=t.format&&t.format.toLowerCase();if(!("bsq"!==p&&"bip"!==p||null!=t.width&&null!=t.height))throw new u("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===p&&t.customOptions)return t=
S.decodeTileOrStrip(x,t.customOptions),t=new Q({width:t.width,height:t.height,pixels:t.pixels,pixelType:t.pixelType.toLowerCase(),mask:t.mask,statistics:null}),t.updateStatistics(),t;if(!p||"bsq"!==p&&"bip"!==p&&"deflate"!==p&&"lzw"!==p)p=h(x);t.useCanvas&&I.has(p)?x=yield A(x,p,t,e):(e=b(p),t.isPoint&&(t={...t},t.width++,t.height++),x=e(x,t),t.isPoint&&l(x));return x});return C.apply(this,arguments)}var z=function(x){function t(v){var q,n;this.data=v;this.pos=8;this.palette=[];this.imgData=[];this.transparency=
{};this.animation=null;this.text={};for(n=null;;){var D=this.readUInt32();var R=v=void 0;v=[];for(R=0;4>R;++R)v.push(String.fromCharCode(this.data[this.pos++]));v=v.join("");switch(v){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),
numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(D);break;case "fcTL":n&&this.animation.frames.push(n);this.pos+=4;n={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};v=this.readUInt16();D=this.readUInt16()||100;n.delay=1E3*v/D;n.disposeOp=this.data[this.pos++];n.blendOp=this.data[this.pos++];n.data=[];break;case "IDAT":case "fdAT":"fdAT"===v&&(this.pos+=4,D-=4);v=(null!=n?n.data:void 0)||this.imgData;for(R=
0;0<=D?R<D:R>D;0<=D?++R:--R)v.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(D);D=255-this.transparency.indexed.length;if(0<D)for(v=0;0<=D?v<D:v>D;0<=D?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(D)[0];break;case 2:this.transparency.rgb=this.read(D)}break;case "tEXt":R=this.read(D);D=R.indexOf(0);v=String.fromCharCode.apply(String,R.slice(0,D));this.text[v]=String.fromCharCode.apply(String,
R.slice(D+1));break;case "IEND":n&&this.animation.frames.push(n);a:{switch(this.colorType){case 0:case 3:case 4:n=1;break a;case 2:case 6:n=3;break a}n=void 0}this.colors=n;this.hasAlphaChannel=4===(q=this.colorType)||6===q;q=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*q;a:{switch(this.colors){case 1:q="DeviceGray";break a;case 3:q="DeviceRGB";break a}q=void 0}this.colorSpace=q;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=D}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");
}}var e;t.load=function(v,q,n){"function"===typeof q&&(n=q);var D=new XMLHttpRequest;D.open("GET",v,!0);D.responseType="arraybuffer";D.onload=function(){var R=new Uint8Array(D.response||D.mozResponseArrayBuffer);R=new t(R);"function"===typeof(null!=q?q.getContext:void 0)&&R.render(q);return"function"===typeof n?n(R):void 0};return D.send(null)};t.prototype.read=function(v){var q;var n=[];for(q=0;0<=v?q<v:q>v;0<=v?++q:--q)n.push(this.data[this.pos++]);return n};t.prototype.readUInt32=function(){var v=
this.data[this.pos++]<<24;var q=this.data[this.pos++]<<16;var n=this.data[this.pos++]<<8;var D=this.data[this.pos++];return v|q|n|D};t.prototype.readUInt16=function(){var v=this.data[this.pos++]<<8;var q=this.data[this.pos++];return v|q};t.prototype.decodePixels=function(v){var q,n,D,R,N,T,Y,X;null==v&&(v=this.imgData);if(0===v.length)return new Uint8Array(0);v=new O.Zlib(v);v=v.getBytes();var ba=this.pixelBitlength/8;var K=ba*this.width;var J=new Uint8Array(K*this.height);var aa=v.length;for(n=R=
N=0;R<aa;){switch(v[R++]){case 0:for(D=q=0;q<K;D=q+=1)J[n++]=v[R++];break;case 1:for(D=T=0;T<K;D=T+=1){q=v[R++];var Z=D<ba?0:J[n-ba];J[n++]=(q+Z)%256}break;case 2:for(D=Z=0;Z<K;D=Z+=1){q=v[R++];var ca=(D-D%ba)/ba;T=N&&J[(N-1)*K+ca*ba+D%ba];J[n++]=(T+q)%256}break;case 3:for(D=X=0;X<K;D=X+=1)q=v[R++],ca=(D-D%ba)/ba,Z=D<ba?0:J[n-ba],T=N&&J[(N-1)*K+ca*ba+D%ba],J[n++]=(q+Math.floor((Z+T)/2))%256;break;case 4:for(D=X=0;X<K;D=X+=1){q=v[R++];ca=(D-D%ba)/ba;Z=D<ba?0:J[n-ba];0===N?T=Y=0:(T=J[(N-1)*K+ca*ba+
D%ba],Y=ca&&J[(N-1)*K+(ca-1)*ba+D%ba]);var ea=Z+T-Y;D=Math.abs(ea-Z);ca=Math.abs(ea-T);ea=Math.abs(ea-Y);Z=D<=ca&&D<=ea?Z:ca<=ea?T:Y;J[n++]=(q+Z)%256}break;default:throw Error("Invalid filter algorithm: "+v[R-1]);}N++}return J};t.prototype.decodePalette=function(){var v,q,n,D,R;var N=this.palette;var T=this.transparency.indexed||[];var Y=new Uint8Array((T.length||0)+N.length);var X=n=v=q=0;for(D=N.length;n<D;X=n+=3)Y[q++]=N[X],Y[q++]=N[X+1],Y[q++]=N[X+2],Y[q++]=null!=(R=T[v++])?R:255;return Y};t.prototype.copyToImageData=
function(v,q){var n,D;var R=this.colors;var N=null;var T=this.hasAlphaChannel;this.palette.length&&(N=null!=(n=this._decodedPalette)?n:this._decodedPalette=this.decodePalette(),R=4,T=!0);v=v.data||v;var Y=v.length;var X=N||q;n=D=0;if(1===R)for(;n<Y;)R=N?4*q[n/4]:D,D=X[R++],v[n++]=D,v[n++]=D,v[n++]=D,v[n++]=T?X[R++]:this.transparency.grayscale&&this.transparency.grayscale===D?0:255,D=R;else for(;n<Y;)R=N?4*q[n/4]:D,v[n++]=X[R++],v[n++]=X[R++],v[n++]=X[R++],v[n++]=T?X[R++]:this.transparency.rgb&&this.transparency.rgb[1]===
X[R-3]&&this.transparency.rgb[3]===X[R-2]&&this.transparency.rgb[5]===X[R-1]?0:255,D=R};t.prototype.decode=function(){var v=new Uint8Array(this.width*this.height*4);this.copyToImageData(v,this.decodePixels());return v};var p=(e=x.document&&x.document.createElement("canvas"))&&e.getContext("2d");var E=function(v){p.width=v.width;p.height=v.height;p.clearRect(0,0,v.width,v.height);p.putImageData(v,0,0);v=new Image;v.src=e.toDataURL();return v};t.prototype.decodeFrames=function(v){var q,n;if(this.animation){var D=
this.animation.frames;var R=[];var N=q=0;for(n=D.length;q<n;N=++q){N=D[N];var T=v.createImageData(N.width,N.height);var Y=this.decodePixels(new Uint8Array(N.data));this.copyToImageData(T,Y);N.imageData=T;R.push(N.image=E(T))}return R}};t.prototype.renderFrame=function(v,q){var n=this.animation.frames;var D=n[q];n=n[q-1];0===q&&v.clearRect(0,0,this.width,this.height);1===(null!=n?n.disposeOp:void 0)?v.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&v.putImageData(n.imageData,
n.xOffset,n.yOffset);0===D.blendOp&&v.clearRect(D.xOffset,D.yOffset,D.width,D.height);return v.drawImage(D.image,D.xOffset,D.yOffset)};t.prototype.animate=function(v){var q,n=this;var D=0;var R=this.animation;var N=R.numFrames;var T=R.frames;var Y=R.numPlays;return(q=function(){var X=D++%N;var ba=T[X];n.renderFrame(v,X);if(1<N&&D/N<Y)return n.animation._timeout=setTimeout(q,ba.delay)})()};t.prototype.stopAnimation=function(){var v;return clearTimeout(null!=(v=this.animation)?v._timeout:void 0)};t.prototype.render=
function(v){v._png&&v._png.stopAnimation();v._png=this;v.width=this.width;v.height=this.height;v=v.getContext("2d");if(this.animation)return this.decodeFrames(v),this.animate(v);var q=v.createImageData(this.width,this.height);this.copyToImageData(q,this.decodePixels());return v.putImageData(q,0,0)};return t}(self);const I=new Set(["jpg","png","bmp","gif"]);V.decode=function(x){return C.apply(this,arguments)};V.decodeLerc2=G;V.getFormat=function(x){x=h(x);"lerc2"===x?x="lerc":"error"===x&&(x="");return x};
Object.defineProperty(V,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(V,H,u){return function(){function Q(r){r&&(this.canvas=r.canvas,this.ctx=r.ctx||r.canvas&&r.canvas.getContext("2d"))}Q.prototype.decode=function(r,W,S){if(!r||10>r.byteLength)throw new V("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:U,height:P,format:O}=
W;const {applyJpegMask:F}=W;if(F&&(!U||!P))throw new V("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((g,w)=>{let G=null;"jpg"===O&&F&&(G=Q.getMask(r,{width:U,height:P}));const y=new Blob([new Uint8Array(r)],{type:"jpg"==="image/"+O?"jpeg":O}),f=URL.createObjectURL(y),a=new Image;let c;a.src=f;a.onload=()=>{URL.revokeObjectURL(f);if(H.isAborted(S))w(H.createAbortError());else{U=a.width;P=a.height;if(this.canvas){if(this.canvas.width!==
U||this.canvas.height!==P)this.canvas.width=U,this.canvas.height=P;this.ctx.clearRect(0,0,U,P)}else this.canvas=document.createElement("canvas"),this.canvas.width=U,this.canvas.height=P,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(a,0,0);var m=this.ctx.getImageData(0,0,U,P);c=m.data;var k;if(W.renderOnCanvas){if(G)for(k=0;k<G.length;k++)c[4*k+3]=G[k]?255:0;this.ctx.putImageData(m,0,0);g(null)}else{m=U*P;var A=new Uint8Array(m),B=new Uint8Array(m),h=new Uint8Array(m);if(G)for(k=0;k<m;k++)A[k]=
c[4*k],B[k]=c[4*k+1],h[k]=c[4*k+2];else for(G=new Uint8Array(m),k=0;k<m;k++)A[k]=c[4*k],B[k]=c[4*k+1],h[k]=c[4*k+2],G[k]=c[4*k+3];g({width:U,height:P,pixels:[A,B,h],mask:G,pixelType:"u8"})}}};a.onerror=()=>{URL.revokeObjectURL(f);w("cannot load image")}})};Q.getMask=function(r,W){let S=null;try{var U=new Uint8Array(r);r=0;var P=U.length-2;for(r=Math.ceil(U.length/2);r<P&&(255!==U[r]||217!==U[r+1]);r++);r+=2;if(r<U.length-1){const O=(new u.Zlib(U.subarray(r))).getBytes();S=new Uint8Array(W.width*W.height);
W=0;for(U=0;U<O.length;U++)for(P=7;0<=P;P--)S[W++]=O[U]>>P&1}}catch(O){}return S};return Q}()})},"esri/chunks/Zlib":function(){define(["exports"],function(V){var H={exports:{}};(function(u){(function(Q){Q=Q();void 0!==Q&&(u.exports=Q)})(function(){var Q=function(){function r(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}r.prototype={ensureBuffer:function(W){var S=this.buffer,U=S?S.byteLength:0;if(W<U)return S;for(var P=512;P<W;)P<<=1;W=new Uint8Array(P);for(P=0;P<U;++P)W[P]=S[P];return this.buffer=
W},getByte:function(){for(var W=this.pos;this.bufferLength<=W;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(W){var S=this.pos;if(W){this.ensureBuffer(S+W);for(W=S+W;!this.eof&&this.bufferLength<W;)this.readBlock();var U=this.bufferLength;W>U&&(W=U)}else{for(;!this.eof;)this.readBlock();W=this.bufferLength}this.pos=W;return this.buffer.subarray(S,W)},lookChar:function(){for(var W=this.pos;this.bufferLength<=W;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},
getChar:function(){for(var W=this.pos;this.bufferLength<=W;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(W,S,U){for(var P=W+S;this.bufferLength<=P&&!this.eof;)this.readBlock();return new Stream(this.buffer,W,S,U)},skip:function(W){W||(W=1);this.pos+=W},reset:function(){this.pos=0}};return r}();return function(){function r(g){throw Error(g);}function W(g){var w=0,G=g[w++],y=g[w++];-1!=G&&-1!=y||r("Invalid header in flate stream");
8!=(G&15)&&r("Unknown compression method in flate stream");0!=((G<<8)+y)%31&&r("Bad FCHECK in flate stream");y&32&&r("FDICT bit set in flate stream");this.bytes=g;this.bytesPos=w;this.codeBuf=this.codeSize=0;Q.call(this)}if(!self||!self.Uint32Array)return null;var S=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,
258,258,258]),P=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),O=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,
524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,
524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,
524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,
524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,
524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,
524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,
524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],F=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,
327707,327687,327703,327695,0]),5];W.prototype=Object.create(Q.prototype);W.prototype.getBits=function(g){for(var w=this.codeSize,G=this.codeBuf,y=this.bytes,f=this.bytesPos,a;w<g;)"undefined"==typeof(a=y[f++])&&r("Bad encoding in flate stream"),G|=a<<w,w+=8;this.codeBuf=G>>g;this.codeSize=w-=g;this.bytesPos=f;return G&(1<<g)-1};W.prototype.getCode=function(g){var w=g[0],G=g[1];g=this.codeSize;for(var y=this.codeBuf,f=this.bytes,a=this.bytesPos;g<G;){var c;"undefined"==typeof(c=f[a++])&&r("Bad encoding in flate stream");
y|=c<<g;g+=8}G=w[y&(1<<G)-1];w=G>>16;G&=65535;(0==g||g<w||0==w)&&r("Bad encoding in flate stream");this.codeBuf=y>>w;this.codeSize=g-w;this.bytesPos=a;return G};W.prototype.generateHuffmanTable=function(g){for(var w=g.length,G=0,y=0;y<w;++y)g[y]>G&&(G=g[y]);for(var f=1<<G,a=new Uint32Array(f),c=1,m=0,k=2;c<=G;++c,m<<=1,k<<=1)for(var A=0;A<w;++A)if(g[A]==c){var B=0,h=m;for(y=0;y<c;++y)B=B<<1|h&1,h>>=1;for(y=B;y<f;y+=k)a[y]=c<<16|A;++m}return[a,G]};W.prototype.readBlock=function(){function g(B,h,b,
d,l){for(B=B.getBits(b)+d;0<B--;)h[m++]=l}var w=this.getBits(3);w&1&&(this.eof=!0);w>>=1;if(0==w){var G=this.bytes,y=this.bytesPos,f;"undefined"==typeof(f=G[y++])&&r("Bad block header in flate stream");var a=f;"undefined"==typeof(f=G[y++])&&r("Bad block header in flate stream");a|=f<<8;"undefined"==typeof(f=G[y++])&&r("Bad block header in flate stream");w=f;"undefined"==typeof(f=G[y++])&&r("Bad block header in flate stream");(w|f<<8)!=(~a&65535)&&r("Bad uncompressed block length in flate stream");
this.codeSize=this.codeBuf=0;f=this.bufferLength;w=this.ensureBuffer(f+a);this.bufferLength=a=f+a;for(var c=f;c<a;++c){if("undefined"==typeof(f=G[y++])){this.eof=!0;break}w[c]=f}this.bytesPos=y}else{if(1==w)y=O,f=F;else if(2==w){w=this.getBits(5)+257;f=this.getBits(5)+1;G=this.getBits(4)+4;y=Array(S.length);for(var m=0;m<G;)y[S[m++]]=this.getBits(3);y=this.generateHuffmanTable(y);m=G=0;f=w+f;for(a=Array(f);m<f;)c=this.getCode(y),16==c?g(this,a,2,3,G):17==c?g(this,a,3,3,G=0):18==c?g(this,a,7,11,G=
0):a[m++]=G=c;y=this.generateHuffmanTable(a.slice(0,w));f=this.generateHuffmanTable(a.slice(w,f))}else r("Unknown block type in flate stream");a=(w=this.buffer)?w.length:0;for(c=this.bufferLength;;){var k=this.getCode(y);if(256>k)c+1>=a&&(w=this.ensureBuffer(c+1),a=w.length),w[c++]=k;else{if(256==k){this.bufferLength=c;break}k-=257;k=U[k];var A=k>>16;0<A&&(A=this.getBits(A));G=(k&65535)+A;k=this.getCode(f);k=P[k];A=k>>16;0<A&&(A=this.getBits(A));k=(k&65535)+A;c+G>=a&&(w=this.ensureBuffer(c+G),a=w.length);
for(A=0;A<G;++A,++c)w[c]=w[c-k]}}}};return W}()})})(H);V.Zlib=H.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg","../../../chunks/Zlib"],function(V,H){return function(){function u(){}u.decode=function(Q){var r=new Uint8Array(Q);Q=new V.JpegImage;Q.parse(r);const {width:W,height:S,numComponents:U,eof:P}=Q;Q=Q.getData(W,S,!0);let O;const F=W*S;let g=0;var w=0,G=0;if(P<r.length-1)for(r=(new H.Zlib(r.subarray(P))).getBytes(),O=new Uint8Array(F),g=w=0;g<r.length;g++)for(G=
7;0<=G;G--)O[w++]=r[g]>>G&1;r=null;if(1===U)r=[Q,Q,Q];else{r=[];for(g=0;3>g;g++)G=new Uint8Array(F),r.push(G);for(w=G=0;w<F;w++)for(g=0;3>g;g++)r[g][w]=Q[G++]}return{width:W,height:S,pixels:r,mask:O}};return u}()})},"esri/chunks/Jpg":function(){define(["exports"],function(V){var H={exports:{}};(function(u){(function(Q){Q=Q();void 0!==Q&&(u.exports=Q)})(function(){var Q=function(){function r(W){this.message="JPEG error: "+W}r.prototype=Error();r.prototype.name="JpegError";return r.constructor=r}();
return function(){function r(){this.decodeTransform=null;this.colorTransform=-1}function W(F,g){for(var w=0,G=[],y,f,a=16;0<a&&!F[a-1];)a--;G.push({children:[],index:0});var c=G[0],m;for(y=0;y<a;y++){for(f=0;f<F[y];f++){c=G.pop();for(c.children[c.index]=g[w];0<c.index;)c=G.pop();c.index++;for(G.push(c);G.length<=y;)G.push(m={children:[],index:0}),c.children[c.index]=m.children,c=m;w++}y+1<a&&(G.push(m={children:[],index:0}),c.children[c.index]=m.children,c=m)}return G[0].children}function S(F,g,w,
G,y,f,a,c,m){function k(){if(0<e)return e--,t>>e&1;t=F[g++];if(255===t){var J=F[g++];if(J)throw new Q("unexpected marker "+(t<<8|J).toString(16));}e=7;return t>>>7}function A(J){for(;;){J=J[k()];if("number"===typeof J)return J;if("object"!==typeof J)throw new Q("invalid huffman sequence");}}function B(J){for(var aa=0;0<J;)aa=aa<<1|k(),J--;return aa}function h(J){if(1===J)return 1===k()?1:-1;var aa=B(J);return aa>=1<<J-1?aa:aa+(-1<<J)+1}function b(J,aa){var Z=A(J.huffmanTableDC);Z=0===Z?0:h(Z);J.blockData[aa]=
J.pred+=Z;for(Z=1;64>Z;){var ca=A(J.huffmanTableAC),ea=ca&15;ca>>=4;if(0===ea){if(15>ca)break;Z+=16}else Z+=ca,J.blockData[aa+O[Z]]=h(ea),Z++}}function d(J,aa){var Z=A(J.huffmanTableDC);Z=0===Z?0:h(Z)<<m;J.blockData[aa]=J.pred+=Z}function l(J,aa){J.blockData[aa]|=k()<<m}function C(J,aa){if(0<p)p--;else for(var Z=f;Z<=a;){var ca=A(J.huffmanTableAC),ea=ca&15;ca>>=4;if(0===ea){if(15>ca){p=B(ca)+(1<<ca)-1;break}Z+=16}else Z+=ca,J.blockData[aa+O[Z]]=h(ea)*(1<<m),Z++}}function z(J,aa){for(var Z=f,ca=0,
ea;Z<=a;){ea=O[Z];switch(E){case 0:ca=A(J.huffmanTableAC);ea=ca&15;ca>>=4;if(0===ea)15>ca?(p=B(ca)+(1<<ca),E=4):(ca=16,E=1);else{if(1!==ea)throw new Q("invalid ACn encoding");v=h(ea);E=ca?2:3}continue;case 1:case 2:J.blockData[aa+ea]?J.blockData[aa+ea]+=k()<<m:(ca--,0===ca&&(E=2===E?3:0));break;case 3:J.blockData[aa+ea]?J.blockData[aa+ea]+=k()<<m:(J.blockData[aa+ea]=v<<m,E=0);break;case 4:J.blockData[aa+ea]&&(J.blockData[aa+ea]+=k()<<m)}Z++}4===E&&(p--,0===p&&(E=0))}var I=w.mcusPerLine,x=g,t=0,e=
0,p=0,E=0,v,q=G.length,n,D,R,N;c=w.progressive?0===f?0===c?d:l:0===c?C:z:b;var T=0;w=1===q?G[0].blocksPerLine*G[0].blocksPerColumn:I*w.mcusPerColumn;for(var Y,X;T<w;){var ba=y?Math.min(w-T,y):w;for(n=0;n<q;n++)G[n].pred=0;p=0;if(1===q){var K=G[0];for(N=0;N<ba;N++)c(K,64*((K.blocksPerLine+1)*(T/K.blocksPerLine|0)+T%K.blocksPerLine)),T++}else for(N=0;N<ba;N++){for(n=0;n<q;n++)for(K=G[n],Y=K.h,X=K.v,D=0;D<X;D++)for(R=0;R<Y;R++)c(K,64*((K.blocksPerLine+1)*((T/I|0)*K.v+D)+(T%I*K.h+R)));T++}e=0;(K=P(F,
g))&&K.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+K.invalid),g=K.offset);K=K&&K.marker;if(!K||65280>=K)throw new Q("marker was not found");if(65488<=K&&65495>=K)g+=2;else break}(K=P(F,g))&&K.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+K.invalid),g=K.offset);return g-x}function U(F,g){F=g.blocksPerLine;for(var w=g.blocksPerColumn,G=new Int16Array(64),y=0;y<w;y++)for(var f=0;f<F;f++){var a=void 0,c=void 0,m=void 0,k=void 0,A=void 0,B=void 0,
h=void 0,b=void 0,d=A=B=k=c=a=void 0,l=void 0,C=void 0,z=void 0,I=64*((g.blocksPerLine+1)*y+f),x=G,t=g.quantizationTable,e=g.blockData;if(!t)throw new Q("missing required Quantization Table.");for(var p=0;64>p;p+=8)a=e[I+p],b=e[I+p+1],h=e[I+p+2],B=e[I+p+3],A=e[I+p+4],k=e[I+p+5],m=e[I+p+6],c=e[I+p+7],a*=t[p],0===(b|h|B|A|k|m|c)?(a=5793*a+512>>10,x[p]=a,x[p+1]=a,x[p+2]=a,x[p+3]=a,x[p+4]=a,x[p+5]=a,x[p+6]=a,x[p+7]=a):(b*=t[p+1],h*=t[p+2],B*=t[p+3],A*=t[p+4],k*=t[p+5],m*=t[p+6],c*=t[p+7],z=5793*a+128>>
8,C=5793*A+128>>8,l=h,d=m,A=2896*(b-c)+128>>8,c=2896*(b+c)+128>>8,B<<=4,k<<=4,z=z+C+1>>1,C=z-C,a=3784*l+1567*d+128>>8,l=1567*l-3784*d+128>>8,d=a,A=A+k+1>>1,k=A-k,c=c+B+1>>1,B=c-B,z=z+d+1>>1,d=z-d,C=C+l+1>>1,l=C-l,a=2276*A+3406*c+2048>>12,A=3406*A-2276*c+2048>>12,c=a,a=799*B+4017*k+2048>>12,B=4017*B-799*k+2048>>12,k=a,x[p]=z+c,x[p+7]=z-c,x[p+1]=C+k,x[p+6]=C-k,x[p+2]=l+B,x[p+5]=l-B,x[p+3]=d+A,x[p+4]=d-A);for(t=0;8>t;++t)a=x[t],b=x[t+8],h=x[t+16],B=x[t+24],A=x[t+32],k=x[t+40],m=x[t+48],c=x[t+56],0===
(b|h|B|A|k|m|c)?(a=5793*a+8192>>14,a=-2040>a?0:2024<=a?255:a+2056>>4,e[I+t]=a,e[I+t+8]=a,e[I+t+16]=a,e[I+t+24]=a,e[I+t+32]=a,e[I+t+40]=a,e[I+t+48]=a,e[I+t+56]=a):(z=5793*a+2048>>12,C=5793*A+2048>>12,l=h,d=m,A=2896*(b-c)+2048>>12,c=2896*(b+c)+2048>>12,z=(z+C+1>>1)+4112,C=z-C,a=3784*l+1567*d+2048>>12,l=1567*l-3784*d+2048>>12,d=a,A=A+k+1>>1,k=A-k,c=c+B+1>>1,B=c-B,z=z+d+1>>1,d=z-d,C=C+l+1>>1,l=C-l,a=2276*A+3406*c+2048>>12,A=3406*A-2276*c+2048>>12,c=a,a=799*B+4017*k+2048>>12,B=4017*B-799*k+2048>>12,k=
a,a=z+c,c=z-c,b=C+k,m=C-k,h=l+B,k=l-B,B=d+A,A=d-A,a=16>a?0:4080<=a?255:a>>4,b=16>b?0:4080<=b?255:b>>4,h=16>h?0:4080<=h?255:h>>4,B=16>B?0:4080<=B?255:B>>4,A=16>A?0:4080<=A?255:A>>4,k=16>k?0:4080<=k?255:k>>4,m=16>m?0:4080<=m?255:m>>4,c=16>c?0:4080<=c?255:c>>4,e[I+t]=a,e[I+t+8]=b,e[I+t+16]=h,e[I+t+24]=B,e[I+t+32]=A,e[I+t+40]=k,e[I+t+48]=m,e[I+t+56]=c)}return g.blockData}function P(F,g,w){var G=F.length-1;w=w<g?w:g;if(g>=G)return null;var y=F[g]<<8|F[g+1];if(65472<=y&&65534>=y)return{invalid:null,marker:y,
offset:g};for(g=F[w]<<8|F[w+1];!(65472<=g&&65534>=g);){if(++w>=G)return null;g=F[w]<<8|F[w+1]}return{invalid:y.toString(16),marker:g,offset:w}}if(!self||!self.Uint8ClampedArray)return null;var O=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);r.prototype={parse:function(F){function g(){var t=F[y]<<8|F[y+1];y+=2;return t}function w(){var t=g();t=y+
t-2;var e=P(F,t,y);e&&e.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+e.invalid),t=e.offset);t=F.subarray(y,t);y+=t.length;return t}function G(t){for(var e=Math.ceil(t.samplesPerLine/8/t.maxH),p=Math.ceil(t.scanLines/8/t.maxV),E=0;E<t.components.length;E++){x=t.components[E];var v=Math.ceil(Math.ceil(t.samplesPerLine/8)*x.h/t.maxH),q=Math.ceil(Math.ceil(t.scanLines/8)*x.v/t.maxV);x.blockData=new Int16Array(64*p*x.v*(e*x.h+1));x.blocksPerLine=v;x.blocksPerColumn=q}t.mcusPerLine=
e;t.mcusPerColumn=p}var y=0,f=null,a=null,c=[],m=[],k=[],A=g();if(65496!==A)throw new Q("SOI not found");for(A=g();65497!==A;){switch(A){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var B=w();65504===A&&74===B[0]&&70===B[1]&&73===B[2]&&70===B[3]&&0===B[4]&&(f={version:{major:B[5],minor:B[6]},densityUnits:B[7],xDensity:B[8]<<8|B[9],yDensity:B[10]<<8|B[11],thumbWidth:B[12],
thumbHeight:B[13],thumbData:B.subarray(14,14+3*B[12]*B[13])});65518===A&&65===B[0]&&100===B[1]&&111===B[2]&&98===B[3]&&101===B[4]&&(a={version:B[5]<<8|B[6],flags0:B[7]<<8|B[8],flags1:B[9]<<8|B[10],transformCode:B[11]});break;case 65499:A=g()+y-2;for(var h;y<A;){var b=F[y++],d=new Uint16Array(64);if(0===b>>4)for(B=0;64>B;B++)h=O[B],d[h]=F[y++];else if(1===b>>4)for(B=0;64>B;B++)h=O[B],d[h]=g();else throw new Q("DQT - invalid table spec");c[b&15]=d}break;case 65472:case 65473:case 65474:if(l)throw new Q("Only single frame JPEGs supported");
g();var l={};l.extended=65473===A;l.progressive=65474===A;l.precision=F[y++];l.scanLines=g();l.samplesPerLine=g();l.components=[];l.componentIds={};B=F[y++];for(A=d=b=0;A<B;A++){h=F[y];var C=F[y+1]>>4;var z=F[y+1]&15;b<C&&(b=C);d<z&&(d=z);C=l.components.push({h:C,v:z,quantizationId:F[y+2],quantizationTable:null});l.componentIds[h]=C-1;y+=3}l.maxH=b;l.maxV=d;G(l);break;case 65476:h=g();for(A=2;A<h;){b=F[y++];d=new Uint8Array(16);for(B=C=0;16>B;B++,y++)C+=d[B]=F[y];z=new Uint8Array(C);for(B=0;B<C;B++,
y++)z[B]=F[y];A+=17+C;(0===b>>4?k:m)[b&15]=W(d,z)}break;case 65501:g();var I=g();break;case 65498:g();h=F[y++];B=[];for(A=0;A<h;A++){b=l.componentIds[F[y++]];var x=l.components[b];b=F[y++];x.huffmanTableDC=k[b>>4];x.huffmanTableAC=m[b&15];B.push(x)}A=F[y++];h=F[y++];b=F[y++];A=S(F,y,l,B,I,A,h,b>>4,b&15);y+=A;break;case 65535:255!==F[y]&&y--;break;default:if(255===F[y-3]&&192<=F[y-2]&&254>=F[y-2])y-=3;else throw new Q("unknown marker "+A.toString(16));}A=g()}this.width=l.samplesPerLine;this.height=
l.scanLines;this.jfif=f;this.eof=y;this.adobe=a;this.components=[];for(A=0;A<l.components.length;A++){x=l.components[A];if(f=c[x.quantizationId])x.quantizationTable=f;this.components.push({output:U(l,x),scaleX:x.h/l.maxH,scaleY:x.v/l.maxV,blocksPerLine:x.blocksPerLine,blocksPerColumn:x.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(F,g){var w=this.width/F,G=this.height/g,y,f,a=0,c=this.components.length,m=F*g*c,k=new Uint8ClampedArray(m),A=new Uint32Array(F);
for(f=0;f<c;f++){var B=this.components[f];var h=B.scaleX*w;var b=B.scaleY*G;a=f;var d=B.output;var l=B.blocksPerLine+1<<3;for(y=0;y<F;y++)B=0|y*h,A[y]=(B&4294967288)<<3|B&7;for(h=0;h<g;h++)for(B=0|h*b,B=l*(B&4294967288)|(B&7)<<3,y=0;y<F;y++)k[a]=d[B+A[y]],a+=c}if(g=this.decodeTransform)for(f=0;f<m;)for(F=B=0;B<c;B++,f++,F+=2)k[f]=(k[f]*g[F]>>8)+g[F+1];return k},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===
this.colorTransform?!0:!1},_convertYccToRgb:function(F){for(var g,w,G,y=0,f=F.length;y<f;y+=3)g=F[y],w=F[y+1],G=F[y+2],F[y]=g-179.456+1.402*G,F[y+1]=g+135.459-.344*w-.714*G,F[y+2]=g-226.816+1.772*w;return F},_convertYcckToRgb:function(F){for(var g,w,G,y,f=0,a=0,c=F.length;a<c;a+=4)g=F[a],w=F[a+1],G=F[a+2],y=F[a+3],F[f++]=-122.67195406894+w*(-6.60635669420364E-5*w+4.37130475926232E-4*G-5.4080610064599E-5*g+4.8449797120281E-4*y-.154362151871126)+G*(-9.57964378445773E-4*G+8.17076911346625E-4*g-.00477271405408747*
y+1.53380253221734)+g*(9.61250184130688E-4*g-.00266257332283933*y+.48357088451265)+y*(-3.36197177618394E-4*y+.484791561490776),F[f++]=107.268039397724+w*(2.19927104525741E-5*w-6.40992018297945E-4*G+6.59397001245577E-4*g+4.26105652938837E-4*y-.176491792462875)+G*(-7.78269941513683E-4*G+.00130872261408275*g+7.70482631801132E-4*y-.151051492775562)+g*(.00126935368114843*g-.00265090189010898*y+.25802910206845)+y*(-3.18913117588328E-4*y-.213742400323665),F[f++]=-20.810012546947+w*(-5.70115196973677E-4*
w-2.63409051004589E-5*G+.0020741088115012*g-.00288260236853442*y+.814272968359295)+G*(-1.53496057440975E-5*G-1.32689043961446E-4*g+5.60833691242812E-4*y-.195152027534049)+g*(.00174418132927582*g-.00255243321439347*y+.116935020465145)+y*(-3.43531996510555E-4*y+.24165260232407);return F},_convertYcckToCmyk:function(F){for(var g,w,G,y=0,f=F.length;y<f;y+=4)g=F[y],w=F[y+1],G=F[y+2],F[y]=434.456-g-1.402*G,F[y+1]=119.541-g+.344*w+.714*G,F[y+2]=481.816-g-1.772*w;return F},_convertCmykToRgb:function(F){for(var g,
w,G,y,f=0,a=1/255,c=0,m=F.length;c<m;c+=4)g=F[c]*a,w=F[c+1]*a,G=F[c+2]*a,y=F[c+3]*a,F[f++]=255+g*(-4.387332384609988*g+54.48615194189176*w+18.82290502165302*G+212.25662451639585*y-285.2331026137004)+w*(1.7149763477362134*w-5.6096736904047315*G-17.873870861415444*y-5.497006427196366)+G*(-2.5217340131683033*G-21.248923337353073*y+17.5119270841813)-y*(21.86122147463605*y+189.48180835922747),F[f++]=255+g*(8.841041422036149*g+60.118027045597366*w+6.871425592049007*G+31.159100130055922*y-79.2970844816548)+
w*(-15.310361306967817*w+17.575251261109482*G+131.35250912493976*y-190.9453302588951)+G*(4.444339102852739*G+9.8632861493405*y-24.86741582555878)-y*(20.737325471181034*y+187.80453709719578),F[f++]=255+g*(.8842522430003296*g+8.078677503112928*w+30.89978309703729*G-.23883238689178934*y-14.183576799673286)+w*(10.49593273432072*w+63.02378494754052*G+50.606957656360734*y-112.23884253719248)+G*(.03296041114873217*G+115.60384449646641*y-193.58209356861505)-y*(22.33816807309886*y+180.12613974708367);return F},
getData:function(F,g,w){if(4<this.numComponents)throw new Q("Unsupported color mode");F=this._getLinearizedBlockData(F,g);if(1===this.numComponents&&w){w=F.length;g=new Uint8ClampedArray(3*w);for(var G=0,y=0;y<w;y++){var f=F[y];g[G++]=f;g[G++]=f;g[G++]=f}return g}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(F);if(4===this.numComponents){if(this._isColorConversionNeeded())return w?this._convertYcckToRgb(F):this._convertYcckToCmyk(F);if(w)return this._convertCmykToRgb(F)}return F}};
return r}()})})(H);V.JpegImage=H.exports})},"esri/chunks/TiffDecoder":function(){define("exports ../layers/support/rasterDatasets/byteStreamUtils ./Jpg ../layers/support/rasterFormats/Lzw ../layers/support/rasterFormats/TiffTags ../layers/support/rasterFormats/utils ./Zlib".split(" "),function(V,H,u,Q,r,W,S){function U(e,p){let E="unknown";3===e?E="f32":1===e?1===p?E="u1":2===p?E="u2":4===p?E="u4":8>=p?E="u8":16>=p?E="u16":32>=p&&(E="u32"):2===e&&(8>=p?E="s8":16>=p?E="s16":32>=p&&(E="s32"));return E}
function P(e){let p=null;switch(e?e.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":p=Uint8Array;break;case "u16":p=Uint16Array;break;case "u32":p=Uint32Array;break;case "s8":p=Int8Array;break;case "s16":p=Int16Array;break;case "s32":p=Int32Array;break;default:p=Float32Array}return p}function O(e,p){return{x:p[0]*e.x+p[1]*e.y+p[2],y:p[3]*e.x+p[4]*e.y+p[5]}}function F(e,p){var E;return null==(E=e.get(p))?void 0:E.values}function g(e,p){var E;return null==(E=e.get(p))?void 0:E.values}function w(e,
p){var E;return null==(E=e.get(p))?void 0:E.values[0]}function G(e,p){var E;return null==(E=e.get(p))?void 0:E.values[0]}function y(e,p,E,v=0,q=r.TIFF_TAGS,n=4){var D=8===n;const R=D?k(new DataView(e,E,8),0,p):(new DataView(e,E,2)).getUint16(0,p),N=4+2*n;var T=D?8:2;D=T+R*N;if(E+D>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:D};const Y=E+D+4<=e.byteLength?A(new DataView(e,E+D,8===n?8:4),0,p,8===n):null;E+=T;T=new Map;let X,ba,K,J,aa;for(let ca=0;ca<R;ca++){var Z=new DataView(e,
E+N*ca,N);X=Z.getUint16(0,p);K=Z.getUint16(2,p);ba=r.getTagName(X,q);const ea=[];2===n?(J=Z.getUint16(4,p),aa=Z.getUint16(6,p)):4===n?(J=Z.getUint32(4,p),aa=Z.getUint32(8,p)):8===n&&(J=A(Z,4,p,!0),aa=A(Z,12,p,!0),ea.push(Z.getUint32(12,p)),ea.push(Z.getUint32(16,p)));Z={id:X,type:K,valueCount:J,valueOffset:aa,valueOffsets:ea,values:null};f(e,p,Z,v,!1,n);T.set(ba,Z)}return{success:!0,ifd:T,nextIFD:Y,requiredBufferSize:D}}function f(e,p,E,v=0,q=!1,n=4){if(E.values)return!0;var D=E.type,R=E.valueCount,
N=E.valueOffset;let T=[];var Y=C[D],X=8*Y,ba=R*Y,K=R*C[D]*8,J=8===n?64:32;n=E.valueOffsets;if(K>J&&ba>(q?e.byteLength:e?e.byteLength-N+v:0))return E.offlineOffsetSize=[N,ba],E.values=null,!1;if(K<=J)if(p||(32>=J?N>>>=32-K:(e=null!=n&&n.length?n[0]:N>>>0,p=null!=n&&n.length?n[1]:Math.round((N-e)/4294967296),32>=K?(N=e>>>32-K,n[0]=N):(N=e*2**(32-K)+(p>>>32-K),n[0]=e,n[1]=p>>>32-K))),1===R&&X===J)T=[N];else if(64===J)for(e=null!=n&&n.length?n[0]:N>>>0,N=null!=n&&n.length?n[1]:Math.round((N-e)/4294967296),
p=e,Y=32,e=1;e<=R;e++)ba=32-X*e%32,Y<X?(ba=p<<ba>>>32-Y,K=N<<32-Y>>>32-Y,p=N,T.push(ba+K*2**(X-Y)),Y-=32-(X-Y)):(T.push(p<<ba>>>32-X),Y-=X),0===Y&&(Y=32,p=N);else for(e=1;e<=R;e++)T.push(N<<32-X*e>>>32-X);else for(N-=v,q&&(N=0),R=N;R<N+ba;R+=Y){switch(D){case 1:X=(new DataView(e,R,1)).getUint8(0);break;case 2:X=(new DataView(e,R,1)).getUint8(0);break;case 3:X=(new DataView(e,R,2)).getUint16(0,p);break;case 4:case 13:X=(new DataView(e,R,4)).getUint32(0,p);break;case 5:X=(new DataView(e,R,4)).getUint32(0,
p)/(new DataView(e,R+4,4)).getUint32(0,p);break;case 6:X=(new DataView(e,R,1)).getInt8(0);break;case 7:X=(new DataView(e,R,1)).getUint8(0);break;case 8:X=(new DataView(e,R,2)).getInt16(0,p);break;case 9:X=(new DataView(e,R,4)).getInt32(0,p);break;case 10:X=(new DataView(e,R,4)).getInt32(0,p)/(new DataView(e,R+4,4)).getInt32(0,p);break;case 11:X=(new DataView(e,R,4)).getFloat32(0,p);break;case 12:X=(new DataView(e,R,8)).getFloat64(0,p);break;case 16:case 18:X=k(new DataView(e,R,8),0,p);break;case 17:n=
new DataView(e,R,8);K=(X=p)?n.getInt32(0,X):n.getUint32(0,X);n=X?n.getUint32(4,X):n.getInt32(4,X);J=0<=(X?K:n)?1:-1;X?K*=J:n*=J;X=J*(X?4294967296*n+K:4294967296*K+n);break;default:X=null}T.push(X)}if(2===D){D="";N=T;T=[];for(e=0;e<N.length;e++)0===N[e]&&""!==D?(T.push(D),D=""):D+=String.fromCharCode(N[e]);""===D&&0!==T.length||T.push(D)}E.values=T;return!0}function a(e){var p,E,v=e[0];const q=G(v,"TILEWIDTH"),n=G(v,"TILELENGTH"),D=G(v,"IMAGEWIDTH"),R=G(v,"IMAGELENGTH");var N=G(v,"BITSPERSAMPLE");
const T=G(v,"SAMPLESPERPIXEL");var Y=null!=(p=G(v,"SAMPLEFORMAT"))?p:1;p=U(Y,N);const X=c(v);var ba=F(v,"GDAL_NODATA");let K;null!=ba&&ba.length&&(K=ba.map(ta=>parseFloat(ta)),K.some(ta=>isNaN(ta))&&(K=null));var J=null!=(E=G(v,"COMPRESSION"))?E:1;switch(J){case 1:E="NONE";break;case 2:case 3:case 4:case 32771:E="CCITT";break;case 5:E="LZW";break;case 6:case 7:E="JPEG";break;case 32773:E="PACKBITS";break;case 8:case 32946:E="DEFLATE";break;case 34712:E="JPEG2000";break;case 34887:E="LERC";break;default:E=
String(J)}ba=!0;let aa="";z.has(J)||(ba=!1,aa+="unsupported tag compression "+J);3<Y&&(ba=!1,aa+="unsupported tag sampleFormat "+Y);0!==N%8&&(ba=!1,aa+="unsupported tag bitsPerSample "+N);N=w(v,"GEOASCIIPARAMS");if(N){var Z=(Z=N.split("|").filter(ta=>-1<ta.indexOf("ESRI PE String \x3d "))[0])?Z.replace("ESRI PE String \x3d ",""):"";Z=Z.startsWith("COMPD_CS")||Z.startsWith("PROJCS")||Z.startsWith("GEOGCS")?{wkid:null,wkt:Z}:null}Y=g(v,"GEOTIEPOINTS");N=g(v,"GEOPIXELSCALE");J=g(v,"GEOTRANSMATRIX");
var ca=v.has("GEOKEYDIRECTORY")?v.get("GEOKEYDIRECTORY").data:null;v=!1;if(ca){v=2===G(ca,"GTRasterTypeGeoKey");var ea=G(ca,"GTModelTypeGeoKey");2===ea?(ca=G(ca,"GeographicTypeGeoKey"),1024<=ca&&32766>=ca&&(Z={wkid:ca})):1===ea&&(ca=G(ca,"ProjectedCSTypeGeoKey"),1024<=ca&&32766>=ca&&(Z={wkid:ca}))}let ja;N&&Y&&6<=Y.length?(ja=[N[0],0,Y[3]-Y[0]*N[0],0,-Math.abs(N[1]),Y[4]-Y[1]*N[1]],v&&(ja[2]-=.5*ja[0]+.5*ja[1],ja[5]-=.5*ja[3]+.5*ja[4])):J&&16===J.length&&(ja=v?[J[0],J[1],J[3]-.5*J[0],J[4],J[5],J[7]-
.5*J[5]]:[J[0],J[1],J[3],J[4],J[5],J[7]]);if(ja){v=[{x:0,y:R},{x:0,y:0},{x:D,y:R},{x:D,y:0}];ca=J=Number.POSITIVE_INFINITY;let ta=ea=Number.NEGATIVE_INFINITY;for(let ha=0;ha<v.length;ha++)Y=O(v[ha],ja),J=Y.x>J?J:Y.x,ea=Y.x<ea?ea:Y.x,ca=Y.y>ca?ca:Y.y,ta=Y.y<ta?ta:Y.y;Z={xmin:J,xmax:ea,ymin:ca,ymax:ta,spatialReference:Z}}else Z={xmin:-.5,ymin:.5-R,xmax:D-.5,ymax:.5,spatialReference:Z};v=e.filter(ta=>1===w(ta,"NEWSUBFILETYPE"));let ma,ra,pa;if(0<v.length){ma=Math.round(Math.log(D/G(v[0],"IMAGEWIDTH"))/
Math.LN2);var la=v[v.length-1];ra=Math.round(Math.log(D/G(la,"IMAGEWIDTH"))/Math.LN2);pa=G(la,"TILEWIDTH");la=G(la,"TILELENGTH")}pa=0<ra?pa||q:null;la=0<ra?la||n:null;let va;q&&(va=[{maxCol:Math.ceil(D/q)-1,maxRow:Math.ceil(R/n)-1,minRow:0,minCol:0}],v.forEach(ta=>{va.push({maxCol:Math.ceil(G(ta,"IMAGEWIDTH")/G(ta,"TILEWIDTH"))-1,maxRow:Math.ceil(G(ta,"IMAGELENGTH")/G(ta,"TILELENGTH"))-1,minRow:0,minCol:0})}));v=w(e[0],"GDAL_METADATA");v=t(v);aa+=" "+b({width:D,height:R,tileWidth:q,tileHeight:n,planes:T,
ifds:e});return{width:D,height:R,tileWidth:q,tileHeight:n,planes:T,isBSQ:X,pixelType:p,compression:E,noData:K,isSupported:ba,message:aa,extent:Z,affine:N?null:ja,firstPyramidLevel:ma,maximumPyramidLevel:ra,pyramidBlockWidth:pa,pyramidBlockHeight:la,tileBoundary:va,metadata:v}}function c(e,p){return(e=F(e,"PLANARCONFIGURATION"))?2===e[0]:p?p.isBSQ:!1}function m(e){const {littleEndian:p,isBigTiff:E,firstIFD:v}=B(e);var q=v;const n=[];do if(q=h(e,p,q,0,r.TIFF_TAGS,E?8:4),q.success)n.push(q.ifd),q=q.nextIFD;
else break;while(0<q);return{...a(n),littleEndian:p,isBigTiff:E,ifds:n}}function k(e,p,E){const v=e.getUint32(p,E);e=e.getUint32(p+4,E);return E?4294967296*e+v:4294967296*v+e}function A(e,p,E,v){return v?k(e,p,E):e.getUint32(p,E)}function B(e){var p=new DataView(e,0,16),E=p.getUint16(0,!1);e=null;if(18761===E)e=!0;else if(19789===E)e=!1;else throw"unexpected endianess byte";var v=p.getUint16(2,e);if(42!==v&&43!==v)throw"unexpected tiff identifier";E=4;if(v=43===v){const q=p.getUint16(E,e);E+=2;if(8!==
q)throw"unsupported bigtiff version";if(0!==p.getUint16(E,e))throw"unsupported bigtiff version";E+=2}p=A(p,E,e,v);return{littleEndian:e,isBigTiff:v,firstIFD:p}}function h(e,p,E,v=0,q=r.TIFF_TAGS,n=4){E=y(e,p,E,v,q,n);let D;const R=E.ifd;R&&(r.ifdTags.forEach((N,T)=>{R.has(T)&&(D=R.get(T),D.data=y(e,p,D.valueOffset-v,v,N).ifd)}),R.has("GEOKEYDIRECTORY")&&(D=R.get("GEOKEYDIRECTORY"),(q=D.values)&&4<q.length&&(q=q[0]+"."+q[1]+"."+q[2],D.data=y(e,p,D.valueOffset+6-v,v,r.GEO_KEYS,2).ifd,D.data&&D.data.set("GEOTIFFVersion",
{id:0,type:2,valueCount:1,valueOffset:null,values:[q]}))),R.has("XMP")&&(D=R.get("XMP"),q=D.values,"number"===typeof q[0]&&7===D.type&&(D.values=[H.bytesToUTF8(new Uint8Array(q))])));return E}function b(e){const {width:p,height:E,tileHeight:v,tileWidth:q}=e,n=e.planes,D=q?q*v:p*E;e=G(e.ifds[0],"BITSPERSAMPLE");let R="";D*n>2**30/(8<e?e/8:1)&&(R=q?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return R}var d={exports:{}};(function(e){(function(p){p=
p();void 0!==p&&(e.exports=p)})(function(){var p={unstuff:function(q,n,D,R,N,T,Y,X){var ba=(1<<D)-1,K=0,J,aa=0;q[q.length-1]<<=8*(4*q.length-Math.ceil(D*R/8));if(N)for(J=0;J<R;J++){if(0===aa){var Z=q[K++];aa=32}if(aa>=D){var ca=Z>>>aa-D&ba;aa-=D}else aa=D-aa,ca=(Z&ba)<<aa&ba,Z=q[K++],aa=32-aa,ca+=Z>>>aa;n[J]=N[ca]}else for(N=Math.ceil((X-T)/Y),J=0;J<R;J++)0===aa&&(Z=q[K++],aa=32),aa>=D?(ca=Z>>>aa-D&ba,aa-=D):(aa=D-aa,ca=(Z&ba)<<aa&ba,Z=q[K++],aa=32-aa,ca+=Z>>>aa),n[J]=ca<N?T+ca*Y:X},unstuffLUT:function(q,
n,D,R,N,T){var Y=(1<<n)-1,X=0,ba=0,K=0,J=K=0,aa=[];q[q.length-1]<<=8*(4*q.length-Math.ceil(n*D/8));var Z=Math.ceil((T-R)/N);for(ba=0;ba<D;ba++){if(0===K){var ca=q[X++];K=32}K>=n?(J=ca>>>K-n&Y,K-=n):(K=n-K,J=(ca&Y)<<K&Y,ca=q[X++],K=32-K,J+=ca>>>K);aa[ba]=J<Z?R+J*N:T}aa.unshift(R);return aa},unstuff2:function(q,n,D,R,N,T,Y,X){var ba=(1<<D)-1,K=0,J,aa=0,Z=0;if(N)for(J=0;J<R;J++){if(0===aa){var ca=q[K++];aa=32;Z=0}if(aa>=D){var ea=ca>>>Z&ba;aa-=D;Z+=D}else{var ja=D-aa;ea=ca>>>Z&ba;ca=q[K++];aa=32-ja;
ea|=(ca&(1<<ja)-1)<<D-ja;Z=ja}n[J]=N[ea]}else for(N=Math.ceil((X-T)/Y),J=0;J<R;J++)0===aa&&(ca=q[K++],aa=32,Z=0),aa>=D?(ea=ca>>>Z&ba,aa-=D,Z+=D):(ja=D-aa,ea=ca>>>Z&ba,ca=q[K++],aa=32-ja,ea|=(ca&(1<<ja)-1)<<D-ja,Z=ja),n[J]=ea<N?T+ea*Y:X;return n},unstuffLUT2:function(q,n,D,R,N,T){var Y=(1<<n)-1,X=0,ba=0,K=0,J=0,aa=0,Z=0,ca=[],ea=Math.ceil((T-R)/N);for(ba=0;ba<D;ba++){if(0===J){var ja=q[X++];J=32;Z=0}J>=n?(aa=ja>>>Z&Y,J-=n,Z+=n):(K=n-J,aa=ja>>>Z&Y,ja=q[X++],J=32-K,aa|=(ja&(1<<K)-1)<<n-K,Z=K);ca[ba]=
aa<ea?R+aa*N:T}ca.unshift(R);return ca},originalUnstuff:function(q,n,D,R){var N=(1<<D)-1,T=0,Y,X=0;q[q.length-1]<<=8*(4*q.length-Math.ceil(D*R/8));for(Y=0;Y<R;Y++){if(0===X){var ba=q[T++];X=32}if(X>=D){var K=ba>>>X-D&N;X-=D}else X=D-X,K=(ba&N)<<X&N,ba=q[T++],X=32-X,K+=ba>>>X;n[Y]=K}return n},originalUnstuff2:function(q,n,D,R){var N=(1<<D)-1,T=0,Y,X=0,ba=0;for(Y=0;Y<R;Y++){if(0===X){var K=q[T++];X=32;ba=0}if(X>=D){var J=K>>>ba&N;X-=D;ba+=D}else{var aa=D-X;J=K>>>ba&N;K=q[T++];X=32-aa;J|=(K&(1<<aa)-
1)<<D-aa;ba=aa}n[Y]=J}return n}},E={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(q){for(var n=65535,D=65535,R=q.length,N=Math.floor(R/2),T=0;N;){var Y=359<=N?359:N;N-=Y;do n+=q[T++]<<8,D+=n+=q[T++];while(--Y);n=(n&65535)+(n>>>16);D=(D&65535)+(D>>>16)}R&1&&(D+=n+=q[T]<<8);return((D&65535)+(D>>>16)<<16|(n&65535)+(n>>>16))>>>0},readHeaderInfo:function(q,n){var D=n.ptr,R=new Uint8Array(q,D,6),N={};N.fileIdentifierString=String.fromCharCode.apply(null,R);if(0!==N.fileIdentifierString.lastIndexOf("Lerc2",
0))throw"Unexpected file identifier string (expect Lerc2 ): "+N.fileIdentifierString;D+=6;R=new DataView(q,D,8);var T=R.getInt32(0,!0);N.fileVersion=T;D+=4;3<=T&&(N.checksum=R.getUint32(4,!0),D+=4);R=new DataView(q,D,12);N.height=R.getUint32(0,!0);N.width=R.getUint32(4,!0);D+=8;4<=T?(N.numDims=R.getUint32(8,!0),D+=4):N.numDims=1;R=new DataView(q,D,40);N.numValidPixel=R.getUint32(0,!0);N.microBlockSize=R.getInt32(4,!0);N.blobSize=R.getInt32(8,!0);N.imageType=R.getInt32(12,!0);N.maxZError=R.getFloat64(16,
!0);N.zMin=R.getFloat64(24,!0);N.zMax=R.getFloat64(32,!0);D+=40;n.headerInfo=N;n.ptr=D;if(3<=T&&(q=this.computeChecksumFletcher32(new Uint8Array(q,D-(4<=T?52:48),N.blobSize-14)),q!==N.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(q,n){var D=n.headerInfo,R=this.getDataTypeArray(D.imageType),N=D.numDims*this.getDataTypeSize(D.imageType),T=this.readSubArray(q,n.ptr,R,N);q=this.readSubArray(q,n.ptr+N,R,N);n.ptr+=2*N;N=!0;for(n=0;n<D.numDims;n++)if(T[n]!==q[n]){N=!1;break}D.minValues=
T;D.maxValues=q;return N},readSubArray:function(q,n,D,R){if(D===Uint8Array)q=new Uint8Array(q,n,R);else{var N=new ArrayBuffer(R);(new Uint8Array(N)).set(new Uint8Array(q,n,R));q=new D(N)}return q},readMask:function(q,n){var D=n.ptr,R=n.headerInfo,N=R.width*R.height,T=R.numValidPixel,Y=new DataView(q,D,4);R={};R.numBytes=Y.getUint32(0,!0);D+=4;if((0===T||N===T)&&0!==R.numBytes)throw"invalid mask";if(0===T)T=new Uint8Array(Math.ceil(N/8)),R.bitset=T,Y=new Uint8Array(N),n.pixels.resultMask=Y,D+=R.numBytes;
else if(0<R.numBytes){T=new Uint8Array(Math.ceil(N/8));Y=new DataView(q,D,R.numBytes);q=Y.getInt16(0,!0);var X=2,ba=0,K=0;do{if(0<q)for(;q--;)T[ba++]=Y.getUint8(X++);else for(K=Y.getUint8(X++),q=-q;q--;)T[ba++]=K;q=Y.getInt16(X,!0);X+=2}while(X<R.numBytes);if(-32768!==q||ba<T.length)throw"Unexpected end of mask RLE encoding";Y=new Uint8Array(N);for(X=X=q=0;X<N;X++)X&7?(q=T[X>>3],q<<=X&7):q=T[X>>3],q&128&&(Y[X]=1);n.pixels.resultMask=Y;R.bitset=T;D+=R.numBytes}n.ptr=D;n.mask=R;return!0},readDataOneSweep:function(q,
n,D,R){var N=n.ptr,T=n.headerInfo,Y=T.numDims,X=T.width*T.height;T=T.numValidPixel*E.getDataTypeSize(T.imageType)*Y;var ba=n.pixels.resultMask;if(D===Uint8Array)q=new Uint8Array(q,N,T);else{var K=new ArrayBuffer(T);(new Uint8Array(K)).set(new Uint8Array(q,N,T));q=new D(K)}if(q.length===X*Y)n.pixels.resultPixels=R?E.swapDimensionOrder(q,X,Y,D,!0):q;else{n.pixels.resultPixels=new D(X*Y);var J=K=D=0,aa=0;if(1<Y)if(R)for(K=0;K<X;K++){if(ba[K])for(aa=K,J=0;J<Y;J++,aa+=X)n.pixels.resultPixels[aa]=q[D++]}else for(K=
0;K<X;K++){if(ba[K])for(aa=K*Y,J=0;J<Y;J++)n.pixels.resultPixels[aa+J]=q[D++]}else for(K=0;K<X;K++)ba[K]&&(n.pixels.resultPixels[K]=q[D++])}n.ptr=N+T;return!0},readHuffmanTree:function(q,n){var D=this.HUFFMAN_LUT_BITS_MAX,R=new DataView(q,n.ptr,16);n.ptr+=16;if(2>R.getInt32(0,!0))throw"unsupported Huffman version";var N=R.getInt32(4,!0),T=R.getInt32(8,!0);R=R.getInt32(12,!0);if(T>=R)return!1;var Y=new Uint32Array(R-T);E.decodeBits(q,n,Y);var X=[],ba;for(ba=T;ba<R;ba++){var K=ba-(ba<N?0:N);X[K]={first:Y[ba-
T],second:null}}ba=q.byteLength-n.ptr;Y=new ArrayBuffer(4*Math.ceil(ba/4));(new Uint8Array(Y)).set(new Uint8Array(q,n.ptr,ba));q=new Uint32Array(Y);n=0;Y=0;var J=q[0];for(ba=T;ba<R;ba++){K=ba-(ba<N?0:N);var aa=X[K].first;0<aa&&(X[K].second=J<<n>>>32-aa,32-n>=aa?(n+=aa,32===n&&(n=0,Y++,J=q[Y])):(n+=aa-32,Y++,J=q[Y],X[K].second|=J>>>32-n))}var Z=J=0,ca=new v;for(ba=0;ba<X.length;ba++)void 0!==X[ba]&&(J=Math.max(J,X[ba].first));Z=J>=D?D:J;D=[];var ea;for(ba=T;ba<R;ba++)if(K=ba-(ba<N?0:N),aa=X[K].first,
0<aa)if(T=[aa,K],aa<=Z){K=X[K].second<<Z-aa;var ja=1<<Z-aa;for(aa=0;aa<ja;aa++)D[K|aa]=T}else for(K=X[K].second,ja=ca,--aa;0<=aa;aa--)(ea=K>>>aa&1)?(ja.right||(ja.right=new v),ja=ja.right):(ja.left||(ja.left=new v),ja=ja.left),0!==aa||ja.val||(ja.val=T[1]);return{decodeLut:D,numBitsLUTQick:Z,numBitsLUT:J,tree:ca,stuffedData:q,srcPtr:Y,bitPos:n}},readHuffman:function(q,n,D,R){var N=n.headerInfo.numDims,T=n.headerInfo.height,Y=n.headerInfo.width,X=Y*T,ba=this.readHuffmanTree(q,n);q=ba.decodeLut;var K=
ba.tree,J=ba.stuffedData,aa=ba.srcPtr,Z=ba.bitPos,ca=ba.numBitsLUTQick;ba=ba.numBitsLUT;var ea=0===n.headerInfo.imageType?128:0,ja=n.pixels.resultMask,ma,ra,pa,la,va,ta,ha=0;0<Z&&(aa++,Z=0);var za=J[aa],xa=1===n.encodeMode,Ha=new D(X*N),Ea=Ha,Da;if(2>N||xa)for(Da=0;Da<N;Da++)if(1<N&&(Ea=new D(Ha.buffer,X*Da,X),ha=0),n.headerInfo.numValidPixel===Y*T)for(pa=va=0;pa<T;pa++)for(la=0;la<Y;la++,va++){var ya=0;var wa=ma=za<<Z>>>32-ca;32-Z<ca&&(wa=ma|=J[aa+1]>>>64-Z-ca);if(q[wa])ya=q[wa][1],Z+=q[wa][0];else for(wa=
ma=za<<Z>>>32-ba,32-Z<ba&&(wa=ma|=J[aa+1]>>>64-Z-ba),wa=K,ta=0;ta<ba;ta++)if(wa=(ra=ma>>>ba-ta-1&1)?wa.right:wa.left,!wa.left&&!wa.right){ya=wa.val;Z=Z+ta+1;break}32<=Z&&(Z-=32,aa++,za=J[aa]);ya-=ea;xa?(ya=0<la?ya+ha:0<pa?ya+Ea[va-Y]:ya+ha,ya&=255,ha=Ea[va]=ya):Ea[va]=ya}else for(pa=va=0;pa<T;pa++)for(la=0;la<Y;la++,va++){if(ja[va]){ya=0;wa=ma=za<<Z>>>32-ca;32-Z<ca&&(wa=ma|=J[aa+1]>>>64-Z-ca);if(q[wa])ya=q[wa][1],Z+=q[wa][0];else for(wa=ma=za<<Z>>>32-ba,32-Z<ba&&(wa=ma|=J[aa+1]>>>64-Z-ba),wa=K,ta=
0;ta<ba;ta++)if(wa=(ra=ma>>>ba-ta-1&1)?wa.right:wa.left,!wa.left&&!wa.right){ya=wa.val;Z=Z+ta+1;break}32<=Z&&(Z-=32,aa++,za=J[aa]);ya-=ea;xa?(ya=0<la&&ja[va-1]?ya+ha:0<pa&&ja[va-Y]?ya+Ea[va-Y]:ya+ha,ya&=255,ha=Ea[va]=ya):Ea[va]=ya}}else for(pa=va=0;pa<T;pa++)for(la=0;la<Y;la++)if(va=pa*Y+la,!ja||ja[va])for(Da=0;Da<N;Da++,va+=X){ya=0;wa=ma=za<<Z>>>32-ca;32-Z<ca&&(wa=ma|=J[aa+1]>>>64-Z-ca);if(q[wa])ya=q[wa][1],Z+=q[wa][0];else for(wa=ma=za<<Z>>>32-ba,32-Z<ba&&(wa=ma|=J[aa+1]>>>64-Z-ba),wa=K,ta=0;ta<
ba;ta++)if(wa=(ra=ma>>>ba-ta-1&1)?wa.right:wa.left,!wa.left&&!wa.right){ya=wa.val;Z=Z+ta+1;break}32<=Z&&(Z-=32,aa++,za=J[aa]);ya-=ea;Ea[va]=ya}n.ptr=n.ptr+4*(aa+1)+(0<Z?4:0);n.pixels.resultPixels=Ha;1<N&&!R&&(n.pixels.resultPixels=E.swapDimensionOrder(Ha,X,N,D))},decodeBits:function(q,n,D,R,N){var T=n.headerInfo,Y=T.fileVersion,X=0,ba=new DataView(q,n.ptr,5<=q.byteLength-n.ptr?5:q.byteLength-n.ptr),K=ba.getUint8(0);X++;var J=K>>6,aa=0===J?4:3-J,Z=0<(K&32)?!0:!1;J=K&31;K=0;if(1===aa)K=ba.getUint8(X),
X++;else if(2===aa)K=ba.getUint16(X,!0),X+=2;else if(4===aa)K=ba.getUint32(X,!0),X+=4;else throw"Invalid valid pixel count type";aa=2*T.maxZError;N=1<T.numDims?T.maxValues[N]:T.zMax;if(Z){n.counter.lut++;Z=ba.getUint8(X);X++;T=Math.ceil((Z-1)*J/8);var ca=Math.ceil(T/4);ca=new ArrayBuffer(4*ca);var ea=new Uint8Array(ca);n.ptr+=X;ea.set(new Uint8Array(q,n.ptr,T));X=new Uint32Array(ca);n.ptr+=T;for(ba=0;Z-1>>>ba;)ba++;T=Math.ceil(K*ba/8);ca=Math.ceil(T/4);ca=new ArrayBuffer(4*ca);ea=new Uint8Array(ca);
ea.set(new Uint8Array(q,n.ptr,T));q=new Uint32Array(ca);n.ptr+=T;n=3<=Y?p.unstuffLUT2(X,J,Z-1,R,aa,N):p.unstuffLUT(X,J,Z-1,R,aa,N);3<=Y?p.unstuff2(q,D,ba,K,n):p.unstuff(q,D,ba,K,n)}else n.counter.bitstuffer++,ba=J,n.ptr+=X,0<ba&&(T=Math.ceil(K*ba/8),ca=Math.ceil(T/4),ca=new ArrayBuffer(4*ca),ea=new Uint8Array(ca),ea.set(new Uint8Array(q,n.ptr,T)),q=new Uint32Array(ca),n.ptr+=T,3<=Y?null==R?p.originalUnstuff2(q,D,ba,K):p.unstuff2(q,D,ba,K,!1,R,aa,N):null==R?p.originalUnstuff(q,D,ba,K):p.unstuff(q,
D,ba,K,!1,R,aa,N))},readTiles:function(q,n,D,R){var N=n.headerInfo,T=N.width,Y=N.height,X=T*Y,ba=N.microBlockSize,K=N.imageType,J=E.getDataTypeSize(K),aa=Math.ceil(T/ba),Z=Math.ceil(Y/ba);n.pixels.numBlocksY=Z;n.pixels.numBlocksX=aa;var ca=n.pixels.ptr=0,ea=0,ja=0,ma=0,ra=0,pa=0,la=0,va=0,ta=ca=0,ha=0,za=0,xa=la=0;la=la=0;var Ha=new D(ba*ba);Y=Y%ba||ba;var Ea=T%ba||ba,Da=N.numDims,ya,wa=n.pixels.resultMask,Ka=n.pixels.resultPixels,Oa=5<=N.fileVersion?14:15,Sa=N.zMax;for(ja=0;ja<Z;ja++)for(ra=ja!==
Z-1?ba:Y,ma=0;ma<aa;ma++)for(pa=ma!==aa-1?ba:Ea,ha=ja*T*ba+ma*ba,za=T-pa,ya=0;ya<Da;ya++){1<Da?(xa=Ka,ha=ja*T*ba+ma*ba,Ka=new D(n.pixels.resultPixels.buffer,X*ya*J,X),Sa=N.maxValues[ya]):xa=null;la=q.byteLength-n.ptr;ea=new DataView(q,n.ptr,Math.min(10,la));var Ma={};la=0;va=ea.getUint8(0);la++;var La=5<=N.fileVersion?va&4:0;ca=va>>6&255;ta=va>>2&Oa;if(ta!==(ma*ba>>3&Oa))throw"integrity issue";if(La&&0===ya)throw"integrity issue";va&=3;if(3<va)throw n.ptr+=la,"Invalid block encoding ("+va+")";if(2===
va){if(La)if(wa)for(ca=0;ca<ra;ca++)for(ea=0;ea<pa;ea++)wa[ha]&&(Ka[ha]=xa[ha]),ha++;else for(ca=0;ca<ra;ca++)for(ea=0;ea<pa;ea++)Ka[ha]=xa[ha],ha++;n.counter.constant++;n.ptr+=la}else if(0===va){if(La)throw"integrity issue";n.counter.uncompressed++;n.ptr+=la;la=ra*pa*J;xa=q.byteLength-n.ptr;la=la<xa?la:xa;xa=new ArrayBuffer(0===la%J?la:la+J-la%J);La=new Uint8Array(xa);La.set(new Uint8Array(q,n.ptr,la));xa=new D(xa);la=0;if(wa)for(ca=0;ca<ra;ca++){for(ea=0;ea<pa;ea++)wa[ha]&&(Ka[ha]=xa[la++]),ha++;
ha+=za}else for(ca=0;ca<ra;ca++){for(ea=0;ea<pa;ea++)Ka[ha++]=xa[la++];ha+=za}n.ptr+=la*J}else if(ca=E.getDataTypeUsed(La&&6>K?4:K,ca),Ma=E.getOnePixel(Ma,la,ca,ea),la+=E.getDataTypeSize(ca),3===va)if(n.ptr+=la,n.counter.constantoffset++,wa)for(ca=0;ca<ra;ca++){for(ea=0;ea<pa;ea++)wa[ha]&&(Ka[ha]=La?Math.min(Sa,xa[ha]+Ma):Ma),ha++;ha+=za}else for(ca=0;ca<ra;ca++){for(ea=0;ea<pa;ea++)Ka[ha]=La?Math.min(Sa,xa[ha]+Ma):Ma,ha++;ha+=za}else if(n.ptr+=la,E.decodeBits(q,n,Ha,Ma,ya),la=0,La)if(wa)for(ca=0;ca<
ra;ca++){for(ea=0;ea<pa;ea++)wa[ha]&&(Ka[ha]=Ha[la++]+xa[ha]),ha++;ha+=za}else for(ca=0;ca<ra;ca++){for(ea=0;ea<pa;ea++)Ka[ha]=Ha[la++]+xa[ha],ha++;ha+=za}else if(wa)for(ca=0;ca<ra;ca++){for(ea=0;ea<pa;ea++)wa[ha]&&(Ka[ha]=Ha[la++]),ha++;ha+=za}else for(ca=0;ca<ra;ca++){for(ea=0;ea<pa;ea++)Ka[ha++]=Ha[la++];ha+=za}}1<Da&&!R&&(n.pixels.resultPixels=E.swapDimensionOrder(n.pixels.resultPixels,X,Da,D))},formatFileInfo:function(q){return{fileIdentifierString:q.headerInfo.fileIdentifierString,fileVersion:q.headerInfo.fileVersion,
imageType:q.headerInfo.imageType,height:q.headerInfo.height,width:q.headerInfo.width,numValidPixel:q.headerInfo.numValidPixel,microBlockSize:q.headerInfo.microBlockSize,blobSize:q.headerInfo.blobSize,maxZError:q.headerInfo.maxZError,pixelType:E.getPixelType(q.headerInfo.imageType),eofOffset:q.eofOffset,mask:q.mask?{numBytes:q.mask.numBytes}:null,pixels:{numBlocksX:q.pixels.numBlocksX,numBlocksY:q.pixels.numBlocksY,maxValue:q.headerInfo.zMax,minValue:q.headerInfo.zMin,noDataValue:q.noDataValue}}},
constructConstantSurface:function(q,n){var D=q.headerInfo.zMax,R=q.headerInfo.zMin,N=q.headerInfo.maxValues,T=q.headerInfo.numDims,Y=q.headerInfo.height*q.headerInfo.width,X=0,ba=0,K=0,J=q.pixels.resultMask;q=q.pixels.resultPixels;if(J)if(1<T)if(n)for(X=0;X<T;X++)for(K=X*Y,D=N[X],ba=0;ba<Y;ba++)J[ba]&&(q[K+ba]=D);else for(ba=0;ba<Y;ba++){if(J[ba])for(K=ba*T,X=0;X<T;X++)q[K+T]=N[X]}else for(ba=0;ba<Y;ba++)J[ba]&&(q[ba]=D);else if(1<T&&R!==D)if(n)for(X=0;X<T;X++)for(K=X*Y,D=N[X],ba=0;ba<Y;ba++)q[K+
ba]=D;else for(ba=0;ba<Y;ba++)for(K=ba*T,X=0;X<T;X++)q[K+X]=N[X];else for(ba=0;ba<Y*T;ba++)q[ba]=D},getDataTypeArray:function(q){switch(q){case 0:q=Int8Array;break;case 1:q=Uint8Array;break;case 2:q=Int16Array;break;case 3:q=Uint16Array;break;case 4:q=Int32Array;break;case 5:q=Uint32Array;break;case 6:q=Float32Array;break;case 7:q=Float64Array;break;default:q=Float32Array}return q},getPixelType:function(q){switch(q){case 0:q="S8";break;case 1:q="U8";break;case 2:q="S16";break;case 3:q="U16";break;
case 4:q="S32";break;case 5:q="U32";break;case 6:q="F32";break;case 7:q="F64";break;default:q="F32"}return q},isValidPixelValue:function(q,n){if(null==n)return!1;switch(q){case 0:q=-128<=n&&127>=n;break;case 1:q=0<=n&&255>=n;break;case 2:q=-32768<=n&&32767>=n;break;case 3:q=0<=n&&65536>=n;break;case 4:q=-2147483648<=n&&2147483647>=n;break;case 5:q=0<=n&&4294967296>=n;break;case 6:q=-3.4027999387901484E38<=n&&3.4027999387901484E38>=n;break;case 7:q=4.9E-324<=n&&1.7976931348623157E308>=n;break;default:q=
!1}return q},getDataTypeSize:function(q){var n=0;switch(q){case 0:case 1:n=1;break;case 2:case 3:n=2;break;case 4:case 5:case 6:n=4;break;case 7:n=8;break;default:n=q}return n},getDataTypeUsed:function(q,n){var D=q;switch(q){case 2:case 4:D=q-n;break;case 3:case 5:D=q-2*n;break;case 6:D=0===n?q:1===n?2:1;break;case 7:D=0===n?q:q-2*n+1;break;default:D=q}return D},getOnePixel:function(q,n,D,R){q=0;switch(D){case 0:q=R.getInt8(n);break;case 1:q=R.getUint8(n);break;case 2:q=R.getInt16(n,!0);break;case 3:q=
R.getUint16(n,!0);break;case 4:q=R.getInt32(n,!0);break;case 5:q=R.getUInt32(n,!0);break;case 6:q=R.getFloat32(n,!0);break;case 7:q=R.getFloat64(n,!0);break;default:throw"the decoder does not understand this pixel type";}return q},swapDimensionOrder:function(q,n,D,R,N){var T=0,Y=0,X=0,ba=0,K=q;if(1<D)if(K=new R(n*D),N)for(T=0;T<n;T++)for(ba=T,X=0;X<D;X++,ba+=n)K[ba]=q[Y++];else for(T=0;T<n;T++)for(ba=T,X=0;X<D;X++,ba+=n)K[Y++]=q[ba];return K}},v=function(q,n,D){this.val=q;this.left=n;this.right=D};
return{decode:function(q,n){n=n||{};var D=n.noDataValue,R=0,N={};N.ptr=n.inputOffset||0;N.pixels={};E.readHeaderInfo(q,N);R=N.headerInfo;var T=R.fileVersion,Y=E.getDataTypeArray(R.imageType);if(5<T)throw"unsupported lerc version 2."+T;E.readMask(q,N);R.numValidPixel===R.width*R.height||N.pixels.resultMask||(N.pixels.resultMask=n.maskData);var X=R.width*R.height;N.pixels.resultPixels=new Y(X*R.numDims);N.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var ba=!n.returnPixelInterleavedDims;
if(0!==R.numValidPixel)if(R.zMax===R.zMin)E.constructConstantSurface(N,ba);else if(4<=T&&E.checkMinMaxRanges(q,N))E.constructConstantSurface(N,ba);else{var K=new DataView(q,N.ptr,2),J=K.getUint8(0);N.ptr++;if(J)E.readDataOneSweep(q,N,Y,ba);else if(1<T&&1>=R.imageType&&1E-5>Math.abs(R.maxZError-.5)){K=K.getUint8(1);N.ptr++;N.encodeMode=K;if(2<K||4>T&&1<K)throw"Invalid Huffman flag "+K;K?E.readHuffman(q,N,Y,ba):E.readTiles(q,N,Y,ba)}else E.readTiles(q,N,Y,ba)}N.eofOffset=N.ptr;n.inputOffset?(q=N.headerInfo.blobSize+
n.inputOffset-N.ptr,1<=Math.abs(q)&&(N.eofOffset=n.inputOffset+N.headerInfo.blobSize)):(q=N.headerInfo.blobSize-N.ptr,1<=Math.abs(q)&&(N.eofOffset=N.headerInfo.blobSize));q={width:R.width,height:R.height,pixelData:N.pixels.resultPixels,minValue:R.zMin,maxValue:R.zMax,validPixelCount:R.numValidPixel,dimCount:R.numDims,dimStats:{minValues:R.minValues,maxValues:R.maxValues},maskData:N.pixels.resultMask};if(N.pixels.resultMask&&E.isValidPixelValue(R.imageType,D)){T=N.pixels.resultMask;for(R=0;R<X;R++)T[R]||
(q.pixelData[R]=D);q.noDataValue=D}N.noDataValue=D;n.returnFileInfo&&(q.fileInfo=E.formatFileInfo(N));return q},getBandCount:function(q){for(var n=0,D=0,R={ptr:0,pixels:{}};D<q.byteLength-58;)E.readHeaderInfo(q,R),D+=R.headerInfo.blobSize,n++,R.ptr=D;return n}}})})(d);const l=d.exports,C=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],z=new Set([1,5,6,7,8,34712,34887]),I=function(e,p,E,v,q){var n,D,R=W.isPlatformLittleEndian===p,N=G(E,"BITSPERSAMPLE");const T=null!=(n=G(E,"SAMPLEFORMAT"))?n:1;n=U(T,N);
N=null!=(D=G(E,"COMPRESSION"))?D:1;D=P(n);if(34887===N)return l.decode(e,{inputOffset:v,returnFileInfo:!0}).pixelData;if(1===N){var Y=e.slice(v,v+q);var X=new Uint8Array(Y)}else if(8===N||32946===N)X=new Uint8Array(e,v,q),X=new S.Zlib(X),e=X.getBytes(),Y=new ArrayBuffer(e.length),X=new Uint8Array(Y),X.set(e);else if(6===N)X=new Uint8Array(e,v,q),Y=new u.JpegImage,Y.parse(X),e=Y.getData(Y.width,Y.height,!0),Y=new ArrayBuffer(e.length),X=new Uint8Array(Y),X.set(e);else if(7===N){p=E.get("JPEGTABLES").values;
Y=p.length-2;X=new Uint8Array(Y+q-2);for(E=0;E<Y;E++)X[E]=p[E];e=new Uint8Array(e,v+2,q-2);for(v=0;v<e.length;v++)X[Y+v]=e[v];Y=new u.JpegImage;Y.parse(X);e=Y.getData(Y.width,Y.height,!0);Y=new ArrayBuffer(e.length);X=new Uint8Array(Y);X.set(e)}else 5===N&&(X=Q.decode(e,v,q,p),Y=X.buffer);if("u8"!==n&&"s8"!==n&&!R)switch(Y=new ArrayBuffer(X.length),R=new Uint8Array(Y),n){case "u16":case "s16":for(n=0;n<X.length;n+=2)R[n]=X[n+1],R[n+1]=X[n];break;case "u32":case "s32":case "f32":for(n=0;n<X.length;n+=
4)R[n]=X[n+3],R[n+1]=X[n+2],R[n+2]=X[n+1],R[n+3]=X[n]}return new D(Y)},x=function(e,p,E){if(!(e&&0<e.length&&p&&E))return null;let v,q,n;const D=e[0].length,R=e.length,N=new Uint8Array(D);for(let Y=0;Y<R;Y++)if(v=e[Y],q=p[Y],n=E[Y],0===Y)for(var T=0;T<D;T++)N[T]=v[T]<q||v[T]>n?0:1;else for(T=0;T<D;T++)N[T]&&(N[T]=v[T]<q||v[T]>n?0:1);return N},t=function(e){if(!e)return null;var p=e.match(/<Item(.*?)Item>/gi);if(!p||0===p.length)return null;e=new Map;var E;for(var v=0;v<p.length;v++){var q=p[v];var n=
q.slice(6,q.indexOf("\x3e"));var D=q.indexOf("sample\x3d");-1<D&&(E=q.slice(D+8,q.indexOf('"',D+8)));D=q.indexOf("name\x3d");-1<D&&(n=q.slice(D+6,q.indexOf('"',D+6)));n&&(q=q.slice(q.indexOf("\x3e")+1,q.indexOf("\x3c/Item\x3e")).trim(),null!=E?e.has(n)?e.get(n)[E]=q:e.set(n,[q]):e.set(n,q));E=null}p=e.get("STATISTICS_MINIMUM");n=e.get("STATISTICS_MAXIMUM");v=e.get("STATISTICS_MEAN");q=e.get("STATISTICS_STDDEV");E=null;if(p&&n)for(E=[],D=0;D<p.length;D++)E.push({min:parseFloat(p[D]),max:parseFloat(n[D]),
avg:v&&parseFloat(v[D]),stddev:q&&parseFloat(q[D])});n=e.get("BandName");v=e.get("WavelengthMin");q=e.get("WavelengthMax");p=null;if(n)for(p=[],D=0;D<n.length;D++)p.push({BandName:n[D],WavelengthMin:v&&parseFloat(v[D]),WavelengthMax:q&&parseFloat(q[D])});n=e.get("DataType");return{statistics:E,bandProperties:p,dataType:n,rawMetadata:e}};V.Lerc2Codec=l;V.decode=function(e,p=0,E){E=E||m(e);const {ifds:v,noData:q}=E;if(0===v.length)throw"no valid image file directory";var n=b(E);if(n)throw n;n=-1===
p?v[v.length-1]:v[p];p=q?q[0]:null;if(E.tileWidth){var D=E,R,N=g(n,"TILEOFFSETS");if(void 0===N)n=null;else{E=g(n,"TILEBYTECOUNTS");var {width:T,height:Y,pixelType:X,tileWidth:ba,tileHeight:K}=a([n]),J=c(n,D),aa=D.planes,Z=T*Y,ca=G(n,"BITSPERSAMPLE"),ea=34887===(null!=(R=G(n,"COMPRESSION"))?R:1),ja=P(X);R=[];for(var ma=0;ma<aa;ma++)R.push(new ja(Z));var ra,pa;Z=Math.ceil(T/ba);if(0===ca%8)if(ea&&J&&1<aa)for(J=Math.round(N.length/aa),ca=0;ca<J;ca++){var la=Math.floor(ca/Z)*K;var va=ca%Z*ba;ja=la*T+
va;for(ea=0;ea<aa;ea++){ma=ca*aa+ea;ma=I(e,D.littleEndian,n,N[ma],E[ma]);var ta=0;var ha=ja;var za=Math.min(ba,T-va);var xa=Math.min(K,Y-la);var Ha=R[ea];for(ra=0;ra<xa;ra++)for(ha=ja+ra*T,ta=ra*ba,pa=0;pa<za;pa++,ha++,ta++)Ha[ha]=ma[ta]}}else for(ca=0;ca<N.length;ca++)for(la=Math.floor(ca/Z)*K,va=ca%Z*ba,ja=la*T+va,ma=I(e,D.littleEndian,n,N[ca],E[ca]),ta=0,ha=ja,za=Math.min(ba,T-va),xa=Math.min(K,Y-la),la=0;la<aa;la++)if(Ha=R[la],J||ea)for(ra=0;ra<xa;ra++)for(ha=ja+ra*T,ta=ba*K*la+ra*ba,pa=0;pa<
za;pa++,ha++,ta++)Ha[ha]=ma[ta];else for(ra=0;ra<xa;ra++)for(ha=ja+ra*T,ta=ra*ba*aa+la,pa=0;pa<za;pa++,ha++,ta+=aa)Ha[ha]=ma[ta];n={width:T,height:Y,pixelType:X,pixels:R}}}else if(Z=E,ra=W.isPlatformLittleEndian===Z.littleEndian,pa=g(n,"STRIPOFFSETS"),void 0===pa)n=null;else{var {width:Ea,height:Da,pixelType:ya}=a([n]);E=Z.planes;aa=Ea*Da;ca=G(n,"BITSPERSAMPLE");N=P(ya);R=new N(aa*E);ja=g(n,"STRIPBYTECOUNTS");ma=G(n,"ROWSPERSTRIP");la=null!=(va=G(n,"COMPRESSION"))?va:1;ha=ma;if(0===ca%8)for(n=0;n<
pa.length;n++){va=n*ma*Ea*E;ha=(n+1)*ma>Da?Da-n*ma:ma;if("u8"===ya||"s8"===ya||ra)8===la||32946===la?(J=new Uint8Array(e,pa[n],ja[n]),J=new S.Zlib(J),ta=J.getBytes(),ea=new ArrayBuffer(ta.length),J=new Uint8Array(ea),J.set(ta),J.length!==ha*Ea*E*ca/8&&console.log("strip byte counts is different than expected")):6===la?(J=new Uint8Array(e,pa[n],ja[n]),ea=new u.JpegImage,ea.parse(J),ha=ea.getData(ea.width,ea.height,!0),ea=new ArrayBuffer(ha.length),J=new Uint8Array(ea),J.set(ha)):5===la?(J=Q.decode(e,
pa[n],ja[n],Z.littleEndian),ea=J.buffer):1===la&&(ja[n]!==ha*Ea*E*ca/8&&console.log("strip byte counts is different than expected"),ea=e.slice(pa[n],pa[n]+ja[n]));else switch(6===la||8===la||32946===la?(J=new Uint8Array(e,pa[n],ja[n]),J=new S.Zlib(J),J=J.getBytes(),ea=new ArrayBuffer(J.length),D=new Uint8Array(ea),J.length!==ha*Ea*E*ca/8&&console.log("strip byte counts is different than expected")):1===la&&(ja[n]!==ha*Ea*E*ca/8&&console.log("strip byte counts is different than expected"),ea=new ArrayBuffer(ja[n]),
J=new Uint8Array(e,pa[n],ja[n]),D=new Uint8Array(ea)),ya){case "u16":case "s16":for(ha=0;ha<J.length;ha+=2)D[ha]=J[ha+1],D[ha+1]=J[ha];break;case "u32":case "s32":case "f32":for(ha=0;ha<J.length;ha+=4)D[ha]=J[ha+3],D[ha+1]=J[ha+2],D[ha+2]=J[ha+1],D[ha+3]=J[ha]}ha=new N(ea);R.set(ha,va)}J=[];if(1===E)J.push(R);else for(n=0;n<E;n++){D=new N(aa);for(e=0;e<aa;e++)D[e]=R[e*E+n];J.push(D)}n={width:Ea,height:Da,pixelType:ya,pixels:J}}if(null!==p){n.mask=new Uint8Array(n.width*n.height);if(1E24<Math.abs(p))for(e=
0;e<n.width*n.height;e++)n.mask[e]=1E-6>Math.abs((n.pixels[0][e]-p)/p)?0:1;else for(e=0;e<n.width*n.height;e++)n.mask[e]=n.pixels[0][e]===p?0:1;n.noDataValue=p}return n};V.decodeTileOrStrip=function(e,p){var E;const {headerInfo:v,ifd:q,offsets:n,sizes:D}=p;var R=n.map((ma,ra)=>I(e,v.littleEndian,q,ma,D[ra]||e.byteLength)),N=c(q,v);const {pixelType:T,planes:Y}=v;var X=P(T);const ba=G(q,"TILEWIDTH"),K=G(q,"TILELENGTH");var J=null!=(E=G(q,"COMPRESSION"))?E:1;E=ba*K;const aa=[];let Z=R[0];const ca=34887===
J;for(let ma=0;ma<Y;ma++){J=new X(E);if(N&&ca){Z=R[ma];for(var ea=0;ea<E;ea++)J[ea]=Z[ma][ea+ma]}else if(N||ca&&!N)J=Z.slice(E*ma,E*(ma+1));else for(ea=0;ea<E;ea++)J[ea]=Z[ea*Y+ma];aa.push(J)}R=v.noData?v.noData[0]:null;N=(X=v.metadata?v.metadata.statistics:null)?X.map(ma=>ma.min):null;X=X?X.map(ma=>ma.max):null;let ja;if(null!=R)if(ja=new Uint8Array(E),1E24<Math.abs(R))for(p=0;p<E;p++)ja[p]=1E-6>Math.abs((aa[0][p]-R)/R)?0:1;else for(p=0;p<E;p++)ja[p]=aa[0][p]===R?0:1;else N&&X&&p.applyMinMaxConstraint&&
(ja=x(aa,N,X));return{pixelType:T,width:ba,height:K,pixels:aa,mask:ja,noDataValue:R}};V.getImageInfo=a;V.isBSQConfig=c;V.parseFieldValues=f;V.parseHeader=m;V.parseIFD=h;V.parseSignature=B})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(V){V.bytesToUTF8=function(H,u){let Q=0,r="",W=0,S=0;const U=H.length;for(;Q<U;)if(S=H[Q++],W=S>>4,8>W?W=1:15===W?(W=4,S=(S&7)<<18|(H[Q++]&63)<<12|(H[Q++]&63)<<6|H[Q++]&63):14===W?(W=3,S=(S&15)<<12|(H[Q++]&63)<<6|H[Q++]&
63):(W=2,S=(S&31)<<6|H[Q++]&63),0!==S||u)r+=String.fromCharCode(S);return r};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(V){function H(W,S,U,P=!0){if(0!==S%4||0!==U%4){var O=new ArrayBuffer(4*Math.ceil(U/4));O=new Uint8Array(O);W=new Uint8Array(W,S,U);if(P)for(P=0;P<O.length;P+=4)O[P]=W[P+3],O[P+1]=W[P+2],O[P+2]=W[P+1],O[P+3]=W[P];else O.set(W);return new Uint32Array(O.buffer)}if(P){P=new Uint8Array(W,S,U);O=new Uint8Array(P.length);
for(W=0;W<O.length;W+=4)O[W]=P[W+3],O[W+1]=P[W+2],O[W+2]=P[W+1],O[W+3]=P[W];return new Uint32Array(O.buffer)}return new Uint32Array(W,S,U/4)}function u(){const W=[];for(let S=0;257>=S;S++)W[S]=[S];return W}function Q(W,S){for(let U=0;U<S.length;U++)W.push(S[U])}const r=new Set;r.add(511);r.add(1023);r.add(2047);r.add(4095);r.add(8191);V.decode=function(W,S,U,P=!0){W=H(W,S,U,P);S=9;P=u();let O=32,F=P.length,g=[],w=1,G=W[0],y=0;const f=W.length;U=8*(4*f-U);const a=[];for(;null!=G;){if(O>=S)O-=S,y=G>>>
32-S,G<<=S;else{y=G>>>32-O;G=W[w++];var c=S-O;O=32-c;y=(y<<c)+(G>>>O);G<<=c}if(257===y)break;if(256===y)S=9,P=u(),F=P.length,g=[];else{c=P[y];if(null==c){if(y>P.length)throw"data integrity issue: code does not exist on code page";g.push(g[0]);P[F++]=g.slice();Q(a,g)}else Q(a,c),g.push(c[0]),1<g.length&&(P[F++]=g.slice()),g=c.slice();r.has(F)&&S++;0===O&&(G=W[w++],O=32);if(w>f||w===f&&O<=U)break}}return new Uint8Array(a)};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const V=
(()=>{const r=[];r[254]="NEWSUBFILETYPE";r[255]="SUBFILETYPE";r[256]="IMAGEWIDTH";r[257]="IMAGELENGTH";r[258]="BITSPERSAMPLE";r[259]="COMPRESSION";r[262]="PHOTOMETRICINTERPRETATION";r[263]="THRESHHOLDING";r[264]="CELLWIDTH";r[265]="CELLLENGTH";r[266]="FILLORDER";r[269]="DOCUMENTNAME";r[270]="IMAGEDESCRIPTION";r[271]="MAKE";r[272]="MODEL";r[273]="STRIPOFFSETS";r[274]="ORIENTATION";r[277]="SAMPLESPERPIXEL";r[278]="ROWSPERSTRIP";r[279]="STRIPBYTECOUNTS";r[280]="MINSAMPLEVALUE";r[281]="MAXSAMPLEVALUE";
r[282]="XRESOLUTION";r[283]="YRESOLUTION";r[284]="PLANARCONFIGURATION";r[285]="PAGENAME";r[286]="XPOSITION";r[287]="YPOSITION";r[288]="FREEOFFSETS";r[289]="FREEBYTECOUNTS";r[290]="GRAYRESPONSEUNIT";r[291]="GRAYRESPONSECURVE";r[292]="T4OPTIONS";r[293]="T6OPTIONS";r[296]="RESOLUTIONUNIT";r[297]="PAGENUMBER";r[300]="COLORRESPONSEUNIT";r[301]="TRANSFERFUNCTION";r[305]="SOFTWARE";r[306]="DATETIME";r[315]="ARTIST";r[316]="HOSTCOMPUTER";r[317]="PREDICTOR";r[318]="WHITEPOINT";r[319]="PRIMARYCHROMATICITIES";
r[320]="COLORMAP";r[321]="HALFTONEHINTS";r[322]="TILEWIDTH";r[323]="TILELENGTH";r[324]="TILEOFFSETS";r[325]="TILEBYTECOUNTS";r[326]="BADFAXLINES";r[327]="CLEANFAXDATA";r[328]="CONSECUTIVEBADFAXLINES";r[330]="SUBIFD";r[332]="INKSET";r[333]="INKNAMES";r[334]="NUMBEROFINKS";r[336]="DOTRANGE";r[337]="TARGETPRINTER";r[338]="EXTRASAMPLES";r[339]="SAMPLEFORMAT";r[340]="SMINSAMPLEVALUE";r[341]="SMAXSAMPLEVALUE";r[342]="TRANSFERRANGE";r[347]="JPEGTABLES";r[512]="JPEGPROC";r[513]="JPEGIFOFFSET";r[514]="JPEGIFBYTECOUNT";
r[515]="JPEGRESTARTINTERVAL";r[517]="JPEGLOSSLESSPREDICTORS";r[518]="JPEGPOINTTRANSFORM";r[519]="JPEGQTABLES";r[520]="JPEGDCTABLES";r[521]="JPEGACTABLES";r[529]="YCBCRCOEFFICIENTS";r[530]="YCBCRSUBSAMPLING";r[531]="YCBCRPOSITIONING";r[532]="REFERENCEBLACKWHITE";r[700]="XMP";r[33550]="GEOPIXELSCALE";r[33922]="GEOTIEPOINTS";r[33432]="COPYRIGHT";r[42112]="GDAL_METADATA";r[42113]="GDAL_NODATA";r[50844]="RPCCOEFFICIENT";r[34264]="GEOTRANSMATRIX";r[34735]="GEOKEYDIRECTORY";r[34736]="GEODOUBLEPARAMS";r[34737]=
"GEOASCIIPARAMS";r[34665]="EXIFIFD";r[34853]="GPSIFD";r[40965]="INTEROPERABILITYIFD";return r})(),H=(()=>{const r=[].concat(V);r[36864]="ExifVersion";r[40960]="FlashpixVersion";r[40961]="ColorSpace";r[42240]="Gamma";r[37121]="ComponentsConfiguration";r[37122]="CompressedBitsPerPixel";r[40962]="PixelXDimension";r[40963]="PixelYDimension";r[37500]="MakerNote";r[37510]="UserComment";r[40964]="RelatedSoundFile";r[36867]="DateTimeOriginal";r[36868]="DateTimeDigitized";r[36880]="OffsetTime";r[36881]="OffsetTimeOriginal";
r[36882]="OffsetTimeDigitized";r[37520]="SubSecTime";r[37521]="SubSecTimeOriginal";r[37522]="SubSecTimeDigitized";r[37888]="Temperature";r[37889]="Humidity";r[37890]="Pressure";r[37891]="WaterDepth";r[37892]="Acceleration";r[37893]="CameraElevationAngle";r[42016]="ImageUniqueID";r[42032]="CameraOwnerName";r[42033]="BodySerialNumber";r[42034]="LensSpecification";r[42035]="LensMake";r[42036]="LensModel";r[42037]="LensSerialNumber";r[33434]="ExposureTime";r[33437]="FNumber";r[34850]="ExposureProgram";
r[34852]="SpectralSensitivity";r[34855]="PhotographicSensitivity";r[34856]="OECF";r[34864]="SensitivityType";r[34865]="StandardOutputSensitivity";r[34866]="RecommendedExposureIndex";r[34867]="ISOSpeed";r[34868]="ISOSpeedLatitudeyyy";r[34869]="ISOSpeedLatitudezzz";r[37377]="ShutterSpeedValue";r[37378]="ApertureValue";r[37379]="BrightnessValue";r[37380]="ExposureBiasValue";r[37381]="MaxApertureValue";r[37382]="SubjectDistance";r[37383]="MeteringMode";r[37384]="LightSource";r[37385]="Flash";r[37386]=
"FocalLength";r[37396]="SubjectArea";r[41483]="FlashEnergy";r[41484]="SpatialFrequencyResponse";r[41486]="FocalPlaneXResolution";r[41487]="FocalPlaneYResolution";r[41488]="FocalPlaneResolutionUnit";r[41492]="SubjectLocation";r[41493]="ExposureIndex";r[41495]="SensingMethod";r[41728]="FileSource";r[41729]="SceneType";r[41730]="CFAPattern";r[41985]="CustomRendered";r[41986]="ExposureMode";r[41987]="WhiteBalance";r[41988]="DigitalZoomRatio";r[41989]="FocalLengthIn35mmFilm";r[41990]="SceneCaptureType";
r[41991]="GainControl";r[41992]="Contrast";r[41993]="Saturation";r[41994]="Sharpness";r[41995]="DeviceSettingDescription";r[41996]="SubjectDistanceRange";return r})(),u=(()=>{const r=[];r[1024]="GTModelTypeGeoKey";r[1025]="GTRasterTypeGeoKey";r[1026]="GTCitationGeoKey";r[2048]="GeographicTypeGeoKey";r[2049]="GeogCitationGeoKey";r[2050]="GeogGeodeticDatumGeoKey";r[2051]="GeogPrimeMeridianGeoKey";r[2052]="GeogLinearUnitsGeoKey";r[2053]="GeogLinearUnitSizeGeoKey";r[2054]="GeogAngularUnitsGeoKey";r[2055]=
"GeogAngularUnitSizeGeoKey";r[2056]="GeogEllipsoidGeoKey";r[2057]="GeogSemiMajorAxisGeoKey";r[2058]="GeogSemiMinorAxisGeoKey";r[2059]="GeogInvFlatteningGeoKey";r[2061]="GeogPrimeMeridianLongGeoKey";r[2060]="GeogAzimuthUnitsGeoKey";r[3072]="ProjectedCSTypeGeoKey";r[3073]="PCSCitationGeoKey";r[3074]="ProjectionGeoKey";r[3075]="ProjCoordTransGeoKey";r[3076]="ProjLinearUnitsGeoKey";r[3077]="ProjLinearUnitSizeGeoKey";r[3078]="ProjStdParallel1GeoKey";r[3079]="ProjStdParallel2GeoKey";r[3080]="ProjNatOriginLongGeoKey";
r[3081]="ProjNatOriginLatGeoKey";r[3082]="ProjFalseEastingGeoKey";r[3083]="ProjFalseNorthingGeoKey";r[3084]="ProjFalseOriginLongGeoKey";r[3085]="ProjFalseOriginLatGeoKey";r[3086]="ProjFalseOriginEastingGeoKey";r[3087]="ProjFalseOriginNorthingGeoKey";r[3088]="ProjCenterLongGeoKey";r[3090]="ProjCenterEastingGeoKey";r[3091]="ProjCenterNorthingGeoKey";r[3092]="ProjScaleAtNatOriginGeoKey";r[3093]="ProjScaleAtCenterGeoKey";r[3094]="ProjAzimuthAngleGeoKey";r[3095]="ProjStraightVertPoleLongGeoKey";r[4096]=
"VerticalCSTypeGeoKey";r[4097]="VerticalCitationGeoKey";r[4098]="VerticalDatumGeoKey";r[4099]="VerticalUnitsGeoKey";return r})(),Q=new Map;Q.set("EXIFIFD",H);Q.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:V,ifdTags:Q,GEO_KEYS:u,getTagName:function(r,W){W=(W||V)[r];void 0===W&&(W="unknown"+String(r));return W}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(V){{var H=new ArrayBuffer(4);const u=new Uint8Array(H);(new Uint32Array(H))[0]=1;H=1===u[0]}V.isPlatformLittleEndian=H;Object.defineProperty(V,"__esModule",{value:!0})})},"esri/chunks/LercCodec":function(){define(["exports","../core/mathUtils"],function(V,H){var u=H.clampFloat32(-Infinity);V.decode=
function(Q,r){r=r||{};var W=r.inputOffset||0;var S=r.encodedMaskData||null===r.encodedMaskData;var U=new Uint8Array(Q,W,10);U=String.fromCharCode.apply(null,U);if("CntZImage"!=U.trim())throw"Unexpected file identifier string: "+U;W+=10;var P=new DataView(Q,W,24);var O=P.getInt32(0,!0);var F=P.getInt32(4,!0);var g=P.getUint32(8,!0);var w=P.getUint32(12,!0);var G=P.getFloat64(16,!0);W+=24;if(!S){P=new DataView(Q,W,16);var y={};y.numBlocksY=P.getUint32(0,!0);y.numBlocksX=P.getUint32(4,!0);y.numBytes=
P.getUint32(8,!0);y.maxValue=P.getFloat32(12,!0);W+=16;if(0<y.numBytes){S=new Uint8Array(Math.ceil(w*g/8));P=new DataView(Q,W,y.numBytes);var f=P.getInt16(0,!0);var a=2;var c=0;do{if(0<f)for(;f--;)S[c++]=P.getUint8(a++);else{var m=P.getUint8(a++);for(f=-f;f--;)S[c++]=m}f=P.getInt16(a,!0);a+=2}while(a<y.numBytes);if(-32768!==f||c<S.length)throw"Unexpected end of mask RLE encoding";y.bitset=S;W+=y.numBytes}else 0===(y.numBytes|y.numBlocksY|y.maxValue)&&(S=new Uint8Array(Math.ceil(w*g/8)),y.bitset=S)}P=
new DataView(Q,W,16);var k=S=m=c=a=f=void 0;f=P.getUint32(0,!0);a=P.getUint32(4,!0);c=P.getUint32(8,!0);m=P.getFloat32(12,!0);W+=16;k=a;S=f;k+=0<w%k?1:0;var A=S+(0<g%S?1:0);S=Array(k*A);for(var B=1E9,h=0,b=0;b<A;b++)for(var d=0;d<k;d++){var l=0;P=new DataView(Q,W,Math.min(10,Q.byteLength-W));var C={};S[h++]=C;var z=P.getUint8(0);l++;C.encoding=z&63;if(3<C.encoding)throw"Invalid block encoding ("+C.encoding+")";if(2===C.encoding)W++,B=Math.min(B,0);else{if(0!==z&&2!==z){z>>=6;C.offsetType=z;if(2===
z)C.offset=P.getInt8(1),l++;else if(1===z)C.offset=P.getInt16(1,!0),l+=2;else if(0===z)C.offset=P.getFloat32(1,!0),l+=4;else throw"Invalid block offset type";B=Math.min(C.offset,B);if(1===C.encoding)if(z=P.getUint8(l),l++,C.bitsPerPixel=z&63,z>>=6,C.numValidPixelsType=z,2===z)C.numValidPixels=P.getUint8(l),l++;else if(1===z)C.numValidPixels=P.getUint16(l,!0),l+=2;else if(0===z)C.numValidPixels=P.getUint32(l,!0),l+=4;else throw"Invalid valid pixel count type";}W+=l;if(3!=C.encoding)if(0===C.encoding){P=
(c-1)/4;if(P!==Math.floor(P))throw"uncompressed block has invalid length";l=new ArrayBuffer(4*P);z=new Uint8Array(l);z.set(new Uint8Array(Q,W,4*P));l=new Float32Array(l);for(z=0;z<l.length;z++)B=Math.min(B,l[z]);C.rawData=l;W+=4*P}else 1===C.encoding&&(P=Math.ceil(C.numValidPixels*C.bitsPerPixel/8),l=new ArrayBuffer(4*Math.ceil(P/4)),z=new Uint8Array(l),z.set(new Uint8Array(Q,W,P)),C.stuffedData=new Uint32Array(l),W+=P)}}k=B;Q=W;W=null!=r.noDataValue?H.clampFloat32(r.noDataValue):u;A=r.encodedMaskData;
z=r.returnMask;B=0;h=a;b=f;d=Math.floor(w/h);C=Math.floor(g/b);l=2*G;A=A||(y?y.bitset:null);var I;P=new (r.pixelType||Float32Array)(w*g);z&&A&&(I=new Uint8Array(w*g));z=new Float32Array(d*C);for(var x,t,e=0;e<=b;e++){var p=e!==b?C:g%b;if(0!==p)for(var E=0;E<=h;E++){var v=E!==h?d:w%h;if(0!==v){var q=e*w*C+E*d,n=w-v,D=S[B],R;if(2>D.encoding){if(0===D.encoding)var N=D.rawData;else{x=R=N=void 0;t=D.stuffedData;var T=D.bitsPerPixel,Y=D.numValidPixels,X=D.offset,ba=l,K=z,J=m,aa=(1<<T)-1,Z=0,ca=0,ea=Math.ceil((J-
X)/ba);t[t.length-1]<<=8*(4*t.length-Math.ceil(T*Y/8));for(x=0;x<Y;x++)0===ca&&(N=t[Z++],ca=32),ca>=T?(R=N>>>ca-T&aa,ca-=T):(ca=T-ca,R=(N&aa)<<ca&aa,N=t[Z++],ca=32-ca,R+=N>>>ca),K[x]=R<ea?X+R*ba:J;N=z}R=0}else var ja=2===D.encoding?0:D.offset;if(A)for(t=0;t<p;t++){if(q&7){var ma=A[q>>3];ma<<=q&7}for(x=0;x<v;x++)q&7||(ma=A[q>>3]),ma&128?(I&&(I[q]=1),P[q++]=2>D.encoding?N[R++]:ja):(I&&(I[q]=0),P[q++]=W),ma<<=1;q+=n}else if(2>D.encoding)for(t=0;t<p;t++){for(x=0;x<v;x++)P[q++]=N[R++];q+=n}else for(t=
0;t<p;t++)if(P.fill)P.fill(ja,q,q+v),q+=v+n;else{for(x=0;x<v;x++)P[q++]=ja;q+=n}if(1===D.encoding&&R!==D.numValidPixels)throw"Block and Mask do not match";B++}}}ja=I;I={width:w,height:g,pixelData:P,minValue:k,maxValue:m,noDataValue:W};ja&&(I.maskData=ja);r.returnEncodedMask&&y&&(I.encodedMaskData=y.bitset?y.bitset:null);if(r.returnFileInfo&&(I.fileInfo={fileIdentifierString:U,fileVersion:O,imageType:F,height:g,width:w,maxZError:G,eofOffset:Q,mask:y?{numBlocksX:y.numBlocksX,numBlocksY:y.numBlocksY,
numBytes:y.numBytes,maxValue:y.maxValue}:null,pixels:{numBlocksX:a,numBlocksY:f,numBytes:c,maxValue:m,minValue:k,noDataValue:W}},r.computeUsedBitDepths)){r=I.fileInfo;y=a*f;U={};for(O=0;O<y;O++)F=S[O],0===F.encoding?U.float32=!0:1===F.encoding?U[F.bitsPerPixel]=!0:U[0]=!0;y=Object.keys(U);r.bitDepths=y}return I}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const V=function(H){let u=1;switch(H){case Uint8Array:case Int8Array:u=1;break;case Uint16Array:case Int16Array:u=2;
break;case Uint32Array:case Int32Array:case Float32Array:u=4;break;case Float64Array:u=8}return u};return function(){function H(){}H.decode=function(u,Q){var r=Q.pixelType;const W=[],S=Q.width*Q.height;var U=Math.floor(u.byteLength/(Q.width*Q.height*V(Q.pixelType)));const {bandIds:P,format:O}=Q;Q=P&&P.length||Math.floor(u.byteLength/(Q.width*Q.height*V(Q.pixelType)));var F=u.byteLength-u.byteLength%(S*V(r));const g=new r(u,0,S*U);let w,G;let y,f;if("bip"===O)for(w=0;w<Q;w++){y=new r(S);f=P?P[w]:w;
for(G=0;G<S;G++)y[G]=g[G*U+f];W.push(y)}else if("bsq"===O)for(w=0;w<Q;w++)f=P?P[w]:w,W.push(g.subarray(f*S,(f+1)*S));if(F<u.byteLength-1)if(u=u.slice(F),8*u.byteLength<S)var a=null;else{u=new Uint8Array(u,0,Math.ceil(S/8));r=new Uint8Array(S);for(Q=F=Q=a=U=0;Q<u.length-1;Q++)for(a=u[Q],F=7;0<=F;F--)r[U++]=a>>F&1;for(F=7;U<S-1;)a=u[u.length-1],r[U++]=a>>F&1,F--;a=r}return{pixels:W,mask:a}};return H}()})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/AlgorithmicColorRamp ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w,G,y,f,a,c,m,k,A){function B(K,J){var aa,Z,ca,ea;K=h(K,null==J?void 0:J.variableName);const {bandCount:ja}=K;let {bandIds:ma,stretchType:ra}=J||{};null!=(aa=ma)&&aa.some(ta=>ta>=ja)&&(ma=null);let pa=Q.unwrap(K.statistics),la=Q.unwrap(K.histograms);if(1<ja){var va;ma=null!=(va=ma)&&va.length?ma:b(K);pa=null==pa?null:ma.map(ta=>pa[ta]);la=null==la?null:ma.map(ta=>la[ta])}else ma=[0];null==ra&&(ra=l(K));aa=!1;switch(ra){case "none":aa=!1;break;case "percent-clip":aa=
!(null!=(Z=la)&&Z.length);break;default:aa=!(null!=(ca=pa)&&ca.length)}({dataType:Z}=K);Z=1===(null==(ea=ma)?void 0:ea.length)&&X.has(Z)?T:null;ea=new f({stretchType:ra,dynamicRangeAdjustment:aa,colorRamp:Z,outputMin:0,outputMax:255,gamma:1===ma.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===ra?ea.maxPercent=ea.minPercent=.25:"standard-deviation"===ra&&(ea.numberOfStandardDeviations=2);if(!aa&&(Q.isSome(K.multidimensionalInfo)||null!=J&&J.includeStatisticsInStretch))if("percent-clip"===ra)ea.histograms=
la;else if("min-max"===ra||"standard-deviation"===ra)ea.statistics=pa;return ea}function h(K,J){if(null==J)return K;let aa=Q.unwrap(K.statistics),Z=Q.unwrap(K.histograms);const {multidimensionalInfo:ca}=K;if(J&&Q.isSome(ca)){const {statistics:ea,histograms:ja}=ca.variables.find(ma=>ma.name===J);null!=ea&&ea.length&&(aa=ea);null!=ja&&ja.length&&(Z=ja)}return S.fromJSON({...K.toJSON(),statistics:aa,histograms:Z})}function b(K){const J=K.bandCount;if(1===J)return null;if(2===J)return[0];K=K.keyProperties&&
K.keyProperties.BandProperties;let aa;if(K&&K.length===J){const {red:Z,green:ca,blue:ea,nir:ja}=d(K);null!=Z&&null!=ca&&null!=ea?aa=[Z,ca,ea]:null!=ja&&null!=Z&&null!=ca&&(aa=[ja,Z,ca])}!aa&&3<=J&&(aa=[0,1,2]);return aa}function d(K){const J={};for(let ea=0;ea<K.length;ea++){var aa,Z=K[ea],ca=null==(aa=Z.BandName)?void 0:aa.toLowerCase();"red"===ca?J.red=ea:"green"===ca?J.green=ea:"blue"===ca?J.blue=ea:"nearinfrared"===ca||"nearinfrared_1"===ca||"nir"===ca?J.nir=ea:Z.WavelengthMax&&Z.WavelengthMin&&
(ca=Z.WavelengthMin,Z=Z.WavelengthMax,null==J.blue&&410<=ca&&480>=ca&&480<=Z&&540>=Z?J.blue=ea:null==J.green&&490<=ca&&560>=ca&&560<=Z&&610>=Z?J.green=ea:null==J.red&&595<=ca&&670>=ca&&660<=Z&&730>=Z?J.red=ea:null==J.nir&&700<=ca&&860>=ca&&800<=Z&&950>=Z&&(J.nir=ea))}return J}function l(K){let J="percent-clip";const {pixelType:aa,dataType:Z,histograms:ca,statistics:ea}=K;"u8"!==aa||"processed"!==Z&&Q.isSome(ca)&&Q.isSome(ea)?"u8"===aa||"elevation"===Z||X.has(Z)?J="min-max":Q.isSome(ca)?J="percent-clip":
Q.isSome(ea)&&(J=J="min-max"):J="none";return J}function C(K,J,aa,Z){if(!t(K,J))return null;const {attributeTable:ca,statistics:ea}=K,ja=z(ca,J),ma=x(ca,"red"),ra=x(ca,"green"),pa=x(ca,"blue");K=new U;const la=[],va=new Set,ta=!!(ma&&ra&&pa);if(Q.isSome(ca))ca.features.forEach(ha=>{var za=ha.attributes[ja.name];va.has(ha.attributes[ja.name])||null==za||(va.add(za),za=!ta||"single"!==ma.type&&"double"!==ma.type||"single"!==ra.type&&"double"!==ra.type||"single"!==pa.type&&"double"!==pa.type||ca.features.some(xa=>
1<xa.attributes[ma.name]||1<xa.attributes[ra.name]||1<xa.attributes[pa.name])?1:255,la.push(new F({value:ha.attributes[ja.name],label:ha.attributes[ja.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:ta?new H([ha.attributes[ma.name]*za,ha.attributes[ra.name]*za,ha.attributes[pa.name]*za,1]):new H([0,0,0,0])}})))});else if(null!=ea&&ea[0])for(J=ea[0].min;J<=ea[0].max;J++)la.push(new F({value:J,label:J.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new H([0,
0,0,0])}}));la.sort((ha,za)=>ha.value&&"string"===typeof ha.value.valueOf()?0:ha.value>za.value?1:-1);if(!ta){const ha=O.convertColorRampToColormap(Y,la.length);la.forEach((za,xa)=>za.symbol.color=new H(ha[xa].slice(1,4)));K.colorRamp=Y}if(aa||Z){const ha=aa||O.convertColorRampToColormap(Z,la.length).map(za=>za.slice(1));la.forEach((za,xa)=>za.symbol.color=new H(ha[xa]));K.colorRamp=Z}return new a({field:ja.name,uniqueValueInfos:la,authoringInfo:K})}function z(K,J,aa){let Z;Q.isSome(K)?(Z=J?K.fields.find(ca=>
J.toLowerCase()===ca.name.toLowerCase()):I(K.fields),Z||(aa||(Z=K.fields.find(ca=>"string"===ca.type)),Z||(Z=x(K,"value")))):Z=new W({name:"value"});return Z}function I(K){let J;for(let aa=0;aa<K.length;aa++){const Z=K[aa].name.toLowerCase();if("string"===K[aa].type){if(Z.startsWith("class")){J=K[aa];break}null==J&&(Z.endsWith("name")||Z.endsWith("type"))&&(J=K[aa])}}return J}function x(K,J){return Q.isSome(K)?K.fields.find(aa=>aa.name.toLowerCase()===J):null}function t(K,J){const {attributeTable:aa,
bandCount:Z}=K;return!Q.isSome(aa)&&q(K)?!0:!Q.isSome(aa)||1<Z||J&&null==aa.fields.find(ca=>ca.name.toLowerCase()===J.toLowerCase())?!1:!0}function e(K){const {bandCount:J,colormap:aa}=K;return Q.isSome(aa)&&aa.length&&1===J}function p(K){if(!e(K))return null;let J;const {attributeTable:aa,colormap:Z}=K;if(Q.isSome(aa)){const ca=x(aa,"value"),ea=z(aa,null,!0);"string"===ea.type&&(J={},aa.features.forEach(ja=>{ja=ja.attributes;J[ja[ca.name]]=ea?ja[ea.name]:ja[ca.name]}))}return c.createFromColormap(Q.unwrap(Z),
J)}function E(K){return"elevation"===K.dataType}function v(K){const {attributeTable:J,bandCount:aa}=K;return 1===aa&&(Q.isSome(J)||Q.isSome(K.histograms))}function q(K){var J,aa,Z;return-1<["u8","s8"].indexOf(K.pixelType)&&null!=(null==(J=K.statistics)?void 0:null==(aa=J[0])?void 0:aa.min)&&null!=(null==(Z=K.statistics[0])?void 0:Z.max)&&1===K.bandCount}function n(K){({dataType:K}=K);return"vector-uv"===K||"vector-magdir"===K}function D(K){({dataType:K}=K);return"vector-uv"===K||"vector-magdir"===
K}function R(K){if(!n(K))return null;if(Q.isSome(K.statistics)&&K.statistics.length){var J="vector-uv"===K.dataType;const {min:aa,max:Z}=K.statistics[0];J=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:J?Math.min(Math.abs(aa),Math.abs(Z)):aa,maxDataValue:J?Math.max(Math.abs(aa),Math.abs(Z)):Z}]}K=Q.isSome(K.multidimensionalInfo)?ba.get(K.multidimensionalInfo.variables[0].unit):null;K=new A({visualVariables:J,inputUnit:K,rotationType:"geographic"});K.visualVariables=[...K.sizeVariables,
...K.rotationVariables];return K}function N(K){var J;return{color:null==(J=K.symbolLayers[0].material)?void 0:J.color,type:"esriSFS",style:"esriSFSSolid"}}const T=y.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),Y=y.fromJSON(O.PREDEFINED_JSON_COLOR_RAMPS[0]),X=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),
ba=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);V.createClassBreaksRenderer=function(K,J){K=h(K,null==J?void 0:J.variableName);const {attributeTable:aa}=K;if(!v(K))return null;const Z=Q.isSome(K.histograms)?K.histograms[0]:null;var ca=(null==J?void 0:J.numClasses)||5;const ea=new U({classificationMethod:null==J?void 0:J.classificationMethod,colorRamp:null==J?void 0:J.colorRamp});let ja=(null==J?void 0:J.field)||
"value";const ma=[],ra=[],pa=Q.isSome(aa),la=pa&&aa.fields.find(ha=>"count"===ha.name.toLowerCase()),va=pa&&aa.fields.find(ha=>ha.name.toLowerCase()===ja.toLowerCase());if(va&&la){ja=va.name;const ha=aa.features.length;let za=0;aa.features.forEach(xa=>za+=xa.attributes[la.name]/ha);aa.features.forEach(xa=>{const Ha=xa.attributes[va.name];xa=xa.attributes[la.name];if(0<xa){ra.push(xa);xa=Math.max(1,Math.round(xa/ha/za*1E3));for(let Ea=0;Ea<xa;Ea++)ma.push(Ha)}})}else{({pixelType:K}=K);const ha=(Z.max-
Z.min)/Z.size,za=(K=-1<K.indexOf("s")||-1<K.indexOf("u"))&&1===ha?Math.floor(Z.min+.5):Z.min,xa=K&&1===ha?Math.floor(Z.max-.5):Z.max,Ha=Z.size;let Ea=0;Z.counts.forEach(Da=>Ea+=Da/Ha);Z.counts.forEach((Da,ya)=>{if(0<Da){ra.push(Da);Da=Math.max(1,Math.round(Da/Ha/Ea*1E3));ya=0===ya?za:ya===Ha-1?xa:Z.min+ha*(ya+.5);for(let wa=0;wa<Da;wa++)ma.push(ya)}})}ca=G.createGenerateRendererClassBreaks({values:ma,valueFrequency:ra,normalizationTotal:null,definition:new w({classificationMethod:(null==J?void 0:
J.classificationMethod)||"natural-breaks",breakCount:ca,definedInterval:null==J?void 0:J.definedInterval})});let ta=null==J?void 0:J.colors;ta||(J=(null==J?void 0:J.colorRamp)||T,ea.colorRamp=J,ta=O.convertColorRampToColormap(J,ca.classBreaks.length,!0).map(ha=>ha.slice(1)));J=ca.classBreaks.map((ha,za)=>new P({minValue:ha.minValue,maxValue:ha.maxValue,label:ha.label,symbol:{type:"simple-fill",color:ta[za]}}));return new k({field:ja,classBreakInfos:J,authoringInfo:ea})};V.createColorRamp=function(K){const J=
[];for(let aa=0;aa<K.length-1;aa++)J[aa]=new g({algorithm:"hsv",fromColor:K[aa],toColor:K[aa+1]||new H({r:255,g:255,b:255,a:1})});return 2<K.length?new y({colorRamps:J}):J[0]};V.createColormapRenderer=p;V.createDefaultRenderer=function(K,J){const {attributeTable:aa,colormap:Z}=K;if(n(K)){var ca=R(K);if(Q.isSome(ca))return ca}return Q.isSome(Z)&&(ca=p(K),Q.isSome(ca))||Q.isSome(aa)&&(ca=C(K),Q.isSome(ca))?ca:B(K,J)};V.createShadedReliefRenderer=function(K,J){var aa;if(!E(K))return null;({extent:K}=
K);K=K.width*r.getMetersPerUnitForSR(K.spatialReference);J=null!=(aa=J)?aa:"multi-directional";return new m({hillshadeType:J,scalingType:5E6<K?"adjusted":"none"})};V.createStretchRenderer=B;V.createUVRenderer=C;V.createVectorFieldRenderer=R;V.getBandNames=function(K,J){var aa;const Z=K.keyProperties&&K.keyProperties.BandProperties;J=null!=(aa=J)&&aa.length?J:Array.from(Array(K.bandCount).keys());return J.map(ca=>Z&&Z.length===K.bandCount?Z[ca]&&Z[ca].BandName||"band_"+(ca+1):"band_"+(ca+1))};V.getClassField=
z;V.getDefaultBandCombination=b;V.getDefaultInterpolation=function(K,J,aa){const Z=["nearest","bilinear","cubic","majority"].find(ca=>ca===(null==aa?void 0:aa.toLowerCase()));return"Map"===J?null!=Z?Z:"bilinear":"standard-time"===K.dataType?null!=Z?Z:"nearest":"thematic"===K.dataType||K.attributeTable||K.colormap?"nearest"===Z||"majority"===Z?Z:"nearest":null!=Z?Z:"bilinear"};V.getField=x;V.getSupportedRendererTypes=function(K){const J=["raster-stretch"];e(K)&&J.push("raster-colormap");t(K)&&J.push("unique-value");
v(K)&&J.push("class-breaks");E(K)&&J.push("raster-shaded-relief");n(K)&&J.push("vector-field");D(K)&&J.push("animated-flow");return J};V.getWellKnownBandIndexes=d;V.isAnimatedFlowRendererSupported=D;V.isClassBreaksSupported=v;V.isColormapRendererSupported=e;V.isShadedReliefRendererSupported=E;V.isSingleBand8BitRasterWithStats=q;V.isUVRendererSupported=t;V.isVectorFieldRendererSupported=n;V.normalizeRendererJSON=function(K){if("uniqueValue"===K.type){var J,aa=K.uniqueValueInfos,Z=aa[0].symbol;null!=
Z&&null!=(J=Z.symbolLayers)&&J.length&&(K.uniqueValueInfos=aa.map(ca=>({value:ca.value,label:ca.label,symbol:ca.symbol?N(ca.symbol):null})));return K}"classBreaks"===K.type&&(J=K.classBreakInfos,Z=J[0].symbol,null!=Z&&null!=(aa=Z.symbolLayers)&&aa.length&&(K.classBreakInfos=J.map(ca=>({classMinValue:ca.classMinValue,classMaxValue:ca.classMaxValue,label:ca.label,symbol:ca.symbol?N(ca.symbol):null}))));return K};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(V,H,u,Q,r,W,S,U,P){r=new u.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});u=new u.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});P=function(O){function F(){var g=O.apply(this,arguments)||this;g.breakCount=null;g.classificationField=
null;g.classificationMethod=null;g.normalizationField=null;g.normalizationType=null;g.type="class-breaks-definition";return g}V._inheritsLoose(F,O);V._createClass(F,[{key:"standardDeviationInterval",set:function(g){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",g)}},{key:"definedInterval",set:function(g){"defined-interval"===this.classificationMethod&&this._set("definedInterval",g)}}]);return F}(P);H.__decorate([Q.property({json:{write:!0}})],P.prototype,"breakCount",
void 0);H.__decorate([Q.property({json:{write:!0}})],P.prototype,"classificationField",void 0);H.__decorate([Q.property({type:String,json:{read:r.read,write:r.write}})],P.prototype,"classificationMethod",void 0);H.__decorate([Q.property({json:{write:!0}})],P.prototype,"normalizationField",void 0);H.__decorate([Q.property({json:{read:u.read,write:u.write}})],P.prototype,"normalizationType",void 0);H.__decorate([Q.property({value:null,json:{write:!0}})],P.prototype,"standardDeviationInterval",null);
H.__decorate([Q.property({value:null,json:{write:!0}})],P.prototype,"definedInterval",null);H.__decorate([Q.property()],P.prototype,"type",void 0);return P=H.__decorate([U.subclass("esri.rest.support.ClassBreaksDefinition")],P)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F){u=new u.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});Q=function(g){function w(){var G=g.apply(this,arguments)||this;G.baseSymbol=null;G.colorRamp=null;G.type=null;return G}V._inheritsLoose(w,g);return w}(Q.JSONSupport);H.__decorate([r.property({type:F,json:{write:!0}})],Q.prototype,"baseSymbol",void 0);H.__decorate([r.property({types:O.types,json:{read:{reader:O.fromJSON},write:!0}})],Q.prototype,"colorRamp",void 0);H.__decorate([r.property({json:{read:u.read,
write:u.write}})],Q.prototype,"type",void 0);return Q=H.__decorate([P.subclass("esri.rest.support.ClassificationDefinition")],Q)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(V){function H(F){const {classificationMethod:g,breakCount:w,normalizationType:G,definedInterval:y}=F.definition,f=[];var a=F.values;if(0===a.length)return[];a=a.sort((h,b)=>h-b);var c=a[0],m=a[a.length-1];if("equal-interval"===g)if(a.length>=w){a=(m-c)/w;F=c;for(var k=1;k<w;k++){var A=Number((c+
k*a).toFixed(6));f.push({minValue:F,maxValue:A,label:u(F,A,G)});F=A}f.push({minValue:F,maxValue:m,label:u(F,m,G)})}else a.forEach(h=>{f.push({minValue:h,maxValue:h,label:u(h,h,G)})});else if("natural-breaks"===g){a=Q(a);F=r(a.uniqueValues,F.valueFrequency||a.valueFrequency,w);for(k=1;k<w;k++)a.uniqueValues.length>k&&(A=Number(a.uniqueValues[F[k]].toFixed(6)),f.push({minValue:c,maxValue:A,label:u(c,A,G)}),c=A);f.push({minValue:c,maxValue:m,label:u(c,m,G)})}else if("quantile"===g)if(a.length>=w&&c!==
m){F=Math.ceil(a.length/w);k=0;for(A=1;A<w;A++){var B=F+k-1;B>a.length&&(B=a.length-1);0>B&&(B=0);f.push({minValue:c,maxValue:a[B],label:u(c,a[B],G)});c=a[B];k+=F;F=Math.ceil((a.length-k)/(w-A))}f.push({minValue:c,maxValue:m,label:u(c,m,G)})}else for(m=-1,c=0;c<a.length;c++)F=a[c],F!==m&&(m=F,f.push({minValue:m,maxValue:F,label:u(m,F,G)}),m=F);else if("standard-deviation"===g)if(F=U(a),k=P(a,F),0===k)f.push({minValue:a[0],maxValue:a[0],label:u(a[0],a[0],G)});else{a=S(c,m,w,F,k)*k;k=0;for(A=w;1<=A;A--)B=
Number((F-(A-.5)*a).toFixed(6)),f.push({minValue:c,maxValue:B,label:u(c,B,G)}),c=B,k++;A=Number((F+.5*a).toFixed(6));f.push({minValue:c,maxValue:A,label:u(c,A,G)});c=A;k++;for(B=1;B<=w;B++)A=k===2*w?m:Number((F+(B+.5)*a).toFixed(6)),f.push({minValue:c,maxValue:A,label:u(c,A,G)}),c=A,k++}else if("defined-interval"===g){if(!y)return f;m=a[0];a=a[a.length-1];c=Math.ceil((a-m)/y);F=m;for(k=1;k<c;k++)A=Number((m+k*y).toFixed(6)),f.push({minValue:F,maxValue:A,label:u(F,A,G)}),F=A;f.push({minValue:F,maxValue:a,
label:u(F,a,G)})}return f}function u(F,g,w){let G=null;return G=F===g?w&&"percent-of-total"===w?F+"%":F.toString():w&&"percent-of-total"===w?F+"% - "+g+"%":F+" - "+g}function Q(F){const g=[],w=[];let G=Number.MIN_VALUE,y=1,f=-1;for(let a=0;a<F.length;a++){const c=F[a];c===G?(y++,w[f]=y):null!==c&&(g.push(c),G=c,y=1,w.push(y),f++)}return{uniqueValues:g,valueFrequency:w}}function r(F,g,w){var G=F.length;const y=[];w>G&&(w=G);for(var f=0;f<w;f++)y.push(Math.round(f*G/w-1));y.push(G-1);f=W(y,F,g,w);{G=
f.mean;f=f.sdcm;var a=w,c=0,m=0;let A=0,B=0,h=!0;for(let b=0;2>b&&h;b++){0===b&&(h=!1);for(var k=0;k<a-1;k++)for(;y[k+1]+1!==y[k+2];)if(y[k+1]+=1,c=O(k,y,F,g),A=c.sbMean,c=c.sbSdcm,m=O(k+1,y,F,g),B=m.sbMean,m=m.sbSdcm,c+m<f[k]+f[k+1])f[k]=c,f[k+1]=m,G[k]=A,G[k+1]=B,h=!0;else{--y[k+1];break}for(k=a-1;0<k;k--)for(;y[k]!==y[k-1]+1;)if(--y[k],c=O(k-1,y,F,g),A=c.sbMean,c=c.sbSdcm,m=O(k,y,F,g),B=m.sbMean,m=m.sbSdcm,c+m<f[k-1]+f[k])f[k-1]=c,f[k]=m,G[k-1]=A,G[k]=B,h=!0;else{y[k]+=1;break}}G=h}G&&(f=W(y,F,
g,w));return y}function W(F,g,w,G){let y=[];var f=[],a=[];let c=0;const m=[],k=[];for(var A=0;A<G;A++){var B=O(A,F,g,w);m.push(B.sbMean);k.push(B.sbSdcm);c+=k[A]}B=c;for(A=!0;A||c<B;){A=!1;y=[];for(f=0;f<G;f++)y.push(F[f]);for(a=0;a<G;a++)for(B=F[a]+1;B<=F[a+1];B++)if(f=g[B],0<a&&B!==F[a+1]&&Math.abs(f-m[a])>Math.abs(f-m[a-1]))F[a]=B;else if(a<G-1&&F[a]!==B-1&&Math.abs(f-m[a])>Math.abs(f-m[a+1])){F[a+1]=B-1;break}B=c;c=0;f=[];a=[];for(let h=0;h<G;h++){f.push(m[h]);a.push(k[h]);const b=O(h,F,g,w);
m[h]=b.sbMean;k[h]=b.sbSdcm;c+=k[h]}}if(c>B){for(g=0;g<G;g++)F[g]=y[g],m[g]=f[g],k[g]=a[g];c=B}return{mean:m,sdcm:k}}function S(F,g,w,G,y){F=Math.max(G-F,g-G)/y/w;return 1<=F?1:.5<=F?.5:.25}function U(F){let g=0;for(let w=0;w<F.length;w++)g+=F[w];return g/=F.length}function P(F,g){let w=0;for(let G=0;G<F.length;G++){const y=F[G];w+=(y-g)*(y-g)}w/=F.length;return Math.sqrt(w)}function O(F,g,w,G){var y=0,f=0;for(var a=g[F]+1;a<=g[F+1];a++){const c=G[a];y+=w[a]*c;f+=c}0>=f&&console.log("Exception in Natural Breaks calculation");
y/=f;f=0;for(a=g[F]+1;a<=g[F+1];a++)f+=G[a]*(w[a]-y)**2;return{sbMean:y,sbSdcm:f}}V.createGenerateRendererClassBreaks=function(F){const {normalizationTotal:g}=F;return{classBreaks:H(F),normalizationTotal:g}};V.createGenerateRendererUniqueValues=function(F){F=Q(F);const g=[],w=F.uniqueValues.length;for(let G=0;G<w;G++){const y=F.uniqueValues[G];g.push({value:y,count:F.valueFrequency[G],label:y.toString()})}return{uniqueValues:g}};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w,G,y){function f(A,B){const {attributeTable:h,bandCount:b}=A;return!W.isSome(h)||1<b||B&&null==h.fields.find(d=>d.name.toLowerCase()===B.toLowerCase())?!1:!0}function a(A){const {bandCount:B,colormap:h}=A;return W.isSome(h)&&h.length&&1===B}function c(A){return w.isValidPixelBlock(A)&&0!==A.validPixelCount}const m=r.getLogger("esri.renderers.support.RasterSymbolizer"),k={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,
4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};Q=function(A){function B(b){return A.call(this,b)||this}V._inheritsLoose(B,A);var h=B.prototype;h.bind=function(){const {rendererJSON:b}=this;if(!b)return{success:!1};this.lookup={rendererJSON:{}};let d;switch(b.type){case "uniqueValue":d={success:this._updateUVRenderer(b)};break;case "rasterColormap":d={success:this._updateColormapRenderer(b)};break;case "rasterStretch":d={success:this._updateStretchRenderer(b)};
break;case "classBreaks":d={success:this._updateClassBreaksRenderer(b)};break;case "rasterShadedRelief":d={success:this._updateShadedReliefRenderer(b)};break;case "vectorField":d={success:this._updateVectorFieldRenderer()};break;case "animatedFlow":d=this._updateAnimatedFlowRenderer()}return d};h.symbolize=function(b){let d=b&&b.pixelBlock;if(!c(d))return d;if(b.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(d,b.simpleStretchParams);try{3<d.pixels.length&&
(d=w.extractBands(d,[0,1,2]));let l;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":l=this._symbolize_colormap(d);break;case "classBreaks":l=this._symbolize_classBreaks(d);break;case "rasterStretch":l=this._symbolize_stretch(d,b.bandIds);break;case "rasterShadedRelief":({extent:b}=b),l=this._symbolize_shadedRelief(d,{isGCS:b.spatialReference.isGeographic,resolution:{x:(b.xmax-b.xmin)/d.width,y:(b.ymax-b.ymin)/d.height}})}return l}catch(l){return m.error("symbolize",l.message),
d}};h.simpleStretch=function(b,d){if(!c(b))return b;try{return 3<b.pixels.length&&(b=w.extractBands(b,[0,1,2])),w.stretch(b,d)}catch(l){return m.error("symbolize",l.message),b}};h.generateWebGLParameters=function(b){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var d;const {indexedColormap:x,offset:t}=(null==(d=this.lookup)?void 0:d.colormapLut)||{};return{colormap:x,colormapOffset:t,type:"lut"}}const {pixelBlock:l,isGCS:C,resolution:z,bandIds:I}=b;({rendererJSON:b}=
this);return"rasterStretch"===b.type?this.generateStretchWebGLParams(l,b,I):"rasterShadedRelief"===b.type?this.generateShadedReliefWebGLParams(b,C,z):"vectorField"===b.type?this._generateVectorFieldWebGLParams(b):null};h._isLUTChanged=function(b){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const d=this.rendererJSON.colorRamp;if(b)return JSON.stringify(d)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==
JSON.stringify(this.lookup.rendererJSON)};h._symbolize_colormap=function(b){return this._isLUTChanged()&&!this.bind().success?b:w.colorize(b,this.lookup.colormapLut)};h._symbolize_classBreaks=function(b){const d=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind().success?b:d?w.colorize(b,this.lookup.colormapLut):w.remapColor(b,this.lookup.remapLut)};h._symbolize_stretch=function(b,d){const {pixelType:l,bandCount:C}=this.rasterInfo,z=this.rendererJSON,
I=-1<["u8","u16","s8","s16"].indexOf(l);let x;var {dra:t}=z;var e=z.useGamma?z.gamma:null;if("histogramEqualization"===z.stretchType){var p=t?null:this.lookup.histogramLut;d=this.getStretchCutoff(z,b,d,!p);e=w.stretch(b,{...d,gamma:e});e=w.lookupPixels(e,{lut:t?d.histogramLut:p,offset:0})}else if(I){var E;if(t)t=this.getStretchCutoff(z,b,d),x=w.createStretchLUT({pixelType:l,...t,gamma:e});else{if(this._isLUTChanged()&&!this.bind().success)return b;x=this.lookup?this.lookup.stretchLut:null}if(!x)return b;
1<C&&(null==d?void 0:d.length)===(null==(p=W.unwrap(b))?void 0:p.pixels.length)&&(null==(E=x)?void 0:E.lut.length)===C&&(x={lut:d.map(v=>x.lut[v]),offset:x.offset});e=w.lookupPixels(b,x)}else t=this.getStretchCutoff(z,b,d),e=w.stretch(b,{...t,gamma:e});if(z.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return b;e=w.colorize(e,this.lookup.colormapLut)}return e};h._symbolize_shadedRelief=function(b,d){var l,C,z=this.rendererJSON;d=G.hillshade(b,{...z,...d});if(!z.colorRamp||this._isLUTChanged(!0)&&
!this.bind().success)return d;z=this.lookup?this.lookup.hsvMap:null;if(!z)return d;const I=null!=(l=null==(C=W.unwrap(this.rasterInfo.statistics))?void 0:C[0])?l:{min:0,max:8E3};G.tintHillshade(d,b,z,I);return d};h._updateVectorFieldRenderer=function(){const {bandCount:b,dataType:d}=this.rasterInfo;return 2===b&&("vector-magdir"===d||"vector-uv"===d)};h._updateAnimatedFlowRenderer=function(){const {bandCount:b,dataType:d}=this.rasterInfo;return 2!==b||"vector-magdir"!==d&&"vector-uv"!==d?{success:!1,
error:`Unsupported data type "${d}"; AnimatedFlowRenderer only supports "vector-magdir" and "vector-uv".`}:{success:!0}};h._updateUVRenderer=function(b){const {bandCount:d,attributeTable:l,pixelType:C}=this.rasterInfo,z=b.field1;if(!z)return!1;const I=b.defaultSymbol;var x=1===d&&["u8","s8"].includes(C);if(!f(this.rasterInfo,z)&&!x)return!1;const t=[];if(l){const e=l.fields.filter(p=>"value"===p.name.toLowerCase())[0];if(!e)return!1;l.features.forEach(p=>{var E,v=b.uniqueValueInfos.filter(q=>String(q.value)===
String(p.attributes[z]))[0];(v=null==v?void 0:null==(E=v.symbol)?void 0:E.color)?t.push([p.attributes[e.name]].concat(v)):I&&t.push([p.attributes[e.name]].concat(I.color))})}else{if("value"!==z.toLowerCase())return!1;b.uniqueValueInfos.forEach(e=>{var p;const E=null==e?void 0:null==(p=e.symbol)?void 0:p.color;E?t.push([parseInt(""+e.value,10)].concat(E)):I&&t.push([parseInt(""+e.value,10)].concat(I.color))})}if(0===t.length)return!1;x=w.createColormapLUT({colormap:t});this.lookup={rendererJSON:b,
colormapLut:x};return this.canRenderInWebGL=!0};h._updateColormapRenderer=function(b){if(!a(this.rasterInfo))return!1;var d=b.colormapInfos.map(l=>[l.value].concat(l.color)).sort((l,C)=>l[0]-C[0]);if(!d||0===d.length)return!1;d=w.createColormapLUT({colormap:d});this.lookup={rendererJSON:b,colormapLut:d};return this.canRenderInWebGL=!0};h._updateShadedReliefRenderer=function(b){if("elevation"!==this.rasterInfo.dataType)return!1;if(b.colorRamp){var d=y.convertColorRampToColormap(b.colorRamp,256,!0);
d=w.createColormapLUT({colormap:d});const l=[],C=d.indexedColormap;for(let z=0;z<C.length;z+=4){const I=u.toHSV({r:C[z],g:C[z+1],b:C[z+2]});l.push([I.h/60,I.s/100,255*I.v/100])}this.lookup={rendererJSON:b,colormapLut:d,hsvMap:l}}else this.lookup=null;return this.canRenderInWebGL=!0};h._updateClassBreaksRenderer=function(b){var d=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),l=b.classBreakInfos;if(null==l||!l.length)return!1;l=l.sort((t,e)=>t.classMaxValue-e.classMaxValue);const C=
l[l.length-1];var z=b.minValue;if(!d){d=[];for(var I=0;I<l.length;I++){var x;d.push({value:null!=(x=l[I].classMinValue)?x:z,mappedColor:l[I].symbol.color});z=l[I].classMaxValue}d.push({value:C.classMaxValue,mappedColor:C.symbol.color});this.lookup={rendererJSON:b,remapLut:d};this.canRenderInWebGL=!1;return!0}x=[];z=Math.floor(b.minValue);for(d=0;d<l.length;d++){for(I=l[d];z<I.classMaxValue;z++)x.push([z].concat(I.symbol.color));z=Math.ceil(I.classMaxValue)}C.classMaxValue===z&&x.push([C.classMaxValue].concat(C.symbol.color));
l=w.createColormapLUT({colormap:x,fillUnspecified:!1});this.lookup={rendererJSON:b,colormapLut:l};return this.canRenderInWebGL=!0};h._isHistogramRequired=function(b){return"percentClip"===b||"histogramEqualization"===b};h._isValidRasterStatistics=function(b){return W.isSome(b)&&0<b.length&&null!=b[0].min&&null!=b[0].max};h._updateStretchRenderer=function(b){var d;let {stretchType:l,dra:C}=b;if(!("none"===l||null!=(d=b.statistics)&&d.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
C))return!1;var z=W.unwrap(b.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(b.stretchType)||null!=z&&z.length||C||(l="minMax");const {gamma:I,useGamma:x,colorRamp:t}=b;d=this.rasterInfo.pixelType;const e=!C&&-1<["u8","u16","s8","s16"].indexOf(d);"histogramEqualization"===l?(d=z.map(p=>w.createHistogramEqualizationLUT(p)),this.lookup={rendererJSON:b,histogramLut:d}):e&&(z=this.getStretchCutoff(b),d=w.createStretchLUT({pixelType:d,...z,gamma:x?I:null}),this.lookup={rendererJSON:b,
stretchLut:d});t&&(d=y.convertColorRampToColormap(t,256,!0),this.lookup||(this.lookup={rendererJSON:b}),this.lookup.colormapLut=w.createColormapLUT({colormap:d}),this.lookup.rendererJSON=b);return this.canRenderInWebGL=!0};h.getStretchCutoff=function(b,d=null,l,C){var z,I,x,t=b.stretchType;if(b.dra)if("minMax"===t&&W.isSome(d)&&d.statistics)d=d.statistics.map(N=>[N.minValue,N.maxValue,0,0]);else{var e=w.estimateStatisticsHistograms(d);d=W.isSome(e)?e.statistics:null;e=W.isSome(e)?e.histograms:null}else{var p;
d=0<(null==(p=b.statistics)?void 0:p.length)?b.statistics:W.unwrap(this.rasterInfo.statistics);e=b.histograms||W.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(t)||null!=(z=e)&&z.length||(t="minMax");p=(null==(I=d)?void 0:I.length)||(null==(x=e)?void 0:x.length)||this.rasterInfo.bandCount;I=[];x=[];let E;let v,q,n;d&&!Array.isArray(d[0])&&(d=d.map(N=>[N.min,N.max,N.avg,N.stddev]));switch(t){case "none":d=k[this.rasterInfo.pixelType]||k.f32;for(z=0;z<p;z++)I[z]=d[0],x[z]=d[1];break;
case "minMax":for(z=0;z<p;z++)I[z]=d[z][0],x[z]=d[z][1];break;case "standardDeviation":for(z=0;z<p;z++)I[z]=d[z][2]-b.numberOfStandardDeviations*d[z][3],x[z]=d[z][2]+b.numberOfStandardDeviations*d[z][3],I[z]<d[z][0]&&(I[z]=d[z][0]),x[z]>d[z][1]&&(x[z]=d[z][1]);break;case "histogramEqualization":for(z=0;z<p;z++)I[z]=e[z].min,x[z]=e[z].max;break;case "percentClip":for(z=0;z<e.length;z++){d=e[z];v=new Uint32Array(d.size);var D=d.counts;E=0;p=(d.max-d.min)/d.size;q=-.5===d.min&&1===p?.5:0;for(n=0;n<d.size;n++)E+=
D[n],v[n]=E;D=(b.minPercent||0)*E/100;for(n=0;n<d.size;n++)if(v[n]>D){I[z]=d.min+p*(n+q);break}D=(1-(b.maxPercent||0)/100)*E;for(n=d.size-2;0<=n;n--)if(v[n]<D){x[z]=d.min+p*(n+2-q);break}}break;default:for(z=0;z<p;z++)I[z]=d[z][0],x[z]=d[z][1]}let R;"histogramEqualization"===t?(t=e[0].size||256,b=0,C&&(R=e.map(N=>w.createHistogramEqualizationLUT(N)))):(t=b.max||255,b=b.min||0);return this.getSelectedBandCutoffs({minCutOff:I,maxCutOff:x,outMax:t,outMin:b,histogramLut:R},l)};h.getSelectedBandCutoffs=
function(b,d){if(null==d||0===d.length)return b;const l=Math.max.apply(null,d),{minCutOff:C,maxCutOff:z,outMin:I,outMax:x,histogramLut:t}=b;return C.length===d.length||C.length<=l?b:{minCutOff:d.map(e=>C[e]),maxCutOff:d.map(e=>z[e]),histogramLut:t?d.map(e=>t[e]):null,outMin:I,outMax:x}};h.generateStretchWebGLParams=function(b,d,l){let C=null,z=null;var I=this.lookup&&this.lookup.colormapLut;d.colorRamp&&I&&(C=I.indexedColormap,z=I.offset);"histogramEqualization"===d.stretchType&&(d={...d,stretchType:"minMax"});
({gamma:I}=d);const x=!!(d.useGamma&&I&&I.some(D=>1!==D)),{minCutOff:t,maxCutOff:e,outMin:p,outMax:E}=this.getStretchCutoff(d,b,l);var v=0;W.isSome(b)&&(v=b.getPlaneCount(),2===v&&(b=b.clone(),b.statistics=[b.statistics[0]],b.pixels=[b.pixels[0]]));b=Math.min(3,(null==l?void 0:l.length)||v||this.rasterInfo.bandCount);l=new Float32Array(b);v=C||x?1:255;let q;for(q=0;q<b;q++)l[q]=(E-p)/(e[q]-t[q])/v;const n=new Float32Array(b);if(x)for(q=0;q<b;q++)n[q]=1<I[q]?2<I[q]?6.5+(I[q]-2)**2.5:6.5+100*(2-I[q])**
4:1;return{bandCount:b,outMin:p/v,outMax:E/v,minCutOff:t,maxCutOff:e,factor:l,useGamma:x,gamma:x?I:[1,1,1],gammaCorrection:x?n:[1,1,1],colormap:C,colormapOffset:z,stretchType:d.stretchType,type:"stretch"}};h.generateShadedReliefWebGLParams=function(b,d,l){var C,z,I;let x=null,t=null;const e=this.lookup&&this.lookup.colormapLut;b.colorRamp&&e&&(x=e.indexedColormap,t=e.offset);d=G.calculateHillshadeParams({...b,isGCS:d,resolution:l});l=null==(C=W.unwrap(this.rasterInfo.statistics))?void 0:C[0];return{...d,
minValue:null!=(z=null==l?void 0:l.min)?z:0,maxValue:null!=(I=null==l?void 0:l.max)?I:8E3,hillshadeType:"traditional"===b.hillshadeType?0:1,type:"hillshade",colormap:x,colormapOffset:t}};h._generateVectorFieldWebGLParams=function(b){var d,l,C,z,I,x;const {style:t,inputUnit:e,outputUnit:p,visualVariables:E,symbolTileSize:v,flowRepresentation:q}=b;let n;var D=null!=(d=null==E?void 0:E.find(R=>"sizeInfo"===R.type))?d:{type:"sizeInfo",field:"Magnitude",maxDataValue:null==(l=this.rasterInfo.statistics)?
void 0:l[0].max,maxSize:.8*v,minDataValue:null==(C=this.rasterInfo.statistics)?void 0:C[0].min,minSize:.2*v};d=D?D.minDataValue:null==(z=this.rasterInfo.statistics)?void 0:z[0].min;l=D?D.maxDataValue:null==(I=this.rasterInfo.statistics)?void 0:I[0].max;I=W.isSome(D.maxSize)&&W.isSome(D.minSize)?[D.minSize/v,D.maxSize/v]:[.2,.8];if("wind_speed"===t||"simple_scalar"===t)I[0]=I[1]=(I[0]+I[1])/2;z=W.isSome(d)&&W.isSome(l)?[d,l]:null;if("classified_arrow"===t)if(W.isSome(d)&&W.isSome(l)&&W.isSome(D))for(n=
[],d=(D.maxDataValue-D.minDataValue)/5,l=0;6>l;l++)n.push(D.minDataValue+d*l);else n=[0,1E-6,3.5,7,10.5,14];D="flow_to"===q===("ocean_current_kn"===t||"ocean_current_m"===t)?0:Math.PI;d=null==E?void 0:E.find(R=>"rotationInfo"===R.type);b=(null==(x=this.rasterInfo.storageInfo)?0:x.tileInfo)&&"vector-uv"===this.rasterInfo.dataType?"geographic":(null==d?void 0:d.rotationType)||b.rotationType;return{breakValues:n,dataRange:z,inputUnit:e,outputUnit:p,symbolTileSize:v,symbolPercentRange:I,style:t||"single_arrow",
rotation:D,rotationType:b,type:"vectorField"}};return B}(Q.JSONSupport);H.__decorate([S.property({json:{write:!0}})],Q.prototype,"rendererJSON",void 0);H.__decorate([S.property({type:g,json:{write:!0}})],Q.prototype,"rasterInfo",void 0);H.__decorate([S.property({json:{write:!0}})],Q.prototype,"lookup",void 0);H.__decorate([S.property()],Q.prototype,"canRenderInWebGL",void 0);return Q=H.__decorate([F.subclass("esri.renderers.support.RasterSymbolizer")],Q)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports",
"../PixelBlock","./pixelUtils"],function(V,H,u){function Q(r){let {altitude:W,azimuth:S}=r;const {hillshadeType:U,pixelSizePower:P,pixelSizeFactor:O,scalingType:F,isGCS:g,resolution:w}=r;var G="multi-directional"===U?2*r.zFactor:r.zFactor;const {x:y,y:f}=w;r=G/(8*y);var a=G/(8*f);g&&.001<G&&(r/=111E3,a/=111E3);"adjusted"===F&&(g?(r=111E3*y,a=111E3*f,r=(G+r**P*O)/(8*r),a=(G+a**P*O)/(8*a)):(r=(G+y**P*O)/(8*y),a=(G+f**P*O)/(8*f)));var c=(90-W)*Math.PI/180;G=Math.cos(c);let m=(360-S+90)*Math.PI/180,k=
Math.sin(c)*Math.cos(m);c=Math.sin(c)*Math.sin(m);const A=[315,270,225,360,180,0],B=[60,60,60,60,60,90];var h=new Float32Array([3,5,3,2,1,4]);const b=h.reduce((I,x)=>I+x);h=h.map(I=>I/b);const d="multi-directional"===U?A.length:1,l=new Float32Array(6),C=new Float32Array(6),z=new Float32Array(6);if("multi-directional"===U)for(let I=0;I<d;I++)W=B[I],S=A[I],c=(90-W)*Math.PI/180,G=Math.cos(c),m=(360-S+90)*Math.PI/180,k=Math.sin(c)*Math.cos(m),c=Math.sin(c)*Math.sin(m),l[I]=G,C[I]=k,z[I]=c;else l.fill(G),
C.fill(k),z.fill(c);return{resolution:w,factor:[r,a],sinZcosA:k,sinZsinA:c,cosZ:G,sinZcosAs:C,sinZsinAs:z,cosZs:l,weights:h,hillshadeType:["traditional","multi-directional"].indexOf(U)}}V.calculateHillshadeParams=Q;V.hillshade=function(r,W){if(!u.isValidPixelBlock(r))return r;const {width:S,height:U,mask:P}=r,O=new Uint8Array(S*U);P&&O.set(P);const {factor:F,sinZcosA:g,sinZsinA:w,cosZ:G,sinZcosAs:y,sinZsinAs:f,cosZs:a,weights:c}=Q(W),[m,k]=F;var {hillshadeType:A}=W;const B=r.pixels[0];W=new Uint8Array(S*
U);let h;for(let t=1;t<U-1;t++){const e=t*S;for(let p=1;p<S-1;p++)if(P&&!P[e+p])W[e+p]=0;else{var b=8;if(P&&(b=P[e-S+p-1]+P[e-S+p]+P[e-S+p+1]+P[e+p-1]+P[e+p+1]+P[e+S+p-1]+P[e+S+p]+P[e+S+p+1],7>b)){W[e+p]=0;O[e+p]=0;continue}if(7===b){var d=P[e-S+p-1]?B[e-S+p-1]:B[e+p];var l=P[e-S+p]?B[e-S+p]:B[e+p];var C=P[e-S+p+1]?B[e-S+p+1]:B[e+p];b=P[e+p-1]?B[e+p-1]:B[e+p];h=P[e+p+1]?B[e+p+1]:B[e+p];var z=P[e+S+p-1]?B[e+S+p-1]:B[e+p];var I=P[e+S+p]?B[e+S+p]:B[e+p];var x=P[e+S+p+1]?B[e+S+p+1]:B[e+p]}else d=B[e-
S+p-1],l=B[e-S+p],C=B[e-S+p+1],b=B[e+p-1],h=B[e+p+1],z=B[e+S+p-1],I=B[e+S+p],x=B[e+S+p+1];b=(C+h+h+x-(d+b+b+z))*m;d=(z+I+I+x-(d+l+l+C))*k;l=Math.sqrt(1+b*b+d*d);C=0;if("traditional"===A)b=255*(G+w*d-g*b)/l,0>b&&(b=0),C=b;else for(z=f.length,I=0;I<z;I++)x=255*(a[I]+f[I]*d-y[I]*b)/l,0>x&&(x=0),C+=x*c[I];W[e+p]=C&255}}for(A=0;A<U;A++)W[A*S]=W[A*S+1],W[(A+1)*S-1]=W[(A+1)*S-2];for(A=1;A<S-1;A++)W[A]=W[A+S],W[A+(U-1)*S]=W[A+(U-2)*S];return new H({width:S,height:U,pixels:[W],mask:P?O:null,pixelType:"u8",
validPixelCount:r.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};V.tintHillshade=function(r,W,S,U){if(u.isValidPixelBlock(r)&&u.isValidPixelBlock(W)){var {min:P,max:O}=U;U=r.pixels[0];var {pixels:F,mask:g}=W;W=F[0];var w=255.00001/(O-P),G=new Uint8ClampedArray(W.length),y=new Uint8ClampedArray(W.length),f=new Uint8ClampedArray(W.length),a=S.length-1;for(let k=0;k<W.length;k++){if(g&&0===g[k])continue;var c=Math.floor((W[k]-P)*w);const [A,B]=S[0>c?0:c>a?a:c];var m=U[k];c=m*B;const h=c*(1-
Math.abs(A%2-1));m-=c;switch(Math.floor(A)){case 0:G[k]=c+m;y[k]=h+m;f[k]=m;break;case 1:G[k]=h+m;y[k]=c+m;f[k]=m;break;case 2:G[k]=m;y[k]=c+m;f[k]=h+m;break;case 3:G[k]=m;y[k]=h+m;f[k]=c+m;break;case 4:G[k]=h+m;y[k]=m;f[k]=c+m;break;case 5:case 6:G[k]=c+m,y[k]=m,f[k]=h+m}}r.pixels=[G,y,f];r.updateStatistics()}};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/rest/imageService":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../geometry ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ./support/ImageAngleResult ./support/ImageIdentifyResult ./support/ImageSampleResult ./support/ImagePixelLocationResult ../geometry/SpatialReference".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g){function w(b){const d=null==b?void 0:b.time;if(d&&(null!=d.start||null!=d.end)){const l=[];null!=d.start&&l.push(d.start);null!=d.end&&-1===l.indexOf(d.end)&&l.push(d.end);b.time=l.join(",")}}function G(b,d,l){return y.apply(this,arguments)}function y(){y=H._asyncToGenerator(function*(b,d,l){b=S.parseUrl(b);var C=yield W.normalizeCentralMeridian(d.geometry?[d.geometry]:[]);d=d.toJSON();w(d);C=C&&C[0];r.isSome(C)&&(d.geometry=C.toJSON());b=S.encode({...b.query,f:"json",
...d});return S.asValidOptions(b,l)});return y.apply(this,arguments)}function f(){f=H._asyncToGenerator(function*(b,d,l){var C,z=d.toJSON();r.isSome(z.angleName)&&(z.angleName=z.angleName.join(","));r.isSome(d.point)&&null!=(C=d.point.spatialReference)&&C.imageCoordinateSystem&&(z.point.spatialReference=B(d.point.spatialReference));r.isSome(d.spatialReference)&&d.spatialReference.imageCoordinateSystem&&(z.spatialReference=h(d.spatialReference));b=S.parseUrl(b);z=S.encode({...b.query,f:"json",...z});
l=S.asValidOptions(z,l);({data:l}=yield Q(`${b.path}/computeAngles`,l));l.spatialReference=l.spatialReference?null!=l.spatialReference.geodataXform?new g({wkid:0,imageCoordinateSystem:l.spatialReference}):g.fromJSON(l.spatialReference):null;"NaN"===l.north&&(l.north=null);"NaN"===l.up&&(l.up=null);return new U(l)});return f.apply(this,arguments)}function a(){a=H._asyncToGenerator(function*(b,d,l){var C=d.toJSON();({geometries:d}=d);for(let I=0;I<d.length;I++){var z;null!=(z=d[I].spatialReference)&&
z.imageCoordinateSystem&&(C.geometries.geometries[I].spatialReference=B(d[I].spatialReference))}b=S.parseUrl(b);C=S.encode({...b.query,f:"json",...C});l=S.asValidOptions(C,l);({data:l}=yield Q(`${b.path}/computePixelLocation`,l));return F.fromJSON(l)});return a.apply(this,arguments)}function c(){c=H._asyncToGenerator(function*(b,d,l){d=yield G(b,d,l);b=S.parseUrl(b);({data:b}=yield Q(`${b.path}/computeStatisticsHistograms`,d));({statistics:d}=b);null!=d&&d.length&&d.forEach(C=>{C.avg=C.mean;C.stddev=
C.standardDeviation});return{statistics:d,histograms:b.histograms}});return c.apply(this,arguments)}function m(){m=H._asyncToGenerator(function*(b,d,l){d=yield G(b,d,l);b=S.parseUrl(b);({data:b}=yield Q(`${b.path}/computeHistograms`,d));return{histograms:b.histograms}});return m.apply(this,arguments)}function k(){k=H._asyncToGenerator(function*(b,d,l){var C,z,I=d.toJSON();w(I);null!=(C=I.outFields)&&C.length&&(I.outFields=I.outFields.join(","));d=yield W.normalizeCentralMeridian(d.geometry);d=null==
d?void 0:d[0];r.isSome(d)&&(I.geometry=d.toJSON());b=S.parseUrl(b);I=S.encode({...b.query,f:"json",...I});l=S.asValidOptions(I,l);({data:l}=yield Q(`${b.path}/getSamples`,l));l=null==l?void 0:null==(z=l.samples)?void 0:z.map(x=>{const t="NaN"===x.value||""===x.value?null:x.value.split(" ").map(e=>Number(e));return{...x,pixelValue:t}});return O.fromJSON({samples:l})});return k.apply(this,arguments)}function A(){A=H._asyncToGenerator(function*(b,d,l){const C=S.parseUrl(b);return W.normalizeCentralMeridian(d.geometry?
[d.geometry]:[]).then(z=>{var I=d.toJSON();z=z&&z[0];r.isSome(z)&&(I.geometry=JSON.stringify(z.toJSON()));I=S.encode({...C.query,f:"json",...I});I=S.asValidOptions(I,l);return Q(C.path+"/identify",I)}).then(z=>P.fromJSON(z.data))});return A.apply(this,arguments)}function B(b){const {imageCoordinateSystem:d}=b;if(d){const {id:l,referenceServiceName:C}=d;return null!=l?C?{icsid:l,icsns:C}:{icsid:l}:{ics:d}}return b.toJSON()}function h(b,d){b=B(b);const {icsid:l,icsns:C,wkid:z}=b;return null!=l?null==
C||null!=d&&d.toLowerCase().includes("/"+C.toLowerCase()+"/")?`0:${l}`:JSON.stringify(b):z?z.toString():JSON.stringify(b)}V.computeAngles=function(b,d,l){return f.apply(this,arguments)};V.computeHistograms=function(b,d,l){return m.apply(this,arguments)};V.computePixelSpaceLocations=function(b,d,l){return a.apply(this,arguments)};V.computeStatisticsHistograms=function(b,d,l){return c.apply(this,arguments)};V.getImageSpatialReferenceJSON=B;V.getImageSpatialReferenceQueryParameter=h;V.getSamples=function(b,
d,l){return k.apply(this,arguments)};V.identify=function(b,d,l){return A.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0})})},"esri/rest/support/ImageAngleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(V,H,u,Q,r,W,S,U,P,O){u=function(F){function g(){var w=F.apply(this,arguments)||this;w.north=null;w.up=null;w.spatialReference=null;return w}V._inheritsLoose(g,F);return g}(Q.JSONSupport);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"north",void 0);H.__decorate([r.property({type:Number,json:{write:!0}})],u.prototype,"up",void 0);H.__decorate([r.property({type:O,json:{write:!0}})],u.prototype,"spatialReference",void 0);return u=H.__decorate([P.subclass("esri.rest.support.ImageAngleResult")],
u)})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),function(V,H,u,Q,r,W,S,U,P,O){u=function(F){function g(){var w=F.apply(this,arguments)||this;w.catalogItemVisibilities=null;w.catalogItems=
null;w.location=null;w.name=null;w.objectId=null;w.processedValues=null;w.properties=null;w.value=null;return w}V._inheritsLoose(g,F);return g}(u.JSONSupport);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"catalogItemVisibilities",void 0);H.__decorate([Q.property({type:O,json:{write:!0}})],u.prototype,"catalogItems",void 0);H.__decorate([Q.property({type:P,json:{write:!0}})],u.prototype,"location",void 0);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"name",void 0);H.__decorate([Q.property({json:{write:!0}})],
u.prototype,"objectId",void 0);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"processedValues",void 0);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"properties",void 0);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"value",void 0);return u=H.__decorate([U.subclass("esri.rest.support.ImageIdentifyResult")],u)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),
function(V,H,u,Q,r,W,S,U,P){u=function(O){function F(){var g=O.apply(this,arguments)||this;g.samples=null;return g}V._inheritsLoose(F,O);return F}(u.JSONSupport);H.__decorate([Q.property({type:[P],json:{write:!0}})],u.prototype,"samples",void 0);return u=H.__decorate([U.subclass("esri.rest.support.ImageSampleResult")],u)})},"esri/rest/support/ImageSample":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(V,H,u,Q,r,W,S,U,P){u=function(O){function F(){var g=O.apply(this,arguments)||this;g.attributes=null;g.location=null;g.locationId=null;g.rasterId=null;g.resolution=null;g.pixelValue=null;return g}V._inheritsLoose(F,O);return F}(u.JSONSupport);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"attributes",void 0);H.__decorate([Q.property({type:P,json:{write:!0}})],u.prototype,"location",void 0);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"locationId",void 0);H.__decorate([Q.property({json:{write:!0}})],
u.prototype,"rasterId",void 0);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"resolution",void 0);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"pixelValue",void 0);return u=H.__decorate([U.subclass("esri.rest.support.ImageSample")],u)})},"esri/rest/support/ImagePixelLocationResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(V,H,u,Q,r,W,S,U){u=function(P){function O(){var F=P.apply(this,arguments)||this;F.geometries=null;return F}V._inheritsLoose(O,P);return O}(u.JSONSupport);H.__decorate([Q.property({json:{write:!0}})],u.prototype,"geometries",void 0);return u=H.__decorate([U.subclass("esri.rest.support.ImagePixelLocationResult")],u)})},"esri/rest/support/ImageAngleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(V,H,u,Q,r,W,S,U,P,O){var F;u=F=function(g){function w(){var G=g.apply(this,arguments)||this;G.angleNames=null;G.point=null;G.spatialReference=null;G.rasterId=null;return G}V._inheritsLoose(w,g);w.prototype.clone=function(){return new F(r.clone({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))};return w}(Q.JSONSupport);H.__decorate([W.property({type:[String],json:{name:"angleName",write:!0}})],u.prototype,"angleNames",void 0);H.__decorate([W.property({type:P,
json:{write:!0}})],u.prototype,"point",void 0);H.__decorate([W.property({type:O,json:{write:!0}})],u.prototype,"spatialReference",void 0);H.__decorate([W.property({type:S.Integer,json:{write:!0}})],u.prototype,"rasterId",void 0);return u=F=H.__decorate([U.subclass("esri.rest.support.ImageAngleParameters")],u)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w,G){var y;r=y=function(f){function a(){var m=f.apply(this,arguments)||this;m.geometry=null;m.mosaicRule=null;m.renderingRule=null;m.pixelSize=null;m.raster=void 0;m.timeExtent=null;return m}V._inheritsLoose(a,f);var c=a.prototype;c.writeGeometry=function(m,k,A){null!=m&&(k.geometryType=F.getJsonType(m),k[A]=m.toJSON())};c.clone=function(){return new y(W.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};return a}(r.JSONSupport);H.__decorate([S.property({types:u.geometryTypes,json:{read:F.fromJSON}})],r.prototype,"geometry",void 0);H.__decorate([O.writer("geometry")],r.prototype,"writeGeometry",null);H.__decorate([S.property({type:g,json:{write:!0}})],r.prototype,"mosaicRule",void 0);H.__decorate([S.property({type:w,json:{write:!0}})],r.prototype,"renderingRule",void 0);H.__decorate([S.property({type:G,json:{write:!0}})],r.prototype,"pixelSize",void 0);
H.__decorate([S.property({json:{write:!0}})],r.prototype,"raster",void 0);H.__decorate([S.property({type:Q,json:{read:{source:"time"},write:{target:"time"}}})],r.prototype,"timeExtent",void 0);return r=y=H.__decorate([P.subclass("esri.rest.support.ImageHistogramParameters")],r)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w,G){var y;Q=y=function(f){function a(){var m=f.apply(this,arguments)||this;m.geometry=null;m.renderingRules=null;m.pixelSize=null;m.returnGeometry=!0;m.returnCatalogItems=!0;m.returnPixelValues=!0;m.maxItemCount=null;m.timeExtent=null;m.raster=void 0;m.viewId=void 0;return m}V._inheritsLoose(a,f);var c=a.prototype;c.writeGeometry=function(m,k,A){null!=m&&(k.geometryType=g.getJsonType(m),k[A]=JSON.stringify(m.toJSON()))};c.writeMosaicRule=function(m,k,A){null!=m&&
(k[A]=JSON.stringify(m.toJSON()))};c.writeRenderingRule=function(m,k,A){null!=m&&(k[A]=JSON.stringify(m.toJSON()))};c.writeRenderingRules=function(m,k,A){null!=m&&(k[A]=JSON.stringify(m.map(B=>B.toJSON())))};c.writePixelSize=function(m,k,A){null!=m&&(k[A]=JSON.stringify(m))};c.writeTimeExtent=function(m,k,A){if(null!=m){const B=W.isSome(m.start)?m.start.getTime():null;m=W.isSome(m.end)?m.end.getTime():null;k[A]=null!=B?null!=m?`${B},${m}`:`${B}`:null}};c.clone=function(){return new y(r.clone({geometry:this.geometry,
mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};V._createClass(a,[{key:"mosaicRule",set:function(m){m&&m.mosaicMethod&&(m=w.fromJSON({...m.toJSON(),mosaicMethod:m.mosaicMethod,mosaicOperation:m.mosaicOperation}));this._set("mosaicRule",m)}},{key:"renderingRule",
set:function(m){m&&m.rasterFunction&&(m=G.fromJSON({...m.toJSON(),rasterFunction:m.rasterFunction,rasterFunctionArguments:m.rasterFunctionArguments}));this._set("renderingRule",m)}}]);return a}(Q.JSONSupport);H.__decorate([S.property({json:{write:!0}})],Q.prototype,"geometry",void 0);H.__decorate([O.writer("geometry")],Q.prototype,"writeGeometry",null);H.__decorate([S.property({type:w,json:{write:!0}})],Q.prototype,"mosaicRule",null);H.__decorate([O.writer("mosaicRule")],Q.prototype,"writeMosaicRule",
null);H.__decorate([S.property({type:G,json:{write:!0}})],Q.prototype,"renderingRule",null);H.__decorate([O.writer("renderingRule")],Q.prototype,"writeRenderingRule",null);H.__decorate([S.property({type:[G],json:{write:!0}})],Q.prototype,"renderingRules",void 0);H.__decorate([O.writer("renderingRules")],Q.prototype,"writeRenderingRules",null);H.__decorate([S.property({type:F,json:{write:!0}})],Q.prototype,"pixelSize",void 0);H.__decorate([O.writer("pixelSize")],Q.prototype,"writePixelSize",null);
H.__decorate([S.property({type:Boolean,json:{write:!0}})],Q.prototype,"returnGeometry",void 0);H.__decorate([S.property({type:Boolean,json:{write:!0}})],Q.prototype,"returnCatalogItems",void 0);H.__decorate([S.property({type:Boolean,json:{write:!0}})],Q.prototype,"returnPixelValues",void 0);H.__decorate([S.property({type:Number,json:{write:!0}})],Q.prototype,"maxItemCount",void 0);H.__decorate([S.property({type:u,json:{write:{target:"time"}}})],Q.prototype,"timeExtent",void 0);H.__decorate([O.writer("timeExtent")],
Q.prototype,"writeTimeExtent",null);H.__decorate([S.property({json:{write:!0}})],Q.prototype,"raster",void 0);H.__decorate([S.property({json:{write:!0}})],Q.prototype,"viewId",void 0);return Q=y=H.__decorate([P.subclass("esri.rest.support.ImageIdentifyParameters")],Q)})},"esri/rest/support/ImagePixelLocationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F){var g;u=g=function(w){function G(){var f=w.apply(this,arguments)||this;f.geometries=null;f.rasterId=null;return f}V._inheritsLoose(G,w);var y=G.prototype;y.writeGeometry=function(f,a,c){a.geometries={geometryType:"esriGeometryPoint",geometries:f.map(m=>m.toJSON())}};y.clone=function(){return new g({geometries:this.geometries.map(f=>f.clone()),rasterId:this.rasterId})};return G}(Q.JSONSupport);H.__decorate([r.property({type:[F],json:{write:!0}})],u.prototype,"geometries",
void 0);H.__decorate([O.writer("geometries")],u.prototype,"writeGeometry",null);H.__decorate([r.property({type:U.Integer,json:{write:!0}})],u.prototype,"rasterId",void 0);return u=g=H.__decorate([P.subclass("esri.rest.support.ImagePixelLocationParameters")],u)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Point ../../geometry/Multipoint".split(" "),
function(V,H,u,Q,r,W,S,U,P,O,F,g,w,G,y){var f;r=f=function(a){function c(){var k=a.apply(this,arguments)||this;k.geometry=null;k.interpolation="nearest";k.mosaicRule=null;k.outFields=null;k.pixelSize=null;k.returnFirstValueOnly=!0;k.sampleDistance=null;k.sampleCount=null;k.sliceId=null;k.timeExtent=null;return k}V._inheritsLoose(c,a);var m=c.prototype;m.writeGeometry=function(k,A,B){null!=k&&(A.geometryType=F.getJsonType(k),A[B]=k.toJSON())};m.clone=function(){return new f(W.clone({geometry:this.geometry,
locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))};V._createClass(c,[{key:"locations",set:function(k){if(null!=k&&k.length){const A=new y({spatialReference:k[0].spatialReference});A.points=k.map(B=>[B.x,B.y]);this._set("locations",k);this.geometry=
A}}}]);return c}(r.JSONSupport);H.__decorate([S.property({types:u.geometryTypes,json:{read:F.fromJSON}})],r.prototype,"geometry",void 0);H.__decorate([O.writer("geometry")],r.prototype,"writeGeometry",null);H.__decorate([S.property({type:String,json:{type:w.interpolationKebab.jsonValues,read:w.interpolationKebab.read,write:w.interpolationKebab.write}})],r.prototype,"interpolation",void 0);H.__decorate([S.property({type:g,json:{write:!0}})],r.prototype,"mosaicRule",void 0);H.__decorate([S.property({type:[String],
json:{write:!0}})],r.prototype,"outFields",void 0);H.__decorate([S.property({type:G,json:{write:!0}})],r.prototype,"pixelSize",void 0);H.__decorate([S.property({type:String,json:{write:!0}})],r.prototype,"raster",void 0);H.__decorate([S.property({type:Boolean,json:{write:!0}})],r.prototype,"returnFirstValueOnly",void 0);H.__decorate([S.property({type:Number,json:{write:!0}})],r.prototype,"sampleDistance",void 0);H.__decorate([S.property({type:Number,json:{write:!0}})],r.prototype,"sampleCount",void 0);
H.__decorate([S.property({type:Number,json:{write:!0}})],r.prototype,"sliceId",void 0);H.__decorate([S.property({type:Q,json:{read:{source:"time"},write:{target:"time"}}})],r.prototype,"timeExtent",void 0);return r=f=H.__decorate([P.subclass("esri.rest.support.ImageSampleParameters")],r)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(V,H,u,Q,r,W,S,U,P,O){function F(){F=H._asyncToGenerator(function*(h,b,d){const l=performance.now();var C=g(h,b);const z=performance.now();C=G(h,C,b.width,b.height);b=performance.now();var I=f(C,!0);C=performance.now();I=a(I);const x=performance.now();h.profile&&B.info("createStreamlinesMesh profile",{"_createFlowFieldFromData()":Math.round(z-l),"_getStreamlines()":Math.round(b-z),"createAnimatedLinesData()":Math.round(C-b),"createLinesMesh()":Math.round(x-C),"Total elapsed time":Math.round(x-
l)});yield Promise.resolve();S.throwIfAborted(d);return I});return F.apply(this,arguments)}function g(h,b){const d=y(b.data,b.width,b.height,h.smoothing);return h.interpolate?(l,C)=>{const z=Math.floor(l),I=Math.floor(C);if(0>z||z>=b.width||0>I||I>=b.height)return[0,0];l-=z;C-=I;const x=z<b.width-1?z+1:z,t=I<b.height-1?I+1:I;return[(d[2*(I*b.width+z)]*(1-C)+d[2*(t*b.width+z)]*C)*(1-l)+(d[2*(I*b.width+x)]*(1-C)+d[2*(t*b.width+x)]*C)*l,(d[2*(I*b.width+z)+1]*(1-C)+d[2*(t*b.width+z)+1]*C)*(1-l)+(d[2*
(I*b.width+x)+1]*(1-C)+d[2*(t*b.width+x)+1]*C)*l]}:(l,C)=>{l=Math.round(l);C=Math.round(C);return 0>l||l>=b.width||0>C||C>=b.height?[0,0]:[d[2*(C*b.width+l)],d[2*(C*b.width+l)+1]]}}function w(h,b,d,l,C,z,I,x,t){const e=[];let p=0;e.push({x:d,y:l,t:p});for(let n=0;n<h.verticesPerLine;n++){let [D,R]=b(d,l);D*=h.velocityScale;R*=h.velocityScale;var E=Math.sqrt(D*D+R*R);if(E<h.minSpeedThreshold)break;const N=D/E,T=R/E;d+=N*h.segmentLength;l+=T*h.segmentLength;p+=h.segmentLength/E;if(Math.acos(N*v+T*q)>
h.maxTurnAngle)break;if(h.mergeLines){var v=Math.round(d*t);var q=Math.round(l*t);if(0>v||v>I-1||0>q||q>x-1)break;E=z[q*I+v];if(-1!==E&&E!==C)break;z[q*I+v]=C}e.push({x:d,y:l,t:p});v=N;q=T}return e}function G(h,b,d,l){const C=[],z=new U,I=1/Math.max(h.lineCollisionWidth,1),x=Math.round(d*I),t=Math.round(l*I),e=new Int32Array(x*t);for(var p=0;p<e.length;p++)e[p]=-1;p=[];for(let E=0;E<l;E+=h.lineSpacing)for(let v=0;v<d;v+=h.lineSpacing)p.push({x:v,y:E,sort:z.getFloat()});p.sort((E,v)=>E.sort-v.sort);
for(const {x:E,y:v}of p)z.getFloat()<h.density&&(d=w(h,b,E,v,C.length,e,x,t,I),2>d.length||C.push(d));return C}function y(h,b,d,l){if(0===l)return h;const C=Math.round(3*l),z=Array(2*C+1);var I=0;for(var x=-C;x<=C;x++){var t=Math.exp(-x*x/(l*l));z[x+C]=t;I+=t}for(l=-C;l<=C;l++)z[l+C]/=I;I=new Float32Array(h.length);for(l=0;l<d;l++)for(x=0;x<b;x++){var e=t=0;for(var p=-C;p<=C;p++)if(!(0>x+p||x+p>=b)){var E=z[p+C];t+=E*h[2*(l*b+(x+p))];e+=E*h[2*(l*b+(x+p))+1]}I[2*(l*b+x)]=t;I[2*(l*b+x)+1]=e}h=new Float32Array(h.length);
for(l=0;l<b;l++)for(x=0;x<d;x++){e=t=0;for(p=-C;p<=C;p++)0>x+p||x+p>=d||(E=z[p+C],t+=E*I[2*((x+p)*b+l)],e+=E*I[2*((x+p)*b+l)+1]);h[2*(x*b+l)]=t;h[2*(x*b+l)+1]=e}return h}function f(h,b){const d=new U;var l=h.reduce((x,t)=>x+t.length,0);l=new Float32Array(3*l);const C=Array(h.length);let z=0,I=0;for(const x of h){h=z;for(const t of x)l[3*z]=t.x,l[3*z+1]=t.y,l[3*z+2]=t.t,z++;C[I++]={startVertex:h,numberOfVertices:x.length,totalTime:x[x.length-1].t,timeSeed:b?d.getFloat():0}}return{lineVertices:l,lineDescriptors:C}}
function a(h,b=10){function d(v,q,n,D,R,N,T){const Y=8*t;let X=0;x[Y+X++]=v;x[Y+X++]=q;x[Y+X++]=1;x[Y+X++]=n;x[Y+X++]=N;x[Y+X++]=T;x[Y+X++]=D;x[Y+X++]=R;t++;x[Y+X++]=v;x[Y+X++]=q;x[Y+X++]=-1;x[Y+X++]=n;x[Y+X++]=N;x[Y+X++]=T;x[Y+X++]=-D;x[Y+X++]=-R;t++}const {lineVertices:l,lineDescriptors:C}=h;var z=h=0;for(var I of C)h+=2*I.numberOfVertices,z+=6*(I.numberOfVertices-1);const x=new Float32Array(8*h);I=new Uint32Array(z);let t=0;h=0;for(const v of C){const {totalTime:q,timeSeed:n}=v;let D=z=null,R=
null;var e=null,p=null;for(let N=0;N<v.numberOfVertices;N++){const T=l[3*(v.startVertex+N)],Y=l[3*(v.startVertex+N)+1],X=l[3*(v.startVertex+N)+2];let ba=null,K=null;var E=null;let J=null;0<N&&(ba=T-z,K=Y-D,E=Math.sqrt(ba*ba+K*K),ba/=E,K/=E,1<N?(e=ba+e,p=K+p,E=Math.sqrt(e*e+p*p),e/=E,p/=E,E=Math.min(1/(e*ba+p*K),b),e*=E,p*=E,E=-p,J=e):(E=-K,J=ba),null!==E&&null!==J&&(d(z,D,R,E,J,q,n),I[h++]=t-2,I[h++]=t,I[h++]=t-1,I[h++]=t,I[h++]=t+1,I[h++]=t-1));z=T;D=Y;R=X;e=ba;p=K}d(z,D,R,-p,e,q,n)}return{vertexData:x,
indexData:I}}function c(h,b){const d=b.pixels,{width:l,height:C}=b;b=new Float32Array(l*C*2);if("vector-uv"===h)for(h=0;h<l*C;h++)b[2*h]=d[0][h],b[2*h+1]=-d[1][h];else if("vector-magdir"===h)for(h=0;h<l*C;h++){const z=d[0][h],I=r.deg2rad(d[1][h]),x=Math.sin(I-Math.PI/2);b[2*h]=Math.cos(I-Math.PI/2)*z;b[2*h+1]=x*z}return{data:b,width:l,height:C}}function m(){m=H._asyncToGenerator(function*(h,b,d,l,C){var z=P.getInfo(b.spatialReference);if(!z)return k(h,b,d,l,C);const [I,x]=z.valid;z=Math.ceil(b.width/
(x-I));const t=b.width/z,e=Math.round(d/z);let p=b.xmin;const E=[];for(let v=0;v<z;v++){const q=new O({xmin:p,xmax:p+t,ymin:b.ymin,ymax:b.ymax,spatialReference:b.spatialReference});E.push(k(h,q,e,l,C));p+=t}b=yield Promise.all(E);l={data:new Float32Array(d*l*2),width:d,height:l};h=0;for(const v of b){for(b=0;b<v.height;b++)for(C=0;C<v.width;C++)h+C>=d||(l.data[2*(b*d+h+C)]=v.data[2*(b*v.width+C)],l.data[2*(b*d+h+C)+1]=v.data[2*(b*v.width+C)+1]);h+=v.width}return l});return m.apply(this,arguments)}
function k(h,b,d,l,C){return A.apply(this,arguments)}function A(){A=H._asyncToGenerator(function*(h,b,d,l,C){if("imagery"===h.type){yield h.load({signal:C});var z=h.rasterInfo.dataType;h=yield h.fetchImage(b,d,l,{signal:C});return!h||W.isNone(h.pixelData)||W.isNone(h.pixelData.pixelBlock)?{data:new Float32Array(d*l*2),width:d,height:l}:c(z,h.pixelData.pixelBlock)}yield h.load({signal:C});z=h.rasterInfo.dataType;h=yield h.fetchPixels(b,d,l,{signal:C});return!h||W.isNone(h.pixelBlock)?{data:new Float32Array(d*
l*2),width:d,height:l}:c(z,h.pixelBlock)});return A.apply(this,arguments)}const B=Q.getLogger("esri.views.2d.engine.flow.dataUtils");V.createAnimatedLinesData=f;V.createLinesMesh=a;V.createStreamlinesMesh=function(h,b,d){return F.apply(this,arguments)};V.fetchPart=k;V.loadImagery=function(h,b,d,l,C){return m.apply(this,arguments)};Object.defineProperty(V,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ../support/popupUtils".split(" "),function(V,
H,u,Q,r,W,S,U,P,O,F,g,w,G,y,f,a,c,m,k,A,B,h,b){r=function(d){function l(...z){z=d.call(this,...z)||this;z.legendEnabled=!0;z.isReference=null;z.operationalLayerType="ArcGISImageServiceLayer";z.popupEnabled=!0;z.popupTemplate=null;z.type="imagery";return z}V._inheritsLoose(l,d);var C=l.prototype;C.normalizeCtorArgs=function(z,I){return"string"===typeof z?{url:z,...I}:z};C.load=function(z){const I=Q.isSome(z)?z.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
z).catch(W.throwIfAbortError).then(()=>this._fetchService(I)));return Promise.resolve(this)};C.writeOperationalLayerType=function(z,I,x){var t;z="vector-field"===(null==(t=this.renderer)?void 0:t.type);I[x]=z?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};C.createPopupTemplate=function(z){const I=this.rasterFields,x=this.title,t=new Set;var e=!1;let p=!1;this.capabilities&&(p=(e=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length)&&("esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));const E=new Set;e&&(E.add("raster.itempixelvalue"),p&&E.add("raster.magnitude").add("raster.direction"));for(const v of I)e=v.name.toLowerCase(),E.has(e)||-1<e.indexOf("raster.servicepixelvalue.")||t.add(v.name);return b.createPopupTemplate({fields:I,title:x},{...z,visibleFieldNames:t})};C.queryFeatures=function(z,I){return this.queryRasters(z,I).then(x=>{if(null!=x&&x.features)for(const t of x.features)t.layer=
t.sourceLayer=this;return x})};C.queryFeatureCount=function(z,I){return this.queryRasterCount(z,I)};C.redraw=function(){this.emit("redraw")};V._createClass(l,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);return l}(f.BlendLayer(B.TemporalLayer(k.RefreshableLayer(A.ScaleRangeLayer(c.OperationalLayer(m.PortalLayer(G.ArcGISImageService(a.CustomParametersMixin(y.ArcGISService(r.MultiOriginJSONMixin(w)))))))))));H.__decorate([S.property(h.legendEnabled)],r.prototype,
"legendEnabled",void 0);H.__decorate([S.property({type:["show","hide"]})],r.prototype,"listMode",void 0);H.__decorate([S.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],r.prototype,"isReference",void 0);H.__decorate([S.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],r.prototype,"operationalLayerType",void 0);H.__decorate([g.writer("web-map",
"operationalLayerType")],r.prototype,"writeOperationalLayerType",null);H.__decorate([S.property(h.popupEnabled)],r.prototype,"popupEnabled",void 0);H.__decorate([S.property({type:u,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],r.prototype,"popupTemplate",void 0);H.__decorate([S.property({readOnly:!0})],r.prototype,"defaultPopupTemplate",null);H.__decorate([S.property({readOnly:!0,json:{read:!1}})],r.prototype,"type",void 0);return r=H.__decorate([F.subclass("esri.layers.ImageryLayer")],
r)});