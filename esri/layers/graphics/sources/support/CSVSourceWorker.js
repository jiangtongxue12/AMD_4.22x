// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(k,d,Y){function W(y){y||(y=Y.getLocale());let E=y in t;if(!E){const e=y.split("-");1<e.length&&e[0]in t&&(y=e[0],E=!0);E||(y="en")}const [n,v,a="#,##0.###"]=t[y];return{decimal:n,group:v,pattern:a}}function u(y,E,n){n=n||{};!0===n.places&&(n.places=0);Infinity===n.places&&(n.places=6);E=E.split(".");var v="string"===typeof n.places&&n.places.indexOf(","),a=n.places;v?a=n.places.substring(v+1):0<=
a||(a=(E[1]||[]).length);0>n.round||(y=Number(y.toFixed(Number(a))));y=String(Math.abs(y)).split(".");const e=y[1]||"";E[1]||n.places?(v&&(n.places=n.places.substring(0,v)),v=void 0!==n.places?n.places:E[1]&&E[1].lastIndexOf("0")+1,v>e.length&&(y[1]=e.padEnd(Number(v),"0")),a<e.length&&(y[1]=e.substr(0,Number(a)))):y[1]&&y.pop();a=E[0].replace(",","");v=a.indexOf("0");-1!==v&&(v=a.length-v,v>y[0].length&&(y[0]=y[0].padStart(v,"0")),-1===a.indexOf("#")&&(y[0]=y[0].substr(y[0].length-v)));a=E[0].lastIndexOf(",");
let l,B;-1!==a&&(l=E[0].length-a-1,E=E[0].substr(0,a),a=E.lastIndexOf(","),-1!==a&&(B=E.length-a-1));E=[];for(a=y[0];a;)v=a.length-l,E.push(0<v?a.substr(v):a),a=0<v?a.slice(0,v):"",B&&(l=B,B=void 0);y[0]=E.reverse().join(n.group||",");return y.join(n.decimal||".")}function F(y){y=y||{};var E=W(y.locale);const n=y.pattern||E.pattern,v=E.group,a=E.decimal;let e=1;if(-1!==n.indexOf("%"))e/=100;else if(-1!==n.indexOf("\u2030"))e/=1E3;else if(-1!==n.indexOf("\u00a4"))throw Error("currency notation not supported");
E=n.split(";");1===E.length&&E.push("-"+E[0]);return{regexp:G(E,function(l){l="(?:"+d.escapeRegExpString(l,".")+")";return l.replace(r,function(B){const m={signed:!1,separator:y.strict?v:[v,""],fractional:y.fractional,decimal:a,exponent:!1};B=B.split(".");let H=y.places;1===B.length&&1!==e&&(B[1]="###");1===B.length||0===H?m.fractional=!1:(void 0===H&&(H=y.pattern?B[1].lastIndexOf("0")+1:Infinity),H&&null==y.fractional&&(m.fractional=!0),!y.places&&H<B[1].length&&(H+=","+B[1].length),m.places=H);
B=B[0].split(",");1<B.length&&(m.groupSize=B.pop().length,1<B.length&&(m.groupSize2=B.pop().length));return"("+A(m)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:v,decimal:a,factor:e}}function A(y){y=y||{};"places"in y||(y.places=Infinity);"string"!==typeof y.decimal&&(y.decimal=".");"fractional"in y&&!/^0/.test(String(y.places))||(y.fractional=[!0,!1]);"exponent"in y||(y.exponent=[!0,!1]);"eSigned"in y||(y.eSigned=[!0,!1]);var E=w(y);const n=G(y.fractional,function(a){let e="";a&&0!==y.places&&
(e="\\"+y.decimal,e=Infinity===y.places?"(?:"+e+"\\d+)?":e+("\\d{"+y.places+"}"));return e},!0),v=G(y.exponent,function(a){return a?"([eE]"+w({signed:y.eSigned})+")":""});E+=n;n&&(E="(?:(?:"+E+")|(?:"+n+"))");return E+v}function w(y){y=y||{};"signed"in y||(y.signed=[!0,!1]);"separator"in y?"groupSize"in y||(y.groupSize=3):y.separator="";const E=G(y.signed,function(v){return v?"[-+]":""},!0),n=G(y.separator,function(v){if(!v)return"(?:\\d+)";v=d.escapeRegExpString(v);" "===v?v="\\s":"\u00a0"===v&&
(v="\\s\\xa0");const a=y.groupSize,e=y.groupSize2;return e?(v="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+v+"]\\d{"+e+"})*["+v+"]\\d{"+a+"})",0<a-e?"(?:"+v+"|(?:0|[1-9]\\d{0,"+(a-1)+"}))":v):"(?:0|[1-9]\\d{0,"+(a-1)+"}(?:["+v+"]\\d{"+a+"})*)"},!0);return E+n}const t={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],
"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},r=/[#0,]*[#0](?:\.0*#*)?/,G=function(y,
E,n){if(!(y instanceof Array))return E(y);const v=[];for(let a=0;a<y.length;a++)v.push(E(y[a]));y=v.join("|");return"("+(n?"?:":"")+y+")"};k._parseInfo=F;k.format=function(y,E){E={...E};var n=W(E.locale);E.customs=n;var v=E.pattern||n.pattern;if(isNaN(y)||Infinity===Math.abs(y))return null;{E=E||{};n=E.customs.group;const e=E.customs.decimal;v=v.split(";");var a=v[0];v=v[0>y?1:0]||"-"+a;if(-1!==v.indexOf("%"))y*=100;else if(-1!==v.indexOf("\u2030"))y*=1E3;else{if(-1!==v.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==v.indexOf("E"))throw Error("exponential notation not supported");}const l=r;a=a.match(l);if(!a)throw Error("unable to find a number expression in pattern: "+v);!1===E.fractional&&(E.places=0);y=v.replace(l,u(y,a[0],{decimal:e,group:n,places:E.places,round:E.round}))}return y};k.getCustoms=W;k.parse=function(y,E){E=F(E);y=(new RegExp("^"+E.regexp+"$")).exec(y);if(!y)return NaN;let n=y[1];if(!y[1]){if(!y[2])return NaN;n=y[2];E.factor*=-1}n=n.replace(new RegExp("["+E.group+"\\s\\xa0]","g"),"").replace(E.decimal,
".");return Number(n)*E.factor};k.regexp=function(y){return F(y).regexp};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/intl/locale":function(){define(["exports"],function(k){function d(){var v,a;return null!=(v=null!=G?G:null==(a=globalThis.navigator)?void 0:a.language)?v:"en"}function Y(){void 0===r&&(r=d());return r}function W(v=Y()){v=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(v);return null==v?void 0:v[1].toLowerCase()}function u(){var v;const a=null!=(v=t)?v:d();r!==a&&(r=a,[...n].forEach(e=>
{e.call(null,a)}),[...E].forEach(e=>{e.call(null,a)}))}var F,A,w;let t=void 0,r=void 0;const G=null!=(F=null==(A=globalThis.esriConfig)?void 0:A.locale)?F:null==(w=globalThis.dojoConfig)?void 0:w.locale,y={he:!0,ar:!0},E=[],n=[];null==globalThis.addEventListener?void 0:globalThis.addEventListener("languagechange",u);k.beforeLocaleChange=function(v){n.push(v);return{remove(){E.splice(n.indexOf(v),1)}}};k.getDefaultLocale=d;k.getLanguage=W;k.getLocale=Y;k.onLocaleChange=function(v){E.push(v);return{remove(){E.splice(E.indexOf(v),
1)}}};k.prefersRTL=function(v=Y()){v=W(v);return void 0!==v&&(y[v]||!1)};k.setLocale=function(v){t=v?v:void 0;u()};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/zscale".split(" "),
function(k,d,Y,W,u,F,A,w,t,r,G,y,E,n,v,a,e,l,B,m,H,D,P,da){function U(){return!!Ta&&n.isLoaded()}function ja(Z){F.isNone(b)&&(b=Promise.all([n.load(),(new Promise((ka,X)=>k(["../chunks/geometryEngineBase"],ka,X))).then(ka=>ka.geometryEngineBase),new Promise((ka,X)=>k(["./geometryAdapters/hydrated"],ka,X))]));return b.then(([,ka,{hydratedAdapter:X}])=>{A.throwIfAborted(Z);Va=X;Ta=ka.default;Ta._enableProjection(n.pe)})}function M(Z,ka,X=null){return Array.isArray(Z)?0===Z.length?[]:K(Va,Z,Z[0].spatialReference,
ka,X):K(Va,[Z],Z.spatialReference,ka,X)[0]}function K(Z,ka,X,na,ya=null){if(F.isNone(X)||F.isNone(na))return ka;if(N(X,na,ya))return ka.map(za=>F.unwrap(f(za,X,na)));if(F.isNone(ya)){const za=D.cacheKey(X,na);void 0!==$a[za]?ya=$a[za]:(ya=V(X,na,null),F.isNone(ya)&&(ya=new D),$a[za]=ya)}if(F.isNone(Ta))throw new Sa;return Ta._project(Z,ka,X,na,ya)}function V(Z,ka,X=null){if(F.isNone(Ta))throw new Sa;if(F.isNone(Z)||F.isNone(ka))return null;Z=Ta._getTransformation(Va,Z,ka,X,null==X?void 0:X.spatialReference);
return null!==Z?D.fromGE(Z):null}function N(Z,ka,X){return X?!1:P.equals(Z,ka)?!0:P.isValid(Z)&&P.isValid(ka)&&!!Qa(Z,ka,Cb)}function z(){z=Y._asyncToGenerator(function*(Z,ka,X,na){if(!U())if(Array.isArray(Z))for(const {source:ya,dest:za,geographicTransformation:Ka}of Z){if(!N(ya,za,Ka))return ja(na)}else if(!N(Z,ka,X))return ja(na)});return z.apply(this,arguments)}function f(Z,ka,X){return Z?"x"in Z?h(Z,ka,new v,X,0):"xmin"in Z?la(Z,ka,new y,X,0):"rings"in Z?ba(Z,ka,new a,X,0):"paths"in Z?S(Z,ka,
new e,X,0):"points"in Z?C(Z,ka,new E,X,0):null:null}function h(Z,ka,X,na,ya){Pa[0]=Z.x;Pa[1]=Z.y;const za=Z.z;Pa[2]=void 0!==za?za:ya;if(!ia(Pa,ka,0,Pa,na,0,1))return null;X.x=Pa[0];X.y=Pa[1];X.spatialReference=na;void 0===za?(X.z=void 0,X.hasZ=!1):(X.z=Pa[2],X.hasZ=!0);void 0===Z.m?(X.m=void 0,X.hasM=!1):(X.m=Z.m,X.hasM=!0);return X}function C(Z,ka,X,na,ya){const {points:za,hasZ:Ka,hasM:Ma}=Z;Z=[];const Xa=za.length,Wa=[];for(var Ua of za)Wa.push(Ua[0],Ua[1],Ka?Ua[2]:ya);if(!ia(Wa,ka,0,Wa,na,0,Xa))return null;
for(ka=0;ka<Xa;++ka){ya=3*ka;Ua=Wa[ya];const bb=Wa[ya+1];Ka&&Ma?Z.push([Ua,bb,Wa[ya+2],za[ka][3]]):Ka?Z.push([Ua,bb,Wa[ya+2]]):Ma?Z.push([Ua,bb,za[ka][2]]):Z.push([Ua,bb])}X.points=Z;X.spatialReference=na;X.hasZ=Ka;X.hasM=Ma;return X}function S(Z,ka,X,na,ya){const {paths:za,hasZ:Ka,hasM:Ma}=Z;Z=[];if(!ra(za,Ka,Ma,ka,Z,na,ya))return null;X.paths=Z;X.spatialReference=na;X.hasZ=Ka;X.hasM=Ma;return X}function ba(Z,ka,X,na,ya){const {rings:za,hasZ:Ka,hasM:Ma}=Z;Z=[];if(!ra(za,Ka,Ma,ka,Z,na,ya))return null;
X.rings=Z;X.spatialReference=na;X.hasZ=Ka;X.hasM=Ma;return X}function la(Z,ka,X,na,ya){const {xmin:za,ymin:Ka,xmax:Ma,ymax:Xa,hasZ:Wa,hasM:Ua}=Z;if(!ma(za,Ka,Wa?Z.zmin:ya,ka,Pa,na))return null;X.xmin=Pa[0];X.ymin=Pa[1];Wa&&(X.zmin=Pa[2]);if(!ma(Ma,Xa,Wa?Z.zmax:ya,ka,Pa,na))return null;X.xmax=Pa[0];X.ymax=Pa[1];Wa&&(X.zmax=Pa[2]);Ua&&(X.mmin=Z.mmin,X.mmax=Z.mmax);X.spatialReference=na;return X}function ma(Z,ka,X,na,ya,za){Ra[0]=Z;Ra[1]=ka;Ra[2]=X;return ia(Ra,na,0,ya,za,0,1)}function oa(Z,ka,X,na){if(F.isNone(ka)||
F.isNone(na)||2>Z.length)return!1;2===Z.length&&(Ra[0]=Z[0],Ra[1]=Z[1],Ra[2]=0,Z=Ra);return ia(Z,ka,0,X,na,0,1)}function fa(Z,ka,X){if(F.isNone(ka))return!1;ka=Ga(ka,Ab);ka=jb[ka][6];if(F.isNone(ka))return!1;ka(Z,0,Ra,0);X!==Ra&&(X[0]=Ra[0],X[1]=Ra[1],2<X.length&&(X[2]=Ra[2]));return!0}function ia(Z,ka,X,na,ya,za,Ka=1){ka=Qa(ka,ya,Cb);if(F.isNone(ka))return!1;if(ka===Ea){if(Z===na&&X===za)return!0;Ka=X+3*Ka;for(let Ma=X,Xa=za;Ma<Ka;Ma++,Xa++)na[Xa]=Z[Ma];return!0}Ka=X+3*Ka;for(let Ma=X,Xa=za;Ma<Ka;Ma+=
3,Xa+=3)ka(Z,Ma,na,Xa);return!0}function ra(Z,ka,X,na,ya,za,Ka=0){const Ma=[];for(const Xa of Z)for(const Wa of Xa)Ma.push(Wa[0],Wa[1],ka?Wa[2]:Ka);if(!ia(Ma,na,0,Ma,za,0,Ma.length/3))return!1;na=0;ya.length=0;for(const Xa of Z){Z=[];for(const Wa of Xa)ka&&X?Z.push([Ma[na++],Ma[na++],Ma[na++],Wa[3]]):ka?Z.push([Ma[na++],Ma[na++],Ma[na++]]):(X?Z.push([Ma[na++],Ma[na++],Wa[2]]):Z.push([Ma[na++],Ma[na++]]),na++);ya.push(Z)}return!0}function Aa(Z,ka,X,na){Z=Math.abs(kb*Z)+Math.asin(X/(na+ka));return Z>=
Math.PI/2?Number.MAX_VALUE:X/Math.cos(Z)}function xa(Z,ka,X){const na=Math.sin(Z);Z=Math.cos(Z);const ya=Math.sin(ka);ka=Math.cos(ka);X[0]=-na;X[4]=-ya*Z;X[8]=ka*Z;X[12]=0;X[1]=Z;X[5]=-ya*na;X[9]=ka*na;X[13]=0;X[2]=0;X[6]=ka;X[10]=ya;X[14]=0;X[3]=0;X[7]=0;X[11]=0;X[15]=1;return X}function La(Z,ka,X){xa(Z,ka,X);t.transpose(X,X);return X}function Ga(Z,ka){if(ka.spatialReference===Z)return ka.spatialReferenceId;ka.spatialReference=Z;"metersPerUnit"in ka&&(ka.metersPerUnit=w.getMetersPerUnitForSR(Z,1));
return Z.wkt===l.SphericalECEFSpatialReference.wkt?ka.spatialReferenceId=1:P.isWGS84(Z)?ka.spatialReferenceId=2:P.isWebMercator(Z)?ka.spatialReferenceId=3:P.isPlateCarree(Z)?ka.spatialReferenceId=12:Z.wkt===l.WGS84ECEFSpatialReference.wkt?ka.spatialReferenceId=4:4490===Z.wkid?ka.spatialReferenceId=5:Z.wkt===l.SphericalPCPFMars.wkt?ka.spatialReferenceId=7:Z.wkt===l.SphericalPCPFMoon.wkt?ka.spatialReferenceId=9:P.isMars(Z)?ka.spatialReferenceId=8:P.isMoon(Z)?ka.spatialReferenceId=10:ka.spatialReferenceId=
0}function Ea(Z,ka,X,na){Z!==X&&(X[na++]=Z[ka++],X[na++]=Z[ka++],X[na]=Z[ka])}function c(Z,ka,X,na){X[na++]=sb*(Z[ka++]/m.earth.radius);X[na++]=sb*(Math.PI/2-2*Math.atan(Math.exp(-Z[ka++]/m.earth.radius)));X[na]=Z[ka]}function q(Z,ka,X,na){c(Z,ka,X,na);aa(X,na,X,na)}function ca(Z,ka,X,na){c(Z,ka,X,na);Da(X,na,X,na)}function p(Z,ka,X,na,ya){var za=.4999999*Math.PI;za=u.clamp(kb*Z[ka+1],-za,za);za=Math.sin(za);X[na++]=kb*Z[ka]*ya.radius;X[na++]=ya.halfSemiMajorAxis*Math.log((1+za)/(1-za));X[na]=Z[ka+
2]}function J(Z,ka,X,na){p(Z,ka,X,na,m.earth)}function Q(Z,ka,X,na){X[na]=Z[ka]*yb;X[na+1]=Z[ka+1]*yb;X[na+2]=Z[ka+2]}function R(Z,ka,X,na){X[na]=Z[ka]*tb;X[na+1]=Z[ka+1]*tb;X[na+2]=Z[ka+2]}function ha(Z,ka,X,na){c(Z,ka,X,na);Q(X,na,X,na)}function ea(Z,ka,X,na,ya){ya+=Z[ka+2];const za=kb*Z[ka+1];Z=kb*Z[ka];ka=Math.cos(za);X[na++]=Math.cos(Z)*ka*ya;X[na++]=Math.sin(Z)*ka*ya;X[na]=Math.sin(za)*ya}function L(Z,ka,X,na){ea(Z,ka,X,na,m.moon.radius)}function O(Z,ka,X,na){ea(Z,ka,X,na,m.mars.radius)}function aa(Z,
ka,X,na){ea(Z,ka,X,na,m.earth.radius)}function pa(Z,ka,X,na,ya){var za=Z[ka];const Ka=Z[ka+1];ka=Z[ka+2];Z=Math.sqrt(za*za+Ka*Ka+ka*ka);ka=u.asinClamped(ka/(0===Z?1:Z));za=Math.atan2(Ka,za);X[na++]=sb*za;X[na++]=sb*ka;X[na]=Z-ya}function qa(Z,ka,X,na){pa(Z,ka,X,na,m.moon.radius)}function va(Z,ka,X,na){pa(Z,ka,X,na,m.mars.radius)}function wa(Z,ka,X,na){pa(Z,ka,X,na,m.earth.radius)}function Ba(Z,ka,X,na){wa(Z,ka,X,na);J(X,na,X,na)}function Ja(Z,ka,X,na){wa(Z,ka,X,na);Da(X,na,X,na)}function Da(Z,ka,
X,na){{var ya=m.earth;const Ka=kb*Z[ka];var za=kb*Z[ka+1];Z=Z[ka+2];ka=Math.sin(za);za=Math.cos(za);const Ma=ya.radius/Math.sqrt(1-ya.eccentricitySquared*ka*ka);X[na++]=(Ma+Z)*za*Math.cos(Ka);X[na++]=(Ma+Z)*za*Math.sin(Ka);X[na++]=(Ma*(1-ya.eccentricitySquared)+Z)*ka}}function Fa(Z,ka,X,na){var ya=H.earthEllipsoidConstants,za=Z[ka],Ka=Z[ka+1];Z=Z[ka+2];let Ma;ka=Math.abs(Z);var Xa=za*za+Ka*Ka;var Wa=Math.sqrt(Xa);var Ua=Xa+Z*Z;var bb=Math.sqrt(Ua);za=Math.atan2(Ka,za);var lb=Z*Z/Ua;Ua=Xa/Ua;Ka=ya.a2/
bb;Xa=ya.a3-ya.a4/bb;.3<Ua?(lb=ka/bb*(1+Ua*(ya.a1+Ka+lb*Xa)/bb),bb=Math.asin(lb),Ka=lb*lb,Ua=Math.sqrt(1-Ka)):(Ua=Wa/bb*(1-lb*(ya.a5-Ka-Ua*Xa)/bb),bb=Math.acos(Ua),Ka=1-Ua*Ua,lb=Math.sqrt(Ka));Ma=1-m.earth.eccentricitySquared*Ka;Ka=m.earth.radius/Math.sqrt(Ma);ya=ya.a6*Ka;Ka=Wa-Ka*Ua;Xa=ka-ya*lb;ka=Ua*Ka+lb*Xa;Wa=Ua*Xa-lb*Ka;ya=Wa/(ya/Ma+ka);bb+=ya;0>Z&&(bb=-bb);X[na++]=sb*za;X[na++]=sb*bb;X[na]=ka+Wa*ya/2}function Ha(Z,ka,X,na){Fa(Z,ka,X,na);aa(X,na,X,na)}function Ia(Z,ka,X,na){Fa(Z,ka,X,na);J(X,
na,X,na)}function Qa(Z,ka,X=ab()){return F.isNone(Z)||F.isNone(ka)?null:ta(Z,ka,X).projector}function ta(Z,ka,X){if(F.isNone(Z)||F.isNone(ka)||X.source.spatialReference===Z&&X.dest.spatialReference===ka)return X;const na=Ga(Z,X.source),ya=Ga(ka,X.dest);0===na&&0===ya?P.equals(Z,ka)?X.projector=Ea:X.projector=null:X.projector=jb[na][ya];return X}function ab(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},
projector:Ea}}let Ta=null,Va=null,b=null,$a={},Sa=function(Z){function ka(){return Z.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}Y._inheritsLoose(ka,Z);return ka}(W);const yb=m.earth.radius*Math.PI/180,tb=180/(m.earth.radius*Math.PI),jb={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ea,[6]:Ea,[1]:aa,[7]:null,[9]:null,[0]:null,[3]:J,[12]:Q,[2]:Ea,[4]:Da},[5]:{[5]:Ea,[8]:null,[10]:null,[11]:Ea,[6]:Ea,[1]:aa,[7]:null,[9]:null,[0]:null,[3]:null,[12]:Q,
[2]:null,[4]:Da},[8]:{[5]:null,[8]:Ea,[10]:null,[11]:Ea,[6]:null,[1]:null,[7]:O,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ea,[11]:Ea,[6]:null,[1]:null,[7]:null,[9]:L,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:c,[6]:c,[1]:q,[7]:null,[9]:null,[0]:null,[3]:Ea,[12]:ha,[2]:c,[4]:ca},[4]:{[5]:Fa,[8]:null,[10]:null,[11]:Fa,[6]:Fa,[1]:Ha,[7]:null,[9]:null,[0]:null,[3]:Ia,[12]:function(Z,ka,X,na){Fa(Z,ka,X,na);Q(X,na,X,na)},
[2]:Fa,[4]:Ea},[1]:{[5]:wa,[8]:null,[10]:null,[11]:wa,[6]:wa,[1]:Ea,[7]:null,[9]:null,[0]:null,[3]:Ba,[12]:function(Z,ka,X,na){wa(Z,ka,X,na);Q(X,na,X,na)},[2]:wa,[4]:Ja},[7]:{[5]:null,[8]:va,[10]:null,[11]:va,[6]:null,[1]:null,[7]:Ea,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:qa,[11]:qa,[6]:null,[1]:null,[7]:null,[9]:Ea,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ea,[3]:null,
[12]:null,[2]:null,[4]:null},[11]:{[5]:Ea,[8]:Ea,[10]:Ea,[11]:Ea,[6]:Ea,[1]:aa,[7]:O,[9]:L,[0]:null,[3]:J,[12]:Q,[2]:Ea,[4]:Da},[6]:{[5]:null,[8]:null,[10]:null,[11]:Ea,[6]:Ea,[1]:aa,[7]:null,[9]:null,[0]:null,[3]:null,[12]:Q,[2]:Ea,[4]:Da},[12]:{[5]:R,[8]:null,[10]:null,[11]:R,[6]:R,[1]:function(Z,ka,X,na){R(Z,ka,X,na);aa(X,na,X,na)},[7]:null,[9]:null,[0]:null,[3]:function(Z,ka,X,na){R(Z,ka,X,na);J(X,na,X,na)},[12]:Ea,[2]:R,[4]:function(Z,ka,X,na){R(Z,ka,X,na);Da(X,na,X,na)}}},Ab={spatialReference:null,
spatialReferenceId:0},Zb={spatialReference:null,spatialReferenceId:0},Cb=ab(),$b=ab(),kb=u.deg2rad(1),sb=u.rad2deg(1),Ra=G.create(),eb=G.create(),ob=G.create(),Pa=G.create(),Db=G.create();d.canProjectToWGS84ComparableLonLat=function(Z){if(F.isNone(Z))return!1;Z=Ga(Z,Ab);return!!jb[Z][6]};d.canProjectWithoutEngine=N;d.computeENUToSphericalPCPFLocalRotation=xa;d.computeSphericalPCPFToENULocalRotation=La;d.computeTranslationToOriginAndRotation=function(Z,ka,X,na){if(F.isNone(Z)||F.isNone(na))return!1;
var ya=Ga(Z,Ab),za=Ga(na,Zb);if(ya===za&&1!==za&&7!==za&&9!==za&&(0!==ya||P.equals(Z,na)))return t.identity(X),t.translate(X,X,ka),!0;if(1===za||7===za||9===za){ya=jb[ya][11];za=jb[11][za];if(F.isNone(ya)||F.isNone(za))return!1;ya(ka,0,eb,0);za(eb,0,ob,0);xa(kb*eb[0],kb*eb[1],X);X[12]=ob[0];X[13]=ob[1];X[14]=ob[2];return!0}if(!(3!==za&&12!==za||2!==ya&&1!==ya&&3!==ya)){Z=jb[ya][11];za=jb[11][za];if(F.isNone(Z)||F.isNone(za))return!1;Z(ka,0,eb,0);za(eb,0,ob,0);1===ya?La(kb*eb[0],kb*eb[1],X):t.identity(X);
X[12]=ob[0];X[13]=ob[1];X[14]=ob[2];return!0}return!1};d.getProjectorName=function(Z,ka){switch(Qa(Z,ka,Cb)){case Ea:return"copy3";case aa:return"wgs84ToSphericalECEF";case J:return"wgs84ToWebMercator";case Q:return"wgs84ToPlateCarree";case Da:return"wgs84ToWGS84ECEF";case c:return"webMercatorToWGS84";case q:return"webMercatorToSphericalECEF";case ca:return"webMercatorToWGS84ECEF";case ha:return"webMercatorToPlateCarree";case Fa:return"wgs84ECEFToWGS84";case Ha:return"wgs84ECEFToSphericalECEF";case Ia:return"wgs84ECEFToWebMercator";
case wa:return"sphericalECEFToWGS84";case Ba:return"sphericalECEFToWebMercator";case va:return"sphericalMarsPCPFToMars2000";case qa:return"sphericalMoonPCPFToMoon2000";case Ja:return"sphericalECEFToWGS84ECEF";case O:return"mars2000ToSphericalPCPF";case L:return"moon2000ToSphericalPCPF";default:return null}};d.getTransformation=V;d.getTransformations=function(Z,ka,X=null){if(F.isNone(Ta))throw new Sa;Z=Ta._getTransformationBySuitability(Va,Z,ka,X,null==X?void 0:X.spatialReference);if(null!==Z){ka=
[];for(const na of Z)ka.push(D.fromGE(na));return ka}return[]};d.initializeProjection=function(Z,ka,X,na){return z.apply(this,arguments)};d.isLoaded=U;d.load=ja;d.localLinearScaleFactors=function(Z,ka,X,na){if(F.isNone(ka)||F.isNone(na))return!1;const ya=Ga(ka,Ab);var za=Ga(na,Zb);if(ya===za&&0!==ya||P.equals(ka,na))return X[0]=1,X[1]=1,X[2]=1,!0;if(1===ya){ka=r.length(Z);Z=ka/Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]);ka/=m.earth.radius;if(3===za)return X[0]=Z*ka,X[1]=Z*ka,X[2]=1,!0;if(2===za||5===za)return za=
180/(m.earth.radius*Math.PI),X[0]=za*Z*ka,X[1]=za*ka,X[2]=1,!0}else if(12===ya&&(2===za||5===za))return X[0]=tb,X[1]=tb,X[2]=1,!0;return!1};d.lonLatToSphericalPCPF=function(Z,ka,X,na,ya=0){na+=ya;ya=Math.cos(X);Z[0]=Math.cos(ka)*ya*na;Z[1]=Math.sin(ka)*ya*na;Z[2]=Math.sin(X)*na};d.lonLatToWebMercatorComparable=p;d.project=M;d.projectBoundingRect=function(Z,ka,X,na){if(null==Z)return!1;if(P.equals(ka,na))return B.copy(X,Z),!0;Ra[0]=Z[0];Ra[1]=Z[1];Ra[2]=0;if(!ia(Ra,ka,0,Ra,na,0,1))return!1;X[0]=Ra[0];
X[1]=Ra[1];Ra[0]=Z[2];Ra[1]=Z[3];Ra[2]=0;if(!ia(Ra,ka,0,Ra,na,0,1))return!1;X[2]=Ra[0];X[3]=Ra[1];return!0};d.projectBoundingSphere=function(Z,ka,X,na){if(F.isNone(ka)||F.isNone(na))return!1;ka=ta(ka,na,$b);if(ka.projector===Ea)return X[0]=Z[0],X[1]=Z[1],X[2]=Z[2],X[3]=Z[3],!0;if(F.isNone(ka.projector))return!1;const {source:ya,dest:za}=ka;if(3===za.spatialReferenceId){ka=jb[ya.spatialReferenceId][2];if(F.isNone(ka))return!1;ka(Z,0,eb,0);J(eb,0,X,0);X[3]=Aa(eb[1],Z[2],Z[3],m.earth.radius);return!0}if(2!==
ya.spatialReferenceId&&5!==ya.spatialReferenceId||12!==za.spatialReferenceId)ka.projector(Z,0,X,0),X[3]=Z[3]*ya.metersPerUnit/za.metersPerUnit;else{na=jb[1][12];let Ka=Z[3];F.isSome(jb[ya.spatialReferenceId][1])&&F.isSome(na)&&(Ka=Aa(Z[1],Z[2],Z[3],m.earth.radius));ka.projector(Z,0,X,0);X[3]=Ka}return!0};d.projectBuffer=ia;d.projectDirection=function(Z,ka,X,na,ya){r.copy(Pa,Z);r.add(Db,Z,ka);oa(Pa,X,Pa,ya);oa(Db,X,Db,ya);r.subtract(na,Db,Pa);r.normalize(na,na)};d.projectExtent=function(Z,ka,X=ka.spatialReference,
na=0){return F.isSome(X)&&F.isSome(la(Z,Z.spatialReference,ka,X,na))};d.projectMany=K;d.projectMultipoint=function(Z,ka,X=ka.spatialReference,na=0){return F.isNone(X)?!1:F.isSome(C(Z,Z.spatialReference,ka,X,na))};d.projectPoint=function(Z,ka,X=ka.spatialReference,na=0){return F.isNone(X)?!1:F.isSome(h(Z,Z.spatialReference,ka,X,na))};d.projectPointToVector=function(Z,ka,X,na=0){Pa[0]=Z.x;Pa[1]=Z.y;const ya=Z.z;Pa[2]=void 0!==ya?ya:na;return ia(Pa,Z.spatialReference,0,ka,X,0,1)};d.projectPointToWGS84ComparableLonLat=
function(Z,ka){Pa[0]=Z.x;Pa[1]=Z.y;const X=Z.z;Pa[2]=void 0!==X?X:0;return fa(Pa,Z.spatialReference,ka)};d.projectPolygon=function(Z,ka,X=ka.spatialReference,na=0){return F.isSome(X)&&F.isSome(ba(Z,Z.spatialReference,ka,X,na))};d.projectPolyline=function(Z,ka,X=ka.spatialReference,na=0){return F.isSome(X)&&F.isSome(S(Z,Z.spatialReference,ka,X,na))};d.projectVectorToDehydratedPoint=function(Z,ka,X){return ia(Z,ka,0,Pa,X.spatialReference,0,1)?(X.x=Pa[0],X.y=Pa[1],X.z=Pa[2],X):null};d.projectVectorToPoint=
function(Z,ka,X){if(F.isNone(ka)||F.isNone(X))return null;const na=new v({spatialReference:X});return ia(Z,ka,0,Pa,X,0,1)?(na.x=Pa[0],na.y=Pa[1],na.z=Pa[2],na):null};d.projectVectorToVector=oa;d.projectVectorToWGS84ComparableLonLat=function(Z,ka,X){return fa(Z,ka,X)};d.projectWithoutEngine=f;d.projectXYZToVector=ma;d.sphericalPCPFtoLonLatElevation=pa;d.tryProjectWithZConversion=function(Z,ka){try{const X=M(Z,ka);if(null==X)return null;"xmin"in Z&&"xmin"in X&&(X.zmin=Z.zmin,X.zmax=Z.zmax);const na=
da.getGeometryZScaler(X.type,Z.spatialReference,ka);F.isSome(na)&&na(X);return X}catch(X){if(!(X instanceof Sa))throw X;return null}};d.unload=function(){b=Va=Ta=null;$a={}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(k,d,Y,W,u,
F,A,w,t){function r(h){if(h=N[h])return h;throw Error("unknown measure");}function G(h){return V[h].baseUnit}function y(h,C=null){C=C||r(h);return V[C].baseUnit===h}function E(h,C,S){if(C===S)return h;const ba=r(C);if(ba!==r(S))throw Error("incompatible units");h=y(C,ba)?h:h*V[ba].units[C].inBaseUnits;return y(S,ba)?h:h/V[ba].units[S].inBaseUnits}function n(h,C){return 3E3>E(h,C,"meters")?"meters":"kilometers"}function v(h,C){return 1E5>E(h,C,"meters")?"meters":"kilometers"}function a(h,C){return 1E3>
E(h,C,"feet")?"feet":"miles"}function e(h,C){return 1E5>E(h,C,"feet")?"feet":"miles"}function l(h){return K.fromJSON(h.toLowerCase())||null}function B(h,C=A.earth.metersPerDegree){return m(h,!0)||C}function m(h,C=!1){let S,ba,la=null;null!=h&&("object"===typeof h?(S=h.wkid,ba=h.wkt):"number"===typeof h?S=h:"string"===typeof h&&(ba=h));if(S){if(w.isWKIDFromMars(S))return A.mars.metersPerDegree;if(w.isWKIDFromMoon(S))return A.moon.metersPerDegree;la=U.values[U[S]];!la&&C&&M.has(S)&&(la=P)}else ba&&
(/^PROJCS/i.test(ba)?la=H(da.exec(ba),la):/^GEOCCS/i.test(ba)&&(la=H(ja.exec(ba),la)));return la}function H(h,C){return h&&h[1]?parseFloat(h[1].split(",")[1]):C}function D(h){var C=null;if(null!=h)if("object"===typeof h){var S=h.wkid;var ba=h.wkt}else"number"===typeof h?S=h:"string"===typeof h&&(ba=h);if(S)C=U.units[U[S]];else if(ba&&(h=/^PROJCS/i.test(ba)?da:/^GEOCCS/i.test(ba)?ja:null)&&(ba=h.exec(ba))&&ba[1]&&(ba=ba[1],C=(C=/[\\"\\']{1}([^\\"\\']+)/.exec(ba))&&C[1],!C||-1===U.units.indexOf(C)))for(ba=
parseFloat(ba.split(",")[1]),C=null,h=U.values,S=0;S<h.length;++S)if(1E-7>Math.abs(ba-h[S])){C=U.units[S];break}return W.isSome(C)?l(C):null}const P=A.earth.radius*Math.PI/200,da=/UNIT\[([^\]]+)\]\]$/i,U=t,ja=/UNIT\[([^\]]+)\]/i,M=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),K=Y.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",
chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},
miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};t={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(h=>h*h)(1200/3937)},
acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const V={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:t},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},
"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},N=function(){const h={};for(const C in V)for(const S in V[C].units)h[S]=C;return h}(),z={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",
esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},f={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};d=Y.strict()(z);t=Y.strict()(f);Y=Y.strict()({...z,...f});k.areaUnitsJSONMap=d;k.baseUnitForMeasure=G;k.baseUnitForUnit=
function(h){return G(r(h))};k.convertUnit=E;k.getDefaultUnitSystem=function(h){if(!h)return null;switch(D(h)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};k.getMetersPerUnit=
m;k.getMetersPerUnitForSR=B;k.getMetersPerVerticalUnitForSR=function(h){if(h&&"object"===typeof h&&!w.isEarth(h))return 1;h=B(h);return 1E5<h?1:h};k.getUnitString=D;k.getVerticalUnitStringForSR=function(h){const C=B(h),S=h instanceof F?u.getReferenceEllipsoid(h).metersPerDegree:1E5;return C>=S?"meters":D(h)};k.inchesPerMeter=39.37;k.isBaseUnit=y;k.isMeasurementSystem=function(h){return"imperial"===h||"metric"===h};k.lengthToDegrees=function(h,C,S){return E(h,C,"meters")/(S*Math.PI/180)};k.lengthUnitsJSONMap=
t;k.measureForUnit=r;k.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");k.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");k.preferredImperialAreaUnit=function(h,C){return 1E6>E(h,C,"square-feet")?"square-feet":"square-miles"};k.preferredImperialLengthUnit=a;k.preferredImperialVerticalLengthUnit=e;k.preferredLengthUnit=
function(h,C,S){switch(S){case "metric":return n(h,C);case "imperial":return a(h,C);default:return S}};k.preferredMetricAreaUnit=function(h,C){return 3E6>E(h,C,"square-meters")?"square-meters":"square-kilometers"};k.preferredMetricLengthUnit=n;k.preferredMetricVerticalLengthUnit=v;k.preferredVerticalLengthUnit=function(h,C,S){switch(S){case "metric":return v(h,C);case "imperial":return e(h,C);default:return S}};k.unitFromRESTJSON=l;k.unitToRESTJSON=function(h){return K.toJSON(h)||null};k.unitsJSONMap=
Y;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(k,d,Y,W){function u(r){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${r.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const F=u(Y.earth),A=u(Y.mars),w=u(Y.moon),t=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${Y.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});k.SphericalECEFSpatialReference=F;k.SphericalPCPFMars=
A;k.SphericalPCPFMoon=w;k.WGS84ECEFSpatialReference=t;k.createSphericalPCPF=u;k.getReferenceEllipsoid=function(r){return r&&(W.isMars(r)||r===A)?Y.mars:r&&(W.isMoon(r)||r===w)?Y.moon:Y.earth};k.getReferenceEllipsoidFromWKID=function(r){return W.isWKIDFromMars(r)?Y.mars:W.isWKIDFromMoon(r)?Y.moon:Y.earth};k.getSphericalPCPF=function(r){return r&&(W.isMars(r)||r===A)?A:r&&(W.isMoon(r)||r===w)?w:F};k.getSphericalPCPFForEllipsoid=function(r){return r&&r===Y.mars?A:r&&r===Y.moon?w:F};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,d,Y){function W(c,q){c[0]=q[0];c[1]=q[1];c[2]=q[2];c[3]=q[3];c[4]=q[4];c[5]=q[5];c[6]=q[6];c[7]=q[7];c[8]=q[8];c[9]=q[9];c[10]=q[10];c[11]=q[11];c[12]=q[12];c[13]=q[13];c[14]=q[14];c[15]=q[15];return c}function u(c,q,ca,p,J,Q,R,ha,ea,L,O,aa,pa,qa,va,wa,Ba){c[0]=q;c[1]=ca;c[2]=p;c[3]=J;c[4]=Q;c[5]=R;c[6]=ha;c[7]=ea;c[8]=L;c[9]=O;c[10]=aa;c[11]=pa;c[12]=qa;c[13]=va;c[14]=wa;c[15]=Ba;return c}
function F(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function A(c,q){if(c===q){const ca=q[1],p=q[2],J=q[3],Q=q[6],R=q[7],ha=q[11];c[1]=q[4];c[2]=q[8];c[3]=q[12];c[4]=ca;c[6]=q[9];c[7]=q[13];c[8]=p;c[9]=Q;c[11]=q[14];c[12]=J;c[13]=R;c[14]=ha}else c[0]=q[0],c[1]=q[4],c[2]=q[8],c[3]=q[12],c[4]=q[1],c[5]=q[5],c[6]=q[9],c[7]=q[13],c[8]=q[2],c[9]=q[6],c[10]=q[10],c[11]=q[14],c[12]=q[3],c[13]=q[7],c[14]=q[11],c[15]=q[15];
return c}function w(c,q){const ca=q[0],p=q[1],J=q[2],Q=q[3],R=q[4],ha=q[5],ea=q[6],L=q[7],O=q[8],aa=q[9],pa=q[10],qa=q[11],va=q[12],wa=q[13],Ba=q[14];q=q[15];const Ja=ca*ha-p*R,Da=ca*ea-J*R,Fa=ca*L-Q*R,Ha=p*ea-J*ha,Ia=p*L-Q*ha,Qa=J*L-Q*ea,ta=O*wa-aa*va,ab=O*Ba-pa*va,Ta=O*q-qa*va,Va=aa*Ba-pa*wa,b=aa*q-qa*wa,$a=pa*q-qa*Ba;let Sa=Ja*$a-Da*b+Fa*Va+Ha*Ta-Ia*ab+Qa*ta;if(!Sa)return null;Sa=1/Sa;c[0]=(ha*$a-ea*b+L*Va)*Sa;c[1]=(J*b-p*$a-Q*Va)*Sa;c[2]=(wa*Qa-Ba*Ia+q*Ha)*Sa;c[3]=(pa*Ia-aa*Qa-qa*Ha)*Sa;c[4]=
(ea*Ta-R*$a-L*ab)*Sa;c[5]=(ca*$a-J*Ta+Q*ab)*Sa;c[6]=(Ba*Fa-va*Qa-q*Da)*Sa;c[7]=(O*Qa-pa*Fa+qa*Da)*Sa;c[8]=(R*b-ha*Ta+L*ta)*Sa;c[9]=(p*Ta-ca*b-Q*ta)*Sa;c[10]=(va*Ia-wa*Fa+q*Ja)*Sa;c[11]=(aa*Fa-O*Ia-qa*Ja)*Sa;c[12]=(ha*ab-R*Va-ea*ta)*Sa;c[13]=(ca*Va-p*ab+J*ta)*Sa;c[14]=(wa*Da-va*Ha-Ba*Ja)*Sa;c[15]=(O*Ha-aa*Da+pa*Ja)*Sa;return c}function t(c,q){const ca=q[0],p=q[1],J=q[2],Q=q[3],R=q[4],ha=q[5],ea=q[6],L=q[7],O=q[8],aa=q[9],pa=q[10],qa=q[11],va=q[12],wa=q[13],Ba=q[14];q=q[15];c[0]=ha*(pa*q-qa*Ba)-aa*
(ea*q-L*Ba)+wa*(ea*qa-L*pa);c[1]=-(p*(pa*q-qa*Ba)-aa*(J*q-Q*Ba)+wa*(J*qa-Q*pa));c[2]=p*(ea*q-L*Ba)-ha*(J*q-Q*Ba)+wa*(J*L-Q*ea);c[3]=-(p*(ea*qa-L*pa)-ha*(J*qa-Q*pa)+aa*(J*L-Q*ea));c[4]=-(R*(pa*q-qa*Ba)-O*(ea*q-L*Ba)+va*(ea*qa-L*pa));c[5]=ca*(pa*q-qa*Ba)-O*(J*q-Q*Ba)+va*(J*qa-Q*pa);c[6]=-(ca*(ea*q-L*Ba)-R*(J*q-Q*Ba)+va*(J*L-Q*ea));c[7]=ca*(ea*qa-L*pa)-R*(J*qa-Q*pa)+O*(J*L-Q*ea);c[8]=R*(aa*q-qa*wa)-O*(ha*q-L*wa)+va*(ha*qa-L*aa);c[9]=-(ca*(aa*q-qa*wa)-O*(p*q-Q*wa)+va*(p*qa-Q*aa));c[10]=ca*(ha*q-L*wa)-
R*(p*q-Q*wa)+va*(p*L-Q*ha);c[11]=-(ca*(ha*qa-L*aa)-R*(p*qa-Q*aa)+O*(p*L-Q*ha));c[12]=-(R*(aa*Ba-pa*wa)-O*(ha*Ba-ea*wa)+va*(ha*pa-ea*aa));c[13]=ca*(aa*Ba-pa*wa)-O*(p*Ba-J*wa)+va*(p*pa-J*aa);c[14]=-(ca*(ha*Ba-ea*wa)-R*(p*Ba-J*wa)+va*(p*ea-J*ha));c[15]=ca*(ha*pa-ea*aa)-R*(p*pa-J*aa)+O*(p*ea-J*ha);return c}function r(c){const q=c[0],ca=c[1],p=c[2],J=c[3],Q=c[4],R=c[5],ha=c[6],ea=c[7],L=c[8],O=c[9],aa=c[10],pa=c[11],qa=c[12],va=c[13],wa=c[14];c=c[15];return(q*R-ca*Q)*(aa*c-pa*wa)-(q*ha-p*Q)*(O*c-pa*va)+
(q*ea-J*Q)*(O*wa-aa*va)+(ca*ha-p*R)*(L*c-pa*qa)-(ca*ea-J*R)*(L*wa-aa*qa)+(p*ea-J*ha)*(L*va-O*qa)}function G(c,q,ca){const p=q[0],J=q[1],Q=q[2],R=q[3],ha=q[4],ea=q[5],L=q[6],O=q[7],aa=q[8],pa=q[9],qa=q[10],va=q[11],wa=q[12],Ba=q[13],Ja=q[14];q=q[15];let Da=ca[0],Fa=ca[1],Ha=ca[2],Ia=ca[3];c[0]=Da*p+Fa*ha+Ha*aa+Ia*wa;c[1]=Da*J+Fa*ea+Ha*pa+Ia*Ba;c[2]=Da*Q+Fa*L+Ha*qa+Ia*Ja;c[3]=Da*R+Fa*O+Ha*va+Ia*q;Da=ca[4];Fa=ca[5];Ha=ca[6];Ia=ca[7];c[4]=Da*p+Fa*ha+Ha*aa+Ia*wa;c[5]=Da*J+Fa*ea+Ha*pa+Ia*Ba;c[6]=Da*Q+Fa*
L+Ha*qa+Ia*Ja;c[7]=Da*R+Fa*O+Ha*va+Ia*q;Da=ca[8];Fa=ca[9];Ha=ca[10];Ia=ca[11];c[8]=Da*p+Fa*ha+Ha*aa+Ia*wa;c[9]=Da*J+Fa*ea+Ha*pa+Ia*Ba;c[10]=Da*Q+Fa*L+Ha*qa+Ia*Ja;c[11]=Da*R+Fa*O+Ha*va+Ia*q;Da=ca[12];Fa=ca[13];Ha=ca[14];Ia=ca[15];c[12]=Da*p+Fa*ha+Ha*aa+Ia*wa;c[13]=Da*J+Fa*ea+Ha*pa+Ia*Ba;c[14]=Da*Q+Fa*L+Ha*qa+Ia*Ja;c[15]=Da*R+Fa*O+Ha*va+Ia*q;return c}function y(c,q,ca){const p=ca[0],J=ca[1];ca=ca[2];let Q=void 0,R=void 0,ha=void 0,ea=void 0,L=void 0,O=void 0,aa=void 0,pa=void 0,qa=void 0,va=void 0,
wa=void 0,Ba=void 0;q===c?(c[12]=q[0]*p+q[4]*J+q[8]*ca+q[12],c[13]=q[1]*p+q[5]*J+q[9]*ca+q[13],c[14]=q[2]*p+q[6]*J+q[10]*ca+q[14],c[15]=q[3]*p+q[7]*J+q[11]*ca+q[15]):(Q=q[0],R=q[1],ha=q[2],ea=q[3],L=q[4],O=q[5],aa=q[6],pa=q[7],qa=q[8],va=q[9],wa=q[10],Ba=q[11],c[0]=Q,c[1]=R,c[2]=ha,c[3]=ea,c[4]=L,c[5]=O,c[6]=aa,c[7]=pa,c[8]=qa,c[9]=va,c[10]=wa,c[11]=Ba,c[12]=Q*p+L*J+qa*ca+q[12],c[13]=R*p+O*J+va*ca+q[13],c[14]=ha*p+aa*J+wa*ca+q[14],c[15]=ea*p+pa*J+Ba*ca+q[15]);return c}function E(c,q,ca){const p=ca[0],
J=ca[1];ca=ca[2];c[0]=q[0]*p;c[1]=q[1]*p;c[2]=q[2]*p;c[3]=q[3]*p;c[4]=q[4]*J;c[5]=q[5]*J;c[6]=q[6]*J;c[7]=q[7]*J;c[8]=q[8]*ca;c[9]=q[9]*ca;c[10]=q[10]*ca;c[11]=q[11]*ca;c[12]=q[12];c[13]=q[13];c[14]=q[14];c[15]=q[15];return c}function n(c,q,ca,p){let J=p[0],Q=p[1];p=p[2];let R=Math.sqrt(J*J+Q*Q+p*p);var ha=void 0,ea=void 0;let L=void 0,O=void 0,aa=void 0,pa=void 0,qa=void 0,va=void 0,wa=void 0,Ba=void 0,Ja=void 0,Da=void 0,Fa=void 0,Ha=void 0,Ia=void 0,Qa=void 0,ta=void 0,ab=void 0,Ta=void 0,Va=void 0,
b=void 0,$a=void 0;ea=ha=void 0;if(R<Y.EPSILON)return null;R=1/R;J*=R;Q*=R;p*=R;ha=Math.sin(ca);ea=Math.cos(ca);L=1-ea;O=q[0];aa=q[1];pa=q[2];qa=q[3];va=q[4];wa=q[5];Ba=q[6];Ja=q[7];Da=q[8];Fa=q[9];Ha=q[10];Ia=q[11];Qa=J*J*L+ea;ta=Q*J*L+p*ha;ab=p*J*L-Q*ha;Ta=J*Q*L-p*ha;Va=Q*Q*L+ea;b=p*Q*L+J*ha;$a=J*p*L+Q*ha;ha=Q*p*L-J*ha;ea=p*p*L+ea;c[0]=O*Qa+va*ta+Da*ab;c[1]=aa*Qa+wa*ta+Fa*ab;c[2]=pa*Qa+Ba*ta+Ha*ab;c[3]=qa*Qa+Ja*ta+Ia*ab;c[4]=O*Ta+va*Va+Da*b;c[5]=aa*Ta+wa*Va+Fa*b;c[6]=pa*Ta+Ba*Va+Ha*b;c[7]=qa*Ta+
Ja*Va+Ia*b;c[8]=O*$a+va*ha+Da*ea;c[9]=aa*$a+wa*ha+Fa*ea;c[10]=pa*$a+Ba*ha+Ha*ea;c[11]=qa*$a+Ja*ha+Ia*ea;q!==c&&(c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);return c}function v(c,q,ca){const p=Math.sin(ca);ca=Math.cos(ca);const J=q[4],Q=q[5],R=q[6],ha=q[7],ea=q[8],L=q[9],O=q[10],aa=q[11];q!==c&&(c[0]=q[0],c[1]=q[1],c[2]=q[2],c[3]=q[3],c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);c[4]=J*ca+ea*p;c[5]=Q*ca+L*p;c[6]=R*ca+O*p;c[7]=ha*ca+aa*p;c[8]=ea*ca-J*p;c[9]=L*ca-Q*p;c[10]=O*ca-R*p;c[11]=aa*
ca-ha*p;return c}function a(c,q,ca){const p=Math.sin(ca);ca=Math.cos(ca);const J=q[0],Q=q[1],R=q[2],ha=q[3],ea=q[8],L=q[9],O=q[10],aa=q[11];q!==c&&(c[4]=q[4],c[5]=q[5],c[6]=q[6],c[7]=q[7],c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);c[0]=J*ca-ea*p;c[1]=Q*ca-L*p;c[2]=R*ca-O*p;c[3]=ha*ca-aa*p;c[8]=J*p+ea*ca;c[9]=Q*p+L*ca;c[10]=R*p+O*ca;c[11]=ha*p+aa*ca;return c}function e(c,q,ca){const p=Math.sin(ca);ca=Math.cos(ca);const J=q[0],Q=q[1],R=q[2],ha=q[3],ea=q[4],L=q[5],O=q[6],aa=q[7];q!==c&&(c[8]=q[8],
c[9]=q[9],c[10]=q[10],c[11]=q[11],c[12]=q[12],c[13]=q[13],c[14]=q[14],c[15]=q[15]);c[0]=J*ca+ea*p;c[1]=Q*ca+L*p;c[2]=R*ca+O*p;c[3]=ha*ca+aa*p;c[4]=ea*ca-J*p;c[5]=L*ca-Q*p;c[6]=O*ca-R*p;c[7]=aa*ca-ha*p;return c}function l(c,q){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=q[0];c[13]=q[1];c[14]=q[2];c[15]=1;return c}function B(c,q){c[0]=q[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=q[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=q[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function m(c,q,ca){let p=ca[0],J=ca[1];ca=ca[2];let Q=Math.sqrt(p*p+J*J+ca*ca),R=void 0,ha=void 0,ea=void 0;if(Q<Y.EPSILON)return null;Q=1/Q;p*=Q;J*=Q;ca*=Q;R=Math.sin(q);ha=Math.cos(q);ea=1-ha;c[0]=p*p*ea+ha;c[1]=J*p*ea+ca*R;c[2]=ca*p*ea-J*R;c[3]=0;c[4]=p*J*ea-ca*R;c[5]=J*J*ea+ha;c[6]=ca*J*ea+p*R;c[7]=0;c[8]=p*ca*ea+J*R;c[9]=J*ca*ea-p*R;c[10]=ca*ca*ea+ha;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function H(c,q){const ca=Math.sin(q);q=Math.cos(q);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=
0;c[5]=q;c[6]=ca;c[7]=0;c[8]=0;c[9]=-ca;c[10]=q;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function D(c,q){const ca=Math.sin(q);q=Math.cos(q);c[0]=q;c[1]=0;c[2]=-ca;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=ca;c[9]=0;c[10]=q;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function P(c,q){const ca=Math.sin(q);q=Math.cos(q);c[0]=q;c[1]=ca;c[2]=0;c[3]=0;c[4]=-ca;c[5]=q;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function da(c,q,ca){var p=q[0],J=q[1],Q=q[2],
R=q[3],ha=p+p,ea=J+J;const L=Q+Q;q=p*ha;const O=p*ea;p*=L;const aa=J*ea;J*=L;Q*=L;ha*=R;ea*=R;R*=L;c[0]=1-(aa+Q);c[1]=O+R;c[2]=p-ea;c[3]=0;c[4]=O-R;c[5]=1-(q+Q);c[6]=J+ha;c[7]=0;c[8]=p+ea;c[9]=J-ha;c[10]=1-(q+aa);c[11]=0;c[12]=ca[0];c[13]=ca[1];c[14]=ca[2];c[15]=1;return c}function U(c,q){const ca=Ea,p=-q[0],J=-q[1],Q=-q[2],R=q[3],ha=q[4],ea=q[5],L=q[6],O=q[7],aa=p*p+J*J+Q*Q+R*R;0<aa?(ca[0]=2*(ha*R+O*p+ea*Q-L*J)/aa,ca[1]=2*(ea*R+O*J+L*p-ha*Q)/aa,ca[2]=2*(L*R+O*Q+ha*J-ea*p)/aa):(ca[0]=2*(ha*R+O*p+
ea*Q-L*J),ca[1]=2*(ea*R+O*J+L*p-ha*Q),ca[2]=2*(L*R+O*Q+ha*J-ea*p));da(c,q,ca);return c}function ja(c,q){c[0]=q[12];c[1]=q[13];c[2]=q[14];return c}function M(c,q){const ca=q[0],p=q[1],J=q[2],Q=q[4],R=q[5],ha=q[6],ea=q[8],L=q[9];q=q[10];c[0]=Math.sqrt(ca*ca+p*p+J*J);c[1]=Math.sqrt(Q*Q+R*R+ha*ha);c[2]=Math.sqrt(ea*ea+L*L+q*q);return c}function K(c,q){const ca=q[0]+q[5]+q[10];let p=0;0<ca?(p=2*Math.sqrt(ca+1),c[3]=.25*p,c[0]=(q[6]-q[9])/p,c[1]=(q[8]-q[2])/p,c[2]=(q[1]-q[4])/p):q[0]>q[5]&&q[0]>q[10]?(p=
2*Math.sqrt(1+q[0]-q[5]-q[10]),c[3]=(q[6]-q[9])/p,c[0]=.25*p,c[1]=(q[1]+q[4])/p,c[2]=(q[8]+q[2])/p):q[5]>q[10]?(p=2*Math.sqrt(1+q[5]-q[0]-q[10]),c[3]=(q[8]-q[2])/p,c[0]=(q[1]+q[4])/p,c[1]=.25*p,c[2]=(q[6]+q[9])/p):(p=2*Math.sqrt(1+q[10]-q[0]-q[5]),c[3]=(q[1]-q[4])/p,c[0]=(q[8]+q[2])/p,c[1]=(q[6]+q[9])/p,c[2]=.25*p);return c}function V(c,q,ca,p){var J=q[0],Q=q[1],R=q[2],ha=q[3],ea=J+J,L=Q+Q,O=R+R;q=J*ea;const aa=J*L;J*=O;const pa=Q*L;Q*=O;R*=O;ea*=ha;L*=ha;ha*=O;O=p[0];const qa=p[1];p=p[2];c[0]=(1-
(pa+R))*O;c[1]=(aa+ha)*O;c[2]=(J-L)*O;c[3]=0;c[4]=(aa-ha)*qa;c[5]=(1-(q+R))*qa;c[6]=(Q+ea)*qa;c[7]=0;c[8]=(J+L)*p;c[9]=(Q-ea)*p;c[10]=(1-(q+pa))*p;c[11]=0;c[12]=ca[0];c[13]=ca[1];c[14]=ca[2];c[15]=1;return c}function N(c,q,ca,p,J){var Q=q[0],R=q[1],ha=q[2],ea=q[3],L=Q+Q,O=R+R,aa=ha+ha;q=Q*L;var pa=Q*O,qa=Q*aa;Q=R*O;R*=aa;var va=ha*aa;ha=ea*L;O*=ea;const wa=ea*aa;var Ba=p[0],Ja=p[1];aa=p[2];p=J[0];ea=J[1];J=J[2];L=(1-(Q+va))*Ba;const Da=(pa+wa)*Ba;Ba*=qa-O;pa=(pa-wa)*Ja;va=(1-(q+va))*Ja;Ja*=R+ha;qa=
(qa+O)*aa;R=(R-ha)*aa;q=(1-(q+Q))*aa;c[0]=L;c[1]=Da;c[2]=Ba;c[3]=0;c[4]=pa;c[5]=va;c[6]=Ja;c[7]=0;c[8]=qa;c[9]=R;c[10]=q;c[11]=0;c[12]=ca[0]+p-(L*p+pa*ea+qa*J);c[13]=ca[1]+ea-(Da*p+va*ea+R*J);c[14]=ca[2]+J-(Ba*p+Ja*ea+q*J);c[15]=1;return c}function z(c,q){var ca=q[0],p=q[1],J=q[2];q=q[3];var Q=ca+ca,R=p+p;const ha=J+J;ca*=Q;const ea=p*Q;p*=R;const L=J*Q,O=J*R;J*=ha;Q*=q;R*=q;q*=ha;c[0]=1-p-J;c[1]=ea+q;c[2]=L-R;c[3]=0;c[4]=ea-q;c[5]=1-ca-J;c[6]=O+Q;c[7]=0;c[8]=L+R;c[9]=O-Q;c[10]=1-ca-p;c[11]=0;c[12]=
0;c[13]=0;c[14]=0;c[15]=1;return c}function f(c,q,ca,p,J,Q,R){const ha=1/(ca-q),ea=1/(J-p),L=1/(Q-R);c[0]=2*Q*ha;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*Q*ea;c[6]=0;c[7]=0;c[8]=(ca+q)*ha;c[9]=(J+p)*ea;c[10]=(R+Q)*L;c[11]=-1;c[12]=0;c[13]=0;c[14]=R*Q*2*L;c[15]=0;return c}function h(c,q,ca,p,J){q=1/Math.tan(q/2);let Q=void 0;c[0]=q/ca;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=q;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=J&&Infinity!==J?(Q=1/(p-J),c[10]=(J+p)*Q,c[14]=2*J*p*Q):(c[10]=-1,c[14]=
-2*p);return c}function C(c,q,ca,p){const J=Math.tan(q.upDegrees*Math.PI/180),Q=Math.tan(q.downDegrees*Math.PI/180),R=Math.tan(q.leftDegrees*Math.PI/180);q=Math.tan(q.rightDegrees*Math.PI/180);const ha=2/(R+q),ea=2/(J+Q);c[0]=ha;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=ea;c[6]=0;c[7]=0;c[8]=-((R-q)*ha*.5);c[9]=(J-Q)*ea*.5;c[10]=p/(ca-p);c[11]=-1;c[12]=0;c[13]=0;c[14]=p*ca/(ca-p);c[15]=0;return c}function S(c,q,ca,p,J,Q,R){const ha=1/(q-ca),ea=1/(p-J),L=1/(Q-R);c[0]=-2*ha;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
-2*ea;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*L;c[11]=0;c[12]=(q+ca)*ha;c[13]=(J+p)*ea;c[14]=(R+Q)*L;c[15]=1;return c}function ba(c,q,ca,p){let J=void 0,Q=void 0;var R=void 0,ha=void 0;let ea=void 0,L=void 0;var O=void 0,aa=void 0;let pa=void 0,qa=void 0;const va=q[0],wa=q[1];q=q[2];R=p[0];ha=p[1];p=p[2];O=ca[0];aa=ca[1];ca=ca[2];if(Math.abs(va-O)<Y.EPSILON&&Math.abs(wa-aa)<Y.EPSILON&&Math.abs(q-ca)<Y.EPSILON)return F(c);O=va-O;aa=wa-aa;pa=q-ca;qa=1/Math.sqrt(O*O+aa*aa+pa*pa);O*=qa;aa*=qa;pa*=qa;J=ha*
pa-p*aa;Q=p*O-R*pa;R=R*aa-ha*O;(qa=Math.sqrt(J*J+Q*Q+R*R))?(qa=1/qa,J*=qa,Q*=qa,R*=qa):R=Q=J=0;ha=aa*R-pa*Q;ea=pa*J-O*R;L=O*Q-aa*J;(qa=Math.sqrt(ha*ha+ea*ea+L*L))?(qa=1/qa,ha*=qa,ea*=qa,L*=qa):L=ea=ha=0;c[0]=J;c[1]=ha;c[2]=O;c[3]=0;c[4]=Q;c[5]=ea;c[6]=aa;c[7]=0;c[8]=R;c[9]=L;c[10]=pa;c[11]=0;c[12]=-(J*va+Q*wa+R*q);c[13]=-(ha*va+ea*wa+L*q);c[14]=-(O*va+aa*wa+pa*q);c[15]=1;return c}function la(c,q,ca,p){const J=q[0],Q=q[1];q=q[2];var R=p[0];const ha=p[1];var ea=p[2];p=J-ca[0];let L=Q-ca[1];ca=q-ca[2];
let O=p*p+L*L+ca*ca;0<O&&(O=1/Math.sqrt(O),p*=O,L*=O,ca*=O);let aa=ha*ca-ea*L;ea=ea*p-R*ca;R=R*L-ha*p;O=aa*aa+ea*ea+R*R;0<O&&(O=1/Math.sqrt(O),aa*=O,ea*=O,R*=O);c[0]=aa;c[1]=ea;c[2]=R;c[3]=0;c[4]=L*R-ca*ea;c[5]=ca*aa-p*R;c[6]=p*ea-L*aa;c[7]=0;c[8]=p;c[9]=L;c[10]=ca;c[11]=0;c[12]=J;c[13]=Q;c[14]=q;c[15]=1;return c}function ma(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+
")"}function oa(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function fa(c,q,ca){c[0]=q[0]+ca[0];c[1]=q[1]+ca[1];c[2]=q[2]+ca[2];c[3]=q[3]+ca[3];c[4]=q[4]+ca[4];c[5]=q[5]+ca[5];c[6]=q[6]+ca[6];c[7]=q[7]+ca[7];c[8]=q[8]+ca[8];c[9]=q[9]+ca[9];c[10]=q[10]+ca[10];c[11]=q[11]+ca[11];c[12]=q[12]+ca[12];c[13]=q[13]+ca[13];c[14]=q[14]+ca[14];c[15]=q[15]+ca[15];return c}function ia(c,q,ca){c[0]=q[0]-
ca[0];c[1]=q[1]-ca[1];c[2]=q[2]-ca[2];c[3]=q[3]-ca[3];c[4]=q[4]-ca[4];c[5]=q[5]-ca[5];c[6]=q[6]-ca[6];c[7]=q[7]-ca[7];c[8]=q[8]-ca[8];c[9]=q[9]-ca[9];c[10]=q[10]-ca[10];c[11]=q[11]-ca[11];c[12]=q[12]-ca[12];c[13]=q[13]-ca[13];c[14]=q[14]-ca[14];c[15]=q[15]-ca[15];return c}function ra(c,q,ca){c[0]=q[0]*ca;c[1]=q[1]*ca;c[2]=q[2]*ca;c[3]=q[3]*ca;c[4]=q[4]*ca;c[5]=q[5]*ca;c[6]=q[6]*ca;c[7]=q[7]*ca;c[8]=q[8]*ca;c[9]=q[9]*ca;c[10]=q[10]*ca;c[11]=q[11]*ca;c[12]=q[12]*ca;c[13]=q[13]*ca;c[14]=q[14]*ca;c[15]=
q[15]*ca;return c}function Aa(c,q,ca,p){c[0]=q[0]+ca[0]*p;c[1]=q[1]+ca[1]*p;c[2]=q[2]+ca[2]*p;c[3]=q[3]+ca[3]*p;c[4]=q[4]+ca[4]*p;c[5]=q[5]+ca[5]*p;c[6]=q[6]+ca[6]*p;c[7]=q[7]+ca[7]*p;c[8]=q[8]+ca[8]*p;c[9]=q[9]+ca[9]*p;c[10]=q[10]+ca[10]*p;c[11]=q[11]+ca[11]*p;c[12]=q[12]+ca[12]*p;c[13]=q[13]+ca[13]*p;c[14]=q[14]+ca[14]*p;c[15]=q[15]+ca[15]*p;return c}function xa(c,q){return c[0]===q[0]&&c[1]===q[1]&&c[2]===q[2]&&c[3]===q[3]&&c[4]===q[4]&&c[5]===q[5]&&c[6]===q[6]&&c[7]===q[7]&&c[8]===q[8]&&c[9]===
q[9]&&c[10]===q[10]&&c[11]===q[11]&&c[12]===q[12]&&c[13]===q[13]&&c[14]===q[14]&&c[15]===q[15]}function La(c,q){if(c===q)return!0;const ca=c[0],p=c[1],J=c[2],Q=c[3],R=c[4],ha=c[5],ea=c[6],L=c[7],O=c[8],aa=c[9],pa=c[10],qa=c[11],va=c[12],wa=c[13],Ba=c[14];c=c[15];const Ja=q[0],Da=q[1],Fa=q[2],Ha=q[3],Ia=q[4],Qa=q[5],ta=q[6],ab=q[7],Ta=q[8],Va=q[9],b=q[10],$a=q[11],Sa=q[12],yb=q[13],tb=q[14];q=q[15];return Math.abs(ca-Ja)<=Y.EPSILON*Math.max(1,Math.abs(ca),Math.abs(Ja))&&Math.abs(p-Da)<=Y.EPSILON*Math.max(1,
Math.abs(p),Math.abs(Da))&&Math.abs(J-Fa)<=Y.EPSILON*Math.max(1,Math.abs(J),Math.abs(Fa))&&Math.abs(Q-Ha)<=Y.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Ha))&&Math.abs(R-Ia)<=Y.EPSILON*Math.max(1,Math.abs(R),Math.abs(Ia))&&Math.abs(ha-Qa)<=Y.EPSILON*Math.max(1,Math.abs(ha),Math.abs(Qa))&&Math.abs(ea-ta)<=Y.EPSILON*Math.max(1,Math.abs(ea),Math.abs(ta))&&Math.abs(L-ab)<=Y.EPSILON*Math.max(1,Math.abs(L),Math.abs(ab))&&Math.abs(O-Ta)<=Y.EPSILON*Math.max(1,Math.abs(O),Math.abs(Ta))&&Math.abs(aa-Va)<=Y.EPSILON*
Math.max(1,Math.abs(aa),Math.abs(Va))&&Math.abs(pa-b)<=Y.EPSILON*Math.max(1,Math.abs(pa),Math.abs(b))&&Math.abs(qa-$a)<=Y.EPSILON*Math.max(1,Math.abs(qa),Math.abs($a))&&Math.abs(va-Sa)<=Y.EPSILON*Math.max(1,Math.abs(va),Math.abs(Sa))&&Math.abs(wa-yb)<=Y.EPSILON*Math.max(1,Math.abs(wa),Math.abs(yb))&&Math.abs(Ba-tb)<=Y.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(tb))&&Math.abs(c-q)<=Y.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))}function Ga(c){const q=Y.EPSILON,ca=c[0],p=c[1],J=c[2],Q=c[4],R=c[5],ha=c[6],
ea=c[8],L=c[9];c=c[10];return Math.abs(1-(ca*ca+Q*Q+ea*ea))<=q&&Math.abs(1-(p*p+R*R+L*L))<=q&&Math.abs(1-(J*J+ha*ha+c*c))<=q}const Ea=d.create();d=Object.freeze({__proto__:null,copy:W,set:u,identity:F,transpose:A,invert:w,adjoint:t,determinant:r,multiply:G,translate:y,scale:E,rotate:n,rotateX:v,rotateY:a,rotateZ:e,fromTranslation:l,fromScaling:B,fromRotation:m,fromXRotation:H,fromYRotation:D,fromZRotation:P,fromRotationTranslation:da,fromQuat2:U,getTranslation:ja,getScaling:M,getRotation:K,fromRotationTranslationScale:V,
fromRotationTranslationScaleOrigin:N,fromQuat:z,frustum:f,perspective:h,perspectiveFromFieldOfView:C,ortho:S,lookAt:ba,targetTo:la,str:ma,frob:oa,add:fa,subtract:ia,multiplyScalar:ra,multiplyScalarAndAdd:Aa,exactEquals:xa,equals:La,isOrthoNormal:Ga,mul:G,sub:ia});k.add=fa;k.adjoint=t;k.copy=W;k.determinant=r;k.equals=La;k.exactEquals=xa;k.frob=oa;k.fromQuat=z;k.fromQuat2=U;k.fromRotation=m;k.fromRotationTranslation=da;k.fromRotationTranslationScale=V;k.fromRotationTranslationScaleOrigin=N;k.fromScaling=
B;k.fromTranslation=l;k.fromXRotation=H;k.fromYRotation=D;k.fromZRotation=P;k.frustum=f;k.getRotation=K;k.getScaling=M;k.getTranslation=ja;k.identity=F;k.invert=w;k.isOrthoNormal=Ga;k.lookAt=ba;k.mat4=d;k.mul=G;k.multiply=G;k.multiplyScalar=ra;k.multiplyScalarAndAdd=Aa;k.ortho=S;k.perspective=h;k.perspectiveFromFieldOfView=C;k.rotate=n;k.rotateX=v;k.rotateY=a;k.rotateZ=e;k.scale=E;k.set=u;k.str=ma;k.sub=ia;k.subtract=ia;k.targetTo=la;k.translate=y;k.transpose=A})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(k,d,Y,W,u){function F(){return!!d._pe}function A(){return!!u("esri-wasm")}function w(){return n?n:n=(new Promise((a,e)=>k(["./pe-wasm"],a,e))).then(a=>a.peWasm).then(({default:a})=>a({locateFile:e=>W.getAssetUrl(`esri/geometry/support/${e}`)})).then(a=>{t(a)})}function t(a){function e(m,H,D){m[H]=D(m[H])}d._pe=a;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=
function(m){function H(){return m.apply(this,arguments)||this}Y._inheritsLoose(H,m);H.prototype.destroy=function(){d._pe.destroy(this)};return H}(d._pe.PeGCSExtent);a=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var l of a)e(l.prototype,"getName",m=>function(){return m.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const m of[d._pe.PeGeogtran,d._pe.PeProjcs])e(m.prototype,"getParameters",H=>function(){const D=
Array(d.PeDefs.PE_PARM_MAX);let P=H.call(this);for(let da=0;da<D.length;da++){const U=d._pe.getValue(P,"*");D[da]=U?d._pe.wrapPointer(U,d._pe.PeParameter):null;P+=Int32Array.BYTES_PER_ELEMENT}return D});e(d._pe.PeHorizon.prototype,"getCoord",m=>function(){const H=this.getSize();if(!H)return null;const D=[],P=m.call(this);E(D,H,P);return D});e(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",m=>{const H=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let D=null;var P=m.call(this);if(!d._pe.compare(P,
d._pe.NULL)){D=[P];const da=this.getSteps();if(1<da){P=d._pe.getPointer(P);for(let U=1;U<da;U++)D.push(d._pe.wrapPointer(P+H*U,d._pe.PeGTlistExtendedGTs))}}return D}});const B=d._pe._pe_getPeHorizonSize();l=m=>function(){let H=this._cache;H||(this._cache=H=new Map);if(H.has(m))return H.get(m);let D=null;var P=m.call(this);if(!d._pe.compare(P,d._pe.NULL)){D=[P];const da=P.getNump();if(1<da){P=d._pe.getPointer(P);for(let U=1;U<da;U++)D.push(d._pe.wrapPointer(P+B*U,d._pe.PeHorizon))}}H.set(m,D);return D};
e(d._pe.PeProjcs.prototype,"horizonGcsGenerate",l);e(d._pe.PeProjcs.prototype,"horizonPcsGenerate",l);d._pe.PeObject.prototype.toString=function(m=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const H=d._pe.getPointer(this),D=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(H,m,D))}}function r(a){if(a){var e=d._pe.getClass(a);e&&(e=d._pe.getCache(e))&&(a=d._pe.getPointer(a))&&delete e[a]}}function G(a,e){const l=[];e=Array(e);for(let B=
0;B<a;B++)l.push(d._pe.ensureInt8(e));return l}function y(a){let e;Array.isArray(a[0])?(e=[],a.forEach(l=>{e.push(l[0],l[1])})):e=a;return e}function E(a,e,l,B=!1){if(B)for(B=0;B<2*e;B++)a[B]=d._pe.getValue(l+B*Float64Array.BYTES_PER_ELEMENT,"double");else{B=0===a.length;for(let m=0;m<e;m++)B&&(a[m]=Array(2)),a[m][0]=d._pe.getValue(l,"double"),a[m][1]=d._pe.getValue(l+Float64Array.BYTES_PER_ELEMENT,"double"),l+=2*Float64Array.BYTES_PER_ELEMENT}}let n;d._pe=null;d.PeCSTransformations=void 0;(function(a){function e(m,
H,D){d._pe.ensureCache.prepare();var P=y(D);const da=D===P;P=d._pe.ensureFloat64(P);(m=d._pe._pe_geog_to_proj(d._pe.getPointer(m),H,P))&&E(D,H,P,da);return m}function l(m,H,D){return B(m,H,D,0)}function B(m,H,D,P){d._pe.ensureCache.prepare();var da=y(D);const U=D===da;da=d._pe.ensureFloat64(da);(m=d._pe._pe_proj_to_geog_center(d._pe.getPointer(m),H,da,P))&&E(D,H,da,U);return m}a.geogToProj=e;a.projGeog=function(m,H,D,P){switch(P){case d.PeDefs.PE_TRANSFORM_P_TO_G:return l(m,H,D);case d.PeDefs.PE_TRANSFORM_G_TO_P:return e(m,
H,D)}return 0};a.projToGeog=l;a.projToGeogCenter=B})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(a){a.init=function(){a.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;a.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;a.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;a.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;a.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;a.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;a.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;a.PE_UTM_MAX=
d._pe.PeDefs.prototype.PE_UTM_MAX;a.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;a.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;a.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;a.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;a.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;a.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;a.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;a.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;a.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;
a.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;a.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;a.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;a.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;a.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;a.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;a.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;a.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;a.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
a.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;a.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;a.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;a.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(a){function e(H,D){let P=null,da=l[H];da||(da={},l[H]=da);da.hasOwnProperty(String(D))?P=da[D]:(H=d._pe.PeFactory.prototype.factoryByType(H,D),d._pe.compare(H,d._pe.NULL)||(P=H,da[D]=P));return P=m(P)}const l={},B=
{},m=H=>{if(H){const D=H.getType();switch(D){case d.PeDefs.PE_TYPE_GEOGCS:H=d._pe.castObject(H,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:H=d._pe.castObject(H,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:H=d._pe.castObject(H,d._pe.PeGeogtran);break;default:D&d.PeDefs.PE_TYPE_UNIT&&(H=d._pe.castObject(H,d._pe.PeUnit))}}return H};a.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};a.coordsys=function(H){return e(d.PeDefs.PE_TYPE_COORDSYS,H)};a.factoryByType=e;a.fromString=
function(H,D){let P=null,da=B[H];da||(da={},B[H]=da);da.hasOwnProperty(D)?P=da[D]:(H=d._pe.PeFactory.prototype.fromString(H,D),d._pe.compare(H,d._pe.NULL)||(P=H,da[D]=P));return P=m(P)};a.geogcs=function(H){return e(d.PeDefs.PE_TYPE_GEOGCS,H)};a.geogtran=function(H){return e(d.PeDefs.PE_TYPE_GEOGTRAN,H)};a.getCode=function(H){return d._pe.PeFactory.prototype.getCode(H)};a.projcs=function(H){return e(d.PeDefs.PE_TYPE_PROJCS,H)};a.unit=function(H){return e(d.PeDefs.PE_TYPE_UNIT,H)}})(d.PeFactory||(d.PeFactory=
{}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(a){let e;a.init=function(){a.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;e=d._pe._pe_getPeGTlistExtendedEntrySize()};a.getGTlist=function(l,B,m,H,D,P){let da=null;const U=new d._pe.PeInteger(P);try{const ja=d._pe.PeGTlistExtended.prototype.getGTlist(l,B,m,H,D,U);if(P=U.val)if(da=[ja],1<P){const M=d._pe.getPointer(ja);for(l=1;l<P;l++)da.push(d._pe.wrapPointer(M+e*l,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(U)}return da}})(d.PeGTlistExtended||
(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(a){a.destroy=function(e){if(e&&e.length){for(const l of e)r(l),l.getEntries().forEach(B=>{r(B);B=B.getGeogtran();r(B);B.getParameters().forEach(r);[B.getGeogcs1(),B.getGeogcs2()].forEach(m=>{r(m);const H=m.getDatum();r(H);r(H.getSpheroid());r(m.getPrimem());r(m.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(a){a.geogToGeog=
function(e,l,B,m,H){d._pe.ensureCache.prepare();var D=y(B);const P=B===D;D=d._pe.ensureFloat64(D);let da=0;m&&(da=d._pe.ensureFloat64(m));(e=d._pe._pe_geog_to_geog(d._pe.getPointer(e),l,D,da,H))&&E(B,l,D,P);return e}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(a){const e=(B,m,H,D,P,da)=>{d._pe.ensureCache.prepare();switch(B){case "dd":var U=d._pe._pe_geog_to_dd;var ja=d.PeDefs.PE_DD_MAX;break;case "ddm":U=d._pe._pe_geog_to_ddm;ja=d.PeDefs.PE_DDM_MAX;break;
case "dms":U=d._pe._pe_geog_to_dms,ja=d.PeDefs.PE_DMS_MAX}B=0;m&&(B=d._pe.getPointer(m));m=y(D);m=d._pe.ensureFloat64(m);ja=G(H,ja);D=d._pe.ensureInt32(ja);if(P=U(B,H,m,P,D))for(U=0;U<H;U++)da[U]=d._pe.UTF8ToString(ja[U]);return P},l=(B,m,H,D,P)=>{d._pe.ensureCache.prepare();switch(B){case "dd":var da=d._pe._pe_dd_to_geog;break;case "ddm":da=d._pe._pe_ddm_to_geog;break;case "dms":da=d._pe._pe_dms_to_geog}B=0;m&&(B=d._pe.getPointer(m));m=D.map(U=>d._pe.ensureString(U));D=d._pe.ensureInt32(m);m=d._pe.ensureFloat64(Array(2*
H));(da=da(B,H,D,m))&&E(P,H,m);return da};a.geog_to_dms=function(B,m,H,D,P){return e("dms",B,m,H,D,P)};a.dms_to_geog=function(B,m,H,D){return l("dms",B,m,H,D)};a.geog_to_ddm=function(B,m,H,D,P){return e("ddm",B,m,H,D,P)};a.ddm_to_geog=function(B,m,H,D){return l("ddm",B,m,H,D)};a.geog_to_dd=function(B,m,H,D,P){return e("dd",B,m,H,D,P)};a.dd_to_geog=function(B,m,H,D){return l("dd",B,m,H,D)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(a){a.init=function(){a.PE_MGRS_STYLE_NEW=
d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;a.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;a.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;a.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;a.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};a.geog_to_mgrs_extended=function(e,l,B,m,H,D,P){d._pe.ensureCache.prepare();let da=0;e&&(da=d._pe.getPointer(e));e=y(B);B=d._pe.ensureFloat64(e);e=G(l,d.PeDefs.PE_MGRS_MAX);
const U=d._pe.ensureInt32(e);if(m=d._pe._pe_geog_to_mgrs_extended(da,l,B,m,H,D,U))for(H=0;H<l;H++)P[H]=d._pe.UTF8ToString(e[H]);return m};a.mgrs_to_geog_extended=function(e,l,B,m,H){d._pe.ensureCache.prepare();let D=0;e&&(D=d._pe.getPointer(e));e=B.map(P=>d._pe.ensureString(P));B=d._pe.ensureInt32(e);e=d._pe.ensureFloat64(Array(2*l));(m=d._pe._pe_mgrs_to_geog_extended(D,l,B,m,e))&&E(H,l,e);return m}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(a){a.geog_to_usng=function(e,
l,B,m,H,D,P){d._pe.ensureCache.prepare();let da=0;e&&(da=d._pe.getPointer(e));e=y(B);B=d._pe.ensureFloat64(e);e=G(l,d.PeDefs.PE_MGRS_MAX);const U=d._pe.ensureInt32(e);if(m=d._pe._pe_geog_to_usng(da,l,B,m,H,D,U))for(H=0;H<l;H++)P[H]=d._pe.UTF8ToString(e[H]);return m};a.usng_to_geog=function(e,l,B,m){d._pe.ensureCache.prepare();var H=0;e&&(H=d._pe.getPointer(e));e=B.map(D=>d._pe.ensureString(D));B=d._pe.ensureInt32(e);e=d._pe.ensureFloat64(Array(2*l));(H=d._pe._pe_usng_to_geog(H,l,B,e))&&E(m,l,e);return H}})(d.PeNotationUsng||
(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(a){a.init=function(){a.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;a.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;a.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};a.geog_to_utm=function(e,l,B,m,H){d._pe.ensureCache.prepare();var D=0;e&&(D=d._pe.getPointer(e));e=y(B);B=d._pe.ensureFloat64(e);e=G(l,d.PeDefs.PE_UTM_MAX);const P=d._pe.ensureInt32(e);if(m=d._pe._pe_geog_to_utm(D,l,B,
m,P))for(D=0;D<l;D++)H[D]=d._pe.UTF8ToString(e[D]);return m};a.utm_to_geog=function(e,l,B,m,H){d._pe.ensureCache.prepare();let D=0;e&&(D=d._pe.getPointer(e));e=B.map(P=>d._pe.ensureString(P));B=d._pe.ensureInt32(e);e=d._pe.ensureFloat64(Array(2*l));(m=d._pe._pe_utm_to_geog(D,l,B,m,e))&&E(H,l,e);return m}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(a){const e=new Map;a.init=function(){a.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;a.PE_PCSINFO_OPTION_DOMAIN=
d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;a.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;a.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};a.generate=function(l,B=a.PE_PCSINFO_OPTION_DOMAIN){let m,H;e.has(l)&&(H=e.get(l),H[B]&&(m=H[B]));m||(m=d._pe.PePCSInfo.prototype.generate(l,B),H||(H=[],e.set(l,H)),H[B]=m);return m}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(a){a.version_string=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||
(d.PeVersion={}));const v=Object.freeze({__proto__:null,get _pe(){return d._pe},isLoaded:F,isSupported:A,load:w,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},
get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:t});d._init=t;d.isLoaded=F;d.isSupported=A;d.load=w;d.pe=v})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(k,d,Y,W,u){function F(n=E){return[n[0],n[1],n[2],n[3]]}function A(n,v){n!==v&&(n[0]=v[0],n[1]=v[1],n[2]=v[2],n[3]=v[3]);return n}
function w(n){return W.isNone(n)||n[0]>=n[2]?0:n[2]-n[0]}function t(n){return n[1]>=n[3]?0:n[3]-n[1]}function r(n,v,a){return v>=n[0]&&a>=n[1]&&v<=n[2]&&a<=n[3]}function G(n){return null!=n&&4===n.length}const y=[Infinity,Infinity,-Infinity,-Infinity],E=[0,0,0,0];k.NEGATIVE_INFINITY=y;k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=E;k.allFinite=function(n){for(let v=0;4>v;v++)if(!isFinite(n[v]))return!1;return!0};k.area=function(n){return w(n)*t(n)};k.center=function(n,
v=[0,0]){v[0]=(n[0]+n[2])/2;v[1]=(n[1]+n[3])/2;return v};k.clone=function(n){return[n[0],n[1],n[2],n[3]]};k.contains=function(n,v){return v[0]>=n[0]&&v[2]<=n[2]&&v[1]>=n[1]&&v[3]<=n[3]};k.containsPoint=function(n,v){return r(n,v[0],v[1])};k.containsPointObject=function(n,v){return r(n,v.x,v.y)};k.containsPointWithMargin=function(n,v,a){return v[0]>=n[0]-a&&v[1]>=n[1]-a&&v[0]<=n[2]+a&&v[1]<=n[3]+a};k.containsXY=r;k.copy=A;k.create=F;k.distance=function(n,v){const a=(n[1]+n[3])/2,e=Math.max(Math.abs(v[0]-
(n[0]+n[2])/2)-w(n)/2,0);n=Math.max(Math.abs(v[1]-a)-t(n)/2,0);return Math.sqrt(e*e+n*n)};k.empty=function(n){return n?A(n,y):F(y)};k.equals=function(n,v){return G(n)&&G(v)?n[0]===v[0]&&n[1]===v[1]&&n[2]===v[2]&&n[3]===v[3]:n===v};k.expand=function(n,v,a){if(W.isNone(v))A(a,n);else if("length"in v)if(G(v))a[0]=Math.min(n[0],v[0]),a[1]=Math.min(n[1],v[1]),a[2]=Math.max(n[2],v[2]),a[3]=Math.max(n[3],v[3]);else{if(2===v.length||3===v.length)a[0]=Math.min(n[0],v[0]),a[1]=Math.min(n[1],v[1]),a[2]=Math.max(n[2],
v[0]),a[3]=Math.max(n[3],v[1])}else switch(v.type){case "extent":a[0]=Math.min(n[0],v.xmin);a[1]=Math.min(n[1],v.ymin);a[2]=Math.max(n[2],v.xmax);a[3]=Math.max(n[3],v.ymax);break;case "point":a[0]=Math.min(n[0],v.x),a[1]=Math.min(n[1],v.y),a[2]=Math.max(n[2],v.x),a[3]=Math.max(n[3],v.y)}};k.expandPointInPlace=function(n,v){v[0]<n[0]&&(n[0]=v[0]);v[0]>n[2]&&(n[2]=v[0]);v[1]<n[1]&&(n[1]=v[1]);v[1]>n[3]&&(n[3]=v[1])};k.expandWithNestedArray=function(n,v,a=n){const e=v.length;let l=n[0],B=n[1],m=n[2];
n=n[3];for(let H=0;H<e;H++){const D=v[H];l=Math.min(l,D[0]);B=Math.min(B,D[1]);m=Math.max(m,D[0]);n=Math.max(n,D[1])}a[0]=l;a[1]=B;a[2]=m;a[3]=n;return a};k.fromExtent=function(n,v=F()){v[0]=n.xmin;v[1]=n.ymin;v[2]=n.xmax;v[3]=n.ymax;return v};k.fromValues=function(n,v,a,e,l=F()){l[0]=n;l[1]=v;l[2]=a;l[3]=e;return l};k.height=t;k.intersection=function(n,v,a){if(W.isNone(v))return A(a,n);const e=v[0],l=v[1],B=v[2];v=v[3];a[0]=Y.clamp(n[0],e,B);a[1]=Y.clamp(n[1],l,v);a[2]=Y.clamp(n[2],e,B);a[3]=Y.clamp(n[3],
l,v);return a};k.intersects=function(n,v){return Math.max(v[0],n[0])<=Math.min(v[2],n[2])&&Math.max(v[1],n[1])<=Math.min(v[3],n[3])};k.intersectsSphere=function(n,v){const a=v[3];var e=Math.abs(v[0]-.5*(n[0]+n[2]));const l=.5*(n[2]-n[0]);if(e>a+l)return!1;var B=.5*(n[3]-n[1]);n=Math.abs(v[1]-.5*(n[1]+n[3]));if(n>a+B)return!1;if(e<l||n<B)return!0;e-=l;B=n-B;return e*e+B*B<=a*a};k.is=G;k.isPoint=function(n){return(0===w(n)||!isFinite(n[0]))&&(0===t(n)||!isFinite(n[1]))};k.offset=function(n,v,a,e=n){e[0]=
n[0]+v;e[1]=n[1]+a;e[2]=n[2]+v;e[3]=n[3]+a;return e};k.pad=function(n,v,a=n){a[0]=n[0]-v;a[1]=n[1]-v;a[2]=n[2]+v;a[3]=n[3]+v;return a};k.setMax=function(n,v,a=n){a[2]=v[0];a[3]=v[1];a!==n&&(a[0]=n[0],a[1]=n[1]);return n};k.setMin=function(n,v,a=n){a[0]=v[0];a[1]=v[1];a!==n&&(a[2]=n[2],a[3]=n[3]);return a};k.size=function(n,v){v[0]=n[2]-n[0];v[1]=n[3]-n[1]};k.toExtent=function(n,v){return new u({xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3],spatialReference:v})};k.width=w;Object.defineProperty(k,"__esModule",
{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(k,d){const Y=Math.PI/180;var W=d.earth.radius;const u=d.earth.eccentricitySquared;W={a1:W*u,a2:W*u*W*u,a3:W*u*u/2,a4:W*u*W*u*2.5,a5:W*u+W*u*u/2,a6:1-u};d={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,
f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},
104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,
f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,
f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};k.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=W;k.spheroids=d;k.toRadians=Y;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(k){return function(){function d(W){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(W&&W.steps)for(const u of W.steps)u instanceof k?this.steps.push(u):
this.steps.push(new k({wkid:u.wkid,wkt:u.wkt,isInverse:u.isInverse}))}d.cacheKey=function(W,u){return[void 0!==W.wkid&&null!==W.wkid?W.wkid.toString():"-1",void 0!==W.wkt&&null!==W.wkt?W.wkt.toString():"",void 0!==u.wkid&&null!==u.wkid?u.wkid.toString():"-1",void 0!==u.wkt&&null!==u.wkt?u.wkt.toString():""].join()};d.fromGE=function(W){const u=new d;let F="";for(const A of W.steps)W=k.fromGE(A),u.steps.push(W),F+=W.uid.toString()+",";u._cached_projection={};u._gtlistentry=null;u._chain=F;return u};
var Y=d.prototype;Y.getInverse=function(){const W=new d;W.steps=[];for(let u=this.steps.length-1;0<=u;u--)W.steps.push(this.steps[u].getInverse());return W};Y.getGTListEntry=function(){let W="";for(const u of this.steps)W+=u.uid.toString()+",";W!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=W);return this._gtlistentry};Y.assignCachedGe=function(W,u,F){this._cached_projection[d.cacheKey(W,u)]=F};Y.getCachedGeTransformation=function(W,u){let F="";for(const A of this.steps)F+=
A.uid.toString()+",";F!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=F);W=this._cached_projection[d.cacheKey(W,u)];return void 0===W?null:W};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){let d=0;return function(){function Y(W=null){this.uid=d++;W?(this._wkt=void 0!==W.wkt?W.wkt:null,this._wkid=void 0!==W.wkid?W.wkid:-1,this._isInverse=void 0!==W.isInverse?!0===W.isInverse:
!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}Y.fromGE=function(W){const u=new Y;u._wkt=W.wkt;u._wkid=W.wkid;u._isInverse=W.isInverse;return u};Y.prototype.getInverse=function(){const W=new Y;W._wkt=this.wkt;W._wkid=this._wkid;W._isInverse=!this.isInverse;return W};k._createClass(Y,[{key:"wkt",get:function(){return this._wkt},set:function(W){this._wkt=W;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(W){this._wkid=W;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},
set:function(W){this._isInverse=W;this.uid=d++}}]);return Y}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(k,d,Y,W){k.getGeometryZScaler=function(u,F,A){if(d.isNone(F)||d.isNone(A)||A.vcsWkid||W.equals(F,A))return null;F=Y.getMetersPerVerticalUnitForSR(F);A=Y.getMetersPerVerticalUnitForSR(A);const w=F/A;if(1===w)return null;switch(u){case "point":case "esriGeometryPoint":return t=>{t&&null!=t.z&&(t.z*=
w)};case "polyline":case "esriGeometryPolyline":return t=>{if(t)for(const r of t.paths)for(const G of r)2<G.length&&(G[2]*=w)};case "polygon":case "esriGeometryPolygon":return t=>{if(t)for(const r of t.rings)for(const G of r)2<G.length&&(G[2]*=w)};case "multipoint":case "esriGeometryMultipoint":return t=>{if(t)for(const r of t.points)2<r.length&&(r[2]*=w)};case "extent":case "esriGeometryExtent":return t=>{t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=w,t.zmax*=w)};default:return null}};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(k){let d=function(A,w,t){this.x=A;this.y=w;this.spatialReference=t;this.m=this.z=void 0},Y=function(A,w,t,r){this.rings=A;this.spatialReference=w;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);r&&(this.hasM=r)},W=function(A,w,t,r){this.paths=A;this.spatialReference=w;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);r&&(this.hasM=r)},u=function(A,w,t,r){this.points=A;this.spatialReference=w;this.hasM=this.hasZ=
void 0;t&&(this.hasZ=t);r&&(this.hasM=r)},F=function(A,w,t,r,G){this.xmin=A;this.ymin=w;this.xmax=t;this.ymax=r;this.spatialReference=G;this.mmax=this.mmin=this.zmax=this.zmin=void 0};k.jsonAdapter={convertToGEGeometry:function(A,w){return null==w?null:A.convertJSONToGeometry(w)},exportPoint:function(A,w,t){t=new d(A.getPointX(w),A.getPointY(w),t);const r=A.hasZ(w),G=A.hasM(w);r&&(t.z=A.getPointZ(w));G&&(t.m=A.getPointM(w));return t},exportPolygon:function(A,w,t){return new Y(A.exportPaths(w),t,A.hasZ(w),
A.hasM(w))},exportPolyline:function(A,w,t){return new W(A.exportPaths(w),t,A.hasZ(w),A.hasM(w))},exportMultipoint:function(A,w,t){return new u(A.exportPoints(w),t,A.hasZ(w),A.hasM(w))},exportExtent:function(A,w,t){var r=A.hasZ(w);const G=A.hasM(w);t=new F(A.getXMin(w),A.getYMin(w),A.getXMax(w),A.getYMax(w),t);r&&(r=A.getZExtent(w),t.zmin=r.vmin,t.zmax=r.vmax);G&&(A=A.getMExtent(w),t.mmin=A.vmin,t.mmax=A.vmax);return t}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(k,d,Y){let W=function(){function F(A=null,w={},t,r){this.geometry=A;this.attributes=w;this.centroid=t;this.objectId=r;this.geohashY=this.geohashX=this.displayId=0}F.prototype.weakClone=function(){const A=new F(this.geometry,this.attributes,this.centroid,this.objectId);A.displayId=this.displayId;A.geohashX=this.geohashX;A.geohashY=this.geohashY;return A};return F}(),u=function(F){function A(){return F.apply(this,arguments)||this}
d._inheritsLoose(A,F);return A}(W);k.OptimizedFeatureWithGeometry=u;k.default=W;k.hasGeometry=function(F){return!(Y.isNone(F.geometry)||!F.geometry.coords||!F.geometry.coords.length)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function d(W=[],u=[],F=!1){this.lengths=null!=W?W:[];this.coords=null!=u?u:[];this.hasIndeterminateRingOrder=F}var Y=d.prototype;Y.forEachVertex=
function(W){let u=0;this.lengths.length||W(this.coords[0],this.coords[1]);for(let F=0;F<this.lengths.length;F++){const A=this.lengths[F];for(let w=0;w<A;w++)W(this.coords[2*(w+u)],this.coords[2*(w+u)+1]);u+=A}};Y.clone=function(W){return W?(W.set(this.coords),new d(this.lengths.slice(),W,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};k._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},
{key:"size",get:function(){return this.lengths.reduce((W,u)=>W+u)}}]);return d}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(k,d,Y,W,u,F,A,w,t,r){return function(){function G(E){this.geometryInfo=
E;this._boundsStore=new t.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new Y;this.featureAdapter=r.optimizedFeatureQueryEngineAdapter}var y=G.prototype;y.add=function(E){this._add(E);this._emitChanged()};y.addMany=function(E){for(const n of E)this._add(n);this._emitChanged()};y.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};y.removeById=function(E){E=this._featuresById.get(E);if(!E)return null;this._remove(E);this._emitChanged();
return E};y.removeManyById=function(E){this._boundsStore.invalidateIndex();for(const n of E)(E=this._featuresById.get(n))&&this._remove(E);this._emitChanged()};y.forEachBounds=function(E,n,v){for(const a of E)(E=this._boundsStore.get(a.objectId))&&n(F.fromRect(v,E))};y.getFeature=function(E){return this._featuresById.get(E)};y.has=function(E){return this._featuresById.has(E)};y.forEach=function(E){this._featuresById.forEach(n=>E(n))};y.forEachInBounds=function(E,n){this._boundsStore.forEachInBounds(E,
v=>{n(this._featuresById.get(v))})};y.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};y.sweep=function(){let E=!1;this._featuresById.forEach((n,v)=>{this._markedIds.has(v)||(E=!0,this._remove(n))});this._markedIds.clear();E&&this._emitChanged()};y._emitChanged=function(){this.events.emit("changed",void 0)};y._add=function(E){if(E){var n=E.objectId;if(null==n)W.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature",
"feature id is missing",{feature:E}));else{var v=this._featuresById.get(n);this._markedIds.add(n);if(v){E.displayId=v.displayId;var a=this._boundsStore.get(n);this._boundsStore.delete(n)}else if(u.isSome(this.onFeatureAdd))this.onFeatureAdd(E);!u.isNone(E.geometry)&&E.geometry.coords&&E.geometry.coords.length?(a=w.getBoundsOptimizedGeometry(u.isSome(a)?a:A.create(),E.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),u.isSome(a)&&this._boundsStore.set(n,a)):this._boundsStore.set(n,null);this._featuresById.set(n,
E)}}};y._remove=function(E){if(u.isSome(this.onFeatureRemove))this.onFeatureRemove(E);this._markedIds.delete(E.objectId);this._boundsStore.delete(E.objectId);this._featuresById.delete(E.objectId);return E};k._createClass(G,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const E=A.create(A.NEGATIVE_INFINITY);this._featuresById.forEach(n=>{if(n=this._boundsStore.get(n.objectId))E[0]=Math.min(n[0],E[0]),E[1]=Math.min(n[1],E[1]),E[2]=Math.max(n[2],E[2]),E[3]=Math.max(n[3],E[3])});return E}},{key:"storeStatistics",get:function(){let E=0;this._featuresById.forEach(n=>{u.isSome(n.geometry)&&n.geometry.coords&&(E+=n.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:E/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return G}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,d,Y,W,u){let F=function(){function A(){this._emitter=new A.EventEmitter(this)}var w=A.prototype;w.emit=function(t,r){return this._emitter.emit(t,r)};w.on=function(t,r){return this._emitter.on(t,r)};w.once=function(t,r){return this._emitter.once(t,r)};w.hasEventListener=function(t){return this._emitter.hasEventListener(t)};
return A}();(function(A){let w=function(){function r(y=null){this.target=y;this._listenersMap=null}var G=r.prototype;G.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};G.emit=function(y,E){y=this._listenersMap&&this._listenersMap.get(y);if(!y)return!1;const n=this.target||this;[...y].forEach(v=>{v.call(n,E)});return 0<y.length};G.on=function(y,E){if(Array.isArray(y)){var n=y.map(v=>this.on(v,E));return W.handlesGroup(n)}if(-1<y.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);n=this._listenersMap.get(y)||[];n.push(E);this._listenersMap.set(y,n);return{remove:()=>{const v=this._listenersMap&&this._listenersMap.get(y)||[],a=v.indexOf(E);0<=a&&v.splice(a,1)}}};G.once=function(y,E){const n=this.on(y,v=>{n.remove();E.call(null,v)});return n};G.hasEventListener=function(y){y=this._listenersMap&&this._listenersMap.get(y);return null!=y&&0<y.length};return r}();A.EventEmitter=w;A.EventedMixin=r=>{r=function(G){function y(){var n=
G.apply(this,arguments)||this;n._emitter=new w;return n}k._inheritsLoose(y,G);var E=y.prototype;E.destroy=function(){this._emitter.clear()};E.emit=function(n,v){return this._emitter.emit(n,v)};E.on=function(n,v){return this._emitter.on(n,v)};E.once=function(n,v){return this._emitter.once(n,v)};E.hasEventListener=function(n){return this._emitter.hasEventListener(n)};return y}(r);return r=d.__decorate([u.subclass("esri.core.Evented")],r)};let t=function(r){function G(){var E=r.apply(this,arguments)||
this;E._emitter=new F.EventEmitter(k._assertThisInitialized(E));return E}k._inheritsLoose(G,r);var y=G.prototype;y.destroy=function(){this._emitter.clear()};y.emit=function(E,n){return this._emitter.emit(E,n)};y.on=function(E,n){return this._emitter.on(E,n)};y.once=function(E,n){return this._emitter.once(E,n)};y.hasEventListener=function(E){return this._emitter.hasEventListener(E)};return G}(Y);t=d.__decorate([u.subclass("esri.core.Evented")],t);A.EventedAccessor=t})(F||(F={}));return F})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(k,d,Y,W){function u(a=n){return[a[0],a[1],a[2],a[3],a[4],a[5]]}function F(a,e,l,B,m,H,D=u()){D[0]=a;D[1]=e;D[2]=l;D[3]=B;D[4]=m;D[5]=H;return D}function A(a){return a[0]>=a[3]?0:a[3]-a[0]}function w(a){return a[1]>=a[4]?0:a[4]-a[1]}function t(a){return a[2]>=a[5]?0:a[5]-a[2]}function r(a,e){return Math.max(e[0],a[0])<=Math.min(e[3],a[3])&&Math.max(e[1],a[1])<=Math.min(e[4],a[4])&&Math.max(e[2],a[2])<=Math.min(e[5],a[5])}function G(a,e){a[0]=
e[0];a[1]=e[1];a[2]=e[2];a[3]=e[3];a[4]=e[4];a[5]=e[5];return a}function y(a){return 6===a.length}const E=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],n=[0,0,0,0,0,0],v=u();k.NEGATIVE_INFINITY=E;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=n;k.allFinite=function(a){for(let e=0;6>e;e++)if(!isFinite(a[e]))return!1;return!0};k.center=function(a,e=[0,0,0]){e[0]=a[0]+A(a)/2;e[1]=a[1]+w(a)/2;e[2]=a[2]+t(a)/2;return e};k.contains=function(a,e){return e[0]>=
a[0]&&e[1]>=a[1]&&e[2]>=a[2]&&e[3]<=a[3]&&e[4]<=a[4]&&e[5]<=a[5]};k.containsPoint=function(a,e){return e[0]>=a[0]&&e[1]>=a[1]&&e[2]>=a[2]&&e[0]<=a[3]&&e[1]<=a[4]&&e[2]<=a[5]};k.containsPointWithMargin=function(a,e,l){return e[0]>=a[0]-l&&e[1]>=a[1]-l&&e[2]>=a[2]-l&&e[0]<=a[3]+l&&e[1]<=a[4]+l&&e[2]<=a[5]+l};k.create=u;k.depth=w;k.diameter=function(a){const e=A(a),l=t(a);a=w(a);return Math.sqrt(e*e+l*l+a*a)};k.empty=function(a){return a?G(a,E):u(E)};k.equals=function(a,e,l){if(d.isNone(a)||d.isNone(e))return a===
e;if(!y(a)||!y(e))return!1;if(l)for(let B=0;B<a.length;B++){if(!l(a[B],e[B]))return!1}else for(l=0;l<a.length;l++)if(a[l]!==e[l])return!1;return!0};k.expandWithAABB=function(a,e){a[0]=Math.min(a[0],e[0]);a[1]=Math.min(a[1],e[1]);a[2]=Math.min(a[2],e[2]);a[3]=Math.max(a[3],e[3]);a[4]=Math.max(a[4],e[4]);a[5]=Math.max(a[5],e[5])};k.expandWithBuffer=function(a,e,l=0,B=e.length/3){let m=a[0],H=a[1],D=a[2],P=a[3],da=a[4],U=a[5];for(let ja=0;ja<B;ja++)m=Math.min(m,e[l+3*ja]),H=Math.min(H,e[l+3*ja+1]),D=
Math.min(D,e[l+3*ja+2]),P=Math.max(P,e[l+3*ja]),da=Math.max(da,e[l+3*ja+1]),U=Math.max(U,e[l+3*ja+2]);a[0]=m;a[1]=H;a[2]=D;a[3]=P;a[4]=da;a[5]=U};k.expandWithNestedArray=function(a,e,l){const B=e.length;let m=a[0],H=a[1],D=a[2],P=a[3],da=a[4],U=a[5];if(l)for(l=0;l<B;l++){var ja=e[l];m=Math.min(m,ja[0]);H=Math.min(H,ja[1]);D=Math.min(D,ja[2]);P=Math.max(P,ja[0]);da=Math.max(da,ja[1]);U=Math.max(U,ja[2])}else for(l=0;l<B;l++)ja=e[l],m=Math.min(m,ja[0]),H=Math.min(H,ja[1]),P=Math.max(P,ja[0]),da=Math.max(da,
ja[1]);a[0]=m;a[1]=H;a[2]=D;a[3]=P;a[4]=da;a[5]=U};k.expandWithOffset=function(a,e,l,B){a[0]=Math.min(a[0],a[0]+e);a[3]=Math.max(a[3],a[3]+e);a[1]=Math.min(a[1],a[1]+l);a[4]=Math.max(a[4],a[4]+l);a[2]=Math.min(a[2],a[2]+B);a[5]=Math.max(a[5],a[5]+B)};k.expandWithRect=function(a,e){a[0]=Math.min(a[0],e[0]);a[1]=Math.min(a[1],e[1]);a[3]=Math.max(a[3],e[2]);a[4]=Math.max(a[4],e[3])};k.expandWithVec3=function(a,e){a[0]=Math.min(a[0],e[0]);a[1]=Math.min(a[1],e[1]);a[2]=Math.min(a[2],e[2]);a[3]=Math.max(a[3],
e[0]);a[4]=Math.max(a[4],e[1]);a[5]=Math.max(a[5],e[2])};k.fromExtent=function(a,e=u()){e[0]=a.xmin;e[1]=a.ymin;e[2]=a.zmin;e[3]=a.xmax;e[4]=a.ymax;e[5]=a.zmax;return e};k.fromMinMax=function(a,e,l=u()){l[0]=a[0];l[1]=a[1];l[2]=a[2];l[3]=e[0];l[4]=e[1];l[5]=e[2];return l};k.fromRect=function(a,e){a[0]=e[0];a[1]=e[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=e[2];a[4]=e[3];a[5]=Number.POSITIVE_INFINITY;return a};k.fromValues=F;k.getMax=function(a,e){e[0]=a[3];e[1]=a[4];e[2]=a[5];return e};k.getMin=function(a,
e){e[0]=a[0];e[1]=a[1];e[2]=a[2];return e};k.height=t;k.intersects=r;k.intersectsClippingArea=function(a,e){return d.isNone(e)?!0:r(a,e)};k.is=y;k.isPoint=function(a){return 0===A(a)&&0===w(a)&&0===t(a)};k.maximumDimension=function(a){return Math.max(A(a),t(a),w(a))};k.offset=function(a,e,l,B,m=a){m[0]=a[0]+e;m[1]=a[1]+l;m[2]=a[2]+B;m[3]=a[3]+e;m[4]=a[4]+l;m[5]=a[5]+B;return m};k.scale=function(a,e,l=a){const B=a[0]+A(a)/2,m=a[1]+w(a)/2,H=a[2]+t(a)/2;l[0]=B+(a[0]-B)*e;l[1]=m+(a[1]-m)*e;l[2]=H+(a[2]-
H)*e;l[3]=B+(a[3]-B)*e;l[4]=m+(a[4]-m)*e;l[5]=H+(a[5]-H)*e;return l};k.set=G;k.setMax=function(a,e,l=a){l[3]=e[0];l[4]=e[1];l[5]=e[2];l!==a&&(l[0]=a[0],l[1]=a[1],l[2]=a[2]);return a};k.setMin=function(a,e,l=a){l[0]=e[0];l[1]=e[1];l[2]=e[2];l!==a&&(l[3]=a[3],l[4]=a[4],l[5]=a[5]);return l};k.size=function(a,e=[0,0,0]){e[0]=A(a);e[1]=w(a);e[2]=t(a);return e};k.toExtent=function(a,e){return isFinite(a[2])||isFinite(a[5])?new Y({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:e}):
new Y({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:e})};k.toRect=function(a,e){e||(e=W.create());e[0]=a[0];e[1]=a[1];e[2]=a[3];e[3]=a[4];return e};k.width=A;k.wrap=function(a,e,l,B,m,H){return F(a,e,l,B,m,H,v)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(k,d,Y,W,u,F,A,w){function t(p,J){return p?J?4:3:J?3:2}function r(p,J,Q,R){if(p){if(Q)return J&&R?c:Ga;if(J&&R)return Ea}else if(J&&R)return Ga;return La}function G({scale:p,translate:J},Q){return Math.round((Q-J[0])/p[0])}function y({scale:p,translate:J},Q){return Math.round((J[1]-Q)/p[1])}function E({scale:p,translate:J},Q){return Q*p[0]+J[0]}function n({scale:p,translate:J},Q){return J[1]-Q*p[1]}function v(p){p=p.coords;return{x:p[0],y:p[1]}}function a(p,J){p.coords[0]=J.x;p.coords[1]=
J.y;return p}function e(p){p=p.coords;return{x:p[0],y:p[1],z:p[2]}}function l(p,J){p.coords[0]=J.x;p.coords[1]=J.y;p.coords[2]=J.z;return p}function B(p){p=p.coords;return{x:p[0],y:p[1],m:p[2]}}function m(p,J){p.coords[0]=J.x;p.coords[1]=J.y;p.coords[2]=J.m;return p}function H(p){p=p.coords;return{x:p[0],y:p[1],z:p[2],m:p[3]}}function D(p,J){p.coords[0]=J.x;p.coords[1]=J.y;p.coords[2]=J.z;p.coords[3]=J.m;return p}function P(p,J){return p&&J?D:p?l:J?m:a}function da(p,J,Q,R,ha){Q=P(Q,R);for(const ea of J){const {geometry:L,
attributes:O}=ea;let aa;L&&(aa=Q(new w,L));p.push(new F.default(aa,O,null,O[ha]))}return p}function U(p,J,Q,R){for(const ha of J){const {geometry:ea,attributes:L}=ha;let O;ea&&(O=ja(ea,Q,R));p.push({attributes:L,geometry:O})}return p}function ja(p,J,Q){if(W.isNone(p))return null;const R=t(J,Q),ha=[];for(let ea=0;ea<p.coords.length;ea+=R){const L=[];for(let O=0;O<R;O++)L.push(p.coords[ea+O]);ha.push(L)}return J?Q?{points:ha,hasZ:J,hasM:Q}:{points:ha,hasZ:J}:Q?{points:ha,hasM:Q}:{points:ha}}function M(p,
J,Q,R,ha){Q=t(Q,R);for(const ea of J){J=ea.geometry;R=ea.attributes;let L;J&&(L=K(new w,J,Q));p.push(new F.default(L,R,null,R[ha]))}return p}function K(p,J,Q=t(J.hasZ,J.hasM)){p.lengths[0]=J.points.length;const R=p.coords;let ha=0;for(const ea of J.points)for(J=0;J<Q;J++)R[ha++]=ea[J];return p}function V(p,J,Q){if(!p)return null;const R=t(J,Q),{coords:ha,lengths:ea}=p;p=[];let L=0;for(const O of ea){const aa=[];for(let pa=0;pa<O;pa++){const qa=[];for(let va=0;va<R;va++)qa.push(ha[L++]);aa.push(qa)}p.push(aa)}return J?
Q?{paths:p,hasZ:J,hasM:Q}:{paths:p,hasZ:J}:Q?{paths:p,hasM:Q}:{paths:p}}function N(p,J,Q,R,ha){Q=t(Q,R);for(const ea of J){J=ea.geometry;R=ea.attributes;let L;J&&(L=z(new w,J,Q));p.push(new F.default(L,R,null,R[ha]))}return p}function z(p,J,Q=t(J.hasZ,J.hasM)){const {lengths:R,coords:ha}=p;let ea=0;for(const L of J.paths){for(const O of L)for(J=0;J<Q;J++)ha[ea++]=O[J];R.push(L.length)}return p}function f(p,J,Q){if(!p)return null;const R=t(J,Q),{coords:ha,lengths:ea}=p;p=[];let L=0;for(const O of ea){const aa=
[];for(let pa=0;pa<O;pa++){const qa=[];for(let va=0;va<R;va++)qa.push(ha[L++]);aa.push(qa)}p.push(aa)}return J?Q?{rings:p,hasZ:J,hasM:Q}:{rings:p,hasZ:J}:Q?{rings:p,hasM:Q}:{rings:p}}function h(p,J,Q,R,ha){for(const ea of J){J=ea.geometry;const L=ea.centroid,O=ea.attributes;let aa;J&&(aa=C(new w,J,Q,R));W.isSome(L)?p.push(new F.default(aa,O,a(new w,L),O[ha])):p.push(new F.default(aa,O,null,O[ha]))}return p}function C(p,J,Q=J.hasZ,R=J.hasM){S(p,J.rings,Q,R);return p}function S(p,J,Q,R){Q=t(Q,R);const {lengths:ha,
coords:ea}=p;R=0;ha.length=ea.length=0;for(const L of J){for(const O of L)for(J=0;J<Q;J++)ea[R++]=O[J];ha.push(L.length)}return p}function ba(p,J,Q,R,ha,ea){p.length=0;if(!Q){for(const L of J)p.push(new F.default(null,L.attributes,null,L.attributes[ea]));return p}switch(Q){case "esriGeometryPoint":return da(p,J,R,ha,ea);case "esriGeometryMultipoint":return M(p,J,R,ha,ea);case "esriGeometryPolyline":return N(p,J,R,ha,ea);case "esriGeometryPolygon":return h(p,J,R,ha,ea);default:Aa.error("convertToFeatureSet:unknown-geometry",
new d(`Unable to parse unknown geometry type '${Q}'`)),p.length=0}return p}function la(p,J,Q,R){p=p&&("coords"in p?p:p.geometry);if(W.isNone(p))return null;switch(J){case "esriGeometryPoint":return J=v,Q&&R?J=H:Q?J=e:R&&(J=B),J(p);case "esriGeometryMultipoint":return ja(p,Q,R);case "esriGeometryPolyline":return V(p,Q,R);case "esriGeometryPolygon":return f(p,Q,R);default:Aa.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${J}'`))}}function ma(p,J,Q,R,ha){p.length=
0;if(W.isNone(Q)){for(const O of J)p.push({attributes:O.attributes});return p}switch(Q){case "esriGeometryPoint":var ea=v;R&&ha?ea=H:R?ea=e:ha&&(ea=B);for(var L of J){const {geometry:O,attributes:aa}=L;R=W.isSome(O)?ea(O):null;p.push({attributes:aa,geometry:R})}break;case "esriGeometryMultipoint":return U(p,J,R,ha);case "esriGeometryPolyline":for(const O of J){const {geometry:aa,attributes:pa}=O;let qa;W.isSome(aa)&&(qa=V(aa,R,ha));p.push({attributes:pa,geometry:qa})}break;case "esriGeometryPolygon":for(ea of J){const {geometry:O,
attributes:aa,centroid:pa}=ea;let qa;W.isSome(O)&&(qa=f(O,R,ha));pa?(L=v(pa),p.push({attributes:aa,centroid:L,geometry:qa})):p.push({attributes:aa,geometry:qa})}break;default:Aa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${Q}'`))}return p}function oa(p,J,Q,R,ha,ea,L=Q,O=R){p.lengths.length&&(p.lengths.length=0);p.coords.length&&(p.coords.length=0);if(W.isNone(J)||!J.coords.length)return null;ha=xa[ha];const {coords:aa,lengths:pa}=J;J=t(Q,R);const qa=
t(Q&&L,R&&O);Q=r(Q,R,L,O);if(!pa.length)return Q(p.coords,aa,0,0,G(ea,aa[0]),y(ea,aa[1])),p.lengths.length&&(p.lengths.length=0),p.coords.length=J,p;let va,wa=0,Ba,Ja=0;for(const Da of pa){if(Da<ha)continue;let Fa=0;Ba=Ja;O=R=G(ea,aa[wa]);va=L=y(ea,aa[wa+1]);Q(p.coords,aa,Ba,wa,O,va);Fa++;wa+=J;Ba+=qa;for(let Ha=1;Ha<Da;Ha++,wa+=J)if(O=G(ea,aa[wa]),va=y(ea,aa[wa+1]),O!==R||va!==L)Q(p.coords,aa,Ba,wa,O-R,va-L),Ba+=qa,Fa++,R=O,L=va;Fa>=ha&&(p.lengths.push(Fa),Ja=Ba)}p.coords.length=Ja;return p.coords.length?
p:null}function fa(p,J,Q,R,ha,ea,L){let O=R,aa=0;for(let qa=ea+Q;qa<L;qa+=Q){{var pa=J[qa];const va=J[qa+1],wa=J[L],Ba=J[L+1];let Ja=J[ea],Da=J[ea+1],Fa=wa-Ja,Ha=Ba-Da;if(0!==Fa||0!==Ha){const Ia=((pa-Ja)*Fa+(va-Da)*Ha)/(Fa*Fa+Ha*Ha);1<Ia?(Ja=wa,Da=Ba):0<Ia&&(Ja+=Fa*Ia,Da+=Ha*Ia)}Fa=pa-Ja;Ha=va-Da;pa=Fa*Fa+Ha*Ha}pa>O&&(aa=qa,O=pa)}O>R&&(aa-ea>Q&&fa(p,J,Q,R,ha,ea,aa),ha(p,J,p.length,aa,J[aa],J[aa+1]),L-aa>Q&&fa(p,J,Q,R,ha,aa,L))}function ia(p,J,Q,R,ha){const {coords:ea,lengths:L}=J,O=Q?R?c:Ga:R?Ga:
La;Q=t(Q,R);if(!ea.length)return p!==J&&(p.lengths.length=0,p.coords.length=0),p;if(!L.length)return O(p.coords,ea,0,0,E(ha,ea[0]),n(ha,ea[1])),p!==J&&(p.lengths.length=0,p.coords.length=Q),p;const [aa,pa]=ha.scale;R=0;for(let qa=0;qa<L.length;qa++){const va=L[qa];p.lengths[qa]=va;let wa=E(ha,ea[R]),Ba=n(ha,ea[R+1]);O(p.coords,ea,R,R,wa,Ba);R+=Q;for(let Ja=1;Ja<va;Ja++,R+=Q)wa+=ea[R]*aa,Ba-=ea[R+1]*pa,O(p.coords,ea,R,R,wa,Ba)}p!==J&&(p.lengths.length=L.length,p.coords.length=ea.length);return p}function ra(p,
J,Q,R){let ha=0,ea=p[R*J],L=p[R*(J+1)];for(let O=1;O<Q;O++){const aa=ea+p[R*(J+O)],pa=L+p[R*(J+O)+1],qa=(aa-ea)*(pa+L);ea=aa;L=pa;ha+=qa}return.5*ha}const Aa=Y.getLogger("esri.tasks.support.optimizedFeatureSet"),xa={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},La=(p,J,Q,R,ha,ea)=>{p[Q]=ha;p[Q+1]=ea},Ga=(p,J,Q,R,ha,ea)=>{p[Q]=ha;p[Q+1]=ea;p[Q+2]=J[R+2]},Ea=(p,J,Q,R,ha,ea)=>{p[Q]=ha;p[Q+1]=ea;p[Q+2]=J[R+3]},c=(p,J,Q,R,ha,ea)=>{p[Q]=ha;p[Q+1]=ea;p[Q+2]=J[R+
2];p[Q+3]=J[R+3]},q=[],ca=[];k.convertFromFeature=function(p,J,Q,R,ha){q[0]=p;[p]=ba(ca,q,J,Q,R,ha);q.length=ca.length=0;return p};k.convertFromFeatureSet=function(p,J){const Q=new A,{hasM:R,hasZ:ha,features:ea,objectIdFieldName:L,spatialReference:O,geometryType:aa,exceededTransferLimit:pa,transform:qa,fields:va}=p;va&&(Q.fields=va);Q.geometryType=aa;Q.objectIdFieldName=L||J;Q.spatialReference=O;if(!Q.objectIdFieldName)return Aa.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),
Q;ea&&ba(Q.features,ea,aa,ha,R,Q.objectIdFieldName);pa&&(Q.exceededTransferLimit=pa);R&&(Q.hasM=R);ha&&(Q.hasZ=ha);qa&&(Q.transform=qa);return Q};k.convertFromFeatures=ba;k.convertFromGeometry=function(p,J,Q){if(W.isNone(p))return null;const R=new w;"hasZ"in p&&null==J&&(J=p.hasZ);"hasM"in p&&null==Q&&(Q=p.hasM);if(u.isPoint(p))return P(null!=J?J:null!=p.z,null!=Q?Q:null!=p.m)(R,p);if(u.isPolygon(p))return C(R,p,J,Q);if(u.isPolyline(p))return z(R,p,t(J,Q));if(u.isMultipoint(p))return K(R,p,t(J,Q));
Aa.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${p}'`))};k.convertFromGraphics=function(p,J,Q,R,ha,ea){const L=p.length;switch(Q){case "esriGeometryPoint":da(p,J,R,ha,ea);break;case "esriGeometryMultipoint":M(p,J,R,ha,ea);break;case "esriGeometryPolyline":N(p,J,R,ha,ea);break;case "esriGeometryPolygon":h(p,J,R,ha,ea);break;default:Aa.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${Q}'`))}for(R=0;R<J.length;R++)p[R+
L].geometryType=Q,p[R+L].insertAfter=J[R].insertAfter,p[R+L].groupId=J[R].groupId;return p};k.convertFromMultipoint=K;k.convertFromMultipointFeatures=M;k.convertFromNestedArray=S;k.convertFromPoint=function(p,J,Q=P(null!=J.z,null!=J.m)){return Q(p,J)};k.convertFromPointFeatures=da;k.convertFromPolygon=C;k.convertFromPolyline=z;k.convertFromPolylineFeatures=N;k.convertToFeature=function(p,J,Q,R){ca[0]=p;ma(q,ca,J,Q,R);p=q[0];q.length=ca.length=0;return p};k.convertToFeatureSet=function(p){const {objectIdFieldName:J,
spatialReference:Q,transform:R,fields:ha,hasM:ea,hasZ:L,features:O,geometryType:aa,exceededTransferLimit:pa,uniqueIdField:qa,queryGeometry:va,queryGeometryType:wa}=p;p=ma([],O,aa,L,ea);const Ba=la(va,wa,!1,!1);p={features:p,fields:ha,geometryType:aa,objectIdFieldName:J,spatialReference:Q,uniqueIdField:qa,queryGeometry:Ba};R&&(p.transform=R);pa&&(p.exceededTransferLimit=pa);ea&&(p.hasM=ea);L&&(p.hasZ=L);return p};k.convertToFeatures=ma;k.convertToGeometry=la;k.convertToMultipoint=ja;k.convertToMultipointFeatures=
U;k.convertToPoint=function(p,J,Q){return p?J?Q?H(p):e(p):Q?B(p):v(p):null};k.convertToPolygon=f;k.convertToPolyline=V;k.deltaDecodeGeometry=function(p,J){if(W.isNone(p))return null;const Q=p.clone(),R=p.coords;p=p.lengths;let ha=0;for(let O=0;O<p.length;O++){const aa=p[O];var ea=R[J*ha],L=R[J*ha+1];for(let pa=1;pa<aa;pa++)ea+=R[J*(ha+pa)],L+=R[J*(ha+pa)+1],Q.coords[J*(ha+pa)]=ea,Q.coords[J*(ha+pa)+1]=L;ha+=aa}return Q};k.deltaEncodeGeometry=function(p,J){const Q=p.clone(),R=p.coords;p=p.lengths;
let ha=0;for(let L=0;L<p.length;L++){const O=p[L];let aa=R[J*ha];var ea=R[J*ha+1];for(let pa=1;pa<O;pa++){const qa=R[J*(ha+pa)],va=R[J*(ha+pa)+1];ea=va-ea;Q.coords[J*(ha+pa)]=qa-aa;Q.coords[J*(ha+pa)+1]=ea;aa=qa;ea=va}ha+=O}return Q};k.generalizeOptimizedGeometry=function(p,J,Q,R,ha,ea,L=Q,O=R){p.lengths.length&&(p.lengths.length=0);p.coords.length&&(p.coords.length=0);if(!J||!J.coords.length)return null;ha=xa[ha];const {coords:aa,lengths:pa}=J;J=t(Q,R);const qa=t(Q&&L,R&&O);Q=r(Q,R,L,O);if(!pa.length)return Q(p.coords,
aa,0,0,aa[0],aa[1]),p.lengths.length&&(p.lengths.length=0),p.coords.length=J,p;R=0;ea*=ea;for(const va of pa){if(va<ha){R+=va*J;continue}L=p.coords.length/qa;O=R;const wa=R+(va-1)*J;Q(p.coords,aa,p.coords.length,O,aa[O],aa[O+1]);fa(p.coords,aa,J,ea,Q,O,wa);Q(p.coords,aa,p.coords.length,wa,aa[wa],aa[wa+1]);O=p.coords.length/qa-L;O>=ha?p.lengths.push(O):p.coords.length=L*qa;R+=va*J}return p.coords.length?p:null};k.getBoundsOptimizedGeometry=function(p,J,Q,R){if(W.isNone(J)||!J.coords||!J.coords.length)return null;
Q=t(Q,R);let ha=R=Number.POSITIVE_INFINITY,ea=Number.NEGATIVE_INFINITY,L=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=J.coords;for(let O=0;O<J.length;O+=Q){const aa=J[O],pa=J[O+1];R=Math.min(R,aa);ea=Math.max(ea,aa);ha=Math.min(ha,pa);L=Math.max(L,pa)}}p[0]=R;p[1]=ha;p[2]=ea;p[3]=L;return p};k.getQuantizedArea=function(p,J){const {coords:Q,lengths:R}=p;let ha=p=0;for(let ea=0;ea<R.length;ea++)ha+=ra(Q,p,R[ea],J),p+=ea;return Math.abs(ha)};k.getQuantizedBoundsOptimizedGeometry=function(p,J,Q,R){Q=t(Q,
R);const {lengths:ha,coords:ea}=J;R=J=Number.POSITIVE_INFINITY;let L=Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY,aa=0;for(const pa of ha){let qa=ea[aa],va=ea[aa+1];J=Math.min(qa,J);R=Math.min(va,R);L=Math.max(qa,L);O=Math.max(va,O);aa+=Q;for(let wa=1;wa<pa;wa++,aa+=Q){const Ba=ea[aa],Ja=ea[aa+1];qa+=Ba;va+=Ja;0>Ba&&(J=Math.min(J,qa));0<Ba&&(L=Math.max(L,qa));0>Ja?R=Math.min(R,va):0<Ja&&(O=Math.max(O,va))}}p[0]=J;p[1]=R;p[2]=L;p[3]=O;return p};k.getSignedQuantizedRingArea=ra;k.quantizeOptimizedFeatureSet=
function(p,J){const {geometryType:Q,features:R,hasM:ha,hasZ:ea}=J;if(!p)return J;for(let L=0;L<R.length;L++){const O=R[L],aa=O.weakClone();aa.geometry=new w;oa(aa.geometry,O.geometry,ha,ea,Q,p);O.centroid&&(aa.centroid=new w,oa(aa.centroid,O.centroid,ha,ea,"esriGeometryPoint",p));R[L]=aa}J.transform=p;return J};k.quantizeOptimizedGeometry=oa;k.quantizeX=G;k.quantizeY=y;k.removeCollinearVectices=function(p,J,Q,R,ha){if(!J||!J.coords||!J.coords.length)return null;Q=xa[Q];const {coords:ea,lengths:L}=
J;J=r(R,ha,R,ha);R=t(R,ha);let O=ha=0,aa=0,pa=0;for(const wa of L){O=pa;J(p.coords,ea,O,ha,ea[ha],ea[ha+1]);ha+=R;var qa=ea[ha];let Ba=ea[ha+1],Ja=qa,Da=Ba;var va=Ba/qa;O+=R;J(p.coords,ea,O,ha,Ja,Da);ha+=R;for(let Fa=2;Fa<wa;Fa++){qa=ea[ha];Ba=ea[ha+1];const Ha=Ba/qa,Ia=va===Ha||!isFinite(va)&&!isFinite(Ha);va=Ia&&isFinite(Ha)?0<=va&&0<=Ha||0>=va&&0>=Ha:0<=Da&&0<=Ba||0>=Da&&0>=Ba;Ia&&va?(Ja+=qa,Da+=Ba):(Ja=qa,Da=Ba,O+=R);J(p.coords,ea,O,ha,Ja,Da);ha+=R;va=Ha}O+=R;qa=(O-pa)/R;qa>=Q&&(p.lengths[aa]=
qa,pa=O,aa++)}p.coords.length>pa&&(p.coords.length=pa);p.lengths.length>aa&&(p.lengths.length=aa);return p.coords.length&&p.lengths.length?p:null};k.removeZMValues=function(p,J,Q,R,ha,ea){const L=t(Q,R);Q=r(Q,R,ha,ea);R=J.coords;p.coords.length=0;p.lengths.length=0;p.lengths.push(...J.lengths);for(J=0;J<R.length;J+=L)Q(p.coords,R,p.coords.length,J,R[J],R[J+1]);return p};k.unquantizeOptimizedFeatureSet=function(p){const {transform:J,features:Q,hasM:R,hasZ:ha}=p;if(!J)return p;for(const ea of Q)W.isSome(ea.geometry)&&
ia(ea.geometry,ea.geometry,R,ha,J),ea.centroid&&ia(ea.centroid,ea.centroid,R,ha,J);p.transform=null;return p};k.unquantizeOptimizedGeometry=ia;k.unquantizeX=E;k.unquantizeY=n;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function k(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=
[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}k.prototype.weakClone=function(){const d=new k;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;
d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;return d};return k}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(k,d,Y){function W(A,w,t){u.minX=w[0];u.minY=w[1];u.maxX=w[2];u.maxY=w[3];A.search(u,t)}const u={minX:0,minY:0,maxX:0,maxY:0};let F=function(){function A(){this._indexInvalid=
!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Y.PooledRBush(9,d("esri-csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const t=Array(this._idByBounds.size);let r=0;this._idByBounds.forEach((G,y)=>{t[r++]=y});this._indexInvalid=!1;this._index.clear();this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(t=>this._idByBounds.has(t))),
this._boundsToLoad.length=0)}}var w=A.prototype;w.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};w.delete=function(t){const r=this._boundsById.get(t);this._boundsById.delete(t);r&&(this._idByBounds.delete(r),this._indexInvalid||this._index.remove(r))};w.forEachInBounds=function(t,r){this._loadIndex();W(this._index,t,G=>r(this._idByBounds.get(G)))};w.get=function(t){return this._boundsById.get(t)};w.has=function(t){return this._boundsById.has(t)};
w.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};w.set=function(t,r){if(!this._indexInvalid){const G=this._boundsById.get(t);G&&(this._index.remove(G),this._idByBounds.delete(G))}this._boundsById.set(t,r);r&&(this._idByBounds.set(r,t),this._indexInvalid||(this._boundsToLoad.push(r),5E4<this._boundsToLoad.length&&this._loadIndex()))};return A}();k.BoundsStore=F;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(k,d,Y,W,u,F){function A(U,ja){w(U,0,U.children.length,ja,U)}function w(U,ja,M,K,V){V||(V=new P([]));V.minX=Infinity;V.minY=Infinity;V.maxX=-Infinity;V.maxY=-Infinity;for(let N=ja,z;N<M;N++)z=U.children[N],t(V,U.leaf?K(z):z);return V}function t(U,ja){U.minX=Math.min(U.minX,ja.minX);U.minY=Math.min(U.minY,ja.minY);U.maxX=Math.max(U.maxX,ja.maxX);U.maxY=Math.max(U.maxY,ja.maxY)}function r(U,ja){return U.minX-ja.minX}function G(U,ja){return U.minY-ja.minY}function y(U){return(U.maxX-U.minX)*
(U.maxY-U.minY)}function E(U){return U.maxX-U.minX+(U.maxY-U.minY)}function n(U,ja){return U.minX<=ja.minX&&U.minY<=ja.minY&&ja.maxX<=U.maxX&&ja.maxY<=U.maxY}function v(U,ja){return ja.minX<=U.maxX&&ja.minY<=U.maxY&&ja.maxX>=U.minX&&ja.maxY>=U.minY}function a(U,ja,M,K,V){for(ja=[ja,M];ja.length;){M=W.assumeNonNull(ja.pop());const N=W.assumeNonNull(ja.pop());if(M-N<=K)continue;const z=N+Math.ceil((M-N)/K/2)*K;F.quickselect(U,z,N,M,V);ja.push(N,z,z,M)}}let e=function(){function U(M=9,K){this.compareMinX=
r;this.compareMinY=G;this.toBBox=function(V){return V};this._maxEntries=Math.max(4,M||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));K&&("function"===typeof K?this.toBBox=K:this._initFormat(K));this.clear()}var ja=U.prototype;ja.destroy=function(){this.clear();l.prune();B.prune();m.prune();H.prune()};ja.all=function(M){this._all(this.data,M)};ja.search=function(M,K){let V=this.data;const N=this.toBBox;if(v(M,V))for(l.clear();V;){for(let z=0,f=V.children.length;z<f;z++){const h=V.children[z],
C=V.leaf?N(h):h;v(M,C)&&(V.leaf?K(h):n(M,C)?this._all(h,K):l.push(h))}V=l.pop()}};ja.collides=function(M){let K=this.data;const V=this.toBBox;if(!v(M,K))return!1;for(l.clear();K;){for(let N=0,z=K.children.length;N<z;N++){const f=K.children[N],h=K.leaf?V(f):f;if(v(M,h)){if(K.leaf||n(M,h))return!0;l.push(f)}}K=l.pop()}return!1};ja.load=function(M){if(!M.length)return this;if(M.length<this._minEntries){for(let K=0,V=M.length;K<V;K++)this.insert(M[K]);return this}M=this._build(M.slice(0,M.length),0,M.length-
1,0);if(this.data.children.length)if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){const K=this.data;this.data=M;M=K}this._insert(M,this.data.height-M.height-1,!0)}else this.data=M;return this};ja.insert=function(M){M&&this._insert(M,this.data.height-1);return this};ja.clear=function(){this.data=new P([]);return this};ja.remove=function(M){if(!M)return this;let K=this.data,V=null,N=0,z=!1,f;const h=this.toBBox(M);m.clear();for(H.clear();K||0<m.length;){if(!K){var C;
K=W.assumeNonNull(m.pop());V=m.data[m.length-1];N=null!=(C=H.pop())?C:0;z=!0}if(K.leaf&&(f=Y.indexOf(K.children,M,K.children.length,K.indexHint),-1!==f)){K.children.splice(f,1);m.push(K);this._condense(m);break}z||K.leaf||!n(K,h)?V?(N++,K=V.children[N],z=!1):K=null:(m.push(K),H.push(N),N=0,V=K,K=K.children[0])}return this};ja.toJSON=function(){return this.data};ja.fromJSON=function(M){this.data=M;return this};ja._all=function(M,K){for(B.clear();M;){var V;if(!0===M.leaf)for(const N of M.children)K(N);
else B.pushArray(M.children);M=null!=(V=B.pop())?V:null}};ja._build=function(M,K,V,N){var z=V-K+1,f=this._maxEntries;if(z<=f)return M=new P(M.slice(K,V+1)),A(M,this.toBBox),M;N||(N=Math.ceil(Math.log(z)/Math.log(f)),f=Math.ceil(z/f**(N-1)));const h=new da([]);h.height=N;z=Math.ceil(z/f);f=z*Math.ceil(Math.sqrt(f));for(a(M,K,V,f,this.compareMinX);K<=V;K+=f){const C=Math.min(K+f-1,V);a(M,K,C,z,this.compareMinY);for(let S=K;S<=C;S+=z)h.children.push(this._build(M,S,Math.min(S+z-1,C),N-1))}A(h,this.toBBox);
return h};ja._chooseSubtree=function(M,K,V,N){for(;;){N.push(K);if(!0===K.leaf||N.length-1===V)break;let z=Infinity,f=Infinity,h=void 0;for(let C=0,S=K.children.length;C<S;C++){const ba=K.children[C],la=y(ba),ma=(Math.max(ba.maxX,M.maxX)-Math.min(ba.minX,M.minX))*(Math.max(ba.maxY,M.maxY)-Math.min(ba.minY,M.minY))-la;ma<f?(f=ma,z=la<z?la:z,h=ba):ma===f&&la<z&&(z=la,h=ba)}K=h||K.children[0]}return K};ja._insert=function(M,K,V){var N=this.toBBox;V=V?M:N(M);m.clear();N=this._chooseSubtree(V,this.data,
K,m);N.children.push(M);for(t(N,V);0<=K;)if(m.data[K].children.length>this._maxEntries)this._split(m,K),K--;else break;this._adjustParentBBoxes(V,m,K)};ja._split=function(M,K){const V=M.data[K];var N=V.children.length;const z=this._minEntries;this._chooseSplitAxis(V,z,N);(N=this._chooseSplitIndex(V,z,N))?(N=V.children.splice(N,V.children.length-N),N=V.leaf?new P(N):new da(N),N.height=V.height,A(V,this.toBBox),A(N,this.toBBox),K?M.data[K-1].children.push(N):this._splitRoot(V,N)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};
ja._splitRoot=function(M,K){this.data=new da([M,K]);this.data.height=M.height+1;A(this.data,this.toBBox)};ja._chooseSplitIndex=function(M,K,V){let N,z,f=void 0;N=z=Infinity;for(let C=K;C<=V-K;C++){var h=w(M,0,C,this.toBBox);const S=w(M,C,V,this.toBBox),ba=Math.max(0,Math.min(h.maxX,S.maxX)-Math.max(h.minX,S.minX))*Math.max(0,Math.min(h.maxY,S.maxY)-Math.max(h.minY,S.minY));h=y(h)+y(S);ba<N?(N=ba,f=C,z=h<z?h:z):ba===N&&h<z&&(z=h,f=C)}return f};ja._chooseSplitAxis=function(M,K,V){const N=M.leaf?this.compareMinX:
r,z=M.leaf?this.compareMinY:G,f=this._allDistMargin(M,K,V,N);K=this._allDistMargin(M,K,V,z);f<K&&M.children.sort(N)};ja._allDistMargin=function(M,K,V,N){M.children.sort(N);N=this.toBBox;var z=w(M,0,K,N);const f=w(M,V-K,V,N);let h=E(z)+E(f);for(let C=K;C<V-K;C++){const S=M.children[C];t(z,M.leaf?N(S):S);h+=E(z)}for(V=V-K-1;V>=K;V--)z=M.children[V],t(f,M.leaf?N(z):z),h+=E(f);return h};ja._adjustParentBBoxes=function(M,K,V){for(;0<=V;V--)t(K.data[V],M)};ja._condense=function(M){for(let K=M.length-1;0<=
K;K--){const V=M.data[K];if(0===V.children.length)if(0<K){const N=M.data[K-1],z=N.children;z.splice(Y.indexOf(z,V,z.length,N.indexHint),1)}else this.clear();else A(V,this.toBBox)}};ja._initFormat=function(M){const K=["return a"," - b",";"];this.compareMinX=new Function("a","b",K.join(M[0]));this.compareMinY=new Function("a","b",K.join(M[1]));this.toBBox=new Function("a","return {minX: a"+M[0]+", minY: a"+M[1]+", maxX: a"+M[2]+", maxY: a"+M[3]+"};")};return U}();const l=new u,B=new u,m=new u,H=new u({deallocator:void 0});
u=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let D=function(U){function ja(){var M=U.apply(this,arguments)||this;M.height=1;M.indexHint=new Y.PositionHint;return M}d._inheritsLoose(ja,U);return ja}(u),P=function(U){function ja(M){var K=U.call(this)||this;K.children=M;K.leaf=!0;return K}d._inheritsLoose(ja,U);return ja}(D),da=function(U){function ja(M){var K=U.call(this)||this;K.children=M;K.leaf=!1;return K}d._inheritsLoose(ja,U);return ja}(D);k.BBox=u;k.PooledRBush=e;
k.default=e;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(k){var d={exports:{}};(function(Y){(function(W){W=W();void 0!==W&&(Y.exports=W)})(function(){function W(A,w,t,r,G){for(;r>t;){if(600<r-t){var y=r-t+1,E=w-t+1,n=Math.log(y),v=.5*Math.exp(2*n/3);n=.5*Math.sqrt(n*v*(y-v)/y)*(0>E-y/2?-1:1);W(A,w,Math.max(t,Math.floor(w-E*v/y+n)),Math.min(r,Math.floor(w+(y-E)*v/y+n)),G)}y=A[w];E=t;v=r;u(A,t,w);for(0<G(A[r],y)&&u(A,t,r);E<v;){u(A,
E,v);E++;for(v--;0>G(A[E],y);)E++;for(;0<G(A[v],y);)v--}0===G(A[t],y)?u(A,t,v):(v++,u(A,v,r));v<=w&&(t=v+1);w<=v&&(r=v-1)}}function u(A,w,t){var r=A[w];A[w]=A[t];A[t]=r}function F(A,w){return A<w?-1:A>w?1:0}return function(A,w,t,r,G){W(A,w,t||0,r||A.length-1,G||F)}})})(d);k.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(k,d,Y,W){const u={getObjectId(F){return F.objectId},
getAttributes(F){return F.attributes},getAttribute(F,A){return F.attributes[A]},cloneWithGeometry(F,A){return new Y.default(A,F.attributes,null,F.objectId)},getGeometry(F){return F.geometry},getCentroid(F,A){F.centroid||(F.centroid=d.getCentroidOptimizedGeometry(new W,F.geometry,A.hasZ,A.hasM));return F.centroid}};k.default=u;k.optimizedFeatureQueryEngineAdapter=u;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(k,
d){function Y(u,F,A,w,t,r,G=1){r=t?r?4:3:r?3:2;let y=A,E=A+r,n=0,v=0,a=A=0,e=0;for(let l=0,B=w-1;l<B;l++,y+=r,E+=r){w=F[y];const m=F[y+1],H=F[y+2],D=F[E],P=F[E+1],da=F[E+2];let U=w*P-D*m;a+=U;n+=(w+D)*U;v+=(m+P)*U;t&&(U=w*da-D*H,A+=(H+da)*U,e+=U);w<u[0]&&(u[0]=w);w>u[1]&&(u[1]=w);m<u[2]&&(u[2]=m);m>u[3]&&(u[3]=m);t&&(H<u[4]&&(u[4]=H),H>u[5]&&(u[5]=H))}0<a*G&&(a*=-1);0<e*G&&(e*=-1);if(!a)return null;u=[n,v,.5*a];t&&(u[3]=A,u[4]=.5*e);return u}function W(u,F,A,w,t){t=w?t?4:3:t?3:2;let r=F,G=F+t,y=0,
E=0,n=0,v=0;for(let B=0,m=A-1;B<m;B++,r+=t,G+=t){var a=u[r];const H=u[r+1],D=u[r+2],P=u[G],da=u[G+1],U=u[G+2];if(w){{var e=P-a;var l=da-H;const ja=U-D;e=Math.sqrt(e*e+l*l+ja*ja)}}else e=P-a,l=da-H,e=Math.sqrt(e*e+l*l);e&&(y+=e,w?(a=[a+.5*(P-a),H+.5*(da-H),D+.5*(U-D)],E+=e*a[0],n+=e*a[1],v+=e*a[2]):(a=[a+.5*(P-a),H+.5*(da-H)],E+=e*a[0],n+=e*a[1]))}return 0<y?w?[E/y,n/y,v/y]:[E/y,n/y]:0<A?w?[u[F],u[F+1],u[F+2]]:[u[F],u[F+1]]:null}k.getCentroidOptimizedGeometry=function(u,F,A,w,t){if(d.isNone(F)||!F.lengths.length)return null;
const r="upperLeft"===(null==t?void 0:t.originPosition)?-1:1;u.lengths.length&&(u.lengths.length=0);u.coords.length&&(u.coords.length=0);t=u.coords;const G=[],y=A?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:E,coords:n}=F,v=A?w?4:3:w?3:2;let a=0;for(var e of E){const l=Y(y,n,a,e,A,w,
r);l&&G.push(l);a+=e*v}G.sort((l,B)=>{let m=r*l[2]-r*B[2];0===m&&A&&(m=l[4]-B[4]);return m});G.length&&(e=6*G[0][2],t[0]=G[0][0]/e,t[1]=G[0][1]/e,A&&(e=6*G[0][4],t[2]=0!==e?G[0][3]/e:0),t[0]<y[0]||t[0]>y[1]||t[1]<y[2]||t[1]>y[3]||A&&(t[2]<y[4]||t[2]>y[5]))&&(t.length=0);if(!t.length)if(F=F.lengths[0]?W(n,0,E[0],A,w):null)t[0]=F[0],t[1]=F[1],A&&2<F.length&&(t[2]=F[2]);else return null;return u};k.lineCentroid=W;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(k,d,Y,W,u,F,A){function w(a,e){if(!e)return null;if("x"in e){var l={x:0,y:0};[l.x,l.y]=a(e.x,e.y,y);null!=e.z&&(l.z=e.z);null!=e.m&&(l.m=e.m);return l}if("xmin"in e)return l={xmin:0,ymin:0,xmax:0,ymax:0},[l.xmin,l.ymin]=a(e.xmin,e.ymin,y),[l.xmax,l.ymax]=a(e.xmax,e.ymax,y),e.hasZ&&(l.zmin=e.zmin,l.zmax=e.zmax,l.hasZ=!0),e.hasM&&(l.mmin=e.mmin,l.mmax=e.mmax,l.hasM=!0),l;if("rings"in e)return{rings:t(e.rings,a),hasM:e.hasM,hasZ:e.hasZ};if("paths"in e)return{paths:t(e.paths,a),hasM:e.hasM,hasZ:e.hasZ};
if("points"in e)return{points:r(e.points,a),hasM:e.hasM,hasZ:e.hasZ}}function t(a,e){const l=[];for(const B of a)l.push(r(B,e));return l}function r(a,e){const l=[];for(const B of a)a=e(B[0],B[1],[0,0]),l.push(a),2<B.length&&a.push(B[2]),3<B.length&&a.push(B[3]);return l}function G(){G=d._asyncToGenerator(function*(a,e){e&&(a=Array.isArray(a)?a.map(l=>Y.isSome(l.geometry)&&l.geometry.spatialReference):[a],yield W.initializeProjection(a.map(l=>({source:l,dest:e}))))});return G.apply(this,arguments)}
const y=[0,0],E=w.bind(null,A.lngLatToXY),n=w.bind(null,A.xyToLngLat),v=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var e=a.prototype;e.push=function(){var l=d._asyncToGenerator(function*(B,m,H){if(!(B&&B.length&&m&&H)||F.equals(m,H))return B;const D={geometries:B,inSpatialReference:m,outSpatialReference:H,resolve:null};this._jobs.push(D);return new Promise(P=>{D.resolve=P;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(B,
m,H){return l.apply(this,arguments)}}();e._process=function(){this._timer=null;const l=this._jobs.shift();if(l){var {geometries:B,inSpatialReference:m,outSpatialReference:H,resolve:D}=l;A.canProject(m,H)?F.isWebMercator(H)?D(B.map(E)):D(B.map(n)):D(W.projectMany(u.jsonAdapter,B,m,H,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());k.checkProjectionSupport=function(a,e){return G.apply(this,arguments)};k.project=function(a,e,l){if(!a)return a;l||(l=e,e=a.spatialReference);
return F.isValid(e)&&F.isValid(l)&&!F.equals(e,l)?A.canProject(e,l)?F.isWebMercator(l)?E(a):n(a):W.projectMany(u.jsonAdapter,[a],e,l,null)[0]:a};k.projectMany=function(a,e,l){return v.push(a,e,l)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,d,Y,W,u,F,A,w,t,r,G,y,E,n,v,a,e,l,B,m,H,D,P){function da(z){return z.every(f=>"exceedslimit"!==f.statisticType)}const U=new Set,ja=new F.MemCacheStorage(2E6);let M=0,K=function(){function z(h){this.capabilities={query:a.queryCapabilities};this.geometryType=h.geometryType;this.hasM=h.hasM;this.hasZ=h.hasZ;this.objectIdField=h.objectIdField;this.spatialReference=h.spatialReference;this.definitionExpression=h.definitionExpression;this.featureStore=h.featureStore;this.aggregateAdapter=h.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=h.timeInfo;h.cacheSpatialQueries&&(this._geometryQueryCache=new F.MemCache(M++ +"$$",ja));this.fieldsIndex=new H(h.fields);h.scheduler&&h.priority&&(this._frameTask=h.scheduler.registerTask(h.priority))}var f=z.prototype;f.destroy=function(){this._frameTask=u.removeMaybe(this._frameTask);this.clearCache();u.destroyMaybe(this._geometryQueryCache);this._changeHandle=u.removeMaybe(this._changeHandle);u.destroyMaybe(this.fieldsIndex)};
f.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};f.executeQuery=function(){var h=d._asyncToGenerator(function*(C={},S){let ba=W.clone(C),la;try{ba=yield this._schedule(()=>m.normalizeQuery(ba,this.definitionExpression,this.spatialReference),S),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),S),la=yield this._reschedule(()=>this._executeGeometryQuery(ba,S),S),la=yield this._reschedule(()=>la.executeAggregateIdsQuery(ba),
S),la=yield this._reschedule(()=>la.executeObjectIdsQuery(ba),S),la=yield this._reschedule(()=>la.executeTimeQuery(ba),S),la=yield this._reschedule(()=>la.executeAttributesQuery(ba),S)}catch(ma){if(ma!==m.QUERY_ENGINE_EMPTY_RESULT)throw ma;la=new e([],null,this)}return la.createQueryResponse(ba)});return function(){return h.apply(this,arguments)}}();f.executeQueryForCount=function(){var h=d._asyncToGenerator(function*(C={},S){let ba=W.clone(C);ba.returnGeometry=!1;ba.returnCentroid=!1;ba.outSR=null;
try{ba=yield this._schedule(()=>m.normalizeQuery(ba,this.definitionExpression,this.spatialReference),S);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),S);let la=yield this._reschedule(()=>this._executeGeometryQuery(ba,S),S);la=yield this._reschedule(()=>la.executeAggregateIdsQuery(ba),S);la=yield this._reschedule(()=>la.executeObjectIdsQuery(ba),S);la=yield this._reschedule(()=>la.executeTimeQuery(ba),S);la=yield this._reschedule(()=>la.executeAttributesQuery(ba),S);return la.createQueryResponseForCount(ba)}catch(la){if(la!==
m.QUERY_ENGINE_EMPTY_RESULT)throw la;return 0}});return function(){return h.apply(this,arguments)}}();f.executeQueryForExtent=function(){var h=d._asyncToGenerator(function*(C={},S){let ba=W.clone(C),la;C=ba.outSR;try{ba=yield this._schedule(()=>m.normalizeQuery(ba,this.definitionExpression,this.spatialReference),S);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),S);ba.returnGeometry=!0;ba.returnCentroid=!1;ba.outSR=null;la=yield this._reschedule(()=>this._executeGeometryQuery(ba,S),S);la=
yield this._reschedule(()=>la.executeAggregateIdsQuery(ba),S);la=yield this._reschedule(()=>la.executeObjectIdsQuery(ba),S);la=yield this._reschedule(()=>la.executeTimeQuery(ba),S);la=yield this._reschedule(()=>la.executeAttributesQuery(ba),S);const ma=la.size;if(!ma)return{count:ma,extent:null};w.set(N,w.NEGATIVE_INFINITY);this.featureStore.forEachBounds(la.items,ia=>w.expandWithAABB(N,ia),V);const oa={xmin:N[0],ymin:N[1],xmax:N[3],ymax:N[4],spatialReference:m.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(N[2])&&isFinite(N[5])&&(oa.zmin=N[2],oa.zmax=N[5]);const fa=v.project(oa,la.spatialReference,C);fa.spatialReference=m.cleanFromGeometryEngine(C||this.spatialReference);if(0===fa.xmax-fa.xmin){const ia=A.getMetersPerUnitForSR(fa.spatialReference);fa.xmin-=ia;fa.xmax+=ia}if(0===fa.ymax-fa.ymin){const ia=A.getMetersPerUnitForSR(fa.spatialReference);fa.ymin-=ia;fa.ymax+=ia}if(this.hasZ&&null!=fa.zmin&&null!=fa.zmax&&0===fa.zmax-fa.zmin){const ia=A.getMetersPerUnitForSR(fa.spatialReference);
fa.zmin-=ia;fa.zmax+=ia}return{count:ma,extent:fa}}catch(ma){if(ma===m.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ma;}});return function(){return h.apply(this,arguments)}}();f.executeQueryForIds=function(){var h=d._asyncToGenerator(function*(C={},S){return this.executeQueryForIdSet(C,S).then(ba=>Array.from(ba))});return function(){return h.apply(this,arguments)}}();f.executeQueryForIdSet=function(){var h=d._asyncToGenerator(function*(C={},S){let ba=W.clone(C),la;ba.returnGeometry=
!1;ba.returnCentroid=!1;ba.outSR=null;try{ba=yield this._schedule(()=>m.normalizeQuery(ba,this.definitionExpression,this.spatialReference),S);ba=yield this._reschedule(()=>this._checkQuerySupport(ba),S);la=yield this._reschedule(()=>this._executeGeometryQuery(ba,S),S);la=yield this._reschedule(()=>la.executeAggregateIdsQuery(ba),S);la=yield this._reschedule(()=>la.executeObjectIdsQuery(ba),S);la=yield this._reschedule(()=>la.executeTimeQuery(ba),S);la=yield this._reschedule(()=>la.executeAttributesQuery(ba),
S);const ma=la.items,oa=new Set;yield this._reschedule(()=>{for(const fa of ma)oa.add(la.featureAdapter.getObjectId(fa))},S);return oa}catch(ma){if(ma===m.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ma;}});return function(){return h.apply(this,arguments)}}();f.executeQueryForSnapping=function(){var h=d._asyncToGenerator(function*(C,S){const {point:ba,distance:la,types:ma}=C;if(0===ma)return{candidates:[]};const oa=yield this._reschedule(()=>this._checkQuerySupport(C.query),S),fa=!E.equals(ba.spatialReference,
this.spatialReference);fa&&(yield v.checkProjectionSupport(ba.spatialReference,this.spatialReference));var ia="number"===typeof la?la:la.x,ra="number"===typeof la?la:la.y;ia={xmin:ba.x-ia,xmax:ba.x+ia,ymin:ba.y-ra,ymax:ba.y+ra,spatialReference:ba.spatialReference};ia=fa?v.project(ia,this.spatialReference):ia;if(!ia)return{candidates:[]};ra=(yield y.normalizeCentralMeridian(G.fromJSON(ba),null,{signal:S}))[0];const Aa=(yield y.normalizeCentralMeridian(G.fromJSON(ia),null,{signal:S}))[0];if(u.isNone(ra)||
u.isNone(Aa))return{candidates:[]};let xa=new e(this._searchFeatures(this._getQueryBBoxes(Aa.toJSON())),null,this);xa=yield this._reschedule(()=>xa.executeObjectIdsQuery(oa),S);xa=yield this._reschedule(()=>xa.executeTimeQuery(oa),S);xa=yield this._reschedule(()=>xa.executeAttributesQuery(oa),S);S=ra.toJSON();S=fa?v.project(S,this.spatialReference):S;return xa.createSnappingResponse({...C,point:S,distance:fa?Math.max(ia.xmax-ia.xmin,ia.ymax-ia.ymin)/2:la},ba.spatialReference)});return function(C,
S){return h.apply(this,arguments)}}();f.executeQueryForLatestObservations=function(){var h=d._asyncToGenerator(function*(C={},S){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new Y("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:C,timeInfo:this.timeInfo});let ba=W.clone(C),la;try{ba=yield this._schedule(()=>m.normalizeQuery(ba,this.definitionExpression,this.spatialReference),S),ba=yield this._reschedule(()=>this._checkQuerySupport(ba),S),la=yield this._reschedule(()=>
this._executeGeometryQuery(ba,S),S),la=yield this._reschedule(()=>la.executeAggregateIdsQuery(ba),S),la=yield this._reschedule(()=>la.executeObjectIdsQuery(ba),S),la=yield this._reschedule(()=>la.executeTimeQuery(ba),S),la=yield this._reschedule(()=>la.executeAttributesQuery(ba),S),la=yield this._reschedule(()=>la.filterLatest(),S)}catch(ma){if(ma!==m.QUERY_ENGINE_EMPTY_RESULT)throw ma;la=new e([],null,this)}return la.createQueryResponse(ba)});return function(){return h.apply(this,arguments)}}();
f.executeQueryForSummaryStatistics=function(){var h=d._asyncToGenerator(function*(C={},S,ba){const {field:la,normalizationField:ma,valueExpression:oa}=S;return(yield this._getQueryEngineResultForStats(C,{field:la,normalizationField:ma,valueExpression:oa},ba)).createSummaryStatisticsResponse(C,S)});return function(){return h.apply(this,arguments)}}();f.executeQueryForUniqueValues=function(){var h=d._asyncToGenerator(function*(C={},S,ba){const {field:la,valueExpression:ma}=S;return(yield this._getQueryEngineResultForStats(C,
{field:la,valueExpression:ma},ba)).createUniqueValuesResponse(C,S)});return function(){return h.apply(this,arguments)}}();f.executeQueryForClassBreaks=function(){var h=d._asyncToGenerator(function*(C={},S,ba){const {field:la,normalizationField:ma,valueExpression:oa}=S;return(yield this._getQueryEngineResultForStats(C,{field:la,normalizationField:ma,valueExpression:oa},ba)).createClassBreaksResponse(C,S)});return function(){return h.apply(this,arguments)}}();f.executeQueryForHistogram=function(){var h=
d._asyncToGenerator(function*(C={},S,ba){const {field:la,normalizationField:ma,valueExpression:oa}=S;return(yield this._getQueryEngineResultForStats(C,{field:la,normalizationField:ma,valueExpression:oa},ba)).createHistogramResponse(C,S)});return function(){return h.apply(this,arguments)}}();f._schedule=function(){var h=d._asyncToGenerator(function*(C,S){return u.isSome(this._frameTask)?this._frameTask.schedule(C,S):C(P.noBudget)});return function(C,S){return h.apply(this,arguments)}}();f._reschedule=
function(){var h=d._asyncToGenerator(function*(C,S){return u.isSome(this._frameTask)?this._frameTask.reschedule(C,S):C(P.noBudget)});return function(C,S){return h.apply(this,arguments)}}();f._getAll=function(){if(!this._allItems){const h=[];this.featureStore.forEach(C=>h.push(C));this._allItems=new e(h,null,this)}return this._allItems};f._executeGeometryQuery=function(){var h=d._asyncToGenerator(function*(C,S){var ba=this;const {geometry:la,outSR:ma,spatialRel:oa,returnGeometry:fa,returnCentroid:ia}=
C,ra=fa||ia,Aa=E.isValid(ma)&&!E.equals(this.spatialReference,ma),xa=this._geometryQueryCache?Aa&&ra?JSON.stringify({geometry:la,spatialRelationship:oa,outSpatialReference:ma}):JSON.stringify({geometry:la,spatialRelationship:oa}):null;if(xa){var La=this._geometryQueryCache.get(xa);if(!u.isUndefined(La))return La}La=function(){var q=d._asyncToGenerator(function*(ca){if(Aa&&ra)return ca=yield ca.project(ma),xa&&ba._geometryQueryCache.put(xa,ca,ca.size||1),ca;xa&&ba._geometryQueryCache.put(xa,ca,ca.size||
1);return ca});return function(ca){return q.apply(this,arguments)}}();if(!la)return La(this._getAll());const Ga=this.featureAdapter;if("esriSpatialRelDisjoint"===oa){C=this._searchFeatures(this._getQueryBBoxes(la));if(!C.length)return La(this._getAll());let q,ca;const p=new Set;for(var Ea of C)p.add(Ga.getObjectId(Ea));yield this._reschedule(()=>{let J=0;q=Array(p.size);this.featureStore.forEach(Q=>q[J++]=Q);ca=p},S);C=yield this._reschedule(d._asyncToGenerator(function*(){const J=yield l.getSpatialQueryOperator(oa,
la,ba.geometryType,ba.hasZ,ba.hasM);return new e(yield ba._runSpatialFilter(q,Q=>!ca.has(Ga.getObjectId(Q))||J(Ga.getGeometry(Q)),S),la,ba)}),S);return La(C)}Ea=this._searchFeatures(this._getQueryBBoxes(la));if(!Ea.length)return La=new e([],la,this),xa&&this._geometryQueryCache.put(xa,La,La.size||1),La;if(this._canExecuteSoloPass(la,C))return La(new e(Ea,la,this));const c=yield l.getSpatialQueryOperator(oa,la,this.geometryType,this.hasZ,this.hasM);C=yield this._runSpatialFilter(Ea,q=>c(Ga.getGeometry(q)),
S);return La(new e(C,la,this))});return function(C,S){return h.apply(this,arguments)}}();f._runSpatialFilter=function(){var h=d._asyncToGenerator(function*(C,S,ba){var la=this;if(!S)return C;if(u.isNone(this._frameTask))return C.filter(ia=>S(ia));let ma=0;const oa=[],fa=function(){var ia=d._asyncToGenerator(function*(ra){for(;ma<C.length;){const Aa=C[ma++];S(Aa)&&(oa.push(Aa),ra.madeProgress());ra.done&&(yield la._reschedule(xa=>fa(xa),ba))}});return function(ra){return ia.apply(this,arguments)}}();
return this._reschedule(ia=>fa(ia),ba).then(()=>oa)});return function(C,S,ba){return h.apply(this,arguments)}}();f._canExecuteSoloPass=function(h,C){const {geometryType:S}=this;({spatialRel:C}=C);return l.canQueryWithRBush(h)&&("esriSpatialRelEnvelopeIntersects"===C||"esriGeometryPoint"===S&&("esriSpatialRelIntersects"===C||"esriSpatialRelContains"===C||"esriSpatialRelWithin"===C))};f._getQueryBBoxes=function(h){if(l.canQueryWithRBush(h)){if(G.isExtent(h))return[t.fromValues(h.xmin,h.ymin,h.xmax,
h.ymax)];if(G.isPolygon(h))return h.rings.map(C=>t.fromValues(Math.min(C[0][0],C[2][0]),Math.min(C[0][1],C[2][1]),Math.max(C[0][0],C[2][0]),Math.max(C[0][1],C[2][1])))}return[r.getBoundsXY(t.create(),h)]};f._searchFeatures=function(h){for(const ba of h)this.featureStore.forEachInBounds(ba,la=>{U.add(la)});const C=Array(U.size);let S=0;U.forEach(ba=>C[S++]=ba);U.clear();return C};f._checkStatisticsSupport=function(){var h=d._asyncToGenerator(function*(C,S){if(0>C.distance||null!=C.geometryPrecision||
C.multipatchOption||C.pixelSize||C.relationParam||C.text||C.outStatistics||C.groupByFieldsForStatistics||C.having||C.orderByFields)throw new Y("feature-store:unsupported-query","Unsupported query options",{query:C});return Promise.all([this._checkAttributesQuerySupport(C),this._checkStatisticsParamsSupport(S),l.checkSpatialQuerySupport(C,this.geometryType,this.spatialReference),v.checkProjectionSupport(this.spatialReference,C.outSR)]).then(()=>C)});return function(C,S){return h.apply(this,arguments)}}();
f._checkStatisticsParamsSupport=function(){var h=d._asyncToGenerator(function*(C){var S=[];C.valueExpression&&({arcadeUtils:S}=yield D.loadArcade(),S=S.extractFieldNames(C.valueExpression));C.field&&S.push(C.field);C.normalizationField&&S.push(C.normalizationField);if(!S.length)throw new Y("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:C});n.validateFields(this.fieldsIndex,S,"params contains missing fields")});return function(C){return h.apply(this,
arguments)}}();f._checkQuerySupport=function(){var h=d._asyncToGenerator(function*(C){if(0>C.distance||null!=C.geometryPrecision||C.multipatchOption||C.pixelSize||C.relationParam||C.text)throw new Y("feature-store:unsupported-query","Unsupported query options",{query:C});return Promise.all([this._checkAttributesQuerySupport(C),this._checkStatisticsQuerySupport(C),l.checkSpatialQuerySupport(C,this.geometryType,this.spatialReference),v.checkProjectionSupport(this.spatialReference,C.outSR)]).then(()=>
C)});return function(C){return h.apply(this,arguments)}}();f._checkAttributesQuerySupport=function(h){const {outFields:C,orderByFields:S,returnDistinctValues:ba,outStatistics:la}=h,ma=la?la.map(oa=>oa.outStatisticFieldName&&oa.outStatisticFieldName.toLowerCase()):[];if(S&&0<S.length){const oa=S.map(fa=>{const ia=fa.toLowerCase();return-1<ia.indexOf(" asc")?ia.split(" asc")[0]:-1<ia.indexOf(" desc")?ia.split(" desc")[0]:fa}).filter(fa=>-1===ma.indexOf(fa));n.validateFields(this.fieldsIndex,oa,"orderByFields contains missing fields")}if(C&&
0<C.length)n.validateFields(this.fieldsIndex,C,"outFields contains missing fields");else if(ba)throw new Y("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:h});n.validateWhere(this.fieldsIndex,h.where)};f._checkStatisticsQuerySupport=function(){var h=d._asyncToGenerator(function*(C){const {outStatistics:S,groupByFieldsForStatistics:ba,having:la}=C;var ma=ba&&ba.length,oa=S&&S.length;if(la){if(!ma||!oa)throw new Y("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",
{query:C});n.validateHaving(this.fieldsIndex,la,S)}if(oa&&da(S)){oa=S.map(fa=>fa.onStatisticField);n.validateFields(this.fieldsIndex,oa,"onStatisticFields contains missing fields");ma&&n.validateFields(this.fieldsIndex,ba,"groupByFieldsForStatistics contains missing fields");for(const fa of S){const {onStatisticField:ia,statisticType:ra}=fa;if(("percentile_disc"===ra||"percentile_cont"===ra)&&"statisticParameters"in fa){if({statisticParameters:ma}=fa,!ma)throw new Y("feature-store:unsupported-query",
"statisticParamters should be set for percentile type",{definition:fa,query:C});}else if("count"!==ra&&ia&&n.hasInvalidFieldType(ia,this.fieldsIndex))throw new Y("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:fa,query:C});}}});return function(C){return h.apply(this,arguments)}}();f._getQueryEngineResultForStats=function(){var h=d._asyncToGenerator(function*(C={},S,ba){C=W.clone(C);let la;try{C=yield this._schedule(()=>m.normalizeQuery(C,this.definitionExpression,
this.spatialReference),ba),C=yield this._reschedule(()=>this._checkStatisticsSupport(C,S),ba),la=yield this._reschedule(()=>this._executeGeometryQuery(C,ba),ba),la=yield this._reschedule(()=>la.executeAggregateIdsQuery(C),ba),la=yield this._reschedule(()=>la.executeObjectIdsQuery(C),ba),la=yield this._reschedule(()=>la.executeTimeQuery(C),ba),la=yield this._reschedule(()=>la.executeAttributesQuery(C),ba)}catch(ma){if(ma!==m.QUERY_ENGINE_EMPTY_RESULT)throw ma;la=new e([],null,this)}return la});return function(){return h.apply(this,
arguments)}}();d._createClass(z,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const h=this.featureStore.fullBounds;return h?{xmin:h[0],ymin:h[1],xmax:h[2],ymax:h[3],spatialReference:m.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=B.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return z}();const V=w.create(),N=
w.create();k.Feature=function(z,f=null,h,C,S){this.attributes=z;this.geometry=h;this.centroid=C;this.filterFlags=S;this.groupId=-1;this.displayId=f};k.default=K;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(k,d,Y,W){let u=function(){function A(t,r,G){this._namespace=t;this._storage=r;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=
":";G&&(this._storage.registerRemoveFunc(this._namespace,G),this._removeFunc=!0)}var w=A.prototype;w.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};w.resetHitRate=function(){this._hit=this._miss=0};w.put=function(t,r,G,y=0){this._storage.put(this._namespace+t,r,G,y)};w.get=function(t){t=this._storage.get(this._namespace+t);void 0===t?++this._miss:++this._hit;return t};
w.pop=function(t){t=this._storage.pop(this._namespace+t);void 0===t?++this._miss:++this._hit;return t};w.updateSize=function(t,r,G){this._storage.updateSize(this._namespace+t,r,G)};w.clear=function(){this._storage.clear(this._namespace)};w.clearAll=function(){this._storage.clearAll()};w.getStats=function(){return this._storage.getStats()};w.resetStats=function(){this._storage.resetStats()};d._createClass(A,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/
(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return A}(),F=function(){function A(t=10485760){this._maxSize=t;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new W;this._users=new W}var w=A.prototype;w.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};w.register=function(t){this._users.push(t)};w.deregister=function(t){this._users.removeUnordered(t)};
w.registerRemoveFunc=function(t,r){this._removeFuncs.push([t,r])};w.deregisterRemoveFunc=function(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)};w.put=function(t,r,G,y){const E=this._db.get(t);E&&(this._size-=E.size,this._db.delete(t),E.entry!==r&&this._notifyRemove(t,E.entry,0));G>this._maxSize?this._notifyRemove(t,r,0):void 0===r?console.warn("Refusing to cache undefined entry "):!G||0>G?console.warn("Refusing to cache entry with invalid size "+G):(y=1+Math.max(y,-3)- -3,this._db.set(t,{entry:r,
size:G,lifetime:y,lives:y}),this._size+=G,this._checkSizeLimit())};w.updateSize=function(t,r,G){const y=this._db.get(t);if(y&&y.entry===r){for(this._size-=y.size;G>this._maxSize;)if(G=this._notifyRemove(t,r,1),!(Y.isSome(G)&&0<G)){this._db.delete(t);return}y.size=G;this._size+=G;this._checkSizeLimit()}};w.pop=function(t){const r=this._db.get(t);if(r)return this._size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss};w.get=function(t){const r=this._db.get(t);if(void 0===r)++this._miss;else return this._db.delete(t),
r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry};w.getStats=function(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},G=[];this._db.forEach((n,v)=>{const a=n.lifetime;G[a]=(G[a]||0)+n.size;this._users.forAll(e=>{e=e.namespace;v.startsWith(e)&&(r[e]=(r[e]||0)+n.size)})});const y={};this._users.forAll(n=>{const v=n.namespace;!isNaN(n.hitRate)&&0<n.hitRate?(r[v]=
r[v]||0,y[v]=Math.round(100*n.hitRate)+"%"):y[v]="0%"});var E=Object.keys(r);E.sort((n,v)=>r[v]-r[n]);E.forEach(n=>t[n]=Math.round(r[n]/2**20)+"MB / "+y[n]);for(E=G.length-1;0<=E;--E){const n=G[E];n&&(t["Priority "+(E+-3-1)]=Math.round(n/this.size*100)+"%")}return t};w.resetStats=function(){this._hit=this._miss=0;this._users.forAll(t=>t.resetHitRate())};w.clear=function(t){this._db.forEach((r,G)=>{G.startsWith(t)&&(this._size-=r.size,this._db.delete(G),this._notifyRemove(G,r.entry,0))})};w.clearAll=
function(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,0));this._size=0;this._db.clear()};w._getHitRate=function(){return this._hit/(this._hit+this._miss)};w._notifyRemove=function(t,r,G){let y;this._removeFuncs.some(E=>t.startsWith(E[0])?(E=E[1](r,G),"number"===typeof E&&(y=E),!0):!1);return y};w._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [t,r]of this._db){this._db.delete(t);if(1>=r.lives){this._size-=r.size;const G=this._notifyRemove(t,r.entry,1);Y.isSome(G)&&
0<G&&(this._size+=G,r.lives=r.lifetime,r.size=G,this._db.set(t,r))}else--r.lives,this._db.set(t,r);if(this._size<=.9*this.maxSize)break}};d._createClass(A,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(t){this._maxSize=Math.max(t,0);this._checkSizeLimit()}}]);return A}();k.MIN_PRIORITY=-3;k.MemCache=u;k.MemCacheStorage=F;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(k,d,Y,W,u,F,A,w,t,r,G,y,E){function n(D){const P=[];let da=0,U=0;for(let ja=0;ja<D.length;ja++){const M=D[ja];let K=null;for(let V=0;V<M.length;V++)K=M[V],P.push(K),0===V?U=da=K[0]:(da=Math.min(da,K[0]),U=Math.max(U,K[0]));K&&P.push([(da+U)/2,0])}return P}function v(D,P){if(!(D instanceof w||D instanceof A))throw H.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new W("straightLineDensify: the input geometry is neither polyline nor polygon");var da=t.getGeometryParts(D);
const U=[];for(const M of da){da=[];U.push(da);da.push([M[0][0],M[0][1]]);for(let K=0;K<M.length-1;K++){const V=M[K][0],N=M[K][1],z=M[K+1][0],f=M[K+1][1];var ja=Math.sqrt((z-V)*(z-V)+(f-N)*(f-N));const h=(f-N)/ja,C=(z-V)/ja,S=ja/P;if(1<S){for(let ba=1;ba<=S-1;ba++){const la=ba*P;da.push([C*la+V,h*la+N])}ja=(ja+Math.floor(S-1)*P)/2;da.push([C*ja+V,h*ja+N])}da.push([z,f])}}return"polygon"===D.type?new A({rings:U,spatialReference:D.spatialReference}):new w({paths:U,spatialReference:D.spatialReference})}
function a(D,P,da){P&&(D=v(D,1E6),D=G.webMercatorToGeographic(D,!0));da&&(D=t.updatePolyGeometry(D,da));return D}function e(D,P,da){if(Array.isArray(D)){var U=D[0];U>P?(da=t.offsetMagnitude(U,P),D[0]=U+-2*da*P):U<da&&(P=t.offsetMagnitude(U,da),D[0]=U+-2*P*da)}else U=D.x,U>P?(da=t.offsetMagnitude(U,P),D=D.clone().offset(-2*da*P,0)):U<da&&(P=t.offsetMagnitude(U,da),D=D.clone().offset(-2*P*da,0));return D}function l(D,P){let da=-1;for(let U=0;U<P.cutIndexes.length;U++){const ja=P.cutIndexes[U],M=P.geometries[U],
K=t.getGeometryParts(M);for(let V=0;V<K.length;V++){const N=K[V];N.some(z=>{if(180>z[0])return!0;z=0;for(var f=0;f<N.length;f++){var h=N[f][0];z=h>z?h:z}z=Number(z.toFixed(9));z=-360*t.offsetMagnitude(z,180);for(f=0;f<N.length;f++)h=M.getPoint(V,f),M.setPoint(V,f,h.clone().offset(z,0));return!0})}if(ja===da)if("polygon"===D[0].type)for(const V of t.getGeometryParts(M))D[ja]=D[ja].addRing(V);else{if("polyline"===D[0].type)for(const V of t.getGeometryParts(M))D[ja]=D[ja].addPath(V)}else da=ja,D[ja]=
M}return D}function B(D,P,da){return m.apply(this,arguments)}function m(){m=d._asyncToGenerator(function*(D,P,da){var U;if(!Array.isArray(D))return B([D],P);P=null!=(U=null==P?void 0:P.url)?U:Y.geometryServiceUrl;let ja,M,K;let V=0;var N=[];U=[];for(var z of D)if(F.isNone(z))U.push(z);else{if(!f){var f=z.spatialReference;var h=r.getInfo(f);var C=(ja=f.isWebMercator)?102100:4326;M=t.cutParams[C].maxX;K=t.cutParams[C].minX;var S=t.cutParams[C].plus180Line;C=t.cutParams[C].minus180Line}if(h)if("mesh"===
z.type)U.push(z);else if("point"===z.type)U.push(e(z.clone(),M,K));else if("multipoint"===z.type){var ba=z.clone();ba.points=ba.points.map(la=>e(la,M,K));U.push(ba)}else if("extent"===z.type)ba=z.clone()._normalize(!1,!1,h),U.push(ba.rings?new A(ba):ba);else if(z.extent){ba=z.extent;const la=2*t.offsetMagnitude(ba.xmin,K)*M;let ma=0===la?z.clone():t.updatePolyGeometry(z.clone(),la);ba.offset(la,0);ba.intersects(S)&&ba.xmax!==M?(V=ba.xmax>V?ba.xmax:V,ma=a(ma,ja),N.push(ma),U.push("cut")):ba.intersects(C)&&
ba.xmin!==K?(V=2*ba.xmax*M>V?2*ba.xmax*M:V,ma=a(ma,ja,360),N.push(ma),U.push("cut")):U.push(ma)}else U.push(z.clone());else U.push(z)}f=t.offsetMagnitude(V,M);h=-90;S=f;for(z=new w;0<f;)C=-180+360*f,z.addPath([[C,h],[C,-1*h]]),h*=-1,f--;if(0<N.length&&0<S){f=yield y.cut(P,N,z,da);f=l(N,f);h=[];N=[];for(S=0;S<U.length;S++)z=U[S],"cut"!==z?N.push(z):(z=f.shift(),C=D[S],F.isSome(C)&&"polygon"===C.type&&C.rings&&1<C.rings.length&&z.rings.length>=C.rings.length?(h.push(z),N.push("simplify")):N.push(ja?
G.geographicToWebMercator(z):z));if(!h.length)return N;U=yield E.simplify(P,h,da);D=[];for(da=0;da<N.length;da++)P=N[da],"simplify"!==P?D.push(P):D.push(ja?G.geographicToWebMercator(U.shift()):U.shift());return D}D=[];for(da=0;da<U.length;da++)P=U[da],"cut"!==P?D.push(P):(P=N.shift(),D.push(!0===ja?G.geographicToWebMercator(P):P));return Promise.resolve(D)});return m.apply(this,arguments)}const H=u.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=function(D){if(!D)return null;
const P=D.extent;if(!P)return null;var da=D.spatialReference&&r.getInfo(D.spatialReference);if(!da)return P;const [U,ja]=da.valid;({width:da}=P);let {xmin:M,xmax:K}=P;[M,K]=[K,M];if("extent"===D.type||0===da||da<=ja||da>2*ja||M<U||K>ja)return P;let V;switch(D.type){case "polygon":if(1<D.rings.length)V=n(D.rings);else return P;break;case "polyline":if(1<D.paths.length)V=n(D.paths);else return P;break;case "multipoint":V=D.points}D=P.clone();for(let N=0;N<V.length;N++){let z=V[N][0];0>z?(z+=ja,K=Math.max(z,
K)):(z-=ja,M=Math.min(z,M))}D.xmin=M;D.xmax=K;return D.width<da?(D.xmin-=ja,D.xmax-=ja,D):P};k.normalizeCentralMeridian=B;k.normalizeMapX=function(D,P){if(P=r.getInfo(P)){const [da,U]=P.valid;P=U-da;if(D<da)for(;D<da;)D+=P;if(D>U)for(;D>U;)D-=P}return D};k.straightLineDensify=v;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(k,d,Y,W){function u(A){return W.isPolygon(A)?
A.rings:A.paths}const F={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Y.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Y.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:Y.WGS84}),minus180Line:new d({paths:[[[-180,
-180],[-180,180]]],spatialReference:Y.WGS84})}};k.cutParams=F;k.getGeometryParts=u;k.getSpatialReferenceMinMaxX=function(A){A=(null==A?0:A.isWebMercator)?102100:4326;return[F[A].minX,F[A].maxX]};k.offsetMagnitude=function(A,w){return Math.ceil((A-w)/(2*w))};k.updatePolyGeometry=function(A,w){const t=u(A);for(const r of t)for(const G of r)G[0]+=w;return A};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(k,d,Y,W,u,F){function A(){A=d._asyncToGenerator(function*(w,t,r,G){w="string"===typeof w?u.urlToObject(w):w;const y=t[0].spatialReference;t={...G,query:{...w.query,f:"json",sr:JSON.stringify(y),target:JSON.stringify({geometryType:F.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(r)}};t=yield W(w.path+"/cut",t);const {cutIndexes:E,geometries:n=[]}=t.data;return{cutIndexes:E,geometries:n.map(v=>{v=F.fromJSON(v);v.spatialReference=y;return v})}});return A.apply(this,arguments)}k.cut=
function(w,t,r,G){return A.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(k,d,Y,W,u){function F(){F=d._asyncToGenerator(function*(t,r,G){const y="string"===typeof t?W.urlToObject(t):t;t=r[0].spatialReference;const E=u.getJsonType(r[0]);r={...G,query:{...y.query,f:"json",sr:t.wkid?t.wkid:JSON.stringify(t),
geometries:JSON.stringify(A(r))}};r=yield Y(y.path+"/simplify",r);return w(r.data,E,t)});return F.apply(this,arguments)}function A(t){return{geometryType:u.getJsonType(t[0]),geometries:t.map(r=>r.toJSON())}}function w(t,r,G){const y=u.getGeometryType(r);return t.map(E=>{E=y.fromJSON(E);E.spatialReference=G;return E})}k.simplify=function(t,r,G){return F.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(k,d,Y){function W(t,r){return t?A.get(t,r):null}function u(t,r,G,y=!0){const E=[];for(const n of r)if("*"!==n&&!t.has(n))if(y){r=F(n);try{const v=W(r,t);if(!v)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!v.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:v});u(t,v.fieldNames,"expression contains missing fields")}catch(v){if((r=v&&v.details)&&
(r.clause||r.where))throw v;r&&r.missingFields?E.push(...r.missingFields):E.push(n)}}else E.push(n);if(E.length)throw new d("feature-store:unsupported-query",G,{missingFields:E});}function F(t){return t.split(" as ")[0]}const A=new Y.WhereClauseCache(50,500),w=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));k.getAliasFromFieldName=function(t){return t.split(" as ")[1]};k.getExpressionFromFieldName=
F;k.getWhereClause=W;k.hasInvalidFieldType=function(t,r){return(t=r.get(t))?!w.has(t.type):!1};k.validateFields=u;k.validateHaving=function(t,r,G){if(!r)return!0;const y=A.get(r,t);if(!y)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:r});if(!y.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:r});u(t,y.fieldNames,"having contains missing fields");if(!y.getExpressions().every(E=>{const {aggregateType:n,
field:v}=E,a=t.has(v)&&t.get(v).name;return G.some(e=>{const {onStatisticField:l,statisticType:B}=e;return(t.has(l)&&t.get(l).name)===a&&B.toLowerCase().trim()===n})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:r});return!0};k.validateWhere=function(t,r){if(!r)return!0;const G=A.get(r,t);if(!G)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!G.isStandardized)throw new d("feature-store:unsupported-query",
"where clause is not standard",{where:r});u(t,G.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(k,d,Y){let W=function(){function u(F,A){this._cache=new d(F);this._invalidCache=new d(A)}u.prototype.get=function(F,A){const w=`${A.uid}:${F}`,t=this._cache.get(w);if(t)return t;if(void 0!==this._invalidCache.get(w))return null;try{const r=
Y.WhereClause.create(F,A);this._cache.put(w,r);return r}catch{return this._invalidCache.put(w,null),null}};return u}();k.WhereClauseCache=W;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(k){return function(){function d(W,u){this._storage=new k.MemCacheStorage;this._storage.maxSize=W;u&&this._storage.registerRemoveFunc("",u)}var Y=d.prototype;Y.put=function(W,u){this._storage.put(W,u,1,1)};Y.pop=function(W){return this._storage.pop(W)};
Y.get=function(W){return this._storage.get(W)};Y.clear=function(){this._storage.clearAll()};Y.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,d,Y,W,u,F){function A(N,z){N+="";return N.length>=z?N:Array(z-N.length+1).join("0")+N}function w(N,z,f="0",h="0",C="0",S="0",ba="",la="0",ma="0"){return"+"===ba||"-"===
ba?(N=`${A(parseInt(N,10),4)}-${A(parseInt(z,10),2)}-${A(parseInt(f,10),2)}`,z="",10>parseFloat(S)&&(z="0"),h=`${A(parseInt(h,10),2)}:${A(parseInt(C,10),2)}:${z+parseFloat(S).toString()}`,ba=`${ba}${A(parseInt(la,10),2)}:${A(parseInt(ma,10),2)}`,new Date(N+"T"+h+ba)):new Date(parseInt(N,10),parseInt(z,10)-1,parseInt(f,10),parseInt(h,10),parseInt(C,10),parseFloat(S))}function t(N){let z=D.exec(N);if(null!==z){const [,f,h,C,S,ba,la]=z;return w(f,h,C,S,ba,la)}z=P.exec(N);if(null!==z){const [,f,h,C,S,
ba,la,ma,oa,fa]=z;return w(f,h,C,S,ba,la,ma,oa,fa)}z=da.exec(N);if(null!==z){const [,f,h,C,S,ba,la,ma,oa]=z;return w(f,h,C,S,ba,"0",la,ma,oa)}z=U.exec(N);if(null!==z){const [,f,h,C,S,ba]=z;return w(f,h,C,S,ba)}z=H.exec(N);if(null!==z){const [,f,h,C]=z;return w(f,h,C)}throw Error("SQL Invalid Timestamp");}function r(N){N=H.exec(N);if(null===N)throw Error("SQL Invalid Date");const [,z,f,h]=N;return new Date(parseInt(z,10),parseInt(f,10)-1,parseInt(h,10))}function G(N){return Array.isArray(N)?N:[N]}
function y(N){return null!==N?!0!==N:null}function E(N,z){return null!=N&&null!=z?!0===N&&!0===z:!1===N||!1===z?!1:null}function n(N,z){return null!=N&&null!=z?!0===N||!0===z:!0===N||!0===z?!0:null}function v(N,z){if(null==N)return null;let f=!1;for(const h of z)if(null==h)f=null;else if(N===h){f=!0;break}return f}function a(N,z,f){if(null==N)return null;let h="",C=0;for(let S=0;S<z.length;S++){const ba=z.charAt(S);switch(C){case 0:ba===f?C=1:h=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?h+("\\"+ba):"%"===
ba?h+".*":"_"===ba?h+".":h+ba;break;case 1:h=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?h+("\\"+ba):h+ba,C=0}}return(new RegExp("^"+h+"$")).test(N)}function e(N){return N instanceof Date?N.valueOf():N}function l(N,z,f){if(null==z||null==f)return null;z=e(z);f=e(f);switch(N){case "\x3c\x3e":return z!==f;case "\x3d":return z===f;case "\x3e":return z>f;case "\x3c":return z<f;case "\x3e\x3d":return z>=f;case "\x3c\x3d":return z<=f}}function B(N,z,f){if(z instanceof u.SqlInterval)if(f instanceof Date)switch(N){case "+":return new Date(z.valueInMilliseconds()+
f.getTime());case "-":return z.valueInMilliseconds()-f.getTime();case "*":return z.valueInMilliseconds()*f.getTime();case "/":return z.valueInMilliseconds()/f.getTime()}else if(f instanceof u.SqlInterval)switch(N){case "+":return u.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()+f.valueInMilliseconds());case "-":return u.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()-f.valueInMilliseconds());case "*":return z.valueInMilliseconds()*f.valueInMilliseconds();case "/":return z.valueInMilliseconds()/
f.valueInMilliseconds()}else z=z.valueInMilliseconds();else if(f instanceof u.SqlInterval)if(z instanceof Date)switch(N){case "+":return new Date(f.valueInMilliseconds()+z.getTime());case "-":return new Date(z.getTime()-f.valueInMilliseconds());case "*":return z.getTime()*f.valueInMilliseconds();case "/":return z.getTime()/f.valueInMilliseconds()}else f=f.valueInMilliseconds();else if(z instanceof Date&&"number"===typeof f)switch(f*=864E5,z=z.getTime(),N){case "+":return new Date(z+f);case "-":return new Date(z-
f);case "*":return new Date(z*f);case "/":return new Date(z/f)}else if(f instanceof Date&&"number"===typeof z)switch(z*=864E5,f=f.getTime(),N){case "+":return new Date(z+f);case "-":return new Date(z-f);case "*":return new Date(z*f);case "/":return new Date(z/f)}switch(N){case "+":return z+f;case "-":return z-f;case "*":return z*f;case "/":return z/f}}function m(N,z,f,h){N=h.getAttribute(N,z);return null!=N&&1===f[z]?new Date(N):N}const H=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
P=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,da=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,U=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ja=new Set(["current_timestamp","current_date","current_time"]);let M=function(){function N(){}N.makeBool=function(z){return!0===z};N.featureValue=function(z,f,h,C){return m(z,f,h,C)};N.equalsNull=function(z){return null===z};N.applyLike=function(z,f,h){return a(z,
f,h)};N.ensureArray=function(z){return G(z)};N.applyIn=function(z,f){return v(z,f)};N.currentDate=function(){const z=new Date;z.setHours(0,0,0,0);return z};N.makeSqlInterval=function(z,f,h){return u.SqlInterval.createFromValueAndQualifer(z,f,h)};N.convertInterval=function(z){return z instanceof u.SqlInterval?z.valueInMilliseconds():z};N.currentTimestamp=function(){return new Date};N.compare=function(z,f,h){return l(z,f,h)};N.calculate=function(z,f,h){return B(z,f,h)};N.makeComparable=function(z){return e(z)};
N.evaluateFunction=function(z,f){return u.evaluateFunction(z,f)};N.lookup=function(z,f){z=f[z];return void 0===z?null:z};N.between=function(z,f){return null==z||null==f[0]||null==f[1]?null:z>=f[0]&&z<=f[1]};N.notbetween=function(z,f){return null==z||null==f[0]||null==f[1]?null:z<f[0]||z>f[1]};N.ternaryNot=function(z){return y(z)};N.ternaryAnd=function(z,f){return E(z,f)};N.ternaryOr=function(z,f){return n(z,f)};return N}(),K=function(){function N(f,h){this.fieldsIndex=h;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=F.WhereGrammar.parse(f);const {isStandardized:C,isAggregate:S,referencedFieldNames:ba}=this.extractExpressionInfo(h);this.referencedFieldNames=ba;this.isStandardized=C;this.isAggregate=S}N.create=function(f,h){return new N(f,h)};var z=N.prototype;z.testSet=function(f,h=V){const C={};for(const S of this.fieldNames)C[S]=f.map(ba=>h.getAttribute(ba,S));return!!this.evaluateNode(this.parseTree,{attributes:C},V)};z.calculateValue=function(f,h=V){f=this.evaluateNode(this.parseTree,
f,h);return f instanceof u.SqlInterval?f.valueInMilliseconds()/864E5:f};z.calculateValueCompiled=function(f,h=V){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(f,this.parameters,h,this.datefields);if(Y("esri-csp-restrictions"))return this.calculateValue(f,h);this.compileMe();return this.parseTree._compiledVersion(f,this.parameters,h,this.datefields)};z.testFeature=function(f,h=V){return!!this.evaluateNode(this.parseTree,f,h)};z.testFeatureCompiled=function(f,h=V){if(null!=
this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(f,this.parameters,h,this.datefields);if(Y("esri-csp-restrictions"))return this.testFeature(f,h);this.compileMe();return!!this.parseTree._compiledVersion(f,this.parameters,h,this.datefields)};z.getFunctions=function(){const f=new Set;this.visitAll(this.parseTree,h=>{"function"===h.type&&f.add(h.name.toLowerCase())});return Array.from(f)};z.getExpressions=function(){const f=new Map;this.visitAll(this.parseTree,h=>{if("function"===
h.type){const C=h.name.toLowerCase();h=h.args.value[0];if("column_ref"===h.type){h=h.column;const S=`${C}-${h}`;f.has(S)||f.set(S,{aggregateType:C,field:h})}}});return[...f.values()]};z.getVariables=function(){const f=new Set;this.visitAll(this.parseTree,h=>{"param"===h.type&&f.add(h.value.toLowerCase())});return Array.from(f)};z.compileMe=function(){const f="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups",
"attributeAdapter","datefields",f)).bind(M)};z.extractExpressionInfo=function(f){const h=[],C=new Set;let S=!0,ba=!0;this.visitAll(this.parseTree,la=>{switch(la.type){case "column_ref":{const ma=f.get(la.column);let oa,fa;ma?oa=fa=ma.name:(fa=la.column,oa=fa.toLowerCase());!ma||"date"!==ma.type&&"esriFieldTypeDate"!==ma.type||(this.datefields[ma.name]=1);C.has(oa)||(C.add(oa),h.push(fa));la.column=fa;break}case "function":{const {name:ma,args:oa}=la;la=oa.value.length;S&&(S=u.isStandardized(ma,la));
ba&&(ba=W.isAggregate(ma,la))}}});return{referencedFieldNames:Array.from(h),isStandardized:S,isAggregate:ba}};z.visitAll=function(f,h){if(null!=f)switch(h(f),f.type){case "when_clause":this.visitAll(f.operand,h);this.visitAll(f.value,h);break;case "case_expression":for(const C of f.clauses)this.visitAll(C,h);"simple"===f.format&&this.visitAll(f.operand,h);null!==f.else&&this.visitAll(f.else,h);break;case "expr_list":for(const C of f.value)this.visitAll(C,h);break;case "unary_expr":this.visitAll(f.expr,
h);break;case "binary_expr":this.visitAll(f.left,h);this.visitAll(f.right,h);break;case "function":this.visitAll(f.args,h)}};z.evaluateNodeToJavaScript=function(f){switch(f.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(f.value)+", "+JSON.stringify(f.qualifier)+","+JSON.stringify(f.op)+")";case "case_expression":var h="";if("simple"===f.format){var C="this.makeComparable("+this.evaluateNodeToJavaScript(f.operand)+")";h="( ";for(let S=0;S<f.clauses.length;S++)h+=
" ("+C+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(f.clauses[S].operand)+")) ? ("+this.evaluateNodeToJavaScript(f.clauses[S].value)+") : "}else for(h="( ",C=0;C<f.clauses.length;C++)h+=" this.makeBool("+this.evaluateNodeToJavaScript(f.clauses[C].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(f.clauses[C].value)+") : ";h=null!==f.else?h+this.evaluateNodeToJavaScript(f.else):h+"null";return h+=" )";case "param":return"this.lookup("+JSON.stringify(f.value.toLowerCase())+
",lookups)";case "expr_list":h="[";for(C of f.value)"["!==h&&(h+=","),h+=this.evaluateNodeToJavaScript(C);return h+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(f.expr)+")";case "binary_expr":switch(f.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "IS":if("null"!==
f.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+")";case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(f.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+
")"}throw Error("Not Supported Operator "+f.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(f.value);case "date":return"(new Date("+r(f.value).getTime().toString()+"))";case "timestamp":return"(new Date("+t(f.value).getTime().toString()+"))";case "current_time":return"date"===f.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(f.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(f.name)+","+this.evaluateNodeToJavaScript(f.args)+")"}throw Error("Unsupported sql syntax "+f.type);};z.evaluateNode=function(f,h,C){switch(f.type){case "interval":return h=this.evaluateNode(f.value,h,C),u.SqlInterval.createFromValueAndQualifer(h,f.qualifier,f.op);case "case_expression":if("simple"===f.format){var S=e(this.evaluateNode(f.operand,h,C));for(var ba=0;ba<f.clauses.length;ba++)if(S===e(this.evaluateNode(f.clauses[ba].operand,h,C)))return this.evaluateNode(f.clauses[ba].value,
h,C)}else for(S=0;S<f.clauses.length;S++)if(!0===this.evaluateNode(f.clauses[S].operand,h,C))return this.evaluateNode(f.clauses[S].value,h,C);return null!==f.else?this.evaluateNode(f.else,h,C):null;case "param":return this.parameters[f.value.toLowerCase()];case "expr_list":S=[];for(ba of f.value)S.push(this.evaluateNode(ba,h,C));return S;case "unary_expr":return y(this.evaluateNode(f.expr,h,C));case "binary_expr":switch(f.operator){case "AND":return E(this.evaluateNode(f.left,h,C),this.evaluateNode(f.right,
h,C));case "OR":return n(this.evaluateNode(f.left,h,C),this.evaluateNode(f.right,h,C));case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(f.left,h,C);case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(f.left,h,C);case "IN":return S=G(this.evaluateNode(f.right,h,C)),v(this.evaluateNode(f.left,h,C),S);case "NOT IN":return S=G(this.evaluateNode(f.right,h,C)),y(v(this.evaluateNode(f.left,h,C),
S));case "BETWEEN":return S=this.evaluateNode(f.left,h,C),f=this.evaluateNode(f.right,h,C),null==S||null==f[0]||null==f[1]?null:S>=e(f[0])&&S<=e(f[1]);case "NOTBETWEEN":return S=this.evaluateNode(f.left,h,C),f=this.evaluateNode(f.right,h,C),null==S||null==f[0]||null==f[1]?null:S<e(f[0])||S>e(f[1]);case "LIKE":return a(this.evaluateNode(f.left,h,C),this.evaluateNode(f.right,h,C),f.escape);case "NOT LIKE":return y(a(this.evaluateNode(f.left,h,C),this.evaluateNode(f.right,h,C),f.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return l(f.operator,
this.evaluateNode(f.left,h,C),this.evaluateNode(f.right,h,C));case "-":case "+":case "*":case "/":return B(f.operator,this.evaluateNode(f.left,h,C),this.evaluateNode(f.right,h,C))}case "null":case "bool":case "string":case "number":return f.value;case "date":return r(f.value);case "timestamp":return t(f.value);case "current_time":return h=new Date,"date"===f.mode&&h.setHours(0,0,0,0),h;case "column_ref":return m(h,f.column,this.datefields,C);case "function":return h=this.evaluateNode(f.args,h,C),
this.isAggregate?W.aggregateFunction(f.name,h):u.evaluateFunction(f.name,h)}throw Error("Unsupported sql syntax "+f.type);};d._createClass(N,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this.visitAll(this.parseTree,f=>{"current_time"===f.type?this._hasDateFunctions=!0:"function"===f.type&&(this._hasDateFunctions=this._hasDateFunctions||ja.has(f.name.toLowerCase()))});
return this._hasDateFunctions}}]);return N}();const V={getAttribute(N,z){return(N&&"object"===typeof N.attributes?N.attributes:N)[z]}};k.WhereClause=K;k.defaultAttributeAdapter=V;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function d(u){let F=0;for(let A=0;A<u.length;A++)F+=u[A];return F/u.length}function Y(u){const F=d(u),A=u.length;let w=0;for(const t of u)w+=(t-F)**2;return 1<A?w/(A-1):0}const W={min:{minParams:1,
maxParams:1,evaluate:u=>null==u[0]?null:Math.min.apply(Math,u[0])},max:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.max.apply(Math,u[0])},avg:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:d(u[0])},sum:{minParams:1,maxParams:1,evaluate:u=>{if(null==u[0])u=null;else{{u=u[0];let F=0;for(let A=0;A<u.length;A++)F+=u[A];u=F}}return u}},stddev:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.sqrt(Y(u[0]))},count:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:u[0].length},
var:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Y(u[0])}};k.aggregateFunction=function(u,F){const A=W[u.toLowerCase()];if(null==A)throw Error("Function Not Recognised");if(F.length<A.minParams||F.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${u.toUpperCase()}`);return A.evaluate(F)};k.isAggregate=function(u,F){u=W[u.toLowerCase()];return null!=u&&F>=u.minParams&&F<=u.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports",
"../string"],function(k,d){let Y=function(){function u(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}u.fixDefaults=function(F){if(null!==F.precision||null!==F.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};u.createFromMilliseconds=function(F){const A=new u;A.second=F/1E3;return A};u.createFromValueAndQualifer=function(F,A,w){let t=null;const r=new u;r.op="-"===w?"-":"+";if("interval-period"===A.type){u.fixDefaults(A);if("year"===
A.period||"month"===A.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(F))r[A.period]=parseFloat(F);else throw Error("Illegal Interval");}else{u.fixDefaults(A.start);u.fixDefaults(A.end);if("year"===A.start.period||"month"===A.start.period)throw Error("Year-Month Intervals not supported");if("year"===A.end.period||"month"===A.end.period)throw Error("Year-Month Intervals not supported");switch(A.start.period){case "day":switch(A.end.period){case "hour":t=/^[0-9]{1,} [0-9]{1,}$/;
if(t.test(F))r[A.start.period]=parseFloat(F.split(" ")[0]),r[A.end.period]=parseFloat(F.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(t.test(F))r[A.start.period]=parseFloat(F.split(" ")[0]),F=F.split(" ")[1].split(":"),r.hour=parseFloat(F[0]),r.minute=parseFloat(F[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(F))r[A.start.period]=parseFloat(F.split(" ")[0]),
F=F.split(" ")[1].split(":"),r.hour=parseFloat(F[0]),r.minute=parseFloat(F[1]),r.second=parseFloat(F[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(A.end.period){case "minute":t=/^[0-9]{1,}:[0-9]{1,}$/;if(t.test(F))r.hour=parseFloat(F.split(":")[0]),r.minute=parseFloat(F.split(":")[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(F))F=F.split(":"),r.hour=parseFloat(F[0]),
r.minute=parseFloat(F[1]),r.second=parseFloat(F[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(A.end.period){case "second":t=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(F))F=F.split(":"),r.minute=parseFloat(F[0]),r.second=parseFloat(F[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return r};u.prototype.valueInMilliseconds=function(){return("-"===this.op?
-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return u}();const W={extract:{minParams:2,maxParams:2,evaluate:([u,F])=>{if(null==F)return null;if(F instanceof Date)switch(u.toUpperCase()){case "SECOND":return F.getSeconds();case "MINUTE":return F.getMinutes();case "HOUR":return F.getHours();case "DAY":return F.getDate();case "MONTH":return F.getMonth()+1;case "YEAR":return F.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");
}},substring:{minParams:2,maxParams:3,evaluate:u=>{if(2===u.length){const [F,A]=u;return null==F||null==A?null:F.toString().substring(A-1)}if(3===u.length){const [F,A,w]=u;return null==F||null==A||null==w?null:0>=w?"":F.toString().substring(A-1,A+w-1)}}},position:{minParams:2,maxParams:2,evaluate:([u,F])=>null==u||null==F?null:F.indexOf(u)+1},trim:{minParams:2,maxParams:3,evaluate:u=>{var F=3===u.length,A=F?u[1]:" ";F=F?u[2]:u[1];if(null==A||null==F)return null;A=`(${d.escapeRegExpString(A)})`;switch(u[0]){case "BOTH":return F.replace(new RegExp(`^${A}*|${A}*$`,
"g"),"");case "LEADING":return F.replace(new RegExp(`^${A}*`,"g"),"");case "TRAILING":return F.replace(new RegExp(`${A}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.abs(u[0])},ceiling:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.ceil(u[0])},floor:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.floor(u[0])},log:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.log(u[0])},log10:{minParams:1,
maxParams:1,evaluate:u=>null==u[0]?null:Math.log(u[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.sin(u[0])},cos:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.cos(u[0])},tan:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.tan(u[0])},asin:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.asin(u[0])},acos:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.acos(u[0])},atan:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.atan(u[0])},
sign:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:0<u[0]?1:0>u[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:u=>null==u[0]||null==u[1]?null:u[0]**u[1]},mod:{minParams:2,maxParams:2,evaluate:u=>null==u[0]||null==u[1]?null:u[0]%u[1]},round:{minParams:1,maxParams:2,evaluate:u=>{const F=u[0];u=2===u.length?10**u[1]:1;return null==F?null:Math.round(F*u)/u}},truncate:{minParams:1,maxParams:2,evaluate:u=>null==u[0]?null:1===u.length?parseInt(u[0].toFixed(0),10):parseFloat(u[0].toFixed(u[1]))},
char_length:{minParams:1,maxParams:1,evaluate:u=>"string"===typeof u[0]||u[0]instanceof String?u[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:u=>{let F="";for(let A=0;A<u.length;A++){if(null==u[A])return null;F+=u[A].toString()}return F}},lower:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:u[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:u[0].toString().toUpperCase()}};k.SqlInterval=Y;k.evaluateFunction=function(u,F){const A=W[u.toLowerCase()];
if(null==A)throw Error("Function Not Recognised");if(F.length<A.minParams||F.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${u.toUpperCase()}`);return A.evaluate(F)};k.isStandardized=function(u,F){u=W[u.toLowerCase()];return null!=u&&F>=u.minParams&&F<=u.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(k,d){var Y={exports:{}};(function(u){(function(F,A){u.exports&&
(u.exports=A())})(d.commonjsGlobal,function(){function F(w,t,r,G){w=Error.call(this,w);Object.setPrototypeOf&&Object.setPrototypeOf(w,F.prototype);w.expected=t;w.found=r;w.location=G;w.name="SyntaxError";return w}function A(w,t,r){r=r||" ";if(w.length>t)return w;t-=w.length;r+=r.repeat(t);return w+r.slice(0,t)}(function(w,t){function r(){this.constructor=w}r.prototype=t.prototype;w.prototype=new r})(F,Error);F.prototype.format=function(w){var t="Error: "+this.message;if(this.location){var r=null,
G;for(G=0;G<w.length;G++)if(w[G].source===this.location.source){r=w[G].text.split(/\r\n|\n|\r/g);break}w=this.location.start;G=this.location.source+":"+w.line+":"+w.column;if(r){var y=this.location.end,E=A("",w.line.toString().length);r=r[w.line-1];y=w.line===y.line?y.column:r.length+1;t+="\n --\x3e "+G+"\n"+E+" |\n"+w.line+" | "+r+"\n"+E+" | "+A("",w.column-1)+A("",y-w.column,"^")}else t+="\n at "+G}return t};F.buildMessage=function(w,t){function r(v){return v.charCodeAt(0).toString(16).toUpperCase()}
function G(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+r(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+r(a)})}function y(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+
r(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+r(a)})}function E(v){return n[v.type](v)}var n={literal:function(v){return'"'+G(v.text)+'"'},class:function(v){var a=v.parts.map(function(e){return Array.isArray(e)?y(e[0])+"-"+y(e[1]):y(e)});return"["+(v.inverted?"^":"")+a+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(v){return v.description}};return"Expected "+function(v){v=v.map(E);var a,e;v.sort();if(0<v.length){for(e=a=1;a<v.length;a++)v[a-
1]!==v[a]&&(v[e]=v[a],e++);v.length=e}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}(w)+" but "+(t?'"'+G(t)+'"':"end of input")+" found."};return{SyntaxError:F,parse:function(w,t){function r(x,I){return{type:"literal",text:x,ignoreCase:I}}function G(x,I,T){return{type:"class",parts:x,inverted:I,ignoreCase:T}}function y(x){var I=ac[x],T;if(!I){for(T=x-1;!ac[T];)T--;I=ac[T];for(I={line:I.line,column:I.column};T<x;)10===
w.charCodeAt(T)?(I.line++,I.column=1):I.column++,T++;ac[x]=I}return I}function E(x,I){var T=y(x),sa=y(I);return{source:$a,start:{offset:x,line:T.line,column:T.column},end:{offset:I,line:sa.line,column:sa.column}}}function n(x){g<pb||(g>pb&&(pb=g,tc=[]),tc.push(x))}function v(){var x=g;ta();var I=e();I!==b?(ta(),x=I):(g=x,x=b);return x}function a(){var x=g;var I=e();if(I!==b){x=[];var T=g;var sa=ta();var Ca=Ha();if(Ca!==b){var Na=ta();var Oa=e();Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)}else g=T,T=b;for(;T!==
b;)x.push(T),T=g,sa=ta(),Ca=Ha(),Ca!==b?(Na=ta(),Oa=e(),Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)):(g=T,T=b);T={type:"expr_list"};I=[I];for(sa=0;sa<x.length;sa++)I.push(x[sa][3]);T.value=I;x=T}else g=x,x=b;return x}function e(){var x=g;var I=l();if(I!==b){x=[];var T=g;var sa=ta();var Ca=Q();if(Ca!==b){var Na=ta();var Oa=l();Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)}else g=T,T=b;for(;T!==b;)x.push(T),T=g,sa=ta(),Ca=Q(),Ca!==b?(Na=ta(),Oa=l(),Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)):(g=T,T=b);x=Va(I,x)}else g=x,x=
b;return x}function l(){var x=g;var I=B();if(I!==b){x=[];var T=g;var sa=ta();var Ca=J();if(Ca!==b){var Na=ta();var Oa=B();Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)}else g=T,T=b;for(;T!==b;)x.push(T),T=g,sa=ta(),Ca=J(),Ca!==b?(Na=ta(),Oa=B(),Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)):(g=T,T=b);x=Va(I,x)}else g=x,x=b;return x}function B(){var x=g;var I=p();if(I===b){I=g;if(33===w.charCodeAt(g)){var T=tb;g++}else T=b,0===ua&&n(ld);if(T!==b){var sa=g;ua++;if(61===w.charCodeAt(g)){var Ca=jb;g++}else Ca=b,0===ua&&
n(Jc);ua--;Ca===b?sa=void 0:(g=sa,sa=b);sa!==b?I=T=[T,sa]:(g=I,I=b)}else g=I,I=b}I!==b?(T=ta(),sa=B(),sa!==b?x={type:"unary_expr",operator:"NOT",expr:sa}:(g=x,x=b)):(g=x,x=b);if(x===b){I=g;x=P();if(x!==b){ta();I=[];T=g;sa=ta();Ca=m();if(Ca!==b){var Na=ta();var Oa=P();Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)}else g=T,T=b;if(T!==b)for(;T!==b;)I.push(T),T=g,sa=ta(),Ca=m(),Ca!==b?(Na=ta(),Oa=P(),Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)):(g=T,T=b);else I=b;I!==b&&(I={type:"arithmetic",tail:I});I===b&&(I=g,T=D(),
T!==b?(ta(),sa=Ia(),sa!==b?(ta(),sa=a(),sa!==b?(ta(),Ca=Qa(),Ca!==b?I={op:T,right:sa}:(g=I,I=b)):(g=I,I=b)):(g=I,I=b)):(g=I,I=b),I===b&&(I=g,T=D(),T!==b?(ta(),sa=Ia(),sa!==b?(ta(),sa=Qa(),sa!==b?I={op:T,right:{type:"expr_list",value:[]}}:(g=I,I=b)):(g=I,I=b)):(g=I,I=b),I===b&&(I=g,T=D(),T!==b?(ta(),sa=f(),sa!==b?I={op:T,right:sa}:(g=I,I=b)):(g=I,I=b))),I===b&&(I=g,Ca=p(),Ca!==b?(ta(),T=R(),T!==b?(ta(),sa=P(),sa!==b?(ta(),Na=J(),Na!==b?(ta(),Ca=P(),Ca!==b?I={op:"NOT"+T,right:{type:"expr_list",value:[sa,
Ca]}}:(g=I,I=b)):(g=I,I=b)):(g=I,I=b)):(g=I,I=b)):(g=I,I=b),I===b&&(I=g,Ca=R(),Ca!==b?(ta(),T=P(),T!==b?(ta(),sa=J(),sa!==b?(ta(),Na=P(),Na!==b?I={op:Ca,right:{type:"expr_list",value:[T,Na]}}:(g=I,I=b)):(g=I,I=b)):(g=I,I=b)):(g=I,I=b)),I===b&&(I=g,T=q(),T!==b?(ta(),sa=p(),sa!==b?(ta(),sa=P(),sa!==b?I={op:T+"NOT",right:sa}:(g=I,I=b)):(g=I,I=b)):(g=I,I=b),I===b&&(I=g,T=q(),T!==b?(ta(),sa=P(),sa!==b?I={op:T,right:sa}:(g=I,I=b)):(g=I,I=b)),I===b&&(I=g,T=H(),T!==b?(ta(),sa=ma(),sa!==b?(ta(),Ca=g,w.substr(g,
6).toLowerCase()===Ua?(Na=w.substr(g,6),g+=6):(Na=b,0===ua&&n(md)),Na!==b?(Na=g,ua++,Oa=N(),ua--,Oa===b?Na=void 0:(g=Na,Na=b),Na!==b?Ca="ESCAPE":(g=Ca,Ca=b)):(g=Ca,Ca=b),Ca!==b?(ta(),Ca=oa(),Ca!==b?I={op:T,right:sa,escape:Ca.value}:(g=I,I=b)):(g=I,I=b)):(g=I,I=b)):(g=I,I=b),I===b&&(I=g,T=H(),T!==b?(ta(),sa=ma(),sa!==b?I={op:T,right:sa,escape:""}:(g=I,I=b)):(g=I,I=b))))));I===b&&(I=null);""==I||void 0==I||null==I?I=x:(T=null,I=T="arithmetic"==I.type?Va(x,I.tail):Ta(I.op,x,I.right,I.escape))}else g=
I,I=b;x=I}return x}function m(){if(w.substr(g,2)===Ab){var x=Ab;g+=2}else x=b,0===ua&&n(nd);x===b&&(62===w.charCodeAt(g)?(x=Zb,g++):(x=b,0===ua&&n(od)),x===b&&(w.substr(g,2)===Cb?(x=Cb,g+=2):(x=b,0===ua&&n(pd)),x===b&&(w.substr(g,2)===$b?(x=$b,g+=2):(x=b,0===ua&&n(qd)),x===b&&(60===w.charCodeAt(g)?(x=kb,g++):(x=b,0===ua&&n(rd)),x===b&&(61===w.charCodeAt(g)?(x=jb,g++):(x=b,0===ua&&n(Jc)),x===b&&(w.substr(g,2)===sb?(x=sb,g+=2):(x=b,0===ua&&n(sd))))))));return x}function H(){var x=x=g;var I=p();if(I!==
b){var T=ta();var sa=ca();sa!==b?x=I=[I,T,sa]:(g=x,x=b)}else g=x,x=b;x!==b&&(x=x[0]+" "+x[2]);x===b&&(x=ca());return x}function D(){var x=x=g;var I=p();if(I!==b){var T=ta();var sa=c();sa!==b?x=I=[I,T,sa]:(g=x,x=b)}else g=x,x=b;x!==b&&(x=x[0]+" "+x[2]);x===b&&(x=c());return x}function P(){var x=g;var I=U();if(I!==b){x=[];var T=g;var sa=ta();var Ca=da();if(Ca!==b){var Na=ta();var Oa=U();Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)}else g=T,T=b;for(;T!==b;)x.push(T),T=g,sa=ta(),Ca=da(),Ca!==b?(Na=ta(),Oa=U(),
Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)):(g=T,T=b);x=Va(I,x)}else g=x,x=b;return x}function da(){if(43===w.charCodeAt(g)){var x=Ra;g++}else x=b,0===ua&&n(uc);x===b&&(45===w.charCodeAt(g)?(x=eb,g++):(x=b,0===ua&&n(vc)));return x}function U(){var x=g;var I=M();if(I!==b){x=[];var T=g;var sa=ta();var Ca=ja();if(Ca!==b){var Na=ta();var Oa=M();Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)}else g=T,T=b;for(;T!==b;)x.push(T),T=g,sa=ta(),Ca=ja(),Ca!==b?(Na=ta(),Oa=M(),Oa!==b?T=sa=[sa,Ca,Na,Oa]:(g=T,T=b)):(g=T,T=b);x=Va(I,
x)}else g=x,x=b;return x}function ja(){if(42===w.charCodeAt(g)){var x=ob;g++}else x=b,0===ua&&n(td);x===b&&(47===w.charCodeAt(g)?(x=Pa,g++):(x=b,0===ua&&n(ud)));return x}function M(){var x=oa();if(x===b){var I=g;var T=g;var sa=Aa();if(sa!==b){var Ca=xa();if(Ca!==b){var Na=La();Na!==b?T=parseFloat(sa+Ca+Na):(g=T,T=b)}else g=T,T=b}else g=T,T=b;T===b&&(T=g,sa=Aa(),sa!==b?(Ca=xa(),Ca!==b?T=parseFloat(sa+Ca):(g=T,T=b)):(g=T,T=b),T===b&&(T=g,sa=Aa(),sa!==b?(Ca=La(),Ca!==b?T=parseFloat(sa+Ca):(g=T,T=b)):
(g=T,T=b),T===b&&(T=g,sa=Aa(),sa!==b&&(sa=parseFloat(sa)),T=sa)));var Oa=T;if(Oa!==b){var bc=g;ua++;var vd=V();ua--;vd===b?bc=void 0:(g=bc,bc=b);bc!==b?I={type:"number",value:Oa}:(g=I,I=b)}else g=I,I=b;x=I;if(x===b){var Pb=g;var Eb=g;if(w.substr(g,4).toLowerCase()===za){var cc=w.substr(g,4);g+=4}else cc=b,0===ua&&n(wd);if(cc!==b){var Qb=g;ua++;var xd=N();ua--;xd===b?Qb=void 0:(g=Qb,Qb=b);Qb!==b?Eb=cc=[cc,Qb]:(g=Eb,Eb=b)}else g=Eb,Eb=b;var Bb=Eb;Bb!==b&&(Bb={type:"bool",value:!0});Pb=Bb;if(Pb===b){Pb=
g;var Fb=g;if(w.substr(g,5).toLowerCase()===Ka){var dc=w.substr(g,5);g+=5}else dc=b,0===ua&&n(yd);if(dc!==b){var Rb=g;ua++;var zd=N();ua--;zd===b?Rb=void 0:(g=Rb,Rb=b);Rb!==b?Fb=dc=[dc,Rb]:(g=Fb,Fb=b)}else g=Fb,Fb=b;Bb=Fb;Bb!==b&&(Bb={type:"bool",value:!1});Pb=Bb}x=Pb;if(x===b){var Gb=g;if(w.substr(g,4).toLowerCase()===ya){var ec=w.substr(g,4);g+=4}else ec=b,0===ua&&n(Ad);if(ec!==b){var Sb=g;ua++;var Bd=N();ua--;Bd===b?Sb=void 0:(g=Sb,Sb=b);Sb!==b?Gb=ec=[ec,Sb]:(g=Gb,Gb=b)}else g=Gb,Gb=b;var wc=Gb;
wc!==b&&(wc={type:"null",value:null});x=wc;if(x===b){var Hb=g;var Ib=g;if(w.substr(g,4).toLowerCase()===Cd){var Kc=w.substr(g,4);g+=4}else Kc=b,0===ua&&n(Dd);if(Kc!==b){var fc=g;ua++;var Ed=N();ua--;Ed===b?fc=void 0:(g=fc,fc=b);fc!==b?Ib="DATE":(g=Ib,Ib=b)}else g=Ib,Ib=b;if(Ib!==b){ta();var Lc=ma();Lc!==b?Hb={type:"date",value:Lc.value}:(g=Hb,Hb=b)}else g=Hb,Hb=b;x=Hb;if(x===b){var Jb=g;var Kb=g;if(w.substr(g,9).toLowerCase()===Fd){var Mc=w.substr(g,9);g+=9}else Mc=b,0===ua&&n(Gd);if(Mc!==b){var gc=
g;ua++;var Hd=N();ua--;Hd===b?gc=void 0:(g=gc,gc=b);gc!==b?Kb="TIMESTAMP":(g=Kb,Kb=b)}else g=Kb,Kb=b;if(Kb!==b){ta();var Nc=ma();Nc!==b?Jb={type:"timestamp",value:Nc.value}:(g=Jb,Jb=b)}else g=Jb,Jb=b;x=Jb;if(x===b){var cb=g;var xc=L();if(xc!==b){ta();if(45===w.charCodeAt(g)){var ub=eb;g++}else ub=b,0===ua&&n(vc);ub===b&&(43===w.charCodeAt(g)?(ub=Ra,g++):(ub=b,0===ua&&n(uc)));if(ub!==b){ta();var Tb=ma();if(Tb!==b){ta();var Oc=C();Oc!==b?cb={type:"interval",value:Tb,qualifier:Oc,op:ub}:(g=cb,cb=b)}else g=
cb,cb=b}else g=cb,cb=b}else g=cb,cb=b;cb===b&&(cb=g,xc=L(),xc!==b?(ta(),ub=ma(),ub!==b?(ta(),Tb=C(),Tb!==b?cb={type:"interval",value:ub,qualifier:Tb,op:""}:(g=cb,cb=b)):(g=cb,cb=b)):(g=cb,cb=b));x=cb}}}}}}var Ya=x;if(Ya===b){var gb=g;var Lb=g;if(w.substr(g,7).toLowerCase()===Id){var Pc=w.substr(g,7);g+=7}else Pc=b,0===ua&&n(Jd);if(Pc!==b){var hc=g;ua++;var Kd=N();ua--;Kd===b?hc=void 0:(g=hc,hc=b);hc!==b?Lb="EXTRACT":(g=Lb,Lb=b)}else g=Lb,Lb=b;if(Lb!==b){ta();var Ld=Ia();if(Ld!==b){ta();var mb=O();
mb===b&&(mb=aa(),mb===b&&(mb=pa(),mb===b&&(mb=qa(),mb===b&&(mb=va(),mb===b&&(mb=wa())))));var Qc=mb;if(Qc!==b){ta();var Md=ha();if(Md!==b){ta();var Rc=e();if(Rc!==b){ta();var Nd=Qa();Nd!==b?gb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Qc},Rc]}}:(g=gb,gb=b)}else g=gb,gb=b}else g=gb,gb=b}else g=gb,gb=b}else g=gb,gb=b}else g=gb,gb=b;Ya=gb;if(Ya===b){var hb=g;var Mb=g;if(w.substr(g,9).toLowerCase()===Od){var Sc=w.substr(g,9);g+=9}else Sc=b,0===ua&&n(Pd);if(Sc!==
b){var ic=g;ua++;var Qd=N();ua--;Qd===b?ic=void 0:(g=ic,ic=b);ic!==b?Mb="SUBSTRING":(g=Mb,Mb=b)}else g=Mb,Mb=b;if(Mb!==b){ta();var Rd=Ia();if(Rd!==b){ta();var yc=e();if(yc!==b){ta();var Sd=ha();if(Sd!==b){ta();var zc=e();if(zc!==b){ta();var vb=g;var Nb=g;if(w.substr(g,3).toLowerCase()===Td){var Tc=w.substr(g,3);g+=3}else Tc=b,0===ua&&n(Ud);if(Tc!==b){var jc=g;ua++;var Vd=N();ua--;Vd===b?jc=void 0:(g=jc,jc=b);jc!==b?Nb="FOR":(g=Nb,Nb=b)}else g=Nb,Nb=b;var Ub=Nb;if(Ub!==b){var Wd=ta();var Uc=e();if(Uc!==
b){var Xd=ta();vb=Ub=[Ub,Wd,Uc,Xd]}else g=vb,vb=b}else g=vb,vb=b;vb===b&&(vb=null);Ub=Qa();Ub!==b?hb={type:"function",name:"substring",args:{type:"expr_list",value:vb?[yc,zc,vb[2]]:[yc,zc]}}:(g=hb,hb=b)}else g=hb,hb=b}else g=hb,hb=b}else g=hb,hb=b}else g=hb,hb=b}else g=hb,hb=b;Ya=hb;if(Ya===b){var Za=g;var Ac=ea();if(Ac!==b){ta();var Bc=Ia();if(Bc!==b){ta();var wb=h();wb===b&&(wb=null);ta();var Vb=e();if(Vb!==b){ta();var Cc=ha();if(Cc!==b){ta();var Vc=e();if(Vc!==b){ta();var Yd=Qa();Yd!==b?Za={type:"function",
name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb,Vc]}}:(g=Za,Za=b)}else g=Za,Za=b}else g=Za,Za=b}else g=Za,Za=b}else g=Za,Za=b}else g=Za,Za=b;Za===b&&(Za=g,Ac=ea(),Ac!==b?(ta(),Bc=Ia(),Bc!==b?(ta(),wb=h(),wb===b&&(wb=null),ta(),Vb=e(),Vb!==b?(ta(),Cc=Qa(),Cc!==b?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb]}}:(g=Za,Za=b)):(g=Za,Za=b)):(g=Za,Za=b)):(g=Za,Za=b));Ya=Za;if(Ya===b){var ib=g;var Ob=g;if(w.substr(g,
8).toLowerCase()===Zd){var Wc=w.substr(g,8);g+=8}else Wc=b,0===ua&&n($d);if(Wc!==b){var kc=g;ua++;var ae=N();ua--;ae===b?kc=void 0:(g=kc,kc=b);kc!==b?Ob="POSITION":(g=Ob,Ob=b)}else g=Ob,Ob=b;if(Ob!==b){ta();var be=Ia();if(be!==b){ta();var Xc=e();if(Xc!==b){ta();var ce=c();if(ce!==b){ta();var Yc=e();if(Yc!==b){ta();var de=Qa();de!==b?ib={type:"function",name:"position",args:{type:"expr_list",value:[Xc,Yc]}}:(g=ib,ib=b)}else g=ib,ib=b}else g=ib,ib=b}else g=ib,ib=b}else g=ib,ib=b}else g=ib,ib=b;Ya=ib;
if(Ya===b){var zb=g;var lc;var nb=g;nb=lc=K();if(nb===b)if(nb=g,96===w.charCodeAt(g)?(lc=Zc,g++):(lc=b,0===ua&&n($c)),lc!==b){var mc=[];if(ad.test(w.charAt(g))){var xb=w.charAt(g);g++}else xb=b,0===ua&&n(bd);if(xb!==b)for(;xb!==b;)mc.push(xb),ad.test(w.charAt(g))?(xb=w.charAt(g),g++):(xb=b,0===ua&&n(bd));else mc=b;mc!==b?(96===w.charCodeAt(g)?(xb=Zc,g++):(xb=b,0===ua&&n($c)),xb!==b?nb=mc.join(""):(g=nb,nb=b)):(g=nb,nb=b)}else g=nb,nb=b;var cd=nb;if(cd!==b){ta();var ee=Ia();if(ee!==b){ta();var nc=
a();nc===b&&(nc=null);ta();var fe=Qa();fe!==b?zb={type:"function",name:cd,args:nc?nc:{type:"expr_list",value:[]}}:(g=zb,zb=b)}else g=zb,zb=b}else g=zb,zb=b;Ya=zb;if(Ya===b){var qb;var db=g;var Dc=Ba();if(Dc!==b){ta();var Wb=e();if(Wb!==b){ta();var Xb=[];for(qb=ia();qb!==b;)Xb.push(qb),qb=ia();qb=ta();var oc=Ja();oc!==b?db={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:null}:(g=db,db=b)}else g=db,db=b}else g=db,db=b;if(db===b)if(db=g,Dc=Ba(),Dc!==b)if(ta(),Wb=e(),Wb!==b){ta();Xb=
[];for(qb=ia();qb!==b;)Xb.push(qb),qb=ia();qb=ta();oc=ra();if(oc!==b){ta();var ge=Ja();ge!==b?db={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:oc.value}:(g=db,db=b)}else g=db,db=b}else g=db,db=b;else g=db,db=b;var Ec=db;if(Ec===b){var rb;var fb=g;var Fc=Ba();if(Fc!==b){ta();var Yb=[];for(rb=fa();rb!==b;)Yb.push(rb),rb=fa();rb=ta();var pc=Ja();pc!==b?fb={type:"case_expression",format:"searched",clauses:Yb,else:null}:(g=fb,fb=b)}else g=fb,fb=b;if(fb===b)if(fb=g,Fc=Ba(),Fc!==b){ta();
Yb=[];for(rb=fa();rb!==b;)Yb.push(rb),rb=fa();rb=ta();pc=ra();if(pc!==b){ta();var he=Ja();he!==b?fb={type:"case_expression",format:"searched",clauses:Yb,else:pc.value}:(g=fb,fb=b)}else g=fb,fb=b}else g=fb,fb=b;Ec=fb}Ya=Ec;if(Ya===b){var qc;var rc=g;var dd=V();if(dd!==b){var ed=[];for(qc=z();qc!==b;)ed.push(qc),qc=z();rc=dd+ed.join("")}else g=rc,rc=b;var sc=rc;if(sc!==b){var Gc=sc;sc=/^CURRENT_DATE$/i.test(Gc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Gc)?{type:"current_time",mode:"timestamp"}:
{type:"column_ref",table:"",column:Gc}}Ya=sc;if(Ya===b&&(Ya=f(),Ya===b)){Ya=g;var ie=Ia();if(ie!==b){ta();var Hc=e();if(Hc!==b){ta();var je=Qa();je!==b?(Hc.paren=!0,Ya=Hc):(g=Ya,Ya=b)}else g=Ya,Ya=b}else g=Ya,Ya=b}}}}}}}}return Ya}function K(){var x;var I=g;var T=V();if(T!==b){I=[];for(x=N();x!==b;)I.push(x),x=N();I=T+I.join("")}else g=I,I=b;return I}function V(){if(ke.test(w.charAt(g))){var x=w.charAt(g);g++}else x=b,0===ua&&n(le);return x}function N(){if(me.test(w.charAt(g))){var x=w.charAt(g);
g++}else x=b,0===ua&&n(ne);return x}function z(){if(oe.test(w.charAt(g))){var x=w.charAt(g);g++}else x=b,0===ua&&n(pe);return x}function f(){var x=g;if(64===w.charCodeAt(g)){var I=Db;g++}else I=b,0===ua&&n(qe);if(I!==b){var T=K();T!==b?x=I=[I,T]:(g=x,x=b)}else g=x,x=b;x!==b&&(x={type:"param",value:x[1]});return x}function h(){var x=g;if(w.substr(g,7).toLowerCase()===re){var I=w.substr(g,7);g+=7}else I=b,0===ua&&n(se);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="LEADING":(g=
x,x=b)}else g=x,x=b;x===b&&(x=g,w.substr(g,8).toLowerCase()===te?(I=w.substr(g,8),g+=8):(I=b,0===ua&&n(ue)),I!==b?(I=g,ua++,T=N(),ua--,T===b?I=void 0:(g=I,I=b),I!==b?x="TRAILING":(g=x,x=b)):(g=x,x=b),x===b&&(x=g,w.substr(g,4).toLowerCase()===ve?(I=w.substr(g,4),g+=4):(I=b,0===ua&&n(we)),I!==b?(I=g,ua++,T=N(),ua--,T===b?I=void 0:(g=I,I=b),I!==b?x="BOTH":(g=x,x=b)):(g=x,x=b)));return x}function C(){var x=g;var I=g;var T=S();if(T!==b){ta();var sa=Ia();if(sa!==b)if(ta(),sa=la(),sa!==b){ta();var Ca=Qa();
Ca!==b?I={type:"interval-period",period:T.value,precision:sa,secondary:null}:(g=I,I=b)}else g=I,I=b;else g=I,I=b}else g=I,I=b;I===b&&(I=g,T=S(),T!==b&&(T=fd(T)),I=T);if(I!==b)if(ta(),T=g,w.substr(g,2).toLowerCase()===xe?(sa=w.substr(g,2),g+=2):(sa=b,0===ua&&n(ye)),sa!==b?(sa=g,ua++,Ca=N(),ua--,Ca===b?sa=void 0:(g=sa,sa=b),sa!==b?T="TO":(g=T,T=b)):(g=T,T=b),T!==b){ta();T=g;sa=S();sa!==b&&(sa={type:"interval-period",period:sa.value,precision:null,secondary:null});T=sa;if(T===b){T=g;sa=wa();if(sa!==
b)if(ta(),sa=Ia(),sa!==b)if(ta(),sa=la(),sa!==b)if(ta(),Ca=Ha(),Ca!==b)if(ta(),Ca=ba(),Ca!==b){ta();var Na=Qa();Na!==b?T=gd(sa,Ca):(g=T,T=b)}else g=T,T=b;else g=T,T=b;else g=T,T=b;else g=T,T=b;else g=T,T=b;T===b&&(T=g,sa=wa(),sa!==b?(ta(),sa=Ia(),sa!==b?(ta(),sa=la(),sa!==b?(ta(),Ca=Qa(),Ca!==b?T={type:"interval-period",period:"second",precision:sa,secondary:null}:(g=T,T=b)):(g=T,T=b)):(g=T,T=b)):(g=T,T=b),T===b&&(T=g,sa=wa(),sa!==b&&(sa={type:"interval-period",period:"second",precision:null,secondary:null}),
T=sa))}T!==b?x={type:"interval-qualifier",start:I,end:T}:(g=x,x=b)}else g=x,x=b;else g=x,x=b;x===b&&(x=g,T=S(),T!==b?(ta(),I=Ia(),I!==b?(ta(),I=ba(),I!==b?(ta(),sa=Qa(),sa!==b?x={type:"interval-period",period:T.value,precision:I,secondary:null}:(g=x,x=b)):(g=x,x=b)):(g=x,x=b)):(g=x,x=b),x===b&&(x=g,T=S(),T!==b&&(T=fd(T)),x=T,x===b&&(x=g,T=wa(),T!==b?(ta(),I=Ia(),I!==b?(ta(),I=la(),I!==b?(ta(),sa=Ha(),sa!==b?(ta(),T=ba(),T!==b?(ta(),sa=Qa(),sa!==b?x=gd(I,T):(g=x,x=b)):(g=x,x=b)):(g=x,x=b)):(g=x,x=
b)):(g=x,x=b)):(g=x,x=b),x===b&&(x=g,T=wa(),T!==b?(ta(),I=Ia(),I!==b?(ta(),I=ba(),I!==b?(ta(),sa=Qa(),sa!==b?x={type:"interval-period",period:"second",precision:I,secondary:null}:(g=x,x=b)):(g=x,x=b)):(g=x,x=b)):(g=x,x=b),x===b&&(x=g,T=wa(),T!==b&&(T={type:"interval-period",period:"second",precision:null,secondary:null}),x=T)))));return x}function S(){var x=g;x=pa();x!==b&&(x={type:"string",value:"day"});x===b&&(x=g,x=qa(),x!==b&&(x={type:"string",value:"hour"}),x===b&&(x=g,x=va(),x!==b&&(x={type:"string",
value:"minute"}),x===b&&(x=g,x=aa(),x!==b&&(x={type:"string",value:"month"}),x===b&&(x=g,x=O(),x!==b&&(x={type:"string",value:"year"})))));return x}function ba(){var x=Ga();x!==b&&(x=parseFloat(x));return x}function la(){var x=Ga();x!==b&&(x=parseFloat(x));return x}function ma(){var x=oa();x===b&&(x=f());return x}function oa(){var x=g;if(39===w.charCodeAt(g)){var I=Z;g++}else I=b,0===ua&&n(hd);I===b&&(w.substr(g,2)===ka?(I=ka,g+=2):(I=b,0===ua&&n(ze)));if(I!==b){I=[];var T=g;w.substr(g,2)===X?(T=
X,g+=2):(T=b,0===ua&&n(id));T!==b&&(T="'");T===b&&(jd.test(w.charAt(g))?(T=w.charAt(g),g++):(T=b,0===ua&&n(kd)));for(;T!==b;)I.push(T),T=g,w.substr(g,2)===X?(T=X,g+=2):(T=b,0===ua&&n(id)),T!==b&&(T="'"),T===b&&(jd.test(w.charAt(g))?(T=w.charAt(g),g++):(T=b,0===ua&&n(kd)));39===w.charCodeAt(g)?(T=Z,g++):(T=b,0===ua&&n(hd));T!==b?x={type:"string",value:I.join("")}:(g=x,x=b)}else g=x,x=b;return x}function fa(){var x=g;if(Da()!==b){ta();var I=e();if(I!==b){ta();var T=Fa();T!==b?(ta(),T=e(),T!==b?x={type:"when_clause",
operand:I,value:T}:(g=x,x=b)):(g=x,x=b)}else g=x,x=b}else g=x,x=b;return x}function ia(){var x=g;if(Da()!==b){ta();var I=e();if(I!==b){ta();var T=Fa();T!==b?(ta(),T=e(),T!==b?x={type:"when_clause",operand:I,value:T}:(g=x,x=b)):(g=x,x=b)}else g=x,x=b}else g=x,x=b;return x}function ra(){var x=g;var I=g;if(w.substr(g,4).toLowerCase()===Ae){var T=w.substr(g,4);g+=4}else T=b,0===ua&&n(Be);if(T!==b){T=g;ua++;var sa=N();ua--;sa===b?T=void 0:(g=T,T=b);T!==b?I="ELSE":(g=I,I=b)}else g=I,I=b;I!==b?(ta(),I=e(),
I!==b?x={type:"else_clause",value:I}:(g=x,x=b)):(g=x,x=b);return x}function Aa(){var x=Ga();if(x===b){x=g;if(45===w.charCodeAt(g)){var I=eb;g++}else I=b,0===ua&&n(vc);I===b&&(43===w.charCodeAt(g)?(I=Ra,g++):(I=b,0===ua&&n(uc)));if(I!==b){var T=Ga();T!==b?x=I[0]+T:(g=x,x=b)}else g=x,x=b}return x}function xa(){var x=g;if(46===w.charCodeAt(g)){var I=na;g++}else I=b,0===ua&&n(Ce);I!==b?(x=Ga(),x===b&&(x=null),x="."+(null!=x?x:"")):(g=x,x=b);return x}function La(){var x;var I=x=g;if(De.test(w.charAt(g))){var T=
w.charAt(g);g++}else T=b,0===ua&&n(Ee);T!==b?(Fe.test(w.charAt(g))?(I=w.charAt(g),g++):(I=b,0===ua&&n(Ge)),I===b&&(I=null),I="e"+(null===I?"":I)):(g=I,I=b);I!==b?(T=Ga(),T!==b?x=I+T:(g=x,x=b)):(g=x,x=b);return x}function Ga(){var x=[];var I=Ea();if(I!==b)for(;I!==b;)x.push(I),I=Ea();else x=b;x!==b&&(x=x.join(""));return x}function Ea(){if(He.test(w.charAt(g))){var x=w.charAt(g);g++}else x=b,0===ua&&n(Ie);return x}function c(){var x=g;if(w.substr(g,2).toLowerCase()===Ma){var I=w.substr(g,2);g+=2}else I=
b,0===ua&&n(Je);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="IN":(g=x,x=b)}else g=x,x=b;return x}function q(){var x=g;if(w.substr(g,2).toLowerCase()===Xa){var I=w.substr(g,2);g+=2}else I=b,0===ua&&n(Ke);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="IS":(g=x,x=b)}else g=x,x=b;return x}function ca(){var x=g;if(w.substr(g,4).toLowerCase()===Wa){var I=w.substr(g,4);g+=4}else I=b,0===ua&&n(Le);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?
x="LIKE":(g=x,x=b)}else g=x,x=b;return x}function p(){var x=g;if(w.substr(g,3).toLowerCase()===bb){var I=w.substr(g,3);g+=3}else I=b,0===ua&&n(Me);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="NOT":(g=x,x=b)}else g=x,x=b;return x}function J(){var x=g;if(w.substr(g,3).toLowerCase()===lb){var I=w.substr(g,3);g+=3}else I=b,0===ua&&n(Ne);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="AND":(g=x,x=b)}else g=x,x=b;return x}function Q(){var x=g;if(w.substr(g,2).toLowerCase()===
Oe){var I=w.substr(g,2);g+=2}else I=b,0===ua&&n(Pe);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="OR":(g=x,x=b)}else g=x,x=b;return x}function R(){var x=g;if(w.substr(g,7).toLowerCase()===Qe){var I=w.substr(g,7);g+=7}else I=b,0===ua&&n(Re);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="BETWEEN":(g=x,x=b)}else g=x,x=b;return x}function ha(){var x=g;if(w.substr(g,4).toLowerCase()===Se){var I=w.substr(g,4);g+=4}else I=b,0===ua&&n(Te);if(I!==b){I=g;ua++;var T=
N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="FROM":(g=x,x=b)}else g=x,x=b;return x}function ea(){var x=g;if(w.substr(g,4).toLowerCase()===Ue){var I=w.substr(g,4);g+=4}else I=b,0===ua&&n(Ve);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="TRIM":(g=x,x=b)}else g=x,x=b;return x}function L(){var x=g;if(w.substr(g,8).toLowerCase()===We){var I=w.substr(g,8);g+=8}else I=b,0===ua&&n(Xe);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="INTERVAL":(g=x,x=b)}else g=x,x=b;
return x}function O(){var x=g;if(w.substr(g,4).toLowerCase()===Ye){var I=w.substr(g,4);g+=4}else I=b,0===ua&&n(Ze);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="YEAR":(g=x,x=b)}else g=x,x=b;return x}function aa(){var x=g;if(w.substr(g,5).toLowerCase()===$e){var I=w.substr(g,5);g+=5}else I=b,0===ua&&n(af);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="MONTH":(g=x,x=b)}else g=x,x=b;return x}function pa(){var x=g;if(w.substr(g,3).toLowerCase()===bf){var I=w.substr(g,
3);g+=3}else I=b,0===ua&&n(cf);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="DAY":(g=x,x=b)}else g=x,x=b;return x}function qa(){var x=g;if(w.substr(g,4).toLowerCase()===df){var I=w.substr(g,4);g+=4}else I=b,0===ua&&n(ef);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="HOUR":(g=x,x=b)}else g=x,x=b;return x}function va(){var x=g;if(w.substr(g,6).toLowerCase()===ff){var I=w.substr(g,6);g+=6}else I=b,0===ua&&n(gf);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:
(g=I,I=b);I!==b?x="MINUTE":(g=x,x=b)}else g=x,x=b;return x}function wa(){var x=g;if(w.substr(g,6).toLowerCase()===hf){var I=w.substr(g,6);g+=6}else I=b,0===ua&&n(jf);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="SECOND":(g=x,x=b)}else g=x,x=b;return x}function Ba(){var x=g;if(w.substr(g,4).toLowerCase()===kf){var I=w.substr(g,4);g+=4}else I=b,0===ua&&n(lf);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="CASE":(g=x,x=b)}else g=x,x=b;return x}function Ja(){var x=
g;if(w.substr(g,3).toLowerCase()===mf){var I=w.substr(g,3);g+=3}else I=b,0===ua&&n(nf);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="END":(g=x,x=b)}else g=x,x=b;return x}function Da(){var x=g;if(w.substr(g,4).toLowerCase()===of){var I=w.substr(g,4);g+=4}else I=b,0===ua&&n(pf);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="WHEN":(g=x,x=b)}else g=x,x=b;return x}function Fa(){var x=g;if(w.substr(g,4).toLowerCase()===qf){var I=w.substr(g,4);g+=4}else I=b,0===
ua&&n(rf);if(I!==b){I=g;ua++;var T=N();ua--;T===b?I=void 0:(g=I,I=b);I!==b?x="THEN":(g=x,x=b)}else g=x,x=b;return x}function Ha(){if(44===w.charCodeAt(g)){var x=sf;g++}else x=b,0===ua&&n(tf);return x}function Ia(){if(40===w.charCodeAt(g)){var x=uf;g++}else x=b,0===ua&&n(vf);return x}function Qa(){if(41===w.charCodeAt(g)){var x=wf;g++}else x=b,0===ua&&n(xf);return x}function ta(){var x;var I=[];for(x=ab();x!==b;)I.push(x),x=ab();return I}function ab(){if(yf.test(w.charAt(g))){var x=w.charAt(g);g++}else x=
b,0===ua&&n(zf);return x}function Ta(x,I,T,sa){x={type:"binary_expr",operator:x,left:I,right:T};void 0!==sa&&(x.escape=sa);return x}function Va(x,I){for(var T=0;T<I.length;T++)x=Ta(I[T][1],x,I[T][3]);return x}t=void 0!==t?t:{};var b={},$a=t.grammarSource,Sa={start:v},yb=v,tb="!",jb="\x3d",Ab="\x3e\x3d",Zb="\x3e",Cb="\x3c\x3d",$b="\x3c\x3e",kb="\x3c",sb="!\x3d",Ra="+",eb="-",ob="*",Pa="/",Db="@",Z="'",ka="N'",X="''",na=".",ya="null",za="true",Ka="false",Ma="in",Xa="is",Wa="like",Ua="escape",bb="not",
lb="and",Oe="or",Qe="between",Se="from",Td="for",Od="substring",Id="extract",Ue="trim",Zd="position",Fd="timestamp",Cd="date",re="leading",te="trailing",ve="both",xe="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",Ae="else",sf=",",uf="(",wf=")",Zc="`",ke=/^[A-Za-z_\x80-\uFFFF]/,me=/^[A-Za-z0-9_]/,oe=/^[A-Za-z0-9_.\x80-\uFFFF]/,jd=/^[^']/,He=/^[0-9]/,De=/^[eE]/,Fe=/^[+\-]/,yf=/^[ \t\n\r]/,ad=/^[^`]/,ld=r("!",!1),Jc=r("\x3d",
!1),nd=r("\x3e\x3d",!1),od=r("\x3e",!1),pd=r("\x3c\x3d",!1),qd=r("\x3c\x3e",!1),rd=r("\x3c",!1),sd=r("!\x3d",!1),uc=r("+",!1),vc=r("-",!1),td=r("*",!1),ud=r("/",!1),le=G([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),ne=G([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),pe=G([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),qe=r("@",!1),hd=r("'",!1),ze=r("N'",!1),id=r("''",!1),kd=G(["'"],!0,!1),Ce=r(".",!1),Ie=G([["0","9"]],!1,!1),Ee=G(["e","E"],!1,!1),Ge=G(["+","-"],!1,!1),Ad=r("NULL",
!0),wd=r("TRUE",!0),yd=r("FALSE",!0),Je=r("IN",!0),Ke=r("IS",!0),Le=r("LIKE",!0),md=r("ESCAPE",!0),Me=r("NOT",!0),Ne=r("AND",!0),Pe=r("OR",!0),Re=r("BETWEEN",!0),Te=r("FROM",!0),Ud=r("FOR",!0),Pd=r("SUBSTRING",!0),Jd=r("EXTRACT",!0),Ve=r("TRIM",!0),$d=r("POSITION",!0),Gd=r("TIMESTAMP",!0),Dd=r("DATE",!0),se=r("LEADING",!0),ue=r("TRAILING",!0),we=r("BOTH",!0),ye=r("TO",!0),Xe=r("INTERVAL",!0),Ze=r("YEAR",!0),af=r("MONTH",!0),cf=r("DAY",!0),ef=r("HOUR",!0),gf=r("MINUTE",!0),jf=r("SECOND",!0),lf=r("CASE",
!0),nf=r("END",!0),pf=r("WHEN",!0),rf=r("THEN",!0),Be=r("ELSE",!0),tf=r(",",!1),vf=r("(",!1),xf=r(")",!1),zf=G([" ","\t","\n","\r"],!1,!1),$c=r("`",!1),bd=G(["`"],!0,!1),fd=function(x){return{type:"interval-period",period:x.value,precision:null,secondary:null}},gd=function(x,I){return{type:"interval-period",period:"second",precision:x,secondary:I}},g=0,ac=[{line:1,column:1}],pb=0,tc=[],ua=0;if("startRule"in t){if(!(t.startRule in Sa))throw Error("Can't start parsing from rule \""+t.startRule+'".');
yb=Sa[t.startRule]}var Ic=yb();if(Ic!==b&&g===w.length)return Ic;Ic!==b&&g<w.length&&n({type:"end"});throw function(x,I,T){return new F(F.buildMessage(x,I),x,I,T)}(tc,pb<w.length?w.charAt(pb):null,pb<w.length?E(pb,pb+1):E(pb,pb));}}})})(Y);let W=function(){function u(){}u.parse=function(F){return Y.exports.parse(F)};return u}();k.WhereGrammar=W;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(k){k.commonjsGlobal="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};k.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};k.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},
"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(k){k.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,
supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(k,d,Y,W,u,F,A,w,t,r,G,y,E){function n(a,e,l,B,m,H){m-=l;H-=B;a=Math.min(1,Math.max(0,((a-l)*m+(e-B)*H)/(m*m+H*H)));return{x:l+m*a,y:B+H*a}}function v(a,e){return a?e?4:3:e?3:2}return function(){function a(l,B,m){this.items=l;this.queryGeometry=B;this.definitionExpression=m.definitionExpression;this.geometryType=m.geometryType;this.hasM=m.hasM;this.hasZ=m.hasZ;this.objectIdField=m.objectIdField;this.spatialReference=m.spatialReference;this.fieldsIndex=m.fieldsIndex;this.timeInfo=m.timeInfo;
this.featureAdapter=m.featureAdapter;this.aggregateAdapter=m.aggregateAdapter}var e=a.prototype;e.createQueryResponseForCount=function(l){const B=new F(l,this.featureAdapter,this.fieldsIndex);if(!l.outStatistics)return B.countDistinctValues(this.items);const {groupByFieldsForStatistics:m,having:H}=l;if(null==m||!m.length)return 1;const D=new Map,P=new Map,da=new Set;l=l.outStatistics;for(const ja of l){({statisticType:l}=ja);l="exceedslimit"!==l?ja.onStatisticField:void 0;if(!P.has(l)){var U=[];for(const M of m){const K=
this._getAttributeValues(B,M,D);U.push(K)}P.set(l,this._calculateUniqueValues(U,B.returnDistinctValues))}l=P.get(l);for(const M in l){const {data:K,items:V}=l[M];U=K.join(",");H&&!B.validateItems(V,H)||da.add(U)}}return da.size};e.createQueryResponse=function(l){let B;B=l.outStatistics?l.outStatistics.some(m=>"exceedslimit"===m.statisticType)?this._createExceedsLimitQueryResponse(l):this._createStatisticsQueryResponse(l):this._createFeatureQueryResponse(l);l.returnQueryGeometry&&(W.isValid(l.outSR)&&
!W.equals(this.queryGeometry.spatialReference,l.outSR)?B.queryGeometry=r.cleanFromGeometryEngine({spatialReference:l.outSR,...w.project(this.queryGeometry,this.queryGeometry.spatialReference,l.outSR)}):B.queryGeometry=r.cleanFromGeometryEngine({spatialReference:l.outSR,...this.queryGeometry}));return B};e.createSnappingResponse=function(l,B){const m=this.featureAdapter,H=v(this.hasZ,this.hasM),{x:D,y:P}=l.point,da="number"===typeof l.distance?l.distance:l.distance.x,U="number"===typeof l.distance?
l.distance:l.distance.y,ja={candidates:[]},M="esriGeometryPolygon"===this.geometryType;B=this.getPointCreator(l.point,this.spatialReference,B);for(const S of this.items){var K=m.getGeometry(S);if(d.isNone(K))continue;const {coords:ba,lengths:la}=K;if(l.types&1){K=0;for(var V=0;V<la.length;V++){var N=la[V];for(var z=0;z<N;z++,K+=H){var f=ba[K],h=ba[K+1];if(z!==N-1){const ma=ba[K+H],oa=ba[K+H+1],{x:fa,y:ia}=n(D,P,f,h,ma,oa);var C=(D-fa)/da;const ra=(P-ia)/U;C=C*C+ra*ra;1>=C&&ja.candidates.push({type:"edge",
objectId:m.getObjectId(S),distance:Math.sqrt(C),target:B(fa,ia),start:B(f,h),end:B(ma,oa)})}}}}if(l.types&2)for(K=M?ba.length-H:ba.length,V=0;V<K;V+=H)N=ba[V],z=ba[V+1],f=(D-N)/da,h=(P-z)/U,f=f*f+h*h,1>=f&&ja.candidates.push({type:"vertex",objectId:m.getObjectId(S),distance:Math.sqrt(f),target:B(N,z)})}ja.candidates.sort((S,ba)=>S.distance-ba.distance);return ja};e.getPointCreator=function(l,B,m){const H=d.isSome(m)&&!W.equals(B,m)?D=>w.project(D,B,m):D=>D;return null!=l.z&&null!=l.m?(D,P)=>H({x:D,
y:P,z:l.z,m:l.m}):null!=l.z?(D,P)=>H({x:D,y:P,z:l.z}):null!=l.m?(D,P)=>H({x:D,y:P,m:l.m}):(D,P)=>H({x:D,y:P})};e.executeAttributesQuery=function(l){var B=A.getWhereClause(l.where,this.fieldsIndex);if(!B)return Promise.resolve(this);if(B.isStandardized){let m=0;const H=[];for(const D of this.items)B.testFeature(D,this.featureAdapter)&&(H[m++]=D);B=new a(H,this.queryGeometry,this);B.definitionExpression=l.where;return Promise.resolve(B)}return Promise.reject(new TypeError("Where clause is not standardized"))};
e.executeAggregateIdsQuery=function(l){if(!l.aggregateIds||!l.aggregateIds.length||d.isNone(this.aggregateAdapter))return Promise.resolve(this);const B=new Set;for(const H of l.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(H).forEach(D=>B.add(D));const m=this.featureAdapter.getObjectId;return Promise.resolve(new a(this.items.filter(H=>B.has(m(H))),this.queryGeometry,this))};e.executeObjectIdsQuery=function(l){if(!l.objectIds||!l.objectIds.length)return Promise.resolve(this);const B=new Set(l.objectIds),
m=this.featureAdapter.getObjectId;return Promise.resolve(new a(this.items.filter(H=>B.has(m(H))),this.queryGeometry,this))};e.executeTimeQuery=function(l){l=t.getTimeOperator(this.timeInfo,l.timeExtent,this.featureAdapter);if(!d.isSome(l))return Promise.resolve(this);l=this.items.filter(l);return Promise.resolve(new a(l,this.queryGeometry,this))};e.filterLatest=function(){const {trackIdField:l,startTimeField:B,endTimeField:m}=this.timeInfo;var H=m||B;const D=new Map,P=this.featureAdapter.getAttribute;
for(const da of this.items){const U=P(da,l),ja=P(da,H),M=D.get(U);(!M||ja>P(M,H))&&D.set(U,da)}H=Array.from(D.values());return Promise.resolve(new a(H,this.queryGeometry,this))};e.project=function(){var l=k._asyncToGenerator(function*(B){if(!B||W.equals(this.spatialReference,B))return this;const m=this.featureAdapter,H=(yield w.projectMany(this.items.map(D=>r.getGeometry(this.geometryType,this.hasZ,this.hasM,m.getGeometry(D))),this.spatialReference,B)).map((D,P)=>m.cloneWithGeometry(this.items[P],
u.convertFromGeometry(D,this.hasZ,this.hasM)));return new a(H,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:B,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(B){return l.apply(this,arguments)}}();e.createSummaryStatisticsResponse=function(){var l=k._asyncToGenerator(function*(B,m){const {field:H,valueExpression:D,
normalizationField:P,normalizationType:da,normalizationTotal:U,minValue:ja,maxValue:M,scale:K}=m;m=this.fieldsIndex.isDateField(H);B=yield this._getDataValues(B,{field:H,valueExpression:D,normalizationField:P,normalizationType:da,normalizationTotal:U,scale:K});const V=y.isNullCountSupported({normalizationType:da,normalizationField:P,minValue:ja,maxValue:M}),N=this.fieldsIndex.get(H),z={value:.5,fieldType:null==N?void 0:N.type};B=G.isStringField(N)?y.calculateStringStatistics({values:B,supportsNullCount:V,
percentileParams:z}):y.calculateStatistics({values:B,minValue:ja,maxValue:M,useSampleStdDev:!da,supportsNullCount:V,percentileParams:z});return y.processSummaryStatisticsResult(B,m)});return function(B,m){return l.apply(this,arguments)}}();e.createUniqueValuesResponse=function(){var l=k._asyncToGenerator(function*(B,m){const {field:H,valueExpression:D,domain:P,returnAllCodedValues:da,scale:U}=m;B=yield this._getDataValues(B,{field:H,valueExpression:D,scale:U});B=y.calculateUniqueValuesCount(B);return y.createUVResult(B,
P,da)});return function(B,m){return l.apply(this,arguments)}}();e.createClassBreaksResponse=function(){var l=k._asyncToGenerator(function*(B,m){const {field:H,valueExpression:D,normalizationField:P,normalizationType:da,normalizationTotal:U,classificationMethod:ja,standardDeviationInterval:M,minValue:K,maxValue:V,numClasses:N,scale:z}=m;B=yield this._getDataValues(B,{field:H,valueExpression:D,normalizationField:P,normalizationType:da,normalizationTotal:U,scale:z});B=y.calculateClassBreaks(B,{field:H,
normalizationField:P,normalizationType:da,normalizationTotal:U,classificationMethod:ja,standardDeviationInterval:M,minValue:K,maxValue:V,numClasses:N});return y.resolveCBResult(B,ja)});return function(B,m){return l.apply(this,arguments)}}();e.createHistogramResponse=function(){var l=k._asyncToGenerator(function*(B,m){const {field:H,valueExpression:D,normalizationField:P,normalizationType:da,normalizationTotal:U,classificationMethod:ja,standardDeviationInterval:M,minValue:K,maxValue:V,numBins:N,scale:z}=
m;B=yield this._getDataValues(B,{field:H,valueExpression:D,normalizationField:P,normalizationType:da,normalizationTotal:U,scale:z});return y.calculateHistogram(B,{field:H,normalizationField:P,normalizationType:da,normalizationTotal:U,classificationMethod:ja,standardDeviationInterval:M,minValue:K,maxValue:V,numBins:N})});return function(B,m){return l.apply(this,arguments)}}();e._sortFeatures=function(l,B,m){if(1<l.length&&B&&B.length)for(const H of B.reverse()){B=H.split(" ");const D=B[0],P=this.fieldsIndex.get(D);
B=B[1]&&"desc"===B[1].toLowerCase();const da=y.getAttributeComparator(null==P?void 0:P.type,B);l.sort((U,ja)=>{U=m(U,D,P);ja=m(ja,D,P);return da(U,ja)})}};e._createFeatureQueryResponse=function(l){const B=this.items,{geometryType:m,hasM:H,hasZ:D,objectIdField:P,spatialReference:da}=this,{outFields:U,outSR:ja,quantizationParameters:M,resultRecordCount:K,resultOffset:V,returnZ:N,returnM:z}=l,f=null!=K?B.length>(V||0)+K:!1,h=U&&(U.includes("*")?[...this.fieldsIndex.fields]:U.map(C=>this.fieldsIndex.get(C)));
return{exceededTransferLimit:f,features:this._createFeatures(l,B),fields:h,geometryType:m,hasM:H&&z,hasZ:D&&N,objectIdFieldName:P,spatialReference:r.cleanFromGeometryEngine(ja?ja:da),transform:M&&Y.toQuantizationTransform(M)||null}};e._createFeatures=function(l,B){const m=new F(l,this.featureAdapter,this.fieldsIndex),{hasM:H,hasZ:D}=this,{orderByFields:P,quantizationParameters:da,returnGeometry:U,returnCentroid:ja,maxAllowableOffset:M,resultOffset:K,resultRecordCount:V,returnZ:N=!1,returnM:z=!1}=
l,f=D&&N,h=H&&z;l=[];var C=0;B=[...B];this._sortFeatures(B,P,(la,ma,oa)=>m.getFieldValue(la,ma,oa));if(U||ja){var S=Y.toQuantizationTransform(da);if(U&&!ja)for(var ba of B)l[C++]={attributes:m.getAttributes(ba),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ba),M,S,f,h)};else if(!U&&ja)for(const la of B)l[C++]={attributes:m.getAttributes(la),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(la,this),S)};else for(const la of B)l[C++]={attributes:m.getAttributes(la),
centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(la,this),S),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(la),M,S,f,h)}}else for(S of B)(ba=m.getAttributes(S))&&(l[C++]={attributes:ba});C=K||0;null!=V&&(l=l.slice(C,Math.min(l.length,C+V)));return l};e._createExceedsLimitQueryResponse=function(l){var B=!1;let m=Number.POSITIVE_INFINITY,H=Number.POSITIVE_INFINITY;B=Number.POSITIVE_INFINITY;for(const D of l.outStatistics)if("exceedslimit"===
D.statisticType){m=null!=D.maxPointCount?D.maxPointCount:Number.POSITIVE_INFINITY;H=null!=D.maxRecordCount?D.maxRecordCount:Number.POSITIVE_INFINITY;B=null!=D.maxVertexCount?D.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)B=this.items.length>m;else if(this.items.length>H)B=!0;else{l=this.hasZ?this.hasM?4:3:this.hasM?3:2;const D=this.featureAdapter;B=this.items.reduce((P,da)=>{da=D.getGeometry(da);return P+(d.isSome(da)&&da.coords.length||0)},0)/l>B}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(B)}}]}};e._createStatisticsQueryResponse=function(l){var B={attributes:{}};const m=[],H=new Map,D=new Map,P=new Map,da=new Map,U=new F(l,this.featureAdapter,this.fieldsIndex);var ja=l.outStatistics;const {groupByFieldsForStatistics:M,having:K,orderByFields:V}=l;l=M&&M.length;const N=!!l,z=N&&M[0],f=N&&!this.fieldsIndex.get(z);for(const la of ja){const {outStatisticFieldName:ma,
statisticType:oa}=la;ja=la;var h="exceedslimit"!==oa?la.onStatisticField:void 0;const fa="percentile_disc"===oa||"percentile_cont"===oa,ia=N&&1===l&&(h===z||f)&&"count"===oa;if(N){if(!P.has(h)){var C=[];for(const ra of M){var S=this._getAttributeValues(U,ra,H);C.push(S)}P.set(h,this._calculateUniqueValues(C,U.returnDistinctValues))}C=P.get(h);for(const ra in C){const {count:Aa,data:xa,items:La,itemPositions:Ga}=C[ra];S=xa.join(",");if(!K||U.validateItems(La,K)){const Ea=da.get(S)||{attributes:{}};
var ba=null;if(ia)ba=Aa;else{const c=this._getAttributeValues(U,h,H);ba=Ga.map(q=>c[q]);ba=fa&&"statisticParameters"in ja?this._getPercentileValue(ja,ba):this._getStatisticValue(ja,ba,null,U.returnDistinctValues)}Ea.attributes[ma]=ba;M.forEach((c,q)=>Ea.attributes[this.fieldsIndex.get(c)?c:`EXPR_${q+1}`]=xa[q]);da.set(S,Ea)}}}else h=this._getAttributeValues(U,h,H),B.attributes[ma]=fa&&"statisticParameters"in ja?this._getPercentileValue(ja,h):this._getStatisticValue(ja,h,D,U.returnDistinctValues);
m.push({name:ma,alias:ma,type:"esriFieldTypeDouble"})}B=N?Array.from(da.values()):[B];this._sortFeatures(B,V,(la,ma)=>la.attributes[ma]);return{fields:m,features:B}};e._getStatisticValue=function(l,B,m,H){const {onStatisticField:D,statisticType:P}=l;l=null;l=null!=m&&m.has(D)?m.get(D):G.isStringField(this.fieldsIndex.get(D))?y.calculateStringStatistics({values:B,returnDistinct:H}):y.calculateStatistics({values:B,minValue:null,maxValue:null,useSampleStdDev:!0});m&&m.set(D,l);return l["var"===P?"variance":
P]};e._getPercentileValue=function(l,B){const {onStatisticField:m,statisticParameters:H,statisticType:D}=l,{value:P,orderBy:da}=H;l=this.fieldsIndex.get(m);return y.calculatePercentile(B,{value:P,orderBy:da,fieldType:null==l?void 0:l.type,isDiscrete:"percentile_disc"===D})};e._getAttributeValues=function(l,B,m){if(m.has(B))return m.get(B);const H=this.fieldsIndex.get(B),D=this.items.map(P=>l.getFieldValue(P,B,H));m.set(B,D);return D};e._getAttributeNormalizedValues=function(l,B){return this.items.map(m=>
l.getNormalizedValue(m,{field:B.field,fieldInfo:this.fieldsIndex.get(B.field),normalizationField:B.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(B.normalizationField),normalizationType:B.normalizationType,normalizationTotal:B.normalizationTotal}))};e._getAttributeExpressionValues=function(){var l=k._asyncToGenerator(function*(B,m,H){const {arcadeUtils:D}=yield E.loadArcade(),P=D.createFunction(m),da=H&&D.getViewInfo(H);return this.items.map(U=>B.getExpressionValue(U,{compiledFunc:P,
viewInfo:da},D))});return function(B,m,H){return l.apply(this,arguments)}}();e._calculateUniqueValues=function(l,B){const m={},H=this.items,D=H.length;for(let P=0;P<D;P++){const da=H[P],U=[];for(const M of l)U.push(M[P]);const ja=U.join(",");B?null==m[ja]&&(m[ja]={count:1,data:U,items:[da],itemPositions:[P]}):null==m[ja]?m[ja]={count:1,data:U,items:[da],itemPositions:[P]}:(m[ja].count++,m[ja].items.push(da),m[ja].itemPositions.push(P))}return m};e._getDataValues=function(){var l=k._asyncToGenerator(function*(B,
m){const H=new F(B,this.featureAdapter,this.fieldsIndex),{valueExpression:D,field:P,normalizationField:da,normalizationType:U,normalizationTotal:ja,scale:M}=m;B=D?{viewingMode:"map",scale:M,spatialReference:B.outSR||this.spatialReference}:null;return D?this._getAttributeExpressionValues(H,D,B):this._getAttributeNormalizedValues(H,{field:P,normalizationField:da,normalizationType:U,normalizationTotal:ja})});return function(B,m){return l.apply(this,arguments)}}();k._createClass(a,[{key:"size",get:function(){return this.items.length}}]);
return a}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(k,d,Y){function W({scale:M,translate:K},V){return Math.round((V-K[0])/M[0])}function u({scale:M,translate:K},V){return Math.round((K[1]-V)/M[1])}function F(M,K,V){const N=[];let z,f,h,C;for(let S=0;S<V.length;S++){const ba=V[S];if(0<S){if(h=W(M,ba[0]),C=u(M,ba[1]),h!==z||C!==f)N.push(K(ba,h-z,C-f)),z=h,f=C}else z=W(M,ba[0]),f=u(M,ba[1]),N.push(K(ba,z,f))}return 0<N.length?
N:null}function A(M,K,V,N){return F(M,V?N?ja:U:N?U:da,K)}function w(M,K,V,N){const z=[];V=V?N?ja:U:N?U:da;for(N=0;N<K.length;N++){const f=F(M,V,K[N]);f&&3<=f.length&&z.push(f)}return z.length?z:null}function t(M,K,V,N){const z=[];V=V?N?ja:U:N?U:da;for(N=0;N<K.length;N++){const f=F(M,V,K[N]);f&&2<=f.length&&z.push(f)}return z.length?z:null}function r({scale:M,translate:K},V){return V*M[0]+K[0]}function G({scale:M,translate:K},V){return K[1]-V*M[1]}function y(M,K,V){const N=Array(V.length);if(!V.length)return N;
const [z,f]=M.scale;let h=r(M,V[0][0]);M=G(M,V[0][1]);N[0]=K(V[0],h,M);for(let C=1;C<V.length;C++){const S=V[C];h+=S[0]*z;M-=S[1]*f;N[C]=K(S,h,M)}return N}function E(M,K,V){const N=Array(V.length);for(let z=0;z<V.length;z++)N[z]=y(M,K,V[z]);return N}function n(M,K,V,N){return y(M,V?N?ja:U:N?U:da,K)}function v(M,K,V,N){return E(M,V?N?ja:U:N?U:da,K)}function a(M,K,V,N){return E(M,V?N?ja:U:N?U:da,K)}function e(M,K,V){let [N,z]=V[0],f=Math.min(N,K[0]),h=Math.min(z,K[1]),C=Math.max(N,K[2]);K=Math.max(z,
K[3]);for(let S=1;S<V.length;S++){const [ba,la]=V[S];N+=ba;z+=la;0>ba&&(f=Math.min(f,N));0<ba&&(C=Math.max(C,N));0>la?h=Math.min(h,z):0<la&&(K=Math.max(K,z))}M[0]=f;M[1]=h;M[2]=C;M[3]=K;return M}function l(M,K){if(!K.length)return null;M[0]=M[1]=Number.POSITIVE_INFINITY;M[2]=M[3]=Number.NEGATIVE_INFINITY;for(let V=0;V<K.length;V++)e(M,M,K[V]);return M}function B(M,K,V,N,z){K.xmin=W(M,V.xmin);K.ymin=u(M,V.ymin);K.xmax=W(M,V.xmax);K.ymax=u(M,V.ymax);K!==V&&(N&&(K.zmin=V.zmin,K.zmax=V.zmax),z&&(K.mmin=
V.mmin,K.mmax=V.mmax));return K}function m(M,K,V,N,z){K.points=A(M,V.points,N,z);return K}function H(M,K,V,N,z){K.x=W(M,V.x);K.y=u(M,V.y);K!==V&&(N&&(K.z=V.z),z&&(K.m=V.m));return K}function D(M,K,V,N,z){M=w(M,V.rings,N,z);if(!M)return null;K.rings=M;return K}function P(M,K,V,N,z){M=t(M,V.paths,N,z);if(!M)return null;K.paths=M;return K}const da=(M,K,V)=>[K,V],U=(M,K,V)=>[K,V,M[2]],ja=(M,K,V)=>[K,V,M[2],M[3]];k.equals=function(M,K){if(M===K||null==M&&null==K)return!0;if(null==M||null==K)return!1;let V,
N,z,f;M&&"upperLeft"===M.originPosition?(V=M.translate[0],N=M.translate[1],M=M.scale[0]):(V=d.isSome(M.extent)?M.extent.xmin:0,N=d.isSome(M.extent)?M.extent.ymax:0,M=M.tolerance);K&&"upperLeft"===K.originPosition?(z=K.translate[0],f=K.translate[1],K=K.scale[0]):(z=d.isSome(K.extent)?K.extent.xmin:0,f=d.isSome(K.extent)?K.extent.ymax:0,K=K.tolerance);return V===z&&N===f&&M===K};k.getQuantizedBoundsCoordsArray=e;k.getQuantizedBoundsCoordsArrayArray=l;k.getQuantizedBoundsPaths=function(M){return l([0,
0,0,0],M)};k.getQuantizedBoundsPoints=function(M){const K=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return e(K,K,M)};k.getQuantizedBoundsRings=function(M){return l([0,0,0,0],M)};k.quantizeBounds=function(M,K,V){K[0]=W(M,V[0]);K[3]=u(M,V[1]);K[2]=W(M,V[2]);K[1]=u(M,V[3]);return K};k.quantizeExtent=B;k.quantizeGeometry=function(M,K){return M&&K?Y.isPoint(K)?H(M,{},K,!1,!1):Y.isPolyline(K)?P(M,{},K,!1,!1):Y.isPolygon(K)?D(M,{},K,!1,!1):Y.isMultipoint(K)?
m(M,{},K,!1,!1):Y.isExtent(K)?B(M,{},K,!1,!1):null:null};k.quantizeMultipoint=m;k.quantizePaths=t;k.quantizePoint=H;k.quantizePoints=A;k.quantizePolygon=D;k.quantizePolyline=P;k.quantizeRings=w;k.quantizeX=W;k.quantizeY=u;k.toQuantizationTransform=function(M){return M?{originPosition:"upper-left"===M.originPosition?"upperLeft":"lower-left"===M.originPosition?"lowerLeft":M.originPosition,scale:M.tolerance?[M.tolerance,M.tolerance]:[1,1],translate:d.isSome(M.extent)?[M.extent.xmin,M.extent.ymax]:[0,
0]}:null};k.unquantizeBounds=function(M,K,V){return V?(K[0]=r(M,V[0]),K[1]=G(M,V[3]),K[2]=r(M,V[2]),K[3]=G(M,V[1]),K):[r(M,K[0]),G(M,K[3]),r(M,K[2]),G(M,K[1])]};k.unquantizeCoordsArray=y;k.unquantizeCoordsArrayArray=E;k.unquantizeExtent=function(M,K,V,N,z){K.xmin=r(M,V.xmin);K.ymin=G(M,V.ymin);K.xmax=r(M,V.xmax);K.ymax=G(M,V.ymax);K!==V&&(N&&(K.zmin=V.zmin,K.zmax=V.zmax),z&&(K.mmin=V.mmin,K.mmax=V.mmax));return K};k.unquantizeMultipoint=function(M,K,V,N,z){d.isSome(V)&&(K.points=n(M,V.points,N,z));
return K};k.unquantizePaths=v;k.unquantizePoint=function(M,K,V,N,z){if(d.isNone(V))return K;K.x=r(M,V.x);K.y=G(M,V.y);K!==V&&(N&&(K.z=V.z),z&&(K.m=V.m));return K};k.unquantizePoints=n;k.unquantizePolygon=function(M,K,V,N,z){d.isSome(V)&&(K.rings=a(M,V.rings,N,z));return K};k.unquantizePolyline=function(M,K,V,N,z){d.isSome(V)&&(K.paths=v(M,V.paths,N,z));return K};k.unquantizeRings=a;k.unquantizeX=r;k.unquantizeY=G;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../statistics/utils"],function(k,d,Y){return function(){function W(F,A,w){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=F.returnDistinctValues;this.fieldsIndex=w;this.featureAdapter=A;if((A=F.outFields)&&-1===A.indexOf("*")){this.outFields=A;F=0;for(const r of A){var t=d.getExpressionFromFieldName(r);t=(A=this.fieldsIndex.get(t))?null:d.getWhereClause(t,w);A=A?A.name:d.getAliasFromFieldName(r)||`FIELD_EXP_${F++}`;this._fieldDataCache.set(r,
{alias:A,clause:t})}}}var u=W.prototype;u.countDistinctValues=function(F){if(!this.returnDistinctValues)return F.length;F.forEach(A=>this.getAttributes(A));return this._returnDistinctMap.size};u.getAttributes=function(F){F=this._processAttributesForOutFields(F);return this._processAttributesForDistinctValues(F)};u.getFieldValue=function(F,A,w){const t=w?w.name:A;let r=null;this._fieldDataCache.has(t)?r=this._fieldDataCache.get(t).clause:w||(r=d.getWhereClause(A,this.fieldsIndex),this._fieldDataCache.set(t,
{alias:t,clause:r}));return w?this.featureAdapter.getAttribute(F,t):r.calculateValue(F,this.featureAdapter)};u.getNormalizedValue=function(F,A){const w=A.normalizationType,t=A.normalizationTotal;let r=this.getFieldValue(F,A.field,A.fieldInfo);w&&Number.isFinite(r)&&(F=this.getFieldValue(F,A.normalizationField,A.normalizationFieldInfo),r=Y.getNormalizedValue(r,w,F,t));return r};u.getExpressionValue=function(F,A,w){F={attributes:this.featureAdapter.getAttributes(F)};F=w.createExecContext(F,A.viewInfo);
return w.executeFunction(A.compiledFunc,F)};u.validateItem=function(F,A){this._fieldDataCache.has(A)||this._fieldDataCache.set(A,{alias:A,clause:d.getWhereClause(A,this.fieldsIndex)});return this._fieldDataCache.get(A).clause.testFeature(F,this.featureAdapter)};u.validateItems=function(F,A){this._fieldDataCache.has(A)||this._fieldDataCache.set(A,{alias:A,clause:d.getWhereClause(A,this.fieldsIndex)});return this._fieldDataCache.get(A).clause.testSet(F,this.featureAdapter)};u._processAttributesForOutFields=
function(F){const A=this.outFields;if(!A||!A.length)return this.featureAdapter.getAttributes(F);const w={};for(const t of A){const {alias:r,clause:G}=this._fieldDataCache.get(t);w[r]=G?G.calculateValue(F,this.featureAdapter):this.featureAdapter.getAttribute(F,r)}return w};u._processAttributesForDistinctValues=function(F){if(k.isNone(F)||!this.returnDistinctValues)return F;var A=this.outFields,w=[];if(A)for(const r of A){var {alias:t}=this._fieldDataCache.get(r);w.push(F[t])}else for(t in F)w.push(F[t]);
A=`${(A||["*"]).join(",")}=${w.join(",")}`;w=this._returnDistinctMap.get(A)||0;this._returnDistinctMap.set(A,++w);return 1<w?null:F};return W}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(k,d,Y){function W(m){const H=null!=m.minValue||null!=m.maxValue,D=!!m.sqlExpression&&m.supportsSQLExpression;return!(null!=m.normalizationField||null!=m.normalizationType)&&!H&&!D}function u(m){const {values:H,
useSampleStdDev:D,supportsNullCount:P}=m;var da=Number.POSITIVE_INFINITY;let U=Number.NEGATIVE_INFINITY,ja=null,M=null;var K=null;let V=null,N=0;const z=null==m.minValue?-Infinity:m.minValue,f=null==m.maxValue?Infinity:m.maxValue;for(const h of H)Number.isFinite(h)?h>=z&&h<=f&&(ja+=h,da=Math.min(da,h),U=Math.max(U,h),N++):"string"===typeof h&&N++;if(N&&null!=ja){M=ja/N;K=0;for(const h of H)Number.isFinite(h)&&h>=z&&h<=f&&(K+=(h-M)**2);V=D?1<N?K/(N-1):0:0<N?K/N:0;K=Math.sqrt(V)}else U=da=null;da={avg:M,
count:N,max:U,min:da,stddev:K,sum:ja,variance:V};P&&(da.nullcount=H.length-N);m.percentileParams&&(da.median=F(H,m.percentileParams));return da}function F(m,H){const {fieldType:D,value:P,orderBy:da,isDiscrete:U}=H,ja=A(D,"desc"===da);m=[...m].filter(N=>null!=N).sort((N,z)=>ja(N,z));if(0===m.length)return null;if(0>=P)return m[0];if(1<=P)return m[m.length-1];var M=(m.length-1)*P,K=Math.floor(M);H=K+1;M%=1;K=m[K];const V=m[H];return H>=m.length||U||"string"===typeof K||"string"===typeof V?K:K*(1-M)+
V*M}function A(m,H){const D=H?1:-1,P=t(H),da=w(H);if(!m||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...l].includes(m))return(U,ja)=>"number"===typeof U&&"number"===typeof ja?P(U,ja):"string"===typeof U&&"string"===typeof ja?da(U,ja):D;if("esriFieldTypeDate"===m)return(U,ja)=>{U=(new Date(U)).getTime();ja=(new Date(ja)).getTime();return isNaN(U)||isNaN(ja)?D:P(U,ja)};if(l.has(m))return(U,ja)=>P(U,ja);if("esriFieldTypeString"===m)return(U,ja)=>da(U,ja);if("esriFieldTypeGUID"===
m||"esriFieldTypeGlobalID"===m){const U=w(H);return(ja,M)=>U(r(ja),r(M))}return H?(U,ja)=>1:(U,ja)=>-1}function w(m){return m?(H,D)=>{H=H.toUpperCase();D=D.toUpperCase();return H>D?-1:H<D?1:0}:(H,D)=>{H=H.toUpperCase();D=D.toUpperCase();return H<D?-1:H>D?1:0}}function t(m){return m?(H,D)=>D-H:(H,D)=>H-D}function r(m){return m.substr(24,12)+m.substr(19,4)+m.substr(16,2)+m.substr(14,2)+m.substr(11,2)+m.substr(9,2)+m.substr(6,2)+m.substr(4,2)+m.substr(2,2)+m.substr(0,2)}function G(m,H){const D=E({field:H.field,
normalizationType:H.normalizationType,normalizationField:H.normalizationField,classificationMethod:H.classificationMethod,standardDeviationInterval:H.standardDeviationInterval,breakCount:H.numClasses||5});m=y(m,H.minValue,H.maxValue);return Y.createGenerateRendererClassBreaks({definition:D,values:m,normalizationTotal:H.normalizationTotal})}function y(m,H,D){H=null==H?-Infinity:H;D=null==D?Infinity:D;return m.filter(P=>Number.isFinite(P)&&P>=H&&P<=D)}function E(m){const H=m.field,D=m.classificationMethod||
"equal-interval",P=m.normalizationType,da=m.normalizationField,U=new d;U.classificationField=H;U.breakCount=m.breakCount;U.classificationMethod=D;U.standardDeviationInterval="standard-deviation"===D?m.standardDeviationInterval||1:void 0;U.normalizationType=P;U.normalizationField="field"===P?da:void 0;return U}function n(m,H){const {field:D,classificationMethod:P,standardDeviationInterval:da,normalizationType:U,normalizationField:ja,normalizationTotal:M,minValue:K,maxValue:V}=H,N=H.numBins||10;let z=
H=null,f=null;P&&"equal-interval"!==P||U?({classBreaks:m}=G(m,{field:D,normalizationType:U,normalizationField:ja,normalizationTotal:M,classificationMethod:P,standardDeviationInterval:da,minValue:K,maxValue:V,numClasses:N}),H=m[0].minValue,z=m[m.length-1].maxValue,f=m.map(h=>[h.minValue,h.maxValue])):(null!=K&&null!=V?(H=K,z=V):(m=u({values:m,minValue:K,maxValue:V,useSampleStdDev:!U,supportsNullCount:W({normalizationType:U,normalizationField:ja,minValue:K,maxValue:V})}),H=m.min,z=m.max),f=a(H,z,N));
return{min:H,max:z,intervals:f}}function v(m,H){let D=-1;for(let P=m.length-1;0<=P;P--)if(H>=m[P][0]){D=P;break}return D}function a(m,H,D){const P=(H-m)/D,da=[];let U;for(let ja=1;ja<=D;ja++)U=m+P,U=Number(U.toFixed(16)),da.push([m,ja===D?H:U]),m=U;return da}const e=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,l=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),B="min max avg stddev count sum variance nullcount median".split(" ");k.calculateClassBreaks=
G;k.calculateHistogram=function(m,H){const {min:D,max:P,intervals:da}=n(m,H),U=da.map((ja,M)=>({minValue:da[M][0],maxValue:da[M][1],count:0}));for(const ja of m)null!=ja&&ja>=D&&ja<=P&&(m=v(da,ja),-1<m&&U[m].count++);return{bins:U,minValue:D,maxValue:P,normalizationTotal:H.normalizationTotal}};k.calculatePercentile=F;k.calculateStatistics=u;k.calculateStringStatistics=function(m){const H=m.returnDistinct?[...new Set(m.values)]:m.values,D=H.filter(da=>null!=da).length,P={count:D};m.supportsNullCount&&
(P.nullcount=H.length-D);m.percentileParams&&(P.median=F(H,m.percentileParams));return P};k.calculateUniqueValuesCount=function(m){const H={};for(let D of m){if(null==D||"string"===typeof D&&""===D.trim())D=null;null==H[D]?H[D]={count:1,data:D}:H[D].count++}return{count:H}};k.createClassBreaksDefinition=E;k.createUVResult=function(m,H,D){const P=m.count;m=[];D&&H&&"coded-value"===H.type&&H.codedValues.forEach(da=>{da=da.code;P.hasOwnProperty(da)||(P[da]={data:da,count:0})});for(const da in P)H=P[da],
m.push({value:H.data,count:H.count,label:H.label});return{uniqueValueInfos:m}};k.getAttributeComparator=A;k.getEqualIntervalBins=a;k.getNormalizedValue=function(m,H,D,P){let da=null;switch(H){case "log":0!==m&&(da=Math.log(m)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(P)&&0!==P&&(da=m/P*100);break;case "field":Number.isFinite(D)&&0!==D&&(da=m/D);break;case "natural-log":0<m&&(da=Math.log(m));break;case "square-root":0<m&&(da=m**.5)}return da};k.isNullCountSupported=W;k.processSummaryStatisticsResult=
function(m,H){let D;for(D in m)-1<B.indexOf(D)&&(Number.isFinite(m[D])||(m[D]=null));if(!H)return m;["avg","stddev","variance"].forEach(P=>{null!=m[P]&&(m[P]=Math.ceil(m[P]))});return m};k.resolveCBResult=function(m,H){let D=m.classBreaks;const P=D[0].minValue,da=D[D.length-1].maxValue,U="standard-deviation"===H;D=D.map(ja=>{const M=ja.label;ja={minValue:ja.minValue,maxValue:ja.maxValue,label:M};if(U&&M){const K=M.match(e).map(V=>+V.trim());2===K.length?(ja.minStdDev=K[0],ja.maxStdDev=K[1],0>K[0]&&
0<K[1]&&(ja.hasAvg=!0)):1===K.length&&(M.includes("\x3c")?(ja.minStdDev=null,ja.maxStdDev=K[0]):M.includes("\x3e")&&(ja.minStdDev=K[0],ja.maxStdDev=null))}return ja});return{minValue:P,maxValue:da,classBreakInfos:D,normalizationTotal:m.normalizationTotal}};k.statisticTypes=B;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(k,d,Y,W,u,F,A,w,t){u=new Y.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});Y=new Y.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});t=function(r){function G(){var y=r.apply(this,arguments)||this;y.breakCount=null;y.classificationField=
null;y.classificationMethod=null;y.normalizationField=null;y.normalizationType=null;y.type="class-breaks-definition";return y}k._inheritsLoose(G,r);k._createClass(G,[{key:"standardDeviationInterval",set:function(y){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",y)}},{key:"definedInterval",set:function(y){"defined-interval"===this.classificationMethod&&this._set("definedInterval",y)}}]);return G}(t);d.__decorate([W.property({json:{write:!0}})],t.prototype,"breakCount",
void 0);d.__decorate([W.property({json:{write:!0}})],t.prototype,"classificationField",void 0);d.__decorate([W.property({type:String,json:{read:u.read,write:u.write}})],t.prototype,"classificationMethod",void 0);d.__decorate([W.property({json:{write:!0}})],t.prototype,"normalizationField",void 0);d.__decorate([W.property({json:{read:Y.read,write:Y.write}})],t.prototype,"normalizationType",void 0);d.__decorate([W.property({value:null,json:{write:!0}})],t.prototype,"standardDeviationInterval",null);
d.__decorate([W.property({value:null,json:{write:!0}})],t.prototype,"definedInterval",null);d.__decorate([W.property()],t.prototype,"type",void 0);return t=d.__decorate([w.subclass("esri.rest.support.ClassBreaksDefinition")],t)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(k,d,Y,W,u,F,A,w,t,r,G){Y=new Y.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});W=function(y){function E(){var n=y.apply(this,arguments)||this;n.baseSymbol=null;n.colorRamp=null;n.type=null;return n}k._inheritsLoose(E,y);return E}(W.JSONSupport);d.__decorate([u.property({type:G,json:{write:!0}})],W.prototype,"baseSymbol",void 0);d.__decorate([u.property({types:r.types,json:{read:{reader:r.fromJSON},write:!0}})],W.prototype,"colorRamp",void 0);d.__decorate([u.property({json:{read:Y.read,
write:Y.write}})],W.prototype,"type",void 0);return W=d.__decorate([t.subclass("esri.rest.support.ClassificationDefinition")],W)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(k,d,Y,W){Y={key:"type",base:Y,typeMap:{algorithmic:d,multipart:W}};k.fromJSON=function(u){return u&&u.type?"algorithmic"===u.type?d.fromJSON(u):"multipart"===u.type?W.fromJSON(u):null:null};k.types=Y;Object.defineProperty(k,"__esModule",
{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(k,d,Y,W,u,F,A,w,t){var r;t=r=function(G){function y(E){E=G.call(this,E)||this;E.algorithm=null;E.fromColor=null;E.toColor=
null;E.type="algorithmic";return E}k._inheritsLoose(y,G);y.prototype.clone=function(){return new r({fromColor:W.clone(this.fromColor),toColor:W.clone(this.toColor),algorithm:this.algorithm})};return y}(t);d.__decorate([A.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],t.prototype,"algorithm",void 0);d.__decorate([u.property({type:Y,json:{type:[F.Integer],write:!0}})],t.prototype,"fromColor",void 0);d.__decorate([u.property({type:Y,json:{type:[F.Integer],
write:!0}})],t.prototype,"toColor",void 0);d.__decorate([u.property({type:["algorithmic"]})],t.prototype,"type",void 0);return t=r=d.__decorate([w.subclass("esri.rest.support.AlgorithmicColorRamp")],t)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,d,Y){k.enumeration=function(W,u={}){var F;W=W instanceof d.JSONMap?W:new d.JSONMap(W,u);W={type:(null!=(F=null==u?void 0:u.ignoreUnknown)?F:1)?W.apiValues:String,readOnly:null==
u?void 0:u.readOnly,json:{type:W.jsonValues,read:null!=u&&u.readOnly?!1:{reader:W.read},write:{writer:W.write}}};void 0!==(null==u?void 0:u.default)&&(W.json.default=u.default);void 0!==(null==u?void 0:u.name)&&(W.json.name=u.name);return Y.property(W)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Y,W,u,F,A,w){Y=function(t){function r(G){G=t.call(this,G)||this;G.type=null;return G}k._inheritsLoose(r,t);return r}(Y.JSONSupport);d.__decorate([W.property({readOnly:!0,json:{read:!1,write:!0}})],Y.prototype,"type",void 0);return Y=d.__decorate([w.subclass("esri.rest.support.ColorRamp")],Y)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(k,d,Y,W,u,F,A,w){var t;u=t=function(r){function G(y){y=r.call(this,y)||this;y.colorRamps=null;y.type="multipart";return y}k._inheritsLoose(G,r);G.prototype.clone=function(){return new t({colorRamps:Y.clone(this.colorRamps)})};return G}(w);d.__decorate([W.property({type:[A],json:{write:!0}})],u.prototype,"colorRamps",void 0);d.__decorate([W.property({type:["multipart"]})],u.prototype,"type",void 0);return u=t=d.__decorate([F.subclass("esri.rest.support.MultipartColorRamp")],u)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Y,W,u,F,A,w,t,r,G){W=new W.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let y=0;u=function(E){function n(a){a=E.call(this,a)||this;a.id=`sym${y++}`;a.type=null;return a}k._inheritsLoose(n,
E);var v=n.prototype;v.readColor=function(a){return a&&null!=a[0]?[a[0],a[1],a[2],a[3]/255]:a};v.collectRequiredFields=function(){var a=k._asyncToGenerator(function*(e,l){});return function(e,l){return a.apply(this,arguments)}}();v.hash=function(){return JSON.stringify(this.toJSON())};v.clone=function(){};k._createClass(n,[{key:"color",set:function(a){this._set("color",a)}}]);return n}(u.JSONSupport);d.__decorate([F.property({type:W.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:W.write}}})],
u.prototype,"type",void 0);d.__decorate([F.property({type:Y,value:new Y([0,0,0,1]),json:{write:{allowNull:!0}}})],u.prototype,"color",null);d.__decorate([r.reader("color")],u.prototype,"readColor",null);return u=d.__decorate([G.subclass("esri.symbols.Symbol")],u)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(k){function d(G){const {classificationMethod:y,breakCount:E,normalizationType:n,definedInterval:v}=G.definition,a=[];var e=G.values;if(0===e.length)return[];
e=e.sort((P,da)=>P-da);var l=e[0],B=e[e.length-1];if("equal-interval"===y)if(e.length>=E){e=(B-l)/E;G=l;for(var m=1;m<E;m++){var H=Number((l+m*e).toFixed(6));a.push({minValue:G,maxValue:H,label:Y(G,H,n)});G=H}a.push({minValue:G,maxValue:B,label:Y(G,B,n)})}else e.forEach(P=>{a.push({minValue:P,maxValue:P,label:Y(P,P,n)})});else if("natural-breaks"===y){e=W(e);G=u(e.uniqueValues,G.valueFrequency||e.valueFrequency,E);for(m=1;m<E;m++)e.uniqueValues.length>m&&(H=Number(e.uniqueValues[G[m]].toFixed(6)),
a.push({minValue:l,maxValue:H,label:Y(l,H,n)}),l=H);a.push({minValue:l,maxValue:B,label:Y(l,B,n)})}else if("quantile"===y)if(e.length>=E&&l!==B){G=Math.ceil(e.length/E);m=0;for(H=1;H<E;H++){var D=G+m-1;D>e.length&&(D=e.length-1);0>D&&(D=0);a.push({minValue:l,maxValue:e[D],label:Y(l,e[D],n)});l=e[D];m+=G;G=Math.ceil((e.length-m)/(E-H))}a.push({minValue:l,maxValue:B,label:Y(l,B,n)})}else for(B=-1,l=0;l<e.length;l++)G=e[l],G!==B&&(B=G,a.push({minValue:B,maxValue:G,label:Y(B,G,n)}),B=G);else if("standard-deviation"===
y)if(G=w(e),m=t(e,G),0===m)a.push({minValue:e[0],maxValue:e[0],label:Y(e[0],e[0],n)});else{e=A(l,B,E,G,m)*m;m=0;for(H=E;1<=H;H--)D=Number((G-(H-.5)*e).toFixed(6)),a.push({minValue:l,maxValue:D,label:Y(l,D,n)}),l=D,m++;H=Number((G+.5*e).toFixed(6));a.push({minValue:l,maxValue:H,label:Y(l,H,n)});l=H;m++;for(D=1;D<=E;D++)H=m===2*E?B:Number((G+(D+.5)*e).toFixed(6)),a.push({minValue:l,maxValue:H,label:Y(l,H,n)}),l=H,m++}else if("defined-interval"===y){if(!v)return a;B=e[0];e=e[e.length-1];l=Math.ceil((e-
B)/v);G=B;for(m=1;m<l;m++)H=Number((B+m*v).toFixed(6)),a.push({minValue:G,maxValue:H,label:Y(G,H,n)}),G=H;a.push({minValue:G,maxValue:e,label:Y(G,e,n)})}return a}function Y(G,y,E){let n=null;return n=G===y?E&&"percent-of-total"===E?G+"%":G.toString():E&&"percent-of-total"===E?G+"% - "+y+"%":G+" - "+y}function W(G){const y=[],E=[];let n=Number.MIN_VALUE,v=1,a=-1;for(let e=0;e<G.length;e++){const l=G[e];l===n?(v++,E[a]=v):null!==l&&(y.push(l),n=l,v=1,E.push(v),a++)}return{uniqueValues:y,valueFrequency:E}}
function u(G,y,E){var n=G.length;const v=[];E>n&&(E=n);for(var a=0;a<E;a++)v.push(Math.round(a*n/E-1));v.push(n-1);a=F(v,G,y,E);{n=a.mean;a=a.sdcm;var e=E,l=0,B=0;let H=0,D=0,P=!0;for(let da=0;2>da&&P;da++){0===da&&(P=!1);for(var m=0;m<e-1;m++)for(;v[m+1]+1!==v[m+2];)if(v[m+1]+=1,l=r(m,v,G,y),H=l.sbMean,l=l.sbSdcm,B=r(m+1,v,G,y),D=B.sbMean,B=B.sbSdcm,l+B<a[m]+a[m+1])a[m]=l,a[m+1]=B,n[m]=H,n[m+1]=D,P=!0;else{--v[m+1];break}for(m=e-1;0<m;m--)for(;v[m]!==v[m-1]+1;)if(--v[m],l=r(m-1,v,G,y),H=l.sbMean,
l=l.sbSdcm,B=r(m,v,G,y),D=B.sbMean,B=B.sbSdcm,l+B<a[m-1]+a[m])a[m-1]=l,a[m]=B,n[m-1]=H,n[m]=D,P=!0;else{v[m]+=1;break}}n=P}n&&(a=F(v,G,y,E));return v}function F(G,y,E,n){let v=[];var a=[],e=[];let l=0;const B=[],m=[];for(var H=0;H<n;H++){var D=r(H,G,y,E);B.push(D.sbMean);m.push(D.sbSdcm);l+=m[H]}D=l;for(H=!0;H||l<D;){H=!1;v=[];for(a=0;a<n;a++)v.push(G[a]);for(e=0;e<n;e++)for(D=G[e]+1;D<=G[e+1];D++)if(a=y[D],0<e&&D!==G[e+1]&&Math.abs(a-B[e])>Math.abs(a-B[e-1]))G[e]=D;else if(e<n-1&&G[e]!==D-1&&Math.abs(a-
B[e])>Math.abs(a-B[e+1])){G[e+1]=D-1;break}D=l;l=0;a=[];e=[];for(let P=0;P<n;P++){a.push(B[P]);e.push(m[P]);const da=r(P,G,y,E);B[P]=da.sbMean;m[P]=da.sbSdcm;l+=m[P]}}if(l>D){for(y=0;y<n;y++)G[y]=v[y],B[y]=a[y],m[y]=e[y];l=D}return{mean:B,sdcm:m}}function A(G,y,E,n,v){G=Math.max(n-G,y-n)/v/E;return 1<=G?1:.5<=G?.5:.25}function w(G){let y=0;for(let E=0;E<G.length;E++)y+=G[E];return y/=G.length}function t(G,y){let E=0;for(let n=0;n<G.length;n++){const v=G[n];E+=(v-y)*(v-y)}E/=G.length;return Math.sqrt(E)}
function r(G,y,E,n){var v=0,a=0;for(var e=y[G]+1;e<=y[G+1];e++){const l=n[e];v+=E[e]*l;a+=l}0>=a&&console.log("Exception in Natural Breaks calculation");v/=a;a=0;for(e=y[G]+1;e<=y[G+1];e++)a+=n[e]*(E[e]-v)**2;return{sbMean:v,sbSdcm:a}}k.createGenerateRendererClassBreaks=function(G){const {normalizationTotal:y}=G;return{classBreaks:d(G),normalizationTotal:y}};k.createGenerateRendererUniqueValues=function(G){G=W(G);const y=[],E=G.uniqueValues.length;for(let n=0;n<E;n++){const v=G.uniqueValues[n];y.push({value:v,
count:G.valueFrequency[n],label:v.toString()})}return{uniqueValues:y}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(k){function d(u,F,A,w,t){if(null!=w&&null!=t)return r=>{const G=u.getAttribute(r,F);r=u.getAttribute(r,A);return(null==G||G<=t)&&(null==r||r>=w)};if(null!=w)return r=>{r=u.getAttribute(r,A);return null==r||r>=w};if(null!=t)return r=>{r=u.getAttribute(r,F);return null==r||r<=t}}function Y(u,F,A,w){if(null!=
A&&null!=w&&A===w)return t=>u.getAttribute(t,F)===A;if(null!=A&&null!=w)return t=>{t=u.getAttribute(t,F);return t>=A&&t<=w};if(null!=A)return t=>u.getAttribute(t,F)>=A;if(null!=w)return t=>u.getAttribute(t,F)<=w}function W(){return()=>!1}k.getTimeExtent=function(u,F){if(!u)return null;const A=F.featureAdapter,{startTimeField:w,endTimeField:t}=u;let r=Number.POSITIVE_INFINITY,G=Number.NEGATIVE_INFINITY;if(w&&t)F.forEach(y=>{const E=A.getAttribute(y,w);y=A.getAttribute(y,t);null==E||isNaN(E)||(r=Math.min(r,
E));null==y||isNaN(y)||(G=Math.max(G,y))});else{const y=w||t;F.forEach(E=>{E=A.getAttribute(E,y);null==E||isNaN(E)||(r=Math.min(r,E),G=Math.max(G,E))})}return{start:r,end:G}};k.getTimeOperator=function(u,F,A){if(!F||!u)return null;const {startTimeField:w,endTimeField:t}=u;if(!w&&!t)return null;const {start:r,end:G}=F;return null===r&&null===G?null:void 0===r&&void 0===G?W():w&&t?d(A,w,t,r,G):Y(A,w||t,r,G)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,d,Y,W,u,F,A,w,t,r,G,y,E,n){function v(z,f,h,C=z.hasZ,S=z.hasM){if(u.isNone(f))return null;const ba=z.hasZ&&C,la=z.hasM&&S;return h?(z=y.quantizeOptimizedGeometry(K,f,z.hasZ,z.hasM,"esriGeometryPoint",h,C,S),y.convertToPoint(z,ba,la)):y.convertToPoint(f,ba,la)}function a(){a=Y._asyncToGenerator(function*(z,f,h){const {outFields:C,orderByFields:S,groupByFieldsForStatistics:ba,outStatistics:la}=z;if(C)for(var ma=0;ma<C.length;ma++)C[ma]=C[ma].trim();if(S)for(ma=0;ma<S.length;ma++)S[ma]=S[ma].trim();
if(ba)for(ma=0;ma<ba.length;ma++)ba[ma]=ba[ma].trim();if(la)for(ma=0;ma<la.length;ma++)la[ma].onStatisticField&&(la[ma].onStatisticField=la[ma].onStatisticField.trim());z.geometry&&!z.outSR&&(z.outSR=z.geometry.spatialReference);return l(z,f,h)});return a.apply(this,arguments)}function e(){e=Y._asyncToGenerator(function*(z,f,h){return l(z,f,h)});return e.apply(this,arguments)}function l(z,f,h){return B.apply(this,arguments)}function B(){B=Y._asyncToGenerator(function*(z,f,h){if(!z)return null;var {where:C}=
z;z.where=C=C&&C.trim();if(!C||/^1 *= *1$/.test(C)||f&&f===C)z.where=null;if(!z.geometry)return z;f=yield m(z);z.distance=0;z.units=null;"esriSpatialRelEnvelopeIntersects"===z.spatialRel&&({spatialReference:C}=z.geometry,f=A.getGeometryExtent(f),f.spatialReference=C);z.geometry=f;yield n.checkProjectionSupport(f.spatialReference,h);f=(yield t.normalizeCentralMeridian(w.fromJSON(f)))[0];if(u.isNone(f))throw U;f=f.toJSON();f=yield n.project(f,f.spatialReference,h);if(!f)throw U;f.spatialReference=h;
z.geometry=f;return z});return B.apply(this,arguments)}function m(z){return H.apply(this,arguments)}function H(){H=Y._asyncToGenerator(function*(z){const {geometry:f,distance:h,units:C}=z;if(null==h||"vertexAttributes"in f)return f;var S=f.spatialReference;z=C?da.fromJSON(C):F.getUnitString(S);S=S&&(r.isGeographic(S)||r.isWebMercator(S))?f:yield n.checkProjectionSupport(S,r.WGS84).then(()=>n.project(f,r.WGS84));return(yield D())(S.spatialReference,S,h,z)});return H.apply(this,arguments)}function D(){return P.apply(this,
arguments)}function P(){P=Y._asyncToGenerator(function*(){return(yield new Promise((z,f)=>k(["../../../geometry/geometryEngineJSON"],z,f))).geodesicBuffer});return P.apply(this,arguments)}const da=new W.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),U=Object.freeze({}),ja=new E,M=new E,K=new E,V={esriGeometryPoint:y.convertToPoint,esriGeometryPolyline:y.convertToPolyline,
esriGeometryPolygon:y.convertToPolygon,esriGeometryMultipoint:y.convertToMultipoint},N=(z,f)=>"_geVersion"!==z?f:void 0;d.QUERY_ENGINE_EMPTY_RESULT=U;d.cleanFromGeometryEngine=function(z){return z&&"_geVersion"in z?JSON.parse(JSON.stringify(z,N)):z};d.getCentroid=function(z,f,h){if("esriGeometryPolygon"!==z.geometryType||!f||!f.centroid&&!f.geometry)return null;f.centroid||(f.centroid=G.getCentroidOptimizedGeometry(new E,f.geometry,z.hasZ,z.hasM));return v(z,f.centroid,h)};d.getGeometry=function(z,
f,h,C,S,ba,la=f,ma=h){const oa=f&&la,fa=h&&ma;C=u.isSome(C)?"coords"in C?C:C.geometry:null;if(u.isNone(C))return null;if(S)return f=y.generalizeOptimizedGeometry(M,C,f,h,z,S,la,ma),ba&&(f=y.quantizeOptimizedGeometry(K,f,oa,fa,z,ba)),V[z](f,oa,fa);if(ba)return ba=y.quantizeOptimizedGeometry(K,C,f,h,z,ba,la,ma),V[z](ba,oa,fa);y.removeZMValues(ja,C,f,h,la,ma);return V[z](ja,oa,fa)};d.normalizeFilter=function(z,f,h){return e.apply(this,arguments)};d.normalizeQuery=function(z,f,h){return a.apply(this,
arguments)};d.normalizeQueryLike=l;d.transformCentroid=v;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(k,d,Y,W,u,F,A,w){function t(L,O,aa){if(L)for(const pa of L)(L=(L=F.getDeepValue(pa,O))&&"function"!==typeof L&&aa.get(L))&&F.setDeepValue(pa,L.name,O)}function r(L,O){if(!L||
!O)return[];q.clear();G(q,L,O);return Array.from(q).sort()}function G(L,O,aa){var pa;if(aa)if(null!=O&&null!=(pa=O.fields)&&pa.length)if(aa.includes("*"))for(const {name:qa}of O.fields)L.add(qa);else for(const qa of aa)y(L,O,qa);else if(aa.includes("*"))L.clear(),L.add("*");else for(const qa of aa)L.add(qa)}function y(L,O,aa){"string"===typeof aa&&(O?(O=O.get(aa))&&L.add(O.name):L.add(aa))}function E(L,O,aa){return n.apply(this,arguments)}function n(){n=Y._asyncToGenerator(function*(L,O,aa){var pa;
if(aa){var {arcadeUtils:qa}=yield w.loadArcade();aa=qa.extractFieldNames(aa,null==O?void 0:null==(pa=O.fields)?void 0:pa.map(va=>va.name));for(const va of aa)y(L,O,va)}});return n.apply(this,arguments)}function v(L,O,aa){return a.apply(this,arguments)}function a(){a=Y._asyncToGenerator(function*(L,O,aa){if(aa&&"1\x3d1"!==aa){aa=(yield new Promise((pa,qa)=>k(["../../core/sql/WhereClause"],pa,qa))).WhereClause.create(aa,O);if(!aa.isStandardized)throw new W("fieldUtils:collectFilterFields","Where clause is not standardized");
G(L,O,aa.fieldNames)}});return a.apply(this,arguments)}function e(L,O){for(const aa of L)if(aa&&aa.valueType&&aa.valueType===O)return aa.name;return null}function l(){l=Y._asyncToGenerator(function*(L){if(!L)return[];const O=new Set;yield B(O,L);return Array.from(O).sort()});return l.apply(this,arguments)}function B(L,O){return m.apply(this,arguments)}function m(){m=Y._asyncToGenerator(function*(L,O){if(O){var aa=F.getDeepValue("elevationInfo.featureExpressionInfo",O);if(aa)return aa.collectRequiredFields(L,
O.fieldsIndex)}});return m.apply(this,arguments)}function H(L,O,aa){return D.apply(this,arguments)}function D(){D=Y._asyncToGenerator(function*(L,O,aa){aa.outStatistic.onStatisticValueExpression?E(L,O,aa.outStatistic.onStatisticValueExpression):L.add(aa.outStatistic.onStatisticField)});return D.apply(this,arguments)}function P(){P=Y._asyncToGenerator(function*(L,O,aa){var pa,qa;if(O&&aa&&"cluster"===aa.type){var va=[];null!=(pa=aa.popupTemplate)&&pa.expressionInfos&&va.push(...aa.popupTemplate.expressionInfos.map(wa=>
E(L,O.fieldsIndex,wa.expression)));if(Array.isArray(null==(qa=aa.popupTemplate)?void 0:qa.content)){pa=aa.popupTemplate.content;for(const wa of pa)"expression"===wa.type&&wa.expressionInfo&&va.push(E(L,O.fieldsIndex,wa.expressionInfo.expression))}aa.fields&&va.push(...aa.fields.map(wa=>H(L,O.fieldsIndex,wa)));yield Promise.all(va)}});return P.apply(this,arguments)}function da(){da=Y._asyncToGenerator(function*(L,O,aa){O&&(O.timeInfo&&u.isSome(aa)&&aa.timeExtent&&G(L,O.fieldsIndex,[O.timeInfo.startField,
O.timeInfo.endField]),O.floorInfo&&G(L,O.fieldsIndex,[O.floorInfo.floorField]),u.isSome(aa)&&u.isSome(aa.where)&&(yield v(L,O.fieldsIndex,aa.where)))});return da.apply(this,arguments)}function U(){U=Y._asyncToGenerator(function*(L,O,aa){O&&aa&&(yield Promise.all(aa.map(pa=>ja(L,O,pa))))});return U.apply(this,arguments)}function ja(L,O,aa){return M.apply(this,arguments)}function M(){M=Y._asyncToGenerator(function*(L,O,aa){O&&aa&&(aa.valueExpression?yield E(L,O.fieldsIndex,aa.valueExpression):aa.field&&
y(L,O.fieldsIndex,aa.field))});return M.apply(this,arguments)}function K(){K=Y._asyncToGenerator(function*(L){if(!L)return[];const O="timeInfo"in L&&L.timeInfo;return O?r(L.fieldsIndex,[L.trackIdField,O.startField,O.endField]):[]});return K.apply(this,arguments)}function V(){V=Y._asyncToGenerator(function*(L){if(!L)return[];const O=new Set;yield N(O,L);return Array.from(O).sort()});return V.apply(this,arguments)}function N(L,O){return z.apply(this,arguments)}function z(){z=Y._asyncToGenerator(function*(L,
O){const {labelingInfo:aa,fieldsIndex:pa}=O;aa&&aa.length&&(yield Promise.all(aa.map(qa=>f(L,pa,qa))))});return z.apply(this,arguments)}function f(L,O,aa){return h.apply(this,arguments)}function h(){h=Y._asyncToGenerator(function*(L,O,aa){if(aa){var pa=aa.getLabelExpression();aa=aa.where;"arcade"===pa.type?yield E(L,O,pa.expression):(pa=pa.expression.match(/{[^}]*}/g))&&pa.forEach(qa=>{y(L,O,qa.slice(1,-1))});yield v(L,O,aa)}});return h.apply(this,arguments)}function C(L){return"number"===typeof L&&
!isNaN(L)&&isFinite(L)}function S(L){return null===L||C(L)}function ba(L){return null===L||ca(L)}function la(L){return null!=L&&"string"===typeof L}function ma(L){return null===L||la(L)}function oa(){return!0}function fa(L,O){let aa;switch(L.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":aa=L.nullable?ba:ca;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":aa=
L.nullable?S:C;break;case "string":case "esriFieldTypeString":aa=L.nullable?ma:la;break;default:aa=oa}return 1===arguments.length?aa:aa(O)}function ia(L){return null!=L&&J.has(L.type)}function ra(L,O){return L.nullable&&null===O?null:ia(L)&&!Aa(L.type,Number(O))?d.NumericRangeValidationError.OUT_OF_RANGE:fa(L,O)?L.domain?A.validateDomainValue(L.domain,O):null:d.TypeValidationError.INVALID_TYPE}function Aa(L,O){return(L="string"===typeof L?xa(L):L)?L.isInteger?ca(O)&&O>=L.min&&O<=L.max:O>=L.min&&O<=
L.max:!1}function xa(L){switch(L){case "esriFieldTypeSmallInteger":case "small-integer":return Q;case "esriFieldTypeInteger":case "integer":return R;case "esriFieldTypeSingle":case "single":return ha;case "esriFieldTypeDouble":case "double":return ea}}function La(L,O,aa){if(!O||!O.attributes||!L){if(u.isSome(aa))for(var pa of L)aa.add(pa);return!0}O=O.attributes;pa=!1;for(const qa of L)if(!(qa in O))if(pa=!0,u.isSome(aa))aa.add(qa);else break;return pa}function Ga(){Ga=Y._asyncToGenerator(function*(L,
O){const aa=new Set;for(const pa of O)yield E(aa,L.fieldsIndex,pa);return Array.from(aa).sort()});return Ga.apply(this,arguments)}const Ea="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),c=["field","normalizationField"],q=new Set,ca=(()=>"isInteger"in Number?Number.isInteger:L=>"number"===typeof L&&isFinite(L)&&Math.floor(L)===L)(),p=["integer","small-integer",
"single","double"],J=new Set([...p,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const Q={min:-32768,max:32767,isInteger:!0},R={min:-2147483648,max:2147483647,
isInteger:!0},ha={min:-3.4E38,max:1.2E38,isInteger:!1},ea={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=E;d.collectElevationFields=B;d.collectFeatureReductionFields=function(L,O,aa){return P.apply(this,arguments)};d.collectField=y;d.collectFields=G;d.collectFilterFields=function(L,O,aa){return da.apply(this,arguments)};d.collectLabelingFields=N;d.collectOrderByInfos=function(L,O,aa){return U.apply(this,arguments)};d.doubleRange=ea;d.featureHasFields=function(L,
O){return!La(L,O,null)};d.fixFields=r;d.fixRendererFields=function(L,O){if(null!=L&&null!=O)for(const aa of Array.isArray(L)?L:[L])if(t(Ea,aa,O),"visualVariables"in aa&&aa.visualVariables)for(const pa of aa.visualVariables)t(c,pa,O)};d.fixTimeInfoFields=function(L,O){if(null!=L&&null!=O&&O.fields.length)if("startField"in L){var aa=O.get(L.startField);O=O.get(L.endField);L.startField=aa&&aa.name||null;L.endField=O&&O.name||null}else aa=O.get(L.startTimeField),O=O.get(L.endTimeField),L.startTimeField=
aa&&aa.name||null,L.endTimeField=O&&O.name||null};d.getDisplayFieldName=function({displayField:L,fields:O}){if(L)return L;if(!O||!O.length)return null;if(!(L=e(O,"name-or-title")||e(O,"unique-identifier")||e(O,"type-or-category")))a:{for(const aa of O)if(aa&&aa.name&&(O=aa.name.toLowerCase(),-1<O.indexOf("name")||-1<O.indexOf("title"))){L=aa.name;break a}L=null}return L};d.getElevationFields=function(L){return l.apply(this,arguments)};d.getExpressionFields=function(L,O){return Ga.apply(this,arguments)};
d.getFeatureEditFields=function(L){if(!L)return[];const O="editFieldsInfo"in L&&L.editFieldsInfo;return O?r(L.fieldsIndex,[O&&O.creatorField,O&&O.creationDateField,O&&O.editorField,O&&O.editDateField]):[]};d.getFeatureGeometryFields=function(L){if(!L)return[];const O=L.geometryFieldsInfo;return O?r(L.fieldsIndex,[O.shapeAreaField,O.shapeLengthField]):[]};d.getFieldDefaultValue=function(L){const O=L.defaultValue;if(void 0!==O&&fa(L,O))return O;if(L.nullable)return null};d.getFieldRange=function(L){const O=
A.getDomainRange(L.domain);if(O)return O;if(ia(L))return xa(L.type)};d.getLabelingFields=function(L){return V.apply(this,arguments)};d.getNumericTypeForValue=function(L){if(!C(L))return null;if(ca(L)){if(L>=Q.min&&L<=Q.max)return"esriFieldTypeSmallInteger";if(L>=R.min&&L<=R.max)return"esriFieldTypeInteger"}return L>=ha.min&&L<=ha.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};d.getTimeFields=function(L){return K.apply(this,arguments)};d.integerRange=R;d.isDateField=function(L){return null!=L&&("date"===
L.type||"esriFieldTypeDate"===L.type)};d.isNumberInRange=Aa;d.isNumericField=ia;d.isStringField=function(L){return null!=L&&("string"===L.type||"esriFieldTypeString"===L.type)};d.isValidFieldValue=function(L,O){return null===ra(L,O)};d.isValueMatchingFieldType=fa;d.numericTypes=p;d.packFields=function(L,O,aa=1){if(!O||!L)return[];if(O.includes("*"))return["*"];O=r(L,O);return O.length/L.fields.length>=aa?["*"]:O};d.populateMissingFields=La;d.rendererFields=Ea;d.sanitizeNullFieldValue=function(L){return null==
L||"number"===typeof L&&isNaN(L)?null:L};d.singleRange=ha;d.smallIntegerRange=Q;d.unpackFieldNames=function(L,O){return u.isNone(O)||u.isNone(L)?[]:O.includes("*")?L.fields.map(aa=>aa.name):O};d.validateFieldValue=ra;d.validationErrorToString=function(L,O,aa){switch(L){case A.DomainValidationError.INVALID_CODED_VALUE:return`Value ${aa} is not in the coded domain - field: ${O.name}, domain: ${JSON.stringify(O.domain)}`;case A.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${aa} is out of the range of valid values - field: ${O.name}, domain: ${JSON.stringify(O.domain)}`;
case d.TypeValidationError.INVALID_TYPE:return`Value ${aa} is not a valid value for the field type - field: ${O.name}, type: ${O.type}, nullable: ${O.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:pa,max:qa}=xa(O.type);return`Value ${aa} is out of range for the number type - field: ${O.name}, type: ${O.type}, value range is ${pa} to ${qa}`}}};d.visualVariableFields=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(k){function d(Y,W){switch(Y.type){case "range":{const u="range"in Y?Y.range[1]:Y.maxValue;if(+W<("range"in Y?Y.range[0]:Y.minValue)||+W>u)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==Y.codedValues||Y.codedValues.every(u=>null==u||u.code!==W))return k.DomainValidationError.INVALID_CODED_VALUE}return null}k.DomainValidationError=void 0;(function(Y){Y.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";Y.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(Y){if(Y&&"range"===Y.type)return{min:"range"in Y?Y.range[0]:Y.minValue,max:"range"in Y?Y.range[1]:Y.maxValue}};k.isValidDomainValue=function(Y,W){return null===d(Y,W)};k.validateDomainValue=d;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(k,d,Y,W,u,F){function A(){w||(w=Y._asyncToGenerator(function*(){const r=yield new Promise((G,y)=>k(["./arcadeUtils"],G,y));return{arcade:r.arcade,arcadeUtils:r,Dictionary:r.Dictionary,Feature:r.arcadeFeature}})());return w}let w;W=(r,G,y)=>t.create(r,G,y,null,["$feature","$view"]);let t=function(){function r(y,E,n,v,a,e,l,B){this.script=y;this.evaluate=a;this.fields=Array.isArray(l)?l:l.fields;this._syntaxTree=v;this._arcade=E;this._arcadeDictionary=n;this._arcadeFeature=e;this._spatialReference=
B;this._referencesGeometry=E.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}r.create=function(){var y=Y._asyncToGenerator(function*(E,n,v,a,e,l){const {arcade:B,Feature:m,Dictionary:H}=yield A(),D=F.fromJSON(n);n=B.parseScript(E,l);e=e.reduce((M,K)=>({...M,[K]:null}),{});let P=null;u.isSome(a)&&(P=new H(a),P.immutable=!0,e.$config=null);a=B.scriptUsesGeometryEngine(n)&&B.enableGeometrySupport();l=B.scriptUsesFeatureSet(n)&&B.enableFeatureSetSupport();
const da=B.scriptIsAsync(n)&&B.enableAsyncSupport();e={vars:e,spatialReference:D,useAsync:!!da};const U=new H;U.immutable=!1;U.setField("scale",0);const ja=B.compileScript(n,e);yield Promise.all([a,l,da]);return new r(E,B,H,n,M=>{"$view"in M&&M.$view&&(U.setField("scale",M.$view.scale),M.$view=U);P&&(M.$config=P);return ja({vars:M,spatialReference:D})},new m,v,D)});return function(E,n,v,a,e,l){return y.apply(this,arguments)}}();var G=r.prototype;G.repurposeFeature=function(y){y.geometry&&!y.geometry.spatialReference&&
(y.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(y.geometry,y.attributes,{fields:this.fields});return this._arcadeFeature};G.repurposeAdapter=function(y){this._arcadeFeature.repurposeFromAdapter(y,{fields:this.fields});return this._arcadeFeature};G.createDictionary=function(){return new this._arcadeDictionary};G.referencesMember=function(y){return this._arcade.referencesMember(this._syntaxTree,y)};G.referencesFunction=function(y){return this._arcade.referencesFunction(this._syntaxTree,
y)};G.referencesGeometry=function(){return this._referencesGeometry};G.referencesScale=function(){return this._referencesScale};G.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return r}();d.ArcadeExpression=t;d.createDictionaryExpression=(r,G,y,E)=>t.create(r,G,y,E,["$feature","$view"]);d.createLabelExpression=(r,G,y)=>t.create(r,G,y,null,["$feature"]);d.createRendererExpression=W;d.createVVExpression=W;d.default=t;d.loadArcade=A;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),function(k,d,Y,W,u,F,A,w,t,r,G,y,E){function n(){return new Promise((l,B)=>
k(["../../../geometry/geometryEngineJSON"],l,B))}function v(){v=Y._asyncToGenerator(function*(l,B,m){const {spatialRel:H,geometry:D}=l;if(D){if(!0!==e.spatialRelationship[H])throw new W("feature-store:unsupported-query","Unsupported query spatial relationship",{query:l});if(w.isValid(D.spatialReference)&&w.isValid(m)){if(!0!==e.queryGeometry[A.getJsonType(D)])throw new W("feature-store:unsupported-query","Unsupported query geometry type",{query:l});if(!0!==e.layerGeometry[B])throw new W("feature-store:unsupported-query",
"Unsupported layer geometry type",{query:l});if(l.outSR)return y.checkProjectionSupport(l.geometry&&l.geometry.spatialReference,l.outSR)}}});return v.apply(this,arguments)}const a={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},
e={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(l){if(A.isExtent(l))return!0;if(A.isPolygon(l)){for(const B of l.rings)if(5!==B.length||B[0][0]!==B[1][0]||B[0][0]!==B[4][0]||B[2][0]!==B[3][0]||B[0][1]!==B[3][1]||B[0][1]!==B[4][1]||B[1][1]!==B[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(l,B,m){return v.apply(this,arguments)};d.getSpatialQueryOperator=function(l,B,m,H,D){if(A.isPolygon(B)&&"esriGeometryPoint"===m&&("esriSpatialRelIntersects"===
l||"esriSpatialRelContains"===l)){const P=r.convertFromPolygon(new G,B,!1,!1);return Promise.resolve(da=>t.polygonContainsPoint(P,!1,!1,da))}if(A.isPolygon(B)&&"esriGeometryMultipoint"===m){const P=r.convertFromPolygon(new G,B,!1,!1);if("esriSpatialRelContains"===l)return Promise.resolve(da=>t.polygonContainsMultipoint(P,!1,!1,da,H,D))}if(A.isExtent(B)&&"esriGeometryPoint"===m&&("esriSpatialRelIntersects"===l||"esriSpatialRelContains"===l))return Promise.resolve(P=>u.extentContainsPoint(B,E.getGeometry(m,
H,D,P)));if(A.isExtent(B)&&"esriGeometryMultipoint"===m&&"esriSpatialRelContains"===l)return Promise.resolve(P=>u.extentContainsMultipoint(B,E.getGeometry(m,H,D,P)));if(A.isExtent(B)&&"esriSpatialRelIntersects"===l){const P=F.getExtentIntersector(m);return Promise.resolve(da=>P(B,E.getGeometry(m,H,D,da)))}return n().then(P=>{const da=P[a[l]].bind(null,B.spatialReference,B);return U=>da(E.getGeometry(m,H,D,U))})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports",
"./intersectsBase"],function(k,d){k.extentIntersectsExtent=d.extentIntersectsExtent;k.extentIntersectsMultipoint=d.extentIntersectsMultipoint;k.extentIntersectsPoint=d.extentIntersectsPoint;k.extentIntersectsPolygon=d.extentIntersectsPolygon;k.extentIntersectsPolyline=d.extentIntersectsPolyline;k.getFeatureExtentIntersector=d.getFeatureExtentIntersector;k.isSelfIntersecting=d.isSelfIntersecting;k.segmentIntersects=d.segmentIntersects;k.getExtentIntersector=function(Y){return"mesh"===Y?d.extentIntersectsExtent:
d.getFeatureExtentIntersector(Y)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function d(Y,W,u,F,A){if(!Y)return!1;W=W?u?4:3:u?3:2;const {coords:w,lengths:t}=Y;u=!1;Y=0;for(const G of t){var r=Y;for(let y=Y,E=Y+G*W;y<E;y+=W){r=y+W;r===E&&(r=Y);const n=w[y],v=w[y+1],a=w[r];r=w[r+1];(v<A&&r>=A||r<A&&v>=A)&&n+(A-v)/(r-v)*(a-n)<F&&(u=!u)}Y+=G*W}return u}k.polygonContainsCoords=d;k.polygonContainsMultipoint=function(Y,W,
u,F,A,w){A=A?w?4:3:w?3:2;const {coords:t,lengths:r}=F;if(!r)return!1;for(let G=0,y=0;G<r.length;G++,y+=A)if(!d(Y,W,u,t[y],t[y+1]))return!1;return!0};k.polygonContainsPoint=function(Y,W,u,F){return d(Y,W,u,F.coords[0],F.coords[1])};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(k,d){function Y(u){return"oid"===u.type||"esriFieldTypeOID"===u.type}function W(u){return"global-id"===
u.type||"esriFieldTypeGlobalID"===u.type}return function(){function u(A){this.fields=A;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(A){var w=[];for(const t of A)if(A=t&&t.name){const r=A.toLowerCase().trim();this._fieldsMap.set(A,t);this._fieldsMap.set(r,t);w.push(r);"date"===t.type||"esriFieldTypeDate"===t.type?(this.dateFields.push(t),this._dateFieldsSet.add(t)):d.isNumericField(t)&&(this._numericFieldsSet.add(t),
this.numericFields.push(t));Y(t)||W(t)||(t.editable=null==t.editable?!0:!!t.editable,t.nullable=null==t.nullable?!0:!!t.nullable)}w.sort();this.uid=w.join(",")}}var F=u.prototype;F.destroy=function(){this._fieldsMap.clear()};F.has=function(A){return null!=this.get(A)};F.get=function(A){return null!=A?this._fieldsMap.get(A)||this._fieldsMap.get(A.toLowerCase().trim()):void 0};F.isDateField=function(A){return this._dateFieldsSet.has(this.get(A))};F.isNumericField=function(A){return this._numericFieldsSet.has(this.get(A))};
F.normalizeFieldName=function(A){if(A=this.get(A))return A.name};k._createClass(u,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const A of this.fields)Y(A)||W(A)||A.nullable||void 0!==d.getFieldDefaultValue(A)||this._requiredFields.push(A)}return this._requiredFields}}]);return u}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(k,d,Y,W,u,F,A,w,t,r,G,y,E,n,v,a,e,l,B,m){function H(h){return P.has(h)?P.get(h):"number"===typeof h?h:1}const D=F.getLogger("esri.views.support.Scheduler");k.TaskPriority=void 0;(function(h){h.RESOURCE_CONTROLLER="schedule";h.SLIDE="slide";h.STREAM_DATA_LOADER="stream loader";h.ELEVATION_QUERY="elevation query";h.TERRAIN_SURFACE="terrain";h.SURFACE_GEOMETRY_UPDATES="surface geometry updates";h.GRAPHICS_CORE="Graphics3D";h.I3S_CONTROLLER="I3S";h.POINT_CLOUD_LAYER="point cloud";h.FEATURE_TILE_FETCHER=
"feature fetcher";h.OVERLAY="overlay";h.STAGE="stage";h.GRAPHICS_DECONFLICTOR="graphics deconflictor";h.FILTER_VISIBILITY="Graphics3D filter visibility";h.SCALE_VISIBILITY="Graphics3D scale visibility";h.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";h.POINT_OF_INTEREST_FREQUENT="POI frequent";h.POINT_OF_INTEREST_INFREQUENT="POI infrequent";h.LABELER="labeler";h.FEATURE_QUERY_ENGINE="feature query";h.FEATURE_TILE_TREE="feature tile tree";h.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";h.ELEVATION_ALIGNMENT=
"elevation alignment";h.TEXT_TEXTURE_ATLAS="text texture atlas";h.TEXTURE_UNLOAD="texture unload";h.LINE_OF_SIGHT_TOOL="line of sight tool";h.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";h.ELEVATION_PROFILE="elevation profile";h.SNAPPING="snapping";h.SHADOW_ACCUMULATOR="shadow accumulator";h.CLOUDS_GENERATOR="cloud generator";h[h.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||(k.TaskPriority={}));const P=new Map([[k.TaskPriority.RESOURCE_CONTROLLER,0],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,
0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,4],[k.TaskPriority.STAGE,4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,12],[k.TaskPriority.CLOUDS_GENERATOR,12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,
30]]),da=y.Milliseconds(6.5),U=y.Milliseconds(1),ja=y.Milliseconds(30),M=y.Milliseconds(1E3/30),K=y.Milliseconds(100);var V;(function(h){let C=function(la){function ma(fa){var ia=la.call(this,fa)||this;ia.updating=!0;ia._microTaskQueued=!1;ia.performanceInfo={total:new w("total"),tasks:new Map};ia._frameTaskTimes=new Map;ia._budget=null;ia._state=1;ia._tasks=new t;ia._runQueue=new t;ia._load=0;ia._idleStateCallbacks=new t;ia._idleUpdatesStartFired=!1;ia._maxReschedule=f;ia._forceTask=!1;ia._debug=
!1;ia._debugHandle=E.init(m,"SCHEDULER_LOG_SLOW_TASKS",xa=>ia._debug=xa);ia._budget=new ba(fa.nowFunc);for(const xa of Object.keys(k.TaskPriority))ia.performanceInfo.tasks.set(k.TaskPriority[xa],new w(k.TaskPriority[xa]));let ra;const Aa=d._assertThisInitialized(ia);ia._test={get state(){return A.unwrapOr(ra,Aa._state)},set state(xa){ra=xa},FRAME_SAFETY_BUDGET:da,INTERACTING_BUDGET:M,IDLE_BUDGET:K,get budget(){return Aa._budget.budget},usedBudget:0,setBudget:xa=>Aa._budget=xa,updateTask:xa=>ia._updateTask(xa),
getState:xa=>ia._getState(xa),getRuntime:xa=>ia._getRuntime(xa),frameTaskTimes:ia._frameTaskTimes,resetRuntimes:()=>ia._resetRuntimes(),getRunning:()=>ia._getRunning()};return ia}d._inheritsLoose(ma,la);var oa=ma.prototype;oa.destroy=function(){this._debugHandle&&this._debugHandle.remove();this._microTaskQueued=!1};oa.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=
f,this._schedule(),this.frame()))}))};oa.registerTask=function(fa,ia){const ra=H(fa);ia=new S(this,fa,ia,ra);this._tasks.push(ia);this.performanceInfo.tasks.has(fa)||this.performanceInfo.tasks.set(fa,new w(fa));return ia};oa.registerIdleStateCallbacks=function(fa,ia){const ra={idleBegin:fa,idleEnd:ia};this._idleStateCallbacks.push(ra);2===this.state&&this._idleUpdatesStartFired&&ra.idleBegin();const Aa=this;return{remove:()=>this._removeIdleStateCallbacks(ra),set idleBegin(xa){Aa._idleUpdatesStartFired&&
(ra.idleEnd(),2===Aa._state&&xa());ra.idleBegin=xa},set idleEnd(xa){ra.idleEnd=xa}}};oa.updateBudget=function(fa){this._test.usedBudget=0;let ia=da,ra=fa.frameDuration,Aa=U;switch(this.state){case 2:ia=y.Milliseconds(0);ra=y.Milliseconds(Math.max(K,fa.frameDuration));Aa=ja;break;case 1:ra=y.Milliseconds(Math.max(M,fa.frameDuration))}ra=y.Milliseconds(ra-fa.elapsedFrameTime-ia);if(2!==this.state&&ra<U&&!this._forceTask)return this._forceTask=!0,!1;ra=y.Milliseconds(Math.max(ra,Aa));this._budget.reset(ra,
this.state);this._maxReschedule=f;this._updateLoad();return this._schedule()};oa.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(fa=>fa.idleBegin()));this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};oa.stopFrame=function(){this._budget.reset(y.Milliseconds(0),this._state);this._budget.madeProgress()};
oa._removeIdleStateCallbacks=function(fa){this._idleUpdatesStartFired&&fa.idleEnd();this._idleStateCallbacks.removeUnordered(fa)};oa.removeTask=function(fa){this._tasks.removeUnordered(fa);this._runQueue.removeUnordered(fa)};oa._updateTask=function(fa){this._tasks.forAll(ia=>{ia.name===fa&&ia.setPriority(fa)})};oa._getState=function(fa){if(this._runQueue.some(ra=>ra.name===fa))return k.TaskState.SCHEDULED;let ia=k.TaskState.IDLE;this._tasks.forAll(ra=>{ra.name===fa&&ra.needsUpdate&&(1>=ra.schedulePriority?
ia=k.TaskState.READY:ia!==k.TaskState.READY&&(ia=k.TaskState.WAITING))});return ia};oa._getRuntime=function(fa){let ia=0;this._tasks.forAll(ra=>{ra.name===fa&&(ia+=ra.runtime)});return ia};oa._resetRuntimes=function(){this._tasks.forAll(fa=>fa.runtime=0)};oa._getRunning=function(){const fa=new Map;this._tasks.forAll(ra=>{ra.needsUpdate&&fa.set(ra.name,(fa.get(ra.name)||0)+1)});if(0===fa.size)return null;let ia="";fa.forEach((ra,Aa)=>{ia=1<ra?ia+` ${ra}x ${Aa}`:ia+` ${Aa}`});return ia};oa._runIdle=
function(){this._run()};oa._runInteracting=function(){this._run()};oa._runAnimating=function(){this._run()};oa._updateLoad=function(){const fa=this._tasks.reduce((ia,ra)=>ra.needsUpdate?++ia:ia,0);this._load=.9*this._load+fa*(1-.9)};oa._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(fa=>{if(fa.needsUpdate)return!0;fa.schedulePriority=fa.basePriority;return!1});for(this._tasks.forAll(fa=>{0===fa.basePriority&&fa.needsUpdate&&!this._runQueue.some(ia=>ia===fa)&&this._runQueue.unshift(fa)});0===
this._runQueue.length;){let fa=!1,ia=0;this._tasks.forAll(ra=>{if(ra.needsUpdate&&0!==ra.schedulePriority&&0!==ra.basePriority)switch(fa=!0,ia=Math.max(ia,ra.basePriority),ra.schedulePriority){case 1:ra.schedulePriority=0;this._runQueue.push(ra);break;default:--ra.schedulePriority}});if(!fa)return this.updating=!1;this._maxReschedule===f&&(this._maxReschedule=ia);--this._maxReschedule}return this.updating=!0};oa._run=function(){const fa=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var ia=
this._budget.now();const ra=this._runQueue.pop();this._budget.resetProgress();try{ra.task.runTask(this._budget)}catch(Aa){D.error(`Exception in task "${ra.name}"`,Aa)}ra.schedulePriority=ra.basePriority;ia=this._budget.now()-ia;ra.runtime+=ia;this._frameTaskTimes.set(ra.priority,this._frameTaskTimes.get(ra.priority)+ia);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",ra.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._recordFrameTaskTimes(this._budget.now()-
fa);return}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-fa)};oa._startFrameTaskTimes=function(){for(const fa of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[fa],0)};oa._recordFrameTaskTimes=function(fa){this._frameTaskTimes.forEach((ia,ra)=>this.performanceInfo.tasks.get(ra).record(ia));this.performanceInfo.total.record(fa)};d._createClass(ma,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",
get:function(){return A.isNone(this._test.state)?this._state:this._test.state},set:function(fa){this._state!==fa&&(this._state=fa,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(ia=>ia.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ma}(W);Y.__decorate([n.property()],C.prototype,"updating",void 0);Y.__decorate([n.property()],C.prototype,"nowFunc",void 0);C=Y.__decorate([l.subclass("esri.views.support.Scheduler")],
C);h.Scheduler=C;let S=function(la){function ma(fa,ia,ra,Aa){var xa=la.call(this,{})||this;xa._scheduler=fa;xa.name=ia;xa._basePriority=Aa;xa.runtime=0;xa._queue=new B.PromiseQueue;xa._handles=new u;xa.schedulePriority=xa._basePriority;xa.task=A.isSome(ra)?ra:xa._queue;xa._handles.add(G.reactTruthy(()=>xa.task.running,()=>fa.activate()));return xa}d._inheritsLoose(ma,la);var oa=ma.prototype;oa.normalizeCtorArgs=function(){return{}};oa.remove=function(){this.processQueue(N);this._scheduler.removeTask(this);
this.schedule=z.schedule;this.reschedule=z.reschedule;this._handles.destroy()};oa.setPriority=function(fa){this.name=fa;fa=H(fa);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=fa;this._basePriority=fa};oa.schedule=function(fa,ia,ra){return this._queue.push(fa,ia,ra)};oa.reschedule=function(fa,ia,ra){return this._queue.unshift(fa,ia,ra)};oa.processQueue=function(fa){this._queue.runTask(fa)};d._createClass(ma,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",
get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(fa){this.setPriority(fa)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ma}(W);Y.__decorate([n.property({constructOnly:!0})],S.prototype,"task",void 0);Y.__decorate([n.property({readOnly:!0})],S.prototype,"updating",null);S=Y.__decorate([l.subclass("esri.views.support.SchedulerTask")],S);let ba=function(){function la(oa){this.now=oa;this._budget=this._begin=
0;this._state=2;this._didWork=!1;this._enabled=!0}var ma=la.prototype;ma.run=function(oa){if(this.done)return!1;!0===oa()&&(this._didWork=!0);return!0};ma.madeProgress=function(){this._didWork=!0};ma.reset=function(oa,fa){this._begin=this.now();this._budget=oa;this._state=fa;this._didWork=!1};ma.resetProgress=function(){this._didWork=!1};d._createClass(la,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},
{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(oa){this._enabled=oa}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return la}();h.Budget=ba})(V||(V={}));k.TaskState=void 0;(function(h){h.SCHEDULED="s";h.READY="r";h.WAITING="w";h.IDLE="i"})(k.TaskState||(k.TaskState={}));const N=
(()=>{const h=new V.Budget(()=>performance.now());h.enabled=!1;return h})(),z=new (function(){function h(){}var C=h.prototype;C.remove=function(){};C.processQueue=function(){};C.schedule=function(S,ba,la){try{if(r.isAborted(ba)){const ma=r.createAbortError();return la?Promise.resolve(la(ma)):Promise.reject(ma)}return r.when(S(N))}catch(ma){return Promise.reject(ma)}};C.reschedule=function(S,ba,la){return this.schedule(S,ba,la)};return h}()),f=Number.MAX_SAFE_INTEGER;k.ImmediateTask=z;k.getTaskPriority=
H;k.newScheduler=function(h){return new V.Scheduler({nowFunc:h})};k.noBudget=N;k.taskPriorities=P;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(k,d,Y,W,u,F,A){Y=function(w){function t(G){G=w.call(this,G)||this;G._groups=new Map;return G}k._inheritsLoose(t,w);var r=t.prototype;
r.destroy=function(){this.removeAll()};r.add=function(G,y){if(!this._isHandle(G)&&!Array.isArray(G)&&!W.isCollection(G))return this;const E=this._getOrCreateGroup(y);Array.isArray(G)||W.isCollection(G)?G.forEach(n=>this._isHandle(n)&&E.push(n)):E.push(G);this.notifyChange("size");return this};r.forEach=function(G,y){if("function"===typeof G)this._groups.forEach(E=>E.forEach(G));else{const E=this._getGroup(G);E&&y&&E.forEach(y)}};r.has=function(G){return this._groups.has(this._ensureGroupKey(G))};
r.remove=function(G){if(Array.isArray(G)||W.isCollection(G))return G.forEach(this.remove,this),this;if(!this.has(G))return this;const y=this._getGroup(G);for(let E=0;E<y.length;E++)y[E].remove();this._deleteGroup(G);this.notifyChange("size");return this};r.removeAll=function(){this._groups.forEach(G=>{for(let y=0;y<G.length;y++)G[y].remove()});this._groups.clear();this.notifyChange("size");return this};r._isHandle=function(G){return G&&!!G.remove};r._getOrCreateGroup=function(G){if(this.has(G))return this._getGroup(G);
const y=[];this._groups.set(this._ensureGroupKey(G),y);return y};r._getGroup=function(G){return u.assumeNonNull(this._groups.get(this._ensureGroupKey(G)))};r._deleteGroup=function(G){return this._groups.delete(this._ensureGroupKey(G))};r._ensureGroupKey=function(G){return G||"_default_"};k._createClass(t,[{key:"size",get:function(){let G=0;this._groups.forEach(y=>{G+=y.length});return G}}]);return t}(Y);d.__decorate([F.property({readOnly:!0})],Y.prototype,"size",null);return Y=d.__decorate([A.subclass("esri.core.Handles")],
Y)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),function(k,d,Y,W,u,F,A,w,t,r,G,y,E,n){function v(K){return K?K instanceof M?K.toArray():K.length?Array.prototype.slice.apply(K):
[]:[]}function a(K){if(K&&K.length)return K[0]}function e(K,V,N,z){V&&V.forEach((f,h,C)=>{K.push(f);e(K,N.call(z,f,h,C),N,z)})}var l;let B=function(){function K(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var V=K.prototype;V.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};V.reset=function(N){this.defaultPrevented=!1;this.item=N};return K}();const m=new A(B,void 0,K=>{K.item=null;K.target=null;K.defaultPrevented=!1;K.cancellable=!1}),
H=()=>{},D=new Set,P=new Set,da=new Set,U=new Map;let ja=0,M=l=function(K,V){function N(f){f=K.call(this,f)||this;f._chgListeners=[];f._notifications=null;f._timer=null;f._observable=new n.SimpleObservable;f.length=0;f._items=[];Object.defineProperty(k._assertThisInitialized(f),"uid",{value:ja++});return f}k._inheritsLoose(N,K);N.isCollection=function(f){return null!=f&&f instanceof l};var z=N.prototype;z.normalizeCtorArgs=function(f){return f?Array.isArray(f)||f instanceof l?{items:f}:f:{}};z.destroy=
function(){this.removeAll()};z[V]=function*(){yield*this.items};z.hasEventListener=function(f){return"change"===f?0<this._chgListeners.length:this._emitter.hasEventListener(f)};z.on=function(f,h){if("change"===f){const C=this._chgListeners,S={removed:!1,callback:h};C.push(S);this._notifications&&this._notifications.push({listeners:C.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=H;S.removed=!0;C.splice(C.indexOf(S),1)}}}return this._emitter.on(f,h)};z.once=function(f,h){const C=
this.on(f,h);return{remove(){C.remove()}}};z.add=function(f,h){E.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;h=this.getNextIndex(null!=h?h:null);this._splice(h,0,[f]);this._emitAfterChanges(1);return this};z.addMany=function(f,h=this._items.length){E.trackAccess(this._observable);if(!f||!f.length||this._emitBeforeChanges(1))return this;h=this.getNextIndex(h);this._splice(h,0,v(f));this._emitAfterChanges(1);return this};z.removeAll=function(){E.trackAccess(this._observable);
if(!this.length||this._emitBeforeChanges(2))return[];const f=this._splice(0,this.length)||[];this._emitAfterChanges(2);return f};z.clone=function(){E.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(u.clone)})};z.concat=function(...f){E.trackAccess(this._observable);f=f.map(v);return this._createNewInstance({items:this._items.concat(...f)})};z.drain=function(f,h){E.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var C=F.assumeNonNull(this._splice(0,
this.length)),S=C.length;for(let ba=0;ba<S;ba++)f.call(h,C[ba],ba,C);this._emitAfterChanges(2)}};z.every=function(f,h){E.trackAccess(this._observable);return this._items.every(f,h)};z.filter=function(f,h){E.trackAccess(this._observable);let C;C=2===arguments.length?this._items.filter(f,h):this._items.filter(f);return this._createNewInstance({items:C})};z.find=function(f,h){E.trackAccess(this._observable);return this._items.find(f,h)};z.findIndex=function(f,h){E.trackAccess(this._observable);return this._items.findIndex(f,
h)};z.flatten=function(f,h){E.trackAccess(this._observable);const C=[];e(C,this,f,h);return new l(C)};z.forEach=function(f,h){E.trackAccess(this._observable);return this._items.forEach(f,h)};z.getItemAt=function(f){E.trackAccess(this._observable);return this._items[f]};z.getNextIndex=function(f){E.trackAccess(this._observable);const h=this.length;f=null==f?h:f;0>f?f=0:f>h&&(f=h);return f};z.includes=function(f,h=0){E.trackAccess(this._observable);return this._items.includes(f,h)};z.indexOf=function(f,
h=0){E.trackAccess(this._observable);return this._items.indexOf(f,h)};z.join=function(f=","){E.trackAccess(this._observable);return this._items.join(f)};z.lastIndexOf=function(f,h=this.length-1){E.trackAccess(this._observable);return this._items.lastIndexOf(f,h)};z.map=function(f,h){E.trackAccess(this._observable);f=this._items.map(f,h);return new l({items:f})};z.reorder=function(f,h=this.length-1){E.trackAccess(this._observable);const C=this.indexOf(f);if(-1!==C){0>h?h=0:h>=this.length&&(h=this.length-
1);if(C!==h){if(this._emitBeforeChanges(4))return f;this._splice(C,1);this._splice(h,0,[f]);this._emitAfterChanges(4)}return f}};z.pop=function(){E.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var f=a(this._splice(this.length-1,1));this._emitAfterChanges(2);return f}};z.push=function(...f){E.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;this._splice(this.length,0,f);this._emitAfterChanges(1);return this.length};z.reduce=function(f,h){E.trackAccess(this._observable);
const C=this._items;return 2===arguments.length?C.reduce(f,h):C.reduce(f)};z.reduceRight=function(f,h){E.trackAccess(this._observable);const C=this._items;return 2===arguments.length?C.reduceRight(f,h):C.reduceRight(f)};z.remove=function(f){E.trackAccess(this._observable);return this.removeAt(this.indexOf(f))};z.removeAt=function(f){E.trackAccess(this._observable);if(!(0>f||f>=this.length||this._emitBeforeChanges(2)))return f=a(this._splice(f,1)),this._emitAfterChanges(2),f};z.removeMany=function(f){E.trackAccess(this._observable);
if(!f||!f.length||this._emitBeforeChanges(2))return[];f=f instanceof l?f.toArray():f;const h=this._items,C=[],S=f.length;for(let oa=0;oa<S;oa++){var ba=h.indexOf(f[oa]);if(-1<ba){{var la=oa+1;var ma=ba+1;const fa=Math.min(f.length-la,h.length-ma);let ia=0;for(;ia<fa&&f[la+ia]===h[ma+ia];)ia++;la=ia}la=1+la;(ba=this._splice(ba,la))&&0<ba.length&&C.push.apply(C,ba);oa+=la-1}}this._emitAfterChanges(2);return C};z.reverse=function(){E.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;
const f=this._splice(0,this.length);f&&(f.reverse(),this._splice(0,0,f));this._emitAfterChanges(4);return this};z.shift=function(){E.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var f=a(this._splice(0,1));this._emitAfterChanges(2);return f}};z.slice=function(f=0,h=this.length){E.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(f,h)})};z.some=function(f,h){E.trackAccess(this._observable);return this._items.some(f,h)};z.sort=function(f){E.trackAccess(this._observable);
if(!this.length||this._emitBeforeChanges(4))return this;const h=F.assumeNonNull(this._splice(0,this.length));arguments.length?h.sort(f):h.sort();this._splice(0,0,h);this._emitAfterChanges(4);return this};z.splice=function(f,h,...C){E.trackAccess(this._observable);const S=(h?2:0)|(C.length?1:0);if(this._emitBeforeChanges(S))return[];f=this._splice(f,h,C)||[];this._emitAfterChanges(S);return f};z.toArray=function(){E.trackAccess(this._observable);return this._items.slice()};z.toJSON=function(){E.trackAccess(this._observable);
return this.toArray()};z.toLocaleString=function(){E.trackAccess(this._observable);return this._items.toLocaleString()};z.toString=function(){E.trackAccess(this._observable);return this._items.toString()};z.unshift=function(...f){E.trackAccess(this._observable);if(!f.length||this._emitBeforeChanges(1))return this.length;this._splice(0,0,f);this._emitAfterChanges(1);return this.length};z._createNewInstance=function(f){return new this.constructor(f)};z._splice=function(f,h,C){const S=this._items;var ba=
this.itemType;let la=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=w.schedule(()=>this._dispatchChange()));if(h){la=S.splice(f,h);if(this.hasEventListener("before-remove")){var ma=m.acquire();ma.target=this;ma.cancellable=!0;for(let ia=0,ra=la.length;ia<ra;ia++)h=la[ia],ma.reset(h),this.emit("before-remove",ma),ma.defaultPrevented&&(la.splice(ia,
1),S.splice(f,0,h),f+=1,--ia,--ra);m.release(ma)}this.length=this._items.length;if(this.hasEventListener("after-remove")){h=m.acquire();h.target=this;h.cancellable=!1;ma=la.length;for(let ia=0;ia<ma;ia++)h.reset(la[ia]),this.emit("after-remove",h);m.release(h)}}if(C&&C.length){if(ba){h=[];for(var oa of C)C=ba.ensureType(oa),null==C&&null!=oa||h.push(C);C=h}ba=this.hasEventListener("before-add");oa=this.hasEventListener("after-add");h=f===this.length;if(ba||oa){var fa=m.acquire();fa.target=this;fa.cancellable=
!0;ma=m.acquire();ma.target=this;ma.cancellable=!1;for(const ia of C)ba?(fa.reset(ia),this.emit("before-add",fa),fa.defaultPrevented||(h?S.push(ia):S.splice(f++,0,ia),this._set("length",S.length),oa&&(ma.reset(ia),this.emit("after-add",ma)))):(h?S.push(ia):S.splice(f++,0,ia),this._set("length",S.length),ma.reset(ia),this.emit("after-add",ma));m.release(ma);m.release(fa)}else{if(h)for(fa of C)S.push(fa);else S.splice(f,0,...C);this._set("length",S.length)}}(C&&C.length||la&&la.length)&&this._notifyChangeEvent(C,
la);return la};z._emitBeforeChanges=function(f){let h=!1;if(this.hasEventListener("before-changes")){const C=m.acquire();C.target=this;C.cancellable=!0;C.type=f;this.emit("before-changes",C);h=C.defaultPrevented;m.release(C)}return h};z._emitAfterChanges=function(f){if(this.hasEventListener("after-changes")){const h=m.acquire();h.target=this;h.cancellable=!1;h.type=f;this.emit("after-changes",h);m.release(h)}this._observable.notify()};z._notifyChangeEvent=function(f,h){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:f,removed:h})};z._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var f=this._notifications;this._notifications=null;for(const h of f){f=h.changes;D.clear();P.clear();da.clear();for(const {added:oa,removed:fa}of f){if(oa)if(0===da.size&&0===P.size)for(const ia of oa)D.add(ia);else for(const ia of oa)P.has(ia)?(da.add(ia),P.delete(ia)):da.has(ia)||D.add(ia);
if(fa)if(0===da.size&&0===D.size)for(const ia of fa)P.add(ia);else for(const ia of fa)D.has(ia)?D.delete(ia):(da.delete(ia),P.add(ia))}const C=Y.acquire();D.forEach(oa=>{C.push(oa)});const S=Y.acquire();P.forEach(oa=>{S.push(oa)});const ba=this._items,la=h.items,ma=Y.acquire();da.forEach(oa=>{la.indexOf(oa)!==ba.indexOf(oa)&&ma.push(oa)});if(h.listeners&&(C.length||S.length||ma.length)){f={target:this,added:C,removed:S,moved:ma};const oa=h.listeners.length;for(let fa=0;fa<oa;fa++){const ia=h.listeners[fa];
ia.removed||ia.callback.call(this,f)}}Y.release(C);Y.release(S);Y.release(ma)}D.clear();P.clear();da.clear()}};k._createClass(N,[{key:"items",get:function(){E.trackAccess(this._observable);return this._items},set:function(f){this._emitBeforeChanges(1)||(this._splice(0,this.length,v(f)),this._emitAfterChanges(1))}}]);return N}(W.EventedAccessor,Symbol.iterator);M.ofType=K=>{if(!K)return l;if(U.has(K))return U.get(K);let V=null;if("function"===typeof K)V=K.prototype.declaredClass;else if(K.base)V=K.base.prototype.declaredClass;
else for(var N in K.typeMap){const z=K.typeMap[N].prototype.declaredClass;V=V?V+` | ${z}`:z}N=function(z){function f(){return z.apply(this,arguments)||this}k._inheritsLoose(f,z);return f}(l);d.__decorate([G.shared({Type:K,ensureType:"function"===typeof K?r.ensureType(K):r.ensureOneOfType(K)})],N.prototype,"itemType",void 0);N=d.__decorate([y.subclass(`esri.core.Collection<${V}>`)],N);U.set(K,N);return N};d.__decorate([t.property()],M.prototype,"length",void 0);d.__decorate([t.property()],M.prototype,
"items",null);return M=l=d.__decorate([y.subclass("esri.core.Collection")],M)})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],function(k){k.shared=function(d){return(Y,W)=>{Y[W]=d}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(k,d){let Y=function(){function W(){this._observers=[]}var u=W.prototype;u.observe=function(F){this._observers.includes(F)||
this._observers.push(F);return new d.ObservationHandle(this._observers,F)};u.notify=function(){const F=this._observers.slice();for(let A=0;A<F.length;++A){const w=F[A];w.onInvalidated();w.onCommitted()}};return W}();k.SimpleObservable=Y;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,d,Y,W,u,F){function A(r,G,y={},E){let n=null;const v=
y.once?(a,e)=>{E(a)&&(W.removeMaybe(n),G(a,e))}:(a,e)=>{E(a)&&G(a,e)};n=u.watchTracked(r,v,y.sync,y.equals);y.initial&&(r=r(),v(r,r));return n}function w(r){return!0}function t(r){return!!r}k.autorun=F.autorun;k.initial={initial:!0};k.react=function(r,G,y={}){return A(r,G,y,w)};k.reactListener=function(r,G,y,E={}){function n(){a&&e&&(e.remove(),null==E.onListenerRemove?void 0:E.onListenerRemove(a),e=a=null)}function v(m){E.once&&E.once&&W.removeMaybe(l);y(m)}let a=null,e=null,l=null;const B=u.watchTracked(r,
(m,H)=>{n();d.isEventTarget(m)&&(a=m,e=d.on(m,G,v),null==E.onListenerAdd?void 0:E.onListenerAdd(m))},E.sync);return l=Y.makeHandle(()=>{B.remove();n()})};k.reactTruthy=function(r,G,y={}){return A(r,G,y,t)};k.sync={sync:!0};k.syncAndInitial={sync:!0,initial:!0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/watchUtils":function(){define(["exports","./events","./lang","./promiseUtils"],function(k,d,Y,W){function u(v,a,e,l){var B=Array.isArray(a)?a:-1<a.indexOf(",")?a.split(","):[a];
a=v.watch(a,e,l);for(const m of B)B=m.trim().replace(n,"$1"),l=v.get(B),e.call(v,l,l,B,v);return a}function F(v,a,e,l,B){B=v.watch(a,(H,D,P,da)=>{if(!e||e(H))null==l?void 0:l.call(v,H,D,P,da)},B);if(Array.isArray(a))for(var m of a){const H=v.get(m);e&&e(H)&&(null==l?void 0:l.call(v,H,H,a,v))}else m=v.get(a),e&&e(m)&&(null==l?void 0:l.call(v,m,m,a,v));return B}function A(v,a,e,l,B){function m(){da&&(da.remove(),da=null)}const H="function"===typeof l?l:null,D="object"===typeof l?l:null;"boolean"===
typeof l&&(B=l);let P=!1,da;const U=W.createDeferred();W.onAbort(D,()=>{m();U.reject(W.createAbortError())});l={then:U.promise.then.bind(U.promise),catch:U.promise.catch.bind(U.promise),remove:m};Object.freeze(l);da=F(v,a,e,(ja,M,K,V)=>{P=!0;m();H&&H.call(v,ja,M,K,V);U.resolve({value:ja,oldValue:M,propertyName:K,target:V})},B);P&&m();return l}function w(v){return!!v}function t(v){return!v}function r(v){return!0===v}function G(v){return!1===v}function y(v){return void 0!==v}function E(v){return void 0===
v}const n=/\?(\.|$)/g;k.init=u;k.on=function(v,a,e,l,B,m,H){function D(U){const ja=P[U];ja&&(m&&m(ja.target,U,v,e),ja.handle.remove(),delete P[U])}const P={},da=u(v,a,(U,ja,M)=>{D(M);d.isEventTarget(U)&&(P[M]={handle:d.on(U,e,l),target:U},B&&B(U,M,v,e))},H);return{remove(){da.remove();for(const U in P)D(U)}}};k.once=function(v,a,e,l){return A(v,a,null,e,l)};k.pausable=function(v,a,e,l){let B=!1;const m=v.watch(a,(H,D,P,da)=>{B||e.call(v,H,D,P,da)},l);return{remove(){m.remove()},pause(){B=!0},resume(){B=
!1}}};k.watch=function(v,a,e,l){return v.watch(a,e,l)};k.when=function(v,a,e,l){return F(v,a,w,e,l)};k.whenDefined=function(v,a,e,l){return F(v,a,y,e,l)};k.whenDefinedOnce=function(v,a,e,l){return A(v,a,y,e,l)};k.whenEqual=function(v,a,e,l,B){return F(v,a,m=>Y.equals(e,m),l,B)};k.whenEqualOnce=function(v,a,e,l,B){return A(v,a,m=>Y.equals(e,m),l,B)};k.whenFalse=function(v,a,e,l){return F(v,a,G,e,l)};k.whenFalseOnce=function(v,a,e,l){return A(v,a,G,e,l)};k.whenNot=function(v,a,e,l){return F(v,a,t,e,
l)};k.whenNotOnce=function(v,a,e,l){return A(v,a,t,e,l)};k.whenOnce=function(v,a,e,l){return A(v,a,w,e,l)};k.whenTrue=function(v,a,e,l){return F(v,a,r,e,l)};k.whenTrueOnce=function(v,a,e,l){return A(v,a,r,e,l)};k.whenUndefined=function(v,a,e,l){return F(v,a,E,e,l)};k.whenUndefinedOnce=function(v,a,e,l){return A(v,a,E,e,l)};k.whenValidOnce=A;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Y,W,u,F,A,w,t,r){k.PromiseQueue=function(y){function E(){var v=y.apply(this,arguments)||this;v._tasks=[];v.running=!1;return v}d._inheritsLoose(E,y);var n=E.prototype;n.destroy=function(){this.cancelAll()};n.runTask=function(v){for(;!v.done&&this._process(v);)v.madeProgress()};n.push=function(v,a,e){this.running=!0;return new Promise((l,B)=>this._tasks.push(new G(l,B,v,a,e)))};n.unshift=function(v,a,e){this.running=!0;return new Promise((l,B)=>this._tasks.unshift(new G(l,B,v,a,e)))};
n._process=function(v){if(0===this._tasks.length)return!1;const a=this._tasks.shift();try{const e=u.isAborted(a.signal);if(e&&!a.abortCallback)a.reject(u.createAbortError());else{const l=e?a.abortCallback(u.createAbortError()):a.callback(v);u.isPromise(l)?l.then(a.resolve,a.reject):a.resolve(l)}}catch(e){a.reject(e)}this.running=0<this._tasks.length;return!0};n.cancelAll=function(){const v=u.createAbortError();for(const a of this._tasks)if(a.abortCallback){const e=a.abortCallback(v);a.resolve(e)}else a.reject(v);
this._tasks.length=0;this.running=!1};d._createClass(E,[{key:"length",get:function(){return this._tasks.length}}]);return E}(W);Y.__decorate([F.property()],k.PromiseQueue.prototype,"running",void 0);k.PromiseQueue=Y.__decorate([r.subclass("esri.layers.support.PromiseQueue")],k.PromiseQueue);let G=function(y,E,n,v,a){this.resolve=y;this.reject=E;this.callback=n;this.signal=v;this.abortCallback=a};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Y,W,u,F,A,w){Y=function(t){function r(){var G=t.apply(this,arguments)||this;G.SCHEDULER_LOG_SLOW_TASKS=!1;G.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return G}k._inheritsLoose(r,t);return r}(Y);d.__decorate([W.property()],Y.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([W.property()],Y.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);Y=d.__decorate([w.subclass("esri.views.support.DebugFlags")],Y);return new Y})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports"],
function(k){function*d(w,t,r){let G=0;for(;G<=w.length;){var y=w.indexOf(t,G);y=w.substring(G,-1<y?y:void 0);G+=y.length+t.length;if(!r||y.trim())yield y}}function Y(w,t){return d(w,t,!1)}function W(w){let t=0,r;for(r=w.indexOf('"',0);0<=r;)t++,r=w.indexOf('"',r+1);return t}const u=/^\s*"([\S\s]*)"\s*$/,F=/""/g,A=[","," ",";","|","\t"];k.inferDelimiter=function(w){w=w.trim();let t=0,r="";for(const G of A){const y=w.split(G).length;y>t&&(t=y,r=G)}return""===r?null:r};k.parseRows=function*(w,t,r,G=
()=>Object.create(null)){var y="";let E="",n=0,v=G(),a=0;a:for(const e of w){w=Y(e,r);for(const l of w)if(y+=E+l,E="",n+=W(l),0===n%2){if(0<n)if(y=u.exec(y))v[t[a]]=y[1].replace(F,'"'),a++;else{v=G();a=0;y="";n=0;continue a}else v[t[a]]=y,a++;y="";n=0}else E=r;0===n?(yield v,v=G(),a=0):E="\n"}};k.readRowParts=Y;k.readRows=function(w){const t=w.includes("\r\n")?"\r\n":"\n";return d(w,t,!0)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(k,d,Y,W,u){k.createCapabilities=function(F,A){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:F},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:A,supportsDelete:A,supportsEditing:A,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,
supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:A,supportsExceedsLimitStatistics:!0},query:W.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:A,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};k.createDefaultAttributesFunction=
function(F,A){if(d("esri-csp-restrictions"))return()=>({[A]:null,...F});try{let w=`this.${A} = null;`;for(const r in F){const G=r.includes(".")?`["${r}"]`:`.${r}`;w+=`this${G} = ${JSON.stringify(F[r])};`}const t=new Function(w);return()=>new t}catch(w){return()=>({[A]:null,...F})}};k.createDefaultTemplate=function(F={}){return[{name:"New Feature",description:"",prototype:{attributes:Y.clone(F)}}]};k.createDrawingInfo=function(F){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===F||"esriGeometryMultipoint"===
F?u.defaultPointSymbolJSON:"esriGeometryPolyline"===F?u.defaultPolylineSymbolJSON:u.defaultPolygonSymbolJSON}}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(k){const d=[252,146,31,255],Y={type:"esriSMS",style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},W={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d};k.defaultColor=d;k.defaultOutlineColor=[153,
153,153,255];k.defaultPointSymbolJSON=Y;k.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};k.defaultPolylineSymbolJSON=W;k.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};k.errorPointSymbolJSON={type:"esriSMS",
style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};k.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};k.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(k,"__esModule",{value:!0})})},"*noref":1}});
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../request ../../../../core/Error ../../../../core/Logger ../../../../core/number ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../geometry/SpatialReference".split(" "),function(k,
d,Y,W,u,F,A,w,t,r,G,y,E,n,v,a,e,l,B,m,H,D,P){function da(ma,oa){var fa=oa.parsingOptions||{};const ia={delimiter:fa.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:fa.latitudeField,longitudeFieldName:fa.longitudeField}};var ra=B.readRows(ma),Aa=ra.next().value;if(!Aa)throw new u("csv-layer:empty-csv","CSV is empty",{csv:ma});Aa=Aa.trim();if(!fa.delimiter){ma=B.inferDelimiter(Aa);if(!ma)throw new u("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV");ia.delimiter=
ma}Aa=Aa.split(ia.delimiter).filter(Ea=>!!Ea);const xa=ia.layerDefinition={name:t.getFilename(oa.url,N)||"csv",drawingInfo:V,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:fa.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:fa.spatialReference||{wkid:102100}}};if(!fa.latitudeField||!fa.longitudeField){oa=U(Aa);if(!fa.longitudeField&&!oa.longitudeFieldName||!fa.latitudeField&&
!oa.latitudeFieldName)throw new u("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file");ia.locationInfo={longitudeFieldName:fa.longitudeField||oa.longitudeFieldName,latitudeFieldName:fa.latitudeField||oa.latitudeFieldName}}ra=ja(ra,ia.delimiter,Aa,ia.locationInfo);if(fa.fields&&fa.fields.length){oa=new Map;for(var La of fa.fields)oa.set(La.name.toLowerCase(),La);for(var Ga of ra)if(fa=oa.get(Ga.name.toLowerCase()))La=Ga.name,Object.assign(Ga,fa),
Ga.name=La}xa.fields=ra;xa.fields.some(Ea=>"esriFieldTypeOID"===Ea.type?(xa.objectIdField=Ea.name,!0):!1)||(Ga={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},xa.objectIdField=Ga.name,xa.fields.unshift(Ga));xa.timeInfo&&(fa=new H(xa.fields),Ga=xa.timeInfo,Ga.startTimeField&&((La=fa.get(Ga.startTimeField))?(Ga.startTimeField=La.name,La.type="esriFieldTypeDate"):Ga.startTimeField=null),Ga.endTimeField&&((La=fa.get(Ga.endTimeField))?(Ga.endTimeField=La.name,La.type=
"esriFieldTypeDate"):Ga.endTimeField=null),Ga.trackIdField&&(fa=fa.get(Ga.trackIdField),Ga.trackIdField=fa?fa.name:null),Ga.startTimeField||Ga.endTimeField||(xa.timeInfo=null));return ia}function U(ma){const oa=ma.map(fa=>fa.toLowerCase());return{longitudeFieldName:ma[oa.indexOf(C.find(fa=>oa.includes(fa)))],latitudeFieldName:ma[oa.indexOf(h.find(fa=>oa.includes(fa)))]}}function ja(ma,oa,fa,ia){const ra=[];oa=B.parseRows(ma,fa,oa);ma=[];for(var Aa of oa){if(10===ma.length)break;ma.push(Aa)}for(const xa of fa)if(xa===
ia.longitudeFieldName||xa===ia.latitudeFieldName)ra.push({name:xa,type:"esriFieldTypeDouble",alias:xa});else{fa=ma.map(La=>La[xa]);fa=M(fa);Aa={name:xa,type:null,alias:xa};switch(fa){case "integer":Aa.type="esriFieldTypeInteger";break;case "double":Aa.type="esriFieldTypeDouble";break;case "date":Aa.type="esriFieldTypeDate";Aa.length=36;break;default:Aa.type="esriFieldTypeString",Aa.length=255}ra.push(Aa)}return ra}function M(ma){if(!ma.length)return"string";const oa=/[^+-.,0-9]/;return ma.map(fa=>
{var ia=!1;if(""!==fa){if(oa.test(fa))ia=!0;else{ia=la(fa);if(!isNaN(ia))return/[.,]/.test(fa)||!Number.isInteger(ia)||214783647<ia||-214783648>ia?"double":"integer";if(-1===fa.indexOf("E"))ia=!0;else if(ia=Number(fa),isNaN(ia))if(-1===fa.indexOf(","))ia=!0;else if(fa=fa.replace(",","."),ia=Number(fa),isNaN(ia))ia=!0;else return"double";else return"double"}return ia&&!/^[-]?\d*[.,]?\d*$/.test(fa)&&K(new Date(fa),fa)?"date":"string"}}).reduce((fa,ia)=>{if(void 0===fa||fa===ia)return ia;if("string"===
fa||"string"===ia)return"string";if("double"===fa||"double"===ia)return"double"})}function K(ma,oa){if(!ma||"[object Date]"!==Object.prototype.toString.call(ma)||isNaN(ma.getTime()))return!1;ma=!0;if(!ba&&/\d+\W*$/.test(oa)&&(oa=oa.match(/[a-zA-Z]{2,}/))){ma=!1;let fa=0;for(;!ma&&fa<=oa.length;)ma=!S.test(oa[fa]),fa++;ma=!ma}return ma}const V=m.createDrawingInfo("esriGeometryPoint"),N=["csv"],z=[0,0];let f=function(ma,oa){this.x=ma;this.y=oa};Y=function(){function ma(){var fa=this;this._queryEngine=
null;this._snapshotFeatures=function(){var ia=d._asyncToGenerator(function*(ra){ra=yield fa._fetch(ra);return fa._createFeatures(ra)});return function(ra){return ia.apply(this,arguments)}}()}var oa=ma.prototype;oa.destroy=function(){var fa;null==(fa=this._queryEngine)?void 0:fa.destroy();this._queryEngine=null};oa.load=function(){var fa=d._asyncToGenerator(function*(ia,ra={}){var Aa;this.loadOptions=ia;[ra]=yield Promise.all([this._fetch(ra.signal),this._checkProjection(null==ia?void 0:null==(Aa=
ia.parsingOptions)?void 0:Aa.spatialReference)]);ia=da(ra,ia);this.locationInfo=ia.locationInfo;this.delimiter=ia.delimiter;this._queryEngine=this._createQueryEngine(ia);Aa=yield this._createFeatures(ra);this._queryEngine.featureStore.addMany(Aa);ia.layerDefinition.extent=this._queryEngine.fullExtent;if(ia.layerDefinition.timeInfo){const {start:xa,end:La}=this._queryEngine.timeExtent;ia.layerDefinition.timeInfo.timeExtent=[xa,La]}return ia});return function(ia){return fa.apply(this,arguments)}}();
oa.applyEdits=function(){var fa=d._asyncToGenerator(function*(){throw new u("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");});return function(){return fa.apply(this,arguments)}}();oa.queryFeatures=function(){var fa=d._asyncToGenerator(function*(ia={},ra={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(ia,ra.signal)});return function(){return fa.apply(this,arguments)}}();oa.queryFeatureCount=function(){var fa=d._asyncToGenerator(function*(ia=
{},ra={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(ia,ra.signal)});return function(){return fa.apply(this,arguments)}}();oa.queryObjectIds=function(){var fa=d._asyncToGenerator(function*(ia={},ra={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(ia,ra.signal)});return function(){return fa.apply(this,arguments)}}();oa.queryExtent=function(){var fa=d._asyncToGenerator(function*(ia={},ra={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(ia,
ra.signal)});return function(){return fa.apply(this,arguments)}}();oa.querySnapping=function(){var fa=d._asyncToGenerator(function*(ia,ra={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(ia,ra.signal)});return function(ia){return fa.apply(this,arguments)}}();oa.refresh=function(){var fa=d._asyncToGenerator(function*(ia){var ra;this.loadOptions.customParameters=ia;null==(ra=this._snapshotTask)?void 0:ra.abort();this._snapshotTask=w.createTask(this._snapshotFeatures);
this._snapshotTask.promise.then(Aa=>{this._queryEngine.featureStore.clear();Aa&&this._queryEngine.featureStore.addMany(Aa)},Aa=>{this._queryEngine.featureStore.clear();w.isAbortError(Aa)||F.getLogger("esri.layers.CSVLayer").error(new u("csv-layer:refresh","An error occurred during refresh",{error:Aa}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}});return function(ia){return fa.apply(this,arguments)}}();oa._waitSnapshotComplete=
function(){var fa=d._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return fa.apply(this,arguments)}}();oa._fetch=function(){var fa=d._asyncToGenerator(function*(ia){const {url:ra,customParameters:Aa}=this.loadOptions;if(!ra)throw new u("csv-layer:invalid-source","url not defined");const xa=t.urlToObject(ra);return(yield W(xa.path,{query:{...xa.query,...Aa},responseType:"text",
signal:ia})).data});return function(ia){return fa.apply(this,arguments)}}();oa._createQueryEngine=function(fa){const {objectIdField:ia,fields:ra,extent:Aa,timeInfo:xa}=fa.layerDefinition;fa=new a({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new l.default({fields:ra,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:xa,objectIdField:ia,spatialReference:Aa.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:fa})};oa._createFeatures=function(){var fa=d._asyncToGenerator(function*(ia){const {latitudeFieldName:ra,
longitudeFieldName:Aa}=this.locationInfo,{objectIdField:xa,fieldsIndex:La,spatialReference:Ga}=this._queryEngine;let Ea=[];const c=[];var q=La.fields.filter(ha=>ha.name!==xa).map(ha=>ha.name),ca=0;ia=B.readRows(ia);ia.next();const p={};for(var J of La.fields)if("esriFieldTypeOID"!==J.type&&"esriFieldTypeGlobalID"!==J.type){const ha=D.getFieldDefaultValue(J);void 0!==ha&&(p[J.name]=ha)}q=B.parseRows(ia,q,this.delimiter,m.createDefaultAttributesFunction(p,xa));for(var Q of q)if(q=this._parseCoordinateValue(Q[ra]),
J=this._parseCoordinateValue(Q[Aa]),null!=J&&null!=q&&!isNaN(q)&&!isNaN(J)){Q[ra]=q;Q[Aa]=J;for(var R in Q)R!==ra&&R!==Aa&&(La.isDateField(R)?(ia=new Date(Q[R]),Q[R]=K(ia,Q[R])?ia.getTime():null):La.isNumericField(R)&&(ia=la(Q[R]),isNaN(ia)?Q[R]=null:Q[R]=ia));Q[xa]=ca;ca++;Ea.push(new f(J,q));c.push(Q)}if(!y.equals({wkid:4326},Ga))if(y.isWebMercator(Ga))for(const ha of Ea)[ha.x,ha.y]=E.lngLatToXY(ha.x,ha.y,z);else Ea=r.projectMany(G.jsonAdapter,Ea,P.WGS84,Ga,null);ca=[];for(Q=0;Q<Ea.length;Q++){const {x:ha,
y:ea}=Ea[Q];R=c[Q];R[xa]=Q+1;ca.push(new n.default(new v([],[ha,ea]),R,null,R[xa]))}return ca});return function(ia){return fa.apply(this,arguments)}}();oa._parseCoordinateValue=function(fa){if(null==fa||""===fa)return null;let ia=la(fa);if(isNaN(ia)||181<Math.abs(ia))ia=parseFloat(fa);return ia};oa._checkProjection=function(){var fa=d._asyncToGenerator(function*(ia){try{yield e.checkProjectionSupport(y.WGS84,ia)}catch{throw new u("csv-layer:projection-not-supported","Projection not supported");}});
return function(ia){return fa.apply(this,arguments)}}();return ma}();const h="lat latitude latitude83 latdecdeg lat_dd y ycenter point-y".split(" "),C="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point-x".split(" "),S=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,ba=Number.isNaN((new Date("technology 10")).getTime()),la=function(){const ma=A._parseInfo(),
oa=new RegExp("^"+ma.regexp+"$"),fa=new RegExp("["+ma.group+"\\s\\xa0]","g"),ia=ma.factor;return function(ra){ra=oa.exec(ra);ma.factor=ia;if(!ra)return NaN;let Aa=ra[1];if(!ra[1]){if(!ra[2])return NaN;Aa=ra[2];ma.factor*=-1}Aa=Aa.replace(fa,"").replace(ma.decimal,".");return+Aa*ma.factor}}();k.default=Y;k.inferFieldType=M;k.inferFields=ja;k.inferLocationInfo=U;Object.defineProperty(k,"__esModule",{value:!0})});