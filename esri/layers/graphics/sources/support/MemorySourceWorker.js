// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(k,d,Y,X,r,D,z,w){function t(n,J){return n?J?4:3:J?3:2}function q(n,J,T,V){if(n){if(T)return J&&V?c:Oa;if(J&&V)return Ia}else if(J&&V)return Oa;return Sa}function H({scale:n,translate:J},T){return Math.round((T-J[0])/n[0])}function N({scale:n,translate:J},
T){return Math.round((J[1]-T)/n[1])}function O({scale:n,translate:J},T){return T*n[0]+J[0]}function u({scale:n,translate:J},T){return J[1]-T*n[1]}function B(n){n=n.coords;return{x:n[0],y:n[1]}}function b(n,J){n.coords[0]=J.x;n.coords[1]=J.y;return n}function f(n){n=n.coords;return{x:n[0],y:n[1],z:n[2]}}function m(n,J){n.coords[0]=J.x;n.coords[1]=J.y;n.coords[2]=J.z;return n}function F(n){n=n.coords;return{x:n[0],y:n[1],m:n[2]}}function l(n,J){n.coords[0]=J.x;n.coords[1]=J.y;n.coords[2]=J.m;return n}
function C(n){n=n.coords;return{x:n[0],y:n[1],z:n[2],m:n[3]}}function y(n,J){n.coords[0]=J.x;n.coords[1]=J.y;n.coords[2]=J.z;n.coords[3]=J.m;return n}function I(n,J){return n&&J?y:n?m:J?l:b}function Q(n,J,T,V,ia){T=I(T,V);for(const fa of J){const {geometry:K,attributes:P}=fa;let ca;K&&(ca=T(new w,K));n.push(new D.default(ca,P,null,P[ia]))}return n}function R(n,J,T,V){for(const ia of J){const {geometry:fa,attributes:K}=ia;let P;fa&&(P=da(fa,T,V));n.push({attributes:K,geometry:P})}return n}function da(n,
J,T){if(X.isNone(n))return null;const V=t(J,T),ia=[];for(let fa=0;fa<n.coords.length;fa+=V){const K=[];for(let P=0;P<V;P++)K.push(n.coords[fa+P]);ia.push(K)}return J?T?{points:ia,hasZ:J,hasM:T}:{points:ia,hasZ:J}:T?{points:ia,hasM:T}:{points:ia}}function L(n,J,T,V,ia){T=t(T,V);for(const fa of J){J=fa.geometry;V=fa.attributes;let K;J&&(K=G(new w,J,T));n.push(new D.default(K,V,null,V[ia]))}return n}function G(n,J,T=t(J.hasZ,J.hasM)){n.lengths[0]=J.points.length;const V=n.coords;let ia=0;for(const fa of J.points)for(J=
0;J<T;J++)V[ia++]=fa[J];return n}function U(n,J,T){if(!n)return null;const V=t(J,T),{coords:ia,lengths:fa}=n;n=[];let K=0;for(const P of fa){const ca=[];for(let oa=0;oa<P;oa++){const pa=[];for(let ua=0;ua<V;ua++)pa.push(ia[K++]);ca.push(pa)}n.push(ca)}return J?T?{paths:n,hasZ:J,hasM:T}:{paths:n,hasZ:J}:T?{paths:n,hasM:T}:{paths:n}}function M(n,J,T,V,ia){T=t(T,V);for(const fa of J){J=fa.geometry;V=fa.attributes;let K;J&&(K=x(new w,J,T));n.push(new D.default(K,V,null,V[ia]))}return n}function x(n,J,
T=t(J.hasZ,J.hasM)){const {lengths:V,coords:ia}=n;let fa=0;for(const K of J.paths){for(const P of K)for(J=0;J<T;J++)ia[fa++]=P[J];V.push(K.length)}return n}function e(n,J,T){if(!n)return null;const V=t(J,T),{coords:ia,lengths:fa}=n;n=[];let K=0;for(const P of fa){const ca=[];for(let oa=0;oa<P;oa++){const pa=[];for(let ua=0;ua<V;ua++)pa.push(ia[K++]);ca.push(pa)}n.push(ca)}return J?T?{rings:n,hasZ:J,hasM:T}:{rings:n,hasZ:J}:T?{rings:n,hasM:T}:{rings:n}}function g(n,J,T,V,ia){for(const fa of J){J=fa.geometry;
const K=fa.centroid,P=fa.attributes;let ca;J&&(ca=A(new w,J,T,V));X.isSome(K)?n.push(new D.default(ca,P,b(new w,K),P[ia])):n.push(new D.default(ca,P,null,P[ia]))}return n}function A(n,J,T=J.hasZ,V=J.hasM){S(n,J.rings,T,V);return n}function S(n,J,T,V){T=t(T,V);const {lengths:ia,coords:fa}=n;V=0;ia.length=fa.length=0;for(const K of J){for(const P of K)for(J=0;J<T;J++)fa[V++]=P[J];ia.push(K.length)}return n}function aa(n,J,T,V,ia,fa){n.length=0;if(!T){for(const K of J)n.push(new D.default(null,K.attributes,
null,K.attributes[fa]));return n}switch(T){case "esriGeometryPoint":return Q(n,J,V,ia,fa);case "esriGeometryMultipoint":return L(n,J,V,ia,fa);case "esriGeometryPolyline":return M(n,J,V,ia,fa);case "esriGeometryPolygon":return g(n,J,V,ia,fa);default:Ja.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${T}'`)),n.length=0}return n}function ja(n,J,T,V){n=n&&("coords"in n?n:n.geometry);if(X.isNone(n))return null;switch(J){case "esriGeometryPoint":return J=B,T&&
V?J=C:T?J=f:V&&(J=F),J(n);case "esriGeometryMultipoint":return da(n,T,V);case "esriGeometryPolyline":return U(n,T,V);case "esriGeometryPolygon":return e(n,T,V);default:Ja.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${J}'`))}}function na(n,J,T,V,ia){n.length=0;if(X.isNone(T)){for(const P of J)n.push({attributes:P.attributes});return n}switch(T){case "esriGeometryPoint":var fa=B;V&&ia?fa=C:V?fa=f:ia&&(fa=F);for(var K of J){const {geometry:P,attributes:ca}=
K;V=X.isSome(P)?fa(P):null;n.push({attributes:ca,geometry:V})}break;case "esriGeometryMultipoint":return R(n,J,V,ia);case "esriGeometryPolyline":for(const P of J){const {geometry:ca,attributes:oa}=P;let pa;X.isSome(ca)&&(pa=U(ca,V,ia));n.push({attributes:oa,geometry:pa})}break;case "esriGeometryPolygon":for(fa of J){const {geometry:P,attributes:ca,centroid:oa}=fa;let pa;X.isSome(P)&&(pa=e(P,V,ia));oa?(K=B(oa),n.push({attributes:ca,centroid:K,geometry:pa})):n.push({attributes:ca,geometry:pa})}break;
default:Ja.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${T}'`))}return n}function ta(n,J,T,V,ia,fa,K=T,P=V){n.lengths.length&&(n.lengths.length=0);n.coords.length&&(n.coords.length=0);if(X.isNone(J)||!J.coords.length)return null;ia=Ba[ia];const {coords:ca,lengths:oa}=J;J=t(T,V);const pa=t(T&&K,V&&P);T=q(T,V,K,P);if(!oa.length)return T(n.coords,ca,0,0,H(fa,ca[0]),N(fa,ca[1])),n.lengths.length&&(n.lengths.length=0),n.coords.length=J,n;let ua,wa=0,za,Ga=
0;for(const Ca of oa){if(Ca<ia)continue;let Da=0;za=Ga;P=V=H(fa,ca[wa]);ua=K=N(fa,ca[wa+1]);T(n.coords,ca,za,wa,P,ua);Da++;wa+=J;za+=pa;for(let Ea=1;Ea<Ca;Ea++,wa+=J)if(P=H(fa,ca[wa]),ua=N(fa,ca[wa+1]),P!==V||ua!==K)T(n.coords,ca,za,wa,P-V,ua-K),za+=pa,Da++,V=P,K=ua;Da>=ia&&(n.lengths.push(Da),Ga=za)}n.coords.length=Ga;return n.coords.length?n:null}function ma(n,J,T,V,ia,fa,K){let P=V,ca=0;for(let pa=fa+T;pa<K;pa+=T){{var oa=J[pa];const ua=J[pa+1],wa=J[K],za=J[K+1];let Ga=J[fa],Ca=J[fa+1],Da=wa-Ga,
Ea=za-Ca;if(0!==Da||0!==Ea){const Fa=((oa-Ga)*Da+(ua-Ca)*Ea)/(Da*Da+Ea*Ea);1<Fa?(Ga=wa,Ca=za):0<Fa&&(Ga+=Da*Fa,Ca+=Ea*Fa)}Da=oa-Ga;Ea=ua-Ca;oa=Da*Da+Ea*Ea}oa>P&&(ca=pa,P=oa)}P>V&&(ca-fa>T&&ma(n,J,T,V,ia,fa,ca),ia(n,J,n.length,ca,J[ca],J[ca+1]),K-ca>T&&ma(n,J,T,V,ia,ca,K))}function la(n,J,T,V,ia){const {coords:fa,lengths:K}=J,P=T?V?c:Oa:V?Oa:Sa;T=t(T,V);if(!fa.length)return n!==J&&(n.lengths.length=0,n.coords.length=0),n;if(!K.length)return P(n.coords,fa,0,0,O(ia,fa[0]),u(ia,fa[1])),n!==J&&(n.lengths.length=
0,n.coords.length=T),n;const [ca,oa]=ia.scale;V=0;for(let pa=0;pa<K.length;pa++){const ua=K[pa];n.lengths[pa]=ua;let wa=O(ia,fa[V]),za=u(ia,fa[V+1]);P(n.coords,fa,V,V,wa,za);V+=T;for(let Ga=1;Ga<ua;Ga++,V+=T)wa+=fa[V]*ca,za-=fa[V+1]*oa,P(n.coords,fa,V,V,wa,za)}n!==J&&(n.lengths.length=K.length,n.coords.length=fa.length);return n}function va(n,J,T,V){let ia=0,fa=n[V*J],K=n[V*(J+1)];for(let P=1;P<T;P++){const ca=fa+n[V*(J+P)],oa=K+n[V*(J+P)+1],pa=(ca-fa)*(oa+K);fa=ca;K=oa;ia+=pa}return.5*ia}const Ja=
Y.getLogger("esri.tasks.support.optimizedFeatureSet"),Ba={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Sa=(n,J,T,V,ia,fa)=>{n[T]=ia;n[T+1]=fa},Oa=(n,J,T,V,ia,fa)=>{n[T]=ia;n[T+1]=fa;n[T+2]=J[V+2]},Ia=(n,J,T,V,ia,fa)=>{n[T]=ia;n[T+1]=fa;n[T+2]=J[V+3]},c=(n,J,T,V,ia,fa)=>{n[T]=ia;n[T+1]=fa;n[T+2]=J[V+2];n[T+3]=J[V+3]},p=[],ea=[];k.convertFromFeature=function(n,J,T,V,ia){p[0]=n;[n]=aa(ea,p,J,T,V,ia);p.length=ea.length=0;return n};k.convertFromFeatureSet=
function(n,J){const T=new z,{hasM:V,hasZ:ia,features:fa,objectIdFieldName:K,spatialReference:P,geometryType:ca,exceededTransferLimit:oa,transform:pa,fields:ua}=n;ua&&(T.fields=ua);T.geometryType=ca;T.objectIdFieldName=K||J;T.spatialReference=P;if(!T.objectIdFieldName)return Ja.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),T;fa&&aa(T.features,fa,ca,ia,V,T.objectIdFieldName);oa&&(T.exceededTransferLimit=oa);V&&(T.hasM=V);ia&&(T.hasZ=ia);pa&&(T.transform=
pa);return T};k.convertFromFeatures=aa;k.convertFromGeometry=function(n,J,T){if(X.isNone(n))return null;const V=new w;"hasZ"in n&&null==J&&(J=n.hasZ);"hasM"in n&&null==T&&(T=n.hasM);if(r.isPoint(n))return I(null!=J?J:null!=n.z,null!=T?T:null!=n.m)(V,n);if(r.isPolygon(n))return A(V,n,J,T);if(r.isPolyline(n))return x(V,n,t(J,T));if(r.isMultipoint(n))return G(V,n,t(J,T));Ja.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${n}'`))};k.convertFromGraphics=function(n,
J,T,V,ia,fa){const K=n.length;switch(T){case "esriGeometryPoint":Q(n,J,V,ia,fa);break;case "esriGeometryMultipoint":L(n,J,V,ia,fa);break;case "esriGeometryPolyline":M(n,J,V,ia,fa);break;case "esriGeometryPolygon":g(n,J,V,ia,fa);break;default:Ja.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${T}'`))}for(V=0;V<J.length;V++)n[V+K].geometryType=T,n[V+K].insertAfter=J[V].insertAfter,n[V+K].groupId=J[V].groupId;return n};k.convertFromMultipoint=G;k.convertFromMultipointFeatures=
L;k.convertFromNestedArray=S;k.convertFromPoint=function(n,J,T=I(null!=J.z,null!=J.m)){return T(n,J)};k.convertFromPointFeatures=Q;k.convertFromPolygon=A;k.convertFromPolyline=x;k.convertFromPolylineFeatures=M;k.convertToFeature=function(n,J,T,V){ea[0]=n;na(p,ea,J,T,V);n=p[0];p.length=ea.length=0;return n};k.convertToFeatureSet=function(n){const {objectIdFieldName:J,spatialReference:T,transform:V,fields:ia,hasM:fa,hasZ:K,features:P,geometryType:ca,exceededTransferLimit:oa,uniqueIdField:pa,queryGeometry:ua,
queryGeometryType:wa}=n;n=na([],P,ca,K,fa);const za=ja(ua,wa,!1,!1);n={features:n,fields:ia,geometryType:ca,objectIdFieldName:J,spatialReference:T,uniqueIdField:pa,queryGeometry:za};V&&(n.transform=V);oa&&(n.exceededTransferLimit=oa);fa&&(n.hasM=fa);K&&(n.hasZ=K);return n};k.convertToFeatures=na;k.convertToGeometry=ja;k.convertToMultipoint=da;k.convertToMultipointFeatures=R;k.convertToPoint=function(n,J,T){return n?J?T?C(n):f(n):T?F(n):B(n):null};k.convertToPolygon=e;k.convertToPolyline=U;k.deltaDecodeGeometry=
function(n,J){if(X.isNone(n))return null;const T=n.clone(),V=n.coords;n=n.lengths;let ia=0;for(let P=0;P<n.length;P++){const ca=n[P];var fa=V[J*ia],K=V[J*ia+1];for(let oa=1;oa<ca;oa++)fa+=V[J*(ia+oa)],K+=V[J*(ia+oa)+1],T.coords[J*(ia+oa)]=fa,T.coords[J*(ia+oa)+1]=K;ia+=ca}return T};k.deltaEncodeGeometry=function(n,J){const T=n.clone(),V=n.coords;n=n.lengths;let ia=0;for(let K=0;K<n.length;K++){const P=n[K];let ca=V[J*ia];var fa=V[J*ia+1];for(let oa=1;oa<P;oa++){const pa=V[J*(ia+oa)],ua=V[J*(ia+oa)+
1];fa=ua-fa;T.coords[J*(ia+oa)]=pa-ca;T.coords[J*(ia+oa)+1]=fa;ca=pa;fa=ua}ia+=P}return T};k.generalizeOptimizedGeometry=function(n,J,T,V,ia,fa,K=T,P=V){n.lengths.length&&(n.lengths.length=0);n.coords.length&&(n.coords.length=0);if(!J||!J.coords.length)return null;ia=Ba[ia];const {coords:ca,lengths:oa}=J;J=t(T,V);const pa=t(T&&K,V&&P);T=q(T,V,K,P);if(!oa.length)return T(n.coords,ca,0,0,ca[0],ca[1]),n.lengths.length&&(n.lengths.length=0),n.coords.length=J,n;V=0;fa*=fa;for(const ua of oa){if(ua<ia){V+=
ua*J;continue}K=n.coords.length/pa;P=V;const wa=V+(ua-1)*J;T(n.coords,ca,n.coords.length,P,ca[P],ca[P+1]);ma(n.coords,ca,J,fa,T,P,wa);T(n.coords,ca,n.coords.length,wa,ca[wa],ca[wa+1]);P=n.coords.length/pa-K;P>=ia?n.lengths.push(P):n.coords.length=K*pa;V+=ua*J}return n.coords.length?n:null};k.getBoundsOptimizedGeometry=function(n,J,T,V){if(X.isNone(J)||!J.coords||!J.coords.length)return null;T=t(T,V);let ia=V=Number.POSITIVE_INFINITY,fa=Number.NEGATIVE_INFINITY,K=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=
J.coords;for(let P=0;P<J.length;P+=T){const ca=J[P],oa=J[P+1];V=Math.min(V,ca);fa=Math.max(fa,ca);ia=Math.min(ia,oa);K=Math.max(K,oa)}}n[0]=V;n[1]=ia;n[2]=fa;n[3]=K;return n};k.getQuantizedArea=function(n,J){const {coords:T,lengths:V}=n;let ia=n=0;for(let fa=0;fa<V.length;fa++)ia+=va(T,n,V[fa],J),n+=fa;return Math.abs(ia)};k.getQuantizedBoundsOptimizedGeometry=function(n,J,T,V){T=t(T,V);const {lengths:ia,coords:fa}=J;V=J=Number.POSITIVE_INFINITY;let K=Number.NEGATIVE_INFINITY,P=Number.NEGATIVE_INFINITY,
ca=0;for(const oa of ia){let pa=fa[ca],ua=fa[ca+1];J=Math.min(pa,J);V=Math.min(ua,V);K=Math.max(pa,K);P=Math.max(ua,P);ca+=T;for(let wa=1;wa<oa;wa++,ca+=T){const za=fa[ca],Ga=fa[ca+1];pa+=za;ua+=Ga;0>za&&(J=Math.min(J,pa));0<za&&(K=Math.max(K,pa));0>Ga?V=Math.min(V,ua):0<Ga&&(P=Math.max(P,ua))}}n[0]=J;n[1]=V;n[2]=K;n[3]=P;return n};k.getSignedQuantizedRingArea=va;k.quantizeOptimizedFeatureSet=function(n,J){const {geometryType:T,features:V,hasM:ia,hasZ:fa}=J;if(!n)return J;for(let K=0;K<V.length;K++){const P=
V[K],ca=P.weakClone();ca.geometry=new w;ta(ca.geometry,P.geometry,ia,fa,T,n);P.centroid&&(ca.centroid=new w,ta(ca.centroid,P.centroid,ia,fa,"esriGeometryPoint",n));V[K]=ca}J.transform=n;return J};k.quantizeOptimizedGeometry=ta;k.quantizeX=H;k.quantizeY=N;k.removeCollinearVectices=function(n,J,T,V,ia){if(!J||!J.coords||!J.coords.length)return null;T=Ba[T];const {coords:fa,lengths:K}=J;J=q(V,ia,V,ia);V=t(V,ia);let P=ia=0,ca=0,oa=0;for(const wa of K){P=oa;J(n.coords,fa,P,ia,fa[ia],fa[ia+1]);ia+=V;var pa=
fa[ia];let za=fa[ia+1],Ga=pa,Ca=za;var ua=za/pa;P+=V;J(n.coords,fa,P,ia,Ga,Ca);ia+=V;for(let Da=2;Da<wa;Da++){pa=fa[ia];za=fa[ia+1];const Ea=za/pa,Fa=ua===Ea||!isFinite(ua)&&!isFinite(Ea);ua=Fa&&isFinite(Ea)?0<=ua&&0<=Ea||0>=ua&&0>=Ea:0<=Ca&&0<=za||0>=Ca&&0>=za;Fa&&ua?(Ga+=pa,Ca+=za):(Ga=pa,Ca=za,P+=V);J(n.coords,fa,P,ia,Ga,Ca);ia+=V;ua=Ea}P+=V;pa=(P-oa)/V;pa>=T&&(n.lengths[ca]=pa,oa=P,ca++)}n.coords.length>oa&&(n.coords.length=oa);n.lengths.length>ca&&(n.lengths.length=ca);return n.coords.length&&
n.lengths.length?n:null};k.removeZMValues=function(n,J,T,V,ia,fa){const K=t(T,V);T=q(T,V,ia,fa);V=J.coords;n.coords.length=0;n.lengths.length=0;n.lengths.push(...J.lengths);for(J=0;J<V.length;J+=K)T(n.coords,V,n.coords.length,J,V[J],V[J+1]);return n};k.unquantizeOptimizedFeatureSet=function(n){const {transform:J,features:T,hasM:V,hasZ:ia}=n;if(!J)return n;for(const fa of T)X.isSome(fa.geometry)&&la(fa.geometry,fa.geometry,V,ia,J),fa.centroid&&la(fa.centroid,fa.centroid,V,ia,J);n.transform=null;return n};
k.unquantizeOptimizedGeometry=la;k.unquantizeX=O;k.unquantizeY=u;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(k,d,Y){let X=function(){function D(z=null,w={},t,q){this.geometry=z;this.attributes=w;this.centroid=t;this.objectId=q;this.geohashY=this.geohashX=this.displayId=0}D.prototype.weakClone=function(){const z=new D(this.geometry,this.attributes,this.centroid,
this.objectId);z.displayId=this.displayId;z.geohashX=this.geohashX;z.geohashY=this.geohashY;return z};return D}(),r=function(D){function z(){return D.apply(this,arguments)||this}d._inheritsLoose(z,D);return z}(X);k.OptimizedFeatureWithGeometry=r;k.default=X;k.hasGeometry=function(D){return!(Y.isNone(D.geometry)||!D.geometry.coords||!D.geometry.coords.length)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function k(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}k.prototype.weakClone=function(){const d=new k;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;
d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;return d};return k}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function d(X=
[],r=[],D=!1){this.lengths=null!=X?X:[];this.coords=null!=r?r:[];this.hasIndeterminateRingOrder=D}var Y=d.prototype;Y.forEachVertex=function(X){let r=0;this.lengths.length||X(this.coords[0],this.coords[1]);for(let D=0;D<this.lengths.length;D++){const z=this.lengths[D];for(let w=0;w<z;w++)X(this.coords[2*(w+r)],this.coords[2*(w+r)+1]);r+=z}};Y.clone=function(X){return X?(X.set(this.coords),new d(this.lengths.slice(),X,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};k._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((X,r)=>X+r)}}]);return d}()})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(k){k.findLastObjectIdFromFeatures=function(d,Y){let X=0;for(const D of Y){var r;Y=null==(r=D.attributes)?void 0:r[d];"number"===typeof Y&&isFinite(Y)&&(X=Math.max(X,
Y))}return X};k.initialObjectId=1;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(k,d,Y,X,r,D,z,w,t,q){return function(){function H(O){this.geometryInfo=
O;this._boundsStore=new t.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new Y;this.featureAdapter=q.optimizedFeatureQueryEngineAdapter}var N=H.prototype;N.add=function(O){this._add(O);this._emitChanged()};N.addMany=function(O){for(const u of O)this._add(u);this._emitChanged()};N.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};N.removeById=function(O){O=this._featuresById.get(O);if(!O)return null;this._remove(O);this._emitChanged();
return O};N.removeManyById=function(O){this._boundsStore.invalidateIndex();for(const u of O)(O=this._featuresById.get(u))&&this._remove(O);this._emitChanged()};N.forEachBounds=function(O,u,B){for(const b of O)(O=this._boundsStore.get(b.objectId))&&u(D.fromRect(B,O))};N.getFeature=function(O){return this._featuresById.get(O)};N.has=function(O){return this._featuresById.has(O)};N.forEach=function(O){this._featuresById.forEach(u=>O(u))};N.forEachInBounds=function(O,u){this._boundsStore.forEachInBounds(O,
B=>{u(this._featuresById.get(B))})};N.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};N.sweep=function(){let O=!1;this._featuresById.forEach((u,B)=>{this._markedIds.has(B)||(O=!0,this._remove(u))});this._markedIds.clear();O&&this._emitChanged()};N._emitChanged=function(){this.events.emit("changed",void 0)};N._add=function(O){if(O){var u=O.objectId;if(null==u)X.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature",
"feature id is missing",{feature:O}));else{var B=this._featuresById.get(u);this._markedIds.add(u);if(B){O.displayId=B.displayId;var b=this._boundsStore.get(u);this._boundsStore.delete(u)}else if(r.isSome(this.onFeatureAdd))this.onFeatureAdd(O);!r.isNone(O.geometry)&&O.geometry.coords&&O.geometry.coords.length?(b=w.getBoundsOptimizedGeometry(r.isSome(b)?b:z.create(),O.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),r.isSome(b)&&this._boundsStore.set(u,b)):this._boundsStore.set(u,null);this._featuresById.set(u,
O)}}};N._remove=function(O){if(r.isSome(this.onFeatureRemove))this.onFeatureRemove(O);this._markedIds.delete(O.objectId);this._boundsStore.delete(O.objectId);this._featuresById.delete(O.objectId);return O};k._createClass(H,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const O=z.create(z.NEGATIVE_INFINITY);this._featuresById.forEach(u=>{if(u=this._boundsStore.get(u.objectId))O[0]=Math.min(u[0],O[0]),O[1]=Math.min(u[1],O[1]),O[2]=Math.max(u[2],O[2]),O[3]=Math.max(u[3],O[3])});return O}},{key:"storeStatistics",get:function(){let O=0;this._featuresById.forEach(u=>{r.isSome(u.geometry)&&u.geometry.coords&&(O+=u.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:O/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return H}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,d,Y,X,r){let D=function(){function z(){this._emitter=new z.EventEmitter(this)}var w=z.prototype;w.emit=function(t,q){return this._emitter.emit(t,q)};w.on=function(t,q){return this._emitter.on(t,q)};w.once=function(t,q){return this._emitter.once(t,q)};w.hasEventListener=function(t){return this._emitter.hasEventListener(t)};
return z}();(function(z){let w=function(){function q(N=null){this.target=N;this._listenersMap=null}var H=q.prototype;H.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};H.emit=function(N,O){N=this._listenersMap&&this._listenersMap.get(N);if(!N)return!1;const u=this.target||this;[...N].forEach(B=>{B.call(u,O)});return 0<N.length};H.on=function(N,O){if(Array.isArray(N)){var u=N.map(B=>this.on(B,O));return X.handlesGroup(u)}if(-1<N.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);u=this._listenersMap.get(N)||[];u.push(O);this._listenersMap.set(N,u);return{remove:()=>{const B=this._listenersMap&&this._listenersMap.get(N)||[],b=B.indexOf(O);0<=b&&B.splice(b,1)}}};H.once=function(N,O){const u=this.on(N,B=>{u.remove();O.call(null,B)});return u};H.hasEventListener=function(N){N=this._listenersMap&&this._listenersMap.get(N);return null!=N&&0<N.length};return q}();z.EventEmitter=w;z.EventedMixin=q=>{q=function(H){function N(){var u=
H.apply(this,arguments)||this;u._emitter=new w;return u}k._inheritsLoose(N,H);var O=N.prototype;O.destroy=function(){this._emitter.clear()};O.emit=function(u,B){return this._emitter.emit(u,B)};O.on=function(u,B){return this._emitter.on(u,B)};O.once=function(u,B){return this._emitter.once(u,B)};O.hasEventListener=function(u){return this._emitter.hasEventListener(u)};return N}(q);return q=d.__decorate([r.subclass("esri.core.Evented")],q)};let t=function(q){function H(){var O=q.apply(this,arguments)||
this;O._emitter=new D.EventEmitter(k._assertThisInitialized(O));return O}k._inheritsLoose(H,q);var N=H.prototype;N.destroy=function(){this._emitter.clear()};N.emit=function(O,u){return this._emitter.emit(O,u)};N.on=function(O,u){return this._emitter.on(O,u)};N.once=function(O,u){return this._emitter.once(O,u)};N.hasEventListener=function(O){return this._emitter.hasEventListener(O)};return H}(Y);t=d.__decorate([r.subclass("esri.core.Evented")],t);z.EventedAccessor=t})(D||(D={}));return D})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(k,d,Y,X){function r(b=u){return[b[0],b[1],b[2],b[3],b[4],b[5]]}function D(b,f,m,F,l,C,y=r()){y[0]=b;y[1]=f;y[2]=m;y[3]=F;y[4]=l;y[5]=C;return y}function z(b){return b[0]>=b[3]?0:b[3]-b[0]}function w(b){return b[1]>=b[4]?0:b[4]-b[1]}function t(b){return b[2]>=b[5]?0:b[5]-b[2]}function q(b,f){return Math.max(f[0],b[0])<=Math.min(f[3],b[3])&&Math.max(f[1],b[1])<=Math.min(f[4],b[4])&&Math.max(f[2],b[2])<=Math.min(f[5],b[5])}function H(b,f){b[0]=
f[0];b[1]=f[1];b[2]=f[2];b[3]=f[3];b[4]=f[4];b[5]=f[5];return b}function N(b){return 6===b.length}const O=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],u=[0,0,0,0,0,0],B=r();k.NEGATIVE_INFINITY=O;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=u;k.allFinite=function(b){for(let f=0;6>f;f++)if(!isFinite(b[f]))return!1;return!0};k.center=function(b,f=[0,0,0]){f[0]=b[0]+z(b)/2;f[1]=b[1]+w(b)/2;f[2]=b[2]+t(b)/2;return f};k.contains=function(b,f){return f[0]>=
b[0]&&f[1]>=b[1]&&f[2]>=b[2]&&f[3]<=b[3]&&f[4]<=b[4]&&f[5]<=b[5]};k.containsPoint=function(b,f){return f[0]>=b[0]&&f[1]>=b[1]&&f[2]>=b[2]&&f[0]<=b[3]&&f[1]<=b[4]&&f[2]<=b[5]};k.containsPointWithMargin=function(b,f,m){return f[0]>=b[0]-m&&f[1]>=b[1]-m&&f[2]>=b[2]-m&&f[0]<=b[3]+m&&f[1]<=b[4]+m&&f[2]<=b[5]+m};k.create=r;k.depth=w;k.diameter=function(b){const f=z(b),m=t(b);b=w(b);return Math.sqrt(f*f+m*m+b*b)};k.empty=function(b){return b?H(b,O):r(O)};k.equals=function(b,f,m){if(d.isNone(b)||d.isNone(f))return b===
f;if(!N(b)||!N(f))return!1;if(m)for(let F=0;F<b.length;F++){if(!m(b[F],f[F]))return!1}else for(m=0;m<b.length;m++)if(b[m]!==f[m])return!1;return!0};k.expandWithAABB=function(b,f){b[0]=Math.min(b[0],f[0]);b[1]=Math.min(b[1],f[1]);b[2]=Math.min(b[2],f[2]);b[3]=Math.max(b[3],f[3]);b[4]=Math.max(b[4],f[4]);b[5]=Math.max(b[5],f[5])};k.expandWithBuffer=function(b,f,m=0,F=f.length/3){let l=b[0],C=b[1],y=b[2],I=b[3],Q=b[4],R=b[5];for(let da=0;da<F;da++)l=Math.min(l,f[m+3*da]),C=Math.min(C,f[m+3*da+1]),y=
Math.min(y,f[m+3*da+2]),I=Math.max(I,f[m+3*da]),Q=Math.max(Q,f[m+3*da+1]),R=Math.max(R,f[m+3*da+2]);b[0]=l;b[1]=C;b[2]=y;b[3]=I;b[4]=Q;b[5]=R};k.expandWithNestedArray=function(b,f,m){const F=f.length;let l=b[0],C=b[1],y=b[2],I=b[3],Q=b[4],R=b[5];if(m)for(m=0;m<F;m++){var da=f[m];l=Math.min(l,da[0]);C=Math.min(C,da[1]);y=Math.min(y,da[2]);I=Math.max(I,da[0]);Q=Math.max(Q,da[1]);R=Math.max(R,da[2])}else for(m=0;m<F;m++)da=f[m],l=Math.min(l,da[0]),C=Math.min(C,da[1]),I=Math.max(I,da[0]),Q=Math.max(Q,
da[1]);b[0]=l;b[1]=C;b[2]=y;b[3]=I;b[4]=Q;b[5]=R};k.expandWithOffset=function(b,f,m,F){b[0]=Math.min(b[0],b[0]+f);b[3]=Math.max(b[3],b[3]+f);b[1]=Math.min(b[1],b[1]+m);b[4]=Math.max(b[4],b[4]+m);b[2]=Math.min(b[2],b[2]+F);b[5]=Math.max(b[5],b[5]+F)};k.expandWithRect=function(b,f){b[0]=Math.min(b[0],f[0]);b[1]=Math.min(b[1],f[1]);b[3]=Math.max(b[3],f[2]);b[4]=Math.max(b[4],f[3])};k.expandWithVec3=function(b,f){b[0]=Math.min(b[0],f[0]);b[1]=Math.min(b[1],f[1]);b[2]=Math.min(b[2],f[2]);b[3]=Math.max(b[3],
f[0]);b[4]=Math.max(b[4],f[1]);b[5]=Math.max(b[5],f[2])};k.fromExtent=function(b,f=r()){f[0]=b.xmin;f[1]=b.ymin;f[2]=b.zmin;f[3]=b.xmax;f[4]=b.ymax;f[5]=b.zmax;return f};k.fromMinMax=function(b,f,m=r()){m[0]=b[0];m[1]=b[1];m[2]=b[2];m[3]=f[0];m[4]=f[1];m[5]=f[2];return m};k.fromRect=function(b,f){b[0]=f[0];b[1]=f[1];b[2]=Number.NEGATIVE_INFINITY;b[3]=f[2];b[4]=f[3];b[5]=Number.POSITIVE_INFINITY;return b};k.fromValues=D;k.getMax=function(b,f){f[0]=b[3];f[1]=b[4];f[2]=b[5];return f};k.getMin=function(b,
f){f[0]=b[0];f[1]=b[1];f[2]=b[2];return f};k.height=t;k.intersects=q;k.intersectsClippingArea=function(b,f){return d.isNone(f)?!0:q(b,f)};k.is=N;k.isPoint=function(b){return 0===z(b)&&0===w(b)&&0===t(b)};k.maximumDimension=function(b){return Math.max(z(b),t(b),w(b))};k.offset=function(b,f,m,F,l=b){l[0]=b[0]+f;l[1]=b[1]+m;l[2]=b[2]+F;l[3]=b[3]+f;l[4]=b[4]+m;l[5]=b[5]+F;return l};k.scale=function(b,f,m=b){const F=b[0]+z(b)/2,l=b[1]+w(b)/2,C=b[2]+t(b)/2;m[0]=F+(b[0]-F)*f;m[1]=l+(b[1]-l)*f;m[2]=C+(b[2]-
C)*f;m[3]=F+(b[3]-F)*f;m[4]=l+(b[4]-l)*f;m[5]=C+(b[5]-C)*f;return m};k.set=H;k.setMax=function(b,f,m=b){m[3]=f[0];m[4]=f[1];m[5]=f[2];m!==b&&(m[0]=b[0],m[1]=b[1],m[2]=b[2]);return b};k.setMin=function(b,f,m=b){m[0]=f[0];m[1]=f[1];m[2]=f[2];m!==b&&(m[3]=b[3],m[4]=b[4],m[5]=b[5]);return m};k.size=function(b,f=[0,0,0]){f[0]=z(b);f[1]=w(b);f[2]=t(b);return f};k.toExtent=function(b,f){return isFinite(b[2])||isFinite(b[5])?new Y({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],zmin:b[2],zmax:b[5],spatialReference:f}):
new Y({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],spatialReference:f})};k.toRect=function(b,f){f||(f=X.create());f[0]=b[0];f[1]=b[1];f[2]=b[3];f[3]=b[4];return f};k.width=z;k.wrap=function(b,f,m,F,l,C){return D(b,f,m,F,l,C,B)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(k,d,Y,X,r){function D(u=O){return[u[0],u[1],u[2],u[3]]}function z(u,B){u!==B&&
(u[0]=B[0],u[1]=B[1],u[2]=B[2],u[3]=B[3]);return u}function w(u){return X.isNone(u)||u[0]>=u[2]?0:u[2]-u[0]}function t(u){return u[1]>=u[3]?0:u[3]-u[1]}function q(u,B,b){return B>=u[0]&&b>=u[1]&&B<=u[2]&&b<=u[3]}function H(u){return null!=u&&4===u.length}const N=[Infinity,Infinity,-Infinity,-Infinity],O=[0,0,0,0];k.NEGATIVE_INFINITY=N;k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=O;k.allFinite=function(u){for(let B=0;4>B;B++)if(!isFinite(u[B]))return!1;return!0};
k.area=function(u){return w(u)*t(u)};k.center=function(u,B=[0,0]){B[0]=(u[0]+u[2])/2;B[1]=(u[1]+u[3])/2;return B};k.clone=function(u){return[u[0],u[1],u[2],u[3]]};k.contains=function(u,B){return B[0]>=u[0]&&B[2]<=u[2]&&B[1]>=u[1]&&B[3]<=u[3]};k.containsPoint=function(u,B){return q(u,B[0],B[1])};k.containsPointObject=function(u,B){return q(u,B.x,B.y)};k.containsPointWithMargin=function(u,B,b){return B[0]>=u[0]-b&&B[1]>=u[1]-b&&B[0]<=u[2]+b&&B[1]<=u[3]+b};k.containsXY=q;k.copy=z;k.create=D;k.distance=
function(u,B){const b=(u[1]+u[3])/2,f=Math.max(Math.abs(B[0]-(u[0]+u[2])/2)-w(u)/2,0);u=Math.max(Math.abs(B[1]-b)-t(u)/2,0);return Math.sqrt(f*f+u*u)};k.empty=function(u){return u?z(u,N):D(N)};k.equals=function(u,B){return H(u)&&H(B)?u[0]===B[0]&&u[1]===B[1]&&u[2]===B[2]&&u[3]===B[3]:u===B};k.expand=function(u,B,b){if(X.isNone(B))z(b,u);else if("length"in B)if(H(B))b[0]=Math.min(u[0],B[0]),b[1]=Math.min(u[1],B[1]),b[2]=Math.max(u[2],B[2]),b[3]=Math.max(u[3],B[3]);else{if(2===B.length||3===B.length)b[0]=
Math.min(u[0],B[0]),b[1]=Math.min(u[1],B[1]),b[2]=Math.max(u[2],B[0]),b[3]=Math.max(u[3],B[1])}else switch(B.type){case "extent":b[0]=Math.min(u[0],B.xmin);b[1]=Math.min(u[1],B.ymin);b[2]=Math.max(u[2],B.xmax);b[3]=Math.max(u[3],B.ymax);break;case "point":b[0]=Math.min(u[0],B.x),b[1]=Math.min(u[1],B.y),b[2]=Math.max(u[2],B.x),b[3]=Math.max(u[3],B.y)}};k.expandPointInPlace=function(u,B){B[0]<u[0]&&(u[0]=B[0]);B[0]>u[2]&&(u[2]=B[0]);B[1]<u[1]&&(u[1]=B[1]);B[1]>u[3]&&(u[3]=B[1])};k.expandWithNestedArray=
function(u,B,b=u){const f=B.length;let m=u[0],F=u[1],l=u[2];u=u[3];for(let C=0;C<f;C++){const y=B[C];m=Math.min(m,y[0]);F=Math.min(F,y[1]);l=Math.max(l,y[0]);u=Math.max(u,y[1])}b[0]=m;b[1]=F;b[2]=l;b[3]=u;return b};k.fromExtent=function(u,B=D()){B[0]=u.xmin;B[1]=u.ymin;B[2]=u.xmax;B[3]=u.ymax;return B};k.fromValues=function(u,B,b,f,m=D()){m[0]=u;m[1]=B;m[2]=b;m[3]=f;return m};k.height=t;k.intersection=function(u,B,b){if(X.isNone(B))return z(b,u);const f=B[0],m=B[1],F=B[2];B=B[3];b[0]=Y.clamp(u[0],
f,F);b[1]=Y.clamp(u[1],m,B);b[2]=Y.clamp(u[2],f,F);b[3]=Y.clamp(u[3],m,B);return b};k.intersects=function(u,B){return Math.max(B[0],u[0])<=Math.min(B[2],u[2])&&Math.max(B[1],u[1])<=Math.min(B[3],u[3])};k.intersectsSphere=function(u,B){const b=B[3];var f=Math.abs(B[0]-.5*(u[0]+u[2]));const m=.5*(u[2]-u[0]);if(f>b+m)return!1;var F=.5*(u[3]-u[1]);u=Math.abs(B[1]-.5*(u[1]+u[3]));if(u>b+F)return!1;if(f<m||u<F)return!0;f-=m;F=u-F;return f*f+F*F<=b*b};k.is=H;k.isPoint=function(u){return(0===w(u)||!isFinite(u[0]))&&
(0===t(u)||!isFinite(u[1]))};k.offset=function(u,B,b,f=u){f[0]=u[0]+B;f[1]=u[1]+b;f[2]=u[2]+B;f[3]=u[3]+b;return f};k.pad=function(u,B,b=u){b[0]=u[0]-B;b[1]=u[1]-B;b[2]=u[2]+B;b[3]=u[3]+B;return b};k.setMax=function(u,B,b=u){b[2]=B[0];b[3]=B[1];b!==u&&(b[0]=u[0],b[1]=u[1]);return u};k.setMin=function(u,B,b=u){b[0]=B[0];b[1]=B[1];b!==u&&(b[2]=u[2],b[3]=u[3]);return b};k.size=function(u,B){B[0]=u[2]-u[0];B[1]=u[3]-u[1]};k.toExtent=function(u,B){return new r({xmin:u[0],ymin:u[1],xmax:u[2],ymax:u[3],
spatialReference:B})};k.width=w;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(k,d,Y){function X(z,w,t){r.minX=w[0];r.minY=w[1];r.maxX=w[2];r.maxY=w[3];z.search(r,t)}const r={minX:0,minY:0,maxX:0,maxY:0};let D=function(){function z(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Y.PooledRBush(9,
d("esri-csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const t=Array(this._idByBounds.size);let q=0;this._idByBounds.forEach((H,N)=>{t[q++]=N});this._indexInvalid=!1;this._index.clear();this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(t=>this._idByBounds.has(t))),this._boundsToLoad.length=0)}}var w=z.prototype;w.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=
0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};w.delete=function(t){const q=this._boundsById.get(t);this._boundsById.delete(t);q&&(this._idByBounds.delete(q),this._indexInvalid||this._index.remove(q))};w.forEachInBounds=function(t,q){this._loadIndex();X(this._index,t,H=>q(this._idByBounds.get(H)))};w.get=function(t){return this._boundsById.get(t)};w.has=function(t){return this._boundsById.has(t)};w.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=
0)};w.set=function(t,q){if(!this._indexInvalid){const H=this._boundsById.get(t);H&&(this._index.remove(H),this._idByBounds.delete(H))}this._boundsById.set(t,q);q&&(this._idByBounds.set(q,t),this._indexInvalid||(this._boundsToLoad.push(q),5E4<this._boundsToLoad.length&&this._loadIndex()))};return z}();k.BoundsStore=D;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(k,d,Y,X,r,D){function z(R,da){w(R,0,R.children.length,da,R)}function w(R,da,L,G,U){U||(U=new I([]));U.minX=Infinity;U.minY=Infinity;U.maxX=-Infinity;U.maxY=-Infinity;for(let M=da,x;M<L;M++)x=R.children[M],t(U,R.leaf?G(x):x);return U}function t(R,da){R.minX=Math.min(R.minX,da.minX);R.minY=Math.min(R.minY,da.minY);R.maxX=Math.max(R.maxX,da.maxX);R.maxY=Math.max(R.maxY,da.maxY)}function q(R,da){return R.minX-da.minX}function H(R,da){return R.minY-da.minY}function N(R){return(R.maxX-R.minX)*
(R.maxY-R.minY)}function O(R){return R.maxX-R.minX+(R.maxY-R.minY)}function u(R,da){return R.minX<=da.minX&&R.minY<=da.minY&&da.maxX<=R.maxX&&da.maxY<=R.maxY}function B(R,da){return da.minX<=R.maxX&&da.minY<=R.maxY&&da.maxX>=R.minX&&da.maxY>=R.minY}function b(R,da,L,G,U){for(da=[da,L];da.length;){L=X.assumeNonNull(da.pop());const M=X.assumeNonNull(da.pop());if(L-M<=G)continue;const x=M+Math.ceil((L-M)/G/2)*G;D.quickselect(R,x,M,L,U);da.push(M,x,x,L)}}let f=function(){function R(L=9,G){this.compareMinX=
q;this.compareMinY=H;this.toBBox=function(U){return U};this._maxEntries=Math.max(4,L||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));G&&("function"===typeof G?this.toBBox=G:this._initFormat(G));this.clear()}var da=R.prototype;da.destroy=function(){this.clear();m.prune();F.prune();l.prune();C.prune()};da.all=function(L){this._all(this.data,L)};da.search=function(L,G){let U=this.data;const M=this.toBBox;if(B(L,U))for(m.clear();U;){for(let x=0,e=U.children.length;x<e;x++){const g=U.children[x],
A=U.leaf?M(g):g;B(L,A)&&(U.leaf?G(g):u(L,A)?this._all(g,G):m.push(g))}U=m.pop()}};da.collides=function(L){let G=this.data;const U=this.toBBox;if(!B(L,G))return!1;for(m.clear();G;){for(let M=0,x=G.children.length;M<x;M++){const e=G.children[M],g=G.leaf?U(e):e;if(B(L,g)){if(G.leaf||u(L,g))return!0;m.push(e)}}G=m.pop()}return!1};da.load=function(L){if(!L.length)return this;if(L.length<this._minEntries){for(let G=0,U=L.length;G<U;G++)this.insert(L[G]);return this}L=this._build(L.slice(0,L.length),0,L.length-
1,0);if(this.data.children.length)if(this.data.height===L.height)this._splitRoot(this.data,L);else{if(this.data.height<L.height){const G=this.data;this.data=L;L=G}this._insert(L,this.data.height-L.height-1,!0)}else this.data=L;return this};da.insert=function(L){L&&this._insert(L,this.data.height-1);return this};da.clear=function(){this.data=new I([]);return this};da.remove=function(L){if(!L)return this;let G=this.data,U=null,M=0,x=!1,e;const g=this.toBBox(L);l.clear();for(C.clear();G||0<l.length;){if(!G){var A;
G=X.assumeNonNull(l.pop());U=l.data[l.length-1];M=null!=(A=C.pop())?A:0;x=!0}if(G.leaf&&(e=Y.indexOf(G.children,L,G.children.length,G.indexHint),-1!==e)){G.children.splice(e,1);l.push(G);this._condense(l);break}x||G.leaf||!u(G,g)?U?(M++,G=U.children[M],x=!1):G=null:(l.push(G),C.push(M),M=0,U=G,G=G.children[0])}return this};da.toJSON=function(){return this.data};da.fromJSON=function(L){this.data=L;return this};da._all=function(L,G){for(F.clear();L;){var U;if(!0===L.leaf)for(const M of L.children)G(M);
else F.pushArray(L.children);L=null!=(U=F.pop())?U:null}};da._build=function(L,G,U,M){var x=U-G+1,e=this._maxEntries;if(x<=e)return L=new I(L.slice(G,U+1)),z(L,this.toBBox),L;M||(M=Math.ceil(Math.log(x)/Math.log(e)),e=Math.ceil(x/e**(M-1)));const g=new Q([]);g.height=M;x=Math.ceil(x/e);e=x*Math.ceil(Math.sqrt(e));for(b(L,G,U,e,this.compareMinX);G<=U;G+=e){const A=Math.min(G+e-1,U);b(L,G,A,x,this.compareMinY);for(let S=G;S<=A;S+=x)g.children.push(this._build(L,S,Math.min(S+x-1,A),M-1))}z(g,this.toBBox);
return g};da._chooseSubtree=function(L,G,U,M){for(;;){M.push(G);if(!0===G.leaf||M.length-1===U)break;let x=Infinity,e=Infinity,g=void 0;for(let A=0,S=G.children.length;A<S;A++){const aa=G.children[A],ja=N(aa),na=(Math.max(aa.maxX,L.maxX)-Math.min(aa.minX,L.minX))*(Math.max(aa.maxY,L.maxY)-Math.min(aa.minY,L.minY))-ja;na<e?(e=na,x=ja<x?ja:x,g=aa):na===e&&ja<x&&(x=ja,g=aa)}G=g||G.children[0]}return G};da._insert=function(L,G,U){var M=this.toBBox;U=U?L:M(L);l.clear();M=this._chooseSubtree(U,this.data,
G,l);M.children.push(L);for(t(M,U);0<=G;)if(l.data[G].children.length>this._maxEntries)this._split(l,G),G--;else break;this._adjustParentBBoxes(U,l,G)};da._split=function(L,G){const U=L.data[G];var M=U.children.length;const x=this._minEntries;this._chooseSplitAxis(U,x,M);(M=this._chooseSplitIndex(U,x,M))?(M=U.children.splice(M,U.children.length-M),M=U.leaf?new I(M):new Q(M),M.height=U.height,z(U,this.toBBox),z(M,this.toBBox),G?L.data[G-1].children.push(M):this._splitRoot(U,M)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};
da._splitRoot=function(L,G){this.data=new Q([L,G]);this.data.height=L.height+1;z(this.data,this.toBBox)};da._chooseSplitIndex=function(L,G,U){let M,x,e=void 0;M=x=Infinity;for(let A=G;A<=U-G;A++){var g=w(L,0,A,this.toBBox);const S=w(L,A,U,this.toBBox),aa=Math.max(0,Math.min(g.maxX,S.maxX)-Math.max(g.minX,S.minX))*Math.max(0,Math.min(g.maxY,S.maxY)-Math.max(g.minY,S.minY));g=N(g)+N(S);aa<M?(M=aa,e=A,x=g<x?g:x):aa===M&&g<x&&(x=g,e=A)}return e};da._chooseSplitAxis=function(L,G,U){const M=L.leaf?this.compareMinX:
q,x=L.leaf?this.compareMinY:H,e=this._allDistMargin(L,G,U,M);G=this._allDistMargin(L,G,U,x);e<G&&L.children.sort(M)};da._allDistMargin=function(L,G,U,M){L.children.sort(M);M=this.toBBox;var x=w(L,0,G,M);const e=w(L,U-G,U,M);let g=O(x)+O(e);for(let A=G;A<U-G;A++){const S=L.children[A];t(x,L.leaf?M(S):S);g+=O(x)}for(U=U-G-1;U>=G;U--)x=L.children[U],t(e,L.leaf?M(x):x),g+=O(e);return g};da._adjustParentBBoxes=function(L,G,U){for(;0<=U;U--)t(G.data[U],L)};da._condense=function(L){for(let G=L.length-1;0<=
G;G--){const U=L.data[G];if(0===U.children.length)if(0<G){const M=L.data[G-1],x=M.children;x.splice(Y.indexOf(x,U,x.length,M.indexHint),1)}else this.clear();else z(U,this.toBBox)}};da._initFormat=function(L){const G=["return a"," - b",";"];this.compareMinX=new Function("a","b",G.join(L[0]));this.compareMinY=new Function("a","b",G.join(L[1]));this.toBBox=new Function("a","return {minX: a"+L[0]+", minY: a"+L[1]+", maxX: a"+L[2]+", maxY: a"+L[3]+"};")};return R}();const m=new r,F=new r,l=new r,C=new r({deallocator:void 0});
r=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let y=function(R){function da(){var L=R.apply(this,arguments)||this;L.height=1;L.indexHint=new Y.PositionHint;return L}d._inheritsLoose(da,R);return da}(r),I=function(R){function da(L){var G=R.call(this)||this;G.children=L;G.leaf=!0;return G}d._inheritsLoose(da,R);return da}(y),Q=function(R){function da(L){var G=R.call(this)||this;G.children=L;G.leaf=!1;return G}d._inheritsLoose(da,R);return da}(y);k.BBox=r;k.PooledRBush=f;k.default=
f;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(k){var d={exports:{}};(function(Y){(function(X){X=X();void 0!==X&&(Y.exports=X)})(function(){function X(z,w,t,q,H){for(;q>t;){if(600<q-t){var N=q-t+1,O=w-t+1,u=Math.log(N),B=.5*Math.exp(2*u/3);u=.5*Math.sqrt(u*B*(N-B)/N)*(0>O-N/2?-1:1);X(z,w,Math.max(t,Math.floor(w-O*B/N+u)),Math.min(q,Math.floor(w+(N-O)*B/N+u)),H)}N=z[w];O=t;B=q;r(z,t,w);for(0<H(z[q],N)&&r(z,t,q);O<B;){r(z,O,B);
O++;for(B--;0>H(z[O],N);)O++;for(;0<H(z[B],N);)B--}0===H(z[t],N)?r(z,t,B):(B++,r(z,B,q));B<=w&&(t=B+1);w<=B&&(q=B-1)}}function r(z,w,t){var q=z[w];z[w]=z[t];z[t]=q}function D(z,w){return z<w?-1:z>w?1:0}return function(z,w,t,q,H){X(z,w,t||0,q||z.length-1,H||D)}})})(d);k.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(k,d,Y,X){const r={getObjectId(D){return D.objectId},
getAttributes(D){return D.attributes},getAttribute(D,z){return D.attributes[z]},cloneWithGeometry(D,z){return new Y.default(z,D.attributes,null,D.objectId)},getGeometry(D){return D.geometry},getCentroid(D,z){D.centroid||(D.centroid=d.getCentroidOptimizedGeometry(new X,D.geometry,z.hasZ,z.hasM));return D.centroid}};k.default=r;k.optimizedFeatureQueryEngineAdapter=r;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(k,
d){function Y(r,D,z,w,t,q,H=1){q=t?q?4:3:q?3:2;let N=z,O=z+q,u=0,B=0,b=z=0,f=0;for(let m=0,F=w-1;m<F;m++,N+=q,O+=q){w=D[N];const l=D[N+1],C=D[N+2],y=D[O],I=D[O+1],Q=D[O+2];let R=w*I-y*l;b+=R;u+=(w+y)*R;B+=(l+I)*R;t&&(R=w*Q-y*C,z+=(C+Q)*R,f+=R);w<r[0]&&(r[0]=w);w>r[1]&&(r[1]=w);l<r[2]&&(r[2]=l);l>r[3]&&(r[3]=l);t&&(C<r[4]&&(r[4]=C),C>r[5]&&(r[5]=C))}0<b*H&&(b*=-1);0<f*H&&(f*=-1);if(!b)return null;r=[u,B,.5*b];t&&(r[3]=z,r[4]=.5*f);return r}function X(r,D,z,w,t){t=w?t?4:3:t?3:2;let q=D,H=D+t,N=0,O=
0,u=0,B=0;for(let F=0,l=z-1;F<l;F++,q+=t,H+=t){var b=r[q];const C=r[q+1],y=r[q+2],I=r[H],Q=r[H+1],R=r[H+2];if(w){{var f=I-b;var m=Q-C;const da=R-y;f=Math.sqrt(f*f+m*m+da*da)}}else f=I-b,m=Q-C,f=Math.sqrt(f*f+m*m);f&&(N+=f,w?(b=[b+.5*(I-b),C+.5*(Q-C),y+.5*(R-y)],O+=f*b[0],u+=f*b[1],B+=f*b[2]):(b=[b+.5*(I-b),C+.5*(Q-C)],O+=f*b[0],u+=f*b[1]))}return 0<N?w?[O/N,u/N,B/N]:[O/N,u/N]:0<z?w?[r[D],r[D+1],r[D+2]]:[r[D],r[D+1]]:null}k.getCentroidOptimizedGeometry=function(r,D,z,w,t){if(d.isNone(D)||!D.lengths.length)return null;
const q="upperLeft"===(null==t?void 0:t.originPosition)?-1:1;r.lengths.length&&(r.lengths.length=0);r.coords.length&&(r.coords.length=0);t=r.coords;const H=[],N=z?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:O,coords:u}=D,B=z?w?4:3:w?3:2;let b=0;for(var f of O){const m=Y(N,u,b,f,z,w,
q);m&&H.push(m);b+=f*B}H.sort((m,F)=>{let l=q*m[2]-q*F[2];0===l&&z&&(l=m[4]-F[4]);return l});H.length&&(f=6*H[0][2],t[0]=H[0][0]/f,t[1]=H[0][1]/f,z&&(f=6*H[0][4],t[2]=0!==f?H[0][3]/f:0),t[0]<N[0]||t[0]>N[1]||t[1]<N[2]||t[1]>N[3]||z&&(t[2]<N[4]||t[2]>N[5]))&&(t.length=0);if(!t.length)if(D=D.lengths[0]?X(u,0,O[0],z,w):null)t[0]=D[0],t[1]=D[1],z&&2<D.length&&(t[2]=D[2]);else return null;return r};k.lineCentroid=X;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(k,d,Y,X,r,D,z){function w(b,f){if(!f)return null;if("x"in f){var m={x:0,y:0};[m.x,m.y]=b(f.x,f.y,N);null!=f.z&&(m.z=f.z);null!=f.m&&(m.m=f.m);return m}if("xmin"in f)return m={xmin:0,ymin:0,xmax:0,ymax:0},[m.xmin,m.ymin]=b(f.xmin,f.ymin,N),[m.xmax,m.ymax]=b(f.xmax,f.ymax,N),f.hasZ&&(m.zmin=f.zmin,m.zmax=f.zmax,m.hasZ=!0),f.hasM&&(m.mmin=f.mmin,m.mmax=f.mmax,m.hasM=!0),m;if("rings"in f)return{rings:t(f.rings,b),hasM:f.hasM,hasZ:f.hasZ};if("paths"in f)return{paths:t(f.paths,b),hasM:f.hasM,hasZ:f.hasZ};
if("points"in f)return{points:q(f.points,b),hasM:f.hasM,hasZ:f.hasZ}}function t(b,f){const m=[];for(const F of b)m.push(q(F,f));return m}function q(b,f){const m=[];for(const F of b)b=f(F[0],F[1],[0,0]),m.push(b),2<F.length&&b.push(F[2]),3<F.length&&b.push(F[3]);return m}function H(){H=d._asyncToGenerator(function*(b,f){f&&(b=Array.isArray(b)?b.map(m=>Y.isSome(m.geometry)&&m.geometry.spatialReference):[b],yield X.initializeProjection(b.map(m=>({source:m,dest:f}))))});return H.apply(this,arguments)}
const N=[0,0],O=w.bind(null,z.lngLatToXY),u=w.bind(null,z.xyToLngLat),B=new (function(){function b(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var f=b.prototype;f.push=function(){var m=d._asyncToGenerator(function*(F,l,C){if(!(F&&F.length&&l&&C)||D.equals(l,C))return F;const y={geometries:F,inSpatialReference:l,outSpatialReference:C,resolve:null};this._jobs.push(y);return new Promise(I=>{y.resolve=I;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(F,
l,C){return m.apply(this,arguments)}}();f._process=function(){this._timer=null;const m=this._jobs.shift();if(m){var {geometries:F,inSpatialReference:l,outSpatialReference:C,resolve:y}=m;z.canProject(l,C)?D.isWebMercator(C)?y(F.map(O)):y(F.map(u)):y(X.projectMany(r.jsonAdapter,F,l,C,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return b}());k.checkProjectionSupport=function(b,f){return H.apply(this,arguments)};k.project=function(b,f,m){if(!b)return b;m||(m=f,f=b.spatialReference);
return D.isValid(f)&&D.isValid(m)&&!D.equals(f,m)?z.canProject(f,m)?D.isWebMercator(m)?O(b):u(b):X.projectMany(r.jsonAdapter,[b],f,m,null)[0]:b};k.projectMany=function(b,f,m){return B.push(b,f,m)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/zscale".split(" "),
function(k,d,Y,X,r,D,z,w,t,q,H,N,O,u,B,b,f,m,F,l,C,y,I,Q){function R(){return!!Ta&&u.isLoaded()}function da(ba){D.isNone(a)&&(a=Promise.all([u.load(),(new Promise((ha,Z)=>k(["../chunks/geometryEngineBase"],ha,Z))).then(ha=>ha.geometryEngineBase),new Promise((ha,Z)=>k(["./geometryAdapters/hydrated"],ha,Z))]));return a.then(([,ha,{hydratedAdapter:Z}])=>{z.throwIfAborted(ba);Va=Z;Ta=ha.default;Ta._enableProjection(u.pe)})}function L(ba,ha,Z=null){return Array.isArray(ba)?0===ba.length?[]:G(Va,ba,ba[0].spatialReference,
ha,Z):G(Va,[ba],ba.spatialReference,ha,Z)[0]}function G(ba,ha,Z,ka,xa=null){if(D.isNone(Z)||D.isNone(ka))return ha;if(M(Z,ka,xa))return ha.map(ya=>D.unwrap(e(ya,Z,ka)));if(D.isNone(xa)){const ya=y.cacheKey(Z,ka);void 0!==$a[ya]?xa=$a[ya]:(xa=U(Z,ka,null),D.isNone(xa)&&(xa=new y),$a[ya]=xa)}if(D.isNone(Ta))throw new Ra;return Ta._project(ba,ha,Z,ka,xa)}function U(ba,ha,Z=null){if(D.isNone(Ta))throw new Ra;if(D.isNone(ba)||D.isNone(ha))return null;ba=Ta._getTransformation(Va,ba,ha,Z,null==Z?void 0:
Z.spatialReference);return null!==ba?y.fromGE(ba):null}function M(ba,ha,Z){return Z?!1:I.equals(ba,ha)?!0:I.isValid(ba)&&I.isValid(ha)&&!!Pa(ba,ha,Cb)}function x(){x=Y._asyncToGenerator(function*(ba,ha,Z,ka){if(!R())if(Array.isArray(ba))for(const {source:xa,dest:ya,geographicTransformation:Ha}of ba){if(!M(xa,ya,Ha))return da(ka)}else if(!M(ba,ha,Z))return da(ka)});return x.apply(this,arguments)}function e(ba,ha,Z){return ba?"x"in ba?g(ba,ha,new B,Z,0):"xmin"in ba?ja(ba,ha,new N,Z,0):"rings"in ba?
aa(ba,ha,new b,Z,0):"paths"in ba?S(ba,ha,new f,Z,0):"points"in ba?A(ba,ha,new O,Z,0):null:null}function g(ba,ha,Z,ka,xa){Na[0]=ba.x;Na[1]=ba.y;const ya=ba.z;Na[2]=void 0!==ya?ya:xa;if(!la(Na,ha,0,Na,ka,0,1))return null;Z.x=Na[0];Z.y=Na[1];Z.spatialReference=ka;void 0===ya?(Z.z=void 0,Z.hasZ=!1):(Z.z=Na[2],Z.hasZ=!0);void 0===ba.m?(Z.m=void 0,Z.hasM=!1):(Z.m=ba.m,Z.hasM=!0);return Z}function A(ba,ha,Z,ka,xa){const {points:ya,hasZ:Ha,hasM:Ka}=ba;ba=[];const Xa=ya.length,Wa=[];for(var Ua of ya)Wa.push(Ua[0],
Ua[1],Ha?Ua[2]:xa);if(!la(Wa,ha,0,Wa,ka,0,Xa))return null;for(ha=0;ha<Xa;++ha){xa=3*ha;Ua=Wa[xa];const bb=Wa[xa+1];Ha&&Ka?ba.push([Ua,bb,Wa[xa+2],ya[ha][3]]):Ha?ba.push([Ua,bb,Wa[xa+2]]):Ka?ba.push([Ua,bb,ya[ha][2]]):ba.push([Ua,bb])}Z.points=ba;Z.spatialReference=ka;Z.hasZ=Ha;Z.hasM=Ka;return Z}function S(ba,ha,Z,ka,xa){const {paths:ya,hasZ:Ha,hasM:Ka}=ba;ba=[];if(!va(ya,Ha,Ka,ha,ba,ka,xa))return null;Z.paths=ba;Z.spatialReference=ka;Z.hasZ=Ha;Z.hasM=Ka;return Z}function aa(ba,ha,Z,ka,xa){const {rings:ya,
hasZ:Ha,hasM:Ka}=ba;ba=[];if(!va(ya,Ha,Ka,ha,ba,ka,xa))return null;Z.rings=ba;Z.spatialReference=ka;Z.hasZ=Ha;Z.hasM=Ka;return Z}function ja(ba,ha,Z,ka,xa){const {xmin:ya,ymin:Ha,xmax:Ka,ymax:Xa,hasZ:Wa,hasM:Ua}=ba;if(!na(ya,Ha,Wa?ba.zmin:xa,ha,Na,ka))return null;Z.xmin=Na[0];Z.ymin=Na[1];Wa&&(Z.zmin=Na[2]);if(!na(Ka,Xa,Wa?ba.zmax:xa,ha,Na,ka))return null;Z.xmax=Na[0];Z.ymax=Na[1];Wa&&(Z.zmax=Na[2]);Ua&&(Z.mmin=ba.mmin,Z.mmax=ba.mmax);Z.spatialReference=ka;return Z}function na(ba,ha,Z,ka,xa,ya){Qa[0]=
ba;Qa[1]=ha;Qa[2]=Z;return la(Qa,ka,0,xa,ya,0,1)}function ta(ba,ha,Z,ka){if(D.isNone(ha)||D.isNone(ka)||2>ba.length)return!1;2===ba.length&&(Qa[0]=ba[0],Qa[1]=ba[1],Qa[2]=0,ba=Qa);return la(ba,ha,0,Z,ka,0,1)}function ma(ba,ha,Z){if(D.isNone(ha))return!1;ha=Oa(ha,Ab);ha=jb[ha][6];if(D.isNone(ha))return!1;ha(ba,0,Qa,0);Z!==Qa&&(Z[0]=Qa[0],Z[1]=Qa[1],2<Z.length&&(Z[2]=Qa[2]));return!0}function la(ba,ha,Z,ka,xa,ya,Ha=1){ha=Pa(ha,xa,Cb);if(D.isNone(ha))return!1;if(ha===Ia){if(ba===ka&&Z===ya)return!0;
Ha=Z+3*Ha;for(let Ka=Z,Xa=ya;Ka<Ha;Ka++,Xa++)ka[Xa]=ba[Ka];return!0}Ha=Z+3*Ha;for(let Ka=Z,Xa=ya;Ka<Ha;Ka+=3,Xa+=3)ha(ba,Ka,ka,Xa);return!0}function va(ba,ha,Z,ka,xa,ya,Ha=0){const Ka=[];for(const Xa of ba)for(const Wa of Xa)Ka.push(Wa[0],Wa[1],ha?Wa[2]:Ha);if(!la(Ka,ka,0,Ka,ya,0,Ka.length/3))return!1;ka=0;xa.length=0;for(const Xa of ba){ba=[];for(const Wa of Xa)ha&&Z?ba.push([Ka[ka++],Ka[ka++],Ka[ka++],Wa[3]]):ha?ba.push([Ka[ka++],Ka[ka++],Ka[ka++]]):(Z?ba.push([Ka[ka++],Ka[ka++],Wa[2]]):ba.push([Ka[ka++],
Ka[ka++]]),ka++);xa.push(ba)}return!0}function Ja(ba,ha,Z,ka){ba=Math.abs(kb*ba)+Math.asin(Z/(ka+ha));return ba>=Math.PI/2?Number.MAX_VALUE:Z/Math.cos(ba)}function Ba(ba,ha,Z){const ka=Math.sin(ba);ba=Math.cos(ba);const xa=Math.sin(ha);ha=Math.cos(ha);Z[0]=-ka;Z[4]=-xa*ba;Z[8]=ha*ba;Z[12]=0;Z[1]=ba;Z[5]=-xa*ka;Z[9]=ha*ka;Z[13]=0;Z[2]=0;Z[6]=ha;Z[10]=xa;Z[14]=0;Z[3]=0;Z[7]=0;Z[11]=0;Z[15]=1;return Z}function Sa(ba,ha,Z){Ba(ba,ha,Z);t.transpose(Z,Z);return Z}function Oa(ba,ha){if(ha.spatialReference===
ba)return ha.spatialReferenceId;ha.spatialReference=ba;"metersPerUnit"in ha&&(ha.metersPerUnit=w.getMetersPerUnitForSR(ba,1));return ba.wkt===m.SphericalECEFSpatialReference.wkt?ha.spatialReferenceId=1:I.isWGS84(ba)?ha.spatialReferenceId=2:I.isWebMercator(ba)?ha.spatialReferenceId=3:I.isPlateCarree(ba)?ha.spatialReferenceId=12:ba.wkt===m.WGS84ECEFSpatialReference.wkt?ha.spatialReferenceId=4:4490===ba.wkid?ha.spatialReferenceId=5:ba.wkt===m.SphericalPCPFMars.wkt?ha.spatialReferenceId=7:ba.wkt===m.SphericalPCPFMoon.wkt?
ha.spatialReferenceId=9:I.isMars(ba)?ha.spatialReferenceId=8:I.isMoon(ba)?ha.spatialReferenceId=10:ha.spatialReferenceId=0}function Ia(ba,ha,Z,ka){ba!==Z&&(Z[ka++]=ba[ha++],Z[ka++]=ba[ha++],Z[ka]=ba[ha])}function c(ba,ha,Z,ka){Z[ka++]=sb*(ba[ha++]/l.earth.radius);Z[ka++]=sb*(Math.PI/2-2*Math.atan(Math.exp(-ba[ha++]/l.earth.radius)));Z[ka]=ba[ha]}function p(ba,ha,Z,ka){c(ba,ha,Z,ka);ca(Z,ka,Z,ka)}function ea(ba,ha,Z,ka){c(ba,ha,Z,ka);Ca(Z,ka,Z,ka)}function n(ba,ha,Z,ka,xa){var ya=.4999999*Math.PI;
ya=r.clamp(kb*ba[ha+1],-ya,ya);ya=Math.sin(ya);Z[ka++]=kb*ba[ha]*xa.radius;Z[ka++]=xa.halfSemiMajorAxis*Math.log((1+ya)/(1-ya));Z[ka]=ba[ha+2]}function J(ba,ha,Z,ka){n(ba,ha,Z,ka,l.earth)}function T(ba,ha,Z,ka){Z[ka]=ba[ha]*yb;Z[ka+1]=ba[ha+1]*yb;Z[ka+2]=ba[ha+2]}function V(ba,ha,Z,ka){Z[ka]=ba[ha]*tb;Z[ka+1]=ba[ha+1]*tb;Z[ka+2]=ba[ha+2]}function ia(ba,ha,Z,ka){c(ba,ha,Z,ka);T(Z,ka,Z,ka)}function fa(ba,ha,Z,ka,xa){xa+=ba[ha+2];const ya=kb*ba[ha+1];ba=kb*ba[ha];ha=Math.cos(ya);Z[ka++]=Math.cos(ba)*
ha*xa;Z[ka++]=Math.sin(ba)*ha*xa;Z[ka]=Math.sin(ya)*xa}function K(ba,ha,Z,ka){fa(ba,ha,Z,ka,l.moon.radius)}function P(ba,ha,Z,ka){fa(ba,ha,Z,ka,l.mars.radius)}function ca(ba,ha,Z,ka){fa(ba,ha,Z,ka,l.earth.radius)}function oa(ba,ha,Z,ka,xa){var ya=ba[ha];const Ha=ba[ha+1];ha=ba[ha+2];ba=Math.sqrt(ya*ya+Ha*Ha+ha*ha);ha=r.asinClamped(ha/(0===ba?1:ba));ya=Math.atan2(Ha,ya);Z[ka++]=sb*ya;Z[ka++]=sb*ha;Z[ka]=ba-xa}function pa(ba,ha,Z,ka){oa(ba,ha,Z,ka,l.moon.radius)}function ua(ba,ha,Z,ka){oa(ba,ha,Z,ka,
l.mars.radius)}function wa(ba,ha,Z,ka){oa(ba,ha,Z,ka,l.earth.radius)}function za(ba,ha,Z,ka){wa(ba,ha,Z,ka);J(Z,ka,Z,ka)}function Ga(ba,ha,Z,ka){wa(ba,ha,Z,ka);Ca(Z,ka,Z,ka)}function Ca(ba,ha,Z,ka){{var xa=l.earth;const Ha=kb*ba[ha];var ya=kb*ba[ha+1];ba=ba[ha+2];ha=Math.sin(ya);ya=Math.cos(ya);const Ka=xa.radius/Math.sqrt(1-xa.eccentricitySquared*ha*ha);Z[ka++]=(Ka+ba)*ya*Math.cos(Ha);Z[ka++]=(Ka+ba)*ya*Math.sin(Ha);Z[ka++]=(Ka*(1-xa.eccentricitySquared)+ba)*ha}}function Da(ba,ha,Z,ka){var xa=C.earthEllipsoidConstants,
ya=ba[ha],Ha=ba[ha+1];ba=ba[ha+2];let Ka;ha=Math.abs(ba);var Xa=ya*ya+Ha*Ha;var Wa=Math.sqrt(Xa);var Ua=Xa+ba*ba;var bb=Math.sqrt(Ua);ya=Math.atan2(Ha,ya);var lb=ba*ba/Ua;Ua=Xa/Ua;Ha=xa.a2/bb;Xa=xa.a3-xa.a4/bb;.3<Ua?(lb=ha/bb*(1+Ua*(xa.a1+Ha+lb*Xa)/bb),bb=Math.asin(lb),Ha=lb*lb,Ua=Math.sqrt(1-Ha)):(Ua=Wa/bb*(1-lb*(xa.a5-Ha-Ua*Xa)/bb),bb=Math.acos(Ua),Ha=1-Ua*Ua,lb=Math.sqrt(Ha));Ka=1-l.earth.eccentricitySquared*Ha;Ha=l.earth.radius/Math.sqrt(Ka);xa=xa.a6*Ha;Ha=Wa-Ha*Ua;Xa=ha-xa*lb;ha=Ua*Ha+lb*Xa;
Wa=Ua*Xa-lb*Ha;xa=Wa/(xa/Ka+ha);bb+=xa;0>ba&&(bb=-bb);Z[ka++]=sb*ya;Z[ka++]=sb*bb;Z[ka]=ha+Wa*xa/2}function Ea(ba,ha,Z,ka){Da(ba,ha,Z,ka);ca(Z,ka,Z,ka)}function Fa(ba,ha,Z,ka){Da(ba,ha,Z,ka);J(Z,ka,Z,ka)}function Pa(ba,ha,Z=ab()){return D.isNone(ba)||D.isNone(ha)?null:ra(ba,ha,Z).projector}function ra(ba,ha,Z){if(D.isNone(ba)||D.isNone(ha)||Z.source.spatialReference===ba&&Z.dest.spatialReference===ha)return Z;const ka=Oa(ba,Z.source),xa=Oa(ha,Z.dest);0===ka&&0===xa?I.equals(ba,ha)?Z.projector=Ia:
Z.projector=null:Z.projector=jb[ka][xa];return Z}function ab(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ia}}let Ta=null,Va=null,a=null,$a={},Ra=function(ba){function ha(){return ba.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}Y._inheritsLoose(ha,ba);return ha}(X);const yb=l.earth.radius*Math.PI/180,tb=180/(l.earth.radius*Math.PI),jb=
{[2]:{[5]:null,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:ca,[7]:null,[9]:null,[0]:null,[3]:J,[12]:T,[2]:Ia,[4]:Ca},[5]:{[5]:Ia,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:ca,[7]:null,[9]:null,[0]:null,[3]:null,[12]:T,[2]:null,[4]:Ca},[8]:{[5]:null,[8]:Ia,[10]:null,[11]:Ia,[6]:null,[1]:null,[7]:P,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ia,[11]:Ia,[6]:null,[1]:null,[7]:null,[9]:K,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:c,
[6]:c,[1]:p,[7]:null,[9]:null,[0]:null,[3]:Ia,[12]:ia,[2]:c,[4]:ea},[4]:{[5]:Da,[8]:null,[10]:null,[11]:Da,[6]:Da,[1]:Ea,[7]:null,[9]:null,[0]:null,[3]:Fa,[12]:function(ba,ha,Z,ka){Da(ba,ha,Z,ka);T(Z,ka,Z,ka)},[2]:Da,[4]:Ia},[1]:{[5]:wa,[8]:null,[10]:null,[11]:wa,[6]:wa,[1]:Ia,[7]:null,[9]:null,[0]:null,[3]:za,[12]:function(ba,ha,Z,ka){wa(ba,ha,Z,ka);T(Z,ka,Z,ka)},[2]:wa,[4]:Ga},[7]:{[5]:null,[8]:ua,[10]:null,[11]:ua,[6]:null,[1]:null,[7]:Ia,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},
[9]:{[5]:null,[8]:null,[10]:pa,[11]:pa,[6]:null,[1]:null,[7]:null,[9]:Ia,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ia,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:Ia,[8]:Ia,[10]:Ia,[11]:Ia,[6]:Ia,[1]:ca,[7]:P,[9]:K,[0]:null,[3]:J,[12]:T,[2]:Ia,[4]:Ca},[6]:{[5]:null,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:ca,[7]:null,[9]:null,[0]:null,[3]:null,[12]:T,[2]:Ia,[4]:Ca},[12]:{[5]:V,[8]:null,[10]:null,[11]:V,[6]:V,[1]:function(ba,
ha,Z,ka){V(ba,ha,Z,ka);ca(Z,ka,Z,ka)},[7]:null,[9]:null,[0]:null,[3]:function(ba,ha,Z,ka){V(ba,ha,Z,ka);J(Z,ka,Z,ka)},[12]:Ia,[2]:V,[4]:function(ba,ha,Z,ka){V(ba,ha,Z,ka);Ca(Z,ka,Z,ka)}}},Ab={spatialReference:null,spatialReferenceId:0},Zb={spatialReference:null,spatialReferenceId:0},Cb=ab(),$b=ab(),kb=r.deg2rad(1),sb=r.rad2deg(1),Qa=H.create(),eb=H.create(),ob=H.create(),Na=H.create(),Db=H.create();d.canProjectToWGS84ComparableLonLat=function(ba){if(D.isNone(ba))return!1;ba=Oa(ba,Ab);return!!jb[ba][6]};
d.canProjectWithoutEngine=M;d.computeENUToSphericalPCPFLocalRotation=Ba;d.computeSphericalPCPFToENULocalRotation=Sa;d.computeTranslationToOriginAndRotation=function(ba,ha,Z,ka){if(D.isNone(ba)||D.isNone(ka))return!1;var xa=Oa(ba,Ab),ya=Oa(ka,Zb);if(xa===ya&&1!==ya&&7!==ya&&9!==ya&&(0!==xa||I.equals(ba,ka)))return t.identity(Z),t.translate(Z,Z,ha),!0;if(1===ya||7===ya||9===ya){xa=jb[xa][11];ya=jb[11][ya];if(D.isNone(xa)||D.isNone(ya))return!1;xa(ha,0,eb,0);ya(eb,0,ob,0);Ba(kb*eb[0],kb*eb[1],Z);Z[12]=
ob[0];Z[13]=ob[1];Z[14]=ob[2];return!0}if(!(3!==ya&&12!==ya||2!==xa&&1!==xa&&3!==xa)){ba=jb[xa][11];ya=jb[11][ya];if(D.isNone(ba)||D.isNone(ya))return!1;ba(ha,0,eb,0);ya(eb,0,ob,0);1===xa?Sa(kb*eb[0],kb*eb[1],Z):t.identity(Z);Z[12]=ob[0];Z[13]=ob[1];Z[14]=ob[2];return!0}return!1};d.getProjectorName=function(ba,ha){switch(Pa(ba,ha,Cb)){case Ia:return"copy3";case ca:return"wgs84ToSphericalECEF";case J:return"wgs84ToWebMercator";case T:return"wgs84ToPlateCarree";case Ca:return"wgs84ToWGS84ECEF";case c:return"webMercatorToWGS84";
case p:return"webMercatorToSphericalECEF";case ea:return"webMercatorToWGS84ECEF";case ia:return"webMercatorToPlateCarree";case Da:return"wgs84ECEFToWGS84";case Ea:return"wgs84ECEFToSphericalECEF";case Fa:return"wgs84ECEFToWebMercator";case wa:return"sphericalECEFToWGS84";case za:return"sphericalECEFToWebMercator";case ua:return"sphericalMarsPCPFToMars2000";case pa:return"sphericalMoonPCPFToMoon2000";case Ga:return"sphericalECEFToWGS84ECEF";case P:return"mars2000ToSphericalPCPF";case K:return"moon2000ToSphericalPCPF";
default:return null}};d.getTransformation=U;d.getTransformations=function(ba,ha,Z=null){if(D.isNone(Ta))throw new Ra;ba=Ta._getTransformationBySuitability(Va,ba,ha,Z,null==Z?void 0:Z.spatialReference);if(null!==ba){ha=[];for(const ka of ba)ha.push(y.fromGE(ka));return ha}return[]};d.initializeProjection=function(ba,ha,Z,ka){return x.apply(this,arguments)};d.isLoaded=R;d.load=da;d.localLinearScaleFactors=function(ba,ha,Z,ka){if(D.isNone(ha)||D.isNone(ka))return!1;const xa=Oa(ha,Ab);var ya=Oa(ka,Zb);
if(xa===ya&&0!==xa||I.equals(ha,ka))return Z[0]=1,Z[1]=1,Z[2]=1,!0;if(1===xa){ha=q.length(ba);ba=ha/Math.sqrt(ba[0]*ba[0]+ba[1]*ba[1]);ha/=l.earth.radius;if(3===ya)return Z[0]=ba*ha,Z[1]=ba*ha,Z[2]=1,!0;if(2===ya||5===ya)return ya=180/(l.earth.radius*Math.PI),Z[0]=ya*ba*ha,Z[1]=ya*ha,Z[2]=1,!0}else if(12===xa&&(2===ya||5===ya))return Z[0]=tb,Z[1]=tb,Z[2]=1,!0;return!1};d.lonLatToSphericalPCPF=function(ba,ha,Z,ka,xa=0){ka+=xa;xa=Math.cos(Z);ba[0]=Math.cos(ha)*xa*ka;ba[1]=Math.sin(ha)*xa*ka;ba[2]=Math.sin(Z)*
ka};d.lonLatToWebMercatorComparable=n;d.project=L;d.projectBoundingRect=function(ba,ha,Z,ka){if(null==ba)return!1;if(I.equals(ha,ka))return F.copy(Z,ba),!0;Qa[0]=ba[0];Qa[1]=ba[1];Qa[2]=0;if(!la(Qa,ha,0,Qa,ka,0,1))return!1;Z[0]=Qa[0];Z[1]=Qa[1];Qa[0]=ba[2];Qa[1]=ba[3];Qa[2]=0;if(!la(Qa,ha,0,Qa,ka,0,1))return!1;Z[2]=Qa[0];Z[3]=Qa[1];return!0};d.projectBoundingSphere=function(ba,ha,Z,ka){if(D.isNone(ha)||D.isNone(ka))return!1;ha=ra(ha,ka,$b);if(ha.projector===Ia)return Z[0]=ba[0],Z[1]=ba[1],Z[2]=ba[2],
Z[3]=ba[3],!0;if(D.isNone(ha.projector))return!1;const {source:xa,dest:ya}=ha;if(3===ya.spatialReferenceId){ha=jb[xa.spatialReferenceId][2];if(D.isNone(ha))return!1;ha(ba,0,eb,0);J(eb,0,Z,0);Z[3]=Ja(eb[1],ba[2],ba[3],l.earth.radius);return!0}if(2!==xa.spatialReferenceId&&5!==xa.spatialReferenceId||12!==ya.spatialReferenceId)ha.projector(ba,0,Z,0),Z[3]=ba[3]*xa.metersPerUnit/ya.metersPerUnit;else{ka=jb[1][12];let Ha=ba[3];D.isSome(jb[xa.spatialReferenceId][1])&&D.isSome(ka)&&(Ha=Ja(ba[1],ba[2],ba[3],
l.earth.radius));ha.projector(ba,0,Z,0);Z[3]=Ha}return!0};d.projectBuffer=la;d.projectDirection=function(ba,ha,Z,ka,xa){q.copy(Na,ba);q.add(Db,ba,ha);ta(Na,Z,Na,xa);ta(Db,Z,Db,xa);q.subtract(ka,Db,Na);q.normalize(ka,ka)};d.projectExtent=function(ba,ha,Z=ha.spatialReference,ka=0){return D.isSome(Z)&&D.isSome(ja(ba,ba.spatialReference,ha,Z,ka))};d.projectMany=G;d.projectMultipoint=function(ba,ha,Z=ha.spatialReference,ka=0){return D.isNone(Z)?!1:D.isSome(A(ba,ba.spatialReference,ha,Z,ka))};d.projectPoint=
function(ba,ha,Z=ha.spatialReference,ka=0){return D.isNone(Z)?!1:D.isSome(g(ba,ba.spatialReference,ha,Z,ka))};d.projectPointToVector=function(ba,ha,Z,ka=0){Na[0]=ba.x;Na[1]=ba.y;const xa=ba.z;Na[2]=void 0!==xa?xa:ka;return la(Na,ba.spatialReference,0,ha,Z,0,1)};d.projectPointToWGS84ComparableLonLat=function(ba,ha){Na[0]=ba.x;Na[1]=ba.y;const Z=ba.z;Na[2]=void 0!==Z?Z:0;return ma(Na,ba.spatialReference,ha)};d.projectPolygon=function(ba,ha,Z=ha.spatialReference,ka=0){return D.isSome(Z)&&D.isSome(aa(ba,
ba.spatialReference,ha,Z,ka))};d.projectPolyline=function(ba,ha,Z=ha.spatialReference,ka=0){return D.isSome(Z)&&D.isSome(S(ba,ba.spatialReference,ha,Z,ka))};d.projectVectorToDehydratedPoint=function(ba,ha,Z){return la(ba,ha,0,Na,Z.spatialReference,0,1)?(Z.x=Na[0],Z.y=Na[1],Z.z=Na[2],Z):null};d.projectVectorToPoint=function(ba,ha,Z){if(D.isNone(ha)||D.isNone(Z))return null;const ka=new B({spatialReference:Z});return la(ba,ha,0,Na,Z,0,1)?(ka.x=Na[0],ka.y=Na[1],ka.z=Na[2],ka):null};d.projectVectorToVector=
ta;d.projectVectorToWGS84ComparableLonLat=function(ba,ha,Z){return ma(ba,ha,Z)};d.projectWithoutEngine=e;d.projectXYZToVector=na;d.sphericalPCPFtoLonLatElevation=oa;d.tryProjectWithZConversion=function(ba,ha){try{const Z=L(ba,ha);if(null==Z)return null;"xmin"in ba&&"xmin"in Z&&(Z.zmin=ba.zmin,Z.zmax=ba.zmax);const ka=Q.getGeometryZScaler(Z.type,ba.spatialReference,ha);D.isSome(ka)&&ka(Z);return Z}catch(Z){if(!(Z instanceof Ra))throw Z;return null}};d.unload=function(){a=Va=Ta=null;$a={}};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(k,d,Y,X,r,D,z,w,t){function q(g){if(g=M[g])return g;throw Error("unknown measure");}function H(g){return U[g].baseUnit}function N(g,A=null){A=A||q(g);return U[A].baseUnit===g}function O(g,A,S){if(A===S)return g;
const aa=q(A);if(aa!==q(S))throw Error("incompatible units");g=N(A,aa)?g:g*U[aa].units[A].inBaseUnits;return N(S,aa)?g:g/U[aa].units[S].inBaseUnits}function u(g,A){return 3E3>O(g,A,"meters")?"meters":"kilometers"}function B(g,A){return 1E5>O(g,A,"meters")?"meters":"kilometers"}function b(g,A){return 1E3>O(g,A,"feet")?"feet":"miles"}function f(g,A){return 1E5>O(g,A,"feet")?"feet":"miles"}function m(g){return G.fromJSON(g.toLowerCase())||null}function F(g,A=z.earth.metersPerDegree){return l(g,!0)||
A}function l(g,A=!1){let S,aa,ja=null;null!=g&&("object"===typeof g?(S=g.wkid,aa=g.wkt):"number"===typeof g?S=g:"string"===typeof g&&(aa=g));if(S){if(w.isWKIDFromMars(S))return z.mars.metersPerDegree;if(w.isWKIDFromMoon(S))return z.moon.metersPerDegree;ja=R.values[R[S]];!ja&&A&&L.has(S)&&(ja=I)}else aa&&(/^PROJCS/i.test(aa)?ja=C(Q.exec(aa),ja):/^GEOCCS/i.test(aa)&&(ja=C(da.exec(aa),ja)));return ja}function C(g,A){return g&&g[1]?parseFloat(g[1].split(",")[1]):A}function y(g){var A=null;if(null!=g)if("object"===
typeof g){var S=g.wkid;var aa=g.wkt}else"number"===typeof g?S=g:"string"===typeof g&&(aa=g);if(S)A=R.units[R[S]];else if(aa&&(g=/^PROJCS/i.test(aa)?Q:/^GEOCCS/i.test(aa)?da:null)&&(aa=g.exec(aa))&&aa[1]&&(aa=aa[1],A=(A=/[\\"\\']{1}([^\\"\\']+)/.exec(aa))&&A[1],!A||-1===R.units.indexOf(A)))for(aa=parseFloat(aa.split(",")[1]),A=null,g=R.values,S=0;S<g.length;++S)if(1E-7>Math.abs(aa-g[S])){A=R.units[S];break}return X.isSome(A)?m(A):null}const I=z.earth.radius*Math.PI/200,Q=/UNIT\[([^\]]+)\]\]$/i,R=t,
da=/UNIT\[([^\]]+)\]/i,L=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),G=Y.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};t={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(g=>g*g)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const U={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:t},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},M=function(){const g={};for(const A in U)for(const S in U[A].units)g[S]=
A;return g}(),x={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};d=Y.strict()(x);t=Y.strict()(e);Y=Y.strict()({...x,...e});k.areaUnitsJSONMap=d;k.baseUnitForMeasure=H;k.baseUnitForUnit=function(g){return H(q(g))};k.convertUnit=O;k.getDefaultUnitSystem=function(g){if(!g)return null;switch(y(g)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};k.getMetersPerUnit=l;k.getMetersPerUnitForSR=F;k.getMetersPerVerticalUnitForSR=function(g){if(g&&"object"===typeof g&&!w.isEarth(g))return 1;g=F(g);return 1E5<g?1:g};k.getUnitString=y;k.getVerticalUnitStringForSR=function(g){const A=F(g),S=g instanceof D?r.getReferenceEllipsoid(g).metersPerDegree:1E5;return A>=S?"meters":y(g)};k.inchesPerMeter=39.37;k.isBaseUnit=N;k.isMeasurementSystem=function(g){return"imperial"===
g||"metric"===g};k.lengthToDegrees=function(g,A,S){return O(g,A,"meters")/(S*Math.PI/180)};k.lengthUnitsJSONMap=t;k.measureForUnit=q;k.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");k.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");k.preferredImperialAreaUnit=function(g,A){return 1E6>O(g,A,"square-feet")?"square-feet":
"square-miles"};k.preferredImperialLengthUnit=b;k.preferredImperialVerticalLengthUnit=f;k.preferredLengthUnit=function(g,A,S){switch(S){case "metric":return u(g,A);case "imperial":return b(g,A);default:return S}};k.preferredMetricAreaUnit=function(g,A){return 3E6>O(g,A,"square-meters")?"square-meters":"square-kilometers"};k.preferredMetricLengthUnit=u;k.preferredMetricVerticalLengthUnit=B;k.preferredVerticalLengthUnit=function(g,A,S){switch(S){case "metric":return B(g,A);case "imperial":return f(g,
A);default:return S}};k.unitFromRESTJSON=m;k.unitToRESTJSON=function(g){return G.toJSON(g)||null};k.unitsJSONMap=Y;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(k,d,Y,X){function r(q){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${q.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const D=r(Y.earth),z=r(Y.mars),w=r(Y.moon),t=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${Y.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});k.SphericalECEFSpatialReference=D;k.SphericalPCPFMars=
z;k.SphericalPCPFMoon=w;k.WGS84ECEFSpatialReference=t;k.createSphericalPCPF=r;k.getReferenceEllipsoid=function(q){return q&&(X.isMars(q)||q===z)?Y.mars:q&&(X.isMoon(q)||q===w)?Y.moon:Y.earth};k.getReferenceEllipsoidFromWKID=function(q){return X.isWKIDFromMars(q)?Y.mars:X.isWKIDFromMoon(q)?Y.moon:Y.earth};k.getSphericalPCPF=function(q){return q&&(X.isMars(q)||q===z)?z:q&&(X.isMoon(q)||q===w)?w:D};k.getSphericalPCPFForEllipsoid=function(q){return q&&q===Y.mars?z:q&&q===Y.moon?w:D};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,d,Y){function X(c,p){c[0]=p[0];c[1]=p[1];c[2]=p[2];c[3]=p[3];c[4]=p[4];c[5]=p[5];c[6]=p[6];c[7]=p[7];c[8]=p[8];c[9]=p[9];c[10]=p[10];c[11]=p[11];c[12]=p[12];c[13]=p[13];c[14]=p[14];c[15]=p[15];return c}function r(c,p,ea,n,J,T,V,ia,fa,K,P,ca,oa,pa,ua,wa,za){c[0]=p;c[1]=ea;c[2]=n;c[3]=J;c[4]=T;c[5]=V;c[6]=ia;c[7]=fa;c[8]=K;c[9]=P;c[10]=ca;c[11]=oa;c[12]=pa;c[13]=ua;c[14]=wa;c[15]=za;return c}
function D(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function z(c,p){if(c===p){const ea=p[1],n=p[2],J=p[3],T=p[6],V=p[7],ia=p[11];c[1]=p[4];c[2]=p[8];c[3]=p[12];c[4]=ea;c[6]=p[9];c[7]=p[13];c[8]=n;c[9]=T;c[11]=p[14];c[12]=J;c[13]=V;c[14]=ia}else c[0]=p[0],c[1]=p[4],c[2]=p[8],c[3]=p[12],c[4]=p[1],c[5]=p[5],c[6]=p[9],c[7]=p[13],c[8]=p[2],c[9]=p[6],c[10]=p[10],c[11]=p[14],c[12]=p[3],c[13]=p[7],c[14]=p[11],c[15]=p[15];
return c}function w(c,p){const ea=p[0],n=p[1],J=p[2],T=p[3],V=p[4],ia=p[5],fa=p[6],K=p[7],P=p[8],ca=p[9],oa=p[10],pa=p[11],ua=p[12],wa=p[13],za=p[14];p=p[15];const Ga=ea*ia-n*V,Ca=ea*fa-J*V,Da=ea*K-T*V,Ea=n*fa-J*ia,Fa=n*K-T*ia,Pa=J*K-T*fa,ra=P*wa-ca*ua,ab=P*za-oa*ua,Ta=P*p-pa*ua,Va=ca*za-oa*wa,a=ca*p-pa*wa,$a=oa*p-pa*za;let Ra=Ga*$a-Ca*a+Da*Va+Ea*Ta-Fa*ab+Pa*ra;if(!Ra)return null;Ra=1/Ra;c[0]=(ia*$a-fa*a+K*Va)*Ra;c[1]=(J*a-n*$a-T*Va)*Ra;c[2]=(wa*Pa-za*Fa+p*Ea)*Ra;c[3]=(oa*Fa-ca*Pa-pa*Ea)*Ra;c[4]=
(fa*Ta-V*$a-K*ab)*Ra;c[5]=(ea*$a-J*Ta+T*ab)*Ra;c[6]=(za*Da-ua*Pa-p*Ca)*Ra;c[7]=(P*Pa-oa*Da+pa*Ca)*Ra;c[8]=(V*a-ia*Ta+K*ra)*Ra;c[9]=(n*Ta-ea*a-T*ra)*Ra;c[10]=(ua*Fa-wa*Da+p*Ga)*Ra;c[11]=(ca*Da-P*Fa-pa*Ga)*Ra;c[12]=(ia*ab-V*Va-fa*ra)*Ra;c[13]=(ea*Va-n*ab+J*ra)*Ra;c[14]=(wa*Ca-ua*Ea-za*Ga)*Ra;c[15]=(P*Ea-ca*Ca+oa*Ga)*Ra;return c}function t(c,p){const ea=p[0],n=p[1],J=p[2],T=p[3],V=p[4],ia=p[5],fa=p[6],K=p[7],P=p[8],ca=p[9],oa=p[10],pa=p[11],ua=p[12],wa=p[13],za=p[14];p=p[15];c[0]=ia*(oa*p-pa*za)-ca*
(fa*p-K*za)+wa*(fa*pa-K*oa);c[1]=-(n*(oa*p-pa*za)-ca*(J*p-T*za)+wa*(J*pa-T*oa));c[2]=n*(fa*p-K*za)-ia*(J*p-T*za)+wa*(J*K-T*fa);c[3]=-(n*(fa*pa-K*oa)-ia*(J*pa-T*oa)+ca*(J*K-T*fa));c[4]=-(V*(oa*p-pa*za)-P*(fa*p-K*za)+ua*(fa*pa-K*oa));c[5]=ea*(oa*p-pa*za)-P*(J*p-T*za)+ua*(J*pa-T*oa);c[6]=-(ea*(fa*p-K*za)-V*(J*p-T*za)+ua*(J*K-T*fa));c[7]=ea*(fa*pa-K*oa)-V*(J*pa-T*oa)+P*(J*K-T*fa);c[8]=V*(ca*p-pa*wa)-P*(ia*p-K*wa)+ua*(ia*pa-K*ca);c[9]=-(ea*(ca*p-pa*wa)-P*(n*p-T*wa)+ua*(n*pa-T*ca));c[10]=ea*(ia*p-K*wa)-
V*(n*p-T*wa)+ua*(n*K-T*ia);c[11]=-(ea*(ia*pa-K*ca)-V*(n*pa-T*ca)+P*(n*K-T*ia));c[12]=-(V*(ca*za-oa*wa)-P*(ia*za-fa*wa)+ua*(ia*oa-fa*ca));c[13]=ea*(ca*za-oa*wa)-P*(n*za-J*wa)+ua*(n*oa-J*ca);c[14]=-(ea*(ia*za-fa*wa)-V*(n*za-J*wa)+ua*(n*fa-J*ia));c[15]=ea*(ia*oa-fa*ca)-V*(n*oa-J*ca)+P*(n*fa-J*ia);return c}function q(c){const p=c[0],ea=c[1],n=c[2],J=c[3],T=c[4],V=c[5],ia=c[6],fa=c[7],K=c[8],P=c[9],ca=c[10],oa=c[11],pa=c[12],ua=c[13],wa=c[14];c=c[15];return(p*V-ea*T)*(ca*c-oa*wa)-(p*ia-n*T)*(P*c-oa*ua)+
(p*fa-J*T)*(P*wa-ca*ua)+(ea*ia-n*V)*(K*c-oa*pa)-(ea*fa-J*V)*(K*wa-ca*pa)+(n*fa-J*ia)*(K*ua-P*pa)}function H(c,p,ea){const n=p[0],J=p[1],T=p[2],V=p[3],ia=p[4],fa=p[5],K=p[6],P=p[7],ca=p[8],oa=p[9],pa=p[10],ua=p[11],wa=p[12],za=p[13],Ga=p[14];p=p[15];let Ca=ea[0],Da=ea[1],Ea=ea[2],Fa=ea[3];c[0]=Ca*n+Da*ia+Ea*ca+Fa*wa;c[1]=Ca*J+Da*fa+Ea*oa+Fa*za;c[2]=Ca*T+Da*K+Ea*pa+Fa*Ga;c[3]=Ca*V+Da*P+Ea*ua+Fa*p;Ca=ea[4];Da=ea[5];Ea=ea[6];Fa=ea[7];c[4]=Ca*n+Da*ia+Ea*ca+Fa*wa;c[5]=Ca*J+Da*fa+Ea*oa+Fa*za;c[6]=Ca*T+Da*
K+Ea*pa+Fa*Ga;c[7]=Ca*V+Da*P+Ea*ua+Fa*p;Ca=ea[8];Da=ea[9];Ea=ea[10];Fa=ea[11];c[8]=Ca*n+Da*ia+Ea*ca+Fa*wa;c[9]=Ca*J+Da*fa+Ea*oa+Fa*za;c[10]=Ca*T+Da*K+Ea*pa+Fa*Ga;c[11]=Ca*V+Da*P+Ea*ua+Fa*p;Ca=ea[12];Da=ea[13];Ea=ea[14];Fa=ea[15];c[12]=Ca*n+Da*ia+Ea*ca+Fa*wa;c[13]=Ca*J+Da*fa+Ea*oa+Fa*za;c[14]=Ca*T+Da*K+Ea*pa+Fa*Ga;c[15]=Ca*V+Da*P+Ea*ua+Fa*p;return c}function N(c,p,ea){const n=ea[0],J=ea[1];ea=ea[2];let T=void 0,V=void 0,ia=void 0,fa=void 0,K=void 0,P=void 0,ca=void 0,oa=void 0,pa=void 0,ua=void 0,
wa=void 0,za=void 0;p===c?(c[12]=p[0]*n+p[4]*J+p[8]*ea+p[12],c[13]=p[1]*n+p[5]*J+p[9]*ea+p[13],c[14]=p[2]*n+p[6]*J+p[10]*ea+p[14],c[15]=p[3]*n+p[7]*J+p[11]*ea+p[15]):(T=p[0],V=p[1],ia=p[2],fa=p[3],K=p[4],P=p[5],ca=p[6],oa=p[7],pa=p[8],ua=p[9],wa=p[10],za=p[11],c[0]=T,c[1]=V,c[2]=ia,c[3]=fa,c[4]=K,c[5]=P,c[6]=ca,c[7]=oa,c[8]=pa,c[9]=ua,c[10]=wa,c[11]=za,c[12]=T*n+K*J+pa*ea+p[12],c[13]=V*n+P*J+ua*ea+p[13],c[14]=ia*n+ca*J+wa*ea+p[14],c[15]=fa*n+oa*J+za*ea+p[15]);return c}function O(c,p,ea){const n=ea[0],
J=ea[1];ea=ea[2];c[0]=p[0]*n;c[1]=p[1]*n;c[2]=p[2]*n;c[3]=p[3]*n;c[4]=p[4]*J;c[5]=p[5]*J;c[6]=p[6]*J;c[7]=p[7]*J;c[8]=p[8]*ea;c[9]=p[9]*ea;c[10]=p[10]*ea;c[11]=p[11]*ea;c[12]=p[12];c[13]=p[13];c[14]=p[14];c[15]=p[15];return c}function u(c,p,ea,n){let J=n[0],T=n[1];n=n[2];let V=Math.sqrt(J*J+T*T+n*n);var ia=void 0,fa=void 0;let K=void 0,P=void 0,ca=void 0,oa=void 0,pa=void 0,ua=void 0,wa=void 0,za=void 0,Ga=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Pa=void 0,ra=void 0,ab=void 0,Ta=void 0,Va=void 0,
a=void 0,$a=void 0;fa=ia=void 0;if(V<Y.EPSILON)return null;V=1/V;J*=V;T*=V;n*=V;ia=Math.sin(ea);fa=Math.cos(ea);K=1-fa;P=p[0];ca=p[1];oa=p[2];pa=p[3];ua=p[4];wa=p[5];za=p[6];Ga=p[7];Ca=p[8];Da=p[9];Ea=p[10];Fa=p[11];Pa=J*J*K+fa;ra=T*J*K+n*ia;ab=n*J*K-T*ia;Ta=J*T*K-n*ia;Va=T*T*K+fa;a=n*T*K+J*ia;$a=J*n*K+T*ia;ia=T*n*K-J*ia;fa=n*n*K+fa;c[0]=P*Pa+ua*ra+Ca*ab;c[1]=ca*Pa+wa*ra+Da*ab;c[2]=oa*Pa+za*ra+Ea*ab;c[3]=pa*Pa+Ga*ra+Fa*ab;c[4]=P*Ta+ua*Va+Ca*a;c[5]=ca*Ta+wa*Va+Da*a;c[6]=oa*Ta+za*Va+Ea*a;c[7]=pa*Ta+
Ga*Va+Fa*a;c[8]=P*$a+ua*ia+Ca*fa;c[9]=ca*$a+wa*ia+Da*fa;c[10]=oa*$a+za*ia+Ea*fa;c[11]=pa*$a+Ga*ia+Fa*fa;p!==c&&(c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);return c}function B(c,p,ea){const n=Math.sin(ea);ea=Math.cos(ea);const J=p[4],T=p[5],V=p[6],ia=p[7],fa=p[8],K=p[9],P=p[10],ca=p[11];p!==c&&(c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[4]=J*ea+fa*n;c[5]=T*ea+K*n;c[6]=V*ea+P*n;c[7]=ia*ea+ca*n;c[8]=fa*ea-J*n;c[9]=K*ea-T*n;c[10]=P*ea-V*n;c[11]=ca*
ea-ia*n;return c}function b(c,p,ea){const n=Math.sin(ea);ea=Math.cos(ea);const J=p[0],T=p[1],V=p[2],ia=p[3],fa=p[8],K=p[9],P=p[10],ca=p[11];p!==c&&(c[4]=p[4],c[5]=p[5],c[6]=p[6],c[7]=p[7],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[0]=J*ea-fa*n;c[1]=T*ea-K*n;c[2]=V*ea-P*n;c[3]=ia*ea-ca*n;c[8]=J*n+fa*ea;c[9]=T*n+K*ea;c[10]=V*n+P*ea;c[11]=ia*n+ca*ea;return c}function f(c,p,ea){const n=Math.sin(ea);ea=Math.cos(ea);const J=p[0],T=p[1],V=p[2],ia=p[3],fa=p[4],K=p[5],P=p[6],ca=p[7];p!==c&&(c[8]=p[8],
c[9]=p[9],c[10]=p[10],c[11]=p[11],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[0]=J*ea+fa*n;c[1]=T*ea+K*n;c[2]=V*ea+P*n;c[3]=ia*ea+ca*n;c[4]=fa*ea-J*n;c[5]=K*ea-T*n;c[6]=P*ea-V*n;c[7]=ca*ea-ia*n;return c}function m(c,p){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=p[0];c[13]=p[1];c[14]=p[2];c[15]=1;return c}function F(c,p){c[0]=p[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=p[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=p[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function l(c,p,ea){let n=ea[0],J=ea[1];ea=ea[2];let T=Math.sqrt(n*n+J*J+ea*ea),V=void 0,ia=void 0,fa=void 0;if(T<Y.EPSILON)return null;T=1/T;n*=T;J*=T;ea*=T;V=Math.sin(p);ia=Math.cos(p);fa=1-ia;c[0]=n*n*fa+ia;c[1]=J*n*fa+ea*V;c[2]=ea*n*fa-J*V;c[3]=0;c[4]=n*J*fa-ea*V;c[5]=J*J*fa+ia;c[6]=ea*J*fa+n*V;c[7]=0;c[8]=n*ea*fa+J*V;c[9]=J*ea*fa-n*V;c[10]=ea*ea*fa+ia;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function C(c,p){const ea=Math.sin(p);p=Math.cos(p);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=
0;c[5]=p;c[6]=ea;c[7]=0;c[8]=0;c[9]=-ea;c[10]=p;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function y(c,p){const ea=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=0;c[2]=-ea;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=ea;c[9]=0;c[10]=p;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function I(c,p){const ea=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=ea;c[2]=0;c[3]=0;c[4]=-ea;c[5]=p;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function Q(c,p,ea){var n=p[0],J=p[1],T=p[2],
V=p[3],ia=n+n,fa=J+J;const K=T+T;p=n*ia;const P=n*fa;n*=K;const ca=J*fa;J*=K;T*=K;ia*=V;fa*=V;V*=K;c[0]=1-(ca+T);c[1]=P+V;c[2]=n-fa;c[3]=0;c[4]=P-V;c[5]=1-(p+T);c[6]=J+ia;c[7]=0;c[8]=n+fa;c[9]=J-ia;c[10]=1-(p+ca);c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function R(c,p){const ea=Ia,n=-p[0],J=-p[1],T=-p[2],V=p[3],ia=p[4],fa=p[5],K=p[6],P=p[7],ca=n*n+J*J+T*T+V*V;0<ca?(ea[0]=2*(ia*V+P*n+fa*T-K*J)/ca,ea[1]=2*(fa*V+P*J+K*n-ia*T)/ca,ea[2]=2*(K*V+P*T+ia*J-fa*n)/ca):(ea[0]=2*(ia*V+P*n+
fa*T-K*J),ea[1]=2*(fa*V+P*J+K*n-ia*T),ea[2]=2*(K*V+P*T+ia*J-fa*n));Q(c,p,ea);return c}function da(c,p){c[0]=p[12];c[1]=p[13];c[2]=p[14];return c}function L(c,p){const ea=p[0],n=p[1],J=p[2],T=p[4],V=p[5],ia=p[6],fa=p[8],K=p[9];p=p[10];c[0]=Math.sqrt(ea*ea+n*n+J*J);c[1]=Math.sqrt(T*T+V*V+ia*ia);c[2]=Math.sqrt(fa*fa+K*K+p*p);return c}function G(c,p){const ea=p[0]+p[5]+p[10];let n=0;0<ea?(n=2*Math.sqrt(ea+1),c[3]=.25*n,c[0]=(p[6]-p[9])/n,c[1]=(p[8]-p[2])/n,c[2]=(p[1]-p[4])/n):p[0]>p[5]&&p[0]>p[10]?(n=
2*Math.sqrt(1+p[0]-p[5]-p[10]),c[3]=(p[6]-p[9])/n,c[0]=.25*n,c[1]=(p[1]+p[4])/n,c[2]=(p[8]+p[2])/n):p[5]>p[10]?(n=2*Math.sqrt(1+p[5]-p[0]-p[10]),c[3]=(p[8]-p[2])/n,c[0]=(p[1]+p[4])/n,c[1]=.25*n,c[2]=(p[6]+p[9])/n):(n=2*Math.sqrt(1+p[10]-p[0]-p[5]),c[3]=(p[1]-p[4])/n,c[0]=(p[8]+p[2])/n,c[1]=(p[6]+p[9])/n,c[2]=.25*n);return c}function U(c,p,ea,n){var J=p[0],T=p[1],V=p[2],ia=p[3],fa=J+J,K=T+T,P=V+V;p=J*fa;const ca=J*K;J*=P;const oa=T*K;T*=P;V*=P;fa*=ia;K*=ia;ia*=P;P=n[0];const pa=n[1];n=n[2];c[0]=(1-
(oa+V))*P;c[1]=(ca+ia)*P;c[2]=(J-K)*P;c[3]=0;c[4]=(ca-ia)*pa;c[5]=(1-(p+V))*pa;c[6]=(T+fa)*pa;c[7]=0;c[8]=(J+K)*n;c[9]=(T-fa)*n;c[10]=(1-(p+oa))*n;c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function M(c,p,ea,n,J){var T=p[0],V=p[1],ia=p[2],fa=p[3],K=T+T,P=V+V,ca=ia+ia;p=T*K;var oa=T*P,pa=T*ca;T=V*P;V*=ca;var ua=ia*ca;ia=fa*K;P*=fa;const wa=fa*ca;var za=n[0],Ga=n[1];ca=n[2];n=J[0];fa=J[1];J=J[2];K=(1-(T+ua))*za;const Ca=(oa+wa)*za;za*=pa-P;oa=(oa-wa)*Ga;ua=(1-(p+ua))*Ga;Ga*=V+ia;pa=
(pa+P)*ca;V=(V-ia)*ca;p=(1-(p+T))*ca;c[0]=K;c[1]=Ca;c[2]=za;c[3]=0;c[4]=oa;c[5]=ua;c[6]=Ga;c[7]=0;c[8]=pa;c[9]=V;c[10]=p;c[11]=0;c[12]=ea[0]+n-(K*n+oa*fa+pa*J);c[13]=ea[1]+fa-(Ca*n+ua*fa+V*J);c[14]=ea[2]+J-(za*n+Ga*fa+p*J);c[15]=1;return c}function x(c,p){var ea=p[0],n=p[1],J=p[2];p=p[3];var T=ea+ea,V=n+n;const ia=J+J;ea*=T;const fa=n*T;n*=V;const K=J*T,P=J*V;J*=ia;T*=p;V*=p;p*=ia;c[0]=1-n-J;c[1]=fa+p;c[2]=K-V;c[3]=0;c[4]=fa-p;c[5]=1-ea-J;c[6]=P+T;c[7]=0;c[8]=K+V;c[9]=P-T;c[10]=1-ea-n;c[11]=0;c[12]=
0;c[13]=0;c[14]=0;c[15]=1;return c}function e(c,p,ea,n,J,T,V){const ia=1/(ea-p),fa=1/(J-n),K=1/(T-V);c[0]=2*T*ia;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*T*fa;c[6]=0;c[7]=0;c[8]=(ea+p)*ia;c[9]=(J+n)*fa;c[10]=(V+T)*K;c[11]=-1;c[12]=0;c[13]=0;c[14]=V*T*2*K;c[15]=0;return c}function g(c,p,ea,n,J){p=1/Math.tan(p/2);let T=void 0;c[0]=p/ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=p;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=J&&Infinity!==J?(T=1/(n-J),c[10]=(J+n)*T,c[14]=2*J*n*T):(c[10]=-1,c[14]=
-2*n);return c}function A(c,p,ea,n){const J=Math.tan(p.upDegrees*Math.PI/180),T=Math.tan(p.downDegrees*Math.PI/180),V=Math.tan(p.leftDegrees*Math.PI/180);p=Math.tan(p.rightDegrees*Math.PI/180);const ia=2/(V+p),fa=2/(J+T);c[0]=ia;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=fa;c[6]=0;c[7]=0;c[8]=-((V-p)*ia*.5);c[9]=(J-T)*fa*.5;c[10]=n/(ea-n);c[11]=-1;c[12]=0;c[13]=0;c[14]=n*ea/(ea-n);c[15]=0;return c}function S(c,p,ea,n,J,T,V){const ia=1/(p-ea),fa=1/(n-J),K=1/(T-V);c[0]=-2*ia;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
-2*fa;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*K;c[11]=0;c[12]=(p+ea)*ia;c[13]=(J+n)*fa;c[14]=(V+T)*K;c[15]=1;return c}function aa(c,p,ea,n){let J=void 0,T=void 0;var V=void 0,ia=void 0;let fa=void 0,K=void 0;var P=void 0,ca=void 0;let oa=void 0,pa=void 0;const ua=p[0],wa=p[1];p=p[2];V=n[0];ia=n[1];n=n[2];P=ea[0];ca=ea[1];ea=ea[2];if(Math.abs(ua-P)<Y.EPSILON&&Math.abs(wa-ca)<Y.EPSILON&&Math.abs(p-ea)<Y.EPSILON)return D(c);P=ua-P;ca=wa-ca;oa=p-ea;pa=1/Math.sqrt(P*P+ca*ca+oa*oa);P*=pa;ca*=pa;oa*=pa;J=ia*
oa-n*ca;T=n*P-V*oa;V=V*ca-ia*P;(pa=Math.sqrt(J*J+T*T+V*V))?(pa=1/pa,J*=pa,T*=pa,V*=pa):V=T=J=0;ia=ca*V-oa*T;fa=oa*J-P*V;K=P*T-ca*J;(pa=Math.sqrt(ia*ia+fa*fa+K*K))?(pa=1/pa,ia*=pa,fa*=pa,K*=pa):K=fa=ia=0;c[0]=J;c[1]=ia;c[2]=P;c[3]=0;c[4]=T;c[5]=fa;c[6]=ca;c[7]=0;c[8]=V;c[9]=K;c[10]=oa;c[11]=0;c[12]=-(J*ua+T*wa+V*p);c[13]=-(ia*ua+fa*wa+K*p);c[14]=-(P*ua+ca*wa+oa*p);c[15]=1;return c}function ja(c,p,ea,n){const J=p[0],T=p[1];p=p[2];var V=n[0];const ia=n[1];var fa=n[2];n=J-ea[0];let K=T-ea[1];ea=p-ea[2];
let P=n*n+K*K+ea*ea;0<P&&(P=1/Math.sqrt(P),n*=P,K*=P,ea*=P);let ca=ia*ea-fa*K;fa=fa*n-V*ea;V=V*K-ia*n;P=ca*ca+fa*fa+V*V;0<P&&(P=1/Math.sqrt(P),ca*=P,fa*=P,V*=P);c[0]=ca;c[1]=fa;c[2]=V;c[3]=0;c[4]=K*V-ea*fa;c[5]=ea*ca-n*V;c[6]=n*fa-K*ca;c[7]=0;c[8]=n;c[9]=K;c[10]=ea;c[11]=0;c[12]=J;c[13]=T;c[14]=p;c[15]=1;return c}function na(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+
")"}function ta(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function ma(c,p,ea){c[0]=p[0]+ea[0];c[1]=p[1]+ea[1];c[2]=p[2]+ea[2];c[3]=p[3]+ea[3];c[4]=p[4]+ea[4];c[5]=p[5]+ea[5];c[6]=p[6]+ea[6];c[7]=p[7]+ea[7];c[8]=p[8]+ea[8];c[9]=p[9]+ea[9];c[10]=p[10]+ea[10];c[11]=p[11]+ea[11];c[12]=p[12]+ea[12];c[13]=p[13]+ea[13];c[14]=p[14]+ea[14];c[15]=p[15]+ea[15];return c}function la(c,p,ea){c[0]=p[0]-
ea[0];c[1]=p[1]-ea[1];c[2]=p[2]-ea[2];c[3]=p[3]-ea[3];c[4]=p[4]-ea[4];c[5]=p[5]-ea[5];c[6]=p[6]-ea[6];c[7]=p[7]-ea[7];c[8]=p[8]-ea[8];c[9]=p[9]-ea[9];c[10]=p[10]-ea[10];c[11]=p[11]-ea[11];c[12]=p[12]-ea[12];c[13]=p[13]-ea[13];c[14]=p[14]-ea[14];c[15]=p[15]-ea[15];return c}function va(c,p,ea){c[0]=p[0]*ea;c[1]=p[1]*ea;c[2]=p[2]*ea;c[3]=p[3]*ea;c[4]=p[4]*ea;c[5]=p[5]*ea;c[6]=p[6]*ea;c[7]=p[7]*ea;c[8]=p[8]*ea;c[9]=p[9]*ea;c[10]=p[10]*ea;c[11]=p[11]*ea;c[12]=p[12]*ea;c[13]=p[13]*ea;c[14]=p[14]*ea;c[15]=
p[15]*ea;return c}function Ja(c,p,ea,n){c[0]=p[0]+ea[0]*n;c[1]=p[1]+ea[1]*n;c[2]=p[2]+ea[2]*n;c[3]=p[3]+ea[3]*n;c[4]=p[4]+ea[4]*n;c[5]=p[5]+ea[5]*n;c[6]=p[6]+ea[6]*n;c[7]=p[7]+ea[7]*n;c[8]=p[8]+ea[8]*n;c[9]=p[9]+ea[9]*n;c[10]=p[10]+ea[10]*n;c[11]=p[11]+ea[11]*n;c[12]=p[12]+ea[12]*n;c[13]=p[13]+ea[13]*n;c[14]=p[14]+ea[14]*n;c[15]=p[15]+ea[15]*n;return c}function Ba(c,p){return c[0]===p[0]&&c[1]===p[1]&&c[2]===p[2]&&c[3]===p[3]&&c[4]===p[4]&&c[5]===p[5]&&c[6]===p[6]&&c[7]===p[7]&&c[8]===p[8]&&c[9]===
p[9]&&c[10]===p[10]&&c[11]===p[11]&&c[12]===p[12]&&c[13]===p[13]&&c[14]===p[14]&&c[15]===p[15]}function Sa(c,p){if(c===p)return!0;const ea=c[0],n=c[1],J=c[2],T=c[3],V=c[4],ia=c[5],fa=c[6],K=c[7],P=c[8],ca=c[9],oa=c[10],pa=c[11],ua=c[12],wa=c[13],za=c[14];c=c[15];const Ga=p[0],Ca=p[1],Da=p[2],Ea=p[3],Fa=p[4],Pa=p[5],ra=p[6],ab=p[7],Ta=p[8],Va=p[9],a=p[10],$a=p[11],Ra=p[12],yb=p[13],tb=p[14];p=p[15];return Math.abs(ea-Ga)<=Y.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Ga))&&Math.abs(n-Ca)<=Y.EPSILON*Math.max(1,
Math.abs(n),Math.abs(Ca))&&Math.abs(J-Da)<=Y.EPSILON*Math.max(1,Math.abs(J),Math.abs(Da))&&Math.abs(T-Ea)<=Y.EPSILON*Math.max(1,Math.abs(T),Math.abs(Ea))&&Math.abs(V-Fa)<=Y.EPSILON*Math.max(1,Math.abs(V),Math.abs(Fa))&&Math.abs(ia-Pa)<=Y.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Pa))&&Math.abs(fa-ra)<=Y.EPSILON*Math.max(1,Math.abs(fa),Math.abs(ra))&&Math.abs(K-ab)<=Y.EPSILON*Math.max(1,Math.abs(K),Math.abs(ab))&&Math.abs(P-Ta)<=Y.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ta))&&Math.abs(ca-Va)<=Y.EPSILON*
Math.max(1,Math.abs(ca),Math.abs(Va))&&Math.abs(oa-a)<=Y.EPSILON*Math.max(1,Math.abs(oa),Math.abs(a))&&Math.abs(pa-$a)<=Y.EPSILON*Math.max(1,Math.abs(pa),Math.abs($a))&&Math.abs(ua-Ra)<=Y.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Ra))&&Math.abs(wa-yb)<=Y.EPSILON*Math.max(1,Math.abs(wa),Math.abs(yb))&&Math.abs(za-tb)<=Y.EPSILON*Math.max(1,Math.abs(za),Math.abs(tb))&&Math.abs(c-p)<=Y.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))}function Oa(c){const p=Y.EPSILON,ea=c[0],n=c[1],J=c[2],T=c[4],V=c[5],ia=c[6],
fa=c[8],K=c[9];c=c[10];return Math.abs(1-(ea*ea+T*T+fa*fa))<=p&&Math.abs(1-(n*n+V*V+K*K))<=p&&Math.abs(1-(J*J+ia*ia+c*c))<=p}const Ia=d.create();d=Object.freeze({__proto__:null,copy:X,set:r,identity:D,transpose:z,invert:w,adjoint:t,determinant:q,multiply:H,translate:N,scale:O,rotate:u,rotateX:B,rotateY:b,rotateZ:f,fromTranslation:m,fromScaling:F,fromRotation:l,fromXRotation:C,fromYRotation:y,fromZRotation:I,fromRotationTranslation:Q,fromQuat2:R,getTranslation:da,getScaling:L,getRotation:G,fromRotationTranslationScale:U,
fromRotationTranslationScaleOrigin:M,fromQuat:x,frustum:e,perspective:g,perspectiveFromFieldOfView:A,ortho:S,lookAt:aa,targetTo:ja,str:na,frob:ta,add:ma,subtract:la,multiplyScalar:va,multiplyScalarAndAdd:Ja,exactEquals:Ba,equals:Sa,isOrthoNormal:Oa,mul:H,sub:la});k.add=ma;k.adjoint=t;k.copy=X;k.determinant=q;k.equals=Sa;k.exactEquals=Ba;k.frob=ta;k.fromQuat=x;k.fromQuat2=R;k.fromRotation=l;k.fromRotationTranslation=Q;k.fromRotationTranslationScale=U;k.fromRotationTranslationScaleOrigin=M;k.fromScaling=
F;k.fromTranslation=m;k.fromXRotation=C;k.fromYRotation=y;k.fromZRotation=I;k.frustum=e;k.getRotation=G;k.getScaling=L;k.getTranslation=da;k.identity=D;k.invert=w;k.isOrthoNormal=Oa;k.lookAt=aa;k.mat4=d;k.mul=H;k.multiply=H;k.multiplyScalar=va;k.multiplyScalarAndAdd=Ja;k.ortho=S;k.perspective=g;k.perspectiveFromFieldOfView=A;k.rotate=u;k.rotateX=B;k.rotateY=b;k.rotateZ=f;k.scale=O;k.set=r;k.str=na;k.sub=la;k.subtract=la;k.targetTo=ja;k.translate=N;k.transpose=z})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(k,d,Y,X,r){function D(){return!!d._pe}function z(){return!!r("esri-wasm")}function w(){return u?u:u=(new Promise((b,f)=>k(["./pe-wasm"],b,f))).then(b=>b.peWasm).then(({default:b})=>b({locateFile:f=>X.getAssetUrl(`esri/geometry/support/${f}`)})).then(b=>{t(b)})}function t(b){function f(l,C,y){l[C]=y(l[C])}d._pe=b;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=
function(l){function C(){return l.apply(this,arguments)||this}Y._inheritsLoose(C,l);C.prototype.destroy=function(){d._pe.destroy(this)};return C}(d._pe.PeGCSExtent);b=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var m of b)f(m.prototype,"getName",l=>function(){return l.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const l of[d._pe.PeGeogtran,d._pe.PeProjcs])f(l.prototype,"getParameters",C=>function(){const y=
Array(d.PeDefs.PE_PARM_MAX);let I=C.call(this);for(let Q=0;Q<y.length;Q++){const R=d._pe.getValue(I,"*");y[Q]=R?d._pe.wrapPointer(R,d._pe.PeParameter):null;I+=Int32Array.BYTES_PER_ELEMENT}return y});f(d._pe.PeHorizon.prototype,"getCoord",l=>function(){const C=this.getSize();if(!C)return null;const y=[],I=l.call(this);O(y,C,I);return y});f(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",l=>{const C=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let y=null;var I=l.call(this);if(!d._pe.compare(I,
d._pe.NULL)){y=[I];const Q=this.getSteps();if(1<Q){I=d._pe.getPointer(I);for(let R=1;R<Q;R++)y.push(d._pe.wrapPointer(I+C*R,d._pe.PeGTlistExtendedGTs))}}return y}});const F=d._pe._pe_getPeHorizonSize();m=l=>function(){let C=this._cache;C||(this._cache=C=new Map);if(C.has(l))return C.get(l);let y=null;var I=l.call(this);if(!d._pe.compare(I,d._pe.NULL)){y=[I];const Q=I.getNump();if(1<Q){I=d._pe.getPointer(I);for(let R=1;R<Q;R++)y.push(d._pe.wrapPointer(I+F*R,d._pe.PeHorizon))}}C.set(l,y);return y};
f(d._pe.PeProjcs.prototype,"horizonGcsGenerate",m);f(d._pe.PeProjcs.prototype,"horizonPcsGenerate",m);d._pe.PeObject.prototype.toString=function(l=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const C=d._pe.getPointer(this),y=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(C,l,y))}}function q(b){if(b){var f=d._pe.getClass(b);f&&(f=d._pe.getCache(f))&&(b=d._pe.getPointer(b))&&delete f[b]}}function H(b,f){const m=[];f=Array(f);for(let F=
0;F<b;F++)m.push(d._pe.ensureInt8(f));return m}function N(b){let f;Array.isArray(b[0])?(f=[],b.forEach(m=>{f.push(m[0],m[1])})):f=b;return f}function O(b,f,m,F=!1){if(F)for(F=0;F<2*f;F++)b[F]=d._pe.getValue(m+F*Float64Array.BYTES_PER_ELEMENT,"double");else{F=0===b.length;for(let l=0;l<f;l++)F&&(b[l]=Array(2)),b[l][0]=d._pe.getValue(m,"double"),b[l][1]=d._pe.getValue(m+Float64Array.BYTES_PER_ELEMENT,"double"),m+=2*Float64Array.BYTES_PER_ELEMENT}}let u;d._pe=null;d.PeCSTransformations=void 0;(function(b){function f(l,
C,y){d._pe.ensureCache.prepare();var I=N(y);const Q=y===I;I=d._pe.ensureFloat64(I);(l=d._pe._pe_geog_to_proj(d._pe.getPointer(l),C,I))&&O(y,C,I,Q);return l}function m(l,C,y){return F(l,C,y,0)}function F(l,C,y,I){d._pe.ensureCache.prepare();var Q=N(y);const R=y===Q;Q=d._pe.ensureFloat64(Q);(l=d._pe._pe_proj_to_geog_center(d._pe.getPointer(l),C,Q,I))&&O(y,C,Q,R);return l}b.geogToProj=f;b.projGeog=function(l,C,y,I){switch(I){case d.PeDefs.PE_TRANSFORM_P_TO_G:return m(l,C,y);case d.PeDefs.PE_TRANSFORM_G_TO_P:return f(l,
C,y)}return 0};b.projToGeog=m;b.projToGeogCenter=F})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(b){b.init=function(){b.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=
d._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;b.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;
b.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
b.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(b){function f(C,y){let I=null,Q=m[C];Q||(Q={},m[C]=Q);Q.hasOwnProperty(String(y))?I=Q[y]:(C=d._pe.PeFactory.prototype.factoryByType(C,y),d._pe.compare(C,d._pe.NULL)||(I=C,Q[y]=I));return I=l(I)}const m={},F={},l=C=>
{if(C){const y=C.getType();switch(y){case d.PeDefs.PE_TYPE_GEOGCS:C=d._pe.castObject(C,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:C=d._pe.castObject(C,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:C=d._pe.castObject(C,d._pe.PeGeogtran);break;default:y&d.PeDefs.PE_TYPE_UNIT&&(C=d._pe.castObject(C,d._pe.PeUnit))}}return C};b.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(C){return f(d.PeDefs.PE_TYPE_COORDSYS,C)};b.factoryByType=f;b.fromString=function(C,
y){let I=null,Q=F[C];Q||(Q={},F[C]=Q);Q.hasOwnProperty(y)?I=Q[y]:(C=d._pe.PeFactory.prototype.fromString(C,y),d._pe.compare(C,d._pe.NULL)||(I=C,Q[y]=I));return I=l(I)};b.geogcs=function(C){return f(d.PeDefs.PE_TYPE_GEOGCS,C)};b.geogtran=function(C){return f(d.PeDefs.PE_TYPE_GEOGTRAN,C)};b.getCode=function(C){return d._pe.PeFactory.prototype.getCode(C)};b.projcs=function(C){return f(d.PeDefs.PE_TYPE_PROJCS,C)};b.unit=function(C){return f(d.PeDefs.PE_TYPE_UNIT,C)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=
null;d.PeGTlistExtended=void 0;(function(b){let f;b.init=function(){b.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;f=d._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(m,F,l,C,y,I){let Q=null;const R=new d._pe.PeInteger(I);try{const da=d._pe.PeGTlistExtended.prototype.getGTlist(m,F,l,C,y,R);if(I=R.val)if(Q=[da],1<I){const L=d._pe.getPointer(da);for(m=1;m<I;m++)Q.push(d._pe.wrapPointer(L+f*m,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(R)}return Q}})(d.PeGTlistExtended||
(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(b){b.destroy=function(f){if(f&&f.length){for(const m of f)q(m),m.getEntries().forEach(F=>{q(F);F=F.getGeogtran();q(F);F.getParameters().forEach(q);[F.getGeogcs1(),F.getGeogcs2()].forEach(l=>{q(l);const C=l.getDatum();q(C);q(C.getSpheroid());q(l.getPrimem());q(l.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(f[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(b){b.geogToGeog=
function(f,m,F,l,C){d._pe.ensureCache.prepare();var y=N(F);const I=F===y;y=d._pe.ensureFloat64(y);let Q=0;l&&(Q=d._pe.ensureFloat64(l));(f=d._pe._pe_geog_to_geog(d._pe.getPointer(f),m,y,Q,C))&&O(F,m,y,I);return f}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(b){const f=(F,l,C,y,I,Q)=>{d._pe.ensureCache.prepare();switch(F){case "dd":var R=d._pe._pe_geog_to_dd;var da=d.PeDefs.PE_DD_MAX;break;case "ddm":R=d._pe._pe_geog_to_ddm;da=d.PeDefs.PE_DDM_MAX;break;case "dms":R=
d._pe._pe_geog_to_dms,da=d.PeDefs.PE_DMS_MAX}F=0;l&&(F=d._pe.getPointer(l));l=N(y);l=d._pe.ensureFloat64(l);da=H(C,da);y=d._pe.ensureInt32(da);if(I=R(F,C,l,I,y))for(R=0;R<C;R++)Q[R]=d._pe.UTF8ToString(da[R]);return I},m=(F,l,C,y,I)=>{d._pe.ensureCache.prepare();switch(F){case "dd":var Q=d._pe._pe_dd_to_geog;break;case "ddm":Q=d._pe._pe_ddm_to_geog;break;case "dms":Q=d._pe._pe_dms_to_geog}F=0;l&&(F=d._pe.getPointer(l));l=y.map(R=>d._pe.ensureString(R));y=d._pe.ensureInt32(l);l=d._pe.ensureFloat64(Array(2*
C));(Q=Q(F,C,y,l))&&O(I,C,l);return Q};b.geog_to_dms=function(F,l,C,y,I){return f("dms",F,l,C,y,I)};b.dms_to_geog=function(F,l,C,y){return m("dms",F,l,C,y)};b.geog_to_ddm=function(F,l,C,y,I){return f("ddm",F,l,C,y,I)};b.ddm_to_geog=function(F,l,C,y){return m("ddm",F,l,C,y)};b.geog_to_dd=function(F,l,C,y,I){return f("dd",F,l,C,y,I)};b.dd_to_geog=function(F,l,C,y){return m("dd",F,l,C,y)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=
d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(f,m,F,l,C,y,I){d._pe.ensureCache.prepare();let Q=0;f&&(Q=d._pe.getPointer(f));f=N(F);F=d._pe.ensureFloat64(f);f=H(m,d.PeDefs.PE_MGRS_MAX);
const R=d._pe.ensureInt32(f);if(l=d._pe._pe_geog_to_mgrs_extended(Q,m,F,l,C,y,R))for(C=0;C<m;C++)I[C]=d._pe.UTF8ToString(f[C]);return l};b.mgrs_to_geog_extended=function(f,m,F,l,C){d._pe.ensureCache.prepare();let y=0;f&&(y=d._pe.getPointer(f));f=F.map(I=>d._pe.ensureString(I));F=d._pe.ensureInt32(f);f=d._pe.ensureFloat64(Array(2*m));(l=d._pe._pe_mgrs_to_geog_extended(y,m,F,l,f))&&O(C,m,f);return l}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(b){b.geog_to_usng=function(f,
m,F,l,C,y,I){d._pe.ensureCache.prepare();let Q=0;f&&(Q=d._pe.getPointer(f));f=N(F);F=d._pe.ensureFloat64(f);f=H(m,d.PeDefs.PE_MGRS_MAX);const R=d._pe.ensureInt32(f);if(l=d._pe._pe_geog_to_usng(Q,m,F,l,C,y,R))for(C=0;C<m;C++)I[C]=d._pe.UTF8ToString(f[C]);return l};b.usng_to_geog=function(f,m,F,l){d._pe.ensureCache.prepare();var C=0;f&&(C=d._pe.getPointer(f));f=F.map(y=>d._pe.ensureString(y));F=d._pe.ensureInt32(f);f=d._pe.ensureFloat64(Array(2*m));(C=d._pe._pe_usng_to_geog(C,m,F,f))&&O(l,m,f);return C}})(d.PeNotationUsng||
(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(f,m,F,l,C){d._pe.ensureCache.prepare();var y=0;f&&(y=d._pe.getPointer(f));f=N(F);F=d._pe.ensureFloat64(f);f=H(m,d.PeDefs.PE_UTM_MAX);const I=d._pe.ensureInt32(f);if(l=d._pe._pe_geog_to_utm(y,m,F,
l,I))for(y=0;y<m;y++)C[y]=d._pe.UTF8ToString(f[y]);return l};b.utm_to_geog=function(f,m,F,l,C){d._pe.ensureCache.prepare();let y=0;f&&(y=d._pe.getPointer(f));f=F.map(I=>d._pe.ensureString(I));F=d._pe.ensureInt32(f);f=d._pe.ensureFloat64(Array(2*m));(l=d._pe._pe_utm_to_geog(y,m,F,l,f))&&O(C,m,f);return l}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(b){const f=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=
d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(m,F=b.PE_PCSINFO_OPTION_DOMAIN){let l,C;f.has(m)&&(C=f.get(m),C[F]&&(l=C[F]));l||(l=d._pe.PePCSInfo.prototype.generate(m,F),C||(C=[],f.set(m,C)),C[F]=l);return l}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(b){b.version_string=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||
(d.PeVersion={}));const B=Object.freeze({__proto__:null,get _pe(){return d._pe},isLoaded:D,isSupported:z,load:w,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},
get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:t});d._init=t;d.isLoaded=D;d.isSupported=z;d.load=w;d.pe=B})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(k,d){const Y=Math.PI/180;var X=d.earth.radius;const r=d.earth.eccentricitySquared;X={a1:X*r,a2:X*r*X*r,a3:X*r*r/2,a4:X*r*X*r*2.5,a5:X*r+X*r*r/2,a6:1-r};d={4267:{a:6378206.4,f:1/
294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};k.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=X;k.spheroids=d;k.toRadians=Y;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(k){return function(){function d(X){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(X&&X.steps)for(const r of X.steps)r instanceof k?this.steps.push(r):this.steps.push(new k({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}d.cacheKey=function(X,r){return[void 0!==X.wkid&&null!==X.wkid?X.wkid.toString():"-1",void 0!==X.wkt&&null!==X.wkt?X.wkt.toString():"",void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():""].join()};
d.fromGE=function(X){const r=new d;let D="";for(const z of X.steps)X=k.fromGE(z),r.steps.push(X),D+=X.uid.toString()+",";r._cached_projection={};r._gtlistentry=null;r._chain=D;return r};var Y=d.prototype;Y.getInverse=function(){const X=new d;X.steps=[];for(let r=this.steps.length-1;0<=r;r--)X.steps.push(this.steps[r].getInverse());return X};Y.getGTListEntry=function(){let X="";for(const r of this.steps)X+=r.uid.toString()+",";X!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
X);return this._gtlistentry};Y.assignCachedGe=function(X,r,D){this._cached_projection[d.cacheKey(X,r)]=D};Y.getCachedGeTransformation=function(X,r){let D="";for(const z of this.steps)D+=z.uid.toString()+",";D!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=D);X=this._cached_projection[d.cacheKey(X,r)];return void 0===X?null:X};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){let d=
0;return function(){function Y(X=null){this.uid=d++;X?(this._wkt=void 0!==X.wkt?X.wkt:null,this._wkid=void 0!==X.wkid?X.wkid:-1,this._isInverse=void 0!==X.isInverse?!0===X.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}Y.fromGE=function(X){const r=new Y;r._wkt=X.wkt;r._wkid=X.wkid;r._isInverse=X.isInverse;return r};Y.prototype.getInverse=function(){const X=new Y;X._wkt=this.wkt;X._wkid=this._wkid;X._isInverse=!this.isInverse;return X};k._createClass(Y,[{key:"wkt",get:function(){return this._wkt},
set:function(X){this._wkt=X;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(X){this._wkid=X;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(X){this._isInverse=X;this.uid=d++}}]);return Y}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(k,d,Y,X){k.getGeometryZScaler=function(r,D,z){if(d.isNone(D)||d.isNone(z)||z.vcsWkid||X.equals(D,z))return null;
D=Y.getMetersPerVerticalUnitForSR(D);z=Y.getMetersPerVerticalUnitForSR(z);const w=D/z;if(1===w)return null;switch(r){case "point":case "esriGeometryPoint":return t=>{t&&null!=t.z&&(t.z*=w)};case "polyline":case "esriGeometryPolyline":return t=>{if(t)for(const q of t.paths)for(const H of q)2<H.length&&(H[2]*=w)};case "polygon":case "esriGeometryPolygon":return t=>{if(t)for(const q of t.rings)for(const H of q)2<H.length&&(H[2]*=w)};case "multipoint":case "esriGeometryMultipoint":return t=>{if(t)for(const q of t.points)2<
q.length&&(q[2]*=w)};case "extent":case "esriGeometryExtent":return t=>{t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=w,t.zmax*=w)};default:return null}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(k){let d=function(z,w,t){this.x=z;this.y=w;this.spatialReference=t;this.m=this.z=void 0},Y=function(z,w,t,q){this.rings=z;this.spatialReference=w;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);q&&(this.hasM=q)},X=function(z,w,t,
q){this.paths=z;this.spatialReference=w;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);q&&(this.hasM=q)},r=function(z,w,t,q){this.points=z;this.spatialReference=w;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);q&&(this.hasM=q)},D=function(z,w,t,q,H){this.xmin=z;this.ymin=w;this.xmax=t;this.ymax=q;this.spatialReference=H;this.mmax=this.mmin=this.zmax=this.zmin=void 0};k.jsonAdapter={convertToGEGeometry:function(z,w){return null==w?null:z.convertJSONToGeometry(w)},exportPoint:function(z,w,t){t=new d(z.getPointX(w),
z.getPointY(w),t);const q=z.hasZ(w),H=z.hasM(w);q&&(t.z=z.getPointZ(w));H&&(t.m=z.getPointM(w));return t},exportPolygon:function(z,w,t){return new Y(z.exportPaths(w),t,z.hasZ(w),z.hasM(w))},exportPolyline:function(z,w,t){return new X(z.exportPaths(w),t,z.hasZ(w),z.hasM(w))},exportMultipoint:function(z,w,t){return new r(z.exportPoints(w),t,z.hasZ(w),z.hasM(w))},exportExtent:function(z,w,t){var q=z.hasZ(w);const H=z.hasM(w);t=new D(z.getXMin(w),z.getYMin(w),z.getXMax(w),z.getYMax(w),t);q&&(q=z.getZExtent(w),
t.zmin=q.vmin,t.zmax=q.vmax);H&&(z=z.getMExtent(w),t.mmin=z.vmin,t.mmax=z.vmax);return t}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,d,Y,X,r,D,z,w,t,q,H,N,O,u,B,b,f,m,F,l,C,y,I){function Q(x){return x.every(e=>"exceedslimit"!==e.statisticType)}const R=new Set,da=new D.MemCacheStorage(2E6);let L=0,G=function(){function x(g){this.capabilities={query:b.queryCapabilities};this.geometryType=g.geometryType;this.hasM=g.hasM;this.hasZ=g.hasZ;this.objectIdField=g.objectIdField;this.spatialReference=g.spatialReference;this.definitionExpression=g.definitionExpression;this.featureStore=g.featureStore;this.aggregateAdapter=g.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=g.timeInfo;g.cacheSpatialQueries&&(this._geometryQueryCache=new D.MemCache(L++ +"$$",da));this.fieldsIndex=new C(g.fields);g.scheduler&&g.priority&&(this._frameTask=g.scheduler.registerTask(g.priority))}var e=x.prototype;e.destroy=function(){this._frameTask=r.removeMaybe(this._frameTask);this.clearCache();r.destroyMaybe(this._geometryQueryCache);this._changeHandle=r.removeMaybe(this._changeHandle);r.destroyMaybe(this.fieldsIndex)};
e.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};e.executeQuery=function(){var g=d._asyncToGenerator(function*(A={},S){let aa=X.clone(A),ja;try{aa=yield this._schedule(()=>l.normalizeQuery(aa,this.definitionExpression,this.spatialReference),S),aa=yield this._reschedule(()=>this._checkQuerySupport(aa),S),ja=yield this._reschedule(()=>this._executeGeometryQuery(aa,S),S),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(aa),
S),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(aa),S),ja=yield this._reschedule(()=>ja.executeTimeQuery(aa),S),ja=yield this._reschedule(()=>ja.executeAttributesQuery(aa),S)}catch(na){if(na!==l.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new f([],null,this)}return ja.createQueryResponse(aa)});return function(){return g.apply(this,arguments)}}();e.executeQueryForCount=function(){var g=d._asyncToGenerator(function*(A={},S){let aa=X.clone(A);aa.returnGeometry=!1;aa.returnCentroid=!1;aa.outSR=null;
try{aa=yield this._schedule(()=>l.normalizeQuery(aa,this.definitionExpression,this.spatialReference),S);aa=yield this._reschedule(()=>this._checkQuerySupport(aa),S);let ja=yield this._reschedule(()=>this._executeGeometryQuery(aa,S),S);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(aa),S);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(aa),S);ja=yield this._reschedule(()=>ja.executeTimeQuery(aa),S);ja=yield this._reschedule(()=>ja.executeAttributesQuery(aa),S);return ja.createQueryResponseForCount(aa)}catch(ja){if(ja!==
l.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}});return function(){return g.apply(this,arguments)}}();e.executeQueryForExtent=function(){var g=d._asyncToGenerator(function*(A={},S){let aa=X.clone(A),ja;A=aa.outSR;try{aa=yield this._schedule(()=>l.normalizeQuery(aa,this.definitionExpression,this.spatialReference),S);aa=yield this._reschedule(()=>this._checkQuerySupport(aa),S);aa.returnGeometry=!0;aa.returnCentroid=!1;aa.outSR=null;ja=yield this._reschedule(()=>this._executeGeometryQuery(aa,S),S);ja=
yield this._reschedule(()=>ja.executeAggregateIdsQuery(aa),S);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(aa),S);ja=yield this._reschedule(()=>ja.executeTimeQuery(aa),S);ja=yield this._reschedule(()=>ja.executeAttributesQuery(aa),S);const na=ja.size;if(!na)return{count:na,extent:null};w.set(M,w.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ja.items,la=>w.expandWithAABB(M,la),U);const ta={xmin:M[0],ymin:M[1],xmax:M[3],ymax:M[4],spatialReference:l.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(M[2])&&isFinite(M[5])&&(ta.zmin=M[2],ta.zmax=M[5]);const ma=B.project(ta,ja.spatialReference,A);ma.spatialReference=l.cleanFromGeometryEngine(A||this.spatialReference);if(0===ma.xmax-ma.xmin){const la=z.getMetersPerUnitForSR(ma.spatialReference);ma.xmin-=la;ma.xmax+=la}if(0===ma.ymax-ma.ymin){const la=z.getMetersPerUnitForSR(ma.spatialReference);ma.ymin-=la;ma.ymax+=la}if(this.hasZ&&null!=ma.zmin&&null!=ma.zmax&&0===ma.zmax-ma.zmin){const la=z.getMetersPerUnitForSR(ma.spatialReference);
ma.zmin-=la;ma.zmax+=la}return{count:na,extent:ma}}catch(na){if(na===l.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw na;}});return function(){return g.apply(this,arguments)}}();e.executeQueryForIds=function(){var g=d._asyncToGenerator(function*(A={},S){return this.executeQueryForIdSet(A,S).then(aa=>Array.from(aa))});return function(){return g.apply(this,arguments)}}();e.executeQueryForIdSet=function(){var g=d._asyncToGenerator(function*(A={},S){let aa=X.clone(A),ja;aa.returnGeometry=
!1;aa.returnCentroid=!1;aa.outSR=null;try{aa=yield this._schedule(()=>l.normalizeQuery(aa,this.definitionExpression,this.spatialReference),S);aa=yield this._reschedule(()=>this._checkQuerySupport(aa),S);ja=yield this._reschedule(()=>this._executeGeometryQuery(aa,S),S);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(aa),S);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(aa),S);ja=yield this._reschedule(()=>ja.executeTimeQuery(aa),S);ja=yield this._reschedule(()=>ja.executeAttributesQuery(aa),
S);const na=ja.items,ta=new Set;yield this._reschedule(()=>{for(const ma of na)ta.add(ja.featureAdapter.getObjectId(ma))},S);return ta}catch(na){if(na===l.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw na;}});return function(){return g.apply(this,arguments)}}();e.executeQueryForSnapping=function(){var g=d._asyncToGenerator(function*(A,S){const {point:aa,distance:ja,types:na}=A;if(0===na)return{candidates:[]};const ta=yield this._reschedule(()=>this._checkQuerySupport(A.query),S),ma=!O.equals(aa.spatialReference,
this.spatialReference);ma&&(yield B.checkProjectionSupport(aa.spatialReference,this.spatialReference));var la="number"===typeof ja?ja:ja.x,va="number"===typeof ja?ja:ja.y;la={xmin:aa.x-la,xmax:aa.x+la,ymin:aa.y-va,ymax:aa.y+va,spatialReference:aa.spatialReference};la=ma?B.project(la,this.spatialReference):la;if(!la)return{candidates:[]};va=(yield N.normalizeCentralMeridian(H.fromJSON(aa),null,{signal:S}))[0];const Ja=(yield N.normalizeCentralMeridian(H.fromJSON(la),null,{signal:S}))[0];if(r.isNone(va)||
r.isNone(Ja))return{candidates:[]};let Ba=new f(this._searchFeatures(this._getQueryBBoxes(Ja.toJSON())),null,this);Ba=yield this._reschedule(()=>Ba.executeObjectIdsQuery(ta),S);Ba=yield this._reschedule(()=>Ba.executeTimeQuery(ta),S);Ba=yield this._reschedule(()=>Ba.executeAttributesQuery(ta),S);S=va.toJSON();S=ma?B.project(S,this.spatialReference):S;return Ba.createSnappingResponse({...A,point:S,distance:ma?Math.max(la.xmax-la.xmin,la.ymax-la.ymin)/2:ja},aa.spatialReference)});return function(A,
S){return g.apply(this,arguments)}}();e.executeQueryForLatestObservations=function(){var g=d._asyncToGenerator(function*(A={},S){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new Y("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:A,timeInfo:this.timeInfo});let aa=X.clone(A),ja;try{aa=yield this._schedule(()=>l.normalizeQuery(aa,this.definitionExpression,this.spatialReference),S),aa=yield this._reschedule(()=>this._checkQuerySupport(aa),S),ja=yield this._reschedule(()=>
this._executeGeometryQuery(aa,S),S),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(aa),S),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(aa),S),ja=yield this._reschedule(()=>ja.executeTimeQuery(aa),S),ja=yield this._reschedule(()=>ja.executeAttributesQuery(aa),S),ja=yield this._reschedule(()=>ja.filterLatest(),S)}catch(na){if(na!==l.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new f([],null,this)}return ja.createQueryResponse(aa)});return function(){return g.apply(this,arguments)}}();
e.executeQueryForSummaryStatistics=function(){var g=d._asyncToGenerator(function*(A={},S,aa){const {field:ja,normalizationField:na,valueExpression:ta}=S;return(yield this._getQueryEngineResultForStats(A,{field:ja,normalizationField:na,valueExpression:ta},aa)).createSummaryStatisticsResponse(A,S)});return function(){return g.apply(this,arguments)}}();e.executeQueryForUniqueValues=function(){var g=d._asyncToGenerator(function*(A={},S,aa){const {field:ja,valueExpression:na}=S;return(yield this._getQueryEngineResultForStats(A,
{field:ja,valueExpression:na},aa)).createUniqueValuesResponse(A,S)});return function(){return g.apply(this,arguments)}}();e.executeQueryForClassBreaks=function(){var g=d._asyncToGenerator(function*(A={},S,aa){const {field:ja,normalizationField:na,valueExpression:ta}=S;return(yield this._getQueryEngineResultForStats(A,{field:ja,normalizationField:na,valueExpression:ta},aa)).createClassBreaksResponse(A,S)});return function(){return g.apply(this,arguments)}}();e.executeQueryForHistogram=function(){var g=
d._asyncToGenerator(function*(A={},S,aa){const {field:ja,normalizationField:na,valueExpression:ta}=S;return(yield this._getQueryEngineResultForStats(A,{field:ja,normalizationField:na,valueExpression:ta},aa)).createHistogramResponse(A,S)});return function(){return g.apply(this,arguments)}}();e._schedule=function(){var g=d._asyncToGenerator(function*(A,S){return r.isSome(this._frameTask)?this._frameTask.schedule(A,S):A(I.noBudget)});return function(A,S){return g.apply(this,arguments)}}();e._reschedule=
function(){var g=d._asyncToGenerator(function*(A,S){return r.isSome(this._frameTask)?this._frameTask.reschedule(A,S):A(I.noBudget)});return function(A,S){return g.apply(this,arguments)}}();e._getAll=function(){if(!this._allItems){const g=[];this.featureStore.forEach(A=>g.push(A));this._allItems=new f(g,null,this)}return this._allItems};e._executeGeometryQuery=function(){var g=d._asyncToGenerator(function*(A,S){var aa=this;const {geometry:ja,outSR:na,spatialRel:ta,returnGeometry:ma,returnCentroid:la}=
A,va=ma||la,Ja=O.isValid(na)&&!O.equals(this.spatialReference,na),Ba=this._geometryQueryCache?Ja&&va?JSON.stringify({geometry:ja,spatialRelationship:ta,outSpatialReference:na}):JSON.stringify({geometry:ja,spatialRelationship:ta}):null;if(Ba){var Sa=this._geometryQueryCache.get(Ba);if(!r.isUndefined(Sa))return Sa}Sa=function(){var p=d._asyncToGenerator(function*(ea){if(Ja&&va)return ea=yield ea.project(na),Ba&&aa._geometryQueryCache.put(Ba,ea,ea.size||1),ea;Ba&&aa._geometryQueryCache.put(Ba,ea,ea.size||
1);return ea});return function(ea){return p.apply(this,arguments)}}();if(!ja)return Sa(this._getAll());const Oa=this.featureAdapter;if("esriSpatialRelDisjoint"===ta){A=this._searchFeatures(this._getQueryBBoxes(ja));if(!A.length)return Sa(this._getAll());let p,ea;const n=new Set;for(var Ia of A)n.add(Oa.getObjectId(Ia));yield this._reschedule(()=>{let J=0;p=Array(n.size);this.featureStore.forEach(T=>p[J++]=T);ea=n},S);A=yield this._reschedule(d._asyncToGenerator(function*(){const J=yield m.getSpatialQueryOperator(ta,
ja,aa.geometryType,aa.hasZ,aa.hasM);return new f(yield aa._runSpatialFilter(p,T=>!ea.has(Oa.getObjectId(T))||J(Oa.getGeometry(T)),S),ja,aa)}),S);return Sa(A)}Ia=this._searchFeatures(this._getQueryBBoxes(ja));if(!Ia.length)return Sa=new f([],ja,this),Ba&&this._geometryQueryCache.put(Ba,Sa,Sa.size||1),Sa;if(this._canExecuteSoloPass(ja,A))return Sa(new f(Ia,ja,this));const c=yield m.getSpatialQueryOperator(ta,ja,this.geometryType,this.hasZ,this.hasM);A=yield this._runSpatialFilter(Ia,p=>c(Oa.getGeometry(p)),
S);return Sa(new f(A,ja,this))});return function(A,S){return g.apply(this,arguments)}}();e._runSpatialFilter=function(){var g=d._asyncToGenerator(function*(A,S,aa){var ja=this;if(!S)return A;if(r.isNone(this._frameTask))return A.filter(la=>S(la));let na=0;const ta=[],ma=function(){var la=d._asyncToGenerator(function*(va){for(;na<A.length;){const Ja=A[na++];S(Ja)&&(ta.push(Ja),va.madeProgress());va.done&&(yield ja._reschedule(Ba=>ma(Ba),aa))}});return function(va){return la.apply(this,arguments)}}();
return this._reschedule(la=>ma(la),aa).then(()=>ta)});return function(A,S,aa){return g.apply(this,arguments)}}();e._canExecuteSoloPass=function(g,A){const {geometryType:S}=this;({spatialRel:A}=A);return m.canQueryWithRBush(g)&&("esriSpatialRelEnvelopeIntersects"===A||"esriGeometryPoint"===S&&("esriSpatialRelIntersects"===A||"esriSpatialRelContains"===A||"esriSpatialRelWithin"===A))};e._getQueryBBoxes=function(g){if(m.canQueryWithRBush(g)){if(H.isExtent(g))return[t.fromValues(g.xmin,g.ymin,g.xmax,
g.ymax)];if(H.isPolygon(g))return g.rings.map(A=>t.fromValues(Math.min(A[0][0],A[2][0]),Math.min(A[0][1],A[2][1]),Math.max(A[0][0],A[2][0]),Math.max(A[0][1],A[2][1])))}return[q.getBoundsXY(t.create(),g)]};e._searchFeatures=function(g){for(const aa of g)this.featureStore.forEachInBounds(aa,ja=>{R.add(ja)});const A=Array(R.size);let S=0;R.forEach(aa=>A[S++]=aa);R.clear();return A};e._checkStatisticsSupport=function(){var g=d._asyncToGenerator(function*(A,S){if(0>A.distance||null!=A.geometryPrecision||
A.multipatchOption||A.pixelSize||A.relationParam||A.text||A.outStatistics||A.groupByFieldsForStatistics||A.having||A.orderByFields)throw new Y("feature-store:unsupported-query","Unsupported query options",{query:A});return Promise.all([this._checkAttributesQuerySupport(A),this._checkStatisticsParamsSupport(S),m.checkSpatialQuerySupport(A,this.geometryType,this.spatialReference),B.checkProjectionSupport(this.spatialReference,A.outSR)]).then(()=>A)});return function(A,S){return g.apply(this,arguments)}}();
e._checkStatisticsParamsSupport=function(){var g=d._asyncToGenerator(function*(A){var S=[];A.valueExpression&&({arcadeUtils:S}=yield y.loadArcade(),S=S.extractFieldNames(A.valueExpression));A.field&&S.push(A.field);A.normalizationField&&S.push(A.normalizationField);if(!S.length)throw new Y("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:A});u.validateFields(this.fieldsIndex,S,"params contains missing fields")});return function(A){return g.apply(this,
arguments)}}();e._checkQuerySupport=function(){var g=d._asyncToGenerator(function*(A){if(0>A.distance||null!=A.geometryPrecision||A.multipatchOption||A.pixelSize||A.relationParam||A.text)throw new Y("feature-store:unsupported-query","Unsupported query options",{query:A});return Promise.all([this._checkAttributesQuerySupport(A),this._checkStatisticsQuerySupport(A),m.checkSpatialQuerySupport(A,this.geometryType,this.spatialReference),B.checkProjectionSupport(this.spatialReference,A.outSR)]).then(()=>
A)});return function(A){return g.apply(this,arguments)}}();e._checkAttributesQuerySupport=function(g){const {outFields:A,orderByFields:S,returnDistinctValues:aa,outStatistics:ja}=g,na=ja?ja.map(ta=>ta.outStatisticFieldName&&ta.outStatisticFieldName.toLowerCase()):[];if(S&&0<S.length){const ta=S.map(ma=>{const la=ma.toLowerCase();return-1<la.indexOf(" asc")?la.split(" asc")[0]:-1<la.indexOf(" desc")?la.split(" desc")[0]:ma}).filter(ma=>-1===na.indexOf(ma));u.validateFields(this.fieldsIndex,ta,"orderByFields contains missing fields")}if(A&&
0<A.length)u.validateFields(this.fieldsIndex,A,"outFields contains missing fields");else if(aa)throw new Y("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:g});u.validateWhere(this.fieldsIndex,g.where)};e._checkStatisticsQuerySupport=function(){var g=d._asyncToGenerator(function*(A){const {outStatistics:S,groupByFieldsForStatistics:aa,having:ja}=A;var na=aa&&aa.length,ta=S&&S.length;if(ja){if(!na||!ta)throw new Y("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",
{query:A});u.validateHaving(this.fieldsIndex,ja,S)}if(ta&&Q(S)){ta=S.map(ma=>ma.onStatisticField);u.validateFields(this.fieldsIndex,ta,"onStatisticFields contains missing fields");na&&u.validateFields(this.fieldsIndex,aa,"groupByFieldsForStatistics contains missing fields");for(const ma of S){const {onStatisticField:la,statisticType:va}=ma;if(("percentile_disc"===va||"percentile_cont"===va)&&"statisticParameters"in ma){if({statisticParameters:na}=ma,!na)throw new Y("feature-store:unsupported-query",
"statisticParamters should be set for percentile type",{definition:ma,query:A});}else if("count"!==va&&la&&u.hasInvalidFieldType(la,this.fieldsIndex))throw new Y("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:ma,query:A});}}});return function(A){return g.apply(this,arguments)}}();e._getQueryEngineResultForStats=function(){var g=d._asyncToGenerator(function*(A={},S,aa){A=X.clone(A);let ja;try{A=yield this._schedule(()=>l.normalizeQuery(A,this.definitionExpression,
this.spatialReference),aa),A=yield this._reschedule(()=>this._checkStatisticsSupport(A,S),aa),ja=yield this._reschedule(()=>this._executeGeometryQuery(A,aa),aa),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(A),aa),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(A),aa),ja=yield this._reschedule(()=>ja.executeTimeQuery(A),aa),ja=yield this._reschedule(()=>ja.executeAttributesQuery(A),aa)}catch(na){if(na!==l.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new f([],null,this)}return ja});return function(){return g.apply(this,
arguments)}}();d._createClass(x,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const g=this.featureStore.fullBounds;return g?{xmin:g[0],ymin:g[1],xmax:g[2],ymax:g[3],spatialReference:l.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=F.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return x}();const U=w.create(),M=
w.create();k.Feature=function(x,e=null,g,A,S){this.attributes=x;this.geometry=g;this.centroid=A;this.filterFlags=S;this.groupId=-1;this.displayId=e};k.default=G;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(k,d,Y,X){let r=function(){function z(t,q,H){this._namespace=t;this._storage=q;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=
":";H&&(this._storage.registerRemoveFunc(this._namespace,H),this._removeFunc=!0)}var w=z.prototype;w.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};w.resetHitRate=function(){this._hit=this._miss=0};w.put=function(t,q,H,N=0){this._storage.put(this._namespace+t,q,H,N)};w.get=function(t){t=this._storage.get(this._namespace+t);void 0===t?++this._miss:++this._hit;return t};
w.pop=function(t){t=this._storage.pop(this._namespace+t);void 0===t?++this._miss:++this._hit;return t};w.updateSize=function(t,q,H){this._storage.updateSize(this._namespace+t,q,H)};w.clear=function(){this._storage.clear(this._namespace)};w.clearAll=function(){this._storage.clearAll()};w.getStats=function(){return this._storage.getStats()};w.resetStats=function(){this._storage.resetStats()};d._createClass(z,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/
(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return z}(),D=function(){function z(t=10485760){this._maxSize=t;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new X;this._users=new X}var w=z.prototype;w.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};w.register=function(t){this._users.push(t)};w.deregister=function(t){this._users.removeUnordered(t)};
w.registerRemoveFunc=function(t,q){this._removeFuncs.push([t,q])};w.deregisterRemoveFunc=function(t){this._removeFuncs.filterInPlace(q=>q[0]!==t)};w.put=function(t,q,H,N){const O=this._db.get(t);O&&(this._size-=O.size,this._db.delete(t),O.entry!==q&&this._notifyRemove(t,O.entry,0));H>this._maxSize?this._notifyRemove(t,q,0):void 0===q?console.warn("Refusing to cache undefined entry "):!H||0>H?console.warn("Refusing to cache entry with invalid size "+H):(N=1+Math.max(N,-3)- -3,this._db.set(t,{entry:q,
size:H,lifetime:N,lives:N}),this._size+=H,this._checkSizeLimit())};w.updateSize=function(t,q,H){const N=this._db.get(t);if(N&&N.entry===q){for(this._size-=N.size;H>this._maxSize;)if(H=this._notifyRemove(t,q,1),!(Y.isSome(H)&&0<H)){this._db.delete(t);return}N.size=H;this._size+=H;this._checkSizeLimit()}};w.pop=function(t){const q=this._db.get(t);if(q)return this._size-=q.size,this._db.delete(t),++this._hit,q.entry;++this._miss};w.get=function(t){const q=this._db.get(t);if(void 0===q)++this._miss;else return this._db.delete(t),
q.lives=q.lifetime,this._db.set(t,q),++this._hit,q.entry};w.getStats=function(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},q={},H=[];this._db.forEach((u,B)=>{const b=u.lifetime;H[b]=(H[b]||0)+u.size;this._users.forAll(f=>{f=f.namespace;B.startsWith(f)&&(q[f]=(q[f]||0)+u.size)})});const N={};this._users.forAll(u=>{const B=u.namespace;!isNaN(u.hitRate)&&0<u.hitRate?(q[B]=
q[B]||0,N[B]=Math.round(100*u.hitRate)+"%"):N[B]="0%"});var O=Object.keys(q);O.sort((u,B)=>q[B]-q[u]);O.forEach(u=>t[u]=Math.round(q[u]/2**20)+"MB / "+N[u]);for(O=H.length-1;0<=O;--O){const u=H[O];u&&(t["Priority "+(O+-3-1)]=Math.round(u/this.size*100)+"%")}return t};w.resetStats=function(){this._hit=this._miss=0;this._users.forAll(t=>t.resetHitRate())};w.clear=function(t){this._db.forEach((q,H)=>{H.startsWith(t)&&(this._size-=q.size,this._db.delete(H),this._notifyRemove(H,q.entry,0))})};w.clearAll=
function(){this._db.forEach((t,q)=>this._notifyRemove(q,t.entry,0));this._size=0;this._db.clear()};w._getHitRate=function(){return this._hit/(this._hit+this._miss)};w._notifyRemove=function(t,q,H){let N;this._removeFuncs.some(O=>t.startsWith(O[0])?(O=O[1](q,H),"number"===typeof O&&(N=O),!0):!1);return N};w._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [t,q]of this._db){this._db.delete(t);if(1>=q.lives){this._size-=q.size;const H=this._notifyRemove(t,q.entry,1);Y.isSome(H)&&
0<H&&(this._size+=H,q.lives=q.lifetime,q.size=H,this._db.set(t,q))}else--q.lives,this._db.set(t,q);if(this._size<=.9*this.maxSize)break}};d._createClass(z,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(t){this._maxSize=Math.max(t,0);this._checkSizeLimit()}}]);return z}();k.MIN_PRIORITY=-3;k.MemCache=r;k.MemCacheStorage=D;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(k,d,Y,X,r,D,z,w,t,q,H,N,O){function u(y){const I=[];let Q=0,R=0;for(let da=0;da<y.length;da++){const L=y[da];let G=null;for(let U=0;U<L.length;U++)G=L[U],I.push(G),0===U?R=Q=G[0]:(Q=Math.min(Q,G[0]),R=Math.max(R,G[0]));G&&I.push([(Q+R)/2,0])}return I}function B(y,I){if(!(y instanceof w||y instanceof z))throw C.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new X("straightLineDensify: the input geometry is neither polyline nor polygon");var Q=t.getGeometryParts(y);
const R=[];for(const L of Q){Q=[];R.push(Q);Q.push([L[0][0],L[0][1]]);for(let G=0;G<L.length-1;G++){const U=L[G][0],M=L[G][1],x=L[G+1][0],e=L[G+1][1];var da=Math.sqrt((x-U)*(x-U)+(e-M)*(e-M));const g=(e-M)/da,A=(x-U)/da,S=da/I;if(1<S){for(let aa=1;aa<=S-1;aa++){const ja=aa*I;Q.push([A*ja+U,g*ja+M])}da=(da+Math.floor(S-1)*I)/2;Q.push([A*da+U,g*da+M])}Q.push([x,e])}}return"polygon"===y.type?new z({rings:R,spatialReference:y.spatialReference}):new w({paths:R,spatialReference:y.spatialReference})}function b(y,
I,Q){I&&(y=B(y,1E6),y=H.webMercatorToGeographic(y,!0));Q&&(y=t.updatePolyGeometry(y,Q));return y}function f(y,I,Q){if(Array.isArray(y)){var R=y[0];R>I?(Q=t.offsetMagnitude(R,I),y[0]=R+-2*Q*I):R<Q&&(I=t.offsetMagnitude(R,Q),y[0]=R+-2*I*Q)}else R=y.x,R>I?(Q=t.offsetMagnitude(R,I),y=y.clone().offset(-2*Q*I,0)):R<Q&&(I=t.offsetMagnitude(R,Q),y=y.clone().offset(-2*I*Q,0));return y}function m(y,I){let Q=-1;for(let R=0;R<I.cutIndexes.length;R++){const da=I.cutIndexes[R],L=I.geometries[R],G=t.getGeometryParts(L);
for(let U=0;U<G.length;U++){const M=G[U];M.some(x=>{if(180>x[0])return!0;x=0;for(var e=0;e<M.length;e++){var g=M[e][0];x=g>x?g:x}x=Number(x.toFixed(9));x=-360*t.offsetMagnitude(x,180);for(e=0;e<M.length;e++)g=L.getPoint(U,e),L.setPoint(U,e,g.clone().offset(x,0));return!0})}if(da===Q)if("polygon"===y[0].type)for(const U of t.getGeometryParts(L))y[da]=y[da].addRing(U);else{if("polyline"===y[0].type)for(const U of t.getGeometryParts(L))y[da]=y[da].addPath(U)}else Q=da,y[da]=L}return y}function F(y,I,
Q){return l.apply(this,arguments)}function l(){l=d._asyncToGenerator(function*(y,I,Q){var R;if(!Array.isArray(y))return F([y],I);I=null!=(R=null==I?void 0:I.url)?R:Y.geometryServiceUrl;let da,L,G;let U=0;var M=[];R=[];for(var x of y)if(D.isNone(x))R.push(x);else{if(!e){var e=x.spatialReference;var g=q.getInfo(e);var A=(da=e.isWebMercator)?102100:4326;L=t.cutParams[A].maxX;G=t.cutParams[A].minX;var S=t.cutParams[A].plus180Line;A=t.cutParams[A].minus180Line}if(g)if("mesh"===x.type)R.push(x);else if("point"===
x.type)R.push(f(x.clone(),L,G));else if("multipoint"===x.type){var aa=x.clone();aa.points=aa.points.map(ja=>f(ja,L,G));R.push(aa)}else if("extent"===x.type)aa=x.clone()._normalize(!1,!1,g),R.push(aa.rings?new z(aa):aa);else if(x.extent){aa=x.extent;const ja=2*t.offsetMagnitude(aa.xmin,G)*L;let na=0===ja?x.clone():t.updatePolyGeometry(x.clone(),ja);aa.offset(ja,0);aa.intersects(S)&&aa.xmax!==L?(U=aa.xmax>U?aa.xmax:U,na=b(na,da),M.push(na),R.push("cut")):aa.intersects(A)&&aa.xmin!==G?(U=2*aa.xmax*L>
U?2*aa.xmax*L:U,na=b(na,da,360),M.push(na),R.push("cut")):R.push(na)}else R.push(x.clone());else R.push(x)}e=t.offsetMagnitude(U,L);g=-90;S=e;for(x=new w;0<e;)A=-180+360*e,x.addPath([[A,g],[A,-1*g]]),g*=-1,e--;if(0<M.length&&0<S){e=yield N.cut(I,M,x,Q);e=m(M,e);g=[];M=[];for(S=0;S<R.length;S++)x=R[S],"cut"!==x?M.push(x):(x=e.shift(),A=y[S],D.isSome(A)&&"polygon"===A.type&&A.rings&&1<A.rings.length&&x.rings.length>=A.rings.length?(g.push(x),M.push("simplify")):M.push(da?H.geographicToWebMercator(x):
x));if(!g.length)return M;R=yield O.simplify(I,g,Q);y=[];for(Q=0;Q<M.length;Q++)I=M[Q],"simplify"!==I?y.push(I):y.push(da?H.geographicToWebMercator(R.shift()):R.shift());return y}y=[];for(Q=0;Q<R.length;Q++)I=R[Q],"cut"!==I?y.push(I):(I=M.shift(),y.push(!0===da?H.geographicToWebMercator(I):I));return Promise.resolve(y)});return l.apply(this,arguments)}const C=r.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=function(y){if(!y)return null;const I=y.extent;if(!I)return null;
var Q=y.spatialReference&&q.getInfo(y.spatialReference);if(!Q)return I;const [R,da]=Q.valid;({width:Q}=I);let {xmin:L,xmax:G}=I;[L,G]=[G,L];if("extent"===y.type||0===Q||Q<=da||Q>2*da||L<R||G>da)return I;let U;switch(y.type){case "polygon":if(1<y.rings.length)U=u(y.rings);else return I;break;case "polyline":if(1<y.paths.length)U=u(y.paths);else return I;break;case "multipoint":U=y.points}y=I.clone();for(let M=0;M<U.length;M++){let x=U[M][0];0>x?(x+=da,G=Math.max(x,G)):(x-=da,L=Math.min(x,L))}y.xmin=
L;y.xmax=G;return y.width<Q?(y.xmin-=da,y.xmax-=da,y):I};k.normalizeCentralMeridian=F;k.normalizeMapX=function(y,I){if(I=q.getInfo(I)){const [Q,R]=I.valid;I=R-Q;if(y<Q)for(;y<Q;)y+=I;if(y>R)for(;y>R;)y-=I}return y};k.straightLineDensify=B;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(k,d,Y,X){function r(z){return X.isPolygon(z)?z.rings:z.paths}const D={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Y.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Y.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:Y.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:Y.WGS84})}};
k.cutParams=D;k.getGeometryParts=r;k.getSpatialReferenceMinMaxX=function(z){z=(null==z?0:z.isWebMercator)?102100:4326;return[D[z].minX,D[z].maxX]};k.offsetMagnitude=function(z,w){return Math.ceil((z-w)/(2*w))};k.updatePolyGeometry=function(z,w){const t=r(z);for(const q of t)for(const H of q)H[0]+=w;return z};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(k,d,Y,X,r,D){function z(){z=d._asyncToGenerator(function*(w,t,q,H){w="string"===typeof w?r.urlToObject(w):w;const N=t[0].spatialReference;t={...H,query:{...w.query,f:"json",sr:JSON.stringify(N),target:JSON.stringify({geometryType:D.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(q)}};t=yield X(w.path+"/cut",t);const {cutIndexes:O,geometries:u=[]}=t.data;return{cutIndexes:O,geometries:u.map(B=>{B=D.fromJSON(B);B.spatialReference=N;return B})}});return z.apply(this,arguments)}k.cut=
function(w,t,q,H){return z.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(k,d,Y,X,r){function D(){D=d._asyncToGenerator(function*(t,q,H){const N="string"===typeof t?X.urlToObject(t):t;t=q[0].spatialReference;const O=r.getJsonType(q[0]);q={...H,query:{...N.query,f:"json",sr:t.wkid?t.wkid:JSON.stringify(t),
geometries:JSON.stringify(z(q))}};q=yield Y(N.path+"/simplify",q);return w(q.data,O,t)});return D.apply(this,arguments)}function z(t){return{geometryType:r.getJsonType(t[0]),geometries:t.map(q=>q.toJSON())}}function w(t,q,H){const N=r.getGeometryType(q);return t.map(O=>{O=N.fromJSON(O);O.spatialReference=H;return O})}k.simplify=function(t,q,H){return D.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(k,d,Y){function X(t,q){return t?z.get(t,q):null}function r(t,q,H,N=!0){const O=[];for(const u of q)if("*"!==u&&!t.has(u))if(N){q=D(u);try{const B=X(q,t);if(!B)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:q});if(!B.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:B});r(t,B.fieldNames,"expression contains missing fields")}catch(B){if((q=B&&B.details)&&
(q.clause||q.where))throw B;q&&q.missingFields?O.push(...q.missingFields):O.push(u)}}else O.push(u);if(O.length)throw new d("feature-store:unsupported-query",H,{missingFields:O});}function D(t){return t.split(" as ")[0]}const z=new Y.WhereClauseCache(50,500),w=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));k.getAliasFromFieldName=function(t){return t.split(" as ")[1]};k.getExpressionFromFieldName=
D;k.getWhereClause=X;k.hasInvalidFieldType=function(t,q){return(t=q.get(t))?!w.has(t.type):!1};k.validateFields=r;k.validateHaving=function(t,q,H){if(!q)return!0;const N=z.get(q,t);if(!N)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:q});if(!N.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:q});r(t,N.fieldNames,"having contains missing fields");if(!N.getExpressions().every(O=>{const {aggregateType:u,
field:B}=O,b=t.has(B)&&t.get(B).name;return H.some(f=>{const {onStatisticField:m,statisticType:F}=f;return(t.has(m)&&t.get(m).name)===b&&F.toLowerCase().trim()===u})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:q});return!0};k.validateWhere=function(t,q){if(!q)return!0;const H=z.get(q,t);if(!H)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:q});if(!H.isStandardized)throw new d("feature-store:unsupported-query",
"where clause is not standard",{where:q});r(t,H.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(k,d,Y){let X=function(){function r(D,z){this._cache=new d(D);this._invalidCache=new d(z)}r.prototype.get=function(D,z){const w=`${z.uid}:${D}`,t=this._cache.get(w);if(t)return t;if(void 0!==this._invalidCache.get(w))return null;try{const q=
Y.WhereClause.create(D,z);this._cache.put(w,q);return q}catch{return this._invalidCache.put(w,null),null}};return r}();k.WhereClauseCache=X;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(k){return function(){function d(X,r){this._storage=new k.MemCacheStorage;this._storage.maxSize=X;r&&this._storage.registerRemoveFunc("",r)}var Y=d.prototype;Y.put=function(X,r){this._storage.put(X,r,1,1)};Y.pop=function(X){return this._storage.pop(X)};
Y.get=function(X){return this._storage.get(X)};Y.clear=function(){this._storage.clearAll()};Y.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,d,Y,X,r,D){function z(M,x){M+="";return M.length>=x?M:Array(x-M.length+1).join("0")+M}function w(M,x,e="0",g="0",A="0",S="0",aa="",ja="0",na="0"){return"+"===aa||"-"===
aa?(M=`${z(parseInt(M,10),4)}-${z(parseInt(x,10),2)}-${z(parseInt(e,10),2)}`,x="",10>parseFloat(S)&&(x="0"),g=`${z(parseInt(g,10),2)}:${z(parseInt(A,10),2)}:${x+parseFloat(S).toString()}`,aa=`${aa}${z(parseInt(ja,10),2)}:${z(parseInt(na,10),2)}`,new Date(M+"T"+g+aa)):new Date(parseInt(M,10),parseInt(x,10)-1,parseInt(e,10),parseInt(g,10),parseInt(A,10),parseFloat(S))}function t(M){let x=y.exec(M);if(null!==x){const [,e,g,A,S,aa,ja]=x;return w(e,g,A,S,aa,ja)}x=I.exec(M);if(null!==x){const [,e,g,A,S,
aa,ja,na,ta,ma]=x;return w(e,g,A,S,aa,ja,na,ta,ma)}x=Q.exec(M);if(null!==x){const [,e,g,A,S,aa,ja,na,ta]=x;return w(e,g,A,S,aa,"0",ja,na,ta)}x=R.exec(M);if(null!==x){const [,e,g,A,S,aa]=x;return w(e,g,A,S,aa)}x=C.exec(M);if(null!==x){const [,e,g,A]=x;return w(e,g,A)}throw Error("SQL Invalid Timestamp");}function q(M){M=C.exec(M);if(null===M)throw Error("SQL Invalid Date");const [,x,e,g]=M;return new Date(parseInt(x,10),parseInt(e,10)-1,parseInt(g,10))}function H(M){return Array.isArray(M)?M:[M]}function N(M){return null!==
M?!0!==M:null}function O(M,x){return null!=M&&null!=x?!0===M&&!0===x:!1===M||!1===x?!1:null}function u(M,x){return null!=M&&null!=x?!0===M||!0===x:!0===M||!0===x?!0:null}function B(M,x){if(null==M)return null;let e=!1;for(const g of x)if(null==g)e=null;else if(M===g){e=!0;break}return e}function b(M,x,e){if(null==M)return null;let g="",A=0;for(let S=0;S<x.length;S++){const aa=x.charAt(S);switch(A){case 0:aa===e?A=1:g=0<="-[]/{}()*+?.\\^$|".indexOf(aa)?g+("\\"+aa):"%"===aa?g+".*":"_"===aa?g+".":g+
aa;break;case 1:g=0<="-[]/{}()*+?.\\^$|".indexOf(aa)?g+("\\"+aa):g+aa,A=0}}return(new RegExp("^"+g+"$")).test(M)}function f(M){return M instanceof Date?M.valueOf():M}function m(M,x,e){if(null==x||null==e)return null;x=f(x);e=f(e);switch(M){case "\x3c\x3e":return x!==e;case "\x3d":return x===e;case "\x3e":return x>e;case "\x3c":return x<e;case "\x3e\x3d":return x>=e;case "\x3c\x3d":return x<=e}}function F(M,x,e){if(x instanceof r.SqlInterval)if(e instanceof Date)switch(M){case "+":return new Date(x.valueInMilliseconds()+
e.getTime());case "-":return x.valueInMilliseconds()-e.getTime();case "*":return x.valueInMilliseconds()*e.getTime();case "/":return x.valueInMilliseconds()/e.getTime()}else if(e instanceof r.SqlInterval)switch(M){case "+":return r.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()+e.valueInMilliseconds());case "-":return r.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()-e.valueInMilliseconds());case "*":return x.valueInMilliseconds()*e.valueInMilliseconds();case "/":return x.valueInMilliseconds()/
e.valueInMilliseconds()}else x=x.valueInMilliseconds();else if(e instanceof r.SqlInterval)if(x instanceof Date)switch(M){case "+":return new Date(e.valueInMilliseconds()+x.getTime());case "-":return new Date(x.getTime()-e.valueInMilliseconds());case "*":return x.getTime()*e.valueInMilliseconds();case "/":return x.getTime()/e.valueInMilliseconds()}else e=e.valueInMilliseconds();else if(x instanceof Date&&"number"===typeof e)switch(e*=864E5,x=x.getTime(),M){case "+":return new Date(x+e);case "-":return new Date(x-
e);case "*":return new Date(x*e);case "/":return new Date(x/e)}else if(e instanceof Date&&"number"===typeof x)switch(x*=864E5,e=e.getTime(),M){case "+":return new Date(x+e);case "-":return new Date(x-e);case "*":return new Date(x*e);case "/":return new Date(x/e)}switch(M){case "+":return x+e;case "-":return x-e;case "*":return x*e;case "/":return x/e}}function l(M,x,e,g){M=g.getAttribute(M,x);return null!=M&&1===e[x]?new Date(M):M}const C=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
I=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,Q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,R=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,da=new Set(["current_timestamp","current_date","current_time"]);let L=function(){function M(){}M.makeBool=function(x){return!0===x};M.featureValue=function(x,e,g,A){return l(x,e,g,A)};M.equalsNull=function(x){return null===x};M.applyLike=function(x,e,g){return b(x,e,
g)};M.ensureArray=function(x){return H(x)};M.applyIn=function(x,e){return B(x,e)};M.currentDate=function(){const x=new Date;x.setHours(0,0,0,0);return x};M.makeSqlInterval=function(x,e,g){return r.SqlInterval.createFromValueAndQualifer(x,e,g)};M.convertInterval=function(x){return x instanceof r.SqlInterval?x.valueInMilliseconds():x};M.currentTimestamp=function(){return new Date};M.compare=function(x,e,g){return m(x,e,g)};M.calculate=function(x,e,g){return F(x,e,g)};M.makeComparable=function(x){return f(x)};
M.evaluateFunction=function(x,e){return r.evaluateFunction(x,e)};M.lookup=function(x,e){x=e[x];return void 0===x?null:x};M.between=function(x,e){return null==x||null==e[0]||null==e[1]?null:x>=e[0]&&x<=e[1]};M.notbetween=function(x,e){return null==x||null==e[0]||null==e[1]?null:x<e[0]||x>e[1]};M.ternaryNot=function(x){return N(x)};M.ternaryAnd=function(x,e){return O(x,e)};M.ternaryOr=function(x,e){return u(x,e)};return M}(),G=function(){function M(e,g){this.fieldsIndex=g;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=D.WhereGrammar.parse(e);const {isStandardized:A,isAggregate:S,referencedFieldNames:aa}=this.extractExpressionInfo(g);this.referencedFieldNames=aa;this.isStandardized=A;this.isAggregate=S}M.create=function(e,g){return new M(e,g)};var x=M.prototype;x.testSet=function(e,g=U){const A={};for(const S of this.fieldNames)A[S]=e.map(aa=>g.getAttribute(aa,S));return!!this.evaluateNode(this.parseTree,{attributes:A},U)};x.calculateValue=function(e,g=U){e=this.evaluateNode(this.parseTree,
e,g);return e instanceof r.SqlInterval?e.valueInMilliseconds()/864E5:e};x.calculateValueCompiled=function(e,g=U){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(e,this.parameters,g,this.datefields);if(Y("esri-csp-restrictions"))return this.calculateValue(e,g);this.compileMe();return this.parseTree._compiledVersion(e,this.parameters,g,this.datefields)};x.testFeature=function(e,g=U){return!!this.evaluateNode(this.parseTree,e,g)};x.testFeatureCompiled=function(e,g=U){if(null!=
this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(e,this.parameters,g,this.datefields);if(Y("esri-csp-restrictions"))return this.testFeature(e,g);this.compileMe();return!!this.parseTree._compiledVersion(e,this.parameters,g,this.datefields)};x.getFunctions=function(){const e=new Set;this.visitAll(this.parseTree,g=>{"function"===g.type&&e.add(g.name.toLowerCase())});return Array.from(e)};x.getExpressions=function(){const e=new Map;this.visitAll(this.parseTree,g=>{if("function"===
g.type){const A=g.name.toLowerCase();g=g.args.value[0];if("column_ref"===g.type){g=g.column;const S=`${A}-${g}`;e.has(S)||e.set(S,{aggregateType:A,field:g})}}});return[...e.values()]};x.getVariables=function(){const e=new Set;this.visitAll(this.parseTree,g=>{"param"===g.type&&e.add(g.value.toLowerCase())});return Array.from(e)};x.compileMe=function(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups",
"attributeAdapter","datefields",e)).bind(L)};x.extractExpressionInfo=function(e){const g=[],A=new Set;let S=!0,aa=!0;this.visitAll(this.parseTree,ja=>{switch(ja.type){case "column_ref":{const na=e.get(ja.column);let ta,ma;na?ta=ma=na.name:(ma=ja.column,ta=ma.toLowerCase());!na||"date"!==na.type&&"esriFieldTypeDate"!==na.type||(this.datefields[na.name]=1);A.has(ta)||(A.add(ta),g.push(ma));ja.column=ma;break}case "function":{const {name:na,args:ta}=ja;ja=ta.value.length;S&&(S=r.isStandardized(na,ja));
aa&&(aa=X.isAggregate(na,ja))}}});return{referencedFieldNames:Array.from(g),isStandardized:S,isAggregate:aa}};x.visitAll=function(e,g){if(null!=e)switch(g(e),e.type){case "when_clause":this.visitAll(e.operand,g);this.visitAll(e.value,g);break;case "case_expression":for(const A of e.clauses)this.visitAll(A,g);"simple"===e.format&&this.visitAll(e.operand,g);null!==e.else&&this.visitAll(e.else,g);break;case "expr_list":for(const A of e.value)this.visitAll(A,g);break;case "unary_expr":this.visitAll(e.expr,
g);break;case "binary_expr":this.visitAll(e.left,g);this.visitAll(e.right,g);break;case "function":this.visitAll(e.args,g)}};x.evaluateNodeToJavaScript=function(e){switch(e.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case "case_expression":var g="";if("simple"===e.format){var A="this.makeComparable("+this.evaluateNodeToJavaScript(e.operand)+")";g="( ";for(let S=0;S<e.clauses.length;S++)g+=
" ("+A+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(e.clauses[S].operand)+")) ? ("+this.evaluateNodeToJavaScript(e.clauses[S].value)+") : "}else for(g="( ",A=0;A<e.clauses.length;A++)g+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[A].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(e.clauses[A].value)+") : ";g=null!==e.else?g+this.evaluateNodeToJavaScript(e.else):g+"null";return g+=" )";case "param":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+
",lookups)";case "expr_list":g="[";for(A of e.value)"["!==g&&(g+=","),g+=this.evaluateNodeToJavaScript(A);return g+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case "binary_expr":switch(e.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case "IS":if("null"!==
e.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case "ISNOT":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(e.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+
")"}throw Error("Not Supported Operator "+e.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(e.value);case "date":return"(new Date("+q(e.value).getTime().toString()+"))";case "timestamp":return"(new Date("+t(e.value).getTime().toString()+"))";case "current_time":return"date"===e.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(e.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+")"}throw Error("Unsupported sql syntax "+e.type);};x.evaluateNode=function(e,g,A){switch(e.type){case "interval":return g=this.evaluateNode(e.value,g,A),r.SqlInterval.createFromValueAndQualifer(g,e.qualifier,e.op);case "case_expression":if("simple"===e.format){var S=f(this.evaluateNode(e.operand,g,A));for(var aa=0;aa<e.clauses.length;aa++)if(S===f(this.evaluateNode(e.clauses[aa].operand,g,A)))return this.evaluateNode(e.clauses[aa].value,
g,A)}else for(S=0;S<e.clauses.length;S++)if(!0===this.evaluateNode(e.clauses[S].operand,g,A))return this.evaluateNode(e.clauses[S].value,g,A);return null!==e.else?this.evaluateNode(e.else,g,A):null;case "param":return this.parameters[e.value.toLowerCase()];case "expr_list":S=[];for(aa of e.value)S.push(this.evaluateNode(aa,g,A));return S;case "unary_expr":return N(this.evaluateNode(e.expr,g,A));case "binary_expr":switch(e.operator){case "AND":return O(this.evaluateNode(e.left,g,A),this.evaluateNode(e.right,
g,A));case "OR":return u(this.evaluateNode(e.left,g,A),this.evaluateNode(e.right,g,A));case "IS":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(e.left,g,A);case "ISNOT":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(e.left,g,A);case "IN":return S=H(this.evaluateNode(e.right,g,A)),B(this.evaluateNode(e.left,g,A),S);case "NOT IN":return S=H(this.evaluateNode(e.right,g,A)),N(B(this.evaluateNode(e.left,g,A),
S));case "BETWEEN":return S=this.evaluateNode(e.left,g,A),e=this.evaluateNode(e.right,g,A),null==S||null==e[0]||null==e[1]?null:S>=f(e[0])&&S<=f(e[1]);case "NOTBETWEEN":return S=this.evaluateNode(e.left,g,A),e=this.evaluateNode(e.right,g,A),null==S||null==e[0]||null==e[1]?null:S<f(e[0])||S>f(e[1]);case "LIKE":return b(this.evaluateNode(e.left,g,A),this.evaluateNode(e.right,g,A),e.escape);case "NOT LIKE":return N(b(this.evaluateNode(e.left,g,A),this.evaluateNode(e.right,g,A),e.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return m(e.operator,
this.evaluateNode(e.left,g,A),this.evaluateNode(e.right,g,A));case "-":case "+":case "*":case "/":return F(e.operator,this.evaluateNode(e.left,g,A),this.evaluateNode(e.right,g,A))}case "null":case "bool":case "string":case "number":return e.value;case "date":return q(e.value);case "timestamp":return t(e.value);case "current_time":return g=new Date,"date"===e.mode&&g.setHours(0,0,0,0),g;case "column_ref":return l(g,e.column,this.datefields,A);case "function":return g=this.evaluateNode(e.args,g,A),
this.isAggregate?X.aggregateFunction(e.name,g):r.evaluateFunction(e.name,g)}throw Error("Unsupported sql syntax "+e.type);};d._createClass(M,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this.visitAll(this.parseTree,e=>{"current_time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||da.has(e.name.toLowerCase()))});
return this._hasDateFunctions}}]);return M}();const U={getAttribute(M,x){return(M&&"object"===typeof M.attributes?M.attributes:M)[x]}};k.WhereClause=G;k.defaultAttributeAdapter=U;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function d(r){let D=0;for(let z=0;z<r.length;z++)D+=r[z];return D/r.length}function Y(r){const D=d(r),z=r.length;let w=0;for(const t of r)w+=(t-D)**2;return 1<z?w/(z-1):0}const X={min:{minParams:1,
maxParams:1,evaluate:r=>null==r[0]?null:Math.min.apply(Math,r[0])},max:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.max.apply(Math,r[0])},avg:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:d(r[0])},sum:{minParams:1,maxParams:1,evaluate:r=>{if(null==r[0])r=null;else{{r=r[0];let D=0;for(let z=0;z<r.length;z++)D+=r[z];r=D}}return r}},stddev:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sqrt(Y(r[0]))},count:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].length},
var:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Y(r[0])}};k.aggregateFunction=function(r,D){const z=X[r.toLowerCase()];if(null==z)throw Error("Function Not Recognised");if(D.length<z.minParams||D.length>z.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return z.evaluate(D)};k.isAggregate=function(r,D){r=X[r.toLowerCase()];return null!=r&&D>=r.minParams&&D<=r.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports",
"../string"],function(k,d){let Y=function(){function r(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}r.fixDefaults=function(D){if(null!==D.precision||null!==D.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};r.createFromMilliseconds=function(D){const z=new r;z.second=D/1E3;return z};r.createFromValueAndQualifer=function(D,z,w){let t=null;const q=new r;q.op="-"===w?"-":"+";if("interval-period"===z.type){r.fixDefaults(z);if("year"===
z.period||"month"===z.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(D))q[z.period]=parseFloat(D);else throw Error("Illegal Interval");}else{r.fixDefaults(z.start);r.fixDefaults(z.end);if("year"===z.start.period||"month"===z.start.period)throw Error("Year-Month Intervals not supported");if("year"===z.end.period||"month"===z.end.period)throw Error("Year-Month Intervals not supported");switch(z.start.period){case "day":switch(z.end.period){case "hour":t=/^[0-9]{1,} [0-9]{1,}$/;
if(t.test(D))q[z.start.period]=parseFloat(D.split(" ")[0]),q[z.end.period]=parseFloat(D.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(t.test(D))q[z.start.period]=parseFloat(D.split(" ")[0]),D=D.split(" ")[1].split(":"),q.hour=parseFloat(D[0]),q.minute=parseFloat(D[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(D))q[z.start.period]=parseFloat(D.split(" ")[0]),
D=D.split(" ")[1].split(":"),q.hour=parseFloat(D[0]),q.minute=parseFloat(D[1]),q.second=parseFloat(D[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(z.end.period){case "minute":t=/^[0-9]{1,}:[0-9]{1,}$/;if(t.test(D))q.hour=parseFloat(D.split(":")[0]),q.minute=parseFloat(D.split(":")[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(D))D=D.split(":"),q.hour=parseFloat(D[0]),
q.minute=parseFloat(D[1]),q.second=parseFloat(D[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(z.end.period){case "second":t=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(D))D=D.split(":"),q.minute=parseFloat(D[0]),q.second=parseFloat(D[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return q};r.prototype.valueInMilliseconds=function(){return("-"===this.op?
-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return r}();const X={extract:{minParams:2,maxParams:2,evaluate:([r,D])=>{if(null==D)return null;if(D instanceof Date)switch(r.toUpperCase()){case "SECOND":return D.getSeconds();case "MINUTE":return D.getMinutes();case "HOUR":return D.getHours();case "DAY":return D.getDate();case "MONTH":return D.getMonth()+1;case "YEAR":return D.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");
}},substring:{minParams:2,maxParams:3,evaluate:r=>{if(2===r.length){const [D,z]=r;return null==D||null==z?null:D.toString().substring(z-1)}if(3===r.length){const [D,z,w]=r;return null==D||null==z||null==w?null:0>=w?"":D.toString().substring(z-1,z+w-1)}}},position:{minParams:2,maxParams:2,evaluate:([r,D])=>null==r||null==D?null:D.indexOf(r)+1},trim:{minParams:2,maxParams:3,evaluate:r=>{var D=3===r.length,z=D?r[1]:" ";D=D?r[2]:r[1];if(null==z||null==D)return null;z=`(${d.escapeRegExpString(z)})`;switch(r[0]){case "BOTH":return D.replace(new RegExp(`^${z}*|${z}*$`,
"g"),"");case "LEADING":return D.replace(new RegExp(`^${z}*`,"g"),"");case "TRAILING":return D.replace(new RegExp(`${z}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.abs(r[0])},ceiling:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.ceil(r[0])},floor:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.floor(r[0])},log:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])},log10:{minParams:1,
maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sin(r[0])},cos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.cos(r[0])},tan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.tan(r[0])},asin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.asin(r[0])},acos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.acos(r[0])},atan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.atan(r[0])},
sign:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:0<r[0]?1:0>r[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]**r[1]},mod:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]%r[1]},round:{minParams:1,maxParams:2,evaluate:r=>{const D=r[0];r=2===r.length?10**r[1]:1;return null==D?null:Math.round(D*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:r=>null==r[0]?null:1===r.length?parseInt(r[0].toFixed(0),10):parseFloat(r[0].toFixed(r[1]))},
char_length:{minParams:1,maxParams:1,evaluate:r=>"string"===typeof r[0]||r[0]instanceof String?r[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:r=>{let D="";for(let z=0;z<r.length;z++){if(null==r[z])return null;D+=r[z].toString()}return D}},lower:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toUpperCase()}};k.SqlInterval=Y;k.evaluateFunction=function(r,D){const z=X[r.toLowerCase()];
if(null==z)throw Error("Function Not Recognised");if(D.length<z.minParams||D.length>z.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return z.evaluate(D)};k.isStandardized=function(r,D){r=X[r.toLowerCase()];return null!=r&&D>=r.minParams&&D<=r.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(k,d){var Y={exports:{}};(function(r){(function(D,z){r.exports&&
(r.exports=z())})(d.commonjsGlobal,function(){function D(w,t,q,H){w=Error.call(this,w);Object.setPrototypeOf&&Object.setPrototypeOf(w,D.prototype);w.expected=t;w.found=q;w.location=H;w.name="SyntaxError";return w}function z(w,t,q){q=q||" ";if(w.length>t)return w;t-=w.length;q+=q.repeat(t);return w+q.slice(0,t)}(function(w,t){function q(){this.constructor=w}q.prototype=t.prototype;w.prototype=new q})(D,Error);D.prototype.format=function(w){var t="Error: "+this.message;if(this.location){var q=null,
H;for(H=0;H<w.length;H++)if(w[H].source===this.location.source){q=w[H].text.split(/\r\n|\n|\r/g);break}w=this.location.start;H=this.location.source+":"+w.line+":"+w.column;if(q){var N=this.location.end,O=z("",w.line.toString().length);q=q[w.line-1];N=w.line===N.line?N.column:q.length+1;t+="\n --\x3e "+H+"\n"+O+" |\n"+w.line+" | "+q+"\n"+O+" | "+z("",w.column-1)+z("",N-w.column,"^")}else t+="\n at "+H}return t};D.buildMessage=function(w,t){function q(B){return B.charCodeAt(0).toString(16).toUpperCase()}
function H(B){return B.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+q(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+q(b)})}function N(B){return B.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+
q(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+q(b)})}function O(B){return u[B.type](B)}var u={literal:function(B){return'"'+H(B.text)+'"'},class:function(B){var b=B.parts.map(function(f){return Array.isArray(f)?N(f[0])+"-"+N(f[1]):N(f)});return"["+(B.inverted?"^":"")+b+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(B){return B.description}};return"Expected "+function(B){B=B.map(O);var b,f;B.sort();if(0<B.length){for(f=b=1;b<B.length;b++)B[b-
1]!==B[b]&&(B[f]=B[b],f++);B.length=f}switch(B.length){case 1:return B[0];case 2:return B[0]+" or "+B[1];default:return B.slice(0,-1).join(", ")+", or "+B[B.length-1]}}(w)+" but "+(t?'"'+H(t)+'"':"end of input")+" found."};return{SyntaxError:D,parse:function(w,t){function q(v,E){return{type:"literal",text:v,ignoreCase:E}}function H(v,E,W){return{type:"class",parts:v,inverted:E,ignoreCase:W}}function N(v){var E=ac[v],W;if(!E){for(W=v-1;!ac[W];)W--;E=ac[W];for(E={line:E.line,column:E.column};W<v;)10===
w.charCodeAt(W)?(E.line++,E.column=1):E.column++,W++;ac[v]=E}return E}function O(v,E){var W=N(v),qa=N(E);return{source:$a,start:{offset:v,line:W.line,column:W.column},end:{offset:E,line:qa.line,column:qa.column}}}function u(v){h<pb||(h>pb&&(pb=h,tc=[]),tc.push(v))}function B(){var v=h;ra();var E=f();E!==a?(ra(),v=E):(h=v,v=a);return v}function b(){var v=h;var E=f();if(E!==a){v=[];var W=h;var qa=ra();var Aa=Ea();if(Aa!==a){var La=ra();var Ma=f();Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)}else h=W,W=a;for(;W!==
a;)v.push(W),W=h,qa=ra(),Aa=Ea(),Aa!==a?(La=ra(),Ma=f(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)):(h=W,W=a);W={type:"expr_list"};E=[E];for(qa=0;qa<v.length;qa++)E.push(v[qa][3]);W.value=E;v=W}else h=v,v=a;return v}function f(){var v=h;var E=m();if(E!==a){v=[];var W=h;var qa=ra();var Aa=T();if(Aa!==a){var La=ra();var Ma=m();Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)}else h=W,W=a;for(;W!==a;)v.push(W),W=h,qa=ra(),Aa=T(),Aa!==a?(La=ra(),Ma=m(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)):(h=W,W=a);v=Va(E,v)}else h=v,v=
a;return v}function m(){var v=h;var E=F();if(E!==a){v=[];var W=h;var qa=ra();var Aa=J();if(Aa!==a){var La=ra();var Ma=F();Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)}else h=W,W=a;for(;W!==a;)v.push(W),W=h,qa=ra(),Aa=J(),Aa!==a?(La=ra(),Ma=F(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)):(h=W,W=a);v=Va(E,v)}else h=v,v=a;return v}function F(){var v=h;var E=n();if(E===a){E=h;if(33===w.charCodeAt(h)){var W=tb;h++}else W=a,0===sa&&u(ld);if(W!==a){var qa=h;sa++;if(61===w.charCodeAt(h)){var Aa=jb;h++}else Aa=a,0===sa&&
u(Jc);sa--;Aa===a?qa=void 0:(h=qa,qa=a);qa!==a?E=W=[W,qa]:(h=E,E=a)}else h=E,E=a}E!==a?(W=ra(),qa=F(),qa!==a?v={type:"unary_expr",operator:"NOT",expr:qa}:(h=v,v=a)):(h=v,v=a);if(v===a){E=h;v=I();if(v!==a){ra();E=[];W=h;qa=ra();Aa=l();if(Aa!==a){var La=ra();var Ma=I();Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)}else h=W,W=a;if(W!==a)for(;W!==a;)E.push(W),W=h,qa=ra(),Aa=l(),Aa!==a?(La=ra(),Ma=I(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)):(h=W,W=a);else E=a;E!==a&&(E={type:"arithmetic",tail:E});E===a&&(E=h,W=y(),
W!==a?(ra(),qa=Fa(),qa!==a?(ra(),qa=b(),qa!==a?(ra(),Aa=Pa(),Aa!==a?E={op:W,right:qa}:(h=E,E=a)):(h=E,E=a)):(h=E,E=a)):(h=E,E=a),E===a&&(E=h,W=y(),W!==a?(ra(),qa=Fa(),qa!==a?(ra(),qa=Pa(),qa!==a?E={op:W,right:{type:"expr_list",value:[]}}:(h=E,E=a)):(h=E,E=a)):(h=E,E=a),E===a&&(E=h,W=y(),W!==a?(ra(),qa=e(),qa!==a?E={op:W,right:qa}:(h=E,E=a)):(h=E,E=a))),E===a&&(E=h,Aa=n(),Aa!==a?(ra(),W=V(),W!==a?(ra(),qa=I(),qa!==a?(ra(),La=J(),La!==a?(ra(),Aa=I(),Aa!==a?E={op:"NOT"+W,right:{type:"expr_list",value:[qa,
Aa]}}:(h=E,E=a)):(h=E,E=a)):(h=E,E=a)):(h=E,E=a)):(h=E,E=a),E===a&&(E=h,Aa=V(),Aa!==a?(ra(),W=I(),W!==a?(ra(),qa=J(),qa!==a?(ra(),La=I(),La!==a?E={op:Aa,right:{type:"expr_list",value:[W,La]}}:(h=E,E=a)):(h=E,E=a)):(h=E,E=a)):(h=E,E=a)),E===a&&(E=h,W=p(),W!==a?(ra(),qa=n(),qa!==a?(ra(),qa=I(),qa!==a?E={op:W+"NOT",right:qa}:(h=E,E=a)):(h=E,E=a)):(h=E,E=a),E===a&&(E=h,W=p(),W!==a?(ra(),qa=I(),qa!==a?E={op:W,right:qa}:(h=E,E=a)):(h=E,E=a)),E===a&&(E=h,W=C(),W!==a?(ra(),qa=na(),qa!==a?(ra(),Aa=h,w.substr(h,
6).toLowerCase()===Ua?(La=w.substr(h,6),h+=6):(La=a,0===sa&&u(md)),La!==a?(La=h,sa++,Ma=M(),sa--,Ma===a?La=void 0:(h=La,La=a),La!==a?Aa="ESCAPE":(h=Aa,Aa=a)):(h=Aa,Aa=a),Aa!==a?(ra(),Aa=ta(),Aa!==a?E={op:W,right:qa,escape:Aa.value}:(h=E,E=a)):(h=E,E=a)):(h=E,E=a)):(h=E,E=a),E===a&&(E=h,W=C(),W!==a?(ra(),qa=na(),qa!==a?E={op:W,right:qa,escape:""}:(h=E,E=a)):(h=E,E=a))))));E===a&&(E=null);""==E||void 0==E||null==E?E=v:(W=null,E=W="arithmetic"==E.type?Va(v,E.tail):Ta(E.op,v,E.right,E.escape))}else h=
E,E=a;v=E}return v}function l(){if(w.substr(h,2)===Ab){var v=Ab;h+=2}else v=a,0===sa&&u(nd);v===a&&(62===w.charCodeAt(h)?(v=Zb,h++):(v=a,0===sa&&u(od)),v===a&&(w.substr(h,2)===Cb?(v=Cb,h+=2):(v=a,0===sa&&u(pd)),v===a&&(w.substr(h,2)===$b?(v=$b,h+=2):(v=a,0===sa&&u(qd)),v===a&&(60===w.charCodeAt(h)?(v=kb,h++):(v=a,0===sa&&u(rd)),v===a&&(61===w.charCodeAt(h)?(v=jb,h++):(v=a,0===sa&&u(Jc)),v===a&&(w.substr(h,2)===sb?(v=sb,h+=2):(v=a,0===sa&&u(sd))))))));return v}function C(){var v=v=h;var E=n();if(E!==
a){var W=ra();var qa=ea();qa!==a?v=E=[E,W,qa]:(h=v,v=a)}else h=v,v=a;v!==a&&(v=v[0]+" "+v[2]);v===a&&(v=ea());return v}function y(){var v=v=h;var E=n();if(E!==a){var W=ra();var qa=c();qa!==a?v=E=[E,W,qa]:(h=v,v=a)}else h=v,v=a;v!==a&&(v=v[0]+" "+v[2]);v===a&&(v=c());return v}function I(){var v=h;var E=R();if(E!==a){v=[];var W=h;var qa=ra();var Aa=Q();if(Aa!==a){var La=ra();var Ma=R();Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)}else h=W,W=a;for(;W!==a;)v.push(W),W=h,qa=ra(),Aa=Q(),Aa!==a?(La=ra(),Ma=R(),Ma!==
a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)):(h=W,W=a);v=Va(E,v)}else h=v,v=a;return v}function Q(){if(43===w.charCodeAt(h)){var v=Qa;h++}else v=a,0===sa&&u(uc);v===a&&(45===w.charCodeAt(h)?(v=eb,h++):(v=a,0===sa&&u(vc)));return v}function R(){var v=h;var E=L();if(E!==a){v=[];var W=h;var qa=ra();var Aa=da();if(Aa!==a){var La=ra();var Ma=L();Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)}else h=W,W=a;for(;W!==a;)v.push(W),W=h,qa=ra(),Aa=da(),Aa!==a?(La=ra(),Ma=L(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(h=W,W=a)):(h=W,W=a);v=Va(E,v)}else h=
v,v=a;return v}function da(){if(42===w.charCodeAt(h)){var v=ob;h++}else v=a,0===sa&&u(td);v===a&&(47===w.charCodeAt(h)?(v=Na,h++):(v=a,0===sa&&u(ud)));return v}function L(){var v=ta();if(v===a){var E=h;var W=h;var qa=Ja();if(qa!==a){var Aa=Ba();if(Aa!==a){var La=Sa();La!==a?W=parseFloat(qa+Aa+La):(h=W,W=a)}else h=W,W=a}else h=W,W=a;W===a&&(W=h,qa=Ja(),qa!==a?(Aa=Ba(),Aa!==a?W=parseFloat(qa+Aa):(h=W,W=a)):(h=W,W=a),W===a&&(W=h,qa=Ja(),qa!==a?(Aa=Sa(),Aa!==a?W=parseFloat(qa+Aa):(h=W,W=a)):(h=W,W=a),
W===a&&(W=h,qa=Ja(),qa!==a&&(qa=parseFloat(qa)),W=qa)));var Ma=W;if(Ma!==a){var bc=h;sa++;var vd=U();sa--;vd===a?bc=void 0:(h=bc,bc=a);bc!==a?E={type:"number",value:Ma}:(h=E,E=a)}else h=E,E=a;v=E;if(v===a){var Pb=h;var Eb=h;if(w.substr(h,4).toLowerCase()===ya){var cc=w.substr(h,4);h+=4}else cc=a,0===sa&&u(wd);if(cc!==a){var Qb=h;sa++;var xd=M();sa--;xd===a?Qb=void 0:(h=Qb,Qb=a);Qb!==a?Eb=cc=[cc,Qb]:(h=Eb,Eb=a)}else h=Eb,Eb=a;var Bb=Eb;Bb!==a&&(Bb={type:"bool",value:!0});Pb=Bb;if(Pb===a){Pb=h;var Fb=
h;if(w.substr(h,5).toLowerCase()===Ha){var dc=w.substr(h,5);h+=5}else dc=a,0===sa&&u(yd);if(dc!==a){var Rb=h;sa++;var zd=M();sa--;zd===a?Rb=void 0:(h=Rb,Rb=a);Rb!==a?Fb=dc=[dc,Rb]:(h=Fb,Fb=a)}else h=Fb,Fb=a;Bb=Fb;Bb!==a&&(Bb={type:"bool",value:!1});Pb=Bb}v=Pb;if(v===a){var Gb=h;if(w.substr(h,4).toLowerCase()===xa){var ec=w.substr(h,4);h+=4}else ec=a,0===sa&&u(Ad);if(ec!==a){var Sb=h;sa++;var Bd=M();sa--;Bd===a?Sb=void 0:(h=Sb,Sb=a);Sb!==a?Gb=ec=[ec,Sb]:(h=Gb,Gb=a)}else h=Gb,Gb=a;var wc=Gb;wc!==a&&
(wc={type:"null",value:null});v=wc;if(v===a){var Hb=h;var Ib=h;if(w.substr(h,4).toLowerCase()===Cd){var Kc=w.substr(h,4);h+=4}else Kc=a,0===sa&&u(Dd);if(Kc!==a){var fc=h;sa++;var Ed=M();sa--;Ed===a?fc=void 0:(h=fc,fc=a);fc!==a?Ib="DATE":(h=Ib,Ib=a)}else h=Ib,Ib=a;if(Ib!==a){ra();var Lc=na();Lc!==a?Hb={type:"date",value:Lc.value}:(h=Hb,Hb=a)}else h=Hb,Hb=a;v=Hb;if(v===a){var Jb=h;var Kb=h;if(w.substr(h,9).toLowerCase()===Fd){var Mc=w.substr(h,9);h+=9}else Mc=a,0===sa&&u(Gd);if(Mc!==a){var gc=h;sa++;
var Hd=M();sa--;Hd===a?gc=void 0:(h=gc,gc=a);gc!==a?Kb="TIMESTAMP":(h=Kb,Kb=a)}else h=Kb,Kb=a;if(Kb!==a){ra();var Nc=na();Nc!==a?Jb={type:"timestamp",value:Nc.value}:(h=Jb,Jb=a)}else h=Jb,Jb=a;v=Jb;if(v===a){var cb=h;var xc=K();if(xc!==a){ra();if(45===w.charCodeAt(h)){var ub=eb;h++}else ub=a,0===sa&&u(vc);ub===a&&(43===w.charCodeAt(h)?(ub=Qa,h++):(ub=a,0===sa&&u(uc)));if(ub!==a){ra();var Tb=na();if(Tb!==a){ra();var Oc=A();Oc!==a?cb={type:"interval",value:Tb,qualifier:Oc,op:ub}:(h=cb,cb=a)}else h=
cb,cb=a}else h=cb,cb=a}else h=cb,cb=a;cb===a&&(cb=h,xc=K(),xc!==a?(ra(),ub=na(),ub!==a?(ra(),Tb=A(),Tb!==a?cb={type:"interval",value:ub,qualifier:Tb,op:""}:(h=cb,cb=a)):(h=cb,cb=a)):(h=cb,cb=a));v=cb}}}}}}var Ya=v;if(Ya===a){var gb=h;var Lb=h;if(w.substr(h,7).toLowerCase()===Id){var Pc=w.substr(h,7);h+=7}else Pc=a,0===sa&&u(Jd);if(Pc!==a){var hc=h;sa++;var Kd=M();sa--;Kd===a?hc=void 0:(h=hc,hc=a);hc!==a?Lb="EXTRACT":(h=Lb,Lb=a)}else h=Lb,Lb=a;if(Lb!==a){ra();var Ld=Fa();if(Ld!==a){ra();var mb=P();
mb===a&&(mb=ca(),mb===a&&(mb=oa(),mb===a&&(mb=pa(),mb===a&&(mb=ua(),mb===a&&(mb=wa())))));var Qc=mb;if(Qc!==a){ra();var Md=ia();if(Md!==a){ra();var Rc=f();if(Rc!==a){ra();var Nd=Pa();Nd!==a?gb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Qc},Rc]}}:(h=gb,gb=a)}else h=gb,gb=a}else h=gb,gb=a}else h=gb,gb=a}else h=gb,gb=a}else h=gb,gb=a;Ya=gb;if(Ya===a){var hb=h;var Mb=h;if(w.substr(h,9).toLowerCase()===Od){var Sc=w.substr(h,9);h+=9}else Sc=a,0===sa&&u(Pd);if(Sc!==
a){var ic=h;sa++;var Qd=M();sa--;Qd===a?ic=void 0:(h=ic,ic=a);ic!==a?Mb="SUBSTRING":(h=Mb,Mb=a)}else h=Mb,Mb=a;if(Mb!==a){ra();var Rd=Fa();if(Rd!==a){ra();var yc=f();if(yc!==a){ra();var Sd=ia();if(Sd!==a){ra();var zc=f();if(zc!==a){ra();var vb=h;var Nb=h;if(w.substr(h,3).toLowerCase()===Td){var Tc=w.substr(h,3);h+=3}else Tc=a,0===sa&&u(Ud);if(Tc!==a){var jc=h;sa++;var Vd=M();sa--;Vd===a?jc=void 0:(h=jc,jc=a);jc!==a?Nb="FOR":(h=Nb,Nb=a)}else h=Nb,Nb=a;var Ub=Nb;if(Ub!==a){var Wd=ra();var Uc=f();if(Uc!==
a){var Xd=ra();vb=Ub=[Ub,Wd,Uc,Xd]}else h=vb,vb=a}else h=vb,vb=a;vb===a&&(vb=null);Ub=Pa();Ub!==a?hb={type:"function",name:"substring",args:{type:"expr_list",value:vb?[yc,zc,vb[2]]:[yc,zc]}}:(h=hb,hb=a)}else h=hb,hb=a}else h=hb,hb=a}else h=hb,hb=a}else h=hb,hb=a}else h=hb,hb=a;Ya=hb;if(Ya===a){var Za=h;var Ac=fa();if(Ac!==a){ra();var Bc=Fa();if(Bc!==a){ra();var wb=g();wb===a&&(wb=null);ra();var Vb=f();if(Vb!==a){ra();var Cc=ia();if(Cc!==a){ra();var Vc=f();if(Vc!==a){ra();var Yd=Pa();Yd!==a?Za={type:"function",
name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb,Vc]}}:(h=Za,Za=a)}else h=Za,Za=a}else h=Za,Za=a}else h=Za,Za=a}else h=Za,Za=a}else h=Za,Za=a;Za===a&&(Za=h,Ac=fa(),Ac!==a?(ra(),Bc=Fa(),Bc!==a?(ra(),wb=g(),wb===a&&(wb=null),ra(),Vb=f(),Vb!==a?(ra(),Cc=Pa(),Cc!==a?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb]}}:(h=Za,Za=a)):(h=Za,Za=a)):(h=Za,Za=a)):(h=Za,Za=a));Ya=Za;if(Ya===a){var ib=h;var Ob=h;if(w.substr(h,
8).toLowerCase()===Zd){var Wc=w.substr(h,8);h+=8}else Wc=a,0===sa&&u($d);if(Wc!==a){var kc=h;sa++;var ae=M();sa--;ae===a?kc=void 0:(h=kc,kc=a);kc!==a?Ob="POSITION":(h=Ob,Ob=a)}else h=Ob,Ob=a;if(Ob!==a){ra();var be=Fa();if(be!==a){ra();var Xc=f();if(Xc!==a){ra();var ce=c();if(ce!==a){ra();var Yc=f();if(Yc!==a){ra();var de=Pa();de!==a?ib={type:"function",name:"position",args:{type:"expr_list",value:[Xc,Yc]}}:(h=ib,ib=a)}else h=ib,ib=a}else h=ib,ib=a}else h=ib,ib=a}else h=ib,ib=a}else h=ib,ib=a;Ya=ib;
if(Ya===a){var zb=h;var lc;var nb=h;nb=lc=G();if(nb===a)if(nb=h,96===w.charCodeAt(h)?(lc=Zc,h++):(lc=a,0===sa&&u($c)),lc!==a){var mc=[];if(ad.test(w.charAt(h))){var xb=w.charAt(h);h++}else xb=a,0===sa&&u(bd);if(xb!==a)for(;xb!==a;)mc.push(xb),ad.test(w.charAt(h))?(xb=w.charAt(h),h++):(xb=a,0===sa&&u(bd));else mc=a;mc!==a?(96===w.charCodeAt(h)?(xb=Zc,h++):(xb=a,0===sa&&u($c)),xb!==a?nb=mc.join(""):(h=nb,nb=a)):(h=nb,nb=a)}else h=nb,nb=a;var cd=nb;if(cd!==a){ra();var ee=Fa();if(ee!==a){ra();var nc=
b();nc===a&&(nc=null);ra();var fe=Pa();fe!==a?zb={type:"function",name:cd,args:nc?nc:{type:"expr_list",value:[]}}:(h=zb,zb=a)}else h=zb,zb=a}else h=zb,zb=a;Ya=zb;if(Ya===a){var qb;var db=h;var Dc=za();if(Dc!==a){ra();var Wb=f();if(Wb!==a){ra();var Xb=[];for(qb=la();qb!==a;)Xb.push(qb),qb=la();qb=ra();var oc=Ga();oc!==a?db={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:null}:(h=db,db=a)}else h=db,db=a}else h=db,db=a;if(db===a)if(db=h,Dc=za(),Dc!==a)if(ra(),Wb=f(),Wb!==a){ra();Xb=
[];for(qb=la();qb!==a;)Xb.push(qb),qb=la();qb=ra();oc=va();if(oc!==a){ra();var ge=Ga();ge!==a?db={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:oc.value}:(h=db,db=a)}else h=db,db=a}else h=db,db=a;else h=db,db=a;var Ec=db;if(Ec===a){var rb;var fb=h;var Fc=za();if(Fc!==a){ra();var Yb=[];for(rb=ma();rb!==a;)Yb.push(rb),rb=ma();rb=ra();var pc=Ga();pc!==a?fb={type:"case_expression",format:"searched",clauses:Yb,else:null}:(h=fb,fb=a)}else h=fb,fb=a;if(fb===a)if(fb=h,Fc=za(),Fc!==a){ra();
Yb=[];for(rb=ma();rb!==a;)Yb.push(rb),rb=ma();rb=ra();pc=va();if(pc!==a){ra();var he=Ga();he!==a?fb={type:"case_expression",format:"searched",clauses:Yb,else:pc.value}:(h=fb,fb=a)}else h=fb,fb=a}else h=fb,fb=a;Ec=fb}Ya=Ec;if(Ya===a){var qc;var rc=h;var dd=U();if(dd!==a){var ed=[];for(qc=x();qc!==a;)ed.push(qc),qc=x();rc=dd+ed.join("")}else h=rc,rc=a;var sc=rc;if(sc!==a){var Gc=sc;sc=/^CURRENT_DATE$/i.test(Gc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Gc)?{type:"current_time",mode:"timestamp"}:
{type:"column_ref",table:"",column:Gc}}Ya=sc;if(Ya===a&&(Ya=e(),Ya===a)){Ya=h;var ie=Fa();if(ie!==a){ra();var Hc=f();if(Hc!==a){ra();var je=Pa();je!==a?(Hc.paren=!0,Ya=Hc):(h=Ya,Ya=a)}else h=Ya,Ya=a}else h=Ya,Ya=a}}}}}}}}return Ya}function G(){var v;var E=h;var W=U();if(W!==a){E=[];for(v=M();v!==a;)E.push(v),v=M();E=W+E.join("")}else h=E,E=a;return E}function U(){if(ke.test(w.charAt(h))){var v=w.charAt(h);h++}else v=a,0===sa&&u(le);return v}function M(){if(me.test(w.charAt(h))){var v=w.charAt(h);
h++}else v=a,0===sa&&u(ne);return v}function x(){if(oe.test(w.charAt(h))){var v=w.charAt(h);h++}else v=a,0===sa&&u(pe);return v}function e(){var v=h;if(64===w.charCodeAt(h)){var E=Db;h++}else E=a,0===sa&&u(qe);if(E!==a){var W=G();W!==a?v=E=[E,W]:(h=v,v=a)}else h=v,v=a;v!==a&&(v={type:"param",value:v[1]});return v}function g(){var v=h;if(w.substr(h,7).toLowerCase()===re){var E=w.substr(h,7);h+=7}else E=a,0===sa&&u(se);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="LEADING":(h=
v,v=a)}else h=v,v=a;v===a&&(v=h,w.substr(h,8).toLowerCase()===te?(E=w.substr(h,8),h+=8):(E=a,0===sa&&u(ue)),E!==a?(E=h,sa++,W=M(),sa--,W===a?E=void 0:(h=E,E=a),E!==a?v="TRAILING":(h=v,v=a)):(h=v,v=a),v===a&&(v=h,w.substr(h,4).toLowerCase()===ve?(E=w.substr(h,4),h+=4):(E=a,0===sa&&u(we)),E!==a?(E=h,sa++,W=M(),sa--,W===a?E=void 0:(h=E,E=a),E!==a?v="BOTH":(h=v,v=a)):(h=v,v=a)));return v}function A(){var v=h;var E=h;var W=S();if(W!==a){ra();var qa=Fa();if(qa!==a)if(ra(),qa=ja(),qa!==a){ra();var Aa=Pa();
Aa!==a?E={type:"interval-period",period:W.value,precision:qa,secondary:null}:(h=E,E=a)}else h=E,E=a;else h=E,E=a}else h=E,E=a;E===a&&(E=h,W=S(),W!==a&&(W=fd(W)),E=W);if(E!==a)if(ra(),W=h,w.substr(h,2).toLowerCase()===xe?(qa=w.substr(h,2),h+=2):(qa=a,0===sa&&u(ye)),qa!==a?(qa=h,sa++,Aa=M(),sa--,Aa===a?qa=void 0:(h=qa,qa=a),qa!==a?W="TO":(h=W,W=a)):(h=W,W=a),W!==a){ra();W=h;qa=S();qa!==a&&(qa={type:"interval-period",period:qa.value,precision:null,secondary:null});W=qa;if(W===a){W=h;qa=wa();if(qa!==
a)if(ra(),qa=Fa(),qa!==a)if(ra(),qa=ja(),qa!==a)if(ra(),Aa=Ea(),Aa!==a)if(ra(),Aa=aa(),Aa!==a){ra();var La=Pa();La!==a?W=gd(qa,Aa):(h=W,W=a)}else h=W,W=a;else h=W,W=a;else h=W,W=a;else h=W,W=a;else h=W,W=a;W===a&&(W=h,qa=wa(),qa!==a?(ra(),qa=Fa(),qa!==a?(ra(),qa=ja(),qa!==a?(ra(),Aa=Pa(),Aa!==a?W={type:"interval-period",period:"second",precision:qa,secondary:null}:(h=W,W=a)):(h=W,W=a)):(h=W,W=a)):(h=W,W=a),W===a&&(W=h,qa=wa(),qa!==a&&(qa={type:"interval-period",period:"second",precision:null,secondary:null}),
W=qa))}W!==a?v={type:"interval-qualifier",start:E,end:W}:(h=v,v=a)}else h=v,v=a;else h=v,v=a;v===a&&(v=h,W=S(),W!==a?(ra(),E=Fa(),E!==a?(ra(),E=aa(),E!==a?(ra(),qa=Pa(),qa!==a?v={type:"interval-period",period:W.value,precision:E,secondary:null}:(h=v,v=a)):(h=v,v=a)):(h=v,v=a)):(h=v,v=a),v===a&&(v=h,W=S(),W!==a&&(W=fd(W)),v=W,v===a&&(v=h,W=wa(),W!==a?(ra(),E=Fa(),E!==a?(ra(),E=ja(),E!==a?(ra(),qa=Ea(),qa!==a?(ra(),W=aa(),W!==a?(ra(),qa=Pa(),qa!==a?v=gd(E,W):(h=v,v=a)):(h=v,v=a)):(h=v,v=a)):(h=v,v=
a)):(h=v,v=a)):(h=v,v=a),v===a&&(v=h,W=wa(),W!==a?(ra(),E=Fa(),E!==a?(ra(),E=aa(),E!==a?(ra(),qa=Pa(),qa!==a?v={type:"interval-period",period:"second",precision:E,secondary:null}:(h=v,v=a)):(h=v,v=a)):(h=v,v=a)):(h=v,v=a),v===a&&(v=h,W=wa(),W!==a&&(W={type:"interval-period",period:"second",precision:null,secondary:null}),v=W)))));return v}function S(){var v=h;v=oa();v!==a&&(v={type:"string",value:"day"});v===a&&(v=h,v=pa(),v!==a&&(v={type:"string",value:"hour"}),v===a&&(v=h,v=ua(),v!==a&&(v={type:"string",
value:"minute"}),v===a&&(v=h,v=ca(),v!==a&&(v={type:"string",value:"month"}),v===a&&(v=h,v=P(),v!==a&&(v={type:"string",value:"year"})))));return v}function aa(){var v=Oa();v!==a&&(v=parseFloat(v));return v}function ja(){var v=Oa();v!==a&&(v=parseFloat(v));return v}function na(){var v=ta();v===a&&(v=e());return v}function ta(){var v=h;if(39===w.charCodeAt(h)){var E=ba;h++}else E=a,0===sa&&u(hd);E===a&&(w.substr(h,2)===ha?(E=ha,h+=2):(E=a,0===sa&&u(ze)));if(E!==a){E=[];var W=h;w.substr(h,2)===Z?(W=
Z,h+=2):(W=a,0===sa&&u(id));W!==a&&(W="'");W===a&&(jd.test(w.charAt(h))?(W=w.charAt(h),h++):(W=a,0===sa&&u(kd)));for(;W!==a;)E.push(W),W=h,w.substr(h,2)===Z?(W=Z,h+=2):(W=a,0===sa&&u(id)),W!==a&&(W="'"),W===a&&(jd.test(w.charAt(h))?(W=w.charAt(h),h++):(W=a,0===sa&&u(kd)));39===w.charCodeAt(h)?(W=ba,h++):(W=a,0===sa&&u(hd));W!==a?v={type:"string",value:E.join("")}:(h=v,v=a)}else h=v,v=a;return v}function ma(){var v=h;if(Ca()!==a){ra();var E=f();if(E!==a){ra();var W=Da();W!==a?(ra(),W=f(),W!==a?v={type:"when_clause",
operand:E,value:W}:(h=v,v=a)):(h=v,v=a)}else h=v,v=a}else h=v,v=a;return v}function la(){var v=h;if(Ca()!==a){ra();var E=f();if(E!==a){ra();var W=Da();W!==a?(ra(),W=f(),W!==a?v={type:"when_clause",operand:E,value:W}:(h=v,v=a)):(h=v,v=a)}else h=v,v=a}else h=v,v=a;return v}function va(){var v=h;var E=h;if(w.substr(h,4).toLowerCase()===Ae){var W=w.substr(h,4);h+=4}else W=a,0===sa&&u(Be);if(W!==a){W=h;sa++;var qa=M();sa--;qa===a?W=void 0:(h=W,W=a);W!==a?E="ELSE":(h=E,E=a)}else h=E,E=a;E!==a?(ra(),E=f(),
E!==a?v={type:"else_clause",value:E}:(h=v,v=a)):(h=v,v=a);return v}function Ja(){var v=Oa();if(v===a){v=h;if(45===w.charCodeAt(h)){var E=eb;h++}else E=a,0===sa&&u(vc);E===a&&(43===w.charCodeAt(h)?(E=Qa,h++):(E=a,0===sa&&u(uc)));if(E!==a){var W=Oa();W!==a?v=E[0]+W:(h=v,v=a)}else h=v,v=a}return v}function Ba(){var v=h;if(46===w.charCodeAt(h)){var E=ka;h++}else E=a,0===sa&&u(Ce);E!==a?(v=Oa(),v===a&&(v=null),v="."+(null!=v?v:"")):(h=v,v=a);return v}function Sa(){var v;var E=v=h;if(De.test(w.charAt(h))){var W=
w.charAt(h);h++}else W=a,0===sa&&u(Ee);W!==a?(Fe.test(w.charAt(h))?(E=w.charAt(h),h++):(E=a,0===sa&&u(Ge)),E===a&&(E=null),E="e"+(null===E?"":E)):(h=E,E=a);E!==a?(W=Oa(),W!==a?v=E+W:(h=v,v=a)):(h=v,v=a);return v}function Oa(){var v=[];var E=Ia();if(E!==a)for(;E!==a;)v.push(E),E=Ia();else v=a;v!==a&&(v=v.join(""));return v}function Ia(){if(He.test(w.charAt(h))){var v=w.charAt(h);h++}else v=a,0===sa&&u(Ie);return v}function c(){var v=h;if(w.substr(h,2).toLowerCase()===Ka){var E=w.substr(h,2);h+=2}else E=
a,0===sa&&u(Je);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="IN":(h=v,v=a)}else h=v,v=a;return v}function p(){var v=h;if(w.substr(h,2).toLowerCase()===Xa){var E=w.substr(h,2);h+=2}else E=a,0===sa&&u(Ke);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="IS":(h=v,v=a)}else h=v,v=a;return v}function ea(){var v=h;if(w.substr(h,4).toLowerCase()===Wa){var E=w.substr(h,4);h+=4}else E=a,0===sa&&u(Le);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?
v="LIKE":(h=v,v=a)}else h=v,v=a;return v}function n(){var v=h;if(w.substr(h,3).toLowerCase()===bb){var E=w.substr(h,3);h+=3}else E=a,0===sa&&u(Me);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="NOT":(h=v,v=a)}else h=v,v=a;return v}function J(){var v=h;if(w.substr(h,3).toLowerCase()===lb){var E=w.substr(h,3);h+=3}else E=a,0===sa&&u(Ne);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="AND":(h=v,v=a)}else h=v,v=a;return v}function T(){var v=h;if(w.substr(h,2).toLowerCase()===
Oe){var E=w.substr(h,2);h+=2}else E=a,0===sa&&u(Pe);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="OR":(h=v,v=a)}else h=v,v=a;return v}function V(){var v=h;if(w.substr(h,7).toLowerCase()===Qe){var E=w.substr(h,7);h+=7}else E=a,0===sa&&u(Re);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="BETWEEN":(h=v,v=a)}else h=v,v=a;return v}function ia(){var v=h;if(w.substr(h,4).toLowerCase()===Se){var E=w.substr(h,4);h+=4}else E=a,0===sa&&u(Te);if(E!==a){E=h;sa++;var W=
M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="FROM":(h=v,v=a)}else h=v,v=a;return v}function fa(){var v=h;if(w.substr(h,4).toLowerCase()===Ue){var E=w.substr(h,4);h+=4}else E=a,0===sa&&u(Ve);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="TRIM":(h=v,v=a)}else h=v,v=a;return v}function K(){var v=h;if(w.substr(h,8).toLowerCase()===We){var E=w.substr(h,8);h+=8}else E=a,0===sa&&u(Xe);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="INTERVAL":(h=v,v=a)}else h=v,v=a;
return v}function P(){var v=h;if(w.substr(h,4).toLowerCase()===Ye){var E=w.substr(h,4);h+=4}else E=a,0===sa&&u(Ze);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="YEAR":(h=v,v=a)}else h=v,v=a;return v}function ca(){var v=h;if(w.substr(h,5).toLowerCase()===$e){var E=w.substr(h,5);h+=5}else E=a,0===sa&&u(af);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="MONTH":(h=v,v=a)}else h=v,v=a;return v}function oa(){var v=h;if(w.substr(h,3).toLowerCase()===bf){var E=w.substr(h,
3);h+=3}else E=a,0===sa&&u(cf);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="DAY":(h=v,v=a)}else h=v,v=a;return v}function pa(){var v=h;if(w.substr(h,4).toLowerCase()===df){var E=w.substr(h,4);h+=4}else E=a,0===sa&&u(ef);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="HOUR":(h=v,v=a)}else h=v,v=a;return v}function ua(){var v=h;if(w.substr(h,6).toLowerCase()===ff){var E=w.substr(h,6);h+=6}else E=a,0===sa&&u(gf);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:
(h=E,E=a);E!==a?v="MINUTE":(h=v,v=a)}else h=v,v=a;return v}function wa(){var v=h;if(w.substr(h,6).toLowerCase()===hf){var E=w.substr(h,6);h+=6}else E=a,0===sa&&u(jf);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="SECOND":(h=v,v=a)}else h=v,v=a;return v}function za(){var v=h;if(w.substr(h,4).toLowerCase()===kf){var E=w.substr(h,4);h+=4}else E=a,0===sa&&u(lf);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="CASE":(h=v,v=a)}else h=v,v=a;return v}function Ga(){var v=
h;if(w.substr(h,3).toLowerCase()===mf){var E=w.substr(h,3);h+=3}else E=a,0===sa&&u(nf);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="END":(h=v,v=a)}else h=v,v=a;return v}function Ca(){var v=h;if(w.substr(h,4).toLowerCase()===of){var E=w.substr(h,4);h+=4}else E=a,0===sa&&u(pf);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="WHEN":(h=v,v=a)}else h=v,v=a;return v}function Da(){var v=h;if(w.substr(h,4).toLowerCase()===qf){var E=w.substr(h,4);h+=4}else E=a,0===
sa&&u(rf);if(E!==a){E=h;sa++;var W=M();sa--;W===a?E=void 0:(h=E,E=a);E!==a?v="THEN":(h=v,v=a)}else h=v,v=a;return v}function Ea(){if(44===w.charCodeAt(h)){var v=sf;h++}else v=a,0===sa&&u(tf);return v}function Fa(){if(40===w.charCodeAt(h)){var v=uf;h++}else v=a,0===sa&&u(vf);return v}function Pa(){if(41===w.charCodeAt(h)){var v=wf;h++}else v=a,0===sa&&u(xf);return v}function ra(){var v;var E=[];for(v=ab();v!==a;)E.push(v),v=ab();return E}function ab(){if(yf.test(w.charAt(h))){var v=w.charAt(h);h++}else v=
a,0===sa&&u(zf);return v}function Ta(v,E,W,qa){v={type:"binary_expr",operator:v,left:E,right:W};void 0!==qa&&(v.escape=qa);return v}function Va(v,E){for(var W=0;W<E.length;W++)v=Ta(E[W][1],v,E[W][3]);return v}t=void 0!==t?t:{};var a={},$a=t.grammarSource,Ra={start:B},yb=B,tb="!",jb="\x3d",Ab="\x3e\x3d",Zb="\x3e",Cb="\x3c\x3d",$b="\x3c\x3e",kb="\x3c",sb="!\x3d",Qa="+",eb="-",ob="*",Na="/",Db="@",ba="'",ha="N'",Z="''",ka=".",xa="null",ya="true",Ha="false",Ka="in",Xa="is",Wa="like",Ua="escape",bb="not",
lb="and",Oe="or",Qe="between",Se="from",Td="for",Od="substring",Id="extract",Ue="trim",Zd="position",Fd="timestamp",Cd="date",re="leading",te="trailing",ve="both",xe="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",Ae="else",sf=",",uf="(",wf=")",Zc="`",ke=/^[A-Za-z_\x80-\uFFFF]/,me=/^[A-Za-z0-9_]/,oe=/^[A-Za-z0-9_.\x80-\uFFFF]/,jd=/^[^']/,He=/^[0-9]/,De=/^[eE]/,Fe=/^[+\-]/,yf=/^[ \t\n\r]/,ad=/^[^`]/,ld=q("!",!1),Jc=q("\x3d",
!1),nd=q("\x3e\x3d",!1),od=q("\x3e",!1),pd=q("\x3c\x3d",!1),qd=q("\x3c\x3e",!1),rd=q("\x3c",!1),sd=q("!\x3d",!1),uc=q("+",!1),vc=q("-",!1),td=q("*",!1),ud=q("/",!1),le=H([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),ne=H([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),pe=H([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),qe=q("@",!1),hd=q("'",!1),ze=q("N'",!1),id=q("''",!1),kd=H(["'"],!0,!1),Ce=q(".",!1),Ie=H([["0","9"]],!1,!1),Ee=H(["e","E"],!1,!1),Ge=H(["+","-"],!1,!1),Ad=q("NULL",
!0),wd=q("TRUE",!0),yd=q("FALSE",!0),Je=q("IN",!0),Ke=q("IS",!0),Le=q("LIKE",!0),md=q("ESCAPE",!0),Me=q("NOT",!0),Ne=q("AND",!0),Pe=q("OR",!0),Re=q("BETWEEN",!0),Te=q("FROM",!0),Ud=q("FOR",!0),Pd=q("SUBSTRING",!0),Jd=q("EXTRACT",!0),Ve=q("TRIM",!0),$d=q("POSITION",!0),Gd=q("TIMESTAMP",!0),Dd=q("DATE",!0),se=q("LEADING",!0),ue=q("TRAILING",!0),we=q("BOTH",!0),ye=q("TO",!0),Xe=q("INTERVAL",!0),Ze=q("YEAR",!0),af=q("MONTH",!0),cf=q("DAY",!0),ef=q("HOUR",!0),gf=q("MINUTE",!0),jf=q("SECOND",!0),lf=q("CASE",
!0),nf=q("END",!0),pf=q("WHEN",!0),rf=q("THEN",!0),Be=q("ELSE",!0),tf=q(",",!1),vf=q("(",!1),xf=q(")",!1),zf=H([" ","\t","\n","\r"],!1,!1),$c=q("`",!1),bd=H(["`"],!0,!1),fd=function(v){return{type:"interval-period",period:v.value,precision:null,secondary:null}},gd=function(v,E){return{type:"interval-period",period:"second",precision:v,secondary:E}},h=0,ac=[{line:1,column:1}],pb=0,tc=[],sa=0;if("startRule"in t){if(!(t.startRule in Ra))throw Error("Can't start parsing from rule \""+t.startRule+'".');
yb=Ra[t.startRule]}var Ic=yb();if(Ic!==a&&h===w.length)return Ic;Ic!==a&&h<w.length&&u({type:"end"});throw function(v,E,W){return new D(D.buildMessage(v,E),v,E,W)}(tc,pb<w.length?w.charAt(pb):null,pb<w.length?O(pb,pb+1):O(pb,pb));}}})})(Y);let X=function(){function r(){}r.parse=function(D){return Y.exports.parse(D)};return r}();k.WhereGrammar=X;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(k){k.commonjsGlobal="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};k.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};k.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},
"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(k){k.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,
supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(k,d,Y,X,r,D,z,w,t,q,H,N,O){function u(b,f,m,F,l,C){l-=m;C-=F;b=Math.min(1,Math.max(0,((b-m)*l+(f-F)*C)/(l*l+C*C)));return{x:m+l*b,y:F+C*b}}function B(b,f){return b?f?4:3:f?3:2}return function(){function b(m,F,l){this.items=m;this.queryGeometry=F;this.definitionExpression=l.definitionExpression;this.geometryType=l.geometryType;this.hasM=l.hasM;this.hasZ=l.hasZ;this.objectIdField=l.objectIdField;this.spatialReference=l.spatialReference;this.fieldsIndex=l.fieldsIndex;this.timeInfo=l.timeInfo;
this.featureAdapter=l.featureAdapter;this.aggregateAdapter=l.aggregateAdapter}var f=b.prototype;f.createQueryResponseForCount=function(m){const F=new D(m,this.featureAdapter,this.fieldsIndex);if(!m.outStatistics)return F.countDistinctValues(this.items);const {groupByFieldsForStatistics:l,having:C}=m;if(null==l||!l.length)return 1;const y=new Map,I=new Map,Q=new Set;m=m.outStatistics;for(const da of m){({statisticType:m}=da);m="exceedslimit"!==m?da.onStatisticField:void 0;if(!I.has(m)){var R=[];for(const L of l){const G=
this._getAttributeValues(F,L,y);R.push(G)}I.set(m,this._calculateUniqueValues(R,F.returnDistinctValues))}m=I.get(m);for(const L in m){const {data:G,items:U}=m[L];R=G.join(",");C&&!F.validateItems(U,C)||Q.add(R)}}return Q.size};f.createQueryResponse=function(m){let F;F=m.outStatistics?m.outStatistics.some(l=>"exceedslimit"===l.statisticType)?this._createExceedsLimitQueryResponse(m):this._createStatisticsQueryResponse(m):this._createFeatureQueryResponse(m);m.returnQueryGeometry&&(X.isValid(m.outSR)&&
!X.equals(this.queryGeometry.spatialReference,m.outSR)?F.queryGeometry=q.cleanFromGeometryEngine({spatialReference:m.outSR,...w.project(this.queryGeometry,this.queryGeometry.spatialReference,m.outSR)}):F.queryGeometry=q.cleanFromGeometryEngine({spatialReference:m.outSR,...this.queryGeometry}));return F};f.createSnappingResponse=function(m,F){const l=this.featureAdapter,C=B(this.hasZ,this.hasM),{x:y,y:I}=m.point,Q="number"===typeof m.distance?m.distance:m.distance.x,R="number"===typeof m.distance?
m.distance:m.distance.y,da={candidates:[]},L="esriGeometryPolygon"===this.geometryType;F=this.getPointCreator(m.point,this.spatialReference,F);for(const S of this.items){var G=l.getGeometry(S);if(d.isNone(G))continue;const {coords:aa,lengths:ja}=G;if(m.types&1){G=0;for(var U=0;U<ja.length;U++){var M=ja[U];for(var x=0;x<M;x++,G+=C){var e=aa[G],g=aa[G+1];if(x!==M-1){const na=aa[G+C],ta=aa[G+C+1],{x:ma,y:la}=u(y,I,e,g,na,ta);var A=(y-ma)/Q;const va=(I-la)/R;A=A*A+va*va;1>=A&&da.candidates.push({type:"edge",
objectId:l.getObjectId(S),distance:Math.sqrt(A),target:F(ma,la),start:F(e,g),end:F(na,ta)})}}}}if(m.types&2)for(G=L?aa.length-C:aa.length,U=0;U<G;U+=C)M=aa[U],x=aa[U+1],e=(y-M)/Q,g=(I-x)/R,e=e*e+g*g,1>=e&&da.candidates.push({type:"vertex",objectId:l.getObjectId(S),distance:Math.sqrt(e),target:F(M,x)})}da.candidates.sort((S,aa)=>S.distance-aa.distance);return da};f.getPointCreator=function(m,F,l){const C=d.isSome(l)&&!X.equals(F,l)?y=>w.project(y,F,l):y=>y;return null!=m.z&&null!=m.m?(y,I)=>C({x:y,
y:I,z:m.z,m:m.m}):null!=m.z?(y,I)=>C({x:y,y:I,z:m.z}):null!=m.m?(y,I)=>C({x:y,y:I,m:m.m}):(y,I)=>C({x:y,y:I})};f.executeAttributesQuery=function(m){var F=z.getWhereClause(m.where,this.fieldsIndex);if(!F)return Promise.resolve(this);if(F.isStandardized){let l=0;const C=[];for(const y of this.items)F.testFeature(y,this.featureAdapter)&&(C[l++]=y);F=new b(C,this.queryGeometry,this);F.definitionExpression=m.where;return Promise.resolve(F)}return Promise.reject(new TypeError("Where clause is not standardized"))};
f.executeAggregateIdsQuery=function(m){if(!m.aggregateIds||!m.aggregateIds.length||d.isNone(this.aggregateAdapter))return Promise.resolve(this);const F=new Set;for(const C of m.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(C).forEach(y=>F.add(y));const l=this.featureAdapter.getObjectId;return Promise.resolve(new b(this.items.filter(C=>F.has(l(C))),this.queryGeometry,this))};f.executeObjectIdsQuery=function(m){if(!m.objectIds||!m.objectIds.length)return Promise.resolve(this);const F=new Set(m.objectIds),
l=this.featureAdapter.getObjectId;return Promise.resolve(new b(this.items.filter(C=>F.has(l(C))),this.queryGeometry,this))};f.executeTimeQuery=function(m){m=t.getTimeOperator(this.timeInfo,m.timeExtent,this.featureAdapter);if(!d.isSome(m))return Promise.resolve(this);m=this.items.filter(m);return Promise.resolve(new b(m,this.queryGeometry,this))};f.filterLatest=function(){const {trackIdField:m,startTimeField:F,endTimeField:l}=this.timeInfo;var C=l||F;const y=new Map,I=this.featureAdapter.getAttribute;
for(const Q of this.items){const R=I(Q,m),da=I(Q,C),L=y.get(R);(!L||da>I(L,C))&&y.set(R,Q)}C=Array.from(y.values());return Promise.resolve(new b(C,this.queryGeometry,this))};f.project=function(){var m=k._asyncToGenerator(function*(F){if(!F||X.equals(this.spatialReference,F))return this;const l=this.featureAdapter,C=(yield w.projectMany(this.items.map(y=>q.getGeometry(this.geometryType,this.hasZ,this.hasM,l.getGeometry(y))),this.spatialReference,F)).map((y,I)=>l.cloneWithGeometry(this.items[I],r.convertFromGeometry(y,
this.hasZ,this.hasM)));return new b(C,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:F,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(F){return m.apply(this,arguments)}}();f.createSummaryStatisticsResponse=function(){var m=k._asyncToGenerator(function*(F,l){const {field:C,valueExpression:y,normalizationField:I,
normalizationType:Q,normalizationTotal:R,minValue:da,maxValue:L,scale:G}=l;l=this.fieldsIndex.isDateField(C);F=yield this._getDataValues(F,{field:C,valueExpression:y,normalizationField:I,normalizationType:Q,normalizationTotal:R,scale:G});const U=N.isNullCountSupported({normalizationType:Q,normalizationField:I,minValue:da,maxValue:L}),M=this.fieldsIndex.get(C),x={value:.5,fieldType:null==M?void 0:M.type};F=H.isStringField(M)?N.calculateStringStatistics({values:F,supportsNullCount:U,percentileParams:x}):
N.calculateStatistics({values:F,minValue:da,maxValue:L,useSampleStdDev:!Q,supportsNullCount:U,percentileParams:x});return N.processSummaryStatisticsResult(F,l)});return function(F,l){return m.apply(this,arguments)}}();f.createUniqueValuesResponse=function(){var m=k._asyncToGenerator(function*(F,l){const {field:C,valueExpression:y,domain:I,returnAllCodedValues:Q,scale:R}=l;F=yield this._getDataValues(F,{field:C,valueExpression:y,scale:R});F=N.calculateUniqueValuesCount(F);return N.createUVResult(F,
I,Q)});return function(F,l){return m.apply(this,arguments)}}();f.createClassBreaksResponse=function(){var m=k._asyncToGenerator(function*(F,l){const {field:C,valueExpression:y,normalizationField:I,normalizationType:Q,normalizationTotal:R,classificationMethod:da,standardDeviationInterval:L,minValue:G,maxValue:U,numClasses:M,scale:x}=l;F=yield this._getDataValues(F,{field:C,valueExpression:y,normalizationField:I,normalizationType:Q,normalizationTotal:R,scale:x});F=N.calculateClassBreaks(F,{field:C,
normalizationField:I,normalizationType:Q,normalizationTotal:R,classificationMethod:da,standardDeviationInterval:L,minValue:G,maxValue:U,numClasses:M});return N.resolveCBResult(F,da)});return function(F,l){return m.apply(this,arguments)}}();f.createHistogramResponse=function(){var m=k._asyncToGenerator(function*(F,l){const {field:C,valueExpression:y,normalizationField:I,normalizationType:Q,normalizationTotal:R,classificationMethod:da,standardDeviationInterval:L,minValue:G,maxValue:U,numBins:M,scale:x}=
l;F=yield this._getDataValues(F,{field:C,valueExpression:y,normalizationField:I,normalizationType:Q,normalizationTotal:R,scale:x});return N.calculateHistogram(F,{field:C,normalizationField:I,normalizationType:Q,normalizationTotal:R,classificationMethod:da,standardDeviationInterval:L,minValue:G,maxValue:U,numBins:M})});return function(F,l){return m.apply(this,arguments)}}();f._sortFeatures=function(m,F,l){if(1<m.length&&F&&F.length)for(const C of F.reverse()){F=C.split(" ");const y=F[0],I=this.fieldsIndex.get(y);
F=F[1]&&"desc"===F[1].toLowerCase();const Q=N.getAttributeComparator(null==I?void 0:I.type,F);m.sort((R,da)=>{R=l(R,y,I);da=l(da,y,I);return Q(R,da)})}};f._createFeatureQueryResponse=function(m){const F=this.items,{geometryType:l,hasM:C,hasZ:y,objectIdField:I,spatialReference:Q}=this,{outFields:R,outSR:da,quantizationParameters:L,resultRecordCount:G,resultOffset:U,returnZ:M,returnM:x}=m,e=null!=G?F.length>(U||0)+G:!1,g=R&&(R.includes("*")?[...this.fieldsIndex.fields]:R.map(A=>this.fieldsIndex.get(A)));
return{exceededTransferLimit:e,features:this._createFeatures(m,F),fields:g,geometryType:l,hasM:C&&x,hasZ:y&&M,objectIdFieldName:I,spatialReference:q.cleanFromGeometryEngine(da?da:Q),transform:L&&Y.toQuantizationTransform(L)||null}};f._createFeatures=function(m,F){const l=new D(m,this.featureAdapter,this.fieldsIndex),{hasM:C,hasZ:y}=this,{orderByFields:I,quantizationParameters:Q,returnGeometry:R,returnCentroid:da,maxAllowableOffset:L,resultOffset:G,resultRecordCount:U,returnZ:M=!1,returnM:x=!1}=m,
e=y&&M,g=C&&x;m=[];var A=0;F=[...F];this._sortFeatures(F,I,(ja,na,ta)=>l.getFieldValue(ja,na,ta));if(R||da){var S=Y.toQuantizationTransform(Q);if(R&&!da)for(var aa of F)m[A++]={attributes:l.getAttributes(aa),geometry:q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(aa),L,S,e,g)};else if(!R&&da)for(const ja of F)m[A++]={attributes:l.getAttributes(ja),centroid:q.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),S)};else for(const ja of F)m[A++]={attributes:l.getAttributes(ja),
centroid:q.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),S),geometry:q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ja),L,S,e,g)}}else for(S of F)(aa=l.getAttributes(S))&&(m[A++]={attributes:aa});A=G||0;null!=U&&(m=m.slice(A,Math.min(m.length,A+U)));return m};f._createExceedsLimitQueryResponse=function(m){var F=!1;let l=Number.POSITIVE_INFINITY,C=Number.POSITIVE_INFINITY;F=Number.POSITIVE_INFINITY;for(const y of m.outStatistics)if("exceedslimit"===
y.statisticType){l=null!=y.maxPointCount?y.maxPointCount:Number.POSITIVE_INFINITY;C=null!=y.maxRecordCount?y.maxRecordCount:Number.POSITIVE_INFINITY;F=null!=y.maxVertexCount?y.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)F=this.items.length>l;else if(this.items.length>C)F=!0;else{m=this.hasZ?this.hasM?4:3:this.hasM?3:2;const y=this.featureAdapter;F=this.items.reduce((I,Q)=>{Q=y.getGeometry(Q);return I+(d.isSome(Q)&&Q.coords.length||0)},0)/m>F}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(F)}}]}};f._createStatisticsQueryResponse=function(m){var F={attributes:{}};const l=[],C=new Map,y=new Map,I=new Map,Q=new Map,R=new D(m,this.featureAdapter,this.fieldsIndex);var da=m.outStatistics;const {groupByFieldsForStatistics:L,having:G,orderByFields:U}=m;m=L&&L.length;const M=!!m,x=M&&L[0],e=M&&!this.fieldsIndex.get(x);for(const ja of da){const {outStatisticFieldName:na,
statisticType:ta}=ja;da=ja;var g="exceedslimit"!==ta?ja.onStatisticField:void 0;const ma="percentile_disc"===ta||"percentile_cont"===ta,la=M&&1===m&&(g===x||e)&&"count"===ta;if(M){if(!I.has(g)){var A=[];for(const va of L){var S=this._getAttributeValues(R,va,C);A.push(S)}I.set(g,this._calculateUniqueValues(A,R.returnDistinctValues))}A=I.get(g);for(const va in A){const {count:Ja,data:Ba,items:Sa,itemPositions:Oa}=A[va];S=Ba.join(",");if(!G||R.validateItems(Sa,G)){const Ia=Q.get(S)||{attributes:{}};
var aa=null;if(la)aa=Ja;else{const c=this._getAttributeValues(R,g,C);aa=Oa.map(p=>c[p]);aa=ma&&"statisticParameters"in da?this._getPercentileValue(da,aa):this._getStatisticValue(da,aa,null,R.returnDistinctValues)}Ia.attributes[na]=aa;L.forEach((c,p)=>Ia.attributes[this.fieldsIndex.get(c)?c:`EXPR_${p+1}`]=Ba[p]);Q.set(S,Ia)}}}else g=this._getAttributeValues(R,g,C),F.attributes[na]=ma&&"statisticParameters"in da?this._getPercentileValue(da,g):this._getStatisticValue(da,g,y,R.returnDistinctValues);l.push({name:na,
alias:na,type:"esriFieldTypeDouble"})}F=M?Array.from(Q.values()):[F];this._sortFeatures(F,U,(ja,na)=>ja.attributes[na]);return{fields:l,features:F}};f._getStatisticValue=function(m,F,l,C){const {onStatisticField:y,statisticType:I}=m;m=null;m=null!=l&&l.has(y)?l.get(y):H.isStringField(this.fieldsIndex.get(y))?N.calculateStringStatistics({values:F,returnDistinct:C}):N.calculateStatistics({values:F,minValue:null,maxValue:null,useSampleStdDev:!0});l&&l.set(y,m);return m["var"===I?"variance":I]};f._getPercentileValue=
function(m,F){const {onStatisticField:l,statisticParameters:C,statisticType:y}=m,{value:I,orderBy:Q}=C;m=this.fieldsIndex.get(l);return N.calculatePercentile(F,{value:I,orderBy:Q,fieldType:null==m?void 0:m.type,isDiscrete:"percentile_disc"===y})};f._getAttributeValues=function(m,F,l){if(l.has(F))return l.get(F);const C=this.fieldsIndex.get(F),y=this.items.map(I=>m.getFieldValue(I,F,C));l.set(F,y);return y};f._getAttributeNormalizedValues=function(m,F){return this.items.map(l=>m.getNormalizedValue(l,
{field:F.field,fieldInfo:this.fieldsIndex.get(F.field),normalizationField:F.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(F.normalizationField),normalizationType:F.normalizationType,normalizationTotal:F.normalizationTotal}))};f._getAttributeExpressionValues=function(){var m=k._asyncToGenerator(function*(F,l,C){const {arcadeUtils:y}=yield O.loadArcade(),I=y.createFunction(l),Q=C&&y.getViewInfo(C);return this.items.map(R=>F.getExpressionValue(R,{compiledFunc:I,viewInfo:Q},y))});return function(F,
l,C){return m.apply(this,arguments)}}();f._calculateUniqueValues=function(m,F){const l={},C=this.items,y=C.length;for(let I=0;I<y;I++){const Q=C[I],R=[];for(const L of m)R.push(L[I]);const da=R.join(",");F?null==l[da]&&(l[da]={count:1,data:R,items:[Q],itemPositions:[I]}):null==l[da]?l[da]={count:1,data:R,items:[Q],itemPositions:[I]}:(l[da].count++,l[da].items.push(Q),l[da].itemPositions.push(I))}return l};f._getDataValues=function(){var m=k._asyncToGenerator(function*(F,l){const C=new D(F,this.featureAdapter,
this.fieldsIndex),{valueExpression:y,field:I,normalizationField:Q,normalizationType:R,normalizationTotal:da,scale:L}=l;F=y?{viewingMode:"map",scale:L,spatialReference:F.outSR||this.spatialReference}:null;return y?this._getAttributeExpressionValues(C,y,F):this._getAttributeNormalizedValues(C,{field:I,normalizationField:Q,normalizationType:R,normalizationTotal:da})});return function(F,l){return m.apply(this,arguments)}}();k._createClass(b,[{key:"size",get:function(){return this.items.length}}]);return b}()})},
"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(k,d,Y){function X({scale:L,translate:G},U){return Math.round((U-G[0])/L[0])}function r({scale:L,translate:G},U){return Math.round((G[1]-U)/L[1])}function D(L,G,U){const M=[];let x,e,g,A;for(let S=0;S<U.length;S++){const aa=U[S];if(0<S){if(g=X(L,aa[0]),A=r(L,aa[1]),g!==x||A!==e)M.push(G(aa,g-x,A-e)),x=g,e=A}else x=X(L,aa[0]),e=r(L,aa[1]),M.push(G(aa,x,e))}return 0<M.length?M:null}function z(L,
G,U,M){return D(L,U?M?da:R:M?R:Q,G)}function w(L,G,U,M){const x=[];U=U?M?da:R:M?R:Q;for(M=0;M<G.length;M++){const e=D(L,U,G[M]);e&&3<=e.length&&x.push(e)}return x.length?x:null}function t(L,G,U,M){const x=[];U=U?M?da:R:M?R:Q;for(M=0;M<G.length;M++){const e=D(L,U,G[M]);e&&2<=e.length&&x.push(e)}return x.length?x:null}function q({scale:L,translate:G},U){return U*L[0]+G[0]}function H({scale:L,translate:G},U){return G[1]-U*L[1]}function N(L,G,U){const M=Array(U.length);if(!U.length)return M;const [x,
e]=L.scale;let g=q(L,U[0][0]);L=H(L,U[0][1]);M[0]=G(U[0],g,L);for(let A=1;A<U.length;A++){const S=U[A];g+=S[0]*x;L-=S[1]*e;M[A]=G(S,g,L)}return M}function O(L,G,U){const M=Array(U.length);for(let x=0;x<U.length;x++)M[x]=N(L,G,U[x]);return M}function u(L,G,U,M){return N(L,U?M?da:R:M?R:Q,G)}function B(L,G,U,M){return O(L,U?M?da:R:M?R:Q,G)}function b(L,G,U,M){return O(L,U?M?da:R:M?R:Q,G)}function f(L,G,U){let [M,x]=U[0],e=Math.min(M,G[0]),g=Math.min(x,G[1]),A=Math.max(M,G[2]);G=Math.max(x,G[3]);for(let S=
1;S<U.length;S++){const [aa,ja]=U[S];M+=aa;x+=ja;0>aa&&(e=Math.min(e,M));0<aa&&(A=Math.max(A,M));0>ja?g=Math.min(g,x):0<ja&&(G=Math.max(G,x))}L[0]=e;L[1]=g;L[2]=A;L[3]=G;return L}function m(L,G){if(!G.length)return null;L[0]=L[1]=Number.POSITIVE_INFINITY;L[2]=L[3]=Number.NEGATIVE_INFINITY;for(let U=0;U<G.length;U++)f(L,L,G[U]);return L}function F(L,G,U,M,x){G.xmin=X(L,U.xmin);G.ymin=r(L,U.ymin);G.xmax=X(L,U.xmax);G.ymax=r(L,U.ymax);G!==U&&(M&&(G.zmin=U.zmin,G.zmax=U.zmax),x&&(G.mmin=U.mmin,G.mmax=
U.mmax));return G}function l(L,G,U,M,x){G.points=z(L,U.points,M,x);return G}function C(L,G,U,M,x){G.x=X(L,U.x);G.y=r(L,U.y);G!==U&&(M&&(G.z=U.z),x&&(G.m=U.m));return G}function y(L,G,U,M,x){L=w(L,U.rings,M,x);if(!L)return null;G.rings=L;return G}function I(L,G,U,M,x){L=t(L,U.paths,M,x);if(!L)return null;G.paths=L;return G}const Q=(L,G,U)=>[G,U],R=(L,G,U)=>[G,U,L[2]],da=(L,G,U)=>[G,U,L[2],L[3]];k.equals=function(L,G){if(L===G||null==L&&null==G)return!0;if(null==L||null==G)return!1;let U,M,x,e;L&&"upperLeft"===
L.originPosition?(U=L.translate[0],M=L.translate[1],L=L.scale[0]):(U=d.isSome(L.extent)?L.extent.xmin:0,M=d.isSome(L.extent)?L.extent.ymax:0,L=L.tolerance);G&&"upperLeft"===G.originPosition?(x=G.translate[0],e=G.translate[1],G=G.scale[0]):(x=d.isSome(G.extent)?G.extent.xmin:0,e=d.isSome(G.extent)?G.extent.ymax:0,G=G.tolerance);return U===x&&M===e&&L===G};k.getQuantizedBoundsCoordsArray=f;k.getQuantizedBoundsCoordsArrayArray=m;k.getQuantizedBoundsPaths=function(L){return m([0,0,0,0],L)};k.getQuantizedBoundsPoints=
function(L){const G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return f(G,G,L)};k.getQuantizedBoundsRings=function(L){return m([0,0,0,0],L)};k.quantizeBounds=function(L,G,U){G[0]=X(L,U[0]);G[3]=r(L,U[1]);G[2]=X(L,U[2]);G[1]=r(L,U[3]);return G};k.quantizeExtent=F;k.quantizeGeometry=function(L,G){return L&&G?Y.isPoint(G)?C(L,{},G,!1,!1):Y.isPolyline(G)?I(L,{},G,!1,!1):Y.isPolygon(G)?y(L,{},G,!1,!1):Y.isMultipoint(G)?l(L,{},G,!1,!1):Y.isExtent(G)?
F(L,{},G,!1,!1):null:null};k.quantizeMultipoint=l;k.quantizePaths=t;k.quantizePoint=C;k.quantizePoints=z;k.quantizePolygon=y;k.quantizePolyline=I;k.quantizeRings=w;k.quantizeX=X;k.quantizeY=r;k.toQuantizationTransform=function(L){return L?{originPosition:"upper-left"===L.originPosition?"upperLeft":"lower-left"===L.originPosition?"lowerLeft":L.originPosition,scale:L.tolerance?[L.tolerance,L.tolerance]:[1,1],translate:d.isSome(L.extent)?[L.extent.xmin,L.extent.ymax]:[0,0]}:null};k.unquantizeBounds=
function(L,G,U){return U?(G[0]=q(L,U[0]),G[1]=H(L,U[3]),G[2]=q(L,U[2]),G[3]=H(L,U[1]),G):[q(L,G[0]),H(L,G[3]),q(L,G[2]),H(L,G[1])]};k.unquantizeCoordsArray=N;k.unquantizeCoordsArrayArray=O;k.unquantizeExtent=function(L,G,U,M,x){G.xmin=q(L,U.xmin);G.ymin=H(L,U.ymin);G.xmax=q(L,U.xmax);G.ymax=H(L,U.ymax);G!==U&&(M&&(G.zmin=U.zmin,G.zmax=U.zmax),x&&(G.mmin=U.mmin,G.mmax=U.mmax));return G};k.unquantizeMultipoint=function(L,G,U,M,x){d.isSome(U)&&(G.points=u(L,U.points,M,x));return G};k.unquantizePaths=
B;k.unquantizePoint=function(L,G,U,M,x){if(d.isNone(U))return G;G.x=q(L,U.x);G.y=H(L,U.y);G!==U&&(M&&(G.z=U.z),x&&(G.m=U.m));return G};k.unquantizePoints=u;k.unquantizePolygon=function(L,G,U,M,x){d.isSome(U)&&(G.rings=b(L,U.rings,M,x));return G};k.unquantizePolyline=function(L,G,U,M,x){d.isSome(U)&&(G.paths=B(L,U.paths,M,x));return G};k.unquantizeRings=b;k.unquantizeX=q;k.unquantizeY=H;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../statistics/utils"],function(k,d,Y){return function(){function X(D,z,w){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=D.returnDistinctValues;this.fieldsIndex=w;this.featureAdapter=z;if((z=D.outFields)&&-1===z.indexOf("*")){this.outFields=z;D=0;for(const q of z){var t=d.getExpressionFromFieldName(q);t=(z=this.fieldsIndex.get(t))?null:d.getWhereClause(t,w);z=z?z.name:d.getAliasFromFieldName(q)||`FIELD_EXP_${D++}`;this._fieldDataCache.set(q,
{alias:z,clause:t})}}}var r=X.prototype;r.countDistinctValues=function(D){if(!this.returnDistinctValues)return D.length;D.forEach(z=>this.getAttributes(z));return this._returnDistinctMap.size};r.getAttributes=function(D){D=this._processAttributesForOutFields(D);return this._processAttributesForDistinctValues(D)};r.getFieldValue=function(D,z,w){const t=w?w.name:z;let q=null;this._fieldDataCache.has(t)?q=this._fieldDataCache.get(t).clause:w||(q=d.getWhereClause(z,this.fieldsIndex),this._fieldDataCache.set(t,
{alias:t,clause:q}));return w?this.featureAdapter.getAttribute(D,t):q.calculateValue(D,this.featureAdapter)};r.getNormalizedValue=function(D,z){const w=z.normalizationType,t=z.normalizationTotal;let q=this.getFieldValue(D,z.field,z.fieldInfo);w&&Number.isFinite(q)&&(D=this.getFieldValue(D,z.normalizationField,z.normalizationFieldInfo),q=Y.getNormalizedValue(q,w,D,t));return q};r.getExpressionValue=function(D,z,w){D={attributes:this.featureAdapter.getAttributes(D)};D=w.createExecContext(D,z.viewInfo);
return w.executeFunction(z.compiledFunc,D)};r.validateItem=function(D,z){this._fieldDataCache.has(z)||this._fieldDataCache.set(z,{alias:z,clause:d.getWhereClause(z,this.fieldsIndex)});return this._fieldDataCache.get(z).clause.testFeature(D,this.featureAdapter)};r.validateItems=function(D,z){this._fieldDataCache.has(z)||this._fieldDataCache.set(z,{alias:z,clause:d.getWhereClause(z,this.fieldsIndex)});return this._fieldDataCache.get(z).clause.testSet(D,this.featureAdapter)};r._processAttributesForOutFields=
function(D){const z=this.outFields;if(!z||!z.length)return this.featureAdapter.getAttributes(D);const w={};for(const t of z){const {alias:q,clause:H}=this._fieldDataCache.get(t);w[q]=H?H.calculateValue(D,this.featureAdapter):this.featureAdapter.getAttribute(D,q)}return w};r._processAttributesForDistinctValues=function(D){if(k.isNone(D)||!this.returnDistinctValues)return D;var z=this.outFields,w=[];if(z)for(const q of z){var {alias:t}=this._fieldDataCache.get(q);w.push(D[t])}else for(t in D)w.push(D[t]);
z=`${(z||["*"]).join(",")}=${w.join(",")}`;w=this._returnDistinctMap.get(z)||0;this._returnDistinctMap.set(z,++w);return 1<w?null:D};return X}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(k,d,Y){function X(l){const C=null!=l.minValue||null!=l.maxValue,y=!!l.sqlExpression&&l.supportsSQLExpression;return!(null!=l.normalizationField||null!=l.normalizationType)&&!C&&!y}function r(l){const {values:C,
useSampleStdDev:y,supportsNullCount:I}=l;var Q=Number.POSITIVE_INFINITY;let R=Number.NEGATIVE_INFINITY,da=null,L=null;var G=null;let U=null,M=0;const x=null==l.minValue?-Infinity:l.minValue,e=null==l.maxValue?Infinity:l.maxValue;for(const g of C)Number.isFinite(g)?g>=x&&g<=e&&(da+=g,Q=Math.min(Q,g),R=Math.max(R,g),M++):"string"===typeof g&&M++;if(M&&null!=da){L=da/M;G=0;for(const g of C)Number.isFinite(g)&&g>=x&&g<=e&&(G+=(g-L)**2);U=y?1<M?G/(M-1):0:0<M?G/M:0;G=Math.sqrt(U)}else R=Q=null;Q={avg:L,
count:M,max:R,min:Q,stddev:G,sum:da,variance:U};I&&(Q.nullcount=C.length-M);l.percentileParams&&(Q.median=D(C,l.percentileParams));return Q}function D(l,C){const {fieldType:y,value:I,orderBy:Q,isDiscrete:R}=C,da=z(y,"desc"===Q);l=[...l].filter(M=>null!=M).sort((M,x)=>da(M,x));if(0===l.length)return null;if(0>=I)return l[0];if(1<=I)return l[l.length-1];var L=(l.length-1)*I,G=Math.floor(L);C=G+1;L%=1;G=l[G];const U=l[C];return C>=l.length||R||"string"===typeof G||"string"===typeof U?G:G*(1-L)+U*L}function z(l,
C){const y=C?1:-1,I=t(C),Q=w(C);if(!l||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...m].includes(l))return(R,da)=>"number"===typeof R&&"number"===typeof da?I(R,da):"string"===typeof R&&"string"===typeof da?Q(R,da):y;if("esriFieldTypeDate"===l)return(R,da)=>{R=(new Date(R)).getTime();da=(new Date(da)).getTime();return isNaN(R)||isNaN(da)?y:I(R,da)};if(m.has(l))return(R,da)=>I(R,da);if("esriFieldTypeString"===l)return(R,da)=>Q(R,da);if("esriFieldTypeGUID"===
l||"esriFieldTypeGlobalID"===l){const R=w(C);return(da,L)=>R(q(da),q(L))}return C?(R,da)=>1:(R,da)=>-1}function w(l){return l?(C,y)=>{C=C.toUpperCase();y=y.toUpperCase();return C>y?-1:C<y?1:0}:(C,y)=>{C=C.toUpperCase();y=y.toUpperCase();return C<y?-1:C>y?1:0}}function t(l){return l?(C,y)=>y-C:(C,y)=>C-y}function q(l){return l.substr(24,12)+l.substr(19,4)+l.substr(16,2)+l.substr(14,2)+l.substr(11,2)+l.substr(9,2)+l.substr(6,2)+l.substr(4,2)+l.substr(2,2)+l.substr(0,2)}function H(l,C){const y=O({field:C.field,
normalizationType:C.normalizationType,normalizationField:C.normalizationField,classificationMethod:C.classificationMethod,standardDeviationInterval:C.standardDeviationInterval,breakCount:C.numClasses||5});l=N(l,C.minValue,C.maxValue);return Y.createGenerateRendererClassBreaks({definition:y,values:l,normalizationTotal:C.normalizationTotal})}function N(l,C,y){C=null==C?-Infinity:C;y=null==y?Infinity:y;return l.filter(I=>Number.isFinite(I)&&I>=C&&I<=y)}function O(l){const C=l.field,y=l.classificationMethod||
"equal-interval",I=l.normalizationType,Q=l.normalizationField,R=new d;R.classificationField=C;R.breakCount=l.breakCount;R.classificationMethod=y;R.standardDeviationInterval="standard-deviation"===y?l.standardDeviationInterval||1:void 0;R.normalizationType=I;R.normalizationField="field"===I?Q:void 0;return R}function u(l,C){const {field:y,classificationMethod:I,standardDeviationInterval:Q,normalizationType:R,normalizationField:da,normalizationTotal:L,minValue:G,maxValue:U}=C,M=C.numBins||10;let x=
C=null,e=null;I&&"equal-interval"!==I||R?({classBreaks:l}=H(l,{field:y,normalizationType:R,normalizationField:da,normalizationTotal:L,classificationMethod:I,standardDeviationInterval:Q,minValue:G,maxValue:U,numClasses:M}),C=l[0].minValue,x=l[l.length-1].maxValue,e=l.map(g=>[g.minValue,g.maxValue])):(null!=G&&null!=U?(C=G,x=U):(l=r({values:l,minValue:G,maxValue:U,useSampleStdDev:!R,supportsNullCount:X({normalizationType:R,normalizationField:da,minValue:G,maxValue:U})}),C=l.min,x=l.max),e=b(C,x,M));
return{min:C,max:x,intervals:e}}function B(l,C){let y=-1;for(let I=l.length-1;0<=I;I--)if(C>=l[I][0]){y=I;break}return y}function b(l,C,y){const I=(C-l)/y,Q=[];let R;for(let da=1;da<=y;da++)R=l+I,R=Number(R.toFixed(16)),Q.push([l,da===y?C:R]),l=R;return Q}const f=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,m=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),F="min max avg stddev count sum variance nullcount median".split(" ");k.calculateClassBreaks=
H;k.calculateHistogram=function(l,C){const {min:y,max:I,intervals:Q}=u(l,C),R=Q.map((da,L)=>({minValue:Q[L][0],maxValue:Q[L][1],count:0}));for(const da of l)null!=da&&da>=y&&da<=I&&(l=B(Q,da),-1<l&&R[l].count++);return{bins:R,minValue:y,maxValue:I,normalizationTotal:C.normalizationTotal}};k.calculatePercentile=D;k.calculateStatistics=r;k.calculateStringStatistics=function(l){const C=l.returnDistinct?[...new Set(l.values)]:l.values,y=C.filter(Q=>null!=Q).length,I={count:y};l.supportsNullCount&&(I.nullcount=
C.length-y);l.percentileParams&&(I.median=D(C,l.percentileParams));return I};k.calculateUniqueValuesCount=function(l){const C={};for(let y of l){if(null==y||"string"===typeof y&&""===y.trim())y=null;null==C[y]?C[y]={count:1,data:y}:C[y].count++}return{count:C}};k.createClassBreaksDefinition=O;k.createUVResult=function(l,C,y){const I=l.count;l=[];y&&C&&"coded-value"===C.type&&C.codedValues.forEach(Q=>{Q=Q.code;I.hasOwnProperty(Q)||(I[Q]={data:Q,count:0})});for(const Q in I)C=I[Q],l.push({value:C.data,
count:C.count,label:C.label});return{uniqueValueInfos:l}};k.getAttributeComparator=z;k.getEqualIntervalBins=b;k.getNormalizedValue=function(l,C,y,I){let Q=null;switch(C){case "log":0!==l&&(Q=Math.log(l)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(I)&&0!==I&&(Q=l/I*100);break;case "field":Number.isFinite(y)&&0!==y&&(Q=l/y);break;case "natural-log":0<l&&(Q=Math.log(l));break;case "square-root":0<l&&(Q=l**.5)}return Q};k.isNullCountSupported=X;k.processSummaryStatisticsResult=function(l,
C){let y;for(y in l)-1<F.indexOf(y)&&(Number.isFinite(l[y])||(l[y]=null));if(!C)return l;["avg","stddev","variance"].forEach(I=>{null!=l[I]&&(l[I]=Math.ceil(l[I]))});return l};k.resolveCBResult=function(l,C){let y=l.classBreaks;const I=y[0].minValue,Q=y[y.length-1].maxValue,R="standard-deviation"===C;y=y.map(da=>{const L=da.label;da={minValue:da.minValue,maxValue:da.maxValue,label:L};if(R&&L){const G=L.match(f).map(U=>+U.trim());2===G.length?(da.minStdDev=G[0],da.maxStdDev=G[1],0>G[0]&&0<G[1]&&(da.hasAvg=
!0)):1===G.length&&(L.includes("\x3c")?(da.minStdDev=null,da.maxStdDev=G[0]):L.includes("\x3e")&&(da.minStdDev=G[0],da.maxStdDev=null))}return da});return{minValue:I,maxValue:Q,classBreakInfos:y,normalizationTotal:l.normalizationTotal}};k.statisticTypes=F;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(k,d,Y,X,r,D,z,w,t){r=new Y.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});Y=new Y.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});t=function(q){function H(){var N=q.apply(this,arguments)||this;N.breakCount=null;N.classificationField=
null;N.classificationMethod=null;N.normalizationField=null;N.normalizationType=null;N.type="class-breaks-definition";return N}k._inheritsLoose(H,q);k._createClass(H,[{key:"standardDeviationInterval",set:function(N){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",N)}},{key:"definedInterval",set:function(N){"defined-interval"===this.classificationMethod&&this._set("definedInterval",N)}}]);return H}(t);d.__decorate([X.property({json:{write:!0}})],t.prototype,"breakCount",
void 0);d.__decorate([X.property({json:{write:!0}})],t.prototype,"classificationField",void 0);d.__decorate([X.property({type:String,json:{read:r.read,write:r.write}})],t.prototype,"classificationMethod",void 0);d.__decorate([X.property({json:{write:!0}})],t.prototype,"normalizationField",void 0);d.__decorate([X.property({json:{read:Y.read,write:Y.write}})],t.prototype,"normalizationType",void 0);d.__decorate([X.property({value:null,json:{write:!0}})],t.prototype,"standardDeviationInterval",null);
d.__decorate([X.property({value:null,json:{write:!0}})],t.prototype,"definedInterval",null);d.__decorate([X.property()],t.prototype,"type",void 0);return t=d.__decorate([w.subclass("esri.rest.support.ClassBreaksDefinition")],t)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(k,d,Y,X,r,D,z,w,t,q,H){Y=new Y.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});X=function(N){function O(){var u=N.apply(this,arguments)||this;u.baseSymbol=null;u.colorRamp=null;u.type=null;return u}k._inheritsLoose(O,N);return O}(X.JSONSupport);d.__decorate([r.property({type:H,json:{write:!0}})],X.prototype,"baseSymbol",void 0);d.__decorate([r.property({types:q.types,json:{read:{reader:q.fromJSON},write:!0}})],X.prototype,"colorRamp",void 0);d.__decorate([r.property({json:{read:Y.read,
write:Y.write}})],X.prototype,"type",void 0);return X=d.__decorate([t.subclass("esri.rest.support.ClassificationDefinition")],X)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(k,d,Y,X){Y={key:"type",base:Y,typeMap:{algorithmic:d,multipart:X}};k.fromJSON=function(r){return r&&r.type?"algorithmic"===r.type?d.fromJSON(r):"multipart"===r.type?X.fromJSON(r):null:null};k.types=Y;Object.defineProperty(k,"__esModule",
{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(k,d,Y,X,r,D,z,w,t){var q;t=q=function(H){function N(O){O=H.call(this,O)||this;O.algorithm=null;O.fromColor=null;O.toColor=
null;O.type="algorithmic";return O}k._inheritsLoose(N,H);N.prototype.clone=function(){return new q({fromColor:X.clone(this.fromColor),toColor:X.clone(this.toColor),algorithm:this.algorithm})};return N}(t);d.__decorate([z.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],t.prototype,"algorithm",void 0);d.__decorate([r.property({type:Y,json:{type:[D.Integer],write:!0}})],t.prototype,"fromColor",void 0);d.__decorate([r.property({type:Y,json:{type:[D.Integer],
write:!0}})],t.prototype,"toColor",void 0);d.__decorate([r.property({type:["algorithmic"]})],t.prototype,"type",void 0);return t=q=d.__decorate([w.subclass("esri.rest.support.AlgorithmicColorRamp")],t)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,d,Y){k.enumeration=function(X,r={}){var D;X=X instanceof d.JSONMap?X:new d.JSONMap(X,r);X={type:(null!=(D=null==r?void 0:r.ignoreUnknown)?D:1)?X.apiValues:String,readOnly:null==
r?void 0:r.readOnly,json:{type:X.jsonValues,read:null!=r&&r.readOnly?!1:{reader:X.read},write:{writer:X.write}}};void 0!==(null==r?void 0:r.default)&&(X.json.default=r.default);void 0!==(null==r?void 0:r.name)&&(X.json.name=r.name);return Y.property(X)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Y,X,r,D,z,w){Y=function(t){function q(H){H=t.call(this,H)||this;H.type=null;return H}k._inheritsLoose(q,t);return q}(Y.JSONSupport);d.__decorate([X.property({readOnly:!0,json:{read:!1,write:!0}})],Y.prototype,"type",void 0);return Y=d.__decorate([w.subclass("esri.rest.support.ColorRamp")],Y)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(k,d,Y,X,r,D,z,w){var t;r=t=function(q){function H(N){N=q.call(this,N)||this;N.colorRamps=null;N.type="multipart";return N}k._inheritsLoose(H,q);H.prototype.clone=function(){return new t({colorRamps:Y.clone(this.colorRamps)})};return H}(w);d.__decorate([X.property({type:[z],json:{write:!0}})],r.prototype,"colorRamps",void 0);d.__decorate([X.property({type:["multipart"]})],r.prototype,"type",void 0);return r=t=d.__decorate([D.subclass("esri.rest.support.MultipartColorRamp")],r)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Y,X,r,D,z,w,t,q,H){X=new X.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let N=0;r=function(O){function u(b){b=O.call(this,b)||this;b.id=`sym${N++}`;b.type=null;return b}k._inheritsLoose(u,
O);var B=u.prototype;B.readColor=function(b){return b&&null!=b[0]?[b[0],b[1],b[2],b[3]/255]:b};B.collectRequiredFields=function(){var b=k._asyncToGenerator(function*(f,m){});return function(f,m){return b.apply(this,arguments)}}();B.hash=function(){return JSON.stringify(this.toJSON())};B.clone=function(){};k._createClass(u,[{key:"color",set:function(b){this._set("color",b)}}]);return u}(r.JSONSupport);d.__decorate([D.property({type:X.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:X.write}}})],
r.prototype,"type",void 0);d.__decorate([D.property({type:Y,value:new Y([0,0,0,1]),json:{write:{allowNull:!0}}})],r.prototype,"color",null);d.__decorate([q.reader("color")],r.prototype,"readColor",null);return r=d.__decorate([H.subclass("esri.symbols.Symbol")],r)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(k){function d(H){const {classificationMethod:N,breakCount:O,normalizationType:u,definedInterval:B}=H.definition,b=[];var f=H.values;if(0===f.length)return[];
f=f.sort((I,Q)=>I-Q);var m=f[0],F=f[f.length-1];if("equal-interval"===N)if(f.length>=O){f=(F-m)/O;H=m;for(var l=1;l<O;l++){var C=Number((m+l*f).toFixed(6));b.push({minValue:H,maxValue:C,label:Y(H,C,u)});H=C}b.push({minValue:H,maxValue:F,label:Y(H,F,u)})}else f.forEach(I=>{b.push({minValue:I,maxValue:I,label:Y(I,I,u)})});else if("natural-breaks"===N){f=X(f);H=r(f.uniqueValues,H.valueFrequency||f.valueFrequency,O);for(l=1;l<O;l++)f.uniqueValues.length>l&&(C=Number(f.uniqueValues[H[l]].toFixed(6)),b.push({minValue:m,
maxValue:C,label:Y(m,C,u)}),m=C);b.push({minValue:m,maxValue:F,label:Y(m,F,u)})}else if("quantile"===N)if(f.length>=O&&m!==F){H=Math.ceil(f.length/O);l=0;for(C=1;C<O;C++){var y=H+l-1;y>f.length&&(y=f.length-1);0>y&&(y=0);b.push({minValue:m,maxValue:f[y],label:Y(m,f[y],u)});m=f[y];l+=H;H=Math.ceil((f.length-l)/(O-C))}b.push({minValue:m,maxValue:F,label:Y(m,F,u)})}else for(F=-1,m=0;m<f.length;m++)H=f[m],H!==F&&(F=H,b.push({minValue:F,maxValue:H,label:Y(F,H,u)}),F=H);else if("standard-deviation"===N)if(H=
w(f),l=t(f,H),0===l)b.push({minValue:f[0],maxValue:f[0],label:Y(f[0],f[0],u)});else{f=z(m,F,O,H,l)*l;l=0;for(C=O;1<=C;C--)y=Number((H-(C-.5)*f).toFixed(6)),b.push({minValue:m,maxValue:y,label:Y(m,y,u)}),m=y,l++;C=Number((H+.5*f).toFixed(6));b.push({minValue:m,maxValue:C,label:Y(m,C,u)});m=C;l++;for(y=1;y<=O;y++)C=l===2*O?F:Number((H+(y+.5)*f).toFixed(6)),b.push({minValue:m,maxValue:C,label:Y(m,C,u)}),m=C,l++}else if("defined-interval"===N){if(!B)return b;F=f[0];f=f[f.length-1];m=Math.ceil((f-F)/B);
H=F;for(l=1;l<m;l++)C=Number((F+l*B).toFixed(6)),b.push({minValue:H,maxValue:C,label:Y(H,C,u)}),H=C;b.push({minValue:H,maxValue:f,label:Y(H,f,u)})}return b}function Y(H,N,O){let u=null;return u=H===N?O&&"percent-of-total"===O?H+"%":H.toString():O&&"percent-of-total"===O?H+"% - "+N+"%":H+" - "+N}function X(H){const N=[],O=[];let u=Number.MIN_VALUE,B=1,b=-1;for(let f=0;f<H.length;f++){const m=H[f];m===u?(B++,O[b]=B):null!==m&&(N.push(m),u=m,B=1,O.push(B),b++)}return{uniqueValues:N,valueFrequency:O}}
function r(H,N,O){var u=H.length;const B=[];O>u&&(O=u);for(var b=0;b<O;b++)B.push(Math.round(b*u/O-1));B.push(u-1);b=D(B,H,N,O);{u=b.mean;b=b.sdcm;var f=O,m=0,F=0;let C=0,y=0,I=!0;for(let Q=0;2>Q&&I;Q++){0===Q&&(I=!1);for(var l=0;l<f-1;l++)for(;B[l+1]+1!==B[l+2];)if(B[l+1]+=1,m=q(l,B,H,N),C=m.sbMean,m=m.sbSdcm,F=q(l+1,B,H,N),y=F.sbMean,F=F.sbSdcm,m+F<b[l]+b[l+1])b[l]=m,b[l+1]=F,u[l]=C,u[l+1]=y,I=!0;else{--B[l+1];break}for(l=f-1;0<l;l--)for(;B[l]!==B[l-1]+1;)if(--B[l],m=q(l-1,B,H,N),C=m.sbMean,m=m.sbSdcm,
F=q(l,B,H,N),y=F.sbMean,F=F.sbSdcm,m+F<b[l-1]+b[l])b[l-1]=m,b[l]=F,u[l-1]=C,u[l]=y,I=!0;else{B[l]+=1;break}}u=I}u&&(b=D(B,H,N,O));return B}function D(H,N,O,u){let B=[];var b=[],f=[];let m=0;const F=[],l=[];for(var C=0;C<u;C++){var y=q(C,H,N,O);F.push(y.sbMean);l.push(y.sbSdcm);m+=l[C]}y=m;for(C=!0;C||m<y;){C=!1;B=[];for(b=0;b<u;b++)B.push(H[b]);for(f=0;f<u;f++)for(y=H[f]+1;y<=H[f+1];y++)if(b=N[y],0<f&&y!==H[f+1]&&Math.abs(b-F[f])>Math.abs(b-F[f-1]))H[f]=y;else if(f<u-1&&H[f]!==y-1&&Math.abs(b-F[f])>
Math.abs(b-F[f+1])){H[f+1]=y-1;break}y=m;m=0;b=[];f=[];for(let I=0;I<u;I++){b.push(F[I]);f.push(l[I]);const Q=q(I,H,N,O);F[I]=Q.sbMean;l[I]=Q.sbSdcm;m+=l[I]}}if(m>y){for(N=0;N<u;N++)H[N]=B[N],F[N]=b[N],l[N]=f[N];m=y}return{mean:F,sdcm:l}}function z(H,N,O,u,B){H=Math.max(u-H,N-u)/B/O;return 1<=H?1:.5<=H?.5:.25}function w(H){let N=0;for(let O=0;O<H.length;O++)N+=H[O];return N/=H.length}function t(H,N){let O=0;for(let u=0;u<H.length;u++){const B=H[u];O+=(B-N)*(B-N)}O/=H.length;return Math.sqrt(O)}function q(H,
N,O,u){var B=0,b=0;for(var f=N[H]+1;f<=N[H+1];f++){const m=u[f];B+=O[f]*m;b+=m}0>=b&&console.log("Exception in Natural Breaks calculation");B/=b;b=0;for(f=N[H]+1;f<=N[H+1];f++)b+=u[f]*(O[f]-B)**2;return{sbMean:B,sbSdcm:b}}k.createGenerateRendererClassBreaks=function(H){const {normalizationTotal:N}=H;return{classBreaks:d(H),normalizationTotal:N}};k.createGenerateRendererUniqueValues=function(H){H=X(H);const N=[],O=H.uniqueValues.length;for(let u=0;u<O;u++){const B=H.uniqueValues[u];N.push({value:B,
count:H.valueFrequency[u],label:B.toString()})}return{uniqueValues:N}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(k){function d(r,D,z,w,t){if(null!=w&&null!=t)return q=>{const H=r.getAttribute(q,D);q=r.getAttribute(q,z);return(null==H||H<=t)&&(null==q||q>=w)};if(null!=w)return q=>{q=r.getAttribute(q,z);return null==q||q>=w};if(null!=t)return q=>{q=r.getAttribute(q,D);return null==q||q<=t}}function Y(r,D,z,w){if(null!=
z&&null!=w&&z===w)return t=>r.getAttribute(t,D)===z;if(null!=z&&null!=w)return t=>{t=r.getAttribute(t,D);return t>=z&&t<=w};if(null!=z)return t=>r.getAttribute(t,D)>=z;if(null!=w)return t=>r.getAttribute(t,D)<=w}function X(){return()=>!1}k.getTimeExtent=function(r,D){if(!r)return null;const z=D.featureAdapter,{startTimeField:w,endTimeField:t}=r;let q=Number.POSITIVE_INFINITY,H=Number.NEGATIVE_INFINITY;if(w&&t)D.forEach(N=>{const O=z.getAttribute(N,w);N=z.getAttribute(N,t);null==O||isNaN(O)||(q=Math.min(q,
O));null==N||isNaN(N)||(H=Math.max(H,N))});else{const N=w||t;D.forEach(O=>{O=z.getAttribute(O,N);null==O||isNaN(O)||(q=Math.min(q,O),H=Math.max(H,O))})}return{start:q,end:H}};k.getTimeOperator=function(r,D,z){if(!D||!r)return null;const {startTimeField:w,endTimeField:t}=r;if(!w&&!t)return null;const {start:q,end:H}=D;return null===q&&null===H?null:void 0===q&&void 0===H?X():w&&t?d(z,w,t,q,H):Y(z,w||t,q,H)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,d,Y,X,r,D,z,w,t,q,H,N,O,u){function B(x,e,g,A=x.hasZ,S=x.hasM){if(r.isNone(e))return null;const aa=x.hasZ&&A,ja=x.hasM&&S;return g?(x=N.quantizeOptimizedGeometry(G,e,x.hasZ,x.hasM,"esriGeometryPoint",g,A,S),N.convertToPoint(x,aa,ja)):N.convertToPoint(e,aa,ja)}function b(){b=Y._asyncToGenerator(function*(x,e,g){const {outFields:A,orderByFields:S,groupByFieldsForStatistics:aa,outStatistics:ja}=x;if(A)for(var na=0;na<A.length;na++)A[na]=A[na].trim();if(S)for(na=0;na<S.length;na++)S[na]=S[na].trim();
if(aa)for(na=0;na<aa.length;na++)aa[na]=aa[na].trim();if(ja)for(na=0;na<ja.length;na++)ja[na].onStatisticField&&(ja[na].onStatisticField=ja[na].onStatisticField.trim());x.geometry&&!x.outSR&&(x.outSR=x.geometry.spatialReference);return m(x,e,g)});return b.apply(this,arguments)}function f(){f=Y._asyncToGenerator(function*(x,e,g){return m(x,e,g)});return f.apply(this,arguments)}function m(x,e,g){return F.apply(this,arguments)}function F(){F=Y._asyncToGenerator(function*(x,e,g){if(!x)return null;var {where:A}=
x;x.where=A=A&&A.trim();if(!A||/^1 *= *1$/.test(A)||e&&e===A)x.where=null;if(!x.geometry)return x;e=yield l(x);x.distance=0;x.units=null;"esriSpatialRelEnvelopeIntersects"===x.spatialRel&&({spatialReference:A}=x.geometry,e=z.getGeometryExtent(e),e.spatialReference=A);x.geometry=e;yield u.checkProjectionSupport(e.spatialReference,g);e=(yield t.normalizeCentralMeridian(w.fromJSON(e)))[0];if(r.isNone(e))throw R;e=e.toJSON();e=yield u.project(e,e.spatialReference,g);if(!e)throw R;e.spatialReference=g;
x.geometry=e;return x});return F.apply(this,arguments)}function l(x){return C.apply(this,arguments)}function C(){C=Y._asyncToGenerator(function*(x){const {geometry:e,distance:g,units:A}=x;if(null==g||"vertexAttributes"in e)return e;var S=e.spatialReference;x=A?Q.fromJSON(A):D.getUnitString(S);S=S&&(q.isGeographic(S)||q.isWebMercator(S))?e:yield u.checkProjectionSupport(S,q.WGS84).then(()=>u.project(e,q.WGS84));return(yield y())(S.spatialReference,S,g,x)});return C.apply(this,arguments)}function y(){return I.apply(this,
arguments)}function I(){I=Y._asyncToGenerator(function*(){return(yield new Promise((x,e)=>k(["../../../geometry/geometryEngineJSON"],x,e))).geodesicBuffer});return I.apply(this,arguments)}const Q=new X.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),R=Object.freeze({}),da=new O,L=new O,G=new O,U={esriGeometryPoint:N.convertToPoint,esriGeometryPolyline:N.convertToPolyline,
esriGeometryPolygon:N.convertToPolygon,esriGeometryMultipoint:N.convertToMultipoint},M=(x,e)=>"_geVersion"!==x?e:void 0;d.QUERY_ENGINE_EMPTY_RESULT=R;d.cleanFromGeometryEngine=function(x){return x&&"_geVersion"in x?JSON.parse(JSON.stringify(x,M)):x};d.getCentroid=function(x,e,g){if("esriGeometryPolygon"!==x.geometryType||!e||!e.centroid&&!e.geometry)return null;e.centroid||(e.centroid=H.getCentroidOptimizedGeometry(new O,e.geometry,x.hasZ,x.hasM));return B(x,e.centroid,g)};d.getGeometry=function(x,
e,g,A,S,aa,ja=e,na=g){const ta=e&&ja,ma=g&&na;A=r.isSome(A)?"coords"in A?A:A.geometry:null;if(r.isNone(A))return null;if(S)return e=N.generalizeOptimizedGeometry(L,A,e,g,x,S,ja,na),aa&&(e=N.quantizeOptimizedGeometry(G,e,ta,ma,x,aa)),U[x](e,ta,ma);if(aa)return aa=N.quantizeOptimizedGeometry(G,A,e,g,x,aa,ja,na),U[x](aa,ta,ma);N.removeZMValues(da,A,e,g,ja,na);return U[x](da,ta,ma)};d.normalizeFilter=function(x,e,g){return f.apply(this,arguments)};d.normalizeQuery=function(x,e,g){return b.apply(this,
arguments)};d.normalizeQueryLike=m;d.transformCentroid=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(k,d,Y,X,r,D,z,w){function t(K,P,ca){if(K)for(const oa of K)(K=(K=D.getDeepValue(oa,P))&&"function"!==typeof K&&ca.get(K))&&D.setDeepValue(oa,K.name,P)}function q(K,P){if(!K||
!P)return[];p.clear();H(p,K,P);return Array.from(p).sort()}function H(K,P,ca){var oa;if(ca)if(null!=P&&null!=(oa=P.fields)&&oa.length)if(ca.includes("*"))for(const {name:pa}of P.fields)K.add(pa);else for(const pa of ca)N(K,P,pa);else if(ca.includes("*"))K.clear(),K.add("*");else for(const pa of ca)K.add(pa)}function N(K,P,ca){"string"===typeof ca&&(P?(P=P.get(ca))&&K.add(P.name):K.add(ca))}function O(K,P,ca){return u.apply(this,arguments)}function u(){u=Y._asyncToGenerator(function*(K,P,ca){var oa;
if(ca){var {arcadeUtils:pa}=yield w.loadArcade();ca=pa.extractFieldNames(ca,null==P?void 0:null==(oa=P.fields)?void 0:oa.map(ua=>ua.name));for(const ua of ca)N(K,P,ua)}});return u.apply(this,arguments)}function B(K,P,ca){return b.apply(this,arguments)}function b(){b=Y._asyncToGenerator(function*(K,P,ca){if(ca&&"1\x3d1"!==ca){ca=(yield new Promise((oa,pa)=>k(["../../core/sql/WhereClause"],oa,pa))).WhereClause.create(ca,P);if(!ca.isStandardized)throw new X("fieldUtils:collectFilterFields","Where clause is not standardized");
H(K,P,ca.fieldNames)}});return b.apply(this,arguments)}function f(K,P){for(const ca of K)if(ca&&ca.valueType&&ca.valueType===P)return ca.name;return null}function m(){m=Y._asyncToGenerator(function*(K){if(!K)return[];const P=new Set;yield F(P,K);return Array.from(P).sort()});return m.apply(this,arguments)}function F(K,P){return l.apply(this,arguments)}function l(){l=Y._asyncToGenerator(function*(K,P){if(P){var ca=D.getDeepValue("elevationInfo.featureExpressionInfo",P);if(ca)return ca.collectRequiredFields(K,
P.fieldsIndex)}});return l.apply(this,arguments)}function C(K,P,ca){return y.apply(this,arguments)}function y(){y=Y._asyncToGenerator(function*(K,P,ca){ca.outStatistic.onStatisticValueExpression?O(K,P,ca.outStatistic.onStatisticValueExpression):K.add(ca.outStatistic.onStatisticField)});return y.apply(this,arguments)}function I(){I=Y._asyncToGenerator(function*(K,P,ca){var oa,pa;if(P&&ca&&"cluster"===ca.type){var ua=[];null!=(oa=ca.popupTemplate)&&oa.expressionInfos&&ua.push(...ca.popupTemplate.expressionInfos.map(wa=>
O(K,P.fieldsIndex,wa.expression)));if(Array.isArray(null==(pa=ca.popupTemplate)?void 0:pa.content)){oa=ca.popupTemplate.content;for(const wa of oa)"expression"===wa.type&&wa.expressionInfo&&ua.push(O(K,P.fieldsIndex,wa.expressionInfo.expression))}ca.fields&&ua.push(...ca.fields.map(wa=>C(K,P.fieldsIndex,wa)));yield Promise.all(ua)}});return I.apply(this,arguments)}function Q(){Q=Y._asyncToGenerator(function*(K,P,ca){P&&(P.timeInfo&&r.isSome(ca)&&ca.timeExtent&&H(K,P.fieldsIndex,[P.timeInfo.startField,
P.timeInfo.endField]),P.floorInfo&&H(K,P.fieldsIndex,[P.floorInfo.floorField]),r.isSome(ca)&&r.isSome(ca.where)&&(yield B(K,P.fieldsIndex,ca.where)))});return Q.apply(this,arguments)}function R(){R=Y._asyncToGenerator(function*(K,P,ca){P&&ca&&(yield Promise.all(ca.map(oa=>da(K,P,oa))))});return R.apply(this,arguments)}function da(K,P,ca){return L.apply(this,arguments)}function L(){L=Y._asyncToGenerator(function*(K,P,ca){P&&ca&&(ca.valueExpression?yield O(K,P.fieldsIndex,ca.valueExpression):ca.field&&
N(K,P.fieldsIndex,ca.field))});return L.apply(this,arguments)}function G(){G=Y._asyncToGenerator(function*(K){if(!K)return[];const P="timeInfo"in K&&K.timeInfo;return P?q(K.fieldsIndex,[K.trackIdField,P.startField,P.endField]):[]});return G.apply(this,arguments)}function U(){U=Y._asyncToGenerator(function*(K){if(!K)return[];const P=new Set;yield M(P,K);return Array.from(P).sort()});return U.apply(this,arguments)}function M(K,P){return x.apply(this,arguments)}function x(){x=Y._asyncToGenerator(function*(K,
P){const {labelingInfo:ca,fieldsIndex:oa}=P;ca&&ca.length&&(yield Promise.all(ca.map(pa=>e(K,oa,pa))))});return x.apply(this,arguments)}function e(K,P,ca){return g.apply(this,arguments)}function g(){g=Y._asyncToGenerator(function*(K,P,ca){if(ca){var oa=ca.getLabelExpression();ca=ca.where;"arcade"===oa.type?yield O(K,P,oa.expression):(oa=oa.expression.match(/{[^}]*}/g))&&oa.forEach(pa=>{N(K,P,pa.slice(1,-1))});yield B(K,P,ca)}});return g.apply(this,arguments)}function A(K){return"number"===typeof K&&
!isNaN(K)&&isFinite(K)}function S(K){return null===K||A(K)}function aa(K){return null===K||ea(K)}function ja(K){return null!=K&&"string"===typeof K}function na(K){return null===K||ja(K)}function ta(){return!0}function ma(K,P){let ca;switch(K.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ca=K.nullable?aa:ea;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ca=
K.nullable?S:A;break;case "string":case "esriFieldTypeString":ca=K.nullable?na:ja;break;default:ca=ta}return 1===arguments.length?ca:ca(P)}function la(K){return null!=K&&J.has(K.type)}function va(K,P){return K.nullable&&null===P?null:la(K)&&!Ja(K.type,Number(P))?d.NumericRangeValidationError.OUT_OF_RANGE:ma(K,P)?K.domain?z.validateDomainValue(K.domain,P):null:d.TypeValidationError.INVALID_TYPE}function Ja(K,P){return(K="string"===typeof K?Ba(K):K)?K.isInteger?ea(P)&&P>=K.min&&P<=K.max:P>=K.min&&P<=
K.max:!1}function Ba(K){switch(K){case "esriFieldTypeSmallInteger":case "small-integer":return T;case "esriFieldTypeInteger":case "integer":return V;case "esriFieldTypeSingle":case "single":return ia;case "esriFieldTypeDouble":case "double":return fa}}function Sa(K,P,ca){if(!P||!P.attributes||!K){if(r.isSome(ca))for(var oa of K)ca.add(oa);return!0}P=P.attributes;oa=!1;for(const pa of K)if(!(pa in P))if(oa=!0,r.isSome(ca))ca.add(pa);else break;return oa}function Oa(){Oa=Y._asyncToGenerator(function*(K,
P){const ca=new Set;for(const oa of P)yield O(ca,K.fieldsIndex,oa);return Array.from(ca).sort()});return Oa.apply(this,arguments)}const Ia="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),c=["field","normalizationField"],p=new Set,ea=(()=>"isInteger"in Number?Number.isInteger:K=>"number"===typeof K&&isFinite(K)&&Math.floor(K)===K)(),n=["integer","small-integer",
"single","double"],J=new Set([...n,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const T={min:-32768,max:32767,isInteger:!0},V={min:-2147483648,max:2147483647,
isInteger:!0},ia={min:-3.4E38,max:1.2E38,isInteger:!1},fa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=O;d.collectElevationFields=F;d.collectFeatureReductionFields=function(K,P,ca){return I.apply(this,arguments)};d.collectField=N;d.collectFields=H;d.collectFilterFields=function(K,P,ca){return Q.apply(this,arguments)};d.collectLabelingFields=M;d.collectOrderByInfos=function(K,P,ca){return R.apply(this,arguments)};d.doubleRange=fa;d.featureHasFields=function(K,
P){return!Sa(K,P,null)};d.fixFields=q;d.fixRendererFields=function(K,P){if(null!=K&&null!=P)for(const ca of Array.isArray(K)?K:[K])if(t(Ia,ca,P),"visualVariables"in ca&&ca.visualVariables)for(const oa of ca.visualVariables)t(c,oa,P)};d.fixTimeInfoFields=function(K,P){if(null!=K&&null!=P&&P.fields.length)if("startField"in K){var ca=P.get(K.startField);P=P.get(K.endField);K.startField=ca&&ca.name||null;K.endField=P&&P.name||null}else ca=P.get(K.startTimeField),P=P.get(K.endTimeField),K.startTimeField=
ca&&ca.name||null,K.endTimeField=P&&P.name||null};d.getDisplayFieldName=function({displayField:K,fields:P}){if(K)return K;if(!P||!P.length)return null;if(!(K=f(P,"name-or-title")||f(P,"unique-identifier")||f(P,"type-or-category")))a:{for(const ca of P)if(ca&&ca.name&&(P=ca.name.toLowerCase(),-1<P.indexOf("name")||-1<P.indexOf("title"))){K=ca.name;break a}K=null}return K};d.getElevationFields=function(K){return m.apply(this,arguments)};d.getExpressionFields=function(K,P){return Oa.apply(this,arguments)};
d.getFeatureEditFields=function(K){if(!K)return[];const P="editFieldsInfo"in K&&K.editFieldsInfo;return P?q(K.fieldsIndex,[P&&P.creatorField,P&&P.creationDateField,P&&P.editorField,P&&P.editDateField]):[]};d.getFeatureGeometryFields=function(K){if(!K)return[];const P=K.geometryFieldsInfo;return P?q(K.fieldsIndex,[P.shapeAreaField,P.shapeLengthField]):[]};d.getFieldDefaultValue=function(K){const P=K.defaultValue;if(void 0!==P&&ma(K,P))return P;if(K.nullable)return null};d.getFieldRange=function(K){const P=
z.getDomainRange(K.domain);if(P)return P;if(la(K))return Ba(K.type)};d.getLabelingFields=function(K){return U.apply(this,arguments)};d.getNumericTypeForValue=function(K){if(!A(K))return null;if(ea(K)){if(K>=T.min&&K<=T.max)return"esriFieldTypeSmallInteger";if(K>=V.min&&K<=V.max)return"esriFieldTypeInteger"}return K>=ia.min&&K<=ia.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};d.getTimeFields=function(K){return G.apply(this,arguments)};d.integerRange=V;d.isDateField=function(K){return null!=K&&("date"===
K.type||"esriFieldTypeDate"===K.type)};d.isNumberInRange=Ja;d.isNumericField=la;d.isStringField=function(K){return null!=K&&("string"===K.type||"esriFieldTypeString"===K.type)};d.isValidFieldValue=function(K,P){return null===va(K,P)};d.isValueMatchingFieldType=ma;d.numericTypes=n;d.packFields=function(K,P,ca=1){if(!P||!K)return[];if(P.includes("*"))return["*"];P=q(K,P);return P.length/K.fields.length>=ca?["*"]:P};d.populateMissingFields=Sa;d.rendererFields=Ia;d.sanitizeNullFieldValue=function(K){return null==
K||"number"===typeof K&&isNaN(K)?null:K};d.singleRange=ia;d.smallIntegerRange=T;d.unpackFieldNames=function(K,P){return r.isNone(P)||r.isNone(K)?[]:P.includes("*")?K.fields.map(ca=>ca.name):P};d.validateFieldValue=va;d.validationErrorToString=function(K,P,ca){switch(K){case z.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ca} is not in the coded domain - field: ${P.name}, domain: ${JSON.stringify(P.domain)}`;case z.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ca} is out of the range of valid values - field: ${P.name}, domain: ${JSON.stringify(P.domain)}`;
case d.TypeValidationError.INVALID_TYPE:return`Value ${ca} is not a valid value for the field type - field: ${P.name}, type: ${P.type}, nullable: ${P.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:oa,max:pa}=Ba(P.type);return`Value ${ca} is out of range for the number type - field: ${P.name}, type: ${P.type}, value range is ${oa} to ${pa}`}}};d.visualVariableFields=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(k){function d(Y,X){switch(Y.type){case "range":{const r="range"in Y?Y.range[1]:Y.maxValue;if(+X<("range"in Y?Y.range[0]:Y.minValue)||+X>r)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==Y.codedValues||Y.codedValues.every(r=>null==r||r.code!==X))return k.DomainValidationError.INVALID_CODED_VALUE}return null}k.DomainValidationError=void 0;(function(Y){Y.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";Y.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(Y){if(Y&&"range"===Y.type)return{min:"range"in Y?Y.range[0]:Y.minValue,max:"range"in Y?Y.range[1]:Y.maxValue}};k.isValidDomainValue=function(Y,X){return null===d(Y,X)};k.validateDomainValue=d;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(k,d,Y,X,r,D){function z(){w||(w=Y._asyncToGenerator(function*(){const q=yield new Promise((H,N)=>k(["./arcadeUtils"],H,N));return{arcade:q.arcade,arcadeUtils:q,Dictionary:q.Dictionary,Feature:q.arcadeFeature}})());return w}let w;X=(q,H,N)=>t.create(q,H,N,null,["$feature","$view"]);let t=function(){function q(N,O,u,B,b,f,m,F){this.script=N;this.evaluate=b;this.fields=Array.isArray(m)?m:m.fields;this._syntaxTree=B;this._arcade=O;this._arcadeDictionary=u;this._arcadeFeature=f;this._spatialReference=
F;this._referencesGeometry=O.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}q.create=function(){var N=Y._asyncToGenerator(function*(O,u,B,b,f,m){const {arcade:F,Feature:l,Dictionary:C}=yield z(),y=D.fromJSON(u);u=F.parseScript(O,m);f=f.reduce((L,G)=>({...L,[G]:null}),{});let I=null;r.isSome(b)&&(I=new C(b),I.immutable=!0,f.$config=null);b=F.scriptUsesGeometryEngine(u)&&F.enableGeometrySupport();m=F.scriptUsesFeatureSet(u)&&F.enableFeatureSetSupport();
const Q=F.scriptIsAsync(u)&&F.enableAsyncSupport();f={vars:f,spatialReference:y,useAsync:!!Q};const R=new C;R.immutable=!1;R.setField("scale",0);const da=F.compileScript(u,f);yield Promise.all([b,m,Q]);return new q(O,F,C,u,L=>{"$view"in L&&L.$view&&(R.setField("scale",L.$view.scale),L.$view=R);I&&(L.$config=I);return da({vars:L,spatialReference:y})},new l,B,y)});return function(O,u,B,b,f,m){return N.apply(this,arguments)}}();var H=q.prototype;H.repurposeFeature=function(N){N.geometry&&!N.geometry.spatialReference&&
(N.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(N.geometry,N.attributes,{fields:this.fields});return this._arcadeFeature};H.repurposeAdapter=function(N){this._arcadeFeature.repurposeFromAdapter(N,{fields:this.fields});return this._arcadeFeature};H.createDictionary=function(){return new this._arcadeDictionary};H.referencesMember=function(N){return this._arcade.referencesMember(this._syntaxTree,N)};H.referencesFunction=function(N){return this._arcade.referencesFunction(this._syntaxTree,
N)};H.referencesGeometry=function(){return this._referencesGeometry};H.referencesScale=function(){return this._referencesScale};H.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return q}();d.ArcadeExpression=t;d.createDictionaryExpression=(q,H,N,O)=>t.create(q,H,N,O,["$feature","$view"]);d.createLabelExpression=(q,H,N)=>t.create(q,H,N,null,["$feature"]);d.createRendererExpression=X;d.createVVExpression=X;d.default=t;d.loadArcade=z;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),function(k,d,Y,X,r,D,z,w,t,q,H,N,O){function u(){return new Promise((m,F)=>
k(["../../../geometry/geometryEngineJSON"],m,F))}function B(){B=Y._asyncToGenerator(function*(m,F,l){const {spatialRel:C,geometry:y}=m;if(y){if(!0!==f.spatialRelationship[C])throw new X("feature-store:unsupported-query","Unsupported query spatial relationship",{query:m});if(w.isValid(y.spatialReference)&&w.isValid(l)){if(!0!==f.queryGeometry[z.getJsonType(y)])throw new X("feature-store:unsupported-query","Unsupported query geometry type",{query:m});if(!0!==f.layerGeometry[F])throw new X("feature-store:unsupported-query",
"Unsupported layer geometry type",{query:m});if(m.outSR)return N.checkProjectionSupport(m.geometry&&m.geometry.spatialReference,m.outSR)}}});return B.apply(this,arguments)}const b={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},
f={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(m){if(z.isExtent(m))return!0;if(z.isPolygon(m)){for(const F of m.rings)if(5!==F.length||F[0][0]!==F[1][0]||F[0][0]!==F[4][0]||F[2][0]!==F[3][0]||F[0][1]!==F[3][1]||F[0][1]!==F[4][1]||F[1][1]!==F[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(m,F,l){return B.apply(this,arguments)};d.getSpatialQueryOperator=function(m,F,l,C,y){if(z.isPolygon(F)&&"esriGeometryPoint"===l&&("esriSpatialRelIntersects"===
m||"esriSpatialRelContains"===m)){const I=q.convertFromPolygon(new H,F,!1,!1);return Promise.resolve(Q=>t.polygonContainsPoint(I,!1,!1,Q))}if(z.isPolygon(F)&&"esriGeometryMultipoint"===l){const I=q.convertFromPolygon(new H,F,!1,!1);if("esriSpatialRelContains"===m)return Promise.resolve(Q=>t.polygonContainsMultipoint(I,!1,!1,Q,C,y))}if(z.isExtent(F)&&"esriGeometryPoint"===l&&("esriSpatialRelIntersects"===m||"esriSpatialRelContains"===m))return Promise.resolve(I=>r.extentContainsPoint(F,O.getGeometry(l,
C,y,I)));if(z.isExtent(F)&&"esriGeometryMultipoint"===l&&"esriSpatialRelContains"===m)return Promise.resolve(I=>r.extentContainsMultipoint(F,O.getGeometry(l,C,y,I)));if(z.isExtent(F)&&"esriSpatialRelIntersects"===m){const I=D.getExtentIntersector(l);return Promise.resolve(Q=>I(F,O.getGeometry(l,C,y,Q)))}return u().then(I=>{const Q=I[b[m]].bind(null,F.spatialReference,F);return R=>Q(O.getGeometry(l,C,y,R))})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports",
"./intersectsBase"],function(k,d){k.extentIntersectsExtent=d.extentIntersectsExtent;k.extentIntersectsMultipoint=d.extentIntersectsMultipoint;k.extentIntersectsPoint=d.extentIntersectsPoint;k.extentIntersectsPolygon=d.extentIntersectsPolygon;k.extentIntersectsPolyline=d.extentIntersectsPolyline;k.getFeatureExtentIntersector=d.getFeatureExtentIntersector;k.isSelfIntersecting=d.isSelfIntersecting;k.segmentIntersects=d.segmentIntersects;k.getExtentIntersector=function(Y){return"mesh"===Y?d.extentIntersectsExtent:
d.getFeatureExtentIntersector(Y)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function d(Y,X,r,D,z){if(!Y)return!1;X=X?r?4:3:r?3:2;const {coords:w,lengths:t}=Y;r=!1;Y=0;for(const H of t){var q=Y;for(let N=Y,O=Y+H*X;N<O;N+=X){q=N+X;q===O&&(q=Y);const u=w[N],B=w[N+1],b=w[q];q=w[q+1];(B<z&&q>=z||q<z&&B>=z)&&u+(z-B)/(q-B)*(b-u)<D&&(r=!r)}Y+=H*X}return r}k.polygonContainsCoords=d;k.polygonContainsMultipoint=function(Y,X,
r,D,z,w){z=z?w?4:3:w?3:2;const {coords:t,lengths:q}=D;if(!q)return!1;for(let H=0,N=0;H<q.length;H++,N+=z)if(!d(Y,X,r,t[N],t[N+1]))return!1;return!0};k.polygonContainsPoint=function(Y,X,r,D){return d(Y,X,r,D.coords[0],D.coords[1])};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(k,d){function Y(r){return"oid"===r.type||"esriFieldTypeOID"===r.type}function X(r){return"global-id"===
r.type||"esriFieldTypeGlobalID"===r.type}return function(){function r(z){this.fields=z;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(z){var w=[];for(const t of z)if(z=t&&t.name){const q=z.toLowerCase().trim();this._fieldsMap.set(z,t);this._fieldsMap.set(q,t);w.push(q);"date"===t.type||"esriFieldTypeDate"===t.type?(this.dateFields.push(t),this._dateFieldsSet.add(t)):d.isNumericField(t)&&(this._numericFieldsSet.add(t),
this.numericFields.push(t));Y(t)||X(t)||(t.editable=null==t.editable?!0:!!t.editable,t.nullable=null==t.nullable?!0:!!t.nullable)}w.sort();this.uid=w.join(",")}}var D=r.prototype;D.destroy=function(){this._fieldsMap.clear()};D.has=function(z){return null!=this.get(z)};D.get=function(z){return null!=z?this._fieldsMap.get(z)||this._fieldsMap.get(z.toLowerCase().trim()):void 0};D.isDateField=function(z){return this._dateFieldsSet.has(this.get(z))};D.isNumericField=function(z){return this._numericFieldsSet.has(this.get(z))};
D.normalizeFieldName=function(z){if(z=this.get(z))return z.name};k._createClass(r,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const z of this.fields)Y(z)||X(z)||z.nullable||void 0!==d.getFieldDefaultValue(z)||this._requiredFields.push(z)}return this._requiredFields}}]);return r}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(k,d,Y,X,r,D,z,w,t,q,H,N,O,u,B,b,f,m,F,l){function C(g){return I.has(g)?I.get(g):"number"===typeof g?g:1}const y=D.getLogger("esri.views.support.Scheduler");k.TaskPriority=void 0;(function(g){g.RESOURCE_CONTROLLER="schedule";g.SLIDE="slide";g.STREAM_DATA_LOADER="stream loader";g.ELEVATION_QUERY="elevation query";g.TERRAIN_SURFACE="terrain";g.SURFACE_GEOMETRY_UPDATES="surface geometry updates";g.GRAPHICS_CORE="Graphics3D";g.I3S_CONTROLLER="I3S";g.POINT_CLOUD_LAYER="point cloud";g.FEATURE_TILE_FETCHER=
"feature fetcher";g.OVERLAY="overlay";g.STAGE="stage";g.GRAPHICS_DECONFLICTOR="graphics deconflictor";g.FILTER_VISIBILITY="Graphics3D filter visibility";g.SCALE_VISIBILITY="Graphics3D scale visibility";g.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";g.POINT_OF_INTEREST_FREQUENT="POI frequent";g.POINT_OF_INTEREST_INFREQUENT="POI infrequent";g.LABELER="labeler";g.FEATURE_QUERY_ENGINE="feature query";g.FEATURE_TILE_TREE="feature tile tree";g.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";g.ELEVATION_ALIGNMENT=
"elevation alignment";g.TEXT_TEXTURE_ATLAS="text texture atlas";g.TEXTURE_UNLOAD="texture unload";g.LINE_OF_SIGHT_TOOL="line of sight tool";g.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";g.ELEVATION_PROFILE="elevation profile";g.SNAPPING="snapping";g.SHADOW_ACCUMULATOR="shadow accumulator";g.CLOUDS_GENERATOR="cloud generator";g[g.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||(k.TaskPriority={}));const I=new Map([[k.TaskPriority.RESOURCE_CONTROLLER,0],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,
0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,4],[k.TaskPriority.STAGE,4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,12],[k.TaskPriority.CLOUDS_GENERATOR,12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,
30]]),Q=N.Milliseconds(6.5),R=N.Milliseconds(1),da=N.Milliseconds(30),L=N.Milliseconds(1E3/30),G=N.Milliseconds(100);var U;(function(g){let A=function(ja){function na(ma){var la=ja.call(this,ma)||this;la.updating=!0;la._microTaskQueued=!1;la.performanceInfo={total:new w("total"),tasks:new Map};la._frameTaskTimes=new Map;la._budget=null;la._state=1;la._tasks=new t;la._runQueue=new t;la._load=0;la._idleStateCallbacks=new t;la._idleUpdatesStartFired=!1;la._maxReschedule=e;la._forceTask=!1;la._debug=
!1;la._debugHandle=O.init(l,"SCHEDULER_LOG_SLOW_TASKS",Ba=>la._debug=Ba);la._budget=new aa(ma.nowFunc);for(const Ba of Object.keys(k.TaskPriority))la.performanceInfo.tasks.set(k.TaskPriority[Ba],new w(k.TaskPriority[Ba]));let va;const Ja=d._assertThisInitialized(la);la._test={get state(){return z.unwrapOr(va,Ja._state)},set state(Ba){va=Ba},FRAME_SAFETY_BUDGET:Q,INTERACTING_BUDGET:L,IDLE_BUDGET:G,get budget(){return Ja._budget.budget},usedBudget:0,setBudget:Ba=>Ja._budget=Ba,updateTask:Ba=>la._updateTask(Ba),
getState:Ba=>la._getState(Ba),getRuntime:Ba=>la._getRuntime(Ba),frameTaskTimes:la._frameTaskTimes,resetRuntimes:()=>la._resetRuntimes(),getRunning:()=>la._getRunning()};return la}d._inheritsLoose(na,ja);var ta=na.prototype;ta.destroy=function(){this._debugHandle&&this._debugHandle.remove();this._microTaskQueued=!1};ta.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=
e,this._schedule(),this.frame()))}))};ta.registerTask=function(ma,la){const va=C(ma);la=new S(this,ma,la,va);this._tasks.push(la);this.performanceInfo.tasks.has(ma)||this.performanceInfo.tasks.set(ma,new w(ma));return la};ta.registerIdleStateCallbacks=function(ma,la){const va={idleBegin:ma,idleEnd:la};this._idleStateCallbacks.push(va);2===this.state&&this._idleUpdatesStartFired&&va.idleBegin();const Ja=this;return{remove:()=>this._removeIdleStateCallbacks(va),set idleBegin(Ba){Ja._idleUpdatesStartFired&&
(va.idleEnd(),2===Ja._state&&Ba());va.idleBegin=Ba},set idleEnd(Ba){va.idleEnd=Ba}}};ta.updateBudget=function(ma){this._test.usedBudget=0;let la=Q,va=ma.frameDuration,Ja=R;switch(this.state){case 2:la=N.Milliseconds(0);va=N.Milliseconds(Math.max(G,ma.frameDuration));Ja=da;break;case 1:va=N.Milliseconds(Math.max(L,ma.frameDuration))}va=N.Milliseconds(va-ma.elapsedFrameTime-la);if(2!==this.state&&va<R&&!this._forceTask)return this._forceTask=!0,!1;va=N.Milliseconds(Math.max(va,Ja));this._budget.reset(va,
this.state);this._maxReschedule=e;this._updateLoad();return this._schedule()};ta.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(ma=>ma.idleBegin()));this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};ta.stopFrame=function(){this._budget.reset(N.Milliseconds(0),this._state);this._budget.madeProgress()};
ta._removeIdleStateCallbacks=function(ma){this._idleUpdatesStartFired&&ma.idleEnd();this._idleStateCallbacks.removeUnordered(ma)};ta.removeTask=function(ma){this._tasks.removeUnordered(ma);this._runQueue.removeUnordered(ma)};ta._updateTask=function(ma){this._tasks.forAll(la=>{la.name===ma&&la.setPriority(ma)})};ta._getState=function(ma){if(this._runQueue.some(va=>va.name===ma))return k.TaskState.SCHEDULED;let la=k.TaskState.IDLE;this._tasks.forAll(va=>{va.name===ma&&va.needsUpdate&&(1>=va.schedulePriority?
la=k.TaskState.READY:la!==k.TaskState.READY&&(la=k.TaskState.WAITING))});return la};ta._getRuntime=function(ma){let la=0;this._tasks.forAll(va=>{va.name===ma&&(la+=va.runtime)});return la};ta._resetRuntimes=function(){this._tasks.forAll(ma=>ma.runtime=0)};ta._getRunning=function(){const ma=new Map;this._tasks.forAll(va=>{va.needsUpdate&&ma.set(va.name,(ma.get(va.name)||0)+1)});if(0===ma.size)return null;let la="";ma.forEach((va,Ja)=>{la=1<va?la+` ${va}x ${Ja}`:la+` ${Ja}`});return la};ta._runIdle=
function(){this._run()};ta._runInteracting=function(){this._run()};ta._runAnimating=function(){this._run()};ta._updateLoad=function(){const ma=this._tasks.reduce((la,va)=>va.needsUpdate?++la:la,0);this._load=.9*this._load+ma*(1-.9)};ta._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(ma=>{if(ma.needsUpdate)return!0;ma.schedulePriority=ma.basePriority;return!1});for(this._tasks.forAll(ma=>{0===ma.basePriority&&ma.needsUpdate&&!this._runQueue.some(la=>la===ma)&&this._runQueue.unshift(ma)});0===
this._runQueue.length;){let ma=!1,la=0;this._tasks.forAll(va=>{if(va.needsUpdate&&0!==va.schedulePriority&&0!==va.basePriority)switch(ma=!0,la=Math.max(la,va.basePriority),va.schedulePriority){case 1:va.schedulePriority=0;this._runQueue.push(va);break;default:--va.schedulePriority}});if(!ma)return this.updating=!1;this._maxReschedule===e&&(this._maxReschedule=la);--this._maxReschedule}return this.updating=!0};ta._run=function(){const ma=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var la=
this._budget.now();const va=this._runQueue.pop();this._budget.resetProgress();try{va.task.runTask(this._budget)}catch(Ja){y.error(`Exception in task "${va.name}"`,Ja)}va.schedulePriority=va.basePriority;la=this._budget.now()-la;va.runtime+=la;this._frameTaskTimes.set(va.priority,this._frameTaskTimes.get(va.priority)+la);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",va.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._recordFrameTaskTimes(this._budget.now()-
ma);return}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-ma)};ta._startFrameTaskTimes=function(){for(const ma of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[ma],0)};ta._recordFrameTaskTimes=function(ma){this._frameTaskTimes.forEach((la,va)=>this.performanceInfo.tasks.get(va).record(la));this.performanceInfo.total.record(ma)};d._createClass(na,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",
get:function(){return z.isNone(this._test.state)?this._state:this._test.state},set:function(ma){this._state!==ma&&(this._state=ma,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(la=>la.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return na}(X);Y.__decorate([u.property()],A.prototype,"updating",void 0);Y.__decorate([u.property()],A.prototype,"nowFunc",void 0);A=Y.__decorate([m.subclass("esri.views.support.Scheduler")],
A);g.Scheduler=A;let S=function(ja){function na(ma,la,va,Ja){var Ba=ja.call(this,{})||this;Ba._scheduler=ma;Ba.name=la;Ba._basePriority=Ja;Ba.runtime=0;Ba._queue=new F.PromiseQueue;Ba._handles=new r;Ba.schedulePriority=Ba._basePriority;Ba.task=z.isSome(va)?va:Ba._queue;Ba._handles.add(H.reactTruthy(()=>Ba.task.running,()=>ma.activate()));return Ba}d._inheritsLoose(na,ja);var ta=na.prototype;ta.normalizeCtorArgs=function(){return{}};ta.remove=function(){this.processQueue(M);this._scheduler.removeTask(this);
this.schedule=x.schedule;this.reschedule=x.reschedule;this._handles.destroy()};ta.setPriority=function(ma){this.name=ma;ma=C(ma);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=ma;this._basePriority=ma};ta.schedule=function(ma,la,va){return this._queue.push(ma,la,va)};ta.reschedule=function(ma,la,va){return this._queue.unshift(ma,la,va)};ta.processQueue=function(ma){this._queue.runTask(ma)};d._createClass(na,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",
get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(ma){this.setPriority(ma)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return na}(X);Y.__decorate([u.property({constructOnly:!0})],S.prototype,"task",void 0);Y.__decorate([u.property({readOnly:!0})],S.prototype,"updating",null);S=Y.__decorate([m.subclass("esri.views.support.SchedulerTask")],S);let aa=function(){function ja(ta){this.now=ta;this._budget=this._begin=
0;this._state=2;this._didWork=!1;this._enabled=!0}var na=ja.prototype;na.run=function(ta){if(this.done)return!1;!0===ta()&&(this._didWork=!0);return!0};na.madeProgress=function(){this._didWork=!0};na.reset=function(ta,ma){this._begin=this.now();this._budget=ta;this._state=ma;this._didWork=!1};na.resetProgress=function(){this._didWork=!1};d._createClass(ja,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},
{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(ta){this._enabled=ta}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return ja}();g.Budget=aa})(U||(U={}));k.TaskState=void 0;(function(g){g.SCHEDULED="s";g.READY="r";g.WAITING="w";g.IDLE="i"})(k.TaskState||(k.TaskState={}));const M=
(()=>{const g=new U.Budget(()=>performance.now());g.enabled=!1;return g})(),x=new (function(){function g(){}var A=g.prototype;A.remove=function(){};A.processQueue=function(){};A.schedule=function(S,aa,ja){try{if(q.isAborted(aa)){const na=q.createAbortError();return ja?Promise.resolve(ja(na)):Promise.reject(na)}return q.when(S(M))}catch(na){return Promise.reject(na)}};A.reschedule=function(S,aa,ja){return this.schedule(S,aa,ja)};return g}()),e=Number.MAX_SAFE_INTEGER;k.ImmediateTask=x;k.getTaskPriority=
C;k.newScheduler=function(g){return new U.Scheduler({nowFunc:g})};k.noBudget=M;k.taskPriorities=I;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(k,d,Y,X,r,D,z){Y=function(w){function t(H){H=w.call(this,H)||this;H._groups=new Map;return H}k._inheritsLoose(t,w);var q=t.prototype;
q.destroy=function(){this.removeAll()};q.add=function(H,N){if(!this._isHandle(H)&&!Array.isArray(H)&&!X.isCollection(H))return this;const O=this._getOrCreateGroup(N);Array.isArray(H)||X.isCollection(H)?H.forEach(u=>this._isHandle(u)&&O.push(u)):O.push(H);this.notifyChange("size");return this};q.forEach=function(H,N){if("function"===typeof H)this._groups.forEach(O=>O.forEach(H));else{const O=this._getGroup(H);O&&N&&O.forEach(N)}};q.has=function(H){return this._groups.has(this._ensureGroupKey(H))};
q.remove=function(H){if(Array.isArray(H)||X.isCollection(H))return H.forEach(this.remove,this),this;if(!this.has(H))return this;const N=this._getGroup(H);for(let O=0;O<N.length;O++)N[O].remove();this._deleteGroup(H);this.notifyChange("size");return this};q.removeAll=function(){this._groups.forEach(H=>{for(let N=0;N<H.length;N++)H[N].remove()});this._groups.clear();this.notifyChange("size");return this};q._isHandle=function(H){return H&&!!H.remove};q._getOrCreateGroup=function(H){if(this.has(H))return this._getGroup(H);
const N=[];this._groups.set(this._ensureGroupKey(H),N);return N};q._getGroup=function(H){return r.assumeNonNull(this._groups.get(this._ensureGroupKey(H)))};q._deleteGroup=function(H){return this._groups.delete(this._ensureGroupKey(H))};q._ensureGroupKey=function(H){return H||"_default_"};k._createClass(t,[{key:"size",get:function(){let H=0;this._groups.forEach(N=>{H+=N.length});return H}}]);return t}(Y);d.__decorate([D.property({readOnly:!0})],Y.prototype,"size",null);return Y=d.__decorate([z.subclass("esri.core.Handles")],
Y)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),function(k,d,Y,X,r,D,z,w,t,q,H,N,O,u){function B(G){return G?G instanceof L?G.toArray():G.length?Array.prototype.slice.apply(G):
[]:[]}function b(G){if(G&&G.length)return G[0]}function f(G,U,M,x){U&&U.forEach((e,g,A)=>{G.push(e);f(G,M.call(x,e,g,A),M,x)})}var m;let F=function(){function G(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var U=G.prototype;U.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};U.reset=function(M){this.defaultPrevented=!1;this.item=M};return G}();const l=new z(F,void 0,G=>{G.item=null;G.target=null;G.defaultPrevented=!1;G.cancellable=!1}),
C=()=>{},y=new Set,I=new Set,Q=new Set,R=new Map;let da=0,L=m=function(G,U){function M(e){e=G.call(this,e)||this;e._chgListeners=[];e._notifications=null;e._timer=null;e._observable=new u.SimpleObservable;e.length=0;e._items=[];Object.defineProperty(k._assertThisInitialized(e),"uid",{value:da++});return e}k._inheritsLoose(M,G);M.isCollection=function(e){return null!=e&&e instanceof m};var x=M.prototype;x.normalizeCtorArgs=function(e){return e?Array.isArray(e)||e instanceof m?{items:e}:e:{}};x.destroy=
function(){this.removeAll()};x[U]=function*(){yield*this.items};x.hasEventListener=function(e){return"change"===e?0<this._chgListeners.length:this._emitter.hasEventListener(e)};x.on=function(e,g){if("change"===e){const A=this._chgListeners,S={removed:!1,callback:g};A.push(S);this._notifications&&this._notifications.push({listeners:A.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=C;S.removed=!0;A.splice(A.indexOf(S),1)}}}return this._emitter.on(e,g)};x.once=function(e,g){const A=
this.on(e,g);return{remove(){A.remove()}}};x.add=function(e,g){O.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;g=this.getNextIndex(null!=g?g:null);this._splice(g,0,[e]);this._emitAfterChanges(1);return this};x.addMany=function(e,g=this._items.length){O.trackAccess(this._observable);if(!e||!e.length||this._emitBeforeChanges(1))return this;g=this.getNextIndex(g);this._splice(g,0,B(e));this._emitAfterChanges(1);return this};x.removeAll=function(){O.trackAccess(this._observable);
if(!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];this._emitAfterChanges(2);return e};x.clone=function(){O.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(r.clone)})};x.concat=function(...e){O.trackAccess(this._observable);e=e.map(B);return this._createNewInstance({items:this._items.concat(...e)})};x.drain=function(e,g){O.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var A=D.assumeNonNull(this._splice(0,
this.length)),S=A.length;for(let aa=0;aa<S;aa++)e.call(g,A[aa],aa,A);this._emitAfterChanges(2)}};x.every=function(e,g){O.trackAccess(this._observable);return this._items.every(e,g)};x.filter=function(e,g){O.trackAccess(this._observable);let A;A=2===arguments.length?this._items.filter(e,g):this._items.filter(e);return this._createNewInstance({items:A})};x.find=function(e,g){O.trackAccess(this._observable);return this._items.find(e,g)};x.findIndex=function(e,g){O.trackAccess(this._observable);return this._items.findIndex(e,
g)};x.flatten=function(e,g){O.trackAccess(this._observable);const A=[];f(A,this,e,g);return new m(A)};x.forEach=function(e,g){O.trackAccess(this._observable);return this._items.forEach(e,g)};x.getItemAt=function(e){O.trackAccess(this._observable);return this._items[e]};x.getNextIndex=function(e){O.trackAccess(this._observable);const g=this.length;e=null==e?g:e;0>e?e=0:e>g&&(e=g);return e};x.includes=function(e,g=0){O.trackAccess(this._observable);return this._items.includes(e,g)};x.indexOf=function(e,
g=0){O.trackAccess(this._observable);return this._items.indexOf(e,g)};x.join=function(e=","){O.trackAccess(this._observable);return this._items.join(e)};x.lastIndexOf=function(e,g=this.length-1){O.trackAccess(this._observable);return this._items.lastIndexOf(e,g)};x.map=function(e,g){O.trackAccess(this._observable);e=this._items.map(e,g);return new m({items:e})};x.reorder=function(e,g=this.length-1){O.trackAccess(this._observable);const A=this.indexOf(e);if(-1!==A){0>g?g=0:g>=this.length&&(g=this.length-
1);if(A!==g){if(this._emitBeforeChanges(4))return e;this._splice(A,1);this._splice(g,0,[e]);this._emitAfterChanges(4)}return e}};x.pop=function(){O.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var e=b(this._splice(this.length-1,1));this._emitAfterChanges(2);return e}};x.push=function(...e){O.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;this._splice(this.length,0,e);this._emitAfterChanges(1);return this.length};x.reduce=function(e,g){O.trackAccess(this._observable);
const A=this._items;return 2===arguments.length?A.reduce(e,g):A.reduce(e)};x.reduceRight=function(e,g){O.trackAccess(this._observable);const A=this._items;return 2===arguments.length?A.reduceRight(e,g):A.reduceRight(e)};x.remove=function(e){O.trackAccess(this._observable);return this.removeAt(this.indexOf(e))};x.removeAt=function(e){O.trackAccess(this._observable);if(!(0>e||e>=this.length||this._emitBeforeChanges(2)))return e=b(this._splice(e,1)),this._emitAfterChanges(2),e};x.removeMany=function(e){O.trackAccess(this._observable);
if(!e||!e.length||this._emitBeforeChanges(2))return[];e=e instanceof m?e.toArray():e;const g=this._items,A=[],S=e.length;for(let ta=0;ta<S;ta++){var aa=g.indexOf(e[ta]);if(-1<aa){{var ja=ta+1;var na=aa+1;const ma=Math.min(e.length-ja,g.length-na);let la=0;for(;la<ma&&e[ja+la]===g[na+la];)la++;ja=la}ja=1+ja;(aa=this._splice(aa,ja))&&0<aa.length&&A.push.apply(A,aa);ta+=ja-1}}this._emitAfterChanges(2);return A};x.reverse=function(){O.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;
const e=this._splice(0,this.length);e&&(e.reverse(),this._splice(0,0,e));this._emitAfterChanges(4);return this};x.shift=function(){O.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var e=b(this._splice(0,1));this._emitAfterChanges(2);return e}};x.slice=function(e=0,g=this.length){O.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(e,g)})};x.some=function(e,g){O.trackAccess(this._observable);return this._items.some(e,g)};x.sort=function(e){O.trackAccess(this._observable);
if(!this.length||this._emitBeforeChanges(4))return this;const g=D.assumeNonNull(this._splice(0,this.length));arguments.length?g.sort(e):g.sort();this._splice(0,0,g);this._emitAfterChanges(4);return this};x.splice=function(e,g,...A){O.trackAccess(this._observable);const S=(g?2:0)|(A.length?1:0);if(this._emitBeforeChanges(S))return[];e=this._splice(e,g,A)||[];this._emitAfterChanges(S);return e};x.toArray=function(){O.trackAccess(this._observable);return this._items.slice()};x.toJSON=function(){O.trackAccess(this._observable);
return this.toArray()};x.toLocaleString=function(){O.trackAccess(this._observable);return this._items.toLocaleString()};x.toString=function(){O.trackAccess(this._observable);return this._items.toString()};x.unshift=function(...e){O.trackAccess(this._observable);if(!e.length||this._emitBeforeChanges(1))return this.length;this._splice(0,0,e);this._emitAfterChanges(1);return this.length};x._createNewInstance=function(e){return new this.constructor(e)};x._splice=function(e,g,A){const S=this._items;var aa=
this.itemType;let ja=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=w.schedule(()=>this._dispatchChange()));if(g){ja=S.splice(e,g);if(this.hasEventListener("before-remove")){var na=l.acquire();na.target=this;na.cancellable=!0;for(let la=0,va=ja.length;la<va;la++)g=ja[la],na.reset(g),this.emit("before-remove",na),na.defaultPrevented&&(ja.splice(la,
1),S.splice(e,0,g),e+=1,--la,--va);l.release(na)}this.length=this._items.length;if(this.hasEventListener("after-remove")){g=l.acquire();g.target=this;g.cancellable=!1;na=ja.length;for(let la=0;la<na;la++)g.reset(ja[la]),this.emit("after-remove",g);l.release(g)}}if(A&&A.length){if(aa){g=[];for(var ta of A)A=aa.ensureType(ta),null==A&&null!=ta||g.push(A);A=g}aa=this.hasEventListener("before-add");ta=this.hasEventListener("after-add");g=e===this.length;if(aa||ta){var ma=l.acquire();ma.target=this;ma.cancellable=
!0;na=l.acquire();na.target=this;na.cancellable=!1;for(const la of A)aa?(ma.reset(la),this.emit("before-add",ma),ma.defaultPrevented||(g?S.push(la):S.splice(e++,0,la),this._set("length",S.length),ta&&(na.reset(la),this.emit("after-add",na)))):(g?S.push(la):S.splice(e++,0,la),this._set("length",S.length),na.reset(la),this.emit("after-add",na));l.release(na);l.release(ma)}else{if(g)for(ma of A)S.push(ma);else S.splice(e,0,...A);this._set("length",S.length)}}(A&&A.length||ja&&ja.length)&&this._notifyChangeEvent(A,
ja);return ja};x._emitBeforeChanges=function(e){let g=!1;if(this.hasEventListener("before-changes")){const A=l.acquire();A.target=this;A.cancellable=!0;A.type=e;this.emit("before-changes",A);g=A.defaultPrevented;l.release(A)}return g};x._emitAfterChanges=function(e){if(this.hasEventListener("after-changes")){const g=l.acquire();g.target=this;g.cancellable=!1;g.type=e;this.emit("after-changes",g);l.release(g)}this._observable.notify()};x._notifyChangeEvent=function(e,g){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:g})};x._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var e=this._notifications;this._notifications=null;for(const g of e){e=g.changes;y.clear();I.clear();Q.clear();for(const {added:ta,removed:ma}of e){if(ta)if(0===Q.size&&0===I.size)for(const la of ta)y.add(la);else for(const la of ta)I.has(la)?(Q.add(la),I.delete(la)):Q.has(la)||y.add(la);
if(ma)if(0===Q.size&&0===y.size)for(const la of ma)I.add(la);else for(const la of ma)y.has(la)?y.delete(la):(Q.delete(la),I.add(la))}const A=Y.acquire();y.forEach(ta=>{A.push(ta)});const S=Y.acquire();I.forEach(ta=>{S.push(ta)});const aa=this._items,ja=g.items,na=Y.acquire();Q.forEach(ta=>{ja.indexOf(ta)!==aa.indexOf(ta)&&na.push(ta)});if(g.listeners&&(A.length||S.length||na.length)){e={target:this,added:A,removed:S,moved:na};const ta=g.listeners.length;for(let ma=0;ma<ta;ma++){const la=g.listeners[ma];
la.removed||la.callback.call(this,e)}}Y.release(A);Y.release(S);Y.release(na)}y.clear();I.clear();Q.clear()}};k._createClass(M,[{key:"items",get:function(){O.trackAccess(this._observable);return this._items},set:function(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,B(e)),this._emitAfterChanges(1))}}]);return M}(X.EventedAccessor,Symbol.iterator);L.ofType=G=>{if(!G)return m;if(R.has(G))return R.get(G);let U=null;if("function"===typeof G)U=G.prototype.declaredClass;else if(G.base)U=G.base.prototype.declaredClass;
else for(var M in G.typeMap){const x=G.typeMap[M].prototype.declaredClass;U=U?U+` | ${x}`:x}M=function(x){function e(){return x.apply(this,arguments)||this}k._inheritsLoose(e,x);return e}(m);d.__decorate([H.shared({Type:G,ensureType:"function"===typeof G?q.ensureType(G):q.ensureOneOfType(G)})],M.prototype,"itemType",void 0);M=d.__decorate([N.subclass(`esri.core.Collection<${U}>`)],M);R.set(G,M);return M};d.__decorate([t.property()],L.prototype,"length",void 0);d.__decorate([t.property()],L.prototype,
"items",null);return L=m=d.__decorate([N.subclass("esri.core.Collection")],L)})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],function(k){k.shared=function(d){return(Y,X)=>{Y[X]=d}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(k,d){let Y=function(){function X(){this._observers=[]}var r=X.prototype;r.observe=function(D){this._observers.includes(D)||
this._observers.push(D);return new d.ObservationHandle(this._observers,D)};r.notify=function(){const D=this._observers.slice();for(let z=0;z<D.length;++z){const w=D[z];w.onInvalidated();w.onCommitted()}};return X}();k.SimpleObservable=Y;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,d,Y,X,r,D){function z(q,H,N={},O){let u=null;const B=
N.once?(b,f)=>{O(b)&&(X.removeMaybe(u),H(b,f))}:(b,f)=>{O(b)&&H(b,f)};u=r.watchTracked(q,B,N.sync,N.equals);N.initial&&(q=q(),B(q,q));return u}function w(q){return!0}function t(q){return!!q}k.autorun=D.autorun;k.initial={initial:!0};k.react=function(q,H,N={}){return z(q,H,N,w)};k.reactListener=function(q,H,N,O={}){function u(){b&&f&&(f.remove(),null==O.onListenerRemove?void 0:O.onListenerRemove(b),f=b=null)}function B(l){O.once&&O.once&&X.removeMaybe(m);N(l)}let b=null,f=null,m=null;const F=r.watchTracked(q,
(l,C)=>{u();d.isEventTarget(l)&&(b=l,f=d.on(l,H,B),null==O.onListenerAdd?void 0:O.onListenerAdd(l))},O.sync);return m=Y.makeHandle(()=>{F.remove();u()})};k.reactTruthy=function(q,H,N={}){return z(q,H,N,t)};k.sync={sync:!0};k.syncAndInitial={sync:!0,initial:!0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/watchUtils":function(){define(["exports","./events","./lang","./promiseUtils"],function(k,d,Y,X){function r(B,b,f,m){var F=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];
b=B.watch(b,f,m);for(const l of F)F=l.trim().replace(u,"$1"),m=B.get(F),f.call(B,m,m,F,B);return b}function D(B,b,f,m,F){F=B.watch(b,(C,y,I,Q)=>{if(!f||f(C))null==m?void 0:m.call(B,C,y,I,Q)},F);if(Array.isArray(b))for(var l of b){const C=B.get(l);f&&f(C)&&(null==m?void 0:m.call(B,C,C,b,B))}else l=B.get(b),f&&f(l)&&(null==m?void 0:m.call(B,l,l,b,B));return F}function z(B,b,f,m,F){function l(){Q&&(Q.remove(),Q=null)}const C="function"===typeof m?m:null,y="object"===typeof m?m:null;"boolean"===typeof m&&
(F=m);let I=!1,Q;const R=X.createDeferred();X.onAbort(y,()=>{l();R.reject(X.createAbortError())});m={then:R.promise.then.bind(R.promise),catch:R.promise.catch.bind(R.promise),remove:l};Object.freeze(m);Q=D(B,b,f,(da,L,G,U)=>{I=!0;l();C&&C.call(B,da,L,G,U);R.resolve({value:da,oldValue:L,propertyName:G,target:U})},F);I&&l();return m}function w(B){return!!B}function t(B){return!B}function q(B){return!0===B}function H(B){return!1===B}function N(B){return void 0!==B}function O(B){return void 0===B}const u=
/\?(\.|$)/g;k.init=r;k.on=function(B,b,f,m,F,l,C){function y(R){const da=I[R];da&&(l&&l(da.target,R,B,f),da.handle.remove(),delete I[R])}const I={},Q=r(B,b,(R,da,L)=>{y(L);d.isEventTarget(R)&&(I[L]={handle:d.on(R,f,m),target:R},F&&F(R,L,B,f))},C);return{remove(){Q.remove();for(const R in I)y(R)}}};k.once=function(B,b,f,m){return z(B,b,null,f,m)};k.pausable=function(B,b,f,m){let F=!1;const l=B.watch(b,(C,y,I,Q)=>{F||f.call(B,C,y,I,Q)},m);return{remove(){l.remove()},pause(){F=!0},resume(){F=!1}}};k.watch=
function(B,b,f,m){return B.watch(b,f,m)};k.when=function(B,b,f,m){return D(B,b,w,f,m)};k.whenDefined=function(B,b,f,m){return D(B,b,N,f,m)};k.whenDefinedOnce=function(B,b,f,m){return z(B,b,N,f,m)};k.whenEqual=function(B,b,f,m,F){return D(B,b,l=>Y.equals(f,l),m,F)};k.whenEqualOnce=function(B,b,f,m,F){return z(B,b,l=>Y.equals(f,l),m,F)};k.whenFalse=function(B,b,f,m){return D(B,b,H,f,m)};k.whenFalseOnce=function(B,b,f,m){return z(B,b,H,f,m)};k.whenNot=function(B,b,f,m){return D(B,b,t,f,m)};k.whenNotOnce=
function(B,b,f,m){return z(B,b,t,f,m)};k.whenOnce=function(B,b,f,m){return z(B,b,w,f,m)};k.whenTrue=function(B,b,f,m){return D(B,b,q,f,m)};k.whenTrueOnce=function(B,b,f,m){return z(B,b,q,f,m)};k.whenUndefined=function(B,b,f,m){return D(B,b,O,f,m)};k.whenUndefinedOnce=function(B,b,f,m){return z(B,b,O,f,m)};k.whenValidOnce=z;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Y,X,r,D,z,w,t,q){k.PromiseQueue=function(N){function O(){var B=N.apply(this,arguments)||this;B._tasks=[];B.running=!1;return B}d._inheritsLoose(O,N);var u=O.prototype;u.destroy=function(){this.cancelAll()};u.runTask=function(B){for(;!B.done&&this._process(B);)B.madeProgress()};u.push=function(B,b,f){this.running=!0;return new Promise((m,F)=>this._tasks.push(new H(m,F,B,b,f)))};u.unshift=function(B,b,f){this.running=!0;return new Promise((m,F)=>this._tasks.unshift(new H(m,F,B,b,f)))};
u._process=function(B){if(0===this._tasks.length)return!1;const b=this._tasks.shift();try{const f=r.isAborted(b.signal);if(f&&!b.abortCallback)b.reject(r.createAbortError());else{const m=f?b.abortCallback(r.createAbortError()):b.callback(B);r.isPromise(m)?m.then(b.resolve,b.reject):b.resolve(m)}}catch(f){b.reject(f)}this.running=0<this._tasks.length;return!0};u.cancelAll=function(){const B=r.createAbortError();for(const b of this._tasks)if(b.abortCallback){const f=b.abortCallback(B);b.resolve(f)}else b.reject(B);
this._tasks.length=0;this.running=!1};d._createClass(O,[{key:"length",get:function(){return this._tasks.length}}]);return O}(X);Y.__decorate([D.property()],k.PromiseQueue.prototype,"running",void 0);k.PromiseQueue=Y.__decorate([q.subclass("esri.layers.support.PromiseQueue")],k.PromiseQueue);let H=function(N,O,u,B,b){this.resolve=N;this.reject=O;this.callback=u;this.signal=B;this.abortCallback=b};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,d,Y,X,r,D,z,w){Y=function(t){function q(){var H=t.apply(this,arguments)||this;H.SCHEDULER_LOG_SLOW_TASKS=!1;H.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return H}k._inheritsLoose(q,t);return q}(Y);d.__decorate([X.property()],Y.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([X.property()],Y.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);Y=d.__decorate([w.subclass("esri.views.support.DebugFlags")],Y);return new Y})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(k,d,Y,X,r){k.createCapabilities=function(D,z){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:D},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:z,supportsDelete:z,supportsEditing:z,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,
supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:z,supportsExceedsLimitStatistics:!0},query:X.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:z,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};k.createDefaultAttributesFunction=
function(D,z){if(d("esri-csp-restrictions"))return()=>({[z]:null,...D});try{let w=`this.${z} = null;`;for(const q in D){const H=q.includes(".")?`["${q}"]`:`.${q}`;w+=`this${H} = ${JSON.stringify(D[q])};`}const t=new Function(w);return()=>new t}catch(w){return()=>({[z]:null,...D})}};k.createDefaultTemplate=function(D={}){return[{name:"New Feature",description:"",prototype:{attributes:Y.clone(D)}}]};k.createDrawingInfo=function(D){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===D||"esriGeometryMultipoint"===
D?r.defaultPointSymbolJSON:"esriGeometryPolyline"===D?r.defaultPolylineSymbolJSON:r.defaultPolygonSymbolJSON}}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(k){const d=[252,146,31,255],Y={type:"esriSMS",style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},X={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d};k.defaultColor=d;k.defaultOutlineColor=[153,
153,153,255];k.defaultPointSymbolJSON=Y;k.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};k.defaultPolylineSymbolJSON=X;k.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};k.errorPointSymbolJSON={type:"esriSMS",
style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};k.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};k.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],
function(k,d,Y,X,r){function D(B){return new H(B)}function z(){return w.apply(this,arguments)}function w(){w=Y._asyncToGenerator(function*(){return u?u:u=yield new Promise((B,b)=>k(["../../../../geometry/geometryEngineJSON"],B,b))});return w.apply(this,arguments)}function t(){t=Y._asyncToGenerator(function*(B,b){!X.isValid(B)||"esriGeometryPolygon"!==b&&"esriGeometryPolyline"!==b||(yield z())});return t.apply(this,arguments)}let q=function(){this.description=this.code=null},H=function(B){this.error=
new q;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=B},N=function(B){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=B};const O=new Set;let u;d.createFeatureEditErrorResult=D;d.createFeatureEditSuccessResult=function(B){return new N(B)};d.loadGeometryEngine=z;d.loadGeometryEngineForSimplify=function(B,b){return t.apply(this,arguments)};d.mixAttributes=function(B,b,f,m=!1,F){O.clear();for(const I in f){const Q=B.get(I);if(Q){var l=f[I];{var C=
Q;var y=l;let R=y;"string"===typeof y&&r.isNumericField(C)?R=parseFloat(y):null!=y&&r.isStringField(C)&&"string"!==typeof y&&(R=String(y));C=r.sanitizeNullFieldValue(R)}C!==l&&F&&F.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:Q,originalValue:l,sanitizedValue:C}});O.add(Q.name);if(Q&&(m||Q.editable)){if(l=r.validateFieldValue(Q,C))return D(r.validationErrorToString(l,Q,C));b[Q.name]=C}}}for(const I of B.requiredFields)if(!O.has(I.name))return D(`missing required field "${I.name}"`);
return null};d.simplify=function(B,b){if(!B||!X.isValid(b))return B;if("rings"in B||"paths"in B){if(!u)throw new TypeError("geometry engine not loaded");return u.simplify(b,B)}return B};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(k,d){d=new d.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",
esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});k.kebabDict=d;Object.defineProperty(k,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/maybe ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(k,d,Y,X,r,D,z,w,t,q,H,N,O,u,B){function b(C){return X.isPoint(C)?
null!=C.z:!!C.hasZ}function f(C){return X.isPoint(C)?null!=C.m:!!C.hasM}const m=r.WGS84,F={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:r.WGS84},l={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,
supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function C(){this._nextObjectId=this._queryEngine=null}var y=C.prototype;y.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null};y.load=function(){var I=k._asyncToGenerator(function*(Q){var R=
[];const {features:da}=Q;var L=this._inferLayerProperties(da,Q.fields);const G=Q.fields||[],U=null!=Q.hasM?Q.hasM:L.hasM,M=null!=Q.hasZ?Q.hasZ:L.hasZ;var x=!Q.spatialReference&&!L.spatialReference;const e=x?m:Q.spatialReference||L.spatialReference,g=x?F:null,A=Q.geometryType||L.geometryType;let S=Q.objectIdField||L.objectIdField;Q=Q.timeInfo;if(A&&(x&&R.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!A))throw new d("feature-layer:missing-property",
"geometryType not set and couldn't be inferred from the provided features");if(!S)throw new d("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");L.objectIdField&&S!==L.objectIdField&&(R.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${S}" doesn't match the field name "${L.objectIdField}", found in the provided fields`}),S=L.objectIdField);if(S&&!L.objectIdField){let ja=null;G.some(na=>na.name===S?(ja=na,!0):!1)?
(ja.type="esriFieldTypeOID",ja.editable=!1,ja.nullable=!1):G.unshift({alias:S,name:S,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const ja of G){null==ja.name&&(ja.name=ja.alias);null==ja.alias&&(ja.alias=ja.name);if(!ja.name)throw new d("feature-layer:invalid-field-name","field name is missing",{field:ja});ja.name===S&&(ja.type="esriFieldTypeOID");if(-1===u.kebabDict.jsonValues.indexOf(ja.type))throw new d("feature-layer:invalid-field-type",`invalid type for field "${ja.name}"`,{field:ja});
}L={};for(var aa of G)"esriFieldTypeOID"!==aa.type&&"esriFieldTypeGlobalID"!==aa.type&&(x=B.getFieldDefaultValue(aa),void 0!==x&&(L[aa.name]=x));this._fieldsIndex=new O(G);this._createDefaultAttributes=H.createDefaultAttributesFunction(L,S);Q&&(Q.startTimeField&&((aa=this._fieldsIndex.get(Q.startTimeField))?(Q.startTimeField=aa.name,aa.type="esriFieldTypeDate"):Q.startTimeField=null),Q.endTimeField&&((aa=this._fieldsIndex.get(Q.endTimeField))?(Q.endTimeField=aa.name,aa.type="esriFieldTypeDate"):Q.endTimeField=
null),Q.trackIdField&&((aa=this._fieldsIndex.get(Q.trackIdField))?Q.trackIdField=aa.name:(Q.trackIdField=null,R.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:Q}}))),Q.startTimeField||Q.endTimeField||(R.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:Q}}),Q=null));R={warnings:R,featureErrors:[],layerDefinition:{...l,drawingInfo:H.createDrawingInfo(A),templates:H.createDefaultTemplate(L),
extent:g,geometryType:A,objectIdField:S,fields:G,hasZ:!!M,hasM:!!U,timeInfo:Q},assignedObjectIds:{}};this._queryEngine=new q.default({fields:G,geometryType:A,hasM:U,hasZ:M,objectIdField:S,spatialReference:e,featureStore:new w({geometryType:A,hasM:U,hasZ:M}),timeInfo:Q,cacheSpatialQueries:!0});if(!da||!da.length)return this._nextObjectId=z.initialObjectId,R;this._nextObjectId=z.findLastObjectIdFromFeatures(S,da)+1;yield t.checkProjectionSupport(da,e);return this._loadInitialFeatures(R,da)});return function(Q){return I.apply(this,
arguments)}}();y.applyEdits=function(){var I=k._asyncToGenerator(function*(Q){const {spatialReference:R,geometryType:da}=this._queryEngine;yield Promise.all([N.loadGeometryEngineForSimplify(R,da),t.checkProjectionSupport(Q.adds,R),t.checkProjectionSupport(Q.updates,R)]);return this._applyEdits(Q)});return function(Q){return I.apply(this,arguments)}}();y.queryFeatures=function(I,Q={}){return this._queryEngine.executeQuery(I,Q.signal)};y.queryFeatureCount=function(I,Q={}){return this._queryEngine.executeQueryForCount(I,
Q.signal)};y.queryObjectIds=function(I,Q={}){return this._queryEngine.executeQueryForIds(I,Q.signal)};y.queryExtent=function(I,Q={}){return this._queryEngine.executeQueryForExtent(I,Q.signal)};y.querySnapping=function(I,Q={}){return this._queryEngine.executeQueryForSnapping(I,Q.signal)};y._inferLayerProperties=function(I,Q){let R=void 0,da=void 0,L=null,G=null,U=null;for(const M of I)if(I=M.geometry,!Y.isNone(I)&&(L||(L=X.getJsonType(I)),G||(G=I.spatialReference),null==R&&(R=b(I)),null==da&&(da=f(I)),
L&&G&&null!=R&&null!=da))break;if(Q&&Q.length){let M=null;Q.some(x=>{const e="esriFieldTypeOID"===x.type,g=!x.type&&x.name&&"objectid"===x.name.toLowerCase();M=x;return e||g})&&(U=M.name)}return{geometryType:L,spatialReference:G,objectIdField:U,hasM:da,hasZ:R}};y._loadInitialFeatures=function(I,Q){const {geometryType:R,hasM:da,hasZ:L,objectIdField:G,spatialReference:U,featureStore:M}=this._queryEngine,x=[];for(const e of Q){null!=e.uid&&(I.assignedObjectIds[e.uid]=-1);if(e.geometry&&R!==X.getJsonType(e.geometry)){I.featureErrors.push(N.createFeatureEditErrorResult("Incorrect geometry type."));
continue}Q=this._createDefaultAttributes();const g=N.mixAttributes(this._fieldsIndex,Q,e.attributes,!0,I.warnings);g?I.featureErrors.push(g):(this._assignObjectId(Q,e.attributes,!0),e.attributes=Q,null!=e.uid&&(I.assignedObjectIds[e.uid]=e.attributes[G]),Y.isSome(e.geometry)&&(e.geometry=t.project(e.geometry,e.geometry.spatialReference,U)),x.push(e))}M.addMany(D.convertFromFeatures([],x,R,L,da,G));I.layerDefinition.extent=this._queryEngine.fullExtent;if(I.layerDefinition.timeInfo){const {start:e,
end:g}=this._queryEngine.timeExtent;I.layerDefinition.timeInfo.timeExtent=[e,g]}return I};y._applyEdits=function(I){const {adds:Q,updates:R,deletes:da}=I;I={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};Q&&Q.length&&this._applyAddEdits(I,Q);R&&R.length&&this._applyUpdateEdits(I,R);if(da&&da.length){for(const L of da)I.deleteResults.push(N.createFeatureEditSuccessResult(L));this._queryEngine.featureStore.removeManyById(da)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:I}};
y._applyAddEdits=function(I,Q){const {addResults:R}=I,{geometryType:da,hasM:L,hasZ:G,objectIdField:U,spatialReference:M,featureStore:x}=this._queryEngine,e=[];for(const g of Q){if(g.geometry&&da!==X.getJsonType(g.geometry)){R.push(N.createFeatureEditErrorResult("Incorrect geometry type."));continue}Q=this._createDefaultAttributes();const A=N.mixAttributes(this._fieldsIndex,Q,g.attributes);A?R.push(A):(this._assignObjectId(Q,g.attributes),g.attributes=Q,null!=g.uid&&(I.uidToObjectId[g.uid]=g.attributes[U]),
Y.isSome(g.geometry)&&(g.geometry=t.project(N.simplify(g.geometry,M),g.geometry.spatialReference,M)),e.push(g),R.push(N.createFeatureEditSuccessResult(g.attributes[U])))}x.addMany(D.convertFromFeatures([],e,da,G,L,U))};y._applyUpdateEdits=function({updateResults:I},Q){const {geometryType:R,hasM:da,hasZ:L,objectIdField:G,spatialReference:U,featureStore:M}=this._queryEngine;for(const x of Q){const {attributes:e,geometry:g}=x;Q=e&&e[G];if(null==Q){I.push(N.createFeatureEditErrorResult(`Identifier field ${G} missing`));
continue}if(!M.has(Q)){I.push(N.createFeatureEditErrorResult(`Feature with object id ${Q} missing`));continue}const A=D.convertToFeature(M.getFeature(Q),R,L,da);if(Y.isSome(g)){if(R!==X.getJsonType(g)){I.push(N.createFeatureEditErrorResult("Incorrect geometry type."));continue}A.geometry=t.project(N.simplify(g,U),g.spatialReference,U)}if(e){const S=N.mixAttributes(this._fieldsIndex,A.attributes,e);if(S){I.push(S);continue}}M.add(D.convertFromFeature(A,R,L,da,G));I.push(N.createFeatureEditSuccessResult(Q))}};
y._assignObjectId=function(I,Q,R=!1){const da=this._queryEngine.objectIdField;R?Q&&isFinite(Q[da])?I[da]=Q[da]:I[da]=this._nextObjectId++:I[da]=this._nextObjectId++};return C}()});