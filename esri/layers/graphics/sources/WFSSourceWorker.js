// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(l,d,T,R,q,D,A,w){function v(n,E){return n?E?4:3:E?3:2}function t(n,E,Q,S){if(n){if(Q)return E&&S?a:Oa;if(E&&S)return pa}else if(E&&S)return Oa;return Qa}function F({scale:n,translate:E},Q){return Math.round((Q-E[0])/n[0])}function L({scale:n,translate:E},
Q){return Math.round((E[1]-Q)/n[1])}function J({scale:n,translate:E},Q){return Q*n[0]+E[0]}function u({scale:n,translate:E},Q){return E[1]-Q*n[1]}function C(n){n=n.coords;return{x:n[0],y:n[1]}}function c(n,E){n.coords[0]=E.x;n.coords[1]=E.y;return n}function e(n){n=n.coords;return{x:n[0],y:n[1],z:n[2]}}function p(n,E){n.coords[0]=E.x;n.coords[1]=E.y;n.coords[2]=E.z;return n}function r(n){n=n.coords;return{x:n[0],y:n[1],m:n[2]}}function f(n,E){n.coords[0]=E.x;n.coords[1]=E.y;n.coords[2]=E.m;return n}
function y(n){n=n.coords;return{x:n[0],y:n[1],z:n[2],m:n[3]}}function z(n,E){n.coords[0]=E.x;n.coords[1]=E.y;n.coords[2]=E.z;n.coords[3]=E.m;return n}function M(n,E){return n&&E?z:n?p:E?f:c}function aa(n,E,Q,S,fa){Q=M(Q,S);for(const ea of E){const {geometry:K,attributes:P}=ea;let ca;K&&(ca=Q(new w,K));n.push(new D.default(ca,P,null,P[fa]))}return n}function U(n,E,Q,S){for(const fa of E){const {geometry:ea,attributes:K}=fa;let P;ea&&(P=ha(ea,Q,S));n.push({attributes:K,geometry:P})}return n}function ha(n,
E,Q){if(R.isNone(n))return null;const S=v(E,Q),fa=[];for(let ea=0;ea<n.coords.length;ea+=S){const K=[];for(let P=0;P<S;P++)K.push(n.coords[ea+P]);fa.push(K)}return E?Q?{points:fa,hasZ:E,hasM:Q}:{points:fa,hasZ:E}:Q?{points:fa,hasM:Q}:{points:fa}}function N(n,E,Q,S,fa){Q=v(Q,S);for(const ea of E){E=ea.geometry;S=ea.attributes;let K;E&&(K=I(new w,E,Q));n.push(new D.default(K,S,null,S[fa]))}return n}function I(n,E,Q=v(E.hasZ,E.hasM)){n.lengths[0]=E.points.length;const S=n.coords;let fa=0;for(const ea of E.points)for(E=
0;E<Q;E++)S[fa++]=ea[E];return n}function X(n,E,Q){if(!n)return null;const S=v(E,Q),{coords:fa,lengths:ea}=n;n=[];let K=0;for(const P of ea){const ca=[];for(let oa=0;oa<P;oa++){const qa=[];for(let wa=0;wa<S;wa++)qa.push(fa[K++]);ca.push(qa)}n.push(ca)}return E?Q?{paths:n,hasZ:E,hasM:Q}:{paths:n,hasZ:E}:Q?{paths:n,hasM:Q}:{paths:n}}function O(n,E,Q,S,fa){Q=v(Q,S);for(const ea of E){E=ea.geometry;S=ea.attributes;let K;E&&(K=B(new w,E,Q));n.push(new D.default(K,S,null,S[fa]))}return n}function B(n,E,
Q=v(E.hasZ,E.hasM)){const {lengths:S,coords:fa}=n;let ea=0;for(const K of E.paths){for(const P of K)for(E=0;E<Q;E++)fa[ea++]=P[E];S.push(K.length)}return n}function g(n,E,Q){if(!n)return null;const S=v(E,Q),{coords:fa,lengths:ea}=n;n=[];let K=0;for(const P of ea){const ca=[];for(let oa=0;oa<P;oa++){const qa=[];for(let wa=0;wa<S;wa++)qa.push(fa[K++]);ca.push(qa)}n.push(ca)}return E?Q?{rings:n,hasZ:E,hasM:Q}:{rings:n,hasZ:E}:Q?{rings:n,hasM:Q}:{rings:n}}function m(n,E,Q,S,fa){for(const ea of E){E=ea.geometry;
const K=ea.centroid,P=ea.attributes;let ca;E&&(ca=G(new w,E,Q,S));R.isSome(K)?n.push(new D.default(ca,P,c(new w,K),P[fa])):n.push(new D.default(ca,P,null,P[fa]))}return n}function G(n,E,Q=E.hasZ,S=E.hasM){W(n,E.rings,Q,S);return n}function W(n,E,Q,S){Q=v(Q,S);const {lengths:fa,coords:ea}=n;S=0;fa.length=ea.length=0;for(const K of E){for(const P of K)for(E=0;E<Q;E++)ea[S++]=P[E];fa.push(K.length)}return n}function da(n,E,Q,S,fa,ea){n.length=0;if(!Q){for(const K of E)n.push(new D.default(null,K.attributes,
null,K.attributes[ea]));return n}switch(Q){case "esriGeometryPoint":return aa(n,E,S,fa,ea);case "esriGeometryMultipoint":return N(n,E,S,fa,ea);case "esriGeometryPolyline":return O(n,E,S,fa,ea);case "esriGeometryPolygon":return m(n,E,S,fa,ea);default:Ja.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${Q}'`)),n.length=0}return n}function ja(n,E,Q,S){n=n&&("coords"in n?n:n.geometry);if(R.isNone(n))return null;switch(E){case "esriGeometryPoint":return E=C,Q&&
S?E=y:Q?E=e:S&&(E=r),E(n);case "esriGeometryMultipoint":return ha(n,Q,S);case "esriGeometryPolyline":return X(n,Q,S);case "esriGeometryPolygon":return g(n,Q,S);default:Ja.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${E}'`))}}function na(n,E,Q,S,fa){n.length=0;if(R.isNone(Q)){for(const P of E)n.push({attributes:P.attributes});return n}switch(Q){case "esriGeometryPoint":var ea=C;S&&fa?ea=y:S?ea=e:fa&&(ea=r);for(var K of E){const {geometry:P,attributes:ca}=
K;S=R.isSome(P)?ea(P):null;n.push({attributes:ca,geometry:S})}break;case "esriGeometryMultipoint":return U(n,E,S,fa);case "esriGeometryPolyline":for(const P of E){const {geometry:ca,attributes:oa}=P;let qa;R.isSome(ca)&&(qa=X(ca,S,fa));n.push({attributes:oa,geometry:qa})}break;case "esriGeometryPolygon":for(ea of E){const {geometry:P,attributes:ca,centroid:oa}=ea;let qa;R.isSome(P)&&(qa=g(P,S,fa));oa?(K=C(oa),n.push({attributes:ca,centroid:K,geometry:qa})):n.push({attributes:ca,geometry:qa})}break;
default:Ja.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${Q}'`))}return n}function ua(n,E,Q,S,fa,ea,K=Q,P=S){n.lengths.length&&(n.lengths.length=0);n.coords.length&&(n.coords.length=0);if(R.isNone(E)||!E.coords.length)return null;fa=Ca[fa];const {coords:ca,lengths:oa}=E;E=v(Q,S);const qa=v(Q&&K,S&&P);Q=t(Q,S,K,P);if(!oa.length)return Q(n.coords,ca,0,0,F(ea,ca[0]),L(ea,ca[1])),n.lengths.length&&(n.lengths.length=0),n.coords.length=E,n;let wa,xa=0,Aa,Ha=
0;for(const Da of oa){if(Da<fa)continue;let Ea=0;Aa=Ha;P=S=F(ea,ca[xa]);wa=K=L(ea,ca[xa+1]);Q(n.coords,ca,Aa,xa,P,wa);Ea++;xa+=E;Aa+=qa;for(let Fa=1;Fa<Da;Fa++,xa+=E)if(P=F(ea,ca[xa]),wa=L(ea,ca[xa+1]),P!==S||wa!==K)Q(n.coords,ca,Aa,xa,P-S,wa-K),Aa+=qa,Ea++,S=P,K=wa;Ea>=fa&&(n.lengths.push(Ea),Ha=Aa)}n.coords.length=Ha;return n.coords.length?n:null}function ma(n,E,Q,S,fa,ea,K){let P=S,ca=0;for(let qa=ea+Q;qa<K;qa+=Q){{var oa=E[qa];const wa=E[qa+1],xa=E[K],Aa=E[K+1];let Ha=E[ea],Da=E[ea+1],Ea=xa-Ha,
Fa=Aa-Da;if(0!==Ea||0!==Fa){const Ga=((oa-Ha)*Ea+(wa-Da)*Fa)/(Ea*Ea+Fa*Fa);1<Ga?(Ha=xa,Da=Aa):0<Ga&&(Ha+=Ea*Ga,Da+=Fa*Ga)}Ea=oa-Ha;Fa=wa-Da;oa=Ea*Ea+Fa*Fa}oa>P&&(ca=qa,P=oa)}P>S&&(ca-ea>Q&&ma(n,E,Q,S,fa,ea,ca),fa(n,E,n.length,ca,E[ca],E[ca+1]),K-ca>Q&&ma(n,E,Q,S,fa,ca,K))}function la(n,E,Q,S,fa){const {coords:ea,lengths:K}=E,P=Q?S?a:Oa:S?Oa:Qa;Q=v(Q,S);if(!ea.length)return n!==E&&(n.lengths.length=0,n.coords.length=0),n;if(!K.length)return P(n.coords,ea,0,0,J(fa,ea[0]),u(fa,ea[1])),n!==E&&(n.lengths.length=
0,n.coords.length=Q),n;const [ca,oa]=fa.scale;S=0;for(let qa=0;qa<K.length;qa++){const wa=K[qa];n.lengths[qa]=wa;let xa=J(fa,ea[S]),Aa=u(fa,ea[S+1]);P(n.coords,ea,S,S,xa,Aa);S+=Q;for(let Ha=1;Ha<wa;Ha++,S+=Q)xa+=ea[S]*ca,Aa-=ea[S+1]*oa,P(n.coords,ea,S,S,xa,Aa)}n!==E&&(n.lengths.length=K.length,n.coords.length=ea.length);return n}function va(n,E,Q,S){let fa=0,ea=n[S*E],K=n[S*(E+1)];for(let P=1;P<Q;P++){const ca=ea+n[S*(E+P)],oa=K+n[S*(E+P)+1],qa=(ca-ea)*(oa+K);ea=ca;K=oa;fa+=qa}return.5*fa}const Ja=
T.getLogger("esri.tasks.support.optimizedFeatureSet"),Ca={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Qa=(n,E,Q,S,fa,ea)=>{n[Q]=fa;n[Q+1]=ea},Oa=(n,E,Q,S,fa,ea)=>{n[Q]=fa;n[Q+1]=ea;n[Q+2]=E[S+2]},pa=(n,E,Q,S,fa,ea)=>{n[Q]=fa;n[Q+1]=ea;n[Q+2]=E[S+3]},a=(n,E,Q,S,fa,ea)=>{n[Q]=fa;n[Q+1]=ea;n[Q+2]=E[S+2];n[Q+3]=E[S+3]},k=[],V=[];l.convertFromFeature=function(n,E,Q,S,fa){k[0]=n;[n]=da(V,k,E,Q,S,fa);k.length=V.length=0;return n};l.convertFromFeatureSet=function(n,
E){const Q=new A,{hasM:S,hasZ:fa,features:ea,objectIdFieldName:K,spatialReference:P,geometryType:ca,exceededTransferLimit:oa,transform:qa,fields:wa}=n;wa&&(Q.fields=wa);Q.geometryType=ca;Q.objectIdFieldName=K||E;Q.spatialReference=P;if(!Q.objectIdFieldName)return Ja.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Q;ea&&da(Q.features,ea,ca,fa,S,Q.objectIdFieldName);oa&&(Q.exceededTransferLimit=oa);S&&(Q.hasM=S);fa&&(Q.hasZ=fa);qa&&(Q.transform=qa);return Q};
l.convertFromFeatures=da;l.convertFromGeometry=function(n,E,Q){if(R.isNone(n))return null;const S=new w;"hasZ"in n&&null==E&&(E=n.hasZ);"hasM"in n&&null==Q&&(Q=n.hasM);if(q.isPoint(n))return M(null!=E?E:null!=n.z,null!=Q?Q:null!=n.m)(S,n);if(q.isPolygon(n))return G(S,n,E,Q);if(q.isPolyline(n))return B(S,n,v(E,Q));if(q.isMultipoint(n))return I(S,n,v(E,Q));Ja.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${n}'`))};l.convertFromGraphics=function(n,E,Q,S,fa,
ea){const K=n.length;switch(Q){case "esriGeometryPoint":aa(n,E,S,fa,ea);break;case "esriGeometryMultipoint":N(n,E,S,fa,ea);break;case "esriGeometryPolyline":O(n,E,S,fa,ea);break;case "esriGeometryPolygon":m(n,E,S,fa,ea);break;default:Ja.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${Q}'`))}for(S=0;S<E.length;S++)n[S+K].geometryType=Q,n[S+K].insertAfter=E[S].insertAfter,n[S+K].groupId=E[S].groupId;return n};l.convertFromMultipoint=I;l.convertFromMultipointFeatures=
N;l.convertFromNestedArray=W;l.convertFromPoint=function(n,E,Q=M(null!=E.z,null!=E.m)){return Q(n,E)};l.convertFromPointFeatures=aa;l.convertFromPolygon=G;l.convertFromPolyline=B;l.convertFromPolylineFeatures=O;l.convertToFeature=function(n,E,Q,S){V[0]=n;na(k,V,E,Q,S);n=k[0];k.length=V.length=0;return n};l.convertToFeatureSet=function(n){const {objectIdFieldName:E,spatialReference:Q,transform:S,fields:fa,hasM:ea,hasZ:K,features:P,geometryType:ca,exceededTransferLimit:oa,uniqueIdField:qa,queryGeometry:wa,
queryGeometryType:xa}=n;n=na([],P,ca,K,ea);const Aa=ja(wa,xa,!1,!1);n={features:n,fields:fa,geometryType:ca,objectIdFieldName:E,spatialReference:Q,uniqueIdField:qa,queryGeometry:Aa};S&&(n.transform=S);oa&&(n.exceededTransferLimit=oa);ea&&(n.hasM=ea);K&&(n.hasZ=K);return n};l.convertToFeatures=na;l.convertToGeometry=ja;l.convertToMultipoint=ha;l.convertToMultipointFeatures=U;l.convertToPoint=function(n,E,Q){return n?E?Q?y(n):e(n):Q?r(n):C(n):null};l.convertToPolygon=g;l.convertToPolyline=X;l.deltaDecodeGeometry=
function(n,E){if(R.isNone(n))return null;const Q=n.clone(),S=n.coords;n=n.lengths;let fa=0;for(let P=0;P<n.length;P++){const ca=n[P];var ea=S[E*fa],K=S[E*fa+1];for(let oa=1;oa<ca;oa++)ea+=S[E*(fa+oa)],K+=S[E*(fa+oa)+1],Q.coords[E*(fa+oa)]=ea,Q.coords[E*(fa+oa)+1]=K;fa+=ca}return Q};l.deltaEncodeGeometry=function(n,E){const Q=n.clone(),S=n.coords;n=n.lengths;let fa=0;for(let K=0;K<n.length;K++){const P=n[K];let ca=S[E*fa];var ea=S[E*fa+1];for(let oa=1;oa<P;oa++){const qa=S[E*(fa+oa)],wa=S[E*(fa+oa)+
1];ea=wa-ea;Q.coords[E*(fa+oa)]=qa-ca;Q.coords[E*(fa+oa)+1]=ea;ca=qa;ea=wa}fa+=P}return Q};l.generalizeOptimizedGeometry=function(n,E,Q,S,fa,ea,K=Q,P=S){n.lengths.length&&(n.lengths.length=0);n.coords.length&&(n.coords.length=0);if(!E||!E.coords.length)return null;fa=Ca[fa];const {coords:ca,lengths:oa}=E;E=v(Q,S);const qa=v(Q&&K,S&&P);Q=t(Q,S,K,P);if(!oa.length)return Q(n.coords,ca,0,0,ca[0],ca[1]),n.lengths.length&&(n.lengths.length=0),n.coords.length=E,n;S=0;ea*=ea;for(const wa of oa){if(wa<fa){S+=
wa*E;continue}K=n.coords.length/qa;P=S;const xa=S+(wa-1)*E;Q(n.coords,ca,n.coords.length,P,ca[P],ca[P+1]);ma(n.coords,ca,E,ea,Q,P,xa);Q(n.coords,ca,n.coords.length,xa,ca[xa],ca[xa+1]);P=n.coords.length/qa-K;P>=fa?n.lengths.push(P):n.coords.length=K*qa;S+=wa*E}return n.coords.length?n:null};l.getBoundsOptimizedGeometry=function(n,E,Q,S){if(R.isNone(E)||!E.coords||!E.coords.length)return null;Q=v(Q,S);let fa=S=Number.POSITIVE_INFINITY,ea=Number.NEGATIVE_INFINITY,K=Number.NEGATIVE_INFINITY;if(E&&E.coords){E=
E.coords;for(let P=0;P<E.length;P+=Q){const ca=E[P],oa=E[P+1];S=Math.min(S,ca);ea=Math.max(ea,ca);fa=Math.min(fa,oa);K=Math.max(K,oa)}}n[0]=S;n[1]=fa;n[2]=ea;n[3]=K;return n};l.getQuantizedArea=function(n,E){const {coords:Q,lengths:S}=n;let fa=n=0;for(let ea=0;ea<S.length;ea++)fa+=va(Q,n,S[ea],E),n+=ea;return Math.abs(fa)};l.getQuantizedBoundsOptimizedGeometry=function(n,E,Q,S){Q=v(Q,S);const {lengths:fa,coords:ea}=E;S=E=Number.POSITIVE_INFINITY;let K=Number.NEGATIVE_INFINITY,P=Number.NEGATIVE_INFINITY,
ca=0;for(const oa of fa){let qa=ea[ca],wa=ea[ca+1];E=Math.min(qa,E);S=Math.min(wa,S);K=Math.max(qa,K);P=Math.max(wa,P);ca+=Q;for(let xa=1;xa<oa;xa++,ca+=Q){const Aa=ea[ca],Ha=ea[ca+1];qa+=Aa;wa+=Ha;0>Aa&&(E=Math.min(E,qa));0<Aa&&(K=Math.max(K,qa));0>Ha?S=Math.min(S,wa):0<Ha&&(P=Math.max(P,wa))}}n[0]=E;n[1]=S;n[2]=K;n[3]=P;return n};l.getSignedQuantizedRingArea=va;l.quantizeOptimizedFeatureSet=function(n,E){const {geometryType:Q,features:S,hasM:fa,hasZ:ea}=E;if(!n)return E;for(let K=0;K<S.length;K++){const P=
S[K],ca=P.weakClone();ca.geometry=new w;ua(ca.geometry,P.geometry,fa,ea,Q,n);P.centroid&&(ca.centroid=new w,ua(ca.centroid,P.centroid,fa,ea,"esriGeometryPoint",n));S[K]=ca}E.transform=n;return E};l.quantizeOptimizedGeometry=ua;l.quantizeX=F;l.quantizeY=L;l.removeCollinearVectices=function(n,E,Q,S,fa){if(!E||!E.coords||!E.coords.length)return null;Q=Ca[Q];const {coords:ea,lengths:K}=E;E=t(S,fa,S,fa);S=v(S,fa);let P=fa=0,ca=0,oa=0;for(const xa of K){P=oa;E(n.coords,ea,P,fa,ea[fa],ea[fa+1]);fa+=S;var qa=
ea[fa];let Aa=ea[fa+1],Ha=qa,Da=Aa;var wa=Aa/qa;P+=S;E(n.coords,ea,P,fa,Ha,Da);fa+=S;for(let Ea=2;Ea<xa;Ea++){qa=ea[fa];Aa=ea[fa+1];const Fa=Aa/qa,Ga=wa===Fa||!isFinite(wa)&&!isFinite(Fa);wa=Ga&&isFinite(Fa)?0<=wa&&0<=Fa||0>=wa&&0>=Fa:0<=Da&&0<=Aa||0>=Da&&0>=Aa;Ga&&wa?(Ha+=qa,Da+=Aa):(Ha=qa,Da=Aa,P+=S);E(n.coords,ea,P,fa,Ha,Da);fa+=S;wa=Fa}P+=S;qa=(P-oa)/S;qa>=Q&&(n.lengths[ca]=qa,oa=P,ca++)}n.coords.length>oa&&(n.coords.length=oa);n.lengths.length>ca&&(n.lengths.length=ca);return n.coords.length&&
n.lengths.length?n:null};l.removeZMValues=function(n,E,Q,S,fa,ea){const K=v(Q,S);Q=t(Q,S,fa,ea);S=E.coords;n.coords.length=0;n.lengths.length=0;n.lengths.push(...E.lengths);for(E=0;E<S.length;E+=K)Q(n.coords,S,n.coords.length,E,S[E],S[E+1]);return n};l.unquantizeOptimizedFeatureSet=function(n){const {transform:E,features:Q,hasM:S,hasZ:fa}=n;if(!E)return n;for(const ea of Q)R.isSome(ea.geometry)&&la(ea.geometry,ea.geometry,S,fa,E),ea.centroid&&la(ea.centroid,ea.centroid,S,fa,E);n.transform=null;return n};
l.unquantizeOptimizedGeometry=la;l.unquantizeX=J;l.unquantizeY=u;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(l,d,T){let R=function(){function D(A=null,w={},v,t){this.geometry=A;this.attributes=w;this.centroid=v;this.objectId=t;this.geohashY=this.geohashX=this.displayId=0}D.prototype.weakClone=function(){const A=new D(this.geometry,this.attributes,this.centroid,
this.objectId);A.displayId=this.displayId;A.geohashX=this.geohashX;A.geohashY=this.geohashY;return A};return D}(),q=function(D){function A(){return D.apply(this,arguments)||this}d._inheritsLoose(A,D);return A}(R);l.OptimizedFeatureWithGeometry=q;l.default=R;l.hasGeometry=function(D){return!(T.isNone(D.geometry)||!D.geometry.coords||!D.geometry.coords.length)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function l(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}l.prototype.weakClone=function(){const d=new l;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;
d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;return d};return l}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function d(R=
[],q=[],D=!1){this.lengths=null!=R?R:[];this.coords=null!=q?q:[];this.hasIndeterminateRingOrder=D}var T=d.prototype;T.forEachVertex=function(R){let q=0;this.lengths.length||R(this.coords[0],this.coords[1]);for(let D=0;D<this.lengths.length;D++){const A=this.lengths[D];for(let w=0;w<A;w++)R(this.coords[2*(w+q)],this.coords[2*(w+q)+1]);q+=A}};T.clone=function(R){return R?(R.set(this.coords),new d(this.lengths.slice(),R,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};l._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((R,q)=>R+q)}}]);return d}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(l,d,T,R,q,D,A,w,v,t){return function(){function F(J){this.geometryInfo=J;this._boundsStore=new v.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new T;this.featureAdapter=t.optimizedFeatureQueryEngineAdapter}var L=F.prototype;L.add=function(J){this._add(J);this._emitChanged()};L.addMany=function(J){for(const u of J)this._add(u);this._emitChanged()};L.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};L.removeById=function(J){J=
this._featuresById.get(J);if(!J)return null;this._remove(J);this._emitChanged();return J};L.removeManyById=function(J){this._boundsStore.invalidateIndex();for(const u of J)(J=this._featuresById.get(u))&&this._remove(J);this._emitChanged()};L.forEachBounds=function(J,u,C){for(const c of J)(J=this._boundsStore.get(c.objectId))&&u(D.fromRect(C,J))};L.getFeature=function(J){return this._featuresById.get(J)};L.has=function(J){return this._featuresById.has(J)};L.forEach=function(J){this._featuresById.forEach(u=>
J(u))};L.forEachInBounds=function(J,u){this._boundsStore.forEachInBounds(J,C=>{u(this._featuresById.get(C))})};L.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};L.sweep=function(){let J=!1;this._featuresById.forEach((u,C)=>{this._markedIds.has(C)||(J=!0,this._remove(u))});this._markedIds.clear();J&&this._emitChanged()};L._emitChanged=function(){this.events.emit("changed",void 0)};L._add=function(J){if(J){var u=J.objectId;if(null==u)R.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature",
"feature id is missing",{feature:J}));else{var C=this._featuresById.get(u);this._markedIds.add(u);if(C){J.displayId=C.displayId;var c=this._boundsStore.get(u);this._boundsStore.delete(u)}else if(q.isSome(this.onFeatureAdd))this.onFeatureAdd(J);!q.isNone(J.geometry)&&J.geometry.coords&&J.geometry.coords.length?(c=w.getBoundsOptimizedGeometry(q.isSome(c)?c:A.create(),J.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),q.isSome(c)&&this._boundsStore.set(u,c)):this._boundsStore.set(u,null);this._featuresById.set(u,
J)}}};L._remove=function(J){if(q.isSome(this.onFeatureRemove))this.onFeatureRemove(J);this._markedIds.delete(J.objectId);this._boundsStore.delete(J.objectId);this._featuresById.delete(J.objectId);return J};l._createClass(F,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const J=A.create(A.NEGATIVE_INFINITY);this._featuresById.forEach(u=>{if(u=this._boundsStore.get(u.objectId))J[0]=Math.min(u[0],J[0]),J[1]=Math.min(u[1],J[1]),J[2]=Math.max(u[2],J[2]),J[3]=Math.max(u[3],J[3])});return J}},{key:"storeStatistics",get:function(){let J=0;this._featuresById.forEach(u=>{q.isSome(u.geometry)&&u.geometry.coords&&(J+=u.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:J/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return F}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(l,d,T,R,q){let D=function(){function A(){this._emitter=new A.EventEmitter(this)}var w=A.prototype;w.emit=function(v,t){return this._emitter.emit(v,t)};w.on=function(v,t){return this._emitter.on(v,t)};w.once=function(v,t){return this._emitter.once(v,t)};w.hasEventListener=function(v){return this._emitter.hasEventListener(v)};
return A}();(function(A){let w=function(){function t(L=null){this.target=L;this._listenersMap=null}var F=t.prototype;F.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};F.emit=function(L,J){L=this._listenersMap&&this._listenersMap.get(L);if(!L)return!1;const u=this.target||this;[...L].forEach(C=>{C.call(u,J)});return 0<L.length};F.on=function(L,J){if(Array.isArray(L)){var u=L.map(C=>this.on(C,J));return R.handlesGroup(u)}if(-1<L.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);u=this._listenersMap.get(L)||[];u.push(J);this._listenersMap.set(L,u);return{remove:()=>{const C=this._listenersMap&&this._listenersMap.get(L)||[],c=C.indexOf(J);0<=c&&C.splice(c,1)}}};F.once=function(L,J){const u=this.on(L,C=>{u.remove();J.call(null,C)});return u};F.hasEventListener=function(L){L=this._listenersMap&&this._listenersMap.get(L);return null!=L&&0<L.length};return t}();A.EventEmitter=w;A.EventedMixin=t=>{t=function(F){function L(){var u=
F.apply(this,arguments)||this;u._emitter=new w;return u}l._inheritsLoose(L,F);var J=L.prototype;J.destroy=function(){this._emitter.clear()};J.emit=function(u,C){return this._emitter.emit(u,C)};J.on=function(u,C){return this._emitter.on(u,C)};J.once=function(u,C){return this._emitter.once(u,C)};J.hasEventListener=function(u){return this._emitter.hasEventListener(u)};return L}(t);return t=d.__decorate([q.subclass("esri.core.Evented")],t)};let v=function(t){function F(){var J=t.apply(this,arguments)||
this;J._emitter=new D.EventEmitter(l._assertThisInitialized(J));return J}l._inheritsLoose(F,t);var L=F.prototype;L.destroy=function(){this._emitter.clear()};L.emit=function(J,u){return this._emitter.emit(J,u)};L.on=function(J,u){return this._emitter.on(J,u)};L.once=function(J,u){return this._emitter.once(J,u)};L.hasEventListener=function(J){return this._emitter.hasEventListener(J)};return F}(T);v=d.__decorate([q.subclass("esri.core.Evented")],v);A.EventedAccessor=v})(D||(D={}));return D})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(l,d,T,R){function q(c=u){return[c[0],c[1],c[2],c[3],c[4],c[5]]}function D(c,e,p,r,f,y,z=q()){z[0]=c;z[1]=e;z[2]=p;z[3]=r;z[4]=f;z[5]=y;return z}function A(c){return c[0]>=c[3]?0:c[3]-c[0]}function w(c){return c[1]>=c[4]?0:c[4]-c[1]}function v(c){return c[2]>=c[5]?0:c[5]-c[2]}function t(c,e){return Math.max(e[0],c[0])<=Math.min(e[3],c[3])&&Math.max(e[1],c[1])<=Math.min(e[4],c[4])&&Math.max(e[2],c[2])<=Math.min(e[5],c[5])}function F(c,e){c[0]=
e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];return c}function L(c){return 6===c.length}const J=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],u=[0,0,0,0,0,0],C=q();l.NEGATIVE_INFINITY=J;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=u;l.allFinite=function(c){for(let e=0;6>e;e++)if(!isFinite(c[e]))return!1;return!0};l.center=function(c,e=[0,0,0]){e[0]=c[0]+A(c)/2;e[1]=c[1]+w(c)/2;e[2]=c[2]+v(c)/2;return e};l.contains=function(c,e){return e[0]>=
c[0]&&e[1]>=c[1]&&e[2]>=c[2]&&e[3]<=c[3]&&e[4]<=c[4]&&e[5]<=c[5]};l.containsPoint=function(c,e){return e[0]>=c[0]&&e[1]>=c[1]&&e[2]>=c[2]&&e[0]<=c[3]&&e[1]<=c[4]&&e[2]<=c[5]};l.containsPointWithMargin=function(c,e,p){return e[0]>=c[0]-p&&e[1]>=c[1]-p&&e[2]>=c[2]-p&&e[0]<=c[3]+p&&e[1]<=c[4]+p&&e[2]<=c[5]+p};l.create=q;l.depth=w;l.diameter=function(c){const e=A(c),p=v(c);c=w(c);return Math.sqrt(e*e+p*p+c*c)};l.empty=function(c){return c?F(c,J):q(J)};l.equals=function(c,e,p){if(d.isNone(c)||d.isNone(e))return c===
e;if(!L(c)||!L(e))return!1;if(p)for(let r=0;r<c.length;r++){if(!p(c[r],e[r]))return!1}else for(p=0;p<c.length;p++)if(c[p]!==e[p])return!1;return!0};l.expandWithAABB=function(c,e){c[0]=Math.min(c[0],e[0]);c[1]=Math.min(c[1],e[1]);c[2]=Math.min(c[2],e[2]);c[3]=Math.max(c[3],e[3]);c[4]=Math.max(c[4],e[4]);c[5]=Math.max(c[5],e[5])};l.expandWithBuffer=function(c,e,p=0,r=e.length/3){let f=c[0],y=c[1],z=c[2],M=c[3],aa=c[4],U=c[5];for(let ha=0;ha<r;ha++)f=Math.min(f,e[p+3*ha]),y=Math.min(y,e[p+3*ha+1]),z=
Math.min(z,e[p+3*ha+2]),M=Math.max(M,e[p+3*ha]),aa=Math.max(aa,e[p+3*ha+1]),U=Math.max(U,e[p+3*ha+2]);c[0]=f;c[1]=y;c[2]=z;c[3]=M;c[4]=aa;c[5]=U};l.expandWithNestedArray=function(c,e,p){const r=e.length;let f=c[0],y=c[1],z=c[2],M=c[3],aa=c[4],U=c[5];if(p)for(p=0;p<r;p++){var ha=e[p];f=Math.min(f,ha[0]);y=Math.min(y,ha[1]);z=Math.min(z,ha[2]);M=Math.max(M,ha[0]);aa=Math.max(aa,ha[1]);U=Math.max(U,ha[2])}else for(p=0;p<r;p++)ha=e[p],f=Math.min(f,ha[0]),y=Math.min(y,ha[1]),M=Math.max(M,ha[0]),aa=Math.max(aa,
ha[1]);c[0]=f;c[1]=y;c[2]=z;c[3]=M;c[4]=aa;c[5]=U};l.expandWithOffset=function(c,e,p,r){c[0]=Math.min(c[0],c[0]+e);c[3]=Math.max(c[3],c[3]+e);c[1]=Math.min(c[1],c[1]+p);c[4]=Math.max(c[4],c[4]+p);c[2]=Math.min(c[2],c[2]+r);c[5]=Math.max(c[5],c[5]+r)};l.expandWithRect=function(c,e){c[0]=Math.min(c[0],e[0]);c[1]=Math.min(c[1],e[1]);c[3]=Math.max(c[3],e[2]);c[4]=Math.max(c[4],e[3])};l.expandWithVec3=function(c,e){c[0]=Math.min(c[0],e[0]);c[1]=Math.min(c[1],e[1]);c[2]=Math.min(c[2],e[2]);c[3]=Math.max(c[3],
e[0]);c[4]=Math.max(c[4],e[1]);c[5]=Math.max(c[5],e[2])};l.fromExtent=function(c,e=q()){e[0]=c.xmin;e[1]=c.ymin;e[2]=c.zmin;e[3]=c.xmax;e[4]=c.ymax;e[5]=c.zmax;return e};l.fromMinMax=function(c,e,p=q()){p[0]=c[0];p[1]=c[1];p[2]=c[2];p[3]=e[0];p[4]=e[1];p[5]=e[2];return p};l.fromRect=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=e[2];c[4]=e[3];c[5]=Number.POSITIVE_INFINITY;return c};l.fromValues=D;l.getMax=function(c,e){e[0]=c[3];e[1]=c[4];e[2]=c[5];return e};l.getMin=function(c,
e){e[0]=c[0];e[1]=c[1];e[2]=c[2];return e};l.height=v;l.intersects=t;l.intersectsClippingArea=function(c,e){return d.isNone(e)?!0:t(c,e)};l.is=L;l.isPoint=function(c){return 0===A(c)&&0===w(c)&&0===v(c)};l.maximumDimension=function(c){return Math.max(A(c),v(c),w(c))};l.offset=function(c,e,p,r,f=c){f[0]=c[0]+e;f[1]=c[1]+p;f[2]=c[2]+r;f[3]=c[3]+e;f[4]=c[4]+p;f[5]=c[5]+r;return f};l.scale=function(c,e,p=c){const r=c[0]+A(c)/2,f=c[1]+w(c)/2,y=c[2]+v(c)/2;p[0]=r+(c[0]-r)*e;p[1]=f+(c[1]-f)*e;p[2]=y+(c[2]-
y)*e;p[3]=r+(c[3]-r)*e;p[4]=f+(c[4]-f)*e;p[5]=y+(c[5]-y)*e;return p};l.set=F;l.setMax=function(c,e,p=c){p[3]=e[0];p[4]=e[1];p[5]=e[2];p!==c&&(p[0]=c[0],p[1]=c[1],p[2]=c[2]);return c};l.setMin=function(c,e,p=c){p[0]=e[0];p[1]=e[1];p[2]=e[2];p!==c&&(p[3]=c[3],p[4]=c[4],p[5]=c[5]);return p};l.size=function(c,e=[0,0,0]){e[0]=A(c);e[1]=w(c);e[2]=v(c);return e};l.toExtent=function(c,e){return isFinite(c[2])||isFinite(c[5])?new T({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:e}):
new T({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:e})};l.toRect=function(c,e){e||(e=R.create());e[0]=c[0];e[1]=c[1];e[2]=c[3];e[3]=c[4];return e};l.width=A;l.wrap=function(c,e,p,r,f,y){return D(c,e,p,r,f,y,C)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(l,d,T,R,q){function D(u=J){return[u[0],u[1],u[2],u[3]]}function A(u,C){u!==C&&
(u[0]=C[0],u[1]=C[1],u[2]=C[2],u[3]=C[3]);return u}function w(u){return R.isNone(u)||u[0]>=u[2]?0:u[2]-u[0]}function v(u){return u[1]>=u[3]?0:u[3]-u[1]}function t(u,C,c){return C>=u[0]&&c>=u[1]&&C<=u[2]&&c<=u[3]}function F(u){return null!=u&&4===u.length}const L=[Infinity,Infinity,-Infinity,-Infinity],J=[0,0,0,0];l.NEGATIVE_INFINITY=L;l.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];l.UNIT=[0,0,1,1];l.ZERO=J;l.allFinite=function(u){for(let C=0;4>C;C++)if(!isFinite(u[C]))return!1;return!0};
l.area=function(u){return w(u)*v(u)};l.center=function(u,C=[0,0]){C[0]=(u[0]+u[2])/2;C[1]=(u[1]+u[3])/2;return C};l.clone=function(u){return[u[0],u[1],u[2],u[3]]};l.contains=function(u,C){return C[0]>=u[0]&&C[2]<=u[2]&&C[1]>=u[1]&&C[3]<=u[3]};l.containsPoint=function(u,C){return t(u,C[0],C[1])};l.containsPointObject=function(u,C){return t(u,C.x,C.y)};l.containsPointWithMargin=function(u,C,c){return C[0]>=u[0]-c&&C[1]>=u[1]-c&&C[0]<=u[2]+c&&C[1]<=u[3]+c};l.containsXY=t;l.copy=A;l.create=D;l.distance=
function(u,C){const c=(u[1]+u[3])/2,e=Math.max(Math.abs(C[0]-(u[0]+u[2])/2)-w(u)/2,0);u=Math.max(Math.abs(C[1]-c)-v(u)/2,0);return Math.sqrt(e*e+u*u)};l.empty=function(u){return u?A(u,L):D(L)};l.equals=function(u,C){return F(u)&&F(C)?u[0]===C[0]&&u[1]===C[1]&&u[2]===C[2]&&u[3]===C[3]:u===C};l.expand=function(u,C,c){if(R.isNone(C))A(c,u);else if("length"in C)if(F(C))c[0]=Math.min(u[0],C[0]),c[1]=Math.min(u[1],C[1]),c[2]=Math.max(u[2],C[2]),c[3]=Math.max(u[3],C[3]);else{if(2===C.length||3===C.length)c[0]=
Math.min(u[0],C[0]),c[1]=Math.min(u[1],C[1]),c[2]=Math.max(u[2],C[0]),c[3]=Math.max(u[3],C[1])}else switch(C.type){case "extent":c[0]=Math.min(u[0],C.xmin);c[1]=Math.min(u[1],C.ymin);c[2]=Math.max(u[2],C.xmax);c[3]=Math.max(u[3],C.ymax);break;case "point":c[0]=Math.min(u[0],C.x),c[1]=Math.min(u[1],C.y),c[2]=Math.max(u[2],C.x),c[3]=Math.max(u[3],C.y)}};l.expandPointInPlace=function(u,C){C[0]<u[0]&&(u[0]=C[0]);C[0]>u[2]&&(u[2]=C[0]);C[1]<u[1]&&(u[1]=C[1]);C[1]>u[3]&&(u[3]=C[1])};l.expandWithNestedArray=
function(u,C,c=u){const e=C.length;let p=u[0],r=u[1],f=u[2];u=u[3];for(let y=0;y<e;y++){const z=C[y];p=Math.min(p,z[0]);r=Math.min(r,z[1]);f=Math.max(f,z[0]);u=Math.max(u,z[1])}c[0]=p;c[1]=r;c[2]=f;c[3]=u;return c};l.fromExtent=function(u,C=D()){C[0]=u.xmin;C[1]=u.ymin;C[2]=u.xmax;C[3]=u.ymax;return C};l.fromValues=function(u,C,c,e,p=D()){p[0]=u;p[1]=C;p[2]=c;p[3]=e;return p};l.height=v;l.intersection=function(u,C,c){if(R.isNone(C))return A(c,u);const e=C[0],p=C[1],r=C[2];C=C[3];c[0]=T.clamp(u[0],
e,r);c[1]=T.clamp(u[1],p,C);c[2]=T.clamp(u[2],e,r);c[3]=T.clamp(u[3],p,C);return c};l.intersects=function(u,C){return Math.max(C[0],u[0])<=Math.min(C[2],u[2])&&Math.max(C[1],u[1])<=Math.min(C[3],u[3])};l.intersectsSphere=function(u,C){const c=C[3];var e=Math.abs(C[0]-.5*(u[0]+u[2]));const p=.5*(u[2]-u[0]);if(e>c+p)return!1;var r=.5*(u[3]-u[1]);u=Math.abs(C[1]-.5*(u[1]+u[3]));if(u>c+r)return!1;if(e<p||u<r)return!0;e-=p;r=u-r;return e*e+r*r<=c*c};l.is=F;l.isPoint=function(u){return(0===w(u)||!isFinite(u[0]))&&
(0===v(u)||!isFinite(u[1]))};l.offset=function(u,C,c,e=u){e[0]=u[0]+C;e[1]=u[1]+c;e[2]=u[2]+C;e[3]=u[3]+c;return e};l.pad=function(u,C,c=u){c[0]=u[0]-C;c[1]=u[1]-C;c[2]=u[2]+C;c[3]=u[3]+C;return c};l.setMax=function(u,C,c=u){c[2]=C[0];c[3]=C[1];c!==u&&(c[0]=u[0],c[1]=u[1]);return u};l.setMin=function(u,C,c=u){c[0]=C[0];c[1]=C[1];c!==u&&(c[2]=u[2],c[3]=u[3]);return c};l.size=function(u,C){C[0]=u[2]-u[0];C[1]=u[3]-u[1]};l.toExtent=function(u,C){return new q({xmin:u[0],ymin:u[1],xmax:u[2],ymax:u[3],
spatialReference:C})};l.width=w;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(l,d,T){function R(A,w,v){q.minX=w[0];q.minY=w[1];q.maxX=w[2];q.maxY=w[3];A.search(q,v)}const q={minX:0,minY:0,maxX:0,maxY:0};let D=function(){function A(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new T.PooledRBush(9,
d("esri-csp-restrictions")?v=>({minX:v[0],minY:v[1],maxX:v[2],maxY:v[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const v=Array(this._idByBounds.size);let t=0;this._idByBounds.forEach((F,L)=>{v[t++]=L});this._indexInvalid=!1;this._index.clear();this._index.load(v)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(v=>this._idByBounds.has(v))),this._boundsToLoad.length=0)}}var w=A.prototype;w.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=
0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};w.delete=function(v){const t=this._boundsById.get(v);this._boundsById.delete(v);t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))};w.forEachInBounds=function(v,t){this._loadIndex();R(this._index,v,F=>t(this._idByBounds.get(F)))};w.get=function(v){return this._boundsById.get(v)};w.has=function(v){return this._boundsById.has(v)};w.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=
0)};w.set=function(v,t){if(!this._indexInvalid){const F=this._boundsById.get(v);F&&(this._index.remove(F),this._idByBounds.delete(F))}this._boundsById.set(v,t);t&&(this._idByBounds.set(t,v),this._indexInvalid||(this._boundsToLoad.push(t),5E4<this._boundsToLoad.length&&this._loadIndex()))};return A}();l.BoundsStore=D;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(l,d,T,R,q,D){function A(U,ha){w(U,0,U.children.length,ha,U)}function w(U,ha,N,I,X){X||(X=new M([]));X.minX=Infinity;X.minY=Infinity;X.maxX=-Infinity;X.maxY=-Infinity;for(let O=ha,B;O<N;O++)B=U.children[O],v(X,U.leaf?I(B):B);return X}function v(U,ha){U.minX=Math.min(U.minX,ha.minX);U.minY=Math.min(U.minY,ha.minY);U.maxX=Math.max(U.maxX,ha.maxX);U.maxY=Math.max(U.maxY,ha.maxY)}function t(U,ha){return U.minX-ha.minX}function F(U,ha){return U.minY-ha.minY}function L(U){return(U.maxX-U.minX)*
(U.maxY-U.minY)}function J(U){return U.maxX-U.minX+(U.maxY-U.minY)}function u(U,ha){return U.minX<=ha.minX&&U.minY<=ha.minY&&ha.maxX<=U.maxX&&ha.maxY<=U.maxY}function C(U,ha){return ha.minX<=U.maxX&&ha.minY<=U.maxY&&ha.maxX>=U.minX&&ha.maxY>=U.minY}function c(U,ha,N,I,X){for(ha=[ha,N];ha.length;){N=R.assumeNonNull(ha.pop());const O=R.assumeNonNull(ha.pop());if(N-O<=I)continue;const B=O+Math.ceil((N-O)/I/2)*I;D.quickselect(U,B,O,N,X);ha.push(O,B,B,N)}}let e=function(){function U(N=9,I){this.compareMinX=
t;this.compareMinY=F;this.toBBox=function(X){return X};this._maxEntries=Math.max(4,N||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));I&&("function"===typeof I?this.toBBox=I:this._initFormat(I));this.clear()}var ha=U.prototype;ha.destroy=function(){this.clear();p.prune();r.prune();f.prune();y.prune()};ha.all=function(N){this._all(this.data,N)};ha.search=function(N,I){let X=this.data;const O=this.toBBox;if(C(N,X))for(p.clear();X;){for(let B=0,g=X.children.length;B<g;B++){const m=X.children[B],
G=X.leaf?O(m):m;C(N,G)&&(X.leaf?I(m):u(N,G)?this._all(m,I):p.push(m))}X=p.pop()}};ha.collides=function(N){let I=this.data;const X=this.toBBox;if(!C(N,I))return!1;for(p.clear();I;){for(let O=0,B=I.children.length;O<B;O++){const g=I.children[O],m=I.leaf?X(g):g;if(C(N,m)){if(I.leaf||u(N,m))return!0;p.push(g)}}I=p.pop()}return!1};ha.load=function(N){if(!N.length)return this;if(N.length<this._minEntries){for(let I=0,X=N.length;I<X;I++)this.insert(N[I]);return this}N=this._build(N.slice(0,N.length),0,N.length-
1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){const I=this.data;this.data=N;N=I}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this};ha.insert=function(N){N&&this._insert(N,this.data.height-1);return this};ha.clear=function(){this.data=new M([]);return this};ha.remove=function(N){if(!N)return this;let I=this.data,X=null,O=0,B=!1,g;const m=this.toBBox(N);f.clear();for(y.clear();I||0<f.length;){if(!I){var G;
I=R.assumeNonNull(f.pop());X=f.data[f.length-1];O=null!=(G=y.pop())?G:0;B=!0}if(I.leaf&&(g=T.indexOf(I.children,N,I.children.length,I.indexHint),-1!==g)){I.children.splice(g,1);f.push(I);this._condense(f);break}B||I.leaf||!u(I,m)?X?(O++,I=X.children[O],B=!1):I=null:(f.push(I),y.push(O),O=0,X=I,I=I.children[0])}return this};ha.toJSON=function(){return this.data};ha.fromJSON=function(N){this.data=N;return this};ha._all=function(N,I){for(r.clear();N;){var X;if(!0===N.leaf)for(const O of N.children)I(O);
else r.pushArray(N.children);N=null!=(X=r.pop())?X:null}};ha._build=function(N,I,X,O){var B=X-I+1,g=this._maxEntries;if(B<=g)return N=new M(N.slice(I,X+1)),A(N,this.toBBox),N;O||(O=Math.ceil(Math.log(B)/Math.log(g)),g=Math.ceil(B/g**(O-1)));const m=new aa([]);m.height=O;B=Math.ceil(B/g);g=B*Math.ceil(Math.sqrt(g));for(c(N,I,X,g,this.compareMinX);I<=X;I+=g){const G=Math.min(I+g-1,X);c(N,I,G,B,this.compareMinY);for(let W=I;W<=G;W+=B)m.children.push(this._build(N,W,Math.min(W+B-1,G),O-1))}A(m,this.toBBox);
return m};ha._chooseSubtree=function(N,I,X,O){for(;;){O.push(I);if(!0===I.leaf||O.length-1===X)break;let B=Infinity,g=Infinity,m=void 0;for(let G=0,W=I.children.length;G<W;G++){const da=I.children[G],ja=L(da),na=(Math.max(da.maxX,N.maxX)-Math.min(da.minX,N.minX))*(Math.max(da.maxY,N.maxY)-Math.min(da.minY,N.minY))-ja;na<g?(g=na,B=ja<B?ja:B,m=da):na===g&&ja<B&&(B=ja,m=da)}I=m||I.children[0]}return I};ha._insert=function(N,I,X){var O=this.toBBox;X=X?N:O(N);f.clear();O=this._chooseSubtree(X,this.data,
I,f);O.children.push(N);for(v(O,X);0<=I;)if(f.data[I].children.length>this._maxEntries)this._split(f,I),I--;else break;this._adjustParentBBoxes(X,f,I)};ha._split=function(N,I){const X=N.data[I];var O=X.children.length;const B=this._minEntries;this._chooseSplitAxis(X,B,O);(O=this._chooseSplitIndex(X,B,O))?(O=X.children.splice(O,X.children.length-O),O=X.leaf?new M(O):new aa(O),O.height=X.height,A(X,this.toBBox),A(O,this.toBBox),I?N.data[I-1].children.push(O):this._splitRoot(X,O)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};
ha._splitRoot=function(N,I){this.data=new aa([N,I]);this.data.height=N.height+1;A(this.data,this.toBBox)};ha._chooseSplitIndex=function(N,I,X){let O,B,g=void 0;O=B=Infinity;for(let G=I;G<=X-I;G++){var m=w(N,0,G,this.toBBox);const W=w(N,G,X,this.toBBox),da=Math.max(0,Math.min(m.maxX,W.maxX)-Math.max(m.minX,W.minX))*Math.max(0,Math.min(m.maxY,W.maxY)-Math.max(m.minY,W.minY));m=L(m)+L(W);da<O?(O=da,g=G,B=m<B?m:B):da===O&&m<B&&(B=m,g=G)}return g};ha._chooseSplitAxis=function(N,I,X){const O=N.leaf?this.compareMinX:
t,B=N.leaf?this.compareMinY:F,g=this._allDistMargin(N,I,X,O);I=this._allDistMargin(N,I,X,B);g<I&&N.children.sort(O)};ha._allDistMargin=function(N,I,X,O){N.children.sort(O);O=this.toBBox;var B=w(N,0,I,O);const g=w(N,X-I,X,O);let m=J(B)+J(g);for(let G=I;G<X-I;G++){const W=N.children[G];v(B,N.leaf?O(W):W);m+=J(B)}for(X=X-I-1;X>=I;X--)B=N.children[X],v(g,N.leaf?O(B):B),m+=J(g);return m};ha._adjustParentBBoxes=function(N,I,X){for(;0<=X;X--)v(I.data[X],N)};ha._condense=function(N){for(let I=N.length-1;0<=
I;I--){const X=N.data[I];if(0===X.children.length)if(0<I){const O=N.data[I-1],B=O.children;B.splice(T.indexOf(B,X,B.length,O.indexHint),1)}else this.clear();else A(X,this.toBBox)}};ha._initFormat=function(N){const I=["return a"," - b",";"];this.compareMinX=new Function("a","b",I.join(N[0]));this.compareMinY=new Function("a","b",I.join(N[1]));this.toBBox=new Function("a","return {minX: a"+N[0]+", minY: a"+N[1]+", maxX: a"+N[2]+", maxY: a"+N[3]+"};")};return U}();const p=new q,r=new q,f=new q,y=new q({deallocator:void 0});
q=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let z=function(U){function ha(){var N=U.apply(this,arguments)||this;N.height=1;N.indexHint=new T.PositionHint;return N}d._inheritsLoose(ha,U);return ha}(q),M=function(U){function ha(N){var I=U.call(this)||this;I.children=N;I.leaf=!0;return I}d._inheritsLoose(ha,U);return ha}(z),aa=function(U){function ha(N){var I=U.call(this)||this;I.children=N;I.leaf=!1;return I}d._inheritsLoose(ha,U);return ha}(z);l.BBox=q;l.PooledRBush=e;
l.default=e;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(l){var d={exports:{}};(function(T){(function(R){R=R();void 0!==R&&(T.exports=R)})(function(){function R(A,w,v,t,F){for(;t>v;){if(600<t-v){var L=t-v+1,J=w-v+1,u=Math.log(L),C=.5*Math.exp(2*u/3);u=.5*Math.sqrt(u*C*(L-C)/L)*(0>J-L/2?-1:1);R(A,w,Math.max(v,Math.floor(w-J*C/L+u)),Math.min(t,Math.floor(w+(L-J)*C/L+u)),F)}L=A[w];J=v;C=t;q(A,v,w);for(0<F(A[t],L)&&q(A,v,t);J<C;){q(A,
J,C);J++;for(C--;0>F(A[J],L);)J++;for(;0<F(A[C],L);)C--}0===F(A[v],L)?q(A,v,C):(C++,q(A,C,t));C<=w&&(v=C+1);w<=C&&(t=C-1)}}function q(A,w,v){var t=A[w];A[w]=A[v];A[v]=t}function D(A,w){return A<w?-1:A>w?1:0}return function(A,w,v,t,F){R(A,w,v||0,t||A.length-1,F||D)}})})(d);l.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(l,d,T,R){const q={getObjectId(D){return D.objectId},
getAttributes(D){return D.attributes},getAttribute(D,A){return D.attributes[A]},cloneWithGeometry(D,A){return new T.default(A,D.attributes,null,D.objectId)},getGeometry(D){return D.geometry},getCentroid(D,A){D.centroid||(D.centroid=d.getCentroidOptimizedGeometry(new R,D.geometry,A.hasZ,A.hasM));return D.centroid}};l.default=q;l.optimizedFeatureQueryEngineAdapter=q;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(l,
d){function T(q,D,A,w,v,t,F=1){t=v?t?4:3:t?3:2;let L=A,J=A+t,u=0,C=0,c=A=0,e=0;for(let p=0,r=w-1;p<r;p++,L+=t,J+=t){w=D[L];const f=D[L+1],y=D[L+2],z=D[J],M=D[J+1],aa=D[J+2];let U=w*M-z*f;c+=U;u+=(w+z)*U;C+=(f+M)*U;v&&(U=w*aa-z*y,A+=(y+aa)*U,e+=U);w<q[0]&&(q[0]=w);w>q[1]&&(q[1]=w);f<q[2]&&(q[2]=f);f>q[3]&&(q[3]=f);v&&(y<q[4]&&(q[4]=y),y>q[5]&&(q[5]=y))}0<c*F&&(c*=-1);0<e*F&&(e*=-1);if(!c)return null;q=[u,C,.5*c];v&&(q[3]=A,q[4]=.5*e);return q}function R(q,D,A,w,v){v=w?v?4:3:v?3:2;let t=D,F=D+v,L=0,
J=0,u=0,C=0;for(let r=0,f=A-1;r<f;r++,t+=v,F+=v){var c=q[t];const y=q[t+1],z=q[t+2],M=q[F],aa=q[F+1],U=q[F+2];if(w){{var e=M-c;var p=aa-y;const ha=U-z;e=Math.sqrt(e*e+p*p+ha*ha)}}else e=M-c,p=aa-y,e=Math.sqrt(e*e+p*p);e&&(L+=e,w?(c=[c+.5*(M-c),y+.5*(aa-y),z+.5*(U-z)],J+=e*c[0],u+=e*c[1],C+=e*c[2]):(c=[c+.5*(M-c),y+.5*(aa-y)],J+=e*c[0],u+=e*c[1]))}return 0<L?w?[J/L,u/L,C/L]:[J/L,u/L]:0<A?w?[q[D],q[D+1],q[D+2]]:[q[D],q[D+1]]:null}l.getCentroidOptimizedGeometry=function(q,D,A,w,v){if(d.isNone(D)||!D.lengths.length)return null;
const t="upperLeft"===(null==v?void 0:v.originPosition)?-1:1;q.lengths.length&&(q.lengths.length=0);q.coords.length&&(q.coords.length=0);v=q.coords;const F=[],L=A?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:J,coords:u}=D,C=A?w?4:3:w?3:2;let c=0;for(var e of J){const p=T(L,u,c,e,A,w,
t);p&&F.push(p);c+=e*C}F.sort((p,r)=>{let f=t*p[2]-t*r[2];0===f&&A&&(f=p[4]-r[4]);return f});F.length&&(e=6*F[0][2],v[0]=F[0][0]/e,v[1]=F[0][1]/e,A&&(e=6*F[0][4],v[2]=0!==e?F[0][3]/e:0),v[0]<L[0]||v[0]>L[1]||v[1]<L[2]||v[1]>L[3]||A&&(v[2]<L[4]||v[2]>L[5]))&&(v.length=0);if(!v.length)if(D=D.lengths[0]?R(u,0,J[0],A,w):null)v[0]=D[0],v[1]=D[1],A&&2<D.length&&(v[2]=D[2]);else return null;return q};l.lineCentroid=R;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(l,d,T,R,q,D,A){function w(c,e){if(!e)return null;if("x"in e){var p={x:0,y:0};[p.x,p.y]=c(e.x,e.y,L);null!=e.z&&(p.z=e.z);null!=e.m&&(p.m=e.m);return p}if("xmin"in e)return p={xmin:0,ymin:0,xmax:0,ymax:0},[p.xmin,p.ymin]=c(e.xmin,e.ymin,L),[p.xmax,p.ymax]=c(e.xmax,e.ymax,L),e.hasZ&&(p.zmin=e.zmin,p.zmax=e.zmax,p.hasZ=!0),e.hasM&&(p.mmin=e.mmin,p.mmax=e.mmax,p.hasM=!0),p;if("rings"in e)return{rings:v(e.rings,c),hasM:e.hasM,hasZ:e.hasZ};if("paths"in e)return{paths:v(e.paths,c),hasM:e.hasM,hasZ:e.hasZ};
if("points"in e)return{points:t(e.points,c),hasM:e.hasM,hasZ:e.hasZ}}function v(c,e){const p=[];for(const r of c)p.push(t(r,e));return p}function t(c,e){const p=[];for(const r of c)c=e(r[0],r[1],[0,0]),p.push(c),2<r.length&&c.push(r[2]),3<r.length&&c.push(r[3]);return p}function F(){F=d._asyncToGenerator(function*(c,e){e&&(c=Array.isArray(c)?c.map(p=>T.isSome(p.geometry)&&p.geometry.spatialReference):[c],yield R.initializeProjection(c.map(p=>({source:p,dest:e}))))});return F.apply(this,arguments)}
const L=[0,0],J=w.bind(null,A.lngLatToXY),u=w.bind(null,A.xyToLngLat),C=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var e=c.prototype;e.push=function(){var p=d._asyncToGenerator(function*(r,f,y){if(!(r&&r.length&&f&&y)||D.equals(f,y))return r;const z={geometries:r,inSpatialReference:f,outSpatialReference:y,resolve:null};this._jobs.push(z);return new Promise(M=>{z.resolve=M;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(r,
f,y){return p.apply(this,arguments)}}();e._process=function(){this._timer=null;const p=this._jobs.shift();if(p){var {geometries:r,inSpatialReference:f,outSpatialReference:y,resolve:z}=p;A.canProject(f,y)?D.isWebMercator(y)?z(r.map(J)):z(r.map(u)):z(R.projectMany(q.jsonAdapter,r,f,y,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return c}());l.checkProjectionSupport=function(c,e){return F.apply(this,arguments)};l.project=function(c,e,p){if(!c)return c;p||(p=e,e=c.spatialReference);
return D.isValid(e)&&D.isValid(p)&&!D.equals(e,p)?A.canProject(e,p)?D.isWebMercator(p)?J(c):u(c):R.projectMany(q.jsonAdapter,[c],e,p,null)[0]:c};l.projectMany=function(c,e,p){return C.push(c,e,p)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/zscale".split(" "),
function(l,d,T,R,q,D,A,w,v,t,F,L,J,u,C,c,e,p,r,f,y,z,M,aa){function U(){return!!Ta&&u.isLoaded()}function ha(ba){D.isNone(b)&&(b=Promise.all([u.load(),(new Promise((ia,Z)=>l(["../chunks/geometryEngineBase"],ia,Z))).then(ia=>ia.geometryEngineBase),new Promise((ia,Z)=>l(["./geometryAdapters/hydrated"],ia,Z))]));return b.then(([,ia,{hydratedAdapter:Z}])=>{A.throwIfAborted(ba);Va=Z;Ta=ia.default;Ta._enableProjection(u.pe)})}function N(ba,ia,Z=null){return Array.isArray(ba)?0===ba.length?[]:I(Va,ba,ba[0].spatialReference,
ia,Z):I(Va,[ba],ba.spatialReference,ia,Z)[0]}function I(ba,ia,Z,ka,ya=null){if(D.isNone(Z)||D.isNone(ka))return ia;if(O(Z,ka,ya))return ia.map(za=>D.unwrap(g(za,Z,ka)));if(D.isNone(ya)){const za=z.cacheKey(Z,ka);void 0!==$a[za]?ya=$a[za]:(ya=X(Z,ka,null),D.isNone(ya)&&(ya=new z),$a[za]=ya)}if(D.isNone(Ta))throw new Sa;return Ta._project(ba,ia,Z,ka,ya)}function X(ba,ia,Z=null){if(D.isNone(Ta))throw new Sa;if(D.isNone(ba)||D.isNone(ia))return null;ba=Ta._getTransformation(Va,ba,ia,Z,null==Z?void 0:
Z.spatialReference);return null!==ba?z.fromGE(ba):null}function O(ba,ia,Z){return Z?!1:M.equals(ba,ia)?!0:M.isValid(ba)&&M.isValid(ia)&&!!Pa(ba,ia,Cb)}function B(){B=T._asyncToGenerator(function*(ba,ia,Z,ka){if(!U())if(Array.isArray(ba))for(const {source:ya,dest:za,geographicTransformation:Ia}of ba){if(!O(ya,za,Ia))return ha(ka)}else if(!O(ba,ia,Z))return ha(ka)});return B.apply(this,arguments)}function g(ba,ia,Z){return ba?"x"in ba?m(ba,ia,new C,Z,0):"xmin"in ba?ja(ba,ia,new L,Z,0):"rings"in ba?
da(ba,ia,new c,Z,0):"paths"in ba?W(ba,ia,new e,Z,0):"points"in ba?G(ba,ia,new J,Z,0):null:null}function m(ba,ia,Z,ka,ya){Na[0]=ba.x;Na[1]=ba.y;const za=ba.z;Na[2]=void 0!==za?za:ya;if(!la(Na,ia,0,Na,ka,0,1))return null;Z.x=Na[0];Z.y=Na[1];Z.spatialReference=ka;void 0===za?(Z.z=void 0,Z.hasZ=!1):(Z.z=Na[2],Z.hasZ=!0);void 0===ba.m?(Z.m=void 0,Z.hasM=!1):(Z.m=ba.m,Z.hasM=!0);return Z}function G(ba,ia,Z,ka,ya){const {points:za,hasZ:Ia,hasM:Ka}=ba;ba=[];const Xa=za.length,Wa=[];for(var Ua of za)Wa.push(Ua[0],
Ua[1],Ia?Ua[2]:ya);if(!la(Wa,ia,0,Wa,ka,0,Xa))return null;for(ia=0;ia<Xa;++ia){ya=3*ia;Ua=Wa[ya];const bb=Wa[ya+1];Ia&&Ka?ba.push([Ua,bb,Wa[ya+2],za[ia][3]]):Ia?ba.push([Ua,bb,Wa[ya+2]]):Ka?ba.push([Ua,bb,za[ia][2]]):ba.push([Ua,bb])}Z.points=ba;Z.spatialReference=ka;Z.hasZ=Ia;Z.hasM=Ka;return Z}function W(ba,ia,Z,ka,ya){const {paths:za,hasZ:Ia,hasM:Ka}=ba;ba=[];if(!va(za,Ia,Ka,ia,ba,ka,ya))return null;Z.paths=ba;Z.spatialReference=ka;Z.hasZ=Ia;Z.hasM=Ka;return Z}function da(ba,ia,Z,ka,ya){const {rings:za,
hasZ:Ia,hasM:Ka}=ba;ba=[];if(!va(za,Ia,Ka,ia,ba,ka,ya))return null;Z.rings=ba;Z.spatialReference=ka;Z.hasZ=Ia;Z.hasM=Ka;return Z}function ja(ba,ia,Z,ka,ya){const {xmin:za,ymin:Ia,xmax:Ka,ymax:Xa,hasZ:Wa,hasM:Ua}=ba;if(!na(za,Ia,Wa?ba.zmin:ya,ia,Na,ka))return null;Z.xmin=Na[0];Z.ymin=Na[1];Wa&&(Z.zmin=Na[2]);if(!na(Ka,Xa,Wa?ba.zmax:ya,ia,Na,ka))return null;Z.xmax=Na[0];Z.ymax=Na[1];Wa&&(Z.zmax=Na[2]);Ua&&(Z.mmin=ba.mmin,Z.mmax=ba.mmax);Z.spatialReference=ka;return Z}function na(ba,ia,Z,ka,ya,za){Ra[0]=
ba;Ra[1]=ia;Ra[2]=Z;return la(Ra,ka,0,ya,za,0,1)}function ua(ba,ia,Z,ka){if(D.isNone(ia)||D.isNone(ka)||2>ba.length)return!1;2===ba.length&&(Ra[0]=ba[0],Ra[1]=ba[1],Ra[2]=0,ba=Ra);return la(ba,ia,0,Z,ka,0,1)}function ma(ba,ia,Z){if(D.isNone(ia))return!1;ia=Oa(ia,Ab);ia=jb[ia][6];if(D.isNone(ia))return!1;ia(ba,0,Ra,0);Z!==Ra&&(Z[0]=Ra[0],Z[1]=Ra[1],2<Z.length&&(Z[2]=Ra[2]));return!0}function la(ba,ia,Z,ka,ya,za,Ia=1){ia=Pa(ia,ya,Cb);if(D.isNone(ia))return!1;if(ia===pa){if(ba===ka&&Z===za)return!0;
Ia=Z+3*Ia;for(let Ka=Z,Xa=za;Ka<Ia;Ka++,Xa++)ka[Xa]=ba[Ka];return!0}Ia=Z+3*Ia;for(let Ka=Z,Xa=za;Ka<Ia;Ka+=3,Xa+=3)ia(ba,Ka,ka,Xa);return!0}function va(ba,ia,Z,ka,ya,za,Ia=0){const Ka=[];for(const Xa of ba)for(const Wa of Xa)Ka.push(Wa[0],Wa[1],ia?Wa[2]:Ia);if(!la(Ka,ka,0,Ka,za,0,Ka.length/3))return!1;ka=0;ya.length=0;for(const Xa of ba){ba=[];for(const Wa of Xa)ia&&Z?ba.push([Ka[ka++],Ka[ka++],Ka[ka++],Wa[3]]):ia?ba.push([Ka[ka++],Ka[ka++],Ka[ka++]]):(Z?ba.push([Ka[ka++],Ka[ka++],Wa[2]]):ba.push([Ka[ka++],
Ka[ka++]]),ka++);ya.push(ba)}return!0}function Ja(ba,ia,Z,ka){ba=Math.abs(kb*ba)+Math.asin(Z/(ka+ia));return ba>=Math.PI/2?Number.MAX_VALUE:Z/Math.cos(ba)}function Ca(ba,ia,Z){const ka=Math.sin(ba);ba=Math.cos(ba);const ya=Math.sin(ia);ia=Math.cos(ia);Z[0]=-ka;Z[4]=-ya*ba;Z[8]=ia*ba;Z[12]=0;Z[1]=ba;Z[5]=-ya*ka;Z[9]=ia*ka;Z[13]=0;Z[2]=0;Z[6]=ia;Z[10]=ya;Z[14]=0;Z[3]=0;Z[7]=0;Z[11]=0;Z[15]=1;return Z}function Qa(ba,ia,Z){Ca(ba,ia,Z);v.transpose(Z,Z);return Z}function Oa(ba,ia){if(ia.spatialReference===
ba)return ia.spatialReferenceId;ia.spatialReference=ba;"metersPerUnit"in ia&&(ia.metersPerUnit=w.getMetersPerUnitForSR(ba,1));return ba.wkt===p.SphericalECEFSpatialReference.wkt?ia.spatialReferenceId=1:M.isWGS84(ba)?ia.spatialReferenceId=2:M.isWebMercator(ba)?ia.spatialReferenceId=3:M.isPlateCarree(ba)?ia.spatialReferenceId=12:ba.wkt===p.WGS84ECEFSpatialReference.wkt?ia.spatialReferenceId=4:4490===ba.wkid?ia.spatialReferenceId=5:ba.wkt===p.SphericalPCPFMars.wkt?ia.spatialReferenceId=7:ba.wkt===p.SphericalPCPFMoon.wkt?
ia.spatialReferenceId=9:M.isMars(ba)?ia.spatialReferenceId=8:M.isMoon(ba)?ia.spatialReferenceId=10:ia.spatialReferenceId=0}function pa(ba,ia,Z,ka){ba!==Z&&(Z[ka++]=ba[ia++],Z[ka++]=ba[ia++],Z[ka]=ba[ia])}function a(ba,ia,Z,ka){Z[ka++]=sb*(ba[ia++]/f.earth.radius);Z[ka++]=sb*(Math.PI/2-2*Math.atan(Math.exp(-ba[ia++]/f.earth.radius)));Z[ka]=ba[ia]}function k(ba,ia,Z,ka){a(ba,ia,Z,ka);ca(Z,ka,Z,ka)}function V(ba,ia,Z,ka){a(ba,ia,Z,ka);Da(Z,ka,Z,ka)}function n(ba,ia,Z,ka,ya){var za=.4999999*Math.PI;za=
q.clamp(kb*ba[ia+1],-za,za);za=Math.sin(za);Z[ka++]=kb*ba[ia]*ya.radius;Z[ka++]=ya.halfSemiMajorAxis*Math.log((1+za)/(1-za));Z[ka]=ba[ia+2]}function E(ba,ia,Z,ka){n(ba,ia,Z,ka,f.earth)}function Q(ba,ia,Z,ka){Z[ka]=ba[ia]*yb;Z[ka+1]=ba[ia+1]*yb;Z[ka+2]=ba[ia+2]}function S(ba,ia,Z,ka){Z[ka]=ba[ia]*tb;Z[ka+1]=ba[ia+1]*tb;Z[ka+2]=ba[ia+2]}function fa(ba,ia,Z,ka){a(ba,ia,Z,ka);Q(Z,ka,Z,ka)}function ea(ba,ia,Z,ka,ya){ya+=ba[ia+2];const za=kb*ba[ia+1];ba=kb*ba[ia];ia=Math.cos(za);Z[ka++]=Math.cos(ba)*ia*
ya;Z[ka++]=Math.sin(ba)*ia*ya;Z[ka]=Math.sin(za)*ya}function K(ba,ia,Z,ka){ea(ba,ia,Z,ka,f.moon.radius)}function P(ba,ia,Z,ka){ea(ba,ia,Z,ka,f.mars.radius)}function ca(ba,ia,Z,ka){ea(ba,ia,Z,ka,f.earth.radius)}function oa(ba,ia,Z,ka,ya){var za=ba[ia];const Ia=ba[ia+1];ia=ba[ia+2];ba=Math.sqrt(za*za+Ia*Ia+ia*ia);ia=q.asinClamped(ia/(0===ba?1:ba));za=Math.atan2(Ia,za);Z[ka++]=sb*za;Z[ka++]=sb*ia;Z[ka]=ba-ya}function qa(ba,ia,Z,ka){oa(ba,ia,Z,ka,f.moon.radius)}function wa(ba,ia,Z,ka){oa(ba,ia,Z,ka,f.mars.radius)}
function xa(ba,ia,Z,ka){oa(ba,ia,Z,ka,f.earth.radius)}function Aa(ba,ia,Z,ka){xa(ba,ia,Z,ka);E(Z,ka,Z,ka)}function Ha(ba,ia,Z,ka){xa(ba,ia,Z,ka);Da(Z,ka,Z,ka)}function Da(ba,ia,Z,ka){{var ya=f.earth;const Ia=kb*ba[ia];var za=kb*ba[ia+1];ba=ba[ia+2];ia=Math.sin(za);za=Math.cos(za);const Ka=ya.radius/Math.sqrt(1-ya.eccentricitySquared*ia*ia);Z[ka++]=(Ka+ba)*za*Math.cos(Ia);Z[ka++]=(Ka+ba)*za*Math.sin(Ia);Z[ka++]=(Ka*(1-ya.eccentricitySquared)+ba)*ia}}function Ea(ba,ia,Z,ka){var ya=y.earthEllipsoidConstants,
za=ba[ia],Ia=ba[ia+1];ba=ba[ia+2];let Ka;ia=Math.abs(ba);var Xa=za*za+Ia*Ia;var Wa=Math.sqrt(Xa);var Ua=Xa+ba*ba;var bb=Math.sqrt(Ua);za=Math.atan2(Ia,za);var lb=ba*ba/Ua;Ua=Xa/Ua;Ia=ya.a2/bb;Xa=ya.a3-ya.a4/bb;.3<Ua?(lb=ia/bb*(1+Ua*(ya.a1+Ia+lb*Xa)/bb),bb=Math.asin(lb),Ia=lb*lb,Ua=Math.sqrt(1-Ia)):(Ua=Wa/bb*(1-lb*(ya.a5-Ia-Ua*Xa)/bb),bb=Math.acos(Ua),Ia=1-Ua*Ua,lb=Math.sqrt(Ia));Ka=1-f.earth.eccentricitySquared*Ia;Ia=f.earth.radius/Math.sqrt(Ka);ya=ya.a6*Ia;Ia=Wa-Ia*Ua;Xa=ia-ya*lb;ia=Ua*Ia+lb*Xa;
Wa=Ua*Xa-lb*Ia;ya=Wa/(ya/Ka+ia);bb+=ya;0>ba&&(bb=-bb);Z[ka++]=sb*za;Z[ka++]=sb*bb;Z[ka]=ia+Wa*ya/2}function Fa(ba,ia,Z,ka){Ea(ba,ia,Z,ka);ca(Z,ka,Z,ka)}function Ga(ba,ia,Z,ka){Ea(ba,ia,Z,ka);E(Z,ka,Z,ka)}function Pa(ba,ia,Z=ab()){return D.isNone(ba)||D.isNone(ia)?null:sa(ba,ia,Z).projector}function sa(ba,ia,Z){if(D.isNone(ba)||D.isNone(ia)||Z.source.spatialReference===ba&&Z.dest.spatialReference===ia)return Z;const ka=Oa(ba,Z.source),ya=Oa(ia,Z.dest);0===ka&&0===ya?M.equals(ba,ia)?Z.projector=pa:
Z.projector=null:Z.projector=jb[ka][ya];return Z}function ab(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:pa}}let Ta=null,Va=null,b=null,$a={},Sa=function(ba){function ia(){return ba.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}T._inheritsLoose(ia,ba);return ia}(R);const yb=f.earth.radius*Math.PI/180,tb=180/(f.earth.radius*Math.PI),jb=
{[2]:{[5]:null,[8]:null,[10]:null,[11]:pa,[6]:pa,[1]:ca,[7]:null,[9]:null,[0]:null,[3]:E,[12]:Q,[2]:pa,[4]:Da},[5]:{[5]:pa,[8]:null,[10]:null,[11]:pa,[6]:pa,[1]:ca,[7]:null,[9]:null,[0]:null,[3]:null,[12]:Q,[2]:null,[4]:Da},[8]:{[5]:null,[8]:pa,[10]:null,[11]:pa,[6]:null,[1]:null,[7]:P,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:pa,[11]:pa,[6]:null,[1]:null,[7]:null,[9]:K,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:a,
[6]:a,[1]:k,[7]:null,[9]:null,[0]:null,[3]:pa,[12]:fa,[2]:a,[4]:V},[4]:{[5]:Ea,[8]:null,[10]:null,[11]:Ea,[6]:Ea,[1]:Fa,[7]:null,[9]:null,[0]:null,[3]:Ga,[12]:function(ba,ia,Z,ka){Ea(ba,ia,Z,ka);Q(Z,ka,Z,ka)},[2]:Ea,[4]:pa},[1]:{[5]:xa,[8]:null,[10]:null,[11]:xa,[6]:xa,[1]:pa,[7]:null,[9]:null,[0]:null,[3]:Aa,[12]:function(ba,ia,Z,ka){xa(ba,ia,Z,ka);Q(Z,ka,Z,ka)},[2]:xa,[4]:Ha},[7]:{[5]:null,[8]:wa,[10]:null,[11]:wa,[6]:null,[1]:null,[7]:pa,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},
[9]:{[5]:null,[8]:null,[10]:qa,[11]:qa,[6]:null,[1]:null,[7]:null,[9]:pa,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:pa,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:pa,[8]:pa,[10]:pa,[11]:pa,[6]:pa,[1]:ca,[7]:P,[9]:K,[0]:null,[3]:E,[12]:Q,[2]:pa,[4]:Da},[6]:{[5]:null,[8]:null,[10]:null,[11]:pa,[6]:pa,[1]:ca,[7]:null,[9]:null,[0]:null,[3]:null,[12]:Q,[2]:pa,[4]:Da},[12]:{[5]:S,[8]:null,[10]:null,[11]:S,[6]:S,[1]:function(ba,
ia,Z,ka){S(ba,ia,Z,ka);ca(Z,ka,Z,ka)},[7]:null,[9]:null,[0]:null,[3]:function(ba,ia,Z,ka){S(ba,ia,Z,ka);E(Z,ka,Z,ka)},[12]:pa,[2]:S,[4]:function(ba,ia,Z,ka){S(ba,ia,Z,ka);Da(Z,ka,Z,ka)}}},Ab={spatialReference:null,spatialReferenceId:0},Zb={spatialReference:null,spatialReferenceId:0},Cb=ab(),$b=ab(),kb=q.deg2rad(1),sb=q.rad2deg(1),Ra=F.create(),eb=F.create(),ob=F.create(),Na=F.create(),Db=F.create();d.canProjectToWGS84ComparableLonLat=function(ba){if(D.isNone(ba))return!1;ba=Oa(ba,Ab);return!!jb[ba][6]};
d.canProjectWithoutEngine=O;d.computeENUToSphericalPCPFLocalRotation=Ca;d.computeSphericalPCPFToENULocalRotation=Qa;d.computeTranslationToOriginAndRotation=function(ba,ia,Z,ka){if(D.isNone(ba)||D.isNone(ka))return!1;var ya=Oa(ba,Ab),za=Oa(ka,Zb);if(ya===za&&1!==za&&7!==za&&9!==za&&(0!==ya||M.equals(ba,ka)))return v.identity(Z),v.translate(Z,Z,ia),!0;if(1===za||7===za||9===za){ya=jb[ya][11];za=jb[11][za];if(D.isNone(ya)||D.isNone(za))return!1;ya(ia,0,eb,0);za(eb,0,ob,0);Ca(kb*eb[0],kb*eb[1],Z);Z[12]=
ob[0];Z[13]=ob[1];Z[14]=ob[2];return!0}if(!(3!==za&&12!==za||2!==ya&&1!==ya&&3!==ya)){ba=jb[ya][11];za=jb[11][za];if(D.isNone(ba)||D.isNone(za))return!1;ba(ia,0,eb,0);za(eb,0,ob,0);1===ya?Qa(kb*eb[0],kb*eb[1],Z):v.identity(Z);Z[12]=ob[0];Z[13]=ob[1];Z[14]=ob[2];return!0}return!1};d.getProjectorName=function(ba,ia){switch(Pa(ba,ia,Cb)){case pa:return"copy3";case ca:return"wgs84ToSphericalECEF";case E:return"wgs84ToWebMercator";case Q:return"wgs84ToPlateCarree";case Da:return"wgs84ToWGS84ECEF";case a:return"webMercatorToWGS84";
case k:return"webMercatorToSphericalECEF";case V:return"webMercatorToWGS84ECEF";case fa:return"webMercatorToPlateCarree";case Ea:return"wgs84ECEFToWGS84";case Fa:return"wgs84ECEFToSphericalECEF";case Ga:return"wgs84ECEFToWebMercator";case xa:return"sphericalECEFToWGS84";case Aa:return"sphericalECEFToWebMercator";case wa:return"sphericalMarsPCPFToMars2000";case qa:return"sphericalMoonPCPFToMoon2000";case Ha:return"sphericalECEFToWGS84ECEF";case P:return"mars2000ToSphericalPCPF";case K:return"moon2000ToSphericalPCPF";
default:return null}};d.getTransformation=X;d.getTransformations=function(ba,ia,Z=null){if(D.isNone(Ta))throw new Sa;ba=Ta._getTransformationBySuitability(Va,ba,ia,Z,null==Z?void 0:Z.spatialReference);if(null!==ba){ia=[];for(const ka of ba)ia.push(z.fromGE(ka));return ia}return[]};d.initializeProjection=function(ba,ia,Z,ka){return B.apply(this,arguments)};d.isLoaded=U;d.load=ha;d.localLinearScaleFactors=function(ba,ia,Z,ka){if(D.isNone(ia)||D.isNone(ka))return!1;const ya=Oa(ia,Ab);var za=Oa(ka,Zb);
if(ya===za&&0!==ya||M.equals(ia,ka))return Z[0]=1,Z[1]=1,Z[2]=1,!0;if(1===ya){ia=t.length(ba);ba=ia/Math.sqrt(ba[0]*ba[0]+ba[1]*ba[1]);ia/=f.earth.radius;if(3===za)return Z[0]=ba*ia,Z[1]=ba*ia,Z[2]=1,!0;if(2===za||5===za)return za=180/(f.earth.radius*Math.PI),Z[0]=za*ba*ia,Z[1]=za*ia,Z[2]=1,!0}else if(12===ya&&(2===za||5===za))return Z[0]=tb,Z[1]=tb,Z[2]=1,!0;return!1};d.lonLatToSphericalPCPF=function(ba,ia,Z,ka,ya=0){ka+=ya;ya=Math.cos(Z);ba[0]=Math.cos(ia)*ya*ka;ba[1]=Math.sin(ia)*ya*ka;ba[2]=Math.sin(Z)*
ka};d.lonLatToWebMercatorComparable=n;d.project=N;d.projectBoundingRect=function(ba,ia,Z,ka){if(null==ba)return!1;if(M.equals(ia,ka))return r.copy(Z,ba),!0;Ra[0]=ba[0];Ra[1]=ba[1];Ra[2]=0;if(!la(Ra,ia,0,Ra,ka,0,1))return!1;Z[0]=Ra[0];Z[1]=Ra[1];Ra[0]=ba[2];Ra[1]=ba[3];Ra[2]=0;if(!la(Ra,ia,0,Ra,ka,0,1))return!1;Z[2]=Ra[0];Z[3]=Ra[1];return!0};d.projectBoundingSphere=function(ba,ia,Z,ka){if(D.isNone(ia)||D.isNone(ka))return!1;ia=sa(ia,ka,$b);if(ia.projector===pa)return Z[0]=ba[0],Z[1]=ba[1],Z[2]=ba[2],
Z[3]=ba[3],!0;if(D.isNone(ia.projector))return!1;const {source:ya,dest:za}=ia;if(3===za.spatialReferenceId){ia=jb[ya.spatialReferenceId][2];if(D.isNone(ia))return!1;ia(ba,0,eb,0);E(eb,0,Z,0);Z[3]=Ja(eb[1],ba[2],ba[3],f.earth.radius);return!0}if(2!==ya.spatialReferenceId&&5!==ya.spatialReferenceId||12!==za.spatialReferenceId)ia.projector(ba,0,Z,0),Z[3]=ba[3]*ya.metersPerUnit/za.metersPerUnit;else{ka=jb[1][12];let Ia=ba[3];D.isSome(jb[ya.spatialReferenceId][1])&&D.isSome(ka)&&(Ia=Ja(ba[1],ba[2],ba[3],
f.earth.radius));ia.projector(ba,0,Z,0);Z[3]=Ia}return!0};d.projectBuffer=la;d.projectDirection=function(ba,ia,Z,ka,ya){t.copy(Na,ba);t.add(Db,ba,ia);ua(Na,Z,Na,ya);ua(Db,Z,Db,ya);t.subtract(ka,Db,Na);t.normalize(ka,ka)};d.projectExtent=function(ba,ia,Z=ia.spatialReference,ka=0){return D.isSome(Z)&&D.isSome(ja(ba,ba.spatialReference,ia,Z,ka))};d.projectMany=I;d.projectMultipoint=function(ba,ia,Z=ia.spatialReference,ka=0){return D.isNone(Z)?!1:D.isSome(G(ba,ba.spatialReference,ia,Z,ka))};d.projectPoint=
function(ba,ia,Z=ia.spatialReference,ka=0){return D.isNone(Z)?!1:D.isSome(m(ba,ba.spatialReference,ia,Z,ka))};d.projectPointToVector=function(ba,ia,Z,ka=0){Na[0]=ba.x;Na[1]=ba.y;const ya=ba.z;Na[2]=void 0!==ya?ya:ka;return la(Na,ba.spatialReference,0,ia,Z,0,1)};d.projectPointToWGS84ComparableLonLat=function(ba,ia){Na[0]=ba.x;Na[1]=ba.y;const Z=ba.z;Na[2]=void 0!==Z?Z:0;return ma(Na,ba.spatialReference,ia)};d.projectPolygon=function(ba,ia,Z=ia.spatialReference,ka=0){return D.isSome(Z)&&D.isSome(da(ba,
ba.spatialReference,ia,Z,ka))};d.projectPolyline=function(ba,ia,Z=ia.spatialReference,ka=0){return D.isSome(Z)&&D.isSome(W(ba,ba.spatialReference,ia,Z,ka))};d.projectVectorToDehydratedPoint=function(ba,ia,Z){return la(ba,ia,0,Na,Z.spatialReference,0,1)?(Z.x=Na[0],Z.y=Na[1],Z.z=Na[2],Z):null};d.projectVectorToPoint=function(ba,ia,Z){if(D.isNone(ia)||D.isNone(Z))return null;const ka=new C({spatialReference:Z});return la(ba,ia,0,Na,Z,0,1)?(ka.x=Na[0],ka.y=Na[1],ka.z=Na[2],ka):null};d.projectVectorToVector=
ua;d.projectVectorToWGS84ComparableLonLat=function(ba,ia,Z){return ma(ba,ia,Z)};d.projectWithoutEngine=g;d.projectXYZToVector=na;d.sphericalPCPFtoLonLatElevation=oa;d.tryProjectWithZConversion=function(ba,ia){try{const Z=N(ba,ia);if(null==Z)return null;"xmin"in ba&&"xmin"in Z&&(Z.zmin=ba.zmin,Z.zmax=ba.zmax);const ka=aa.getGeometryZScaler(Z.type,ba.spatialReference,ia);D.isSome(ka)&&ka(Z);return Z}catch(Z){if(!(Z instanceof Sa))throw Z;return null}};d.unload=function(){b=Va=Ta=null;$a={}};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(l,d,T,R,q,D,A,w,v){function t(m){if(m=O[m])return m;throw Error("unknown measure");}function F(m){return X[m].baseUnit}function L(m,G=null){G=G||t(m);return X[G].baseUnit===m}function J(m,G,W){if(G===W)return m;
const da=t(G);if(da!==t(W))throw Error("incompatible units");m=L(G,da)?m:m*X[da].units[G].inBaseUnits;return L(W,da)?m:m/X[da].units[W].inBaseUnits}function u(m,G){return 3E3>J(m,G,"meters")?"meters":"kilometers"}function C(m,G){return 1E5>J(m,G,"meters")?"meters":"kilometers"}function c(m,G){return 1E3>J(m,G,"feet")?"feet":"miles"}function e(m,G){return 1E5>J(m,G,"feet")?"feet":"miles"}function p(m){return I.fromJSON(m.toLowerCase())||null}function r(m,G=A.earth.metersPerDegree){return f(m,!0)||
G}function f(m,G=!1){let W,da,ja=null;null!=m&&("object"===typeof m?(W=m.wkid,da=m.wkt):"number"===typeof m?W=m:"string"===typeof m&&(da=m));if(W){if(w.isWKIDFromMars(W))return A.mars.metersPerDegree;if(w.isWKIDFromMoon(W))return A.moon.metersPerDegree;ja=U.values[U[W]];!ja&&G&&N.has(W)&&(ja=M)}else da&&(/^PROJCS/i.test(da)?ja=y(aa.exec(da),ja):/^GEOCCS/i.test(da)&&(ja=y(ha.exec(da),ja)));return ja}function y(m,G){return m&&m[1]?parseFloat(m[1].split(",")[1]):G}function z(m){var G=null;if(null!=m)if("object"===
typeof m){var W=m.wkid;var da=m.wkt}else"number"===typeof m?W=m:"string"===typeof m&&(da=m);if(W)G=U.units[U[W]];else if(da&&(m=/^PROJCS/i.test(da)?aa:/^GEOCCS/i.test(da)?ha:null)&&(da=m.exec(da))&&da[1]&&(da=da[1],G=(G=/[\\"\\']{1}([^\\"\\']+)/.exec(da))&&G[1],!G||-1===U.units.indexOf(G)))for(da=parseFloat(da.split(",")[1]),G=null,m=U.values,W=0;W<m.length;++W)if(1E-7>Math.abs(da-m[W])){G=U.units[W];break}return R.isSome(G)?p(G):null}const M=A.earth.radius*Math.PI/200,aa=/UNIT\[([^\]]+)\]\]$/i,U=
v,ha=/UNIT\[([^\]]+)\]/i,N=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),I=T.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};v={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(m=>m*m)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const X={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:v},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},O=function(){const m={};for(const G in X)for(const W in X[G].units)m[W]=
G;return m}(),B={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},g={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};d=T.strict()(B);v=T.strict()(g);T=T.strict()({...B,...g});l.areaUnitsJSONMap=d;l.baseUnitForMeasure=F;l.baseUnitForUnit=function(m){return F(t(m))};l.convertUnit=J;l.getDefaultUnitSystem=function(m){if(!m)return null;switch(z(m)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};l.getMetersPerUnit=f;l.getMetersPerUnitForSR=r;l.getMetersPerVerticalUnitForSR=function(m){if(m&&"object"===typeof m&&!w.isEarth(m))return 1;m=r(m);return 1E5<m?1:m};l.getUnitString=z;l.getVerticalUnitStringForSR=function(m){const G=r(m),W=m instanceof D?q.getReferenceEllipsoid(m).metersPerDegree:1E5;return G>=W?"meters":z(m)};l.inchesPerMeter=39.37;l.isBaseUnit=L;l.isMeasurementSystem=function(m){return"imperial"===
m||"metric"===m};l.lengthToDegrees=function(m,G,W){return J(m,G,"meters")/(W*Math.PI/180)};l.lengthUnitsJSONMap=v;l.measureForUnit=t;l.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");l.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");l.preferredImperialAreaUnit=function(m,G){return 1E6>J(m,G,"square-feet")?"square-feet":
"square-miles"};l.preferredImperialLengthUnit=c;l.preferredImperialVerticalLengthUnit=e;l.preferredLengthUnit=function(m,G,W){switch(W){case "metric":return u(m,G);case "imperial":return c(m,G);default:return W}};l.preferredMetricAreaUnit=function(m,G){return 3E6>J(m,G,"square-meters")?"square-meters":"square-kilometers"};l.preferredMetricLengthUnit=u;l.preferredMetricVerticalLengthUnit=C;l.preferredVerticalLengthUnit=function(m,G,W){switch(W){case "metric":return C(m,G);case "imperial":return e(m,
G);default:return W}};l.unitFromRESTJSON=p;l.unitToRESTJSON=function(m){return I.toJSON(m)||null};l.unitsJSONMap=T;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(l,d,T,R){function q(t){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${t.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const D=q(T.earth),A=q(T.mars),w=q(T.moon),v=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${T.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});l.SphericalECEFSpatialReference=D;l.SphericalPCPFMars=
A;l.SphericalPCPFMoon=w;l.WGS84ECEFSpatialReference=v;l.createSphericalPCPF=q;l.getReferenceEllipsoid=function(t){return t&&(R.isMars(t)||t===A)?T.mars:t&&(R.isMoon(t)||t===w)?T.moon:T.earth};l.getReferenceEllipsoidFromWKID=function(t){return R.isWKIDFromMars(t)?T.mars:R.isWKIDFromMoon(t)?T.moon:T.earth};l.getSphericalPCPF=function(t){return t&&(R.isMars(t)||t===A)?A:t&&(R.isMoon(t)||t===w)?w:D};l.getSphericalPCPFForEllipsoid=function(t){return t&&t===T.mars?A:t&&t===T.moon?w:D};Object.defineProperty(l,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,d,T){function R(a,k){a[0]=k[0];a[1]=k[1];a[2]=k[2];a[3]=k[3];a[4]=k[4];a[5]=k[5];a[6]=k[6];a[7]=k[7];a[8]=k[8];a[9]=k[9];a[10]=k[10];a[11]=k[11];a[12]=k[12];a[13]=k[13];a[14]=k[14];a[15]=k[15];return a}function q(a,k,V,n,E,Q,S,fa,ea,K,P,ca,oa,qa,wa,xa,Aa){a[0]=k;a[1]=V;a[2]=n;a[3]=E;a[4]=Q;a[5]=S;a[6]=fa;a[7]=ea;a[8]=K;a[9]=P;a[10]=ca;a[11]=oa;a[12]=qa;a[13]=wa;a[14]=xa;a[15]=Aa;return a}
function D(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function A(a,k){if(a===k){const V=k[1],n=k[2],E=k[3],Q=k[6],S=k[7],fa=k[11];a[1]=k[4];a[2]=k[8];a[3]=k[12];a[4]=V;a[6]=k[9];a[7]=k[13];a[8]=n;a[9]=Q;a[11]=k[14];a[12]=E;a[13]=S;a[14]=fa}else a[0]=k[0],a[1]=k[4],a[2]=k[8],a[3]=k[12],a[4]=k[1],a[5]=k[5],a[6]=k[9],a[7]=k[13],a[8]=k[2],a[9]=k[6],a[10]=k[10],a[11]=k[14],a[12]=k[3],a[13]=k[7],a[14]=k[11],a[15]=k[15];
return a}function w(a,k){const V=k[0],n=k[1],E=k[2],Q=k[3],S=k[4],fa=k[5],ea=k[6],K=k[7],P=k[8],ca=k[9],oa=k[10],qa=k[11],wa=k[12],xa=k[13],Aa=k[14];k=k[15];const Ha=V*fa-n*S,Da=V*ea-E*S,Ea=V*K-Q*S,Fa=n*ea-E*fa,Ga=n*K-Q*fa,Pa=E*K-Q*ea,sa=P*xa-ca*wa,ab=P*Aa-oa*wa,Ta=P*k-qa*wa,Va=ca*Aa-oa*xa,b=ca*k-qa*xa,$a=oa*k-qa*Aa;let Sa=Ha*$a-Da*b+Ea*Va+Fa*Ta-Ga*ab+Pa*sa;if(!Sa)return null;Sa=1/Sa;a[0]=(fa*$a-ea*b+K*Va)*Sa;a[1]=(E*b-n*$a-Q*Va)*Sa;a[2]=(xa*Pa-Aa*Ga+k*Fa)*Sa;a[3]=(oa*Ga-ca*Pa-qa*Fa)*Sa;a[4]=(ea*
Ta-S*$a-K*ab)*Sa;a[5]=(V*$a-E*Ta+Q*ab)*Sa;a[6]=(Aa*Ea-wa*Pa-k*Da)*Sa;a[7]=(P*Pa-oa*Ea+qa*Da)*Sa;a[8]=(S*b-fa*Ta+K*sa)*Sa;a[9]=(n*Ta-V*b-Q*sa)*Sa;a[10]=(wa*Ga-xa*Ea+k*Ha)*Sa;a[11]=(ca*Ea-P*Ga-qa*Ha)*Sa;a[12]=(fa*ab-S*Va-ea*sa)*Sa;a[13]=(V*Va-n*ab+E*sa)*Sa;a[14]=(xa*Da-wa*Fa-Aa*Ha)*Sa;a[15]=(P*Fa-ca*Da+oa*Ha)*Sa;return a}function v(a,k){const V=k[0],n=k[1],E=k[2],Q=k[3],S=k[4],fa=k[5],ea=k[6],K=k[7],P=k[8],ca=k[9],oa=k[10],qa=k[11],wa=k[12],xa=k[13],Aa=k[14];k=k[15];a[0]=fa*(oa*k-qa*Aa)-ca*(ea*k-K*
Aa)+xa*(ea*qa-K*oa);a[1]=-(n*(oa*k-qa*Aa)-ca*(E*k-Q*Aa)+xa*(E*qa-Q*oa));a[2]=n*(ea*k-K*Aa)-fa*(E*k-Q*Aa)+xa*(E*K-Q*ea);a[3]=-(n*(ea*qa-K*oa)-fa*(E*qa-Q*oa)+ca*(E*K-Q*ea));a[4]=-(S*(oa*k-qa*Aa)-P*(ea*k-K*Aa)+wa*(ea*qa-K*oa));a[5]=V*(oa*k-qa*Aa)-P*(E*k-Q*Aa)+wa*(E*qa-Q*oa);a[6]=-(V*(ea*k-K*Aa)-S*(E*k-Q*Aa)+wa*(E*K-Q*ea));a[7]=V*(ea*qa-K*oa)-S*(E*qa-Q*oa)+P*(E*K-Q*ea);a[8]=S*(ca*k-qa*xa)-P*(fa*k-K*xa)+wa*(fa*qa-K*ca);a[9]=-(V*(ca*k-qa*xa)-P*(n*k-Q*xa)+wa*(n*qa-Q*ca));a[10]=V*(fa*k-K*xa)-S*(n*k-Q*xa)+
wa*(n*K-Q*fa);a[11]=-(V*(fa*qa-K*ca)-S*(n*qa-Q*ca)+P*(n*K-Q*fa));a[12]=-(S*(ca*Aa-oa*xa)-P*(fa*Aa-ea*xa)+wa*(fa*oa-ea*ca));a[13]=V*(ca*Aa-oa*xa)-P*(n*Aa-E*xa)+wa*(n*oa-E*ca);a[14]=-(V*(fa*Aa-ea*xa)-S*(n*Aa-E*xa)+wa*(n*ea-E*fa));a[15]=V*(fa*oa-ea*ca)-S*(n*oa-E*ca)+P*(n*ea-E*fa);return a}function t(a){const k=a[0],V=a[1],n=a[2],E=a[3],Q=a[4],S=a[5],fa=a[6],ea=a[7],K=a[8],P=a[9],ca=a[10],oa=a[11],qa=a[12],wa=a[13],xa=a[14];a=a[15];return(k*S-V*Q)*(ca*a-oa*xa)-(k*fa-n*Q)*(P*a-oa*wa)+(k*ea-E*Q)*(P*xa-
ca*wa)+(V*fa-n*S)*(K*a-oa*qa)-(V*ea-E*S)*(K*xa-ca*qa)+(n*ea-E*fa)*(K*wa-P*qa)}function F(a,k,V){const n=k[0],E=k[1],Q=k[2],S=k[3],fa=k[4],ea=k[5],K=k[6],P=k[7],ca=k[8],oa=k[9],qa=k[10],wa=k[11],xa=k[12],Aa=k[13],Ha=k[14];k=k[15];let Da=V[0],Ea=V[1],Fa=V[2],Ga=V[3];a[0]=Da*n+Ea*fa+Fa*ca+Ga*xa;a[1]=Da*E+Ea*ea+Fa*oa+Ga*Aa;a[2]=Da*Q+Ea*K+Fa*qa+Ga*Ha;a[3]=Da*S+Ea*P+Fa*wa+Ga*k;Da=V[4];Ea=V[5];Fa=V[6];Ga=V[7];a[4]=Da*n+Ea*fa+Fa*ca+Ga*xa;a[5]=Da*E+Ea*ea+Fa*oa+Ga*Aa;a[6]=Da*Q+Ea*K+Fa*qa+Ga*Ha;a[7]=Da*S+Ea*
P+Fa*wa+Ga*k;Da=V[8];Ea=V[9];Fa=V[10];Ga=V[11];a[8]=Da*n+Ea*fa+Fa*ca+Ga*xa;a[9]=Da*E+Ea*ea+Fa*oa+Ga*Aa;a[10]=Da*Q+Ea*K+Fa*qa+Ga*Ha;a[11]=Da*S+Ea*P+Fa*wa+Ga*k;Da=V[12];Ea=V[13];Fa=V[14];Ga=V[15];a[12]=Da*n+Ea*fa+Fa*ca+Ga*xa;a[13]=Da*E+Ea*ea+Fa*oa+Ga*Aa;a[14]=Da*Q+Ea*K+Fa*qa+Ga*Ha;a[15]=Da*S+Ea*P+Fa*wa+Ga*k;return a}function L(a,k,V){const n=V[0],E=V[1];V=V[2];let Q=void 0,S=void 0,fa=void 0,ea=void 0,K=void 0,P=void 0,ca=void 0,oa=void 0,qa=void 0,wa=void 0,xa=void 0,Aa=void 0;k===a?(a[12]=k[0]*n+
k[4]*E+k[8]*V+k[12],a[13]=k[1]*n+k[5]*E+k[9]*V+k[13],a[14]=k[2]*n+k[6]*E+k[10]*V+k[14],a[15]=k[3]*n+k[7]*E+k[11]*V+k[15]):(Q=k[0],S=k[1],fa=k[2],ea=k[3],K=k[4],P=k[5],ca=k[6],oa=k[7],qa=k[8],wa=k[9],xa=k[10],Aa=k[11],a[0]=Q,a[1]=S,a[2]=fa,a[3]=ea,a[4]=K,a[5]=P,a[6]=ca,a[7]=oa,a[8]=qa,a[9]=wa,a[10]=xa,a[11]=Aa,a[12]=Q*n+K*E+qa*V+k[12],a[13]=S*n+P*E+wa*V+k[13],a[14]=fa*n+ca*E+xa*V+k[14],a[15]=ea*n+oa*E+Aa*V+k[15]);return a}function J(a,k,V){const n=V[0],E=V[1];V=V[2];a[0]=k[0]*n;a[1]=k[1]*n;a[2]=k[2]*
n;a[3]=k[3]*n;a[4]=k[4]*E;a[5]=k[5]*E;a[6]=k[6]*E;a[7]=k[7]*E;a[8]=k[8]*V;a[9]=k[9]*V;a[10]=k[10]*V;a[11]=k[11]*V;a[12]=k[12];a[13]=k[13];a[14]=k[14];a[15]=k[15];return a}function u(a,k,V,n){let E=n[0],Q=n[1];n=n[2];let S=Math.sqrt(E*E+Q*Q+n*n);var fa=void 0,ea=void 0;let K=void 0,P=void 0,ca=void 0,oa=void 0,qa=void 0,wa=void 0,xa=void 0,Aa=void 0,Ha=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Pa=void 0,sa=void 0,ab=void 0,Ta=void 0,Va=void 0,b=void 0,$a=void 0;ea=fa=void 0;if(S<T.EPSILON)return null;
S=1/S;E*=S;Q*=S;n*=S;fa=Math.sin(V);ea=Math.cos(V);K=1-ea;P=k[0];ca=k[1];oa=k[2];qa=k[3];wa=k[4];xa=k[5];Aa=k[6];Ha=k[7];Da=k[8];Ea=k[9];Fa=k[10];Ga=k[11];Pa=E*E*K+ea;sa=Q*E*K+n*fa;ab=n*E*K-Q*fa;Ta=E*Q*K-n*fa;Va=Q*Q*K+ea;b=n*Q*K+E*fa;$a=E*n*K+Q*fa;fa=Q*n*K-E*fa;ea=n*n*K+ea;a[0]=P*Pa+wa*sa+Da*ab;a[1]=ca*Pa+xa*sa+Ea*ab;a[2]=oa*Pa+Aa*sa+Fa*ab;a[3]=qa*Pa+Ha*sa+Ga*ab;a[4]=P*Ta+wa*Va+Da*b;a[5]=ca*Ta+xa*Va+Ea*b;a[6]=oa*Ta+Aa*Va+Fa*b;a[7]=qa*Ta+Ha*Va+Ga*b;a[8]=P*$a+wa*fa+Da*ea;a[9]=ca*$a+xa*fa+Ea*ea;a[10]=
oa*$a+Aa*fa+Fa*ea;a[11]=qa*$a+Ha*fa+Ga*ea;k!==a&&(a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);return a}function C(a,k,V){const n=Math.sin(V);V=Math.cos(V);const E=k[4],Q=k[5],S=k[6],fa=k[7],ea=k[8],K=k[9],P=k[10],ca=k[11];k!==a&&(a[0]=k[0],a[1]=k[1],a[2]=k[2],a[3]=k[3],a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);a[4]=E*V+ea*n;a[5]=Q*V+K*n;a[6]=S*V+P*n;a[7]=fa*V+ca*n;a[8]=ea*V-E*n;a[9]=K*V-Q*n;a[10]=P*V-S*n;a[11]=ca*V-fa*n;return a}function c(a,k,V){const n=Math.sin(V);V=Math.cos(V);const E=
k[0],Q=k[1],S=k[2],fa=k[3],ea=k[8],K=k[9],P=k[10],ca=k[11];k!==a&&(a[4]=k[4],a[5]=k[5],a[6]=k[6],a[7]=k[7],a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);a[0]=E*V-ea*n;a[1]=Q*V-K*n;a[2]=S*V-P*n;a[3]=fa*V-ca*n;a[8]=E*n+ea*V;a[9]=Q*n+K*V;a[10]=S*n+P*V;a[11]=fa*n+ca*V;return a}function e(a,k,V){const n=Math.sin(V);V=Math.cos(V);const E=k[0],Q=k[1],S=k[2],fa=k[3],ea=k[4],K=k[5],P=k[6],ca=k[7];k!==a&&(a[8]=k[8],a[9]=k[9],a[10]=k[10],a[11]=k[11],a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);a[0]=E*
V+ea*n;a[1]=Q*V+K*n;a[2]=S*V+P*n;a[3]=fa*V+ca*n;a[4]=ea*V-E*n;a[5]=K*V-Q*n;a[6]=P*V-S*n;a[7]=ca*V-fa*n;return a}function p(a,k){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=k[0];a[13]=k[1];a[14]=k[2];a[15]=1;return a}function r(a,k){a[0]=k[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=k[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function f(a,k,V){let n=V[0],E=V[1];V=V[2];let Q=Math.sqrt(n*n+E*E+V*V),S=void 0,fa=void 0,
ea=void 0;if(Q<T.EPSILON)return null;Q=1/Q;n*=Q;E*=Q;V*=Q;S=Math.sin(k);fa=Math.cos(k);ea=1-fa;a[0]=n*n*ea+fa;a[1]=E*n*ea+V*S;a[2]=V*n*ea-E*S;a[3]=0;a[4]=n*E*ea-V*S;a[5]=E*E*ea+fa;a[6]=V*E*ea+n*S;a[7]=0;a[8]=n*V*ea+E*S;a[9]=E*V*ea-n*S;a[10]=V*V*ea+fa;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function y(a,k){const V=Math.sin(k);k=Math.cos(k);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=V;a[7]=0;a[8]=0;a[9]=-V;a[10]=k;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function z(a,k){const V=
Math.sin(k);k=Math.cos(k);a[0]=k;a[1]=0;a[2]=-V;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=V;a[9]=0;a[10]=k;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function M(a,k){const V=Math.sin(k);k=Math.cos(k);a[0]=k;a[1]=V;a[2]=0;a[3]=0;a[4]=-V;a[5]=k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function aa(a,k,V){var n=k[0],E=k[1],Q=k[2],S=k[3],fa=n+n,ea=E+E;const K=Q+Q;k=n*fa;const P=n*ea;n*=K;const ca=E*ea;E*=K;Q*=K;fa*=S;ea*=S;S*=K;a[0]=1-(ca+Q);a[1]=P+S;a[2]=
n-ea;a[3]=0;a[4]=P-S;a[5]=1-(k+Q);a[6]=E+fa;a[7]=0;a[8]=n+ea;a[9]=E-fa;a[10]=1-(k+ca);a[11]=0;a[12]=V[0];a[13]=V[1];a[14]=V[2];a[15]=1;return a}function U(a,k){const V=pa,n=-k[0],E=-k[1],Q=-k[2],S=k[3],fa=k[4],ea=k[5],K=k[6],P=k[7],ca=n*n+E*E+Q*Q+S*S;0<ca?(V[0]=2*(fa*S+P*n+ea*Q-K*E)/ca,V[1]=2*(ea*S+P*E+K*n-fa*Q)/ca,V[2]=2*(K*S+P*Q+fa*E-ea*n)/ca):(V[0]=2*(fa*S+P*n+ea*Q-K*E),V[1]=2*(ea*S+P*E+K*n-fa*Q),V[2]=2*(K*S+P*Q+fa*E-ea*n));aa(a,k,V);return a}function ha(a,k){a[0]=k[12];a[1]=k[13];a[2]=k[14];return a}
function N(a,k){const V=k[0],n=k[1],E=k[2],Q=k[4],S=k[5],fa=k[6],ea=k[8],K=k[9];k=k[10];a[0]=Math.sqrt(V*V+n*n+E*E);a[1]=Math.sqrt(Q*Q+S*S+fa*fa);a[2]=Math.sqrt(ea*ea+K*K+k*k);return a}function I(a,k){const V=k[0]+k[5]+k[10];let n=0;0<V?(n=2*Math.sqrt(V+1),a[3]=.25*n,a[0]=(k[6]-k[9])/n,a[1]=(k[8]-k[2])/n,a[2]=(k[1]-k[4])/n):k[0]>k[5]&&k[0]>k[10]?(n=2*Math.sqrt(1+k[0]-k[5]-k[10]),a[3]=(k[6]-k[9])/n,a[0]=.25*n,a[1]=(k[1]+k[4])/n,a[2]=(k[8]+k[2])/n):k[5]>k[10]?(n=2*Math.sqrt(1+k[5]-k[0]-k[10]),a[3]=
(k[8]-k[2])/n,a[0]=(k[1]+k[4])/n,a[1]=.25*n,a[2]=(k[6]+k[9])/n):(n=2*Math.sqrt(1+k[10]-k[0]-k[5]),a[3]=(k[1]-k[4])/n,a[0]=(k[8]+k[2])/n,a[1]=(k[6]+k[9])/n,a[2]=.25*n);return a}function X(a,k,V,n){var E=k[0],Q=k[1],S=k[2],fa=k[3],ea=E+E,K=Q+Q,P=S+S;k=E*ea;const ca=E*K;E*=P;const oa=Q*K;Q*=P;S*=P;ea*=fa;K*=fa;fa*=P;P=n[0];const qa=n[1];n=n[2];a[0]=(1-(oa+S))*P;a[1]=(ca+fa)*P;a[2]=(E-K)*P;a[3]=0;a[4]=(ca-fa)*qa;a[5]=(1-(k+S))*qa;a[6]=(Q+ea)*qa;a[7]=0;a[8]=(E+K)*n;a[9]=(Q-ea)*n;a[10]=(1-(k+oa))*n;a[11]=
0;a[12]=V[0];a[13]=V[1];a[14]=V[2];a[15]=1;return a}function O(a,k,V,n,E){var Q=k[0],S=k[1],fa=k[2],ea=k[3],K=Q+Q,P=S+S,ca=fa+fa;k=Q*K;var oa=Q*P,qa=Q*ca;Q=S*P;S*=ca;var wa=fa*ca;fa=ea*K;P*=ea;const xa=ea*ca;var Aa=n[0],Ha=n[1];ca=n[2];n=E[0];ea=E[1];E=E[2];K=(1-(Q+wa))*Aa;const Da=(oa+xa)*Aa;Aa*=qa-P;oa=(oa-xa)*Ha;wa=(1-(k+wa))*Ha;Ha*=S+fa;qa=(qa+P)*ca;S=(S-fa)*ca;k=(1-(k+Q))*ca;a[0]=K;a[1]=Da;a[2]=Aa;a[3]=0;a[4]=oa;a[5]=wa;a[6]=Ha;a[7]=0;a[8]=qa;a[9]=S;a[10]=k;a[11]=0;a[12]=V[0]+n-(K*n+oa*ea+qa*
E);a[13]=V[1]+ea-(Da*n+wa*ea+S*E);a[14]=V[2]+E-(Aa*n+Ha*ea+k*E);a[15]=1;return a}function B(a,k){var V=k[0],n=k[1],E=k[2];k=k[3];var Q=V+V,S=n+n;const fa=E+E;V*=Q;const ea=n*Q;n*=S;const K=E*Q,P=E*S;E*=fa;Q*=k;S*=k;k*=fa;a[0]=1-n-E;a[1]=ea+k;a[2]=K-S;a[3]=0;a[4]=ea-k;a[5]=1-V-E;a[6]=P+Q;a[7]=0;a[8]=K+S;a[9]=P-Q;a[10]=1-V-n;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function g(a,k,V,n,E,Q,S){const fa=1/(V-k),ea=1/(E-n),K=1/(Q-S);a[0]=2*Q*fa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*Q*ea;a[6]=0;a[7]=
0;a[8]=(V+k)*fa;a[9]=(E+n)*ea;a[10]=(S+Q)*K;a[11]=-1;a[12]=0;a[13]=0;a[14]=S*Q*2*K;a[15]=0;return a}function m(a,k,V,n,E){k=1/Math.tan(k/2);let Q=void 0;a[0]=k/V;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=E&&Infinity!==E?(Q=1/(n-E),a[10]=(E+n)*Q,a[14]=2*E*n*Q):(a[10]=-1,a[14]=-2*n);return a}function G(a,k,V,n){const E=Math.tan(k.upDegrees*Math.PI/180),Q=Math.tan(k.downDegrees*Math.PI/180),S=Math.tan(k.leftDegrees*Math.PI/180);k=Math.tan(k.rightDegrees*
Math.PI/180);const fa=2/(S+k),ea=2/(E+Q);a[0]=fa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=ea;a[6]=0;a[7]=0;a[8]=-((S-k)*fa*.5);a[9]=(E-Q)*ea*.5;a[10]=n/(V-n);a[11]=-1;a[12]=0;a[13]=0;a[14]=n*V/(V-n);a[15]=0;return a}function W(a,k,V,n,E,Q,S){const fa=1/(k-V),ea=1/(n-E),K=1/(Q-S);a[0]=-2*fa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*ea;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*K;a[11]=0;a[12]=(k+V)*fa;a[13]=(E+n)*ea;a[14]=(S+Q)*K;a[15]=1;return a}function da(a,k,V,n){let E=void 0,Q=void 0;var S=void 0,fa=void 0;let ea=
void 0,K=void 0;var P=void 0,ca=void 0;let oa=void 0,qa=void 0;const wa=k[0],xa=k[1];k=k[2];S=n[0];fa=n[1];n=n[2];P=V[0];ca=V[1];V=V[2];if(Math.abs(wa-P)<T.EPSILON&&Math.abs(xa-ca)<T.EPSILON&&Math.abs(k-V)<T.EPSILON)return D(a);P=wa-P;ca=xa-ca;oa=k-V;qa=1/Math.sqrt(P*P+ca*ca+oa*oa);P*=qa;ca*=qa;oa*=qa;E=fa*oa-n*ca;Q=n*P-S*oa;S=S*ca-fa*P;(qa=Math.sqrt(E*E+Q*Q+S*S))?(qa=1/qa,E*=qa,Q*=qa,S*=qa):S=Q=E=0;fa=ca*S-oa*Q;ea=oa*E-P*S;K=P*Q-ca*E;(qa=Math.sqrt(fa*fa+ea*ea+K*K))?(qa=1/qa,fa*=qa,ea*=qa,K*=qa):
K=ea=fa=0;a[0]=E;a[1]=fa;a[2]=P;a[3]=0;a[4]=Q;a[5]=ea;a[6]=ca;a[7]=0;a[8]=S;a[9]=K;a[10]=oa;a[11]=0;a[12]=-(E*wa+Q*xa+S*k);a[13]=-(fa*wa+ea*xa+K*k);a[14]=-(P*wa+ca*xa+oa*k);a[15]=1;return a}function ja(a,k,V,n){const E=k[0],Q=k[1];k=k[2];var S=n[0];const fa=n[1];var ea=n[2];n=E-V[0];let K=Q-V[1];V=k-V[2];let P=n*n+K*K+V*V;0<P&&(P=1/Math.sqrt(P),n*=P,K*=P,V*=P);let ca=fa*V-ea*K;ea=ea*n-S*V;S=S*K-fa*n;P=ca*ca+ea*ea+S*S;0<P&&(P=1/Math.sqrt(P),ca*=P,ea*=P,S*=P);a[0]=ca;a[1]=ea;a[2]=S;a[3]=0;a[4]=K*S-
V*ea;a[5]=V*ca-n*S;a[6]=n*ea-K*ca;a[7]=0;a[8]=n;a[9]=K;a[10]=V;a[11]=0;a[12]=E;a[13]=Q;a[14]=k;a[15]=1;return a}function na(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function ua(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function ma(a,k,V){a[0]=k[0]+
V[0];a[1]=k[1]+V[1];a[2]=k[2]+V[2];a[3]=k[3]+V[3];a[4]=k[4]+V[4];a[5]=k[5]+V[5];a[6]=k[6]+V[6];a[7]=k[7]+V[7];a[8]=k[8]+V[8];a[9]=k[9]+V[9];a[10]=k[10]+V[10];a[11]=k[11]+V[11];a[12]=k[12]+V[12];a[13]=k[13]+V[13];a[14]=k[14]+V[14];a[15]=k[15]+V[15];return a}function la(a,k,V){a[0]=k[0]-V[0];a[1]=k[1]-V[1];a[2]=k[2]-V[2];a[3]=k[3]-V[3];a[4]=k[4]-V[4];a[5]=k[5]-V[5];a[6]=k[6]-V[6];a[7]=k[7]-V[7];a[8]=k[8]-V[8];a[9]=k[9]-V[9];a[10]=k[10]-V[10];a[11]=k[11]-V[11];a[12]=k[12]-V[12];a[13]=k[13]-V[13];a[14]=
k[14]-V[14];a[15]=k[15]-V[15];return a}function va(a,k,V){a[0]=k[0]*V;a[1]=k[1]*V;a[2]=k[2]*V;a[3]=k[3]*V;a[4]=k[4]*V;a[5]=k[5]*V;a[6]=k[6]*V;a[7]=k[7]*V;a[8]=k[8]*V;a[9]=k[9]*V;a[10]=k[10]*V;a[11]=k[11]*V;a[12]=k[12]*V;a[13]=k[13]*V;a[14]=k[14]*V;a[15]=k[15]*V;return a}function Ja(a,k,V,n){a[0]=k[0]+V[0]*n;a[1]=k[1]+V[1]*n;a[2]=k[2]+V[2]*n;a[3]=k[3]+V[3]*n;a[4]=k[4]+V[4]*n;a[5]=k[5]+V[5]*n;a[6]=k[6]+V[6]*n;a[7]=k[7]+V[7]*n;a[8]=k[8]+V[8]*n;a[9]=k[9]+V[9]*n;a[10]=k[10]+V[10]*n;a[11]=k[11]+V[11]*n;
a[12]=k[12]+V[12]*n;a[13]=k[13]+V[13]*n;a[14]=k[14]+V[14]*n;a[15]=k[15]+V[15]*n;return a}function Ca(a,k){return a[0]===k[0]&&a[1]===k[1]&&a[2]===k[2]&&a[3]===k[3]&&a[4]===k[4]&&a[5]===k[5]&&a[6]===k[6]&&a[7]===k[7]&&a[8]===k[8]&&a[9]===k[9]&&a[10]===k[10]&&a[11]===k[11]&&a[12]===k[12]&&a[13]===k[13]&&a[14]===k[14]&&a[15]===k[15]}function Qa(a,k){if(a===k)return!0;const V=a[0],n=a[1],E=a[2],Q=a[3],S=a[4],fa=a[5],ea=a[6],K=a[7],P=a[8],ca=a[9],oa=a[10],qa=a[11],wa=a[12],xa=a[13],Aa=a[14];a=a[15];const Ha=
k[0],Da=k[1],Ea=k[2],Fa=k[3],Ga=k[4],Pa=k[5],sa=k[6],ab=k[7],Ta=k[8],Va=k[9],b=k[10],$a=k[11],Sa=k[12],yb=k[13],tb=k[14];k=k[15];return Math.abs(V-Ha)<=T.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ha))&&Math.abs(n-Da)<=T.EPSILON*Math.max(1,Math.abs(n),Math.abs(Da))&&Math.abs(E-Ea)<=T.EPSILON*Math.max(1,Math.abs(E),Math.abs(Ea))&&Math.abs(Q-Fa)<=T.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Fa))&&Math.abs(S-Ga)<=T.EPSILON*Math.max(1,Math.abs(S),Math.abs(Ga))&&Math.abs(fa-Pa)<=T.EPSILON*Math.max(1,Math.abs(fa),
Math.abs(Pa))&&Math.abs(ea-sa)<=T.EPSILON*Math.max(1,Math.abs(ea),Math.abs(sa))&&Math.abs(K-ab)<=T.EPSILON*Math.max(1,Math.abs(K),Math.abs(ab))&&Math.abs(P-Ta)<=T.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ta))&&Math.abs(ca-Va)<=T.EPSILON*Math.max(1,Math.abs(ca),Math.abs(Va))&&Math.abs(oa-b)<=T.EPSILON*Math.max(1,Math.abs(oa),Math.abs(b))&&Math.abs(qa-$a)<=T.EPSILON*Math.max(1,Math.abs(qa),Math.abs($a))&&Math.abs(wa-Sa)<=T.EPSILON*Math.max(1,Math.abs(wa),Math.abs(Sa))&&Math.abs(xa-yb)<=T.EPSILON*Math.max(1,
Math.abs(xa),Math.abs(yb))&&Math.abs(Aa-tb)<=T.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(tb))&&Math.abs(a-k)<=T.EPSILON*Math.max(1,Math.abs(a),Math.abs(k))}function Oa(a){const k=T.EPSILON,V=a[0],n=a[1],E=a[2],Q=a[4],S=a[5],fa=a[6],ea=a[8],K=a[9];a=a[10];return Math.abs(1-(V*V+Q*Q+ea*ea))<=k&&Math.abs(1-(n*n+S*S+K*K))<=k&&Math.abs(1-(E*E+fa*fa+a*a))<=k}const pa=d.create();d=Object.freeze({__proto__:null,copy:R,set:q,identity:D,transpose:A,invert:w,adjoint:v,determinant:t,multiply:F,translate:L,scale:J,
rotate:u,rotateX:C,rotateY:c,rotateZ:e,fromTranslation:p,fromScaling:r,fromRotation:f,fromXRotation:y,fromYRotation:z,fromZRotation:M,fromRotationTranslation:aa,fromQuat2:U,getTranslation:ha,getScaling:N,getRotation:I,fromRotationTranslationScale:X,fromRotationTranslationScaleOrigin:O,fromQuat:B,frustum:g,perspective:m,perspectiveFromFieldOfView:G,ortho:W,lookAt:da,targetTo:ja,str:na,frob:ua,add:ma,subtract:la,multiplyScalar:va,multiplyScalarAndAdd:Ja,exactEquals:Ca,equals:Qa,isOrthoNormal:Oa,mul:F,
sub:la});l.add=ma;l.adjoint=v;l.copy=R;l.determinant=t;l.equals=Qa;l.exactEquals=Ca;l.frob=ua;l.fromQuat=B;l.fromQuat2=U;l.fromRotation=f;l.fromRotationTranslation=aa;l.fromRotationTranslationScale=X;l.fromRotationTranslationScaleOrigin=O;l.fromScaling=r;l.fromTranslation=p;l.fromXRotation=y;l.fromYRotation=z;l.fromZRotation=M;l.frustum=g;l.getRotation=I;l.getScaling=N;l.getTranslation=ha;l.identity=D;l.invert=w;l.isOrthoNormal=Oa;l.lookAt=da;l.mat4=d;l.mul=F;l.multiply=F;l.multiplyScalar=va;l.multiplyScalarAndAdd=
Ja;l.ortho=W;l.perspective=m;l.perspectiveFromFieldOfView=G;l.rotate=u;l.rotateX=C;l.rotateY=c;l.rotateZ=e;l.scale=J;l.set=q;l.str=na;l.sub=la;l.subtract=la;l.targetTo=ja;l.translate=L;l.transpose=A})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(l,d,T,R,q){function D(){return!!d._pe}function A(){return!!q("esri-wasm")}function w(){return u?u:u=(new Promise((c,e)=>l(["./pe-wasm"],c,e))).then(c=>c.peWasm).then(({default:c})=>
c({locateFile:e=>R.getAssetUrl(`esri/geometry/support/${e}`)})).then(c=>{v(c)})}function v(c){function e(f,y,z){f[y]=z(f[y])}d._pe=c;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=function(f){function y(){return f.apply(this,arguments)||this}T._inheritsLoose(y,f);y.prototype.destroy=function(){d._pe.destroy(this)};return y}(d._pe.PeGCSExtent);c=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,
d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var p of c)e(p.prototype,"getName",f=>function(){return f.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const f of[d._pe.PeGeogtran,d._pe.PeProjcs])e(f.prototype,"getParameters",y=>function(){const z=Array(d.PeDefs.PE_PARM_MAX);let M=y.call(this);for(let aa=0;aa<z.length;aa++){const U=d._pe.getValue(M,"*");z[aa]=U?d._pe.wrapPointer(U,d._pe.PeParameter):null;M+=Int32Array.BYTES_PER_ELEMENT}return z});e(d._pe.PeHorizon.prototype,"getCoord",
f=>function(){const y=this.getSize();if(!y)return null;const z=[],M=f.call(this);J(z,y,M);return z});e(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",f=>{const y=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let z=null;var M=f.call(this);if(!d._pe.compare(M,d._pe.NULL)){z=[M];const aa=this.getSteps();if(1<aa){M=d._pe.getPointer(M);for(let U=1;U<aa;U++)z.push(d._pe.wrapPointer(M+y*U,d._pe.PeGTlistExtendedGTs))}}return z}});const r=d._pe._pe_getPeHorizonSize();p=f=>function(){let y=this._cache;
y||(this._cache=y=new Map);if(y.has(f))return y.get(f);let z=null;var M=f.call(this);if(!d._pe.compare(M,d._pe.NULL)){z=[M];const aa=M.getNump();if(1<aa){M=d._pe.getPointer(M);for(let U=1;U<aa;U++)z.push(d._pe.wrapPointer(M+r*U,d._pe.PeHorizon))}}y.set(f,z);return z};e(d._pe.PeProjcs.prototype,"horizonGcsGenerate",p);e(d._pe.PeProjcs.prototype,"horizonPcsGenerate",p);d._pe.PeObject.prototype.toString=function(f=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const y=d._pe.getPointer(this),
z=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(y,f,z))}}function t(c){if(c){var e=d._pe.getClass(c);e&&(e=d._pe.getCache(e))&&(c=d._pe.getPointer(c))&&delete e[c]}}function F(c,e){const p=[];e=Array(e);for(let r=0;r<c;r++)p.push(d._pe.ensureInt8(e));return p}function L(c){let e;Array.isArray(c[0])?(e=[],c.forEach(p=>{e.push(p[0],p[1])})):e=c;return e}function J(c,e,p,r=!1){if(r)for(r=0;r<2*e;r++)c[r]=d._pe.getValue(p+r*Float64Array.BYTES_PER_ELEMENT,
"double");else{r=0===c.length;for(let f=0;f<e;f++)r&&(c[f]=Array(2)),c[f][0]=d._pe.getValue(p,"double"),c[f][1]=d._pe.getValue(p+Float64Array.BYTES_PER_ELEMENT,"double"),p+=2*Float64Array.BYTES_PER_ELEMENT}}let u;d._pe=null;d.PeCSTransformations=void 0;(function(c){function e(f,y,z){d._pe.ensureCache.prepare();var M=L(z);const aa=z===M;M=d._pe.ensureFloat64(M);(f=d._pe._pe_geog_to_proj(d._pe.getPointer(f),y,M))&&J(z,y,M,aa);return f}function p(f,y,z){return r(f,y,z,0)}function r(f,y,z,M){d._pe.ensureCache.prepare();
var aa=L(z);const U=z===aa;aa=d._pe.ensureFloat64(aa);(f=d._pe._pe_proj_to_geog_center(d._pe.getPointer(f),y,aa,M))&&J(z,y,aa,U);return f}c.geogToProj=e;c.projGeog=function(f,y,z,M){switch(M){case d.PeDefs.PE_TRANSFORM_P_TO_G:return p(f,y,z);case d.PeDefs.PE_TRANSFORM_G_TO_P:return e(f,y,z)}return 0};c.projToGeog=p;c.projToGeogCenter=r})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=
d._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;
c.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;
c.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||
(d.PeDefs={}));d.PeFactory=void 0;(function(c){function e(y,z){let M=null,aa=p[y];aa||(aa={},p[y]=aa);aa.hasOwnProperty(String(z))?M=aa[z]:(y=d._pe.PeFactory.prototype.factoryByType(y,z),d._pe.compare(y,d._pe.NULL)||(M=y,aa[z]=M));return M=f(M)}const p={},r={},f=y=>{if(y){const z=y.getType();switch(z){case d.PeDefs.PE_TYPE_GEOGCS:y=d._pe.castObject(y,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:y=d._pe.castObject(y,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:y=d._pe.castObject(y,d._pe.PeGeogtran);
break;default:z&d.PeDefs.PE_TYPE_UNIT&&(y=d._pe.castObject(y,d._pe.PeUnit))}}return y};c.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(y){return e(d.PeDefs.PE_TYPE_COORDSYS,y)};c.factoryByType=e;c.fromString=function(y,z){let M=null,aa=r[y];aa||(aa={},r[y]=aa);aa.hasOwnProperty(z)?M=aa[z]:(y=d._pe.PeFactory.prototype.fromString(y,z),d._pe.compare(y,d._pe.NULL)||(M=y,aa[z]=M));return M=f(M)};c.geogcs=function(y){return e(d.PeDefs.PE_TYPE_GEOGCS,y)};c.geogtran=
function(y){return e(d.PeDefs.PE_TYPE_GEOGTRAN,y)};c.getCode=function(y){return d._pe.PeFactory.prototype.getCode(y)};c.projcs=function(y){return e(d.PeDefs.PE_TYPE_PROJCS,y)};c.unit=function(y){return e(d.PeDefs.PE_TYPE_UNIT,y)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(c){let e;c.init=function(){c.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;e=d._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(p,r,f,y,z,M){let aa=
null;const U=new d._pe.PeInteger(M);try{const ha=d._pe.PeGTlistExtended.prototype.getGTlist(p,r,f,y,z,U);if(M=U.val)if(aa=[ha],1<M){const N=d._pe.getPointer(ha);for(p=1;p<M;p++)aa.push(d._pe.wrapPointer(N+e*p,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(U)}return aa}})(d.PeGTlistExtended||(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(e){if(e&&e.length){for(const p of e)t(p),p.getEntries().forEach(r=>{t(r);r=r.getGeogtran();t(r);r.getParameters().forEach(t);
[r.getGeogcs1(),r.getGeogcs2()].forEach(f=>{t(f);const y=f.getDatum();t(y);t(y.getSpheroid());t(f.getPrimem());t(f.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(c){c.geogToGeog=function(e,p,r,f,y){d._pe.ensureCache.prepare();var z=L(r);const M=r===z;z=d._pe.ensureFloat64(z);let aa=0;f&&(aa=d._pe.ensureFloat64(f));(e=d._pe._pe_geog_to_geog(d._pe.getPointer(e),p,z,aa,y))&&J(r,p,z,M);
return e}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(c){const e=(r,f,y,z,M,aa)=>{d._pe.ensureCache.prepare();switch(r){case "dd":var U=d._pe._pe_geog_to_dd;var ha=d.PeDefs.PE_DD_MAX;break;case "ddm":U=d._pe._pe_geog_to_ddm;ha=d.PeDefs.PE_DDM_MAX;break;case "dms":U=d._pe._pe_geog_to_dms,ha=d.PeDefs.PE_DMS_MAX}r=0;f&&(r=d._pe.getPointer(f));f=L(z);f=d._pe.ensureFloat64(f);ha=F(y,ha);z=d._pe.ensureInt32(ha);if(M=U(r,y,f,M,z))for(U=0;U<y;U++)aa[U]=d._pe.UTF8ToString(ha[U]);
return M},p=(r,f,y,z,M)=>{d._pe.ensureCache.prepare();switch(r){case "dd":var aa=d._pe._pe_dd_to_geog;break;case "ddm":aa=d._pe._pe_ddm_to_geog;break;case "dms":aa=d._pe._pe_dms_to_geog}r=0;f&&(r=d._pe.getPointer(f));f=z.map(U=>d._pe.ensureString(U));z=d._pe.ensureInt32(f);f=d._pe.ensureFloat64(Array(2*y));(aa=aa(r,y,z,f))&&J(M,y,f);return aa};c.geog_to_dms=function(r,f,y,z,M){return e("dms",r,f,y,z,M)};c.dms_to_geog=function(r,f,y,z){return p("dms",r,f,y,z)};c.geog_to_ddm=function(r,f,y,z,M){return e("ddm",
r,f,y,z,M)};c.ddm_to_geog=function(r,f,y,z){return p("ddm",r,f,y,z)};c.geog_to_dd=function(r,f,y,z,M){return e("dd",r,f,y,z,M)};c.dd_to_geog=function(r,f,y,z){return p("dd",r,f,y,z)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=
d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;c.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geog_to_mgrs_extended=function(e,p,r,f,y,z,M){d._pe.ensureCache.prepare();let aa=0;e&&(aa=d._pe.getPointer(e));e=L(r);r=d._pe.ensureFloat64(e);e=F(p,d.PeDefs.PE_MGRS_MAX);const U=d._pe.ensureInt32(e);if(f=d._pe._pe_geog_to_mgrs_extended(aa,p,r,f,y,z,U))for(y=0;y<p;y++)M[y]=d._pe.UTF8ToString(e[y]);return f};c.mgrs_to_geog_extended=function(e,p,r,f,y){d._pe.ensureCache.prepare();
let z=0;e&&(z=d._pe.getPointer(e));e=r.map(M=>d._pe.ensureString(M));r=d._pe.ensureInt32(e);e=d._pe.ensureFloat64(Array(2*p));(f=d._pe._pe_mgrs_to_geog_extended(z,p,r,f,e))&&J(y,p,e);return f}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(c){c.geog_to_usng=function(e,p,r,f,y,z,M){d._pe.ensureCache.prepare();let aa=0;e&&(aa=d._pe.getPointer(e));e=L(r);r=d._pe.ensureFloat64(e);e=F(p,d.PeDefs.PE_MGRS_MAX);const U=d._pe.ensureInt32(e);if(f=d._pe._pe_geog_to_usng(aa,p,r,
f,y,z,U))for(y=0;y<p;y++)M[y]=d._pe.UTF8ToString(e[y]);return f};c.usng_to_geog=function(e,p,r,f){d._pe.ensureCache.prepare();var y=0;e&&(y=d._pe.getPointer(e));e=r.map(z=>d._pe.ensureString(z));r=d._pe.ensureInt32(e);e=d._pe.ensureFloat64(Array(2*p));(y=d._pe._pe_usng_to_geog(y,p,r,e))&&J(f,p,e);return y}})(d.PeNotationUsng||(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
c.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geog_to_utm=function(e,p,r,f,y){d._pe.ensureCache.prepare();var z=0;e&&(z=d._pe.getPointer(e));e=L(r);r=d._pe.ensureFloat64(e);e=F(p,d.PeDefs.PE_UTM_MAX);const M=d._pe.ensureInt32(e);if(f=d._pe._pe_geog_to_utm(z,p,r,f,M))for(z=0;z<p;z++)y[z]=d._pe.UTF8ToString(e[z]);return f};c.utm_to_geog=function(e,p,r,f,y){d._pe.ensureCache.prepare();let z=0;e&&(z=d._pe.getPointer(e));e=r.map(M=>d._pe.ensureString(M));r=d._pe.ensureInt32(e);e=d._pe.ensureFloat64(Array(2*
p));(f=d._pe._pe_utm_to_geog(z,p,r,f,e))&&J(y,p,e);return f}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(c){const e=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(p,r=c.PE_PCSINFO_OPTION_DOMAIN){let f,
y;e.has(p)&&(y=e.get(p),y[r]&&(f=y[r]));f||(f=d._pe.PePCSInfo.prototype.generate(p,r),y||(y=[],e.set(p,y)),y[r]=f);return f}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(c){c.version_string=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||(d.PeVersion={}));const C=Object.freeze({__proto__:null,get _pe(){return d._pe},isLoaded:D,isSupported:A,load:w,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},
get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:v});d._init=v;d.isLoaded=D;d.isSupported=
A;d.load=w;d.pe=C})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(l,d){const T=Math.PI/180;var R=d.earth.radius;const q=d.earth.eccentricitySquared;R={a1:R*q,a2:R*q*R*q,a3:R*q*q/2,a4:R*q*R*q*2.5,a5:R*q+R*q*q/2,a6:1-q};d={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,
f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},
104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,
f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,
f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=R;l.spheroids=d;l.toRadians=T;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(l){return function(){function d(R){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(R&&R.steps)for(const q of R.steps)q instanceof l?this.steps.push(q):
this.steps.push(new l({wkid:q.wkid,wkt:q.wkt,isInverse:q.isInverse}))}d.cacheKey=function(R,q){return[void 0!==R.wkid&&null!==R.wkid?R.wkid.toString():"-1",void 0!==R.wkt&&null!==R.wkt?R.wkt.toString():"",void 0!==q.wkid&&null!==q.wkid?q.wkid.toString():"-1",void 0!==q.wkt&&null!==q.wkt?q.wkt.toString():""].join()};d.fromGE=function(R){const q=new d;let D="";for(const A of R.steps)R=l.fromGE(A),q.steps.push(R),D+=R.uid.toString()+",";q._cached_projection={};q._gtlistentry=null;q._chain=D;return q};
var T=d.prototype;T.getInverse=function(){const R=new d;R.steps=[];for(let q=this.steps.length-1;0<=q;q--)R.steps.push(this.steps[q].getInverse());return R};T.getGTListEntry=function(){let R="";for(const q of this.steps)R+=q.uid.toString()+",";R!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=R);return this._gtlistentry};T.assignCachedGe=function(R,q,D){this._cached_projection[d.cacheKey(R,q)]=D};T.getCachedGeTransformation=function(R,q){let D="";for(const A of this.steps)D+=
A.uid.toString()+",";D!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=D);R=this._cached_projection[d.cacheKey(R,q)];return void 0===R?null:R};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){let d=0;return function(){function T(R=null){this.uid=d++;R?(this._wkt=void 0!==R.wkt?R.wkt:null,this._wkid=void 0!==R.wkid?R.wkid:-1,this._isInverse=void 0!==R.isInverse?!0===R.isInverse:
!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}T.fromGE=function(R){const q=new T;q._wkt=R.wkt;q._wkid=R.wkid;q._isInverse=R.isInverse;return q};T.prototype.getInverse=function(){const R=new T;R._wkt=this.wkt;R._wkid=this._wkid;R._isInverse=!this.isInverse;return R};l._createClass(T,[{key:"wkt",get:function(){return this._wkt},set:function(R){this._wkt=R;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(R){this._wkid=R;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},
set:function(R){this._isInverse=R;this.uid=d++}}]);return T}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(l,d,T,R){l.getGeometryZScaler=function(q,D,A){if(d.isNone(D)||d.isNone(A)||A.vcsWkid||R.equals(D,A))return null;D=T.getMetersPerVerticalUnitForSR(D);A=T.getMetersPerVerticalUnitForSR(A);const w=D/A;if(1===w)return null;switch(q){case "point":case "esriGeometryPoint":return v=>{v&&null!=v.z&&(v.z*=
w)};case "polyline":case "esriGeometryPolyline":return v=>{if(v)for(const t of v.paths)for(const F of t)2<F.length&&(F[2]*=w)};case "polygon":case "esriGeometryPolygon":return v=>{if(v)for(const t of v.rings)for(const F of t)2<F.length&&(F[2]*=w)};case "multipoint":case "esriGeometryMultipoint":return v=>{if(v)for(const t of v.points)2<t.length&&(t[2]*=w)};case "extent":case "esriGeometryExtent":return v=>{v&&null!=v.zmin&&null!=v.zmax&&(v.zmin*=w,v.zmax*=w)};default:return null}};Object.defineProperty(l,
"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(l){let d=function(A,w,v){this.x=A;this.y=w;this.spatialReference=v;this.m=this.z=void 0},T=function(A,w,v,t){this.rings=A;this.spatialReference=w;this.hasM=this.hasZ=void 0;v&&(this.hasZ=v);t&&(this.hasM=t)},R=function(A,w,v,t){this.paths=A;this.spatialReference=w;this.hasM=this.hasZ=void 0;v&&(this.hasZ=v);t&&(this.hasM=t)},q=function(A,w,v,t){this.points=A;this.spatialReference=w;this.hasM=this.hasZ=
void 0;v&&(this.hasZ=v);t&&(this.hasM=t)},D=function(A,w,v,t,F){this.xmin=A;this.ymin=w;this.xmax=v;this.ymax=t;this.spatialReference=F;this.mmax=this.mmin=this.zmax=this.zmin=void 0};l.jsonAdapter={convertToGEGeometry:function(A,w){return null==w?null:A.convertJSONToGeometry(w)},exportPoint:function(A,w,v){v=new d(A.getPointX(w),A.getPointY(w),v);const t=A.hasZ(w),F=A.hasM(w);t&&(v.z=A.getPointZ(w));F&&(v.m=A.getPointM(w));return v},exportPolygon:function(A,w,v){return new T(A.exportPaths(w),v,A.hasZ(w),
A.hasM(w))},exportPolyline:function(A,w,v){return new R(A.exportPaths(w),v,A.hasZ(w),A.hasM(w))},exportMultipoint:function(A,w,v){return new q(A.exportPoints(w),v,A.hasZ(w),A.hasM(w))},exportExtent:function(A,w,v){var t=A.hasZ(w);const F=A.hasM(w);v=new D(A.getXMin(w),A.getYMin(w),A.getXMax(w),A.getYMax(w),v);t&&(t=A.getZExtent(w),v.zmin=t.vmin,v.zmax=t.vmax);F&&(A=A.getMExtent(w),v.mmin=A.vmin,v.mmax=A.vmax);return v}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(l,d,T,R,q,D,A,w,v,t,F,L,J,u,C,c,e,p,r,f,y,z,M){function aa(B){return B.every(g=>"exceedslimit"!==g.statisticType)}const U=new Set,ha=new D.MemCacheStorage(2E6);let N=0,I=function(){function B(m){this.capabilities={query:c.queryCapabilities};this.geometryType=m.geometryType;this.hasM=m.hasM;this.hasZ=m.hasZ;this.objectIdField=m.objectIdField;this.spatialReference=m.spatialReference;this.definitionExpression=m.definitionExpression;this.featureStore=m.featureStore;this.aggregateAdapter=m.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=m.timeInfo;m.cacheSpatialQueries&&(this._geometryQueryCache=new D.MemCache(N++ +"$$",ha));this.fieldsIndex=new y(m.fields);m.scheduler&&m.priority&&(this._frameTask=m.scheduler.registerTask(m.priority))}var g=B.prototype;g.destroy=function(){this._frameTask=q.removeMaybe(this._frameTask);this.clearCache();q.destroyMaybe(this._geometryQueryCache);this._changeHandle=q.removeMaybe(this._changeHandle);q.destroyMaybe(this.fieldsIndex)};
g.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};g.executeQuery=function(){var m=d._asyncToGenerator(function*(G={},W){let da=R.clone(G),ja;try{da=yield this._schedule(()=>f.normalizeQuery(da,this.definitionExpression,this.spatialReference),W),da=yield this._reschedule(()=>this._checkQuerySupport(da),W),ja=yield this._reschedule(()=>this._executeGeometryQuery(da,W),W),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(da),
W),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(da),W),ja=yield this._reschedule(()=>ja.executeTimeQuery(da),W),ja=yield this._reschedule(()=>ja.executeAttributesQuery(da),W)}catch(na){if(na!==f.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new e([],null,this)}return ja.createQueryResponse(da)});return function(){return m.apply(this,arguments)}}();g.executeQueryForCount=function(){var m=d._asyncToGenerator(function*(G={},W){let da=R.clone(G);da.returnGeometry=!1;da.returnCentroid=!1;da.outSR=null;
try{da=yield this._schedule(()=>f.normalizeQuery(da,this.definitionExpression,this.spatialReference),W);da=yield this._reschedule(()=>this._checkQuerySupport(da),W);let ja=yield this._reschedule(()=>this._executeGeometryQuery(da,W),W);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(da),W);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(da),W);ja=yield this._reschedule(()=>ja.executeTimeQuery(da),W);ja=yield this._reschedule(()=>ja.executeAttributesQuery(da),W);return ja.createQueryResponseForCount(da)}catch(ja){if(ja!==
f.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}});return function(){return m.apply(this,arguments)}}();g.executeQueryForExtent=function(){var m=d._asyncToGenerator(function*(G={},W){let da=R.clone(G),ja;G=da.outSR;try{da=yield this._schedule(()=>f.normalizeQuery(da,this.definitionExpression,this.spatialReference),W);da=yield this._reschedule(()=>this._checkQuerySupport(da),W);da.returnGeometry=!0;da.returnCentroid=!1;da.outSR=null;ja=yield this._reschedule(()=>this._executeGeometryQuery(da,W),W);ja=
yield this._reschedule(()=>ja.executeAggregateIdsQuery(da),W);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(da),W);ja=yield this._reschedule(()=>ja.executeTimeQuery(da),W);ja=yield this._reschedule(()=>ja.executeAttributesQuery(da),W);const na=ja.size;if(!na)return{count:na,extent:null};w.set(O,w.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ja.items,la=>w.expandWithAABB(O,la),X);const ua={xmin:O[0],ymin:O[1],xmax:O[3],ymax:O[4],spatialReference:f.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(O[2])&&isFinite(O[5])&&(ua.zmin=O[2],ua.zmax=O[5]);const ma=C.project(ua,ja.spatialReference,G);ma.spatialReference=f.cleanFromGeometryEngine(G||this.spatialReference);if(0===ma.xmax-ma.xmin){const la=A.getMetersPerUnitForSR(ma.spatialReference);ma.xmin-=la;ma.xmax+=la}if(0===ma.ymax-ma.ymin){const la=A.getMetersPerUnitForSR(ma.spatialReference);ma.ymin-=la;ma.ymax+=la}if(this.hasZ&&null!=ma.zmin&&null!=ma.zmax&&0===ma.zmax-ma.zmin){const la=A.getMetersPerUnitForSR(ma.spatialReference);
ma.zmin-=la;ma.zmax+=la}return{count:na,extent:ma}}catch(na){if(na===f.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw na;}});return function(){return m.apply(this,arguments)}}();g.executeQueryForIds=function(){var m=d._asyncToGenerator(function*(G={},W){return this.executeQueryForIdSet(G,W).then(da=>Array.from(da))});return function(){return m.apply(this,arguments)}}();g.executeQueryForIdSet=function(){var m=d._asyncToGenerator(function*(G={},W){let da=R.clone(G),ja;da.returnGeometry=
!1;da.returnCentroid=!1;da.outSR=null;try{da=yield this._schedule(()=>f.normalizeQuery(da,this.definitionExpression,this.spatialReference),W);da=yield this._reschedule(()=>this._checkQuerySupport(da),W);ja=yield this._reschedule(()=>this._executeGeometryQuery(da,W),W);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(da),W);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(da),W);ja=yield this._reschedule(()=>ja.executeTimeQuery(da),W);ja=yield this._reschedule(()=>ja.executeAttributesQuery(da),
W);const na=ja.items,ua=new Set;yield this._reschedule(()=>{for(const ma of na)ua.add(ja.featureAdapter.getObjectId(ma))},W);return ua}catch(na){if(na===f.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw na;}});return function(){return m.apply(this,arguments)}}();g.executeQueryForSnapping=function(){var m=d._asyncToGenerator(function*(G,W){const {point:da,distance:ja,types:na}=G;if(0===na)return{candidates:[]};const ua=yield this._reschedule(()=>this._checkQuerySupport(G.query),W),ma=!J.equals(da.spatialReference,
this.spatialReference);ma&&(yield C.checkProjectionSupport(da.spatialReference,this.spatialReference));var la="number"===typeof ja?ja:ja.x,va="number"===typeof ja?ja:ja.y;la={xmin:da.x-la,xmax:da.x+la,ymin:da.y-va,ymax:da.y+va,spatialReference:da.spatialReference};la=ma?C.project(la,this.spatialReference):la;if(!la)return{candidates:[]};va=(yield L.normalizeCentralMeridian(F.fromJSON(da),null,{signal:W}))[0];const Ja=(yield L.normalizeCentralMeridian(F.fromJSON(la),null,{signal:W}))[0];if(q.isNone(va)||
q.isNone(Ja))return{candidates:[]};let Ca=new e(this._searchFeatures(this._getQueryBBoxes(Ja.toJSON())),null,this);Ca=yield this._reschedule(()=>Ca.executeObjectIdsQuery(ua),W);Ca=yield this._reschedule(()=>Ca.executeTimeQuery(ua),W);Ca=yield this._reschedule(()=>Ca.executeAttributesQuery(ua),W);W=va.toJSON();W=ma?C.project(W,this.spatialReference):W;return Ca.createSnappingResponse({...G,point:W,distance:ma?Math.max(la.xmax-la.xmin,la.ymax-la.ymin)/2:ja},da.spatialReference)});return function(G,
W){return m.apply(this,arguments)}}();g.executeQueryForLatestObservations=function(){var m=d._asyncToGenerator(function*(G={},W){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new T("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:G,timeInfo:this.timeInfo});let da=R.clone(G),ja;try{da=yield this._schedule(()=>f.normalizeQuery(da,this.definitionExpression,this.spatialReference),W),da=yield this._reschedule(()=>this._checkQuerySupport(da),W),ja=yield this._reschedule(()=>
this._executeGeometryQuery(da,W),W),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(da),W),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(da),W),ja=yield this._reschedule(()=>ja.executeTimeQuery(da),W),ja=yield this._reschedule(()=>ja.executeAttributesQuery(da),W),ja=yield this._reschedule(()=>ja.filterLatest(),W)}catch(na){if(na!==f.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new e([],null,this)}return ja.createQueryResponse(da)});return function(){return m.apply(this,arguments)}}();
g.executeQueryForSummaryStatistics=function(){var m=d._asyncToGenerator(function*(G={},W,da){const {field:ja,normalizationField:na,valueExpression:ua}=W;return(yield this._getQueryEngineResultForStats(G,{field:ja,normalizationField:na,valueExpression:ua},da)).createSummaryStatisticsResponse(G,W)});return function(){return m.apply(this,arguments)}}();g.executeQueryForUniqueValues=function(){var m=d._asyncToGenerator(function*(G={},W,da){const {field:ja,valueExpression:na}=W;return(yield this._getQueryEngineResultForStats(G,
{field:ja,valueExpression:na},da)).createUniqueValuesResponse(G,W)});return function(){return m.apply(this,arguments)}}();g.executeQueryForClassBreaks=function(){var m=d._asyncToGenerator(function*(G={},W,da){const {field:ja,normalizationField:na,valueExpression:ua}=W;return(yield this._getQueryEngineResultForStats(G,{field:ja,normalizationField:na,valueExpression:ua},da)).createClassBreaksResponse(G,W)});return function(){return m.apply(this,arguments)}}();g.executeQueryForHistogram=function(){var m=
d._asyncToGenerator(function*(G={},W,da){const {field:ja,normalizationField:na,valueExpression:ua}=W;return(yield this._getQueryEngineResultForStats(G,{field:ja,normalizationField:na,valueExpression:ua},da)).createHistogramResponse(G,W)});return function(){return m.apply(this,arguments)}}();g._schedule=function(){var m=d._asyncToGenerator(function*(G,W){return q.isSome(this._frameTask)?this._frameTask.schedule(G,W):G(M.noBudget)});return function(G,W){return m.apply(this,arguments)}}();g._reschedule=
function(){var m=d._asyncToGenerator(function*(G,W){return q.isSome(this._frameTask)?this._frameTask.reschedule(G,W):G(M.noBudget)});return function(G,W){return m.apply(this,arguments)}}();g._getAll=function(){if(!this._allItems){const m=[];this.featureStore.forEach(G=>m.push(G));this._allItems=new e(m,null,this)}return this._allItems};g._executeGeometryQuery=function(){var m=d._asyncToGenerator(function*(G,W){var da=this;const {geometry:ja,outSR:na,spatialRel:ua,returnGeometry:ma,returnCentroid:la}=
G,va=ma||la,Ja=J.isValid(na)&&!J.equals(this.spatialReference,na),Ca=this._geometryQueryCache?Ja&&va?JSON.stringify({geometry:ja,spatialRelationship:ua,outSpatialReference:na}):JSON.stringify({geometry:ja,spatialRelationship:ua}):null;if(Ca){var Qa=this._geometryQueryCache.get(Ca);if(!q.isUndefined(Qa))return Qa}Qa=function(){var k=d._asyncToGenerator(function*(V){if(Ja&&va)return V=yield V.project(na),Ca&&da._geometryQueryCache.put(Ca,V,V.size||1),V;Ca&&da._geometryQueryCache.put(Ca,V,V.size||1);
return V});return function(V){return k.apply(this,arguments)}}();if(!ja)return Qa(this._getAll());const Oa=this.featureAdapter;if("esriSpatialRelDisjoint"===ua){G=this._searchFeatures(this._getQueryBBoxes(ja));if(!G.length)return Qa(this._getAll());let k,V;const n=new Set;for(var pa of G)n.add(Oa.getObjectId(pa));yield this._reschedule(()=>{let E=0;k=Array(n.size);this.featureStore.forEach(Q=>k[E++]=Q);V=n},W);G=yield this._reschedule(d._asyncToGenerator(function*(){const E=yield p.getSpatialQueryOperator(ua,
ja,da.geometryType,da.hasZ,da.hasM);return new e(yield da._runSpatialFilter(k,Q=>!V.has(Oa.getObjectId(Q))||E(Oa.getGeometry(Q)),W),ja,da)}),W);return Qa(G)}pa=this._searchFeatures(this._getQueryBBoxes(ja));if(!pa.length)return Qa=new e([],ja,this),Ca&&this._geometryQueryCache.put(Ca,Qa,Qa.size||1),Qa;if(this._canExecuteSoloPass(ja,G))return Qa(new e(pa,ja,this));const a=yield p.getSpatialQueryOperator(ua,ja,this.geometryType,this.hasZ,this.hasM);G=yield this._runSpatialFilter(pa,k=>a(Oa.getGeometry(k)),
W);return Qa(new e(G,ja,this))});return function(G,W){return m.apply(this,arguments)}}();g._runSpatialFilter=function(){var m=d._asyncToGenerator(function*(G,W,da){var ja=this;if(!W)return G;if(q.isNone(this._frameTask))return G.filter(la=>W(la));let na=0;const ua=[],ma=function(){var la=d._asyncToGenerator(function*(va){for(;na<G.length;){const Ja=G[na++];W(Ja)&&(ua.push(Ja),va.madeProgress());va.done&&(yield ja._reschedule(Ca=>ma(Ca),da))}});return function(va){return la.apply(this,arguments)}}();
return this._reschedule(la=>ma(la),da).then(()=>ua)});return function(G,W,da){return m.apply(this,arguments)}}();g._canExecuteSoloPass=function(m,G){const {geometryType:W}=this;({spatialRel:G}=G);return p.canQueryWithRBush(m)&&("esriSpatialRelEnvelopeIntersects"===G||"esriGeometryPoint"===W&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G||"esriSpatialRelWithin"===G))};g._getQueryBBoxes=function(m){if(p.canQueryWithRBush(m)){if(F.isExtent(m))return[v.fromValues(m.xmin,m.ymin,m.xmax,
m.ymax)];if(F.isPolygon(m))return m.rings.map(G=>v.fromValues(Math.min(G[0][0],G[2][0]),Math.min(G[0][1],G[2][1]),Math.max(G[0][0],G[2][0]),Math.max(G[0][1],G[2][1])))}return[t.getBoundsXY(v.create(),m)]};g._searchFeatures=function(m){for(const da of m)this.featureStore.forEachInBounds(da,ja=>{U.add(ja)});const G=Array(U.size);let W=0;U.forEach(da=>G[W++]=da);U.clear();return G};g._checkStatisticsSupport=function(){var m=d._asyncToGenerator(function*(G,W){if(0>G.distance||null!=G.geometryPrecision||
G.multipatchOption||G.pixelSize||G.relationParam||G.text||G.outStatistics||G.groupByFieldsForStatistics||G.having||G.orderByFields)throw new T("feature-store:unsupported-query","Unsupported query options",{query:G});return Promise.all([this._checkAttributesQuerySupport(G),this._checkStatisticsParamsSupport(W),p.checkSpatialQuerySupport(G,this.geometryType,this.spatialReference),C.checkProjectionSupport(this.spatialReference,G.outSR)]).then(()=>G)});return function(G,W){return m.apply(this,arguments)}}();
g._checkStatisticsParamsSupport=function(){var m=d._asyncToGenerator(function*(G){var W=[];G.valueExpression&&({arcadeUtils:W}=yield z.loadArcade(),W=W.extractFieldNames(G.valueExpression));G.field&&W.push(G.field);G.normalizationField&&W.push(G.normalizationField);if(!W.length)throw new T("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:G});u.validateFields(this.fieldsIndex,W,"params contains missing fields")});return function(G){return m.apply(this,
arguments)}}();g._checkQuerySupport=function(){var m=d._asyncToGenerator(function*(G){if(0>G.distance||null!=G.geometryPrecision||G.multipatchOption||G.pixelSize||G.relationParam||G.text)throw new T("feature-store:unsupported-query","Unsupported query options",{query:G});return Promise.all([this._checkAttributesQuerySupport(G),this._checkStatisticsQuerySupport(G),p.checkSpatialQuerySupport(G,this.geometryType,this.spatialReference),C.checkProjectionSupport(this.spatialReference,G.outSR)]).then(()=>
G)});return function(G){return m.apply(this,arguments)}}();g._checkAttributesQuerySupport=function(m){const {outFields:G,orderByFields:W,returnDistinctValues:da,outStatistics:ja}=m,na=ja?ja.map(ua=>ua.outStatisticFieldName&&ua.outStatisticFieldName.toLowerCase()):[];if(W&&0<W.length){const ua=W.map(ma=>{const la=ma.toLowerCase();return-1<la.indexOf(" asc")?la.split(" asc")[0]:-1<la.indexOf(" desc")?la.split(" desc")[0]:ma}).filter(ma=>-1===na.indexOf(ma));u.validateFields(this.fieldsIndex,ua,"orderByFields contains missing fields")}if(G&&
0<G.length)u.validateFields(this.fieldsIndex,G,"outFields contains missing fields");else if(da)throw new T("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:m});u.validateWhere(this.fieldsIndex,m.where)};g._checkStatisticsQuerySupport=function(){var m=d._asyncToGenerator(function*(G){const {outStatistics:W,groupByFieldsForStatistics:da,having:ja}=G;var na=da&&da.length,ua=W&&W.length;if(ja){if(!na||!ua)throw new T("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",
{query:G});u.validateHaving(this.fieldsIndex,ja,W)}if(ua&&aa(W)){ua=W.map(ma=>ma.onStatisticField);u.validateFields(this.fieldsIndex,ua,"onStatisticFields contains missing fields");na&&u.validateFields(this.fieldsIndex,da,"groupByFieldsForStatistics contains missing fields");for(const ma of W){const {onStatisticField:la,statisticType:va}=ma;if(("percentile_disc"===va||"percentile_cont"===va)&&"statisticParameters"in ma){if({statisticParameters:na}=ma,!na)throw new T("feature-store:unsupported-query",
"statisticParamters should be set for percentile type",{definition:ma,query:G});}else if("count"!==va&&la&&u.hasInvalidFieldType(la,this.fieldsIndex))throw new T("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:ma,query:G});}}});return function(G){return m.apply(this,arguments)}}();g._getQueryEngineResultForStats=function(){var m=d._asyncToGenerator(function*(G={},W,da){G=R.clone(G);let ja;try{G=yield this._schedule(()=>f.normalizeQuery(G,this.definitionExpression,
this.spatialReference),da),G=yield this._reschedule(()=>this._checkStatisticsSupport(G,W),da),ja=yield this._reschedule(()=>this._executeGeometryQuery(G,da),da),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(G),da),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(G),da),ja=yield this._reschedule(()=>ja.executeTimeQuery(G),da),ja=yield this._reschedule(()=>ja.executeAttributesQuery(G),da)}catch(na){if(na!==f.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new e([],null,this)}return ja});return function(){return m.apply(this,
arguments)}}();d._createClass(B,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const m=this.featureStore.fullBounds;return m?{xmin:m[0],ymin:m[1],xmax:m[2],ymax:m[3],spatialReference:f.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=r.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return B}();const X=w.create(),O=
w.create();l.Feature=function(B,g=null,m,G,W){this.attributes=B;this.geometry=m;this.centroid=G;this.filterFlags=W;this.groupId=-1;this.displayId=g};l.default=I;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(l,d,T,R){let q=function(){function A(v,t,F){this._namespace=v;this._storage=t;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=
":";F&&(this._storage.registerRemoveFunc(this._namespace,F),this._removeFunc=!0)}var w=A.prototype;w.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};w.resetHitRate=function(){this._hit=this._miss=0};w.put=function(v,t,F,L=0){this._storage.put(this._namespace+v,t,F,L)};w.get=function(v){v=this._storage.get(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};
w.pop=function(v){v=this._storage.pop(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};w.updateSize=function(v,t,F){this._storage.updateSize(this._namespace+v,t,F)};w.clear=function(){this._storage.clear(this._namespace)};w.clearAll=function(){this._storage.clearAll()};w.getStats=function(){return this._storage.getStats()};w.resetStats=function(){this._storage.resetStats()};d._createClass(A,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/
(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return A}(),D=function(){function A(v=10485760){this._maxSize=v;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new R;this._users=new R}var w=A.prototype;w.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};w.register=function(v){this._users.push(v)};w.deregister=function(v){this._users.removeUnordered(v)};
w.registerRemoveFunc=function(v,t){this._removeFuncs.push([v,t])};w.deregisterRemoveFunc=function(v){this._removeFuncs.filterInPlace(t=>t[0]!==v)};w.put=function(v,t,F,L){const J=this._db.get(v);J&&(this._size-=J.size,this._db.delete(v),J.entry!==t&&this._notifyRemove(v,J.entry,0));F>this._maxSize?this._notifyRemove(v,t,0):void 0===t?console.warn("Refusing to cache undefined entry "):!F||0>F?console.warn("Refusing to cache entry with invalid size "+F):(L=1+Math.max(L,-3)- -3,this._db.set(v,{entry:t,
size:F,lifetime:L,lives:L}),this._size+=F,this._checkSizeLimit())};w.updateSize=function(v,t,F){const L=this._db.get(v);if(L&&L.entry===t){for(this._size-=L.size;F>this._maxSize;)if(F=this._notifyRemove(v,t,1),!(T.isSome(F)&&0<F)){this._db.delete(v);return}L.size=F;this._size+=F;this._checkSizeLimit()}};w.pop=function(v){const t=this._db.get(v);if(t)return this._size-=t.size,this._db.delete(v),++this._hit,t.entry;++this._miss};w.get=function(v){const t=this._db.get(v);if(void 0===t)++this._miss;else return this._db.delete(v),
t.lives=t.lifetime,this._db.set(v,t),++this._hit,t.entry};w.getStats=function(){const v={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},F=[];this._db.forEach((u,C)=>{const c=u.lifetime;F[c]=(F[c]||0)+u.size;this._users.forAll(e=>{e=e.namespace;C.startsWith(e)&&(t[e]=(t[e]||0)+u.size)})});const L={};this._users.forAll(u=>{const C=u.namespace;!isNaN(u.hitRate)&&0<u.hitRate?(t[C]=
t[C]||0,L[C]=Math.round(100*u.hitRate)+"%"):L[C]="0%"});var J=Object.keys(t);J.sort((u,C)=>t[C]-t[u]);J.forEach(u=>v[u]=Math.round(t[u]/2**20)+"MB / "+L[u]);for(J=F.length-1;0<=J;--J){const u=F[J];u&&(v["Priority "+(J+-3-1)]=Math.round(u/this.size*100)+"%")}return v};w.resetStats=function(){this._hit=this._miss=0;this._users.forAll(v=>v.resetHitRate())};w.clear=function(v){this._db.forEach((t,F)=>{F.startsWith(v)&&(this._size-=t.size,this._db.delete(F),this._notifyRemove(F,t.entry,0))})};w.clearAll=
function(){this._db.forEach((v,t)=>this._notifyRemove(t,v.entry,0));this._size=0;this._db.clear()};w._getHitRate=function(){return this._hit/(this._hit+this._miss)};w._notifyRemove=function(v,t,F){let L;this._removeFuncs.some(J=>v.startsWith(J[0])?(J=J[1](t,F),"number"===typeof J&&(L=J),!0):!1);return L};w._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [v,t]of this._db){this._db.delete(v);if(1>=t.lives){this._size-=t.size;const F=this._notifyRemove(v,t.entry,1);T.isSome(F)&&
0<F&&(this._size+=F,t.lives=t.lifetime,t.size=F,this._db.set(v,t))}else--t.lives,this._db.set(v,t);if(this._size<=.9*this.maxSize)break}};d._createClass(A,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(v){this._maxSize=Math.max(v,0);this._checkSizeLimit()}}]);return A}();l.MIN_PRIORITY=-3;l.MemCache=q;l.MemCacheStorage=D;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(l,d,T,R,q,D,A,w,v,t,F,L,J){function u(z){const M=[];let aa=0,U=0;for(let ha=0;ha<z.length;ha++){const N=z[ha];let I=null;for(let X=0;X<N.length;X++)I=N[X],M.push(I),0===X?U=aa=I[0]:(aa=Math.min(aa,I[0]),U=Math.max(U,I[0]));I&&M.push([(aa+U)/2,0])}return M}function C(z,M){if(!(z instanceof w||z instanceof A))throw y.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new R("straightLineDensify: the input geometry is neither polyline nor polygon");var aa=v.getGeometryParts(z);
const U=[];for(const N of aa){aa=[];U.push(aa);aa.push([N[0][0],N[0][1]]);for(let I=0;I<N.length-1;I++){const X=N[I][0],O=N[I][1],B=N[I+1][0],g=N[I+1][1];var ha=Math.sqrt((B-X)*(B-X)+(g-O)*(g-O));const m=(g-O)/ha,G=(B-X)/ha,W=ha/M;if(1<W){for(let da=1;da<=W-1;da++){const ja=da*M;aa.push([G*ja+X,m*ja+O])}ha=(ha+Math.floor(W-1)*M)/2;aa.push([G*ha+X,m*ha+O])}aa.push([B,g])}}return"polygon"===z.type?new A({rings:U,spatialReference:z.spatialReference}):new w({paths:U,spatialReference:z.spatialReference})}
function c(z,M,aa){M&&(z=C(z,1E6),z=F.webMercatorToGeographic(z,!0));aa&&(z=v.updatePolyGeometry(z,aa));return z}function e(z,M,aa){if(Array.isArray(z)){var U=z[0];U>M?(aa=v.offsetMagnitude(U,M),z[0]=U+-2*aa*M):U<aa&&(M=v.offsetMagnitude(U,aa),z[0]=U+-2*M*aa)}else U=z.x,U>M?(aa=v.offsetMagnitude(U,M),z=z.clone().offset(-2*aa*M,0)):U<aa&&(M=v.offsetMagnitude(U,aa),z=z.clone().offset(-2*M*aa,0));return z}function p(z,M){let aa=-1;for(let U=0;U<M.cutIndexes.length;U++){const ha=M.cutIndexes[U],N=M.geometries[U],
I=v.getGeometryParts(N);for(let X=0;X<I.length;X++){const O=I[X];O.some(B=>{if(180>B[0])return!0;B=0;for(var g=0;g<O.length;g++){var m=O[g][0];B=m>B?m:B}B=Number(B.toFixed(9));B=-360*v.offsetMagnitude(B,180);for(g=0;g<O.length;g++)m=N.getPoint(X,g),N.setPoint(X,g,m.clone().offset(B,0));return!0})}if(ha===aa)if("polygon"===z[0].type)for(const X of v.getGeometryParts(N))z[ha]=z[ha].addRing(X);else{if("polyline"===z[0].type)for(const X of v.getGeometryParts(N))z[ha]=z[ha].addPath(X)}else aa=ha,z[ha]=
N}return z}function r(z,M,aa){return f.apply(this,arguments)}function f(){f=d._asyncToGenerator(function*(z,M,aa){var U;if(!Array.isArray(z))return r([z],M);M=null!=(U=null==M?void 0:M.url)?U:T.geometryServiceUrl;let ha,N,I;let X=0;var O=[];U=[];for(var B of z)if(D.isNone(B))U.push(B);else{if(!g){var g=B.spatialReference;var m=t.getInfo(g);var G=(ha=g.isWebMercator)?102100:4326;N=v.cutParams[G].maxX;I=v.cutParams[G].minX;var W=v.cutParams[G].plus180Line;G=v.cutParams[G].minus180Line}if(m)if("mesh"===
B.type)U.push(B);else if("point"===B.type)U.push(e(B.clone(),N,I));else if("multipoint"===B.type){var da=B.clone();da.points=da.points.map(ja=>e(ja,N,I));U.push(da)}else if("extent"===B.type)da=B.clone()._normalize(!1,!1,m),U.push(da.rings?new A(da):da);else if(B.extent){da=B.extent;const ja=2*v.offsetMagnitude(da.xmin,I)*N;let na=0===ja?B.clone():v.updatePolyGeometry(B.clone(),ja);da.offset(ja,0);da.intersects(W)&&da.xmax!==N?(X=da.xmax>X?da.xmax:X,na=c(na,ha),O.push(na),U.push("cut")):da.intersects(G)&&
da.xmin!==I?(X=2*da.xmax*N>X?2*da.xmax*N:X,na=c(na,ha,360),O.push(na),U.push("cut")):U.push(na)}else U.push(B.clone());else U.push(B)}g=v.offsetMagnitude(X,N);m=-90;W=g;for(B=new w;0<g;)G=-180+360*g,B.addPath([[G,m],[G,-1*m]]),m*=-1,g--;if(0<O.length&&0<W){g=yield L.cut(M,O,B,aa);g=p(O,g);m=[];O=[];for(W=0;W<U.length;W++)B=U[W],"cut"!==B?O.push(B):(B=g.shift(),G=z[W],D.isSome(G)&&"polygon"===G.type&&G.rings&&1<G.rings.length&&B.rings.length>=G.rings.length?(m.push(B),O.push("simplify")):O.push(ha?
F.geographicToWebMercator(B):B));if(!m.length)return O;U=yield J.simplify(M,m,aa);z=[];for(aa=0;aa<O.length;aa++)M=O[aa],"simplify"!==M?z.push(M):z.push(ha?F.geographicToWebMercator(U.shift()):U.shift());return z}z=[];for(aa=0;aa<U.length;aa++)M=U[aa],"cut"!==M?z.push(M):(M=O.shift(),z.push(!0===ha?F.geographicToWebMercator(M):M));return Promise.resolve(z)});return f.apply(this,arguments)}const y=q.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(z){if(!z)return null;
const M=z.extent;if(!M)return null;var aa=z.spatialReference&&t.getInfo(z.spatialReference);if(!aa)return M;const [U,ha]=aa.valid;({width:aa}=M);let {xmin:N,xmax:I}=M;[N,I]=[I,N];if("extent"===z.type||0===aa||aa<=ha||aa>2*ha||N<U||I>ha)return M;let X;switch(z.type){case "polygon":if(1<z.rings.length)X=u(z.rings);else return M;break;case "polyline":if(1<z.paths.length)X=u(z.paths);else return M;break;case "multipoint":X=z.points}z=M.clone();for(let O=0;O<X.length;O++){let B=X[O][0];0>B?(B+=ha,I=Math.max(B,
I)):(B-=ha,N=Math.min(B,N))}z.xmin=N;z.xmax=I;return z.width<aa?(z.xmin-=ha,z.xmax-=ha,z):M};l.normalizeCentralMeridian=r;l.normalizeMapX=function(z,M){if(M=t.getInfo(M)){const [aa,U]=M.valid;M=U-aa;if(z<aa)for(;z<aa;)z+=M;if(z>U)for(;z>U;)z-=M}return z};l.straightLineDensify=C;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(l,d,T,R){function q(A){return R.isPolygon(A)?
A.rings:A.paths}const D={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:T.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:T.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:T.WGS84}),minus180Line:new d({paths:[[[-180,
-180],[-180,180]]],spatialReference:T.WGS84})}};l.cutParams=D;l.getGeometryParts=q;l.getSpatialReferenceMinMaxX=function(A){A=(null==A?0:A.isWebMercator)?102100:4326;return[D[A].minX,D[A].maxX]};l.offsetMagnitude=function(A,w){return Math.ceil((A-w)/(2*w))};l.updatePolyGeometry=function(A,w){const v=q(A);for(const t of v)for(const F of t)F[0]+=w;return A};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(l,d,T,R,q,D){function A(){A=d._asyncToGenerator(function*(w,v,t,F){w="string"===typeof w?q.urlToObject(w):w;const L=v[0].spatialReference;v={...F,query:{...w.query,f:"json",sr:JSON.stringify(L),target:JSON.stringify({geometryType:D.getJsonType(v[0]),geometries:v}),cutter:JSON.stringify(t)}};v=yield R(w.path+"/cut",v);const {cutIndexes:J,geometries:u=[]}=v.data;return{cutIndexes:J,geometries:u.map(C=>{C=D.fromJSON(C);C.spatialReference=L;return C})}});return A.apply(this,arguments)}l.cut=
function(w,v,t,F){return A.apply(this,arguments)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(l,d,T,R,q){function D(){D=d._asyncToGenerator(function*(v,t,F){const L="string"===typeof v?R.urlToObject(v):v;v=t[0].spatialReference;const J=q.getJsonType(t[0]);t={...F,query:{...L.query,f:"json",sr:v.wkid?v.wkid:JSON.stringify(v),
geometries:JSON.stringify(A(t))}};t=yield T(L.path+"/simplify",t);return w(t.data,J,v)});return D.apply(this,arguments)}function A(v){return{geometryType:q.getJsonType(v[0]),geometries:v.map(t=>t.toJSON())}}function w(v,t,F){const L=q.getGeometryType(t);return v.map(J=>{J=L.fromJSON(J);J.spatialReference=F;return J})}l.simplify=function(v,t,F){return D.apply(this,arguments)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(l,d,T){function R(v,t){return v?A.get(v,t):null}function q(v,t,F,L=!0){const J=[];for(const u of t)if("*"!==u&&!v.has(u))if(L){t=D(u);try{const C=R(t,v);if(!C)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:t});if(!C.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:C});q(v,C.fieldNames,"expression contains missing fields")}catch(C){if((t=C&&C.details)&&
(t.clause||t.where))throw C;t&&t.missingFields?J.push(...t.missingFields):J.push(u)}}else J.push(u);if(J.length)throw new d("feature-store:unsupported-query",F,{missingFields:J});}function D(v){return v.split(" as ")[0]}const A=new T.WhereClauseCache(50,500),w=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));l.getAliasFromFieldName=function(v){return v.split(" as ")[1]};l.getExpressionFromFieldName=
D;l.getWhereClause=R;l.hasInvalidFieldType=function(v,t){return(v=t.get(v))?!w.has(v.type):!1};l.validateFields=q;l.validateHaving=function(v,t,F){if(!t)return!0;const L=A.get(t,v);if(!L)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:t});if(!L.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:t});q(v,L.fieldNames,"having contains missing fields");if(!L.getExpressions().every(J=>{const {aggregateType:u,
field:C}=J,c=v.has(C)&&v.get(C).name;return F.some(e=>{const {onStatisticField:p,statisticType:r}=e;return(v.has(p)&&v.get(p).name)===c&&r.toLowerCase().trim()===u})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:t});return!0};l.validateWhere=function(v,t){if(!t)return!0;const F=A.get(t,v);if(!F)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:t});if(!F.isStandardized)throw new d("feature-store:unsupported-query",
"where clause is not standard",{where:t});q(v,F.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(l,d,T){let R=function(){function q(D,A){this._cache=new d(D);this._invalidCache=new d(A)}q.prototype.get=function(D,A){const w=`${A.uid}:${D}`,v=this._cache.get(w);if(v)return v;if(void 0!==this._invalidCache.get(w))return null;try{const t=
T.WhereClause.create(D,A);this._cache.put(w,t);return t}catch{return this._invalidCache.put(w,null),null}};return q}();l.WhereClauseCache=R;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(l){return function(){function d(R,q){this._storage=new l.MemCacheStorage;this._storage.maxSize=R;q&&this._storage.registerRemoveFunc("",q)}var T=d.prototype;T.put=function(R,q){this._storage.put(R,q,1,1)};T.pop=function(R){return this._storage.pop(R)};
T.get=function(R){return this._storage.get(R)};T.clear=function(){this._storage.clearAll()};T.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(l,d,T,R,q,D){function A(O,B){O+="";return O.length>=B?O:Array(B-O.length+1).join("0")+O}function w(O,B,g="0",m="0",G="0",W="0",da="",ja="0",na="0"){return"+"===da||"-"===
da?(O=`${A(parseInt(O,10),4)}-${A(parseInt(B,10),2)}-${A(parseInt(g,10),2)}`,B="",10>parseFloat(W)&&(B="0"),m=`${A(parseInt(m,10),2)}:${A(parseInt(G,10),2)}:${B+parseFloat(W).toString()}`,da=`${da}${A(parseInt(ja,10),2)}:${A(parseInt(na,10),2)}`,new Date(O+"T"+m+da)):new Date(parseInt(O,10),parseInt(B,10)-1,parseInt(g,10),parseInt(m,10),parseInt(G,10),parseFloat(W))}function v(O){let B=z.exec(O);if(null!==B){const [,g,m,G,W,da,ja]=B;return w(g,m,G,W,da,ja)}B=M.exec(O);if(null!==B){const [,g,m,G,W,
da,ja,na,ua,ma]=B;return w(g,m,G,W,da,ja,na,ua,ma)}B=aa.exec(O);if(null!==B){const [,g,m,G,W,da,ja,na,ua]=B;return w(g,m,G,W,da,"0",ja,na,ua)}B=U.exec(O);if(null!==B){const [,g,m,G,W,da]=B;return w(g,m,G,W,da)}B=y.exec(O);if(null!==B){const [,g,m,G]=B;return w(g,m,G)}throw Error("SQL Invalid Timestamp");}function t(O){O=y.exec(O);if(null===O)throw Error("SQL Invalid Date");const [,B,g,m]=O;return new Date(parseInt(B,10),parseInt(g,10)-1,parseInt(m,10))}function F(O){return Array.isArray(O)?O:[O]}
function L(O){return null!==O?!0!==O:null}function J(O,B){return null!=O&&null!=B?!0===O&&!0===B:!1===O||!1===B?!1:null}function u(O,B){return null!=O&&null!=B?!0===O||!0===B:!0===O||!0===B?!0:null}function C(O,B){if(null==O)return null;let g=!1;for(const m of B)if(null==m)g=null;else if(O===m){g=!0;break}return g}function c(O,B,g){if(null==O)return null;let m="",G=0;for(let W=0;W<B.length;W++){const da=B.charAt(W);switch(G){case 0:da===g?G=1:m=0<="-[]/{}()*+?.\\^$|".indexOf(da)?m+("\\"+da):"%"===
da?m+".*":"_"===da?m+".":m+da;break;case 1:m=0<="-[]/{}()*+?.\\^$|".indexOf(da)?m+("\\"+da):m+da,G=0}}return(new RegExp("^"+m+"$")).test(O)}function e(O){return O instanceof Date?O.valueOf():O}function p(O,B,g){if(null==B||null==g)return null;B=e(B);g=e(g);switch(O){case "\x3c\x3e":return B!==g;case "\x3d":return B===g;case "\x3e":return B>g;case "\x3c":return B<g;case "\x3e\x3d":return B>=g;case "\x3c\x3d":return B<=g}}function r(O,B,g){if(B instanceof q.SqlInterval)if(g instanceof Date)switch(O){case "+":return new Date(B.valueInMilliseconds()+
g.getTime());case "-":return B.valueInMilliseconds()-g.getTime();case "*":return B.valueInMilliseconds()*g.getTime();case "/":return B.valueInMilliseconds()/g.getTime()}else if(g instanceof q.SqlInterval)switch(O){case "+":return q.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()+g.valueInMilliseconds());case "-":return q.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()-g.valueInMilliseconds());case "*":return B.valueInMilliseconds()*g.valueInMilliseconds();case "/":return B.valueInMilliseconds()/
g.valueInMilliseconds()}else B=B.valueInMilliseconds();else if(g instanceof q.SqlInterval)if(B instanceof Date)switch(O){case "+":return new Date(g.valueInMilliseconds()+B.getTime());case "-":return new Date(B.getTime()-g.valueInMilliseconds());case "*":return B.getTime()*g.valueInMilliseconds();case "/":return B.getTime()/g.valueInMilliseconds()}else g=g.valueInMilliseconds();else if(B instanceof Date&&"number"===typeof g)switch(g*=864E5,B=B.getTime(),O){case "+":return new Date(B+g);case "-":return new Date(B-
g);case "*":return new Date(B*g);case "/":return new Date(B/g)}else if(g instanceof Date&&"number"===typeof B)switch(B*=864E5,g=g.getTime(),O){case "+":return new Date(B+g);case "-":return new Date(B-g);case "*":return new Date(B*g);case "/":return new Date(B/g)}switch(O){case "+":return B+g;case "-":return B-g;case "*":return B*g;case "/":return B/g}}function f(O,B,g,m){O=m.getAttribute(O,B);return null!=O&&1===g[B]?new Date(O):O}const y=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
M=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,aa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,U=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ha=new Set(["current_timestamp","current_date","current_time"]);let N=function(){function O(){}O.makeBool=function(B){return!0===B};O.featureValue=function(B,g,m,G){return f(B,g,m,G)};O.equalsNull=function(B){return null===B};O.applyLike=function(B,g,m){return c(B,
g,m)};O.ensureArray=function(B){return F(B)};O.applyIn=function(B,g){return C(B,g)};O.currentDate=function(){const B=new Date;B.setHours(0,0,0,0);return B};O.makeSqlInterval=function(B,g,m){return q.SqlInterval.createFromValueAndQualifer(B,g,m)};O.convertInterval=function(B){return B instanceof q.SqlInterval?B.valueInMilliseconds():B};O.currentTimestamp=function(){return new Date};O.compare=function(B,g,m){return p(B,g,m)};O.calculate=function(B,g,m){return r(B,g,m)};O.makeComparable=function(B){return e(B)};
O.evaluateFunction=function(B,g){return q.evaluateFunction(B,g)};O.lookup=function(B,g){B=g[B];return void 0===B?null:B};O.between=function(B,g){return null==B||null==g[0]||null==g[1]?null:B>=g[0]&&B<=g[1]};O.notbetween=function(B,g){return null==B||null==g[0]||null==g[1]?null:B<g[0]||B>g[1]};O.ternaryNot=function(B){return L(B)};O.ternaryAnd=function(B,g){return J(B,g)};O.ternaryOr=function(B,g){return u(B,g)};return O}(),I=function(){function O(g,m){this.fieldsIndex=m;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=D.WhereGrammar.parse(g);const {isStandardized:G,isAggregate:W,referencedFieldNames:da}=this.extractExpressionInfo(m);this.referencedFieldNames=da;this.isStandardized=G;this.isAggregate=W}O.create=function(g,m){return new O(g,m)};var B=O.prototype;B.testSet=function(g,m=X){const G={};for(const W of this.fieldNames)G[W]=g.map(da=>m.getAttribute(da,W));return!!this.evaluateNode(this.parseTree,{attributes:G},X)};B.calculateValue=function(g,m=X){g=this.evaluateNode(this.parseTree,
g,m);return g instanceof q.SqlInterval?g.valueInMilliseconds()/864E5:g};B.calculateValueCompiled=function(g,m=X){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(g,this.parameters,m,this.datefields);if(T("esri-csp-restrictions"))return this.calculateValue(g,m);this.compileMe();return this.parseTree._compiledVersion(g,this.parameters,m,this.datefields)};B.testFeature=function(g,m=X){return!!this.evaluateNode(this.parseTree,g,m)};B.testFeatureCompiled=function(g,m=X){if(null!=
this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(g,this.parameters,m,this.datefields);if(T("esri-csp-restrictions"))return this.testFeature(g,m);this.compileMe();return!!this.parseTree._compiledVersion(g,this.parameters,m,this.datefields)};B.getFunctions=function(){const g=new Set;this.visitAll(this.parseTree,m=>{"function"===m.type&&g.add(m.name.toLowerCase())});return Array.from(g)};B.getExpressions=function(){const g=new Map;this.visitAll(this.parseTree,m=>{if("function"===
m.type){const G=m.name.toLowerCase();m=m.args.value[0];if("column_ref"===m.type){m=m.column;const W=`${G}-${m}`;g.has(W)||g.set(W,{aggregateType:G,field:m})}}});return[...g.values()]};B.getVariables=function(){const g=new Set;this.visitAll(this.parseTree,m=>{"param"===m.type&&g.add(m.value.toLowerCase())});return Array.from(g)};B.compileMe=function(){const g="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups",
"attributeAdapter","datefields",g)).bind(N)};B.extractExpressionInfo=function(g){const m=[],G=new Set;let W=!0,da=!0;this.visitAll(this.parseTree,ja=>{switch(ja.type){case "column_ref":{const na=g.get(ja.column);let ua,ma;na?ua=ma=na.name:(ma=ja.column,ua=ma.toLowerCase());!na||"date"!==na.type&&"esriFieldTypeDate"!==na.type||(this.datefields[na.name]=1);G.has(ua)||(G.add(ua),m.push(ma));ja.column=ma;break}case "function":{const {name:na,args:ua}=ja;ja=ua.value.length;W&&(W=q.isStandardized(na,ja));
da&&(da=R.isAggregate(na,ja))}}});return{referencedFieldNames:Array.from(m),isStandardized:W,isAggregate:da}};B.visitAll=function(g,m){if(null!=g)switch(m(g),g.type){case "when_clause":this.visitAll(g.operand,m);this.visitAll(g.value,m);break;case "case_expression":for(const G of g.clauses)this.visitAll(G,m);"simple"===g.format&&this.visitAll(g.operand,m);null!==g.else&&this.visitAll(g.else,m);break;case "expr_list":for(const G of g.value)this.visitAll(G,m);break;case "unary_expr":this.visitAll(g.expr,
m);break;case "binary_expr":this.visitAll(g.left,m);this.visitAll(g.right,m);break;case "function":this.visitAll(g.args,m)}};B.evaluateNodeToJavaScript=function(g){switch(g.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(g.value)+", "+JSON.stringify(g.qualifier)+","+JSON.stringify(g.op)+")";case "case_expression":var m="";if("simple"===g.format){var G="this.makeComparable("+this.evaluateNodeToJavaScript(g.operand)+")";m="( ";for(let W=0;W<g.clauses.length;W++)m+=
" ("+G+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(g.clauses[W].operand)+")) ? ("+this.evaluateNodeToJavaScript(g.clauses[W].value)+") : "}else for(m="( ",G=0;G<g.clauses.length;G++)m+=" this.makeBool("+this.evaluateNodeToJavaScript(g.clauses[G].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(g.clauses[G].value)+") : ";m=null!==g.else?m+this.evaluateNodeToJavaScript(g.else):m+"null";return m+=" )";case "param":return"this.lookup("+JSON.stringify(g.value.toLowerCase())+
",lookups)";case "expr_list":m="[";for(G of g.value)"["!==m&&(m+=","),m+=this.evaluateNodeToJavaScript(G);return m+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(g.expr)+")";case "binary_expr":switch(g.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+" )";case "IS":if("null"!==
g.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(g.left)+")";case "ISNOT":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(g.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(g.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(g.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(g.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(g.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+","+JSON.stringify(g.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+","+JSON.stringify(g.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(g.operator)+","+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(g.operator)+","+this.evaluateNodeToJavaScript(g.left)+","+this.evaluateNodeToJavaScript(g.right)+
")"}throw Error("Not Supported Operator "+g.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(g.value);case "date":return"(new Date("+t(g.value).getTime().toString()+"))";case "timestamp":return"(new Date("+v(g.value).getTime().toString()+"))";case "current_time":return"date"===g.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(g.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(g.name)+","+this.evaluateNodeToJavaScript(g.args)+")"}throw Error("Unsupported sql syntax "+g.type);};B.evaluateNode=function(g,m,G){switch(g.type){case "interval":return m=this.evaluateNode(g.value,m,G),q.SqlInterval.createFromValueAndQualifer(m,g.qualifier,g.op);case "case_expression":if("simple"===g.format){var W=e(this.evaluateNode(g.operand,m,G));for(var da=0;da<g.clauses.length;da++)if(W===e(this.evaluateNode(g.clauses[da].operand,m,G)))return this.evaluateNode(g.clauses[da].value,
m,G)}else for(W=0;W<g.clauses.length;W++)if(!0===this.evaluateNode(g.clauses[W].operand,m,G))return this.evaluateNode(g.clauses[W].value,m,G);return null!==g.else?this.evaluateNode(g.else,m,G):null;case "param":return this.parameters[g.value.toLowerCase()];case "expr_list":W=[];for(da of g.value)W.push(this.evaluateNode(da,m,G));return W;case "unary_expr":return L(this.evaluateNode(g.expr,m,G));case "binary_expr":switch(g.operator){case "AND":return J(this.evaluateNode(g.left,m,G),this.evaluateNode(g.right,
m,G));case "OR":return u(this.evaluateNode(g.left,m,G),this.evaluateNode(g.right,m,G));case "IS":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(g.left,m,G);case "ISNOT":if("null"!==g.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(g.left,m,G);case "IN":return W=F(this.evaluateNode(g.right,m,G)),C(this.evaluateNode(g.left,m,G),W);case "NOT IN":return W=F(this.evaluateNode(g.right,m,G)),L(C(this.evaluateNode(g.left,m,G),
W));case "BETWEEN":return W=this.evaluateNode(g.left,m,G),g=this.evaluateNode(g.right,m,G),null==W||null==g[0]||null==g[1]?null:W>=e(g[0])&&W<=e(g[1]);case "NOTBETWEEN":return W=this.evaluateNode(g.left,m,G),g=this.evaluateNode(g.right,m,G),null==W||null==g[0]||null==g[1]?null:W<e(g[0])||W>e(g[1]);case "LIKE":return c(this.evaluateNode(g.left,m,G),this.evaluateNode(g.right,m,G),g.escape);case "NOT LIKE":return L(c(this.evaluateNode(g.left,m,G),this.evaluateNode(g.right,m,G),g.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return p(g.operator,
this.evaluateNode(g.left,m,G),this.evaluateNode(g.right,m,G));case "-":case "+":case "*":case "/":return r(g.operator,this.evaluateNode(g.left,m,G),this.evaluateNode(g.right,m,G))}case "null":case "bool":case "string":case "number":return g.value;case "date":return t(g.value);case "timestamp":return v(g.value);case "current_time":return m=new Date,"date"===g.mode&&m.setHours(0,0,0,0),m;case "column_ref":return f(m,g.column,this.datefields,G);case "function":return m=this.evaluateNode(g.args,m,G),
this.isAggregate?R.aggregateFunction(g.name,m):q.evaluateFunction(g.name,m)}throw Error("Unsupported sql syntax "+g.type);};d._createClass(O,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this.visitAll(this.parseTree,g=>{"current_time"===g.type?this._hasDateFunctions=!0:"function"===g.type&&(this._hasDateFunctions=this._hasDateFunctions||ha.has(g.name.toLowerCase()))});
return this._hasDateFunctions}}]);return O}();const X={getAttribute(O,B){return(O&&"object"===typeof O.attributes?O.attributes:O)[B]}};l.WhereClause=I;l.defaultAttributeAdapter=X;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(l){function d(q){let D=0;for(let A=0;A<q.length;A++)D+=q[A];return D/q.length}function T(q){const D=d(q),A=q.length;let w=0;for(const v of q)w+=(v-D)**2;return 1<A?w/(A-1):0}const R={min:{minParams:1,
maxParams:1,evaluate:q=>null==q[0]?null:Math.min.apply(Math,q[0])},max:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.max.apply(Math,q[0])},avg:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:d(q[0])},sum:{minParams:1,maxParams:1,evaluate:q=>{if(null==q[0])q=null;else{{q=q[0];let D=0;for(let A=0;A<q.length;A++)D+=q[A];q=D}}return q}},stddev:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sqrt(T(q[0]))},count:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].length},
var:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:T(q[0])}};l.aggregateFunction=function(q,D){const A=R[q.toLowerCase()];if(null==A)throw Error("Function Not Recognised");if(D.length<A.minParams||D.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return A.evaluate(D)};l.isAggregate=function(q,D){q=R[q.toLowerCase()];return null!=q&&D>=q.minParams&&D<=q.maxParams};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports",
"../string"],function(l,d){let T=function(){function q(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}q.fixDefaults=function(D){if(null!==D.precision||null!==D.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};q.createFromMilliseconds=function(D){const A=new q;A.second=D/1E3;return A};q.createFromValueAndQualifer=function(D,A,w){let v=null;const t=new q;t.op="-"===w?"-":"+";if("interval-period"===A.type){q.fixDefaults(A);if("year"===
A.period||"month"===A.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(D))t[A.period]=parseFloat(D);else throw Error("Illegal Interval");}else{q.fixDefaults(A.start);q.fixDefaults(A.end);if("year"===A.start.period||"month"===A.start.period)throw Error("Year-Month Intervals not supported");if("year"===A.end.period||"month"===A.end.period)throw Error("Year-Month Intervals not supported");switch(A.start.period){case "day":switch(A.end.period){case "hour":v=/^[0-9]{1,} [0-9]{1,}$/;
if(v.test(D))t[A.start.period]=parseFloat(D.split(" ")[0]),t[A.end.period]=parseFloat(D.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":v=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(v.test(D))t[A.start.period]=parseFloat(D.split(" ")[0]),D=D.split(" ")[1].split(":"),t.hour=parseFloat(D[0]),t.minute=parseFloat(D[1]);else throw Error("Illegal Interval");break;case "second":v=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(v.test(D))t[A.start.period]=parseFloat(D.split(" ")[0]),
D=D.split(" ")[1].split(":"),t.hour=parseFloat(D[0]),t.minute=parseFloat(D[1]),t.second=parseFloat(D[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(A.end.period){case "minute":v=/^[0-9]{1,}:[0-9]{1,}$/;if(v.test(D))t.hour=parseFloat(D.split(":")[0]),t.minute=parseFloat(D.split(":")[1]);else throw Error("Illegal Interval");break;case "second":v=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(v.test(D))D=D.split(":"),t.hour=parseFloat(D[0]),
t.minute=parseFloat(D[1]),t.second=parseFloat(D[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(A.end.period){case "second":v=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(v.test(D))D=D.split(":"),t.minute=parseFloat(D[0]),t.second=parseFloat(D[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return t};q.prototype.valueInMilliseconds=function(){return("-"===this.op?
-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return q}();const R={extract:{minParams:2,maxParams:2,evaluate:([q,D])=>{if(null==D)return null;if(D instanceof Date)switch(q.toUpperCase()){case "SECOND":return D.getSeconds();case "MINUTE":return D.getMinutes();case "HOUR":return D.getHours();case "DAY":return D.getDate();case "MONTH":return D.getMonth()+1;case "YEAR":return D.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");
}},substring:{minParams:2,maxParams:3,evaluate:q=>{if(2===q.length){const [D,A]=q;return null==D||null==A?null:D.toString().substring(A-1)}if(3===q.length){const [D,A,w]=q;return null==D||null==A||null==w?null:0>=w?"":D.toString().substring(A-1,A+w-1)}}},position:{minParams:2,maxParams:2,evaluate:([q,D])=>null==q||null==D?null:D.indexOf(q)+1},trim:{minParams:2,maxParams:3,evaluate:q=>{var D=3===q.length,A=D?q[1]:" ";D=D?q[2]:q[1];if(null==A||null==D)return null;A=`(${d.escapeRegExpString(A)})`;switch(q[0]){case "BOTH":return D.replace(new RegExp(`^${A}*|${A}*$`,
"g"),"");case "LEADING":return D.replace(new RegExp(`^${A}*`,"g"),"");case "TRAILING":return D.replace(new RegExp(`${A}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.abs(q[0])},ceiling:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.ceil(q[0])},floor:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.floor(q[0])},log:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])},log10:{minParams:1,
maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sin(q[0])},cos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.cos(q[0])},tan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.tan(q[0])},asin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.asin(q[0])},acos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.acos(q[0])},atan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.atan(q[0])},
sign:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:0<q[0]?1:0>q[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]**q[1]},mod:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]%q[1]},round:{minParams:1,maxParams:2,evaluate:q=>{const D=q[0];q=2===q.length?10**q[1]:1;return null==D?null:Math.round(D*q)/q}},truncate:{minParams:1,maxParams:2,evaluate:q=>null==q[0]?null:1===q.length?parseInt(q[0].toFixed(0),10):parseFloat(q[0].toFixed(q[1]))},
char_length:{minParams:1,maxParams:1,evaluate:q=>"string"===typeof q[0]||q[0]instanceof String?q[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:q=>{let D="";for(let A=0;A<q.length;A++){if(null==q[A])return null;D+=q[A].toString()}return D}},lower:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toUpperCase()}};l.SqlInterval=T;l.evaluateFunction=function(q,D){const A=R[q.toLowerCase()];
if(null==A)throw Error("Function Not Recognised");if(D.length<A.minParams||D.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return A.evaluate(D)};l.isStandardized=function(q,D){q=R[q.toLowerCase()];return null!=q&&D>=q.minParams&&D<=q.maxParams};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(l,d){var T={exports:{}};(function(q){(function(D,A){q.exports&&
(q.exports=A())})(d.commonjsGlobal,function(){function D(w,v,t,F){w=Error.call(this,w);Object.setPrototypeOf&&Object.setPrototypeOf(w,D.prototype);w.expected=v;w.found=t;w.location=F;w.name="SyntaxError";return w}function A(w,v,t){t=t||" ";if(w.length>v)return w;v-=w.length;t+=t.repeat(v);return w+t.slice(0,v)}(function(w,v){function t(){this.constructor=w}t.prototype=v.prototype;w.prototype=new t})(D,Error);D.prototype.format=function(w){var v="Error: "+this.message;if(this.location){var t=null,
F;for(F=0;F<w.length;F++)if(w[F].source===this.location.source){t=w[F].text.split(/\r\n|\n|\r/g);break}w=this.location.start;F=this.location.source+":"+w.line+":"+w.column;if(t){var L=this.location.end,J=A("",w.line.toString().length);t=t[w.line-1];L=w.line===L.line?L.column:t.length+1;v+="\n --\x3e "+F+"\n"+J+" |\n"+w.line+" | "+t+"\n"+J+" | "+A("",w.column-1)+A("",L-w.column,"^")}else v+="\n at "+F}return v};D.buildMessage=function(w,v){function t(C){return C.charCodeAt(0).toString(16).toUpperCase()}
function F(C){return C.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+t(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+t(c)})}function L(C){return C.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+
t(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+t(c)})}function J(C){return u[C.type](C)}var u={literal:function(C){return'"'+F(C.text)+'"'},class:function(C){var c=C.parts.map(function(e){return Array.isArray(e)?L(e[0])+"-"+L(e[1]):L(e)});return"["+(C.inverted?"^":"")+c+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(C){return C.description}};return"Expected "+function(C){C=C.map(J);var c,e;C.sort();if(0<C.length){for(e=c=1;c<C.length;c++)C[c-
1]!==C[c]&&(C[e]=C[c],e++);C.length=e}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(w)+" but "+(v?'"'+F(v)+'"':"end of input")+" found."};return{SyntaxError:D,parse:function(w,v){function t(x,H){return{type:"literal",text:x,ignoreCase:H}}function F(x,H,Y){return{type:"class",parts:x,inverted:H,ignoreCase:Y}}function L(x){var H=ac[x],Y;if(!H){for(Y=x-1;!ac[Y];)Y--;H=ac[Y];for(H={line:H.line,column:H.column};Y<x;)10===
w.charCodeAt(Y)?(H.line++,H.column=1):H.column++,Y++;ac[x]=H}return H}function J(x,H){var Y=L(x),ra=L(H);return{source:$a,start:{offset:x,line:Y.line,column:Y.column},end:{offset:H,line:ra.line,column:ra.column}}}function u(x){h<pb||(h>pb&&(pb=h,tc=[]),tc.push(x))}function C(){var x=h;sa();var H=e();H!==b?(sa(),x=H):(h=x,x=b);return x}function c(){var x=h;var H=e();if(H!==b){x=[];var Y=h;var ra=sa();var Ba=Fa();if(Ba!==b){var La=sa();var Ma=e();Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)}else h=Y,Y=b;for(;Y!==
b;)x.push(Y),Y=h,ra=sa(),Ba=Fa(),Ba!==b?(La=sa(),Ma=e(),Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)):(h=Y,Y=b);Y={type:"expr_list"};H=[H];for(ra=0;ra<x.length;ra++)H.push(x[ra][3]);Y.value=H;x=Y}else h=x,x=b;return x}function e(){var x=h;var H=p();if(H!==b){x=[];var Y=h;var ra=sa();var Ba=Q();if(Ba!==b){var La=sa();var Ma=p();Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)}else h=Y,Y=b;for(;Y!==b;)x.push(Y),Y=h,ra=sa(),Ba=Q(),Ba!==b?(La=sa(),Ma=p(),Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)):(h=Y,Y=b);x=Va(H,x)}else h=x,x=
b;return x}function p(){var x=h;var H=r();if(H!==b){x=[];var Y=h;var ra=sa();var Ba=E();if(Ba!==b){var La=sa();var Ma=r();Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)}else h=Y,Y=b;for(;Y!==b;)x.push(Y),Y=h,ra=sa(),Ba=E(),Ba!==b?(La=sa(),Ma=r(),Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)):(h=Y,Y=b);x=Va(H,x)}else h=x,x=b;return x}function r(){var x=h;var H=n();if(H===b){H=h;if(33===w.charCodeAt(h)){var Y=tb;h++}else Y=b,0===ta&&u(ld);if(Y!==b){var ra=h;ta++;if(61===w.charCodeAt(h)){var Ba=jb;h++}else Ba=b,0===ta&&
u(Jc);ta--;Ba===b?ra=void 0:(h=ra,ra=b);ra!==b?H=Y=[Y,ra]:(h=H,H=b)}else h=H,H=b}H!==b?(Y=sa(),ra=r(),ra!==b?x={type:"unary_expr",operator:"NOT",expr:ra}:(h=x,x=b)):(h=x,x=b);if(x===b){H=h;x=M();if(x!==b){sa();H=[];Y=h;ra=sa();Ba=f();if(Ba!==b){var La=sa();var Ma=M();Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)}else h=Y,Y=b;if(Y!==b)for(;Y!==b;)H.push(Y),Y=h,ra=sa(),Ba=f(),Ba!==b?(La=sa(),Ma=M(),Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)):(h=Y,Y=b);else H=b;H!==b&&(H={type:"arithmetic",tail:H});H===b&&(H=h,Y=z(),
Y!==b?(sa(),ra=Ga(),ra!==b?(sa(),ra=c(),ra!==b?(sa(),Ba=Pa(),Ba!==b?H={op:Y,right:ra}:(h=H,H=b)):(h=H,H=b)):(h=H,H=b)):(h=H,H=b),H===b&&(H=h,Y=z(),Y!==b?(sa(),ra=Ga(),ra!==b?(sa(),ra=Pa(),ra!==b?H={op:Y,right:{type:"expr_list",value:[]}}:(h=H,H=b)):(h=H,H=b)):(h=H,H=b),H===b&&(H=h,Y=z(),Y!==b?(sa(),ra=g(),ra!==b?H={op:Y,right:ra}:(h=H,H=b)):(h=H,H=b))),H===b&&(H=h,Ba=n(),Ba!==b?(sa(),Y=S(),Y!==b?(sa(),ra=M(),ra!==b?(sa(),La=E(),La!==b?(sa(),Ba=M(),Ba!==b?H={op:"NOT"+Y,right:{type:"expr_list",value:[ra,
Ba]}}:(h=H,H=b)):(h=H,H=b)):(h=H,H=b)):(h=H,H=b)):(h=H,H=b),H===b&&(H=h,Ba=S(),Ba!==b?(sa(),Y=M(),Y!==b?(sa(),ra=E(),ra!==b?(sa(),La=M(),La!==b?H={op:Ba,right:{type:"expr_list",value:[Y,La]}}:(h=H,H=b)):(h=H,H=b)):(h=H,H=b)):(h=H,H=b)),H===b&&(H=h,Y=k(),Y!==b?(sa(),ra=n(),ra!==b?(sa(),ra=M(),ra!==b?H={op:Y+"NOT",right:ra}:(h=H,H=b)):(h=H,H=b)):(h=H,H=b),H===b&&(H=h,Y=k(),Y!==b?(sa(),ra=M(),ra!==b?H={op:Y,right:ra}:(h=H,H=b)):(h=H,H=b)),H===b&&(H=h,Y=y(),Y!==b?(sa(),ra=na(),ra!==b?(sa(),Ba=h,w.substr(h,
6).toLowerCase()===Ua?(La=w.substr(h,6),h+=6):(La=b,0===ta&&u(md)),La!==b?(La=h,ta++,Ma=O(),ta--,Ma===b?La=void 0:(h=La,La=b),La!==b?Ba="ESCAPE":(h=Ba,Ba=b)):(h=Ba,Ba=b),Ba!==b?(sa(),Ba=ua(),Ba!==b?H={op:Y,right:ra,escape:Ba.value}:(h=H,H=b)):(h=H,H=b)):(h=H,H=b)):(h=H,H=b),H===b&&(H=h,Y=y(),Y!==b?(sa(),ra=na(),ra!==b?H={op:Y,right:ra,escape:""}:(h=H,H=b)):(h=H,H=b))))));H===b&&(H=null);""==H||void 0==H||null==H?H=x:(Y=null,H=Y="arithmetic"==H.type?Va(x,H.tail):Ta(H.op,x,H.right,H.escape))}else h=
H,H=b;x=H}return x}function f(){if(w.substr(h,2)===Ab){var x=Ab;h+=2}else x=b,0===ta&&u(nd);x===b&&(62===w.charCodeAt(h)?(x=Zb,h++):(x=b,0===ta&&u(od)),x===b&&(w.substr(h,2)===Cb?(x=Cb,h+=2):(x=b,0===ta&&u(pd)),x===b&&(w.substr(h,2)===$b?(x=$b,h+=2):(x=b,0===ta&&u(qd)),x===b&&(60===w.charCodeAt(h)?(x=kb,h++):(x=b,0===ta&&u(rd)),x===b&&(61===w.charCodeAt(h)?(x=jb,h++):(x=b,0===ta&&u(Jc)),x===b&&(w.substr(h,2)===sb?(x=sb,h+=2):(x=b,0===ta&&u(sd))))))));return x}function y(){var x=x=h;var H=n();if(H!==
b){var Y=sa();var ra=V();ra!==b?x=H=[H,Y,ra]:(h=x,x=b)}else h=x,x=b;x!==b&&(x=x[0]+" "+x[2]);x===b&&(x=V());return x}function z(){var x=x=h;var H=n();if(H!==b){var Y=sa();var ra=a();ra!==b?x=H=[H,Y,ra]:(h=x,x=b)}else h=x,x=b;x!==b&&(x=x[0]+" "+x[2]);x===b&&(x=a());return x}function M(){var x=h;var H=U();if(H!==b){x=[];var Y=h;var ra=sa();var Ba=aa();if(Ba!==b){var La=sa();var Ma=U();Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)}else h=Y,Y=b;for(;Y!==b;)x.push(Y),Y=h,ra=sa(),Ba=aa(),Ba!==b?(La=sa(),Ma=U(),Ma!==
b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)):(h=Y,Y=b);x=Va(H,x)}else h=x,x=b;return x}function aa(){if(43===w.charCodeAt(h)){var x=Ra;h++}else x=b,0===ta&&u(uc);x===b&&(45===w.charCodeAt(h)?(x=eb,h++):(x=b,0===ta&&u(vc)));return x}function U(){var x=h;var H=N();if(H!==b){x=[];var Y=h;var ra=sa();var Ba=ha();if(Ba!==b){var La=sa();var Ma=N();Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)}else h=Y,Y=b;for(;Y!==b;)x.push(Y),Y=h,ra=sa(),Ba=ha(),Ba!==b?(La=sa(),Ma=N(),Ma!==b?Y=ra=[ra,Ba,La,Ma]:(h=Y,Y=b)):(h=Y,Y=b);x=Va(H,x)}else h=
x,x=b;return x}function ha(){if(42===w.charCodeAt(h)){var x=ob;h++}else x=b,0===ta&&u(td);x===b&&(47===w.charCodeAt(h)?(x=Na,h++):(x=b,0===ta&&u(ud)));return x}function N(){var x=ua();if(x===b){var H=h;var Y=h;var ra=Ja();if(ra!==b){var Ba=Ca();if(Ba!==b){var La=Qa();La!==b?Y=parseFloat(ra+Ba+La):(h=Y,Y=b)}else h=Y,Y=b}else h=Y,Y=b;Y===b&&(Y=h,ra=Ja(),ra!==b?(Ba=Ca(),Ba!==b?Y=parseFloat(ra+Ba):(h=Y,Y=b)):(h=Y,Y=b),Y===b&&(Y=h,ra=Ja(),ra!==b?(Ba=Qa(),Ba!==b?Y=parseFloat(ra+Ba):(h=Y,Y=b)):(h=Y,Y=b),
Y===b&&(Y=h,ra=Ja(),ra!==b&&(ra=parseFloat(ra)),Y=ra)));var Ma=Y;if(Ma!==b){var bc=h;ta++;var vd=X();ta--;vd===b?bc=void 0:(h=bc,bc=b);bc!==b?H={type:"number",value:Ma}:(h=H,H=b)}else h=H,H=b;x=H;if(x===b){var Pb=h;var Eb=h;if(w.substr(h,4).toLowerCase()===za){var cc=w.substr(h,4);h+=4}else cc=b,0===ta&&u(wd);if(cc!==b){var Qb=h;ta++;var xd=O();ta--;xd===b?Qb=void 0:(h=Qb,Qb=b);Qb!==b?Eb=cc=[cc,Qb]:(h=Eb,Eb=b)}else h=Eb,Eb=b;var Bb=Eb;Bb!==b&&(Bb={type:"bool",value:!0});Pb=Bb;if(Pb===b){Pb=h;var Fb=
h;if(w.substr(h,5).toLowerCase()===Ia){var dc=w.substr(h,5);h+=5}else dc=b,0===ta&&u(yd);if(dc!==b){var Rb=h;ta++;var zd=O();ta--;zd===b?Rb=void 0:(h=Rb,Rb=b);Rb!==b?Fb=dc=[dc,Rb]:(h=Fb,Fb=b)}else h=Fb,Fb=b;Bb=Fb;Bb!==b&&(Bb={type:"bool",value:!1});Pb=Bb}x=Pb;if(x===b){var Gb=h;if(w.substr(h,4).toLowerCase()===ya){var ec=w.substr(h,4);h+=4}else ec=b,0===ta&&u(Ad);if(ec!==b){var Sb=h;ta++;var Bd=O();ta--;Bd===b?Sb=void 0:(h=Sb,Sb=b);Sb!==b?Gb=ec=[ec,Sb]:(h=Gb,Gb=b)}else h=Gb,Gb=b;var wc=Gb;wc!==b&&
(wc={type:"null",value:null});x=wc;if(x===b){var Hb=h;var Ib=h;if(w.substr(h,4).toLowerCase()===Cd){var Kc=w.substr(h,4);h+=4}else Kc=b,0===ta&&u(Dd);if(Kc!==b){var fc=h;ta++;var Ed=O();ta--;Ed===b?fc=void 0:(h=fc,fc=b);fc!==b?Ib="DATE":(h=Ib,Ib=b)}else h=Ib,Ib=b;if(Ib!==b){sa();var Lc=na();Lc!==b?Hb={type:"date",value:Lc.value}:(h=Hb,Hb=b)}else h=Hb,Hb=b;x=Hb;if(x===b){var Jb=h;var Kb=h;if(w.substr(h,9).toLowerCase()===Fd){var Mc=w.substr(h,9);h+=9}else Mc=b,0===ta&&u(Gd);if(Mc!==b){var gc=h;ta++;
var Hd=O();ta--;Hd===b?gc=void 0:(h=gc,gc=b);gc!==b?Kb="TIMESTAMP":(h=Kb,Kb=b)}else h=Kb,Kb=b;if(Kb!==b){sa();var Nc=na();Nc!==b?Jb={type:"timestamp",value:Nc.value}:(h=Jb,Jb=b)}else h=Jb,Jb=b;x=Jb;if(x===b){var cb=h;var xc=K();if(xc!==b){sa();if(45===w.charCodeAt(h)){var ub=eb;h++}else ub=b,0===ta&&u(vc);ub===b&&(43===w.charCodeAt(h)?(ub=Ra,h++):(ub=b,0===ta&&u(uc)));if(ub!==b){sa();var Tb=na();if(Tb!==b){sa();var Oc=G();Oc!==b?cb={type:"interval",value:Tb,qualifier:Oc,op:ub}:(h=cb,cb=b)}else h=
cb,cb=b}else h=cb,cb=b}else h=cb,cb=b;cb===b&&(cb=h,xc=K(),xc!==b?(sa(),ub=na(),ub!==b?(sa(),Tb=G(),Tb!==b?cb={type:"interval",value:ub,qualifier:Tb,op:""}:(h=cb,cb=b)):(h=cb,cb=b)):(h=cb,cb=b));x=cb}}}}}}var Ya=x;if(Ya===b){var gb=h;var Lb=h;if(w.substr(h,7).toLowerCase()===Id){var Pc=w.substr(h,7);h+=7}else Pc=b,0===ta&&u(Jd);if(Pc!==b){var hc=h;ta++;var Kd=O();ta--;Kd===b?hc=void 0:(h=hc,hc=b);hc!==b?Lb="EXTRACT":(h=Lb,Lb=b)}else h=Lb,Lb=b;if(Lb!==b){sa();var Ld=Ga();if(Ld!==b){sa();var mb=P();
mb===b&&(mb=ca(),mb===b&&(mb=oa(),mb===b&&(mb=qa(),mb===b&&(mb=wa(),mb===b&&(mb=xa())))));var Qc=mb;if(Qc!==b){sa();var Md=fa();if(Md!==b){sa();var Rc=e();if(Rc!==b){sa();var Nd=Pa();Nd!==b?gb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Qc},Rc]}}:(h=gb,gb=b)}else h=gb,gb=b}else h=gb,gb=b}else h=gb,gb=b}else h=gb,gb=b}else h=gb,gb=b;Ya=gb;if(Ya===b){var hb=h;var Mb=h;if(w.substr(h,9).toLowerCase()===Od){var Sc=w.substr(h,9);h+=9}else Sc=b,0===ta&&u(Pd);if(Sc!==
b){var ic=h;ta++;var Qd=O();ta--;Qd===b?ic=void 0:(h=ic,ic=b);ic!==b?Mb="SUBSTRING":(h=Mb,Mb=b)}else h=Mb,Mb=b;if(Mb!==b){sa();var Rd=Ga();if(Rd!==b){sa();var yc=e();if(yc!==b){sa();var Sd=fa();if(Sd!==b){sa();var zc=e();if(zc!==b){sa();var vb=h;var Nb=h;if(w.substr(h,3).toLowerCase()===Td){var Tc=w.substr(h,3);h+=3}else Tc=b,0===ta&&u(Ud);if(Tc!==b){var jc=h;ta++;var Vd=O();ta--;Vd===b?jc=void 0:(h=jc,jc=b);jc!==b?Nb="FOR":(h=Nb,Nb=b)}else h=Nb,Nb=b;var Ub=Nb;if(Ub!==b){var Wd=sa();var Uc=e();if(Uc!==
b){var Xd=sa();vb=Ub=[Ub,Wd,Uc,Xd]}else h=vb,vb=b}else h=vb,vb=b;vb===b&&(vb=null);Ub=Pa();Ub!==b?hb={type:"function",name:"substring",args:{type:"expr_list",value:vb?[yc,zc,vb[2]]:[yc,zc]}}:(h=hb,hb=b)}else h=hb,hb=b}else h=hb,hb=b}else h=hb,hb=b}else h=hb,hb=b}else h=hb,hb=b;Ya=hb;if(Ya===b){var Za=h;var Ac=ea();if(Ac!==b){sa();var Bc=Ga();if(Bc!==b){sa();var wb=m();wb===b&&(wb=null);sa();var Vb=e();if(Vb!==b){sa();var Cc=fa();if(Cc!==b){sa();var Vc=e();if(Vc!==b){sa();var Yd=Pa();Yd!==b?Za={type:"function",
name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb,Vc]}}:(h=Za,Za=b)}else h=Za,Za=b}else h=Za,Za=b}else h=Za,Za=b}else h=Za,Za=b}else h=Za,Za=b;Za===b&&(Za=h,Ac=ea(),Ac!==b?(sa(),Bc=Ga(),Bc!==b?(sa(),wb=m(),wb===b&&(wb=null),sa(),Vb=e(),Vb!==b?(sa(),Cc=Pa(),Cc!==b?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb]}}:(h=Za,Za=b)):(h=Za,Za=b)):(h=Za,Za=b)):(h=Za,Za=b));Ya=Za;if(Ya===b){var ib=h;var Ob=h;if(w.substr(h,
8).toLowerCase()===Zd){var Wc=w.substr(h,8);h+=8}else Wc=b,0===ta&&u($d);if(Wc!==b){var kc=h;ta++;var ae=O();ta--;ae===b?kc=void 0:(h=kc,kc=b);kc!==b?Ob="POSITION":(h=Ob,Ob=b)}else h=Ob,Ob=b;if(Ob!==b){sa();var be=Ga();if(be!==b){sa();var Xc=e();if(Xc!==b){sa();var ce=a();if(ce!==b){sa();var Yc=e();if(Yc!==b){sa();var de=Pa();de!==b?ib={type:"function",name:"position",args:{type:"expr_list",value:[Xc,Yc]}}:(h=ib,ib=b)}else h=ib,ib=b}else h=ib,ib=b}else h=ib,ib=b}else h=ib,ib=b}else h=ib,ib=b;Ya=ib;
if(Ya===b){var zb=h;var lc;var nb=h;nb=lc=I();if(nb===b)if(nb=h,96===w.charCodeAt(h)?(lc=Zc,h++):(lc=b,0===ta&&u($c)),lc!==b){var mc=[];if(ad.test(w.charAt(h))){var xb=w.charAt(h);h++}else xb=b,0===ta&&u(bd);if(xb!==b)for(;xb!==b;)mc.push(xb),ad.test(w.charAt(h))?(xb=w.charAt(h),h++):(xb=b,0===ta&&u(bd));else mc=b;mc!==b?(96===w.charCodeAt(h)?(xb=Zc,h++):(xb=b,0===ta&&u($c)),xb!==b?nb=mc.join(""):(h=nb,nb=b)):(h=nb,nb=b)}else h=nb,nb=b;var cd=nb;if(cd!==b){sa();var ee=Ga();if(ee!==b){sa();var nc=
c();nc===b&&(nc=null);sa();var fe=Pa();fe!==b?zb={type:"function",name:cd,args:nc?nc:{type:"expr_list",value:[]}}:(h=zb,zb=b)}else h=zb,zb=b}else h=zb,zb=b;Ya=zb;if(Ya===b){var qb;var db=h;var Dc=Aa();if(Dc!==b){sa();var Wb=e();if(Wb!==b){sa();var Xb=[];for(qb=la();qb!==b;)Xb.push(qb),qb=la();qb=sa();var oc=Ha();oc!==b?db={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:null}:(h=db,db=b)}else h=db,db=b}else h=db,db=b;if(db===b)if(db=h,Dc=Aa(),Dc!==b)if(sa(),Wb=e(),Wb!==b){sa();Xb=
[];for(qb=la();qb!==b;)Xb.push(qb),qb=la();qb=sa();oc=va();if(oc!==b){sa();var ge=Ha();ge!==b?db={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:oc.value}:(h=db,db=b)}else h=db,db=b}else h=db,db=b;else h=db,db=b;var Ec=db;if(Ec===b){var rb;var fb=h;var Fc=Aa();if(Fc!==b){sa();var Yb=[];for(rb=ma();rb!==b;)Yb.push(rb),rb=ma();rb=sa();var pc=Ha();pc!==b?fb={type:"case_expression",format:"searched",clauses:Yb,else:null}:(h=fb,fb=b)}else h=fb,fb=b;if(fb===b)if(fb=h,Fc=Aa(),Fc!==b){sa();
Yb=[];for(rb=ma();rb!==b;)Yb.push(rb),rb=ma();rb=sa();pc=va();if(pc!==b){sa();var he=Ha();he!==b?fb={type:"case_expression",format:"searched",clauses:Yb,else:pc.value}:(h=fb,fb=b)}else h=fb,fb=b}else h=fb,fb=b;Ec=fb}Ya=Ec;if(Ya===b){var qc;var rc=h;var dd=X();if(dd!==b){var ed=[];for(qc=B();qc!==b;)ed.push(qc),qc=B();rc=dd+ed.join("")}else h=rc,rc=b;var sc=rc;if(sc!==b){var Gc=sc;sc=/^CURRENT_DATE$/i.test(Gc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Gc)?{type:"current_time",mode:"timestamp"}:
{type:"column_ref",table:"",column:Gc}}Ya=sc;if(Ya===b&&(Ya=g(),Ya===b)){Ya=h;var ie=Ga();if(ie!==b){sa();var Hc=e();if(Hc!==b){sa();var je=Pa();je!==b?(Hc.paren=!0,Ya=Hc):(h=Ya,Ya=b)}else h=Ya,Ya=b}else h=Ya,Ya=b}}}}}}}}return Ya}function I(){var x;var H=h;var Y=X();if(Y!==b){H=[];for(x=O();x!==b;)H.push(x),x=O();H=Y+H.join("")}else h=H,H=b;return H}function X(){if(ke.test(w.charAt(h))){var x=w.charAt(h);h++}else x=b,0===ta&&u(le);return x}function O(){if(me.test(w.charAt(h))){var x=w.charAt(h);
h++}else x=b,0===ta&&u(ne);return x}function B(){if(oe.test(w.charAt(h))){var x=w.charAt(h);h++}else x=b,0===ta&&u(pe);return x}function g(){var x=h;if(64===w.charCodeAt(h)){var H=Db;h++}else H=b,0===ta&&u(qe);if(H!==b){var Y=I();Y!==b?x=H=[H,Y]:(h=x,x=b)}else h=x,x=b;x!==b&&(x={type:"param",value:x[1]});return x}function m(){var x=h;if(w.substr(h,7).toLowerCase()===re){var H=w.substr(h,7);h+=7}else H=b,0===ta&&u(se);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="LEADING":(h=
x,x=b)}else h=x,x=b;x===b&&(x=h,w.substr(h,8).toLowerCase()===te?(H=w.substr(h,8),h+=8):(H=b,0===ta&&u(ue)),H!==b?(H=h,ta++,Y=O(),ta--,Y===b?H=void 0:(h=H,H=b),H!==b?x="TRAILING":(h=x,x=b)):(h=x,x=b),x===b&&(x=h,w.substr(h,4).toLowerCase()===ve?(H=w.substr(h,4),h+=4):(H=b,0===ta&&u(we)),H!==b?(H=h,ta++,Y=O(),ta--,Y===b?H=void 0:(h=H,H=b),H!==b?x="BOTH":(h=x,x=b)):(h=x,x=b)));return x}function G(){var x=h;var H=h;var Y=W();if(Y!==b){sa();var ra=Ga();if(ra!==b)if(sa(),ra=ja(),ra!==b){sa();var Ba=Pa();
Ba!==b?H={type:"interval-period",period:Y.value,precision:ra,secondary:null}:(h=H,H=b)}else h=H,H=b;else h=H,H=b}else h=H,H=b;H===b&&(H=h,Y=W(),Y!==b&&(Y=fd(Y)),H=Y);if(H!==b)if(sa(),Y=h,w.substr(h,2).toLowerCase()===xe?(ra=w.substr(h,2),h+=2):(ra=b,0===ta&&u(ye)),ra!==b?(ra=h,ta++,Ba=O(),ta--,Ba===b?ra=void 0:(h=ra,ra=b),ra!==b?Y="TO":(h=Y,Y=b)):(h=Y,Y=b),Y!==b){sa();Y=h;ra=W();ra!==b&&(ra={type:"interval-period",period:ra.value,precision:null,secondary:null});Y=ra;if(Y===b){Y=h;ra=xa();if(ra!==
b)if(sa(),ra=Ga(),ra!==b)if(sa(),ra=ja(),ra!==b)if(sa(),Ba=Fa(),Ba!==b)if(sa(),Ba=da(),Ba!==b){sa();var La=Pa();La!==b?Y=gd(ra,Ba):(h=Y,Y=b)}else h=Y,Y=b;else h=Y,Y=b;else h=Y,Y=b;else h=Y,Y=b;else h=Y,Y=b;Y===b&&(Y=h,ra=xa(),ra!==b?(sa(),ra=Ga(),ra!==b?(sa(),ra=ja(),ra!==b?(sa(),Ba=Pa(),Ba!==b?Y={type:"interval-period",period:"second",precision:ra,secondary:null}:(h=Y,Y=b)):(h=Y,Y=b)):(h=Y,Y=b)):(h=Y,Y=b),Y===b&&(Y=h,ra=xa(),ra!==b&&(ra={type:"interval-period",period:"second",precision:null,secondary:null}),
Y=ra))}Y!==b?x={type:"interval-qualifier",start:H,end:Y}:(h=x,x=b)}else h=x,x=b;else h=x,x=b;x===b&&(x=h,Y=W(),Y!==b?(sa(),H=Ga(),H!==b?(sa(),H=da(),H!==b?(sa(),ra=Pa(),ra!==b?x={type:"interval-period",period:Y.value,precision:H,secondary:null}:(h=x,x=b)):(h=x,x=b)):(h=x,x=b)):(h=x,x=b),x===b&&(x=h,Y=W(),Y!==b&&(Y=fd(Y)),x=Y,x===b&&(x=h,Y=xa(),Y!==b?(sa(),H=Ga(),H!==b?(sa(),H=ja(),H!==b?(sa(),ra=Fa(),ra!==b?(sa(),Y=da(),Y!==b?(sa(),ra=Pa(),ra!==b?x=gd(H,Y):(h=x,x=b)):(h=x,x=b)):(h=x,x=b)):(h=x,x=
b)):(h=x,x=b)):(h=x,x=b),x===b&&(x=h,Y=xa(),Y!==b?(sa(),H=Ga(),H!==b?(sa(),H=da(),H!==b?(sa(),ra=Pa(),ra!==b?x={type:"interval-period",period:"second",precision:H,secondary:null}:(h=x,x=b)):(h=x,x=b)):(h=x,x=b)):(h=x,x=b),x===b&&(x=h,Y=xa(),Y!==b&&(Y={type:"interval-period",period:"second",precision:null,secondary:null}),x=Y)))));return x}function W(){var x=h;x=oa();x!==b&&(x={type:"string",value:"day"});x===b&&(x=h,x=qa(),x!==b&&(x={type:"string",value:"hour"}),x===b&&(x=h,x=wa(),x!==b&&(x={type:"string",
value:"minute"}),x===b&&(x=h,x=ca(),x!==b&&(x={type:"string",value:"month"}),x===b&&(x=h,x=P(),x!==b&&(x={type:"string",value:"year"})))));return x}function da(){var x=Oa();x!==b&&(x=parseFloat(x));return x}function ja(){var x=Oa();x!==b&&(x=parseFloat(x));return x}function na(){var x=ua();x===b&&(x=g());return x}function ua(){var x=h;if(39===w.charCodeAt(h)){var H=ba;h++}else H=b,0===ta&&u(hd);H===b&&(w.substr(h,2)===ia?(H=ia,h+=2):(H=b,0===ta&&u(ze)));if(H!==b){H=[];var Y=h;w.substr(h,2)===Z?(Y=
Z,h+=2):(Y=b,0===ta&&u(id));Y!==b&&(Y="'");Y===b&&(jd.test(w.charAt(h))?(Y=w.charAt(h),h++):(Y=b,0===ta&&u(kd)));for(;Y!==b;)H.push(Y),Y=h,w.substr(h,2)===Z?(Y=Z,h+=2):(Y=b,0===ta&&u(id)),Y!==b&&(Y="'"),Y===b&&(jd.test(w.charAt(h))?(Y=w.charAt(h),h++):(Y=b,0===ta&&u(kd)));39===w.charCodeAt(h)?(Y=ba,h++):(Y=b,0===ta&&u(hd));Y!==b?x={type:"string",value:H.join("")}:(h=x,x=b)}else h=x,x=b;return x}function ma(){var x=h;if(Da()!==b){sa();var H=e();if(H!==b){sa();var Y=Ea();Y!==b?(sa(),Y=e(),Y!==b?x={type:"when_clause",
operand:H,value:Y}:(h=x,x=b)):(h=x,x=b)}else h=x,x=b}else h=x,x=b;return x}function la(){var x=h;if(Da()!==b){sa();var H=e();if(H!==b){sa();var Y=Ea();Y!==b?(sa(),Y=e(),Y!==b?x={type:"when_clause",operand:H,value:Y}:(h=x,x=b)):(h=x,x=b)}else h=x,x=b}else h=x,x=b;return x}function va(){var x=h;var H=h;if(w.substr(h,4).toLowerCase()===Ae){var Y=w.substr(h,4);h+=4}else Y=b,0===ta&&u(Be);if(Y!==b){Y=h;ta++;var ra=O();ta--;ra===b?Y=void 0:(h=Y,Y=b);Y!==b?H="ELSE":(h=H,H=b)}else h=H,H=b;H!==b?(sa(),H=e(),
H!==b?x={type:"else_clause",value:H}:(h=x,x=b)):(h=x,x=b);return x}function Ja(){var x=Oa();if(x===b){x=h;if(45===w.charCodeAt(h)){var H=eb;h++}else H=b,0===ta&&u(vc);H===b&&(43===w.charCodeAt(h)?(H=Ra,h++):(H=b,0===ta&&u(uc)));if(H!==b){var Y=Oa();Y!==b?x=H[0]+Y:(h=x,x=b)}else h=x,x=b}return x}function Ca(){var x=h;if(46===w.charCodeAt(h)){var H=ka;h++}else H=b,0===ta&&u(Ce);H!==b?(x=Oa(),x===b&&(x=null),x="."+(null!=x?x:"")):(h=x,x=b);return x}function Qa(){var x;var H=x=h;if(De.test(w.charAt(h))){var Y=
w.charAt(h);h++}else Y=b,0===ta&&u(Ee);Y!==b?(Fe.test(w.charAt(h))?(H=w.charAt(h),h++):(H=b,0===ta&&u(Ge)),H===b&&(H=null),H="e"+(null===H?"":H)):(h=H,H=b);H!==b?(Y=Oa(),Y!==b?x=H+Y:(h=x,x=b)):(h=x,x=b);return x}function Oa(){var x=[];var H=pa();if(H!==b)for(;H!==b;)x.push(H),H=pa();else x=b;x!==b&&(x=x.join(""));return x}function pa(){if(He.test(w.charAt(h))){var x=w.charAt(h);h++}else x=b,0===ta&&u(Ie);return x}function a(){var x=h;if(w.substr(h,2).toLowerCase()===Ka){var H=w.substr(h,2);h+=2}else H=
b,0===ta&&u(Je);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="IN":(h=x,x=b)}else h=x,x=b;return x}function k(){var x=h;if(w.substr(h,2).toLowerCase()===Xa){var H=w.substr(h,2);h+=2}else H=b,0===ta&&u(Ke);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="IS":(h=x,x=b)}else h=x,x=b;return x}function V(){var x=h;if(w.substr(h,4).toLowerCase()===Wa){var H=w.substr(h,4);h+=4}else H=b,0===ta&&u(Le);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?
x="LIKE":(h=x,x=b)}else h=x,x=b;return x}function n(){var x=h;if(w.substr(h,3).toLowerCase()===bb){var H=w.substr(h,3);h+=3}else H=b,0===ta&&u(Me);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="NOT":(h=x,x=b)}else h=x,x=b;return x}function E(){var x=h;if(w.substr(h,3).toLowerCase()===lb){var H=w.substr(h,3);h+=3}else H=b,0===ta&&u(Ne);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="AND":(h=x,x=b)}else h=x,x=b;return x}function Q(){var x=h;if(w.substr(h,2).toLowerCase()===
Oe){var H=w.substr(h,2);h+=2}else H=b,0===ta&&u(Pe);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="OR":(h=x,x=b)}else h=x,x=b;return x}function S(){var x=h;if(w.substr(h,7).toLowerCase()===Qe){var H=w.substr(h,7);h+=7}else H=b,0===ta&&u(Re);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="BETWEEN":(h=x,x=b)}else h=x,x=b;return x}function fa(){var x=h;if(w.substr(h,4).toLowerCase()===Se){var H=w.substr(h,4);h+=4}else H=b,0===ta&&u(Te);if(H!==b){H=h;ta++;var Y=
O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="FROM":(h=x,x=b)}else h=x,x=b;return x}function ea(){var x=h;if(w.substr(h,4).toLowerCase()===Ue){var H=w.substr(h,4);h+=4}else H=b,0===ta&&u(Ve);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="TRIM":(h=x,x=b)}else h=x,x=b;return x}function K(){var x=h;if(w.substr(h,8).toLowerCase()===We){var H=w.substr(h,8);h+=8}else H=b,0===ta&&u(Xe);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="INTERVAL":(h=x,x=b)}else h=x,x=b;
return x}function P(){var x=h;if(w.substr(h,4).toLowerCase()===Ye){var H=w.substr(h,4);h+=4}else H=b,0===ta&&u(Ze);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="YEAR":(h=x,x=b)}else h=x,x=b;return x}function ca(){var x=h;if(w.substr(h,5).toLowerCase()===$e){var H=w.substr(h,5);h+=5}else H=b,0===ta&&u(af);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="MONTH":(h=x,x=b)}else h=x,x=b;return x}function oa(){var x=h;if(w.substr(h,3).toLowerCase()===bf){var H=w.substr(h,
3);h+=3}else H=b,0===ta&&u(cf);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="DAY":(h=x,x=b)}else h=x,x=b;return x}function qa(){var x=h;if(w.substr(h,4).toLowerCase()===df){var H=w.substr(h,4);h+=4}else H=b,0===ta&&u(ef);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="HOUR":(h=x,x=b)}else h=x,x=b;return x}function wa(){var x=h;if(w.substr(h,6).toLowerCase()===ff){var H=w.substr(h,6);h+=6}else H=b,0===ta&&u(gf);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:
(h=H,H=b);H!==b?x="MINUTE":(h=x,x=b)}else h=x,x=b;return x}function xa(){var x=h;if(w.substr(h,6).toLowerCase()===hf){var H=w.substr(h,6);h+=6}else H=b,0===ta&&u(jf);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="SECOND":(h=x,x=b)}else h=x,x=b;return x}function Aa(){var x=h;if(w.substr(h,4).toLowerCase()===kf){var H=w.substr(h,4);h+=4}else H=b,0===ta&&u(lf);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="CASE":(h=x,x=b)}else h=x,x=b;return x}function Ha(){var x=
h;if(w.substr(h,3).toLowerCase()===mf){var H=w.substr(h,3);h+=3}else H=b,0===ta&&u(nf);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="END":(h=x,x=b)}else h=x,x=b;return x}function Da(){var x=h;if(w.substr(h,4).toLowerCase()===of){var H=w.substr(h,4);h+=4}else H=b,0===ta&&u(pf);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="WHEN":(h=x,x=b)}else h=x,x=b;return x}function Ea(){var x=h;if(w.substr(h,4).toLowerCase()===qf){var H=w.substr(h,4);h+=4}else H=b,0===
ta&&u(rf);if(H!==b){H=h;ta++;var Y=O();ta--;Y===b?H=void 0:(h=H,H=b);H!==b?x="THEN":(h=x,x=b)}else h=x,x=b;return x}function Fa(){if(44===w.charCodeAt(h)){var x=sf;h++}else x=b,0===ta&&u(tf);return x}function Ga(){if(40===w.charCodeAt(h)){var x=uf;h++}else x=b,0===ta&&u(vf);return x}function Pa(){if(41===w.charCodeAt(h)){var x=wf;h++}else x=b,0===ta&&u(xf);return x}function sa(){var x;var H=[];for(x=ab();x!==b;)H.push(x),x=ab();return H}function ab(){if(yf.test(w.charAt(h))){var x=w.charAt(h);h++}else x=
b,0===ta&&u(zf);return x}function Ta(x,H,Y,ra){x={type:"binary_expr",operator:x,left:H,right:Y};void 0!==ra&&(x.escape=ra);return x}function Va(x,H){for(var Y=0;Y<H.length;Y++)x=Ta(H[Y][1],x,H[Y][3]);return x}v=void 0!==v?v:{};var b={},$a=v.grammarSource,Sa={start:C},yb=C,tb="!",jb="\x3d",Ab="\x3e\x3d",Zb="\x3e",Cb="\x3c\x3d",$b="\x3c\x3e",kb="\x3c",sb="!\x3d",Ra="+",eb="-",ob="*",Na="/",Db="@",ba="'",ia="N'",Z="''",ka=".",ya="null",za="true",Ia="false",Ka="in",Xa="is",Wa="like",Ua="escape",bb="not",
lb="and",Oe="or",Qe="between",Se="from",Td="for",Od="substring",Id="extract",Ue="trim",Zd="position",Fd="timestamp",Cd="date",re="leading",te="trailing",ve="both",xe="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",Ae="else",sf=",",uf="(",wf=")",Zc="`",ke=/^[A-Za-z_\x80-\uFFFF]/,me=/^[A-Za-z0-9_]/,oe=/^[A-Za-z0-9_.\x80-\uFFFF]/,jd=/^[^']/,He=/^[0-9]/,De=/^[eE]/,Fe=/^[+\-]/,yf=/^[ \t\n\r]/,ad=/^[^`]/,ld=t("!",!1),Jc=t("\x3d",
!1),nd=t("\x3e\x3d",!1),od=t("\x3e",!1),pd=t("\x3c\x3d",!1),qd=t("\x3c\x3e",!1),rd=t("\x3c",!1),sd=t("!\x3d",!1),uc=t("+",!1),vc=t("-",!1),td=t("*",!1),ud=t("/",!1),le=F([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),ne=F([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),pe=F([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),qe=t("@",!1),hd=t("'",!1),ze=t("N'",!1),id=t("''",!1),kd=F(["'"],!0,!1),Ce=t(".",!1),Ie=F([["0","9"]],!1,!1),Ee=F(["e","E"],!1,!1),Ge=F(["+","-"],!1,!1),Ad=t("NULL",
!0),wd=t("TRUE",!0),yd=t("FALSE",!0),Je=t("IN",!0),Ke=t("IS",!0),Le=t("LIKE",!0),md=t("ESCAPE",!0),Me=t("NOT",!0),Ne=t("AND",!0),Pe=t("OR",!0),Re=t("BETWEEN",!0),Te=t("FROM",!0),Ud=t("FOR",!0),Pd=t("SUBSTRING",!0),Jd=t("EXTRACT",!0),Ve=t("TRIM",!0),$d=t("POSITION",!0),Gd=t("TIMESTAMP",!0),Dd=t("DATE",!0),se=t("LEADING",!0),ue=t("TRAILING",!0),we=t("BOTH",!0),ye=t("TO",!0),Xe=t("INTERVAL",!0),Ze=t("YEAR",!0),af=t("MONTH",!0),cf=t("DAY",!0),ef=t("HOUR",!0),gf=t("MINUTE",!0),jf=t("SECOND",!0),lf=t("CASE",
!0),nf=t("END",!0),pf=t("WHEN",!0),rf=t("THEN",!0),Be=t("ELSE",!0),tf=t(",",!1),vf=t("(",!1),xf=t(")",!1),zf=F([" ","\t","\n","\r"],!1,!1),$c=t("`",!1),bd=F(["`"],!0,!1),fd=function(x){return{type:"interval-period",period:x.value,precision:null,secondary:null}},gd=function(x,H){return{type:"interval-period",period:"second",precision:x,secondary:H}},h=0,ac=[{line:1,column:1}],pb=0,tc=[],ta=0;if("startRule"in v){if(!(v.startRule in Sa))throw Error("Can't start parsing from rule \""+v.startRule+'".');
yb=Sa[v.startRule]}var Ic=yb();if(Ic!==b&&h===w.length)return Ic;Ic!==b&&h<w.length&&u({type:"end"});throw function(x,H,Y){return new D(D.buildMessage(x,H),x,H,Y)}(tc,pb<w.length?w.charAt(pb):null,pb<w.length?J(pb,pb+1):J(pb,pb));}}})})(T);let R=function(){function q(){}q.parse=function(D){return T.exports.parse(D)};return q}();l.WhereGrammar=R;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(l){l.commonjsGlobal="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};l.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};l.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},
"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(l){l.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,
supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(l,d,T,R,q,D,A,w,v,t,F,L,J){function u(c,e,p,r,f,y){f-=p;y-=r;c=Math.min(1,Math.max(0,((c-p)*f+(e-r)*y)/(f*f+y*y)));return{x:p+f*c,y:r+y*c}}function C(c,e){return c?e?4:3:e?3:2}return function(){function c(p,r,f){this.items=p;this.queryGeometry=r;this.definitionExpression=f.definitionExpression;this.geometryType=f.geometryType;this.hasM=f.hasM;this.hasZ=f.hasZ;this.objectIdField=f.objectIdField;this.spatialReference=f.spatialReference;this.fieldsIndex=f.fieldsIndex;this.timeInfo=f.timeInfo;
this.featureAdapter=f.featureAdapter;this.aggregateAdapter=f.aggregateAdapter}var e=c.prototype;e.createQueryResponseForCount=function(p){const r=new D(p,this.featureAdapter,this.fieldsIndex);if(!p.outStatistics)return r.countDistinctValues(this.items);const {groupByFieldsForStatistics:f,having:y}=p;if(null==f||!f.length)return 1;const z=new Map,M=new Map,aa=new Set;p=p.outStatistics;for(const ha of p){({statisticType:p}=ha);p="exceedslimit"!==p?ha.onStatisticField:void 0;if(!M.has(p)){var U=[];for(const N of f){const I=
this._getAttributeValues(r,N,z);U.push(I)}M.set(p,this._calculateUniqueValues(U,r.returnDistinctValues))}p=M.get(p);for(const N in p){const {data:I,items:X}=p[N];U=I.join(",");y&&!r.validateItems(X,y)||aa.add(U)}}return aa.size};e.createQueryResponse=function(p){let r;r=p.outStatistics?p.outStatistics.some(f=>"exceedslimit"===f.statisticType)?this._createExceedsLimitQueryResponse(p):this._createStatisticsQueryResponse(p):this._createFeatureQueryResponse(p);p.returnQueryGeometry&&(R.isValid(p.outSR)&&
!R.equals(this.queryGeometry.spatialReference,p.outSR)?r.queryGeometry=t.cleanFromGeometryEngine({spatialReference:p.outSR,...w.project(this.queryGeometry,this.queryGeometry.spatialReference,p.outSR)}):r.queryGeometry=t.cleanFromGeometryEngine({spatialReference:p.outSR,...this.queryGeometry}));return r};e.createSnappingResponse=function(p,r){const f=this.featureAdapter,y=C(this.hasZ,this.hasM),{x:z,y:M}=p.point,aa="number"===typeof p.distance?p.distance:p.distance.x,U="number"===typeof p.distance?
p.distance:p.distance.y,ha={candidates:[]},N="esriGeometryPolygon"===this.geometryType;r=this.getPointCreator(p.point,this.spatialReference,r);for(const W of this.items){var I=f.getGeometry(W);if(d.isNone(I))continue;const {coords:da,lengths:ja}=I;if(p.types&1){I=0;for(var X=0;X<ja.length;X++){var O=ja[X];for(var B=0;B<O;B++,I+=y){var g=da[I],m=da[I+1];if(B!==O-1){const na=da[I+y],ua=da[I+y+1],{x:ma,y:la}=u(z,M,g,m,na,ua);var G=(z-ma)/aa;const va=(M-la)/U;G=G*G+va*va;1>=G&&ha.candidates.push({type:"edge",
objectId:f.getObjectId(W),distance:Math.sqrt(G),target:r(ma,la),start:r(g,m),end:r(na,ua)})}}}}if(p.types&2)for(I=N?da.length-y:da.length,X=0;X<I;X+=y)O=da[X],B=da[X+1],g=(z-O)/aa,m=(M-B)/U,g=g*g+m*m,1>=g&&ha.candidates.push({type:"vertex",objectId:f.getObjectId(W),distance:Math.sqrt(g),target:r(O,B)})}ha.candidates.sort((W,da)=>W.distance-da.distance);return ha};e.getPointCreator=function(p,r,f){const y=d.isSome(f)&&!R.equals(r,f)?z=>w.project(z,r,f):z=>z;return null!=p.z&&null!=p.m?(z,M)=>y({x:z,
y:M,z:p.z,m:p.m}):null!=p.z?(z,M)=>y({x:z,y:M,z:p.z}):null!=p.m?(z,M)=>y({x:z,y:M,m:p.m}):(z,M)=>y({x:z,y:M})};e.executeAttributesQuery=function(p){var r=A.getWhereClause(p.where,this.fieldsIndex);if(!r)return Promise.resolve(this);if(r.isStandardized){let f=0;const y=[];for(const z of this.items)r.testFeature(z,this.featureAdapter)&&(y[f++]=z);r=new c(y,this.queryGeometry,this);r.definitionExpression=p.where;return Promise.resolve(r)}return Promise.reject(new TypeError("Where clause is not standardized"))};
e.executeAggregateIdsQuery=function(p){if(!p.aggregateIds||!p.aggregateIds.length||d.isNone(this.aggregateAdapter))return Promise.resolve(this);const r=new Set;for(const y of p.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(y).forEach(z=>r.add(z));const f=this.featureAdapter.getObjectId;return Promise.resolve(new c(this.items.filter(y=>r.has(f(y))),this.queryGeometry,this))};e.executeObjectIdsQuery=function(p){if(!p.objectIds||!p.objectIds.length)return Promise.resolve(this);const r=new Set(p.objectIds),
f=this.featureAdapter.getObjectId;return Promise.resolve(new c(this.items.filter(y=>r.has(f(y))),this.queryGeometry,this))};e.executeTimeQuery=function(p){p=v.getTimeOperator(this.timeInfo,p.timeExtent,this.featureAdapter);if(!d.isSome(p))return Promise.resolve(this);p=this.items.filter(p);return Promise.resolve(new c(p,this.queryGeometry,this))};e.filterLatest=function(){const {trackIdField:p,startTimeField:r,endTimeField:f}=this.timeInfo;var y=f||r;const z=new Map,M=this.featureAdapter.getAttribute;
for(const aa of this.items){const U=M(aa,p),ha=M(aa,y),N=z.get(U);(!N||ha>M(N,y))&&z.set(U,aa)}y=Array.from(z.values());return Promise.resolve(new c(y,this.queryGeometry,this))};e.project=function(){var p=l._asyncToGenerator(function*(r){if(!r||R.equals(this.spatialReference,r))return this;const f=this.featureAdapter,y=(yield w.projectMany(this.items.map(z=>t.getGeometry(this.geometryType,this.hasZ,this.hasM,f.getGeometry(z))),this.spatialReference,r)).map((z,M)=>f.cloneWithGeometry(this.items[M],
q.convertFromGeometry(z,this.hasZ,this.hasM)));return new c(y,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:r,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(r){return p.apply(this,arguments)}}();e.createSummaryStatisticsResponse=function(){var p=l._asyncToGenerator(function*(r,f){const {field:y,valueExpression:z,
normalizationField:M,normalizationType:aa,normalizationTotal:U,minValue:ha,maxValue:N,scale:I}=f;f=this.fieldsIndex.isDateField(y);r=yield this._getDataValues(r,{field:y,valueExpression:z,normalizationField:M,normalizationType:aa,normalizationTotal:U,scale:I});const X=L.isNullCountSupported({normalizationType:aa,normalizationField:M,minValue:ha,maxValue:N}),O=this.fieldsIndex.get(y),B={value:.5,fieldType:null==O?void 0:O.type};r=F.isStringField(O)?L.calculateStringStatistics({values:r,supportsNullCount:X,
percentileParams:B}):L.calculateStatistics({values:r,minValue:ha,maxValue:N,useSampleStdDev:!aa,supportsNullCount:X,percentileParams:B});return L.processSummaryStatisticsResult(r,f)});return function(r,f){return p.apply(this,arguments)}}();e.createUniqueValuesResponse=function(){var p=l._asyncToGenerator(function*(r,f){const {field:y,valueExpression:z,domain:M,returnAllCodedValues:aa,scale:U}=f;r=yield this._getDataValues(r,{field:y,valueExpression:z,scale:U});r=L.calculateUniqueValuesCount(r);return L.createUVResult(r,
M,aa)});return function(r,f){return p.apply(this,arguments)}}();e.createClassBreaksResponse=function(){var p=l._asyncToGenerator(function*(r,f){const {field:y,valueExpression:z,normalizationField:M,normalizationType:aa,normalizationTotal:U,classificationMethod:ha,standardDeviationInterval:N,minValue:I,maxValue:X,numClasses:O,scale:B}=f;r=yield this._getDataValues(r,{field:y,valueExpression:z,normalizationField:M,normalizationType:aa,normalizationTotal:U,scale:B});r=L.calculateClassBreaks(r,{field:y,
normalizationField:M,normalizationType:aa,normalizationTotal:U,classificationMethod:ha,standardDeviationInterval:N,minValue:I,maxValue:X,numClasses:O});return L.resolveCBResult(r,ha)});return function(r,f){return p.apply(this,arguments)}}();e.createHistogramResponse=function(){var p=l._asyncToGenerator(function*(r,f){const {field:y,valueExpression:z,normalizationField:M,normalizationType:aa,normalizationTotal:U,classificationMethod:ha,standardDeviationInterval:N,minValue:I,maxValue:X,numBins:O,scale:B}=
f;r=yield this._getDataValues(r,{field:y,valueExpression:z,normalizationField:M,normalizationType:aa,normalizationTotal:U,scale:B});return L.calculateHistogram(r,{field:y,normalizationField:M,normalizationType:aa,normalizationTotal:U,classificationMethod:ha,standardDeviationInterval:N,minValue:I,maxValue:X,numBins:O})});return function(r,f){return p.apply(this,arguments)}}();e._sortFeatures=function(p,r,f){if(1<p.length&&r&&r.length)for(const y of r.reverse()){r=y.split(" ");const z=r[0],M=this.fieldsIndex.get(z);
r=r[1]&&"desc"===r[1].toLowerCase();const aa=L.getAttributeComparator(null==M?void 0:M.type,r);p.sort((U,ha)=>{U=f(U,z,M);ha=f(ha,z,M);return aa(U,ha)})}};e._createFeatureQueryResponse=function(p){const r=this.items,{geometryType:f,hasM:y,hasZ:z,objectIdField:M,spatialReference:aa}=this,{outFields:U,outSR:ha,quantizationParameters:N,resultRecordCount:I,resultOffset:X,returnZ:O,returnM:B}=p,g=null!=I?r.length>(X||0)+I:!1,m=U&&(U.includes("*")?[...this.fieldsIndex.fields]:U.map(G=>this.fieldsIndex.get(G)));
return{exceededTransferLimit:g,features:this._createFeatures(p,r),fields:m,geometryType:f,hasM:y&&B,hasZ:z&&O,objectIdFieldName:M,spatialReference:t.cleanFromGeometryEngine(ha?ha:aa),transform:N&&T.toQuantizationTransform(N)||null}};e._createFeatures=function(p,r){const f=new D(p,this.featureAdapter,this.fieldsIndex),{hasM:y,hasZ:z}=this,{orderByFields:M,quantizationParameters:aa,returnGeometry:U,returnCentroid:ha,maxAllowableOffset:N,resultOffset:I,resultRecordCount:X,returnZ:O=!1,returnM:B=!1}=
p,g=z&&O,m=y&&B;p=[];var G=0;r=[...r];this._sortFeatures(r,M,(ja,na,ua)=>f.getFieldValue(ja,na,ua));if(U||ha){var W=T.toQuantizationTransform(aa);if(U&&!ha)for(var da of r)p[G++]={attributes:f.getAttributes(da),geometry:t.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(da),N,W,g,m)};else if(!U&&ha)for(const ja of r)p[G++]={attributes:f.getAttributes(ja),centroid:t.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),W)};else for(const ja of r)p[G++]={attributes:f.getAttributes(ja),
centroid:t.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),W),geometry:t.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ja),N,W,g,m)}}else for(W of r)(da=f.getAttributes(W))&&(p[G++]={attributes:da});G=I||0;null!=X&&(p=p.slice(G,Math.min(p.length,G+X)));return p};e._createExceedsLimitQueryResponse=function(p){var r=!1;let f=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY;r=Number.POSITIVE_INFINITY;for(const z of p.outStatistics)if("exceedslimit"===
z.statisticType){f=null!=z.maxPointCount?z.maxPointCount:Number.POSITIVE_INFINITY;y=null!=z.maxRecordCount?z.maxRecordCount:Number.POSITIVE_INFINITY;r=null!=z.maxVertexCount?z.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)r=this.items.length>f;else if(this.items.length>y)r=!0;else{p=this.hasZ?this.hasM?4:3:this.hasM?3:2;const z=this.featureAdapter;r=this.items.reduce((M,aa)=>{aa=z.getGeometry(aa);return M+(d.isSome(aa)&&aa.coords.length||0)},0)/p>r}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(r)}}]}};e._createStatisticsQueryResponse=function(p){var r={attributes:{}};const f=[],y=new Map,z=new Map,M=new Map,aa=new Map,U=new D(p,this.featureAdapter,this.fieldsIndex);var ha=p.outStatistics;const {groupByFieldsForStatistics:N,having:I,orderByFields:X}=p;p=N&&N.length;const O=!!p,B=O&&N[0],g=O&&!this.fieldsIndex.get(B);for(const ja of ha){const {outStatisticFieldName:na,
statisticType:ua}=ja;ha=ja;var m="exceedslimit"!==ua?ja.onStatisticField:void 0;const ma="percentile_disc"===ua||"percentile_cont"===ua,la=O&&1===p&&(m===B||g)&&"count"===ua;if(O){if(!M.has(m)){var G=[];for(const va of N){var W=this._getAttributeValues(U,va,y);G.push(W)}M.set(m,this._calculateUniqueValues(G,U.returnDistinctValues))}G=M.get(m);for(const va in G){const {count:Ja,data:Ca,items:Qa,itemPositions:Oa}=G[va];W=Ca.join(",");if(!I||U.validateItems(Qa,I)){const pa=aa.get(W)||{attributes:{}};
var da=null;if(la)da=Ja;else{const a=this._getAttributeValues(U,m,y);da=Oa.map(k=>a[k]);da=ma&&"statisticParameters"in ha?this._getPercentileValue(ha,da):this._getStatisticValue(ha,da,null,U.returnDistinctValues)}pa.attributes[na]=da;N.forEach((a,k)=>pa.attributes[this.fieldsIndex.get(a)?a:`EXPR_${k+1}`]=Ca[k]);aa.set(W,pa)}}}else m=this._getAttributeValues(U,m,y),r.attributes[na]=ma&&"statisticParameters"in ha?this._getPercentileValue(ha,m):this._getStatisticValue(ha,m,z,U.returnDistinctValues);
f.push({name:na,alias:na,type:"esriFieldTypeDouble"})}r=O?Array.from(aa.values()):[r];this._sortFeatures(r,X,(ja,na)=>ja.attributes[na]);return{fields:f,features:r}};e._getStatisticValue=function(p,r,f,y){const {onStatisticField:z,statisticType:M}=p;p=null;p=null!=f&&f.has(z)?f.get(z):F.isStringField(this.fieldsIndex.get(z))?L.calculateStringStatistics({values:r,returnDistinct:y}):L.calculateStatistics({values:r,minValue:null,maxValue:null,useSampleStdDev:!0});f&&f.set(z,p);return p["var"===M?"variance":
M]};e._getPercentileValue=function(p,r){const {onStatisticField:f,statisticParameters:y,statisticType:z}=p,{value:M,orderBy:aa}=y;p=this.fieldsIndex.get(f);return L.calculatePercentile(r,{value:M,orderBy:aa,fieldType:null==p?void 0:p.type,isDiscrete:"percentile_disc"===z})};e._getAttributeValues=function(p,r,f){if(f.has(r))return f.get(r);const y=this.fieldsIndex.get(r),z=this.items.map(M=>p.getFieldValue(M,r,y));f.set(r,z);return z};e._getAttributeNormalizedValues=function(p,r){return this.items.map(f=>
p.getNormalizedValue(f,{field:r.field,fieldInfo:this.fieldsIndex.get(r.field),normalizationField:r.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(r.normalizationField),normalizationType:r.normalizationType,normalizationTotal:r.normalizationTotal}))};e._getAttributeExpressionValues=function(){var p=l._asyncToGenerator(function*(r,f,y){const {arcadeUtils:z}=yield J.loadArcade(),M=z.createFunction(f),aa=y&&z.getViewInfo(y);return this.items.map(U=>r.getExpressionValue(U,{compiledFunc:M,
viewInfo:aa},z))});return function(r,f,y){return p.apply(this,arguments)}}();e._calculateUniqueValues=function(p,r){const f={},y=this.items,z=y.length;for(let M=0;M<z;M++){const aa=y[M],U=[];for(const N of p)U.push(N[M]);const ha=U.join(",");r?null==f[ha]&&(f[ha]={count:1,data:U,items:[aa],itemPositions:[M]}):null==f[ha]?f[ha]={count:1,data:U,items:[aa],itemPositions:[M]}:(f[ha].count++,f[ha].items.push(aa),f[ha].itemPositions.push(M))}return f};e._getDataValues=function(){var p=l._asyncToGenerator(function*(r,
f){const y=new D(r,this.featureAdapter,this.fieldsIndex),{valueExpression:z,field:M,normalizationField:aa,normalizationType:U,normalizationTotal:ha,scale:N}=f;r=z?{viewingMode:"map",scale:N,spatialReference:r.outSR||this.spatialReference}:null;return z?this._getAttributeExpressionValues(y,z,r):this._getAttributeNormalizedValues(y,{field:M,normalizationField:aa,normalizationType:U,normalizationTotal:ha})});return function(r,f){return p.apply(this,arguments)}}();l._createClass(c,[{key:"size",get:function(){return this.items.length}}]);
return c}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(l,d,T){function R({scale:N,translate:I},X){return Math.round((X-I[0])/N[0])}function q({scale:N,translate:I},X){return Math.round((I[1]-X)/N[1])}function D(N,I,X){const O=[];let B,g,m,G;for(let W=0;W<X.length;W++){const da=X[W];if(0<W){if(m=R(N,da[0]),G=q(N,da[1]),m!==B||G!==g)O.push(I(da,m-B,G-g)),B=m,g=G}else B=R(N,da[0]),g=q(N,da[1]),O.push(I(da,B,g))}return 0<O.length?
O:null}function A(N,I,X,O){return D(N,X?O?ha:U:O?U:aa,I)}function w(N,I,X,O){const B=[];X=X?O?ha:U:O?U:aa;for(O=0;O<I.length;O++){const g=D(N,X,I[O]);g&&3<=g.length&&B.push(g)}return B.length?B:null}function v(N,I,X,O){const B=[];X=X?O?ha:U:O?U:aa;for(O=0;O<I.length;O++){const g=D(N,X,I[O]);g&&2<=g.length&&B.push(g)}return B.length?B:null}function t({scale:N,translate:I},X){return X*N[0]+I[0]}function F({scale:N,translate:I},X){return I[1]-X*N[1]}function L(N,I,X){const O=Array(X.length);if(!X.length)return O;
const [B,g]=N.scale;let m=t(N,X[0][0]);N=F(N,X[0][1]);O[0]=I(X[0],m,N);for(let G=1;G<X.length;G++){const W=X[G];m+=W[0]*B;N-=W[1]*g;O[G]=I(W,m,N)}return O}function J(N,I,X){const O=Array(X.length);for(let B=0;B<X.length;B++)O[B]=L(N,I,X[B]);return O}function u(N,I,X,O){return L(N,X?O?ha:U:O?U:aa,I)}function C(N,I,X,O){return J(N,X?O?ha:U:O?U:aa,I)}function c(N,I,X,O){return J(N,X?O?ha:U:O?U:aa,I)}function e(N,I,X){let [O,B]=X[0],g=Math.min(O,I[0]),m=Math.min(B,I[1]),G=Math.max(O,I[2]);I=Math.max(B,
I[3]);for(let W=1;W<X.length;W++){const [da,ja]=X[W];O+=da;B+=ja;0>da&&(g=Math.min(g,O));0<da&&(G=Math.max(G,O));0>ja?m=Math.min(m,B):0<ja&&(I=Math.max(I,B))}N[0]=g;N[1]=m;N[2]=G;N[3]=I;return N}function p(N,I){if(!I.length)return null;N[0]=N[1]=Number.POSITIVE_INFINITY;N[2]=N[3]=Number.NEGATIVE_INFINITY;for(let X=0;X<I.length;X++)e(N,N,I[X]);return N}function r(N,I,X,O,B){I.xmin=R(N,X.xmin);I.ymin=q(N,X.ymin);I.xmax=R(N,X.xmax);I.ymax=q(N,X.ymax);I!==X&&(O&&(I.zmin=X.zmin,I.zmax=X.zmax),B&&(I.mmin=
X.mmin,I.mmax=X.mmax));return I}function f(N,I,X,O,B){I.points=A(N,X.points,O,B);return I}function y(N,I,X,O,B){I.x=R(N,X.x);I.y=q(N,X.y);I!==X&&(O&&(I.z=X.z),B&&(I.m=X.m));return I}function z(N,I,X,O,B){N=w(N,X.rings,O,B);if(!N)return null;I.rings=N;return I}function M(N,I,X,O,B){N=v(N,X.paths,O,B);if(!N)return null;I.paths=N;return I}const aa=(N,I,X)=>[I,X],U=(N,I,X)=>[I,X,N[2]],ha=(N,I,X)=>[I,X,N[2],N[3]];l.equals=function(N,I){if(N===I||null==N&&null==I)return!0;if(null==N||null==I)return!1;let X,
O,B,g;N&&"upperLeft"===N.originPosition?(X=N.translate[0],O=N.translate[1],N=N.scale[0]):(X=d.isSome(N.extent)?N.extent.xmin:0,O=d.isSome(N.extent)?N.extent.ymax:0,N=N.tolerance);I&&"upperLeft"===I.originPosition?(B=I.translate[0],g=I.translate[1],I=I.scale[0]):(B=d.isSome(I.extent)?I.extent.xmin:0,g=d.isSome(I.extent)?I.extent.ymax:0,I=I.tolerance);return X===B&&O===g&&N===I};l.getQuantizedBoundsCoordsArray=e;l.getQuantizedBoundsCoordsArrayArray=p;l.getQuantizedBoundsPaths=function(N){return p([0,
0,0,0],N)};l.getQuantizedBoundsPoints=function(N){const I=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return e(I,I,N)};l.getQuantizedBoundsRings=function(N){return p([0,0,0,0],N)};l.quantizeBounds=function(N,I,X){I[0]=R(N,X[0]);I[3]=q(N,X[1]);I[2]=R(N,X[2]);I[1]=q(N,X[3]);return I};l.quantizeExtent=r;l.quantizeGeometry=function(N,I){return N&&I?T.isPoint(I)?y(N,{},I,!1,!1):T.isPolyline(I)?M(N,{},I,!1,!1):T.isPolygon(I)?z(N,{},I,!1,!1):T.isMultipoint(I)?
f(N,{},I,!1,!1):T.isExtent(I)?r(N,{},I,!1,!1):null:null};l.quantizeMultipoint=f;l.quantizePaths=v;l.quantizePoint=y;l.quantizePoints=A;l.quantizePolygon=z;l.quantizePolyline=M;l.quantizeRings=w;l.quantizeX=R;l.quantizeY=q;l.toQuantizationTransform=function(N){return N?{originPosition:"upper-left"===N.originPosition?"upperLeft":"lower-left"===N.originPosition?"lowerLeft":N.originPosition,scale:N.tolerance?[N.tolerance,N.tolerance]:[1,1],translate:d.isSome(N.extent)?[N.extent.xmin,N.extent.ymax]:[0,
0]}:null};l.unquantizeBounds=function(N,I,X){return X?(I[0]=t(N,X[0]),I[1]=F(N,X[3]),I[2]=t(N,X[2]),I[3]=F(N,X[1]),I):[t(N,I[0]),F(N,I[3]),t(N,I[2]),F(N,I[1])]};l.unquantizeCoordsArray=L;l.unquantizeCoordsArrayArray=J;l.unquantizeExtent=function(N,I,X,O,B){I.xmin=t(N,X.xmin);I.ymin=F(N,X.ymin);I.xmax=t(N,X.xmax);I.ymax=F(N,X.ymax);I!==X&&(O&&(I.zmin=X.zmin,I.zmax=X.zmax),B&&(I.mmin=X.mmin,I.mmax=X.mmax));return I};l.unquantizeMultipoint=function(N,I,X,O,B){d.isSome(X)&&(I.points=u(N,X.points,O,B));
return I};l.unquantizePaths=C;l.unquantizePoint=function(N,I,X,O,B){if(d.isNone(X))return I;I.x=t(N,X.x);I.y=F(N,X.y);I!==X&&(O&&(I.z=X.z),B&&(I.m=X.m));return I};l.unquantizePoints=u;l.unquantizePolygon=function(N,I,X,O,B){d.isSome(X)&&(I.rings=c(N,X.rings,O,B));return I};l.unquantizePolyline=function(N,I,X,O,B){d.isSome(X)&&(I.paths=C(N,X.paths,O,B));return I};l.unquantizeRings=c;l.unquantizeX=t;l.unquantizeY=F;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../statistics/utils"],function(l,d,T){return function(){function R(D,A,w){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=D.returnDistinctValues;this.fieldsIndex=w;this.featureAdapter=A;if((A=D.outFields)&&-1===A.indexOf("*")){this.outFields=A;D=0;for(const t of A){var v=d.getExpressionFromFieldName(t);v=(A=this.fieldsIndex.get(v))?null:d.getWhereClause(v,w);A=A?A.name:d.getAliasFromFieldName(t)||`FIELD_EXP_${D++}`;this._fieldDataCache.set(t,
{alias:A,clause:v})}}}var q=R.prototype;q.countDistinctValues=function(D){if(!this.returnDistinctValues)return D.length;D.forEach(A=>this.getAttributes(A));return this._returnDistinctMap.size};q.getAttributes=function(D){D=this._processAttributesForOutFields(D);return this._processAttributesForDistinctValues(D)};q.getFieldValue=function(D,A,w){const v=w?w.name:A;let t=null;this._fieldDataCache.has(v)?t=this._fieldDataCache.get(v).clause:w||(t=d.getWhereClause(A,this.fieldsIndex),this._fieldDataCache.set(v,
{alias:v,clause:t}));return w?this.featureAdapter.getAttribute(D,v):t.calculateValue(D,this.featureAdapter)};q.getNormalizedValue=function(D,A){const w=A.normalizationType,v=A.normalizationTotal;let t=this.getFieldValue(D,A.field,A.fieldInfo);w&&Number.isFinite(t)&&(D=this.getFieldValue(D,A.normalizationField,A.normalizationFieldInfo),t=T.getNormalizedValue(t,w,D,v));return t};q.getExpressionValue=function(D,A,w){D={attributes:this.featureAdapter.getAttributes(D)};D=w.createExecContext(D,A.viewInfo);
return w.executeFunction(A.compiledFunc,D)};q.validateItem=function(D,A){this._fieldDataCache.has(A)||this._fieldDataCache.set(A,{alias:A,clause:d.getWhereClause(A,this.fieldsIndex)});return this._fieldDataCache.get(A).clause.testFeature(D,this.featureAdapter)};q.validateItems=function(D,A){this._fieldDataCache.has(A)||this._fieldDataCache.set(A,{alias:A,clause:d.getWhereClause(A,this.fieldsIndex)});return this._fieldDataCache.get(A).clause.testSet(D,this.featureAdapter)};q._processAttributesForOutFields=
function(D){const A=this.outFields;if(!A||!A.length)return this.featureAdapter.getAttributes(D);const w={};for(const v of A){const {alias:t,clause:F}=this._fieldDataCache.get(v);w[t]=F?F.calculateValue(D,this.featureAdapter):this.featureAdapter.getAttribute(D,t)}return w};q._processAttributesForDistinctValues=function(D){if(l.isNone(D)||!this.returnDistinctValues)return D;var A=this.outFields,w=[];if(A)for(const t of A){var {alias:v}=this._fieldDataCache.get(t);w.push(D[v])}else for(v in D)w.push(D[v]);
A=`${(A||["*"]).join(",")}=${w.join(",")}`;w=this._returnDistinctMap.get(A)||0;this._returnDistinctMap.set(A,++w);return 1<w?null:D};return R}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(l,d,T){function R(f){const y=null!=f.minValue||null!=f.maxValue,z=!!f.sqlExpression&&f.supportsSQLExpression;return!(null!=f.normalizationField||null!=f.normalizationType)&&!y&&!z}function q(f){const {values:y,
useSampleStdDev:z,supportsNullCount:M}=f;var aa=Number.POSITIVE_INFINITY;let U=Number.NEGATIVE_INFINITY,ha=null,N=null;var I=null;let X=null,O=0;const B=null==f.minValue?-Infinity:f.minValue,g=null==f.maxValue?Infinity:f.maxValue;for(const m of y)Number.isFinite(m)?m>=B&&m<=g&&(ha+=m,aa=Math.min(aa,m),U=Math.max(U,m),O++):"string"===typeof m&&O++;if(O&&null!=ha){N=ha/O;I=0;for(const m of y)Number.isFinite(m)&&m>=B&&m<=g&&(I+=(m-N)**2);X=z?1<O?I/(O-1):0:0<O?I/O:0;I=Math.sqrt(X)}else U=aa=null;aa={avg:N,
count:O,max:U,min:aa,stddev:I,sum:ha,variance:X};M&&(aa.nullcount=y.length-O);f.percentileParams&&(aa.median=D(y,f.percentileParams));return aa}function D(f,y){const {fieldType:z,value:M,orderBy:aa,isDiscrete:U}=y,ha=A(z,"desc"===aa);f=[...f].filter(O=>null!=O).sort((O,B)=>ha(O,B));if(0===f.length)return null;if(0>=M)return f[0];if(1<=M)return f[f.length-1];var N=(f.length-1)*M,I=Math.floor(N);y=I+1;N%=1;I=f[I];const X=f[y];return y>=f.length||U||"string"===typeof I||"string"===typeof X?I:I*(1-N)+
X*N}function A(f,y){const z=y?1:-1,M=v(y),aa=w(y);if(!f||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...p].includes(f))return(U,ha)=>"number"===typeof U&&"number"===typeof ha?M(U,ha):"string"===typeof U&&"string"===typeof ha?aa(U,ha):z;if("esriFieldTypeDate"===f)return(U,ha)=>{U=(new Date(U)).getTime();ha=(new Date(ha)).getTime();return isNaN(U)||isNaN(ha)?z:M(U,ha)};if(p.has(f))return(U,ha)=>M(U,ha);if("esriFieldTypeString"===f)return(U,ha)=>aa(U,ha);if("esriFieldTypeGUID"===
f||"esriFieldTypeGlobalID"===f){const U=w(y);return(ha,N)=>U(t(ha),t(N))}return y?(U,ha)=>1:(U,ha)=>-1}function w(f){return f?(y,z)=>{y=y.toUpperCase();z=z.toUpperCase();return y>z?-1:y<z?1:0}:(y,z)=>{y=y.toUpperCase();z=z.toUpperCase();return y<z?-1:y>z?1:0}}function v(f){return f?(y,z)=>z-y:(y,z)=>y-z}function t(f){return f.substr(24,12)+f.substr(19,4)+f.substr(16,2)+f.substr(14,2)+f.substr(11,2)+f.substr(9,2)+f.substr(6,2)+f.substr(4,2)+f.substr(2,2)+f.substr(0,2)}function F(f,y){const z=J({field:y.field,
normalizationType:y.normalizationType,normalizationField:y.normalizationField,classificationMethod:y.classificationMethod,standardDeviationInterval:y.standardDeviationInterval,breakCount:y.numClasses||5});f=L(f,y.minValue,y.maxValue);return T.createGenerateRendererClassBreaks({definition:z,values:f,normalizationTotal:y.normalizationTotal})}function L(f,y,z){y=null==y?-Infinity:y;z=null==z?Infinity:z;return f.filter(M=>Number.isFinite(M)&&M>=y&&M<=z)}function J(f){const y=f.field,z=f.classificationMethod||
"equal-interval",M=f.normalizationType,aa=f.normalizationField,U=new d;U.classificationField=y;U.breakCount=f.breakCount;U.classificationMethod=z;U.standardDeviationInterval="standard-deviation"===z?f.standardDeviationInterval||1:void 0;U.normalizationType=M;U.normalizationField="field"===M?aa:void 0;return U}function u(f,y){const {field:z,classificationMethod:M,standardDeviationInterval:aa,normalizationType:U,normalizationField:ha,normalizationTotal:N,minValue:I,maxValue:X}=y,O=y.numBins||10;let B=
y=null,g=null;M&&"equal-interval"!==M||U?({classBreaks:f}=F(f,{field:z,normalizationType:U,normalizationField:ha,normalizationTotal:N,classificationMethod:M,standardDeviationInterval:aa,minValue:I,maxValue:X,numClasses:O}),y=f[0].minValue,B=f[f.length-1].maxValue,g=f.map(m=>[m.minValue,m.maxValue])):(null!=I&&null!=X?(y=I,B=X):(f=q({values:f,minValue:I,maxValue:X,useSampleStdDev:!U,supportsNullCount:R({normalizationType:U,normalizationField:ha,minValue:I,maxValue:X})}),y=f.min,B=f.max),g=c(y,B,O));
return{min:y,max:B,intervals:g}}function C(f,y){let z=-1;for(let M=f.length-1;0<=M;M--)if(y>=f[M][0]){z=M;break}return z}function c(f,y,z){const M=(y-f)/z,aa=[];let U;for(let ha=1;ha<=z;ha++)U=f+M,U=Number(U.toFixed(16)),aa.push([f,ha===z?y:U]),f=U;return aa}const e=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,p=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),r="min max avg stddev count sum variance nullcount median".split(" ");l.calculateClassBreaks=
F;l.calculateHistogram=function(f,y){const {min:z,max:M,intervals:aa}=u(f,y),U=aa.map((ha,N)=>({minValue:aa[N][0],maxValue:aa[N][1],count:0}));for(const ha of f)null!=ha&&ha>=z&&ha<=M&&(f=C(aa,ha),-1<f&&U[f].count++);return{bins:U,minValue:z,maxValue:M,normalizationTotal:y.normalizationTotal}};l.calculatePercentile=D;l.calculateStatistics=q;l.calculateStringStatistics=function(f){const y=f.returnDistinct?[...new Set(f.values)]:f.values,z=y.filter(aa=>null!=aa).length,M={count:z};f.supportsNullCount&&
(M.nullcount=y.length-z);f.percentileParams&&(M.median=D(y,f.percentileParams));return M};l.calculateUniqueValuesCount=function(f){const y={};for(let z of f){if(null==z||"string"===typeof z&&""===z.trim())z=null;null==y[z]?y[z]={count:1,data:z}:y[z].count++}return{count:y}};l.createClassBreaksDefinition=J;l.createUVResult=function(f,y,z){const M=f.count;f=[];z&&y&&"coded-value"===y.type&&y.codedValues.forEach(aa=>{aa=aa.code;M.hasOwnProperty(aa)||(M[aa]={data:aa,count:0})});for(const aa in M)y=M[aa],
f.push({value:y.data,count:y.count,label:y.label});return{uniqueValueInfos:f}};l.getAttributeComparator=A;l.getEqualIntervalBins=c;l.getNormalizedValue=function(f,y,z,M){let aa=null;switch(y){case "log":0!==f&&(aa=Math.log(f)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(M)&&0!==M&&(aa=f/M*100);break;case "field":Number.isFinite(z)&&0!==z&&(aa=f/z);break;case "natural-log":0<f&&(aa=Math.log(f));break;case "square-root":0<f&&(aa=f**.5)}return aa};l.isNullCountSupported=R;l.processSummaryStatisticsResult=
function(f,y){let z;for(z in f)-1<r.indexOf(z)&&(Number.isFinite(f[z])||(f[z]=null));if(!y)return f;["avg","stddev","variance"].forEach(M=>{null!=f[M]&&(f[M]=Math.ceil(f[M]))});return f};l.resolveCBResult=function(f,y){let z=f.classBreaks;const M=z[0].minValue,aa=z[z.length-1].maxValue,U="standard-deviation"===y;z=z.map(ha=>{const N=ha.label;ha={minValue:ha.minValue,maxValue:ha.maxValue,label:N};if(U&&N){const I=N.match(e).map(X=>+X.trim());2===I.length?(ha.minStdDev=I[0],ha.maxStdDev=I[1],0>I[0]&&
0<I[1]&&(ha.hasAvg=!0)):1===I.length&&(N.includes("\x3c")?(ha.minStdDev=null,ha.maxStdDev=I[0]):N.includes("\x3e")&&(ha.minStdDev=I[0],ha.maxStdDev=null))}return ha});return{minValue:M,maxValue:aa,classBreakInfos:z,normalizationTotal:f.normalizationTotal}};l.statisticTypes=r;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(l,d,T,R,q,D,A,w,v){q=new T.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});T=new T.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});v=function(t){function F(){var L=t.apply(this,arguments)||this;L.breakCount=null;L.classificationField=
null;L.classificationMethod=null;L.normalizationField=null;L.normalizationType=null;L.type="class-breaks-definition";return L}l._inheritsLoose(F,t);l._createClass(F,[{key:"standardDeviationInterval",set:function(L){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",L)}},{key:"definedInterval",set:function(L){"defined-interval"===this.classificationMethod&&this._set("definedInterval",L)}}]);return F}(v);d.__decorate([R.property({json:{write:!0}})],v.prototype,"breakCount",
void 0);d.__decorate([R.property({json:{write:!0}})],v.prototype,"classificationField",void 0);d.__decorate([R.property({type:String,json:{read:q.read,write:q.write}})],v.prototype,"classificationMethod",void 0);d.__decorate([R.property({json:{write:!0}})],v.prototype,"normalizationField",void 0);d.__decorate([R.property({json:{read:T.read,write:T.write}})],v.prototype,"normalizationType",void 0);d.__decorate([R.property({value:null,json:{write:!0}})],v.prototype,"standardDeviationInterval",null);
d.__decorate([R.property({value:null,json:{write:!0}})],v.prototype,"definedInterval",null);d.__decorate([R.property()],v.prototype,"type",void 0);return v=d.__decorate([w.subclass("esri.rest.support.ClassBreaksDefinition")],v)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(l,d,T,R,q,D,A,w,v,t,F){T=new T.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});R=function(L){function J(){var u=L.apply(this,arguments)||this;u.baseSymbol=null;u.colorRamp=null;u.type=null;return u}l._inheritsLoose(J,L);return J}(R.JSONSupport);d.__decorate([q.property({type:F,json:{write:!0}})],R.prototype,"baseSymbol",void 0);d.__decorate([q.property({types:t.types,json:{read:{reader:t.fromJSON},write:!0}})],R.prototype,"colorRamp",void 0);d.__decorate([q.property({json:{read:T.read,
write:T.write}})],R.prototype,"type",void 0);return R=d.__decorate([v.subclass("esri.rest.support.ClassificationDefinition")],R)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(l,d,T,R){T={key:"type",base:T,typeMap:{algorithmic:d,multipart:R}};l.fromJSON=function(q){return q&&q.type?"algorithmic"===q.type?d.fromJSON(q):"multipart"===q.type?R.fromJSON(q):null:null};l.types=T;Object.defineProperty(l,"__esModule",
{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(l,d,T,R,q,D,A,w,v){var t;v=t=function(F){function L(J){J=F.call(this,J)||this;J.algorithm=null;J.fromColor=null;J.toColor=
null;J.type="algorithmic";return J}l._inheritsLoose(L,F);L.prototype.clone=function(){return new t({fromColor:R.clone(this.fromColor),toColor:R.clone(this.toColor),algorithm:this.algorithm})};return L}(v);d.__decorate([A.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],v.prototype,"algorithm",void 0);d.__decorate([q.property({type:T,json:{type:[D.Integer],write:!0}})],v.prototype,"fromColor",void 0);d.__decorate([q.property({type:T,json:{type:[D.Integer],
write:!0}})],v.prototype,"toColor",void 0);d.__decorate([q.property({type:["algorithmic"]})],v.prototype,"type",void 0);return v=t=d.__decorate([w.subclass("esri.rest.support.AlgorithmicColorRamp")],v)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(l,d,T){l.enumeration=function(R,q={}){var D;R=R instanceof d.JSONMap?R:new d.JSONMap(R,q);R={type:(null!=(D=null==q?void 0:q.ignoreUnknown)?D:1)?R.apiValues:String,readOnly:null==
q?void 0:q.readOnly,json:{type:R.jsonValues,read:null!=q&&q.readOnly?!1:{reader:R.read},write:{writer:R.write}}};void 0!==(null==q?void 0:q.default)&&(R.json.default=q.default);void 0!==(null==q?void 0:q.name)&&(R.json.name=q.name);return T.property(R)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,d,T,R,q,D,A,w){T=function(v){function t(F){F=v.call(this,F)||this;F.type=null;return F}l._inheritsLoose(t,v);return t}(T.JSONSupport);d.__decorate([R.property({readOnly:!0,json:{read:!1,write:!0}})],T.prototype,"type",void 0);return T=d.__decorate([w.subclass("esri.rest.support.ColorRamp")],T)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(l,d,T,R,q,D,A,w){var v;q=v=function(t){function F(L){L=t.call(this,L)||this;L.colorRamps=null;L.type="multipart";return L}l._inheritsLoose(F,t);F.prototype.clone=function(){return new v({colorRamps:T.clone(this.colorRamps)})};return F}(w);d.__decorate([R.property({type:[A],json:{write:!0}})],q.prototype,"colorRamps",void 0);d.__decorate([R.property({type:["multipart"]})],q.prototype,"type",void 0);return q=v=d.__decorate([D.subclass("esri.rest.support.MultipartColorRamp")],q)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(l,d,T,R,q,D,A,w,v,t,F){R=new R.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let L=0;q=function(J){function u(c){c=J.call(this,c)||this;c.id=`sym${L++}`;c.type=null;return c}l._inheritsLoose(u,
J);var C=u.prototype;C.readColor=function(c){return c&&null!=c[0]?[c[0],c[1],c[2],c[3]/255]:c};C.collectRequiredFields=function(){var c=l._asyncToGenerator(function*(e,p){});return function(e,p){return c.apply(this,arguments)}}();C.hash=function(){return JSON.stringify(this.toJSON())};C.clone=function(){};l._createClass(u,[{key:"color",set:function(c){this._set("color",c)}}]);return u}(q.JSONSupport);d.__decorate([D.property({type:R.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:R.write}}})],
q.prototype,"type",void 0);d.__decorate([D.property({type:T,value:new T([0,0,0,1]),json:{write:{allowNull:!0}}})],q.prototype,"color",null);d.__decorate([t.reader("color")],q.prototype,"readColor",null);return q=d.__decorate([F.subclass("esri.symbols.Symbol")],q)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(l){function d(F){const {classificationMethod:L,breakCount:J,normalizationType:u,definedInterval:C}=F.definition,c=[];var e=F.values;if(0===e.length)return[];
e=e.sort((M,aa)=>M-aa);var p=e[0],r=e[e.length-1];if("equal-interval"===L)if(e.length>=J){e=(r-p)/J;F=p;for(var f=1;f<J;f++){var y=Number((p+f*e).toFixed(6));c.push({minValue:F,maxValue:y,label:T(F,y,u)});F=y}c.push({minValue:F,maxValue:r,label:T(F,r,u)})}else e.forEach(M=>{c.push({minValue:M,maxValue:M,label:T(M,M,u)})});else if("natural-breaks"===L){e=R(e);F=q(e.uniqueValues,F.valueFrequency||e.valueFrequency,J);for(f=1;f<J;f++)e.uniqueValues.length>f&&(y=Number(e.uniqueValues[F[f]].toFixed(6)),
c.push({minValue:p,maxValue:y,label:T(p,y,u)}),p=y);c.push({minValue:p,maxValue:r,label:T(p,r,u)})}else if("quantile"===L)if(e.length>=J&&p!==r){F=Math.ceil(e.length/J);f=0;for(y=1;y<J;y++){var z=F+f-1;z>e.length&&(z=e.length-1);0>z&&(z=0);c.push({minValue:p,maxValue:e[z],label:T(p,e[z],u)});p=e[z];f+=F;F=Math.ceil((e.length-f)/(J-y))}c.push({minValue:p,maxValue:r,label:T(p,r,u)})}else for(r=-1,p=0;p<e.length;p++)F=e[p],F!==r&&(r=F,c.push({minValue:r,maxValue:F,label:T(r,F,u)}),r=F);else if("standard-deviation"===
L)if(F=w(e),f=v(e,F),0===f)c.push({minValue:e[0],maxValue:e[0],label:T(e[0],e[0],u)});else{e=A(p,r,J,F,f)*f;f=0;for(y=J;1<=y;y--)z=Number((F-(y-.5)*e).toFixed(6)),c.push({minValue:p,maxValue:z,label:T(p,z,u)}),p=z,f++;y=Number((F+.5*e).toFixed(6));c.push({minValue:p,maxValue:y,label:T(p,y,u)});p=y;f++;for(z=1;z<=J;z++)y=f===2*J?r:Number((F+(z+.5)*e).toFixed(6)),c.push({minValue:p,maxValue:y,label:T(p,y,u)}),p=y,f++}else if("defined-interval"===L){if(!C)return c;r=e[0];e=e[e.length-1];p=Math.ceil((e-
r)/C);F=r;for(f=1;f<p;f++)y=Number((r+f*C).toFixed(6)),c.push({minValue:F,maxValue:y,label:T(F,y,u)}),F=y;c.push({minValue:F,maxValue:e,label:T(F,e,u)})}return c}function T(F,L,J){let u=null;return u=F===L?J&&"percent-of-total"===J?F+"%":F.toString():J&&"percent-of-total"===J?F+"% - "+L+"%":F+" - "+L}function R(F){const L=[],J=[];let u=Number.MIN_VALUE,C=1,c=-1;for(let e=0;e<F.length;e++){const p=F[e];p===u?(C++,J[c]=C):null!==p&&(L.push(p),u=p,C=1,J.push(C),c++)}return{uniqueValues:L,valueFrequency:J}}
function q(F,L,J){var u=F.length;const C=[];J>u&&(J=u);for(var c=0;c<J;c++)C.push(Math.round(c*u/J-1));C.push(u-1);c=D(C,F,L,J);{u=c.mean;c=c.sdcm;var e=J,p=0,r=0;let y=0,z=0,M=!0;for(let aa=0;2>aa&&M;aa++){0===aa&&(M=!1);for(var f=0;f<e-1;f++)for(;C[f+1]+1!==C[f+2];)if(C[f+1]+=1,p=t(f,C,F,L),y=p.sbMean,p=p.sbSdcm,r=t(f+1,C,F,L),z=r.sbMean,r=r.sbSdcm,p+r<c[f]+c[f+1])c[f]=p,c[f+1]=r,u[f]=y,u[f+1]=z,M=!0;else{--C[f+1];break}for(f=e-1;0<f;f--)for(;C[f]!==C[f-1]+1;)if(--C[f],p=t(f-1,C,F,L),y=p.sbMean,
p=p.sbSdcm,r=t(f,C,F,L),z=r.sbMean,r=r.sbSdcm,p+r<c[f-1]+c[f])c[f-1]=p,c[f]=r,u[f-1]=y,u[f]=z,M=!0;else{C[f]+=1;break}}u=M}u&&(c=D(C,F,L,J));return C}function D(F,L,J,u){let C=[];var c=[],e=[];let p=0;const r=[],f=[];for(var y=0;y<u;y++){var z=t(y,F,L,J);r.push(z.sbMean);f.push(z.sbSdcm);p+=f[y]}z=p;for(y=!0;y||p<z;){y=!1;C=[];for(c=0;c<u;c++)C.push(F[c]);for(e=0;e<u;e++)for(z=F[e]+1;z<=F[e+1];z++)if(c=L[z],0<e&&z!==F[e+1]&&Math.abs(c-r[e])>Math.abs(c-r[e-1]))F[e]=z;else if(e<u-1&&F[e]!==z-1&&Math.abs(c-
r[e])>Math.abs(c-r[e+1])){F[e+1]=z-1;break}z=p;p=0;c=[];e=[];for(let M=0;M<u;M++){c.push(r[M]);e.push(f[M]);const aa=t(M,F,L,J);r[M]=aa.sbMean;f[M]=aa.sbSdcm;p+=f[M]}}if(p>z){for(L=0;L<u;L++)F[L]=C[L],r[L]=c[L],f[L]=e[L];p=z}return{mean:r,sdcm:f}}function A(F,L,J,u,C){F=Math.max(u-F,L-u)/C/J;return 1<=F?1:.5<=F?.5:.25}function w(F){let L=0;for(let J=0;J<F.length;J++)L+=F[J];return L/=F.length}function v(F,L){let J=0;for(let u=0;u<F.length;u++){const C=F[u];J+=(C-L)*(C-L)}J/=F.length;return Math.sqrt(J)}
function t(F,L,J,u){var C=0,c=0;for(var e=L[F]+1;e<=L[F+1];e++){const p=u[e];C+=J[e]*p;c+=p}0>=c&&console.log("Exception in Natural Breaks calculation");C/=c;c=0;for(e=L[F]+1;e<=L[F+1];e++)c+=u[e]*(J[e]-C)**2;return{sbMean:C,sbSdcm:c}}l.createGenerateRendererClassBreaks=function(F){const {normalizationTotal:L}=F;return{classBreaks:d(F),normalizationTotal:L}};l.createGenerateRendererUniqueValues=function(F){F=R(F);const L=[],J=F.uniqueValues.length;for(let u=0;u<J;u++){const C=F.uniqueValues[u];L.push({value:C,
count:F.valueFrequency[u],label:C.toString()})}return{uniqueValues:L}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(l){function d(q,D,A,w,v){if(null!=w&&null!=v)return t=>{const F=q.getAttribute(t,D);t=q.getAttribute(t,A);return(null==F||F<=v)&&(null==t||t>=w)};if(null!=w)return t=>{t=q.getAttribute(t,A);return null==t||t>=w};if(null!=v)return t=>{t=q.getAttribute(t,D);return null==t||t<=v}}function T(q,D,A,w){if(null!=
A&&null!=w&&A===w)return v=>q.getAttribute(v,D)===A;if(null!=A&&null!=w)return v=>{v=q.getAttribute(v,D);return v>=A&&v<=w};if(null!=A)return v=>q.getAttribute(v,D)>=A;if(null!=w)return v=>q.getAttribute(v,D)<=w}function R(){return()=>!1}l.getTimeExtent=function(q,D){if(!q)return null;const A=D.featureAdapter,{startTimeField:w,endTimeField:v}=q;let t=Number.POSITIVE_INFINITY,F=Number.NEGATIVE_INFINITY;if(w&&v)D.forEach(L=>{const J=A.getAttribute(L,w);L=A.getAttribute(L,v);null==J||isNaN(J)||(t=Math.min(t,
J));null==L||isNaN(L)||(F=Math.max(F,L))});else{const L=w||v;D.forEach(J=>{J=A.getAttribute(J,L);null==J||isNaN(J)||(t=Math.min(t,J),F=Math.max(F,J))})}return{start:t,end:F}};l.getTimeOperator=function(q,D,A){if(!D||!q)return null;const {startTimeField:w,endTimeField:v}=q;if(!w&&!v)return null;const {start:t,end:F}=D;return null===t&&null===F?null:void 0===t&&void 0===F?R():w&&v?d(A,w,v,t,F):T(A,w||v,t,F)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(l,d,T,R,q,D,A,w,v,t,F,L,J,u){function C(B,g,m,G=B.hasZ,W=B.hasM){if(q.isNone(g))return null;const da=B.hasZ&&G,ja=B.hasM&&W;return m?(B=L.quantizeOptimizedGeometry(I,g,B.hasZ,B.hasM,"esriGeometryPoint",m,G,W),L.convertToPoint(B,da,ja)):L.convertToPoint(g,da,ja)}function c(){c=T._asyncToGenerator(function*(B,g,m){const {outFields:G,orderByFields:W,groupByFieldsForStatistics:da,outStatistics:ja}=B;if(G)for(var na=0;na<G.length;na++)G[na]=G[na].trim();if(W)for(na=0;na<W.length;na++)W[na]=W[na].trim();
if(da)for(na=0;na<da.length;na++)da[na]=da[na].trim();if(ja)for(na=0;na<ja.length;na++)ja[na].onStatisticField&&(ja[na].onStatisticField=ja[na].onStatisticField.trim());B.geometry&&!B.outSR&&(B.outSR=B.geometry.spatialReference);return p(B,g,m)});return c.apply(this,arguments)}function e(){e=T._asyncToGenerator(function*(B,g,m){return p(B,g,m)});return e.apply(this,arguments)}function p(B,g,m){return r.apply(this,arguments)}function r(){r=T._asyncToGenerator(function*(B,g,m){if(!B)return null;var {where:G}=
B;B.where=G=G&&G.trim();if(!G||/^1 *= *1$/.test(G)||g&&g===G)B.where=null;if(!B.geometry)return B;g=yield f(B);B.distance=0;B.units=null;"esriSpatialRelEnvelopeIntersects"===B.spatialRel&&({spatialReference:G}=B.geometry,g=A.getGeometryExtent(g),g.spatialReference=G);B.geometry=g;yield u.checkProjectionSupport(g.spatialReference,m);g=(yield v.normalizeCentralMeridian(w.fromJSON(g)))[0];if(q.isNone(g))throw U;g=g.toJSON();g=yield u.project(g,g.spatialReference,m);if(!g)throw U;g.spatialReference=m;
B.geometry=g;return B});return r.apply(this,arguments)}function f(B){return y.apply(this,arguments)}function y(){y=T._asyncToGenerator(function*(B){const {geometry:g,distance:m,units:G}=B;if(null==m||"vertexAttributes"in g)return g;var W=g.spatialReference;B=G?aa.fromJSON(G):D.getUnitString(W);W=W&&(t.isGeographic(W)||t.isWebMercator(W))?g:yield u.checkProjectionSupport(W,t.WGS84).then(()=>u.project(g,t.WGS84));return(yield z())(W.spatialReference,W,m,B)});return y.apply(this,arguments)}function z(){return M.apply(this,
arguments)}function M(){M=T._asyncToGenerator(function*(){return(yield new Promise((B,g)=>l(["../../../geometry/geometryEngineJSON"],B,g))).geodesicBuffer});return M.apply(this,arguments)}const aa=new R.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),U=Object.freeze({}),ha=new J,N=new J,I=new J,X={esriGeometryPoint:L.convertToPoint,esriGeometryPolyline:L.convertToPolyline,
esriGeometryPolygon:L.convertToPolygon,esriGeometryMultipoint:L.convertToMultipoint},O=(B,g)=>"_geVersion"!==B?g:void 0;d.QUERY_ENGINE_EMPTY_RESULT=U;d.cleanFromGeometryEngine=function(B){return B&&"_geVersion"in B?JSON.parse(JSON.stringify(B,O)):B};d.getCentroid=function(B,g,m){if("esriGeometryPolygon"!==B.geometryType||!g||!g.centroid&&!g.geometry)return null;g.centroid||(g.centroid=F.getCentroidOptimizedGeometry(new J,g.geometry,B.hasZ,B.hasM));return C(B,g.centroid,m)};d.getGeometry=function(B,
g,m,G,W,da,ja=g,na=m){const ua=g&&ja,ma=m&&na;G=q.isSome(G)?"coords"in G?G:G.geometry:null;if(q.isNone(G))return null;if(W)return g=L.generalizeOptimizedGeometry(N,G,g,m,B,W,ja,na),da&&(g=L.quantizeOptimizedGeometry(I,g,ua,ma,B,da)),X[B](g,ua,ma);if(da)return da=L.quantizeOptimizedGeometry(I,G,g,m,B,da,ja,na),X[B](da,ua,ma);L.removeZMValues(ha,G,g,m,ja,na);return X[B](ha,ua,ma)};d.normalizeFilter=function(B,g,m){return e.apply(this,arguments)};d.normalizeQuery=function(B,g,m){return c.apply(this,
arguments)};d.normalizeQueryLike=p;d.transformCentroid=C;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(l,d,T,R,q,D,A,w){function v(K,P,ca){if(K)for(const oa of K)(K=(K=D.getDeepValue(oa,P))&&"function"!==typeof K&&ca.get(K))&&D.setDeepValue(oa,K.name,P)}function t(K,P){if(!K||
!P)return[];k.clear();F(k,K,P);return Array.from(k).sort()}function F(K,P,ca){var oa;if(ca)if(null!=P&&null!=(oa=P.fields)&&oa.length)if(ca.includes("*"))for(const {name:qa}of P.fields)K.add(qa);else for(const qa of ca)L(K,P,qa);else if(ca.includes("*"))K.clear(),K.add("*");else for(const qa of ca)K.add(qa)}function L(K,P,ca){"string"===typeof ca&&(P?(P=P.get(ca))&&K.add(P.name):K.add(ca))}function J(K,P,ca){return u.apply(this,arguments)}function u(){u=T._asyncToGenerator(function*(K,P,ca){var oa;
if(ca){var {arcadeUtils:qa}=yield w.loadArcade();ca=qa.extractFieldNames(ca,null==P?void 0:null==(oa=P.fields)?void 0:oa.map(wa=>wa.name));for(const wa of ca)L(K,P,wa)}});return u.apply(this,arguments)}function C(K,P,ca){return c.apply(this,arguments)}function c(){c=T._asyncToGenerator(function*(K,P,ca){if(ca&&"1\x3d1"!==ca){ca=(yield new Promise((oa,qa)=>l(["../../core/sql/WhereClause"],oa,qa))).WhereClause.create(ca,P);if(!ca.isStandardized)throw new R("fieldUtils:collectFilterFields","Where clause is not standardized");
F(K,P,ca.fieldNames)}});return c.apply(this,arguments)}function e(K,P){for(const ca of K)if(ca&&ca.valueType&&ca.valueType===P)return ca.name;return null}function p(){p=T._asyncToGenerator(function*(K){if(!K)return[];const P=new Set;yield r(P,K);return Array.from(P).sort()});return p.apply(this,arguments)}function r(K,P){return f.apply(this,arguments)}function f(){f=T._asyncToGenerator(function*(K,P){if(P){var ca=D.getDeepValue("elevationInfo.featureExpressionInfo",P);if(ca)return ca.collectRequiredFields(K,
P.fieldsIndex)}});return f.apply(this,arguments)}function y(K,P,ca){return z.apply(this,arguments)}function z(){z=T._asyncToGenerator(function*(K,P,ca){ca.outStatistic.onStatisticValueExpression?J(K,P,ca.outStatistic.onStatisticValueExpression):K.add(ca.outStatistic.onStatisticField)});return z.apply(this,arguments)}function M(){M=T._asyncToGenerator(function*(K,P,ca){var oa,qa;if(P&&ca&&"cluster"===ca.type){var wa=[];null!=(oa=ca.popupTemplate)&&oa.expressionInfos&&wa.push(...ca.popupTemplate.expressionInfos.map(xa=>
J(K,P.fieldsIndex,xa.expression)));if(Array.isArray(null==(qa=ca.popupTemplate)?void 0:qa.content)){oa=ca.popupTemplate.content;for(const xa of oa)"expression"===xa.type&&xa.expressionInfo&&wa.push(J(K,P.fieldsIndex,xa.expressionInfo.expression))}ca.fields&&wa.push(...ca.fields.map(xa=>y(K,P.fieldsIndex,xa)));yield Promise.all(wa)}});return M.apply(this,arguments)}function aa(){aa=T._asyncToGenerator(function*(K,P,ca){P&&(P.timeInfo&&q.isSome(ca)&&ca.timeExtent&&F(K,P.fieldsIndex,[P.timeInfo.startField,
P.timeInfo.endField]),P.floorInfo&&F(K,P.fieldsIndex,[P.floorInfo.floorField]),q.isSome(ca)&&q.isSome(ca.where)&&(yield C(K,P.fieldsIndex,ca.where)))});return aa.apply(this,arguments)}function U(){U=T._asyncToGenerator(function*(K,P,ca){P&&ca&&(yield Promise.all(ca.map(oa=>ha(K,P,oa))))});return U.apply(this,arguments)}function ha(K,P,ca){return N.apply(this,arguments)}function N(){N=T._asyncToGenerator(function*(K,P,ca){P&&ca&&(ca.valueExpression?yield J(K,P.fieldsIndex,ca.valueExpression):ca.field&&
L(K,P.fieldsIndex,ca.field))});return N.apply(this,arguments)}function I(){I=T._asyncToGenerator(function*(K){if(!K)return[];const P="timeInfo"in K&&K.timeInfo;return P?t(K.fieldsIndex,[K.trackIdField,P.startField,P.endField]):[]});return I.apply(this,arguments)}function X(){X=T._asyncToGenerator(function*(K){if(!K)return[];const P=new Set;yield O(P,K);return Array.from(P).sort()});return X.apply(this,arguments)}function O(K,P){return B.apply(this,arguments)}function B(){B=T._asyncToGenerator(function*(K,
P){const {labelingInfo:ca,fieldsIndex:oa}=P;ca&&ca.length&&(yield Promise.all(ca.map(qa=>g(K,oa,qa))))});return B.apply(this,arguments)}function g(K,P,ca){return m.apply(this,arguments)}function m(){m=T._asyncToGenerator(function*(K,P,ca){if(ca){var oa=ca.getLabelExpression();ca=ca.where;"arcade"===oa.type?yield J(K,P,oa.expression):(oa=oa.expression.match(/{[^}]*}/g))&&oa.forEach(qa=>{L(K,P,qa.slice(1,-1))});yield C(K,P,ca)}});return m.apply(this,arguments)}function G(K){return"number"===typeof K&&
!isNaN(K)&&isFinite(K)}function W(K){return null===K||G(K)}function da(K){return null===K||V(K)}function ja(K){return null!=K&&"string"===typeof K}function na(K){return null===K||ja(K)}function ua(){return!0}function ma(K,P){let ca;switch(K.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ca=K.nullable?da:V;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ca=
K.nullable?W:G;break;case "string":case "esriFieldTypeString":ca=K.nullable?na:ja;break;default:ca=ua}return 1===arguments.length?ca:ca(P)}function la(K){return null!=K&&E.has(K.type)}function va(K,P){return K.nullable&&null===P?null:la(K)&&!Ja(K.type,Number(P))?d.NumericRangeValidationError.OUT_OF_RANGE:ma(K,P)?K.domain?A.validateDomainValue(K.domain,P):null:d.TypeValidationError.INVALID_TYPE}function Ja(K,P){return(K="string"===typeof K?Ca(K):K)?K.isInteger?V(P)&&P>=K.min&&P<=K.max:P>=K.min&&P<=
K.max:!1}function Ca(K){switch(K){case "esriFieldTypeSmallInteger":case "small-integer":return Q;case "esriFieldTypeInteger":case "integer":return S;case "esriFieldTypeSingle":case "single":return fa;case "esriFieldTypeDouble":case "double":return ea}}function Qa(K,P,ca){if(!P||!P.attributes||!K){if(q.isSome(ca))for(var oa of K)ca.add(oa);return!0}P=P.attributes;oa=!1;for(const qa of K)if(!(qa in P))if(oa=!0,q.isSome(ca))ca.add(qa);else break;return oa}function Oa(){Oa=T._asyncToGenerator(function*(K,
P){const ca=new Set;for(const oa of P)yield J(ca,K.fieldsIndex,oa);return Array.from(ca).sort()});return Oa.apply(this,arguments)}const pa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),a=["field","normalizationField"],k=new Set,V=(()=>"isInteger"in Number?Number.isInteger:K=>"number"===typeof K&&isFinite(K)&&Math.floor(K)===K)(),n=["integer","small-integer",
"single","double"],E=new Set([...n,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const Q={min:-32768,max:32767,isInteger:!0},S={min:-2147483648,max:2147483647,
isInteger:!0},fa={min:-3.4E38,max:1.2E38,isInteger:!1},ea={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=J;d.collectElevationFields=r;d.collectFeatureReductionFields=function(K,P,ca){return M.apply(this,arguments)};d.collectField=L;d.collectFields=F;d.collectFilterFields=function(K,P,ca){return aa.apply(this,arguments)};d.collectLabelingFields=O;d.collectOrderByInfos=function(K,P,ca){return U.apply(this,arguments)};d.doubleRange=ea;d.featureHasFields=function(K,
P){return!Qa(K,P,null)};d.fixFields=t;d.fixRendererFields=function(K,P){if(null!=K&&null!=P)for(const ca of Array.isArray(K)?K:[K])if(v(pa,ca,P),"visualVariables"in ca&&ca.visualVariables)for(const oa of ca.visualVariables)v(a,oa,P)};d.fixTimeInfoFields=function(K,P){if(null!=K&&null!=P&&P.fields.length)if("startField"in K){var ca=P.get(K.startField);P=P.get(K.endField);K.startField=ca&&ca.name||null;K.endField=P&&P.name||null}else ca=P.get(K.startTimeField),P=P.get(K.endTimeField),K.startTimeField=
ca&&ca.name||null,K.endTimeField=P&&P.name||null};d.getDisplayFieldName=function({displayField:K,fields:P}){if(K)return K;if(!P||!P.length)return null;if(!(K=e(P,"name-or-title")||e(P,"unique-identifier")||e(P,"type-or-category")))a:{for(const ca of P)if(ca&&ca.name&&(P=ca.name.toLowerCase(),-1<P.indexOf("name")||-1<P.indexOf("title"))){K=ca.name;break a}K=null}return K};d.getElevationFields=function(K){return p.apply(this,arguments)};d.getExpressionFields=function(K,P){return Oa.apply(this,arguments)};
d.getFeatureEditFields=function(K){if(!K)return[];const P="editFieldsInfo"in K&&K.editFieldsInfo;return P?t(K.fieldsIndex,[P&&P.creatorField,P&&P.creationDateField,P&&P.editorField,P&&P.editDateField]):[]};d.getFeatureGeometryFields=function(K){if(!K)return[];const P=K.geometryFieldsInfo;return P?t(K.fieldsIndex,[P.shapeAreaField,P.shapeLengthField]):[]};d.getFieldDefaultValue=function(K){const P=K.defaultValue;if(void 0!==P&&ma(K,P))return P;if(K.nullable)return null};d.getFieldRange=function(K){const P=
A.getDomainRange(K.domain);if(P)return P;if(la(K))return Ca(K.type)};d.getLabelingFields=function(K){return X.apply(this,arguments)};d.getNumericTypeForValue=function(K){if(!G(K))return null;if(V(K)){if(K>=Q.min&&K<=Q.max)return"esriFieldTypeSmallInteger";if(K>=S.min&&K<=S.max)return"esriFieldTypeInteger"}return K>=fa.min&&K<=fa.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};d.getTimeFields=function(K){return I.apply(this,arguments)};d.integerRange=S;d.isDateField=function(K){return null!=K&&("date"===
K.type||"esriFieldTypeDate"===K.type)};d.isNumberInRange=Ja;d.isNumericField=la;d.isStringField=function(K){return null!=K&&("string"===K.type||"esriFieldTypeString"===K.type)};d.isValidFieldValue=function(K,P){return null===va(K,P)};d.isValueMatchingFieldType=ma;d.numericTypes=n;d.packFields=function(K,P,ca=1){if(!P||!K)return[];if(P.includes("*"))return["*"];P=t(K,P);return P.length/K.fields.length>=ca?["*"]:P};d.populateMissingFields=Qa;d.rendererFields=pa;d.sanitizeNullFieldValue=function(K){return null==
K||"number"===typeof K&&isNaN(K)?null:K};d.singleRange=fa;d.smallIntegerRange=Q;d.unpackFieldNames=function(K,P){return q.isNone(P)||q.isNone(K)?[]:P.includes("*")?K.fields.map(ca=>ca.name):P};d.validateFieldValue=va;d.validationErrorToString=function(K,P,ca){switch(K){case A.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ca} is not in the coded domain - field: ${P.name}, domain: ${JSON.stringify(P.domain)}`;case A.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ca} is out of the range of valid values - field: ${P.name}, domain: ${JSON.stringify(P.domain)}`;
case d.TypeValidationError.INVALID_TYPE:return`Value ${ca} is not a valid value for the field type - field: ${P.name}, type: ${P.type}, nullable: ${P.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:oa,max:qa}=Ca(P.type);return`Value ${ca} is out of range for the number type - field: ${P.name}, type: ${P.type}, value range is ${oa} to ${qa}`}}};d.visualVariableFields=a;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(l){function d(T,R){switch(T.type){case "range":{const q="range"in T?T.range[1]:T.maxValue;if(+R<("range"in T?T.range[0]:T.minValue)||+R>q)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==T.codedValues||T.codedValues.every(q=>null==q||q.code!==R))return l.DomainValidationError.INVALID_CODED_VALUE}return null}l.DomainValidationError=void 0;(function(T){T.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";T.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(l.DomainValidationError||(l.DomainValidationError={}));l.getDomainRange=function(T){if(T&&"range"===T.type)return{min:"range"in T?T.range[0]:T.minValue,max:"range"in T?T.range[1]:T.maxValue}};l.isValidDomainValue=function(T,R){return null===d(T,R)};l.validateDomainValue=d;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(l,d,T,R,q,D){function A(){w||(w=T._asyncToGenerator(function*(){const t=yield new Promise((F,L)=>l(["./arcadeUtils"],F,L));return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})());return w}let w;R=(t,F,L)=>v.create(t,F,L,null,["$feature","$view"]);let v=function(){function t(L,J,u,C,c,e,p,r){this.script=L;this.evaluate=c;this.fields=Array.isArray(p)?p:p.fields;this._syntaxTree=C;this._arcade=J;this._arcadeDictionary=u;this._arcadeFeature=e;this._spatialReference=
r;this._referencesGeometry=J.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}t.create=function(){var L=T._asyncToGenerator(function*(J,u,C,c,e,p){const {arcade:r,Feature:f,Dictionary:y}=yield A(),z=D.fromJSON(u);u=r.parseScript(J,p);e=e.reduce((N,I)=>({...N,[I]:null}),{});let M=null;q.isSome(c)&&(M=new y(c),M.immutable=!0,e.$config=null);c=r.scriptUsesGeometryEngine(u)&&r.enableGeometrySupport();p=r.scriptUsesFeatureSet(u)&&r.enableFeatureSetSupport();
const aa=r.scriptIsAsync(u)&&r.enableAsyncSupport();e={vars:e,spatialReference:z,useAsync:!!aa};const U=new y;U.immutable=!1;U.setField("scale",0);const ha=r.compileScript(u,e);yield Promise.all([c,p,aa]);return new t(J,r,y,u,N=>{"$view"in N&&N.$view&&(U.setField("scale",N.$view.scale),N.$view=U);M&&(N.$config=M);return ha({vars:N,spatialReference:z})},new f,C,z)});return function(J,u,C,c,e,p){return L.apply(this,arguments)}}();var F=t.prototype;F.repurposeFeature=function(L){L.geometry&&!L.geometry.spatialReference&&
(L.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(L.geometry,L.attributes,{fields:this.fields});return this._arcadeFeature};F.repurposeAdapter=function(L){this._arcadeFeature.repurposeFromAdapter(L,{fields:this.fields});return this._arcadeFeature};F.createDictionary=function(){return new this._arcadeDictionary};F.referencesMember=function(L){return this._arcade.referencesMember(this._syntaxTree,L)};F.referencesFunction=function(L){return this._arcade.referencesFunction(this._syntaxTree,
L)};F.referencesGeometry=function(){return this._referencesGeometry};F.referencesScale=function(){return this._referencesScale};F.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return t}();d.ArcadeExpression=v;d.createDictionaryExpression=(t,F,L,J)=>v.create(t,F,L,J,["$feature","$view"]);d.createLabelExpression=(t,F,L)=>v.create(t,F,L,null,["$feature"]);d.createRendererExpression=R;d.createVVExpression=R;d.default=v;d.loadArcade=A;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),function(l,d,T,R,q,D,A,w,v,t,F,L,J){function u(){return new Promise((p,r)=>
l(["../../../geometry/geometryEngineJSON"],p,r))}function C(){C=T._asyncToGenerator(function*(p,r,f){const {spatialRel:y,geometry:z}=p;if(z){if(!0!==e.spatialRelationship[y])throw new R("feature-store:unsupported-query","Unsupported query spatial relationship",{query:p});if(w.isValid(z.spatialReference)&&w.isValid(f)){if(!0!==e.queryGeometry[A.getJsonType(z)])throw new R("feature-store:unsupported-query","Unsupported query geometry type",{query:p});if(!0!==e.layerGeometry[r])throw new R("feature-store:unsupported-query",
"Unsupported layer geometry type",{query:p});if(p.outSR)return L.checkProjectionSupport(p.geometry&&p.geometry.spatialReference,p.outSR)}}});return C.apply(this,arguments)}const c={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},
e={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(p){if(A.isExtent(p))return!0;if(A.isPolygon(p)){for(const r of p.rings)if(5!==r.length||r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(p,r,f){return C.apply(this,arguments)};d.getSpatialQueryOperator=function(p,r,f,y,z){if(A.isPolygon(r)&&"esriGeometryPoint"===f&&("esriSpatialRelIntersects"===
p||"esriSpatialRelContains"===p)){const M=t.convertFromPolygon(new F,r,!1,!1);return Promise.resolve(aa=>v.polygonContainsPoint(M,!1,!1,aa))}if(A.isPolygon(r)&&"esriGeometryMultipoint"===f){const M=t.convertFromPolygon(new F,r,!1,!1);if("esriSpatialRelContains"===p)return Promise.resolve(aa=>v.polygonContainsMultipoint(M,!1,!1,aa,y,z))}if(A.isExtent(r)&&"esriGeometryPoint"===f&&("esriSpatialRelIntersects"===p||"esriSpatialRelContains"===p))return Promise.resolve(M=>q.extentContainsPoint(r,J.getGeometry(f,
y,z,M)));if(A.isExtent(r)&&"esriGeometryMultipoint"===f&&"esriSpatialRelContains"===p)return Promise.resolve(M=>q.extentContainsMultipoint(r,J.getGeometry(f,y,z,M)));if(A.isExtent(r)&&"esriSpatialRelIntersects"===p){const M=D.getExtentIntersector(f);return Promise.resolve(aa=>M(r,J.getGeometry(f,y,z,aa)))}return u().then(M=>{const aa=M[c[p]].bind(null,r.spatialReference,r);return U=>aa(J.getGeometry(f,y,z,U))})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports",
"./intersectsBase"],function(l,d){l.extentIntersectsExtent=d.extentIntersectsExtent;l.extentIntersectsMultipoint=d.extentIntersectsMultipoint;l.extentIntersectsPoint=d.extentIntersectsPoint;l.extentIntersectsPolygon=d.extentIntersectsPolygon;l.extentIntersectsPolyline=d.extentIntersectsPolyline;l.getFeatureExtentIntersector=d.getFeatureExtentIntersector;l.isSelfIntersecting=d.isSelfIntersecting;l.segmentIntersects=d.segmentIntersects;l.getExtentIntersector=function(T){return"mesh"===T?d.extentIntersectsExtent:
d.getFeatureExtentIntersector(T)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function d(T,R,q,D,A){if(!T)return!1;R=R?q?4:3:q?3:2;const {coords:w,lengths:v}=T;q=!1;T=0;for(const F of v){var t=T;for(let L=T,J=T+F*R;L<J;L+=R){t=L+R;t===J&&(t=T);const u=w[L],C=w[L+1],c=w[t];t=w[t+1];(C<A&&t>=A||t<A&&C>=A)&&u+(A-C)/(t-C)*(c-u)<D&&(q=!q)}T+=F*R}return q}l.polygonContainsCoords=d;l.polygonContainsMultipoint=function(T,R,
q,D,A,w){A=A?w?4:3:w?3:2;const {coords:v,lengths:t}=D;if(!t)return!1;for(let F=0,L=0;F<t.length;F++,L+=A)if(!d(T,R,q,v[L],v[L+1]))return!1;return!0};l.polygonContainsPoint=function(T,R,q,D){return d(T,R,q,D.coords[0],D.coords[1])};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(l,d){function T(q){return"oid"===q.type||"esriFieldTypeOID"===q.type}function R(q){return"global-id"===
q.type||"esriFieldTypeGlobalID"===q.type}return function(){function q(A){this.fields=A;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(A){var w=[];for(const v of A)if(A=v&&v.name){const t=A.toLowerCase().trim();this._fieldsMap.set(A,v);this._fieldsMap.set(t,v);w.push(t);"date"===v.type||"esriFieldTypeDate"===v.type?(this.dateFields.push(v),this._dateFieldsSet.add(v)):d.isNumericField(v)&&(this._numericFieldsSet.add(v),
this.numericFields.push(v));T(v)||R(v)||(v.editable=null==v.editable?!0:!!v.editable,v.nullable=null==v.nullable?!0:!!v.nullable)}w.sort();this.uid=w.join(",")}}var D=q.prototype;D.destroy=function(){this._fieldsMap.clear()};D.has=function(A){return null!=this.get(A)};D.get=function(A){return null!=A?this._fieldsMap.get(A)||this._fieldsMap.get(A.toLowerCase().trim()):void 0};D.isDateField=function(A){return this._dateFieldsSet.has(this.get(A))};D.isNumericField=function(A){return this._numericFieldsSet.has(this.get(A))};
D.normalizeFieldName=function(A){if(A=this.get(A))return A.name};l._createClass(q,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const A of this.fields)T(A)||R(A)||A.nullable||void 0!==d.getFieldDefaultValue(A)||this._requiredFields.push(A)}return this._requiredFields}}]);return q}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(l,d,T,R,q,D,A,w,v,t,F,L,J,u,C,c,e,p,r,f){function y(m){return M.has(m)?M.get(m):"number"===typeof m?m:1}const z=D.getLogger("esri.views.support.Scheduler");l.TaskPriority=void 0;(function(m){m.RESOURCE_CONTROLLER="schedule";m.SLIDE="slide";m.STREAM_DATA_LOADER="stream loader";m.ELEVATION_QUERY="elevation query";m.TERRAIN_SURFACE="terrain";m.SURFACE_GEOMETRY_UPDATES="surface geometry updates";m.GRAPHICS_CORE="Graphics3D";m.I3S_CONTROLLER="I3S";m.POINT_CLOUD_LAYER="point cloud";m.FEATURE_TILE_FETCHER=
"feature fetcher";m.OVERLAY="overlay";m.STAGE="stage";m.GRAPHICS_DECONFLICTOR="graphics deconflictor";m.FILTER_VISIBILITY="Graphics3D filter visibility";m.SCALE_VISIBILITY="Graphics3D scale visibility";m.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";m.POINT_OF_INTEREST_FREQUENT="POI frequent";m.POINT_OF_INTEREST_INFREQUENT="POI infrequent";m.LABELER="labeler";m.FEATURE_QUERY_ENGINE="feature query";m.FEATURE_TILE_TREE="feature tile tree";m.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";m.ELEVATION_ALIGNMENT=
"elevation alignment";m.TEXT_TEXTURE_ATLAS="text texture atlas";m.TEXTURE_UNLOAD="texture unload";m.LINE_OF_SIGHT_TOOL="line of sight tool";m.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";m.ELEVATION_PROFILE="elevation profile";m.SNAPPING="snapping";m.SHADOW_ACCUMULATOR="shadow accumulator";m.CLOUDS_GENERATOR="cloud generator";m[m.TEST_PRIO=1]="TEST_PRIO"})(l.TaskPriority||(l.TaskPriority={}));const M=new Map([[l.TaskPriority.RESOURCE_CONTROLLER,0],[l.TaskPriority.SLIDE,0],[l.TaskPriority.STREAM_DATA_LOADER,
0],[l.TaskPriority.ELEVATION_QUERY,0],[l.TaskPriority.TERRAIN_SURFACE,1],[l.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[l.TaskPriority.GRAPHICS_CORE,2],[l.TaskPriority.I3S_CONTROLLER,2],[l.TaskPriority.POINT_CLOUD_LAYER,2],[l.TaskPriority.FEATURE_TILE_FETCHER,2],[l.TaskPriority.OVERLAY,4],[l.TaskPriority.STAGE,4],[l.TaskPriority.GRAPHICS_DECONFLICTOR,4],[l.TaskPriority.FILTER_VISIBILITY,4],[l.TaskPriority.SCALE_VISIBILITY,4],[l.TaskPriority.FRUSTUM_VISIBILITY,4],[l.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[l.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[l.TaskPriority.LABELER,8],[l.TaskPriority.FEATURE_QUERY_ENGINE,8],[l.TaskPriority.FEATURE_TILE_TREE,16],[l.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[l.TaskPriority.ELEVATION_ALIGNMENT,12],[l.TaskPriority.TEXT_TEXTURE_ATLAS,12],[l.TaskPriority.CLOUDS_GENERATOR,12],[l.TaskPriority.TEXTURE_UNLOAD,12],[l.TaskPriority.LINE_OF_SIGHT_TOOL,16],[l.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[l.TaskPriority.SNAPPING,0],[l.TaskPriority.SHADOW_ACCUMULATOR,
30]]),aa=L.Milliseconds(6.5),U=L.Milliseconds(1),ha=L.Milliseconds(30),N=L.Milliseconds(1E3/30),I=L.Milliseconds(100);var X;(function(m){let G=function(ja){function na(ma){var la=ja.call(this,ma)||this;la.updating=!0;la._microTaskQueued=!1;la.performanceInfo={total:new w("total"),tasks:new Map};la._frameTaskTimes=new Map;la._budget=null;la._state=1;la._tasks=new v;la._runQueue=new v;la._load=0;la._idleStateCallbacks=new v;la._idleUpdatesStartFired=!1;la._maxReschedule=g;la._forceTask=!1;la._debug=
!1;la._debugHandle=J.init(f,"SCHEDULER_LOG_SLOW_TASKS",Ca=>la._debug=Ca);la._budget=new da(ma.nowFunc);for(const Ca of Object.keys(l.TaskPriority))la.performanceInfo.tasks.set(l.TaskPriority[Ca],new w(l.TaskPriority[Ca]));let va;const Ja=d._assertThisInitialized(la);la._test={get state(){return A.unwrapOr(va,Ja._state)},set state(Ca){va=Ca},FRAME_SAFETY_BUDGET:aa,INTERACTING_BUDGET:N,IDLE_BUDGET:I,get budget(){return Ja._budget.budget},usedBudget:0,setBudget:Ca=>Ja._budget=Ca,updateTask:Ca=>la._updateTask(Ca),
getState:Ca=>la._getState(Ca),getRuntime:Ca=>la._getRuntime(Ca),frameTaskTimes:la._frameTaskTimes,resetRuntimes:()=>la._resetRuntimes(),getRunning:()=>la._getRunning()};return la}d._inheritsLoose(na,ja);var ua=na.prototype;ua.destroy=function(){this._debugHandle&&this._debugHandle.remove();this._microTaskQueued=!1};ua.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=
g,this._schedule(),this.frame()))}))};ua.registerTask=function(ma,la){const va=y(ma);la=new W(this,ma,la,va);this._tasks.push(la);this.performanceInfo.tasks.has(ma)||this.performanceInfo.tasks.set(ma,new w(ma));return la};ua.registerIdleStateCallbacks=function(ma,la){const va={idleBegin:ma,idleEnd:la};this._idleStateCallbacks.push(va);2===this.state&&this._idleUpdatesStartFired&&va.idleBegin();const Ja=this;return{remove:()=>this._removeIdleStateCallbacks(va),set idleBegin(Ca){Ja._idleUpdatesStartFired&&
(va.idleEnd(),2===Ja._state&&Ca());va.idleBegin=Ca},set idleEnd(Ca){va.idleEnd=Ca}}};ua.updateBudget=function(ma){this._test.usedBudget=0;let la=aa,va=ma.frameDuration,Ja=U;switch(this.state){case 2:la=L.Milliseconds(0);va=L.Milliseconds(Math.max(I,ma.frameDuration));Ja=ha;break;case 1:va=L.Milliseconds(Math.max(N,ma.frameDuration))}va=L.Milliseconds(va-ma.elapsedFrameTime-la);if(2!==this.state&&va<U&&!this._forceTask)return this._forceTask=!0,!1;va=L.Milliseconds(Math.max(va,Ja));this._budget.reset(va,
this.state);this._maxReschedule=g;this._updateLoad();return this._schedule()};ua.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(ma=>ma.idleBegin()));this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};ua.stopFrame=function(){this._budget.reset(L.Milliseconds(0),this._state);this._budget.madeProgress()};
ua._removeIdleStateCallbacks=function(ma){this._idleUpdatesStartFired&&ma.idleEnd();this._idleStateCallbacks.removeUnordered(ma)};ua.removeTask=function(ma){this._tasks.removeUnordered(ma);this._runQueue.removeUnordered(ma)};ua._updateTask=function(ma){this._tasks.forAll(la=>{la.name===ma&&la.setPriority(ma)})};ua._getState=function(ma){if(this._runQueue.some(va=>va.name===ma))return l.TaskState.SCHEDULED;let la=l.TaskState.IDLE;this._tasks.forAll(va=>{va.name===ma&&va.needsUpdate&&(1>=va.schedulePriority?
la=l.TaskState.READY:la!==l.TaskState.READY&&(la=l.TaskState.WAITING))});return la};ua._getRuntime=function(ma){let la=0;this._tasks.forAll(va=>{va.name===ma&&(la+=va.runtime)});return la};ua._resetRuntimes=function(){this._tasks.forAll(ma=>ma.runtime=0)};ua._getRunning=function(){const ma=new Map;this._tasks.forAll(va=>{va.needsUpdate&&ma.set(va.name,(ma.get(va.name)||0)+1)});if(0===ma.size)return null;let la="";ma.forEach((va,Ja)=>{la=1<va?la+` ${va}x ${Ja}`:la+` ${Ja}`});return la};ua._runIdle=
function(){this._run()};ua._runInteracting=function(){this._run()};ua._runAnimating=function(){this._run()};ua._updateLoad=function(){const ma=this._tasks.reduce((la,va)=>va.needsUpdate?++la:la,0);this._load=.9*this._load+ma*(1-.9)};ua._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(ma=>{if(ma.needsUpdate)return!0;ma.schedulePriority=ma.basePriority;return!1});for(this._tasks.forAll(ma=>{0===ma.basePriority&&ma.needsUpdate&&!this._runQueue.some(la=>la===ma)&&this._runQueue.unshift(ma)});0===
this._runQueue.length;){let ma=!1,la=0;this._tasks.forAll(va=>{if(va.needsUpdate&&0!==va.schedulePriority&&0!==va.basePriority)switch(ma=!0,la=Math.max(la,va.basePriority),va.schedulePriority){case 1:va.schedulePriority=0;this._runQueue.push(va);break;default:--va.schedulePriority}});if(!ma)return this.updating=!1;this._maxReschedule===g&&(this._maxReschedule=la);--this._maxReschedule}return this.updating=!0};ua._run=function(){const ma=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var la=
this._budget.now();const va=this._runQueue.pop();this._budget.resetProgress();try{va.task.runTask(this._budget)}catch(Ja){z.error(`Exception in task "${va.name}"`,Ja)}va.schedulePriority=va.basePriority;la=this._budget.now()-la;va.runtime+=la;this._frameTaskTimes.set(va.priority,this._frameTaskTimes.get(va.priority)+la);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",va.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._recordFrameTaskTimes(this._budget.now()-
ma);return}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-ma)};ua._startFrameTaskTimes=function(){for(const ma of Object.keys(l.TaskPriority))this._frameTaskTimes.set(l.TaskPriority[ma],0)};ua._recordFrameTaskTimes=function(ma){this._frameTaskTimes.forEach((la,va)=>this.performanceInfo.tasks.get(va).record(la));this.performanceInfo.total.record(ma)};d._createClass(na,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",
get:function(){return A.isNone(this._test.state)?this._state:this._test.state},set:function(ma){this._state!==ma&&(this._state=ma,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(la=>la.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return na}(R);T.__decorate([u.property()],G.prototype,"updating",void 0);T.__decorate([u.property()],G.prototype,"nowFunc",void 0);G=T.__decorate([p.subclass("esri.views.support.Scheduler")],
G);m.Scheduler=G;let W=function(ja){function na(ma,la,va,Ja){var Ca=ja.call(this,{})||this;Ca._scheduler=ma;Ca.name=la;Ca._basePriority=Ja;Ca.runtime=0;Ca._queue=new r.PromiseQueue;Ca._handles=new q;Ca.schedulePriority=Ca._basePriority;Ca.task=A.isSome(va)?va:Ca._queue;Ca._handles.add(F.reactTruthy(()=>Ca.task.running,()=>ma.activate()));return Ca}d._inheritsLoose(na,ja);var ua=na.prototype;ua.normalizeCtorArgs=function(){return{}};ua.remove=function(){this.processQueue(O);this._scheduler.removeTask(this);
this.schedule=B.schedule;this.reschedule=B.reschedule;this._handles.destroy()};ua.setPriority=function(ma){this.name=ma;ma=y(ma);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=ma;this._basePriority=ma};ua.schedule=function(ma,la,va){return this._queue.push(ma,la,va)};ua.reschedule=function(ma,la,va){return this._queue.unshift(ma,la,va)};ua.processQueue=function(ma){this._queue.runTask(ma)};d._createClass(na,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",
get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(ma){this.setPriority(ma)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return na}(R);T.__decorate([u.property({constructOnly:!0})],W.prototype,"task",void 0);T.__decorate([u.property({readOnly:!0})],W.prototype,"updating",null);W=T.__decorate([p.subclass("esri.views.support.SchedulerTask")],W);let da=function(){function ja(ua){this.now=ua;this._budget=this._begin=
0;this._state=2;this._didWork=!1;this._enabled=!0}var na=ja.prototype;na.run=function(ua){if(this.done)return!1;!0===ua()&&(this._didWork=!0);return!0};na.madeProgress=function(){this._didWork=!0};na.reset=function(ua,ma){this._begin=this.now();this._budget=ua;this._state=ma;this._didWork=!1};na.resetProgress=function(){this._didWork=!1};d._createClass(ja,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},
{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(ua){this._enabled=ua}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return ja}();m.Budget=da})(X||(X={}));l.TaskState=void 0;(function(m){m.SCHEDULED="s";m.READY="r";m.WAITING="w";m.IDLE="i"})(l.TaskState||(l.TaskState={}));const O=
(()=>{const m=new X.Budget(()=>performance.now());m.enabled=!1;return m})(),B=new (function(){function m(){}var G=m.prototype;G.remove=function(){};G.processQueue=function(){};G.schedule=function(W,da,ja){try{if(t.isAborted(da)){const na=t.createAbortError();return ja?Promise.resolve(ja(na)):Promise.reject(na)}return t.when(W(O))}catch(na){return Promise.reject(na)}};G.reschedule=function(W,da,ja){return this.schedule(W,da,ja)};return m}()),g=Number.MAX_SAFE_INTEGER;l.ImmediateTask=B;l.getTaskPriority=
y;l.newScheduler=function(m){return new X.Scheduler({nowFunc:m})};l.noBudget=O;l.taskPriorities=M;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(l,d,T,R,q,D,A){T=function(w){function v(F){F=w.call(this,F)||this;F._groups=new Map;return F}l._inheritsLoose(v,w);var t=v.prototype;
t.destroy=function(){this.removeAll()};t.add=function(F,L){if(!this._isHandle(F)&&!Array.isArray(F)&&!R.isCollection(F))return this;const J=this._getOrCreateGroup(L);Array.isArray(F)||R.isCollection(F)?F.forEach(u=>this._isHandle(u)&&J.push(u)):J.push(F);this.notifyChange("size");return this};t.forEach=function(F,L){if("function"===typeof F)this._groups.forEach(J=>J.forEach(F));else{const J=this._getGroup(F);J&&L&&J.forEach(L)}};t.has=function(F){return this._groups.has(this._ensureGroupKey(F))};
t.remove=function(F){if(Array.isArray(F)||R.isCollection(F))return F.forEach(this.remove,this),this;if(!this.has(F))return this;const L=this._getGroup(F);for(let J=0;J<L.length;J++)L[J].remove();this._deleteGroup(F);this.notifyChange("size");return this};t.removeAll=function(){this._groups.forEach(F=>{for(let L=0;L<F.length;L++)F[L].remove()});this._groups.clear();this.notifyChange("size");return this};t._isHandle=function(F){return F&&!!F.remove};t._getOrCreateGroup=function(F){if(this.has(F))return this._getGroup(F);
const L=[];this._groups.set(this._ensureGroupKey(F),L);return L};t._getGroup=function(F){return q.assumeNonNull(this._groups.get(this._ensureGroupKey(F)))};t._deleteGroup=function(F){return this._groups.delete(this._ensureGroupKey(F))};t._ensureGroupKey=function(F){return F||"_default_"};l._createClass(v,[{key:"size",get:function(){let F=0;this._groups.forEach(L=>{F+=L.length});return F}}]);return v}(T);d.__decorate([D.property({readOnly:!0})],T.prototype,"size",null);return T=d.__decorate([A.subclass("esri.core.Handles")],
T)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),function(l,d,T,R,q,D,A,w,v,t,F,L,J,u){function C(I){return I?I instanceof N?I.toArray():I.length?Array.prototype.slice.apply(I):
[]:[]}function c(I){if(I&&I.length)return I[0]}function e(I,X,O,B){X&&X.forEach((g,m,G)=>{I.push(g);e(I,O.call(B,g,m,G),O,B)})}var p;let r=function(){function I(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var X=I.prototype;X.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};X.reset=function(O){this.defaultPrevented=!1;this.item=O};return I}();const f=new A(r,void 0,I=>{I.item=null;I.target=null;I.defaultPrevented=!1;I.cancellable=!1}),
y=()=>{},z=new Set,M=new Set,aa=new Set,U=new Map;let ha=0,N=p=function(I,X){function O(g){g=I.call(this,g)||this;g._chgListeners=[];g._notifications=null;g._timer=null;g._observable=new u.SimpleObservable;g.length=0;g._items=[];Object.defineProperty(l._assertThisInitialized(g),"uid",{value:ha++});return g}l._inheritsLoose(O,I);O.isCollection=function(g){return null!=g&&g instanceof p};var B=O.prototype;B.normalizeCtorArgs=function(g){return g?Array.isArray(g)||g instanceof p?{items:g}:g:{}};B.destroy=
function(){this.removeAll()};B[X]=function*(){yield*this.items};B.hasEventListener=function(g){return"change"===g?0<this._chgListeners.length:this._emitter.hasEventListener(g)};B.on=function(g,m){if("change"===g){const G=this._chgListeners,W={removed:!1,callback:m};G.push(W);this._notifications&&this._notifications.push({listeners:G.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=y;W.removed=!0;G.splice(G.indexOf(W),1)}}}return this._emitter.on(g,m)};B.once=function(g,m){const G=
this.on(g,m);return{remove(){G.remove()}}};B.add=function(g,m){J.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;m=this.getNextIndex(null!=m?m:null);this._splice(m,0,[g]);this._emitAfterChanges(1);return this};B.addMany=function(g,m=this._items.length){J.trackAccess(this._observable);if(!g||!g.length||this._emitBeforeChanges(1))return this;m=this.getNextIndex(m);this._splice(m,0,C(g));this._emitAfterChanges(1);return this};B.removeAll=function(){J.trackAccess(this._observable);
if(!this.length||this._emitBeforeChanges(2))return[];const g=this._splice(0,this.length)||[];this._emitAfterChanges(2);return g};B.clone=function(){J.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(q.clone)})};B.concat=function(...g){J.trackAccess(this._observable);g=g.map(C);return this._createNewInstance({items:this._items.concat(...g)})};B.drain=function(g,m){J.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var G=D.assumeNonNull(this._splice(0,
this.length)),W=G.length;for(let da=0;da<W;da++)g.call(m,G[da],da,G);this._emitAfterChanges(2)}};B.every=function(g,m){J.trackAccess(this._observable);return this._items.every(g,m)};B.filter=function(g,m){J.trackAccess(this._observable);let G;G=2===arguments.length?this._items.filter(g,m):this._items.filter(g);return this._createNewInstance({items:G})};B.find=function(g,m){J.trackAccess(this._observable);return this._items.find(g,m)};B.findIndex=function(g,m){J.trackAccess(this._observable);return this._items.findIndex(g,
m)};B.flatten=function(g,m){J.trackAccess(this._observable);const G=[];e(G,this,g,m);return new p(G)};B.forEach=function(g,m){J.trackAccess(this._observable);return this._items.forEach(g,m)};B.getItemAt=function(g){J.trackAccess(this._observable);return this._items[g]};B.getNextIndex=function(g){J.trackAccess(this._observable);const m=this.length;g=null==g?m:g;0>g?g=0:g>m&&(g=m);return g};B.includes=function(g,m=0){J.trackAccess(this._observable);return this._items.includes(g,m)};B.indexOf=function(g,
m=0){J.trackAccess(this._observable);return this._items.indexOf(g,m)};B.join=function(g=","){J.trackAccess(this._observable);return this._items.join(g)};B.lastIndexOf=function(g,m=this.length-1){J.trackAccess(this._observable);return this._items.lastIndexOf(g,m)};B.map=function(g,m){J.trackAccess(this._observable);g=this._items.map(g,m);return new p({items:g})};B.reorder=function(g,m=this.length-1){J.trackAccess(this._observable);const G=this.indexOf(g);if(-1!==G){0>m?m=0:m>=this.length&&(m=this.length-
1);if(G!==m){if(this._emitBeforeChanges(4))return g;this._splice(G,1);this._splice(m,0,[g]);this._emitAfterChanges(4)}return g}};B.pop=function(){J.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var g=c(this._splice(this.length-1,1));this._emitAfterChanges(2);return g}};B.push=function(...g){J.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;this._splice(this.length,0,g);this._emitAfterChanges(1);return this.length};B.reduce=function(g,m){J.trackAccess(this._observable);
const G=this._items;return 2===arguments.length?G.reduce(g,m):G.reduce(g)};B.reduceRight=function(g,m){J.trackAccess(this._observable);const G=this._items;return 2===arguments.length?G.reduceRight(g,m):G.reduceRight(g)};B.remove=function(g){J.trackAccess(this._observable);return this.removeAt(this.indexOf(g))};B.removeAt=function(g){J.trackAccess(this._observable);if(!(0>g||g>=this.length||this._emitBeforeChanges(2)))return g=c(this._splice(g,1)),this._emitAfterChanges(2),g};B.removeMany=function(g){J.trackAccess(this._observable);
if(!g||!g.length||this._emitBeforeChanges(2))return[];g=g instanceof p?g.toArray():g;const m=this._items,G=[],W=g.length;for(let ua=0;ua<W;ua++){var da=m.indexOf(g[ua]);if(-1<da){{var ja=ua+1;var na=da+1;const ma=Math.min(g.length-ja,m.length-na);let la=0;for(;la<ma&&g[ja+la]===m[na+la];)la++;ja=la}ja=1+ja;(da=this._splice(da,ja))&&0<da.length&&G.push.apply(G,da);ua+=ja-1}}this._emitAfterChanges(2);return G};B.reverse=function(){J.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;
const g=this._splice(0,this.length);g&&(g.reverse(),this._splice(0,0,g));this._emitAfterChanges(4);return this};B.shift=function(){J.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var g=c(this._splice(0,1));this._emitAfterChanges(2);return g}};B.slice=function(g=0,m=this.length){J.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(g,m)})};B.some=function(g,m){J.trackAccess(this._observable);return this._items.some(g,m)};B.sort=function(g){J.trackAccess(this._observable);
if(!this.length||this._emitBeforeChanges(4))return this;const m=D.assumeNonNull(this._splice(0,this.length));arguments.length?m.sort(g):m.sort();this._splice(0,0,m);this._emitAfterChanges(4);return this};B.splice=function(g,m,...G){J.trackAccess(this._observable);const W=(m?2:0)|(G.length?1:0);if(this._emitBeforeChanges(W))return[];g=this._splice(g,m,G)||[];this._emitAfterChanges(W);return g};B.toArray=function(){J.trackAccess(this._observable);return this._items.slice()};B.toJSON=function(){J.trackAccess(this._observable);
return this.toArray()};B.toLocaleString=function(){J.trackAccess(this._observable);return this._items.toLocaleString()};B.toString=function(){J.trackAccess(this._observable);return this._items.toString()};B.unshift=function(...g){J.trackAccess(this._observable);if(!g.length||this._emitBeforeChanges(1))return this.length;this._splice(0,0,g);this._emitAfterChanges(1);return this.length};B._createNewInstance=function(g){return new this.constructor(g)};B._splice=function(g,m,G){const W=this._items;var da=
this.itemType;let ja=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=w.schedule(()=>this._dispatchChange()));if(m){ja=W.splice(g,m);if(this.hasEventListener("before-remove")){var na=f.acquire();na.target=this;na.cancellable=!0;for(let la=0,va=ja.length;la<va;la++)m=ja[la],na.reset(m),this.emit("before-remove",na),na.defaultPrevented&&(ja.splice(la,
1),W.splice(g,0,m),g+=1,--la,--va);f.release(na)}this.length=this._items.length;if(this.hasEventListener("after-remove")){m=f.acquire();m.target=this;m.cancellable=!1;na=ja.length;for(let la=0;la<na;la++)m.reset(ja[la]),this.emit("after-remove",m);f.release(m)}}if(G&&G.length){if(da){m=[];for(var ua of G)G=da.ensureType(ua),null==G&&null!=ua||m.push(G);G=m}da=this.hasEventListener("before-add");ua=this.hasEventListener("after-add");m=g===this.length;if(da||ua){var ma=f.acquire();ma.target=this;ma.cancellable=
!0;na=f.acquire();na.target=this;na.cancellable=!1;for(const la of G)da?(ma.reset(la),this.emit("before-add",ma),ma.defaultPrevented||(m?W.push(la):W.splice(g++,0,la),this._set("length",W.length),ua&&(na.reset(la),this.emit("after-add",na)))):(m?W.push(la):W.splice(g++,0,la),this._set("length",W.length),na.reset(la),this.emit("after-add",na));f.release(na);f.release(ma)}else{if(m)for(ma of G)W.push(ma);else W.splice(g,0,...G);this._set("length",W.length)}}(G&&G.length||ja&&ja.length)&&this._notifyChangeEvent(G,
ja);return ja};B._emitBeforeChanges=function(g){let m=!1;if(this.hasEventListener("before-changes")){const G=f.acquire();G.target=this;G.cancellable=!0;G.type=g;this.emit("before-changes",G);m=G.defaultPrevented;f.release(G)}return m};B._emitAfterChanges=function(g){if(this.hasEventListener("after-changes")){const m=f.acquire();m.target=this;m.cancellable=!1;m.type=g;this.emit("after-changes",m);f.release(m)}this._observable.notify()};B._notifyChangeEvent=function(g,m){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:g,removed:m})};B._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var g=this._notifications;this._notifications=null;for(const m of g){g=m.changes;z.clear();M.clear();aa.clear();for(const {added:ua,removed:ma}of g){if(ua)if(0===aa.size&&0===M.size)for(const la of ua)z.add(la);else for(const la of ua)M.has(la)?(aa.add(la),M.delete(la)):aa.has(la)||z.add(la);
if(ma)if(0===aa.size&&0===z.size)for(const la of ma)M.add(la);else for(const la of ma)z.has(la)?z.delete(la):(aa.delete(la),M.add(la))}const G=T.acquire();z.forEach(ua=>{G.push(ua)});const W=T.acquire();M.forEach(ua=>{W.push(ua)});const da=this._items,ja=m.items,na=T.acquire();aa.forEach(ua=>{ja.indexOf(ua)!==da.indexOf(ua)&&na.push(ua)});if(m.listeners&&(G.length||W.length||na.length)){g={target:this,added:G,removed:W,moved:na};const ua=m.listeners.length;for(let ma=0;ma<ua;ma++){const la=m.listeners[ma];
la.removed||la.callback.call(this,g)}}T.release(G);T.release(W);T.release(na)}z.clear();M.clear();aa.clear()}};l._createClass(O,[{key:"items",get:function(){J.trackAccess(this._observable);return this._items},set:function(g){this._emitBeforeChanges(1)||(this._splice(0,this.length,C(g)),this._emitAfterChanges(1))}}]);return O}(R.EventedAccessor,Symbol.iterator);N.ofType=I=>{if(!I)return p;if(U.has(I))return U.get(I);let X=null;if("function"===typeof I)X=I.prototype.declaredClass;else if(I.base)X=I.base.prototype.declaredClass;
else for(var O in I.typeMap){const B=I.typeMap[O].prototype.declaredClass;X=X?X+` | ${B}`:B}O=function(B){function g(){return B.apply(this,arguments)||this}l._inheritsLoose(g,B);return g}(p);d.__decorate([F.shared({Type:I,ensureType:"function"===typeof I?t.ensureType(I):t.ensureOneOfType(I)})],O.prototype,"itemType",void 0);O=d.__decorate([L.subclass(`esri.core.Collection<${X}>`)],O);U.set(I,O);return O};d.__decorate([v.property()],N.prototype,"length",void 0);d.__decorate([v.property()],N.prototype,
"items",null);return N=p=d.__decorate([L.subclass("esri.core.Collection")],N)})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],function(l){l.shared=function(d){return(T,R)=>{T[R]=d}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(l,d){let T=function(){function R(){this._observers=[]}var q=R.prototype;q.observe=function(D){this._observers.includes(D)||
this._observers.push(D);return new d.ObservationHandle(this._observers,D)};q.notify=function(){const D=this._observers.slice();for(let A=0;A<D.length;++A){const w=D[A];w.onInvalidated();w.onCommitted()}};return R}();l.SimpleObservable=T;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(l,d,T,R,q,D){function A(t,F,L={},J){let u=null;const C=
L.once?(c,e)=>{J(c)&&(R.removeMaybe(u),F(c,e))}:(c,e)=>{J(c)&&F(c,e)};u=q.watchTracked(t,C,L.sync,L.equals);L.initial&&(t=t(),C(t,t));return u}function w(t){return!0}function v(t){return!!t}l.autorun=D.autorun;l.initial={initial:!0};l.react=function(t,F,L={}){return A(t,F,L,w)};l.reactListener=function(t,F,L,J={}){function u(){c&&e&&(e.remove(),null==J.onListenerRemove?void 0:J.onListenerRemove(c),e=c=null)}function C(f){J.once&&J.once&&R.removeMaybe(p);L(f)}let c=null,e=null,p=null;const r=q.watchTracked(t,
(f,y)=>{u();d.isEventTarget(f)&&(c=f,e=d.on(f,F,C),null==J.onListenerAdd?void 0:J.onListenerAdd(f))},J.sync);return p=T.makeHandle(()=>{r.remove();u()})};l.reactTruthy=function(t,F,L={}){return A(t,F,L,v)};l.sync={sync:!0};l.syncAndInitial={sync:!0,initial:!0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/watchUtils":function(){define(["exports","./events","./lang","./promiseUtils"],function(l,d,T,R){function q(C,c,e,p){var r=Array.isArray(c)?c:-1<c.indexOf(",")?c.split(","):[c];
c=C.watch(c,e,p);for(const f of r)r=f.trim().replace(u,"$1"),p=C.get(r),e.call(C,p,p,r,C);return c}function D(C,c,e,p,r){r=C.watch(c,(y,z,M,aa)=>{if(!e||e(y))null==p?void 0:p.call(C,y,z,M,aa)},r);if(Array.isArray(c))for(var f of c){const y=C.get(f);e&&e(y)&&(null==p?void 0:p.call(C,y,y,c,C))}else f=C.get(c),e&&e(f)&&(null==p?void 0:p.call(C,f,f,c,C));return r}function A(C,c,e,p,r){function f(){aa&&(aa.remove(),aa=null)}const y="function"===typeof p?p:null,z="object"===typeof p?p:null;"boolean"===
typeof p&&(r=p);let M=!1,aa;const U=R.createDeferred();R.onAbort(z,()=>{f();U.reject(R.createAbortError())});p={then:U.promise.then.bind(U.promise),catch:U.promise.catch.bind(U.promise),remove:f};Object.freeze(p);aa=D(C,c,e,(ha,N,I,X)=>{M=!0;f();y&&y.call(C,ha,N,I,X);U.resolve({value:ha,oldValue:N,propertyName:I,target:X})},r);M&&f();return p}function w(C){return!!C}function v(C){return!C}function t(C){return!0===C}function F(C){return!1===C}function L(C){return void 0!==C}function J(C){return void 0===
C}const u=/\?(\.|$)/g;l.init=q;l.on=function(C,c,e,p,r,f,y){function z(U){const ha=M[U];ha&&(f&&f(ha.target,U,C,e),ha.handle.remove(),delete M[U])}const M={},aa=q(C,c,(U,ha,N)=>{z(N);d.isEventTarget(U)&&(M[N]={handle:d.on(U,e,p),target:U},r&&r(U,N,C,e))},y);return{remove(){aa.remove();for(const U in M)z(U)}}};l.once=function(C,c,e,p){return A(C,c,null,e,p)};l.pausable=function(C,c,e,p){let r=!1;const f=C.watch(c,(y,z,M,aa)=>{r||e.call(C,y,z,M,aa)},p);return{remove(){f.remove()},pause(){r=!0},resume(){r=
!1}}};l.watch=function(C,c,e,p){return C.watch(c,e,p)};l.when=function(C,c,e,p){return D(C,c,w,e,p)};l.whenDefined=function(C,c,e,p){return D(C,c,L,e,p)};l.whenDefinedOnce=function(C,c,e,p){return A(C,c,L,e,p)};l.whenEqual=function(C,c,e,p,r){return D(C,c,f=>T.equals(e,f),p,r)};l.whenEqualOnce=function(C,c,e,p,r){return A(C,c,f=>T.equals(e,f),p,r)};l.whenFalse=function(C,c,e,p){return D(C,c,F,e,p)};l.whenFalseOnce=function(C,c,e,p){return A(C,c,F,e,p)};l.whenNot=function(C,c,e,p){return D(C,c,v,e,
p)};l.whenNotOnce=function(C,c,e,p){return A(C,c,v,e,p)};l.whenOnce=function(C,c,e,p){return A(C,c,w,e,p)};l.whenTrue=function(C,c,e,p){return D(C,c,t,e,p)};l.whenTrueOnce=function(C,c,e,p){return A(C,c,t,e,p)};l.whenUndefined=function(C,c,e,p){return D(C,c,J,e,p)};l.whenUndefinedOnce=function(C,c,e,p){return A(C,c,J,e,p)};l.whenValidOnce=A;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,d,T,R,q,D,A,w,v,t){l.PromiseQueue=function(L){function J(){var C=L.apply(this,arguments)||this;C._tasks=[];C.running=!1;return C}d._inheritsLoose(J,L);var u=J.prototype;u.destroy=function(){this.cancelAll()};u.runTask=function(C){for(;!C.done&&this._process(C);)C.madeProgress()};u.push=function(C,c,e){this.running=!0;return new Promise((p,r)=>this._tasks.push(new F(p,r,C,c,e)))};u.unshift=function(C,c,e){this.running=!0;return new Promise((p,r)=>this._tasks.unshift(new F(p,r,C,c,e)))};
u._process=function(C){if(0===this._tasks.length)return!1;const c=this._tasks.shift();try{const e=q.isAborted(c.signal);if(e&&!c.abortCallback)c.reject(q.createAbortError());else{const p=e?c.abortCallback(q.createAbortError()):c.callback(C);q.isPromise(p)?p.then(c.resolve,c.reject):c.resolve(p)}}catch(e){c.reject(e)}this.running=0<this._tasks.length;return!0};u.cancelAll=function(){const C=q.createAbortError();for(const c of this._tasks)if(c.abortCallback){const e=c.abortCallback(C);c.resolve(e)}else c.reject(C);
this._tasks.length=0;this.running=!1};d._createClass(J,[{key:"length",get:function(){return this._tasks.length}}]);return J}(R);T.__decorate([D.property()],l.PromiseQueue.prototype,"running",void 0);l.PromiseQueue=T.__decorate([t.subclass("esri.layers.support.PromiseQueue")],l.PromiseQueue);let F=function(L,J,u,C,c){this.resolve=L;this.reject=J;this.callback=u;this.signal=C;this.abortCallback=c};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,d,T,R,q,D,A,w){T=function(v){function t(){var F=v.apply(this,arguments)||this;F.SCHEDULER_LOG_SLOW_TASKS=!1;F.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return F}l._inheritsLoose(t,v);return t}(T);d.__decorate([R.property()],T.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([R.property()],T.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);T=d.__decorate([w.subclass("esri.views.support.DebugFlags")],T);return new T})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports",
"../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(l,d,T,R,q){function*D(r){switch(r.type){case "Feature":yield r;break;case "FeatureCollection":for(const f of r.features)f&&(yield f)}}function*A(r){if(!r)return null;switch(r.type){case "Point":yield r.coordinates;break;case "LineString":case "MultiPoint":yield*r.coordinates;break;case "MultiLineString":case "Polygon":for(const f of r.coordinates)yield*f;break;case "MultiPolygon":for(const f of r.coordinates)for(const y of f)yield*y}}
function*w(r,f={}){const {geometryType:y,objectIdField:z}=f;for(const aa of r){var M;const {geometry:U,properties:ha,id:N}=aa;if(U&&p[U.type]!==y)continue;r=ha||{};let I=null!=(M=r[z])?M:null;z&&null!=N&&!r[z]&&(r[z]=I=N);yield new T.default(U?L(new R,U,f):null,r,null,I)}}function v(r){for(const f of r)if(2<f.length)return!0;return!1}function t(r){let f=0;for(let y=0;y<r.length;y++){const z=r[y],M=r[(y+1)%r.length];f+=z[0]*M[1]-M[0]*z[1]}return 0>=f}function F(r){const f=r[0],y=r[r.length-1];f[0]===
y[0]&&f[1]===y[1]&&f[2]===y[2]||r.push(f);return r}function L(r,f,y){switch(f.type){case "LineString":return C(r,f.coordinates,y),r;case "MultiLineString":for(const M of f.coordinates)C(r,M,y);return r;case "MultiPoint":return C(r,f.coordinates,y),r;case "MultiPolygon":for(var z of f.coordinates)for(J(r,z[0],y),f=1;f<z.length;f++)u(r,z[f],y);return r;case "Point":return e(r,f.coordinates,y),r;case "Polygon":z=f.coordinates;J(r,z[0],y);for(f=1;f<z.length;f++)u(r,z[f],y);return r}}function J(r,f,y){f=
F(f);t(f)?C(r,f,y):c(r,f,y)}function u(r,f,y){f=F(f);t(f)?c(r,f,y):C(r,f,y)}function C(r,f,y){for(const z of f)e(r,z,y);r.lengths.push(f.length)}function c(r,f,y){for(let z=f.length-1;0<=z;z--)e(r,f[z],y);r.lengths.push(f.length)}function e(r,f,y){const [z,M,aa]=f;r.coords.push(z,M);y.hasZ&&r.coords.push(aa||0)}const p={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};
l.createOptimizedFeatures=function(r,f){return Array.from(w(D(r),f))};l.getGeometryType=function(r){return p[r]};l.inferLayerProperties=function(r,f={}){const y=[];var z=new Set;const M=new Set;var aa=!1;let U=null,ha=!1,N=void 0;({geometryType:f=null}=f);var I=!1;for(const X of D(r)){const {geometry:O,properties:B,id:g}=X;if(O&&(f||(f=p[O.type]),p[O.type]!==f))continue;aa||(aa=A(O),aa=v(aa));!ha&&(ha=null!=g)&&(N=typeof g,U=Object.keys(B).filter(m=>B[m]===g));ha&&null!=g&&(1<U.length?U=U.filter(m=>
B[m]===g):1===U.length&&(U=B[U[0]]===g?U:[]));if(!I&&B){r=!0;for(const m in B)if(!z.has(m))if(I=B[m],null==I)r=!1,M.add(m);else{a:switch(typeof I){case "string":I="esriFieldTypeString";break a;case "number":I="esriFieldTypeDouble";break a;default:I="unknown"}"unknown"===I?M.add(m):(M.delete(m),z.add(m),y.push({name:m,alias:m,type:I}))}I=r}}if(z=U&&1===U.length&&U[0]||null)for(const X of y)if(X.name===z&&q.isNumericField(X)){X.type="esriFieldTypeOID";break}return{fields:y,geometryType:f,hasZ:aa,objectIdFieldName:z,
objectIdFieldType:N,unknownFields:Array.from(M)}};l.validateGeoJSON=function(r){if(!r)throw new d("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==r.type&&"FeatureCollection"!==r.type)throw new d("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:r});({crs:r}=r);if(r){var f="string"===typeof r?r:"name"===r.type?r.properties.name:"EPSG"===r.type?r.properties.code:null,y=/.*(CRS84H?|4326)$/i;if(!f||!y.test(f))throw new d("geojson-layer:unsupported-crs",
"unsupported GeoJSON 'crs' member",{crs:r});}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(l,d,T,R,q){function D(C){return new F(C)}function A(){return w.apply(this,arguments)}function w(){w=T._asyncToGenerator(function*(){return u?u:u=yield new Promise((C,c)=>l(["../../../../geometry/geometryEngineJSON"],
C,c))});return w.apply(this,arguments)}function v(){v=T._asyncToGenerator(function*(C,c){!R.isValid(C)||"esriGeometryPolygon"!==c&&"esriGeometryPolyline"!==c||(yield A())});return v.apply(this,arguments)}let t=function(){this.description=this.code=null},F=function(C){this.error=new t;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=C},L=function(C){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=C};const J=new Set;let u;d.createFeatureEditErrorResult=
D;d.createFeatureEditSuccessResult=function(C){return new L(C)};d.loadGeometryEngine=A;d.loadGeometryEngineForSimplify=function(C,c){return v.apply(this,arguments)};d.mixAttributes=function(C,c,e,p=!1,r){J.clear();for(const M in e){const aa=C.get(M);if(aa){var f=e[M];{var y=aa;var z=f;let U=z;"string"===typeof z&&q.isNumericField(y)?U=parseFloat(z):null!=z&&q.isStringField(y)&&"string"!==typeof z&&(U=String(z));y=q.sanitizeNullFieldValue(U)}y!==f&&r&&r.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",
details:{field:aa,originalValue:f,sanitizedValue:y}});J.add(aa.name);if(aa&&(p||aa.editable)){if(f=q.validateFieldValue(aa,y))return D(q.validationErrorToString(f,aa,y));c[aa.name]=y}}}for(const M of C.requiredFields)if(!J.has(M.name))return D(`missing required field "${M.name}"`);return null};d.simplify=function(C,c){if(!C||!R.isValid(c))return C;if("rings"in C||"paths"in C){if(!u)throw new TypeError("geometry engine not loaded");return u.simplify(c,C)}return C};Object.defineProperty(d,"__esModule",
{value:!0})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(l,d,T,
R,q,D,A,w,v,t,F,L,J,u,C,c,e,p){function r(){r=d._asyncToGenerator(function*(pa,a){a=yield R(pa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...null==a?void 0:a.customParameters},signal:null==a?void 0:a.signal});a=f(a.data);v.isHTTPSProtocol(pa)&&(v.hasSameOrigin(pa,a.operations.DescribeFeatureType.url,!0)&&(a.operations.DescribeFeatureType.url=v.toHTTPS(a.operations.DescribeFeatureType.url)),v.hasSameOrigin(pa,a.operations.GetFeature.url,!0)&&(a.operations.GetFeature.url=
v.toHTTPS(a.operations.GetFeature.url)));return a});return r.apply(this,arguments)}function f(pa){pa=la(pa);Ja(pa);Ca(pa);pa=pa.firstElementChild;const a=D.cache(z(pa));return{operations:y(pa),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}function y(pa){let a=!1;const k={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};C.visitXML(pa,{OperationsMetadata:{Operation:V=>{switch(V.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:n=>
{k.GetCapabilities.url=n.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:n=>{k.DescribeFeatureType.url=n.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:n=>{k.GetFeature.url=n.getAttribute("xlink:href")}}},Parameter:n=>{if("outputFormat"===n.getAttribute("name"))return{AllowedValues:{Value:E=>{E=E.textContent;Qa.has(E.toLowerCase())&&(k.GetFeature.outputFormat=E)}}}}}}},Constraint:V=>{switch(V.getAttribute("name")){case "KVPEncoding":return{DefaultValue:n=>
{a="true"===n.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:n=>{k.GetFeature.supportsPagination="true"===n.textContent.toLowerCase()}}}}}});if(!a)throw new q("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(A.isNone(k.GetFeature.outputFormat))throw new q("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return k}function z(pa){return C.iterateXML(pa,{FeatureTypeList:{FeatureType:a=>
{const k={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},V=new Set([4326]),n=E=>{var Q,S;E=parseInt(null==(Q=E.textContent.match(/(?<wkid>\d+$)/i))?void 0:null==(S=Q.groups)?void 0:S.wkid,10);Number.isNaN(E)||V.add(E)};C.visitXML(a,{Name:E=>{const {name:Q,prefix:S}=va(E.textContent);k.typeName=`${S}:${Q}`;k.name=Q;k.namespacePrefix=S;k.namespaceUri=E.lookupNamespaceURI(S)},Abstract:E=>{k.description=E.textContent},
Title:E=>{k.title=E.textContent},WGS84BoundingBox:E=>{k.extent=M(E)},DefaultSRS:n,DefaultCRS:n,OtherSRS:n,OtherCRS:n});k.title||(k.title=k.name);k.supportedSpatialReferences.push(...V);return k}}})}function M(pa){let a,k,V,n;for(const E of pa.children)switch(E.localName){case "LowerCorner":[a,k]=E.textContent.split(" ").map(Q=>Number.parseFloat(Q));break;case "UpperCorner":[V,n]=E.textContent.split(" ").map(Q=>Number.parseFloat(Q))}return{xmin:a,ymin:k,xmax:V,ymax:n,spatialReference:F.WGS84}}function aa(pa,
a,k){return D.find(pa,V=>k?V.name===a&&V.namespaceUri===k:V.typeName===a||V.name===a)}function U(){U=d._asyncToGenerator(function*(pa,a,k,V={}){var n;const {featureType:E,extent:Q}=yield ha(pa,a,k,V),{fields:S,geometryType:fa,swapXY:ea,objectIdField:K,geometryField:P}=yield I(pa,E.typeName,V);return{url:pa.operations.GetCapabilities.url,name:E.name,namespaceUri:E.namespaceUri,fields:S,geometryField:P,geometryType:fa,objectIdField:K,spatialReference:null!=(n=V.spatialReference)?n:e.WGS84,extent:Q,
swapXY:ea,wfsCapabilities:pa,customParameters:V.customParameters}});return U.apply(this,arguments)}function ha(pa,a,k){return N.apply(this,arguments)}function N(){N=d._asyncToGenerator(function*(pa,a,k,V={}){const {spatialReference:n=e.WGS84}=V;pa=pa.readFeatureTypes();k=a?aa(pa,a,k):pa.next().value;if(A.isNone(k)){if(a)throw new q("wfs-layer:feature-type-not-found",`The type '${a}' could not be found in the service`);throw new q("wfs-layer:empty-service","The service is empty");}a=new p({...k.extent,
spatialReference:n});if(!F.equals(n,F.WGS84))try{yield t.initializeProjection(F.WGS84,n,void 0,V),a=t.project(a,F.WGS84)}catch{throw new q("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:a,spatialReference:n,featureType:k}});return N.apply(this,arguments)}function I(pa,a){return X.apply(this,arguments)}function X(){X=d._asyncToGenerator(function*(pa,a,k={}){const [V,n]=yield w.eachAlways([m(pa.operations.DescribeFeatureType.url,a,k),B(pa,a,k)]);if(V.error||n.error)throw new q("wfs-layer:getWFSLayerTypeInfo-error",
`An error occurred while getting info about the feature type '${a}'`,{error:V.error||n.error});const {fields:E,errors:Q}=V.value;pa=V.value.geometryType||n.value.geometryType;k=n.value.swapXY;if(A.isNone(pa))throw new q("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${a}`,{typeName:a,geometryType:pa,fields:E,errors:Q});return{...O(E),geometryType:pa,swapXY:k}});return X.apply(this,arguments)}function O(pa){var a;const k=pa.find(n=>"geometry"===n.type);let V=
pa.find(n=>"oid"===n.type);pa=pa.filter(n=>"geometry"!==n.type);V||(V=new c({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),pa.unshift(V));return{geometryField:null!=(a=null==k?void 0:k.name)?a:null,objectIdField:V.name,fields:pa}}function B(pa,a){return g.apply(this,arguments)}function g(){g=d._asyncToGenerator(function*(pa,a,k={}){var V;let n,E=!1;const [Q,S]=yield Promise.all([ja(pa.operations.GetFeature.url,a,pa.operations.GetFeature.outputFormat,{...k,count:1}),R(pa.operations.GetFeature.url,
{responseType:"text",query:ua(a,void 0,{...k,count:1}),signal:null==k?void 0:k.signal})]);if(pa="FeatureCollection"===Q.type&&(null==(V=Q.features[0])?void 0:V.geometry)){n=L.featureGeometryTypeKebabDictionary.fromJSON(J.getGeometryType(pa.type));switch(pa.type){case "Point":var fa=pa.coordinates;break;case "LineString":case "MultiPoint":fa=pa.coordinates[0];break;case "MultiLineString":case "Polygon":fa=pa.coordinates[0][0];break;case "MultiPolygon":fa=pa.coordinates[0][0][0]}if(pa=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(S.data))V=
fa[0].toFixed(3),fa=fa[1].toFixed(3),a=parseFloat(pa[1]).toFixed(3),pa=parseFloat(pa[2]).toFixed(3),V===pa&&fa===a&&(E=!0)}return{geometryType:n,swapXY:E}});return g.apply(this,arguments)}function m(pa,a,k){return G.apply(this,arguments)}function G(){G=d._asyncToGenerator(function*(pa,a,k){pa=yield R(pa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:a,...null==k?void 0:k.customParameters},signal:null==k?void 0:k.signal});return W(a,pa.data)});return G.apply(this,
arguments)}function W(pa,a){const {name:k}=va(pa);a=la(a);Ca(a);const V=D.find(C.iterateXML(a.firstElementChild,{element:n=>({name:n.getAttribute("name"),typeName:va(n.getAttribute("type")).name})}),({name:n})=>n===k);if(A.isSome(V)){const n=D.find(C.iterateXML(a.firstElementChild,{complexType:E=>E}),E=>E.getAttribute("name")===V.typeName);if(A.isSome(n))return da(n)}throw new q("wfs-layer:feature-type-not-found",`Type '${pa}' not found in document`,{document:(new XMLSerializer).serializeToString(a)});
}function da(pa){var a,k;const V=[],n=[];let E;var Q=C.iterateXML(pa,{complexContent:{extension:{sequence:{element:S=>S}}}});for(const S of Q){Q=S.getAttribute("name");if(!Q)continue;let fa,ea;S.hasAttribute("type")?fa=va(S.getAttribute("type")).name:C.visitXML(S,{simpleType:{restriction:ca=>{fa=va(ca.getAttribute("base")).name;return{maxLength:oa=>{ea=+oa.getAttribute("value")}}}}});if(!fa)continue;const K="true"===S.getAttribute("nillable");let P=!1;switch(fa.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":n.push(new c({name:Q,
alias:Q,type:"integer",nullable:K}));break;case "float":case "double":case "decimal":n.push(new c({name:Q,alias:Q,type:"double",nullable:K}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":n.push(new c({name:Q,
alias:Q,type:"string",nullable:K,length:null!=(a=ea)?a:255}));break;case "datetime":case "date":n.push(new c({name:Q,alias:Q,type:"date",nullable:K,length:null!=(k=ea)?k:36}));break;case "pointpropertytype":E="point";P=!0;break;case "multipointpropertytype":E="multipoint";P=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":E="polyline";P=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":E="polygon";
P=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":P=!0;V.push(new q("wfs-layer:unknown-geometry-type",`geometry type '${fa}' is not supported`,{type:(new XMLSerializer).serializeToString(pa)}));break;default:V.push(new q("wfs-layer:unknown-field-type",`Unknown field type '${fa}'`,{type:(new XMLSerializer).serializeToString(pa)}))}P&&n.push(new c({name:Q,alias:Q,type:"geometry",nullable:K}))}for(const S of n)if("integer"===S.type&&!S.nullable&&Oa.has(S.name.toLowerCase())){S.type=
"oid";break}return{geometryType:E,fields:n,errors:V}}function ja(pa,a,k,V){return na.apply(this,arguments)}function na(){na=d._asyncToGenerator(function*(pa,a,k,V){({data:pa}=yield R(pa,{responseType:"text",query:ua(a,k,V),signal:null==V?void 0:V.signal}));pa=pa.replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{var n;if(null!=V&&null!=(n=V.dateFields)&&n.length){const E=new Set(V.dateFields);return JSON.parse(pa,(Q,S)=>E.has(Q)?u.parseDate(S):S)}return JSON.parse(pa)}catch(E){throw new q("wfs-layer:malformed-json",
"Error while parsing the\u00a0response",{response:pa,error:E});}});return na.apply(this,arguments)}function ua(pa,a,k){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:pa,OUTPUTFORMAT:a,SRSNAME:"EPSG:4326",STARTINDEX:null==k?void 0:k.startIndex,COUNT:null==k?void 0:k.count,...null==k?void 0:k.customParameters}}function ma(){ma=d._asyncToGenerator(function*(pa,a,k){pa=yield R(pa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:a,RESULTTYPE:"hits",
...null==k?void 0:k.customParameters},signal:null==k?void 0:k.signal});pa=la(pa.data);Ca(pa);pa=Number.parseFloat(pa.firstElementChild.getAttribute("numberMatched"));return Number.isNaN(pa)?0:pa});return ma.apply(this,arguments)}function la(pa){return(new DOMParser).parseFromString(pa.trim(),"text/xml")}function va(pa){const [a,k]=pa.split(":");return{prefix:k?a:"",name:null!=k?k:a}}function Ja(pa){if((pa=pa.firstElementChild.getAttribute("version"))&&"2.0.0"!==pa)throw new q("wfs-layer:unsupported-wfs-version",
`Unsupported WFS version ${pa}. Supported version: ${"2.0.0"}`);}function Ca(pa){let a,k;C.visitXML(pa.firstElementChild,{Exception:V=>{a=V.getAttribute("exceptionCode");return{ExceptionText:n=>{k=n.textContent}}}});if(a)throw new q(`wfs-layer:${a}`,k);}const Qa=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),Oa=new Set(["objectid","fid"]);l.WFS_OID_FIELD_NAME="__esri_wfs_id__";l.describeFeatureType=m;l.findFeatureType=aa;l.getCapabilities=function(pa,a){return r.apply(this,
arguments)};l.getFeature=ja;l.getFeatureCount=function(pa,a,k){return ma.apply(this,arguments)};l.getFeatureTypeInfo=ha;l.getWFSLayerInfo=function(pa,a,k){return U.apply(this,arguments)};l.parseDescribeFeatureTypeResponse=W;l.parseGetCapabilitiesResponse=f;l.prepareWFSLayerFields=O;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/iteratorUtils":function(){define(["exports"],function(l){l.cache=function(d){const T=[];return function*(){yield*T;for(const R of d)T.push(R),yield R}};l.find=
function(d,T){for(const R of d)if(null!=R&&T(R))return R};l.isIterable=function(d){return null!=d&&"function"===typeof d[Symbol.iterator]};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/ogc/dateUtils":function(){define(["exports"],function(l){function d(R){R=(new Date(R)).getTime();return Number.isNaN(R)?null:R}const T=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;
l.parseDate=function(R){var q;var D,A,w,v=T.exec(R);if(v){v=v.groups;var t=+v.year,F=+v.month-1,L=+v.day,J=+(null!=(D=v.hours)?D:0);D=+(null!=(A=v.minutes)?A:0);A=+(null!=(w=v.seconds)?w:0);if(23<J||59<D||59<A)var u=null;else u=(w=null!=(u=v.ms)?u:"0")?+w.padEnd(3,"0").substring(0,3):0,u=v.isUTC?Date.UTC(t,F,L,J,D,A,u):v.offsetSign?6E4*("+"===v.offsetSign?-1:1)*(60*+v.offsetHours+ +v.offsetMinutes)+Date.UTC(t,F,L,J,D,A,u):(new Date(t,F,L,J,D,A,u)).getTime(),u=Number.isNaN(u)?null:u}else u=null;return null!=
(q=u)?q:d(R)};l.parseJSDate=d;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(l){function d(R,q){for(const D of R.children)D.localName in q&&(R=q[D.localName],"function"===typeof R?(R=R(D))&&d(D,R):d(D,R))}function*T(R,q){for(const D of R.children)D.localName in q&&(R=q[D.localName],"function"===typeof R?yield R(D):yield*T(D,R))}l.iterateXML=T;l.visitXML=d;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(l,d,T,R,q,D,A,w,v,t,F,L,J){var u;const C=new T.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});T=u=function(c){function e(r){r=c.call(this,r)||this;
r.alias=null;r.defaultValue=void 0;r.description=null;r.domain=null;r.editable=!0;r.length=-1;r.name=null;r.nullable=!0;r.type=null;r.valueType=null;return r}l._inheritsLoose(e,c);var p=e.prototype;p.readDescription=function(r,{description:f}){let y;try{y=JSON.parse(f)}catch(z){}return y?y.value:null};p.readValueType=function(r,{description:f}){let y;try{y=JSON.parse(f)}catch(z){}return y?C.fromJSON(y.fieldValueType):null};p.clone=function(){return new u({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return e}(R.JSONSupport);d.__decorate([q.property({type:String,json:{write:!0}})],T.prototype,"alias",void 0);d.__decorate([q.property({type:[String,Number],json:{write:{allowNull:!0}}})],T.prototype,"defaultValue",void 0);d.__decorate([q.property()],T.prototype,"description",void 0);d.__decorate([t.reader("description")],
T.prototype,"readDescription",null);d.__decorate([q.property({types:L.types,json:{read:{reader:L.fromJSON},write:!0}})],T.prototype,"domain",void 0);d.__decorate([q.property({type:Boolean,json:{write:!0}})],T.prototype,"editable",void 0);d.__decorate([q.property({type:w.Integer,json:{write:!0}})],T.prototype,"length",void 0);d.__decorate([q.property({type:String,json:{write:!0}})],T.prototype,"name",void 0);d.__decorate([q.property({type:Boolean,json:{write:!0}})],T.prototype,"nullable",void 0);d.__decorate([v.enumeration(J.kebabDict)],
T.prototype,"type",void 0);d.__decorate([q.property()],T.prototype,"valueType",void 0);d.__decorate([t.reader("valueType",["description"])],T.prototype,"readValueType",null);return T=u=d.__decorate([F.subclass("esri.layers.support.Field")],T)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(l,d,T,R,q,D){d={key:"type",base:R,typeMap:{range:D,"coded-value":T,inherited:q}};l.CodedValueDomain=T;
l.DomainBase=R;l.InheritedDomain=q;l.RangeDomain=D;l.fromJSON=function(A){if(!A||!A.type)return null;switch(A.type){case "range":return D.fromJSON(A);case "codedValue":return T.fromJSON(A);case "inherited":return q.fromJSON(A)}return null};l.types=d;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(l,d,T,R,q,D,A,w,v){var t;q=t=function(F){function L(u){u=F.call(this,u)||this;u.codedValues=null;u.type="coded-value";return u}l._inheritsLoose(L,F);var J=L.prototype;J.getName=function(u){let C=null;if(this.codedValues){const c=String(u);this.codedValues.some(e=>{String(e.code)===c&&(C=e.name);return!!C})}return C};J.clone=function(){return new t({codedValues:T.clone(this.codedValues),name:this.name})};return L}(v);d.__decorate([R.property({type:[w.default],json:{write:!0}})],q.prototype,
"codedValues",void 0);d.__decorate([D.enumeration({codedValue:"coded-value"})],q.prototype,"type",void 0);return q=t=d.__decorate([A.subclass("esri.layers.support.CodedValueDomain")],q)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,d,T,R,q,D,A,w,v){var t;l.CodedValue=t=function(F){function L(J){J=F.call(this,J)||this;J.name=null;J.code=null;return J}d._inheritsLoose(L,F);L.prototype.clone=function(){return new t({name:this.name,code:this.code})};return L}(R.JSONSupport);T.__decorate([q.property({type:String,json:{write:!0}})],l.CodedValue.prototype,"name",void 0);T.__decorate([q.property({type:[String,Number],json:{write:!0}})],l.CodedValue.prototype,"code",void 0);l.CodedValue=t=T.__decorate([v.subclass("esri.layers.support.CodedValue")],
l.CodedValue);l.default=l.CodedValue;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(l,d,T,R,q,D,A,w,v,t){T=
new T.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});R=function(F){function L(J){J=F.call(this,J)||this;J.name=null;J.type=null;return J}l._inheritsLoose(L,F);return L}(R.JSONSupport);d.__decorate([q.property({type:String,json:{write:!0}})],R.prototype,"name",void 0);d.__decorate([v.enumeration(T)],R.prototype,"type",void 0);return R=d.__decorate([t.subclass("esri.layers.support.Domain")],R)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(l,d,T,R,q,D,A,w,v,t){var F;T=F=function(L){function J(u){u=L.call(this,u)||this;u.type="inherited";return u}l._inheritsLoose(J,L);J.prototype.clone=function(){return new F};return J}(t);d.__decorate([w.enumeration({inherited:"inherited"})],T.prototype,"type",void 0);return T=F=d.__decorate([v.subclass("esri.layers.support.InheritedDomain")],T)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(l,d,T,R,q,D,A,w,v){var t;R=t=function(F){function L(J){J=F.call(this,J)||this;J.maxValue=null;J.minValue=null;J.type="range";return J}l._inheritsLoose(L,F);L.prototype.clone=function(){return new t({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return L}(v);d.__decorate([T.property({type:Number,json:{type:[Number],read:{source:"range",reader(F,L){return L.range&&L.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(F,L,J){L[J]=[this.minValue||0,F]}}}})],R.prototype,"maxValue",void 0);d.__decorate([T.property({type:Number,json:{type:[Number],read:{source:"range",reader(F,L){return L.range&&L.range[0]}},write:{target:"range",writer(F,L,J){L[J]=[F,this.maxValue||0]}}}})],R.prototype,"minValue",void 0);d.__decorate([A.enumeration({range:"range"})],R.prototype,"type",void 0);return R=t=d.__decorate([w.subclass("esri.layers.support.RangeDomain")],R)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(l,d){d=new d.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});l.kebabDict=d;Object.defineProperty(l,"__esModule",
{value:!0})})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex".split(" "),function(l,d,T,R,q,D,A,w,v,t,F,L,J,u){return function(){function C(){var e=this;this._customParameters=this._queryEngine=null;
this._snapshotFeatures=function(){var p=l._asyncToGenerator(function*(r){const {objectIdField:f}=e._queryEngine;var y=yield J.getFeature(e._getFeatureUrl,e._featureType.typeName,e._getFeatureOutputFormat,{customParameters:e._customParameters,dateFields:e._queryEngine.fieldsIndex.dateFields.map(M=>M.name),signal:r});yield F.validateGeoJSON(y);q.throwIfAborted(r);r=F.createOptimizedFeatures(y,{geometryType:e._queryEngine.geometryType,hasZ:!1,objectIdField:f});if(!D.equals(e._queryEngine.spatialReference,
D.WGS84))for(var z of r)R.isSome(z.geometry)&&(z.geometry=A.convertFromGeometry(v.project(A.convertToGeometry(z.geometry,e._queryEngine.geometryType,!1,!1),D.WGS84,e._queryEngine.spatialReference)));z=1;for(const M of r)y={},L.mixAttributes(e._fieldsIndex,y,M.attributes,!0),M.attributes=y,null==M.attributes[f]&&(M.objectId=M.attributes[f]=z++);return r});return function(r){return p.apply(this,arguments)}}()}var c=C.prototype;c.destroy=function(){var e;null==(e=this._queryEngine)?void 0:e.destroy();
this._queryEngine=null};c.load=function(){var e=l._asyncToGenerator(function*(p,r){const {getFeatureUrl:f,getFeatureOutputFormat:y,spatialReference:z,fields:M,geometryType:aa,featureType:U,objectIdField:ha,customParameters:N}=p;this._featureType=U;this._customParameters=N;this._getFeatureUrl=f;this._getFeatureOutputFormat=y;this._fieldsIndex=new u(M);yield this._checkProjection(z);q.throwIfAborted(r);this._queryEngine=new t.default({fields:M,geometryType:aa,hasM:!1,hasZ:!1,objectIdField:ha,spatialReference:z,
timeInfo:null,featureStore:new w({geometryType:aa,hasM:!1,hasZ:!1})});p=yield this._snapshotFeatures(R.unwrap(r.signal));this._queryEngine.featureStore.addMany(p);return{extent:this._queryEngine.fullExtent}});return function(p,r){return e.apply(this,arguments)}}();c.applyEdits=function(){var e=l._asyncToGenerator(function*(){throw new d("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");});return function(){return e.apply(this,arguments)}}();c.queryFeatures=function(){var e=
l._asyncToGenerator(function*(p={},r={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(p,r.signal)});return function(){return e.apply(this,arguments)}}();c.queryFeatureCount=function(){var e=l._asyncToGenerator(function*(p={},r={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(p,r.signal)});return function(){return e.apply(this,arguments)}}();c.queryObjectIds=function(){var e=l._asyncToGenerator(function*(p={},r={}){yield this._waitSnapshotComplete();
return this._queryEngine.executeQueryForIds(p,r.signal)});return function(){return e.apply(this,arguments)}}();c.queryExtent=function(){var e=l._asyncToGenerator(function*(p={},r={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(p,r.signal)});return function(){return e.apply(this,arguments)}}();c.querySnapping=function(){var e=l._asyncToGenerator(function*(p,r={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(p,r.signal)});
return function(p){return e.apply(this,arguments)}}();c.refresh=function(){var e=l._asyncToGenerator(function*(p){var r;this._customParameters=p;null==(r=this._snapshotTask)?void 0:r.abort();this._snapshotTask=q.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(f=>{this._queryEngine.featureStore.clear();f&&this._queryEngine.featureStore.addMany(f)},f=>{this._queryEngine.featureStore.clear();q.isAbortError(f)||T.getLogger("esri.layers.WFSLayer").error(new d("wfs-layer:getfeature-error",
"An error occurred during the GetFeature request",{error:f}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent}});return function(p){return e.apply(this,arguments)}}();c._waitSnapshotComplete=function(){var e=l._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return e.apply(this,arguments)}}();c._checkProjection=function(){var e=l._asyncToGenerator(function*(p){try{yield v.checkProjectionSupport(D.WGS84,
p)}catch{throw new d("unsupported-projection","Projection not supported",{spatialReference:p});}});return function(p){return e.apply(this,arguments)}}();return C}()});