// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(l,d,Z,Y,u,F,D,y){function v(n,J){return n?J?4:3:J?3:2}function r(n,J,S,V){if(n){if(S)return J&&V?c:Oa;if(J&&V)return Ia}else if(J&&V)return Oa;return Sa}function I({scale:n,translate:J},S){return Math.round((S-J[0])/n[0])}function P({scale:n,translate:J},
S){return Math.round((J[1]-S)/n[1])}function O({scale:n,translate:J},S){return S*n[0]+J[0]}function t({scale:n,translate:J},S){return J[1]-S*n[1]}function C(n){n=n.coords;return{x:n[0],y:n[1]}}function b(n,J){n.coords[0]=J.x;n.coords[1]=J.y;return n}function g(n){n=n.coords;return{x:n[0],y:n[1],z:n[2]}}function m(n,J){n.coords[0]=J.x;n.coords[1]=J.y;n.coords[2]=J.z;return n}function w(n){n=n.coords;return{x:n[0],y:n[1],m:n[2]}}function h(n,J){n.coords[0]=J.x;n.coords[1]=J.y;n.coords[2]=J.m;return n}
function z(n){n=n.coords;return{x:n[0],y:n[1],z:n[2],m:n[3]}}function q(n,J){n.coords[0]=J.x;n.coords[1]=J.y;n.coords[2]=J.z;n.coords[3]=J.m;return n}function B(n,J){return n&&J?q:n?m:J?h:b}function R(n,J,S,V,ia){S=B(S,V);for(const fa of J){const {geometry:L,attributes:Q}=fa;let ba;L&&(ba=S(new y,L));n.push(new F.default(ba,Q,null,Q[ia]))}return n}function N(n,J,S,V){for(const ia of J){const {geometry:fa,attributes:L}=ia;let Q;fa&&(Q=da(fa,S,V));n.push({attributes:L,geometry:Q})}return n}function da(n,
J,S){if(Y.isNone(n))return null;const V=v(J,S),ia=[];for(let fa=0;fa<n.coords.length;fa+=V){const L=[];for(let Q=0;Q<V;Q++)L.push(n.coords[fa+Q]);ia.push(L)}return J?S?{points:ia,hasZ:J,hasM:S}:{points:ia,hasZ:J}:S?{points:ia,hasM:S}:{points:ia}}function K(n,J,S,V,ia){S=v(S,V);for(const fa of J){J=fa.geometry;V=fa.attributes;let L;J&&(L=H(new y,J,S));n.push(new F.default(L,V,null,V[ia]))}return n}function H(n,J,S=v(J.hasZ,J.hasM)){n.lengths[0]=J.points.length;const V=n.coords;let ia=0;for(const fa of J.points)for(J=
0;J<S;J++)V[ia++]=fa[J];return n}function T(n,J,S){if(!n)return null;const V=v(J,S),{coords:ia,lengths:fa}=n;n=[];let L=0;for(const Q of fa){const ba=[];for(let oa=0;oa<Q;oa++){const pa=[];for(let ua=0;ua<V;ua++)pa.push(ia[L++]);ba.push(pa)}n.push(ba)}return J?S?{paths:n,hasZ:J,hasM:S}:{paths:n,hasZ:J}:S?{paths:n,hasM:S}:{paths:n}}function M(n,J,S,V,ia){S=v(S,V);for(const fa of J){J=fa.geometry;V=fa.attributes;let L;J&&(L=A(new y,J,S));n.push(new F.default(L,V,null,V[ia]))}return n}function A(n,J,
S=v(J.hasZ,J.hasM)){const {lengths:V,coords:ia}=n;let fa=0;for(const L of J.paths){for(const Q of L)for(J=0;J<S;J++)ia[fa++]=Q[J];V.push(L.length)}return n}function e(n,J,S){if(!n)return null;const V=v(J,S),{coords:ia,lengths:fa}=n;n=[];let L=0;for(const Q of fa){const ba=[];for(let oa=0;oa<Q;oa++){const pa=[];for(let ua=0;ua<V;ua++)pa.push(ia[L++]);ba.push(pa)}n.push(ba)}return J?S?{rings:n,hasZ:J,hasM:S}:{rings:n,hasZ:J}:S?{rings:n,hasM:S}:{rings:n}}function f(n,J,S,V,ia){for(const fa of J){J=fa.geometry;
const L=fa.centroid,Q=fa.attributes;let ba;J&&(ba=E(new y,J,S,V));Y.isSome(L)?n.push(new F.default(ba,Q,b(new y,L),Q[ia])):n.push(new F.default(ba,Q,null,Q[ia]))}return n}function E(n,J,S=J.hasZ,V=J.hasM){U(n,J.rings,S,V);return n}function U(n,J,S,V){S=v(S,V);const {lengths:ia,coords:fa}=n;V=0;ia.length=fa.length=0;for(const L of J){for(const Q of L)for(J=0;J<S;J++)fa[V++]=Q[J];ia.push(L.length)}return n}function ca(n,J,S,V,ia,fa){n.length=0;if(!S){for(const L of J)n.push(new F.default(null,L.attributes,
null,L.attributes[fa]));return n}switch(S){case "esriGeometryPoint":return R(n,J,V,ia,fa);case "esriGeometryMultipoint":return K(n,J,V,ia,fa);case "esriGeometryPolyline":return M(n,J,V,ia,fa);case "esriGeometryPolygon":return f(n,J,V,ia,fa);default:Ja.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${S}'`)),n.length=0}return n}function ja(n,J,S,V){n=n&&("coords"in n?n:n.geometry);if(Y.isNone(n))return null;switch(J){case "esriGeometryPoint":return J=C,S&&
V?J=z:S?J=g:V&&(J=w),J(n);case "esriGeometryMultipoint":return da(n,S,V);case "esriGeometryPolyline":return T(n,S,V);case "esriGeometryPolygon":return e(n,S,V);default:Ja.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${J}'`))}}function na(n,J,S,V,ia){n.length=0;if(Y.isNone(S)){for(const Q of J)n.push({attributes:Q.attributes});return n}switch(S){case "esriGeometryPoint":var fa=C;V&&ia?fa=z:V?fa=g:ia&&(fa=w);for(var L of J){const {geometry:Q,attributes:ba}=
L;V=Y.isSome(Q)?fa(Q):null;n.push({attributes:ba,geometry:V})}break;case "esriGeometryMultipoint":return N(n,J,V,ia);case "esriGeometryPolyline":for(const Q of J){const {geometry:ba,attributes:oa}=Q;let pa;Y.isSome(ba)&&(pa=T(ba,V,ia));n.push({attributes:oa,geometry:pa})}break;case "esriGeometryPolygon":for(fa of J){const {geometry:Q,attributes:ba,centroid:oa}=fa;let pa;Y.isSome(Q)&&(pa=e(Q,V,ia));oa?(L=C(oa),n.push({attributes:ba,centroid:L,geometry:pa})):n.push({attributes:ba,geometry:pa})}break;
default:Ja.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${S}'`))}return n}function ta(n,J,S,V,ia,fa,L=S,Q=V){n.lengths.length&&(n.lengths.length=0);n.coords.length&&(n.coords.length=0);if(Y.isNone(J)||!J.coords.length)return null;ia=Ba[ia];const {coords:ba,lengths:oa}=J;J=v(S,V);const pa=v(S&&L,V&&Q);S=r(S,V,L,Q);if(!oa.length)return S(n.coords,ba,0,0,I(fa,ba[0]),P(fa,ba[1])),n.lengths.length&&(n.lengths.length=0),n.coords.length=J,n;let ua,wa=0,za,Ga=
0;for(const Ca of oa){if(Ca<ia)continue;let Da=0;za=Ga;Q=V=I(fa,ba[wa]);ua=L=P(fa,ba[wa+1]);S(n.coords,ba,za,wa,Q,ua);Da++;wa+=J;za+=pa;for(let Ea=1;Ea<Ca;Ea++,wa+=J)if(Q=I(fa,ba[wa]),ua=P(fa,ba[wa+1]),Q!==V||ua!==L)S(n.coords,ba,za,wa,Q-V,ua-L),za+=pa,Da++,V=Q,L=ua;Da>=ia&&(n.lengths.push(Da),Ga=za)}n.coords.length=Ga;return n.coords.length?n:null}function ma(n,J,S,V,ia,fa,L){let Q=V,ba=0;for(let pa=fa+S;pa<L;pa+=S){{var oa=J[pa];const ua=J[pa+1],wa=J[L],za=J[L+1];let Ga=J[fa],Ca=J[fa+1],Da=wa-Ga,
Ea=za-Ca;if(0!==Da||0!==Ea){const Fa=((oa-Ga)*Da+(ua-Ca)*Ea)/(Da*Da+Ea*Ea);1<Fa?(Ga=wa,Ca=za):0<Fa&&(Ga+=Da*Fa,Ca+=Ea*Fa)}Da=oa-Ga;Ea=ua-Ca;oa=Da*Da+Ea*Ea}oa>Q&&(ba=pa,Q=oa)}Q>V&&(ba-fa>S&&ma(n,J,S,V,ia,fa,ba),ia(n,J,n.length,ba,J[ba],J[ba+1]),L-ba>S&&ma(n,J,S,V,ia,ba,L))}function la(n,J,S,V,ia){const {coords:fa,lengths:L}=J,Q=S?V?c:Oa:V?Oa:Sa;S=v(S,V);if(!fa.length)return n!==J&&(n.lengths.length=0,n.coords.length=0),n;if(!L.length)return Q(n.coords,fa,0,0,O(ia,fa[0]),t(ia,fa[1])),n!==J&&(n.lengths.length=
0,n.coords.length=S),n;const [ba,oa]=ia.scale;V=0;for(let pa=0;pa<L.length;pa++){const ua=L[pa];n.lengths[pa]=ua;let wa=O(ia,fa[V]),za=t(ia,fa[V+1]);Q(n.coords,fa,V,V,wa,za);V+=S;for(let Ga=1;Ga<ua;Ga++,V+=S)wa+=fa[V]*ba,za-=fa[V+1]*oa,Q(n.coords,fa,V,V,wa,za)}n!==J&&(n.lengths.length=L.length,n.coords.length=fa.length);return n}function va(n,J,S,V){let ia=0,fa=n[V*J],L=n[V*(J+1)];for(let Q=1;Q<S;Q++){const ba=fa+n[V*(J+Q)],oa=L+n[V*(J+Q)+1],pa=(ba-fa)*(oa+L);fa=ba;L=oa;ia+=pa}return.5*ia}const Ja=
Z.getLogger("esri.tasks.support.optimizedFeatureSet"),Ba={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Sa=(n,J,S,V,ia,fa)=>{n[S]=ia;n[S+1]=fa},Oa=(n,J,S,V,ia,fa)=>{n[S]=ia;n[S+1]=fa;n[S+2]=J[V+2]},Ia=(n,J,S,V,ia,fa)=>{n[S]=ia;n[S+1]=fa;n[S+2]=J[V+3]},c=(n,J,S,V,ia,fa)=>{n[S]=ia;n[S+1]=fa;n[S+2]=J[V+2];n[S+3]=J[V+3]},p=[],ea=[];l.convertFromFeature=function(n,J,S,V,ia){p[0]=n;[n]=ca(ea,p,J,S,V,ia);p.length=ea.length=0;return n};l.convertFromFeatureSet=
function(n,J){const S=new D,{hasM:V,hasZ:ia,features:fa,objectIdFieldName:L,spatialReference:Q,geometryType:ba,exceededTransferLimit:oa,transform:pa,fields:ua}=n;ua&&(S.fields=ua);S.geometryType=ba;S.objectIdFieldName=L||J;S.spatialReference=Q;if(!S.objectIdFieldName)return Ja.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),S;fa&&ca(S.features,fa,ba,ia,V,S.objectIdFieldName);oa&&(S.exceededTransferLimit=oa);V&&(S.hasM=V);ia&&(S.hasZ=ia);pa&&(S.transform=
pa);return S};l.convertFromFeatures=ca;l.convertFromGeometry=function(n,J,S){if(Y.isNone(n))return null;const V=new y;"hasZ"in n&&null==J&&(J=n.hasZ);"hasM"in n&&null==S&&(S=n.hasM);if(u.isPoint(n))return B(null!=J?J:null!=n.z,null!=S?S:null!=n.m)(V,n);if(u.isPolygon(n))return E(V,n,J,S);if(u.isPolyline(n))return A(V,n,v(J,S));if(u.isMultipoint(n))return H(V,n,v(J,S));Ja.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${n}'`))};l.convertFromGraphics=function(n,
J,S,V,ia,fa){const L=n.length;switch(S){case "esriGeometryPoint":R(n,J,V,ia,fa);break;case "esriGeometryMultipoint":K(n,J,V,ia,fa);break;case "esriGeometryPolyline":M(n,J,V,ia,fa);break;case "esriGeometryPolygon":f(n,J,V,ia,fa);break;default:Ja.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${S}'`))}for(V=0;V<J.length;V++)n[V+L].geometryType=S,n[V+L].insertAfter=J[V].insertAfter,n[V+L].groupId=J[V].groupId;return n};l.convertFromMultipoint=H;l.convertFromMultipointFeatures=
K;l.convertFromNestedArray=U;l.convertFromPoint=function(n,J,S=B(null!=J.z,null!=J.m)){return S(n,J)};l.convertFromPointFeatures=R;l.convertFromPolygon=E;l.convertFromPolyline=A;l.convertFromPolylineFeatures=M;l.convertToFeature=function(n,J,S,V){ea[0]=n;na(p,ea,J,S,V);n=p[0];p.length=ea.length=0;return n};l.convertToFeatureSet=function(n){const {objectIdFieldName:J,spatialReference:S,transform:V,fields:ia,hasM:fa,hasZ:L,features:Q,geometryType:ba,exceededTransferLimit:oa,uniqueIdField:pa,queryGeometry:ua,
queryGeometryType:wa}=n;n=na([],Q,ba,L,fa);const za=ja(ua,wa,!1,!1);n={features:n,fields:ia,geometryType:ba,objectIdFieldName:J,spatialReference:S,uniqueIdField:pa,queryGeometry:za};V&&(n.transform=V);oa&&(n.exceededTransferLimit=oa);fa&&(n.hasM=fa);L&&(n.hasZ=L);return n};l.convertToFeatures=na;l.convertToGeometry=ja;l.convertToMultipoint=da;l.convertToMultipointFeatures=N;l.convertToPoint=function(n,J,S){return n?J?S?z(n):g(n):S?w(n):C(n):null};l.convertToPolygon=e;l.convertToPolyline=T;l.deltaDecodeGeometry=
function(n,J){if(Y.isNone(n))return null;const S=n.clone(),V=n.coords;n=n.lengths;let ia=0;for(let Q=0;Q<n.length;Q++){const ba=n[Q];var fa=V[J*ia],L=V[J*ia+1];for(let oa=1;oa<ba;oa++)fa+=V[J*(ia+oa)],L+=V[J*(ia+oa)+1],S.coords[J*(ia+oa)]=fa,S.coords[J*(ia+oa)+1]=L;ia+=ba}return S};l.deltaEncodeGeometry=function(n,J){const S=n.clone(),V=n.coords;n=n.lengths;let ia=0;for(let L=0;L<n.length;L++){const Q=n[L];let ba=V[J*ia];var fa=V[J*ia+1];for(let oa=1;oa<Q;oa++){const pa=V[J*(ia+oa)],ua=V[J*(ia+oa)+
1];fa=ua-fa;S.coords[J*(ia+oa)]=pa-ba;S.coords[J*(ia+oa)+1]=fa;ba=pa;fa=ua}ia+=Q}return S};l.generalizeOptimizedGeometry=function(n,J,S,V,ia,fa,L=S,Q=V){n.lengths.length&&(n.lengths.length=0);n.coords.length&&(n.coords.length=0);if(!J||!J.coords.length)return null;ia=Ba[ia];const {coords:ba,lengths:oa}=J;J=v(S,V);const pa=v(S&&L,V&&Q);S=r(S,V,L,Q);if(!oa.length)return S(n.coords,ba,0,0,ba[0],ba[1]),n.lengths.length&&(n.lengths.length=0),n.coords.length=J,n;V=0;fa*=fa;for(const ua of oa){if(ua<ia){V+=
ua*J;continue}L=n.coords.length/pa;Q=V;const wa=V+(ua-1)*J;S(n.coords,ba,n.coords.length,Q,ba[Q],ba[Q+1]);ma(n.coords,ba,J,fa,S,Q,wa);S(n.coords,ba,n.coords.length,wa,ba[wa],ba[wa+1]);Q=n.coords.length/pa-L;Q>=ia?n.lengths.push(Q):n.coords.length=L*pa;V+=ua*J}return n.coords.length?n:null};l.getBoundsOptimizedGeometry=function(n,J,S,V){if(Y.isNone(J)||!J.coords||!J.coords.length)return null;S=v(S,V);let ia=V=Number.POSITIVE_INFINITY,fa=Number.NEGATIVE_INFINITY,L=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=
J.coords;for(let Q=0;Q<J.length;Q+=S){const ba=J[Q],oa=J[Q+1];V=Math.min(V,ba);fa=Math.max(fa,ba);ia=Math.min(ia,oa);L=Math.max(L,oa)}}n[0]=V;n[1]=ia;n[2]=fa;n[3]=L;return n};l.getQuantizedArea=function(n,J){const {coords:S,lengths:V}=n;let ia=n=0;for(let fa=0;fa<V.length;fa++)ia+=va(S,n,V[fa],J),n+=fa;return Math.abs(ia)};l.getQuantizedBoundsOptimizedGeometry=function(n,J,S,V){S=v(S,V);const {lengths:ia,coords:fa}=J;V=J=Number.POSITIVE_INFINITY;let L=Number.NEGATIVE_INFINITY,Q=Number.NEGATIVE_INFINITY,
ba=0;for(const oa of ia){let pa=fa[ba],ua=fa[ba+1];J=Math.min(pa,J);V=Math.min(ua,V);L=Math.max(pa,L);Q=Math.max(ua,Q);ba+=S;for(let wa=1;wa<oa;wa++,ba+=S){const za=fa[ba],Ga=fa[ba+1];pa+=za;ua+=Ga;0>za&&(J=Math.min(J,pa));0<za&&(L=Math.max(L,pa));0>Ga?V=Math.min(V,ua):0<Ga&&(Q=Math.max(Q,ua))}}n[0]=J;n[1]=V;n[2]=L;n[3]=Q;return n};l.getSignedQuantizedRingArea=va;l.quantizeOptimizedFeatureSet=function(n,J){const {geometryType:S,features:V,hasM:ia,hasZ:fa}=J;if(!n)return J;for(let L=0;L<V.length;L++){const Q=
V[L],ba=Q.weakClone();ba.geometry=new y;ta(ba.geometry,Q.geometry,ia,fa,S,n);Q.centroid&&(ba.centroid=new y,ta(ba.centroid,Q.centroid,ia,fa,"esriGeometryPoint",n));V[L]=ba}J.transform=n;return J};l.quantizeOptimizedGeometry=ta;l.quantizeX=I;l.quantizeY=P;l.removeCollinearVectices=function(n,J,S,V,ia){if(!J||!J.coords||!J.coords.length)return null;S=Ba[S];const {coords:fa,lengths:L}=J;J=r(V,ia,V,ia);V=v(V,ia);let Q=ia=0,ba=0,oa=0;for(const wa of L){Q=oa;J(n.coords,fa,Q,ia,fa[ia],fa[ia+1]);ia+=V;var pa=
fa[ia];let za=fa[ia+1],Ga=pa,Ca=za;var ua=za/pa;Q+=V;J(n.coords,fa,Q,ia,Ga,Ca);ia+=V;for(let Da=2;Da<wa;Da++){pa=fa[ia];za=fa[ia+1];const Ea=za/pa,Fa=ua===Ea||!isFinite(ua)&&!isFinite(Ea);ua=Fa&&isFinite(Ea)?0<=ua&&0<=Ea||0>=ua&&0>=Ea:0<=Ca&&0<=za||0>=Ca&&0>=za;Fa&&ua?(Ga+=pa,Ca+=za):(Ga=pa,Ca=za,Q+=V);J(n.coords,fa,Q,ia,Ga,Ca);ia+=V;ua=Ea}Q+=V;pa=(Q-oa)/V;pa>=S&&(n.lengths[ba]=pa,oa=Q,ba++)}n.coords.length>oa&&(n.coords.length=oa);n.lengths.length>ba&&(n.lengths.length=ba);return n.coords.length&&
n.lengths.length?n:null};l.removeZMValues=function(n,J,S,V,ia,fa){const L=v(S,V);S=r(S,V,ia,fa);V=J.coords;n.coords.length=0;n.lengths.length=0;n.lengths.push(...J.lengths);for(J=0;J<V.length;J+=L)S(n.coords,V,n.coords.length,J,V[J],V[J+1]);return n};l.unquantizeOptimizedFeatureSet=function(n){const {transform:J,features:S,hasM:V,hasZ:ia}=n;if(!J)return n;for(const fa of S)Y.isSome(fa.geometry)&&la(fa.geometry,fa.geometry,V,ia,J),fa.centroid&&la(fa.centroid,fa.centroid,V,ia,J);n.transform=null;return n};
l.unquantizeOptimizedGeometry=la;l.unquantizeX=O;l.unquantizeY=t;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(l,d,Z){let Y=function(){function F(D=null,y={},v,r){this.geometry=D;this.attributes=y;this.centroid=v;this.objectId=r;this.geohashY=this.geohashX=this.displayId=0}F.prototype.weakClone=function(){const D=new F(this.geometry,this.attributes,this.centroid,
this.objectId);D.displayId=this.displayId;D.geohashX=this.geohashX;D.geohashY=this.geohashY;return D};return F}(),u=function(F){function D(){return F.apply(this,arguments)||this}d._inheritsLoose(D,F);return D}(Y);l.OptimizedFeatureWithGeometry=u;l.default=Y;l.hasGeometry=function(F){return!(Z.isNone(F.geometry)||!F.geometry.coords||!F.geometry.coords.length)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function l(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}l.prototype.weakClone=function(){const d=new l;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;
d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;return d};return l}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function d(Y=
[],u=[],F=!1){this.lengths=null!=Y?Y:[];this.coords=null!=u?u:[];this.hasIndeterminateRingOrder=F}var Z=d.prototype;Z.forEachVertex=function(Y){let u=0;this.lengths.length||Y(this.coords[0],this.coords[1]);for(let F=0;F<this.lengths.length;F++){const D=this.lengths[F];for(let y=0;y<D;y++)Y(this.coords[2*(y+u)],this.coords[2*(y+u)+1]);u+=D}};Z.clone=function(Y){return Y?(Y.set(this.coords),new d(this.lengths.slice(),Y,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};l._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((Y,u)=>Y+u)}}]);return d}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r){return function(){function I(O){this.geometryInfo=O;this._boundsStore=new v.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new Z;this.featureAdapter=r.optimizedFeatureQueryEngineAdapter}var P=I.prototype;P.add=function(O){this._add(O);this._emitChanged()};P.addMany=function(O){for(const t of O)this._add(t);this._emitChanged()};P.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};P.removeById=function(O){O=
this._featuresById.get(O);if(!O)return null;this._remove(O);this._emitChanged();return O};P.removeManyById=function(O){this._boundsStore.invalidateIndex();for(const t of O)(O=this._featuresById.get(t))&&this._remove(O);this._emitChanged()};P.forEachBounds=function(O,t,C){for(const b of O)(O=this._boundsStore.get(b.objectId))&&t(F.fromRect(C,O))};P.getFeature=function(O){return this._featuresById.get(O)};P.has=function(O){return this._featuresById.has(O)};P.forEach=function(O){this._featuresById.forEach(t=>
O(t))};P.forEachInBounds=function(O,t){this._boundsStore.forEachInBounds(O,C=>{t(this._featuresById.get(C))})};P.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};P.sweep=function(){let O=!1;this._featuresById.forEach((t,C)=>{this._markedIds.has(C)||(O=!0,this._remove(t))});this._markedIds.clear();O&&this._emitChanged()};P._emitChanged=function(){this.events.emit("changed",void 0)};P._add=function(O){if(O){var t=O.objectId;if(null==t)Y.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature",
"feature id is missing",{feature:O}));else{var C=this._featuresById.get(t);this._markedIds.add(t);if(C){O.displayId=C.displayId;var b=this._boundsStore.get(t);this._boundsStore.delete(t)}else if(u.isSome(this.onFeatureAdd))this.onFeatureAdd(O);!u.isNone(O.geometry)&&O.geometry.coords&&O.geometry.coords.length?(b=y.getBoundsOptimizedGeometry(u.isSome(b)?b:D.create(),O.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),u.isSome(b)&&this._boundsStore.set(t,b)):this._boundsStore.set(t,null);this._featuresById.set(t,
O)}}};P._remove=function(O){if(u.isSome(this.onFeatureRemove))this.onFeatureRemove(O);this._markedIds.delete(O.objectId);this._boundsStore.delete(O.objectId);this._featuresById.delete(O.objectId);return O};l._createClass(I,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const O=D.create(D.NEGATIVE_INFINITY);this._featuresById.forEach(t=>{if(t=this._boundsStore.get(t.objectId))O[0]=Math.min(t[0],O[0]),O[1]=Math.min(t[1],O[1]),O[2]=Math.max(t[2],O[2]),O[3]=Math.max(t[3],O[3])});return O}},{key:"storeStatistics",get:function(){let O=0;this._featuresById.forEach(t=>{u.isSome(t.geometry)&&t.geometry.coords&&(O+=t.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:O/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return I}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(l,d,Z,Y,u){let F=function(){function D(){this._emitter=new D.EventEmitter(this)}var y=D.prototype;y.emit=function(v,r){return this._emitter.emit(v,r)};y.on=function(v,r){return this._emitter.on(v,r)};y.once=function(v,r){return this._emitter.once(v,r)};y.hasEventListener=function(v){return this._emitter.hasEventListener(v)};
return D}();(function(D){let y=function(){function r(P=null){this.target=P;this._listenersMap=null}var I=r.prototype;I.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};I.emit=function(P,O){P=this._listenersMap&&this._listenersMap.get(P);if(!P)return!1;const t=this.target||this;[...P].forEach(C=>{C.call(t,O)});return 0<P.length};I.on=function(P,O){if(Array.isArray(P)){var t=P.map(C=>this.on(C,O));return Y.handlesGroup(t)}if(-1<P.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);t=this._listenersMap.get(P)||[];t.push(O);this._listenersMap.set(P,t);return{remove:()=>{const C=this._listenersMap&&this._listenersMap.get(P)||[],b=C.indexOf(O);0<=b&&C.splice(b,1)}}};I.once=function(P,O){const t=this.on(P,C=>{t.remove();O.call(null,C)});return t};I.hasEventListener=function(P){P=this._listenersMap&&this._listenersMap.get(P);return null!=P&&0<P.length};return r}();D.EventEmitter=y;D.EventedMixin=r=>{r=function(I){function P(){var t=
I.apply(this,arguments)||this;t._emitter=new y;return t}l._inheritsLoose(P,I);var O=P.prototype;O.destroy=function(){this._emitter.clear()};O.emit=function(t,C){return this._emitter.emit(t,C)};O.on=function(t,C){return this._emitter.on(t,C)};O.once=function(t,C){return this._emitter.once(t,C)};O.hasEventListener=function(t){return this._emitter.hasEventListener(t)};return P}(r);return r=d.__decorate([u.subclass("esri.core.Evented")],r)};let v=function(r){function I(){var O=r.apply(this,arguments)||
this;O._emitter=new F.EventEmitter(l._assertThisInitialized(O));return O}l._inheritsLoose(I,r);var P=I.prototype;P.destroy=function(){this._emitter.clear()};P.emit=function(O,t){return this._emitter.emit(O,t)};P.on=function(O,t){return this._emitter.on(O,t)};P.once=function(O,t){return this._emitter.once(O,t)};P.hasEventListener=function(O){return this._emitter.hasEventListener(O)};return I}(Z);v=d.__decorate([u.subclass("esri.core.Evented")],v);D.EventedAccessor=v})(F||(F={}));return F})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(l,d,Z,Y){function u(b=t){return[b[0],b[1],b[2],b[3],b[4],b[5]]}function F(b,g,m,w,h,z,q=u()){q[0]=b;q[1]=g;q[2]=m;q[3]=w;q[4]=h;q[5]=z;return q}function D(b){return b[0]>=b[3]?0:b[3]-b[0]}function y(b){return b[1]>=b[4]?0:b[4]-b[1]}function v(b){return b[2]>=b[5]?0:b[5]-b[2]}function r(b,g){return Math.max(g[0],b[0])<=Math.min(g[3],b[3])&&Math.max(g[1],b[1])<=Math.min(g[4],b[4])&&Math.max(g[2],b[2])<=Math.min(g[5],b[5])}function I(b,g){b[0]=
g[0];b[1]=g[1];b[2]=g[2];b[3]=g[3];b[4]=g[4];b[5]=g[5];return b}function P(b){return 6===b.length}const O=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],t=[0,0,0,0,0,0],C=u();l.NEGATIVE_INFINITY=O;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=t;l.allFinite=function(b){for(let g=0;6>g;g++)if(!isFinite(b[g]))return!1;return!0};l.center=function(b,g=[0,0,0]){g[0]=b[0]+D(b)/2;g[1]=b[1]+y(b)/2;g[2]=b[2]+v(b)/2;return g};l.contains=function(b,g){return g[0]>=
b[0]&&g[1]>=b[1]&&g[2]>=b[2]&&g[3]<=b[3]&&g[4]<=b[4]&&g[5]<=b[5]};l.containsPoint=function(b,g){return g[0]>=b[0]&&g[1]>=b[1]&&g[2]>=b[2]&&g[0]<=b[3]&&g[1]<=b[4]&&g[2]<=b[5]};l.containsPointWithMargin=function(b,g,m){return g[0]>=b[0]-m&&g[1]>=b[1]-m&&g[2]>=b[2]-m&&g[0]<=b[3]+m&&g[1]<=b[4]+m&&g[2]<=b[5]+m};l.create=u;l.depth=y;l.diameter=function(b){const g=D(b),m=v(b);b=y(b);return Math.sqrt(g*g+m*m+b*b)};l.empty=function(b){return b?I(b,O):u(O)};l.equals=function(b,g,m){if(d.isNone(b)||d.isNone(g))return b===
g;if(!P(b)||!P(g))return!1;if(m)for(let w=0;w<b.length;w++){if(!m(b[w],g[w]))return!1}else for(m=0;m<b.length;m++)if(b[m]!==g[m])return!1;return!0};l.expandWithAABB=function(b,g){b[0]=Math.min(b[0],g[0]);b[1]=Math.min(b[1],g[1]);b[2]=Math.min(b[2],g[2]);b[3]=Math.max(b[3],g[3]);b[4]=Math.max(b[4],g[4]);b[5]=Math.max(b[5],g[5])};l.expandWithBuffer=function(b,g,m=0,w=g.length/3){let h=b[0],z=b[1],q=b[2],B=b[3],R=b[4],N=b[5];for(let da=0;da<w;da++)h=Math.min(h,g[m+3*da]),z=Math.min(z,g[m+3*da+1]),q=
Math.min(q,g[m+3*da+2]),B=Math.max(B,g[m+3*da]),R=Math.max(R,g[m+3*da+1]),N=Math.max(N,g[m+3*da+2]);b[0]=h;b[1]=z;b[2]=q;b[3]=B;b[4]=R;b[5]=N};l.expandWithNestedArray=function(b,g,m){const w=g.length;let h=b[0],z=b[1],q=b[2],B=b[3],R=b[4],N=b[5];if(m)for(m=0;m<w;m++){var da=g[m];h=Math.min(h,da[0]);z=Math.min(z,da[1]);q=Math.min(q,da[2]);B=Math.max(B,da[0]);R=Math.max(R,da[1]);N=Math.max(N,da[2])}else for(m=0;m<w;m++)da=g[m],h=Math.min(h,da[0]),z=Math.min(z,da[1]),B=Math.max(B,da[0]),R=Math.max(R,
da[1]);b[0]=h;b[1]=z;b[2]=q;b[3]=B;b[4]=R;b[5]=N};l.expandWithOffset=function(b,g,m,w){b[0]=Math.min(b[0],b[0]+g);b[3]=Math.max(b[3],b[3]+g);b[1]=Math.min(b[1],b[1]+m);b[4]=Math.max(b[4],b[4]+m);b[2]=Math.min(b[2],b[2]+w);b[5]=Math.max(b[5],b[5]+w)};l.expandWithRect=function(b,g){b[0]=Math.min(b[0],g[0]);b[1]=Math.min(b[1],g[1]);b[3]=Math.max(b[3],g[2]);b[4]=Math.max(b[4],g[3])};l.expandWithVec3=function(b,g){b[0]=Math.min(b[0],g[0]);b[1]=Math.min(b[1],g[1]);b[2]=Math.min(b[2],g[2]);b[3]=Math.max(b[3],
g[0]);b[4]=Math.max(b[4],g[1]);b[5]=Math.max(b[5],g[2])};l.fromExtent=function(b,g=u()){g[0]=b.xmin;g[1]=b.ymin;g[2]=b.zmin;g[3]=b.xmax;g[4]=b.ymax;g[5]=b.zmax;return g};l.fromMinMax=function(b,g,m=u()){m[0]=b[0];m[1]=b[1];m[2]=b[2];m[3]=g[0];m[4]=g[1];m[5]=g[2];return m};l.fromRect=function(b,g){b[0]=g[0];b[1]=g[1];b[2]=Number.NEGATIVE_INFINITY;b[3]=g[2];b[4]=g[3];b[5]=Number.POSITIVE_INFINITY;return b};l.fromValues=F;l.getMax=function(b,g){g[0]=b[3];g[1]=b[4];g[2]=b[5];return g};l.getMin=function(b,
g){g[0]=b[0];g[1]=b[1];g[2]=b[2];return g};l.height=v;l.intersects=r;l.intersectsClippingArea=function(b,g){return d.isNone(g)?!0:r(b,g)};l.is=P;l.isPoint=function(b){return 0===D(b)&&0===y(b)&&0===v(b)};l.maximumDimension=function(b){return Math.max(D(b),v(b),y(b))};l.offset=function(b,g,m,w,h=b){h[0]=b[0]+g;h[1]=b[1]+m;h[2]=b[2]+w;h[3]=b[3]+g;h[4]=b[4]+m;h[5]=b[5]+w;return h};l.scale=function(b,g,m=b){const w=b[0]+D(b)/2,h=b[1]+y(b)/2,z=b[2]+v(b)/2;m[0]=w+(b[0]-w)*g;m[1]=h+(b[1]-h)*g;m[2]=z+(b[2]-
z)*g;m[3]=w+(b[3]-w)*g;m[4]=h+(b[4]-h)*g;m[5]=z+(b[5]-z)*g;return m};l.set=I;l.setMax=function(b,g,m=b){m[3]=g[0];m[4]=g[1];m[5]=g[2];m!==b&&(m[0]=b[0],m[1]=b[1],m[2]=b[2]);return b};l.setMin=function(b,g,m=b){m[0]=g[0];m[1]=g[1];m[2]=g[2];m!==b&&(m[3]=b[3],m[4]=b[4],m[5]=b[5]);return m};l.size=function(b,g=[0,0,0]){g[0]=D(b);g[1]=y(b);g[2]=v(b);return g};l.toExtent=function(b,g){return isFinite(b[2])||isFinite(b[5])?new Z({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],zmin:b[2],zmax:b[5],spatialReference:g}):
new Z({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],spatialReference:g})};l.toRect=function(b,g){g||(g=Y.create());g[0]=b[0];g[1]=b[1];g[2]=b[3];g[3]=b[4];return g};l.width=D;l.wrap=function(b,g,m,w,h,z){return F(b,g,m,w,h,z,C)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(l,d,Z,Y,u){function F(t=O){return[t[0],t[1],t[2],t[3]]}function D(t,C){t!==C&&
(t[0]=C[0],t[1]=C[1],t[2]=C[2],t[3]=C[3]);return t}function y(t){return Y.isNone(t)||t[0]>=t[2]?0:t[2]-t[0]}function v(t){return t[1]>=t[3]?0:t[3]-t[1]}function r(t,C,b){return C>=t[0]&&b>=t[1]&&C<=t[2]&&b<=t[3]}function I(t){return null!=t&&4===t.length}const P=[Infinity,Infinity,-Infinity,-Infinity],O=[0,0,0,0];l.NEGATIVE_INFINITY=P;l.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];l.UNIT=[0,0,1,1];l.ZERO=O;l.allFinite=function(t){for(let C=0;4>C;C++)if(!isFinite(t[C]))return!1;return!0};
l.area=function(t){return y(t)*v(t)};l.center=function(t,C=[0,0]){C[0]=(t[0]+t[2])/2;C[1]=(t[1]+t[3])/2;return C};l.clone=function(t){return[t[0],t[1],t[2],t[3]]};l.contains=function(t,C){return C[0]>=t[0]&&C[2]<=t[2]&&C[1]>=t[1]&&C[3]<=t[3]};l.containsPoint=function(t,C){return r(t,C[0],C[1])};l.containsPointObject=function(t,C){return r(t,C.x,C.y)};l.containsPointWithMargin=function(t,C,b){return C[0]>=t[0]-b&&C[1]>=t[1]-b&&C[0]<=t[2]+b&&C[1]<=t[3]+b};l.containsXY=r;l.copy=D;l.create=F;l.distance=
function(t,C){const b=(t[1]+t[3])/2,g=Math.max(Math.abs(C[0]-(t[0]+t[2])/2)-y(t)/2,0);t=Math.max(Math.abs(C[1]-b)-v(t)/2,0);return Math.sqrt(g*g+t*t)};l.empty=function(t){return t?D(t,P):F(P)};l.equals=function(t,C){return I(t)&&I(C)?t[0]===C[0]&&t[1]===C[1]&&t[2]===C[2]&&t[3]===C[3]:t===C};l.expand=function(t,C,b){if(Y.isNone(C))D(b,t);else if("length"in C)if(I(C))b[0]=Math.min(t[0],C[0]),b[1]=Math.min(t[1],C[1]),b[2]=Math.max(t[2],C[2]),b[3]=Math.max(t[3],C[3]);else{if(2===C.length||3===C.length)b[0]=
Math.min(t[0],C[0]),b[1]=Math.min(t[1],C[1]),b[2]=Math.max(t[2],C[0]),b[3]=Math.max(t[3],C[1])}else switch(C.type){case "extent":b[0]=Math.min(t[0],C.xmin);b[1]=Math.min(t[1],C.ymin);b[2]=Math.max(t[2],C.xmax);b[3]=Math.max(t[3],C.ymax);break;case "point":b[0]=Math.min(t[0],C.x),b[1]=Math.min(t[1],C.y),b[2]=Math.max(t[2],C.x),b[3]=Math.max(t[3],C.y)}};l.expandPointInPlace=function(t,C){C[0]<t[0]&&(t[0]=C[0]);C[0]>t[2]&&(t[2]=C[0]);C[1]<t[1]&&(t[1]=C[1]);C[1]>t[3]&&(t[3]=C[1])};l.expandWithNestedArray=
function(t,C,b=t){const g=C.length;let m=t[0],w=t[1],h=t[2];t=t[3];for(let z=0;z<g;z++){const q=C[z];m=Math.min(m,q[0]);w=Math.min(w,q[1]);h=Math.max(h,q[0]);t=Math.max(t,q[1])}b[0]=m;b[1]=w;b[2]=h;b[3]=t;return b};l.fromExtent=function(t,C=F()){C[0]=t.xmin;C[1]=t.ymin;C[2]=t.xmax;C[3]=t.ymax;return C};l.fromValues=function(t,C,b,g,m=F()){m[0]=t;m[1]=C;m[2]=b;m[3]=g;return m};l.height=v;l.intersection=function(t,C,b){if(Y.isNone(C))return D(b,t);const g=C[0],m=C[1],w=C[2];C=C[3];b[0]=Z.clamp(t[0],
g,w);b[1]=Z.clamp(t[1],m,C);b[2]=Z.clamp(t[2],g,w);b[3]=Z.clamp(t[3],m,C);return b};l.intersects=function(t,C){return Math.max(C[0],t[0])<=Math.min(C[2],t[2])&&Math.max(C[1],t[1])<=Math.min(C[3],t[3])};l.intersectsSphere=function(t,C){const b=C[3];var g=Math.abs(C[0]-.5*(t[0]+t[2]));const m=.5*(t[2]-t[0]);if(g>b+m)return!1;var w=.5*(t[3]-t[1]);t=Math.abs(C[1]-.5*(t[1]+t[3]));if(t>b+w)return!1;if(g<m||t<w)return!0;g-=m;w=t-w;return g*g+w*w<=b*b};l.is=I;l.isPoint=function(t){return(0===y(t)||!isFinite(t[0]))&&
(0===v(t)||!isFinite(t[1]))};l.offset=function(t,C,b,g=t){g[0]=t[0]+C;g[1]=t[1]+b;g[2]=t[2]+C;g[3]=t[3]+b;return g};l.pad=function(t,C,b=t){b[0]=t[0]-C;b[1]=t[1]-C;b[2]=t[2]+C;b[3]=t[3]+C;return b};l.setMax=function(t,C,b=t){b[2]=C[0];b[3]=C[1];b!==t&&(b[0]=t[0],b[1]=t[1]);return t};l.setMin=function(t,C,b=t){b[0]=C[0];b[1]=C[1];b!==t&&(b[2]=t[2],b[3]=t[3]);return b};l.size=function(t,C){C[0]=t[2]-t[0];C[1]=t[3]-t[1]};l.toExtent=function(t,C){return new u({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],
spatialReference:C})};l.width=y;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(l,d,Z){function Y(D,y,v){u.minX=y[0];u.minY=y[1];u.maxX=y[2];u.maxY=y[3];D.search(u,v)}const u={minX:0,minY:0,maxX:0,maxY:0};let F=function(){function D(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Z.PooledRBush(9,
d("esri-csp-restrictions")?v=>({minX:v[0],minY:v[1],maxX:v[2],maxY:v[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const v=Array(this._idByBounds.size);let r=0;this._idByBounds.forEach((I,P)=>{v[r++]=P});this._indexInvalid=!1;this._index.clear();this._index.load(v)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(v=>this._idByBounds.has(v))),this._boundsToLoad.length=0)}}var y=D.prototype;y.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=
0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};y.delete=function(v){const r=this._boundsById.get(v);this._boundsById.delete(v);r&&(this._idByBounds.delete(r),this._indexInvalid||this._index.remove(r))};y.forEachInBounds=function(v,r){this._loadIndex();Y(this._index,v,I=>r(this._idByBounds.get(I)))};y.get=function(v){return this._boundsById.get(v)};y.has=function(v){return this._boundsById.has(v)};y.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=
0)};y.set=function(v,r){if(!this._indexInvalid){const I=this._boundsById.get(v);I&&(this._index.remove(I),this._idByBounds.delete(I))}this._boundsById.set(v,r);r&&(this._idByBounds.set(r,v),this._indexInvalid||(this._boundsToLoad.push(r),5E4<this._boundsToLoad.length&&this._loadIndex()))};return D}();l.BoundsStore=F;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(l,d,Z,Y,u,F){function D(N,da){y(N,0,N.children.length,da,N)}function y(N,da,K,H,T){T||(T=new B([]));T.minX=Infinity;T.minY=Infinity;T.maxX=-Infinity;T.maxY=-Infinity;for(let M=da,A;M<K;M++)A=N.children[M],v(T,N.leaf?H(A):A);return T}function v(N,da){N.minX=Math.min(N.minX,da.minX);N.minY=Math.min(N.minY,da.minY);N.maxX=Math.max(N.maxX,da.maxX);N.maxY=Math.max(N.maxY,da.maxY)}function r(N,da){return N.minX-da.minX}function I(N,da){return N.minY-da.minY}function P(N){return(N.maxX-N.minX)*
(N.maxY-N.minY)}function O(N){return N.maxX-N.minX+(N.maxY-N.minY)}function t(N,da){return N.minX<=da.minX&&N.minY<=da.minY&&da.maxX<=N.maxX&&da.maxY<=N.maxY}function C(N,da){return da.minX<=N.maxX&&da.minY<=N.maxY&&da.maxX>=N.minX&&da.maxY>=N.minY}function b(N,da,K,H,T){for(da=[da,K];da.length;){K=Y.assumeNonNull(da.pop());const M=Y.assumeNonNull(da.pop());if(K-M<=H)continue;const A=M+Math.ceil((K-M)/H/2)*H;F.quickselect(N,A,M,K,T);da.push(M,A,A,K)}}let g=function(){function N(K=9,H){this.compareMinX=
r;this.compareMinY=I;this.toBBox=function(T){return T};this._maxEntries=Math.max(4,K||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));H&&("function"===typeof H?this.toBBox=H:this._initFormat(H));this.clear()}var da=N.prototype;da.destroy=function(){this.clear();m.prune();w.prune();h.prune();z.prune()};da.all=function(K){this._all(this.data,K)};da.search=function(K,H){let T=this.data;const M=this.toBBox;if(C(K,T))for(m.clear();T;){for(let A=0,e=T.children.length;A<e;A++){const f=T.children[A],
E=T.leaf?M(f):f;C(K,E)&&(T.leaf?H(f):t(K,E)?this._all(f,H):m.push(f))}T=m.pop()}};da.collides=function(K){let H=this.data;const T=this.toBBox;if(!C(K,H))return!1;for(m.clear();H;){for(let M=0,A=H.children.length;M<A;M++){const e=H.children[M],f=H.leaf?T(e):e;if(C(K,f)){if(H.leaf||t(K,f))return!0;m.push(e)}}H=m.pop()}return!1};da.load=function(K){if(!K.length)return this;if(K.length<this._minEntries){for(let H=0,T=K.length;H<T;H++)this.insert(K[H]);return this}K=this._build(K.slice(0,K.length),0,K.length-
1,0);if(this.data.children.length)if(this.data.height===K.height)this._splitRoot(this.data,K);else{if(this.data.height<K.height){const H=this.data;this.data=K;K=H}this._insert(K,this.data.height-K.height-1,!0)}else this.data=K;return this};da.insert=function(K){K&&this._insert(K,this.data.height-1);return this};da.clear=function(){this.data=new B([]);return this};da.remove=function(K){if(!K)return this;let H=this.data,T=null,M=0,A=!1,e;const f=this.toBBox(K);h.clear();for(z.clear();H||0<h.length;){if(!H){var E;
H=Y.assumeNonNull(h.pop());T=h.data[h.length-1];M=null!=(E=z.pop())?E:0;A=!0}if(H.leaf&&(e=Z.indexOf(H.children,K,H.children.length,H.indexHint),-1!==e)){H.children.splice(e,1);h.push(H);this._condense(h);break}A||H.leaf||!t(H,f)?T?(M++,H=T.children[M],A=!1):H=null:(h.push(H),z.push(M),M=0,T=H,H=H.children[0])}return this};da.toJSON=function(){return this.data};da.fromJSON=function(K){this.data=K;return this};da._all=function(K,H){for(w.clear();K;){var T;if(!0===K.leaf)for(const M of K.children)H(M);
else w.pushArray(K.children);K=null!=(T=w.pop())?T:null}};da._build=function(K,H,T,M){var A=T-H+1,e=this._maxEntries;if(A<=e)return K=new B(K.slice(H,T+1)),D(K,this.toBBox),K;M||(M=Math.ceil(Math.log(A)/Math.log(e)),e=Math.ceil(A/e**(M-1)));const f=new R([]);f.height=M;A=Math.ceil(A/e);e=A*Math.ceil(Math.sqrt(e));for(b(K,H,T,e,this.compareMinX);H<=T;H+=e){const E=Math.min(H+e-1,T);b(K,H,E,A,this.compareMinY);for(let U=H;U<=E;U+=A)f.children.push(this._build(K,U,Math.min(U+A-1,E),M-1))}D(f,this.toBBox);
return f};da._chooseSubtree=function(K,H,T,M){for(;;){M.push(H);if(!0===H.leaf||M.length-1===T)break;let A=Infinity,e=Infinity,f=void 0;for(let E=0,U=H.children.length;E<U;E++){const ca=H.children[E],ja=P(ca),na=(Math.max(ca.maxX,K.maxX)-Math.min(ca.minX,K.minX))*(Math.max(ca.maxY,K.maxY)-Math.min(ca.minY,K.minY))-ja;na<e?(e=na,A=ja<A?ja:A,f=ca):na===e&&ja<A&&(A=ja,f=ca)}H=f||H.children[0]}return H};da._insert=function(K,H,T){var M=this.toBBox;T=T?K:M(K);h.clear();M=this._chooseSubtree(T,this.data,
H,h);M.children.push(K);for(v(M,T);0<=H;)if(h.data[H].children.length>this._maxEntries)this._split(h,H),H--;else break;this._adjustParentBBoxes(T,h,H)};da._split=function(K,H){const T=K.data[H];var M=T.children.length;const A=this._minEntries;this._chooseSplitAxis(T,A,M);(M=this._chooseSplitIndex(T,A,M))?(M=T.children.splice(M,T.children.length-M),M=T.leaf?new B(M):new R(M),M.height=T.height,D(T,this.toBBox),D(M,this.toBBox),H?K.data[H-1].children.push(M):this._splitRoot(T,M)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};
da._splitRoot=function(K,H){this.data=new R([K,H]);this.data.height=K.height+1;D(this.data,this.toBBox)};da._chooseSplitIndex=function(K,H,T){let M,A,e=void 0;M=A=Infinity;for(let E=H;E<=T-H;E++){var f=y(K,0,E,this.toBBox);const U=y(K,E,T,this.toBBox),ca=Math.max(0,Math.min(f.maxX,U.maxX)-Math.max(f.minX,U.minX))*Math.max(0,Math.min(f.maxY,U.maxY)-Math.max(f.minY,U.minY));f=P(f)+P(U);ca<M?(M=ca,e=E,A=f<A?f:A):ca===M&&f<A&&(A=f,e=E)}return e};da._chooseSplitAxis=function(K,H,T){const M=K.leaf?this.compareMinX:
r,A=K.leaf?this.compareMinY:I,e=this._allDistMargin(K,H,T,M);H=this._allDistMargin(K,H,T,A);e<H&&K.children.sort(M)};da._allDistMargin=function(K,H,T,M){K.children.sort(M);M=this.toBBox;var A=y(K,0,H,M);const e=y(K,T-H,T,M);let f=O(A)+O(e);for(let E=H;E<T-H;E++){const U=K.children[E];v(A,K.leaf?M(U):U);f+=O(A)}for(T=T-H-1;T>=H;T--)A=K.children[T],v(e,K.leaf?M(A):A),f+=O(e);return f};da._adjustParentBBoxes=function(K,H,T){for(;0<=T;T--)v(H.data[T],K)};da._condense=function(K){for(let H=K.length-1;0<=
H;H--){const T=K.data[H];if(0===T.children.length)if(0<H){const M=K.data[H-1],A=M.children;A.splice(Z.indexOf(A,T,A.length,M.indexHint),1)}else this.clear();else D(T,this.toBBox)}};da._initFormat=function(K){const H=["return a"," - b",";"];this.compareMinX=new Function("a","b",H.join(K[0]));this.compareMinY=new Function("a","b",H.join(K[1]));this.toBBox=new Function("a","return {minX: a"+K[0]+", minY: a"+K[1]+", maxX: a"+K[2]+", maxY: a"+K[3]+"};")};return N}();const m=new u,w=new u,h=new u,z=new u({deallocator:void 0});
u=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let q=function(N){function da(){var K=N.apply(this,arguments)||this;K.height=1;K.indexHint=new Z.PositionHint;return K}d._inheritsLoose(da,N);return da}(u),B=function(N){function da(K){var H=N.call(this)||this;H.children=K;H.leaf=!0;return H}d._inheritsLoose(da,N);return da}(q),R=function(N){function da(K){var H=N.call(this)||this;H.children=K;H.leaf=!1;return H}d._inheritsLoose(da,N);return da}(q);l.BBox=u;l.PooledRBush=g;l.default=
g;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(l){var d={exports:{}};(function(Z){(function(Y){Y=Y();void 0!==Y&&(Z.exports=Y)})(function(){function Y(D,y,v,r,I){for(;r>v;){if(600<r-v){var P=r-v+1,O=y-v+1,t=Math.log(P),C=.5*Math.exp(2*t/3);t=.5*Math.sqrt(t*C*(P-C)/P)*(0>O-P/2?-1:1);Y(D,y,Math.max(v,Math.floor(y-O*C/P+t)),Math.min(r,Math.floor(y+(P-O)*C/P+t)),I)}P=D[y];O=v;C=r;u(D,v,y);for(0<I(D[r],P)&&u(D,v,r);O<C;){u(D,O,C);
O++;for(C--;0>I(D[O],P);)O++;for(;0<I(D[C],P);)C--}0===I(D[v],P)?u(D,v,C):(C++,u(D,C,r));C<=y&&(v=C+1);y<=C&&(r=C-1)}}function u(D,y,v){var r=D[y];D[y]=D[v];D[v]=r}function F(D,y){return D<y?-1:D>y?1:0}return function(D,y,v,r,I){Y(D,y,v||0,r||D.length-1,I||F)}})})(d);l.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(l,d,Z,Y){const u={getObjectId(F){return F.objectId},
getAttributes(F){return F.attributes},getAttribute(F,D){return F.attributes[D]},cloneWithGeometry(F,D){return new Z.default(D,F.attributes,null,F.objectId)},getGeometry(F){return F.geometry},getCentroid(F,D){F.centroid||(F.centroid=d.getCentroidOptimizedGeometry(new Y,F.geometry,D.hasZ,D.hasM));return F.centroid}};l.default=u;l.optimizedFeatureQueryEngineAdapter=u;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(l,
d){function Z(u,F,D,y,v,r,I=1){r=v?r?4:3:r?3:2;let P=D,O=D+r,t=0,C=0,b=D=0,g=0;for(let m=0,w=y-1;m<w;m++,P+=r,O+=r){y=F[P];const h=F[P+1],z=F[P+2],q=F[O],B=F[O+1],R=F[O+2];let N=y*B-q*h;b+=N;t+=(y+q)*N;C+=(h+B)*N;v&&(N=y*R-q*z,D+=(z+R)*N,g+=N);y<u[0]&&(u[0]=y);y>u[1]&&(u[1]=y);h<u[2]&&(u[2]=h);h>u[3]&&(u[3]=h);v&&(z<u[4]&&(u[4]=z),z>u[5]&&(u[5]=z))}0<b*I&&(b*=-1);0<g*I&&(g*=-1);if(!b)return null;u=[t,C,.5*b];v&&(u[3]=D,u[4]=.5*g);return u}function Y(u,F,D,y,v){v=y?v?4:3:v?3:2;let r=F,I=F+v,P=0,O=
0,t=0,C=0;for(let w=0,h=D-1;w<h;w++,r+=v,I+=v){var b=u[r];const z=u[r+1],q=u[r+2],B=u[I],R=u[I+1],N=u[I+2];if(y){{var g=B-b;var m=R-z;const da=N-q;g=Math.sqrt(g*g+m*m+da*da)}}else g=B-b,m=R-z,g=Math.sqrt(g*g+m*m);g&&(P+=g,y?(b=[b+.5*(B-b),z+.5*(R-z),q+.5*(N-q)],O+=g*b[0],t+=g*b[1],C+=g*b[2]):(b=[b+.5*(B-b),z+.5*(R-z)],O+=g*b[0],t+=g*b[1]))}return 0<P?y?[O/P,t/P,C/P]:[O/P,t/P]:0<D?y?[u[F],u[F+1],u[F+2]]:[u[F],u[F+1]]:null}l.getCentroidOptimizedGeometry=function(u,F,D,y,v){if(d.isNone(F)||!F.lengths.length)return null;
const r="upperLeft"===(null==v?void 0:v.originPosition)?-1:1;u.lengths.length&&(u.lengths.length=0);u.coords.length&&(u.coords.length=0);v=u.coords;const I=[],P=D?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:O,coords:t}=F,C=D?y?4:3:y?3:2;let b=0;for(var g of O){const m=Z(P,t,b,g,D,y,
r);m&&I.push(m);b+=g*C}I.sort((m,w)=>{let h=r*m[2]-r*w[2];0===h&&D&&(h=m[4]-w[4]);return h});I.length&&(g=6*I[0][2],v[0]=I[0][0]/g,v[1]=I[0][1]/g,D&&(g=6*I[0][4],v[2]=0!==g?I[0][3]/g:0),v[0]<P[0]||v[0]>P[1]||v[1]<P[2]||v[1]>P[3]||D&&(v[2]<P[4]||v[2]>P[5]))&&(v.length=0);if(!v.length)if(F=F.lengths[0]?Y(t,0,O[0],D,y):null)v[0]=F[0],v[1]=F[1],D&&2<F.length&&(v[2]=F[2]);else return null;return u};l.lineCentroid=Y;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(l,d,Z,Y,u,F,D){function y(b,g){if(!g)return null;if("x"in g){var m={x:0,y:0};[m.x,m.y]=b(g.x,g.y,P);null!=g.z&&(m.z=g.z);null!=g.m&&(m.m=g.m);return m}if("xmin"in g)return m={xmin:0,ymin:0,xmax:0,ymax:0},[m.xmin,m.ymin]=b(g.xmin,g.ymin,P),[m.xmax,m.ymax]=b(g.xmax,g.ymax,P),g.hasZ&&(m.zmin=g.zmin,m.zmax=g.zmax,m.hasZ=!0),g.hasM&&(m.mmin=g.mmin,m.mmax=g.mmax,m.hasM=!0),m;if("rings"in g)return{rings:v(g.rings,b),hasM:g.hasM,hasZ:g.hasZ};if("paths"in g)return{paths:v(g.paths,b),hasM:g.hasM,hasZ:g.hasZ};
if("points"in g)return{points:r(g.points,b),hasM:g.hasM,hasZ:g.hasZ}}function v(b,g){const m=[];for(const w of b)m.push(r(w,g));return m}function r(b,g){const m=[];for(const w of b)b=g(w[0],w[1],[0,0]),m.push(b),2<w.length&&b.push(w[2]),3<w.length&&b.push(w[3]);return m}function I(){I=d._asyncToGenerator(function*(b,g){g&&(b=Array.isArray(b)?b.map(m=>Z.isSome(m.geometry)&&m.geometry.spatialReference):[b],yield Y.initializeProjection(b.map(m=>({source:m,dest:g}))))});return I.apply(this,arguments)}
const P=[0,0],O=y.bind(null,D.lngLatToXY),t=y.bind(null,D.xyToLngLat),C=new (function(){function b(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var g=b.prototype;g.push=function(){var m=d._asyncToGenerator(function*(w,h,z){if(!(w&&w.length&&h&&z)||F.equals(h,z))return w;const q={geometries:w,inSpatialReference:h,outSpatialReference:z,resolve:null};this._jobs.push(q);return new Promise(B=>{q.resolve=B;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(w,
h,z){return m.apply(this,arguments)}}();g._process=function(){this._timer=null;const m=this._jobs.shift();if(m){var {geometries:w,inSpatialReference:h,outSpatialReference:z,resolve:q}=m;D.canProject(h,z)?F.isWebMercator(z)?q(w.map(O)):q(w.map(t)):q(Y.projectMany(u.jsonAdapter,w,h,z,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return b}());l.checkProjectionSupport=function(b,g){return I.apply(this,arguments)};l.project=function(b,g,m){if(!b)return b;m||(m=g,g=b.spatialReference);
return F.isValid(g)&&F.isValid(m)&&!F.equals(g,m)?D.canProject(g,m)?F.isWebMercator(m)?O(b):t(b):Y.projectMany(u.jsonAdapter,[b],g,m,null)[0]:b};l.projectMany=function(b,g,m){return C.push(b,g,m)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/zscale".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r,I,P,O,t,C,b,g,m,w,h,z,q,B,R){function N(){return!!Ta&&t.isLoaded()}function da(aa){F.isNone(a)&&(a=Promise.all([t.load(),(new Promise((ha,X)=>l(["../chunks/geometryEngineBase"],ha,X))).then(ha=>ha.geometryEngineBase),new Promise((ha,X)=>l(["./geometryAdapters/hydrated"],ha,X))]));return a.then(([,ha,{hydratedAdapter:X}])=>{D.throwIfAborted(aa);Va=X;Ta=ha.default;Ta._enableProjection(t.pe)})}function K(aa,ha,X=null){return Array.isArray(aa)?0===aa.length?[]:H(Va,aa,aa[0].spatialReference,
ha,X):H(Va,[aa],aa.spatialReference,ha,X)[0]}function H(aa,ha,X,ka,xa=null){if(F.isNone(X)||F.isNone(ka))return ha;if(M(X,ka,xa))return ha.map(ya=>F.unwrap(e(ya,X,ka)));if(F.isNone(xa)){const ya=q.cacheKey(X,ka);void 0!==$a[ya]?xa=$a[ya]:(xa=T(X,ka,null),F.isNone(xa)&&(xa=new q),$a[ya]=xa)}if(F.isNone(Ta))throw new Ra;return Ta._project(aa,ha,X,ka,xa)}function T(aa,ha,X=null){if(F.isNone(Ta))throw new Ra;if(F.isNone(aa)||F.isNone(ha))return null;aa=Ta._getTransformation(Va,aa,ha,X,null==X?void 0:
X.spatialReference);return null!==aa?q.fromGE(aa):null}function M(aa,ha,X){return X?!1:B.equals(aa,ha)?!0:B.isValid(aa)&&B.isValid(ha)&&!!Pa(aa,ha,Cb)}function A(){A=Z._asyncToGenerator(function*(aa,ha,X,ka){if(!N())if(Array.isArray(aa))for(const {source:xa,dest:ya,geographicTransformation:Ha}of aa){if(!M(xa,ya,Ha))return da(ka)}else if(!M(aa,ha,X))return da(ka)});return A.apply(this,arguments)}function e(aa,ha,X){return aa?"x"in aa?f(aa,ha,new C,X,0):"xmin"in aa?ja(aa,ha,new P,X,0):"rings"in aa?
ca(aa,ha,new b,X,0):"paths"in aa?U(aa,ha,new g,X,0):"points"in aa?E(aa,ha,new O,X,0):null:null}function f(aa,ha,X,ka,xa){Na[0]=aa.x;Na[1]=aa.y;const ya=aa.z;Na[2]=void 0!==ya?ya:xa;if(!la(Na,ha,0,Na,ka,0,1))return null;X.x=Na[0];X.y=Na[1];X.spatialReference=ka;void 0===ya?(X.z=void 0,X.hasZ=!1):(X.z=Na[2],X.hasZ=!0);void 0===aa.m?(X.m=void 0,X.hasM=!1):(X.m=aa.m,X.hasM=!0);return X}function E(aa,ha,X,ka,xa){const {points:ya,hasZ:Ha,hasM:Ka}=aa;aa=[];const Xa=ya.length,Wa=[];for(var Ua of ya)Wa.push(Ua[0],
Ua[1],Ha?Ua[2]:xa);if(!la(Wa,ha,0,Wa,ka,0,Xa))return null;for(ha=0;ha<Xa;++ha){xa=3*ha;Ua=Wa[xa];const bb=Wa[xa+1];Ha&&Ka?aa.push([Ua,bb,Wa[xa+2],ya[ha][3]]):Ha?aa.push([Ua,bb,Wa[xa+2]]):Ka?aa.push([Ua,bb,ya[ha][2]]):aa.push([Ua,bb])}X.points=aa;X.spatialReference=ka;X.hasZ=Ha;X.hasM=Ka;return X}function U(aa,ha,X,ka,xa){const {paths:ya,hasZ:Ha,hasM:Ka}=aa;aa=[];if(!va(ya,Ha,Ka,ha,aa,ka,xa))return null;X.paths=aa;X.spatialReference=ka;X.hasZ=Ha;X.hasM=Ka;return X}function ca(aa,ha,X,ka,xa){const {rings:ya,
hasZ:Ha,hasM:Ka}=aa;aa=[];if(!va(ya,Ha,Ka,ha,aa,ka,xa))return null;X.rings=aa;X.spatialReference=ka;X.hasZ=Ha;X.hasM=Ka;return X}function ja(aa,ha,X,ka,xa){const {xmin:ya,ymin:Ha,xmax:Ka,ymax:Xa,hasZ:Wa,hasM:Ua}=aa;if(!na(ya,Ha,Wa?aa.zmin:xa,ha,Na,ka))return null;X.xmin=Na[0];X.ymin=Na[1];Wa&&(X.zmin=Na[2]);if(!na(Ka,Xa,Wa?aa.zmax:xa,ha,Na,ka))return null;X.xmax=Na[0];X.ymax=Na[1];Wa&&(X.zmax=Na[2]);Ua&&(X.mmin=aa.mmin,X.mmax=aa.mmax);X.spatialReference=ka;return X}function na(aa,ha,X,ka,xa,ya){Qa[0]=
aa;Qa[1]=ha;Qa[2]=X;return la(Qa,ka,0,xa,ya,0,1)}function ta(aa,ha,X,ka){if(F.isNone(ha)||F.isNone(ka)||2>aa.length)return!1;2===aa.length&&(Qa[0]=aa[0],Qa[1]=aa[1],Qa[2]=0,aa=Qa);return la(aa,ha,0,X,ka,0,1)}function ma(aa,ha,X){if(F.isNone(ha))return!1;ha=Oa(ha,Ab);ha=jb[ha][6];if(F.isNone(ha))return!1;ha(aa,0,Qa,0);X!==Qa&&(X[0]=Qa[0],X[1]=Qa[1],2<X.length&&(X[2]=Qa[2]));return!0}function la(aa,ha,X,ka,xa,ya,Ha=1){ha=Pa(ha,xa,Cb);if(F.isNone(ha))return!1;if(ha===Ia){if(aa===ka&&X===ya)return!0;
Ha=X+3*Ha;for(let Ka=X,Xa=ya;Ka<Ha;Ka++,Xa++)ka[Xa]=aa[Ka];return!0}Ha=X+3*Ha;for(let Ka=X,Xa=ya;Ka<Ha;Ka+=3,Xa+=3)ha(aa,Ka,ka,Xa);return!0}function va(aa,ha,X,ka,xa,ya,Ha=0){const Ka=[];for(const Xa of aa)for(const Wa of Xa)Ka.push(Wa[0],Wa[1],ha?Wa[2]:Ha);if(!la(Ka,ka,0,Ka,ya,0,Ka.length/3))return!1;ka=0;xa.length=0;for(const Xa of aa){aa=[];for(const Wa of Xa)ha&&X?aa.push([Ka[ka++],Ka[ka++],Ka[ka++],Wa[3]]):ha?aa.push([Ka[ka++],Ka[ka++],Ka[ka++]]):(X?aa.push([Ka[ka++],Ka[ka++],Wa[2]]):aa.push([Ka[ka++],
Ka[ka++]]),ka++);xa.push(aa)}return!0}function Ja(aa,ha,X,ka){aa=Math.abs(kb*aa)+Math.asin(X/(ka+ha));return aa>=Math.PI/2?Number.MAX_VALUE:X/Math.cos(aa)}function Ba(aa,ha,X){const ka=Math.sin(aa);aa=Math.cos(aa);const xa=Math.sin(ha);ha=Math.cos(ha);X[0]=-ka;X[4]=-xa*aa;X[8]=ha*aa;X[12]=0;X[1]=aa;X[5]=-xa*ka;X[9]=ha*ka;X[13]=0;X[2]=0;X[6]=ha;X[10]=xa;X[14]=0;X[3]=0;X[7]=0;X[11]=0;X[15]=1;return X}function Sa(aa,ha,X){Ba(aa,ha,X);v.transpose(X,X);return X}function Oa(aa,ha){if(ha.spatialReference===
aa)return ha.spatialReferenceId;ha.spatialReference=aa;"metersPerUnit"in ha&&(ha.metersPerUnit=y.getMetersPerUnitForSR(aa,1));return aa.wkt===m.SphericalECEFSpatialReference.wkt?ha.spatialReferenceId=1:B.isWGS84(aa)?ha.spatialReferenceId=2:B.isWebMercator(aa)?ha.spatialReferenceId=3:B.isPlateCarree(aa)?ha.spatialReferenceId=12:aa.wkt===m.WGS84ECEFSpatialReference.wkt?ha.spatialReferenceId=4:4490===aa.wkid?ha.spatialReferenceId=5:aa.wkt===m.SphericalPCPFMars.wkt?ha.spatialReferenceId=7:aa.wkt===m.SphericalPCPFMoon.wkt?
ha.spatialReferenceId=9:B.isMars(aa)?ha.spatialReferenceId=8:B.isMoon(aa)?ha.spatialReferenceId=10:ha.spatialReferenceId=0}function Ia(aa,ha,X,ka){aa!==X&&(X[ka++]=aa[ha++],X[ka++]=aa[ha++],X[ka]=aa[ha])}function c(aa,ha,X,ka){X[ka++]=sb*(aa[ha++]/h.earth.radius);X[ka++]=sb*(Math.PI/2-2*Math.atan(Math.exp(-aa[ha++]/h.earth.radius)));X[ka]=aa[ha]}function p(aa,ha,X,ka){c(aa,ha,X,ka);ba(X,ka,X,ka)}function ea(aa,ha,X,ka){c(aa,ha,X,ka);Ca(X,ka,X,ka)}function n(aa,ha,X,ka,xa){var ya=.4999999*Math.PI;
ya=u.clamp(kb*aa[ha+1],-ya,ya);ya=Math.sin(ya);X[ka++]=kb*aa[ha]*xa.radius;X[ka++]=xa.halfSemiMajorAxis*Math.log((1+ya)/(1-ya));X[ka]=aa[ha+2]}function J(aa,ha,X,ka){n(aa,ha,X,ka,h.earth)}function S(aa,ha,X,ka){X[ka]=aa[ha]*yb;X[ka+1]=aa[ha+1]*yb;X[ka+2]=aa[ha+2]}function V(aa,ha,X,ka){X[ka]=aa[ha]*tb;X[ka+1]=aa[ha+1]*tb;X[ka+2]=aa[ha+2]}function ia(aa,ha,X,ka){c(aa,ha,X,ka);S(X,ka,X,ka)}function fa(aa,ha,X,ka,xa){xa+=aa[ha+2];const ya=kb*aa[ha+1];aa=kb*aa[ha];ha=Math.cos(ya);X[ka++]=Math.cos(aa)*
ha*xa;X[ka++]=Math.sin(aa)*ha*xa;X[ka]=Math.sin(ya)*xa}function L(aa,ha,X,ka){fa(aa,ha,X,ka,h.moon.radius)}function Q(aa,ha,X,ka){fa(aa,ha,X,ka,h.mars.radius)}function ba(aa,ha,X,ka){fa(aa,ha,X,ka,h.earth.radius)}function oa(aa,ha,X,ka,xa){var ya=aa[ha];const Ha=aa[ha+1];ha=aa[ha+2];aa=Math.sqrt(ya*ya+Ha*Ha+ha*ha);ha=u.asinClamped(ha/(0===aa?1:aa));ya=Math.atan2(Ha,ya);X[ka++]=sb*ya;X[ka++]=sb*ha;X[ka]=aa-xa}function pa(aa,ha,X,ka){oa(aa,ha,X,ka,h.moon.radius)}function ua(aa,ha,X,ka){oa(aa,ha,X,ka,
h.mars.radius)}function wa(aa,ha,X,ka){oa(aa,ha,X,ka,h.earth.radius)}function za(aa,ha,X,ka){wa(aa,ha,X,ka);J(X,ka,X,ka)}function Ga(aa,ha,X,ka){wa(aa,ha,X,ka);Ca(X,ka,X,ka)}function Ca(aa,ha,X,ka){{var xa=h.earth;const Ha=kb*aa[ha];var ya=kb*aa[ha+1];aa=aa[ha+2];ha=Math.sin(ya);ya=Math.cos(ya);const Ka=xa.radius/Math.sqrt(1-xa.eccentricitySquared*ha*ha);X[ka++]=(Ka+aa)*ya*Math.cos(Ha);X[ka++]=(Ka+aa)*ya*Math.sin(Ha);X[ka++]=(Ka*(1-xa.eccentricitySquared)+aa)*ha}}function Da(aa,ha,X,ka){var xa=z.earthEllipsoidConstants,
ya=aa[ha],Ha=aa[ha+1];aa=aa[ha+2];let Ka;ha=Math.abs(aa);var Xa=ya*ya+Ha*Ha;var Wa=Math.sqrt(Xa);var Ua=Xa+aa*aa;var bb=Math.sqrt(Ua);ya=Math.atan2(Ha,ya);var lb=aa*aa/Ua;Ua=Xa/Ua;Ha=xa.a2/bb;Xa=xa.a3-xa.a4/bb;.3<Ua?(lb=ha/bb*(1+Ua*(xa.a1+Ha+lb*Xa)/bb),bb=Math.asin(lb),Ha=lb*lb,Ua=Math.sqrt(1-Ha)):(Ua=Wa/bb*(1-lb*(xa.a5-Ha-Ua*Xa)/bb),bb=Math.acos(Ua),Ha=1-Ua*Ua,lb=Math.sqrt(Ha));Ka=1-h.earth.eccentricitySquared*Ha;Ha=h.earth.radius/Math.sqrt(Ka);xa=xa.a6*Ha;Ha=Wa-Ha*Ua;Xa=ha-xa*lb;ha=Ua*Ha+lb*Xa;
Wa=Ua*Xa-lb*Ha;xa=Wa/(xa/Ka+ha);bb+=xa;0>aa&&(bb=-bb);X[ka++]=sb*ya;X[ka++]=sb*bb;X[ka]=ha+Wa*xa/2}function Ea(aa,ha,X,ka){Da(aa,ha,X,ka);ba(X,ka,X,ka)}function Fa(aa,ha,X,ka){Da(aa,ha,X,ka);J(X,ka,X,ka)}function Pa(aa,ha,X=ab()){return F.isNone(aa)||F.isNone(ha)?null:ra(aa,ha,X).projector}function ra(aa,ha,X){if(F.isNone(aa)||F.isNone(ha)||X.source.spatialReference===aa&&X.dest.spatialReference===ha)return X;const ka=Oa(aa,X.source),xa=Oa(ha,X.dest);0===ka&&0===xa?B.equals(aa,ha)?X.projector=Ia:
X.projector=null:X.projector=jb[ka][xa];return X}function ab(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ia}}let Ta=null,Va=null,a=null,$a={},Ra=function(aa){function ha(){return aa.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}Z._inheritsLoose(ha,aa);return ha}(Y);const yb=h.earth.radius*Math.PI/180,tb=180/(h.earth.radius*Math.PI),jb=
{[2]:{[5]:null,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:ba,[7]:null,[9]:null,[0]:null,[3]:J,[12]:S,[2]:Ia,[4]:Ca},[5]:{[5]:Ia,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:ba,[7]:null,[9]:null,[0]:null,[3]:null,[12]:S,[2]:null,[4]:Ca},[8]:{[5]:null,[8]:Ia,[10]:null,[11]:Ia,[6]:null,[1]:null,[7]:Q,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ia,[11]:Ia,[6]:null,[1]:null,[7]:null,[9]:L,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:c,
[6]:c,[1]:p,[7]:null,[9]:null,[0]:null,[3]:Ia,[12]:ia,[2]:c,[4]:ea},[4]:{[5]:Da,[8]:null,[10]:null,[11]:Da,[6]:Da,[1]:Ea,[7]:null,[9]:null,[0]:null,[3]:Fa,[12]:function(aa,ha,X,ka){Da(aa,ha,X,ka);S(X,ka,X,ka)},[2]:Da,[4]:Ia},[1]:{[5]:wa,[8]:null,[10]:null,[11]:wa,[6]:wa,[1]:Ia,[7]:null,[9]:null,[0]:null,[3]:za,[12]:function(aa,ha,X,ka){wa(aa,ha,X,ka);S(X,ka,X,ka)},[2]:wa,[4]:Ga},[7]:{[5]:null,[8]:ua,[10]:null,[11]:ua,[6]:null,[1]:null,[7]:Ia,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},
[9]:{[5]:null,[8]:null,[10]:pa,[11]:pa,[6]:null,[1]:null,[7]:null,[9]:Ia,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ia,[3]:null,[12]:null,[2]:null,[4]:null},[11]:{[5]:Ia,[8]:Ia,[10]:Ia,[11]:Ia,[6]:Ia,[1]:ba,[7]:Q,[9]:L,[0]:null,[3]:J,[12]:S,[2]:Ia,[4]:Ca},[6]:{[5]:null,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:ba,[7]:null,[9]:null,[0]:null,[3]:null,[12]:S,[2]:Ia,[4]:Ca},[12]:{[5]:V,[8]:null,[10]:null,[11]:V,[6]:V,[1]:function(aa,
ha,X,ka){V(aa,ha,X,ka);ba(X,ka,X,ka)},[7]:null,[9]:null,[0]:null,[3]:function(aa,ha,X,ka){V(aa,ha,X,ka);J(X,ka,X,ka)},[12]:Ia,[2]:V,[4]:function(aa,ha,X,ka){V(aa,ha,X,ka);Ca(X,ka,X,ka)}}},Ab={spatialReference:null,spatialReferenceId:0},Zb={spatialReference:null,spatialReferenceId:0},Cb=ab(),$b=ab(),kb=u.deg2rad(1),sb=u.rad2deg(1),Qa=I.create(),eb=I.create(),ob=I.create(),Na=I.create(),Db=I.create();d.canProjectToWGS84ComparableLonLat=function(aa){if(F.isNone(aa))return!1;aa=Oa(aa,Ab);return!!jb[aa][6]};
d.canProjectWithoutEngine=M;d.computeENUToSphericalPCPFLocalRotation=Ba;d.computeSphericalPCPFToENULocalRotation=Sa;d.computeTranslationToOriginAndRotation=function(aa,ha,X,ka){if(F.isNone(aa)||F.isNone(ka))return!1;var xa=Oa(aa,Ab),ya=Oa(ka,Zb);if(xa===ya&&1!==ya&&7!==ya&&9!==ya&&(0!==xa||B.equals(aa,ka)))return v.identity(X),v.translate(X,X,ha),!0;if(1===ya||7===ya||9===ya){xa=jb[xa][11];ya=jb[11][ya];if(F.isNone(xa)||F.isNone(ya))return!1;xa(ha,0,eb,0);ya(eb,0,ob,0);Ba(kb*eb[0],kb*eb[1],X);X[12]=
ob[0];X[13]=ob[1];X[14]=ob[2];return!0}if(!(3!==ya&&12!==ya||2!==xa&&1!==xa&&3!==xa)){aa=jb[xa][11];ya=jb[11][ya];if(F.isNone(aa)||F.isNone(ya))return!1;aa(ha,0,eb,0);ya(eb,0,ob,0);1===xa?Sa(kb*eb[0],kb*eb[1],X):v.identity(X);X[12]=ob[0];X[13]=ob[1];X[14]=ob[2];return!0}return!1};d.getProjectorName=function(aa,ha){switch(Pa(aa,ha,Cb)){case Ia:return"copy3";case ba:return"wgs84ToSphericalECEF";case J:return"wgs84ToWebMercator";case S:return"wgs84ToPlateCarree";case Ca:return"wgs84ToWGS84ECEF";case c:return"webMercatorToWGS84";
case p:return"webMercatorToSphericalECEF";case ea:return"webMercatorToWGS84ECEF";case ia:return"webMercatorToPlateCarree";case Da:return"wgs84ECEFToWGS84";case Ea:return"wgs84ECEFToSphericalECEF";case Fa:return"wgs84ECEFToWebMercator";case wa:return"sphericalECEFToWGS84";case za:return"sphericalECEFToWebMercator";case ua:return"sphericalMarsPCPFToMars2000";case pa:return"sphericalMoonPCPFToMoon2000";case Ga:return"sphericalECEFToWGS84ECEF";case Q:return"mars2000ToSphericalPCPF";case L:return"moon2000ToSphericalPCPF";
default:return null}};d.getTransformation=T;d.getTransformations=function(aa,ha,X=null){if(F.isNone(Ta))throw new Ra;aa=Ta._getTransformationBySuitability(Va,aa,ha,X,null==X?void 0:X.spatialReference);if(null!==aa){ha=[];for(const ka of aa)ha.push(q.fromGE(ka));return ha}return[]};d.initializeProjection=function(aa,ha,X,ka){return A.apply(this,arguments)};d.isLoaded=N;d.load=da;d.localLinearScaleFactors=function(aa,ha,X,ka){if(F.isNone(ha)||F.isNone(ka))return!1;const xa=Oa(ha,Ab);var ya=Oa(ka,Zb);
if(xa===ya&&0!==xa||B.equals(ha,ka))return X[0]=1,X[1]=1,X[2]=1,!0;if(1===xa){ha=r.length(aa);aa=ha/Math.sqrt(aa[0]*aa[0]+aa[1]*aa[1]);ha/=h.earth.radius;if(3===ya)return X[0]=aa*ha,X[1]=aa*ha,X[2]=1,!0;if(2===ya||5===ya)return ya=180/(h.earth.radius*Math.PI),X[0]=ya*aa*ha,X[1]=ya*ha,X[2]=1,!0}else if(12===xa&&(2===ya||5===ya))return X[0]=tb,X[1]=tb,X[2]=1,!0;return!1};d.lonLatToSphericalPCPF=function(aa,ha,X,ka,xa=0){ka+=xa;xa=Math.cos(X);aa[0]=Math.cos(ha)*xa*ka;aa[1]=Math.sin(ha)*xa*ka;aa[2]=Math.sin(X)*
ka};d.lonLatToWebMercatorComparable=n;d.project=K;d.projectBoundingRect=function(aa,ha,X,ka){if(null==aa)return!1;if(B.equals(ha,ka))return w.copy(X,aa),!0;Qa[0]=aa[0];Qa[1]=aa[1];Qa[2]=0;if(!la(Qa,ha,0,Qa,ka,0,1))return!1;X[0]=Qa[0];X[1]=Qa[1];Qa[0]=aa[2];Qa[1]=aa[3];Qa[2]=0;if(!la(Qa,ha,0,Qa,ka,0,1))return!1;X[2]=Qa[0];X[3]=Qa[1];return!0};d.projectBoundingSphere=function(aa,ha,X,ka){if(F.isNone(ha)||F.isNone(ka))return!1;ha=ra(ha,ka,$b);if(ha.projector===Ia)return X[0]=aa[0],X[1]=aa[1],X[2]=aa[2],
X[3]=aa[3],!0;if(F.isNone(ha.projector))return!1;const {source:xa,dest:ya}=ha;if(3===ya.spatialReferenceId){ha=jb[xa.spatialReferenceId][2];if(F.isNone(ha))return!1;ha(aa,0,eb,0);J(eb,0,X,0);X[3]=Ja(eb[1],aa[2],aa[3],h.earth.radius);return!0}if(2!==xa.spatialReferenceId&&5!==xa.spatialReferenceId||12!==ya.spatialReferenceId)ha.projector(aa,0,X,0),X[3]=aa[3]*xa.metersPerUnit/ya.metersPerUnit;else{ka=jb[1][12];let Ha=aa[3];F.isSome(jb[xa.spatialReferenceId][1])&&F.isSome(ka)&&(Ha=Ja(aa[1],aa[2],aa[3],
h.earth.radius));ha.projector(aa,0,X,0);X[3]=Ha}return!0};d.projectBuffer=la;d.projectDirection=function(aa,ha,X,ka,xa){r.copy(Na,aa);r.add(Db,aa,ha);ta(Na,X,Na,xa);ta(Db,X,Db,xa);r.subtract(ka,Db,Na);r.normalize(ka,ka)};d.projectExtent=function(aa,ha,X=ha.spatialReference,ka=0){return F.isSome(X)&&F.isSome(ja(aa,aa.spatialReference,ha,X,ka))};d.projectMany=H;d.projectMultipoint=function(aa,ha,X=ha.spatialReference,ka=0){return F.isNone(X)?!1:F.isSome(E(aa,aa.spatialReference,ha,X,ka))};d.projectPoint=
function(aa,ha,X=ha.spatialReference,ka=0){return F.isNone(X)?!1:F.isSome(f(aa,aa.spatialReference,ha,X,ka))};d.projectPointToVector=function(aa,ha,X,ka=0){Na[0]=aa.x;Na[1]=aa.y;const xa=aa.z;Na[2]=void 0!==xa?xa:ka;return la(Na,aa.spatialReference,0,ha,X,0,1)};d.projectPointToWGS84ComparableLonLat=function(aa,ha){Na[0]=aa.x;Na[1]=aa.y;const X=aa.z;Na[2]=void 0!==X?X:0;return ma(Na,aa.spatialReference,ha)};d.projectPolygon=function(aa,ha,X=ha.spatialReference,ka=0){return F.isSome(X)&&F.isSome(ca(aa,
aa.spatialReference,ha,X,ka))};d.projectPolyline=function(aa,ha,X=ha.spatialReference,ka=0){return F.isSome(X)&&F.isSome(U(aa,aa.spatialReference,ha,X,ka))};d.projectVectorToDehydratedPoint=function(aa,ha,X){return la(aa,ha,0,Na,X.spatialReference,0,1)?(X.x=Na[0],X.y=Na[1],X.z=Na[2],X):null};d.projectVectorToPoint=function(aa,ha,X){if(F.isNone(ha)||F.isNone(X))return null;const ka=new C({spatialReference:X});return la(aa,ha,0,Na,X,0,1)?(ka.x=Na[0],ka.y=Na[1],ka.z=Na[2],ka):null};d.projectVectorToVector=
ta;d.projectVectorToWGS84ComparableLonLat=function(aa,ha,X){return ma(aa,ha,X)};d.projectWithoutEngine=e;d.projectXYZToVector=na;d.sphericalPCPFtoLonLatElevation=oa;d.tryProjectWithZConversion=function(aa,ha){try{const X=K(aa,ha);if(null==X)return null;"xmin"in aa&&"xmin"in X&&(X.zmin=aa.zmin,X.zmax=aa.zmax);const ka=R.getGeometryZScaler(X.type,aa.spatialReference,ha);F.isSome(ka)&&ka(X);return X}catch(X){if(!(X instanceof Ra))throw X;return null}};d.unload=function(){a=Va=Ta=null;$a={}};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(l,d,Z,Y,u,F,D,y,v){function r(f){if(f=M[f])return f;throw Error("unknown measure");}function I(f){return T[f].baseUnit}function P(f,E=null){E=E||r(f);return T[E].baseUnit===f}function O(f,E,U){if(E===U)return f;
const ca=r(E);if(ca!==r(U))throw Error("incompatible units");f=P(E,ca)?f:f*T[ca].units[E].inBaseUnits;return P(U,ca)?f:f/T[ca].units[U].inBaseUnits}function t(f,E){return 3E3>O(f,E,"meters")?"meters":"kilometers"}function C(f,E){return 1E5>O(f,E,"meters")?"meters":"kilometers"}function b(f,E){return 1E3>O(f,E,"feet")?"feet":"miles"}function g(f,E){return 1E5>O(f,E,"feet")?"feet":"miles"}function m(f){return H.fromJSON(f.toLowerCase())||null}function w(f,E=D.earth.metersPerDegree){return h(f,!0)||
E}function h(f,E=!1){let U,ca,ja=null;null!=f&&("object"===typeof f?(U=f.wkid,ca=f.wkt):"number"===typeof f?U=f:"string"===typeof f&&(ca=f));if(U){if(y.isWKIDFromMars(U))return D.mars.metersPerDegree;if(y.isWKIDFromMoon(U))return D.moon.metersPerDegree;ja=N.values[N[U]];!ja&&E&&K.has(U)&&(ja=B)}else ca&&(/^PROJCS/i.test(ca)?ja=z(R.exec(ca),ja):/^GEOCCS/i.test(ca)&&(ja=z(da.exec(ca),ja)));return ja}function z(f,E){return f&&f[1]?parseFloat(f[1].split(",")[1]):E}function q(f){var E=null;if(null!=f)if("object"===
typeof f){var U=f.wkid;var ca=f.wkt}else"number"===typeof f?U=f:"string"===typeof f&&(ca=f);if(U)E=N.units[N[U]];else if(ca&&(f=/^PROJCS/i.test(ca)?R:/^GEOCCS/i.test(ca)?da:null)&&(ca=f.exec(ca))&&ca[1]&&(ca=ca[1],E=(E=/[\\"\\']{1}([^\\"\\']+)/.exec(ca))&&E[1],!E||-1===N.units.indexOf(E)))for(ca=parseFloat(ca.split(",")[1]),E=null,f=N.values,U=0;U<f.length;++U)if(1E-7>Math.abs(ca-f[U])){E=N.units[U];break}return Y.isSome(E)?m(E):null}const B=D.earth.radius*Math.PI/200,R=/UNIT\[([^\]]+)\]\]$/i,N=v,
da=/UNIT\[([^\]]+)\]/i,K=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),H=Z.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};v={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(f=>f*f)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const T={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:v},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},M=function(){const f={};for(const E in T)for(const U in T[E].units)f[U]=
E;return f}(),A={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",
esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};d=Z.strict()(A);v=Z.strict()(e);Z=Z.strict()({...A,...e});l.areaUnitsJSONMap=d;l.baseUnitForMeasure=I;l.baseUnitForUnit=function(f){return I(r(f))};l.convertUnit=O;l.getDefaultUnitSystem=function(f){if(!f)return null;switch(q(f)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};l.getMetersPerUnit=h;l.getMetersPerUnitForSR=w;l.getMetersPerVerticalUnitForSR=function(f){if(f&&"object"===typeof f&&!y.isEarth(f))return 1;f=w(f);return 1E5<f?1:f};l.getUnitString=q;l.getVerticalUnitStringForSR=function(f){const E=w(f),U=f instanceof F?u.getReferenceEllipsoid(f).metersPerDegree:1E5;return E>=U?"meters":q(f)};l.inchesPerMeter=39.37;l.isBaseUnit=P;l.isMeasurementSystem=function(f){return"imperial"===
f||"metric"===f};l.lengthToDegrees=function(f,E,U){return O(f,E,"meters")/(U*Math.PI/180)};l.lengthUnitsJSONMap=v;l.measureForUnit=r;l.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");l.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");l.preferredImperialAreaUnit=function(f,E){return 1E6>O(f,E,"square-feet")?"square-feet":
"square-miles"};l.preferredImperialLengthUnit=b;l.preferredImperialVerticalLengthUnit=g;l.preferredLengthUnit=function(f,E,U){switch(U){case "metric":return t(f,E);case "imperial":return b(f,E);default:return U}};l.preferredMetricAreaUnit=function(f,E){return 3E6>O(f,E,"square-meters")?"square-meters":"square-kilometers"};l.preferredMetricLengthUnit=t;l.preferredMetricVerticalLengthUnit=C;l.preferredVerticalLengthUnit=function(f,E,U){switch(U){case "metric":return C(f,E);case "imperial":return g(f,
E);default:return U}};l.unitFromRESTJSON=m;l.unitToRESTJSON=function(f){return H.toJSON(f)||null};l.unitsJSONMap=Z;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(l,d,Z,Y){function u(r){return new d({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${r.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const F=u(Z.earth),D=u(Z.mars),y=u(Z.moon),v=new d({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${Z.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});l.SphericalECEFSpatialReference=F;l.SphericalPCPFMars=
D;l.SphericalPCPFMoon=y;l.WGS84ECEFSpatialReference=v;l.createSphericalPCPF=u;l.getReferenceEllipsoid=function(r){return r&&(Y.isMars(r)||r===D)?Z.mars:r&&(Y.isMoon(r)||r===y)?Z.moon:Z.earth};l.getReferenceEllipsoidFromWKID=function(r){return Y.isWKIDFromMars(r)?Z.mars:Y.isWKIDFromMoon(r)?Z.moon:Z.earth};l.getSphericalPCPF=function(r){return r&&(Y.isMars(r)||r===D)?D:r&&(Y.isMoon(r)||r===y)?y:F};l.getSphericalPCPFForEllipsoid=function(r){return r&&r===Z.mars?D:r&&r===Z.moon?y:F};Object.defineProperty(l,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,d,Z){function Y(c,p){c[0]=p[0];c[1]=p[1];c[2]=p[2];c[3]=p[3];c[4]=p[4];c[5]=p[5];c[6]=p[6];c[7]=p[7];c[8]=p[8];c[9]=p[9];c[10]=p[10];c[11]=p[11];c[12]=p[12];c[13]=p[13];c[14]=p[14];c[15]=p[15];return c}function u(c,p,ea,n,J,S,V,ia,fa,L,Q,ba,oa,pa,ua,wa,za){c[0]=p;c[1]=ea;c[2]=n;c[3]=J;c[4]=S;c[5]=V;c[6]=ia;c[7]=fa;c[8]=L;c[9]=Q;c[10]=ba;c[11]=oa;c[12]=pa;c[13]=ua;c[14]=wa;c[15]=za;return c}
function F(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function D(c,p){if(c===p){const ea=p[1],n=p[2],J=p[3],S=p[6],V=p[7],ia=p[11];c[1]=p[4];c[2]=p[8];c[3]=p[12];c[4]=ea;c[6]=p[9];c[7]=p[13];c[8]=n;c[9]=S;c[11]=p[14];c[12]=J;c[13]=V;c[14]=ia}else c[0]=p[0],c[1]=p[4],c[2]=p[8],c[3]=p[12],c[4]=p[1],c[5]=p[5],c[6]=p[9],c[7]=p[13],c[8]=p[2],c[9]=p[6],c[10]=p[10],c[11]=p[14],c[12]=p[3],c[13]=p[7],c[14]=p[11],c[15]=p[15];
return c}function y(c,p){const ea=p[0],n=p[1],J=p[2],S=p[3],V=p[4],ia=p[5],fa=p[6],L=p[7],Q=p[8],ba=p[9],oa=p[10],pa=p[11],ua=p[12],wa=p[13],za=p[14];p=p[15];const Ga=ea*ia-n*V,Ca=ea*fa-J*V,Da=ea*L-S*V,Ea=n*fa-J*ia,Fa=n*L-S*ia,Pa=J*L-S*fa,ra=Q*wa-ba*ua,ab=Q*za-oa*ua,Ta=Q*p-pa*ua,Va=ba*za-oa*wa,a=ba*p-pa*wa,$a=oa*p-pa*za;let Ra=Ga*$a-Ca*a+Da*Va+Ea*Ta-Fa*ab+Pa*ra;if(!Ra)return null;Ra=1/Ra;c[0]=(ia*$a-fa*a+L*Va)*Ra;c[1]=(J*a-n*$a-S*Va)*Ra;c[2]=(wa*Pa-za*Fa+p*Ea)*Ra;c[3]=(oa*Fa-ba*Pa-pa*Ea)*Ra;c[4]=
(fa*Ta-V*$a-L*ab)*Ra;c[5]=(ea*$a-J*Ta+S*ab)*Ra;c[6]=(za*Da-ua*Pa-p*Ca)*Ra;c[7]=(Q*Pa-oa*Da+pa*Ca)*Ra;c[8]=(V*a-ia*Ta+L*ra)*Ra;c[9]=(n*Ta-ea*a-S*ra)*Ra;c[10]=(ua*Fa-wa*Da+p*Ga)*Ra;c[11]=(ba*Da-Q*Fa-pa*Ga)*Ra;c[12]=(ia*ab-V*Va-fa*ra)*Ra;c[13]=(ea*Va-n*ab+J*ra)*Ra;c[14]=(wa*Ca-ua*Ea-za*Ga)*Ra;c[15]=(Q*Ea-ba*Ca+oa*Ga)*Ra;return c}function v(c,p){const ea=p[0],n=p[1],J=p[2],S=p[3],V=p[4],ia=p[5],fa=p[6],L=p[7],Q=p[8],ba=p[9],oa=p[10],pa=p[11],ua=p[12],wa=p[13],za=p[14];p=p[15];c[0]=ia*(oa*p-pa*za)-ba*
(fa*p-L*za)+wa*(fa*pa-L*oa);c[1]=-(n*(oa*p-pa*za)-ba*(J*p-S*za)+wa*(J*pa-S*oa));c[2]=n*(fa*p-L*za)-ia*(J*p-S*za)+wa*(J*L-S*fa);c[3]=-(n*(fa*pa-L*oa)-ia*(J*pa-S*oa)+ba*(J*L-S*fa));c[4]=-(V*(oa*p-pa*za)-Q*(fa*p-L*za)+ua*(fa*pa-L*oa));c[5]=ea*(oa*p-pa*za)-Q*(J*p-S*za)+ua*(J*pa-S*oa);c[6]=-(ea*(fa*p-L*za)-V*(J*p-S*za)+ua*(J*L-S*fa));c[7]=ea*(fa*pa-L*oa)-V*(J*pa-S*oa)+Q*(J*L-S*fa);c[8]=V*(ba*p-pa*wa)-Q*(ia*p-L*wa)+ua*(ia*pa-L*ba);c[9]=-(ea*(ba*p-pa*wa)-Q*(n*p-S*wa)+ua*(n*pa-S*ba));c[10]=ea*(ia*p-L*wa)-
V*(n*p-S*wa)+ua*(n*L-S*ia);c[11]=-(ea*(ia*pa-L*ba)-V*(n*pa-S*ba)+Q*(n*L-S*ia));c[12]=-(V*(ba*za-oa*wa)-Q*(ia*za-fa*wa)+ua*(ia*oa-fa*ba));c[13]=ea*(ba*za-oa*wa)-Q*(n*za-J*wa)+ua*(n*oa-J*ba);c[14]=-(ea*(ia*za-fa*wa)-V*(n*za-J*wa)+ua*(n*fa-J*ia));c[15]=ea*(ia*oa-fa*ba)-V*(n*oa-J*ba)+Q*(n*fa-J*ia);return c}function r(c){const p=c[0],ea=c[1],n=c[2],J=c[3],S=c[4],V=c[5],ia=c[6],fa=c[7],L=c[8],Q=c[9],ba=c[10],oa=c[11],pa=c[12],ua=c[13],wa=c[14];c=c[15];return(p*V-ea*S)*(ba*c-oa*wa)-(p*ia-n*S)*(Q*c-oa*ua)+
(p*fa-J*S)*(Q*wa-ba*ua)+(ea*ia-n*V)*(L*c-oa*pa)-(ea*fa-J*V)*(L*wa-ba*pa)+(n*fa-J*ia)*(L*ua-Q*pa)}function I(c,p,ea){const n=p[0],J=p[1],S=p[2],V=p[3],ia=p[4],fa=p[5],L=p[6],Q=p[7],ba=p[8],oa=p[9],pa=p[10],ua=p[11],wa=p[12],za=p[13],Ga=p[14];p=p[15];let Ca=ea[0],Da=ea[1],Ea=ea[2],Fa=ea[3];c[0]=Ca*n+Da*ia+Ea*ba+Fa*wa;c[1]=Ca*J+Da*fa+Ea*oa+Fa*za;c[2]=Ca*S+Da*L+Ea*pa+Fa*Ga;c[3]=Ca*V+Da*Q+Ea*ua+Fa*p;Ca=ea[4];Da=ea[5];Ea=ea[6];Fa=ea[7];c[4]=Ca*n+Da*ia+Ea*ba+Fa*wa;c[5]=Ca*J+Da*fa+Ea*oa+Fa*za;c[6]=Ca*S+Da*
L+Ea*pa+Fa*Ga;c[7]=Ca*V+Da*Q+Ea*ua+Fa*p;Ca=ea[8];Da=ea[9];Ea=ea[10];Fa=ea[11];c[8]=Ca*n+Da*ia+Ea*ba+Fa*wa;c[9]=Ca*J+Da*fa+Ea*oa+Fa*za;c[10]=Ca*S+Da*L+Ea*pa+Fa*Ga;c[11]=Ca*V+Da*Q+Ea*ua+Fa*p;Ca=ea[12];Da=ea[13];Ea=ea[14];Fa=ea[15];c[12]=Ca*n+Da*ia+Ea*ba+Fa*wa;c[13]=Ca*J+Da*fa+Ea*oa+Fa*za;c[14]=Ca*S+Da*L+Ea*pa+Fa*Ga;c[15]=Ca*V+Da*Q+Ea*ua+Fa*p;return c}function P(c,p,ea){const n=ea[0],J=ea[1];ea=ea[2];let S=void 0,V=void 0,ia=void 0,fa=void 0,L=void 0,Q=void 0,ba=void 0,oa=void 0,pa=void 0,ua=void 0,
wa=void 0,za=void 0;p===c?(c[12]=p[0]*n+p[4]*J+p[8]*ea+p[12],c[13]=p[1]*n+p[5]*J+p[9]*ea+p[13],c[14]=p[2]*n+p[6]*J+p[10]*ea+p[14],c[15]=p[3]*n+p[7]*J+p[11]*ea+p[15]):(S=p[0],V=p[1],ia=p[2],fa=p[3],L=p[4],Q=p[5],ba=p[6],oa=p[7],pa=p[8],ua=p[9],wa=p[10],za=p[11],c[0]=S,c[1]=V,c[2]=ia,c[3]=fa,c[4]=L,c[5]=Q,c[6]=ba,c[7]=oa,c[8]=pa,c[9]=ua,c[10]=wa,c[11]=za,c[12]=S*n+L*J+pa*ea+p[12],c[13]=V*n+Q*J+ua*ea+p[13],c[14]=ia*n+ba*J+wa*ea+p[14],c[15]=fa*n+oa*J+za*ea+p[15]);return c}function O(c,p,ea){const n=ea[0],
J=ea[1];ea=ea[2];c[0]=p[0]*n;c[1]=p[1]*n;c[2]=p[2]*n;c[3]=p[3]*n;c[4]=p[4]*J;c[5]=p[5]*J;c[6]=p[6]*J;c[7]=p[7]*J;c[8]=p[8]*ea;c[9]=p[9]*ea;c[10]=p[10]*ea;c[11]=p[11]*ea;c[12]=p[12];c[13]=p[13];c[14]=p[14];c[15]=p[15];return c}function t(c,p,ea,n){let J=n[0],S=n[1];n=n[2];let V=Math.sqrt(J*J+S*S+n*n);var ia=void 0,fa=void 0;let L=void 0,Q=void 0,ba=void 0,oa=void 0,pa=void 0,ua=void 0,wa=void 0,za=void 0,Ga=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Pa=void 0,ra=void 0,ab=void 0,Ta=void 0,Va=void 0,
a=void 0,$a=void 0;fa=ia=void 0;if(V<Z.EPSILON)return null;V=1/V;J*=V;S*=V;n*=V;ia=Math.sin(ea);fa=Math.cos(ea);L=1-fa;Q=p[0];ba=p[1];oa=p[2];pa=p[3];ua=p[4];wa=p[5];za=p[6];Ga=p[7];Ca=p[8];Da=p[9];Ea=p[10];Fa=p[11];Pa=J*J*L+fa;ra=S*J*L+n*ia;ab=n*J*L-S*ia;Ta=J*S*L-n*ia;Va=S*S*L+fa;a=n*S*L+J*ia;$a=J*n*L+S*ia;ia=S*n*L-J*ia;fa=n*n*L+fa;c[0]=Q*Pa+ua*ra+Ca*ab;c[1]=ba*Pa+wa*ra+Da*ab;c[2]=oa*Pa+za*ra+Ea*ab;c[3]=pa*Pa+Ga*ra+Fa*ab;c[4]=Q*Ta+ua*Va+Ca*a;c[5]=ba*Ta+wa*Va+Da*a;c[6]=oa*Ta+za*Va+Ea*a;c[7]=pa*Ta+
Ga*Va+Fa*a;c[8]=Q*$a+ua*ia+Ca*fa;c[9]=ba*$a+wa*ia+Da*fa;c[10]=oa*$a+za*ia+Ea*fa;c[11]=pa*$a+Ga*ia+Fa*fa;p!==c&&(c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);return c}function C(c,p,ea){const n=Math.sin(ea);ea=Math.cos(ea);const J=p[4],S=p[5],V=p[6],ia=p[7],fa=p[8],L=p[9],Q=p[10],ba=p[11];p!==c&&(c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[4]=J*ea+fa*n;c[5]=S*ea+L*n;c[6]=V*ea+Q*n;c[7]=ia*ea+ba*n;c[8]=fa*ea-J*n;c[9]=L*ea-S*n;c[10]=Q*ea-V*n;c[11]=ba*
ea-ia*n;return c}function b(c,p,ea){const n=Math.sin(ea);ea=Math.cos(ea);const J=p[0],S=p[1],V=p[2],ia=p[3],fa=p[8],L=p[9],Q=p[10],ba=p[11];p!==c&&(c[4]=p[4],c[5]=p[5],c[6]=p[6],c[7]=p[7],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[0]=J*ea-fa*n;c[1]=S*ea-L*n;c[2]=V*ea-Q*n;c[3]=ia*ea-ba*n;c[8]=J*n+fa*ea;c[9]=S*n+L*ea;c[10]=V*n+Q*ea;c[11]=ia*n+ba*ea;return c}function g(c,p,ea){const n=Math.sin(ea);ea=Math.cos(ea);const J=p[0],S=p[1],V=p[2],ia=p[3],fa=p[4],L=p[5],Q=p[6],ba=p[7];p!==c&&(c[8]=p[8],
c[9]=p[9],c[10]=p[10],c[11]=p[11],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[0]=J*ea+fa*n;c[1]=S*ea+L*n;c[2]=V*ea+Q*n;c[3]=ia*ea+ba*n;c[4]=fa*ea-J*n;c[5]=L*ea-S*n;c[6]=Q*ea-V*n;c[7]=ba*ea-ia*n;return c}function m(c,p){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=p[0];c[13]=p[1];c[14]=p[2];c[15]=1;return c}function w(c,p){c[0]=p[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=p[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=p[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function h(c,p,ea){let n=ea[0],J=ea[1];ea=ea[2];let S=Math.sqrt(n*n+J*J+ea*ea),V=void 0,ia=void 0,fa=void 0;if(S<Z.EPSILON)return null;S=1/S;n*=S;J*=S;ea*=S;V=Math.sin(p);ia=Math.cos(p);fa=1-ia;c[0]=n*n*fa+ia;c[1]=J*n*fa+ea*V;c[2]=ea*n*fa-J*V;c[3]=0;c[4]=n*J*fa-ea*V;c[5]=J*J*fa+ia;c[6]=ea*J*fa+n*V;c[7]=0;c[8]=n*ea*fa+J*V;c[9]=J*ea*fa-n*V;c[10]=ea*ea*fa+ia;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function z(c,p){const ea=Math.sin(p);p=Math.cos(p);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=
0;c[5]=p;c[6]=ea;c[7]=0;c[8]=0;c[9]=-ea;c[10]=p;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function q(c,p){const ea=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=0;c[2]=-ea;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=ea;c[9]=0;c[10]=p;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function B(c,p){const ea=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=ea;c[2]=0;c[3]=0;c[4]=-ea;c[5]=p;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function R(c,p,ea){var n=p[0],J=p[1],S=p[2],
V=p[3],ia=n+n,fa=J+J;const L=S+S;p=n*ia;const Q=n*fa;n*=L;const ba=J*fa;J*=L;S*=L;ia*=V;fa*=V;V*=L;c[0]=1-(ba+S);c[1]=Q+V;c[2]=n-fa;c[3]=0;c[4]=Q-V;c[5]=1-(p+S);c[6]=J+ia;c[7]=0;c[8]=n+fa;c[9]=J-ia;c[10]=1-(p+ba);c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function N(c,p){const ea=Ia,n=-p[0],J=-p[1],S=-p[2],V=p[3],ia=p[4],fa=p[5],L=p[6],Q=p[7],ba=n*n+J*J+S*S+V*V;0<ba?(ea[0]=2*(ia*V+Q*n+fa*S-L*J)/ba,ea[1]=2*(fa*V+Q*J+L*n-ia*S)/ba,ea[2]=2*(L*V+Q*S+ia*J-fa*n)/ba):(ea[0]=2*(ia*V+Q*n+
fa*S-L*J),ea[1]=2*(fa*V+Q*J+L*n-ia*S),ea[2]=2*(L*V+Q*S+ia*J-fa*n));R(c,p,ea);return c}function da(c,p){c[0]=p[12];c[1]=p[13];c[2]=p[14];return c}function K(c,p){const ea=p[0],n=p[1],J=p[2],S=p[4],V=p[5],ia=p[6],fa=p[8],L=p[9];p=p[10];c[0]=Math.sqrt(ea*ea+n*n+J*J);c[1]=Math.sqrt(S*S+V*V+ia*ia);c[2]=Math.sqrt(fa*fa+L*L+p*p);return c}function H(c,p){const ea=p[0]+p[5]+p[10];let n=0;0<ea?(n=2*Math.sqrt(ea+1),c[3]=.25*n,c[0]=(p[6]-p[9])/n,c[1]=(p[8]-p[2])/n,c[2]=(p[1]-p[4])/n):p[0]>p[5]&&p[0]>p[10]?(n=
2*Math.sqrt(1+p[0]-p[5]-p[10]),c[3]=(p[6]-p[9])/n,c[0]=.25*n,c[1]=(p[1]+p[4])/n,c[2]=(p[8]+p[2])/n):p[5]>p[10]?(n=2*Math.sqrt(1+p[5]-p[0]-p[10]),c[3]=(p[8]-p[2])/n,c[0]=(p[1]+p[4])/n,c[1]=.25*n,c[2]=(p[6]+p[9])/n):(n=2*Math.sqrt(1+p[10]-p[0]-p[5]),c[3]=(p[1]-p[4])/n,c[0]=(p[8]+p[2])/n,c[1]=(p[6]+p[9])/n,c[2]=.25*n);return c}function T(c,p,ea,n){var J=p[0],S=p[1],V=p[2],ia=p[3],fa=J+J,L=S+S,Q=V+V;p=J*fa;const ba=J*L;J*=Q;const oa=S*L;S*=Q;V*=Q;fa*=ia;L*=ia;ia*=Q;Q=n[0];const pa=n[1];n=n[2];c[0]=(1-
(oa+V))*Q;c[1]=(ba+ia)*Q;c[2]=(J-L)*Q;c[3]=0;c[4]=(ba-ia)*pa;c[5]=(1-(p+V))*pa;c[6]=(S+fa)*pa;c[7]=0;c[8]=(J+L)*n;c[9]=(S-fa)*n;c[10]=(1-(p+oa))*n;c[11]=0;c[12]=ea[0];c[13]=ea[1];c[14]=ea[2];c[15]=1;return c}function M(c,p,ea,n,J){var S=p[0],V=p[1],ia=p[2],fa=p[3],L=S+S,Q=V+V,ba=ia+ia;p=S*L;var oa=S*Q,pa=S*ba;S=V*Q;V*=ba;var ua=ia*ba;ia=fa*L;Q*=fa;const wa=fa*ba;var za=n[0],Ga=n[1];ba=n[2];n=J[0];fa=J[1];J=J[2];L=(1-(S+ua))*za;const Ca=(oa+wa)*za;za*=pa-Q;oa=(oa-wa)*Ga;ua=(1-(p+ua))*Ga;Ga*=V+ia;pa=
(pa+Q)*ba;V=(V-ia)*ba;p=(1-(p+S))*ba;c[0]=L;c[1]=Ca;c[2]=za;c[3]=0;c[4]=oa;c[5]=ua;c[6]=Ga;c[7]=0;c[8]=pa;c[9]=V;c[10]=p;c[11]=0;c[12]=ea[0]+n-(L*n+oa*fa+pa*J);c[13]=ea[1]+fa-(Ca*n+ua*fa+V*J);c[14]=ea[2]+J-(za*n+Ga*fa+p*J);c[15]=1;return c}function A(c,p){var ea=p[0],n=p[1],J=p[2];p=p[3];var S=ea+ea,V=n+n;const ia=J+J;ea*=S;const fa=n*S;n*=V;const L=J*S,Q=J*V;J*=ia;S*=p;V*=p;p*=ia;c[0]=1-n-J;c[1]=fa+p;c[2]=L-V;c[3]=0;c[4]=fa-p;c[5]=1-ea-J;c[6]=Q+S;c[7]=0;c[8]=L+V;c[9]=Q-S;c[10]=1-ea-n;c[11]=0;c[12]=
0;c[13]=0;c[14]=0;c[15]=1;return c}function e(c,p,ea,n,J,S,V){const ia=1/(ea-p),fa=1/(J-n),L=1/(S-V);c[0]=2*S*ia;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*S*fa;c[6]=0;c[7]=0;c[8]=(ea+p)*ia;c[9]=(J+n)*fa;c[10]=(V+S)*L;c[11]=-1;c[12]=0;c[13]=0;c[14]=V*S*2*L;c[15]=0;return c}function f(c,p,ea,n,J){p=1/Math.tan(p/2);let S=void 0;c[0]=p/ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=p;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=J&&Infinity!==J?(S=1/(n-J),c[10]=(J+n)*S,c[14]=2*J*n*S):(c[10]=-1,c[14]=
-2*n);return c}function E(c,p,ea,n){const J=Math.tan(p.upDegrees*Math.PI/180),S=Math.tan(p.downDegrees*Math.PI/180),V=Math.tan(p.leftDegrees*Math.PI/180);p=Math.tan(p.rightDegrees*Math.PI/180);const ia=2/(V+p),fa=2/(J+S);c[0]=ia;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=fa;c[6]=0;c[7]=0;c[8]=-((V-p)*ia*.5);c[9]=(J-S)*fa*.5;c[10]=n/(ea-n);c[11]=-1;c[12]=0;c[13]=0;c[14]=n*ea/(ea-n);c[15]=0;return c}function U(c,p,ea,n,J,S,V){const ia=1/(p-ea),fa=1/(n-J),L=1/(S-V);c[0]=-2*ia;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
-2*fa;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*L;c[11]=0;c[12]=(p+ea)*ia;c[13]=(J+n)*fa;c[14]=(V+S)*L;c[15]=1;return c}function ca(c,p,ea,n){let J=void 0,S=void 0;var V=void 0,ia=void 0;let fa=void 0,L=void 0;var Q=void 0,ba=void 0;let oa=void 0,pa=void 0;const ua=p[0],wa=p[1];p=p[2];V=n[0];ia=n[1];n=n[2];Q=ea[0];ba=ea[1];ea=ea[2];if(Math.abs(ua-Q)<Z.EPSILON&&Math.abs(wa-ba)<Z.EPSILON&&Math.abs(p-ea)<Z.EPSILON)return F(c);Q=ua-Q;ba=wa-ba;oa=p-ea;pa=1/Math.sqrt(Q*Q+ba*ba+oa*oa);Q*=pa;ba*=pa;oa*=pa;J=ia*
oa-n*ba;S=n*Q-V*oa;V=V*ba-ia*Q;(pa=Math.sqrt(J*J+S*S+V*V))?(pa=1/pa,J*=pa,S*=pa,V*=pa):V=S=J=0;ia=ba*V-oa*S;fa=oa*J-Q*V;L=Q*S-ba*J;(pa=Math.sqrt(ia*ia+fa*fa+L*L))?(pa=1/pa,ia*=pa,fa*=pa,L*=pa):L=fa=ia=0;c[0]=J;c[1]=ia;c[2]=Q;c[3]=0;c[4]=S;c[5]=fa;c[6]=ba;c[7]=0;c[8]=V;c[9]=L;c[10]=oa;c[11]=0;c[12]=-(J*ua+S*wa+V*p);c[13]=-(ia*ua+fa*wa+L*p);c[14]=-(Q*ua+ba*wa+oa*p);c[15]=1;return c}function ja(c,p,ea,n){const J=p[0],S=p[1];p=p[2];var V=n[0];const ia=n[1];var fa=n[2];n=J-ea[0];let L=S-ea[1];ea=p-ea[2];
let Q=n*n+L*L+ea*ea;0<Q&&(Q=1/Math.sqrt(Q),n*=Q,L*=Q,ea*=Q);let ba=ia*ea-fa*L;fa=fa*n-V*ea;V=V*L-ia*n;Q=ba*ba+fa*fa+V*V;0<Q&&(Q=1/Math.sqrt(Q),ba*=Q,fa*=Q,V*=Q);c[0]=ba;c[1]=fa;c[2]=V;c[3]=0;c[4]=L*V-ea*fa;c[5]=ea*ba-n*V;c[6]=n*fa-L*ba;c[7]=0;c[8]=n;c[9]=L;c[10]=ea;c[11]=0;c[12]=J;c[13]=S;c[14]=p;c[15]=1;return c}function na(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+
")"}function ta(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function ma(c,p,ea){c[0]=p[0]+ea[0];c[1]=p[1]+ea[1];c[2]=p[2]+ea[2];c[3]=p[3]+ea[3];c[4]=p[4]+ea[4];c[5]=p[5]+ea[5];c[6]=p[6]+ea[6];c[7]=p[7]+ea[7];c[8]=p[8]+ea[8];c[9]=p[9]+ea[9];c[10]=p[10]+ea[10];c[11]=p[11]+ea[11];c[12]=p[12]+ea[12];c[13]=p[13]+ea[13];c[14]=p[14]+ea[14];c[15]=p[15]+ea[15];return c}function la(c,p,ea){c[0]=p[0]-
ea[0];c[1]=p[1]-ea[1];c[2]=p[2]-ea[2];c[3]=p[3]-ea[3];c[4]=p[4]-ea[4];c[5]=p[5]-ea[5];c[6]=p[6]-ea[6];c[7]=p[7]-ea[7];c[8]=p[8]-ea[8];c[9]=p[9]-ea[9];c[10]=p[10]-ea[10];c[11]=p[11]-ea[11];c[12]=p[12]-ea[12];c[13]=p[13]-ea[13];c[14]=p[14]-ea[14];c[15]=p[15]-ea[15];return c}function va(c,p,ea){c[0]=p[0]*ea;c[1]=p[1]*ea;c[2]=p[2]*ea;c[3]=p[3]*ea;c[4]=p[4]*ea;c[5]=p[5]*ea;c[6]=p[6]*ea;c[7]=p[7]*ea;c[8]=p[8]*ea;c[9]=p[9]*ea;c[10]=p[10]*ea;c[11]=p[11]*ea;c[12]=p[12]*ea;c[13]=p[13]*ea;c[14]=p[14]*ea;c[15]=
p[15]*ea;return c}function Ja(c,p,ea,n){c[0]=p[0]+ea[0]*n;c[1]=p[1]+ea[1]*n;c[2]=p[2]+ea[2]*n;c[3]=p[3]+ea[3]*n;c[4]=p[4]+ea[4]*n;c[5]=p[5]+ea[5]*n;c[6]=p[6]+ea[6]*n;c[7]=p[7]+ea[7]*n;c[8]=p[8]+ea[8]*n;c[9]=p[9]+ea[9]*n;c[10]=p[10]+ea[10]*n;c[11]=p[11]+ea[11]*n;c[12]=p[12]+ea[12]*n;c[13]=p[13]+ea[13]*n;c[14]=p[14]+ea[14]*n;c[15]=p[15]+ea[15]*n;return c}function Ba(c,p){return c[0]===p[0]&&c[1]===p[1]&&c[2]===p[2]&&c[3]===p[3]&&c[4]===p[4]&&c[5]===p[5]&&c[6]===p[6]&&c[7]===p[7]&&c[8]===p[8]&&c[9]===
p[9]&&c[10]===p[10]&&c[11]===p[11]&&c[12]===p[12]&&c[13]===p[13]&&c[14]===p[14]&&c[15]===p[15]}function Sa(c,p){if(c===p)return!0;const ea=c[0],n=c[1],J=c[2],S=c[3],V=c[4],ia=c[5],fa=c[6],L=c[7],Q=c[8],ba=c[9],oa=c[10],pa=c[11],ua=c[12],wa=c[13],za=c[14];c=c[15];const Ga=p[0],Ca=p[1],Da=p[2],Ea=p[3],Fa=p[4],Pa=p[5],ra=p[6],ab=p[7],Ta=p[8],Va=p[9],a=p[10],$a=p[11],Ra=p[12],yb=p[13],tb=p[14];p=p[15];return Math.abs(ea-Ga)<=Z.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Ga))&&Math.abs(n-Ca)<=Z.EPSILON*Math.max(1,
Math.abs(n),Math.abs(Ca))&&Math.abs(J-Da)<=Z.EPSILON*Math.max(1,Math.abs(J),Math.abs(Da))&&Math.abs(S-Ea)<=Z.EPSILON*Math.max(1,Math.abs(S),Math.abs(Ea))&&Math.abs(V-Fa)<=Z.EPSILON*Math.max(1,Math.abs(V),Math.abs(Fa))&&Math.abs(ia-Pa)<=Z.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Pa))&&Math.abs(fa-ra)<=Z.EPSILON*Math.max(1,Math.abs(fa),Math.abs(ra))&&Math.abs(L-ab)<=Z.EPSILON*Math.max(1,Math.abs(L),Math.abs(ab))&&Math.abs(Q-Ta)<=Z.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Ta))&&Math.abs(ba-Va)<=Z.EPSILON*
Math.max(1,Math.abs(ba),Math.abs(Va))&&Math.abs(oa-a)<=Z.EPSILON*Math.max(1,Math.abs(oa),Math.abs(a))&&Math.abs(pa-$a)<=Z.EPSILON*Math.max(1,Math.abs(pa),Math.abs($a))&&Math.abs(ua-Ra)<=Z.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Ra))&&Math.abs(wa-yb)<=Z.EPSILON*Math.max(1,Math.abs(wa),Math.abs(yb))&&Math.abs(za-tb)<=Z.EPSILON*Math.max(1,Math.abs(za),Math.abs(tb))&&Math.abs(c-p)<=Z.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))}function Oa(c){const p=Z.EPSILON,ea=c[0],n=c[1],J=c[2],S=c[4],V=c[5],ia=c[6],
fa=c[8],L=c[9];c=c[10];return Math.abs(1-(ea*ea+S*S+fa*fa))<=p&&Math.abs(1-(n*n+V*V+L*L))<=p&&Math.abs(1-(J*J+ia*ia+c*c))<=p}const Ia=d.create();d=Object.freeze({__proto__:null,copy:Y,set:u,identity:F,transpose:D,invert:y,adjoint:v,determinant:r,multiply:I,translate:P,scale:O,rotate:t,rotateX:C,rotateY:b,rotateZ:g,fromTranslation:m,fromScaling:w,fromRotation:h,fromXRotation:z,fromYRotation:q,fromZRotation:B,fromRotationTranslation:R,fromQuat2:N,getTranslation:da,getScaling:K,getRotation:H,fromRotationTranslationScale:T,
fromRotationTranslationScaleOrigin:M,fromQuat:A,frustum:e,perspective:f,perspectiveFromFieldOfView:E,ortho:U,lookAt:ca,targetTo:ja,str:na,frob:ta,add:ma,subtract:la,multiplyScalar:va,multiplyScalarAndAdd:Ja,exactEquals:Ba,equals:Sa,isOrthoNormal:Oa,mul:I,sub:la});l.add=ma;l.adjoint=v;l.copy=Y;l.determinant=r;l.equals=Sa;l.exactEquals=Ba;l.frob=ta;l.fromQuat=A;l.fromQuat2=N;l.fromRotation=h;l.fromRotationTranslation=R;l.fromRotationTranslationScale=T;l.fromRotationTranslationScaleOrigin=M;l.fromScaling=
w;l.fromTranslation=m;l.fromXRotation=z;l.fromYRotation=q;l.fromZRotation=B;l.frustum=e;l.getRotation=H;l.getScaling=K;l.getTranslation=da;l.identity=F;l.invert=y;l.isOrthoNormal=Oa;l.lookAt=ca;l.mat4=d;l.mul=I;l.multiply=I;l.multiplyScalar=va;l.multiplyScalarAndAdd=Ja;l.ortho=U;l.perspective=f;l.perspectiveFromFieldOfView=E;l.rotate=t;l.rotateX=C;l.rotateY=b;l.rotateZ=g;l.scale=O;l.set=u;l.str=na;l.sub=la;l.subtract=la;l.targetTo=ja;l.translate=P;l.transpose=D})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(l,d,Z,Y,u){function F(){return!!d._pe}function D(){return!!u("esri-wasm")}function y(){return t?t:t=(new Promise((b,g)=>l(["./pe-wasm"],b,g))).then(b=>b.peWasm).then(({default:b})=>b({locateFile:g=>Y.getAssetUrl(`esri/geometry/support/${g}`)})).then(b=>{v(b)})}function v(b){function g(h,z,q){h[z]=q(h[z])}d._pe=b;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=
function(h){function z(){return h.apply(this,arguments)||this}Z._inheritsLoose(z,h);z.prototype.destroy=function(){d._pe.destroy(this)};return z}(d._pe.PeGCSExtent);b=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var m of b)g(m.prototype,"getName",h=>function(){return h.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const h of[d._pe.PeGeogtran,d._pe.PeProjcs])g(h.prototype,"getParameters",z=>function(){const q=
Array(d.PeDefs.PE_PARM_MAX);let B=z.call(this);for(let R=0;R<q.length;R++){const N=d._pe.getValue(B,"*");q[R]=N?d._pe.wrapPointer(N,d._pe.PeParameter):null;B+=Int32Array.BYTES_PER_ELEMENT}return q});g(d._pe.PeHorizon.prototype,"getCoord",h=>function(){const z=this.getSize();if(!z)return null;const q=[],B=h.call(this);O(q,z,B);return q});g(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",h=>{const z=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let q=null;var B=h.call(this);if(!d._pe.compare(B,
d._pe.NULL)){q=[B];const R=this.getSteps();if(1<R){B=d._pe.getPointer(B);for(let N=1;N<R;N++)q.push(d._pe.wrapPointer(B+z*N,d._pe.PeGTlistExtendedGTs))}}return q}});const w=d._pe._pe_getPeHorizonSize();m=h=>function(){let z=this._cache;z||(this._cache=z=new Map);if(z.has(h))return z.get(h);let q=null;var B=h.call(this);if(!d._pe.compare(B,d._pe.NULL)){q=[B];const R=B.getNump();if(1<R){B=d._pe.getPointer(B);for(let N=1;N<R;N++)q.push(d._pe.wrapPointer(B+w*N,d._pe.PeHorizon))}}z.set(h,q);return q};
g(d._pe.PeProjcs.prototype,"horizonGcsGenerate",m);g(d._pe.PeProjcs.prototype,"horizonPcsGenerate",m);d._pe.PeObject.prototype.toString=function(h=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();const z=d._pe.getPointer(this),q=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(z,h,q))}}function r(b){if(b){var g=d._pe.getClass(b);g&&(g=d._pe.getCache(g))&&(b=d._pe.getPointer(b))&&delete g[b]}}function I(b,g){const m=[];g=Array(g);for(let w=
0;w<b;w++)m.push(d._pe.ensureInt8(g));return m}function P(b){let g;Array.isArray(b[0])?(g=[],b.forEach(m=>{g.push(m[0],m[1])})):g=b;return g}function O(b,g,m,w=!1){if(w)for(w=0;w<2*g;w++)b[w]=d._pe.getValue(m+w*Float64Array.BYTES_PER_ELEMENT,"double");else{w=0===b.length;for(let h=0;h<g;h++)w&&(b[h]=Array(2)),b[h][0]=d._pe.getValue(m,"double"),b[h][1]=d._pe.getValue(m+Float64Array.BYTES_PER_ELEMENT,"double"),m+=2*Float64Array.BYTES_PER_ELEMENT}}let t;d._pe=null;d.PeCSTransformations=void 0;(function(b){function g(h,
z,q){d._pe.ensureCache.prepare();var B=P(q);const R=q===B;B=d._pe.ensureFloat64(B);(h=d._pe._pe_geog_to_proj(d._pe.getPointer(h),z,B))&&O(q,z,B,R);return h}function m(h,z,q){return w(h,z,q,0)}function w(h,z,q,B){d._pe.ensureCache.prepare();var R=P(q);const N=q===R;R=d._pe.ensureFloat64(R);(h=d._pe._pe_proj_to_geog_center(d._pe.getPointer(h),z,R,B))&&O(q,z,R,N);return h}b.geogToProj=g;b.projGeog=function(h,z,q,B){switch(B){case d.PeDefs.PE_TRANSFORM_P_TO_G:return m(h,z,q);case d.PeDefs.PE_TRANSFORM_G_TO_P:return g(h,
z,q)}return 0};b.projToGeog=m;b.projToGeogCenter=w})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(b){b.init=function(){b.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=
d._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=d._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;b.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;
b.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=d._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
b.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(b){function g(z,q){let B=null,R=m[z];R||(R={},m[z]=R);R.hasOwnProperty(String(q))?B=R[q]:(z=d._pe.PeFactory.prototype.factoryByType(z,q),d._pe.compare(z,d._pe.NULL)||(B=z,R[q]=B));return B=h(B)}const m={},w={},h=z=>
{if(z){const q=z.getType();switch(q){case d.PeDefs.PE_TYPE_GEOGCS:z=d._pe.castObject(z,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:z=d._pe.castObject(z,d._pe.PeProjcs);break;case d.PeDefs.PE_TYPE_GEOGTRAN:z=d._pe.castObject(z,d._pe.PeGeogtran);break;default:q&d.PeDefs.PE_TYPE_UNIT&&(z=d._pe.castObject(z,d._pe.PeUnit))}}return z};b.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(z){return g(d.PeDefs.PE_TYPE_COORDSYS,z)};b.factoryByType=g;b.fromString=function(z,
q){let B=null,R=w[z];R||(R={},w[z]=R);R.hasOwnProperty(q)?B=R[q]:(z=d._pe.PeFactory.prototype.fromString(z,q),d._pe.compare(z,d._pe.NULL)||(B=z,R[q]=B));return B=h(B)};b.geogcs=function(z){return g(d.PeDefs.PE_TYPE_GEOGCS,z)};b.geogtran=function(z){return g(d.PeDefs.PE_TYPE_GEOGTRAN,z)};b.getCode=function(z){return d._pe.PeFactory.prototype.getCode(z)};b.projcs=function(z){return g(d.PeDefs.PE_TYPE_PROJCS,z)};b.unit=function(z){return g(d.PeDefs.PE_TYPE_UNIT,z)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=
null;d.PeGTlistExtended=void 0;(function(b){let g;b.init=function(){b.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;g=d._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(m,w,h,z,q,B){let R=null;const N=new d._pe.PeInteger(B);try{const da=d._pe.PeGTlistExtended.prototype.getGTlist(m,w,h,z,q,N);if(B=N.val)if(R=[da],1<B){const K=d._pe.getPointer(da);for(m=1;m<B;m++)R.push(d._pe.wrapPointer(K+g*m,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(N)}return R}})(d.PeGTlistExtended||
(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(b){b.destroy=function(g){if(g&&g.length){for(const m of g)r(m),m.getEntries().forEach(w=>{r(w);w=w.getGeogtran();r(w);w.getParameters().forEach(r);[w.getGeogcs1(),w.getGeogcs2()].forEach(h=>{r(h);const z=h.getDatum();r(z);r(z.getSpheroid());r(h.getPrimem());r(h.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(g[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(b){b.geogToGeog=
function(g,m,w,h,z){d._pe.ensureCache.prepare();var q=P(w);const B=w===q;q=d._pe.ensureFloat64(q);let R=0;h&&(R=d._pe.ensureFloat64(h));(g=d._pe._pe_geog_to_geog(d._pe.getPointer(g),m,q,R,z))&&O(w,m,q,B);return g}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(b){const g=(w,h,z,q,B,R)=>{d._pe.ensureCache.prepare();switch(w){case "dd":var N=d._pe._pe_geog_to_dd;var da=d.PeDefs.PE_DD_MAX;break;case "ddm":N=d._pe._pe_geog_to_ddm;da=d.PeDefs.PE_DDM_MAX;break;case "dms":N=
d._pe._pe_geog_to_dms,da=d.PeDefs.PE_DMS_MAX}w=0;h&&(w=d._pe.getPointer(h));h=P(q);h=d._pe.ensureFloat64(h);da=I(z,da);q=d._pe.ensureInt32(da);if(B=N(w,z,h,B,q))for(N=0;N<z;N++)R[N]=d._pe.UTF8ToString(da[N]);return B},m=(w,h,z,q,B)=>{d._pe.ensureCache.prepare();switch(w){case "dd":var R=d._pe._pe_dd_to_geog;break;case "ddm":R=d._pe._pe_ddm_to_geog;break;case "dms":R=d._pe._pe_dms_to_geog}w=0;h&&(w=d._pe.getPointer(h));h=q.map(N=>d._pe.ensureString(N));q=d._pe.ensureInt32(h);h=d._pe.ensureFloat64(Array(2*
z));(R=R(w,z,q,h))&&O(B,z,h);return R};b.geog_to_dms=function(w,h,z,q,B){return g("dms",w,h,z,q,B)};b.dms_to_geog=function(w,h,z,q){return m("dms",w,h,z,q)};b.geog_to_ddm=function(w,h,z,q,B){return g("ddm",w,h,z,q,B)};b.ddm_to_geog=function(w,h,z,q){return m("ddm",w,h,z,q)};b.geog_to_dd=function(w,h,z,q,B){return g("dd",w,h,z,q,B)};b.dd_to_geog=function(w,h,z,q){return m("dd",w,h,z,q)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=
d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(g,m,w,h,z,q,B){d._pe.ensureCache.prepare();let R=0;g&&(R=d._pe.getPointer(g));g=P(w);w=d._pe.ensureFloat64(g);g=I(m,d.PeDefs.PE_MGRS_MAX);
const N=d._pe.ensureInt32(g);if(h=d._pe._pe_geog_to_mgrs_extended(R,m,w,h,z,q,N))for(z=0;z<m;z++)B[z]=d._pe.UTF8ToString(g[z]);return h};b.mgrs_to_geog_extended=function(g,m,w,h,z){d._pe.ensureCache.prepare();let q=0;g&&(q=d._pe.getPointer(g));g=w.map(B=>d._pe.ensureString(B));w=d._pe.ensureInt32(g);g=d._pe.ensureFloat64(Array(2*m));(h=d._pe._pe_mgrs_to_geog_extended(q,m,w,h,g))&&O(z,m,g);return h}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(b){b.geog_to_usng=function(g,
m,w,h,z,q,B){d._pe.ensureCache.prepare();let R=0;g&&(R=d._pe.getPointer(g));g=P(w);w=d._pe.ensureFloat64(g);g=I(m,d.PeDefs.PE_MGRS_MAX);const N=d._pe.ensureInt32(g);if(h=d._pe._pe_geog_to_usng(R,m,w,h,z,q,N))for(z=0;z<m;z++)B[z]=d._pe.UTF8ToString(g[z]);return h};b.usng_to_geog=function(g,m,w,h){d._pe.ensureCache.prepare();var z=0;g&&(z=d._pe.getPointer(g));g=w.map(q=>d._pe.ensureString(q));w=d._pe.ensureInt32(g);g=d._pe.ensureFloat64(Array(2*m));(z=d._pe._pe_usng_to_geog(z,m,w,g))&&O(h,m,g);return z}})(d.PeNotationUsng||
(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(g,m,w,h,z){d._pe.ensureCache.prepare();var q=0;g&&(q=d._pe.getPointer(g));g=P(w);w=d._pe.ensureFloat64(g);g=I(m,d.PeDefs.PE_UTM_MAX);const B=d._pe.ensureInt32(g);if(h=d._pe._pe_geog_to_utm(q,m,w,
h,B))for(q=0;q<m;q++)z[q]=d._pe.UTF8ToString(g[q]);return h};b.utm_to_geog=function(g,m,w,h,z){d._pe.ensureCache.prepare();let q=0;g&&(q=d._pe.getPointer(g));g=w.map(B=>d._pe.ensureString(B));w=d._pe.ensureInt32(g);g=d._pe.ensureFloat64(Array(2*m));(h=d._pe._pe_utm_to_geog(q,m,w,h,g))&&O(z,m,g);return h}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(b){const g=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=
d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(m,w=b.PE_PCSINFO_OPTION_DOMAIN){let h,z;g.has(m)&&(z=g.get(m),z[w]&&(h=z[w]));h||(h=d._pe.PePCSInfo.prototype.generate(m,w),z||(z=[],g.set(m,z)),z[w]=h);return h}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(b){b.version_string=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||
(d.PeVersion={}));const C=Object.freeze({__proto__:null,get _pe(){return d._pe},isLoaded:F,isSupported:D,load:y,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},
get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:v});d._init=v;d.isLoaded=F;d.isSupported=D;d.load=y;d.pe=C})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(l,d){const Z=Math.PI/180;var Y=d.earth.radius;const u=d.earth.eccentricitySquared;Y={a1:Y*u,a2:Y*u*Y*u,a3:Y*u*u/2,a4:Y*u*Y*u*2.5,a5:Y*u+Y*u*u/2,a6:1-u};d={4267:{a:6378206.4,f:1/
294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=Y;l.spheroids=d;l.toRadians=Z;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(l){return function(){function d(Y){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(Y&&Y.steps)for(const u of Y.steps)u instanceof l?this.steps.push(u):this.steps.push(new l({wkid:u.wkid,wkt:u.wkt,isInverse:u.isInverse}))}d.cacheKey=function(Y,u){return[void 0!==Y.wkid&&null!==Y.wkid?Y.wkid.toString():"-1",void 0!==Y.wkt&&null!==Y.wkt?Y.wkt.toString():"",void 0!==u.wkid&&null!==u.wkid?u.wkid.toString():"-1",void 0!==u.wkt&&null!==u.wkt?u.wkt.toString():""].join()};
d.fromGE=function(Y){const u=new d;let F="";for(const D of Y.steps)Y=l.fromGE(D),u.steps.push(Y),F+=Y.uid.toString()+",";u._cached_projection={};u._gtlistentry=null;u._chain=F;return u};var Z=d.prototype;Z.getInverse=function(){const Y=new d;Y.steps=[];for(let u=this.steps.length-1;0<=u;u--)Y.steps.push(this.steps[u].getInverse());return Y};Z.getGTListEntry=function(){let Y="";for(const u of this.steps)Y+=u.uid.toString()+",";Y!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
Y);return this._gtlistentry};Z.assignCachedGe=function(Y,u,F){this._cached_projection[d.cacheKey(Y,u)]=F};Z.getCachedGeTransformation=function(Y,u){let F="";for(const D of this.steps)F+=D.uid.toString()+",";F!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=F);Y=this._cached_projection[d.cacheKey(Y,u)];return void 0===Y?null:Y};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){let d=
0;return function(){function Z(Y=null){this.uid=d++;Y?(this._wkt=void 0!==Y.wkt?Y.wkt:null,this._wkid=void 0!==Y.wkid?Y.wkid:-1,this._isInverse=void 0!==Y.isInverse?!0===Y.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}Z.fromGE=function(Y){const u=new Z;u._wkt=Y.wkt;u._wkid=Y.wkid;u._isInverse=Y.isInverse;return u};Z.prototype.getInverse=function(){const Y=new Z;Y._wkt=this.wkt;Y._wkid=this._wkid;Y._isInverse=!this.isInverse;return Y};l._createClass(Z,[{key:"wkt",get:function(){return this._wkt},
set:function(Y){this._wkt=Y;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(Y){this._wkid=Y;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(Y){this._isInverse=Y;this.uid=d++}}]);return Z}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(l,d,Z,Y){l.getGeometryZScaler=function(u,F,D){if(d.isNone(F)||d.isNone(D)||D.vcsWkid||Y.equals(F,D))return null;
F=Z.getMetersPerVerticalUnitForSR(F);D=Z.getMetersPerVerticalUnitForSR(D);const y=F/D;if(1===y)return null;switch(u){case "point":case "esriGeometryPoint":return v=>{v&&null!=v.z&&(v.z*=y)};case "polyline":case "esriGeometryPolyline":return v=>{if(v)for(const r of v.paths)for(const I of r)2<I.length&&(I[2]*=y)};case "polygon":case "esriGeometryPolygon":return v=>{if(v)for(const r of v.rings)for(const I of r)2<I.length&&(I[2]*=y)};case "multipoint":case "esriGeometryMultipoint":return v=>{if(v)for(const r of v.points)2<
r.length&&(r[2]*=y)};case "extent":case "esriGeometryExtent":return v=>{v&&null!=v.zmin&&null!=v.zmax&&(v.zmin*=y,v.zmax*=y)};default:return null}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(l){let d=function(D,y,v){this.x=D;this.y=y;this.spatialReference=v;this.m=this.z=void 0},Z=function(D,y,v,r){this.rings=D;this.spatialReference=y;this.hasM=this.hasZ=void 0;v&&(this.hasZ=v);r&&(this.hasM=r)},Y=function(D,y,v,
r){this.paths=D;this.spatialReference=y;this.hasM=this.hasZ=void 0;v&&(this.hasZ=v);r&&(this.hasM=r)},u=function(D,y,v,r){this.points=D;this.spatialReference=y;this.hasM=this.hasZ=void 0;v&&(this.hasZ=v);r&&(this.hasM=r)},F=function(D,y,v,r,I){this.xmin=D;this.ymin=y;this.xmax=v;this.ymax=r;this.spatialReference=I;this.mmax=this.mmin=this.zmax=this.zmin=void 0};l.jsonAdapter={convertToGEGeometry:function(D,y){return null==y?null:D.convertJSONToGeometry(y)},exportPoint:function(D,y,v){v=new d(D.getPointX(y),
D.getPointY(y),v);const r=D.hasZ(y),I=D.hasM(y);r&&(v.z=D.getPointZ(y));I&&(v.m=D.getPointM(y));return v},exportPolygon:function(D,y,v){return new Z(D.exportPaths(y),v,D.hasZ(y),D.hasM(y))},exportPolyline:function(D,y,v){return new Y(D.exportPaths(y),v,D.hasZ(y),D.hasM(y))},exportMultipoint:function(D,y,v){return new u(D.exportPoints(y),v,D.hasZ(y),D.hasM(y))},exportExtent:function(D,y,v){var r=D.hasZ(y);const I=D.hasM(y);v=new F(D.getXMin(y),D.getYMin(y),D.getXMax(y),D.getYMax(y),v);r&&(r=D.getZExtent(y),
v.zmin=r.vmin,v.zmax=r.vmax);I&&(D=D.getMExtent(y),v.mmin=D.vmin,v.mmax=D.vmax);return v}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r,I,P,O,t,C,b,g,m,w,h,z,q,B){function R(A){return A.every(e=>"exceedslimit"!==e.statisticType)}const N=new Set,da=new F.MemCacheStorage(2E6);let K=0,H=function(){function A(f){this.capabilities={query:b.queryCapabilities};this.geometryType=f.geometryType;this.hasM=f.hasM;this.hasZ=f.hasZ;this.objectIdField=f.objectIdField;this.spatialReference=f.spatialReference;this.definitionExpression=f.definitionExpression;this.featureStore=f.featureStore;this.aggregateAdapter=f.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=f.timeInfo;f.cacheSpatialQueries&&(this._geometryQueryCache=new F.MemCache(K++ +"$$",da));this.fieldsIndex=new z(f.fields);f.scheduler&&f.priority&&(this._frameTask=f.scheduler.registerTask(f.priority))}var e=A.prototype;e.destroy=function(){this._frameTask=u.removeMaybe(this._frameTask);this.clearCache();u.destroyMaybe(this._geometryQueryCache);this._changeHandle=u.removeMaybe(this._changeHandle);u.destroyMaybe(this.fieldsIndex)};
e.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};e.executeQuery=function(){var f=d._asyncToGenerator(function*(E={},U){let ca=Y.clone(E),ja;try{ca=yield this._schedule(()=>h.normalizeQuery(ca,this.definitionExpression,this.spatialReference),U),ca=yield this._reschedule(()=>this._checkQuerySupport(ca),U),ja=yield this._reschedule(()=>this._executeGeometryQuery(ca,U),U),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),
U),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),U),ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),U),ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),U)}catch(na){if(na!==h.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new g([],null,this)}return ja.createQueryResponse(ca)});return function(){return f.apply(this,arguments)}}();e.executeQueryForCount=function(){var f=d._asyncToGenerator(function*(E={},U){let ca=Y.clone(E);ca.returnGeometry=!1;ca.returnCentroid=!1;ca.outSR=null;
try{ca=yield this._schedule(()=>h.normalizeQuery(ca,this.definitionExpression,this.spatialReference),U);ca=yield this._reschedule(()=>this._checkQuerySupport(ca),U);let ja=yield this._reschedule(()=>this._executeGeometryQuery(ca,U),U);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),U);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),U);ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),U);ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),U);return ja.createQueryResponseForCount(ca)}catch(ja){if(ja!==
h.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}});return function(){return f.apply(this,arguments)}}();e.executeQueryForExtent=function(){var f=d._asyncToGenerator(function*(E={},U){let ca=Y.clone(E),ja;E=ca.outSR;try{ca=yield this._schedule(()=>h.normalizeQuery(ca,this.definitionExpression,this.spatialReference),U);ca=yield this._reschedule(()=>this._checkQuerySupport(ca),U);ca.returnGeometry=!0;ca.returnCentroid=!1;ca.outSR=null;ja=yield this._reschedule(()=>this._executeGeometryQuery(ca,U),U);ja=
yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),U);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),U);ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),U);ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),U);const na=ja.size;if(!na)return{count:na,extent:null};y.set(M,y.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ja.items,la=>y.expandWithAABB(M,la),T);const ta={xmin:M[0],ymin:M[1],xmax:M[3],ymax:M[4],spatialReference:h.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(M[2])&&isFinite(M[5])&&(ta.zmin=M[2],ta.zmax=M[5]);const ma=C.project(ta,ja.spatialReference,E);ma.spatialReference=h.cleanFromGeometryEngine(E||this.spatialReference);if(0===ma.xmax-ma.xmin){const la=D.getMetersPerUnitForSR(ma.spatialReference);ma.xmin-=la;ma.xmax+=la}if(0===ma.ymax-ma.ymin){const la=D.getMetersPerUnitForSR(ma.spatialReference);ma.ymin-=la;ma.ymax+=la}if(this.hasZ&&null!=ma.zmin&&null!=ma.zmax&&0===ma.zmax-ma.zmin){const la=D.getMetersPerUnitForSR(ma.spatialReference);
ma.zmin-=la;ma.zmax+=la}return{count:na,extent:ma}}catch(na){if(na===h.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw na;}});return function(){return f.apply(this,arguments)}}();e.executeQueryForIds=function(){var f=d._asyncToGenerator(function*(E={},U){return this.executeQueryForIdSet(E,U).then(ca=>Array.from(ca))});return function(){return f.apply(this,arguments)}}();e.executeQueryForIdSet=function(){var f=d._asyncToGenerator(function*(E={},U){let ca=Y.clone(E),ja;ca.returnGeometry=
!1;ca.returnCentroid=!1;ca.outSR=null;try{ca=yield this._schedule(()=>h.normalizeQuery(ca,this.definitionExpression,this.spatialReference),U);ca=yield this._reschedule(()=>this._checkQuerySupport(ca),U);ja=yield this._reschedule(()=>this._executeGeometryQuery(ca,U),U);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),U);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),U);ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),U);ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),
U);const na=ja.items,ta=new Set;yield this._reschedule(()=>{for(const ma of na)ta.add(ja.featureAdapter.getObjectId(ma))},U);return ta}catch(na){if(na===h.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw na;}});return function(){return f.apply(this,arguments)}}();e.executeQueryForSnapping=function(){var f=d._asyncToGenerator(function*(E,U){const {point:ca,distance:ja,types:na}=E;if(0===na)return{candidates:[]};const ta=yield this._reschedule(()=>this._checkQuerySupport(E.query),U),ma=!O.equals(ca.spatialReference,
this.spatialReference);ma&&(yield C.checkProjectionSupport(ca.spatialReference,this.spatialReference));var la="number"===typeof ja?ja:ja.x,va="number"===typeof ja?ja:ja.y;la={xmin:ca.x-la,xmax:ca.x+la,ymin:ca.y-va,ymax:ca.y+va,spatialReference:ca.spatialReference};la=ma?C.project(la,this.spatialReference):la;if(!la)return{candidates:[]};va=(yield P.normalizeCentralMeridian(I.fromJSON(ca),null,{signal:U}))[0];const Ja=(yield P.normalizeCentralMeridian(I.fromJSON(la),null,{signal:U}))[0];if(u.isNone(va)||
u.isNone(Ja))return{candidates:[]};let Ba=new g(this._searchFeatures(this._getQueryBBoxes(Ja.toJSON())),null,this);Ba=yield this._reschedule(()=>Ba.executeObjectIdsQuery(ta),U);Ba=yield this._reschedule(()=>Ba.executeTimeQuery(ta),U);Ba=yield this._reschedule(()=>Ba.executeAttributesQuery(ta),U);U=va.toJSON();U=ma?C.project(U,this.spatialReference):U;return Ba.createSnappingResponse({...E,point:U,distance:ma?Math.max(la.xmax-la.xmin,la.ymax-la.ymin)/2:ja},ca.spatialReference)});return function(E,
U){return f.apply(this,arguments)}}();e.executeQueryForLatestObservations=function(){var f=d._asyncToGenerator(function*(E={},U){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new Z("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:E,timeInfo:this.timeInfo});let ca=Y.clone(E),ja;try{ca=yield this._schedule(()=>h.normalizeQuery(ca,this.definitionExpression,this.spatialReference),U),ca=yield this._reschedule(()=>this._checkQuerySupport(ca),U),ja=yield this._reschedule(()=>
this._executeGeometryQuery(ca,U),U),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),U),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),U),ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),U),ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),U),ja=yield this._reschedule(()=>ja.filterLatest(),U)}catch(na){if(na!==h.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new g([],null,this)}return ja.createQueryResponse(ca)});return function(){return f.apply(this,arguments)}}();
e.executeQueryForSummaryStatistics=function(){var f=d._asyncToGenerator(function*(E={},U,ca){const {field:ja,normalizationField:na,valueExpression:ta}=U;return(yield this._getQueryEngineResultForStats(E,{field:ja,normalizationField:na,valueExpression:ta},ca)).createSummaryStatisticsResponse(E,U)});return function(){return f.apply(this,arguments)}}();e.executeQueryForUniqueValues=function(){var f=d._asyncToGenerator(function*(E={},U,ca){const {field:ja,valueExpression:na}=U;return(yield this._getQueryEngineResultForStats(E,
{field:ja,valueExpression:na},ca)).createUniqueValuesResponse(E,U)});return function(){return f.apply(this,arguments)}}();e.executeQueryForClassBreaks=function(){var f=d._asyncToGenerator(function*(E={},U,ca){const {field:ja,normalizationField:na,valueExpression:ta}=U;return(yield this._getQueryEngineResultForStats(E,{field:ja,normalizationField:na,valueExpression:ta},ca)).createClassBreaksResponse(E,U)});return function(){return f.apply(this,arguments)}}();e.executeQueryForHistogram=function(){var f=
d._asyncToGenerator(function*(E={},U,ca){const {field:ja,normalizationField:na,valueExpression:ta}=U;return(yield this._getQueryEngineResultForStats(E,{field:ja,normalizationField:na,valueExpression:ta},ca)).createHistogramResponse(E,U)});return function(){return f.apply(this,arguments)}}();e._schedule=function(){var f=d._asyncToGenerator(function*(E,U){return u.isSome(this._frameTask)?this._frameTask.schedule(E,U):E(B.noBudget)});return function(E,U){return f.apply(this,arguments)}}();e._reschedule=
function(){var f=d._asyncToGenerator(function*(E,U){return u.isSome(this._frameTask)?this._frameTask.reschedule(E,U):E(B.noBudget)});return function(E,U){return f.apply(this,arguments)}}();e._getAll=function(){if(!this._allItems){const f=[];this.featureStore.forEach(E=>f.push(E));this._allItems=new g(f,null,this)}return this._allItems};e._executeGeometryQuery=function(){var f=d._asyncToGenerator(function*(E,U){var ca=this;const {geometry:ja,outSR:na,spatialRel:ta,returnGeometry:ma,returnCentroid:la}=
E,va=ma||la,Ja=O.isValid(na)&&!O.equals(this.spatialReference,na),Ba=this._geometryQueryCache?Ja&&va?JSON.stringify({geometry:ja,spatialRelationship:ta,outSpatialReference:na}):JSON.stringify({geometry:ja,spatialRelationship:ta}):null;if(Ba){var Sa=this._geometryQueryCache.get(Ba);if(!u.isUndefined(Sa))return Sa}Sa=function(){var p=d._asyncToGenerator(function*(ea){if(Ja&&va)return ea=yield ea.project(na),Ba&&ca._geometryQueryCache.put(Ba,ea,ea.size||1),ea;Ba&&ca._geometryQueryCache.put(Ba,ea,ea.size||
1);return ea});return function(ea){return p.apply(this,arguments)}}();if(!ja)return Sa(this._getAll());const Oa=this.featureAdapter;if("esriSpatialRelDisjoint"===ta){E=this._searchFeatures(this._getQueryBBoxes(ja));if(!E.length)return Sa(this._getAll());let p,ea;const n=new Set;for(var Ia of E)n.add(Oa.getObjectId(Ia));yield this._reschedule(()=>{let J=0;p=Array(n.size);this.featureStore.forEach(S=>p[J++]=S);ea=n},U);E=yield this._reschedule(d._asyncToGenerator(function*(){const J=yield m.getSpatialQueryOperator(ta,
ja,ca.geometryType,ca.hasZ,ca.hasM);return new g(yield ca._runSpatialFilter(p,S=>!ea.has(Oa.getObjectId(S))||J(Oa.getGeometry(S)),U),ja,ca)}),U);return Sa(E)}Ia=this._searchFeatures(this._getQueryBBoxes(ja));if(!Ia.length)return Sa=new g([],ja,this),Ba&&this._geometryQueryCache.put(Ba,Sa,Sa.size||1),Sa;if(this._canExecuteSoloPass(ja,E))return Sa(new g(Ia,ja,this));const c=yield m.getSpatialQueryOperator(ta,ja,this.geometryType,this.hasZ,this.hasM);E=yield this._runSpatialFilter(Ia,p=>c(Oa.getGeometry(p)),
U);return Sa(new g(E,ja,this))});return function(E,U){return f.apply(this,arguments)}}();e._runSpatialFilter=function(){var f=d._asyncToGenerator(function*(E,U,ca){var ja=this;if(!U)return E;if(u.isNone(this._frameTask))return E.filter(la=>U(la));let na=0;const ta=[],ma=function(){var la=d._asyncToGenerator(function*(va){for(;na<E.length;){const Ja=E[na++];U(Ja)&&(ta.push(Ja),va.madeProgress());va.done&&(yield ja._reschedule(Ba=>ma(Ba),ca))}});return function(va){return la.apply(this,arguments)}}();
return this._reschedule(la=>ma(la),ca).then(()=>ta)});return function(E,U,ca){return f.apply(this,arguments)}}();e._canExecuteSoloPass=function(f,E){const {geometryType:U}=this;({spatialRel:E}=E);return m.canQueryWithRBush(f)&&("esriSpatialRelEnvelopeIntersects"===E||"esriGeometryPoint"===U&&("esriSpatialRelIntersects"===E||"esriSpatialRelContains"===E||"esriSpatialRelWithin"===E))};e._getQueryBBoxes=function(f){if(m.canQueryWithRBush(f)){if(I.isExtent(f))return[v.fromValues(f.xmin,f.ymin,f.xmax,
f.ymax)];if(I.isPolygon(f))return f.rings.map(E=>v.fromValues(Math.min(E[0][0],E[2][0]),Math.min(E[0][1],E[2][1]),Math.max(E[0][0],E[2][0]),Math.max(E[0][1],E[2][1])))}return[r.getBoundsXY(v.create(),f)]};e._searchFeatures=function(f){for(const ca of f)this.featureStore.forEachInBounds(ca,ja=>{N.add(ja)});const E=Array(N.size);let U=0;N.forEach(ca=>E[U++]=ca);N.clear();return E};e._checkStatisticsSupport=function(){var f=d._asyncToGenerator(function*(E,U){if(0>E.distance||null!=E.geometryPrecision||
E.multipatchOption||E.pixelSize||E.relationParam||E.text||E.outStatistics||E.groupByFieldsForStatistics||E.having||E.orderByFields)throw new Z("feature-store:unsupported-query","Unsupported query options",{query:E});return Promise.all([this._checkAttributesQuerySupport(E),this._checkStatisticsParamsSupport(U),m.checkSpatialQuerySupport(E,this.geometryType,this.spatialReference),C.checkProjectionSupport(this.spatialReference,E.outSR)]).then(()=>E)});return function(E,U){return f.apply(this,arguments)}}();
e._checkStatisticsParamsSupport=function(){var f=d._asyncToGenerator(function*(E){var U=[];E.valueExpression&&({arcadeUtils:U}=yield q.loadArcade(),U=U.extractFieldNames(E.valueExpression));E.field&&U.push(E.field);E.normalizationField&&U.push(E.normalizationField);if(!U.length)throw new Z("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:E});t.validateFields(this.fieldsIndex,U,"params contains missing fields")});return function(E){return f.apply(this,
arguments)}}();e._checkQuerySupport=function(){var f=d._asyncToGenerator(function*(E){if(0>E.distance||null!=E.geometryPrecision||E.multipatchOption||E.pixelSize||E.relationParam||E.text)throw new Z("feature-store:unsupported-query","Unsupported query options",{query:E});return Promise.all([this._checkAttributesQuerySupport(E),this._checkStatisticsQuerySupport(E),m.checkSpatialQuerySupport(E,this.geometryType,this.spatialReference),C.checkProjectionSupport(this.spatialReference,E.outSR)]).then(()=>
E)});return function(E){return f.apply(this,arguments)}}();e._checkAttributesQuerySupport=function(f){const {outFields:E,orderByFields:U,returnDistinctValues:ca,outStatistics:ja}=f,na=ja?ja.map(ta=>ta.outStatisticFieldName&&ta.outStatisticFieldName.toLowerCase()):[];if(U&&0<U.length){const ta=U.map(ma=>{const la=ma.toLowerCase();return-1<la.indexOf(" asc")?la.split(" asc")[0]:-1<la.indexOf(" desc")?la.split(" desc")[0]:ma}).filter(ma=>-1===na.indexOf(ma));t.validateFields(this.fieldsIndex,ta,"orderByFields contains missing fields")}if(E&&
0<E.length)t.validateFields(this.fieldsIndex,E,"outFields contains missing fields");else if(ca)throw new Z("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:f});t.validateWhere(this.fieldsIndex,f.where)};e._checkStatisticsQuerySupport=function(){var f=d._asyncToGenerator(function*(E){const {outStatistics:U,groupByFieldsForStatistics:ca,having:ja}=E;var na=ca&&ca.length,ta=U&&U.length;if(ja){if(!na||!ta)throw new Z("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",
{query:E});t.validateHaving(this.fieldsIndex,ja,U)}if(ta&&R(U)){ta=U.map(ma=>ma.onStatisticField);t.validateFields(this.fieldsIndex,ta,"onStatisticFields contains missing fields");na&&t.validateFields(this.fieldsIndex,ca,"groupByFieldsForStatistics contains missing fields");for(const ma of U){const {onStatisticField:la,statisticType:va}=ma;if(("percentile_disc"===va||"percentile_cont"===va)&&"statisticParameters"in ma){if({statisticParameters:na}=ma,!na)throw new Z("feature-store:unsupported-query",
"statisticParamters should be set for percentile type",{definition:ma,query:E});}else if("count"!==va&&la&&t.hasInvalidFieldType(la,this.fieldsIndex))throw new Z("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:ma,query:E});}}});return function(E){return f.apply(this,arguments)}}();e._getQueryEngineResultForStats=function(){var f=d._asyncToGenerator(function*(E={},U,ca){E=Y.clone(E);let ja;try{E=yield this._schedule(()=>h.normalizeQuery(E,this.definitionExpression,
this.spatialReference),ca),E=yield this._reschedule(()=>this._checkStatisticsSupport(E,U),ca),ja=yield this._reschedule(()=>this._executeGeometryQuery(E,ca),ca),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(E),ca),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(E),ca),ja=yield this._reschedule(()=>ja.executeTimeQuery(E),ca),ja=yield this._reschedule(()=>ja.executeAttributesQuery(E),ca)}catch(na){if(na!==h.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new g([],null,this)}return ja});return function(){return f.apply(this,
arguments)}}();d._createClass(A,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const f=this.featureStore.fullBounds;return f?{xmin:f[0],ymin:f[1],xmax:f[2],ymax:f[3],spatialReference:h.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=w.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return A}();const T=y.create(),M=
y.create();l.Feature=function(A,e=null,f,E,U){this.attributes=A;this.geometry=f;this.centroid=E;this.filterFlags=U;this.groupId=-1;this.displayId=e};l.default=H;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(l,d,Z,Y){let u=function(){function D(v,r,I){this._namespace=v;this._storage=r;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=
":";I&&(this._storage.registerRemoveFunc(this._namespace,I),this._removeFunc=!0)}var y=D.prototype;y.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};y.resetHitRate=function(){this._hit=this._miss=0};y.put=function(v,r,I,P=0){this._storage.put(this._namespace+v,r,I,P)};y.get=function(v){v=this._storage.get(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};
y.pop=function(v){v=this._storage.pop(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};y.updateSize=function(v,r,I){this._storage.updateSize(this._namespace+v,r,I)};y.clear=function(){this._storage.clear(this._namespace)};y.clearAll=function(){this._storage.clearAll()};y.getStats=function(){return this._storage.getStats()};y.resetStats=function(){this._storage.resetStats()};d._createClass(D,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/
(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return D}(),F=function(){function D(v=10485760){this._maxSize=v;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new Y;this._users=new Y}var y=D.prototype;y.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};y.register=function(v){this._users.push(v)};y.deregister=function(v){this._users.removeUnordered(v)};
y.registerRemoveFunc=function(v,r){this._removeFuncs.push([v,r])};y.deregisterRemoveFunc=function(v){this._removeFuncs.filterInPlace(r=>r[0]!==v)};y.put=function(v,r,I,P){const O=this._db.get(v);O&&(this._size-=O.size,this._db.delete(v),O.entry!==r&&this._notifyRemove(v,O.entry,0));I>this._maxSize?this._notifyRemove(v,r,0):void 0===r?console.warn("Refusing to cache undefined entry "):!I||0>I?console.warn("Refusing to cache entry with invalid size "+I):(P=1+Math.max(P,-3)- -3,this._db.set(v,{entry:r,
size:I,lifetime:P,lives:P}),this._size+=I,this._checkSizeLimit())};y.updateSize=function(v,r,I){const P=this._db.get(v);if(P&&P.entry===r){for(this._size-=P.size;I>this._maxSize;)if(I=this._notifyRemove(v,r,1),!(Z.isSome(I)&&0<I)){this._db.delete(v);return}P.size=I;this._size+=I;this._checkSizeLimit()}};y.pop=function(v){const r=this._db.get(v);if(r)return this._size-=r.size,this._db.delete(v),++this._hit,r.entry;++this._miss};y.get=function(v){const r=this._db.get(v);if(void 0===r)++this._miss;else return this._db.delete(v),
r.lives=r.lifetime,this._db.set(v,r),++this._hit,r.entry};y.getStats=function(){const v={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},I=[];this._db.forEach((t,C)=>{const b=t.lifetime;I[b]=(I[b]||0)+t.size;this._users.forAll(g=>{g=g.namespace;C.startsWith(g)&&(r[g]=(r[g]||0)+t.size)})});const P={};this._users.forAll(t=>{const C=t.namespace;!isNaN(t.hitRate)&&0<t.hitRate?(r[C]=
r[C]||0,P[C]=Math.round(100*t.hitRate)+"%"):P[C]="0%"});var O=Object.keys(r);O.sort((t,C)=>r[C]-r[t]);O.forEach(t=>v[t]=Math.round(r[t]/2**20)+"MB / "+P[t]);for(O=I.length-1;0<=O;--O){const t=I[O];t&&(v["Priority "+(O+-3-1)]=Math.round(t/this.size*100)+"%")}return v};y.resetStats=function(){this._hit=this._miss=0;this._users.forAll(v=>v.resetHitRate())};y.clear=function(v){this._db.forEach((r,I)=>{I.startsWith(v)&&(this._size-=r.size,this._db.delete(I),this._notifyRemove(I,r.entry,0))})};y.clearAll=
function(){this._db.forEach((v,r)=>this._notifyRemove(r,v.entry,0));this._size=0;this._db.clear()};y._getHitRate=function(){return this._hit/(this._hit+this._miss)};y._notifyRemove=function(v,r,I){let P;this._removeFuncs.some(O=>v.startsWith(O[0])?(O=O[1](r,I),"number"===typeof O&&(P=O),!0):!1);return P};y._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [v,r]of this._db){this._db.delete(v);if(1>=r.lives){this._size-=r.size;const I=this._notifyRemove(v,r.entry,1);Z.isSome(I)&&
0<I&&(this._size+=I,r.lives=r.lifetime,r.size=I,this._db.set(v,r))}else--r.lives,this._db.set(v,r);if(this._size<=.9*this.maxSize)break}};d._createClass(D,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(v){this._maxSize=Math.max(v,0);this._checkSizeLimit()}}]);return D}();l.MIN_PRIORITY=-3;l.MemCache=u;l.MemCacheStorage=F;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r,I,P,O){function t(q){const B=[];let R=0,N=0;for(let da=0;da<q.length;da++){const K=q[da];let H=null;for(let T=0;T<K.length;T++)H=K[T],B.push(H),0===T?N=R=H[0]:(R=Math.min(R,H[0]),N=Math.max(N,H[0]));H&&B.push([(R+N)/2,0])}return B}function C(q,B){if(!(q instanceof y||q instanceof D))throw z.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new Y("straightLineDensify: the input geometry is neither polyline nor polygon");var R=v.getGeometryParts(q);
const N=[];for(const K of R){R=[];N.push(R);R.push([K[0][0],K[0][1]]);for(let H=0;H<K.length-1;H++){const T=K[H][0],M=K[H][1],A=K[H+1][0],e=K[H+1][1];var da=Math.sqrt((A-T)*(A-T)+(e-M)*(e-M));const f=(e-M)/da,E=(A-T)/da,U=da/B;if(1<U){for(let ca=1;ca<=U-1;ca++){const ja=ca*B;R.push([E*ja+T,f*ja+M])}da=(da+Math.floor(U-1)*B)/2;R.push([E*da+T,f*da+M])}R.push([A,e])}}return"polygon"===q.type?new D({rings:N,spatialReference:q.spatialReference}):new y({paths:N,spatialReference:q.spatialReference})}function b(q,
B,R){B&&(q=C(q,1E6),q=I.webMercatorToGeographic(q,!0));R&&(q=v.updatePolyGeometry(q,R));return q}function g(q,B,R){if(Array.isArray(q)){var N=q[0];N>B?(R=v.offsetMagnitude(N,B),q[0]=N+-2*R*B):N<R&&(B=v.offsetMagnitude(N,R),q[0]=N+-2*B*R)}else N=q.x,N>B?(R=v.offsetMagnitude(N,B),q=q.clone().offset(-2*R*B,0)):N<R&&(B=v.offsetMagnitude(N,R),q=q.clone().offset(-2*B*R,0));return q}function m(q,B){let R=-1;for(let N=0;N<B.cutIndexes.length;N++){const da=B.cutIndexes[N],K=B.geometries[N],H=v.getGeometryParts(K);
for(let T=0;T<H.length;T++){const M=H[T];M.some(A=>{if(180>A[0])return!0;A=0;for(var e=0;e<M.length;e++){var f=M[e][0];A=f>A?f:A}A=Number(A.toFixed(9));A=-360*v.offsetMagnitude(A,180);for(e=0;e<M.length;e++)f=K.getPoint(T,e),K.setPoint(T,e,f.clone().offset(A,0));return!0})}if(da===R)if("polygon"===q[0].type)for(const T of v.getGeometryParts(K))q[da]=q[da].addRing(T);else{if("polyline"===q[0].type)for(const T of v.getGeometryParts(K))q[da]=q[da].addPath(T)}else R=da,q[da]=K}return q}function w(q,B,
R){return h.apply(this,arguments)}function h(){h=d._asyncToGenerator(function*(q,B,R){var N;if(!Array.isArray(q))return w([q],B);B=null!=(N=null==B?void 0:B.url)?N:Z.geometryServiceUrl;let da,K,H;let T=0;var M=[];N=[];for(var A of q)if(F.isNone(A))N.push(A);else{if(!e){var e=A.spatialReference;var f=r.getInfo(e);var E=(da=e.isWebMercator)?102100:4326;K=v.cutParams[E].maxX;H=v.cutParams[E].minX;var U=v.cutParams[E].plus180Line;E=v.cutParams[E].minus180Line}if(f)if("mesh"===A.type)N.push(A);else if("point"===
A.type)N.push(g(A.clone(),K,H));else if("multipoint"===A.type){var ca=A.clone();ca.points=ca.points.map(ja=>g(ja,K,H));N.push(ca)}else if("extent"===A.type)ca=A.clone()._normalize(!1,!1,f),N.push(ca.rings?new D(ca):ca);else if(A.extent){ca=A.extent;const ja=2*v.offsetMagnitude(ca.xmin,H)*K;let na=0===ja?A.clone():v.updatePolyGeometry(A.clone(),ja);ca.offset(ja,0);ca.intersects(U)&&ca.xmax!==K?(T=ca.xmax>T?ca.xmax:T,na=b(na,da),M.push(na),N.push("cut")):ca.intersects(E)&&ca.xmin!==H?(T=2*ca.xmax*K>
T?2*ca.xmax*K:T,na=b(na,da,360),M.push(na),N.push("cut")):N.push(na)}else N.push(A.clone());else N.push(A)}e=v.offsetMagnitude(T,K);f=-90;U=e;for(A=new y;0<e;)E=-180+360*e,A.addPath([[E,f],[E,-1*f]]),f*=-1,e--;if(0<M.length&&0<U){e=yield P.cut(B,M,A,R);e=m(M,e);f=[];M=[];for(U=0;U<N.length;U++)A=N[U],"cut"!==A?M.push(A):(A=e.shift(),E=q[U],F.isSome(E)&&"polygon"===E.type&&E.rings&&1<E.rings.length&&A.rings.length>=E.rings.length?(f.push(A),M.push("simplify")):M.push(da?I.geographicToWebMercator(A):
A));if(!f.length)return M;N=yield O.simplify(B,f,R);q=[];for(R=0;R<M.length;R++)B=M[R],"simplify"!==B?q.push(B):q.push(da?I.geographicToWebMercator(N.shift()):N.shift());return q}q=[];for(R=0;R<N.length;R++)B=N[R],"cut"!==B?q.push(B):(B=M.shift(),q.push(!0===da?I.geographicToWebMercator(B):B));return Promise.resolve(q)});return h.apply(this,arguments)}const z=u.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(q){if(!q)return null;const B=q.extent;if(!B)return null;
var R=q.spatialReference&&r.getInfo(q.spatialReference);if(!R)return B;const [N,da]=R.valid;({width:R}=B);let {xmin:K,xmax:H}=B;[K,H]=[H,K];if("extent"===q.type||0===R||R<=da||R>2*da||K<N||H>da)return B;let T;switch(q.type){case "polygon":if(1<q.rings.length)T=t(q.rings);else return B;break;case "polyline":if(1<q.paths.length)T=t(q.paths);else return B;break;case "multipoint":T=q.points}q=B.clone();for(let M=0;M<T.length;M++){let A=T[M][0];0>A?(A+=da,H=Math.max(A,H)):(A-=da,K=Math.min(A,K))}q.xmin=
K;q.xmax=H;return q.width<R?(q.xmin-=da,q.xmax-=da,q):B};l.normalizeCentralMeridian=w;l.normalizeMapX=function(q,B){if(B=r.getInfo(B)){const [R,N]=B.valid;B=N-R;if(q<R)for(;q<R;)q+=B;if(q>N)for(;q>N;)q-=B}return q};l.straightLineDensify=C;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(l,d,Z,Y){function u(D){return Y.isPolygon(D)?D.rings:D.paths}const F={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Z.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,-180],[180,180]]],spatialReference:Z.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:Z.WGS84})}};
l.cutParams=F;l.getGeometryParts=u;l.getSpatialReferenceMinMaxX=function(D){D=(null==D?0:D.isWebMercator)?102100:4326;return[F[D].minX,F[D].maxX]};l.offsetMagnitude=function(D,y){return Math.ceil((D-y)/(2*y))};l.updatePolyGeometry=function(D,y){const v=u(D);for(const r of v)for(const I of r)I[0]+=y;return D};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(l,d,Z,Y,u,F){function D(){D=d._asyncToGenerator(function*(y,v,r,I){y="string"===typeof y?u.urlToObject(y):y;const P=v[0].spatialReference;v={...I,query:{...y.query,f:"json",sr:JSON.stringify(P),target:JSON.stringify({geometryType:F.getJsonType(v[0]),geometries:v}),cutter:JSON.stringify(r)}};v=yield Y(y.path+"/cut",v);const {cutIndexes:O,geometries:t=[]}=v.data;return{cutIndexes:O,geometries:t.map(C=>{C=F.fromJSON(C);C.spatialReference=P;return C})}});return D.apply(this,arguments)}l.cut=
function(y,v,r,I){return D.apply(this,arguments)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(l,d,Z,Y,u){function F(){F=d._asyncToGenerator(function*(v,r,I){const P="string"===typeof v?Y.urlToObject(v):v;v=r[0].spatialReference;const O=u.getJsonType(r[0]);r={...I,query:{...P.query,f:"json",sr:v.wkid?v.wkid:JSON.stringify(v),
geometries:JSON.stringify(D(r))}};r=yield Z(P.path+"/simplify",r);return y(r.data,O,v)});return F.apply(this,arguments)}function D(v){return{geometryType:u.getJsonType(v[0]),geometries:v.map(r=>r.toJSON())}}function y(v,r,I){const P=u.getGeometryType(r);return v.map(O=>{O=P.fromJSON(O);O.spatialReference=I;return O})}l.simplify=function(v,r,I){return F.apply(this,arguments)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(l,d,Z){function Y(v,r){return v?D.get(v,r):null}function u(v,r,I,P=!0){const O=[];for(const t of r)if("*"!==t&&!v.has(t))if(P){r=F(t);try{const C=Y(r,v);if(!C)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!C.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:C});u(v,C.fieldNames,"expression contains missing fields")}catch(C){if((r=C&&C.details)&&
(r.clause||r.where))throw C;r&&r.missingFields?O.push(...r.missingFields):O.push(t)}}else O.push(t);if(O.length)throw new d("feature-store:unsupported-query",I,{missingFields:O});}function F(v){return v.split(" as ")[0]}const D=new Z.WhereClauseCache(50,500),y=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));l.getAliasFromFieldName=function(v){return v.split(" as ")[1]};l.getExpressionFromFieldName=
F;l.getWhereClause=Y;l.hasInvalidFieldType=function(v,r){return(v=r.get(v))?!y.has(v.type):!1};l.validateFields=u;l.validateHaving=function(v,r,I){if(!r)return!0;const P=D.get(r,v);if(!P)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:r});if(!P.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:r});u(v,P.fieldNames,"having contains missing fields");if(!P.getExpressions().every(O=>{const {aggregateType:t,
field:C}=O,b=v.has(C)&&v.get(C).name;return I.some(g=>{const {onStatisticField:m,statisticType:w}=g;return(v.has(m)&&v.get(m).name)===b&&w.toLowerCase().trim()===t})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:r});return!0};l.validateWhere=function(v,r){if(!r)return!0;const I=D.get(r,v);if(!I)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!I.isStandardized)throw new d("feature-store:unsupported-query",
"where clause is not standard",{where:r});u(v,I.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(l,d,Z){let Y=function(){function u(F,D){this._cache=new d(F);this._invalidCache=new d(D)}u.prototype.get=function(F,D){const y=`${D.uid}:${F}`,v=this._cache.get(y);if(v)return v;if(void 0!==this._invalidCache.get(y))return null;try{const r=
Z.WhereClause.create(F,D);this._cache.put(y,r);return r}catch{return this._invalidCache.put(y,null),null}};return u}();l.WhereClauseCache=Y;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(l){return function(){function d(Y,u){this._storage=new l.MemCacheStorage;this._storage.maxSize=Y;u&&this._storage.registerRemoveFunc("",u)}var Z=d.prototype;Z.put=function(Y,u){this._storage.put(Y,u,1,1)};Z.pop=function(Y){return this._storage.pop(Y)};
Z.get=function(Y){return this._storage.get(Y)};Z.clear=function(){this._storage.clearAll()};Z.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(l,d,Z,Y,u,F){function D(M,A){M+="";return M.length>=A?M:Array(A-M.length+1).join("0")+M}function y(M,A,e="0",f="0",E="0",U="0",ca="",ja="0",na="0"){return"+"===ca||"-"===
ca?(M=`${D(parseInt(M,10),4)}-${D(parseInt(A,10),2)}-${D(parseInt(e,10),2)}`,A="",10>parseFloat(U)&&(A="0"),f=`${D(parseInt(f,10),2)}:${D(parseInt(E,10),2)}:${A+parseFloat(U).toString()}`,ca=`${ca}${D(parseInt(ja,10),2)}:${D(parseInt(na,10),2)}`,new Date(M+"T"+f+ca)):new Date(parseInt(M,10),parseInt(A,10)-1,parseInt(e,10),parseInt(f,10),parseInt(E,10),parseFloat(U))}function v(M){let A=q.exec(M);if(null!==A){const [,e,f,E,U,ca,ja]=A;return y(e,f,E,U,ca,ja)}A=B.exec(M);if(null!==A){const [,e,f,E,U,
ca,ja,na,ta,ma]=A;return y(e,f,E,U,ca,ja,na,ta,ma)}A=R.exec(M);if(null!==A){const [,e,f,E,U,ca,ja,na,ta]=A;return y(e,f,E,U,ca,"0",ja,na,ta)}A=N.exec(M);if(null!==A){const [,e,f,E,U,ca]=A;return y(e,f,E,U,ca)}A=z.exec(M);if(null!==A){const [,e,f,E]=A;return y(e,f,E)}throw Error("SQL Invalid Timestamp");}function r(M){M=z.exec(M);if(null===M)throw Error("SQL Invalid Date");const [,A,e,f]=M;return new Date(parseInt(A,10),parseInt(e,10)-1,parseInt(f,10))}function I(M){return Array.isArray(M)?M:[M]}function P(M){return null!==
M?!0!==M:null}function O(M,A){return null!=M&&null!=A?!0===M&&!0===A:!1===M||!1===A?!1:null}function t(M,A){return null!=M&&null!=A?!0===M||!0===A:!0===M||!0===A?!0:null}function C(M,A){if(null==M)return null;let e=!1;for(const f of A)if(null==f)e=null;else if(M===f){e=!0;break}return e}function b(M,A,e){if(null==M)return null;let f="",E=0;for(let U=0;U<A.length;U++){const ca=A.charAt(U);switch(E){case 0:ca===e?E=1:f=0<="-[]/{}()*+?.\\^$|".indexOf(ca)?f+("\\"+ca):"%"===ca?f+".*":"_"===ca?f+".":f+
ca;break;case 1:f=0<="-[]/{}()*+?.\\^$|".indexOf(ca)?f+("\\"+ca):f+ca,E=0}}return(new RegExp("^"+f+"$")).test(M)}function g(M){return M instanceof Date?M.valueOf():M}function m(M,A,e){if(null==A||null==e)return null;A=g(A);e=g(e);switch(M){case "\x3c\x3e":return A!==e;case "\x3d":return A===e;case "\x3e":return A>e;case "\x3c":return A<e;case "\x3e\x3d":return A>=e;case "\x3c\x3d":return A<=e}}function w(M,A,e){if(A instanceof u.SqlInterval)if(e instanceof Date)switch(M){case "+":return new Date(A.valueInMilliseconds()+
e.getTime());case "-":return A.valueInMilliseconds()-e.getTime();case "*":return A.valueInMilliseconds()*e.getTime();case "/":return A.valueInMilliseconds()/e.getTime()}else if(e instanceof u.SqlInterval)switch(M){case "+":return u.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()+e.valueInMilliseconds());case "-":return u.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()-e.valueInMilliseconds());case "*":return A.valueInMilliseconds()*e.valueInMilliseconds();case "/":return A.valueInMilliseconds()/
e.valueInMilliseconds()}else A=A.valueInMilliseconds();else if(e instanceof u.SqlInterval)if(A instanceof Date)switch(M){case "+":return new Date(e.valueInMilliseconds()+A.getTime());case "-":return new Date(A.getTime()-e.valueInMilliseconds());case "*":return A.getTime()*e.valueInMilliseconds();case "/":return A.getTime()/e.valueInMilliseconds()}else e=e.valueInMilliseconds();else if(A instanceof Date&&"number"===typeof e)switch(e*=864E5,A=A.getTime(),M){case "+":return new Date(A+e);case "-":return new Date(A-
e);case "*":return new Date(A*e);case "/":return new Date(A/e)}else if(e instanceof Date&&"number"===typeof A)switch(A*=864E5,e=e.getTime(),M){case "+":return new Date(A+e);case "-":return new Date(A-e);case "*":return new Date(A*e);case "/":return new Date(A/e)}switch(M){case "+":return A+e;case "-":return A-e;case "*":return A*e;case "/":return A/e}}function h(M,A,e,f){M=f.getAttribute(M,A);return null!=M&&1===e[A]?new Date(M):M}const z=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,R=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,N=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,da=new Set(["current_timestamp","current_date","current_time"]);let K=function(){function M(){}M.makeBool=function(A){return!0===A};M.featureValue=function(A,e,f,E){return h(A,e,f,E)};M.equalsNull=function(A){return null===A};M.applyLike=function(A,e,f){return b(A,e,
f)};M.ensureArray=function(A){return I(A)};M.applyIn=function(A,e){return C(A,e)};M.currentDate=function(){const A=new Date;A.setHours(0,0,0,0);return A};M.makeSqlInterval=function(A,e,f){return u.SqlInterval.createFromValueAndQualifer(A,e,f)};M.convertInterval=function(A){return A instanceof u.SqlInterval?A.valueInMilliseconds():A};M.currentTimestamp=function(){return new Date};M.compare=function(A,e,f){return m(A,e,f)};M.calculate=function(A,e,f){return w(A,e,f)};M.makeComparable=function(A){return g(A)};
M.evaluateFunction=function(A,e){return u.evaluateFunction(A,e)};M.lookup=function(A,e){A=e[A];return void 0===A?null:A};M.between=function(A,e){return null==A||null==e[0]||null==e[1]?null:A>=e[0]&&A<=e[1]};M.notbetween=function(A,e){return null==A||null==e[0]||null==e[1]?null:A<e[0]||A>e[1]};M.ternaryNot=function(A){return P(A)};M.ternaryAnd=function(A,e){return O(A,e)};M.ternaryOr=function(A,e){return t(A,e)};return M}(),H=function(){function M(e,f){this.fieldsIndex=f;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=F.WhereGrammar.parse(e);const {isStandardized:E,isAggregate:U,referencedFieldNames:ca}=this.extractExpressionInfo(f);this.referencedFieldNames=ca;this.isStandardized=E;this.isAggregate=U}M.create=function(e,f){return new M(e,f)};var A=M.prototype;A.testSet=function(e,f=T){const E={};for(const U of this.fieldNames)E[U]=e.map(ca=>f.getAttribute(ca,U));return!!this.evaluateNode(this.parseTree,{attributes:E},T)};A.calculateValue=function(e,f=T){e=this.evaluateNode(this.parseTree,
e,f);return e instanceof u.SqlInterval?e.valueInMilliseconds()/864E5:e};A.calculateValueCompiled=function(e,f=T){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(e,this.parameters,f,this.datefields);if(Z("esri-csp-restrictions"))return this.calculateValue(e,f);this.compileMe();return this.parseTree._compiledVersion(e,this.parameters,f,this.datefields)};A.testFeature=function(e,f=T){return!!this.evaluateNode(this.parseTree,e,f)};A.testFeatureCompiled=function(e,f=T){if(null!=
this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(e,this.parameters,f,this.datefields);if(Z("esri-csp-restrictions"))return this.testFeature(e,f);this.compileMe();return!!this.parseTree._compiledVersion(e,this.parameters,f,this.datefields)};A.getFunctions=function(){const e=new Set;this.visitAll(this.parseTree,f=>{"function"===f.type&&e.add(f.name.toLowerCase())});return Array.from(e)};A.getExpressions=function(){const e=new Map;this.visitAll(this.parseTree,f=>{if("function"===
f.type){const E=f.name.toLowerCase();f=f.args.value[0];if("column_ref"===f.type){f=f.column;const U=`${E}-${f}`;e.has(U)||e.set(U,{aggregateType:E,field:f})}}});return[...e.values()]};A.getVariables=function(){const e=new Set;this.visitAll(this.parseTree,f=>{"param"===f.type&&e.add(f.value.toLowerCase())});return Array.from(e)};A.compileMe=function(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups",
"attributeAdapter","datefields",e)).bind(K)};A.extractExpressionInfo=function(e){const f=[],E=new Set;let U=!0,ca=!0;this.visitAll(this.parseTree,ja=>{switch(ja.type){case "column_ref":{const na=e.get(ja.column);let ta,ma;na?ta=ma=na.name:(ma=ja.column,ta=ma.toLowerCase());!na||"date"!==na.type&&"esriFieldTypeDate"!==na.type||(this.datefields[na.name]=1);E.has(ta)||(E.add(ta),f.push(ma));ja.column=ma;break}case "function":{const {name:na,args:ta}=ja;ja=ta.value.length;U&&(U=u.isStandardized(na,ja));
ca&&(ca=Y.isAggregate(na,ja))}}});return{referencedFieldNames:Array.from(f),isStandardized:U,isAggregate:ca}};A.visitAll=function(e,f){if(null!=e)switch(f(e),e.type){case "when_clause":this.visitAll(e.operand,f);this.visitAll(e.value,f);break;case "case_expression":for(const E of e.clauses)this.visitAll(E,f);"simple"===e.format&&this.visitAll(e.operand,f);null!==e.else&&this.visitAll(e.else,f);break;case "expr_list":for(const E of e.value)this.visitAll(E,f);break;case "unary_expr":this.visitAll(e.expr,
f);break;case "binary_expr":this.visitAll(e.left,f);this.visitAll(e.right,f);break;case "function":this.visitAll(e.args,f)}};A.evaluateNodeToJavaScript=function(e){switch(e.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case "case_expression":var f="";if("simple"===e.format){var E="this.makeComparable("+this.evaluateNodeToJavaScript(e.operand)+")";f="( ";for(let U=0;U<e.clauses.length;U++)f+=
" ("+E+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(e.clauses[U].operand)+")) ? ("+this.evaluateNodeToJavaScript(e.clauses[U].value)+") : "}else for(f="( ",E=0;E<e.clauses.length;E++)f+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[E].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(e.clauses[E].value)+") : ";f=null!==e.else?f+this.evaluateNodeToJavaScript(e.else):f+"null";return f+=" )";case "param":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+
",lookups)";case "expr_list":f="[";for(E of e.value)"["!==f&&(f+=","),f+=this.evaluateNodeToJavaScript(E);return f+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case "binary_expr":switch(e.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case "IS":if("null"!==
e.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case "ISNOT":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(e.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+
")"}throw Error("Not Supported Operator "+e.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(e.value);case "date":return"(new Date("+r(e.value).getTime().toString()+"))";case "timestamp":return"(new Date("+v(e.value).getTime().toString()+"))";case "current_time":return"date"===e.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(e.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+")"}throw Error("Unsupported sql syntax "+e.type);};A.evaluateNode=function(e,f,E){switch(e.type){case "interval":return f=this.evaluateNode(e.value,f,E),u.SqlInterval.createFromValueAndQualifer(f,e.qualifier,e.op);case "case_expression":if("simple"===e.format){var U=g(this.evaluateNode(e.operand,f,E));for(var ca=0;ca<e.clauses.length;ca++)if(U===g(this.evaluateNode(e.clauses[ca].operand,f,E)))return this.evaluateNode(e.clauses[ca].value,
f,E)}else for(U=0;U<e.clauses.length;U++)if(!0===this.evaluateNode(e.clauses[U].operand,f,E))return this.evaluateNode(e.clauses[U].value,f,E);return null!==e.else?this.evaluateNode(e.else,f,E):null;case "param":return this.parameters[e.value.toLowerCase()];case "expr_list":U=[];for(ca of e.value)U.push(this.evaluateNode(ca,f,E));return U;case "unary_expr":return P(this.evaluateNode(e.expr,f,E));case "binary_expr":switch(e.operator){case "AND":return O(this.evaluateNode(e.left,f,E),this.evaluateNode(e.right,
f,E));case "OR":return t(this.evaluateNode(e.left,f,E),this.evaluateNode(e.right,f,E));case "IS":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(e.left,f,E);case "ISNOT":if("null"!==e.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(e.left,f,E);case "IN":return U=I(this.evaluateNode(e.right,f,E)),C(this.evaluateNode(e.left,f,E),U);case "NOT IN":return U=I(this.evaluateNode(e.right,f,E)),P(C(this.evaluateNode(e.left,f,E),
U));case "BETWEEN":return U=this.evaluateNode(e.left,f,E),e=this.evaluateNode(e.right,f,E),null==U||null==e[0]||null==e[1]?null:U>=g(e[0])&&U<=g(e[1]);case "NOTBETWEEN":return U=this.evaluateNode(e.left,f,E),e=this.evaluateNode(e.right,f,E),null==U||null==e[0]||null==e[1]?null:U<g(e[0])||U>g(e[1]);case "LIKE":return b(this.evaluateNode(e.left,f,E),this.evaluateNode(e.right,f,E),e.escape);case "NOT LIKE":return P(b(this.evaluateNode(e.left,f,E),this.evaluateNode(e.right,f,E),e.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return m(e.operator,
this.evaluateNode(e.left,f,E),this.evaluateNode(e.right,f,E));case "-":case "+":case "*":case "/":return w(e.operator,this.evaluateNode(e.left,f,E),this.evaluateNode(e.right,f,E))}case "null":case "bool":case "string":case "number":return e.value;case "date":return r(e.value);case "timestamp":return v(e.value);case "current_time":return f=new Date,"date"===e.mode&&f.setHours(0,0,0,0),f;case "column_ref":return h(f,e.column,this.datefields,E);case "function":return f=this.evaluateNode(e.args,f,E),
this.isAggregate?Y.aggregateFunction(e.name,f):u.evaluateFunction(e.name,f)}throw Error("Unsupported sql syntax "+e.type);};d._createClass(M,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this.visitAll(this.parseTree,e=>{"current_time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||da.has(e.name.toLowerCase()))});
return this._hasDateFunctions}}]);return M}();const T={getAttribute(M,A){return(M&&"object"===typeof M.attributes?M.attributes:M)[A]}};l.WhereClause=H;l.defaultAttributeAdapter=T;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(l){function d(u){let F=0;for(let D=0;D<u.length;D++)F+=u[D];return F/u.length}function Z(u){const F=d(u),D=u.length;let y=0;for(const v of u)y+=(v-F)**2;return 1<D?y/(D-1):0}const Y={min:{minParams:1,
maxParams:1,evaluate:u=>null==u[0]?null:Math.min.apply(Math,u[0])},max:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.max.apply(Math,u[0])},avg:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:d(u[0])},sum:{minParams:1,maxParams:1,evaluate:u=>{if(null==u[0])u=null;else{{u=u[0];let F=0;for(let D=0;D<u.length;D++)F+=u[D];u=F}}return u}},stddev:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.sqrt(Z(u[0]))},count:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:u[0].length},
var:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Z(u[0])}};l.aggregateFunction=function(u,F){const D=Y[u.toLowerCase()];if(null==D)throw Error("Function Not Recognised");if(F.length<D.minParams||F.length>D.maxParams)throw Error(`Invalid Parameter count for call to ${u.toUpperCase()}`);return D.evaluate(F)};l.isAggregate=function(u,F){u=Y[u.toLowerCase()];return null!=u&&F>=u.minParams&&F<=u.maxParams};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports",
"../string"],function(l,d){let Z=function(){function u(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}u.fixDefaults=function(F){if(null!==F.precision||null!==F.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};u.createFromMilliseconds=function(F){const D=new u;D.second=F/1E3;return D};u.createFromValueAndQualifer=function(F,D,y){let v=null;const r=new u;r.op="-"===y?"-":"+";if("interval-period"===D.type){u.fixDefaults(D);if("year"===
D.period||"month"===D.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(F))r[D.period]=parseFloat(F);else throw Error("Illegal Interval");}else{u.fixDefaults(D.start);u.fixDefaults(D.end);if("year"===D.start.period||"month"===D.start.period)throw Error("Year-Month Intervals not supported");if("year"===D.end.period||"month"===D.end.period)throw Error("Year-Month Intervals not supported");switch(D.start.period){case "day":switch(D.end.period){case "hour":v=/^[0-9]{1,} [0-9]{1,}$/;
if(v.test(F))r[D.start.period]=parseFloat(F.split(" ")[0]),r[D.end.period]=parseFloat(F.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":v=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(v.test(F))r[D.start.period]=parseFloat(F.split(" ")[0]),F=F.split(" ")[1].split(":"),r.hour=parseFloat(F[0]),r.minute=parseFloat(F[1]);else throw Error("Illegal Interval");break;case "second":v=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(v.test(F))r[D.start.period]=parseFloat(F.split(" ")[0]),
F=F.split(" ")[1].split(":"),r.hour=parseFloat(F[0]),r.minute=parseFloat(F[1]),r.second=parseFloat(F[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(D.end.period){case "minute":v=/^[0-9]{1,}:[0-9]{1,}$/;if(v.test(F))r.hour=parseFloat(F.split(":")[0]),r.minute=parseFloat(F.split(":")[1]);else throw Error("Illegal Interval");break;case "second":v=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(v.test(F))F=F.split(":"),r.hour=parseFloat(F[0]),
r.minute=parseFloat(F[1]),r.second=parseFloat(F[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(D.end.period){case "second":v=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(v.test(F))F=F.split(":"),r.minute=parseFloat(F[0]),r.second=parseFloat(F[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return r};u.prototype.valueInMilliseconds=function(){return("-"===this.op?
-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return u}();const Y={extract:{minParams:2,maxParams:2,evaluate:([u,F])=>{if(null==F)return null;if(F instanceof Date)switch(u.toUpperCase()){case "SECOND":return F.getSeconds();case "MINUTE":return F.getMinutes();case "HOUR":return F.getHours();case "DAY":return F.getDate();case "MONTH":return F.getMonth()+1;case "YEAR":return F.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");
}},substring:{minParams:2,maxParams:3,evaluate:u=>{if(2===u.length){const [F,D]=u;return null==F||null==D?null:F.toString().substring(D-1)}if(3===u.length){const [F,D,y]=u;return null==F||null==D||null==y?null:0>=y?"":F.toString().substring(D-1,D+y-1)}}},position:{minParams:2,maxParams:2,evaluate:([u,F])=>null==u||null==F?null:F.indexOf(u)+1},trim:{minParams:2,maxParams:3,evaluate:u=>{var F=3===u.length,D=F?u[1]:" ";F=F?u[2]:u[1];if(null==D||null==F)return null;D=`(${d.escapeRegExpString(D)})`;switch(u[0]){case "BOTH":return F.replace(new RegExp(`^${D}*|${D}*$`,
"g"),"");case "LEADING":return F.replace(new RegExp(`^${D}*`,"g"),"");case "TRAILING":return F.replace(new RegExp(`${D}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.abs(u[0])},ceiling:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.ceil(u[0])},floor:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.floor(u[0])},log:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.log(u[0])},log10:{minParams:1,
maxParams:1,evaluate:u=>null==u[0]?null:Math.log(u[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.sin(u[0])},cos:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.cos(u[0])},tan:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.tan(u[0])},asin:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.asin(u[0])},acos:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.acos(u[0])},atan:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.atan(u[0])},
sign:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:0<u[0]?1:0>u[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:u=>null==u[0]||null==u[1]?null:u[0]**u[1]},mod:{minParams:2,maxParams:2,evaluate:u=>null==u[0]||null==u[1]?null:u[0]%u[1]},round:{minParams:1,maxParams:2,evaluate:u=>{const F=u[0];u=2===u.length?10**u[1]:1;return null==F?null:Math.round(F*u)/u}},truncate:{minParams:1,maxParams:2,evaluate:u=>null==u[0]?null:1===u.length?parseInt(u[0].toFixed(0),10):parseFloat(u[0].toFixed(u[1]))},
char_length:{minParams:1,maxParams:1,evaluate:u=>"string"===typeof u[0]||u[0]instanceof String?u[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:u=>{let F="";for(let D=0;D<u.length;D++){if(null==u[D])return null;F+=u[D].toString()}return F}},lower:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:u[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:u[0].toString().toUpperCase()}};l.SqlInterval=Z;l.evaluateFunction=function(u,F){const D=Y[u.toLowerCase()];
if(null==D)throw Error("Function Not Recognised");if(F.length<D.minParams||F.length>D.maxParams)throw Error(`Invalid Parameter count for call to ${u.toUpperCase()}`);return D.evaluate(F)};l.isStandardized=function(u,F){u=Y[u.toLowerCase()];return null!=u&&F>=u.minParams&&F<=u.maxParams};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(l,d){var Z={exports:{}};(function(u){(function(F,D){u.exports&&
(u.exports=D())})(d.commonjsGlobal,function(){function F(y,v,r,I){y=Error.call(this,y);Object.setPrototypeOf&&Object.setPrototypeOf(y,F.prototype);y.expected=v;y.found=r;y.location=I;y.name="SyntaxError";return y}function D(y,v,r){r=r||" ";if(y.length>v)return y;v-=y.length;r+=r.repeat(v);return y+r.slice(0,v)}(function(y,v){function r(){this.constructor=y}r.prototype=v.prototype;y.prototype=new r})(F,Error);F.prototype.format=function(y){var v="Error: "+this.message;if(this.location){var r=null,
I;for(I=0;I<y.length;I++)if(y[I].source===this.location.source){r=y[I].text.split(/\r\n|\n|\r/g);break}y=this.location.start;I=this.location.source+":"+y.line+":"+y.column;if(r){var P=this.location.end,O=D("",y.line.toString().length);r=r[y.line-1];P=y.line===P.line?P.column:r.length+1;v+="\n --\x3e "+I+"\n"+O+" |\n"+y.line+" | "+r+"\n"+O+" | "+D("",y.column-1)+D("",P-y.column,"^")}else v+="\n at "+I}return v};F.buildMessage=function(y,v){function r(C){return C.charCodeAt(0).toString(16).toUpperCase()}
function I(C){return C.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+r(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+r(b)})}function P(C){return C.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+
r(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+r(b)})}function O(C){return t[C.type](C)}var t={literal:function(C){return'"'+I(C.text)+'"'},class:function(C){var b=C.parts.map(function(g){return Array.isArray(g)?P(g[0])+"-"+P(g[1]):P(g)});return"["+(C.inverted?"^":"")+b+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(C){return C.description}};return"Expected "+function(C){C=C.map(O);var b,g;C.sort();if(0<C.length){for(g=b=1;b<C.length;b++)C[b-
1]!==C[b]&&(C[g]=C[b],g++);C.length=g}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}(y)+" but "+(v?'"'+I(v)+'"':"end of input")+" found."};return{SyntaxError:F,parse:function(y,v){function r(x,G){return{type:"literal",text:x,ignoreCase:G}}function I(x,G,W){return{type:"class",parts:x,inverted:G,ignoreCase:W}}function P(x){var G=ac[x],W;if(!G){for(W=x-1;!ac[W];)W--;G=ac[W];for(G={line:G.line,column:G.column};W<x;)10===
y.charCodeAt(W)?(G.line++,G.column=1):G.column++,W++;ac[x]=G}return G}function O(x,G){var W=P(x),qa=P(G);return{source:$a,start:{offset:x,line:W.line,column:W.column},end:{offset:G,line:qa.line,column:qa.column}}}function t(x){k<pb||(k>pb&&(pb=k,tc=[]),tc.push(x))}function C(){var x=k;ra();var G=g();G!==a?(ra(),x=G):(k=x,x=a);return x}function b(){var x=k;var G=g();if(G!==a){x=[];var W=k;var qa=ra();var Aa=Ea();if(Aa!==a){var La=ra();var Ma=g();Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)}else k=W,W=a;for(;W!==
a;)x.push(W),W=k,qa=ra(),Aa=Ea(),Aa!==a?(La=ra(),Ma=g(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)):(k=W,W=a);W={type:"expr_list"};G=[G];for(qa=0;qa<x.length;qa++)G.push(x[qa][3]);W.value=G;x=W}else k=x,x=a;return x}function g(){var x=k;var G=m();if(G!==a){x=[];var W=k;var qa=ra();var Aa=S();if(Aa!==a){var La=ra();var Ma=m();Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)}else k=W,W=a;for(;W!==a;)x.push(W),W=k,qa=ra(),Aa=S(),Aa!==a?(La=ra(),Ma=m(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)):(k=W,W=a);x=Va(G,x)}else k=x,x=
a;return x}function m(){var x=k;var G=w();if(G!==a){x=[];var W=k;var qa=ra();var Aa=J();if(Aa!==a){var La=ra();var Ma=w();Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)}else k=W,W=a;for(;W!==a;)x.push(W),W=k,qa=ra(),Aa=J(),Aa!==a?(La=ra(),Ma=w(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)):(k=W,W=a);x=Va(G,x)}else k=x,x=a;return x}function w(){var x=k;var G=n();if(G===a){G=k;if(33===y.charCodeAt(k)){var W=tb;k++}else W=a,0===sa&&t(ld);if(W!==a){var qa=k;sa++;if(61===y.charCodeAt(k)){var Aa=jb;k++}else Aa=a,0===sa&&
t(Jc);sa--;Aa===a?qa=void 0:(k=qa,qa=a);qa!==a?G=W=[W,qa]:(k=G,G=a)}else k=G,G=a}G!==a?(W=ra(),qa=w(),qa!==a?x={type:"unary_expr",operator:"NOT",expr:qa}:(k=x,x=a)):(k=x,x=a);if(x===a){G=k;x=B();if(x!==a){ra();G=[];W=k;qa=ra();Aa=h();if(Aa!==a){var La=ra();var Ma=B();Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)}else k=W,W=a;if(W!==a)for(;W!==a;)G.push(W),W=k,qa=ra(),Aa=h(),Aa!==a?(La=ra(),Ma=B(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)):(k=W,W=a);else G=a;G!==a&&(G={type:"arithmetic",tail:G});G===a&&(G=k,W=q(),
W!==a?(ra(),qa=Fa(),qa!==a?(ra(),qa=b(),qa!==a?(ra(),Aa=Pa(),Aa!==a?G={op:W,right:qa}:(k=G,G=a)):(k=G,G=a)):(k=G,G=a)):(k=G,G=a),G===a&&(G=k,W=q(),W!==a?(ra(),qa=Fa(),qa!==a?(ra(),qa=Pa(),qa!==a?G={op:W,right:{type:"expr_list",value:[]}}:(k=G,G=a)):(k=G,G=a)):(k=G,G=a),G===a&&(G=k,W=q(),W!==a?(ra(),qa=e(),qa!==a?G={op:W,right:qa}:(k=G,G=a)):(k=G,G=a))),G===a&&(G=k,Aa=n(),Aa!==a?(ra(),W=V(),W!==a?(ra(),qa=B(),qa!==a?(ra(),La=J(),La!==a?(ra(),Aa=B(),Aa!==a?G={op:"NOT"+W,right:{type:"expr_list",value:[qa,
Aa]}}:(k=G,G=a)):(k=G,G=a)):(k=G,G=a)):(k=G,G=a)):(k=G,G=a),G===a&&(G=k,Aa=V(),Aa!==a?(ra(),W=B(),W!==a?(ra(),qa=J(),qa!==a?(ra(),La=B(),La!==a?G={op:Aa,right:{type:"expr_list",value:[W,La]}}:(k=G,G=a)):(k=G,G=a)):(k=G,G=a)):(k=G,G=a)),G===a&&(G=k,W=p(),W!==a?(ra(),qa=n(),qa!==a?(ra(),qa=B(),qa!==a?G={op:W+"NOT",right:qa}:(k=G,G=a)):(k=G,G=a)):(k=G,G=a),G===a&&(G=k,W=p(),W!==a?(ra(),qa=B(),qa!==a?G={op:W,right:qa}:(k=G,G=a)):(k=G,G=a)),G===a&&(G=k,W=z(),W!==a?(ra(),qa=na(),qa!==a?(ra(),Aa=k,y.substr(k,
6).toLowerCase()===Ua?(La=y.substr(k,6),k+=6):(La=a,0===sa&&t(md)),La!==a?(La=k,sa++,Ma=M(),sa--,Ma===a?La=void 0:(k=La,La=a),La!==a?Aa="ESCAPE":(k=Aa,Aa=a)):(k=Aa,Aa=a),Aa!==a?(ra(),Aa=ta(),Aa!==a?G={op:W,right:qa,escape:Aa.value}:(k=G,G=a)):(k=G,G=a)):(k=G,G=a)):(k=G,G=a),G===a&&(G=k,W=z(),W!==a?(ra(),qa=na(),qa!==a?G={op:W,right:qa,escape:""}:(k=G,G=a)):(k=G,G=a))))));G===a&&(G=null);""==G||void 0==G||null==G?G=x:(W=null,G=W="arithmetic"==G.type?Va(x,G.tail):Ta(G.op,x,G.right,G.escape))}else k=
G,G=a;x=G}return x}function h(){if(y.substr(k,2)===Ab){var x=Ab;k+=2}else x=a,0===sa&&t(nd);x===a&&(62===y.charCodeAt(k)?(x=Zb,k++):(x=a,0===sa&&t(od)),x===a&&(y.substr(k,2)===Cb?(x=Cb,k+=2):(x=a,0===sa&&t(pd)),x===a&&(y.substr(k,2)===$b?(x=$b,k+=2):(x=a,0===sa&&t(qd)),x===a&&(60===y.charCodeAt(k)?(x=kb,k++):(x=a,0===sa&&t(rd)),x===a&&(61===y.charCodeAt(k)?(x=jb,k++):(x=a,0===sa&&t(Jc)),x===a&&(y.substr(k,2)===sb?(x=sb,k+=2):(x=a,0===sa&&t(sd))))))));return x}function z(){var x=x=k;var G=n();if(G!==
a){var W=ra();var qa=ea();qa!==a?x=G=[G,W,qa]:(k=x,x=a)}else k=x,x=a;x!==a&&(x=x[0]+" "+x[2]);x===a&&(x=ea());return x}function q(){var x=x=k;var G=n();if(G!==a){var W=ra();var qa=c();qa!==a?x=G=[G,W,qa]:(k=x,x=a)}else k=x,x=a;x!==a&&(x=x[0]+" "+x[2]);x===a&&(x=c());return x}function B(){var x=k;var G=N();if(G!==a){x=[];var W=k;var qa=ra();var Aa=R();if(Aa!==a){var La=ra();var Ma=N();Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)}else k=W,W=a;for(;W!==a;)x.push(W),W=k,qa=ra(),Aa=R(),Aa!==a?(La=ra(),Ma=N(),Ma!==
a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)):(k=W,W=a);x=Va(G,x)}else k=x,x=a;return x}function R(){if(43===y.charCodeAt(k)){var x=Qa;k++}else x=a,0===sa&&t(uc);x===a&&(45===y.charCodeAt(k)?(x=eb,k++):(x=a,0===sa&&t(vc)));return x}function N(){var x=k;var G=K();if(G!==a){x=[];var W=k;var qa=ra();var Aa=da();if(Aa!==a){var La=ra();var Ma=K();Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)}else k=W,W=a;for(;W!==a;)x.push(W),W=k,qa=ra(),Aa=da(),Aa!==a?(La=ra(),Ma=K(),Ma!==a?W=qa=[qa,Aa,La,Ma]:(k=W,W=a)):(k=W,W=a);x=Va(G,x)}else k=
x,x=a;return x}function da(){if(42===y.charCodeAt(k)){var x=ob;k++}else x=a,0===sa&&t(td);x===a&&(47===y.charCodeAt(k)?(x=Na,k++):(x=a,0===sa&&t(ud)));return x}function K(){var x=ta();if(x===a){var G=k;var W=k;var qa=Ja();if(qa!==a){var Aa=Ba();if(Aa!==a){var La=Sa();La!==a?W=parseFloat(qa+Aa+La):(k=W,W=a)}else k=W,W=a}else k=W,W=a;W===a&&(W=k,qa=Ja(),qa!==a?(Aa=Ba(),Aa!==a?W=parseFloat(qa+Aa):(k=W,W=a)):(k=W,W=a),W===a&&(W=k,qa=Ja(),qa!==a?(Aa=Sa(),Aa!==a?W=parseFloat(qa+Aa):(k=W,W=a)):(k=W,W=a),
W===a&&(W=k,qa=Ja(),qa!==a&&(qa=parseFloat(qa)),W=qa)));var Ma=W;if(Ma!==a){var bc=k;sa++;var vd=T();sa--;vd===a?bc=void 0:(k=bc,bc=a);bc!==a?G={type:"number",value:Ma}:(k=G,G=a)}else k=G,G=a;x=G;if(x===a){var Pb=k;var Eb=k;if(y.substr(k,4).toLowerCase()===ya){var cc=y.substr(k,4);k+=4}else cc=a,0===sa&&t(wd);if(cc!==a){var Qb=k;sa++;var xd=M();sa--;xd===a?Qb=void 0:(k=Qb,Qb=a);Qb!==a?Eb=cc=[cc,Qb]:(k=Eb,Eb=a)}else k=Eb,Eb=a;var Bb=Eb;Bb!==a&&(Bb={type:"bool",value:!0});Pb=Bb;if(Pb===a){Pb=k;var Fb=
k;if(y.substr(k,5).toLowerCase()===Ha){var dc=y.substr(k,5);k+=5}else dc=a,0===sa&&t(yd);if(dc!==a){var Rb=k;sa++;var zd=M();sa--;zd===a?Rb=void 0:(k=Rb,Rb=a);Rb!==a?Fb=dc=[dc,Rb]:(k=Fb,Fb=a)}else k=Fb,Fb=a;Bb=Fb;Bb!==a&&(Bb={type:"bool",value:!1});Pb=Bb}x=Pb;if(x===a){var Gb=k;if(y.substr(k,4).toLowerCase()===xa){var ec=y.substr(k,4);k+=4}else ec=a,0===sa&&t(Ad);if(ec!==a){var Sb=k;sa++;var Bd=M();sa--;Bd===a?Sb=void 0:(k=Sb,Sb=a);Sb!==a?Gb=ec=[ec,Sb]:(k=Gb,Gb=a)}else k=Gb,Gb=a;var wc=Gb;wc!==a&&
(wc={type:"null",value:null});x=wc;if(x===a){var Hb=k;var Ib=k;if(y.substr(k,4).toLowerCase()===Cd){var Kc=y.substr(k,4);k+=4}else Kc=a,0===sa&&t(Dd);if(Kc!==a){var fc=k;sa++;var Ed=M();sa--;Ed===a?fc=void 0:(k=fc,fc=a);fc!==a?Ib="DATE":(k=Ib,Ib=a)}else k=Ib,Ib=a;if(Ib!==a){ra();var Lc=na();Lc!==a?Hb={type:"date",value:Lc.value}:(k=Hb,Hb=a)}else k=Hb,Hb=a;x=Hb;if(x===a){var Jb=k;var Kb=k;if(y.substr(k,9).toLowerCase()===Fd){var Mc=y.substr(k,9);k+=9}else Mc=a,0===sa&&t(Gd);if(Mc!==a){var gc=k;sa++;
var Hd=M();sa--;Hd===a?gc=void 0:(k=gc,gc=a);gc!==a?Kb="TIMESTAMP":(k=Kb,Kb=a)}else k=Kb,Kb=a;if(Kb!==a){ra();var Nc=na();Nc!==a?Jb={type:"timestamp",value:Nc.value}:(k=Jb,Jb=a)}else k=Jb,Jb=a;x=Jb;if(x===a){var cb=k;var xc=L();if(xc!==a){ra();if(45===y.charCodeAt(k)){var ub=eb;k++}else ub=a,0===sa&&t(vc);ub===a&&(43===y.charCodeAt(k)?(ub=Qa,k++):(ub=a,0===sa&&t(uc)));if(ub!==a){ra();var Tb=na();if(Tb!==a){ra();var Oc=E();Oc!==a?cb={type:"interval",value:Tb,qualifier:Oc,op:ub}:(k=cb,cb=a)}else k=
cb,cb=a}else k=cb,cb=a}else k=cb,cb=a;cb===a&&(cb=k,xc=L(),xc!==a?(ra(),ub=na(),ub!==a?(ra(),Tb=E(),Tb!==a?cb={type:"interval",value:ub,qualifier:Tb,op:""}:(k=cb,cb=a)):(k=cb,cb=a)):(k=cb,cb=a));x=cb}}}}}}var Ya=x;if(Ya===a){var gb=k;var Lb=k;if(y.substr(k,7).toLowerCase()===Id){var Pc=y.substr(k,7);k+=7}else Pc=a,0===sa&&t(Jd);if(Pc!==a){var hc=k;sa++;var Kd=M();sa--;Kd===a?hc=void 0:(k=hc,hc=a);hc!==a?Lb="EXTRACT":(k=Lb,Lb=a)}else k=Lb,Lb=a;if(Lb!==a){ra();var Ld=Fa();if(Ld!==a){ra();var mb=Q();
mb===a&&(mb=ba(),mb===a&&(mb=oa(),mb===a&&(mb=pa(),mb===a&&(mb=ua(),mb===a&&(mb=wa())))));var Qc=mb;if(Qc!==a){ra();var Md=ia();if(Md!==a){ra();var Rc=g();if(Rc!==a){ra();var Nd=Pa();Nd!==a?gb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Qc},Rc]}}:(k=gb,gb=a)}else k=gb,gb=a}else k=gb,gb=a}else k=gb,gb=a}else k=gb,gb=a}else k=gb,gb=a;Ya=gb;if(Ya===a){var hb=k;var Mb=k;if(y.substr(k,9).toLowerCase()===Od){var Sc=y.substr(k,9);k+=9}else Sc=a,0===sa&&t(Pd);if(Sc!==
a){var ic=k;sa++;var Qd=M();sa--;Qd===a?ic=void 0:(k=ic,ic=a);ic!==a?Mb="SUBSTRING":(k=Mb,Mb=a)}else k=Mb,Mb=a;if(Mb!==a){ra();var Rd=Fa();if(Rd!==a){ra();var yc=g();if(yc!==a){ra();var Sd=ia();if(Sd!==a){ra();var zc=g();if(zc!==a){ra();var vb=k;var Nb=k;if(y.substr(k,3).toLowerCase()===Td){var Tc=y.substr(k,3);k+=3}else Tc=a,0===sa&&t(Ud);if(Tc!==a){var jc=k;sa++;var Vd=M();sa--;Vd===a?jc=void 0:(k=jc,jc=a);jc!==a?Nb="FOR":(k=Nb,Nb=a)}else k=Nb,Nb=a;var Ub=Nb;if(Ub!==a){var Wd=ra();var Uc=g();if(Uc!==
a){var Xd=ra();vb=Ub=[Ub,Wd,Uc,Xd]}else k=vb,vb=a}else k=vb,vb=a;vb===a&&(vb=null);Ub=Pa();Ub!==a?hb={type:"function",name:"substring",args:{type:"expr_list",value:vb?[yc,zc,vb[2]]:[yc,zc]}}:(k=hb,hb=a)}else k=hb,hb=a}else k=hb,hb=a}else k=hb,hb=a}else k=hb,hb=a}else k=hb,hb=a;Ya=hb;if(Ya===a){var Za=k;var Ac=fa();if(Ac!==a){ra();var Bc=Fa();if(Bc!==a){ra();var wb=f();wb===a&&(wb=null);ra();var Vb=g();if(Vb!==a){ra();var Cc=ia();if(Cc!==a){ra();var Vc=g();if(Vc!==a){ra();var Yd=Pa();Yd!==a?Za={type:"function",
name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb,Vc]}}:(k=Za,Za=a)}else k=Za,Za=a}else k=Za,Za=a}else k=Za,Za=a}else k=Za,Za=a}else k=Za,Za=a;Za===a&&(Za=k,Ac=fa(),Ac!==a?(ra(),Bc=Fa(),Bc!==a?(ra(),wb=f(),wb===a&&(wb=null),ra(),Vb=g(),Vb!==a?(ra(),Cc=Pa(),Cc!==a?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb]}}:(k=Za,Za=a)):(k=Za,Za=a)):(k=Za,Za=a)):(k=Za,Za=a));Ya=Za;if(Ya===a){var ib=k;var Ob=k;if(y.substr(k,
8).toLowerCase()===Zd){var Wc=y.substr(k,8);k+=8}else Wc=a,0===sa&&t($d);if(Wc!==a){var kc=k;sa++;var ae=M();sa--;ae===a?kc=void 0:(k=kc,kc=a);kc!==a?Ob="POSITION":(k=Ob,Ob=a)}else k=Ob,Ob=a;if(Ob!==a){ra();var be=Fa();if(be!==a){ra();var Xc=g();if(Xc!==a){ra();var ce=c();if(ce!==a){ra();var Yc=g();if(Yc!==a){ra();var de=Pa();de!==a?ib={type:"function",name:"position",args:{type:"expr_list",value:[Xc,Yc]}}:(k=ib,ib=a)}else k=ib,ib=a}else k=ib,ib=a}else k=ib,ib=a}else k=ib,ib=a}else k=ib,ib=a;Ya=ib;
if(Ya===a){var zb=k;var lc;var nb=k;nb=lc=H();if(nb===a)if(nb=k,96===y.charCodeAt(k)?(lc=Zc,k++):(lc=a,0===sa&&t($c)),lc!==a){var mc=[];if(ad.test(y.charAt(k))){var xb=y.charAt(k);k++}else xb=a,0===sa&&t(bd);if(xb!==a)for(;xb!==a;)mc.push(xb),ad.test(y.charAt(k))?(xb=y.charAt(k),k++):(xb=a,0===sa&&t(bd));else mc=a;mc!==a?(96===y.charCodeAt(k)?(xb=Zc,k++):(xb=a,0===sa&&t($c)),xb!==a?nb=mc.join(""):(k=nb,nb=a)):(k=nb,nb=a)}else k=nb,nb=a;var cd=nb;if(cd!==a){ra();var ee=Fa();if(ee!==a){ra();var nc=
b();nc===a&&(nc=null);ra();var fe=Pa();fe!==a?zb={type:"function",name:cd,args:nc?nc:{type:"expr_list",value:[]}}:(k=zb,zb=a)}else k=zb,zb=a}else k=zb,zb=a;Ya=zb;if(Ya===a){var qb;var db=k;var Dc=za();if(Dc!==a){ra();var Wb=g();if(Wb!==a){ra();var Xb=[];for(qb=la();qb!==a;)Xb.push(qb),qb=la();qb=ra();var oc=Ga();oc!==a?db={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:null}:(k=db,db=a)}else k=db,db=a}else k=db,db=a;if(db===a)if(db=k,Dc=za(),Dc!==a)if(ra(),Wb=g(),Wb!==a){ra();Xb=
[];for(qb=la();qb!==a;)Xb.push(qb),qb=la();qb=ra();oc=va();if(oc!==a){ra();var ge=Ga();ge!==a?db={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:oc.value}:(k=db,db=a)}else k=db,db=a}else k=db,db=a;else k=db,db=a;var Ec=db;if(Ec===a){var rb;var fb=k;var Fc=za();if(Fc!==a){ra();var Yb=[];for(rb=ma();rb!==a;)Yb.push(rb),rb=ma();rb=ra();var pc=Ga();pc!==a?fb={type:"case_expression",format:"searched",clauses:Yb,else:null}:(k=fb,fb=a)}else k=fb,fb=a;if(fb===a)if(fb=k,Fc=za(),Fc!==a){ra();
Yb=[];for(rb=ma();rb!==a;)Yb.push(rb),rb=ma();rb=ra();pc=va();if(pc!==a){ra();var he=Ga();he!==a?fb={type:"case_expression",format:"searched",clauses:Yb,else:pc.value}:(k=fb,fb=a)}else k=fb,fb=a}else k=fb,fb=a;Ec=fb}Ya=Ec;if(Ya===a){var qc;var rc=k;var dd=T();if(dd!==a){var ed=[];for(qc=A();qc!==a;)ed.push(qc),qc=A();rc=dd+ed.join("")}else k=rc,rc=a;var sc=rc;if(sc!==a){var Gc=sc;sc=/^CURRENT_DATE$/i.test(Gc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Gc)?{type:"current_time",mode:"timestamp"}:
{type:"column_ref",table:"",column:Gc}}Ya=sc;if(Ya===a&&(Ya=e(),Ya===a)){Ya=k;var ie=Fa();if(ie!==a){ra();var Hc=g();if(Hc!==a){ra();var je=Pa();je!==a?(Hc.paren=!0,Ya=Hc):(k=Ya,Ya=a)}else k=Ya,Ya=a}else k=Ya,Ya=a}}}}}}}}return Ya}function H(){var x;var G=k;var W=T();if(W!==a){G=[];for(x=M();x!==a;)G.push(x),x=M();G=W+G.join("")}else k=G,G=a;return G}function T(){if(ke.test(y.charAt(k))){var x=y.charAt(k);k++}else x=a,0===sa&&t(le);return x}function M(){if(me.test(y.charAt(k))){var x=y.charAt(k);
k++}else x=a,0===sa&&t(ne);return x}function A(){if(oe.test(y.charAt(k))){var x=y.charAt(k);k++}else x=a,0===sa&&t(pe);return x}function e(){var x=k;if(64===y.charCodeAt(k)){var G=Db;k++}else G=a,0===sa&&t(qe);if(G!==a){var W=H();W!==a?x=G=[G,W]:(k=x,x=a)}else k=x,x=a;x!==a&&(x={type:"param",value:x[1]});return x}function f(){var x=k;if(y.substr(k,7).toLowerCase()===re){var G=y.substr(k,7);k+=7}else G=a,0===sa&&t(se);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="LEADING":(k=
x,x=a)}else k=x,x=a;x===a&&(x=k,y.substr(k,8).toLowerCase()===te?(G=y.substr(k,8),k+=8):(G=a,0===sa&&t(ue)),G!==a?(G=k,sa++,W=M(),sa--,W===a?G=void 0:(k=G,G=a),G!==a?x="TRAILING":(k=x,x=a)):(k=x,x=a),x===a&&(x=k,y.substr(k,4).toLowerCase()===ve?(G=y.substr(k,4),k+=4):(G=a,0===sa&&t(we)),G!==a?(G=k,sa++,W=M(),sa--,W===a?G=void 0:(k=G,G=a),G!==a?x="BOTH":(k=x,x=a)):(k=x,x=a)));return x}function E(){var x=k;var G=k;var W=U();if(W!==a){ra();var qa=Fa();if(qa!==a)if(ra(),qa=ja(),qa!==a){ra();var Aa=Pa();
Aa!==a?G={type:"interval-period",period:W.value,precision:qa,secondary:null}:(k=G,G=a)}else k=G,G=a;else k=G,G=a}else k=G,G=a;G===a&&(G=k,W=U(),W!==a&&(W=fd(W)),G=W);if(G!==a)if(ra(),W=k,y.substr(k,2).toLowerCase()===xe?(qa=y.substr(k,2),k+=2):(qa=a,0===sa&&t(ye)),qa!==a?(qa=k,sa++,Aa=M(),sa--,Aa===a?qa=void 0:(k=qa,qa=a),qa!==a?W="TO":(k=W,W=a)):(k=W,W=a),W!==a){ra();W=k;qa=U();qa!==a&&(qa={type:"interval-period",period:qa.value,precision:null,secondary:null});W=qa;if(W===a){W=k;qa=wa();if(qa!==
a)if(ra(),qa=Fa(),qa!==a)if(ra(),qa=ja(),qa!==a)if(ra(),Aa=Ea(),Aa!==a)if(ra(),Aa=ca(),Aa!==a){ra();var La=Pa();La!==a?W=gd(qa,Aa):(k=W,W=a)}else k=W,W=a;else k=W,W=a;else k=W,W=a;else k=W,W=a;else k=W,W=a;W===a&&(W=k,qa=wa(),qa!==a?(ra(),qa=Fa(),qa!==a?(ra(),qa=ja(),qa!==a?(ra(),Aa=Pa(),Aa!==a?W={type:"interval-period",period:"second",precision:qa,secondary:null}:(k=W,W=a)):(k=W,W=a)):(k=W,W=a)):(k=W,W=a),W===a&&(W=k,qa=wa(),qa!==a&&(qa={type:"interval-period",period:"second",precision:null,secondary:null}),
W=qa))}W!==a?x={type:"interval-qualifier",start:G,end:W}:(k=x,x=a)}else k=x,x=a;else k=x,x=a;x===a&&(x=k,W=U(),W!==a?(ra(),G=Fa(),G!==a?(ra(),G=ca(),G!==a?(ra(),qa=Pa(),qa!==a?x={type:"interval-period",period:W.value,precision:G,secondary:null}:(k=x,x=a)):(k=x,x=a)):(k=x,x=a)):(k=x,x=a),x===a&&(x=k,W=U(),W!==a&&(W=fd(W)),x=W,x===a&&(x=k,W=wa(),W!==a?(ra(),G=Fa(),G!==a?(ra(),G=ja(),G!==a?(ra(),qa=Ea(),qa!==a?(ra(),W=ca(),W!==a?(ra(),qa=Pa(),qa!==a?x=gd(G,W):(k=x,x=a)):(k=x,x=a)):(k=x,x=a)):(k=x,x=
a)):(k=x,x=a)):(k=x,x=a),x===a&&(x=k,W=wa(),W!==a?(ra(),G=Fa(),G!==a?(ra(),G=ca(),G!==a?(ra(),qa=Pa(),qa!==a?x={type:"interval-period",period:"second",precision:G,secondary:null}:(k=x,x=a)):(k=x,x=a)):(k=x,x=a)):(k=x,x=a),x===a&&(x=k,W=wa(),W!==a&&(W={type:"interval-period",period:"second",precision:null,secondary:null}),x=W)))));return x}function U(){var x=k;x=oa();x!==a&&(x={type:"string",value:"day"});x===a&&(x=k,x=pa(),x!==a&&(x={type:"string",value:"hour"}),x===a&&(x=k,x=ua(),x!==a&&(x={type:"string",
value:"minute"}),x===a&&(x=k,x=ba(),x!==a&&(x={type:"string",value:"month"}),x===a&&(x=k,x=Q(),x!==a&&(x={type:"string",value:"year"})))));return x}function ca(){var x=Oa();x!==a&&(x=parseFloat(x));return x}function ja(){var x=Oa();x!==a&&(x=parseFloat(x));return x}function na(){var x=ta();x===a&&(x=e());return x}function ta(){var x=k;if(39===y.charCodeAt(k)){var G=aa;k++}else G=a,0===sa&&t(hd);G===a&&(y.substr(k,2)===ha?(G=ha,k+=2):(G=a,0===sa&&t(ze)));if(G!==a){G=[];var W=k;y.substr(k,2)===X?(W=
X,k+=2):(W=a,0===sa&&t(id));W!==a&&(W="'");W===a&&(jd.test(y.charAt(k))?(W=y.charAt(k),k++):(W=a,0===sa&&t(kd)));for(;W!==a;)G.push(W),W=k,y.substr(k,2)===X?(W=X,k+=2):(W=a,0===sa&&t(id)),W!==a&&(W="'"),W===a&&(jd.test(y.charAt(k))?(W=y.charAt(k),k++):(W=a,0===sa&&t(kd)));39===y.charCodeAt(k)?(W=aa,k++):(W=a,0===sa&&t(hd));W!==a?x={type:"string",value:G.join("")}:(k=x,x=a)}else k=x,x=a;return x}function ma(){var x=k;if(Ca()!==a){ra();var G=g();if(G!==a){ra();var W=Da();W!==a?(ra(),W=g(),W!==a?x={type:"when_clause",
operand:G,value:W}:(k=x,x=a)):(k=x,x=a)}else k=x,x=a}else k=x,x=a;return x}function la(){var x=k;if(Ca()!==a){ra();var G=g();if(G!==a){ra();var W=Da();W!==a?(ra(),W=g(),W!==a?x={type:"when_clause",operand:G,value:W}:(k=x,x=a)):(k=x,x=a)}else k=x,x=a}else k=x,x=a;return x}function va(){var x=k;var G=k;if(y.substr(k,4).toLowerCase()===Ae){var W=y.substr(k,4);k+=4}else W=a,0===sa&&t(Be);if(W!==a){W=k;sa++;var qa=M();sa--;qa===a?W=void 0:(k=W,W=a);W!==a?G="ELSE":(k=G,G=a)}else k=G,G=a;G!==a?(ra(),G=g(),
G!==a?x={type:"else_clause",value:G}:(k=x,x=a)):(k=x,x=a);return x}function Ja(){var x=Oa();if(x===a){x=k;if(45===y.charCodeAt(k)){var G=eb;k++}else G=a,0===sa&&t(vc);G===a&&(43===y.charCodeAt(k)?(G=Qa,k++):(G=a,0===sa&&t(uc)));if(G!==a){var W=Oa();W!==a?x=G[0]+W:(k=x,x=a)}else k=x,x=a}return x}function Ba(){var x=k;if(46===y.charCodeAt(k)){var G=ka;k++}else G=a,0===sa&&t(Ce);G!==a?(x=Oa(),x===a&&(x=null),x="."+(null!=x?x:"")):(k=x,x=a);return x}function Sa(){var x;var G=x=k;if(De.test(y.charAt(k))){var W=
y.charAt(k);k++}else W=a,0===sa&&t(Ee);W!==a?(Fe.test(y.charAt(k))?(G=y.charAt(k),k++):(G=a,0===sa&&t(Ge)),G===a&&(G=null),G="e"+(null===G?"":G)):(k=G,G=a);G!==a?(W=Oa(),W!==a?x=G+W:(k=x,x=a)):(k=x,x=a);return x}function Oa(){var x=[];var G=Ia();if(G!==a)for(;G!==a;)x.push(G),G=Ia();else x=a;x!==a&&(x=x.join(""));return x}function Ia(){if(He.test(y.charAt(k))){var x=y.charAt(k);k++}else x=a,0===sa&&t(Ie);return x}function c(){var x=k;if(y.substr(k,2).toLowerCase()===Ka){var G=y.substr(k,2);k+=2}else G=
a,0===sa&&t(Je);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="IN":(k=x,x=a)}else k=x,x=a;return x}function p(){var x=k;if(y.substr(k,2).toLowerCase()===Xa){var G=y.substr(k,2);k+=2}else G=a,0===sa&&t(Ke);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="IS":(k=x,x=a)}else k=x,x=a;return x}function ea(){var x=k;if(y.substr(k,4).toLowerCase()===Wa){var G=y.substr(k,4);k+=4}else G=a,0===sa&&t(Le);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?
x="LIKE":(k=x,x=a)}else k=x,x=a;return x}function n(){var x=k;if(y.substr(k,3).toLowerCase()===bb){var G=y.substr(k,3);k+=3}else G=a,0===sa&&t(Me);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="NOT":(k=x,x=a)}else k=x,x=a;return x}function J(){var x=k;if(y.substr(k,3).toLowerCase()===lb){var G=y.substr(k,3);k+=3}else G=a,0===sa&&t(Ne);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="AND":(k=x,x=a)}else k=x,x=a;return x}function S(){var x=k;if(y.substr(k,2).toLowerCase()===
Oe){var G=y.substr(k,2);k+=2}else G=a,0===sa&&t(Pe);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="OR":(k=x,x=a)}else k=x,x=a;return x}function V(){var x=k;if(y.substr(k,7).toLowerCase()===Qe){var G=y.substr(k,7);k+=7}else G=a,0===sa&&t(Re);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="BETWEEN":(k=x,x=a)}else k=x,x=a;return x}function ia(){var x=k;if(y.substr(k,4).toLowerCase()===Se){var G=y.substr(k,4);k+=4}else G=a,0===sa&&t(Te);if(G!==a){G=k;sa++;var W=
M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="FROM":(k=x,x=a)}else k=x,x=a;return x}function fa(){var x=k;if(y.substr(k,4).toLowerCase()===Ue){var G=y.substr(k,4);k+=4}else G=a,0===sa&&t(Ve);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="TRIM":(k=x,x=a)}else k=x,x=a;return x}function L(){var x=k;if(y.substr(k,8).toLowerCase()===We){var G=y.substr(k,8);k+=8}else G=a,0===sa&&t(Xe);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="INTERVAL":(k=x,x=a)}else k=x,x=a;
return x}function Q(){var x=k;if(y.substr(k,4).toLowerCase()===Ye){var G=y.substr(k,4);k+=4}else G=a,0===sa&&t(Ze);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="YEAR":(k=x,x=a)}else k=x,x=a;return x}function ba(){var x=k;if(y.substr(k,5).toLowerCase()===$e){var G=y.substr(k,5);k+=5}else G=a,0===sa&&t(af);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="MONTH":(k=x,x=a)}else k=x,x=a;return x}function oa(){var x=k;if(y.substr(k,3).toLowerCase()===bf){var G=y.substr(k,
3);k+=3}else G=a,0===sa&&t(cf);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="DAY":(k=x,x=a)}else k=x,x=a;return x}function pa(){var x=k;if(y.substr(k,4).toLowerCase()===df){var G=y.substr(k,4);k+=4}else G=a,0===sa&&t(ef);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="HOUR":(k=x,x=a)}else k=x,x=a;return x}function ua(){var x=k;if(y.substr(k,6).toLowerCase()===ff){var G=y.substr(k,6);k+=6}else G=a,0===sa&&t(gf);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:
(k=G,G=a);G!==a?x="MINUTE":(k=x,x=a)}else k=x,x=a;return x}function wa(){var x=k;if(y.substr(k,6).toLowerCase()===hf){var G=y.substr(k,6);k+=6}else G=a,0===sa&&t(jf);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="SECOND":(k=x,x=a)}else k=x,x=a;return x}function za(){var x=k;if(y.substr(k,4).toLowerCase()===kf){var G=y.substr(k,4);k+=4}else G=a,0===sa&&t(lf);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="CASE":(k=x,x=a)}else k=x,x=a;return x}function Ga(){var x=
k;if(y.substr(k,3).toLowerCase()===mf){var G=y.substr(k,3);k+=3}else G=a,0===sa&&t(nf);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="END":(k=x,x=a)}else k=x,x=a;return x}function Ca(){var x=k;if(y.substr(k,4).toLowerCase()===of){var G=y.substr(k,4);k+=4}else G=a,0===sa&&t(pf);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="WHEN":(k=x,x=a)}else k=x,x=a;return x}function Da(){var x=k;if(y.substr(k,4).toLowerCase()===qf){var G=y.substr(k,4);k+=4}else G=a,0===
sa&&t(rf);if(G!==a){G=k;sa++;var W=M();sa--;W===a?G=void 0:(k=G,G=a);G!==a?x="THEN":(k=x,x=a)}else k=x,x=a;return x}function Ea(){if(44===y.charCodeAt(k)){var x=sf;k++}else x=a,0===sa&&t(tf);return x}function Fa(){if(40===y.charCodeAt(k)){var x=uf;k++}else x=a,0===sa&&t(vf);return x}function Pa(){if(41===y.charCodeAt(k)){var x=wf;k++}else x=a,0===sa&&t(xf);return x}function ra(){var x;var G=[];for(x=ab();x!==a;)G.push(x),x=ab();return G}function ab(){if(yf.test(y.charAt(k))){var x=y.charAt(k);k++}else x=
a,0===sa&&t(zf);return x}function Ta(x,G,W,qa){x={type:"binary_expr",operator:x,left:G,right:W};void 0!==qa&&(x.escape=qa);return x}function Va(x,G){for(var W=0;W<G.length;W++)x=Ta(G[W][1],x,G[W][3]);return x}v=void 0!==v?v:{};var a={},$a=v.grammarSource,Ra={start:C},yb=C,tb="!",jb="\x3d",Ab="\x3e\x3d",Zb="\x3e",Cb="\x3c\x3d",$b="\x3c\x3e",kb="\x3c",sb="!\x3d",Qa="+",eb="-",ob="*",Na="/",Db="@",aa="'",ha="N'",X="''",ka=".",xa="null",ya="true",Ha="false",Ka="in",Xa="is",Wa="like",Ua="escape",bb="not",
lb="and",Oe="or",Qe="between",Se="from",Td="for",Od="substring",Id="extract",Ue="trim",Zd="position",Fd="timestamp",Cd="date",re="leading",te="trailing",ve="both",xe="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",Ae="else",sf=",",uf="(",wf=")",Zc="`",ke=/^[A-Za-z_\x80-\uFFFF]/,me=/^[A-Za-z0-9_]/,oe=/^[A-Za-z0-9_.\x80-\uFFFF]/,jd=/^[^']/,He=/^[0-9]/,De=/^[eE]/,Fe=/^[+\-]/,yf=/^[ \t\n\r]/,ad=/^[^`]/,ld=r("!",!1),Jc=r("\x3d",
!1),nd=r("\x3e\x3d",!1),od=r("\x3e",!1),pd=r("\x3c\x3d",!1),qd=r("\x3c\x3e",!1),rd=r("\x3c",!1),sd=r("!\x3d",!1),uc=r("+",!1),vc=r("-",!1),td=r("*",!1),ud=r("/",!1),le=I([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),ne=I([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),pe=I([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),qe=r("@",!1),hd=r("'",!1),ze=r("N'",!1),id=r("''",!1),kd=I(["'"],!0,!1),Ce=r(".",!1),Ie=I([["0","9"]],!1,!1),Ee=I(["e","E"],!1,!1),Ge=I(["+","-"],!1,!1),Ad=r("NULL",
!0),wd=r("TRUE",!0),yd=r("FALSE",!0),Je=r("IN",!0),Ke=r("IS",!0),Le=r("LIKE",!0),md=r("ESCAPE",!0),Me=r("NOT",!0),Ne=r("AND",!0),Pe=r("OR",!0),Re=r("BETWEEN",!0),Te=r("FROM",!0),Ud=r("FOR",!0),Pd=r("SUBSTRING",!0),Jd=r("EXTRACT",!0),Ve=r("TRIM",!0),$d=r("POSITION",!0),Gd=r("TIMESTAMP",!0),Dd=r("DATE",!0),se=r("LEADING",!0),ue=r("TRAILING",!0),we=r("BOTH",!0),ye=r("TO",!0),Xe=r("INTERVAL",!0),Ze=r("YEAR",!0),af=r("MONTH",!0),cf=r("DAY",!0),ef=r("HOUR",!0),gf=r("MINUTE",!0),jf=r("SECOND",!0),lf=r("CASE",
!0),nf=r("END",!0),pf=r("WHEN",!0),rf=r("THEN",!0),Be=r("ELSE",!0),tf=r(",",!1),vf=r("(",!1),xf=r(")",!1),zf=I([" ","\t","\n","\r"],!1,!1),$c=r("`",!1),bd=I(["`"],!0,!1),fd=function(x){return{type:"interval-period",period:x.value,precision:null,secondary:null}},gd=function(x,G){return{type:"interval-period",period:"second",precision:x,secondary:G}},k=0,ac=[{line:1,column:1}],pb=0,tc=[],sa=0;if("startRule"in v){if(!(v.startRule in Ra))throw Error("Can't start parsing from rule \""+v.startRule+'".');
yb=Ra[v.startRule]}var Ic=yb();if(Ic!==a&&k===y.length)return Ic;Ic!==a&&k<y.length&&t({type:"end"});throw function(x,G,W){return new F(F.buildMessage(x,G),x,G,W)}(tc,pb<y.length?y.charAt(pb):null,pb<y.length?O(pb,pb+1):O(pb,pb));}}})})(Z);let Y=function(){function u(){}u.parse=function(F){return Z.exports.parse(F)};return u}();l.WhereGrammar=Y;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(l){l.commonjsGlobal="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};l.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};l.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},
"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(l){l.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,
supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r,I,P,O){function t(b,g,m,w,h,z){h-=m;z-=w;b=Math.min(1,Math.max(0,((b-m)*h+(g-w)*z)/(h*h+z*z)));return{x:m+h*b,y:w+z*b}}function C(b,g){return b?g?4:3:g?3:2}return function(){function b(m,w,h){this.items=m;this.queryGeometry=w;this.definitionExpression=h.definitionExpression;this.geometryType=h.geometryType;this.hasM=h.hasM;this.hasZ=h.hasZ;this.objectIdField=h.objectIdField;this.spatialReference=h.spatialReference;this.fieldsIndex=h.fieldsIndex;this.timeInfo=h.timeInfo;
this.featureAdapter=h.featureAdapter;this.aggregateAdapter=h.aggregateAdapter}var g=b.prototype;g.createQueryResponseForCount=function(m){const w=new F(m,this.featureAdapter,this.fieldsIndex);if(!m.outStatistics)return w.countDistinctValues(this.items);const {groupByFieldsForStatistics:h,having:z}=m;if(null==h||!h.length)return 1;const q=new Map,B=new Map,R=new Set;m=m.outStatistics;for(const da of m){({statisticType:m}=da);m="exceedslimit"!==m?da.onStatisticField:void 0;if(!B.has(m)){var N=[];for(const K of h){const H=
this._getAttributeValues(w,K,q);N.push(H)}B.set(m,this._calculateUniqueValues(N,w.returnDistinctValues))}m=B.get(m);for(const K in m){const {data:H,items:T}=m[K];N=H.join(",");z&&!w.validateItems(T,z)||R.add(N)}}return R.size};g.createQueryResponse=function(m){let w;w=m.outStatistics?m.outStatistics.some(h=>"exceedslimit"===h.statisticType)?this._createExceedsLimitQueryResponse(m):this._createStatisticsQueryResponse(m):this._createFeatureQueryResponse(m);m.returnQueryGeometry&&(Y.isValid(m.outSR)&&
!Y.equals(this.queryGeometry.spatialReference,m.outSR)?w.queryGeometry=r.cleanFromGeometryEngine({spatialReference:m.outSR,...y.project(this.queryGeometry,this.queryGeometry.spatialReference,m.outSR)}):w.queryGeometry=r.cleanFromGeometryEngine({spatialReference:m.outSR,...this.queryGeometry}));return w};g.createSnappingResponse=function(m,w){const h=this.featureAdapter,z=C(this.hasZ,this.hasM),{x:q,y:B}=m.point,R="number"===typeof m.distance?m.distance:m.distance.x,N="number"===typeof m.distance?
m.distance:m.distance.y,da={candidates:[]},K="esriGeometryPolygon"===this.geometryType;w=this.getPointCreator(m.point,this.spatialReference,w);for(const U of this.items){var H=h.getGeometry(U);if(d.isNone(H))continue;const {coords:ca,lengths:ja}=H;if(m.types&1){H=0;for(var T=0;T<ja.length;T++){var M=ja[T];for(var A=0;A<M;A++,H+=z){var e=ca[H],f=ca[H+1];if(A!==M-1){const na=ca[H+z],ta=ca[H+z+1],{x:ma,y:la}=t(q,B,e,f,na,ta);var E=(q-ma)/R;const va=(B-la)/N;E=E*E+va*va;1>=E&&da.candidates.push({type:"edge",
objectId:h.getObjectId(U),distance:Math.sqrt(E),target:w(ma,la),start:w(e,f),end:w(na,ta)})}}}}if(m.types&2)for(H=K?ca.length-z:ca.length,T=0;T<H;T+=z)M=ca[T],A=ca[T+1],e=(q-M)/R,f=(B-A)/N,e=e*e+f*f,1>=e&&da.candidates.push({type:"vertex",objectId:h.getObjectId(U),distance:Math.sqrt(e),target:w(M,A)})}da.candidates.sort((U,ca)=>U.distance-ca.distance);return da};g.getPointCreator=function(m,w,h){const z=d.isSome(h)&&!Y.equals(w,h)?q=>y.project(q,w,h):q=>q;return null!=m.z&&null!=m.m?(q,B)=>z({x:q,
y:B,z:m.z,m:m.m}):null!=m.z?(q,B)=>z({x:q,y:B,z:m.z}):null!=m.m?(q,B)=>z({x:q,y:B,m:m.m}):(q,B)=>z({x:q,y:B})};g.executeAttributesQuery=function(m){var w=D.getWhereClause(m.where,this.fieldsIndex);if(!w)return Promise.resolve(this);if(w.isStandardized){let h=0;const z=[];for(const q of this.items)w.testFeature(q,this.featureAdapter)&&(z[h++]=q);w=new b(z,this.queryGeometry,this);w.definitionExpression=m.where;return Promise.resolve(w)}return Promise.reject(new TypeError("Where clause is not standardized"))};
g.executeAggregateIdsQuery=function(m){if(!m.aggregateIds||!m.aggregateIds.length||d.isNone(this.aggregateAdapter))return Promise.resolve(this);const w=new Set;for(const z of m.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(z).forEach(q=>w.add(q));const h=this.featureAdapter.getObjectId;return Promise.resolve(new b(this.items.filter(z=>w.has(h(z))),this.queryGeometry,this))};g.executeObjectIdsQuery=function(m){if(!m.objectIds||!m.objectIds.length)return Promise.resolve(this);const w=new Set(m.objectIds),
h=this.featureAdapter.getObjectId;return Promise.resolve(new b(this.items.filter(z=>w.has(h(z))),this.queryGeometry,this))};g.executeTimeQuery=function(m){m=v.getTimeOperator(this.timeInfo,m.timeExtent,this.featureAdapter);if(!d.isSome(m))return Promise.resolve(this);m=this.items.filter(m);return Promise.resolve(new b(m,this.queryGeometry,this))};g.filterLatest=function(){const {trackIdField:m,startTimeField:w,endTimeField:h}=this.timeInfo;var z=h||w;const q=new Map,B=this.featureAdapter.getAttribute;
for(const R of this.items){const N=B(R,m),da=B(R,z),K=q.get(N);(!K||da>B(K,z))&&q.set(N,R)}z=Array.from(q.values());return Promise.resolve(new b(z,this.queryGeometry,this))};g.project=function(){var m=l._asyncToGenerator(function*(w){if(!w||Y.equals(this.spatialReference,w))return this;const h=this.featureAdapter,z=(yield y.projectMany(this.items.map(q=>r.getGeometry(this.geometryType,this.hasZ,this.hasM,h.getGeometry(q))),this.spatialReference,w)).map((q,B)=>h.cloneWithGeometry(this.items[B],u.convertFromGeometry(q,
this.hasZ,this.hasM)));return new b(z,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:w,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(w){return m.apply(this,arguments)}}();g.createSummaryStatisticsResponse=function(){var m=l._asyncToGenerator(function*(w,h){const {field:z,valueExpression:q,normalizationField:B,
normalizationType:R,normalizationTotal:N,minValue:da,maxValue:K,scale:H}=h;h=this.fieldsIndex.isDateField(z);w=yield this._getDataValues(w,{field:z,valueExpression:q,normalizationField:B,normalizationType:R,normalizationTotal:N,scale:H});const T=P.isNullCountSupported({normalizationType:R,normalizationField:B,minValue:da,maxValue:K}),M=this.fieldsIndex.get(z),A={value:.5,fieldType:null==M?void 0:M.type};w=I.isStringField(M)?P.calculateStringStatistics({values:w,supportsNullCount:T,percentileParams:A}):
P.calculateStatistics({values:w,minValue:da,maxValue:K,useSampleStdDev:!R,supportsNullCount:T,percentileParams:A});return P.processSummaryStatisticsResult(w,h)});return function(w,h){return m.apply(this,arguments)}}();g.createUniqueValuesResponse=function(){var m=l._asyncToGenerator(function*(w,h){const {field:z,valueExpression:q,domain:B,returnAllCodedValues:R,scale:N}=h;w=yield this._getDataValues(w,{field:z,valueExpression:q,scale:N});w=P.calculateUniqueValuesCount(w);return P.createUVResult(w,
B,R)});return function(w,h){return m.apply(this,arguments)}}();g.createClassBreaksResponse=function(){var m=l._asyncToGenerator(function*(w,h){const {field:z,valueExpression:q,normalizationField:B,normalizationType:R,normalizationTotal:N,classificationMethod:da,standardDeviationInterval:K,minValue:H,maxValue:T,numClasses:M,scale:A}=h;w=yield this._getDataValues(w,{field:z,valueExpression:q,normalizationField:B,normalizationType:R,normalizationTotal:N,scale:A});w=P.calculateClassBreaks(w,{field:z,
normalizationField:B,normalizationType:R,normalizationTotal:N,classificationMethod:da,standardDeviationInterval:K,minValue:H,maxValue:T,numClasses:M});return P.resolveCBResult(w,da)});return function(w,h){return m.apply(this,arguments)}}();g.createHistogramResponse=function(){var m=l._asyncToGenerator(function*(w,h){const {field:z,valueExpression:q,normalizationField:B,normalizationType:R,normalizationTotal:N,classificationMethod:da,standardDeviationInterval:K,minValue:H,maxValue:T,numBins:M,scale:A}=
h;w=yield this._getDataValues(w,{field:z,valueExpression:q,normalizationField:B,normalizationType:R,normalizationTotal:N,scale:A});return P.calculateHistogram(w,{field:z,normalizationField:B,normalizationType:R,normalizationTotal:N,classificationMethod:da,standardDeviationInterval:K,minValue:H,maxValue:T,numBins:M})});return function(w,h){return m.apply(this,arguments)}}();g._sortFeatures=function(m,w,h){if(1<m.length&&w&&w.length)for(const z of w.reverse()){w=z.split(" ");const q=w[0],B=this.fieldsIndex.get(q);
w=w[1]&&"desc"===w[1].toLowerCase();const R=P.getAttributeComparator(null==B?void 0:B.type,w);m.sort((N,da)=>{N=h(N,q,B);da=h(da,q,B);return R(N,da)})}};g._createFeatureQueryResponse=function(m){const w=this.items,{geometryType:h,hasM:z,hasZ:q,objectIdField:B,spatialReference:R}=this,{outFields:N,outSR:da,quantizationParameters:K,resultRecordCount:H,resultOffset:T,returnZ:M,returnM:A}=m,e=null!=H?w.length>(T||0)+H:!1,f=N&&(N.includes("*")?[...this.fieldsIndex.fields]:N.map(E=>this.fieldsIndex.get(E)));
return{exceededTransferLimit:e,features:this._createFeatures(m,w),fields:f,geometryType:h,hasM:z&&A,hasZ:q&&M,objectIdFieldName:B,spatialReference:r.cleanFromGeometryEngine(da?da:R),transform:K&&Z.toQuantizationTransform(K)||null}};g._createFeatures=function(m,w){const h=new F(m,this.featureAdapter,this.fieldsIndex),{hasM:z,hasZ:q}=this,{orderByFields:B,quantizationParameters:R,returnGeometry:N,returnCentroid:da,maxAllowableOffset:K,resultOffset:H,resultRecordCount:T,returnZ:M=!1,returnM:A=!1}=m,
e=q&&M,f=z&&A;m=[];var E=0;w=[...w];this._sortFeatures(w,B,(ja,na,ta)=>h.getFieldValue(ja,na,ta));if(N||da){var U=Z.toQuantizationTransform(R);if(N&&!da)for(var ca of w)m[E++]={attributes:h.getAttributes(ca),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ca),K,U,e,f)};else if(!N&&da)for(const ja of w)m[E++]={attributes:h.getAttributes(ja),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),U)};else for(const ja of w)m[E++]={attributes:h.getAttributes(ja),
centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),U),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ja),K,U,e,f)}}else for(U of w)(ca=h.getAttributes(U))&&(m[E++]={attributes:ca});E=H||0;null!=T&&(m=m.slice(E,Math.min(m.length,E+T)));return m};g._createExceedsLimitQueryResponse=function(m){var w=!1;let h=Number.POSITIVE_INFINITY,z=Number.POSITIVE_INFINITY;w=Number.POSITIVE_INFINITY;for(const q of m.outStatistics)if("exceedslimit"===
q.statisticType){h=null!=q.maxPointCount?q.maxPointCount:Number.POSITIVE_INFINITY;z=null!=q.maxRecordCount?q.maxRecordCount:Number.POSITIVE_INFINITY;w=null!=q.maxVertexCount?q.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)w=this.items.length>h;else if(this.items.length>z)w=!0;else{m=this.hasZ?this.hasM?4:3:this.hasM?3:2;const q=this.featureAdapter;w=this.items.reduce((B,R)=>{R=q.getGeometry(R);return B+(d.isSome(R)&&R.coords.length||0)},0)/m>w}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(w)}}]}};g._createStatisticsQueryResponse=function(m){var w={attributes:{}};const h=[],z=new Map,q=new Map,B=new Map,R=new Map,N=new F(m,this.featureAdapter,this.fieldsIndex);var da=m.outStatistics;const {groupByFieldsForStatistics:K,having:H,orderByFields:T}=m;m=K&&K.length;const M=!!m,A=M&&K[0],e=M&&!this.fieldsIndex.get(A);for(const ja of da){const {outStatisticFieldName:na,
statisticType:ta}=ja;da=ja;var f="exceedslimit"!==ta?ja.onStatisticField:void 0;const ma="percentile_disc"===ta||"percentile_cont"===ta,la=M&&1===m&&(f===A||e)&&"count"===ta;if(M){if(!B.has(f)){var E=[];for(const va of K){var U=this._getAttributeValues(N,va,z);E.push(U)}B.set(f,this._calculateUniqueValues(E,N.returnDistinctValues))}E=B.get(f);for(const va in E){const {count:Ja,data:Ba,items:Sa,itemPositions:Oa}=E[va];U=Ba.join(",");if(!H||N.validateItems(Sa,H)){const Ia=R.get(U)||{attributes:{}};
var ca=null;if(la)ca=Ja;else{const c=this._getAttributeValues(N,f,z);ca=Oa.map(p=>c[p]);ca=ma&&"statisticParameters"in da?this._getPercentileValue(da,ca):this._getStatisticValue(da,ca,null,N.returnDistinctValues)}Ia.attributes[na]=ca;K.forEach((c,p)=>Ia.attributes[this.fieldsIndex.get(c)?c:`EXPR_${p+1}`]=Ba[p]);R.set(U,Ia)}}}else f=this._getAttributeValues(N,f,z),w.attributes[na]=ma&&"statisticParameters"in da?this._getPercentileValue(da,f):this._getStatisticValue(da,f,q,N.returnDistinctValues);h.push({name:na,
alias:na,type:"esriFieldTypeDouble"})}w=M?Array.from(R.values()):[w];this._sortFeatures(w,T,(ja,na)=>ja.attributes[na]);return{fields:h,features:w}};g._getStatisticValue=function(m,w,h,z){const {onStatisticField:q,statisticType:B}=m;m=null;m=null!=h&&h.has(q)?h.get(q):I.isStringField(this.fieldsIndex.get(q))?P.calculateStringStatistics({values:w,returnDistinct:z}):P.calculateStatistics({values:w,minValue:null,maxValue:null,useSampleStdDev:!0});h&&h.set(q,m);return m["var"===B?"variance":B]};g._getPercentileValue=
function(m,w){const {onStatisticField:h,statisticParameters:z,statisticType:q}=m,{value:B,orderBy:R}=z;m=this.fieldsIndex.get(h);return P.calculatePercentile(w,{value:B,orderBy:R,fieldType:null==m?void 0:m.type,isDiscrete:"percentile_disc"===q})};g._getAttributeValues=function(m,w,h){if(h.has(w))return h.get(w);const z=this.fieldsIndex.get(w),q=this.items.map(B=>m.getFieldValue(B,w,z));h.set(w,q);return q};g._getAttributeNormalizedValues=function(m,w){return this.items.map(h=>m.getNormalizedValue(h,
{field:w.field,fieldInfo:this.fieldsIndex.get(w.field),normalizationField:w.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(w.normalizationField),normalizationType:w.normalizationType,normalizationTotal:w.normalizationTotal}))};g._getAttributeExpressionValues=function(){var m=l._asyncToGenerator(function*(w,h,z){const {arcadeUtils:q}=yield O.loadArcade(),B=q.createFunction(h),R=z&&q.getViewInfo(z);return this.items.map(N=>w.getExpressionValue(N,{compiledFunc:B,viewInfo:R},q))});return function(w,
h,z){return m.apply(this,arguments)}}();g._calculateUniqueValues=function(m,w){const h={},z=this.items,q=z.length;for(let B=0;B<q;B++){const R=z[B],N=[];for(const K of m)N.push(K[B]);const da=N.join(",");w?null==h[da]&&(h[da]={count:1,data:N,items:[R],itemPositions:[B]}):null==h[da]?h[da]={count:1,data:N,items:[R],itemPositions:[B]}:(h[da].count++,h[da].items.push(R),h[da].itemPositions.push(B))}return h};g._getDataValues=function(){var m=l._asyncToGenerator(function*(w,h){const z=new F(w,this.featureAdapter,
this.fieldsIndex),{valueExpression:q,field:B,normalizationField:R,normalizationType:N,normalizationTotal:da,scale:K}=h;w=q?{viewingMode:"map",scale:K,spatialReference:w.outSR||this.spatialReference}:null;return q?this._getAttributeExpressionValues(z,q,w):this._getAttributeNormalizedValues(z,{field:B,normalizationField:R,normalizationType:N,normalizationTotal:da})});return function(w,h){return m.apply(this,arguments)}}();l._createClass(b,[{key:"size",get:function(){return this.items.length}}]);return b}()})},
"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(l,d,Z){function Y({scale:K,translate:H},T){return Math.round((T-H[0])/K[0])}function u({scale:K,translate:H},T){return Math.round((H[1]-T)/K[1])}function F(K,H,T){const M=[];let A,e,f,E;for(let U=0;U<T.length;U++){const ca=T[U];if(0<U){if(f=Y(K,ca[0]),E=u(K,ca[1]),f!==A||E!==e)M.push(H(ca,f-A,E-e)),A=f,e=E}else A=Y(K,ca[0]),e=u(K,ca[1]),M.push(H(ca,A,e))}return 0<M.length?M:null}function D(K,
H,T,M){return F(K,T?M?da:N:M?N:R,H)}function y(K,H,T,M){const A=[];T=T?M?da:N:M?N:R;for(M=0;M<H.length;M++){const e=F(K,T,H[M]);e&&3<=e.length&&A.push(e)}return A.length?A:null}function v(K,H,T,M){const A=[];T=T?M?da:N:M?N:R;for(M=0;M<H.length;M++){const e=F(K,T,H[M]);e&&2<=e.length&&A.push(e)}return A.length?A:null}function r({scale:K,translate:H},T){return T*K[0]+H[0]}function I({scale:K,translate:H},T){return H[1]-T*K[1]}function P(K,H,T){const M=Array(T.length);if(!T.length)return M;const [A,
e]=K.scale;let f=r(K,T[0][0]);K=I(K,T[0][1]);M[0]=H(T[0],f,K);for(let E=1;E<T.length;E++){const U=T[E];f+=U[0]*A;K-=U[1]*e;M[E]=H(U,f,K)}return M}function O(K,H,T){const M=Array(T.length);for(let A=0;A<T.length;A++)M[A]=P(K,H,T[A]);return M}function t(K,H,T,M){return P(K,T?M?da:N:M?N:R,H)}function C(K,H,T,M){return O(K,T?M?da:N:M?N:R,H)}function b(K,H,T,M){return O(K,T?M?da:N:M?N:R,H)}function g(K,H,T){let [M,A]=T[0],e=Math.min(M,H[0]),f=Math.min(A,H[1]),E=Math.max(M,H[2]);H=Math.max(A,H[3]);for(let U=
1;U<T.length;U++){const [ca,ja]=T[U];M+=ca;A+=ja;0>ca&&(e=Math.min(e,M));0<ca&&(E=Math.max(E,M));0>ja?f=Math.min(f,A):0<ja&&(H=Math.max(H,A))}K[0]=e;K[1]=f;K[2]=E;K[3]=H;return K}function m(K,H){if(!H.length)return null;K[0]=K[1]=Number.POSITIVE_INFINITY;K[2]=K[3]=Number.NEGATIVE_INFINITY;for(let T=0;T<H.length;T++)g(K,K,H[T]);return K}function w(K,H,T,M,A){H.xmin=Y(K,T.xmin);H.ymin=u(K,T.ymin);H.xmax=Y(K,T.xmax);H.ymax=u(K,T.ymax);H!==T&&(M&&(H.zmin=T.zmin,H.zmax=T.zmax),A&&(H.mmin=T.mmin,H.mmax=
T.mmax));return H}function h(K,H,T,M,A){H.points=D(K,T.points,M,A);return H}function z(K,H,T,M,A){H.x=Y(K,T.x);H.y=u(K,T.y);H!==T&&(M&&(H.z=T.z),A&&(H.m=T.m));return H}function q(K,H,T,M,A){K=y(K,T.rings,M,A);if(!K)return null;H.rings=K;return H}function B(K,H,T,M,A){K=v(K,T.paths,M,A);if(!K)return null;H.paths=K;return H}const R=(K,H,T)=>[H,T],N=(K,H,T)=>[H,T,K[2]],da=(K,H,T)=>[H,T,K[2],K[3]];l.equals=function(K,H){if(K===H||null==K&&null==H)return!0;if(null==K||null==H)return!1;let T,M,A,e;K&&"upperLeft"===
K.originPosition?(T=K.translate[0],M=K.translate[1],K=K.scale[0]):(T=d.isSome(K.extent)?K.extent.xmin:0,M=d.isSome(K.extent)?K.extent.ymax:0,K=K.tolerance);H&&"upperLeft"===H.originPosition?(A=H.translate[0],e=H.translate[1],H=H.scale[0]):(A=d.isSome(H.extent)?H.extent.xmin:0,e=d.isSome(H.extent)?H.extent.ymax:0,H=H.tolerance);return T===A&&M===e&&K===H};l.getQuantizedBoundsCoordsArray=g;l.getQuantizedBoundsCoordsArrayArray=m;l.getQuantizedBoundsPaths=function(K){return m([0,0,0,0],K)};l.getQuantizedBoundsPoints=
function(K){const H=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return g(H,H,K)};l.getQuantizedBoundsRings=function(K){return m([0,0,0,0],K)};l.quantizeBounds=function(K,H,T){H[0]=Y(K,T[0]);H[3]=u(K,T[1]);H[2]=Y(K,T[2]);H[1]=u(K,T[3]);return H};l.quantizeExtent=w;l.quantizeGeometry=function(K,H){return K&&H?Z.isPoint(H)?z(K,{},H,!1,!1):Z.isPolyline(H)?B(K,{},H,!1,!1):Z.isPolygon(H)?q(K,{},H,!1,!1):Z.isMultipoint(H)?h(K,{},H,!1,!1):Z.isExtent(H)?
w(K,{},H,!1,!1):null:null};l.quantizeMultipoint=h;l.quantizePaths=v;l.quantizePoint=z;l.quantizePoints=D;l.quantizePolygon=q;l.quantizePolyline=B;l.quantizeRings=y;l.quantizeX=Y;l.quantizeY=u;l.toQuantizationTransform=function(K){return K?{originPosition:"upper-left"===K.originPosition?"upperLeft":"lower-left"===K.originPosition?"lowerLeft":K.originPosition,scale:K.tolerance?[K.tolerance,K.tolerance]:[1,1],translate:d.isSome(K.extent)?[K.extent.xmin,K.extent.ymax]:[0,0]}:null};l.unquantizeBounds=
function(K,H,T){return T?(H[0]=r(K,T[0]),H[1]=I(K,T[3]),H[2]=r(K,T[2]),H[3]=I(K,T[1]),H):[r(K,H[0]),I(K,H[3]),r(K,H[2]),I(K,H[1])]};l.unquantizeCoordsArray=P;l.unquantizeCoordsArrayArray=O;l.unquantizeExtent=function(K,H,T,M,A){H.xmin=r(K,T.xmin);H.ymin=I(K,T.ymin);H.xmax=r(K,T.xmax);H.ymax=I(K,T.ymax);H!==T&&(M&&(H.zmin=T.zmin,H.zmax=T.zmax),A&&(H.mmin=T.mmin,H.mmax=T.mmax));return H};l.unquantizeMultipoint=function(K,H,T,M,A){d.isSome(T)&&(H.points=t(K,T.points,M,A));return H};l.unquantizePaths=
C;l.unquantizePoint=function(K,H,T,M,A){if(d.isNone(T))return H;H.x=r(K,T.x);H.y=I(K,T.y);H!==T&&(M&&(H.z=T.z),A&&(H.m=T.m));return H};l.unquantizePoints=t;l.unquantizePolygon=function(K,H,T,M,A){d.isSome(T)&&(H.rings=b(K,T.rings,M,A));return H};l.unquantizePolyline=function(K,H,T,M,A){d.isSome(T)&&(H.paths=C(K,T.paths,M,A));return H};l.unquantizeRings=b;l.unquantizeX=r;l.unquantizeY=I;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../statistics/utils"],function(l,d,Z){return function(){function Y(F,D,y){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=F.returnDistinctValues;this.fieldsIndex=y;this.featureAdapter=D;if((D=F.outFields)&&-1===D.indexOf("*")){this.outFields=D;F=0;for(const r of D){var v=d.getExpressionFromFieldName(r);v=(D=this.fieldsIndex.get(v))?null:d.getWhereClause(v,y);D=D?D.name:d.getAliasFromFieldName(r)||`FIELD_EXP_${F++}`;this._fieldDataCache.set(r,
{alias:D,clause:v})}}}var u=Y.prototype;u.countDistinctValues=function(F){if(!this.returnDistinctValues)return F.length;F.forEach(D=>this.getAttributes(D));return this._returnDistinctMap.size};u.getAttributes=function(F){F=this._processAttributesForOutFields(F);return this._processAttributesForDistinctValues(F)};u.getFieldValue=function(F,D,y){const v=y?y.name:D;let r=null;this._fieldDataCache.has(v)?r=this._fieldDataCache.get(v).clause:y||(r=d.getWhereClause(D,this.fieldsIndex),this._fieldDataCache.set(v,
{alias:v,clause:r}));return y?this.featureAdapter.getAttribute(F,v):r.calculateValue(F,this.featureAdapter)};u.getNormalizedValue=function(F,D){const y=D.normalizationType,v=D.normalizationTotal;let r=this.getFieldValue(F,D.field,D.fieldInfo);y&&Number.isFinite(r)&&(F=this.getFieldValue(F,D.normalizationField,D.normalizationFieldInfo),r=Z.getNormalizedValue(r,y,F,v));return r};u.getExpressionValue=function(F,D,y){F={attributes:this.featureAdapter.getAttributes(F)};F=y.createExecContext(F,D.viewInfo);
return y.executeFunction(D.compiledFunc,F)};u.validateItem=function(F,D){this._fieldDataCache.has(D)||this._fieldDataCache.set(D,{alias:D,clause:d.getWhereClause(D,this.fieldsIndex)});return this._fieldDataCache.get(D).clause.testFeature(F,this.featureAdapter)};u.validateItems=function(F,D){this._fieldDataCache.has(D)||this._fieldDataCache.set(D,{alias:D,clause:d.getWhereClause(D,this.fieldsIndex)});return this._fieldDataCache.get(D).clause.testSet(F,this.featureAdapter)};u._processAttributesForOutFields=
function(F){const D=this.outFields;if(!D||!D.length)return this.featureAdapter.getAttributes(F);const y={};for(const v of D){const {alias:r,clause:I}=this._fieldDataCache.get(v);y[r]=I?I.calculateValue(F,this.featureAdapter):this.featureAdapter.getAttribute(F,r)}return y};u._processAttributesForDistinctValues=function(F){if(l.isNone(F)||!this.returnDistinctValues)return F;var D=this.outFields,y=[];if(D)for(const r of D){var {alias:v}=this._fieldDataCache.get(r);y.push(F[v])}else for(v in F)y.push(F[v]);
D=`${(D||["*"]).join(",")}=${y.join(",")}`;y=this._returnDistinctMap.get(D)||0;this._returnDistinctMap.set(D,++y);return 1<y?null:F};return Y}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(l,d,Z){function Y(h){const z=null!=h.minValue||null!=h.maxValue,q=!!h.sqlExpression&&h.supportsSQLExpression;return!(null!=h.normalizationField||null!=h.normalizationType)&&!z&&!q}function u(h){const {values:z,
useSampleStdDev:q,supportsNullCount:B}=h;var R=Number.POSITIVE_INFINITY;let N=Number.NEGATIVE_INFINITY,da=null,K=null;var H=null;let T=null,M=0;const A=null==h.minValue?-Infinity:h.minValue,e=null==h.maxValue?Infinity:h.maxValue;for(const f of z)Number.isFinite(f)?f>=A&&f<=e&&(da+=f,R=Math.min(R,f),N=Math.max(N,f),M++):"string"===typeof f&&M++;if(M&&null!=da){K=da/M;H=0;for(const f of z)Number.isFinite(f)&&f>=A&&f<=e&&(H+=(f-K)**2);T=q?1<M?H/(M-1):0:0<M?H/M:0;H=Math.sqrt(T)}else N=R=null;R={avg:K,
count:M,max:N,min:R,stddev:H,sum:da,variance:T};B&&(R.nullcount=z.length-M);h.percentileParams&&(R.median=F(z,h.percentileParams));return R}function F(h,z){const {fieldType:q,value:B,orderBy:R,isDiscrete:N}=z,da=D(q,"desc"===R);h=[...h].filter(M=>null!=M).sort((M,A)=>da(M,A));if(0===h.length)return null;if(0>=B)return h[0];if(1<=B)return h[h.length-1];var K=(h.length-1)*B,H=Math.floor(K);z=H+1;K%=1;H=h[H];const T=h[z];return z>=h.length||N||"string"===typeof H||"string"===typeof T?H:H*(1-K)+T*K}function D(h,
z){const q=z?1:-1,B=v(z),R=y(z);if(!h||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...m].includes(h))return(N,da)=>"number"===typeof N&&"number"===typeof da?B(N,da):"string"===typeof N&&"string"===typeof da?R(N,da):q;if("esriFieldTypeDate"===h)return(N,da)=>{N=(new Date(N)).getTime();da=(new Date(da)).getTime();return isNaN(N)||isNaN(da)?q:B(N,da)};if(m.has(h))return(N,da)=>B(N,da);if("esriFieldTypeString"===h)return(N,da)=>R(N,da);if("esriFieldTypeGUID"===
h||"esriFieldTypeGlobalID"===h){const N=y(z);return(da,K)=>N(r(da),r(K))}return z?(N,da)=>1:(N,da)=>-1}function y(h){return h?(z,q)=>{z=z.toUpperCase();q=q.toUpperCase();return z>q?-1:z<q?1:0}:(z,q)=>{z=z.toUpperCase();q=q.toUpperCase();return z<q?-1:z>q?1:0}}function v(h){return h?(z,q)=>q-z:(z,q)=>z-q}function r(h){return h.substr(24,12)+h.substr(19,4)+h.substr(16,2)+h.substr(14,2)+h.substr(11,2)+h.substr(9,2)+h.substr(6,2)+h.substr(4,2)+h.substr(2,2)+h.substr(0,2)}function I(h,z){const q=O({field:z.field,
normalizationType:z.normalizationType,normalizationField:z.normalizationField,classificationMethod:z.classificationMethod,standardDeviationInterval:z.standardDeviationInterval,breakCount:z.numClasses||5});h=P(h,z.minValue,z.maxValue);return Z.createGenerateRendererClassBreaks({definition:q,values:h,normalizationTotal:z.normalizationTotal})}function P(h,z,q){z=null==z?-Infinity:z;q=null==q?Infinity:q;return h.filter(B=>Number.isFinite(B)&&B>=z&&B<=q)}function O(h){const z=h.field,q=h.classificationMethod||
"equal-interval",B=h.normalizationType,R=h.normalizationField,N=new d;N.classificationField=z;N.breakCount=h.breakCount;N.classificationMethod=q;N.standardDeviationInterval="standard-deviation"===q?h.standardDeviationInterval||1:void 0;N.normalizationType=B;N.normalizationField="field"===B?R:void 0;return N}function t(h,z){const {field:q,classificationMethod:B,standardDeviationInterval:R,normalizationType:N,normalizationField:da,normalizationTotal:K,minValue:H,maxValue:T}=z,M=z.numBins||10;let A=
z=null,e=null;B&&"equal-interval"!==B||N?({classBreaks:h}=I(h,{field:q,normalizationType:N,normalizationField:da,normalizationTotal:K,classificationMethod:B,standardDeviationInterval:R,minValue:H,maxValue:T,numClasses:M}),z=h[0].minValue,A=h[h.length-1].maxValue,e=h.map(f=>[f.minValue,f.maxValue])):(null!=H&&null!=T?(z=H,A=T):(h=u({values:h,minValue:H,maxValue:T,useSampleStdDev:!N,supportsNullCount:Y({normalizationType:N,normalizationField:da,minValue:H,maxValue:T})}),z=h.min,A=h.max),e=b(z,A,M));
return{min:z,max:A,intervals:e}}function C(h,z){let q=-1;for(let B=h.length-1;0<=B;B--)if(z>=h[B][0]){q=B;break}return q}function b(h,z,q){const B=(z-h)/q,R=[];let N;for(let da=1;da<=q;da++)N=h+B,N=Number(N.toFixed(16)),R.push([h,da===q?z:N]),h=N;return R}const g=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,m=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),w="min max avg stddev count sum variance nullcount median".split(" ");l.calculateClassBreaks=
I;l.calculateHistogram=function(h,z){const {min:q,max:B,intervals:R}=t(h,z),N=R.map((da,K)=>({minValue:R[K][0],maxValue:R[K][1],count:0}));for(const da of h)null!=da&&da>=q&&da<=B&&(h=C(R,da),-1<h&&N[h].count++);return{bins:N,minValue:q,maxValue:B,normalizationTotal:z.normalizationTotal}};l.calculatePercentile=F;l.calculateStatistics=u;l.calculateStringStatistics=function(h){const z=h.returnDistinct?[...new Set(h.values)]:h.values,q=z.filter(R=>null!=R).length,B={count:q};h.supportsNullCount&&(B.nullcount=
z.length-q);h.percentileParams&&(B.median=F(z,h.percentileParams));return B};l.calculateUniqueValuesCount=function(h){const z={};for(let q of h){if(null==q||"string"===typeof q&&""===q.trim())q=null;null==z[q]?z[q]={count:1,data:q}:z[q].count++}return{count:z}};l.createClassBreaksDefinition=O;l.createUVResult=function(h,z,q){const B=h.count;h=[];q&&z&&"coded-value"===z.type&&z.codedValues.forEach(R=>{R=R.code;B.hasOwnProperty(R)||(B[R]={data:R,count:0})});for(const R in B)z=B[R],h.push({value:z.data,
count:z.count,label:z.label});return{uniqueValueInfos:h}};l.getAttributeComparator=D;l.getEqualIntervalBins=b;l.getNormalizedValue=function(h,z,q,B){let R=null;switch(z){case "log":0!==h&&(R=Math.log(h)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(B)&&0!==B&&(R=h/B*100);break;case "field":Number.isFinite(q)&&0!==q&&(R=h/q);break;case "natural-log":0<h&&(R=Math.log(h));break;case "square-root":0<h&&(R=h**.5)}return R};l.isNullCountSupported=Y;l.processSummaryStatisticsResult=function(h,
z){let q;for(q in h)-1<w.indexOf(q)&&(Number.isFinite(h[q])||(h[q]=null));if(!z)return h;["avg","stddev","variance"].forEach(B=>{null!=h[B]&&(h[B]=Math.ceil(h[B]))});return h};l.resolveCBResult=function(h,z){let q=h.classBreaks;const B=q[0].minValue,R=q[q.length-1].maxValue,N="standard-deviation"===z;q=q.map(da=>{const K=da.label;da={minValue:da.minValue,maxValue:da.maxValue,label:K};if(N&&K){const H=K.match(g).map(T=>+T.trim());2===H.length?(da.minStdDev=H[0],da.maxStdDev=H[1],0>H[0]&&0<H[1]&&(da.hasAvg=
!0)):1===H.length&&(K.includes("\x3c")?(da.minStdDev=null,da.maxStdDev=H[0]):K.includes("\x3e")&&(da.minStdDev=H[0],da.maxStdDev=null))}return da});return{minValue:B,maxValue:R,classBreakInfos:q,normalizationTotal:h.normalizationTotal}};l.statisticTypes=w;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(l,d,Z,Y,u,F,D,y,v){u=new Z.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});Z=new Z.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});v=function(r){function I(){var P=r.apply(this,arguments)||this;P.breakCount=null;P.classificationField=
null;P.classificationMethod=null;P.normalizationField=null;P.normalizationType=null;P.type="class-breaks-definition";return P}l._inheritsLoose(I,r);l._createClass(I,[{key:"standardDeviationInterval",set:function(P){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",P)}},{key:"definedInterval",set:function(P){"defined-interval"===this.classificationMethod&&this._set("definedInterval",P)}}]);return I}(v);d.__decorate([Y.property({json:{write:!0}})],v.prototype,"breakCount",
void 0);d.__decorate([Y.property({json:{write:!0}})],v.prototype,"classificationField",void 0);d.__decorate([Y.property({type:String,json:{read:u.read,write:u.write}})],v.prototype,"classificationMethod",void 0);d.__decorate([Y.property({json:{write:!0}})],v.prototype,"normalizationField",void 0);d.__decorate([Y.property({json:{read:Z.read,write:Z.write}})],v.prototype,"normalizationType",void 0);d.__decorate([Y.property({value:null,json:{write:!0}})],v.prototype,"standardDeviationInterval",null);
d.__decorate([Y.property({value:null,json:{write:!0}})],v.prototype,"definedInterval",null);d.__decorate([Y.property()],v.prototype,"type",void 0);return v=d.__decorate([y.subclass("esri.rest.support.ClassBreaksDefinition")],v)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r,I){Z=new Z.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});Y=function(P){function O(){var t=P.apply(this,arguments)||this;t.baseSymbol=null;t.colorRamp=null;t.type=null;return t}l._inheritsLoose(O,P);return O}(Y.JSONSupport);d.__decorate([u.property({type:I,json:{write:!0}})],Y.prototype,"baseSymbol",void 0);d.__decorate([u.property({types:r.types,json:{read:{reader:r.fromJSON},write:!0}})],Y.prototype,"colorRamp",void 0);d.__decorate([u.property({json:{read:Z.read,
write:Z.write}})],Y.prototype,"type",void 0);return Y=d.__decorate([v.subclass("esri.rest.support.ClassificationDefinition")],Y)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(l,d,Z,Y){Z={key:"type",base:Z,typeMap:{algorithmic:d,multipart:Y}};l.fromJSON=function(u){return u&&u.type?"algorithmic"===u.type?d.fromJSON(u):"multipart"===u.type?Y.fromJSON(u):null:null};l.types=Z;Object.defineProperty(l,"__esModule",
{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(l,d,Z,Y,u,F,D,y,v){var r;v=r=function(I){function P(O){O=I.call(this,O)||this;O.algorithm=null;O.fromColor=null;O.toColor=
null;O.type="algorithmic";return O}l._inheritsLoose(P,I);P.prototype.clone=function(){return new r({fromColor:Y.clone(this.fromColor),toColor:Y.clone(this.toColor),algorithm:this.algorithm})};return P}(v);d.__decorate([D.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],v.prototype,"algorithm",void 0);d.__decorate([u.property({type:Z,json:{type:[F.Integer],write:!0}})],v.prototype,"fromColor",void 0);d.__decorate([u.property({type:Z,json:{type:[F.Integer],
write:!0}})],v.prototype,"toColor",void 0);d.__decorate([u.property({type:["algorithmic"]})],v.prototype,"type",void 0);return v=r=d.__decorate([y.subclass("esri.rest.support.AlgorithmicColorRamp")],v)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(l,d,Z){l.enumeration=function(Y,u={}){var F;Y=Y instanceof d.JSONMap?Y:new d.JSONMap(Y,u);Y={type:(null!=(F=null==u?void 0:u.ignoreUnknown)?F:1)?Y.apiValues:String,readOnly:null==
u?void 0:u.readOnly,json:{type:Y.jsonValues,read:null!=u&&u.readOnly?!1:{reader:Y.read},write:{writer:Y.write}}};void 0!==(null==u?void 0:u.default)&&(Y.json.default=u.default);void 0!==(null==u?void 0:u.name)&&(Y.json.name=u.name);return Z.property(Y)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,d,Z,Y,u,F,D,y){Z=function(v){function r(I){I=v.call(this,I)||this;I.type=null;return I}l._inheritsLoose(r,v);return r}(Z.JSONSupport);d.__decorate([Y.property({readOnly:!0,json:{read:!1,write:!0}})],Z.prototype,"type",void 0);return Z=d.__decorate([y.subclass("esri.rest.support.ColorRamp")],Z)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(l,d,Z,Y,u,F,D,y){var v;u=v=function(r){function I(P){P=r.call(this,P)||this;P.colorRamps=null;P.type="multipart";return P}l._inheritsLoose(I,r);I.prototype.clone=function(){return new v({colorRamps:Z.clone(this.colorRamps)})};return I}(y);d.__decorate([Y.property({type:[D],json:{write:!0}})],u.prototype,"colorRamps",void 0);d.__decorate([Y.property({type:["multipart"]})],u.prototype,"type",void 0);return u=v=d.__decorate([F.subclass("esri.rest.support.MultipartColorRamp")],u)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r,I){Y=new Y.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let P=0;u=function(O){function t(b){b=O.call(this,b)||this;b.id=`sym${P++}`;b.type=null;return b}l._inheritsLoose(t,
O);var C=t.prototype;C.readColor=function(b){return b&&null!=b[0]?[b[0],b[1],b[2],b[3]/255]:b};C.collectRequiredFields=function(){var b=l._asyncToGenerator(function*(g,m){});return function(g,m){return b.apply(this,arguments)}}();C.hash=function(){return JSON.stringify(this.toJSON())};C.clone=function(){};l._createClass(t,[{key:"color",set:function(b){this._set("color",b)}}]);return t}(u.JSONSupport);d.__decorate([F.property({type:Y.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Y.write}}})],
u.prototype,"type",void 0);d.__decorate([F.property({type:Z,value:new Z([0,0,0,1]),json:{write:{allowNull:!0}}})],u.prototype,"color",null);d.__decorate([r.reader("color")],u.prototype,"readColor",null);return u=d.__decorate([I.subclass("esri.symbols.Symbol")],u)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(l){function d(I){const {classificationMethod:P,breakCount:O,normalizationType:t,definedInterval:C}=I.definition,b=[];var g=I.values;if(0===g.length)return[];
g=g.sort((B,R)=>B-R);var m=g[0],w=g[g.length-1];if("equal-interval"===P)if(g.length>=O){g=(w-m)/O;I=m;for(var h=1;h<O;h++){var z=Number((m+h*g).toFixed(6));b.push({minValue:I,maxValue:z,label:Z(I,z,t)});I=z}b.push({minValue:I,maxValue:w,label:Z(I,w,t)})}else g.forEach(B=>{b.push({minValue:B,maxValue:B,label:Z(B,B,t)})});else if("natural-breaks"===P){g=Y(g);I=u(g.uniqueValues,I.valueFrequency||g.valueFrequency,O);for(h=1;h<O;h++)g.uniqueValues.length>h&&(z=Number(g.uniqueValues[I[h]].toFixed(6)),b.push({minValue:m,
maxValue:z,label:Z(m,z,t)}),m=z);b.push({minValue:m,maxValue:w,label:Z(m,w,t)})}else if("quantile"===P)if(g.length>=O&&m!==w){I=Math.ceil(g.length/O);h=0;for(z=1;z<O;z++){var q=I+h-1;q>g.length&&(q=g.length-1);0>q&&(q=0);b.push({minValue:m,maxValue:g[q],label:Z(m,g[q],t)});m=g[q];h+=I;I=Math.ceil((g.length-h)/(O-z))}b.push({minValue:m,maxValue:w,label:Z(m,w,t)})}else for(w=-1,m=0;m<g.length;m++)I=g[m],I!==w&&(w=I,b.push({minValue:w,maxValue:I,label:Z(w,I,t)}),w=I);else if("standard-deviation"===P)if(I=
y(g),h=v(g,I),0===h)b.push({minValue:g[0],maxValue:g[0],label:Z(g[0],g[0],t)});else{g=D(m,w,O,I,h)*h;h=0;for(z=O;1<=z;z--)q=Number((I-(z-.5)*g).toFixed(6)),b.push({minValue:m,maxValue:q,label:Z(m,q,t)}),m=q,h++;z=Number((I+.5*g).toFixed(6));b.push({minValue:m,maxValue:z,label:Z(m,z,t)});m=z;h++;for(q=1;q<=O;q++)z=h===2*O?w:Number((I+(q+.5)*g).toFixed(6)),b.push({minValue:m,maxValue:z,label:Z(m,z,t)}),m=z,h++}else if("defined-interval"===P){if(!C)return b;w=g[0];g=g[g.length-1];m=Math.ceil((g-w)/C);
I=w;for(h=1;h<m;h++)z=Number((w+h*C).toFixed(6)),b.push({minValue:I,maxValue:z,label:Z(I,z,t)}),I=z;b.push({minValue:I,maxValue:g,label:Z(I,g,t)})}return b}function Z(I,P,O){let t=null;return t=I===P?O&&"percent-of-total"===O?I+"%":I.toString():O&&"percent-of-total"===O?I+"% - "+P+"%":I+" - "+P}function Y(I){const P=[],O=[];let t=Number.MIN_VALUE,C=1,b=-1;for(let g=0;g<I.length;g++){const m=I[g];m===t?(C++,O[b]=C):null!==m&&(P.push(m),t=m,C=1,O.push(C),b++)}return{uniqueValues:P,valueFrequency:O}}
function u(I,P,O){var t=I.length;const C=[];O>t&&(O=t);for(var b=0;b<O;b++)C.push(Math.round(b*t/O-1));C.push(t-1);b=F(C,I,P,O);{t=b.mean;b=b.sdcm;var g=O,m=0,w=0;let z=0,q=0,B=!0;for(let R=0;2>R&&B;R++){0===R&&(B=!1);for(var h=0;h<g-1;h++)for(;C[h+1]+1!==C[h+2];)if(C[h+1]+=1,m=r(h,C,I,P),z=m.sbMean,m=m.sbSdcm,w=r(h+1,C,I,P),q=w.sbMean,w=w.sbSdcm,m+w<b[h]+b[h+1])b[h]=m,b[h+1]=w,t[h]=z,t[h+1]=q,B=!0;else{--C[h+1];break}for(h=g-1;0<h;h--)for(;C[h]!==C[h-1]+1;)if(--C[h],m=r(h-1,C,I,P),z=m.sbMean,m=m.sbSdcm,
w=r(h,C,I,P),q=w.sbMean,w=w.sbSdcm,m+w<b[h-1]+b[h])b[h-1]=m,b[h]=w,t[h-1]=z,t[h]=q,B=!0;else{C[h]+=1;break}}t=B}t&&(b=F(C,I,P,O));return C}function F(I,P,O,t){let C=[];var b=[],g=[];let m=0;const w=[],h=[];for(var z=0;z<t;z++){var q=r(z,I,P,O);w.push(q.sbMean);h.push(q.sbSdcm);m+=h[z]}q=m;for(z=!0;z||m<q;){z=!1;C=[];for(b=0;b<t;b++)C.push(I[b]);for(g=0;g<t;g++)for(q=I[g]+1;q<=I[g+1];q++)if(b=P[q],0<g&&q!==I[g+1]&&Math.abs(b-w[g])>Math.abs(b-w[g-1]))I[g]=q;else if(g<t-1&&I[g]!==q-1&&Math.abs(b-w[g])>
Math.abs(b-w[g+1])){I[g+1]=q-1;break}q=m;m=0;b=[];g=[];for(let B=0;B<t;B++){b.push(w[B]);g.push(h[B]);const R=r(B,I,P,O);w[B]=R.sbMean;h[B]=R.sbSdcm;m+=h[B]}}if(m>q){for(P=0;P<t;P++)I[P]=C[P],w[P]=b[P],h[P]=g[P];m=q}return{mean:w,sdcm:h}}function D(I,P,O,t,C){I=Math.max(t-I,P-t)/C/O;return 1<=I?1:.5<=I?.5:.25}function y(I){let P=0;for(let O=0;O<I.length;O++)P+=I[O];return P/=I.length}function v(I,P){let O=0;for(let t=0;t<I.length;t++){const C=I[t];O+=(C-P)*(C-P)}O/=I.length;return Math.sqrt(O)}function r(I,
P,O,t){var C=0,b=0;for(var g=P[I]+1;g<=P[I+1];g++){const m=t[g];C+=O[g]*m;b+=m}0>=b&&console.log("Exception in Natural Breaks calculation");C/=b;b=0;for(g=P[I]+1;g<=P[I+1];g++)b+=t[g]*(O[g]-C)**2;return{sbMean:C,sbSdcm:b}}l.createGenerateRendererClassBreaks=function(I){const {normalizationTotal:P}=I;return{classBreaks:d(I),normalizationTotal:P}};l.createGenerateRendererUniqueValues=function(I){I=Y(I);const P=[],O=I.uniqueValues.length;for(let t=0;t<O;t++){const C=I.uniqueValues[t];P.push({value:C,
count:I.valueFrequency[t],label:C.toString()})}return{uniqueValues:P}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(l){function d(u,F,D,y,v){if(null!=y&&null!=v)return r=>{const I=u.getAttribute(r,F);r=u.getAttribute(r,D);return(null==I||I<=v)&&(null==r||r>=y)};if(null!=y)return r=>{r=u.getAttribute(r,D);return null==r||r>=y};if(null!=v)return r=>{r=u.getAttribute(r,F);return null==r||r<=v}}function Z(u,F,D,y){if(null!=
D&&null!=y&&D===y)return v=>u.getAttribute(v,F)===D;if(null!=D&&null!=y)return v=>{v=u.getAttribute(v,F);return v>=D&&v<=y};if(null!=D)return v=>u.getAttribute(v,F)>=D;if(null!=y)return v=>u.getAttribute(v,F)<=y}function Y(){return()=>!1}l.getTimeExtent=function(u,F){if(!u)return null;const D=F.featureAdapter,{startTimeField:y,endTimeField:v}=u;let r=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY;if(y&&v)F.forEach(P=>{const O=D.getAttribute(P,y);P=D.getAttribute(P,v);null==O||isNaN(O)||(r=Math.min(r,
O));null==P||isNaN(P)||(I=Math.max(I,P))});else{const P=y||v;F.forEach(O=>{O=D.getAttribute(O,P);null==O||isNaN(O)||(r=Math.min(r,O),I=Math.max(I,O))})}return{start:r,end:I}};l.getTimeOperator=function(u,F,D){if(!F||!u)return null;const {startTimeField:y,endTimeField:v}=u;if(!y&&!v)return null;const {start:r,end:I}=F;return null===r&&null===I?null:void 0===r&&void 0===I?Y():y&&v?d(D,y,v,r,I):Z(D,y||v,r,I)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r,I,P,O,t){function C(A,e,f,E=A.hasZ,U=A.hasM){if(u.isNone(e))return null;const ca=A.hasZ&&E,ja=A.hasM&&U;return f?(A=P.quantizeOptimizedGeometry(H,e,A.hasZ,A.hasM,"esriGeometryPoint",f,E,U),P.convertToPoint(A,ca,ja)):P.convertToPoint(e,ca,ja)}function b(){b=Z._asyncToGenerator(function*(A,e,f){const {outFields:E,orderByFields:U,groupByFieldsForStatistics:ca,outStatistics:ja}=A;if(E)for(var na=0;na<E.length;na++)E[na]=E[na].trim();if(U)for(na=0;na<U.length;na++)U[na]=U[na].trim();
if(ca)for(na=0;na<ca.length;na++)ca[na]=ca[na].trim();if(ja)for(na=0;na<ja.length;na++)ja[na].onStatisticField&&(ja[na].onStatisticField=ja[na].onStatisticField.trim());A.geometry&&!A.outSR&&(A.outSR=A.geometry.spatialReference);return m(A,e,f)});return b.apply(this,arguments)}function g(){g=Z._asyncToGenerator(function*(A,e,f){return m(A,e,f)});return g.apply(this,arguments)}function m(A,e,f){return w.apply(this,arguments)}function w(){w=Z._asyncToGenerator(function*(A,e,f){if(!A)return null;var {where:E}=
A;A.where=E=E&&E.trim();if(!E||/^1 *= *1$/.test(E)||e&&e===E)A.where=null;if(!A.geometry)return A;e=yield h(A);A.distance=0;A.units=null;"esriSpatialRelEnvelopeIntersects"===A.spatialRel&&({spatialReference:E}=A.geometry,e=D.getGeometryExtent(e),e.spatialReference=E);A.geometry=e;yield t.checkProjectionSupport(e.spatialReference,f);e=(yield v.normalizeCentralMeridian(y.fromJSON(e)))[0];if(u.isNone(e))throw N;e=e.toJSON();e=yield t.project(e,e.spatialReference,f);if(!e)throw N;e.spatialReference=f;
A.geometry=e;return A});return w.apply(this,arguments)}function h(A){return z.apply(this,arguments)}function z(){z=Z._asyncToGenerator(function*(A){const {geometry:e,distance:f,units:E}=A;if(null==f||"vertexAttributes"in e)return e;var U=e.spatialReference;A=E?R.fromJSON(E):F.getUnitString(U);U=U&&(r.isGeographic(U)||r.isWebMercator(U))?e:yield t.checkProjectionSupport(U,r.WGS84).then(()=>t.project(e,r.WGS84));return(yield q())(U.spatialReference,U,f,A)});return z.apply(this,arguments)}function q(){return B.apply(this,
arguments)}function B(){B=Z._asyncToGenerator(function*(){return(yield new Promise((A,e)=>l(["../../../geometry/geometryEngineJSON"],A,e))).geodesicBuffer});return B.apply(this,arguments)}const R=new Y.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),N=Object.freeze({}),da=new O,K=new O,H=new O,T={esriGeometryPoint:P.convertToPoint,esriGeometryPolyline:P.convertToPolyline,
esriGeometryPolygon:P.convertToPolygon,esriGeometryMultipoint:P.convertToMultipoint},M=(A,e)=>"_geVersion"!==A?e:void 0;d.QUERY_ENGINE_EMPTY_RESULT=N;d.cleanFromGeometryEngine=function(A){return A&&"_geVersion"in A?JSON.parse(JSON.stringify(A,M)):A};d.getCentroid=function(A,e,f){if("esriGeometryPolygon"!==A.geometryType||!e||!e.centroid&&!e.geometry)return null;e.centroid||(e.centroid=I.getCentroidOptimizedGeometry(new O,e.geometry,A.hasZ,A.hasM));return C(A,e.centroid,f)};d.getGeometry=function(A,
e,f,E,U,ca,ja=e,na=f){const ta=e&&ja,ma=f&&na;E=u.isSome(E)?"coords"in E?E:E.geometry:null;if(u.isNone(E))return null;if(U)return e=P.generalizeOptimizedGeometry(K,E,e,f,A,U,ja,na),ca&&(e=P.quantizeOptimizedGeometry(H,e,ta,ma,A,ca)),T[A](e,ta,ma);if(ca)return ca=P.quantizeOptimizedGeometry(H,E,e,f,A,ca,ja,na),T[A](ca,ta,ma);P.removeZMValues(da,E,e,f,ja,na);return T[A](da,ta,ma)};d.normalizeFilter=function(A,e,f){return g.apply(this,arguments)};d.normalizeQuery=function(A,e,f){return b.apply(this,
arguments)};d.normalizeQueryLike=m;d.transformCentroid=C;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(l,d,Z,Y,u,F,D,y){function v(L,Q,ba){if(L)for(const oa of L)(L=(L=F.getDeepValue(oa,Q))&&"function"!==typeof L&&ba.get(L))&&F.setDeepValue(oa,L.name,Q)}function r(L,Q){if(!L||
!Q)return[];p.clear();I(p,L,Q);return Array.from(p).sort()}function I(L,Q,ba){var oa;if(ba)if(null!=Q&&null!=(oa=Q.fields)&&oa.length)if(ba.includes("*"))for(const {name:pa}of Q.fields)L.add(pa);else for(const pa of ba)P(L,Q,pa);else if(ba.includes("*"))L.clear(),L.add("*");else for(const pa of ba)L.add(pa)}function P(L,Q,ba){"string"===typeof ba&&(Q?(Q=Q.get(ba))&&L.add(Q.name):L.add(ba))}function O(L,Q,ba){return t.apply(this,arguments)}function t(){t=Z._asyncToGenerator(function*(L,Q,ba){var oa;
if(ba){var {arcadeUtils:pa}=yield y.loadArcade();ba=pa.extractFieldNames(ba,null==Q?void 0:null==(oa=Q.fields)?void 0:oa.map(ua=>ua.name));for(const ua of ba)P(L,Q,ua)}});return t.apply(this,arguments)}function C(L,Q,ba){return b.apply(this,arguments)}function b(){b=Z._asyncToGenerator(function*(L,Q,ba){if(ba&&"1\x3d1"!==ba){ba=(yield new Promise((oa,pa)=>l(["../../core/sql/WhereClause"],oa,pa))).WhereClause.create(ba,Q);if(!ba.isStandardized)throw new Y("fieldUtils:collectFilterFields","Where clause is not standardized");
I(L,Q,ba.fieldNames)}});return b.apply(this,arguments)}function g(L,Q){for(const ba of L)if(ba&&ba.valueType&&ba.valueType===Q)return ba.name;return null}function m(){m=Z._asyncToGenerator(function*(L){if(!L)return[];const Q=new Set;yield w(Q,L);return Array.from(Q).sort()});return m.apply(this,arguments)}function w(L,Q){return h.apply(this,arguments)}function h(){h=Z._asyncToGenerator(function*(L,Q){if(Q){var ba=F.getDeepValue("elevationInfo.featureExpressionInfo",Q);if(ba)return ba.collectRequiredFields(L,
Q.fieldsIndex)}});return h.apply(this,arguments)}function z(L,Q,ba){return q.apply(this,arguments)}function q(){q=Z._asyncToGenerator(function*(L,Q,ba){ba.outStatistic.onStatisticValueExpression?O(L,Q,ba.outStatistic.onStatisticValueExpression):L.add(ba.outStatistic.onStatisticField)});return q.apply(this,arguments)}function B(){B=Z._asyncToGenerator(function*(L,Q,ba){var oa,pa;if(Q&&ba&&"cluster"===ba.type){var ua=[];null!=(oa=ba.popupTemplate)&&oa.expressionInfos&&ua.push(...ba.popupTemplate.expressionInfos.map(wa=>
O(L,Q.fieldsIndex,wa.expression)));if(Array.isArray(null==(pa=ba.popupTemplate)?void 0:pa.content)){oa=ba.popupTemplate.content;for(const wa of oa)"expression"===wa.type&&wa.expressionInfo&&ua.push(O(L,Q.fieldsIndex,wa.expressionInfo.expression))}ba.fields&&ua.push(...ba.fields.map(wa=>z(L,Q.fieldsIndex,wa)));yield Promise.all(ua)}});return B.apply(this,arguments)}function R(){R=Z._asyncToGenerator(function*(L,Q,ba){Q&&(Q.timeInfo&&u.isSome(ba)&&ba.timeExtent&&I(L,Q.fieldsIndex,[Q.timeInfo.startField,
Q.timeInfo.endField]),Q.floorInfo&&I(L,Q.fieldsIndex,[Q.floorInfo.floorField]),u.isSome(ba)&&u.isSome(ba.where)&&(yield C(L,Q.fieldsIndex,ba.where)))});return R.apply(this,arguments)}function N(){N=Z._asyncToGenerator(function*(L,Q,ba){Q&&ba&&(yield Promise.all(ba.map(oa=>da(L,Q,oa))))});return N.apply(this,arguments)}function da(L,Q,ba){return K.apply(this,arguments)}function K(){K=Z._asyncToGenerator(function*(L,Q,ba){Q&&ba&&(ba.valueExpression?yield O(L,Q.fieldsIndex,ba.valueExpression):ba.field&&
P(L,Q.fieldsIndex,ba.field))});return K.apply(this,arguments)}function H(){H=Z._asyncToGenerator(function*(L){if(!L)return[];const Q="timeInfo"in L&&L.timeInfo;return Q?r(L.fieldsIndex,[L.trackIdField,Q.startField,Q.endField]):[]});return H.apply(this,arguments)}function T(){T=Z._asyncToGenerator(function*(L){if(!L)return[];const Q=new Set;yield M(Q,L);return Array.from(Q).sort()});return T.apply(this,arguments)}function M(L,Q){return A.apply(this,arguments)}function A(){A=Z._asyncToGenerator(function*(L,
Q){const {labelingInfo:ba,fieldsIndex:oa}=Q;ba&&ba.length&&(yield Promise.all(ba.map(pa=>e(L,oa,pa))))});return A.apply(this,arguments)}function e(L,Q,ba){return f.apply(this,arguments)}function f(){f=Z._asyncToGenerator(function*(L,Q,ba){if(ba){var oa=ba.getLabelExpression();ba=ba.where;"arcade"===oa.type?yield O(L,Q,oa.expression):(oa=oa.expression.match(/{[^}]*}/g))&&oa.forEach(pa=>{P(L,Q,pa.slice(1,-1))});yield C(L,Q,ba)}});return f.apply(this,arguments)}function E(L){return"number"===typeof L&&
!isNaN(L)&&isFinite(L)}function U(L){return null===L||E(L)}function ca(L){return null===L||ea(L)}function ja(L){return null!=L&&"string"===typeof L}function na(L){return null===L||ja(L)}function ta(){return!0}function ma(L,Q){let ba;switch(L.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ba=L.nullable?ca:ea;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ba=
L.nullable?U:E;break;case "string":case "esriFieldTypeString":ba=L.nullable?na:ja;break;default:ba=ta}return 1===arguments.length?ba:ba(Q)}function la(L){return null!=L&&J.has(L.type)}function va(L,Q){return L.nullable&&null===Q?null:la(L)&&!Ja(L.type,Number(Q))?d.NumericRangeValidationError.OUT_OF_RANGE:ma(L,Q)?L.domain?D.validateDomainValue(L.domain,Q):null:d.TypeValidationError.INVALID_TYPE}function Ja(L,Q){return(L="string"===typeof L?Ba(L):L)?L.isInteger?ea(Q)&&Q>=L.min&&Q<=L.max:Q>=L.min&&Q<=
L.max:!1}function Ba(L){switch(L){case "esriFieldTypeSmallInteger":case "small-integer":return S;case "esriFieldTypeInteger":case "integer":return V;case "esriFieldTypeSingle":case "single":return ia;case "esriFieldTypeDouble":case "double":return fa}}function Sa(L,Q,ba){if(!Q||!Q.attributes||!L){if(u.isSome(ba))for(var oa of L)ba.add(oa);return!0}Q=Q.attributes;oa=!1;for(const pa of L)if(!(pa in Q))if(oa=!0,u.isSome(ba))ba.add(pa);else break;return oa}function Oa(){Oa=Z._asyncToGenerator(function*(L,
Q){const ba=new Set;for(const oa of Q)yield O(ba,L.fieldsIndex,oa);return Array.from(ba).sort()});return Oa.apply(this,arguments)}const Ia="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),c=["field","normalizationField"],p=new Set,ea=(()=>"isInteger"in Number?Number.isInteger:L=>"number"===typeof L&&isFinite(L)&&Math.floor(L)===L)(),n=["integer","small-integer",
"single","double"],J=new Set([...n,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const S={min:-32768,max:32767,isInteger:!0},V={min:-2147483648,max:2147483647,
isInteger:!0},ia={min:-3.4E38,max:1.2E38,isInteger:!1},fa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=O;d.collectElevationFields=w;d.collectFeatureReductionFields=function(L,Q,ba){return B.apply(this,arguments)};d.collectField=P;d.collectFields=I;d.collectFilterFields=function(L,Q,ba){return R.apply(this,arguments)};d.collectLabelingFields=M;d.collectOrderByInfos=function(L,Q,ba){return N.apply(this,arguments)};d.doubleRange=fa;d.featureHasFields=function(L,
Q){return!Sa(L,Q,null)};d.fixFields=r;d.fixRendererFields=function(L,Q){if(null!=L&&null!=Q)for(const ba of Array.isArray(L)?L:[L])if(v(Ia,ba,Q),"visualVariables"in ba&&ba.visualVariables)for(const oa of ba.visualVariables)v(c,oa,Q)};d.fixTimeInfoFields=function(L,Q){if(null!=L&&null!=Q&&Q.fields.length)if("startField"in L){var ba=Q.get(L.startField);Q=Q.get(L.endField);L.startField=ba&&ba.name||null;L.endField=Q&&Q.name||null}else ba=Q.get(L.startTimeField),Q=Q.get(L.endTimeField),L.startTimeField=
ba&&ba.name||null,L.endTimeField=Q&&Q.name||null};d.getDisplayFieldName=function({displayField:L,fields:Q}){if(L)return L;if(!Q||!Q.length)return null;if(!(L=g(Q,"name-or-title")||g(Q,"unique-identifier")||g(Q,"type-or-category")))a:{for(const ba of Q)if(ba&&ba.name&&(Q=ba.name.toLowerCase(),-1<Q.indexOf("name")||-1<Q.indexOf("title"))){L=ba.name;break a}L=null}return L};d.getElevationFields=function(L){return m.apply(this,arguments)};d.getExpressionFields=function(L,Q){return Oa.apply(this,arguments)};
d.getFeatureEditFields=function(L){if(!L)return[];const Q="editFieldsInfo"in L&&L.editFieldsInfo;return Q?r(L.fieldsIndex,[Q&&Q.creatorField,Q&&Q.creationDateField,Q&&Q.editorField,Q&&Q.editDateField]):[]};d.getFeatureGeometryFields=function(L){if(!L)return[];const Q=L.geometryFieldsInfo;return Q?r(L.fieldsIndex,[Q.shapeAreaField,Q.shapeLengthField]):[]};d.getFieldDefaultValue=function(L){const Q=L.defaultValue;if(void 0!==Q&&ma(L,Q))return Q;if(L.nullable)return null};d.getFieldRange=function(L){const Q=
D.getDomainRange(L.domain);if(Q)return Q;if(la(L))return Ba(L.type)};d.getLabelingFields=function(L){return T.apply(this,arguments)};d.getNumericTypeForValue=function(L){if(!E(L))return null;if(ea(L)){if(L>=S.min&&L<=S.max)return"esriFieldTypeSmallInteger";if(L>=V.min&&L<=V.max)return"esriFieldTypeInteger"}return L>=ia.min&&L<=ia.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};d.getTimeFields=function(L){return H.apply(this,arguments)};d.integerRange=V;d.isDateField=function(L){return null!=L&&("date"===
L.type||"esriFieldTypeDate"===L.type)};d.isNumberInRange=Ja;d.isNumericField=la;d.isStringField=function(L){return null!=L&&("string"===L.type||"esriFieldTypeString"===L.type)};d.isValidFieldValue=function(L,Q){return null===va(L,Q)};d.isValueMatchingFieldType=ma;d.numericTypes=n;d.packFields=function(L,Q,ba=1){if(!Q||!L)return[];if(Q.includes("*"))return["*"];Q=r(L,Q);return Q.length/L.fields.length>=ba?["*"]:Q};d.populateMissingFields=Sa;d.rendererFields=Ia;d.sanitizeNullFieldValue=function(L){return null==
L||"number"===typeof L&&isNaN(L)?null:L};d.singleRange=ia;d.smallIntegerRange=S;d.unpackFieldNames=function(L,Q){return u.isNone(Q)||u.isNone(L)?[]:Q.includes("*")?L.fields.map(ba=>ba.name):Q};d.validateFieldValue=va;d.validationErrorToString=function(L,Q,ba){switch(L){case D.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ba} is not in the coded domain - field: ${Q.name}, domain: ${JSON.stringify(Q.domain)}`;case D.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ba} is out of the range of valid values - field: ${Q.name}, domain: ${JSON.stringify(Q.domain)}`;
case d.TypeValidationError.INVALID_TYPE:return`Value ${ba} is not a valid value for the field type - field: ${Q.name}, type: ${Q.type}, nullable: ${Q.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:{const {min:oa,max:pa}=Ba(Q.type);return`Value ${ba} is out of range for the number type - field: ${Q.name}, type: ${Q.type}, value range is ${oa} to ${pa}`}}};d.visualVariableFields=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(l){function d(Z,Y){switch(Z.type){case "range":{const u="range"in Z?Z.range[1]:Z.maxValue;if(+Y<("range"in Z?Z.range[0]:Z.minValue)||+Y>u)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==Z.codedValues||Z.codedValues.every(u=>null==u||u.code!==Y))return l.DomainValidationError.INVALID_CODED_VALUE}return null}l.DomainValidationError=void 0;(function(Z){Z.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";Z.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(l.DomainValidationError||(l.DomainValidationError={}));l.getDomainRange=function(Z){if(Z&&"range"===Z.type)return{min:"range"in Z?Z.range[0]:Z.minValue,max:"range"in Z?Z.range[1]:Z.maxValue}};l.isValidDomainValue=function(Z,Y){return null===d(Z,Y)};l.validateDomainValue=d;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(l,d,Z,Y,u,F){function D(){y||(y=Z._asyncToGenerator(function*(){const r=yield new Promise((I,P)=>l(["./arcadeUtils"],I,P));return{arcade:r.arcade,arcadeUtils:r,Dictionary:r.Dictionary,Feature:r.arcadeFeature}})());return y}let y;Y=(r,I,P)=>v.create(r,I,P,null,["$feature","$view"]);let v=function(){function r(P,O,t,C,b,g,m,w){this.script=P;this.evaluate=b;this.fields=Array.isArray(m)?m:m.fields;this._syntaxTree=C;this._arcade=O;this._arcadeDictionary=t;this._arcadeFeature=g;this._spatialReference=
w;this._referencesGeometry=O.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}r.create=function(){var P=Z._asyncToGenerator(function*(O,t,C,b,g,m){const {arcade:w,Feature:h,Dictionary:z}=yield D(),q=F.fromJSON(t);t=w.parseScript(O,m);g=g.reduce((K,H)=>({...K,[H]:null}),{});let B=null;u.isSome(b)&&(B=new z(b),B.immutable=!0,g.$config=null);b=w.scriptUsesGeometryEngine(t)&&w.enableGeometrySupport();m=w.scriptUsesFeatureSet(t)&&w.enableFeatureSetSupport();
const R=w.scriptIsAsync(t)&&w.enableAsyncSupport();g={vars:g,spatialReference:q,useAsync:!!R};const N=new z;N.immutable=!1;N.setField("scale",0);const da=w.compileScript(t,g);yield Promise.all([b,m,R]);return new r(O,w,z,t,K=>{"$view"in K&&K.$view&&(N.setField("scale",K.$view.scale),K.$view=N);B&&(K.$config=B);return da({vars:K,spatialReference:q})},new h,C,q)});return function(O,t,C,b,g,m){return P.apply(this,arguments)}}();var I=r.prototype;I.repurposeFeature=function(P){P.geometry&&!P.geometry.spatialReference&&
(P.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(P.geometry,P.attributes,{fields:this.fields});return this._arcadeFeature};I.repurposeAdapter=function(P){this._arcadeFeature.repurposeFromAdapter(P,{fields:this.fields});return this._arcadeFeature};I.createDictionary=function(){return new this._arcadeDictionary};I.referencesMember=function(P){return this._arcade.referencesMember(this._syntaxTree,P)};I.referencesFunction=function(P){return this._arcade.referencesFunction(this._syntaxTree,
P)};I.referencesGeometry=function(){return this._referencesGeometry};I.referencesScale=function(){return this._referencesScale};I.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return r}();d.ArcadeExpression=v;d.createDictionaryExpression=(r,I,P,O)=>v.create(r,I,P,O,["$feature","$view"]);d.createLabelExpression=(r,I,P)=>v.create(r,I,P,null,["$feature"]);d.createRendererExpression=Y;d.createVVExpression=Y;d.default=v;d.loadArcade=D;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),function(l,d,Z,Y,u,F,D,y,v,r,I,P,O){function t(){return new Promise((m,w)=>
l(["../../../geometry/geometryEngineJSON"],m,w))}function C(){C=Z._asyncToGenerator(function*(m,w,h){const {spatialRel:z,geometry:q}=m;if(q){if(!0!==g.spatialRelationship[z])throw new Y("feature-store:unsupported-query","Unsupported query spatial relationship",{query:m});if(y.isValid(q.spatialReference)&&y.isValid(h)){if(!0!==g.queryGeometry[D.getJsonType(q)])throw new Y("feature-store:unsupported-query","Unsupported query geometry type",{query:m});if(!0!==g.layerGeometry[w])throw new Y("feature-store:unsupported-query",
"Unsupported layer geometry type",{query:m});if(m.outSR)return P.checkProjectionSupport(m.geometry&&m.geometry.spatialReference,m.outSR)}}});return C.apply(this,arguments)}const b={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},
g={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(m){if(D.isExtent(m))return!0;if(D.isPolygon(m)){for(const w of m.rings)if(5!==w.length||w[0][0]!==w[1][0]||w[0][0]!==w[4][0]||w[2][0]!==w[3][0]||w[0][1]!==w[3][1]||w[0][1]!==w[4][1]||w[1][1]!==w[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(m,w,h){return C.apply(this,arguments)};d.getSpatialQueryOperator=function(m,w,h,z,q){if(D.isPolygon(w)&&"esriGeometryPoint"===h&&("esriSpatialRelIntersects"===
m||"esriSpatialRelContains"===m)){const B=r.convertFromPolygon(new I,w,!1,!1);return Promise.resolve(R=>v.polygonContainsPoint(B,!1,!1,R))}if(D.isPolygon(w)&&"esriGeometryMultipoint"===h){const B=r.convertFromPolygon(new I,w,!1,!1);if("esriSpatialRelContains"===m)return Promise.resolve(R=>v.polygonContainsMultipoint(B,!1,!1,R,z,q))}if(D.isExtent(w)&&"esriGeometryPoint"===h&&("esriSpatialRelIntersects"===m||"esriSpatialRelContains"===m))return Promise.resolve(B=>u.extentContainsPoint(w,O.getGeometry(h,
z,q,B)));if(D.isExtent(w)&&"esriGeometryMultipoint"===h&&"esriSpatialRelContains"===m)return Promise.resolve(B=>u.extentContainsMultipoint(w,O.getGeometry(h,z,q,B)));if(D.isExtent(w)&&"esriSpatialRelIntersects"===m){const B=F.getExtentIntersector(h);return Promise.resolve(R=>B(w,O.getGeometry(h,z,q,R)))}return t().then(B=>{const R=B[b[m]].bind(null,w.spatialReference,w);return N=>R(O.getGeometry(h,z,q,N))})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports",
"./intersectsBase"],function(l,d){l.extentIntersectsExtent=d.extentIntersectsExtent;l.extentIntersectsMultipoint=d.extentIntersectsMultipoint;l.extentIntersectsPoint=d.extentIntersectsPoint;l.extentIntersectsPolygon=d.extentIntersectsPolygon;l.extentIntersectsPolyline=d.extentIntersectsPolyline;l.getFeatureExtentIntersector=d.getFeatureExtentIntersector;l.isSelfIntersecting=d.isSelfIntersecting;l.segmentIntersects=d.segmentIntersects;l.getExtentIntersector=function(Z){return"mesh"===Z?d.extentIntersectsExtent:
d.getFeatureExtentIntersector(Z)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function d(Z,Y,u,F,D){if(!Z)return!1;Y=Y?u?4:3:u?3:2;const {coords:y,lengths:v}=Z;u=!1;Z=0;for(const I of v){var r=Z;for(let P=Z,O=Z+I*Y;P<O;P+=Y){r=P+Y;r===O&&(r=Z);const t=y[P],C=y[P+1],b=y[r];r=y[r+1];(C<D&&r>=D||r<D&&C>=D)&&t+(D-C)/(r-C)*(b-t)<F&&(u=!u)}Z+=I*Y}return u}l.polygonContainsCoords=d;l.polygonContainsMultipoint=function(Z,Y,
u,F,D,y){D=D?y?4:3:y?3:2;const {coords:v,lengths:r}=F;if(!r)return!1;for(let I=0,P=0;I<r.length;I++,P+=D)if(!d(Z,Y,u,v[P],v[P+1]))return!1;return!0};l.polygonContainsPoint=function(Z,Y,u,F){return d(Z,Y,u,F.coords[0],F.coords[1])};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(l,d){function Z(u){return"oid"===u.type||"esriFieldTypeOID"===u.type}function Y(u){return"global-id"===
u.type||"esriFieldTypeGlobalID"===u.type}return function(){function u(D){this.fields=D;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(D){var y=[];for(const v of D)if(D=v&&v.name){const r=D.toLowerCase().trim();this._fieldsMap.set(D,v);this._fieldsMap.set(r,v);y.push(r);"date"===v.type||"esriFieldTypeDate"===v.type?(this.dateFields.push(v),this._dateFieldsSet.add(v)):d.isNumericField(v)&&(this._numericFieldsSet.add(v),
this.numericFields.push(v));Z(v)||Y(v)||(v.editable=null==v.editable?!0:!!v.editable,v.nullable=null==v.nullable?!0:!!v.nullable)}y.sort();this.uid=y.join(",")}}var F=u.prototype;F.destroy=function(){this._fieldsMap.clear()};F.has=function(D){return null!=this.get(D)};F.get=function(D){return null!=D?this._fieldsMap.get(D)||this._fieldsMap.get(D.toLowerCase().trim()):void 0};F.isDateField=function(D){return this._dateFieldsSet.has(this.get(D))};F.isNumericField=function(D){return this._numericFieldsSet.has(this.get(D))};
F.normalizeFieldName=function(D){if(D=this.get(D))return D.name};l._createClass(u,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const D of this.fields)Z(D)||Y(D)||D.nullable||void 0!==d.getFieldDefaultValue(D)||this._requiredFields.push(D)}return this._requiredFields}}]);return u}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r,I,P,O,t,C,b,g,m,w,h){function z(f){return B.has(f)?B.get(f):"number"===typeof f?f:1}const q=F.getLogger("esri.views.support.Scheduler");l.TaskPriority=void 0;(function(f){f.RESOURCE_CONTROLLER="schedule";f.SLIDE="slide";f.STREAM_DATA_LOADER="stream loader";f.ELEVATION_QUERY="elevation query";f.TERRAIN_SURFACE="terrain";f.SURFACE_GEOMETRY_UPDATES="surface geometry updates";f.GRAPHICS_CORE="Graphics3D";f.I3S_CONTROLLER="I3S";f.POINT_CLOUD_LAYER="point cloud";f.FEATURE_TILE_FETCHER=
"feature fetcher";f.OVERLAY="overlay";f.STAGE="stage";f.GRAPHICS_DECONFLICTOR="graphics deconflictor";f.FILTER_VISIBILITY="Graphics3D filter visibility";f.SCALE_VISIBILITY="Graphics3D scale visibility";f.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";f.POINT_OF_INTEREST_FREQUENT="POI frequent";f.POINT_OF_INTEREST_INFREQUENT="POI infrequent";f.LABELER="labeler";f.FEATURE_QUERY_ENGINE="feature query";f.FEATURE_TILE_TREE="feature tile tree";f.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";f.ELEVATION_ALIGNMENT=
"elevation alignment";f.TEXT_TEXTURE_ATLAS="text texture atlas";f.TEXTURE_UNLOAD="texture unload";f.LINE_OF_SIGHT_TOOL="line of sight tool";f.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";f.ELEVATION_PROFILE="elevation profile";f.SNAPPING="snapping";f.SHADOW_ACCUMULATOR="shadow accumulator";f.CLOUDS_GENERATOR="cloud generator";f[f.TEST_PRIO=1]="TEST_PRIO"})(l.TaskPriority||(l.TaskPriority={}));const B=new Map([[l.TaskPriority.RESOURCE_CONTROLLER,0],[l.TaskPriority.SLIDE,0],[l.TaskPriority.STREAM_DATA_LOADER,
0],[l.TaskPriority.ELEVATION_QUERY,0],[l.TaskPriority.TERRAIN_SURFACE,1],[l.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[l.TaskPriority.GRAPHICS_CORE,2],[l.TaskPriority.I3S_CONTROLLER,2],[l.TaskPriority.POINT_CLOUD_LAYER,2],[l.TaskPriority.FEATURE_TILE_FETCHER,2],[l.TaskPriority.OVERLAY,4],[l.TaskPriority.STAGE,4],[l.TaskPriority.GRAPHICS_DECONFLICTOR,4],[l.TaskPriority.FILTER_VISIBILITY,4],[l.TaskPriority.SCALE_VISIBILITY,4],[l.TaskPriority.FRUSTUM_VISIBILITY,4],[l.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[l.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[l.TaskPriority.LABELER,8],[l.TaskPriority.FEATURE_QUERY_ENGINE,8],[l.TaskPriority.FEATURE_TILE_TREE,16],[l.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[l.TaskPriority.ELEVATION_ALIGNMENT,12],[l.TaskPriority.TEXT_TEXTURE_ATLAS,12],[l.TaskPriority.CLOUDS_GENERATOR,12],[l.TaskPriority.TEXTURE_UNLOAD,12],[l.TaskPriority.LINE_OF_SIGHT_TOOL,16],[l.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[l.TaskPriority.SNAPPING,0],[l.TaskPriority.SHADOW_ACCUMULATOR,
30]]),R=P.Milliseconds(6.5),N=P.Milliseconds(1),da=P.Milliseconds(30),K=P.Milliseconds(1E3/30),H=P.Milliseconds(100);var T;(function(f){let E=function(ja){function na(ma){var la=ja.call(this,ma)||this;la.updating=!0;la._microTaskQueued=!1;la.performanceInfo={total:new y("total"),tasks:new Map};la._frameTaskTimes=new Map;la._budget=null;la._state=1;la._tasks=new v;la._runQueue=new v;la._load=0;la._idleStateCallbacks=new v;la._idleUpdatesStartFired=!1;la._maxReschedule=e;la._forceTask=!1;la._debug=
!1;la._debugHandle=O.init(h,"SCHEDULER_LOG_SLOW_TASKS",Ba=>la._debug=Ba);la._budget=new ca(ma.nowFunc);for(const Ba of Object.keys(l.TaskPriority))la.performanceInfo.tasks.set(l.TaskPriority[Ba],new y(l.TaskPriority[Ba]));let va;const Ja=d._assertThisInitialized(la);la._test={get state(){return D.unwrapOr(va,Ja._state)},set state(Ba){va=Ba},FRAME_SAFETY_BUDGET:R,INTERACTING_BUDGET:K,IDLE_BUDGET:H,get budget(){return Ja._budget.budget},usedBudget:0,setBudget:Ba=>Ja._budget=Ba,updateTask:Ba=>la._updateTask(Ba),
getState:Ba=>la._getState(Ba),getRuntime:Ba=>la._getRuntime(Ba),frameTaskTimes:la._frameTaskTimes,resetRuntimes:()=>la._resetRuntimes(),getRunning:()=>la._getRunning()};return la}d._inheritsLoose(na,ja);var ta=na.prototype;ta.destroy=function(){this._debugHandle&&this._debugHandle.remove();this._microTaskQueued=!1};ta.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=
e,this._schedule(),this.frame()))}))};ta.registerTask=function(ma,la){const va=z(ma);la=new U(this,ma,la,va);this._tasks.push(la);this.performanceInfo.tasks.has(ma)||this.performanceInfo.tasks.set(ma,new y(ma));return la};ta.registerIdleStateCallbacks=function(ma,la){const va={idleBegin:ma,idleEnd:la};this._idleStateCallbacks.push(va);2===this.state&&this._idleUpdatesStartFired&&va.idleBegin();const Ja=this;return{remove:()=>this._removeIdleStateCallbacks(va),set idleBegin(Ba){Ja._idleUpdatesStartFired&&
(va.idleEnd(),2===Ja._state&&Ba());va.idleBegin=Ba},set idleEnd(Ba){va.idleEnd=Ba}}};ta.updateBudget=function(ma){this._test.usedBudget=0;let la=R,va=ma.frameDuration,Ja=N;switch(this.state){case 2:la=P.Milliseconds(0);va=P.Milliseconds(Math.max(H,ma.frameDuration));Ja=da;break;case 1:va=P.Milliseconds(Math.max(K,ma.frameDuration))}va=P.Milliseconds(va-ma.elapsedFrameTime-la);if(2!==this.state&&va<N&&!this._forceTask)return this._forceTask=!0,!1;va=P.Milliseconds(Math.max(va,Ja));this._budget.reset(va,
this.state);this._maxReschedule=e;this._updateLoad();return this._schedule()};ta.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(ma=>ma.idleBegin()));this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};ta.stopFrame=function(){this._budget.reset(P.Milliseconds(0),this._state);this._budget.madeProgress()};
ta._removeIdleStateCallbacks=function(ma){this._idleUpdatesStartFired&&ma.idleEnd();this._idleStateCallbacks.removeUnordered(ma)};ta.removeTask=function(ma){this._tasks.removeUnordered(ma);this._runQueue.removeUnordered(ma)};ta._updateTask=function(ma){this._tasks.forAll(la=>{la.name===ma&&la.setPriority(ma)})};ta._getState=function(ma){if(this._runQueue.some(va=>va.name===ma))return l.TaskState.SCHEDULED;let la=l.TaskState.IDLE;this._tasks.forAll(va=>{va.name===ma&&va.needsUpdate&&(1>=va.schedulePriority?
la=l.TaskState.READY:la!==l.TaskState.READY&&(la=l.TaskState.WAITING))});return la};ta._getRuntime=function(ma){let la=0;this._tasks.forAll(va=>{va.name===ma&&(la+=va.runtime)});return la};ta._resetRuntimes=function(){this._tasks.forAll(ma=>ma.runtime=0)};ta._getRunning=function(){const ma=new Map;this._tasks.forAll(va=>{va.needsUpdate&&ma.set(va.name,(ma.get(va.name)||0)+1)});if(0===ma.size)return null;let la="";ma.forEach((va,Ja)=>{la=1<va?la+` ${va}x ${Ja}`:la+` ${Ja}`});return la};ta._runIdle=
function(){this._run()};ta._runInteracting=function(){this._run()};ta._runAnimating=function(){this._run()};ta._updateLoad=function(){const ma=this._tasks.reduce((la,va)=>va.needsUpdate?++la:la,0);this._load=.9*this._load+ma*(1-.9)};ta._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(ma=>{if(ma.needsUpdate)return!0;ma.schedulePriority=ma.basePriority;return!1});for(this._tasks.forAll(ma=>{0===ma.basePriority&&ma.needsUpdate&&!this._runQueue.some(la=>la===ma)&&this._runQueue.unshift(ma)});0===
this._runQueue.length;){let ma=!1,la=0;this._tasks.forAll(va=>{if(va.needsUpdate&&0!==va.schedulePriority&&0!==va.basePriority)switch(ma=!0,la=Math.max(la,va.basePriority),va.schedulePriority){case 1:va.schedulePriority=0;this._runQueue.push(va);break;default:--va.schedulePriority}});if(!ma)return this.updating=!1;this._maxReschedule===e&&(this._maxReschedule=la);--this._maxReschedule}return this.updating=!0};ta._run=function(){const ma=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var la=
this._budget.now();const va=this._runQueue.pop();this._budget.resetProgress();try{va.task.runTask(this._budget)}catch(Ja){q.error(`Exception in task "${va.name}"`,Ja)}va.schedulePriority=va.basePriority;la=this._budget.now()-la;va.runtime+=la;this._frameTaskTimes.set(va.priority,this._frameTaskTimes.get(va.priority)+la);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",va.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._recordFrameTaskTimes(this._budget.now()-
ma);return}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-ma)};ta._startFrameTaskTimes=function(){for(const ma of Object.keys(l.TaskPriority))this._frameTaskTimes.set(l.TaskPriority[ma],0)};ta._recordFrameTaskTimes=function(ma){this._frameTaskTimes.forEach((la,va)=>this.performanceInfo.tasks.get(va).record(la));this.performanceInfo.total.record(ma)};d._createClass(na,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",
get:function(){return D.isNone(this._test.state)?this._state:this._test.state},set:function(ma){this._state!==ma&&(this._state=ma,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(la=>la.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return na}(Y);Z.__decorate([t.property()],E.prototype,"updating",void 0);Z.__decorate([t.property()],E.prototype,"nowFunc",void 0);E=Z.__decorate([m.subclass("esri.views.support.Scheduler")],
E);f.Scheduler=E;let U=function(ja){function na(ma,la,va,Ja){var Ba=ja.call(this,{})||this;Ba._scheduler=ma;Ba.name=la;Ba._basePriority=Ja;Ba.runtime=0;Ba._queue=new w.PromiseQueue;Ba._handles=new u;Ba.schedulePriority=Ba._basePriority;Ba.task=D.isSome(va)?va:Ba._queue;Ba._handles.add(I.reactTruthy(()=>Ba.task.running,()=>ma.activate()));return Ba}d._inheritsLoose(na,ja);var ta=na.prototype;ta.normalizeCtorArgs=function(){return{}};ta.remove=function(){this.processQueue(M);this._scheduler.removeTask(this);
this.schedule=A.schedule;this.reschedule=A.reschedule;this._handles.destroy()};ta.setPriority=function(ma){this.name=ma;ma=z(ma);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=ma;this._basePriority=ma};ta.schedule=function(ma,la,va){return this._queue.push(ma,la,va)};ta.reschedule=function(ma,la,va){return this._queue.unshift(ma,la,va)};ta.processQueue=function(ma){this._queue.runTask(ma)};d._createClass(na,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",
get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(ma){this.setPriority(ma)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return na}(Y);Z.__decorate([t.property({constructOnly:!0})],U.prototype,"task",void 0);Z.__decorate([t.property({readOnly:!0})],U.prototype,"updating",null);U=Z.__decorate([m.subclass("esri.views.support.SchedulerTask")],U);let ca=function(){function ja(ta){this.now=ta;this._budget=this._begin=
0;this._state=2;this._didWork=!1;this._enabled=!0}var na=ja.prototype;na.run=function(ta){if(this.done)return!1;!0===ta()&&(this._didWork=!0);return!0};na.madeProgress=function(){this._didWork=!0};na.reset=function(ta,ma){this._begin=this.now();this._budget=ta;this._state=ma;this._didWork=!1};na.resetProgress=function(){this._didWork=!1};d._createClass(ja,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},
{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(ta){this._enabled=ta}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return ja}();f.Budget=ca})(T||(T={}));l.TaskState=void 0;(function(f){f.SCHEDULED="s";f.READY="r";f.WAITING="w";f.IDLE="i"})(l.TaskState||(l.TaskState={}));const M=
(()=>{const f=new T.Budget(()=>performance.now());f.enabled=!1;return f})(),A=new (function(){function f(){}var E=f.prototype;E.remove=function(){};E.processQueue=function(){};E.schedule=function(U,ca,ja){try{if(r.isAborted(ca)){const na=r.createAbortError();return ja?Promise.resolve(ja(na)):Promise.reject(na)}return r.when(U(M))}catch(na){return Promise.reject(na)}};E.reschedule=function(U,ca,ja){return this.schedule(U,ca,ja)};return f}()),e=Number.MAX_SAFE_INTEGER;l.ImmediateTask=A;l.getTaskPriority=
z;l.newScheduler=function(f){return new T.Scheduler({nowFunc:f})};l.noBudget=M;l.taskPriorities=B;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(l,d,Z,Y,u,F,D){Z=function(y){function v(I){I=y.call(this,I)||this;I._groups=new Map;return I}l._inheritsLoose(v,y);var r=v.prototype;
r.destroy=function(){this.removeAll()};r.add=function(I,P){if(!this._isHandle(I)&&!Array.isArray(I)&&!Y.isCollection(I))return this;const O=this._getOrCreateGroup(P);Array.isArray(I)||Y.isCollection(I)?I.forEach(t=>this._isHandle(t)&&O.push(t)):O.push(I);this.notifyChange("size");return this};r.forEach=function(I,P){if("function"===typeof I)this._groups.forEach(O=>O.forEach(I));else{const O=this._getGroup(I);O&&P&&O.forEach(P)}};r.has=function(I){return this._groups.has(this._ensureGroupKey(I))};
r.remove=function(I){if(Array.isArray(I)||Y.isCollection(I))return I.forEach(this.remove,this),this;if(!this.has(I))return this;const P=this._getGroup(I);for(let O=0;O<P.length;O++)P[O].remove();this._deleteGroup(I);this.notifyChange("size");return this};r.removeAll=function(){this._groups.forEach(I=>{for(let P=0;P<I.length;P++)I[P].remove()});this._groups.clear();this.notifyChange("size");return this};r._isHandle=function(I){return I&&!!I.remove};r._getOrCreateGroup=function(I){if(this.has(I))return this._getGroup(I);
const P=[];this._groups.set(this._ensureGroupKey(I),P);return P};r._getGroup=function(I){return u.assumeNonNull(this._groups.get(this._ensureGroupKey(I)))};r._deleteGroup=function(I){return this._groups.delete(this._ensureGroupKey(I))};r._ensureGroupKey=function(I){return I||"_default_"};l._createClass(v,[{key:"size",get:function(){let I=0;this._groups.forEach(P=>{I+=P.length});return I}}]);return v}(Z);d.__decorate([F.property({readOnly:!0})],Z.prototype,"size",null);return Z=d.__decorate([D.subclass("esri.core.Handles")],
Z)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),function(l,d,Z,Y,u,F,D,y,v,r,I,P,O,t){function C(H){return H?H instanceof K?H.toArray():H.length?Array.prototype.slice.apply(H):
[]:[]}function b(H){if(H&&H.length)return H[0]}function g(H,T,M,A){T&&T.forEach((e,f,E)=>{H.push(e);g(H,M.call(A,e,f,E),M,A)})}var m;let w=function(){function H(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var T=H.prototype;T.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};T.reset=function(M){this.defaultPrevented=!1;this.item=M};return H}();const h=new D(w,void 0,H=>{H.item=null;H.target=null;H.defaultPrevented=!1;H.cancellable=!1}),
z=()=>{},q=new Set,B=new Set,R=new Set,N=new Map;let da=0,K=m=function(H,T){function M(e){e=H.call(this,e)||this;e._chgListeners=[];e._notifications=null;e._timer=null;e._observable=new t.SimpleObservable;e.length=0;e._items=[];Object.defineProperty(l._assertThisInitialized(e),"uid",{value:da++});return e}l._inheritsLoose(M,H);M.isCollection=function(e){return null!=e&&e instanceof m};var A=M.prototype;A.normalizeCtorArgs=function(e){return e?Array.isArray(e)||e instanceof m?{items:e}:e:{}};A.destroy=
function(){this.removeAll()};A[T]=function*(){yield*this.items};A.hasEventListener=function(e){return"change"===e?0<this._chgListeners.length:this._emitter.hasEventListener(e)};A.on=function(e,f){if("change"===e){const E=this._chgListeners,U={removed:!1,callback:f};E.push(U);this._notifications&&this._notifications.push({listeners:E.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=z;U.removed=!0;E.splice(E.indexOf(U),1)}}}return this._emitter.on(e,f)};A.once=function(e,f){const E=
this.on(e,f);return{remove(){E.remove()}}};A.add=function(e,f){O.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;f=this.getNextIndex(null!=f?f:null);this._splice(f,0,[e]);this._emitAfterChanges(1);return this};A.addMany=function(e,f=this._items.length){O.trackAccess(this._observable);if(!e||!e.length||this._emitBeforeChanges(1))return this;f=this.getNextIndex(f);this._splice(f,0,C(e));this._emitAfterChanges(1);return this};A.removeAll=function(){O.trackAccess(this._observable);
if(!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];this._emitAfterChanges(2);return e};A.clone=function(){O.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(u.clone)})};A.concat=function(...e){O.trackAccess(this._observable);e=e.map(C);return this._createNewInstance({items:this._items.concat(...e)})};A.drain=function(e,f){O.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var E=F.assumeNonNull(this._splice(0,
this.length)),U=E.length;for(let ca=0;ca<U;ca++)e.call(f,E[ca],ca,E);this._emitAfterChanges(2)}};A.every=function(e,f){O.trackAccess(this._observable);return this._items.every(e,f)};A.filter=function(e,f){O.trackAccess(this._observable);let E;E=2===arguments.length?this._items.filter(e,f):this._items.filter(e);return this._createNewInstance({items:E})};A.find=function(e,f){O.trackAccess(this._observable);return this._items.find(e,f)};A.findIndex=function(e,f){O.trackAccess(this._observable);return this._items.findIndex(e,
f)};A.flatten=function(e,f){O.trackAccess(this._observable);const E=[];g(E,this,e,f);return new m(E)};A.forEach=function(e,f){O.trackAccess(this._observable);return this._items.forEach(e,f)};A.getItemAt=function(e){O.trackAccess(this._observable);return this._items[e]};A.getNextIndex=function(e){O.trackAccess(this._observable);const f=this.length;e=null==e?f:e;0>e?e=0:e>f&&(e=f);return e};A.includes=function(e,f=0){O.trackAccess(this._observable);return this._items.includes(e,f)};A.indexOf=function(e,
f=0){O.trackAccess(this._observable);return this._items.indexOf(e,f)};A.join=function(e=","){O.trackAccess(this._observable);return this._items.join(e)};A.lastIndexOf=function(e,f=this.length-1){O.trackAccess(this._observable);return this._items.lastIndexOf(e,f)};A.map=function(e,f){O.trackAccess(this._observable);e=this._items.map(e,f);return new m({items:e})};A.reorder=function(e,f=this.length-1){O.trackAccess(this._observable);const E=this.indexOf(e);if(-1!==E){0>f?f=0:f>=this.length&&(f=this.length-
1);if(E!==f){if(this._emitBeforeChanges(4))return e;this._splice(E,1);this._splice(f,0,[e]);this._emitAfterChanges(4)}return e}};A.pop=function(){O.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var e=b(this._splice(this.length-1,1));this._emitAfterChanges(2);return e}};A.push=function(...e){O.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;this._splice(this.length,0,e);this._emitAfterChanges(1);return this.length};A.reduce=function(e,f){O.trackAccess(this._observable);
const E=this._items;return 2===arguments.length?E.reduce(e,f):E.reduce(e)};A.reduceRight=function(e,f){O.trackAccess(this._observable);const E=this._items;return 2===arguments.length?E.reduceRight(e,f):E.reduceRight(e)};A.remove=function(e){O.trackAccess(this._observable);return this.removeAt(this.indexOf(e))};A.removeAt=function(e){O.trackAccess(this._observable);if(!(0>e||e>=this.length||this._emitBeforeChanges(2)))return e=b(this._splice(e,1)),this._emitAfterChanges(2),e};A.removeMany=function(e){O.trackAccess(this._observable);
if(!e||!e.length||this._emitBeforeChanges(2))return[];e=e instanceof m?e.toArray():e;const f=this._items,E=[],U=e.length;for(let ta=0;ta<U;ta++){var ca=f.indexOf(e[ta]);if(-1<ca){{var ja=ta+1;var na=ca+1;const ma=Math.min(e.length-ja,f.length-na);let la=0;for(;la<ma&&e[ja+la]===f[na+la];)la++;ja=la}ja=1+ja;(ca=this._splice(ca,ja))&&0<ca.length&&E.push.apply(E,ca);ta+=ja-1}}this._emitAfterChanges(2);return E};A.reverse=function(){O.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;
const e=this._splice(0,this.length);e&&(e.reverse(),this._splice(0,0,e));this._emitAfterChanges(4);return this};A.shift=function(){O.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var e=b(this._splice(0,1));this._emitAfterChanges(2);return e}};A.slice=function(e=0,f=this.length){O.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(e,f)})};A.some=function(e,f){O.trackAccess(this._observable);return this._items.some(e,f)};A.sort=function(e){O.trackAccess(this._observable);
if(!this.length||this._emitBeforeChanges(4))return this;const f=F.assumeNonNull(this._splice(0,this.length));arguments.length?f.sort(e):f.sort();this._splice(0,0,f);this._emitAfterChanges(4);return this};A.splice=function(e,f,...E){O.trackAccess(this._observable);const U=(f?2:0)|(E.length?1:0);if(this._emitBeforeChanges(U))return[];e=this._splice(e,f,E)||[];this._emitAfterChanges(U);return e};A.toArray=function(){O.trackAccess(this._observable);return this._items.slice()};A.toJSON=function(){O.trackAccess(this._observable);
return this.toArray()};A.toLocaleString=function(){O.trackAccess(this._observable);return this._items.toLocaleString()};A.toString=function(){O.trackAccess(this._observable);return this._items.toString()};A.unshift=function(...e){O.trackAccess(this._observable);if(!e.length||this._emitBeforeChanges(1))return this.length;this._splice(0,0,e);this._emitAfterChanges(1);return this.length};A._createNewInstance=function(e){return new this.constructor(e)};A._splice=function(e,f,E){const U=this._items;var ca=
this.itemType;let ja=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=y.schedule(()=>this._dispatchChange()));if(f){ja=U.splice(e,f);if(this.hasEventListener("before-remove")){var na=h.acquire();na.target=this;na.cancellable=!0;for(let la=0,va=ja.length;la<va;la++)f=ja[la],na.reset(f),this.emit("before-remove",na),na.defaultPrevented&&(ja.splice(la,
1),U.splice(e,0,f),e+=1,--la,--va);h.release(na)}this.length=this._items.length;if(this.hasEventListener("after-remove")){f=h.acquire();f.target=this;f.cancellable=!1;na=ja.length;for(let la=0;la<na;la++)f.reset(ja[la]),this.emit("after-remove",f);h.release(f)}}if(E&&E.length){if(ca){f=[];for(var ta of E)E=ca.ensureType(ta),null==E&&null!=ta||f.push(E);E=f}ca=this.hasEventListener("before-add");ta=this.hasEventListener("after-add");f=e===this.length;if(ca||ta){var ma=h.acquire();ma.target=this;ma.cancellable=
!0;na=h.acquire();na.target=this;na.cancellable=!1;for(const la of E)ca?(ma.reset(la),this.emit("before-add",ma),ma.defaultPrevented||(f?U.push(la):U.splice(e++,0,la),this._set("length",U.length),ta&&(na.reset(la),this.emit("after-add",na)))):(f?U.push(la):U.splice(e++,0,la),this._set("length",U.length),na.reset(la),this.emit("after-add",na));h.release(na);h.release(ma)}else{if(f)for(ma of E)U.push(ma);else U.splice(e,0,...E);this._set("length",U.length)}}(E&&E.length||ja&&ja.length)&&this._notifyChangeEvent(E,
ja);return ja};A._emitBeforeChanges=function(e){let f=!1;if(this.hasEventListener("before-changes")){const E=h.acquire();E.target=this;E.cancellable=!0;E.type=e;this.emit("before-changes",E);f=E.defaultPrevented;h.release(E)}return f};A._emitAfterChanges=function(e){if(this.hasEventListener("after-changes")){const f=h.acquire();f.target=this;f.cancellable=!1;f.type=e;this.emit("after-changes",f);h.release(f)}this._observable.notify()};A._notifyChangeEvent=function(e,f){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:f})};A._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var e=this._notifications;this._notifications=null;for(const f of e){e=f.changes;q.clear();B.clear();R.clear();for(const {added:ta,removed:ma}of e){if(ta)if(0===R.size&&0===B.size)for(const la of ta)q.add(la);else for(const la of ta)B.has(la)?(R.add(la),B.delete(la)):R.has(la)||q.add(la);
if(ma)if(0===R.size&&0===q.size)for(const la of ma)B.add(la);else for(const la of ma)q.has(la)?q.delete(la):(R.delete(la),B.add(la))}const E=Z.acquire();q.forEach(ta=>{E.push(ta)});const U=Z.acquire();B.forEach(ta=>{U.push(ta)});const ca=this._items,ja=f.items,na=Z.acquire();R.forEach(ta=>{ja.indexOf(ta)!==ca.indexOf(ta)&&na.push(ta)});if(f.listeners&&(E.length||U.length||na.length)){e={target:this,added:E,removed:U,moved:na};const ta=f.listeners.length;for(let ma=0;ma<ta;ma++){const la=f.listeners[ma];
la.removed||la.callback.call(this,e)}}Z.release(E);Z.release(U);Z.release(na)}q.clear();B.clear();R.clear()}};l._createClass(M,[{key:"items",get:function(){O.trackAccess(this._observable);return this._items},set:function(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,C(e)),this._emitAfterChanges(1))}}]);return M}(Y.EventedAccessor,Symbol.iterator);K.ofType=H=>{if(!H)return m;if(N.has(H))return N.get(H);let T=null;if("function"===typeof H)T=H.prototype.declaredClass;else if(H.base)T=H.base.prototype.declaredClass;
else for(var M in H.typeMap){const A=H.typeMap[M].prototype.declaredClass;T=T?T+` | ${A}`:A}M=function(A){function e(){return A.apply(this,arguments)||this}l._inheritsLoose(e,A);return e}(m);d.__decorate([I.shared({Type:H,ensureType:"function"===typeof H?r.ensureType(H):r.ensureOneOfType(H)})],M.prototype,"itemType",void 0);M=d.__decorate([P.subclass(`esri.core.Collection<${T}>`)],M);N.set(H,M);return M};d.__decorate([v.property()],K.prototype,"length",void 0);d.__decorate([v.property()],K.prototype,
"items",null);return K=m=d.__decorate([P.subclass("esri.core.Collection")],K)})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],function(l){l.shared=function(d){return(Z,Y)=>{Z[Y]=d}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(l,d){let Z=function(){function Y(){this._observers=[]}var u=Y.prototype;u.observe=function(F){this._observers.includes(F)||
this._observers.push(F);return new d.ObservationHandle(this._observers,F)};u.notify=function(){const F=this._observers.slice();for(let D=0;D<F.length;++D){const y=F[D];y.onInvalidated();y.onCommitted()}};return Y}();l.SimpleObservable=Z;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(l,d,Z,Y,u,F){function D(r,I,P={},O){let t=null;const C=
P.once?(b,g)=>{O(b)&&(Y.removeMaybe(t),I(b,g))}:(b,g)=>{O(b)&&I(b,g)};t=u.watchTracked(r,C,P.sync,P.equals);P.initial&&(r=r(),C(r,r));return t}function y(r){return!0}function v(r){return!!r}l.autorun=F.autorun;l.initial={initial:!0};l.react=function(r,I,P={}){return D(r,I,P,y)};l.reactListener=function(r,I,P,O={}){function t(){b&&g&&(g.remove(),null==O.onListenerRemove?void 0:O.onListenerRemove(b),g=b=null)}function C(h){O.once&&O.once&&Y.removeMaybe(m);P(h)}let b=null,g=null,m=null;const w=u.watchTracked(r,
(h,z)=>{t();d.isEventTarget(h)&&(b=h,g=d.on(h,I,C),null==O.onListenerAdd?void 0:O.onListenerAdd(h))},O.sync);return m=Z.makeHandle(()=>{w.remove();t()})};l.reactTruthy=function(r,I,P={}){return D(r,I,P,v)};l.sync={sync:!0};l.syncAndInitial={sync:!0,initial:!0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/watchUtils":function(){define(["exports","./events","./lang","./promiseUtils"],function(l,d,Z,Y){function u(C,b,g,m){var w=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];
b=C.watch(b,g,m);for(const h of w)w=h.trim().replace(t,"$1"),m=C.get(w),g.call(C,m,m,w,C);return b}function F(C,b,g,m,w){w=C.watch(b,(z,q,B,R)=>{if(!g||g(z))null==m?void 0:m.call(C,z,q,B,R)},w);if(Array.isArray(b))for(var h of b){const z=C.get(h);g&&g(z)&&(null==m?void 0:m.call(C,z,z,b,C))}else h=C.get(b),g&&g(h)&&(null==m?void 0:m.call(C,h,h,b,C));return w}function D(C,b,g,m,w){function h(){R&&(R.remove(),R=null)}const z="function"===typeof m?m:null,q="object"===typeof m?m:null;"boolean"===typeof m&&
(w=m);let B=!1,R;const N=Y.createDeferred();Y.onAbort(q,()=>{h();N.reject(Y.createAbortError())});m={then:N.promise.then.bind(N.promise),catch:N.promise.catch.bind(N.promise),remove:h};Object.freeze(m);R=F(C,b,g,(da,K,H,T)=>{B=!0;h();z&&z.call(C,da,K,H,T);N.resolve({value:da,oldValue:K,propertyName:H,target:T})},w);B&&h();return m}function y(C){return!!C}function v(C){return!C}function r(C){return!0===C}function I(C){return!1===C}function P(C){return void 0!==C}function O(C){return void 0===C}const t=
/\?(\.|$)/g;l.init=u;l.on=function(C,b,g,m,w,h,z){function q(N){const da=B[N];da&&(h&&h(da.target,N,C,g),da.handle.remove(),delete B[N])}const B={},R=u(C,b,(N,da,K)=>{q(K);d.isEventTarget(N)&&(B[K]={handle:d.on(N,g,m),target:N},w&&w(N,K,C,g))},z);return{remove(){R.remove();for(const N in B)q(N)}}};l.once=function(C,b,g,m){return D(C,b,null,g,m)};l.pausable=function(C,b,g,m){let w=!1;const h=C.watch(b,(z,q,B,R)=>{w||g.call(C,z,q,B,R)},m);return{remove(){h.remove()},pause(){w=!0},resume(){w=!1}}};l.watch=
function(C,b,g,m){return C.watch(b,g,m)};l.when=function(C,b,g,m){return F(C,b,y,g,m)};l.whenDefined=function(C,b,g,m){return F(C,b,P,g,m)};l.whenDefinedOnce=function(C,b,g,m){return D(C,b,P,g,m)};l.whenEqual=function(C,b,g,m,w){return F(C,b,h=>Z.equals(g,h),m,w)};l.whenEqualOnce=function(C,b,g,m,w){return D(C,b,h=>Z.equals(g,h),m,w)};l.whenFalse=function(C,b,g,m){return F(C,b,I,g,m)};l.whenFalseOnce=function(C,b,g,m){return D(C,b,I,g,m)};l.whenNot=function(C,b,g,m){return F(C,b,v,g,m)};l.whenNotOnce=
function(C,b,g,m){return D(C,b,v,g,m)};l.whenOnce=function(C,b,g,m){return D(C,b,y,g,m)};l.whenTrue=function(C,b,g,m){return F(C,b,r,g,m)};l.whenTrueOnce=function(C,b,g,m){return D(C,b,r,g,m)};l.whenUndefined=function(C,b,g,m){return F(C,b,O,g,m)};l.whenUndefinedOnce=function(C,b,g,m){return D(C,b,O,g,m)};l.whenValidOnce=D;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,d,Z,Y,u,F,D,y,v,r){l.PromiseQueue=function(P){function O(){var C=P.apply(this,arguments)||this;C._tasks=[];C.running=!1;return C}d._inheritsLoose(O,P);var t=O.prototype;t.destroy=function(){this.cancelAll()};t.runTask=function(C){for(;!C.done&&this._process(C);)C.madeProgress()};t.push=function(C,b,g){this.running=!0;return new Promise((m,w)=>this._tasks.push(new I(m,w,C,b,g)))};t.unshift=function(C,b,g){this.running=!0;return new Promise((m,w)=>this._tasks.unshift(new I(m,w,C,b,g)))};
t._process=function(C){if(0===this._tasks.length)return!1;const b=this._tasks.shift();try{const g=u.isAborted(b.signal);if(g&&!b.abortCallback)b.reject(u.createAbortError());else{const m=g?b.abortCallback(u.createAbortError()):b.callback(C);u.isPromise(m)?m.then(b.resolve,b.reject):b.resolve(m)}}catch(g){b.reject(g)}this.running=0<this._tasks.length;return!0};t.cancelAll=function(){const C=u.createAbortError();for(const b of this._tasks)if(b.abortCallback){const g=b.abortCallback(C);b.resolve(g)}else b.reject(C);
this._tasks.length=0;this.running=!1};d._createClass(O,[{key:"length",get:function(){return this._tasks.length}}]);return O}(Y);Z.__decorate([F.property()],l.PromiseQueue.prototype,"running",void 0);l.PromiseQueue=Z.__decorate([r.subclass("esri.layers.support.PromiseQueue")],l.PromiseQueue);let I=function(P,O,t,C,b){this.resolve=P;this.reject=O;this.callback=t;this.signal=C;this.abortCallback=b};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,d,Z,Y,u,F,D,y){Z=function(v){function r(){var I=v.apply(this,arguments)||this;I.SCHEDULER_LOG_SLOW_TASKS=!1;I.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return I}l._inheritsLoose(r,v);return r}(Z);d.__decorate([Y.property()],Z.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([Y.property()],Z.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);Z=d.__decorate([y.subclass("esri.views.support.DebugFlags")],Z);return new Z})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports",
"../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(l,d,Z,Y,u){function*F(w){switch(w.type){case "Feature":yield w;break;case "FeatureCollection":for(const h of w.features)h&&(yield h)}}function*D(w){if(!w)return null;switch(w.type){case "Point":yield w.coordinates;break;case "LineString":case "MultiPoint":yield*w.coordinates;break;case "MultiLineString":case "Polygon":for(const h of w.coordinates)yield*h;break;case "MultiPolygon":for(const h of w.coordinates)for(const z of h)yield*z}}
function*y(w,h={}){const {geometryType:z,objectIdField:q}=h;for(const R of w){var B;const {geometry:N,properties:da,id:K}=R;if(N&&m[N.type]!==z)continue;w=da||{};let H=null!=(B=w[q])?B:null;q&&null!=K&&!w[q]&&(w[q]=H=K);yield new Z.default(N?P(new Y,N,h):null,w,null,H)}}function v(w){for(const h of w)if(2<h.length)return!0;return!1}function r(w){let h=0;for(let z=0;z<w.length;z++){const q=w[z],B=w[(z+1)%w.length];h+=q[0]*B[1]-B[0]*q[1]}return 0>=h}function I(w){const h=w[0],z=w[w.length-1];h[0]===
z[0]&&h[1]===z[1]&&h[2]===z[2]||w.push(h);return w}function P(w,h,z){switch(h.type){case "LineString":return C(w,h.coordinates,z),w;case "MultiLineString":for(const B of h.coordinates)C(w,B,z);return w;case "MultiPoint":return C(w,h.coordinates,z),w;case "MultiPolygon":for(var q of h.coordinates)for(O(w,q[0],z),h=1;h<q.length;h++)t(w,q[h],z);return w;case "Point":return g(w,h.coordinates,z),w;case "Polygon":q=h.coordinates;O(w,q[0],z);for(h=1;h<q.length;h++)t(w,q[h],z);return w}}function O(w,h,z){h=
I(h);r(h)?C(w,h,z):b(w,h,z)}function t(w,h,z){h=I(h);r(h)?b(w,h,z):C(w,h,z)}function C(w,h,z){for(const q of h)g(w,q,z);w.lengths.push(h.length)}function b(w,h,z){for(let q=h.length-1;0<=q;q--)g(w,h[q],z);w.lengths.push(h.length)}function g(w,h,z){const [q,B,R]=h;w.coords.push(q,B);z.hasZ&&w.coords.push(R||0)}const m={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};
l.createOptimizedFeatures=function(w,h){return Array.from(y(F(w),h))};l.getGeometryType=function(w){return m[w]};l.inferLayerProperties=function(w,h={}){const z=[];var q=new Set;const B=new Set;var R=!1;let N=null,da=!1,K=void 0;({geometryType:h=null}=h);var H=!1;for(const T of F(w)){const {geometry:M,properties:A,id:e}=T;if(M&&(h||(h=m[M.type]),m[M.type]!==h))continue;R||(R=D(M),R=v(R));!da&&(da=null!=e)&&(K=typeof e,N=Object.keys(A).filter(f=>A[f]===e));da&&null!=e&&(1<N.length?N=N.filter(f=>A[f]===
e):1===N.length&&(N=A[N[0]]===e?N:[]));if(!H&&A){w=!0;for(const f in A)if(!q.has(f))if(H=A[f],null==H)w=!1,B.add(f);else{a:switch(typeof H){case "string":H="esriFieldTypeString";break a;case "number":H="esriFieldTypeDouble";break a;default:H="unknown"}"unknown"===H?B.add(f):(B.delete(f),q.add(f),z.push({name:f,alias:f,type:H}))}H=w}}if(q=N&&1===N.length&&N[0]||null)for(const T of z)if(T.name===q&&u.isNumericField(T)){T.type="esriFieldTypeOID";break}return{fields:z,geometryType:h,hasZ:R,objectIdFieldName:q,
objectIdFieldType:K,unknownFields:Array.from(B)}};l.validateGeoJSON=function(w){if(!w)throw new d("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==w.type&&"FeatureCollection"!==w.type)throw new d("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:w});({crs:w}=w);if(w){var h="string"===typeof w?w:"name"===w.type?w.properties.name:"EPSG"===w.type?w.properties.code:null,z=/.*(CRS84H?|4326)$/i;if(!h||!z.test(h))throw new d("geojson-layer:unsupported-crs",
"unsupported GeoJSON 'crs' member",{crs:w});}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(l,d,Z,Y,u){l.createCapabilities=function(F,D){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:F},metadata:{supportsAdvancedFieldProperties:!1},
operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:D,supportsDelete:D,supportsEditing:D,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:D,supportsExceedsLimitStatistics:!0},query:Y.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:D,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,
supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};l.createDefaultAttributesFunction=function(F,D){if(d("esri-csp-restrictions"))return()=>({[D]:null,...F});try{let y=`this.${D} = null;`;for(const r in F){const I=r.includes(".")?`["${r}"]`:`.${r}`;y+=`this${I} = ${JSON.stringify(F[r])};`}const v=new Function(y);return()=>new v}catch(y){return()=>({[D]:null,...F})}};l.createDefaultTemplate=
function(F={}){return[{name:"New Feature",description:"",prototype:{attributes:Z.clone(F)}}]};l.createDrawingInfo=function(F){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===F||"esriGeometryMultipoint"===F?u.defaultPointSymbolJSON:"esriGeometryPolyline"===F?u.defaultPolylineSymbolJSON:u.defaultPolygonSymbolJSON}}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(l){const d=[252,146,31,255],Z={type:"esriSMS",
style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Y={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d};l.defaultColor=d;l.defaultOutlineColor=[153,153,153,255];l.defaultPointSymbolJSON=Z;l.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};l.defaultPolylineSymbolJSON=Y;l.defaultTextSymbolJSON={type:"esriTS",color:[255,
255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};l.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};l.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};l.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(l,
"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(l,d,Z,Y,u){function F(C){return new I(C)}function D(){return y.apply(this,arguments)}function y(){y=Z._asyncToGenerator(function*(){return t?t:t=yield new Promise((C,b)=>l(["../../../../geometry/geometryEngineJSON"],C,b))});return y.apply(this,
arguments)}function v(){v=Z._asyncToGenerator(function*(C,b){!Y.isValid(C)||"esriGeometryPolygon"!==b&&"esriGeometryPolyline"!==b||(yield D())});return v.apply(this,arguments)}let r=function(){this.description=this.code=null},I=function(C){this.error=new r;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=C},P=function(C){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=C};const O=new Set;let t;d.createFeatureEditErrorResult=F;d.createFeatureEditSuccessResult=
function(C){return new P(C)};d.loadGeometryEngine=D;d.loadGeometryEngineForSimplify=function(C,b){return v.apply(this,arguments)};d.mixAttributes=function(C,b,g,m=!1,w){O.clear();for(const B in g){const R=C.get(B);if(R){var h=g[B];{var z=R;var q=h;let N=q;"string"===typeof q&&u.isNumericField(z)?N=parseFloat(q):null!=q&&u.isStringField(z)&&"string"!==typeof q&&(N=String(q));z=u.sanitizeNullFieldValue(N)}z!==h&&w&&w.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",
details:{field:R,originalValue:h,sanitizedValue:z}});O.add(R.name);if(R&&(m||R.editable)){if(h=u.validateFieldValue(R,z))return F(u.validationErrorToString(h,R,z));b[R.name]=z}}}for(const B of C.requiredFields)if(!O.has(B.name))return F(`missing required field "${B.name}"`);return null};d.simplify=function(C,b){if(!C||!Y.isValid(b))return C;if("rings"in C||"paths"in C){if(!t)throw new TypeError("geometry engine not loaded");return t.simplify(b,C)}return C};Object.defineProperty(d,"__esModule",{value:!0})})},
"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(l,d){d=new d.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});
l.kebabDict=d;Object.defineProperty(l,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../request ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(l,
d,Z,Y,u,F,D,y,v,r,I,P,O,t,C,b,g,m){const w={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function h(){var q=this;this._queryEngine=null;this._snapshotFeatures=function(){var B=l._asyncToGenerator(function*(R){R=yield q._fetch(R);return q._createFeatures(R)});return function(R){return B.apply(this,arguments)}}()}var z=h.prototype;z.destroy=function(){var q;null==(q=this._queryEngine)?void 0:q.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=
null};z.load=function(){var q=l._asyncToGenerator(function*(B,R={}){this.loadOptions={url:B.url,customParameters:B.customParameters};var N=[];yield this._checkProjection(B.spatialReference);var da=null;B.url&&(da=yield this._fetch(null==R?void 0:R.signal));var K=O.inferLayerProperties(da,{geometryType:B.geometryType});R=B.fields||K.fields||[];const H=null!=B.hasZ?B.hasZ:K.hasZ,T=K.geometryType,M=B.objectIdField||K.objectIdFieldName||"__OBJECTID",A=B.spatialReference||y.WGS84;B=B.timeInfo;R===K.fields&&
0<K.unknownFields.length&&N.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:K.unknownFields}});let e=R.find(E=>E.name===M);e?("esriFieldTypeString"!==e.type&&(e.type="esriFieldTypeOID"),e.editable=!1,e.nullable=!1):(e={alias:M,name:M,type:"string"===K.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},R.unshift(e));K={};for(var f of R){null==f.name&&(f.name=f.alias);
null==f.alias&&(f.alias=f.name);if(!f.name)throw new Z("geojson-layer:invalid-field-name","field name is missing",{field:f});if(!g.kebabDict.jsonValues.includes(f.type))throw new Z("geojson-layer:invalid-field-type",`invalid type for field "${f.name}"`,{field:f});if(f.name!==e.name){const E=m.getFieldDefaultValue(f);void 0!==E&&(K[f.name]=E)}}this._fieldsIndex=new b(R);f=this._fieldsIndex.requiredFields.indexOf(e);-1<f&&this._fieldsIndex.requiredFields.splice(f,1);B&&(B.startTimeField&&((f=this._fieldsIndex.get(B.startTimeField))?
(B.startTimeField=f.name,f.type="esriFieldTypeDate"):B.startTimeField=null),B.endTimeField&&((f=this._fieldsIndex.get(B.endTimeField))?(B.endTimeField=f.name,f.type="esriFieldTypeDate"):B.endTimeField=null),B.trackIdField&&((f=this._fieldsIndex.get(B.trackIdField))?B.trackIdField=f.name:(B.trackIdField=null,N.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:B}}))),B.startTimeField||B.endTimeField||(N.push({name:"geojson-layer:invalid-timeInfo",
message:"startTimeField and endTimeField are missing",details:{timeInfo:B}}),B=null));f=T?t.createDrawingInfo(T):null;N={warnings:N,featureErrors:[],layerDefinition:{...w,drawingInfo:f,templates:t.createDefaultTemplate(K),extent:null,geometryType:T,objectIdField:M,fields:R,hasZ:!!H,timeInfo:B}};this._queryEngine=new P.default({fields:R,geometryType:T,hasM:!1,hasZ:H,objectIdField:M,spatialReference:A,timeInfo:B,featureStore:new r({geometryType:T,hasM:!1,hasZ:H}),cacheSpatialQueries:!0});this._createDefaultAttributes=
t.createDefaultAttributesFunction(K,M);da=yield this._createFeatures(da);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,da);da=this._normalizeFeatures(da,N.warnings,N.featureErrors);this._queryEngine.featureStore.addMany(da);N.layerDefinition.extent=this._queryEngine.fullExtent;if(N.layerDefinition.timeInfo){const {start:E,end:U}=this._queryEngine.timeExtent;N.layerDefinition.timeInfo.timeExtent=[E,U]}return N});return function(B){return q.apply(this,arguments)}}();z.applyEdits=
function(){var q=l._asyncToGenerator(function*(B){const {spatialReference:R,geometryType:N}=this._queryEngine;yield Promise.all([C.loadGeometryEngineForSimplify(R,N),I.checkProjectionSupport(B.adds,R),I.checkProjectionSupport(B.updates,R)]);yield this._waitSnapshotComplete();return this._applyEdits(B)});return function(B){return q.apply(this,arguments)}}();z.queryFeatures=function(){var q=l._asyncToGenerator(function*(B={},R={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(B,
R.signal)});return function(){return q.apply(this,arguments)}}();z.queryFeatureCount=function(){var q=l._asyncToGenerator(function*(B={},R={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(B,R.signal)});return function(){return q.apply(this,arguments)}}();z.queryObjectIds=function(){var q=l._asyncToGenerator(function*(B={},R={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(B,R.signal)});return function(){return q.apply(this,arguments)}}();
z.queryExtent=function(){var q=l._asyncToGenerator(function*(B={},R={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(B,R.signal)});return function(){return q.apply(this,arguments)}}();z.querySnapping=function(){var q=l._asyncToGenerator(function*(B,R={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(B,R.signal)});return function(B){return q.apply(this,arguments)}}();z.refresh=function(){var q=l._asyncToGenerator(function*(B){var R;
this.loadOptions.customParameters=B;null==(R=this._snapshotTask)?void 0:R.abort();this._snapshotTask=F.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(N=>{this._queryEngine.featureStore.clear();this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,N);(N=this._normalizeFeatures(N))&&this._queryEngine.featureStore.addMany(N)},N=>{this._queryEngine.featureStore.clear();F.isAbortError(N)||Y.getLogger("esri.layers.GeoJSONLayer").error(new Z("geojson-layer:refresh",
"An error occurred during refresh",{error:N}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}});return function(B){return q.apply(this,arguments)}}();z._createFeatures=function(){var q=l._asyncToGenerator(function*(B){const {geometryType:R,hasZ:N,objectIdField:da}=this._queryEngine;B=O.createOptimizedFeatures(B,{geometryType:R,hasZ:N,objectIdField:da});if(!y.equals(this._queryEngine.spatialReference,y.WGS84))for(const K of B)u.isSome(K.geometry)&&
(K.geometry=v.convertFromGeometry(I.project(v.convertToGeometry(K.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),y.WGS84,this._queryEngine.spatialReference)));return B});return function(B){return q.apply(this,arguments)}}();z._waitSnapshotComplete=function(){var q=l._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return q.apply(this,arguments)}}();
z._fetch=function(){var q=l._asyncToGenerator(function*(B){const {url:R,customParameters:N}=this.loadOptions;B=(yield d(R,{responseType:"json",query:{...N},signal:B})).data;yield O.validateGeoJSON(B);return B});return function(B){return q.apply(this,arguments)}}();z._normalizeFeatures=function(q,B,R){const {objectIdField:N}=this._queryEngine,da=[];for(const K of q){q=this._createDefaultAttributes();const H=C.mixAttributes(this._fieldsIndex,q,K.attributes,!0,B);H?null==R?void 0:R.push(H):(this._assignObjectId(q,
K.attributes,!0),K.attributes=q,K.objectId=q[N],da.push(K))}return da};z._applyEdits=function(q){const {adds:B,updates:R,deletes:N}=q;q={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};B&&B.length&&this._applyAddEdits(q,B);R&&R.length&&this._applyUpdateEdits(q,R);if(N&&N.length){for(const da of N)q.deleteResults.push(C.createFeatureEditSuccessResult(da));this._queryEngine.featureStore.removeManyById(N)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,
featureEditResults:q}};z._applyAddEdits=function(q,B){const {addResults:R}=q,{geometryType:N,hasM:da,hasZ:K,objectIdField:H,spatialReference:T,featureStore:M}=this._queryEngine,A=[];for(const e of B){if(e.geometry&&N!==D.getJsonType(e.geometry)){R.push(C.createFeatureEditErrorResult("Incorrect geometry type."));continue}B=this._createDefaultAttributes();const f=C.mixAttributes(this._fieldsIndex,B,e.attributes);f?R.push(f):(this._assignObjectId(B,e.attributes),e.attributes=B,null!=e.uid&&(q.uidToObjectId[e.uid]=
e.attributes[H]),u.isSome(e.geometry)&&(e.geometry=I.project(C.simplify(e.geometry,T),e.geometry.spatialReference,T)),A.push(e),R.push(C.createFeatureEditSuccessResult(e.attributes[H])))}M.addMany(v.convertFromFeatures([],A,N,K,da,H))};z._applyUpdateEdits=function({updateResults:q},B){const {geometryType:R,hasM:N,hasZ:da,objectIdField:K,spatialReference:H,featureStore:T}=this._queryEngine;for(const M of B){const {attributes:A,geometry:e}=M;B=A&&A[K];if(null==B){q.push(C.createFeatureEditErrorResult(`Identifier field ${K} missing`));
continue}if(!T.has(B)){q.push(C.createFeatureEditErrorResult(`Feature with object id ${B} missing`));continue}const f=v.convertToFeature(T.getFeature(B),R,da,N);if(u.isSome(e)){if(R!==D.getJsonType(e)){q.push(C.createFeatureEditErrorResult("Incorrect geometry type."));continue}f.geometry=I.project(C.simplify(e,H),e.spatialReference,H)}if(A){const E=C.mixAttributes(this._fieldsIndex,f.attributes,A);if(E){q.push(E);continue}}T.add(v.convertFromFeature(f,R,da,N,K));q.push(C.createFeatureEditSuccessResult(B))}};
z._createObjectIdGenerator=function(q,B){const R=q.fieldsIndex.get(q.objectIdField);if("esriFieldTypeString"===R.type)return()=>R.name+"-"+Date.now().toString(16);let N=Number.NEGATIVE_INFINITY;for(const da of B)da.objectId&&(N=Math.max(N,da.objectId));N=Math.max(0,N)+1;return()=>N++};z._assignObjectId=function(q,B,R=!1){const N=this._queryEngine.objectIdField;q[N]=R&&N in B?B[N]:this._objectIdGenerator()};z._checkProjection=function(){var q=l._asyncToGenerator(function*(B){try{yield I.checkProjectionSupport(y.WGS84,
B)}catch{throw new Z("geojson-layer","Projection not supported");}});return function(B){return q.apply(this,arguments)}}();return h}()});