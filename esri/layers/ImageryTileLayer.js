// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/AnimatedFlowRenderer ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(U,R,D,P,z,T,V,N,L){function I(H,C){if(!H)return null;if("classBreaks"===H.type&&H.classificationMethod){var u=H.authoringInfo||{classificationMethod:""};u.classificationMethod=
H.classificationMethod;H.authoringInfo=u}u=H?w[H.type]||null:null;if(u)return u=new u,u.read(H,C),u;C&&C.messages&&H&&C.messages.push(new R("renderer:unsupported","Renderers of type '"+(H.type||"unknown")+"' are not supported",{definition:H,context:C}));return null}const x={key:"type",base:null,typeMap:{"unique-value":N,"class-breaks":P,"raster-colormap":z,"raster-stretch":V,"vector-field":L,"raster-shaded-relief":T,"animated-flow":D}},t={...x,typeMap:{...x.typeMap}};delete t.typeMap["vector-field"];
delete t.typeMap["animated-flow"];const w={uniqueValue:N,classBreaks:P,rasterStretch:V,rasterColormap:z,vectorField:L,rasterShadedRelief:T,animatedFlow:D};U.AnimatedFlowRenderer=D;U.ClassBreaksRenderer=P;U.RasterColormapRenderer=z;U.RasterShadedReliefRenderer=T;U.RasterStretchRenderer=V;U.UniqueValueRenderer=N;U.VectorFieldRenderer=L;U.fromJSON=function(H,C){return I(H,C)};U.rasterRendererTypes=x;U.read=I;U.websceneRasterRendererTypes=t;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/AnimatedFlowRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x){var t;P=t=function(w){function H(C){C=w.call(this,C)||this;C.density=.8;C.lineColor=new D([255,255,255,1]);C.lineLength=200;C.lineWidth=1.5;C.lineSpeed=10;C.fadeDuration=100;C.smoothing=0;C.type="animated-flow";return C}U._inheritsLoose(H,w);H.prototype.clone=function(){const {density:C,lineLength:u,lineWidth:r,lineSpeed:y,fadeDuration:O,smoothing:B}=this,F=this.lineColor.clone();return new t({density:C,lineColor:F,lineLength:u,lineWidth:r,lineSpeed:y,fadeDuration:O,
smoothing:B})};return H}(P.JSONSupport);R.__decorate([T.property({type:Number,json:{write:!0}})],P.prototype,"density",void 0);R.__decorate([T.property({type:D,json:{write:{allowNull:!0}}})],P.prototype,"lineColor",void 0);R.__decorate([T.property({type:Number,cast:z.toPt,json:{write:!0}})],P.prototype,"lineLength",void 0);R.__decorate([T.property({type:Number,cast:z.toPt,json:{write:!0}})],P.prototype,"lineWidth",void 0);R.__decorate([T.property({type:Number,json:{write:!0}})],P.prototype,"lineSpeed",
void 0);R.__decorate([T.property({type:Number,json:{write:!0}})],P.prototype,"fadeDuration",void 0);R.__decorate([T.property({type:Number,cast:z.toPt,json:{write:!0}})],P.prototype,"smoothing",void 0);R.__decorate([I.enumeration({animatedFlow:"animated-flow"})],P.prototype,"type",void 0);return P=t=R.__decorate([x.subclass("esri.renderers.AnimatedFlowRenderer")],P)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x){var t;D=t=function(w){function H(u){u=w.call(this,u)||this;u.colormapInfos=null;u.type="raster-colormap";return u}U._inheritsLoose(H,w);H.createFromColormap=function(u,r){if(!u)return null;const y=5===u[0].length;u=[...u].sort(O=>O[0][0]-O[1][0]).map(O=>{var B;return I.fromJSON({value:O[0],color:y?O.slice(1,5):O.slice(1,4).concat([255]),label:r?null!=(B=r[O[0]])?B:"":O[0]})});return new t({colormapInfos:u})};H.createFromColorramp=function(u){u=x.convertColorRampToColormap(u,
256);return t.createFromColormap(u)};var C=H.prototype;C.clone=function(){return new t({colormapInfos:this.colormapInfos.map(u=>u.toJSON())})};C.extractColormap=function(){return this.colormapInfos.map(u=>[u.value,u.color.r,u.color.g,u.color.b,1<u.color.a?u.color.a:255*u.color.a&255]).sort((u,r)=>u[0]-r[0])};return H}(D.JSONSupport);R.__decorate([P.property({type:[I],json:{write:!0}})],D.prototype,"colormapInfos",void 0);R.__decorate([N.enumeration({rasterColormap:"raster-colormap"})],D.prototype,
"type",void 0);return D=t=R.__decorate([L.subclass("esri.renderers.RasterColormapRenderer")],D)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(U,R,D,P,z,T,V,N,L){P=function(I){function x(){var t=I.apply(this,
arguments)||this;t.value=null;t.label=null;t.color=null;return t}U._inheritsLoose(x,I);return x}(P.JSONSupport);R.__decorate([z.property({type:Number,json:{write:!0}})],P.prototype,"value",void 0);R.__decorate([z.property({type:String,json:{write:!0}})],P.prototype,"label",void 0);R.__decorate([z.property({type:D,json:{type:[N.Integer],write:!0}})],P.prototype,"color",void 0);return P=R.__decorate([L.subclass("esri.renderers.support.ColormapInfo")],P)})},"esri/renderers/support/colorRampUtils":function(){define(["exports",
"../../Color","../../core/colorUtils"],function(U,R,D){function P(N,L){if(!N||!L||N.length!==L.length)return!1;for(let I=0;I<N.length;I++)if(N[I]>L[I]+2||N[I]<L[I]-2)return!1;return!0}function z(N,L){if(N){L=L?L:T;var I=null,x;"algorithmic"===N.type?L.some(t=>{if(P(N.fromColor.toRgb(),t.fromColor)&&P(N.toColor.toRgb(),t.toColor))return I=t.id,!0}):"multipart"===N.type&&L.some(t=>{if(N.colorRamps&&t.colorRamps&&N.colorRamps.length===t.colorRamps.length&&(x=N.colorRamps,!t.colorRamps.some((w,H)=>{if(!P(x[H].fromColor.toRgb(),
(new R(w.fromColor)).toRgb())||!P(x[H].toColor.toRgb(),(new R(w.toColor)).toRgb()))return!0}))){if(I)return!0;I=t.id}});return I}}const T=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},
{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",
fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",
type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,
240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,
255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",
fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",
type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",
type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,
102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",
fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,
213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},
{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",
colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},
{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,
255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,
252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],V={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",
brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",
greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",
precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",
redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",
surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};U.PREDEFINED_COLOR_RAMP_NAME_MAP=V;U.PREDEFINED_JSON_COLOR_RAMPS=T;U.convertColorRampToColormap=function(N,L,I=!1){if(N&&L&&!(1>
L)){var x="toJSON"in N?N.toJSON():N,t="multipart"===x.type?x.colorRamps.length:1;N=[];var w=[],H,C,u,r=0;if(1===L){var y="multipart"===x.type?x.colorRamps[0].fromColor:x.fromColor;w.push([0].concat(y));return w}for(let B=0;B<t;B++)N[B]={start:null,end:null},N[B].start=r,N[B].end=r+1/t,r=N[B].end;for(let B=0;B<L;B++){var O=B/(L-1);N.forEach((F,E)=>{if(O>=F.start&&(O<F.end||B===L-1&&E===t-1)){u=(O-F.start)/(F.end-F.start);"multipart"===x.type?(y=x.colorRamps[E].fromColor,H=x.colorRamps[E].toColor):
(y=x.fromColor,H=x.toColor);if(0===B)w.push([B].concat(y.slice(0,3)));else if(B===L-1)w.push([B].concat(H.slice(0,3)));else{var v={r:H[0],g:H[1],b:H[2]};F=u;E=D.toLAB({r:y[0],g:y[1],b:y[2]});v=D.toLAB(v);C=D.toRGB({l:E.l*(1-F)+F*v.l,a:E.a*(1-F)+F*v.a,b:E.b*(1-F)+F*v.b});w.push([B,C.r,C.g,C.b])}F=null!=y[3]?1<y[3]?y[3]/255:y[3]:1;E=null!=H[3]?1<H[3]?H[3]/255:H[3]:1;I&&w[B].push(Math.min(255,Math.round(255*(F*(1-u)+E*u))))}})}return w}};U.getColorRampId=z;U.getColorRampName=function(N){return(N=z(N))?
V[N]:null};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(U){function R(I,x){const t=[];let w,H;if(I[0].length!==x.length)throw"dimensions do not match";const C=I.length,u=I[0].length;let r=0;for(w=0;w<C;w++){for(H=r=0;H<u;H++)r+=I[w][H]*x[H];t.push(r)}return t}function D(I){I=[I.r/255,I.g/255,I.b/255].map(x=>.04045>=x?x/12.92:((x+.055)/1.055)**2.4);I=R(N,I);return{x:100*I[0],y:100*I[1],z:100*I[2]}}function P(I){I=R(L,[I.x/100,I.y/
100,I.z/100]).map(x=>Math.min(1,Math.max(.0031308>=x?12.92*x:1.055*x**(1/2.4)-.055,0)));return{r:Math.round(255*I[0]),g:Math.round(255*I[1]),b:Math.round(255*I[2])}}function z(I){I=[I.x/95.047,I.y/100,I.z/108.883].map(x=>x>(6/29)**3?x**(1/3):1/3*(29/6)**2*x+4/29);return{l:116*I[1]-16,a:500*(I[0]-I[1]),b:200*(I[1]-I[2])}}function T(I){const x=I.l;I=[(x+16)/116+I.a/500,(x+16)/116,(x+16)/116-I.b/200].map(t=>t>6/29?t**3:3*(6/29)**2*(t-4/29));return{x:95.047*I[0],y:100*I[1],z:108.883*I[2]}}function V(I){if("r"in
I&&"g"in I&&"b"in I)return I;if("l"in I&&"c"in I&&"h"in I){var x=I.c;var t=I.h;x={l:I.l,a:x*Math.cos(t),b:x*Math.sin(t)};return P(T(x))}if("l"in I&&"a"in I&&"b"in I)return P(T(I));if("x"in I&&"y"in I&&"z"in I)return P(I);if("h"in I&&"s"in I&&"v"in I){{t=(I.h+360)%360/60;x=I.v/100*255;I=I.s/100*x;const w=I*(1-Math.abs(t%2-1));switch(Math.floor(t)){case 0:t={r:I,g:w,b:0};break;case 1:t={r:w,g:I,b:0};break;case 2:t={r:0,g:I,b:w};break;case 3:t={r:0,g:w,b:I};break;case 4:t={r:w,g:0,b:I};break;case 5:case 6:t=
{r:I,g:0,b:w};break;default:t={r:0,g:0,b:0}}t.r=Math.round(t.r+x-I);t.g=Math.round(t.g+x-I);t.b=Math.round(t.b+x-I);x=t}return x}return I}const N=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],L=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];U.darken=function(I,x){I=z(D(I));I.l*=1-x;return P(T(I))};U.toHSV=function(I){if("h"in I&&"s"in I&&"v"in I)return I;var x=V(I);{I=x.r;const t=x.g,w=x.b;x=Math.max(I,t,w);const H=x-Math.min(I,t,w);I=0===H?0:x===I?(t-w)/H%6:x===
t?(w-I)/H+2:(I-t)/H+4;0>I&&(I+=6);I={h:60*I,s:100*(0===H?0:H/x),v:100/255*x}}return I};U.toLAB=function(I){return"l"in I&&"a"in I&&"b"in I?I:z(D(V(I)))};U.toLCH=function(I){if(!("l"in I&&"c"in I&&"h"in I)){{var x=z(D(V(I)));I=x.l;var t=x.a;const w=x.b;x=Math.sqrt(t*t+w*w);t=Math.atan2(w,t);t=0<t?t:t+2*Math.PI;I={l:I,c:x,h:t}}}return I};U.toRGB=V;U.toXYZ=function(I){return"x"in I&&"y"in I&&"z"in I?I:D(V(I))};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(U,R,D,P,z,T,V,N,L,I){var x;D=x=function(t){function w(C){C=t.call(this,C)||this;C.altitude=45;C.azimuth=315;C.colorRamp=null;C.hillshadeType="multi-directional";C.pixelSizePower=.664;C.pixelSizeFactor=.024;C.scalingType="none";C.type="raster-shaded-relief";C.zFactor=1;return C}U._inheritsLoose(w,t);var H=w.prototype;H.readColorRamp=function(C){return I.fromJSON(C)};H.clone=function(){return new x({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:P.clone(this.colorRamp)})};return w}(D.JSONSupport);R.__decorate([z.property({type:Number,json:{write:!0}})],D.prototype,"altitude",void 0);R.__decorate([z.property({type:Number,json:{write:!0}})],D.prototype,"azimuth",void 0);R.__decorate([z.property({types:I.types,json:{write:!0}})],D.prototype,"colorRamp",void 0);R.__decorate([N.reader("colorRamp")],D.prototype,"readColorRamp",null);R.__decorate([z.property({type:["traditional",
"multi-directional"],json:{write:!0}})],D.prototype,"hillshadeType",void 0);R.__decorate([z.property({type:Number,json:{write:!0}})],D.prototype,"pixelSizePower",void 0);R.__decorate([z.property({type:Number,json:{write:!0}})],D.prototype,"pixelSizeFactor",void 0);R.__decorate([z.property({type:["none","adjusted"],json:{write:!0}})],D.prototype,"scalingType",void 0);R.__decorate([V.enumeration({rasterShadedRelief:"raster-shaded-relief"})],D.prototype,"type",void 0);R.__decorate([z.property({type:Number,
json:{write:!0}})],D.prototype,"zFactor",void 0);return D=x=R.__decorate([L.subclass("esri.renderers.RasterShadedReliefRenderer")],D)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t){var w;D=w=function(H){function C(r){r=H.call(this,r)||this;r.colorRamp=null;r.computeGamma=!1;r.dynamicRangeAdjustment=!1;r.gamma=[];r.maxPercent=null;r.minPercent=null;r.numberOfStandardDeviations=null;r.outputMax=null;r.outputMin=null;r.sigmoidStrengthLevel=null;r.statistics=[];r.histograms=null;r.useGamma=!1;r.stretchType="none";r.type="raster-stretch";return r}U._inheritsLoose(C,H);var u=C.prototype;u.readColorRamp=function(r){if(r)return t.fromJSON(r)};u.writeStatistics=
function(r,y,O){var B;null!=(B=r)&&B.length&&(Array.isArray(r[0])||(r=r.map(F=>[F.min,F.max,F.avg,F.stddev])),y[O]=r)};u.readStretchType=function(r,y){r=y.stretchType;"number"===typeof r&&(r=x.stretchTypeFunctionEnum[r]);return x.stretchTypeJSONDict.read(r)};u.clone=function(){return new w({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:P.clone(this.statistics),gamma:P.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:P.clone(this.colorRamp),histograms:P.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return C}(D.JSONSupport);R.__decorate([z.property({types:t.types,json:{write:!0}})],D.prototype,"colorRamp",void 0);R.__decorate([N.reader("colorRamp")],D.prototype,"readColorRamp",null);R.__decorate([z.property({type:Boolean,json:{write:!0}})],D.prototype,"computeGamma",
void 0);R.__decorate([z.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],D.prototype,"dynamicRangeAdjustment",void 0);R.__decorate([z.property({type:[Number],json:{write:!0}})],D.prototype,"gamma",void 0);R.__decorate([z.property({type:Number,json:{write:!0}})],D.prototype,"maxPercent",void 0);R.__decorate([z.property({type:Number,json:{write:!0}})],D.prototype,"minPercent",void 0);R.__decorate([z.property({type:Number,json:{write:!0}})],D.prototype,"numberOfStandardDeviations",
void 0);R.__decorate([z.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],D.prototype,"outputMax",void 0);R.__decorate([z.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],D.prototype,"outputMin",void 0);R.__decorate([z.property({type:Number,json:{write:!0}})],D.prototype,"sigmoidStrengthLevel",void 0);R.__decorate([z.property({json:{type:[[Number]],write:!0}})],D.prototype,"statistics",void 0);R.__decorate([z.property()],D.prototype,"histograms",void 0);
R.__decorate([I.writer("statistics")],D.prototype,"writeStatistics",null);R.__decorate([z.property({type:Boolean,json:{write:!0}})],D.prototype,"useGamma",void 0);R.__decorate([z.property({type:x.stretchTypeJSONDict.apiValues,json:{type:x.stretchTypeJSONDict.jsonValues,write:x.stretchTypeJSONDict.write}})],D.prototype,"stretchType",void 0);R.__decorate([N.reader("stretchType",["stretchType"])],D.prototype,"readStretchType",null);R.__decorate([V.enumeration({rasterStretch:"raster-stretch"})],D.prototype,
"type",void 0);return D=w=R.__decorate([L.subclass("esri.renderers.RasterStretchRenderer")],D)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(U,R){R=new R.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});U.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
U.stretchTypeJSONDict=R;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B,F,E,v,k,m,n,e,f){var p;const d=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);P=new V.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
V=new V.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});N=p=function(b){function a(l){l=b.call(this,l)||this;l.attributeField="Magnitude";l.flowRepresentation="flow-from";l.rotationType="arithmetic";l.style="single-arrow";l.symbolTileSize=50;l.type="vector-field";return l}U._inheritsLoose(a,b);var c=a.prototype;c.readInputUnit=function(l,h){return d.has(l)?r.unitKebabDict.fromJSON(l):null};c.readOutputUnit=function(l,h){return d.has(l)?r.unitKebabDict.fromJSON(l):null};c.clone=function(){return new p({attributeField:this.attributeField,
flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:L.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};c.getGraphicsFromPixelData=function(){var l=U._asyncToGenerator(function*(h,g=!1,q=[]){var A;const J=[];var G=r.getUnitConversionFactor(this.inputUnit,this.outputUnit),Q=(null==(A=this.rotationVariables[0])?void 0:A.rotationType)||this.rotationType;g=g?r.convertVectorFieldData(h.pixelBlock,
"vector-uv",Q,G):r.convertVectorFieldUnit(h.pixelBlock,"vector-magdir",G);if(I.isNone(g))return J;h=h.extent;A=g.mask&&0<g.mask.length;G=0;Q=(h.xmax-h.xmin)/g.width;const S=(h.ymax-h.ymin)/g.height;for(let X=0;X<g.height;X++)for(let M=0;M<g.width;M++,G++){let K=new f({x:h.xmin+M*Q+Q/2,y:h.ymax-X*S-S/2,spatialReference:h.spatialReference});K=(yield u.normalizeCentralMeridian(K))[0];var W=q.some(Y=>Y.intersects(K));A&&!g.mask[G]||W||(W=new z({geometry:{type:"point",x:K.x,y:K.y,spatialReference:h.spatialReference},
attributes:{Magnitude:g.pixels[0][G],Direction:g.pixels[1][G]}}),W.symbol=this._getVisualVariablesAppliedSymbol(W),J.push(W))}return J});return function(h){return l.apply(this,arguments)}}();c.getSymbol=function(l,h){};c.getSymbolAsync=function(){var l=U._asyncToGenerator(function*(h,g){});return function(h,g){return l.apply(this,arguments)}}();c.getSymbols=function(){return[]};c.getClassBreakInfos=function(){var l;return null==(l=this.styleRenderer)?void 0:l.classBreakInfos};c.getDefaultSymbol=function(){var l;
return null==(l=this.styleRenderer)?void 0:l.defaultSymbol};c._getDefaultSymbol=function(l){return new m({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new k({width:0}),size:20,color:l||new D([0,92,230])})};c._getVisualVariablesAppliedSymbol=function(l){if(l){var h=this.styleRenderer&&this.styleRenderer.getSymbol(l);h=h.clone();var g=this.sizeVariables,q=this.rotationVariables;g&&g.length&&this.sizeVariables.forEach(A=>n.applySizesToSymbol(h,v.getAllSizes([A],l)));q&&q.length&&(l.attributes.Direction+=
"flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(A=>n.applyRotationToSymbol(h,v.getRotationAngle(A,l),A.axis)));return h}};c._createStyleRenderer=function(l){let h={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(l){case "single-arrow":h=this._createSingleArrowRenderer();break;case "beaufort-kn":h=this._createBeaufortKnotsRenderer();break;case "beaufort-m":h=this._createBeaufortMeterRenderer();
break;case "beaufort-ft":h=this._createBeaufortFeetRenderer();break;case "beaufort-mi":h=this._createBeaufortMilesRenderer();break;case "beaufort-km":h=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":h=this._createCurrentMeterRenderer();break;case "ocean-current-kn":h=this._createCurrentKnotsRenderer();break;case "simple-scalar":h=this._createSimpleScalarRenderer();break;case "wind-barb":h=this._createWindBarbsRenderer();break;case "classified-arrow":h=this._createClassifiedArrowRenderer()}return new y(h)};
c._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};c._createBeaufortKnotsRenderer=function(){const l=this._getDefaultSymbol(new D([214,47,39])),h=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:l,classBreakInfos:h}};c._createBeaufortMeterRenderer=function(){const l=this._getDefaultSymbol(new D([214,
47,39])),h=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:l,classBreakInfos:h}};c._createBeaufortFeetRenderer=function(){const l=this._getDefaultSymbol(new D([214,47,39]));var h=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];h=h.map(g=>3.28084*g);h=this._getClassBreaks(h,[[69,
117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:l,classBreakInfos:h}};c._createBeaufortMilesRenderer=function(){const l=this._getDefaultSymbol(new D([214,47,39]));var h=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];h=h.map(g=>2.23694*g);h=this._getClassBreaks(h,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],
[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:l,classBreakInfos:h}};c._createBeaufortKilometersRenderer=function(){const l=this._getDefaultSymbol(new D([214,47,39]));var h=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];h=h.map(g=>3.6*g);h=this._getClassBreaks(h,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:l,
classBreakInfos:h}};c._createCurrentMeterRenderer=function(){const l=this._getDefaultSymbol(new D([177,177,177])),h=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:l,classBreakInfos:h}};c._createCurrentKnotsRenderer=function(){const l=this._getDefaultSymbol(new D([177,177,177])),h=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);
return{defaultSymbol:l,classBreakInfos:h}};c._createClassifiedArrowRenderer=function(){var l;const h=this._getDefaultSymbol(new D([56,168,0]));var g=[0,1E-6,3.5,7,10.5,14];if(null!=(l=this.sizeVariables)&&l.length){const q=this.sizeVariables[0].minDataValue;l=this.sizeVariables[0].maxDataValue;if(q&&l){const A=(l-q)/5;g=Array.from(Array(6).keys()).map(J=>q+A*J)}}g=this._getClassBreaks(g,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:h,classBreakInfos:g}};c._createSimpleScalarRenderer=
function(){return{defaultSymbol:e.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};c._createWindBarbsRenderer=function(){const l=Array.from(Array(31).keys()).map(A=>5*A),h=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],g=e.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),q=l.map((A,J)=>{if(J!==l.length-1)if(0===J)var G={minValue:A,maxValue:l[J+1],symbol:g};else G=e.fromJSON({type:"esriPMS",imageData:h[J].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),G={minValue:A,maxValue:l[J+1],symbol:G};return new B(G)});return{defaultSymbol:g,classBreakInfos:q}};c._getClassBreaks=function(l,h){return h.map((g,q)=>new B({minValue:l[q],maxValue:l[q+1],symbol:this._getDefaultSymbol(new D(g))}))};U._createClass(a,[{key:"styleRenderer",
get:function(){const l=this.attributeField,h=this._createStyleRenderer(this.style);h.field=l;return h}},{key:"sizeVariables",get:function(){const l=[];if(this.visualVariables)for(var h of this.visualVariables)"size"===h.type&&l.push(h);0===l.length&&(h=new E({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(h):this._set("visualVariables",[h]),l.push(h));return l}},{key:"rotationVariables",get:function(){const l=[];if(this.visualVariables)for(var h of this.visualVariables)"rotation"===
h.type&&l.push(h);0===l.length&&(h=new F({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(h):this._set("visualVariables",[h]),l.push(h));return l}}]);return a}(O.VisualVariablesMixin(N.JSONSupport));R.__decorate([x.property({type:String,json:{write:!0}})],N.prototype,"attributeField",void 0);R.__decorate([x.property({type:V.apiValues,json:{type:V.jsonValues,read:{reader:V.read},write:{writer:V.write}}})],N.prototype,"flowRepresentation",void 0);R.__decorate([x.property({type:["geographic",
"arithmetic"],json:{write:!0}})],N.prototype,"rotationType",void 0);R.__decorate([x.property({type:P.apiValues,json:{type:P.jsonValues,read:{reader:P.read},write:{writer:P.write}}})],N.prototype,"style",void 0);R.__decorate([x.property({json:{write:!0}})],N.prototype,"symbolTileSize",void 0);R.__decorate([x.property({type:r.unitKebabDict.apiValues,json:{type:r.unitKebabDict.jsonValues,write:{writer:r.unitKebabDict.write}}})],N.prototype,"inputUnit",void 0);R.__decorate([H.reader("inputUnit")],N.prototype,
"readInputUnit",null);R.__decorate([x.property({type:r.unitKebabDict.apiValues,json:{type:r.unitKebabDict.jsonValues,read:{reader:r.unitKebabDict.read},write:{writer:r.unitKebabDict.write}}})],N.prototype,"outputUnit",void 0);R.__decorate([H.reader("outputUnit")],N.prototype,"readOutputUnit",null);R.__decorate([w.enumeration({vectorField:"vector-field"})],N.prototype,"type",void 0);R.__decorate([x.property({type:y})],N.prototype,"styleRenderer",null);R.__decorate([x.property({type:E})],N.prototype,
"sizeVariables",null);R.__decorate([x.property({type:F})],N.prototype,"rotationVariables",null);return N=p=R.__decorate([C.subclass("esri.renderers.VectorFieldRenderer")],N)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(U,R,D,P,z){function T(v,k){return C.get(v)/C.get(k)||1}function V(v,k="geographic"){const [m,n]=v;v=Math.sqrt(m*m+n*n);let e=Math.atan2(n,m)*u;e=(360+e)%
360;"geographic"===k&&(e=(450-e)%360);return[v,e]}function N(v,k="geographic"){let m=v[1];"geographic"===k&&(m=(450-m)%360);m%=360;v=v[0];return[v*Math.cos(m/u),v*Math.sin(m/u)]}function L(v=0,k=Math.PI,m=!0){m&&(k=(2*Math.PI-k)%(2*Math.PI));var n=m?-1:1;m=5*n;const e=20*n,f=25*n;n*=2;let [p,d]=[5,0-e],[b,a]=[p+2,d],[c,l]=[b-0,a+n],[h,g]=[-5,0-f],[q,A]=[h+0,g-n];v=Math.ceil(v/5);let J=Math.floor(v/10);v-=8*J;const G=[],Q=[];for(let ba=0;ba<v/2;ba++,J--){0>=J&&1===v%2&&ba===(v-1)/2&&(h=0,q=h+0,g=(g+
d)/2,A=g-n);const [da,fa]=I(h,g,k,45);if(0<J){const [ja,ha]=I(b,g,k,45),[ea,ka]=I(p,d,k,45);G.push(ja);G.push(ha);G.push(da);G.push(fa);G.push(ea);G.push(ka)}else{const [ja,ha]=I(b,a,k,45),[ea,ka]=I(c,l,k,45),[ia,ca]=I(q,A,k,45);Q.push(da);Q.push(fa);Q.push(ia);Q.push(ca);Q.push(ea);Q.push(ka);Q.push(ja);Q.push(ha)}g+=m;d+=m;a+=m;l+=m;A+=m}const [S,W]=I(5,0+e,k,45),[X,M]=I(7,0+e,k,45),[K,Y]=I(5,0-f,k,45),[Z,aa]=I(7,0-f,k,45);return{pennants:G,barbs:Q,shaft:[S,W,X,M,K,Y,Z,aa]}}function I(v,k,m,n=1){return[Math.sqrt(v*
v+k*k)/n,(2*Math.PI+(2*Math.PI+Math.atan2(k,v))%(2*Math.PI)-m)%(2*Math.PI)]}function x(v,k,m,n){m=T(n||"knots",m);for(n=1;n<k.length;n++)if(n===k.length-1){if(v<k[n]*m)break}else if(v<=k[n]*m)break;return Math.min(n-1,k.length-2)}function t(v,k,m,n,e){let f=0;switch(k){case "beaufort_kn":f=x(v,O,"knots",m);break;case "beaufort_km":f=x(v,O,"kilometer-per-hour",m);break;case "beaufort_ft":f=x(v,O,"feet-per-second",m);break;case "beaufort_m":f=x(v,O,"meter-per-second",m);break;case "classified_arrow":f=
x(v,e,n,m);break;case "ocean_current_m":f=x(v,B,"meter-per-second",m);break;case "ocean_current_kn":f=x(v,F,"knots",m)}return f}function w(v,k){const {style:m,inputUnit:n,outputUnit:e,breakValues:f}=k;k=r.fromJSON(n);const p=r.fromJSON(e);let d=0,b=0;const {width:a,height:c,mask:l}=v,h=v.pixels[0];v=v.pixels[1];var g=l?l.filter(G=>0<G).length:a*c;const q=new Float32Array(42*g);g=new Uint32Array(15*g);for(let G=0;G<c;G++)for(let Q=0;Q<a;Q++){var A=G*a+Q;if(!l||l[G*a+Q]){var J;const S=null!=(J=(v[A]+
360)%360/180*Math.PI)?J:2*Math.PI*Math.random(),W=t(h[A],m,k,p,f);for(let X=0;X<y.length;X+=2)q[d++]=(Q+.5)/a,q[d++]=(G+.5)/c,q[d++]=y[X],q[d++]=y[X+1]+S,q[d++]=W,q[d++]=h[A];A=7*(d/42-1);g[b++]=A;g[b++]=A+1;g[b++]=A+2;g[b++]=A+0;g[b++]=A+4;g[b++]=A+3;g[b++]=A+0;g[b++]=A+2;g[b++]=A+3;g[b++]=A+2;g[b++]=A+5;g[b++]=A+3;g[b++]=A+5;g[b++]=A+6;g[b++]=A+3}}return{vertexData:q,indexData:g}}function H(v,k){let m=0,n=0;const {width:e,height:f,mask:p}=v;v=v.pixels[0];const d=[],b=[];k="wind_speed"===k.style?
5:Number.MAX_VALUE;for(let c=0;c<f;c++)for(let l=0;l<e;l++){var a=c*e+l;if((!p||p[c*e+l])&&v[a]<k){for(let h=0;4>h;h++)d[m++]=(l+.5)/e,d[m++]=(c+.5)/f,d[m++]=2>h?-.5:.5,d[m++]=0===h%2?-.5:.5,d[m++]=0,d[m++]=v[a];a=4*(m/24-1);b[n++]=a;b[n++]=a+1;b[n++]=a+2;b[n++]=a+1;b[n++]=a+2;b[n++]=a+3}}return{vertexData:new Float32Array(d),indexData:new Uint32Array(b)}}const C=new Map;C.set("meter-per-second",1);C.set("kilometer-per-hour",.277778);C.set("knots",.514444);C.set("feet-per-second",.3048);C.set("mile-per-hour",
.44704);const u=180/Math.PI,r=new R.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),y=function(v=0,k=0,m=Math.PI,n=!0){n&&(m=(2*Math.PI-m)%(2*Math.PI));n=n?-1:1;const e=-7*n,f=-2*n,p=-16*n,[d,b]=I(0,k+13*n,m,29),[a,c]=I(v-5.5,k+e,m,29),[l,h]=I(v+5.5,k+e,m,29),[g,q]=I(v-1.5,k+f,m,29),[A,J]=I(v+1.5,k+f,m,29),[G,Q]=I(v-1.5,k+p,m,29),[S,W]=I(v+1.5,k+p,m,29);return[d,b,a,
c,g,q,A,J,l,h,G,Q,S,W]}(0,0,0),O=[0,1,3,6,10,16,21,27,33,40,47,55,63],B=[0,.5,1,1.5,2],F=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],E=[];U.convertVectorFieldData=function(v,k,m="geographic",n=1){if(!z.isValidPixelBlock(v))return v;const {pixels:e,width:f,height:p}=v;var d=f*p;const b=e[0],a=e[1],c=P.createEmptyBand(v.pixelType,d);d=P.createEmptyBand(v.pixelType,d);let l=0;for(let h=0;h<p;h++)for(let g=0;g<f;g++)"vector-uv"===k?([c[l],d[l]]=V([b[l],a[l]],m),c[l]*=n):([c[l],d[l]]=N([b[l],a[l]],m),c[l]*=n,d[l]*=
n),l++;v=new P({pixelType:v.pixelType,width:v.width,height:v.height,mask:v.mask,validPixelCount:v.validPixelCount,maskIsAlpha:v.maskIsAlpha,pixels:[c,d]});v.updateStatistics();return v};U.convertVectorFieldUnit=function(v,k,m=1){if(1===m||!z.isValidPixelBlock(v))return v;v=v.clone();const {pixels:n,width:e,height:f}=v,p=n[0],d=n[1];let b=0;for(let a=0;a<f;a++)for(let c=0;c<e;c++)"vector-uv"===k?(p[b]*=m,d[b]*=m):p[b]*=m,b++;v.updateStatistics();return v};U.createVFMesh=function(v,k){if("simple_scalar"===
k.style)var m=H(v,k);else if("wind_speed"===k.style){{if(0===E.length)for(var n=0;30>n;n++)E.push(L(5*n,0));k=r.fromJSON(k.inputUnit);k=T(k,"knots");const {width:d,height:b,mask:a}=v;n=v.pixels[0];v=v.pixels[1];const c=[],l=[];let h=0,g=0;for(let q=0;q<b;q++)for(let A=0;A<d;A++){var e=q*d+A,f=n[e]*k;if((!a||a[q*d+A])&&5<=f){const J=null!=(m=(v[e]+360)%360/180*Math.PI)?m:2*Math.PI*Math.random(),{pennants:G,barbs:Q,shaft:S}=E[Math.min(Math.floor(f/5),29)];if(0===G.length+Q.length)continue;e=c.length/
6;const W=(A+.5)/d,X=(q+.5)/b;for(var p=0;p<G.length;p+=2)c[h++]=W,c[h++]=X,c[h++]=G[p],c[h++]=G[p+1]+J,c[h++]=0,c[h++]=f;for(p=0;p<Q.length;p+=2)c[h++]=W,c[h++]=X,c[h++]=Q[p],c[h++]=Q[p+1]+J,c[h++]=0,c[h++]=f;for(p=0;p<S.length;p+=2)c[h++]=W,c[h++]=X,c[h++]=S[p],c[h++]=S[p+1]+J,c[h++]=0,c[h++]=f;for(f=0;f<G.length/6;f++)l[g++]=e,l[g++]=e+1,l[g++]=e+2,e+=3;for(f=0;f<Q.length/8;f++)l[g++]=e,l[g++]=e+1,l[g++]=e+2,l[g++]=e+1,l[g++]=e+2,l[g++]=e+3,e+=4;l[g++]=e+0;l[g++]=e+1;l[g++]=e+2;l[g++]=e+1;l[g++]=
e+3;l[g++]=e+2;e+=4}}m={vertexData:new Float32Array(c),indexData:new Uint32Array(l)}}}else m=w(v,k);return m};U.createVFMeshScalar=H;U.getUnitConversionFactor=T;U.sampleVectorField=function(v,k,m,n=[0,0],e=.5){const {width:f,height:p,mask:d}=v,[b,a]=v.pixels,[c,l]=n;v=Math.round((f-c)/m);n=Math.round((p-l)/m);var h=v*n;const g=new Float32Array(h),q=new Float32Array(h);h=new Uint8Array(h);k="vector-uv"===k;for(let J=0;J<n;J++)for(let G=0;G<v;G++){let Q=0;const S=J*v+G,W=Math.max(0,J*m+l),X=Math.max(0,
G*m+c),M=Math.min(p,W+m),K=Math.min(f,X+m);for(let Y=W;Y<M;Y++)for(let Z=X;Z<K;Z++){var A=Y*f+Z;if(!d||d[A]){Q++;A=k?[b[A],a[A]]:[b[A],(360+a[A])%360];const [aa,ba]=k?A:N(A);g[S]+=aa;q[S]+=ba}}if(Q>=(M-W)*(K-X)*(1-e)){h[S]=1;const [Y,Z]=V([g[S]/Q,q[S]/Q]);g[S]=Y;q[S]=Z}else h[S]=0,g[S]=0,q[S]=0}m=new P({width:v,height:n,pixels:[g,q],mask:h});m.updateStatistics();return m};U.snapImageToSymbolTile=function(v,k,m,n,e){if(!D.isSome(e)||!e.spatialReference.equals(v.spatialReference))return{extent:v,width:k,
height:m,resolution:v.width/k};const f=e.xmin;e=e.ymax;n=Math.max(n||0,30);k=((v.xmax-v.xmin)/Math.ceil(1/n*k)+(v.ymax-v.ymin)/Math.ceil(1/n*m))/2;v.xmin=f+Math.floor((v.xmin-f)/k)*k;v.xmax=f+Math.ceil((v.xmax-f)/k)*k;v.ymin=e+Math.floor((v.ymin-e)/k)*k;v.ymax=e+Math.ceil((v.ymax-e)/k)*k;return{extent:v,width:Math.round(v.width/k),height:Math.round(v.height/k),resolution:k}};U.unitKebabDict=r;U.uvComponentToVector=V;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x){var t;const w=V.getLogger("esri.layers.support.PixelBlock");D=t=function(H){function C(r){r=H.call(this,r)||this;r.width=null;r.height=null;r.pixelType="f32";r.validPixelCount=null;r.mask=null;r.maskIsAlpha=!1;r.pixels=null;r.statistics=null;return r}U._inheritsLoose(C,H);C.createEmptyBand=function(r,y){return new (t.getPixelArrayConstructor(r))(y)};C.getPixelArrayConstructor=function(r){let y;switch(r){case "u1":case "u2":case "u4":case "u8":y=Uint8Array;break;case "u16":y=
Uint16Array;break;case "u32":y=Uint32Array;break;case "s8":y=Int8Array;break;case "s16":y=Int16Array;break;case "s32":y=Int32Array;break;case "u32":y=Uint32Array;break;case "f32":y=Float32Array;break;case "f64":y=Float64Array;break;case "c64":case "c128":case "unknown":y=Float32Array}return y};var u=C.prototype;u.castPixelType=function(r){if(!r)return"f32";r=r.toLowerCase();-1<["u1","u2","u4"].indexOf(r)?r="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(r)&&(r="f32");return r};
u.getPlaneCount=function(){return this.pixels&&this.pixels.length};u.addData=function(r){if(!r.pixels||r.pixels.length!==this.width*this.height)throw new P("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(r.pixels);this.statistics.push(r.statistics||{minValue:null,maxValue:null})};u.getAsRGBA=function(){const r=new ArrayBuffer(this.width*
this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(r);break;default:this._fillFrom8Bit(r)}return new Uint8ClampedArray(r)};u.getAsRGBAFloat=function(){const r=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(r);return r};u.updateStatistics=function(){this.statistics=this.pixels.map(O=>this._calculateBandStatistics(O,this.mask));const r=this.mask;let y=0;if(r)for(let O=0;O<r.length;O++)r[O]&&y++;else y=
this.width*this.height;this.validPixelCount=y};u.clamp=function(r){if(r&&"f64"!==r&&"f32"!==r){switch(r){case "u8":var y=[0,255];break;case "u16":y=[0,65535];break;case "u32":y=[0,4294967295];break;case "s8":y=[-128,127];break;case "s16":y=[-32768,32767];break;case "s32":y=[-2147483648,2147483647];break;default:y=[-3.4*1E39,3.4*1E39]}var [O,B]=y;y=this.pixels;var F=this.width*this.height,E=y.length,v=[];for(let e=0;e<E;e++){var k=t.createEmptyBand(r,F);var m=y[e];for(let f=0;f<F;f++){var n=m[f];k[f]=
n>B?B:n<O?O:n}v.push(k)}this.pixels=v;this.pixelType=r}};u.extractBands=function(r){if(N.isNone(r)||0===r.length||null==this.pixels||0===this.pixels.length)return this;var y=this.pixels.length;const O=r.some(B=>B>=this.pixels.length);y=y===r.length&&!r.some((B,F)=>B!==F);return O||y?this:new t({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:r.map(B=>this.pixels[B]),statistics:this.statistics&&r.map(B=>
this.statistics[B])})};u.clone=function(){const r=new t({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(r.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let y;const O=t.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){r.pixels=[];const B=this.pixels[0].slice;for(y=0;y<this.pixels.length;y++)r.pixels[y]=B?this.pixels[y].slice(0,this.pixels[y].length):
new O(this.pixels[y])}if(this.statistics)for(r.statistics=[],y=0;y<this.statistics.length;y++)r.statistics[y]=T.clone(this.statistics[y]);return r};u._fillFrom8Bit=function(r){const {mask:y,maskIsAlpha:O,pixels:B}=this;if(r&&B&&B.length){var F,E;var v=F=E=B[0];3<=B.length?(F=B[1],E=B[2]):2===B.length&&(F=B[1]);var k=new Uint32Array(r),m=this.width*this.height;if(v.length!==m)w.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(y&&y.length===m)if(O)for(r=0;r<m;r++)y[r]&&
(k[r]=y[r]<<24|E[r]<<16|F[r]<<8|v[r]);else for(r=0;r<m;r++)y[r]&&(k[r]=-16777216|E[r]<<16|F[r]<<8|v[r]);else for(r=0;r<m;r++)k[r]=-16777216|E[r]<<16|F[r]<<8|v[r]}else w.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};u._fillFromNon8Bit=function(r){const {pixels:y,mask:O,statistics:B}=this;if(r&&y&&y.length){var F=this.pixelType,E=1,v=0;E=1;B&&0<B.length?(v=B.map(f=>f.minValue).reduce((f,p)=>Math.min(f,p)),E=B.map(f=>f.maxValue-f.minValue).reduce((f,p)=>Math.max(f,
p)),E=255/E):(E=255,"s8"===F?(v=-128,E=127):"u16"===F?E=65535:"s16"===F?(v=-32768,E=32767):"u32"===F?E=4294967295:"s32"===F?(v=-2147483648,E=2147483647):"f32"===F?(v=-3.4*1E39,E=3.4*1E39):"f64"===F&&(v=-Number.MAX_VALUE,E=Number.MAX_VALUE),E=255/(E-v));r=new Uint32Array(r);F=this.width*this.height;var k,m,n;var e=k=m=y[0];if(e.length!==F)return w.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=y.length)if(k=y[1],3<=y.length&&(m=y[2]),O&&O.length===F)for(n=0;n<F;n++)O[n]&&
(r[n]=-16777216|(m[n]-v)*E<<16|(k[n]-v)*E<<8|(e[n]-v)*E);else for(n=0;n<F;n++)r[n]=-16777216|(m[n]-v)*E<<16|(k[n]-v)*E<<8|(e[n]-v)*E;else if(O&&O.length===F)for(n=0;n<F;n++)k=(e[n]-v)*E,O[n]&&(r[n]=-16777216|k<<16|k<<8|k);else for(n=0;n<F;n++)k=(e[n]-v)*E,r[n]=-16777216|k<<16|k<<8|k}else w.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};u._fillFrom32Bit=function(r){const {pixels:y,mask:O}=this;if(!r||!y||!y.length)return w.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let B,F,E,v;B=F=E=y[0];3<=y.length?(F=y[1],E=y[2]):2===y.length&&(F=y[1]);const k=this.width*this.height;if(B.length!==k)return w.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let m=0;if(O&&O.length===k)for(v=0;v<k;v++)r[m++]=B[v],r[m++]=F[v],r[m++]=E[v],r[m++]=O[v]&1;else for(v=0;v<k;v++)r[m++]=B[v],r[m++]=F[v],r[m++]=E[v],r[m++]=1};u._calculateBandStatistics=function(r,y){let O=Infinity,B=-Infinity;const F=r.length;let E,v=0;if(y)for(E=0;E<F;E++)y[E]&&(v=r[E],
O=v<O?v:O,B=v>B?v:B);else for(E=0;E<F;E++)v=r[E],O=v<O?v:O,B=v>B?v:B;return{minValue:O,maxValue:B}};return C}(z.JSONSupport);R.__decorate([L.property({json:{write:!0}})],D.prototype,"width",void 0);R.__decorate([L.property({json:{write:!0}})],D.prototype,"height",void 0);R.__decorate([L.property({json:{write:!0}})],D.prototype,"pixelType",void 0);R.__decorate([I.cast("pixelType")],D.prototype,"castPixelType",null);R.__decorate([L.property({json:{write:!0}})],D.prototype,"validPixelCount",void 0);
R.__decorate([L.property({json:{write:!0}})],D.prototype,"mask",void 0);R.__decorate([L.property({json:{write:!0}})],D.prototype,"maskIsAlpha",void 0);R.__decorate([L.property({json:{write:!0}})],D.prototype,"pixels",void 0);R.__decorate([L.property({json:{write:!0}})],D.prototype,"statistics",void 0);return D=t=R.__decorate([x.subclass("esri.layers.support.PixelBlock")],D)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(U,
R,D){function P(u){return R.isSome(u)&&"esri.layers.support.PixelBlock"===u.declaredClass&&u.pixels&&0<u.pixels.length}function z(u,r){u=Math.min(Math.max(u,-100),100);r=Math.min(Math.max(r,-100),100);let y,O;const B=new Uint8Array(256);for(y=0;256>y;y++)0<u&&100>u?O=(200*y-25500+510*r)/(2*(100-u))+128:0>=u&&-100<u?O=(200*y-25500+510*r)*(100+u)/2E4+128:100===u?(O=200*y-25500+256*(100-u)+510*r,O=0<O?255:0):-100===u&&(O=128),B[y]=255<O?255:0>O?0:O;return B}function T(u,r,y,O,B,F,E,v){return{xmin:B<=
y*u?0:B<y*u+u?B-y*u:u,ymin:F<=O*r?0:F<O*r+r?F-O*r:r,xmax:B+E<=y*u?0:B+E<y*u+u?B+E-y*u:u,ymax:F+v<=O*r?0:F+v<O*r+r?F+v-O*r:r}}function V(u,r,y,O,B,F){const {width:E,height:v}=y.block,{x:k,y:m}=y.offset,{width:n,height:e}=y.mosaic;y=T(E,v,O,B,k,m,n,e);let f=0;var p=0;if(F){var d=F.hasGCSSShiftTransform?360:F.halfWorldWidth,b=E*F.resolutionX,a=F.startX+O*b;b=a+b;a<d&&b>d?p=F.rightPadding:a>=d&&(f=F.leftMargin-F.rightPadding,p=0)}y.xmax-=p;if("number"===typeof r)for(F=y.ymin;F<y.ymax;F++)for(p=(B*v+F-
m)*n+(O*E-k)+f,d=y.xmin;d<y.xmax;d++)u[p+d]=r;else for(F=y.ymin;F<y.ymax;F++)for(p=(B*v+F-m)*n+(O*E-k)+f,d=F*E,a=y.xmin;a<y.xmax;a++)u[p+a]=r[d+a]}function N(u,r,y={}){const {clipOffset:O,clipSize:B,alignmentInfo:F,blockWidths:E}=y;if(E)return L(u,r,{blockWidths:E});var v=u.filter(l=>P(l))[0];if(R.isNone(v))return null;y=B?B.width:r.width;const k=B?B.height:r.height;var m=v.width,n=v.height;const e=r.width/m,f=r.height/n;r={offset:O||{x:0,y:0},mosaic:B||r,block:{width:m,height:n}};m=v.pixelType;n=
D.getPixelArrayConstructor(m);var p=v.pixels.length;v=[];for(var d=0;d<p;d++){var b=new n(y*k);for(let l=0;l<f;l++)for(let h=0;h<e;h++){var a=u[l*e+h];P(a)&&(a=a.pixels[d],V(b,a,r,h,l,F))}v.push(b)}let c;if(u.some(l=>R.isNone(l)||l.mask&&0<l.mask.length))for(c=new Uint8Array(y*k),n=0;n<f;n++)for(p=0;p<e;p++)b=u[n*e+p],(d=R.isSome(b)?b.mask:null)?V(c,d,r,p,n,F):b?V(c,1,r,p,n,F):V(c,0,r,p,n,F);u=new D({width:y,height:k,pixels:v,pixelType:m,mask:c});u.updateStatistics();return u}function L(u,r,y){const O=
u.find(p=>R.isSome(p));if(!R.isSome(O))return null;var B=u.some(p=>R.isSome(p)?!!p.mask:!0);const {width:F,height:E}=r;r=B?new Uint8Array(F*E):null;({blockWidths:y}=y);const v=[],k=O.getPlaneCount(),m=D.getPixelArrayConstructor(O.pixelType);if(B)for(let p=0,d=0;p<u.length;d+=y[p],p++)if(B=u[p],P(B)){var n=B.mask;for(var e=0;e<E;e++)for(var f=0;f<y[p];f++)r[e*F+f+d]=null==n?255:n[e*B.width+f]}for(B=0;B<k;B++){n=new m(F*E);for(let p=0,d=0;p<u.length;d+=y[p],p++)if(e=u[p],P(e)&&(f=e.pixels[B],null!=
f))for(let b=0;b<E;b++)for(let a=0;a<y[p];a++)n[b*F+a+d]=f[b*e.width+a];v.push(n)}u=new D({width:F,height:E,mask:r,pixels:v,pixelType:O.pixelType});u.updateStatistics();return u}function I(u){if(!P(u))return null;const r=u.clone(),{width:y,height:O,pixels:B,mask:F}=u;var E=B[0];u=r.pixels[0];for(let m=2;m<O-1;m++){const n=new Map;for(var v=m-2;v<m+2;v++)for(var k=0;4>k;k++){const e=v*y+k;w(n,E[e],F?F[e]:1)}u[m*y]=x(n);u[m*y+1]=u[m*y+2]=u[m*y];for(v=3;v<y-1;v++)k=(m-2)*y+v+1,w(n,E[k],F?F[k]:1),k=(m-
1)*y+v+1,w(n,E[k],F?F[k]:1),k=m*y+v+1,w(n,E[k],F?F[k]:1),k=(m+1)*y+v+1,w(n,E[k],F?F[k]:1),k=(m-2)*y+v-3,t(n,E[k],F?F[k]:1),k=(m-1)*y+v-3,t(n,E[k],F?F[k]:1),k=m*y+v-3,t(n,E[k],F?F[k]:1),k=(m+1)*y+v-3,t(n,E[k],F?F[k]:1),u[m*y+v]=x(n);u[m*y+v+1]=u[m*y+v]}for(E=0;E<y;E++)u[E]=u[y+E]=u[2*y+E],u[(O-1)*y+E]=u[(O-2)*y+E];r.updateStatistics();return r}function x(u){if(0===u.size)return 0;let r=0,y=-1,O=0;const B=u.keys();let F=B.next();for(;!F.done;)O=u.get(F.value),O>r&&(y=F.value,r=O),F=B.next();return y}
function t(u,r,y){0!==y&&(y=u.get(r),1===y?u.delete(r):u.set(r,y-1))}function w(u,r,y){0!==y&&u.set(r,u.has(r)?u.get(r)+1:1)}function H(u,r,y){let {x:O,y:B}=r;const {width:F,height:E}=y;if(0===O&&0===B&&E===u.height&&F===u.width)return u;const {width:v,height:k}=u;r=Math.max(0,B);const m=Math.max(0,O),n=Math.min(O+F,v),e=Math.min(B+E,k);if(0>n||0>e||!P(u))return null;O=Math.max(0,-O);B=Math.max(0,-B);const {pixels:f,mask:p}=u;var d=F*E,b=f.length;const a=[];for(var c=0;c<b;c++){var l=f[c],h=D.createEmptyBand(u.pixelType,
d);for(let g=r;g<e;g++){const q=g*v;let A=(g+B-r)*F+O;for(let J=m;J<n;J++)h[A++]=l[q+J]}a.push(h)}d=new Uint8Array(d);for(b=r;b<e;b++)for(c=b*v,l=(b+B-r)*F+O,h=m;h<n;h++)d[l++]=p?p[c+h]:1;u=new D({width:y.width,height:y.height,pixelType:u.pixelType,pixels:a,mask:d});u.updateStatistics();return u}function C(u,r=!0){if(!P(u))return null;const {pixels:y,width:O,height:B,mask:F,pixelType:E}=u;u=[];const v=Math.round(O/2),k=Math.round(B/2),m=B-1,n=O-1;for(var e=0;e<y.length;e++){var f=y[e],p=D.createEmptyBand(E,
v*k),d=0;for(var b=0;b<B;b+=2)for(var a=0;a<O;a+=2){var c=f[b*O+a];if(r){var l=a===n?c:f[b*O+a+1];const h=b===m?c:f[b*O+a+O],g=a===n?h:b===m?l:f[b*O+a+O+1];p[d++]=(c+l+h+g)/4}else p[d++]=c}u.push(p)}e=null;if(F)for(e=new Uint8Array(v*k),f=0,p=0;p<B;p+=2)for(d=0;d<O;d+=2)b=F[p*O+d],r?(a=d===n?b:F[p*O+d+1],c=p===m?b:F[p*O+d+O],l=d===n?c:p===m?a:F[p*O+d+O+1],e[f++]=b*a*c*l?1:0):e[f++]=b;return new D({width:v,height:k,pixelType:E,pixels:u,mask:e})}U.approximateTransform=function(u,r,y,O,B="nearest"){if(!P(u))return null;
"majority"===B&&(u=I(u));const {pixels:F,mask:E,pixelType:v}=u,k=u.width;var m=u.height;u=D.getPixelArrayConstructor(v);var n=F.length;const {width:e,height:f}=r;r=O.cols;var p=O.rows;const d=Math.ceil(e/r-.1/r),b=Math.ceil(f/p-.1/p);O=!1;for(var a=0;a<y.length;a+=3)-1===y[a]&&-1===y[a+1]&&-1===y[a+2]&&(O=!0);let c,l,h,g,q,A;const J=d*r;a=J*b*p;const G=new Float32Array(a),Q=new Float32Array(a);a=0;let S,W;const X="majority"===B?0:.5;for(let Y=0;Y<b;Y++)for(let Z=0;Z<d;Z++){c=12*(Y*d+Z);B=y[c];l=y[c+
1];h=y[c+2];g=y[c+3];q=y[c+4];A=y[c+5];for(var M=0;M<p;M++){a=(Y*p+M)*J+Z*r;W=(M+.5)/p;for(var K=0;K<M;K++)S=(K+.5)/r,G[a+K]=Math.round((B*S+l*W+h)*k-X),Q[a+K]=Math.round((g*S+q*W+A)*m-X)}c+=6;B=y[c];l=y[c+1];h=y[c+2];g=y[c+3];q=y[c+4];A=y[c+5];for(M=0;M<p;M++)for(a=(Y*p+M)*J+Z*r,W=(M+.5)/p,K=M;K<r;K++)S=(K+.5)/r,G[a+K]=Math.round((B*S+l*W+h)*k-X),Q[a+K]=Math.round((g*S+q*W+A)*m-X)}y=(Y,Z)=>{for(let aa=0;aa<f;aa++){c=aa*J;for(let ba=0;ba<e;ba++)Y[aa*e+ba]=0>G[c]||0>Q[c]?0:Z[G[c]+Q[c]*k],c++}};m=[];
for(p=0;p<n;p++)r=new u(e*f),y(r,F[p]),m.push(r);u=new D({width:e,height:f,pixelType:v,pixels:m});if(E)u.mask=new Uint8Array(e*f),y(u.mask,E);else if(O)for(u.mask=new Uint8Array(e*f),n=0;n<e*f;n++)u.mask[n]=0>G[n]||0>Q[n]?0:1;u.updateStatistics();return u};U.clip=H;U.colorize=function(u,r){if(!P(u)||!r&&(r.indexedColormap||r.indexed2DColormap))return u;const y=u.clone();var O=y.pixels;let B=y.mask;const F=y.width*y.height;if(1!==O.length)return u;const {indexedColormap:E,indexed2DColormap:v,offset:k,
alphaSpecified:m}=r;r=E.length-1;u=0;O=O[0];const n=new Uint8Array(O.length),e=new Uint8Array(O.length),f=new Uint8Array(O.length);let p=0;if(E)if(B)for(u=0;u<F;u++)B[u]&&(p=4*(O[u]-k),p<k||p>r?B[u]=0:(n[u]=E[p],e[u]=E[p+1],f[u]=E[p+2],B[u]=E[p+3]));else{B=new Uint8Array(F);for(u=0;u<F;u++)p=4*(O[u]-k),p<k||p>r?B[u]=0:(n[u]=E[p],e[u]=E[p+1],f[u]=E[p+2],B[u]=E[p+3]);y.mask=B}else if(B)for(u=0;u<F;u++)B[u]&&(r=v[O[u]],n[u]=r[0],e[u]=r[1],f[u]=r[2],B[u]=r[3]);else{B=new Uint8Array(F);for(u=0;u<F;u++)r=
v[O[u]],n[u]=r[0],e[u]=r[1],f[u]=r[2],B[u]=r[3];y.mask=B}y.pixels=[n,e,f];y.statistics=null;y.pixelType="u8";y.maskIsAlpha=m;return y};U.createColormapLUT=function(u){if(u){var r=u.colormap;if(r&&0!==r.length){r=r.sort((m,n)=>m[0]-n[0]);var y=0;0>r[0][0]&&(y=r[0][0]);var O=Math.max(256,r[r.length-1][0]-y+1),B=new Uint8Array(4*O),F=[],E=0,v=0,k=5===r[0].length;if(65536<O)return r.forEach(m=>{F[m[0]-y]=k?m.slice(1):m.slice(1).concat([255])}),{indexed2DColormap:F,offset:y,alphaSpecified:k};if(u.fillUnspecified)for(u=
r[v],E=u[0]-y;E<O;E++)B[4*E]=u[1],B[4*E+1]=u[2],B[4*E+2]=u[3],B[4*E+3]=k?u[4]:255,E===u[0]-y&&(u=v===r.length-1?u:r[++v]);else for(E=0;E<r.length;E++)u=r[E],v=4*(u[0]-y),B[v]=u[1],B[v+1]=u[2],B[v+2]=u[3],B[v+3]=k?u[4]:255;return{indexedColormap:B,offset:y,alphaSpecified:k}}}};U.createContrastBrightnessLUT=z;U.createHistogramEqualizationLUT=function(u,r=256){r=Math.min(r,256);const {size:y,counts:O}=u;u=new Uint8Array(y);var B=O.reduce((m,n)=>m+n/r,0);let F=0;var E=0;let v=0,k=B;for(let m=0;m<y;m++)if(v+=
O[m],!(m<y-1&&v+O[m+1]<k)){for(;F<r-1&&k<v;)F++,k+=B;for(;E<=m;E++)u[E]=F;E=m+1}for(B=E;B<y;B++)u[B]=r-1;return u};U.createStretchLUT=function(u){const {minCutOff:r,maxCutOff:y,gamma:O,pixelType:B}=u,F=u.outMin||0,E=u.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(B))return null;const v=r.length;let k;let m=0;"s8"===B?m=-127:"s16"===B&&(m=-32767);let n=256;-1<["u16","s16"].indexOf(B)&&(n=65536);const e=[],f=E-F;for(k=0;k<v;k++)e[k]=y[k]-r[k];var p=O&&O.length>=v;const d=[];if(p)for(k=0;k<v;k++)d[k]=
1<O[k]?2<O[k]?6.5+(O[k]-2)**2.5:6.5+100*(2-O[k])**4:1;let b;const a=[];let c,l,h;if(p)for(k=0;k<v;k++){h=[];for(p=0;p<n;p++)c=p+m,b=(c-r[k])/e[k],l=1,1<O[k]&&(l-=(1/f)**(b*d[k])),h[p]=c<y[k]&&c>r[k]?Math.floor(l*f*b**(1/O[k]))+F:c>=y[k]?E:F;a[k]=h}else for(k=0;k<v;k++){h=[];for(p=0;p<n;p++)c=p+m,h[p]=c<=r[k]?F:c>=y[k]?E:Math.floor((c-r[k])/e[k]*f)+F;a[k]=h}if(null!=u.contrastOffset)for(u=z(u.contrastOffset,u.brightnessOffset),k=0;k<v;k++)for(h=a[k],p=0;p<n;p++)h[p]=u[h[p]];return{lut:a,offset:m}};
U.estimateStatisticsFromHistograms=function(u){const r=[];for(let F=0;F<u.length;F++){const {min:E,max:v,size:k,counts:m}=u[F];let n=0;var y=0;for(var O=0;O<k;O++)n+=m[O],y+=O*m[O];y/=n;O=0;for(var B=0;B<k;B++)O+=m[B]*(B-y)**2;B=(v-E)/k;r.push({min:E,max:v,avg:(y+.5)*B+E,stddev:Math.sqrt(O/(n-1))*B})}return r};U.estimateStatisticsHistograms=function(u){if(!P(u))return null;u.statistics||u.updateStatistics();const {pixels:r,mask:y,pixelType:O,statistics:B}=u;u=u.width*u.height;const F=r.length;let E,
v;let k;var m;const n=[],e=[];for(k=0;k<F;k++){var f=new Uint32Array(256);var p=r[k];if("u8"===O)if(E=-.5,v=255.5,y)for(m=0;m<u;m++)y[m]&&f[p[m]]++;else for(m=0;m<u;m++)f[p[m]]++;else{E=B[k].minValue;v=B[k].maxValue;var d=(v-E)/256;var b=new Uint32Array(257);if(y)for(m=0;m<u;m++)y[m]&&b[Math.floor((p[m]-E)/d)]++;else for(m=0;m<u;m++)b[Math.floor((p[m]-E)/d)]++;for(m=0;255>m;m++)f[m]=b[m];f[255]=b[255]+b[256]}n.push({min:E,max:v,size:256,counts:f});for(m=p=b=d=0;256>m;m++)d+=f[m],b+=m*f[m];b/=d;for(m=
0;256>m;m++)p+=f[m]*(m-b)**2;f=Math.sqrt(p/(d-1));d=(v-E)/256;m=(b+.5)*d+E;f*=d;e.push({min:E,max:v,avg:m,stddev:f})}return{statistics:e,histograms:n}};U.extractBands=function(u,r){if(null==r||!r.length||!P(u))return u;const y=u.pixels.length;return r&&r.some(O=>O>=y)||1===y&&1===r.length&&0===r[0]||y===r.length&&!r.some((O,B)=>O!==B)?u:new D({pixelType:u.pixelType,width:u.width,height:u.height,mask:u.mask,validPixelCount:u.validPixelCount,maskIsAlpha:u.maskIsAlpha,pixels:r.map(O=>u.pixels[O]),statistics:u.statistics&&
r.map(O=>u.statistics[O])})};U.getClipBounds=T;U.isValidPixelBlock=P;U.lookupPixels=function(u,r){if(!P(u))return null;const {pixels:y,mask:O}=u,B=u.width*u.height,F=y.length;let E=r.lut;({offset:r}=r);let v,k;E&&1===E[0].length&&(E=y.map(()=>E));const m=[];let n,e,f;if(r)if(null==O)for(v=0;v<F;v++){n=y[v];e=E[v];f=new Uint8Array(B);for(k=0;k<B;k++)f[k]=e[n[k]-r];m.push(f)}else for(v=0;v<F;v++){n=y[v];e=E[v];f=new Uint8Array(B);for(k=0;k<B;k++)O[k]&&(f[k]=e[n[k]-r]);m.push(f)}else if(null==O)for(v=
0;v<F;v++){n=y[v];e=E[v];f=new Uint8Array(B);for(k=0;k<B;k++)f[k]=e[n[k]];m.push(f)}else for(v=0;v<F;v++){n=y[v];e=E[v];f=new Uint8Array(B);for(k=0;k<B;k++)O[k]&&(f[k]=e[n[k]]);m.push(f)}u=new D({width:u.width,height:u.height,pixels:m,mask:O,pixelType:"u8"});u.updateStatistics();return u};U.mosaic=N;U.mosaicPixelData=function(u,r){if(!u||0===u.length)return null;var y=u.filter(e=>e.pixelBlock)[0];if(!y||R.isNone(y.pixelBlock))return null;var O=(y.extent.xmax-y.extent.xmin)/y.pixelBlock.width;const B=
(y.extent.ymax-y.extent.ymin)/y.pixelBlock.height,F=.01*Math.min(O,B),E=u.sort((e,f)=>Math.abs(e.extent.ymax-f.extent.ymax)>F?f.extent.ymax-e.extent.ymax:Math.abs(e.extent.xmin-f.extent.xmin)>F?e.extent.xmin-f.extent.xmin:0);var v=Math.min.apply(null,E.map(e=>e.extent.xmin));const k=Math.min.apply(null,E.map(e=>e.extent.ymin)),m=Math.max.apply(null,E.map(e=>e.extent.xmax)),n=Math.max.apply(null,E.map(e=>e.extent.ymax));u={x:Math.round((r.xmin-v)/O),y:Math.round((n-r.ymax)/B)};v={width:Math.round((m-
v)/O),height:Math.round((n-k)/B)};O={width:Math.round((r.xmax-r.xmin)/O),height:Math.round((r.ymax-r.ymin)/B)};if(Math.round(v.width/y.pixelBlock.width)*Math.round(v.height/y.pixelBlock.height)!==E.length||0>u.x||0>u.y||v.width<O.width||v.height<O.height)return null;y=E.map(e=>e.pixelBlock);y=N(y,v,{clipOffset:u,clipSize:O});return{extent:r,pixelBlock:y}};U.remapColor=function(u,r){if(!P(u))return null;u=u.clone();var {pixels:y}=u;const O=u.width*u.height,B=r.length,F=Math.floor(B/2),E=r[Math.floor(F)];
y=y[0];let v,k,m,n,e,f,p=!1;const d=new Uint8Array(O),b=new Uint8Array(O),a=new Uint8Array(O);let c=u.mask;const l=4===r[0].mappedColor.length;c||(c=new Uint8Array(O),c.fill(l?255:1),u.mask=c);for(e=0;e<O;e++)if(c[e]){v=y[e];p=!1;f=F;k=E;m=0;for(n=B-1;1<n-m;){if(v===k.value){p=!0;break}v>k.value?m=f:n=f;f=Math.floor((m+n)/2);k=r[Math.floor(f)]}p||(v===r[m].value?(k=r[m],p=!0):v===r[n].value?(k=r[n],p=!0):v<r[m].value?(p=!1,k=null):v>r[m].value&&(v<r[n].value?(k=r[m],p=!0):n===B-1?(p=!1,k=null):(k=
r[n],p=!0)));p?(d[e]=k.mappedColor[0],b[e]=k.mappedColor[1],a[e]=k.mappedColor[2],c[e]=k.mappedColor[3]):d[e]=b[e]=a[e]=c[e]=0}u.pixels=[d,b,a];u.mask=c;u.pixelType="u8";u.maskIsAlpha=l;return u};U.resampleByMajority=I;U.setValidBoundary=function(u,r,y){if(!P(u))return null;const {width:O,height:B}=u,F=r.x;r=r.y;const E=y.width+F;y=y.height+r;if(0>F||0>r||E>O||y>B||0===F&&0===r&&E===O&&y===B)return u;u.mask||(u.mask=new Uint8Array(O*B));const v=u.mask;for(let k=0;k<B;k++){const m=k*O;for(let n=0;n<
O;n++)v[m+n]=k<r||k>=y||n<F||n>=E?0:1}u.updateStatistics();return u};U.split=function(u,r,y){if(!P(u))return null;const {width:O,height:B}=r;let {width:F,height:E}=u;const v=new Map,k={x:0,y:0};y=null==y?1:1+y;for(let m=0;m<y;m++){const n=Math.ceil(F/O),e=Math.ceil(E/B);for(let f=0;f<e;f++){k.y=f*B;for(let p=0;p<n;p++){k.x=p*O;const d=H(u,k,r);v.set(`${m}/${f}/${p}`,d)}}m<y-1&&(u=C(u));F=Math.round(F/2);E=Math.round(E/2)}return v};U.stretch=function(u,r){if(!P(u))return null;u=u.clone();const {pixels:y,
mask:O}=u,{minCutOff:B,maxCutOff:F,gamma:E}=r,v=r.outMin||0;r=r.outMax||255;const k=u.width*u.height,m=y.length;let n;let e,f,p;const d=r-v,b=[];for(n=0;n<m;n++)b[n]=F[n]-B[n];var a=E&&E.length>=m;const c=[];if(a)for(n=0;n<m;n++)c[n]=1<E[n]?2<E[n]?6.5+(E[n]-2)**2.5:6.5+100*(2-E[n])**4:1;if(a)if(null!=O)for(a=0;a<k;a++){if(O[a])for(n=0;n<m;n++)e=y[n][a],p=(e-B[n])/b[n],f=1,1<E[n]&&(f-=(1/d)**(p*c[n])),y[n][a]=e<F[n]&&e>B[n]?Math.floor(f*d*p**(1/E[n]))+v:e>=F[n]?r:v}else for(a=0;a<k;a++)for(n=0;n<m;n++)e=
y[n][a],p=(e-B[n])/b[n],f=1,1<E[n]&&(f-=(1/d)**(p*c[n])),y[n][a]=e<F[n]&&e>B[n]?Math.floor(f*d*p**(1/E[n]))+v:e>=F[n]?r:v;else if(null!=O)for(a=0;a<k;a++){if(O[a])for(n=0;n<m;n++)e=y[n][a],y[n][a]=e<F[n]&&e>B[n]?Math.floor((e-B[n])/b[n]*d)+v:e>=F[n]?r:v}else for(a=0;a<k;a++)for(n=0;n<m;n++)e=y[n][a],y[n][a]=e<F[n]&&e>B[n]?Math.floor((e-B[n])/b[n]*d)+v:e>=F[n]?r:v;u.pixelType="u8";u.updateStatistics();return u};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w){function H(b){b=b.symbolLayers;if(!b)return null;let a=null;b.forEach(c=>{if("object"!==c.type||null==c.resource.href)a="water"===c.type?N.unwrap(c.color):N.isSome(c.material)?N.unwrap(c.material.color):null});return a?new P(a):null}function C(b,a){if(null==a)return b;b=b.toRgba();b[3]*=a;return new P(b)}function u(b,a,c){if(b=b.symbolLayers){var l=h=>{h=N.isSome(h)?h:null;a=a||h||null!=c&&d;return C(a,c)};b.forEach(h=>{if("object"!==h.type||null==h.resource.href||
a)if("water"===h.type)h.color=l(h.color);else{var g=N.isSome(h.material)?h.material.color:null;g=l(g);N.isNone(h.material)?h.material=new w.default({color:g}):h.material.color=g;null!=c&&"outline"in h&&N.isSome(h.outline)&&N.isSome(h.outline.color)&&(h.outline.color=C(h.outline.color,c))}})}}function r(b,a){return y.apply(this,arguments)}function y(){y=D._asyncToGenerator(function*(b,a){(b=b.symbolLayers)&&(yield T.forEach(b,function(){var c=D._asyncToGenerator(function*(l){return O(l,a)});return function(l){return c.apply(this,
arguments)}}()))});return y.apply(this,arguments)}function O(b,a){return B.apply(this,arguments)}function B(){B=D._asyncToGenerator(function*(b,a){switch(b.type){case "extrude":b.size="number"===typeof a[2]?a[2]:0;break;case "icon":case "line":case "text":a=F(a);N.isSome(a)&&(b.size=a);break;case "path":{const c=k(a,I.ONES,[b.width,void 0,b.height]);b.width=e(a[0],b.width,1,c);b.height=e(a[2],b.height,1,c)}break;case "object":yield E(b,a)}});return B.apply(this,arguments)}function F(b){for(const a of b)if("number"===
typeof a)return a;return null}function E(b,a){return v.apply(this,arguments)}function v(){v=D._asyncToGenerator(function*(b,a){const {resourceSize:c,symbolSize:l}=yield m(b),h=k(a,c,l);b.width=e(a[0],l[0],c[0],h);b.depth=e(a[1],l[1],c[1],h);b.height=e(a[2],l[2],c[2],h)});return v.apply(this,arguments)}function k(b,a,c){for(let l=0;3>l;l++){const h=b[l];switch(h){case "symbol-value":return null!=c[l]?c[l]/a[l]:1;case "proportional":break;default:if(h&&a[l])return h/a[l]}}return 1}function m(b){return n.apply(this,
arguments)}function n(){n=D._asyncToGenerator(function*(b){const a=yield(yield new Promise((A,J)=>U(["./symbolLayerUtils"],A,J))).computeObjectLayerResourceSize(b,10),{width:c,height:l,depth:h}=b;b=[c,h,l];let g=1;for(var q=0;3>q;q++)if(null!=b[q]){g=b[q]/a[q];break}for(q=0;3>q;q++)null==b[q]&&(b[q]=a[q]*g);return{resourceSize:a,symbolSize:b}});return n.apply(this,arguments)}function e(b,a,c,l){switch(b){case "proportional":return c*l;case "symbol-value":return null!=a?a:c;default:return b}}function f(){f=
D._asyncToGenerator(function*(b,a){if(b&&a){if(z.isSymbol3D(b))return r(b,a);if(z.isSymbol2D(b)&&(a=F(a),!N.isNone(a)))switch(b.type){case "simple-marker":b.size=a;break;case "picture-marker":{const c=b.width/b.height;1<c?(b.width=a,b.height=a*c):(b.width=a*c,b.height=a);break}case "simple-line":b.width=a;break;case "text":b.font.size=a}}});return f.apply(this,arguments)}const p=/\/resource\/(.*?)\.svg$/,d=new P("white");R.applyColorToSymbol=function(b,a,c){if(b&&(a||null!=c))if(a&&(a=new P(a)),z.isSymbol3D(b))u(b,
a,c);else if(z.isSymbol2D(b)){if(a=a||b.color)b.color=C(a,c);null!=c&&"outline"in b&&b.outline&&b.outline.color&&(b.outline.color=C(b.outline.color,c))}};R.applyOpacityToColor=C;R.applyRotationToSymbol=function(b,a,c){b&&null!=a&&(z.isSymbol3D(b)?(b=b.symbolLayers)&&b.forEach(l=>{if(l&&"object"===l.type)switch(c){case "tilt":l.tilt=a;break;case "roll":l.roll=a;break;default:l.heading=a}}):!z.isSymbol2D(b)||"simple-marker"!==b.type&&"picture-marker"!==b.type&&"text"!==b.type||(b.angle=a))};R.applySizesToSymbol=
function(b,a){return f.apply(this,arguments)};R.getCSSFilterFromEffectList=function(b){if(!b)return null;b=b.effects.filter(a=>"bloom"!==a.type).map(a=>a.toJSON());return x.effectFunctionsFromJSON(b)};R.getColorFromSymbol=function(b,a){if(!b)return null;let c=null;z.isSymbol3D(b)?c=H(b):z.isSymbol2D(b)&&(c=b.color?new P(b.color):null);return c?C(c,a):null};R.getIconHref=function(b,a){a=a.resource.href;return!V("esri-canvas-svg-support")&&b.styleOrigin&&p.test(a)?a.replace(p,"/resource/png/$1.png"):
a};R.getSymbolOutlineSize=function(b){if(!b)return 0;if(z.isSymbol3D(b)){{const a=b.symbolLayers&&b.symbolLayers.length;a?(b=b.symbolLayers.getItemAt(a-1),b="outline"in b?N.get(b,"outline","size"):void 0):b=void 0}return N.isSome(b)?b:0}return(b=t.getStroke(b))&&L.px2pt(b.width)||0};R.isVolumetricSymbol=function(b){if(N.isNone(b)||!("symbolLayers"in b)||N.isNone(b.symbolLayers))return!1;switch(b.type){case "point-3d":return b.symbolLayers.some(a=>"object"===a.type);case "line-3d":return b.symbolLayers.some(a=>
"path"===a.type);case "polygon-3d":return b.symbolLayers.some(a=>"object"===a.type||"extrude"===a.type);default:return!1}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(U,R,D,P,z,T,V){function N(w){if(!w)return null;let H;switch(w.type){case "simple-fill":case "picture-fill":case "simple-marker":H=N(w.outline);break;
case "simple-line":{const C=T.pt2px(w.width);"none"!==w.style&&0!==C&&(H={color:w.color,style:t(w.style),width:C,cap:w.cap,join:"miter"===w.join?T.pt2px(w.miterLimit):w.join});break}default:H=null}return H}const L={left:"start",center:"middle",right:"end",justify:"start"},I={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},x=new z(1E3),t=function(){const w={};return function(H){if(w[H])return w[H];const C=H.replace(/-/g,"");return w[H]=C}}();D=new D([128,128,
128]);U.defaultThematicColor=D;U.dekebabifyLineStyle=t;U.getFill=function(w){const H=w.style;let C=null;if(w)switch(w.type){case "simple-marker":"cross"!==H&&"x"!==H&&(C=w.color);break;case "simple-fill":"solid"===H?C=w.color:"none"!==H&&(C={type:"pattern",x:0,y:0,src:R.getAssetUrl(`esri/symbols/patterns/${H}.png`),width:5,height:5});break;case "picture-fill":C={type:"pattern",src:w.url,width:T.pt2px(w.width)*w.xscale,height:T.pt2px(w.height)*w.yscale,x:T.pt2px(w.xoffset),y:T.pt2px(w.yoffset)};break;
case "text":C=w.color;break;case "cim":C=V.getCIMSymbolColor(w)}return C};U.getPatternUrlWithColor=function(w,H){const C=w+"-"+H;return void 0!==x.get(C)?Promise.resolve(x.get(C)):P(w,{responseType:"image"}).then(u=>{u=u.data;const r=u.naturalWidth,y=u.naturalHeight,O=document.createElement("canvas");O.width=r;O.height=y;const B=O.getContext("2d");B.fillStyle=H;B.fillRect(0,0,r,y);B.globalCompositeOperation="destination-in";B.drawImage(u,0,0);u=O.toDataURL();x.put(C,u);return u})};U.getSVGAlign=function(w){return w=
(w=w.horizontalAlignment)&&L[w.toLowerCase()]||"middle"};U.getSVGBaseline=function(w){return(w=w.verticalAlignment)&&I[w.toLowerCase()]||"alphabetic"};U.getSVGBaselineShift=function(w){return"bottom"===w.verticalAlignment?"super":null};U.getStroke=N;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(U){return function(){function R(P,z){this._storage=new U.MemCacheStorage;this._storage.maxSize=P;z&&this._storage.registerRemoveFunc("",
z)}var D=R.prototype;D.put=function(P,z){this._storage.put(P,z,1,1)};D.pop=function(P){return this._storage.pop(P)};D.get=function(P){return this._storage.get(P)};D.clear=function(){this._storage.clearAll()};D.destroy=function(){this._storage.destroy()};return R}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(U,R,D){function P(t){t=D.toCIMSymbolJSON(t);if("CIMTextSymbol"===t.type)return t.height;let w=0;if(t.symbolLayers)for(const H of t.symbolLayers)D.isCIMMarker(H)&&
H.size>w?w=H.size:D.isCIMStroke(H)&&H.width>w?w=H.width:D.isCIMFill(H);return w}function z(t,w,H,C){if("CIMTextSymbol"===t.type)t.height*=w;else{if(H&&t.effects)for(const u of t.effects)N(u,w);if(t.symbolLayers)for(const u of t.symbolLayers)switch(u.type){case "CIMPictureMarker":case "CIMVectorMarker":T(u,w,C);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=C&&C.preserveOutlineWidth||(u.width*=w);break;case "CIMPictureFill":u.height*=w;u.offsetX*=w;u.offsetY*=w;break;case "CIMHatchFill":z(u.lineSymbol,
w,!0,{...C,preserveOutlineWidth:!1}),u.offsetX*=w,u.offsetY*=w,u.separation*=w}}}function T(t,w,H){t.markerPlacement&&V(t.markerPlacement,w);t.offsetX*=w;t.offsetY*=w;t.anchorPoint&&"Absolute"===t.anchorPointUnits&&(t.anchorPoint={x:t.anchorPoint.x*w,y:t.anchorPoint.y*w});t.size*=w;if("CIMVectorMarker"===t.type&&t.markerGraphics)for(const C of t.markerGraphics)t.scaleSymbolsProportionally||z(C.symbol,w,!0,H)}function V(t,w){D.isCIMMarkerStrokePlacement(t)&&(t.offset*=w);switch(t.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":t.customEndingOffset*=
w;t.offsetAlongLine*=w;if(t.placementTemplate&&t.placementTemplate.length){var H=t.placementTemplate.map(C=>C*w);t.placementTemplate=H}break;case "CIMMarkerPlacementAlongLineVariableSize":t.maxRandomOffset*=w;t.placementTemplate&&t.placementTemplate.length&&(H=t.placementTemplate.map(C=>C*w),t.placementTemplate=H);break;case "CIMMarkerPlacementOnLine":t.startPointOffset*=w;break;case "CIMMarkerPlacementAtExtremities":t.offsetAlongLine*=w;break;case "CIMMarkerPlacementAtRatioPositions":t.beginPosition*=
w;t.endPosition*=w;break;case "CIMMarkerPlacementPolygonCenter":t.offsetX*=w;t.offsetY*=w;break;case "CIMMarkerPlacementInsidePolygon":t.offsetX*=w,t.offsetY*=w,t.stepX*=w,t.stepY*=w}}function N(t,w){switch(t.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":t.width*=w;break;case "CIMGeometricEffectBuffer":t.size*=w;break;case "CIMGeometricEffectCut":t.beginCut*=w;t.endCut*=w;t.middleCut*=w;break;case "CIMGeometricEffectDashes":t.customEndingOffset*=w;t.offsetAlongLine*=w;if(t.dashTemplate&&
t.dashTemplate.length){const H=t.dashTemplate.map(C=>C*w);t.dashTemplate=H}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":t.length*=w;break;case "CIMGeometricEffectMove":t.offsetX*=w;t.offsetY*=w;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":t.offset*=w;break;case "CIMGeometricEffectRegularPolygon":t.radius*=w;break;case "CIMGeometricEffectTaperedPolygon":t.fromWidth*=w;t.length*=w;t.toWidth*=w;break;case "CIMGeometricEffectWave":t.amplitude*=
w,t.period*=w}}function L(t,w){let H;H="CIMTextSymbol"===t.type?t.symbol:t;t="CIMPolygonSymbol"===t.type;if(H.symbolLayers)for(const C of H.symbolLayers)if(!(C.colorLocked||t&&(D.isCIMStroke(C)||D.isCIMMarker(C)&&C.markerPlacement&&D.isCIMMarkerStrokePlacement(C.markerPlacement))))switch(C.type){case "CIMVectorMarker":C.markerGraphics.forEach(u=>{L(u.symbol,w)});break;case "CIMSolidStroke":case "CIMSolidFill":I(w,C.color);break;case "CIMHatchFill":L(C.lineSymbol,w)}}function I(t,w){for(const H of t)if(H.join(".")===
w.join("."))return;t.push(w)}function x(t,w){var H="CIMTextSymbol"===t.type?t.symbol:t;t="CIMPolygonSymbol"===t.type?!0:!1;if(H.symbolLayers)for(const C of H.symbolLayers)if(!(C.colorLocked||t&&(D.isCIMStroke(C)||D.isCIMMarker(C)&&C.markerPlacement&&D.isCIMMarkerStrokePlacement(C.markerPlacement))))switch(H=w.toArray(0),C.type){case "CIMVectorMarker":C.markerGraphics.forEach(u=>{x(u.symbol,w)});break;case "CIMSolidStroke":case "CIMSolidFill":C.color=H;break;case "CIMHatchFill":x(C.lineSymbol,w)}}
U.applyCIMSymbolColor=function(t,w){w instanceof R||(w=new R(w));t=D.toCIMSymbolJSON(t);x(t,w)};U.applyCIMSymbolRotation=function(t,w,H=!1){t=D.toCIMSymbolJSON(t);H&&0!==w&&(w=360-w);if("CIMTextSymbol"===t.type)t.angle=w;else if("CIMPointSymbol"===t.type&&t.symbolLayers){H=w-(t.angle||0);for(const C of t.symbolLayers)if(D.isCIMMarker(C)){let u=C.rotation||0;u=C.rotateClockwise?u-H:u+H;C.rotation=u}t.angle=w}};U.getCIMSymbolColor=function(t){t=D.toCIMSymbolJSON(t);const w=[];L(t,w);return w.length?
new R(D.fromCIMColor(w[0])):null};U.getCIMSymbolRotation=function(t,w=!1){t=D.toCIMSymbolJSON(t);return"CIMTextSymbol"===t.type||"CIMPointSymbol"===t.type?w&&0!==t.angle?360-t.angle:t.angle||0:0};U.getCIMSymbolSize=P;U.scaleCIMMarker=T;U.scaleCIMSymbolTo=function(t,w,H){const C=D.toCIMSymbolJSON(t);t=P(t);if(0===t)if("CIMTextSymbol"===C.type)C.height=w;else{if(C.symbolLayers)for(const u of C.symbolLayers)switch(u.type){case "CIMPictureMarker":case "CIMVectorMarker":u.size=w;break;case "CIMPictureStroke":case "CIMSolidStroke":u.width=
w}}else z(C,w/t,!1,H)};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(U){function R(D,P){"string"!==typeof D&&(D=String(D));switch(P){case "LowerCase":return D.toLowerCase();case "Allcaps":return D.toUpperCase();default:return D}}U._adjustTextCase=R;U.colorToArray=function(D){return[D.r,D.g,D.b,D.a]};U.createLabelOverrideFunction=function(D,P,z){const T=I=>{let x=I.length;for(;x--;)if(-1===" /-,\n".indexOf(I.charAt(x)))return!1;
return!0},V=[];var N=0;let L=-1;do L=P.indexOf("[",N),L>=N&&(L>N&&(N=P.substr(N,L-N),V.push([N,null,T(N)])),N=L+1,L=P.indexOf("]",N),L>=N&&(L>N&&(N=P.substr(N,L-N),(N=D[N])&&V.push([null,N,!1])),N=L+1));while(-1!==L);N<P.length-1&&(D=P.substr(N),V.push([D,null,T(D)]));return I=>{let x="",t=null;for(const w of V){const [H,C,u]=w;if(H)u?t=H:(t&&(x+=t,t=null),x+=H);else{const r=I.attributes[C];r&&(t&&(x+=t,t=null),x+=r)}}return R(x,z)}};U.evaluateValueOrFunction=function(D,P,z,T){return"function"===
typeof D?D(P,z,T):D};U.fromCIMColor=function(D){return D?{r:D[0],g:D[1],b:D[2],a:D[3]/255}:{r:0,g:0,b:0,a:0}};U.getValue=D=>isNaN(D)||!D?0:D;U.isCIMFill=function(D){return"CIMGradientFill"===D.type||"CIMHatchFill"===D.type||"CIMPictureFill"===D.type||"CIMSolidFill"===D.type||"CIMWaterFill"===D.type};U.isCIMMarker=function(D){return"CIMVectorMarker"===D.type||"CIMPictureMarker"===D.type||"CIMBarChartMarker"===D.type||"CIMCharacterMarker"===D.type||"CIMPieChartMarker"===D.type||"CIMStackedBarChartMarker"===
D.type};U.isCIMMarkerStrokePlacement=function(D){return"CIMMarkerPlacementAlongLineRandomSize"===D.type||"CIMMarkerPlacementAlongLineSameSize"===D.type||"CIMMarkerPlacementAlongLineVariableSize"===D.type||"CIMMarkerPlacementAtExtremities"===D.type||"CIMMarkerPlacementAtMeasuredUnits"===D.type||"CIMMarkerPlacementAtRatioPositions"===D.type||"CIMMarkerPlacementOnLine"===D.type||"CIMMarkerPlacementOnVertices"===D.type};U.isCIMStroke=function(D){return"CIMGradientStroke"===D.type||"CIMPictureStroke"===
D.type||"CIMSolidStroke"===D.type};U.resampleHermite=function(D,P,z,T,V,N,L=!0){const I=P/V;z/=N;const x=Math.ceil(I/2),t=Math.ceil(z/2);for(let C=0;C<N;C++)for(let u=0;u<V;u++){const r=4*(u+(L?N-C-1:C)*V);var w=0;let y=0,O=0,B=0,F=0,E=0,v=0;const k=(C+.5)*z;for(let m=Math.floor(C*z);m<(C+1)*z;m++){var H=Math.abs(k-(m+.5))/t;const n=(u+.5)*I;H*=H;for(let e=Math.floor(u*I);e<(u+1)*I;e++){let f=Math.abs(n-(e+.5))/x;w=Math.sqrt(H+f*f);-1<=w&&1>=w&&(w=2*w*w*w-3*w*w+1,0<w&&(f=4*(e+m*P),v+=w*D[f+3],O+=
w,255>D[f+3]&&(w=w*D[f+3]/250),B+=w*D[f],F+=w*D[f+1],E+=w*D[f+2],y+=w))}}T[r]=B/y;T[r+1]=F/y;T[r+2]=E/y;T[r+3]=v/O}};U.toCIMSymbolJSON=function(D){var P;return null==(P=D.data)?void 0:P.symbol};U.toKebabCase=D=>D&&D.toLowerCase().replace(/\s+/g,"-");Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/mixins/ImageryTileMixin":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../rasterRenderers ../../request ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../geometry/support/spatialReferenceUtils ../support/arcgisLayerUrl ../support/commonProperties ../support/DimensionalDefinition ../support/RasterJobHandler ../support/TileInfo ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../views/2d/engine/flow/dataUtils ../../geometry/Extent ../../geometry/SpatialReference".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B,F,E,v,k,m,n){const e=V.getLogger("esri.layers.mixins.ImageryTileMixin");U.ImageryTileMixin=f=>{f=function(p){function d(){var a=p.apply(this,arguments)||this;a._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};a.bandIds=null;a.copyright=null;a.fullExtent=null;a.interpolation="nearest";a.multidimensionalDefinition=null;a.raster=null;a.rasterInfo=null;a.sourceJSON=null;a.spatialReference=null;a.tileInfo=null;a.symbolizer=null;return a}
R._inheritsLoose(d,p);var b=d.prototype;b.convertVectorFieldData=function(){var a=R._asyncToGenerator(function*(c,l){if(N.isNone(c))return null;const h=this._rasterJobHandler.instance,g=this.rasterInfo.dataType;return h?h.convertVectorFieldData({pixelBlock:c,dataType:g},l):F.convertVectorFieldData(c,g)});return function(c,l){return a.apply(this,arguments)}}();b.createStreamlinesMesh=function(){var a=R._asyncToGenerator(function*(c,l){const h=this._rasterJobHandler.instance;return h?h.createStreamlinesMesh(c,
l):k.createStreamlinesMesh(c.rendererSettings,c.flowData,N.isSome(l.signal)?l.signal:(new AbortController).signal)});return function(c,l){return a.apply(this,arguments)}}();b.normalizeRasterFetchOptions=function(a){var {multidimensionalInfo:c}=this.rasterInfo;if(N.isNone(c))return a;let l=a.multidimensionalDefinition||this.multidimensionalDefinition;if(N.isNone(l)||!l.length)l=this._getDefaultSlice();var h=a.timeExtent||this.timeExtent;if(N.isSome(l)&&N.isSome(h)&&(N.isSome(h.start)||N.isSome(h.end))){var g,
q;l=l.map(S=>S.clone());c=null==(g=c.variables.find(({name:S})=>S===l[0].variableName))?void 0:null==(q=g.dimensions)?void 0:q.find(({name:S})=>"StdTime"===S);g=l.find(({dimensionName:S})=>"StdTime"===S);if(!c||!g)return{...a,multidimensionalDefinition:null};const {start:A,end:J}=h;h=N.isNone(A)?null:A.getTime();q=N.isNone(J)?null:J.getTime();const G=null!=h?h:q,Q=null!=q?q:h;if(N.isSome(c.values))c=c.values.filter(S=>{if(Array.isArray(S)){if(G===Q)return S[0]<=G&&S[1]>=G;const W=S[0]>=G&&S[1]<=Q||
S[0]<G&&S[1]>Q;return S[0]<=G&&S[1]>G||S[0]<Q&&S[1]>=Q||W}return G===Q?S===G:S>=G&&S<=Q}),c.length?(c=c.sort((S,W)=>{var X,M;if(G===Q){var K,Y;return(null!=(K=S[0])?K:S)-(null!=(Y=W[0])?Y:W)}S=Math.abs((null!=(X=S[1])?X:S)-Q);W=Math.abs((null!=(M=W[1])?M:W)-Q);return S-W})[0],g.values=[c]):l=null;else if(c.hasRegularIntervals&&c.extent){const [S,W]=c.extent;G>W||Q<S?l=null:g.values=G===Q?[G]:[Math.max(S,G),Math.min(W,Q)]}}return{...a,multidimensionalDefinition:l}};b.updateRenderer=function(){var a=
R._asyncToGenerator(function*(){if(this.loaded&&JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer)){var c=this._rasterJobHandler.instance;c&&(this.symbolizer.rendererJSON=E.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.bind(),yield c.updateSymbolizer(this.symbolizer),this._cachedRendererJson=this.renderer.toJSON())}});return function(){return a.apply(this,arguments)}}();b.applyRenderer=function(){var a=R._asyncToGenerator(function*(c,l){var h=c&&c.pixelBlock;
if(!(N.isSome(h)&&h.pixels&&0<h.pixels.length))return null;yield this.updateRenderer();h=this._rasterJobHandler.instance;const {bandIds:g}=this;return h?yield h.symbolize({...c,simpleStretchParams:l,bandIds:g}):this.symbolizer.symbolize({...c,simpleStretchParams:l,bandIds:g})});return function(c,l){return a.apply(this,arguments)}}();b.getTileUrl=function(a,c,l){return"RasterTileServer"===this.raster.datasetFormat?`${this.url}/tile/${a}/${c}/${l}`:""};b.getCompatibleTileInfo=function(a,c,l=!1){if(!this.loaded||
N.isNone(c))return null;if(l&&a.equals(this.spatialReference))return this.tileInfo;l=C.getInfo(a);return B.create({size:256,spatialReference:a,origin:l?{x:l.origin[0],y:l.origin[1]}:{x:c.xmin,y:c.ymax}})};b.getCompatibleFullExtent=function(a){return this.loaded?this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(a)?this._compatibleFullExtent:this._compatibleFullExtent=this.raster.computeExtent(a):null};b.fetchTile=function(){var a=R._asyncToGenerator(function*(c,l,h,g={}){if(g.requestAsImageElement)return c=
this.getTileUrl(c,l,h),T(c,{responseType:"image",query:{...this.refreshParameters,...this.raster.ioConfig.customFetchParameters},signal:g.signal}).then(q=>q.data);if(N.isSome(this.rasterInfo.multidimensionalInfo)&&(g=this.normalizeRasterFetchOptions(g),N.isNone(g.multidimensionalDefinition)))return{extent:this.raster.getTileExtentFromTileInfo(c,l,h,g.tileInfo||this.rasterInfo.storageInfo.tileInfo),pixelBlock:null};yield this._initJobHandler();"raster-shaded-relief"===this.renderer.type&&(g={...g,
buffer:{cols:1,rows:1}});return this.raster.fetchTile(c,l,h,g)});return function(c,l,h){return a.apply(this,arguments)}}();b.fetchPixels=function(){var a=R._asyncToGenerator(function*(c,l,h,g={}){if(N.isSome(this.rasterInfo.multidimensionalInfo)&&(g=this.normalizeRasterFetchOptions(g),N.isNone(g.multidimensionalDefinition)))return{extent:c,pixelBlock:null};yield this._initJobHandler();return this.raster.fetchPixels(c,l,h,g)});return function(c,l,h){return a.apply(this,arguments)}}();b.identify=function(){var a=
R._asyncToGenerator(function*(c,l={}){return N.isSome(this.rasterInfo.multidimensionalInfo)&&(l=this.normalizeRasterFetchOptions(l),N.isNone(l.multidimensionalDefinition))?{location:c,value:null}:this.raster.identify(c,l)});return function(c){return a.apply(this,arguments)}}();b.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};b.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};b.hasStandardTime=
function(){var a;const c=this.rasterInfo.multidimensionalInfo;if(!N.isSome(c)||"standard-time"!==this.rasterInfo.dataType)return!1;const l=null==(a=this.multidimensionalDefinition[0])?void 0:a.variableName;return c.variables.some(h=>h.name===l&&h.dimensions.some(g=>"StdTime"===g.name))};b.getStandardTimeValue=function(a){return(new Date(864E5*(a-25569))).toString()};b._configDefaultSettings=function(){this._configDefaultInterpolation();this.multidimensionalDefinition||(this.multidimensionalDefinition=
this._getDefaultSlice());this._configDefaultRenderer()};b._initJobHandler=function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const a=new O;this._rasterJobHandler.connectionPromise=a.initialize().then(()=>{this._rasterJobHandler.instance=a;this.raster.rasterJobHandler=a;this.renderer&&this.updateRenderer()}).catch(()=>null);return this._rasterJobHandler.connectionPromise};b._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();
this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this.raster.rasterJobHandler=null};b._configDefaultInterpolation=function(){if(null==this.interpolation){var a;const c=E.getDefaultInterpolation(this.rasterInfo,this.raster.tileType,null==(a=this.sourceJSON)?void 0:a.defaultResamplingMethod);this._set("interpolation",c)}};b._getDefaultSlice=function(){const {multidimensionalInfo:a}=this.raster.rasterInfo;if(!N.isSome(a))return null;
const c=a.variables[0];return c.dimensions.map(l=>{var h,g;return new y({variableName:c.name,dimensionName:l.name,values:[null!=(h=null==(g=l.values)?void 0:g[0])?h:l.extent[0]],isSlice:!0})})};b._configDefaultRenderer=function(){var a=this.raster.rasterInfo;this.bandIds||(this.bandIds=E.getDefaultBandCombination(a));if(!this.renderer){var c;this.renderer=E.createDefaultRenderer(a,{bandIds:this.bandIds,variableName:N.isSome(this.multidimensionalDefinition)?null==(c=this.multidimensionalDefinition[0])?
void 0:c.variableName:null})}this.symbolizer?(this.symbolizer.rendererJSON=E.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.rasterInfo=a):this.symbolizer=new v({rendererJSON:this.renderer.toJSON(),rasterInfo:a});a=this.symbolizer.bind();a.success||e.warn("imagery-tile-mixin",a.error||"The given renderer is not supported by the layer.")};R._createClass(d,[{key:"url",set:function(a){this._set("url",u.sanitizeUrl(a,e))}},{key:"renderer",set:function(a){this._set("renderer",a);this.updateRenderer()}}]);
return d}(f);D.__decorate([w.property()],f.prototype,"_cachedRendererJson",void 0);D.__decorate([w.property()],f.prototype,"_compatibleFullExtent",void 0);D.__decorate([w.property()],f.prototype,"_rasterJobHandler",void 0);D.__decorate([w.property()],f.prototype,"bandIds",void 0);D.__decorate([w.property()],f.prototype,"copyright",void 0);D.__decorate([w.property({type:m}),L.aliasOf("rasterInfo.extent")],f.prototype,"fullExtent",void 0);D.__decorate([w.property()],f.prototype,"interpolation",void 0);
D.__decorate([w.property()],f.prototype,"ioConfig",void 0);D.__decorate([w.property({type:[y]})],f.prototype,"multidimensionalDefinition",void 0);D.__decorate([w.property()],f.prototype,"raster",void 0);D.__decorate([w.property({readOnly:!0}),L.aliasOf("raster.rasterInfo")],f.prototype,"rasterInfo",void 0);D.__decorate([w.property()],f.prototype,"sourceJSON",void 0);D.__decorate([w.property({type:n}),L.aliasOf("rasterInfo.spatialReference")],f.prototype,"spatialReference",void 0);D.__decorate([w.property({type:B}),
L.aliasOf("rasterInfo.storageInfo.tileInfo")],f.prototype,"tileInfo",void 0);D.__decorate([w.property(r.url)],f.prototype,"url",null);D.__decorate([w.property({types:z.rasterRendererTypes})],f.prototype,"renderer",null);D.__decorate([w.property()],f.prototype,"symbolizer",void 0);return f=D.__decorate([H.subclass("esri.layers.ImageryTileMixin")],f)};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(U,R,D,P,z,T,V){var N;D=N=function(L){function I(x){x=L.call(this,x)||this;x.variableName=null;x.dimensionName=null;x.values=[];x.isSlice=!1;return x}U._inheritsLoose(I,L);I.prototype.clone=function(){return new N({variableName:this.variableName,dimensionName:this.dimensionName,values:P.clone(this.values),isSlice:this.isSlice})};return I}(D.JSONSupport);R.__decorate([z.property({type:String,json:{write:!0}})],D.prototype,"variableName",void 0);R.__decorate([z.property({type:String,json:{write:!0}})],
D.prototype,"dimensionName",void 0);R.__decorate([z.property({type:T.types.array(T.types.oneOf([T.types.native(Number),T.types.array(T.types.native(Number))])),json:{write:!0}})],D.prototype,"values",void 0);R.__decorate([z.property({type:Boolean,json:{write:!0}})],D.prototype,"isSlice",void 0);return D=N=R.__decorate([V.subclass("esri.layers.support.DimensionalDefinition")],D)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error",
"../../core/maybe","../../core/workers/workers","./PixelBlock"],function(U,R,D,P,z){return function(){function T(){this._workerThread=null;this._destroyed=!1}var V=T.prototype;V.initialize=function(){var N=U._asyncToGenerator(function*(){const L=yield P.open("RasterWorker");this._destroyed?L.close():this._workerThread=L});return function(){return N.apply(this,arguments)}}();V.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};V.convertVectorFieldData=
function(){var N=U._asyncToGenerator(function*(L,I){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");return(L=yield this._workerThread.invoke("convertVectorFieldData",{pixelBlock:L.pixelBlock.toJSON(),type:L.dataType},I))?new z(L):null});return function(L,I){return N.apply(this,arguments)}}();V.decode=function(){var N=U._asyncToGenerator(function*(L,I){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");
return(L=yield this._workerThread.invoke("decode",L,I))?new z(L):null});return function(L,I){return N.apply(this,arguments)}}();V.symbolize=function(){var N=U._asyncToGenerator(function*(L,I){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");L={extent:L.extent&&L.extent.toJSON(),pixelBlock:D.isSome(L.pixelBlock)&&L.pixelBlock.toJSON(),simpleStretchParams:L.simpleStretchParams,bandIds:L.bandIds};return(I=yield this._workerThread.invoke("symbolize",
L,I))?new z(I):null});return function(L,I){return N.apply(this,arguments)}}();V.updateSymbolizer=function(){var N=U._asyncToGenerator(function*(L,I){var x;if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");const t=null==L?void 0:null==(x=L.rendererJSON)?void 0:x.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:L.toJSON(),histograms:t},I))});return function(L,I){return N.apply(this,arguments)}}();V.stretch=
function(){var N=U._asyncToGenerator(function*(L,I){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");if(null==L||!L.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON(),stretchParams:L.stretchParams};return(I=yield this._workerThread.invoke("stretch",L,I))?new z(I):null});return function(L,I){return N.apply(this,arguments)}}();V.split=function(){var N=U._asyncToGenerator(function*(L,I){if(!this._workerThread)throw new R("raster-jobhandler:no-connection",
"no available worker connection");if(null==L||!L.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON(),tileSize:L.tileSize,maximumPyramidLevel:L.maximumPyramidLevel};const x=yield this._workerThread.invoke("split",L,I);x&&x.forEach((t,w)=>{x.set(w,t?z.fromJSON(t):null)});return Promise.resolve(x)});return function(L,I){return N.apply(this,arguments)}}();V.estimateStatisticsHistograms=function(){var N=U._asyncToGenerator(function*(L,I){if(!this._workerThread)throw new R("raster-jobhandler:no-connection",
"no available worker connection");if(null==L||!L.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON()};I=yield this._workerThread.invoke("estimateStatisticsHistograms",L,I);return Promise.resolve(I)});return function(L,I){return N.apply(this,arguments)}}();V.mosaicAndTransform=function(){var N=U._asyncToGenerator(function*(L,I){var x;if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");if(null==L||null==(x=L.srcPixelBlocks)||!x.length)return null;
L={...L,srcPixelBlocks:L.srcPixelBlocks.map(t=>D.isSome(t)?t.toJSON():null)};return(I=yield this._workerThread.invoke("mosaicAndTransform",L,I))?new z(I):null});return function(L,I){return N.apply(this,arguments)}}();V.createStreamlinesMesh=function(){var N=U._asyncToGenerator(function*(L,I){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");const x={buffer:L.flowData.data.buffer,width:L.flowData.width,height:L.flowData.height};L=yield this._workerThread.invoke("createStreamlinesMesh",
{flowData:x,rendererSettings:L.rendererSettings},{...I,transferList:[x.buffer]});return{vertexData:new Float32Array(L.vertexBuffer),indexData:new Uint32Array(L.indexBuffer)}});return function(L,I){return N.apply(this,arguments)}}();V.getProjectionOffsetGrid=function(N,L){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");const I=D.isSome(N.datumTransformation)?N.datumTransformation.steps.map(t=>({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse})):null,
x=D.isSome(N.rasterTransform)?N.rasterTransform.toJSON():null;N={projectedExtent:N.projectedExtent.toJSON(),srcBufferExtent:N.srcBufferExtent.toJSON(),pixelSize:N.pixelSize,hasWrapAround:N.hasWrapAround,spacing:N.spacing,datumTransformationSteps:I,rasterTransform:x,isAdaptive:N.isAdaptive};return this._workerThread.invoke("getProjectionOffsetGrid",N,L)};return T}()})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O){var B;D=new D.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});P=B=function(F){function E(k){k=F.call(this,k)||this;k.dpi=96;k.format=null;k.origin=null;k.minScale=0;k.maxScale=0;k.size=null;k.spatialReference=null;return k}U._inheritsLoose(E,F);E.create=function(k=
{}){const {resolutionFactor:m=1,scales:n,size:e=256,spatialReference:f=C.WebMercator,numLODs:p=24}=k;if(!r.isValid(f)){k=[];if(n)for(var d=0;d<n.length;d++){var b=n[d];k.push({level:d,scale:b,resolution:b})}else for(d=5E-4,b=p-1;0<=b;b--)k.unshift({level:b,scale:d,resolution:d}),d*=2;return new B({dpi:96,lods:k,origin:new H(0,0,f),size:[e,e],spatialReference:f})}d=r.getInfo(f);k=k.origin?new H({x:k.origin.x,y:k.origin.y,spatialReference:f}):d?new H({x:d.origin[0],y:d.origin[1],spatialReference:f}):
new H({x:0,y:0,spatialReference:f});d=1/(39.37*T.getMetersPerUnitForSR(f)*96);b=[];if(n)for(var a=0;a<n.length;a++){var c=n[a];b.push({level:a,scale:c,resolution:c*d})}else{var l=r.isGeographic(f)?512/e*5.916575275917094E8:256/e*5.91657527591555E8;a=Math.ceil(p/m);b.push({level:0,scale:l,resolution:l*d});for(c=1;c<a;c++)l/=2**m,b.push({level:c,scale:l,resolution:l*d})}return new B({dpi:96,lods:b,origin:k,size:[e,e],spatialReference:f})};var v=E.prototype;v.readOrigin=function(k,m){return H.fromJSON({spatialReference:m.spatialReference,
...k})};v.readSize=function(k,m){return[m.cols,m.rows]};v.writeSize=function(k,m){m.cols=k[0];m.rows=k[1]};v.zoomToScale=function(k){const m=this.scales;if(0>=k)return m[0];if(k>=m.length-1)return m[m.length-1];{const n=Math.floor(k);return m[n]/(m[n]/m[n+1])**(k-n)}};v.scaleToZoom=function(k){const m=this.scales,n=m.length-1;let e=0;for(;e<n;e++){const f=m[e],p=m[e+1];if(f<=k)break;if(p===k)return e+1;if(f>k&&p<k)return e+Math.log(f/k)/Math.log(f/p)}return e};v.snapScale=function(k,m=.95){k=this.scaleToZoom(k);
return k%Math.floor(k)>=m?this.zoomToScale(Math.ceil(k)):this.zoomToScale(Math.floor(k))};v.tileAt=function(k,m,n,e){var f=this.lodAt(k);if(!f)return null;let p;if("number"===typeof m)p=m,m=n;else{if(r.equals(m.spatialReference,this.spatialReference))p=m.x,m=m.y;else{e=y.project(m,this.spatialReference);if(z.isNone(e))return null;p=e.x;m=e.y}e=n}n=f.resolution*this.size[0];f=f.resolution*this.size[1];e||(e={id:null,level:0,row:0,col:0,extent:u.create()});e.level=k;e.row=Math.floor((this.origin.y-
m)/f+.001);e.col=Math.floor((p-this.origin.x)/n+.001);this.updateTileInfo(e);return e};v.updateTileInfo=function(k,m=0){var n=this.lodAt(k.level);n||1!==m||(m=this.lods[this.lods.length-1],m.level<k.level&&(n=m));if(n){var e=k.level-n.level;m=n.resolution*this.size[0]/2**e;n=n.resolution*this.size[1]/2**e;k.id=`${k.level}/${k.row}/${k.col}`;k.extent||(k.extent=u.create());k.extent[0]=this.origin.x+k.col*m;k.extent[1]=this.origin.y-(k.row+1)*n;k.extent[2]=k.extent[0]+m;k.extent[3]=k.extent[1]+n}};
v.upsampleTile=function(k){const m=this._upsampleLevels[k.level];if(!m||-1===m.parentLevel)return!1;k.level=m.parentLevel;k.row=Math.floor(k.row/m.factor+.001);k.col=Math.floor(k.col/m.factor+.001);this.updateTileInfo(k);return!0};v.getTileBounds=function(k,m){var {resolution:n}=this.lodAt(m.level);const e=n*this.size[0];n*=this.size[1];k[0]=this.origin.x+m.col*e;k[1]=this.origin.y-(m.row+1)*n;k[2]=k[0]+e;k[3]=k[1]+n;return k};v.lodAt=function(k){return this._levelToLOD&&this._levelToLOD[k]||null};
v.clone=function(){return B.fromJSON(this.write({}))};v._initializeUpsampleLevels=function(){const k=this.lods;this._upsampleLevels=[];let m=null;for(let n=0;n<k.length;n++){const e=k[n];this._upsampleLevels[e.level]={parentLevel:m?m.level:-1,factor:m?m.resolution/e.resolution:0};m=e}};U._createClass(E,[{key:"isWrappable",get:function(){const {spatialReference:k,origin:m}=this;if(k&&m){const n=r.getInfo(k);return k.isWrappable&&Math.abs(n.origin[0]-m.x)<=n.dx}return!1}},{key:"lods",set:function(k){let m=
0,n=0;const e=[];this._levelToLOD={};k&&(m=-Infinity,n=Infinity,k.forEach(f=>{e.push(f.scale);m=f.scale>m?f.scale:m;n=f.scale<n?f.scale:n;this._levelToLOD[f.level]=f}));this._set("scales",e);this._set("minScale",m);this._set("maxScale",n);this._set("lods",k);this._initializeUpsampleLevels()}}]);return E}(P.JSONSupport);R.__decorate([V.property({type:Number,json:{write:!0}})],P.prototype,"compressionQuality",void 0);R.__decorate([V.property({type:Number,json:{write:!0}})],P.prototype,"dpi",void 0);
R.__decorate([V.property({type:String,json:{read:D.read,write:D.write,origins:{"web-scene":{read:!1,write:!1}}}})],P.prototype,"format",void 0);R.__decorate([V.property({readOnly:!0})],P.prototype,"isWrappable",null);R.__decorate([V.property({type:H,json:{write:!0}})],P.prototype,"origin",void 0);R.__decorate([x.reader("origin")],P.prototype,"readOrigin",null);R.__decorate([V.property({type:[O],value:null,json:{write:!0}})],P.prototype,"lods",null);R.__decorate([V.property({readOnly:!0})],P.prototype,
"minScale",void 0);R.__decorate([V.property({readOnly:!0})],P.prototype,"maxScale",void 0);R.__decorate([V.property({readOnly:!0})],P.prototype,"scales",void 0);R.__decorate([V.property({cast:F=>Array.isArray(F)?F:"number"===typeof F?[F,F]:[256,256]})],P.prototype,"size",void 0);R.__decorate([x.reader("size",["rows","cols"])],P.prototype,"readSize",null);R.__decorate([w.writer("size",{cols:{type:I.Integer},rows:{type:I.Integer}})],P.prototype,"writeSize",null);R.__decorate([V.property({type:C,json:{write:!0}})],
P.prototype,"spatialReference",void 0);return P=B=R.__decorate([t.subclass("esri.layers.support.TileInfo")],P)})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(U,R,D,P,z,T,V,N){var L;D=L=function(I){function x(t){t=I.call(this,
t)||this;t.cols=null;t.level=0;t.levelValue=null;t.origin=null;t.resolution=0;t.rows=null;t.scale=0;return t}U._inheritsLoose(x,I);x.prototype.clone=function(){return new L({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return x}(D.JSONSupport);R.__decorate([P.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],D.prototype,"cols",void 0);R.__decorate([P.property({type:V.Integer,
json:{write:!0}})],D.prototype,"level",void 0);R.__decorate([P.property({type:String,json:{write:!0}})],D.prototype,"levelValue",void 0);R.__decorate([P.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],D.prototype,"origin",void 0);R.__decorate([P.property({type:Number,json:{write:!0}})],D.prototype,"resolution",void 0);R.__decorate([P.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],D.prototype,
"rows",void 0);R.__decorate([P.property({type:Number,json:{write:!0}})],D.prototype,"scale",void 0);return D=L=R.__decorate([N.subclass("esri.layers.support.LOD")],D)})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/AlgorithmicColorRamp ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B,F){function E(M,K){var Y,Z,aa,ba;M=v(M,null==K?void 0:K.variableName);const {bandCount:da}=M;let {bandIds:fa,stretchType:ja}=K||{};null!=(Y=fa)&&Y.some(ia=>ia>=da)&&(fa=null);let ha=P.unwrap(M.statistics),ea=P.unwrap(M.histograms);if(1<da){var ka;fa=null!=(ka=fa)&&ka.length?fa:k(M);ha=null==ha?null:fa.map(ia=>ha[ia]);ea=null==ea?null:fa.map(ia=>ea[ia])}else fa=[0];null==ja&&(ja=n(M));Y=!1;switch(ja){case "none":Y=!1;break;case "percent-clip":Y=!(null!=
(Z=ea)&&Z.length);break;default:Y=!(null!=(aa=ha)&&aa.length)}({dataType:Z}=M);Z=1===(null==(ba=fa)?void 0:ba.length)&&W.has(Z)?Q:null;ba=new u({stretchType:ja,dynamicRangeAdjustment:Y,colorRamp:Z,outputMin:0,outputMax:255,gamma:1===fa.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===ja?ba.maxPercent=ba.minPercent=.25:"standard-deviation"===ja&&(ba.numberOfStandardDeviations=2);if(!Y&&(P.isSome(M.multidimensionalInfo)||null!=K&&K.includeStatisticsInStretch))if("percent-clip"===ja)ba.histograms=ea;
else if("min-max"===ja||"standard-deviation"===ja)ba.statistics=ha;return ba}function v(M,K){if(null==K)return M;let Y=P.unwrap(M.statistics),Z=P.unwrap(M.histograms);const {multidimensionalInfo:aa}=M;if(K&&P.isSome(aa)){const {statistics:ba,histograms:da}=aa.variables.find(fa=>fa.name===K);null!=ba&&ba.length&&(Y=ba);null!=da&&da.length&&(Z=da)}return V.fromJSON({...M.toJSON(),statistics:Y,histograms:Z})}function k(M){const K=M.bandCount;if(1===K)return null;if(2===K)return[0];M=M.keyProperties&&
M.keyProperties.BandProperties;let Y;if(M&&M.length===K){const {red:Z,green:aa,blue:ba,nir:da}=m(M);null!=Z&&null!=aa&&null!=ba?Y=[Z,aa,ba]:null!=da&&null!=Z&&null!=aa&&(Y=[da,Z,aa])}!Y&&3<=K&&(Y=[0,1,2]);return Y}function m(M){const K={};for(let ba=0;ba<M.length;ba++){var Y,Z=M[ba],aa=null==(Y=Z.BandName)?void 0:Y.toLowerCase();"red"===aa?K.red=ba:"green"===aa?K.green=ba:"blue"===aa?K.blue=ba:"nearinfrared"===aa||"nearinfrared_1"===aa||"nir"===aa?K.nir=ba:Z.WavelengthMax&&Z.WavelengthMin&&(aa=Z.WavelengthMin,
Z=Z.WavelengthMax,null==K.blue&&410<=aa&&480>=aa&&480<=Z&&540>=Z?K.blue=ba:null==K.green&&490<=aa&&560>=aa&&560<=Z&&610>=Z?K.green=ba:null==K.red&&595<=aa&&670>=aa&&660<=Z&&730>=Z?K.red=ba:null==K.nir&&700<=aa&&860>=aa&&800<=Z&&950>=Z&&(K.nir=ba))}return K}function n(M){let K="percent-clip";const {pixelType:Y,dataType:Z,histograms:aa,statistics:ba}=M;"u8"!==Y||"processed"!==Z&&P.isSome(aa)&&P.isSome(ba)?"u8"===Y||"elevation"===Z||W.has(Z)?K="min-max":P.isSome(aa)?K="percent-clip":P.isSome(ba)&&(K=
K="min-max"):K="none";return K}function e(M,K,Y,Z){if(!b(M,K))return null;const {attributeTable:aa,statistics:ba}=M,da=f(aa,K),fa=d(aa,"red"),ja=d(aa,"green"),ha=d(aa,"blue");M=new N;const ea=[],ka=new Set,ia=!!(fa&&ja&&ha);if(P.isSome(aa))aa.features.forEach(ca=>{var na=ca.attributes[da.name];ka.has(ca.attributes[da.name])||null==na||(ka.add(na),na=!ia||"single"!==fa.type&&"double"!==fa.type||"single"!==ja.type&&"double"!==ja.type||"single"!==ha.type&&"double"!==ha.type||aa.features.some(ma=>1<ma.attributes[fa.name]||
1<ma.attributes[ja.name]||1<ma.attributes[ha.name])?1:255,ea.push(new x({value:ca.attributes[da.name],label:ca.attributes[da.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:ia?new R([ca.attributes[fa.name]*na,ca.attributes[ja.name]*na,ca.attributes[ha.name]*na,1]):new R([0,0,0,0])}})))});else if(null!=ba&&ba[0])for(K=ba[0].min;K<=ba[0].max;K++)ea.push(new x({value:K,label:K.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new R([0,0,0,0])}}));ea.sort((ca,
na)=>ca.value&&"string"===typeof ca.value.valueOf()?0:ca.value>na.value?1:-1);if(!ia){const ca=I.convertColorRampToColormap(S,ea.length);ea.forEach((na,ma)=>na.symbol.color=new R(ca[ma].slice(1,4)));M.colorRamp=S}if(Y||Z){const ca=Y||I.convertColorRampToColormap(Z,ea.length).map(na=>na.slice(1));ea.forEach((na,ma)=>na.symbol.color=new R(ca[ma]));M.colorRamp=Z}return new r({field:da.name,uniqueValueInfos:ea,authoringInfo:M})}function f(M,K,Y){let Z;P.isSome(M)?(Z=K?M.fields.find(aa=>K.toLowerCase()===
aa.name.toLowerCase()):p(M.fields),Z||(Y||(Z=M.fields.find(aa=>"string"===aa.type)),Z||(Z=d(M,"value")))):Z=new T({name:"value"});return Z}function p(M){let K;for(let Y=0;Y<M.length;Y++){const Z=M[Y].name.toLowerCase();if("string"===M[Y].type){if(Z.startsWith("class")){K=M[Y];break}null==K&&(Z.endsWith("name")||Z.endsWith("type"))&&(K=M[Y])}}return K}function d(M,K){return P.isSome(M)?M.fields.find(Y=>Y.name.toLowerCase()===K):null}function b(M,K){const {attributeTable:Y,bandCount:Z}=M;return!P.isSome(Y)&&
g(M)?!0:!P.isSome(Y)||1<Z||K&&null==Y.fields.find(aa=>aa.name.toLowerCase()===K.toLowerCase())?!1:!0}function a(M){const {bandCount:K,colormap:Y}=M;return P.isSome(Y)&&Y.length&&1===K}function c(M){if(!a(M))return null;let K;const {attributeTable:Y,colormap:Z}=M;if(P.isSome(Y)){const aa=d(Y,"value"),ba=f(Y,null,!0);"string"===ba.type&&(K={},Y.features.forEach(da=>{da=da.attributes;K[da[aa.name]]=ba?da[ba.name]:da[aa.name]}))}return y.createFromColormap(P.unwrap(Z),K)}function l(M){return"elevation"===
M.dataType}function h(M){const {attributeTable:K,bandCount:Y}=M;return 1===Y&&(P.isSome(K)||P.isSome(M.histograms))}function g(M){var K,Y,Z;return-1<["u8","s8"].indexOf(M.pixelType)&&null!=(null==(K=M.statistics)?void 0:null==(Y=K[0])?void 0:Y.min)&&null!=(null==(Z=M.statistics[0])?void 0:Z.max)&&1===M.bandCount}function q(M){({dataType:M}=M);return"vector-uv"===M||"vector-magdir"===M}function A(M){({dataType:M}=M);return"vector-uv"===M||"vector-magdir"===M}function J(M){if(!q(M))return null;if(P.isSome(M.statistics)&&
M.statistics.length){var K="vector-uv"===M.dataType;const {min:Y,max:Z}=M.statistics[0];K=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:K?Math.min(Math.abs(Y),Math.abs(Z)):Y,maxDataValue:K?Math.max(Math.abs(Y),Math.abs(Z)):Z}]}M=P.isSome(M.multidimensionalInfo)?X.get(M.multidimensionalInfo.variables[0].unit):null;M=new F({visualVariables:K,inputUnit:M,rotationType:"geographic"});M.visualVariables=[...M.sizeVariables,...M.rotationVariables];return M}function G(M){var K;return{color:null==
(K=M.symbolLayers[0].material)?void 0:K.color,type:"esriSFS",style:"esriSFSSolid"}}const Q=C.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),S=C.fromJSON(I.PREDEFINED_JSON_COLOR_RAMPS[0]),W=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),X=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],
["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);U.createClassBreaksRenderer=function(M,K){M=v(M,null==K?void 0:K.variableName);const {attributeTable:Y}=M;if(!h(M))return null;const Z=P.isSome(M.histograms)?M.histograms[0]:null;var aa=(null==K?void 0:K.numClasses)||5;const ba=new N({classificationMethod:null==K?void 0:K.classificationMethod,colorRamp:null==K?void 0:K.colorRamp});let da=(null==K?void 0:K.field)||"value";const fa=[],ja=[],ha=P.isSome(Y),ea=ha&&Y.fields.find(ca=>
"count"===ca.name.toLowerCase()),ka=ha&&Y.fields.find(ca=>ca.name.toLowerCase()===da.toLowerCase());if(ka&&ea){da=ka.name;const ca=Y.features.length;let na=0;Y.features.forEach(ma=>na+=ma.attributes[ea.name]/ca);Y.features.forEach(ma=>{const ra=ma.attributes[ka.name];ma=ma.attributes[ea.name];if(0<ma){ja.push(ma);ma=Math.max(1,Math.round(ma/ca/na*1E3));for(let qa=0;qa<ma;qa++)fa.push(ra)}})}else{({pixelType:M}=M);const ca=(Z.max-Z.min)/Z.size,na=(M=-1<M.indexOf("s")||-1<M.indexOf("u"))&&1===ca?Math.floor(Z.min+
.5):Z.min,ma=M&&1===ca?Math.floor(Z.max-.5):Z.max,ra=Z.size;let qa=0;Z.counts.forEach(pa=>qa+=pa/ra);Z.counts.forEach((pa,oa)=>{if(0<pa){ja.push(pa);pa=Math.max(1,Math.round(pa/ra/qa*1E3));oa=0===oa?na:oa===ra-1?ma:Z.min+ca*(oa+.5);for(let la=0;la<pa;la++)fa.push(oa)}})}aa=H.createGenerateRendererClassBreaks({values:fa,valueFrequency:ja,normalizationTotal:null,definition:new w({classificationMethod:(null==K?void 0:K.classificationMethod)||"natural-breaks",breakCount:aa,definedInterval:null==K?void 0:
K.definedInterval})});let ia=null==K?void 0:K.colors;ia||(K=(null==K?void 0:K.colorRamp)||Q,ba.colorRamp=K,ia=I.convertColorRampToColormap(K,aa.classBreaks.length,!0).map(ca=>ca.slice(1)));K=aa.classBreaks.map((ca,na)=>new L({minValue:ca.minValue,maxValue:ca.maxValue,label:ca.label,symbol:{type:"simple-fill",color:ia[na]}}));return new B({field:da,classBreakInfos:K,authoringInfo:ba})};U.createColorRamp=function(M){const K=[];for(let Y=0;Y<M.length-1;Y++)K[Y]=new t({algorithm:"hsv",fromColor:M[Y],
toColor:M[Y+1]||new R({r:255,g:255,b:255,a:1})});return 2<M.length?new C({colorRamps:K}):K[0]};U.createColormapRenderer=c;U.createDefaultRenderer=function(M,K){const {attributeTable:Y,colormap:Z}=M;if(q(M)){var aa=J(M);if(P.isSome(aa))return aa}return P.isSome(Z)&&(aa=c(M),P.isSome(aa))||P.isSome(Y)&&(aa=e(M),P.isSome(aa))?aa:E(M,K)};U.createShadedReliefRenderer=function(M,K){var Y;if(!l(M))return null;({extent:M}=M);M=M.width*z.getMetersPerUnitForSR(M.spatialReference);K=null!=(Y=K)?Y:"multi-directional";
return new O({hillshadeType:K,scalingType:5E6<M?"adjusted":"none"})};U.createStretchRenderer=E;U.createUVRenderer=e;U.createVectorFieldRenderer=J;U.getBandNames=function(M,K){var Y;const Z=M.keyProperties&&M.keyProperties.BandProperties;K=null!=(Y=K)&&Y.length?K:Array.from(Array(M.bandCount).keys());return K.map(aa=>Z&&Z.length===M.bandCount?Z[aa]&&Z[aa].BandName||"band_"+(aa+1):"band_"+(aa+1))};U.getClassField=f;U.getDefaultBandCombination=k;U.getDefaultInterpolation=function(M,K,Y){const Z=["nearest",
"bilinear","cubic","majority"].find(aa=>aa===(null==Y?void 0:Y.toLowerCase()));return"Map"===K?null!=Z?Z:"bilinear":"standard-time"===M.dataType?null!=Z?Z:"nearest":"thematic"===M.dataType||M.attributeTable||M.colormap?"nearest"===Z||"majority"===Z?Z:"nearest":null!=Z?Z:"bilinear"};U.getField=d;U.getSupportedRendererTypes=function(M){const K=["raster-stretch"];a(M)&&K.push("raster-colormap");b(M)&&K.push("unique-value");h(M)&&K.push("class-breaks");l(M)&&K.push("raster-shaded-relief");q(M)&&K.push("vector-field");
A(M)&&K.push("animated-flow");return K};U.getWellKnownBandIndexes=m;U.isAnimatedFlowRendererSupported=A;U.isClassBreaksSupported=h;U.isColormapRendererSupported=a;U.isShadedReliefRendererSupported=l;U.isSingleBand8BitRasterWithStats=g;U.isUVRendererSupported=b;U.isVectorFieldRendererSupported=q;U.normalizeRendererJSON=function(M){if("uniqueValue"===M.type){var K,Y=M.uniqueValueInfos,Z=Y[0].symbol;null!=Z&&null!=(K=Z.symbolLayers)&&K.length&&(M.uniqueValueInfos=Y.map(aa=>({value:aa.value,label:aa.label,
symbol:aa.symbol?G(aa.symbol):null})));return M}"classBreaks"===M.type&&(K=M.classBreakInfos,Z=K[0].symbol,null!=Z&&null!=(Y=Z.symbolLayers)&&Y.length&&(M.classBreakInfos=K.map(aa=>({classMinValue:aa.classMinValue,classMaxValue:aa.classMaxValue,label:aa.label,symbol:aa.symbol?G(aa.symbol):null}))));return M};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t){D=function(w){function H(C){C=w.call(this,C)||this;C.attributeTable=null;C.bandCount=null;C.colormap=null;C.extent=null;C.format=void 0;C.height=null;C.width=null;C.histograms=null;C.keyProperties={};C.multidimensionalInfo=null;C.noDataValue=null;C.pixelSize=null;C.pixelType=null;C.isPseudoSpatialReference=!1;C.spatialReference=null;C.statistics=null;C.storageInfo=null;C.transform=null;return C}U._inheritsLoose(H,w);U._createClass(H,[{key:"dataType",get:function(){var C,
u,r;const y=null!=(C=null==(u=this.keyProperties)?void 0:null==(r=u.DataType)?void 0:r.toLowerCase())?C:"generic";return"stdtime"===y?"standard-time":y}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(C){C&&this._set("nativeExtent",C)}},{key:"nativePixelSize",get:function(){if(!P.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const C=this.nativeExtent;return{x:C.width/this.width,y:C.height/this.height}}}]);return H}(D.JSONSupport);
R.__decorate([z.property({json:{write:!0}})],D.prototype,"attributeTable",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"bandCount",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"colormap",void 0);R.__decorate([z.property({type:String,readOnly:!0})],D.prototype,"dataType",null);R.__decorate([z.property({type:I,json:{write:!0}})],D.prototype,"extent",void 0);R.__decorate([z.property({type:I,json:{write:!0}})],D.prototype,"nativeExtent",null);R.__decorate([z.property({json:{write:!0}})],
D.prototype,"nativePixelSize",null);R.__decorate([z.property({json:{write:!0}})],D.prototype,"format",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"height",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"width",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"histograms",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"keyProperties",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"multidimensionalInfo",void 0);
R.__decorate([z.property()],D.prototype,"noDataValue",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"pixelSize",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"pixelType",void 0);R.__decorate([z.property()],D.prototype,"isPseudoSpatialReference",void 0);R.__decorate([z.property({type:x,json:{write:!0}})],D.prototype,"spatialReference",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"statistics",void 0);R.__decorate([z.property({type:t,json:{write:!0}})],
D.prototype,"storageInfo",void 0);R.__decorate([z.property({json:{write:!0}})],D.prototype,"transform",void 0);return D=R.__decorate([L.subclass("esri.layers.support.RasterInfo")],D)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(U,R,D,P,z,T,V,N,L){D=function(I){function x(){var t=I.apply(this,arguments)||this;t.blockWidth=void 0;t.blockHeight=void 0;t.compression=null;t.origin=null;t.firstPyramidLevel=null;t.maximumPyramidLevel=null;t.pyramidScalingFactor=2;t.pyramidBlockWidth=null;t.pyramidBlockHeight=null;t.isVirtualTileInfo=!1;t.tileInfo=null;t.blockBoundary=null;return t}U._inheritsLoose(x,I);return x}(D.JSONSupport);R.__decorate([P.property({type:Number,json:{write:!0}})],D.prototype,"blockWidth",void 0);R.__decorate([P.property({type:Number,
json:{write:!0}})],D.prototype,"blockHeight",void 0);R.__decorate([P.property({type:String,json:{write:!0}})],D.prototype,"compression",void 0);R.__decorate([P.property({type:L,json:{write:!0}})],D.prototype,"origin",void 0);R.__decorate([P.property({type:Number,json:{write:!0}})],D.prototype,"firstPyramidLevel",void 0);R.__decorate([P.property({type:Number,json:{write:!0}})],D.prototype,"maximumPyramidLevel",void 0);R.__decorate([P.property({json:{write:!0}})],D.prototype,"pyramidResolutions",void 0);
R.__decorate([P.property({type:Number,json:{write:!0}})],D.prototype,"pyramidScalingFactor",void 0);R.__decorate([P.property({type:Number,json:{write:!0}})],D.prototype,"pyramidBlockWidth",void 0);R.__decorate([P.property({type:Number,json:{write:!0}})],D.prototype,"pyramidBlockHeight",void 0);R.__decorate([P.property({type:Boolean,json:{write:!0}})],D.prototype,"isVirtualTileInfo",void 0);R.__decorate([P.property({json:{write:!0}})],D.prototype,"tileInfo",void 0);R.__decorate([P.property()],D.prototype,
"blockBoundary",void 0);return D=R.__decorate([N.subclass("esri.layers.support.RasterStorageInfo")],D)})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),function(U,R,D,P,z,T,V,N,L){z=new D.JSONMap({esriClassifyEqualInterval:"equal-interval",
esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});D=new D.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});L=function(I){function x(){var t=I.apply(this,arguments)||this;t.breakCount=null;t.classificationField=null;t.classificationMethod=null;t.normalizationField=null;t.normalizationType=
null;t.type="class-breaks-definition";return t}U._inheritsLoose(x,I);U._createClass(x,[{key:"standardDeviationInterval",set:function(t){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",t)}},{key:"definedInterval",set:function(t){"defined-interval"===this.classificationMethod&&this._set("definedInterval",t)}}]);return x}(L);R.__decorate([P.property({json:{write:!0}})],L.prototype,"breakCount",void 0);R.__decorate([P.property({json:{write:!0}})],L.prototype,"classificationField",
void 0);R.__decorate([P.property({type:String,json:{read:z.read,write:z.write}})],L.prototype,"classificationMethod",void 0);R.__decorate([P.property({json:{write:!0}})],L.prototype,"normalizationField",void 0);R.__decorate([P.property({json:{read:D.read,write:D.write}})],L.prototype,"normalizationType",void 0);R.__decorate([P.property({value:null,json:{write:!0}})],L.prototype,"standardDeviationInterval",null);R.__decorate([P.property({value:null,json:{write:!0}})],L.prototype,"definedInterval",
null);R.__decorate([P.property()],L.prototype,"type",void 0);return L=R.__decorate([N.subclass("esri.rest.support.ClassBreaksDefinition")],L)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x){D=new D.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});P=function(t){function w(){var H=t.apply(this,arguments)||this;H.baseSymbol=null;H.colorRamp=null;H.type=null;return H}U._inheritsLoose(w,t);return w}(P.JSONSupport);R.__decorate([z.property({type:x,json:{write:!0}})],P.prototype,"baseSymbol",void 0);R.__decorate([z.property({types:I.types,json:{read:{reader:I.fromJSON},write:!0}})],P.prototype,"colorRamp",void 0);R.__decorate([z.property({json:{read:D.read,
write:D.write}})],P.prototype,"type",void 0);return P=R.__decorate([L.subclass("esri.rest.support.ClassificationDefinition")],P)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(U){function R(x){const {classificationMethod:t,breakCount:w,normalizationType:H,definedInterval:C}=x.definition,u=[];var r=x.values;if(0===r.length)return[];r=r.sort((v,k)=>v-k);var y=r[0],O=r[r.length-1];if("equal-interval"===t)if(r.length>=w){r=(O-y)/w;x=y;for(var B=1;B<w;B++){var F=Number((y+
B*r).toFixed(6));u.push({minValue:x,maxValue:F,label:D(x,F,H)});x=F}u.push({minValue:x,maxValue:O,label:D(x,O,H)})}else r.forEach(v=>{u.push({minValue:v,maxValue:v,label:D(v,v,H)})});else if("natural-breaks"===t){r=P(r);x=z(r.uniqueValues,x.valueFrequency||r.valueFrequency,w);for(B=1;B<w;B++)r.uniqueValues.length>B&&(F=Number(r.uniqueValues[x[B]].toFixed(6)),u.push({minValue:y,maxValue:F,label:D(y,F,H)}),y=F);u.push({minValue:y,maxValue:O,label:D(y,O,H)})}else if("quantile"===t)if(r.length>=w&&y!==
O){x=Math.ceil(r.length/w);B=0;for(F=1;F<w;F++){var E=x+B-1;E>r.length&&(E=r.length-1);0>E&&(E=0);u.push({minValue:y,maxValue:r[E],label:D(y,r[E],H)});y=r[E];B+=x;x=Math.ceil((r.length-B)/(w-F))}u.push({minValue:y,maxValue:O,label:D(y,O,H)})}else for(O=-1,y=0;y<r.length;y++)x=r[y],x!==O&&(O=x,u.push({minValue:O,maxValue:x,label:D(O,x,H)}),O=x);else if("standard-deviation"===t)if(x=N(r),B=L(r,x),0===B)u.push({minValue:r[0],maxValue:r[0],label:D(r[0],r[0],H)});else{r=V(y,O,w,x,B)*B;B=0;for(F=w;1<=F;F--)E=
Number((x-(F-.5)*r).toFixed(6)),u.push({minValue:y,maxValue:E,label:D(y,E,H)}),y=E,B++;F=Number((x+.5*r).toFixed(6));u.push({minValue:y,maxValue:F,label:D(y,F,H)});y=F;B++;for(E=1;E<=w;E++)F=B===2*w?O:Number((x+(E+.5)*r).toFixed(6)),u.push({minValue:y,maxValue:F,label:D(y,F,H)}),y=F,B++}else if("defined-interval"===t){if(!C)return u;O=r[0];r=r[r.length-1];y=Math.ceil((r-O)/C);x=O;for(B=1;B<y;B++)F=Number((O+B*C).toFixed(6)),u.push({minValue:x,maxValue:F,label:D(x,F,H)}),x=F;u.push({minValue:x,maxValue:r,
label:D(x,r,H)})}return u}function D(x,t,w){let H=null;return H=x===t?w&&"percent-of-total"===w?x+"%":x.toString():w&&"percent-of-total"===w?x+"% - "+t+"%":x+" - "+t}function P(x){const t=[],w=[];let H=Number.MIN_VALUE,C=1,u=-1;for(let r=0;r<x.length;r++){const y=x[r];y===H?(C++,w[u]=C):null!==y&&(t.push(y),H=y,C=1,w.push(C),u++)}return{uniqueValues:t,valueFrequency:w}}function z(x,t,w){var H=x.length;const C=[];w>H&&(w=H);for(var u=0;u<w;u++)C.push(Math.round(u*H/w-1));C.push(H-1);u=T(C,x,t,w);{H=
u.mean;u=u.sdcm;var r=w,y=0,O=0;let F=0,E=0,v=!0;for(let k=0;2>k&&v;k++){0===k&&(v=!1);for(var B=0;B<r-1;B++)for(;C[B+1]+1!==C[B+2];)if(C[B+1]+=1,y=I(B,C,x,t),F=y.sbMean,y=y.sbSdcm,O=I(B+1,C,x,t),E=O.sbMean,O=O.sbSdcm,y+O<u[B]+u[B+1])u[B]=y,u[B+1]=O,H[B]=F,H[B+1]=E,v=!0;else{--C[B+1];break}for(B=r-1;0<B;B--)for(;C[B]!==C[B-1]+1;)if(--C[B],y=I(B-1,C,x,t),F=y.sbMean,y=y.sbSdcm,O=I(B,C,x,t),E=O.sbMean,O=O.sbSdcm,y+O<u[B-1]+u[B])u[B-1]=y,u[B]=O,H[B-1]=F,H[B]=E,v=!0;else{C[B]+=1;break}}H=v}H&&(u=T(C,x,
t,w));return C}function T(x,t,w,H){let C=[];var u=[],r=[];let y=0;const O=[],B=[];for(var F=0;F<H;F++){var E=I(F,x,t,w);O.push(E.sbMean);B.push(E.sbSdcm);y+=B[F]}E=y;for(F=!0;F||y<E;){F=!1;C=[];for(u=0;u<H;u++)C.push(x[u]);for(r=0;r<H;r++)for(E=x[r]+1;E<=x[r+1];E++)if(u=t[E],0<r&&E!==x[r+1]&&Math.abs(u-O[r])>Math.abs(u-O[r-1]))x[r]=E;else if(r<H-1&&x[r]!==E-1&&Math.abs(u-O[r])>Math.abs(u-O[r+1])){x[r+1]=E-1;break}E=y;y=0;u=[];r=[];for(let v=0;v<H;v++){u.push(O[v]);r.push(B[v]);const k=I(v,x,t,w);
O[v]=k.sbMean;B[v]=k.sbSdcm;y+=B[v]}}if(y>E){for(t=0;t<H;t++)x[t]=C[t],O[t]=u[t],B[t]=r[t];y=E}return{mean:O,sdcm:B}}function V(x,t,w,H,C){x=Math.max(H-x,t-H)/C/w;return 1<=x?1:.5<=x?.5:.25}function N(x){let t=0;for(let w=0;w<x.length;w++)t+=x[w];return t/=x.length}function L(x,t){let w=0;for(let H=0;H<x.length;H++){const C=x[H];w+=(C-t)*(C-t)}w/=x.length;return Math.sqrt(w)}function I(x,t,w,H){var C=0,u=0;for(var r=t[x]+1;r<=t[x+1];r++){const y=H[r];C+=w[r]*y;u+=y}0>=u&&console.log("Exception in Natural Breaks calculation");
C/=u;u=0;for(r=t[x]+1;r<=t[x+1];r++)u+=H[r]*(w[r]-C)**2;return{sbMean:C,sbSdcm:u}}U.createGenerateRendererClassBreaks=function(x){const {normalizationTotal:t}=x;return{classBreaks:R(x),normalizationTotal:t}};U.createGenerateRendererUniqueValues=function(x){x=P(x);const t=[],w=x.uniqueValues.length;for(let H=0;H<w;H++){const C=x.uniqueValues[H];t.push({value:C,count:x.valueFrequency[H],label:C.toString()})}return{uniqueValues:t}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C){function u(F,E){const {attributeTable:v,bandCount:k}=F;return!T.isSome(v)||1<k||E&&null==v.fields.find(m=>m.name.toLowerCase()===E.toLowerCase())?!1:!0}function r(F){const {bandCount:E,colormap:v}=F;return T.isSome(v)&&v.length&&1===E}function y(F){return w.isValidPixelBlock(F)&&0!==F.validPixelCount}const O=z.getLogger("esri.renderers.support.RasterSymbolizer"),B={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,
4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};P=function(F){function E(k){return F.call(this,k)||this}U._inheritsLoose(E,F);var v=E.prototype;v.bind=function(){const {rendererJSON:k}=this;if(!k)return{success:!1};this.lookup={rendererJSON:{}};let m;switch(k.type){case "uniqueValue":m={success:this._updateUVRenderer(k)};break;case "rasterColormap":m={success:this._updateColormapRenderer(k)};break;case "rasterStretch":m={success:this._updateStretchRenderer(k)};
break;case "classBreaks":m={success:this._updateClassBreaksRenderer(k)};break;case "rasterShadedRelief":m={success:this._updateShadedReliefRenderer(k)};break;case "vectorField":m={success:this._updateVectorFieldRenderer()};break;case "animatedFlow":m=this._updateAnimatedFlowRenderer()}return m};v.symbolize=function(k){let m=k&&k.pixelBlock;if(!y(m))return m;if(k.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(m,k.simpleStretchParams);try{3<m.pixels.length&&
(m=w.extractBands(m,[0,1,2]));let n;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":n=this._symbolize_colormap(m);break;case "classBreaks":n=this._symbolize_classBreaks(m);break;case "rasterStretch":n=this._symbolize_stretch(m,k.bandIds);break;case "rasterShadedRelief":({extent:k}=k),n=this._symbolize_shadedRelief(m,{isGCS:k.spatialReference.isGeographic,resolution:{x:(k.xmax-k.xmin)/m.width,y:(k.ymax-k.ymin)/m.height}})}return n}catch(n){return O.error("symbolize",n.message),
m}};v.simpleStretch=function(k,m){if(!y(k))return k;try{return 3<k.pixels.length&&(k=w.extractBands(k,[0,1,2])),w.stretch(k,m)}catch(n){return O.error("symbolize",n.message),k}};v.generateWebGLParameters=function(k){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var m;const {indexedColormap:d,offset:b}=(null==(m=this.lookup)?void 0:m.colormapLut)||{};return{colormap:d,colormapOffset:b,type:"lut"}}const {pixelBlock:n,isGCS:e,resolution:f,bandIds:p}=k;({rendererJSON:k}=
this);return"rasterStretch"===k.type?this.generateStretchWebGLParams(n,k,p):"rasterShadedRelief"===k.type?this.generateShadedReliefWebGLParams(k,e,f):"vectorField"===k.type?this._generateVectorFieldWebGLParams(k):null};v._isLUTChanged=function(k){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const m=this.rendererJSON.colorRamp;if(k)return JSON.stringify(m)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==
JSON.stringify(this.lookup.rendererJSON)};v._symbolize_colormap=function(k){return this._isLUTChanged()&&!this.bind().success?k:w.colorize(k,this.lookup.colormapLut)};v._symbolize_classBreaks=function(k){const m=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind().success?k:m?w.colorize(k,this.lookup.colormapLut):w.remapColor(k,this.lookup.remapLut)};v._symbolize_stretch=function(k,m){const {pixelType:n,bandCount:e}=this.rasterInfo,f=this.rendererJSON,
p=-1<["u8","u16","s8","s16"].indexOf(n);let d;var {dra:b}=f;var a=f.useGamma?f.gamma:null;if("histogramEqualization"===f.stretchType){var c=b?null:this.lookup.histogramLut;m=this.getStretchCutoff(f,k,m,!c);a=w.stretch(k,{...m,gamma:a});a=w.lookupPixels(a,{lut:b?m.histogramLut:c,offset:0})}else if(p){var l;if(b)b=this.getStretchCutoff(f,k,m),d=w.createStretchLUT({pixelType:n,...b,gamma:a});else{if(this._isLUTChanged()&&!this.bind().success)return k;d=this.lookup?this.lookup.stretchLut:null}if(!d)return k;
1<e&&(null==m?void 0:m.length)===(null==(c=T.unwrap(k))?void 0:c.pixels.length)&&(null==(l=d)?void 0:l.lut.length)===e&&(d={lut:m.map(h=>d.lut[h]),offset:d.offset});a=w.lookupPixels(k,d)}else b=this.getStretchCutoff(f,k,m),a=w.stretch(k,{...b,gamma:a});if(f.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return k;a=w.colorize(a,this.lookup.colormapLut)}return a};v._symbolize_shadedRelief=function(k,m){var n,e,f=this.rendererJSON;m=H.hillshade(k,{...f,...m});if(!f.colorRamp||this._isLUTChanged(!0)&&
!this.bind().success)return m;f=this.lookup?this.lookup.hsvMap:null;if(!f)return m;const p=null!=(n=null==(e=T.unwrap(this.rasterInfo.statistics))?void 0:e[0])?n:{min:0,max:8E3};H.tintHillshade(m,k,f,p);return m};v._updateVectorFieldRenderer=function(){const {bandCount:k,dataType:m}=this.rasterInfo;return 2===k&&("vector-magdir"===m||"vector-uv"===m)};v._updateAnimatedFlowRenderer=function(){const {bandCount:k,dataType:m}=this.rasterInfo;return 2!==k||"vector-magdir"!==m&&"vector-uv"!==m?{success:!1,
error:`Unsupported data type "${m}"; AnimatedFlowRenderer only supports "vector-magdir" and "vector-uv".`}:{success:!0}};v._updateUVRenderer=function(k){const {bandCount:m,attributeTable:n,pixelType:e}=this.rasterInfo,f=k.field1;if(!f)return!1;const p=k.defaultSymbol;var d=1===m&&["u8","s8"].includes(e);if(!u(this.rasterInfo,f)&&!d)return!1;const b=[];if(n){const a=n.fields.filter(c=>"value"===c.name.toLowerCase())[0];if(!a)return!1;n.features.forEach(c=>{var l,h=k.uniqueValueInfos.filter(g=>String(g.value)===
String(c.attributes[f]))[0];(h=null==h?void 0:null==(l=h.symbol)?void 0:l.color)?b.push([c.attributes[a.name]].concat(h)):p&&b.push([c.attributes[a.name]].concat(p.color))})}else{if("value"!==f.toLowerCase())return!1;k.uniqueValueInfos.forEach(a=>{var c;const l=null==a?void 0:null==(c=a.symbol)?void 0:c.color;l?b.push([parseInt(""+a.value,10)].concat(l)):p&&b.push([parseInt(""+a.value,10)].concat(p.color))})}if(0===b.length)return!1;d=w.createColormapLUT({colormap:b});this.lookup={rendererJSON:k,
colormapLut:d};return this.canRenderInWebGL=!0};v._updateColormapRenderer=function(k){if(!r(this.rasterInfo))return!1;var m=k.colormapInfos.map(n=>[n.value].concat(n.color)).sort((n,e)=>n[0]-e[0]);if(!m||0===m.length)return!1;m=w.createColormapLUT({colormap:m});this.lookup={rendererJSON:k,colormapLut:m};return this.canRenderInWebGL=!0};v._updateShadedReliefRenderer=function(k){if("elevation"!==this.rasterInfo.dataType)return!1;if(k.colorRamp){var m=C.convertColorRampToColormap(k.colorRamp,256,!0);
m=w.createColormapLUT({colormap:m});const n=[],e=m.indexedColormap;for(let f=0;f<e.length;f+=4){const p=D.toHSV({r:e[f],g:e[f+1],b:e[f+2]});n.push([p.h/60,p.s/100,255*p.v/100])}this.lookup={rendererJSON:k,colormapLut:m,hsvMap:n}}else this.lookup=null;return this.canRenderInWebGL=!0};v._updateClassBreaksRenderer=function(k){var m=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),n=k.classBreakInfos;if(null==n||!n.length)return!1;n=n.sort((b,a)=>b.classMaxValue-a.classMaxValue);const e=
n[n.length-1];var f=k.minValue;if(!m){m=[];for(var p=0;p<n.length;p++){var d;m.push({value:null!=(d=n[p].classMinValue)?d:f,mappedColor:n[p].symbol.color});f=n[p].classMaxValue}m.push({value:e.classMaxValue,mappedColor:e.symbol.color});this.lookup={rendererJSON:k,remapLut:m};this.canRenderInWebGL=!1;return!0}d=[];f=Math.floor(k.minValue);for(m=0;m<n.length;m++){for(p=n[m];f<p.classMaxValue;f++)d.push([f].concat(p.symbol.color));f=Math.ceil(p.classMaxValue)}e.classMaxValue===f&&d.push([e.classMaxValue].concat(e.symbol.color));
n=w.createColormapLUT({colormap:d,fillUnspecified:!1});this.lookup={rendererJSON:k,colormapLut:n};return this.canRenderInWebGL=!0};v._isHistogramRequired=function(k){return"percentClip"===k||"histogramEqualization"===k};v._isValidRasterStatistics=function(k){return T.isSome(k)&&0<k.length&&null!=k[0].min&&null!=k[0].max};v._updateStretchRenderer=function(k){var m;let {stretchType:n,dra:e}=k;if(!("none"===n||null!=(m=k.statistics)&&m.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
e))return!1;var f=T.unwrap(k.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(k.stretchType)||null!=f&&f.length||e||(n="minMax");const {gamma:p,useGamma:d,colorRamp:b}=k;m=this.rasterInfo.pixelType;const a=!e&&-1<["u8","u16","s8","s16"].indexOf(m);"histogramEqualization"===n?(m=f.map(c=>w.createHistogramEqualizationLUT(c)),this.lookup={rendererJSON:k,histogramLut:m}):a&&(f=this.getStretchCutoff(k),m=w.createStretchLUT({pixelType:m,...f,gamma:d?p:null}),this.lookup={rendererJSON:k,
stretchLut:m});b&&(m=C.convertColorRampToColormap(b,256,!0),this.lookup||(this.lookup={rendererJSON:k}),this.lookup.colormapLut=w.createColormapLUT({colormap:m}),this.lookup.rendererJSON=k);return this.canRenderInWebGL=!0};v.getStretchCutoff=function(k,m=null,n,e){var f,p,d,b=k.stretchType;if(k.dra)if("minMax"===b&&T.isSome(m)&&m.statistics)m=m.statistics.map(G=>[G.minValue,G.maxValue,0,0]);else{var a=w.estimateStatisticsHistograms(m);m=T.isSome(a)?a.statistics:null;a=T.isSome(a)?a.histograms:null}else{var c;
m=0<(null==(c=k.statistics)?void 0:c.length)?k.statistics:T.unwrap(this.rasterInfo.statistics);a=k.histograms||T.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(b)||null!=(f=a)&&f.length||(b="minMax");c=(null==(p=m)?void 0:p.length)||(null==(d=a)?void 0:d.length)||this.rasterInfo.bandCount;p=[];d=[];let l;let h,g,q;m&&!Array.isArray(m[0])&&(m=m.map(G=>[G.min,G.max,G.avg,G.stddev]));switch(b){case "none":m=B[this.rasterInfo.pixelType]||B.f32;for(f=0;f<c;f++)p[f]=m[0],d[f]=m[1];break;
case "minMax":for(f=0;f<c;f++)p[f]=m[f][0],d[f]=m[f][1];break;case "standardDeviation":for(f=0;f<c;f++)p[f]=m[f][2]-k.numberOfStandardDeviations*m[f][3],d[f]=m[f][2]+k.numberOfStandardDeviations*m[f][3],p[f]<m[f][0]&&(p[f]=m[f][0]),d[f]>m[f][1]&&(d[f]=m[f][1]);break;case "histogramEqualization":for(f=0;f<c;f++)p[f]=a[f].min,d[f]=a[f].max;break;case "percentClip":for(f=0;f<a.length;f++){m=a[f];h=new Uint32Array(m.size);var A=m.counts;l=0;c=(m.max-m.min)/m.size;g=-.5===m.min&&1===c?.5:0;for(q=0;q<m.size;q++)l+=
A[q],h[q]=l;A=(k.minPercent||0)*l/100;for(q=0;q<m.size;q++)if(h[q]>A){p[f]=m.min+c*(q+g);break}A=(1-(k.maxPercent||0)/100)*l;for(q=m.size-2;0<=q;q--)if(h[q]<A){d[f]=m.min+c*(q+2-g);break}}break;default:for(f=0;f<c;f++)p[f]=m[f][0],d[f]=m[f][1]}let J;"histogramEqualization"===b?(b=a[0].size||256,k=0,e&&(J=a.map(G=>w.createHistogramEqualizationLUT(G)))):(b=k.max||255,k=k.min||0);return this.getSelectedBandCutoffs({minCutOff:p,maxCutOff:d,outMax:b,outMin:k,histogramLut:J},n)};v.getSelectedBandCutoffs=
function(k,m){if(null==m||0===m.length)return k;const n=Math.max.apply(null,m),{minCutOff:e,maxCutOff:f,outMin:p,outMax:d,histogramLut:b}=k;return e.length===m.length||e.length<=n?k:{minCutOff:m.map(a=>e[a]),maxCutOff:m.map(a=>f[a]),histogramLut:b?m.map(a=>b[a]):null,outMin:p,outMax:d}};v.generateStretchWebGLParams=function(k,m,n){let e=null,f=null;var p=this.lookup&&this.lookup.colormapLut;m.colorRamp&&p&&(e=p.indexedColormap,f=p.offset);"histogramEqualization"===m.stretchType&&(m={...m,stretchType:"minMax"});
({gamma:p}=m);const d=!!(m.useGamma&&p&&p.some(A=>1!==A)),{minCutOff:b,maxCutOff:a,outMin:c,outMax:l}=this.getStretchCutoff(m,k,n);var h=0;T.isSome(k)&&(h=k.getPlaneCount(),2===h&&(k=k.clone(),k.statistics=[k.statistics[0]],k.pixels=[k.pixels[0]]));k=Math.min(3,(null==n?void 0:n.length)||h||this.rasterInfo.bandCount);n=new Float32Array(k);h=e||d?1:255;let g;for(g=0;g<k;g++)n[g]=(l-c)/(a[g]-b[g])/h;const q=new Float32Array(k);if(d)for(g=0;g<k;g++)q[g]=1<p[g]?2<p[g]?6.5+(p[g]-2)**2.5:6.5+100*(2-p[g])**
4:1;return{bandCount:k,outMin:c/h,outMax:l/h,minCutOff:b,maxCutOff:a,factor:n,useGamma:d,gamma:d?p:[1,1,1],gammaCorrection:d?q:[1,1,1],colormap:e,colormapOffset:f,stretchType:m.stretchType,type:"stretch"}};v.generateShadedReliefWebGLParams=function(k,m,n){var e,f,p;let d=null,b=null;const a=this.lookup&&this.lookup.colormapLut;k.colorRamp&&a&&(d=a.indexedColormap,b=a.offset);m=H.calculateHillshadeParams({...k,isGCS:m,resolution:n});n=null==(e=T.unwrap(this.rasterInfo.statistics))?void 0:e[0];return{...m,
minValue:null!=(f=null==n?void 0:n.min)?f:0,maxValue:null!=(p=null==n?void 0:n.max)?p:8E3,hillshadeType:"traditional"===k.hillshadeType?0:1,type:"hillshade",colormap:d,colormapOffset:b}};v._generateVectorFieldWebGLParams=function(k){var m,n,e,f,p,d;const {style:b,inputUnit:a,outputUnit:c,visualVariables:l,symbolTileSize:h,flowRepresentation:g}=k;let q;var A=null!=(m=null==l?void 0:l.find(J=>"sizeInfo"===J.type))?m:{type:"sizeInfo",field:"Magnitude",maxDataValue:null==(n=this.rasterInfo.statistics)?
void 0:n[0].max,maxSize:.8*h,minDataValue:null==(e=this.rasterInfo.statistics)?void 0:e[0].min,minSize:.2*h};m=A?A.minDataValue:null==(f=this.rasterInfo.statistics)?void 0:f[0].min;n=A?A.maxDataValue:null==(p=this.rasterInfo.statistics)?void 0:p[0].max;p=T.isSome(A.maxSize)&&T.isSome(A.minSize)?[A.minSize/h,A.maxSize/h]:[.2,.8];if("wind_speed"===b||"simple_scalar"===b)p[0]=p[1]=(p[0]+p[1])/2;f=T.isSome(m)&&T.isSome(n)?[m,n]:null;if("classified_arrow"===b)if(T.isSome(m)&&T.isSome(n)&&T.isSome(A))for(q=
[],m=(A.maxDataValue-A.minDataValue)/5,n=0;6>n;n++)q.push(A.minDataValue+m*n);else q=[0,1E-6,3.5,7,10.5,14];A="flow_to"===g===("ocean_current_kn"===b||"ocean_current_m"===b)?0:Math.PI;m=null==l?void 0:l.find(J=>"rotationInfo"===J.type);k=(null==(d=this.rasterInfo.storageInfo)?0:d.tileInfo)&&"vector-uv"===this.rasterInfo.dataType?"geographic":(null==m?void 0:m.rotationType)||k.rotationType;return{breakValues:q,dataRange:f,inputUnit:a,outputUnit:c,symbolTileSize:h,symbolPercentRange:p,style:b||"single_arrow",
rotation:A,rotationType:k,type:"vectorField"}};return E}(P.JSONSupport);R.__decorate([V.property({json:{write:!0}})],P.prototype,"rendererJSON",void 0);R.__decorate([V.property({type:t,json:{write:!0}})],P.prototype,"rasterInfo",void 0);R.__decorate([V.property({json:{write:!0}})],P.prototype,"lookup",void 0);R.__decorate([V.property()],P.prototype,"canRenderInWebGL",void 0);return P=R.__decorate([x.subclass("esri.renderers.support.RasterSymbolizer")],P)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports",
"../PixelBlock","./pixelUtils"],function(U,R,D){function P(z){let {altitude:T,azimuth:V}=z;const {hillshadeType:N,pixelSizePower:L,pixelSizeFactor:I,scalingType:x,isGCS:t,resolution:w}=z;var H="multi-directional"===N?2*z.zFactor:z.zFactor;const {x:C,y:u}=w;z=H/(8*C);var r=H/(8*u);t&&.001<H&&(z/=111E3,r/=111E3);"adjusted"===x&&(t?(z=111E3*C,r=111E3*u,z=(H+z**L*I)/(8*z),r=(H+r**L*I)/(8*r)):(z=(H+C**L*I)/(8*C),r=(H+u**L*I)/(8*u)));var y=(90-T)*Math.PI/180;H=Math.cos(y);let O=(360-V+90)*Math.PI/180,B=
Math.sin(y)*Math.cos(O);y=Math.sin(y)*Math.sin(O);const F=[315,270,225,360,180,0],E=[60,60,60,60,60,90];var v=new Float32Array([3,5,3,2,1,4]);const k=v.reduce((p,d)=>p+d);v=v.map(p=>p/k);const m="multi-directional"===N?F.length:1,n=new Float32Array(6),e=new Float32Array(6),f=new Float32Array(6);if("multi-directional"===N)for(let p=0;p<m;p++)T=E[p],V=F[p],y=(90-T)*Math.PI/180,H=Math.cos(y),O=(360-V+90)*Math.PI/180,B=Math.sin(y)*Math.cos(O),y=Math.sin(y)*Math.sin(O),n[p]=H,e[p]=B,f[p]=y;else n.fill(H),
e.fill(B),f.fill(y);return{resolution:w,factor:[z,r],sinZcosA:B,sinZsinA:y,cosZ:H,sinZcosAs:e,sinZsinAs:f,cosZs:n,weights:v,hillshadeType:["traditional","multi-directional"].indexOf(N)}}U.calculateHillshadeParams=P;U.hillshade=function(z,T){if(!D.isValidPixelBlock(z))return z;const {width:V,height:N,mask:L}=z,I=new Uint8Array(V*N);L&&I.set(L);const {factor:x,sinZcosA:t,sinZsinA:w,cosZ:H,sinZcosAs:C,sinZsinAs:u,cosZs:r,weights:y}=P(T),[O,B]=x;var {hillshadeType:F}=T;const E=z.pixels[0];T=new Uint8Array(V*
N);let v;for(let b=1;b<N-1;b++){const a=b*V;for(let c=1;c<V-1;c++)if(L&&!L[a+c])T[a+c]=0;else{var k=8;if(L&&(k=L[a-V+c-1]+L[a-V+c]+L[a-V+c+1]+L[a+c-1]+L[a+c+1]+L[a+V+c-1]+L[a+V+c]+L[a+V+c+1],7>k)){T[a+c]=0;I[a+c]=0;continue}if(7===k){var m=L[a-V+c-1]?E[a-V+c-1]:E[a+c];var n=L[a-V+c]?E[a-V+c]:E[a+c];var e=L[a-V+c+1]?E[a-V+c+1]:E[a+c];k=L[a+c-1]?E[a+c-1]:E[a+c];v=L[a+c+1]?E[a+c+1]:E[a+c];var f=L[a+V+c-1]?E[a+V+c-1]:E[a+c];var p=L[a+V+c]?E[a+V+c]:E[a+c];var d=L[a+V+c+1]?E[a+V+c+1]:E[a+c]}else m=E[a-
V+c-1],n=E[a-V+c],e=E[a-V+c+1],k=E[a+c-1],v=E[a+c+1],f=E[a+V+c-1],p=E[a+V+c],d=E[a+V+c+1];k=(e+v+v+d-(m+k+k+f))*O;m=(f+p+p+d-(m+n+n+e))*B;n=Math.sqrt(1+k*k+m*m);e=0;if("traditional"===F)k=255*(H+w*m-t*k)/n,0>k&&(k=0),e=k;else for(f=u.length,p=0;p<f;p++)d=255*(r[p]+u[p]*m-C[p]*k)/n,0>d&&(d=0),e+=d*y[p];T[a+c]=e&255}}for(F=0;F<N;F++)T[F*V]=T[F*V+1],T[(F+1)*V-1]=T[(F+1)*V-2];for(F=1;F<V-1;F++)T[F]=T[F+V],T[F+(N-1)*V]=T[F+(N-2)*V];return new R({width:V,height:N,pixels:[T],mask:L?I:null,pixelType:"u8",
validPixelCount:z.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};U.tintHillshade=function(z,T,V,N){if(D.isValidPixelBlock(z)&&D.isValidPixelBlock(T)){var {min:L,max:I}=N;N=z.pixels[0];var {pixels:x,mask:t}=T;T=x[0];var w=255.00001/(I-L),H=new Uint8ClampedArray(T.length),C=new Uint8ClampedArray(T.length),u=new Uint8ClampedArray(T.length),r=V.length-1;for(let B=0;B<T.length;B++){if(t&&0===t[B])continue;var y=Math.floor((T[B]-L)*w);const [F,E]=V[0>y?0:y>r?r:y];var O=N[B];y=O*E;const v=y*(1-
Math.abs(F%2-1));O-=y;switch(Math.floor(F)){case 0:H[B]=y+O;C[B]=v+O;u[B]=O;break;case 1:H[B]=v+O;C[B]=y+O;u[B]=O;break;case 2:H[B]=O;C[B]=y+O;u[B]=v+O;break;case 3:H[B]=O;C[B]=v+O;u[B]=y+O;break;case 4:H[B]=v+O;C[B]=O;u[B]=y+O;break;case 5:case 6:H[B]=y+O,C[B]=O,u[B]=v+O}}z.pixels=[H,C,u];z.updateStatistics()}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(U,R,D,P,z,T,V,N,L,I){function x(){x=R._asyncToGenerator(function*(v,k,m){const n=performance.now();var e=t(v,k);const f=performance.now();e=H(v,e,k.width,k.height);k=performance.now();var p=u(e,!0);e=performance.now();p=r(p);const d=performance.now();v.profile&&E.info("createStreamlinesMesh profile",{"_createFlowFieldFromData()":Math.round(f-n),"_getStreamlines()":Math.round(k-f),"createAnimatedLinesData()":Math.round(e-k),"createLinesMesh()":Math.round(d-e),"Total elapsed time":Math.round(d-
n)});yield Promise.resolve();V.throwIfAborted(m);return p});return x.apply(this,arguments)}function t(v,k){const m=C(k.data,k.width,k.height,v.smoothing);return v.interpolate?(n,e)=>{const f=Math.floor(n),p=Math.floor(e);if(0>f||f>=k.width||0>p||p>=k.height)return[0,0];n-=f;e-=p;const d=f<k.width-1?f+1:f,b=p<k.height-1?p+1:p;return[(m[2*(p*k.width+f)]*(1-e)+m[2*(b*k.width+f)]*e)*(1-n)+(m[2*(p*k.width+d)]*(1-e)+m[2*(b*k.width+d)]*e)*n,(m[2*(p*k.width+f)+1]*(1-e)+m[2*(b*k.width+f)+1]*e)*(1-n)+(m[2*
(p*k.width+d)+1]*(1-e)+m[2*(b*k.width+d)+1]*e)*n]}:(n,e)=>{n=Math.round(n);e=Math.round(e);return 0>n||n>=k.width||0>e||e>=k.height?[0,0]:[m[2*(e*k.width+n)],m[2*(e*k.width+n)+1]]}}function w(v,k,m,n,e,f,p,d,b){const a=[];let c=0;a.push({x:m,y:n,t:c});for(let q=0;q<v.verticesPerLine;q++){let [A,J]=k(m,n);A*=v.velocityScale;J*=v.velocityScale;var l=Math.sqrt(A*A+J*J);if(l<v.minSpeedThreshold)break;const G=A/l,Q=J/l;m+=G*v.segmentLength;n+=Q*v.segmentLength;c+=v.segmentLength/l;if(Math.acos(G*h+Q*g)>
v.maxTurnAngle)break;if(v.mergeLines){var h=Math.round(m*b);var g=Math.round(n*b);if(0>h||h>p-1||0>g||g>d-1)break;l=f[g*p+h];if(-1!==l&&l!==e)break;f[g*p+h]=e}a.push({x:m,y:n,t:c});h=G;g=Q}return a}function H(v,k,m,n){const e=[],f=new N,p=1/Math.max(v.lineCollisionWidth,1),d=Math.round(m*p),b=Math.round(n*p),a=new Int32Array(d*b);for(var c=0;c<a.length;c++)a[c]=-1;c=[];for(let l=0;l<n;l+=v.lineSpacing)for(let h=0;h<m;h+=v.lineSpacing)c.push({x:h,y:l,sort:f.getFloat()});c.sort((l,h)=>l.sort-h.sort);
for(const {x:l,y:h}of c)f.getFloat()<v.density&&(m=w(v,k,l,h,e.length,a,d,b,p),2>m.length||e.push(m));return e}function C(v,k,m,n){if(0===n)return v;const e=Math.round(3*n),f=Array(2*e+1);var p=0;for(var d=-e;d<=e;d++){var b=Math.exp(-d*d/(n*n));f[d+e]=b;p+=b}for(n=-e;n<=e;n++)f[n+e]/=p;p=new Float32Array(v.length);for(n=0;n<m;n++)for(d=0;d<k;d++){var a=b=0;for(var c=-e;c<=e;c++)if(!(0>d+c||d+c>=k)){var l=f[c+e];b+=l*v[2*(n*k+(d+c))];a+=l*v[2*(n*k+(d+c))+1]}p[2*(n*k+d)]=b;p[2*(n*k+d)+1]=a}v=new Float32Array(v.length);
for(n=0;n<k;n++)for(d=0;d<m;d++){a=b=0;for(c=-e;c<=e;c++)0>d+c||d+c>=m||(l=f[c+e],b+=l*p[2*((d+c)*k+n)],a+=l*p[2*((d+c)*k+n)+1]);v[2*(d*k+n)]=b;v[2*(d*k+n)+1]=a}return v}function u(v,k){const m=new N;var n=v.reduce((d,b)=>d+b.length,0);n=new Float32Array(3*n);const e=Array(v.length);let f=0,p=0;for(const d of v){v=f;for(const b of d)n[3*f]=b.x,n[3*f+1]=b.y,n[3*f+2]=b.t,f++;e[p++]={startVertex:v,numberOfVertices:d.length,totalTime:d[d.length-1].t,timeSeed:k?m.getFloat():0}}return{lineVertices:n,lineDescriptors:e}}
function r(v,k=10){function m(h,g,q,A,J,G,Q){const S=8*b;let W=0;d[S+W++]=h;d[S+W++]=g;d[S+W++]=1;d[S+W++]=q;d[S+W++]=G;d[S+W++]=Q;d[S+W++]=A;d[S+W++]=J;b++;d[S+W++]=h;d[S+W++]=g;d[S+W++]=-1;d[S+W++]=q;d[S+W++]=G;d[S+W++]=Q;d[S+W++]=-A;d[S+W++]=-J;b++}const {lineVertices:n,lineDescriptors:e}=v;var f=v=0;for(var p of e)v+=2*p.numberOfVertices,f+=6*(p.numberOfVertices-1);const d=new Float32Array(8*v);p=new Uint32Array(f);let b=0;v=0;for(const h of e){const {totalTime:g,timeSeed:q}=h;let A=f=null,J=
null;var a=null,c=null;for(let G=0;G<h.numberOfVertices;G++){const Q=n[3*(h.startVertex+G)],S=n[3*(h.startVertex+G)+1],W=n[3*(h.startVertex+G)+2];let X=null,M=null;var l=null;let K=null;0<G&&(X=Q-f,M=S-A,l=Math.sqrt(X*X+M*M),X/=l,M/=l,1<G?(a=X+a,c=M+c,l=Math.sqrt(a*a+c*c),a/=l,c/=l,l=Math.min(1/(a*X+c*M),k),a*=l,c*=l,l=-c,K=a):(l=-M,K=X),null!==l&&null!==K&&(m(f,A,J,l,K,g,q),p[v++]=b-2,p[v++]=b,p[v++]=b-1,p[v++]=b,p[v++]=b+1,p[v++]=b-1));f=Q;A=S;J=W;a=X;c=M}m(f,A,J,-c,a,g,q)}return{vertexData:d,indexData:p}}
function y(v,k){const m=k.pixels,{width:n,height:e}=k;k=new Float32Array(n*e*2);if("vector-uv"===v)for(v=0;v<n*e;v++)k[2*v]=m[0][v],k[2*v+1]=-m[1][v];else if("vector-magdir"===v)for(v=0;v<n*e;v++){const f=m[0][v],p=z.deg2rad(m[1][v]),d=Math.sin(p-Math.PI/2);k[2*v]=Math.cos(p-Math.PI/2)*f;k[2*v+1]=d*f}return{data:k,width:n,height:e}}function O(){O=R._asyncToGenerator(function*(v,k,m,n,e){var f=L.getInfo(k.spatialReference);if(!f)return B(v,k,m,n,e);const [p,d]=f.valid;f=Math.ceil(k.width/(d-p));const b=
k.width/f,a=Math.round(m/f);let c=k.xmin;const l=[];for(let h=0;h<f;h++){const g=new I({xmin:c,xmax:c+b,ymin:k.ymin,ymax:k.ymax,spatialReference:k.spatialReference});l.push(B(v,g,a,n,e));c+=b}k=yield Promise.all(l);n={data:new Float32Array(m*n*2),width:m,height:n};v=0;for(const h of k){for(k=0;k<h.height;k++)for(e=0;e<h.width;e++)v+e>=m||(n.data[2*(k*m+v+e)]=h.data[2*(k*h.width+e)],n.data[2*(k*m+v+e)+1]=h.data[2*(k*h.width+e)+1]);v+=h.width}return n});return O.apply(this,arguments)}function B(v,k,
m,n,e){return F.apply(this,arguments)}function F(){F=R._asyncToGenerator(function*(v,k,m,n,e){if("imagery"===v.type){yield v.load({signal:e});var f=v.rasterInfo.dataType;v=yield v.fetchImage(k,m,n,{signal:e});return!v||T.isNone(v.pixelData)||T.isNone(v.pixelData.pixelBlock)?{data:new Float32Array(m*n*2),width:m,height:n}:y(f,v.pixelData.pixelBlock)}yield v.load({signal:e});f=v.rasterInfo.dataType;v=yield v.fetchPixels(k,m,n,{signal:e});return!v||T.isNone(v.pixelBlock)?{data:new Float32Array(m*n*2),
width:m,height:n}:y(f,v.pixelBlock)});return F.apply(this,arguments)}const E=P.getLogger("esri.views.2d.engine.flow.dataUtils");U.createAnimatedLinesData=u;U.createLinesMesh=r;U.createStreamlinesMesh=function(v,k,m){return x.apply(this,arguments)};U.fetchPart=B;U.loadImagery=function(v,k,m,n,e){return O.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(U,R){const D=R.strict()({RSP_NearestNeighbor:"nearest",
RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});R=R.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});U.interpolationKebab=D;U.noDataInterpretationKebab=R;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/RasterFactory":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ./CloudRaster ./ImageAuxRaster ./ImageServerRaster ./MRFRaster ./TIFFRaster".split(" "),function(U,R,D,P,z,
T,V){const N=new Map;N.set("CRF",{desc:"Cloud Raster Format",constructor:D});N.set("MRF",{desc:"Meta Raster Format",constructor:T});N.set("TIFF",{desc:"GeoTIFF",constructor:V});N.set("RasterTileServer",{desc:"Raster Tile Server",constructor:z});N.set("JPG",{desc:"JPG Raster Format",constructor:P});N.set("PNG",{desc:"PNG Raster Format",constructor:P});N.set("GIF",{desc:"GIF Raster Format",constructor:P});N.set("BMP",{desc:"BMP Raster Format",constructor:P});return function(){function L(){}L.open=function(){var I=
U._asyncToGenerator(function*(x){const {url:t,ioConfig:w,sourceJSON:H}=x;let C=x.datasetFormat;null==C&&t.lastIndexOf(".")&&(C=t.slice(t.lastIndexOf(".")+1).toUpperCase());if("OVR"===C||"TIF"===C)C="TIFF";else if("JPG"===C||"JPEG"===C||"JFIF"===C)C="JPG";-1<t.toLowerCase().indexOf("/imageserver")&&-1===t.toLowerCase().indexOf("/wcsserver")&&(C="RasterTileServer");const u={bandIds:null,sampling:null},r={url:t,sourceJSON:H,datasetFormat:C,ioConfig:w||u};let y,O;if(this.supportedFormats.has(C))return y=
N.get(C).constructor,O=new y(r),yield O.open({signal:x.signal}),O;if(C)throw new R("rasterfactory:open","not a supported format "+C);const B=Array.from(N.keys());let F=0;const E=function(){C=B[F++];if(!C)return null;y=N.get(C).constructor;O=new y(r);return O.open({signal:x.signal}).then(()=>O).catch(()=>E())};return E()});return function(x){return I.apply(this,arguments)}}();L.register=function(I,x,t){N.has(I.toUpperCase())||N.set(I.toUpperCase(),{desc:x,constructor:t})};U._createClass(L,null,[{key:"supportedFormats",
get:function(){const I=new Set;N.forEach((x,t)=>I.add(t));return I}}]);return L}()})},"esri/layers/support/rasterDatasets/CloudRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ../TileInfo ./BaseRaster ./DBFParser ../rasterTransforms/utils ../../../rest/support/FeatureSet ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B){const F=new Map;F.set("int16","esriFieldTypeSmallInteger");F.set("int32","esriFieldTypeInteger");F.set("int64","esriFieldTypeInteger");F.set("float32","esriFieldTypeSingle");F.set("float64","esriFieldTypeDouble");F.set("text","esriFieldTypeString");D=function(E){function v(){var m=E.apply(this,arguments)||this;m.storageInfo=null;m.datasetFormat="CRF";return m}U._inheritsLoose(v,E);var k=v.prototype;k.open=function(){var m=U._asyncToGenerator(function*(n){yield this.init();
({data:n}=yield this.request(this.url+"/conf.json",{signal:null==n?void 0:n.signal}));if(!this._validateHeader(n))throw new P("cloudraster:open","Invalid or unsupported conf.json.");this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {storageInfo:e,rasterInfo:f}=this._parseHeader(n);"thematic"===f.dataType&&(n=yield this._fetchAuxiliaryInformation(),f.attributeTable=n);this._set("storageInfo",e);this._set("rasterInfo",f);this.ioConfig.retryCount=this.ioConfig.retryCount||0});return function(n){return m.apply(this,
arguments)}}();k.fetchRawTile=function(){var m=U._asyncToGenerator(function*(n,e,f,p={}){n=this.rasterInfo.storageInfo.maximumPyramidLevel-n;if(0>n)return null;n=this._buildCacheFilePath(n,e,f,p.multidimensionalDefinition);e=this._getIndexRecordFromBundle(e,f);f=yield this.request(n,{range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer",signal:p.signal});if(!f)return null;f=new Uint8Array(f.data);e=this._getTileEndAndContentType(f,e);return 0===e.recordSize?null:(p=yield this.request(n,
{range:{from:e.position,to:e.position+e.recordSize},responseType:"array-buffer",signal:p.signal}))?this.decodePixelBlock(p.data,{width:this.rasterInfo.storageInfo.tileInfo.size[0],height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null}):null});return function(n,e,f){return m.apply(this,arguments)}}();k._validateHeader=function(m){const n="origin extent geodataXform LODInfos blockWidth blockHeight bandCount pixelType pixelSizeX pixelSizeY format packetSize".split(" ");return m&&
"RasterInfo"===m.type&&!n.some(e=>!m[e])};k._parseHeader=function(m){var n,e;const f="u1 u2 u4 u8 s8 u16 s16 u32 s32 f32 f64".split(" ")[m.pixelType],{bandCount:p,histograms:d,colormap:b,blockWidth:a,blockHeight:c,firstPyramidLevel:l,maximumPyramidLevel:h}=m,g=m.statistics&&m.statistics.map(ba=>({min:ba.min,max:ba.max,avg:ba.mean,stddev:ba.standardDeviation,median:ba.median,mode:ba.mode}));var q=m.extent.spatialReference,A=null==(n=m.geodataXform)?void 0:n.spatialReference;n=new y(null!=q&&q.wkid||
null!=q&&q.wkt?q:A);q=new O({xmin:m.extent.xmin,ymin:m.extent.ymin,xmax:m.extent.xmax,ymax:m.extent.ymax,spatialReference:n});A=new B({x:m.pixelSizeX,y:m.pixelSizeY,spatialReference:n});const J=Math.round((q.xmax-q.xmin)/A.x),G=Math.round((q.ymax-q.ymin)/A.y),Q=this._parseTransform(m.geodataXform),S=Q?q:null;Q&&(q=Q.forwardTransform(q),A.x=(q.xmax-q.xmin)/J,A.y=(q.ymax-q.ymin)/G);const W=null!=(e=m.properties)?e:{};var X=m.format.toLowerCase().replace("cache/","");e=new B(m.origin.x,m.origin.y,n);
let M,K;if(b&&b.colors)for(M=[],K=0;K<b.colors.length;K++){var Y=b.colors[K];var Z=b.values?b.values[K]:K;M.push([Z,Y&255,Y<<16>>>24,Y<<8>>>24,Y>>>24])}Y=m.LODInfos;Z=[];for(K=0;K<Y.levels.length;K++)Z.push({level:Y.levels[K],resolution:Y.resolutions[K],scale:96/.0254*Y.resolutions[K]});Y=new w({dpi:96,lods:Z,format:X,origin:e,size:[a,c],spatialReference:n});X={recordSize:8,packetSize:m.packetSize,headerSize:m.packetSize*m.packetSize*8+64};Z=[{maxCol:Math.ceil(J/a)-1,maxRow:Math.ceil(G/c)-1,minCol:0,
minRow:0}];let aa=2;if(0<h)for(K=0;K<h;K++)Z.push({maxCol:Math.ceil(J/aa/a)-1,maxRow:Math.ceil(G/aa/c)-1,minCol:0,minRow:0}),aa*=2;m=new x({width:J,height:G,pixelType:f,bandCount:p,extent:q,nativeExtent:S,transform:Q,spatialReference:n,pixelSize:A,keyProperties:W,statistics:g,histograms:d,multidimensionalInfo:m.mdInfo,colormap:M,storageInfo:new t({blockWidth:a,blockHeight:c,pyramidBlockWidth:a,pyramidBlockHeight:c,origin:e,tileInfo:Y,firstPyramidLevel:l,maximumPyramidLevel:h,blockBoundary:Z})});return{storageInfo:X,
rasterInfo:m}};k._parseTransform=function(m){var n,e;if(!u.isTransformSupported(m))throw new P("cloudraster:open","the data contains unsupported geodata transform types");m=u.readTransform(m);if("identity"===m.type)return null;if("polynomial"!==m.type||null==(n=m.forwardCoefficients)||!n.length||null==(e=m.inverseCoefficients)||!e.length)throw new P("cloudraster:open","the data contains unsupported geodata transforms - both forward and inverse coefficients are required currently");return m};k._fetchAuxiliaryInformation=
function(){var m=U._asyncToGenerator(function*(n){var e=this.request(this.url+"/conf.vat.json",{signal:n}).then(p=>p.data).catch(()=>null);n=this.request(this.url+"/conf.vat.dbf",{responseType:"array-buffer",signal:n}).then(p=>p.data).catch(()=>null);e=yield Promise.all([e,n]);let f;if(e[0]){n=e[0].fields;const p=e[0].values;if(n&&p){n=n.map(b=>({type:"OID"===b.name?"esriFieldTypeOID":F.get(b.type),name:b.name,alias:b.alias||b.name}));const d=p.map(b=>({attributes:b}));n&&p&&(f={fields:n,features:d})}}!f&&
e[1]&&(f=C.parse(e[1]).recordSet);return r.fromJSON(f)});return function(n){return m.apply(this,arguments)}}();k._buildCacheFilePath=function(m,n,e,f){var p=this.storageInfo.packetSize;e=Math.floor(e/p)*p;n="R"+this._toHexString4(Math.floor(n/p)*p)+"C"+this._toHexString4(e);p="L";p=10<=m?p+m.toString():p+("0"+m.toString());({multidimensionalInfo:m}=this.rasterInfo);const d=null==f?void 0:f[0];if(!z.isSome(m)||!d)return`${this.url}/_alllayers/${p}/${n}.bundle`;f=m.variables.filter(b=>b.name===d.variableName)[0].dimensions[0].values.indexOf(d.values[0]).toString(16);
m=4-f.length;for(e=0;e<m;e++)f="0"+f;return`${this.url}/_alllayers/${d.variableName}/${"S"+f}/${p}/${n}.bundle`};k._getIndexRecordFromBundle=function(m,n){const e=this.storageInfo.packetSize;m=m%e*e+n%e;if(0>m)throw"Invalid level / row / col";return m*this.storageInfo.recordSize+64};k._getTileEndAndContentType=function(m,n){m=m.subarray(n,n+8);n=0;let e;for(e=0;5>e;e++)n|=(m[e]&255)<<8*e;const f=n&0xffffffffff;n=0;for(e=5;8>e;e++)n|=(m[e]&255)<<8*(e-5);return{position:f,recordSize:n&0xffffffffff}};
k._toHexString4=function(m){m=m.toString(16);if(4!==m.length){let n=4-m.length;for(;0<n--;)m="0"+m}return m};return v}(H);R.__decorate([T.property({readOnly:!0})],D.prototype,"storageInfo",void 0);R.__decorate([T.property({type:String,json:{write:!0}})],D.prototype,"datasetFormat",void 0);return D=R.__decorate([I.subclass("esri.layers.support.rasterDatasets.CloudRaster")],D)})},"esri/layers/support/rasterDatasets/BaseRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../request ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/Promise ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../arcgisLayerUrl ../commonProperties ../RasterStorageInfo ../TileInfo ./RawBlockCache ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../rasterFunctions/rasterProjectionHelper ../rasterFunctions/vectorFieldUtils ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B,F,E,v,k,m,n){D=function(e){function f(){var d=e.apply(this,arguments)||this;d.rasterJobHandler=null;d.datasetName=null;d.datasetFormat=null;d.rasterInfo=null;d.ioConfig={sampling:"closest"};return d}U._inheritsLoose(f,e);var p=f.prototype;p.init=function(){var d=U._asyncToGenerator(function*(){const b=v.load();this.addResolvingPromise(b);yield this.when()});return function(){return d.apply(this,arguments)}}();p.normalizeCtorArgs=function(d){d&&d.ioConfig&&
(d={...d,ioConfig:{resolution:null,bandIds:null,sampling:"closest",tileInfo:O.create(),...d.ioConfig}});return d};p.open=function(){var d=U._asyncToGenerator(function*(b){throw new z("BaseRaster:open-not-implemented","open() is not implemented");});return function(b){return d.apply(this,arguments)}}();p.fetchTile=function(){var d=U._asyncToGenerator(function*(b,a,c,l={}){const h=l.tileInfo||this.rasterInfo.storageInfo.tileInfo;b=this.getTileExtentFromTileInfo(b,a,c,h);return this.fetchPixels(b,h.size[0],
h.size[1],l)});return function(b,a,c){return d.apply(this,arguments)}}();p.identify=function(){var d=U._asyncToGenerator(function*(b,a={}){a=this._getRequestOptionsWithSliceId(a);const {spatialReference:c,extent:l}=this.rasterInfo;var {datumTransformation:h}=a;h=v.projectPoint(b,c,h);if(!l.intersects(h)||N.isSome(this.rasterInfo.transform)&&(h=this.rasterInfo.transform.inverseTransform(h),!this.rasterInfo.nativeExtent.intersects(h)))return{location:h,value:null};let g=0;if(a.srcResolution)g=v.snapPyramid(a.srcResolution,
this.rasterInfo,this.ioConfig.sampling).pyramidLevel;else if(g=yield this.computeBestPyramidLevelForLocation(b,a),null==g)return{location:h,value:null};b=this.identifyPixelLocation(h,g,null);if(null===b)return{location:h,value:null};const {row:q,col:A,rowOffset:J,colOffset:G}=b;b=B.getRasterId(this.url,a.sliceId);const Q=`${g}/${q}/${A}`;let S=B.getBlock(b,null,Q);N.isNone(S)&&(S=this.fetchRawTile(g,q,A,a),B.putBlock(b,null,Q,S));a=yield S;if(N.isNone(a)||!a.pixels||0===a.pixels.length)return{location:h,
value:null};const W=J*this.rasterInfo.storageInfo.blockHeight+G;a=!a.mask||a.mask[W]?a.pixels.map(X=>X[W]):null;b=this.rasterInfo.dataType;return("vector-magdir"===b||"vector-uv"===b)&&1<(null==a?void 0:a.length)?(b="vector-magdir"===b?[a[0],a[1]]:k.uvComponentToVector([a[0],a[1]]),{location:h,value:a,magdirValue:b,pyramidLevel:g}):{location:h,value:a,pyramidLevel:g}});return function(b){return d.apply(this,arguments)}}();p.fetchPixels=function(){var d=U._asyncToGenerator(function*(b,a,c,l={}){b=
v.snapExtent(b);var h=v.getWorldWidth(b.spatialReference),g=v.getWorldWrapCount(b),q=v.getWorldWidth(this.rasterInfo.spatialReference);q=N.isSome(q)&&this.rasterInfo.extent.width>=q/2;l=this._getRequestOptionsWithSliceId(l);if(N.isNone(h)||0===g||1===g&&q)return this._fetchPixels(b,a,c,l);if(3<=g)return{extent:b,pixelBlock:null};const A=[],{xmin:J,xmax:G}=b,Q=Math.round(h/(G-J)*a),S=Q-Math.round((h/2-J)/(G-J)*a);let W=0;q=[];for(let M=0;M<=g;M++){var X=new n({xmin:0===M?J:-h/2,xmax:M===g?G-h*M:h/
2,ymin:b.ymin,ymax:b.ymax,spatialReference:b.spatialReference});const K=0===M?Q-S:M===g?a-W:Q;W+=K;q.push(K);X=this._fetchPixels(X,K,c,l);A.push(X)}h=(yield Promise.all(A)).map(M=>null==M?void 0:M.pixelBlock);g=null;a={width:a,height:c};g=this.rasterJobHandler?yield this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:h,srcMosaicSize:a,destDimension:null,coefs:null,sampleSpacing:null,interpolation:"nearest",alignmentInfo:null,blockWidths:q},l):E.mosaic(h,a,{blockWidths:q});l=v.projectExtent(b,
this.rasterInfo.spatialReference,l.datumTransformation);return{extent:b,srcExtent:l,pixelBlock:g}});return function(b,a,c){return d.apply(this,arguments)}}();p.fetchRawPixels=function(){var d=U._asyncToGenerator(function*(b,a,c,l){const {origin:h,blockBoundary:g}=this.rasterInfo.storageInfo,{blockWidth:q,blockHeight:A}=this.getBlockWidthHeight(b);let {x:J,y:G}=a,{width:Q,height:S,wrapCount:W}=c;var X=N.unwrap(this._getRasterTileAlignmentInfo(b,0));l.buffer&&(J-=l.buffer.cols,G-=l.buffer.rows,Q+=2*
l.buffer.cols,S+=2*l.buffer.rows);a=Math.floor(J/q);c=Math.floor(G/A);const M=Math.floor((J+Q-1)/q),K=Math.floor((G+S-1)/A);var Y=g[b];if(!Y)return null;const {minRow:Z,minCol:aa,maxCol:ba,maxRow:da}=Y;if(0===W&&(K<Z||M<aa||c>da||a>ba))return null;Y=[];let fa=!1;const ja=null==this.ioConfig.allowPartialFill?l.allowPartialFill:this.ioConfig.allowPartialFill;for(let ka=c;ka<=K;ka++)for(let ia=a;ia<=M;ia++){const ca=0===W||null==X||ia<X.worldColumnCountFromOrigin?ia:ia%X.worldColumnCountFromOrigin-X.originColumnOffset;
if(ka>=Z&&ca>=aa&&da>=ka&&ba>=ca){const na=this._fetchRawTile(b,ka,ca,l);ja?Y.push(new Promise(ma=>{na.then(ra=>ma(ra)).catch(()=>{fa=!0;ma(null)})})):Y.push(na)}else Y.push(null)}if(0===Y.length)return null;l=yield Promise.all(Y);X={height:(K-c+1)*A,width:(M-a+1)*q};({spatialReference:Y}=this.rasterInfo);b=this.getPyramidPixelSize(b);const {x:ha,y:ea}=b;return{extent:new n({xmin:h.x+a*q*ha,xmax:h.x+(M+1)*q*ha,ymin:h.y-(K+1)*A*ea,ymax:h.y-c*A*ea,spatialReference:Y}),pixelBlocks:l,mosaicSize:X,isPartiallyFilled:fa}});
return function(b,a,c,l){return d.apply(this,arguments)}}();p.fetchRawTile=function(d,b,a,c){throw new z("BaseRaster:read-not-implemented","fetchRawTile() is not implemented");};p.computeExtent=function(d){return v.projectExtent(this.rasterInfo.extent,d)};p.decodePixelBlock=function(d,b){return!this.rasterJobHandler||b.useCanvas?F.decode(d,b):this.rasterJobHandler.decode({data:d,options:b})};p.request=function(){var d=U._asyncToGenerator(function*(b,a,c){var l,h;const {customFetchParameters:g}=this.ioConfig,
{range:q,query:A,headers:J}=a;c=null!=(l=null!=(h=c)?h:a.retryCount)?l:this.ioConfig.retryCount;l=q?{Range:`bytes=${q.from}-${q.to}`}:null;try{return yield P(b,{...a,query:{...A,...g},headers:{...J,...l}})}catch(G){if(0<c)return c--,this.request(b,a,c);throw G;}});return function(b,a,c){return d.apply(this,arguments)}}();p.getSliceIndex=function(d){const {multidimensionalInfo:b}=this.rasterInfo;if(!N.isSome(b)||!N.isSome(d)||0===d.length)return null;let a=0;const c=d[0].variableName;for(let g=0;g<
b.variables.length;g++){var l=b.variables[g];const q=l.dimensions;if(l.name!==c){a+=q.map(J=>this._getDimensionValuesCount(J)).reduce((J,G)=>J+G);break}l=q.map(J=>this._getDimensionValuesCount(J));const A=q.length;for(let J=0;J<A;J++){var h=d.filter(G=>G.dimensionName===q[J].name)[0];if(null==h)return null;h=Array.isArray(h.values[0])?h.values[0][0]:h.values[0];h=this._getIndexFromDimensions(h,q[J]);if(-1===h)return null;l.shift();a=J===A-1?a+h:a+h*l.reduce((G,Q)=>G+Q)}}return a};p.getTileExtentFromTileInfo=
function(d,b,a,c){d=c.lodAt(d);return this.getTileExtent({x:d.resolution,y:d.resolution},b,a,c.origin,c.spatialReference,c.size)};p.updateTileInfo=function(){const {storageInfo:d,spatialReference:b,extent:a,pixelSize:c}=this.rasterInfo;if(!d.tileInfo){const h=[];var l=d.maximumPyramidLevel||0;let g=Math.max(c.x,c.y),q=1/.0254*96*g;for(let A=0;A<=l;A++)h.push({level:l-A,resolution:g,scale:q}),g*=2,q*=2;l=new m({x:a.xmin,y:a.ymax,spatialReference:b});d.tileInfo=new O({origin:l,size:[d.blockWidth,d.blockHeight],
spatialReference:b,lods:h});d.isVirtualTileInfo=!0}};p.createRemoteDatasetStorageInfo=function(d,b=512,a=512,c){const {width:l,height:h,nativeExtent:g,pixelSize:q,spatialReference:A}=d,J=new m({x:g.xmin,y:g.ymax,spatialReference:A});null==c&&(c=Math.max(0,Math.round(Math.log(Math.max(l,h))/Math.LN2-8)));const G=this.computeBlockBoundary(g,512,512,{x:g.xmin,y:g.ymax},[q],c);d.storageInfo=new y({blockWidth:b,blockHeight:a,pyramidBlockWidth:b,pyramidBlockHeight:a,origin:J,firstPyramidLevel:1,maximumPyramidLevel:c,
blockBoundary:G})};p.computeBestPyramidLevelForLocation=function(){var d=U._asyncToGenerator(function*(b,a){return 0});return function(b){return d.apply(this,arguments)}}();p.computeBlockBoundary=function(d,b,a,c,l,h=0,g=2){if(1===l.length&&0<h){l=[...l];let {x:J,y:G}=l[0];for(let Q=0;Q<h;Q++)J*=g,G*=g,l.push({x:J,y:G})}h=[];const {x:q,y:A}=c;for(c=0;c<l.length;c++){const {x:J,y:G}=l[c];h.push({minCol:Math.floor((d.xmin-q+.1*J)/b/J),maxCol:Math.floor((d.xmax-q-.1*J)/b/J),minRow:Math.floor((A-d.ymax+
.1*G)/a/G),maxRow:Math.floor((A-d.ymin-.1*G)/a/G)})}return h};p.getPyramidPixelSize=function(d){const {nativePixelSize:b}=this.rasterInfo,{pyramidResolutions:a,pyramidScalingFactor:c}=this.rasterInfo.storageInfo;if(0===d)return b;if(N.isSome(a)&&a.length)return a[d-1];d=c**d;return{x:b.x*d,y:b.y*d}};p.identifyPixelLocation=function(d,b,a){const {spatialReference:c,nativeExtent:l}=this.rasterInfo,{blockWidth:h,blockHeight:g,maximumPyramidLevel:q,origin:A}=this.rasterInfo.storageInfo;d=v.projectPoint(d,
c,a);if(!l.intersects(d)||0>b||b>q)return null;a=this.getPyramidPixelSize(b);const {x:J,y:G}=a;a=(A.y-d.y)/G/g;const Q=(d.x-A.x)/J/h;return{pyramidLevel:b,row:Math.floor(a),col:Math.floor(Q),rowOffset:Math.min(g-1,Math.floor((a-Math.floor(a))*g)),colOffset:Math.min(h-1,Math.floor((Q-Math.floor(Q))*h)),srcLocation:d}};p.getTileExtent=function(d,b,a,c,l,h){const [g,q]=h;a=c.x+a*g*d.x;b=c.y-b*q*d.y;return new n({xmin:a,xmax:a+g*d.x,ymin:b-q*d.y,ymax:b,spatialReference:l})};p.getBlockWidthHeight=function(d){return{blockWidth:0<
d?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,blockHeight:0<d?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight}};p.isBlockOutside=function(d,b,a){d=this.rasterInfo.storageInfo.blockBoundary[d];return!d||d.maxRow<b||d.maxCol<a||d.minRow>b||d.minCol>a};p._fetchPixels=function(){var d=U._asyncToGenerator(function*(b,a,c,l={}){var h=v.getWorldWrapCount(b);if(2<=h)return{extent:b,pixelBlock:null};var g=this._getSourceDataInfo(b,
a,c,l);const {pyramidLevel:q,pyramidResolution:A,srcResolution:J,srcExtent:G,srcWidth:Q,srcHeight:S}=g;if(0===Q||0===S)return{extent:b,srcExtent:G,pixelBlock:null};var W=N.unwrap(this.rasterInfo.transform);"gcs-shift"===(null==W?void 0:W.type)&&(h=v.getWorldWrapCount(g.srcExtent,!0));var X=this.rasterInfo.storageInfo,M={x:Math.floor((G.xmin-X.origin.x)/A.x+.1),y:Math.floor((X.origin.y-G.ymax)/A.y+.1)};g=yield this.fetchRawPixels(q,M,{width:Q,height:S,wrapCount:h},l);if(!g)return{extent:b,srcExtent:G,
pixelBlock:null};var K=0<q?X.pyramidBlockWidth:X.blockWidth;X=0<q?X.pyramidBlockHeight:X.blockHeight;M=K===Q&&X===S&&0===M.x%K&&0===M.y%X;const Y=new m({x:(b.xmax-b.xmin)/a,y:(b.ymax-b.ymin)/c,spatialReference:b.spatialReference}),Z=!b.spatialReference.equals(this.rasterInfo.spatialReference),{datumTransformation:aa}=l;if(!Z&&M&&1===g.pixelBlocks.length&&K===a&&X===c&&J.x===Y.x&&J.y===Y.y)return{extent:b,srcExtent:G,pixelBlock:g.pixelBlocks[0]};h=this.rasterJobHandler?yield this.rasterJobHandler.getProjectionOffsetGrid({projectedExtent:b,
srcBufferExtent:g.extent,pixelSize:Y.toJSON(),datumTransformation:aa,rasterTransform:W,hasWrapAround:0<h,isAdaptive:!1!==this.ioConfig.optimizeProjectionAccuracy},l):v.getProjectionOffsetGrid({projectedExtent:b,srcBufferExtent:g.extent,pixelSize:Y,datumTransformation:aa,rasterTransform:W,hasWrapAround:0<h,isAdaptive:!1});W=!l.requestRawData;K={rows:h.spacing[0],cols:h.spacing[1]};X=N.unwrap(this._getRasterTileAlignmentInfo(q,g.extent.xmin));const {pixelBlocks:ba,mosaicSize:da,isPartiallyFilled:fa}=
g;this.rasterJobHandler?a=yield this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:ba,srcMosaicSize:da,destDimension:W?{width:a,height:c}:null,coefs:W?h.coefficients:null,sampleSpacing:W?K:null,interpolation:l.interpolation,alignmentInfo:X,blockWidths:null},l):(g=E.mosaic(ba,da,{alignmentInfo:X}),a=W?E.approximateTransform(g,{width:a,height:c},h.coefficients,K,l.interpolation):g);return l.requestRawData?{srcExtent:G,pixelBlock:a,transformGrid:h,extent:b,isPartiallyFilled:fa}:{srcExtent:G,extent:b,
pixelBlock:a}});return function(b,a,c){return d.apply(this,arguments)}}();p._fetchRawTile=function(d,b,a,c){var l=this.rasterInfo.storageInfo.blockBoundary[d];if(!l)return Promise.resolve(null);const {minRow:h,minCol:g,maxCol:q,maxRow:A}=l;if(b<h||a<g||b>A||a>q)return Promise.resolve(null);const J=B.getRasterId(this.url,c.sliceId),G=`${d}/${b}/${a}`;l=B.getBlock(J,c.registryId,G);if(N.isNone(l)){const Q=new AbortController;l=this.fetchRawTile(d,b,a,{...c,signal:Q.signal});B.putBlock(J,c.registryId,
G,l,Q);l.catch(()=>B.deleteBlock(J,c.registryId,G))}if(c.signal)I.onAbort(c,()=>{B.decreaseRefCount(J,c.registryId,G)});return l};p._getIndexFromDimensions=function(d,b){const {extent:a,interval:c,unit:l,values:h}=b;if(null!=h&&h.length)return Array.isArray(h[0])?h.findIndex(J=>J[0]<=d&&J[1]>=d):h.indexOf(d);if(d>a[1])return-1;const g=a[0];let q=-1;if("ISO8601"===l){var A;switch((null==(A=b.intervalUnit)?void 0:A.toLowerCase())||"seconds"){case "seconds":q=Math.round((d-g)/1E3/c);break;case "minutes":q=
Math.round((d-g)/6E4/c);break;case "hours":q=Math.round((d-g)/36E5/c);break;case "days":q=Math.round((d-g)/864E5/c);break;case "years":q=Math.round(((new Date(d)).getUTCFullYear()-(new Date(g)).getUTCFullYear())/c);break;case "decades":q=Math.round(((new Date(d)).getUTCFullYear()-(new Date(g)).getUTCFullYear())/10/c)}return q}return Math.round((d-g)/c)};p._getDimensionValuesCount=function(d){const {extent:b,interval:a,unit:c,values:l}=d;let h=(null==l?void 0:l.length)||0;if(h)return h;const g=b[0];
if(0===h&&"ISO8601"===c){var q;switch((null==(q=d.intervalUnit)?void 0:q.toLowerCase())||"seconds"){case "seconds":h=Math.round((b[1]-b[0])/1E3/a);break;case "minutes":h=Math.round((b[1]-b[0])/6E4/a);break;case "hours":h=Math.round((b[1]-b[0])/36E5/a);break;case "days":h=Math.round((b[1]-b[0])/864E5/a);break;case "years":h=Math.round(((new Date(b[1])).getUTCFullYear()-(new Date(g)).getUTCFullYear())/a);break;case "decades":h=Math.round(((new Date(b[1])).getUTCFullYear()-(new Date(g)).getUTCFullYear())/
10/a)}return h}return Math.round((b[1]-b[0])/a)};p._getRasterTileAlignmentInfo=function(d,b){null==this._rasterTileAlighmentInfo&&(this._rasterTileAlighmentInfo=v.getRasterDatasetAlignmentInfo(this.rasterInfo));return N.isSome(this._rasterTileAlighmentInfo.pyramidsInfo)?{startX:b,halfWorldWidth:this._rasterTileAlighmentInfo.halfWorldWidth,hasGCSSShiftTransform:this._rasterTileAlighmentInfo.hasGCSSShiftTransform,...this._rasterTileAlighmentInfo.pyramidsInfo[d]}:null};p._getSourceDataInfo=function(d,
b,a,c={}){const l={datumTransformation:c.datumTransformation,pyramidLevel:0,pyramidResolution:null,srcExtent:null,srcHeight:0,srcResolution:null,srcWidth:0};c.srcResolution&&(l.srcResolution=c.srcResolution,this._updateSourceDataInfo(d,l));var h=this.rasterInfo.storageInfo.maximumPyramidLevel||0;const {srcWidth:g,srcHeight:q,pyramidLevel:A}=l;var J=g/b;const G=q/a,Q=A<h&&16<=J*G;if(Q||A===h&&(8<J||8<G)||0===g||0===q){var S=new m({x:(d.xmax-d.xmin)/b,y:(d.ymax-d.ymin)/a,spatialReference:d.spatialReference});
S=v.projectResolution(S,this.rasterInfo.spatialReference,d,l.datumTransformation);const W=!S||c.srcResolution&&S.x+S.y<c.srcResolution.x+c.srcResolution.y;Q&&c.srcResolution&&W&&(J=Math.round(Math.log(Math.max(J,G))/Math.LN2)-1,h-A+3>=J&&(h=2**J,S={x:c.srcResolution.x*h,y:c.srcResolution.y*h}));S&&(l.srcResolution=S,this._updateSourceDataInfo(d,l))}if(8<l.srcWidth/b||8<l.srcHeight/a)l.srcWidth=0,l.srcHeight=0;return l};p._updateSourceDataInfo=function(d,b){b.srcWidth=0;b.srcHeight=0;var a=this.rasterInfo.spatialReference;
const {srcResolution:c,datumTransformation:l}=b,{pyramidLevel:h,pyramidResolution:g,excessiveReading:q}=v.snapPyramid(c,this.rasterInfo,this.ioConfig.sampling);q||(d=b.srcExtent||v.projectExtent(d,a,l),null!=d&&((a=N.unwrap(this.rasterInfo.transform))&&(d=a.inverseTransform(d)),b.srcExtent=d,a=Math.ceil((d.xmax-d.xmin)/g.x-.1),d=Math.ceil((d.ymax-d.ymin)/g.y-.1),b.pyramidLevel=h,b.pyramidResolution=g,b.srcWidth=a,b.srcHeight=d))};p._getRequestOptionsWithSliceId=function(d){N.isSome(this.rasterInfo.multidimensionalInfo)&&
null==d.sliceId&&(d={...d,sliceId:this.getSliceIndex(d.multidimensionalDefinition)});return d};U._createClass(f,[{key:"url",set:function(d){this._set("url",u.sanitizeUrl(d,V.getLogger(this.declaredClass)))}}]);return f}(L.EsriPromiseMixin(T.JSONSupport));R.__decorate([x.property()],D.prototype,"_rasterTileAlighmentInfo",void 0);R.__decorate([x.property(r.url)],D.prototype,"url",null);R.__decorate([x.property({type:String,json:{write:!0}})],D.prototype,"datasetName",void 0);R.__decorate([x.property({type:String,
json:{write:!0}})],D.prototype,"datasetFormat",void 0);R.__decorate([x.property()],D.prototype,"rasterInfo",void 0);R.__decorate([x.property()],D.prototype,"ioConfig",void 0);R.__decorate([x.property()],D.prototype,"sourceJSON",void 0);return D=R.__decorate([C.subclass("esri.layers.support.rasterDatasets.BaseRaster")],D)})},"esri/layers/support/rasterDatasets/RawBlockCache":function(){define("exports ../../../geometry ../../../core/maybe ./EphemeralBlockCache ../rasterFunctions/rasterProjectionHelper ../../../geometry/Point".split(" "),
function(U,R,D,P,z,T){function V(I,x){if(!N.has(I))return null;I=N.get(I);return null==I[x]?null:I[x]}const N=new Map,L=new P;U.decreaseRefCount=function(I,x,t){if(!N.has(I))return null==x?L.decreaseRefCount(I,t):0;const w=N.get(I);if(null==w[x])return L.decreaseRefCount(I,t);x=w[x].cache;if(x.has(t)){I=x.get(t);I.refCount--;if(0===I.refCount){x.delete(t);for(x=0;x<w.length;x++)w[x]&&w[x].cache.has(t)&&w[x].cache.delete(t);I.controller&&I.controller.abort()}return I.refCount}return 0};U.deleteBlock=
function(I,x,t){if(N.has(I)){var w=N.get(I);null==w[x]?L.deleteBlock(I,t):w[x].cache.delete(t)}else null==x&&L.deleteBlock(I,t)};U.deleteRaster=function(I){N.delete(I)};U.getBlock=function(I,x,t){if(!N.has(I))return null==x?L.getBlock(I,t):null;var w=N.get(I);if(null==w[x]){for(x=0;x<w.length;x++)if(w[x]&&w[x].cache.has(t))return t=w[x].cache.get(t),t.refCount++,t.block;return L.getBlock(I,t)}I=w[x].cache;if(I.has(t))return t=I.get(t),t.refCount++,t.block;for(let H=0;H<w.length;H++)if(H!==x&&w[H]&&
w[H]&&w[H].cache.has(t))return w=w[H].cache.get(t),w.refCount++,I.set(t,w),w.block;return null};U.getRasterId=function(I,x){return null==x?I:`${I}?sliceId=${x}`};U.putBlock=function(I,x,t,w,H=null){if(N.has(I)){var C=N.get(I);if(null==C[x])L.putBlock(I,t,w,H);else{var u={refCount:1,block:w,isResolved:!1,isRejected:!1,controller:H};w.then(()=>u.isResolved=!0).catch(()=>u.isRejected=!0);C[x].cache.set(t,u)}}else null==x&&L.putBlock(I,t,w,H)};U.register=function(I,x){x={extent:null,rasterInfo:x,cache:new Map};
if(N.has(I))return I=N.get(I),I.push(x),I.length-1;N.set(I,[x]);return 0};U.unregister=function(I,x){if(N.has(I)){const t=N.get(I);t[x]=null;t.some(w=>null!=w)||N.delete(I)}};U.update=function(I,x,t,w,H,C,u=null){I=V(I,x);x=I.extent;const {cache:r,rasterInfo:y}=I;if(!x||x.xmin!==t.xmin||x.xmax!==t.xmax||x.ymin!==t.ymin||x.ymax!==t.ymax){x=t.clone().normalize();var {spatialReference:O,transform:B}=y,F=new Set;for(let e=0;e<x.length;e++){var E=x[e];if(E.xmax-E.xmin<=w||E.ymax-E.ymin<=w)continue;var v=
z.projectExtent(E,O,u);D.isSome(B)&&(v=B.inverseTransform(v));var k=new T({x:w,y:w,spatialReference:E.spatialReference});if(null==H&&(H=z.projectResolution(k,O,E,u),!H))return;const {pyramidLevel:f,pyramidResolution:p,excessiveReading:d}=z.snapPyramid(H,y,C||"closest");if(d)return;({storageInfo:E}=y);var {origin:m}=E;k=Math.max(0,Math.floor((v.xmin-m.x)/p.x));m=Math.max(0,Math.floor((m.y-v.ymax)/p.y));const b=0<f?E.pyramidBlockWidth:E.blockWidth,a=0<f?E.pyramidBlockHeight:E.blockHeight;E=Math.max(0,
Math.floor(k/b)-1);var n=Math.max(0,Math.floor(m/a)-1);k=Math.floor((k+Math.ceil((v.xmax-v.xmin)/p.x-.1)-1)/b)+1;v=Math.floor((m+Math.ceil((v.ymax-v.ymin)/p.y-.1)-1)/a)+1;for(m=n;m<=v;m++)for(n=E;n<=k;n++)F.add(`${f}/${m}/${n}`)}r.forEach((e,f)=>{F.has(f)||(e=r.get(f),(null==e||e.isResolved||e.isRejected)&&r.delete(f))});I.extent={xmin:t.xmin,ymin:t.ymin,xmax:t.xmax,ymax:t.ymax}}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/EphemeralBlockCache":function(){define(function(){return function(){function U(D=
15E3,P=5E3){this._timer=null;this._cachedBlocks=new Map;this._size=-1;this._duration=D;this._interval=Math.min(D,P)}var R=U.prototype;R.decreaseRefCount=function(D,P){D=D+"/"+P;P=this._cachedBlocks;if(P.has(D)){const z=P.get(D);z.refCount--;0>=z.refCount&&(P.delete(D),z.controller&&z.controller.abort());return z.refCount}return 0};R.getBlock=function(D,P){D=D+"/"+P;P=this._cachedBlocks;if(P.has(D)){const z=P.get(D);z.ts=Date.now();z.refCount++;P.delete(D);P.set(D,z);return z.block}return null};R.putBlock=
function(D,P,z,T=null){const V=this._cachedBlocks;D=D+"/"+P;V.has(D)?(z=V.get(D),z.ts=Date.now(),z.refCount++):V.set(D,{block:z,ts:Date.now(),refCount:1,controller:T});this.trim();this.updateTimer()};R.deleteBlock=function(D,P){const z=this._cachedBlocks;D=D+"/"+P;z.has(D)&&z.delete(D)};R.updateMaxSize=function(D){this._size=D;this.trim()};R.empty=function(){this._cachedBlocks.clear();this.clearTimer()};R.getCurrentSize=function(){return this._cachedBlocks.size};R.updateTimer=function(){if(null==
this._timer){var D=this._cachedBlocks;this._timer=setInterval(()=>{const P=Array.from(D),z=Date.now();for(let T=0;T<P.length;T++)if(P[T][1].ts<=z-this._duration)D.delete(P[T][0]);else break;0===D.size&&this.clearTimer()},this._interval)}};R.trim=function(){const D=this._cachedBlocks;if(!(-1===this._size||this._size>=D.size)){var P=Array.from(D);for(let z=0;z<P.length-this._size;z++)D.delete(P[z][0])}};R.clearTimer=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)};return U}()})},
"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point".split(" "),function(U,R,D,P,z,T,V,N,L){function I(e,f,p){return!V.canProjectWithoutEngine(e,f,p)}function x(e,f,p){if((e=I(e,f,p))&&!V.isLoaded())throw new P("rasterprojectionhelper-project","projection engine is not loaded");
return e}function t(){t=R._asyncToGenerator(function*(){if(V.isLoaded())return null;yield V.load()});return t.apply(this,arguments)}function w(e,f,p,d=null){if(e.spatialReference.equals(f))return e;x(e.spatialReference,f,d);p=p.center;e=new N({xmin:p.x-e.x/2,xmax:p.x+e.x/2,ymin:p.y-e.y/2,ymax:p.y+e.y/2,spatialReference:e.spatialReference});f=V.project(e,f,d);return z.isNone(f)?null:{x:f.xmax-f.xmin,y:f.ymax-f.ymin}}function H(e,f=.01){return T.getMetersPerUnitForSR(e)?f/T.getMetersPerUnitForSR(e):
0}function C(e,f,p=null,d=!0){const b=e.spatialReference;if(b.equals(f))return e;x(b,f,p);p=V.project(e,f,p);if(d&&f.isGeographic){const [a,c]=F(b,!0);(f=H(b))&&null!=a&&null!=c&&(Math.abs(e.x-a)<f&&5E-4>Math.abs(180-p.x)?p.x-=360:Math.abs(e.x-c)<f&&5E-4>Math.abs(180+p.x)&&(p.x+=360))}return p}function u(e,f,p=null){const d=e[0].spatialReference;if(d.equals(f))return e;x(d,f,p);return V.project(e,f,p)}function r(e){const f=B(e[0].spatialReference);if(2>e.length||!z.isSome(f))return e[0];let {xmin:p,
xmax:d,ymin:b,ymax:a}=e[0];for(let c=1;c<e.length;c++){const l=e[c];d=l.xmax+f*c;b=Math.min(b,l.ymin);a=Math.max(a,l.ymax)}return new N({xmin:p,xmax:d,ymin:b,ymax:a,spatialReference:e[0].spatialReference})}function y(e,f,p=null,d=!0){if(e.spatialReference.equals(f))return e;const b=v(e),a=B(e.spatialReference,!0);if(!z.isSome(a)||0===b)return O(e,f,p,d);e=e.clone().normalize().map(c=>O(c,f,p,d));return r(e)}function O(e,f,p=null,d=!0){const b=e.spatialReference;if(b.equals(f))return e;x(b,f,p);const a=
V.project(e,f,p);let [c,l]=F(b,!0);a&&d&&b.isWebMercator&&f.isGeographic&&null!=c&&null!=l&&(.001>Math.abs(e.xmin-c)&&1E3<Math.abs(l-e.xmax)&&5E-4>Math.abs(180-a.xmax)&&(a.xmin=-180,d=[],d.push(new L(e.xmax,e.ymin,b)),d.push(new L(e.xmax,(e.ymin+e.ymax)/2,b)),d.push(new L(e.xmax,e.ymax,b)),d=d.map(h=>C(h,f,p)).filter(h=>!isNaN(null==h?void 0:h.x)).map(h=>h.x),a.xmax=Math.max.apply(null,d)),.001>Math.abs(e.xmax-l)&&1E3<Math.abs(c-e.xmin)&&5E-4>Math.abs(180+a.xmin)&&(a.xmax=180,d=[],d.push(new L(e.xmin,
e.ymin,b)),d.push(new L(e.xmin,(e.ymin+e.ymax)/2,b)),d.push(new L(e.xmin,e.ymax,b)),e=d.map(h=>C(h,f,p)).filter(h=>!isNaN(null==h?void 0:h.x)).map(h=>h.x),a.xmin=Math.min.apply(null,e)));[c,l]=F(f,!0);(e=H(f))&&null!=c&&null!=l&&a&&(Math.abs(a.xmin-c)<e&&(a.xmin=c),Math.abs(a.xmax-l)<e&&(a.xmax=l));return a}function B(e,f=!1){return e.isWebMercator?2*(f?2.0037508342787E7:2.0037508342788905E7):e.wkid&&e.isGeographic?360:2*n[e.wkid]||null}function F(e,f=!1){const p=[];e=B(e,f);z.isSome(e)&&(p.push(-e/
2),p.push(e/2));return p}function E(e,f,p,d){e=(e-f)/p;0!==e-Math.floor(e)?e=Math.floor(e):d&&--e;return e}function v(e,f=!1){const p=B(e.spatialReference);if(!z.isSome(p))return 0;const d=f?0:-(p/2);f=E(e.xmax,d,p,!0);e=E(e.xmin,d,p,!1);return f-e}function k(e){const {projectedExtent:f,srcBufferExtent:p,pixelSize:d,datumTransformation:b,rasterTransform:a}=e;var c=f.spatialReference,l=p.spatialReference;x(c,l);const {xmin:h,ymin:g,xmax:q,ymax:A}=f,J=B(l),G=e.hasWrapAround||"gcs-shift"===(null==a?
void 0:a.type);e=e.spacing||[32,32];var Q=e[0]*d.x,S=e[1]*d.y,W=Math.ceil((q-h)/Q-.1/e[0])+1,X=Math.ceil((A-g)/S-.1/e[1])+1;const M=[];let K,Y=0;var Z=[];for(let aa=0;aa<W;aa++)for(let ba=0;ba<X;ba++)Z.push(new L({x:h+Q*aa,y:A-S*ba,spatialReference:c}));c=u(Z,l,b);for(l=0;l<W;l++){Q=[];for(S=0;S<X;S++)Z=c[l*X+S],a&&(Z=a.inverseTransform(Z)),Q.push(Z),0<l&&G&&Z&&K[S]&&z.isSome(J)&&Z.x<K[S].x&&(Z.x+=J),Z?(M.push((Z.x-p.xmin)/(p.xmax-p.xmin)),M.push((p.ymax-Z.y)/(p.ymax-p.ymin))):(M.push(NaN),M.push(NaN),
Y++);K=Q}return{offsets:M,error:null,coefficients:null,outofBoundPointCount:Y,spacing:e,size:[W-1,X-1]}}const m=function(e,f,p){var d=(e[0]+e[4]+e[4*f.cols]+e[4*f.cols+4])/4;const b=(e[1]+e[5]+e[4*f.rows+1]+e[4*f.rows+5])/4,a=(e[4*f.cols]-e[0]+e[4*f.cols+4]-e[4])/p[0]*.5;p=(e[4*f.cols+1]-e[1]+e[4*f.cols+5]-e[5])/p[1]*.5;d=0===a||isNaN(a)?0:Math.abs(d-e[2*f.rows+2])/Math.abs(a);e=0===p||isNaN(p)?0:Math.abs(b-e[2*f.rows+3])/Math.abs(p);return[d,e]},n={3395:2.0037508342789244E7,3410:1.7334193943686873E7,
3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,
54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7};U.computeProjectedScales=function(e,f,p=512,d=!0){const {extent:b,spatialReference:a,pixelSize:c}=e,l=w(new L({x:c.x,y:c.y,spatialReference:a}),f,b);if(null==l)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var h=(l.x+l.y)/2,g=T.getMetersPerUnitForSR(f);h=h*g*96*39.37;const q=
f.isGeographic?256/p*2.958287637958547E8:256/p*5.91657527591555E8;p="vector-magdir"===e.dataType||"vector-uv"===e.dataType;const A=y(b,f);p||d&&(f.isGeographic||f.isWebMercator)&&(p=0>A.xmin*A.xmax);d=h;if(p)d=q,e=f.isGeographic?1.341104507446289E-6:.29858214164761665,g=96*e*g*39.37,f=w(new L({x:e,y:e,spatialReference:{wkid:f.isGeographic?4326:3857}}),a,A),f.x*=d/g,f.y*=d/g;else{f={x:c.x,y:c.y};e=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);for(g=0;d<.5005*q&&g<e;)g++,d*=2,f.x*=2,f.y*=
2;1.001>=Math.max(d,q)/Math.min(d,q)&&(d=q)}e=[d];g=[{x:f.x,y:f.y}];for(h=Math.min(70.5310735,h)/1.001;d>=h;)d/=2,f.x/=2,f.y/=2,e.push(d),g.push({x:f.x,y:f.y});return{projectedPixelSize:l,scales:e,srcResolutions:g,isCustomTilingScheme:!p}};U.defaultGridSpacing=32;U.defaultProjectionToleranceInPixels=4;U.getDefaultDatumTransformationForDataset=function(e,f,p){return x(e.spatialReference,f)?p?V.getTransformation(f,e.spatialReference,e):V.getTransformation(e.spatialReference,f,e):null};U.getProjectionOffsetGrid=
function(e){var f=e.isAdaptive&&null==e.spacing,p=e.spacing||[32,32];let d=k(e);var b={cols:d.size[0]+1,rows:d.size[1]+1},a=m(d.offsets,b,p),c=(a[0]+a[1])/2,l=0<d.outofBoundPointCount&&d.outofBoundPointCount<d.offsets.length/2;f&&(l||4<c)&&(d=k({...e,spacing:[4,4]}),b={cols:d.size[0]+1,rows:d.size[1]+1},a=m(d.offsets,b,p));d.error=a;e=d;{f=d.offsets;const {cols:G,rows:Q}=b;b=new Float32Array((G-1)*(Q-1)*12);p=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);a=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(c=
0;c<G-1;c++){for(var h=0;h<Q-1;h++){var g=c*Q*2+2*h,q=f[g];const S=f[g+1];var A=f[g+2],J=f[g+3];g+=2*Q;const W=f[g],X=f[g+1],M=f[g+2];g=f[g+3];let K=0,Y=12*(h*(G-1)+c);for(let Z=0;3>Z;Z++)b[Y++]=p[K++]*q+p[K++]*A+p[K++]*M;K=0;for(A=0;3>A;A++)b[Y++]=p[K++]*S+p[K++]*J+p[K++]*g;K=0;for(J=0;3>J;J++)b[Y++]=a[K++]*q+a[K++]*W+a[K++]*M;K=0;for(q=0;3>q;q++)b[Y++]=a[K++]*S+a[K++]*X+a[K++]*g}if(l)for(h=0;h<b.length;h++)isNaN(b[h])&&(b[h]=-1)}l=b}e.coefficients=l;return d};U.getRasterDatasetAlignmentInfo=function(e){const f=
e.storageInfo.origin.x;var p=B(e.spatialReference,!0);if(!z.isSome(p))return{originX:f,halfWorldWidth:null,pyramidsInfo:null};const d=p/2,{nativePixelSize:b,storageInfo:a,extent:c}=e,{maximumPyramidLevel:l,blockWidth:h,pyramidScalingFactor:g}=a;let q=b.x;const A=[];e=z.isSome(e.transform)&&"gcs-shift"===e.transform.type;const J=f+(e?0:d);p=e?p-f:d-f;for(let G=0;G<=l;G++){const Q=(c.xmax-f)/q/h,S=p/q/h;A.push({resolutionX:q,blockWidth:h,datsetColumnCount:0===Q-Math.floor(Q)?Q:Math.ceil(Q),worldColumnCountFromOrigin:0===
S-Math.floor(S)?S:Math.ceil(S),leftMargin:Math.round(J/q)%h,rightPadding:(h-Math.round(p/q)%h)%h,originColumnOffset:Math.floor(J/q/h)});q*=g}return{originX:f,halfWorldWidth:d,pyramidsInfo:A,hasGCSSShiftTransform:e}};U.getWorldWidth=B;U.getWorldWrapCount=v;U.load=function(){return t.apply(this,arguments)};U.minimumGridSpacing=4;U.projectExtent=y;U.projectPoint=C;U.projectResolution=w;U.requirePE=I;U.snapExtent=function(e){e=e.clone().normalize();return 1===e.length?e[0]:r(e)};U.snapPyramid=function(e,
f,p){const {storageInfo:d,pixelSize:b}=f;let a=!1;var {pyramidResolutions:c}=d;if(z.isSome(c)&&c.length){e=(e.x+e.y)/2;var l=c[c.length-1];l=(l.x+l.y)/2;var h=(b.x+b.y)/2;if(e<=h)var g=0;else if(e>=l)g=c.length,a=8<e/l;else{l=h;for(let q=1;q<=c.length;q++){h=(c[q-1].x+c[q-1].y)/2;if(e<=h){e===h?g=q:"down"===p?(g=q-1,a=8<e/l):g="up"===p?q:e-l>h-e||2<e/l?q:q-1;break}l=h}}p=0===g?b:c[g-1];return{pyramidLevel:g,pyramidResolution:new L({x:p.x,y:p.y,spatialReference:f.spatialReference}),excessiveReading:a}}g=
Math.log(e.x/b.x)/Math.LN2;e=Math.log(e.y/b.y)/Math.LN2;c=f.storageInfo.maximumPyramidLevel||0;g="down"===p?Math.floor(Math.min(g,e)):"up"===p?Math.ceil(Math.max(g,e)):Math.round((g+e)/2);0>g?g=0:g>c&&(a=g>c+3,g=c);p=2**g;f=new L({x:p*f.nativePixelSize.x,y:p*f.nativePixelSize.y,spatialReference:f.spatialReference});return{pyramidLevel:g,pyramidResolution:f,excessiveReading:a}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ../../../chunks/TiffDecoder ../../../chunks/LercCodec ./Lzw ../../../chunks/Zlib ./Raw ./utils".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t){function w(d,b){if(!t.isPlatformLittleEndian)throw new D("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:a,height:c,pixelType:l}=b;var h=m(l);const g=h.pixelTypeCtor;b=null==b.noDataValue?h.noDataValue:b.noDataValue;h=0;let q,A=0,J;const G=d.byteLength-10;for(;A<G;){var Q=N.decode(d,{inputOffset:A,encodedMaskData:q,returnMask:0===h?!0:!1,returnEncodedMask:0===h?!0:!1,returnFileInfo:!0,pixelType:g,noDataValue:b});if(a&&c&&
(Q.width!==a||Q.height!==c))throw new D("rasterCoded:decode","lerc decoded result has width or height different from specified in options");A=Q.fileInfo.eofOffset;0===h&&(q=Q.encodedMaskData,J=new P({width:Q.width,height:Q.height,pixels:[],pixelType:l,mask:Q.maskData,statistics:[]}));h++;J.addData({pixels:Q.pixelData,statistics:{minValue:Q.minValue,maxValue:Q.maxValue,noDataValue:Q.noDataValue}});10<G-A&&(Q=String.fromCharCode.apply(null,new Uint8Array(d,A,10)),A+=-1<Q.indexOf("CntZ")?Q.indexOf("CntZ"):
0)}return J}function H(d,b){if(!t.isPlatformLittleEndian)throw new D("rasterCoded:decode","lerc decoder is not supported on big endian platform");var a=0,c=b.offset||0,l=0;let h;let g;const q=b.eof||d.byteLength-10,A=[],{width:J,height:G}=b;for(b=0;c<q;){var Q;var S=V.Lerc2Codec.decode(d,{inputOffset:c,maskData:h,returnFileInfo:!0});if(J&&G&&(S.width!==J||S.height!==G))throw new D("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");c=S.fileInfo.eofOffset;
h=S.maskData;0===a&&(l=S.fileInfo.numValidPixel,g=new P({width:S.width,height:S.height,pixels:[],pixelType:S.fileInfo.pixelType,mask:h,statistics:[]}));S.fileInfo.mask&&0<S.fileInfo.mask.numBytes&&b++;h&&A.push(h);if(1<S.dimCount&&(null==(Q=S.pixelData)?void 0:Q.length)===S.width*S.height*S.dimCount){var W,X,M,K;S.pixelData=S.pixelData.slice(-S.width*S.height);const Y=null==(W=S.dimStats)?void 0:null==(X=W.minValues)?void 0:X[S.dimCount-1],Z=null==(M=S.dimStats)?void 0:null==(K=M.maxValues)?void 0:
K[S.dimCount-1];null!=Y&&null!=Z&&(S.minValue=Y,S.maxValue=Z)}a++;g.addData({pixels:S.pixelData,statistics:{minValue:S.minValue,maxValue:S.maxValue}});10<q-c&&(S=String.fromCharCode.apply(null,new Uint8Array(d,c,10)),c+=-1<S.indexOf("Lerc")?S.indexOf("Lerc"):0)}c=a=d=0;if(1<b){c=g.width*g.height;h=new Uint8Array(c);h.set(A[0]);for(d=1;d<A.length;d++)for(l=A[d],a=0;a<c;a++)h[a]&=l[a];for(a=l=0;a<c;a++)l+=h[a];g.mask=h}g.validPixelCount=l;return g}function C(d,b){d=V.decode(d,b.pyramidLevel||0);d=new P({width:d.width,
height:d.height,pixels:d.pixels,pixelType:d.pixelType.toLowerCase(),mask:d.mask,statistics:null});d.updateStatistics();return d}function u(d,b){const a=b.pixelType||"u8",c=P.getPixelArrayConstructor(a),l="u8"===a?d:new c(d.buffer),h=[],g=b.planes||1;if(1===g)h.push(l);else for(let q=0;q<g;q++){const A=(b.width||1)*(b.height||d.length),J=new c(A);for(let G=0;G<A;G++)J[G]=l[G*g+q];h.push(J)}d=new P({width:b.width||1,height:b.height||d.length,pixels:h,pixelType:a,statistics:null});d.updateStatistics();
return d}function r(d,b){d=(new I.Zlib(new Uint8Array(d))).getBytes();return u(d,b)}function y(d,b){d=L.decode(d,b.offset,b.eof,!b.isInputBigEndian);return u(d,b)}function O(d){d=T.decode(d);d=new P({width:d.width,height:d.height,pixels:d.pixels,pixelType:"U8",mask:d.mask,statistics:null});d.updateStatistics();return d}function B(d,b){d=new Uint8Array(d);d=new f(d);const {width:a,height:c}=b;b=a*c;d=d.decode();let l=0;var h=0;let g;h=new Uint8Array(b);for(l=0;l<b;l++)h[l]=d[4*l+3];const q=new P({width:a,
height:c,pixels:[],pixelType:"U8",mask:h,statistics:[]});for(l=0;3>l;l++){g=new Uint8Array(b);for(h=0;h<b;h++)g[h]=d[4*h+l];q.addData({pixels:g})}q.updateStatistics();return q}function F(d,b,a,c){return E.apply(this,arguments)}function E(){E=R._asyncToGenerator(function*(d,b,a,c){d=yield(new z).decode(d,{applyJpegMask:!1,format:b,...a},c);d=new P(d);d.updateStatistics();return d});return E.apply(this,arguments)}function v(d){if(null==d)throw new D("rasterCodec:decode","parameter encodeddata is required.");
d=new Uint8Array(d,0,10);let b="";255===d[0]&&216===d[1]?b="jpg":137===d[0]&&80===d[1]&&78===d[2]&&71===d[3]?b="png":67===d[0]&&110===d[1]&&116===d[2]&&90===d[3]&&73===d[4]&&109===d[5]&&97===d[6]&&103===d[7]&&101===d[8]&&32===d[9]?b="lerc":76===d[0]&&101===d[1]&&114===d[2]&&99===d[3]&&50===d[4]&&32===d[5]?b="lerc2":73===d[0]&&73===d[1]&&42===d[2]&&0===d[3]||77===d[0]&&77===d[1]&&0===d[2]&&42===d[3]||73===d[0]&&73===d[1]&&43===d[2]&&0===d[3]||77===d[0]&&77===d[1]&&0===d[2]&&43===d[3]?b="tiff":71===
d[0]&&73===d[1]&&70===d[2]?b="gif":66===d[0]&&77===d[1]?b="bmp":-1<String.fromCharCode.apply(null,d).toLowerCase().indexOf("error")&&(b="error");return b}function k(d){let b=null;switch(d){case "lerc":b=w;break;case "lerc2":b=H;break;case "jpg":b=O;break;case "png":b=B;break;case "bsq":case "bip":b=(a,c)=>{{const {pixelTypeCtor:l}=m(c.pixelType),h=x.decode;a=h(a,{width:c.width,height:c.height,pixelType:l,format:d});c=new P({width:c.width,height:c.height,pixels:a.pixels,pixelType:c.pixelType,mask:a.mask,
statistics:null});c.updateStatistics()}return c};break;case "tiff":b=C;break;case "deflate":b=r;break;case "lzw":b=y;break;case "error":b=()=>{throw new D("rasterCodec:decode","input data contains error");};break;default:b=()=>{throw new D("rasterCodec:decode","unsupported raster format");}}return b}function m(d){let b=null,a=null;switch(d?d.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":a=255;b=Uint8Array;break;case "u16":a=a||65535;b=Uint16Array;break;case "u32":a=a||2**32-1;b=Uint32Array;
break;case "s8":a=a||-128;b=Int8Array;break;case "s16":a=a||-32768;b=Int16Array;break;case "s32":a=a||-(2**31);b=Int32Array;break;default:b=Float32Array}return{pixelTypeCtor:b,noDataValue:a}}function n(d,b=1){if(d){var {pixels:a,width:c,height:l,mask:h}=d;if(a&&0!==a.length){var g=a.length,q=c-1,A=l-1,J=[],G,Q,S=P.getPixelArrayConstructor(d.pixelType);if(0===b){for(b=0;b<g;b++){var W=a[b];var X=new S(q*A);for(G=0;G<A;G++){var M=G*c;for(Q=0;Q<q;Q++)X[G*q+Q]=W[M+Q]}J.push(X)}if(h){var K=new Uint8Array(q*
A);for(G=0;G<A;G++)for(M=G*c,Q=0;Q<q;Q++)K[G*q+Q]=h[M+Q]}}else{for(b=0;b<g;b++){W=a[b];X=new S(q*A);for(G=0;G<A;G++)for(M=G*c,Q=0;Q<q;Q++)X[G*q+Q]=(W[M+Q]+W[M+Q+1]+W[M+c+Q]+W[M+c+Q+1])/4;J.push(X)}if(h)for(K=new Uint8Array(q*A),G=0;G<A;G++)for(M=G*c,Q=0;Q<q;Q++)K[G*q+Q]=Math.min.apply(null,[h[M+Q],h[M+Q+1],h[M+c+Q],h[M+c+Q+1]])}d.width=q;d.height=A;d.mask=K;d.pixels=J}}}function e(){e=R._asyncToGenerator(function*(d,b={},a){if(null==d)throw new D("rasterCodec:decode","missing encodeddata parameter.");
let c=b.format&&b.format.toLowerCase();if(!("bsq"!==c&&"bip"!==c||null!=b.width&&null!=b.height))throw new D("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===c&&b.customOptions)return b=V.decodeTileOrStrip(d,b.customOptions),b=new P({width:b.width,height:b.height,pixels:b.pixels,pixelType:b.pixelType.toLowerCase(),mask:b.mask,statistics:null}),b.updateStatistics(),b;if(!c||"bsq"!==c&&"bip"!==c&&"deflate"!==c&&"lzw"!==c)c=v(d);b.useCanvas&&p.has(c)?d=yield F(d,c,
b,a):(a=k(c),b.isPoint&&(b={...b},b.width++,b.height++),d=a(d,b),b.isPoint&&n(d));return d});return e.apply(this,arguments)}var f=function(d){function b(h){var g,q;this.data=h;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(q=null;;){var A=this.readUInt32();var J=h=void 0;h=[];for(J=0;4>J;++J)h.push(String.fromCharCode(this.data[this.pos++]));h=h.join("");switch(h){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=
this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(A);break;case "fcTL":q&&this.animation.frames.push(q);this.pos+=4;q={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};
h=this.readUInt16();A=this.readUInt16()||100;q.delay=1E3*h/A;q.disposeOp=this.data[this.pos++];q.blendOp=this.data[this.pos++];q.data=[];break;case "IDAT":case "fdAT":"fdAT"===h&&(this.pos+=4,A-=4);h=(null!=q?q.data:void 0)||this.imgData;for(J=0;0<=A?J<A:J>A;0<=A?++J:--J)h.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(A);A=255-this.transparency.indexed.length;if(0<A)for(h=0;0<=A?h<A:h>A;0<=A?++h:--h)this.transparency.indexed.push(255);
break;case 0:this.transparency.grayscale=this.read(A)[0];break;case 2:this.transparency.rgb=this.read(A)}break;case "tEXt":J=this.read(A);A=J.indexOf(0);h=String.fromCharCode.apply(String,J.slice(0,A));this.text[h]=String.fromCharCode.apply(String,J.slice(A+1));break;case "IEND":q&&this.animation.frames.push(q);a:{switch(this.colorType){case 0:case 3:case 4:q=1;break a;case 2:case 6:q=3;break a}q=void 0}this.colors=q;this.hasAlphaChannel=4===(g=this.colorType)||6===g;g=this.colors+(this.hasAlphaChannel?
1:0);this.pixelBitlength=this.bits*g;a:{switch(this.colors){case 1:g="DeviceGray";break a;case 3:g="DeviceRGB";break a}g=void 0}this.colorSpace=g;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=A}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var a;b.load=function(h,g,q){"function"===typeof g&&(q=g);var A=new XMLHttpRequest;A.open("GET",h,!0);A.responseType="arraybuffer";A.onload=function(){var J=new Uint8Array(A.response||A.mozResponseArrayBuffer);
J=new b(J);"function"===typeof(null!=g?g.getContext:void 0)&&J.render(g);return"function"===typeof q?q(J):void 0};return A.send(null)};b.prototype.read=function(h){var g;var q=[];for(g=0;0<=h?g<h:g>h;0<=h?++g:--g)q.push(this.data[this.pos++]);return q};b.prototype.readUInt32=function(){var h=this.data[this.pos++]<<24;var g=this.data[this.pos++]<<16;var q=this.data[this.pos++]<<8;var A=this.data[this.pos++];return h|g|q|A};b.prototype.readUInt16=function(){var h=this.data[this.pos++]<<8;var g=this.data[this.pos++];
return h|g};b.prototype.decodePixels=function(h){var g,q,A,J,G,Q,S,W;null==h&&(h=this.imgData);if(0===h.length)return new Uint8Array(0);h=new I.Zlib(h);h=h.getBytes();var X=this.pixelBitlength/8;var M=X*this.width;var K=new Uint8Array(M*this.height);var Y=h.length;for(q=J=G=0;J<Y;){switch(h[J++]){case 0:for(A=g=0;g<M;A=g+=1)K[q++]=h[J++];break;case 1:for(A=Q=0;Q<M;A=Q+=1){g=h[J++];var Z=A<X?0:K[q-X];K[q++]=(g+Z)%256}break;case 2:for(A=Z=0;Z<M;A=Z+=1){g=h[J++];var aa=(A-A%X)/X;Q=G&&K[(G-1)*M+aa*X+
A%X];K[q++]=(Q+g)%256}break;case 3:for(A=W=0;W<M;A=W+=1)g=h[J++],aa=(A-A%X)/X,Z=A<X?0:K[q-X],Q=G&&K[(G-1)*M+aa*X+A%X],K[q++]=(g+Math.floor((Z+Q)/2))%256;break;case 4:for(A=W=0;W<M;A=W+=1){g=h[J++];aa=(A-A%X)/X;Z=A<X?0:K[q-X];0===G?Q=S=0:(Q=K[(G-1)*M+aa*X+A%X],S=aa&&K[(G-1)*M+(aa-1)*X+A%X]);var ba=Z+Q-S;A=Math.abs(ba-Z);aa=Math.abs(ba-Q);ba=Math.abs(ba-S);Z=A<=aa&&A<=ba?Z:aa<=ba?Q:S;K[q++]=(g+Z)%256}break;default:throw Error("Invalid filter algorithm: "+h[J-1]);}G++}return K};b.prototype.decodePalette=
function(){var h,g,q,A,J;var G=this.palette;var Q=this.transparency.indexed||[];var S=new Uint8Array((Q.length||0)+G.length);var W=q=h=g=0;for(A=G.length;q<A;W=q+=3)S[g++]=G[W],S[g++]=G[W+1],S[g++]=G[W+2],S[g++]=null!=(J=Q[h++])?J:255;return S};b.prototype.copyToImageData=function(h,g){var q,A;var J=this.colors;var G=null;var Q=this.hasAlphaChannel;this.palette.length&&(G=null!=(q=this._decodedPalette)?q:this._decodedPalette=this.decodePalette(),J=4,Q=!0);h=h.data||h;var S=h.length;var W=G||g;q=A=
0;if(1===J)for(;q<S;)J=G?4*g[q/4]:A,A=W[J++],h[q++]=A,h[q++]=A,h[q++]=A,h[q++]=Q?W[J++]:this.transparency.grayscale&&this.transparency.grayscale===A?0:255,A=J;else for(;q<S;)J=G?4*g[q/4]:A,h[q++]=W[J++],h[q++]=W[J++],h[q++]=W[J++],h[q++]=Q?W[J++]:this.transparency.rgb&&this.transparency.rgb[1]===W[J-3]&&this.transparency.rgb[3]===W[J-2]&&this.transparency.rgb[5]===W[J-1]?0:255,A=J};b.prototype.decode=function(){var h=new Uint8Array(this.width*this.height*4);this.copyToImageData(h,this.decodePixels());
return h};var c=(a=d.document&&d.document.createElement("canvas"))&&a.getContext("2d");var l=function(h){c.width=h.width;c.height=h.height;c.clearRect(0,0,h.width,h.height);c.putImageData(h,0,0);h=new Image;h.src=a.toDataURL();return h};b.prototype.decodeFrames=function(h){var g,q;if(this.animation){var A=this.animation.frames;var J=[];var G=g=0;for(q=A.length;g<q;G=++g){G=A[G];var Q=h.createImageData(G.width,G.height);var S=this.decodePixels(new Uint8Array(G.data));this.copyToImageData(Q,S);G.imageData=
Q;J.push(G.image=l(Q))}return J}};b.prototype.renderFrame=function(h,g){var q=this.animation.frames;var A=q[g];q=q[g-1];0===g&&h.clearRect(0,0,this.width,this.height);1===(null!=q?q.disposeOp:void 0)?h.clearRect(q.xOffset,q.yOffset,q.width,q.height):2===(null!=q?q.disposeOp:void 0)&&h.putImageData(q.imageData,q.xOffset,q.yOffset);0===A.blendOp&&h.clearRect(A.xOffset,A.yOffset,A.width,A.height);return h.drawImage(A.image,A.xOffset,A.yOffset)};b.prototype.animate=function(h){var g,q=this;var A=0;var J=
this.animation;var G=J.numFrames;var Q=J.frames;var S=J.numPlays;return(g=function(){var W=A++%G;var X=Q[W];q.renderFrame(h,W);if(1<G&&A/G<S)return q.animation._timeout=setTimeout(g,X.delay)})()};b.prototype.stopAnimation=function(){var h;return clearTimeout(null!=(h=this.animation)?h._timeout:void 0)};b.prototype.render=function(h){h._png&&h._png.stopAnimation();h._png=this;h.width=this.width;h.height=this.height;h=h.getContext("2d");if(this.animation)return this.decodeFrames(h),this.animate(h);
var g=h.createImageData(this.width,this.height);this.copyToImageData(g,this.decodePixels());return h.putImageData(g,0,0)};return b}(self);const p=new Set(["jpg","png","bmp","gif"]);U.decode=function(d){return e.apply(this,arguments)};U.decodeLerc2=H;U.getFormat=function(d){d=v(d);"lerc2"===d?d="lerc":"error"===d&&(d="");return d};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils",
"../../../chunks/Zlib"],function(U,R,D){return function(){function P(z){z&&(this.canvas=z.canvas,this.ctx=z.ctx||z.canvas&&z.canvas.getContext("2d"))}P.prototype.decode=function(z,T,V){if(!z||10>z.byteLength)throw new U("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:N,height:L,format:I}=T;const {applyJpegMask:x}=T;if(x&&(!N||!L))throw new U("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((t,
w)=>{let H=null;"jpg"===I&&x&&(H=P.getMask(z,{width:N,height:L}));const C=new Blob([new Uint8Array(z)],{type:"jpg"==="image/"+I?"jpeg":I}),u=URL.createObjectURL(C),r=new Image;let y;r.src=u;r.onload=()=>{URL.revokeObjectURL(u);if(R.isAborted(V))w(R.createAbortError());else{N=r.width;L=r.height;if(this.canvas){if(this.canvas.width!==N||this.canvas.height!==L)this.canvas.width=N,this.canvas.height=L;this.ctx.clearRect(0,0,N,L)}else this.canvas=document.createElement("canvas"),this.canvas.width=N,this.canvas.height=
L,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(r,0,0);var O=this.ctx.getImageData(0,0,N,L);y=O.data;var B;if(T.renderOnCanvas){if(H)for(B=0;B<H.length;B++)y[4*B+3]=H[B]?255:0;this.ctx.putImageData(O,0,0);t(null)}else{O=N*L;var F=new Uint8Array(O),E=new Uint8Array(O),v=new Uint8Array(O);if(H)for(B=0;B<O;B++)F[B]=y[4*B],E[B]=y[4*B+1],v[B]=y[4*B+2];else for(H=new Uint8Array(O),B=0;B<O;B++)F[B]=y[4*B],E[B]=y[4*B+1],v[B]=y[4*B+2],H[B]=y[4*B+3];t({width:N,height:L,pixels:[F,E,v],mask:H,pixelType:"u8"})}}};
r.onerror=()=>{URL.revokeObjectURL(u);w("cannot load image")}})};P.getMask=function(z,T){let V=null;try{var N=new Uint8Array(z);z=0;var L=N.length-2;for(z=Math.ceil(N.length/2);z<L&&(255!==N[z]||217!==N[z+1]);z++);z+=2;if(z<N.length-1){const I=(new D.Zlib(N.subarray(z))).getBytes();V=new Uint8Array(T.width*T.height);T=0;for(N=0;N<I.length;N++)for(L=7;0<=L;L--)V[T++]=I[N]>>L&1}}catch(I){}return V};return P}()})},"esri/chunks/Zlib":function(){define(["exports"],function(U){var R={exports:{}};(function(D){(function(P){P=
P();void 0!==P&&(D.exports=P)})(function(){var P=function(){function z(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}z.prototype={ensureBuffer:function(T){var V=this.buffer,N=V?V.byteLength:0;if(T<N)return V;for(var L=512;L<T;)L<<=1;T=new Uint8Array(L);for(L=0;L<N;++L)T[L]=V[L];return this.buffer=T},getByte:function(){for(var T=this.pos;this.bufferLength<=T;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(T){var V=this.pos;if(T){this.ensureBuffer(V+
T);for(T=V+T;!this.eof&&this.bufferLength<T;)this.readBlock();var N=this.bufferLength;T>N&&(T=N)}else{for(;!this.eof;)this.readBlock();T=this.bufferLength}this.pos=T;return this.buffer.subarray(V,T)},lookChar:function(){for(var T=this.pos;this.bufferLength<=T;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var T=this.pos;this.bufferLength<=T;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},
makeSubStream:function(T,V,N){for(var L=T+V;this.bufferLength<=L&&!this.eof;)this.readBlock();return new Stream(this.buffer,T,V,N)},skip:function(T){T||(T=1);this.pos+=T},reset:function(){this.pos=0}};return z}();return function(){function z(t){throw Error(t);}function T(t){var w=0,H=t[w++],C=t[w++];-1!=H&&-1!=C||z("Invalid header in flate stream");8!=(H&15)&&z("Unknown compression method in flate stream");0!=((H<<8)+C)%31&&z("Bad FCHECK in flate stream");C&32&&z("FDICT bit set in flate stream");
this.bytes=t;this.bytesPos=w;this.codeBuf=this.codeSize=0;P.call(this)}if(!self||!self.Uint32Array)return null;var V=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),N=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),L=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,
590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),I=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,
590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,
524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,
589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,
589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,
590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,
524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,
589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],x=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];T.prototype=Object.create(P.prototype);T.prototype.getBits=function(t){for(var w=this.codeSize,H=this.codeBuf,
C=this.bytes,u=this.bytesPos,r;w<t;)"undefined"==typeof(r=C[u++])&&z("Bad encoding in flate stream"),H|=r<<w,w+=8;this.codeBuf=H>>t;this.codeSize=w-=t;this.bytesPos=u;return H&(1<<t)-1};T.prototype.getCode=function(t){var w=t[0],H=t[1];t=this.codeSize;for(var C=this.codeBuf,u=this.bytes,r=this.bytesPos;t<H;){var y;"undefined"==typeof(y=u[r++])&&z("Bad encoding in flate stream");C|=y<<t;t+=8}H=w[C&(1<<H)-1];w=H>>16;H&=65535;(0==t||t<w||0==w)&&z("Bad encoding in flate stream");this.codeBuf=C>>w;this.codeSize=
t-w;this.bytesPos=r;return H};T.prototype.generateHuffmanTable=function(t){for(var w=t.length,H=0,C=0;C<w;++C)t[C]>H&&(H=t[C]);for(var u=1<<H,r=new Uint32Array(u),y=1,O=0,B=2;y<=H;++y,O<<=1,B<<=1)for(var F=0;F<w;++F)if(t[F]==y){var E=0,v=O;for(C=0;C<y;++C)E=E<<1|v&1,v>>=1;for(C=E;C<u;C+=B)r[C]=y<<16|F;++O}return[r,H]};T.prototype.readBlock=function(){function t(E,v,k,m,n){for(E=E.getBits(k)+m;0<E--;)v[O++]=n}var w=this.getBits(3);w&1&&(this.eof=!0);w>>=1;if(0==w){var H=this.bytes,C=this.bytesPos,
u;"undefined"==typeof(u=H[C++])&&z("Bad block header in flate stream");var r=u;"undefined"==typeof(u=H[C++])&&z("Bad block header in flate stream");r|=u<<8;"undefined"==typeof(u=H[C++])&&z("Bad block header in flate stream");w=u;"undefined"==typeof(u=H[C++])&&z("Bad block header in flate stream");(w|u<<8)!=(~r&65535)&&z("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;u=this.bufferLength;w=this.ensureBuffer(u+r);this.bufferLength=r=u+r;for(var y=u;y<r;++y){if("undefined"==
typeof(u=H[C++])){this.eof=!0;break}w[y]=u}this.bytesPos=C}else{if(1==w)C=I,u=x;else if(2==w){w=this.getBits(5)+257;u=this.getBits(5)+1;H=this.getBits(4)+4;C=Array(V.length);for(var O=0;O<H;)C[V[O++]]=this.getBits(3);C=this.generateHuffmanTable(C);O=H=0;u=w+u;for(r=Array(u);O<u;)y=this.getCode(C),16==y?t(this,r,2,3,H):17==y?t(this,r,3,3,H=0):18==y?t(this,r,7,11,H=0):r[O++]=H=y;C=this.generateHuffmanTable(r.slice(0,w));u=this.generateHuffmanTable(r.slice(w,u))}else z("Unknown block type in flate stream");
r=(w=this.buffer)?w.length:0;for(y=this.bufferLength;;){var B=this.getCode(C);if(256>B)y+1>=r&&(w=this.ensureBuffer(y+1),r=w.length),w[y++]=B;else{if(256==B){this.bufferLength=y;break}B-=257;B=N[B];var F=B>>16;0<F&&(F=this.getBits(F));H=(B&65535)+F;B=this.getCode(u);B=L[B];F=B>>16;0<F&&(F=this.getBits(F));B=(B&65535)+F;y+H>=r&&(w=this.ensureBuffer(y+H),r=w.length);for(F=0;F<H;++F,++y)w[y]=w[y-B]}}}};return T}()})})(R);U.Zlib=R.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(U,R){return function(){function D(){}D.decode=function(P){var z=new Uint8Array(P);P=new U.JpegImage;P.parse(z);const {width:T,height:V,numComponents:N,eof:L}=P;P=P.getData(T,V,!0);let I;const x=T*V;let t=0;var w=0,H=0;if(L<z.length-1)for(z=(new R.Zlib(z.subarray(L))).getBytes(),I=new Uint8Array(x),t=w=0;t<z.length;t++)for(H=7;0<=H;H--)I[w++]=z[t]>>H&1;z=null;if(1===N)z=[P,P,P];else{z=[];for(t=0;3>t;t++)H=new Uint8Array(x),z.push(H);for(w=H=0;w<x;w++)for(t=0;3>t;t++)z[t][w]=
P[H++]}return{width:T,height:V,pixels:z,mask:I}};return D}()})},"esri/chunks/Jpg":function(){define(["exports"],function(U){var R={exports:{}};(function(D){(function(P){P=P();void 0!==P&&(D.exports=P)})(function(){var P=function(){function z(T){this.message="JPEG error: "+T}z.prototype=Error();z.prototype.name="JpegError";return z.constructor=z}();return function(){function z(){this.decodeTransform=null;this.colorTransform=-1}function T(x,t){for(var w=0,H=[],C,u,r=16;0<r&&!x[r-1];)r--;H.push({children:[],
index:0});var y=H[0],O;for(C=0;C<r;C++){for(u=0;u<x[C];u++){y=H.pop();for(y.children[y.index]=t[w];0<y.index;)y=H.pop();y.index++;for(H.push(y);H.length<=C;)H.push(O={children:[],index:0}),y.children[y.index]=O.children,y=O;w++}C+1<r&&(H.push(O={children:[],index:0}),y.children[y.index]=O.children,y=O)}return H[0].children}function V(x,t,w,H,C,u,r,y,O){function B(){if(0<a)return a--,b>>a&1;b=x[t++];if(255===b){var K=x[t++];if(K)throw new P("unexpected marker "+(b<<8|K).toString(16));}a=7;return b>>>
7}function F(K){for(;;){K=K[B()];if("number"===typeof K)return K;if("object"!==typeof K)throw new P("invalid huffman sequence");}}function E(K){for(var Y=0;0<K;)Y=Y<<1|B(),K--;return Y}function v(K){if(1===K)return 1===B()?1:-1;var Y=E(K);return Y>=1<<K-1?Y:Y+(-1<<K)+1}function k(K,Y){var Z=F(K.huffmanTableDC);Z=0===Z?0:v(Z);K.blockData[Y]=K.pred+=Z;for(Z=1;64>Z;){var aa=F(K.huffmanTableAC),ba=aa&15;aa>>=4;if(0===ba){if(15>aa)break;Z+=16}else Z+=aa,K.blockData[Y+I[Z]]=v(ba),Z++}}function m(K,Y){var Z=
F(K.huffmanTableDC);Z=0===Z?0:v(Z)<<O;K.blockData[Y]=K.pred+=Z}function n(K,Y){K.blockData[Y]|=B()<<O}function e(K,Y){if(0<c)c--;else for(var Z=u;Z<=r;){var aa=F(K.huffmanTableAC),ba=aa&15;aa>>=4;if(0===ba){if(15>aa){c=E(aa)+(1<<aa)-1;break}Z+=16}else Z+=aa,K.blockData[Y+I[Z]]=v(ba)*(1<<O),Z++}}function f(K,Y){for(var Z=u,aa=0,ba;Z<=r;){ba=I[Z];switch(l){case 0:aa=F(K.huffmanTableAC);ba=aa&15;aa>>=4;if(0===ba)15>aa?(c=E(aa)+(1<<aa),l=4):(aa=16,l=1);else{if(1!==ba)throw new P("invalid ACn encoding");
h=v(ba);l=aa?2:3}continue;case 1:case 2:K.blockData[Y+ba]?K.blockData[Y+ba]+=B()<<O:(aa--,0===aa&&(l=2===l?3:0));break;case 3:K.blockData[Y+ba]?K.blockData[Y+ba]+=B()<<O:(K.blockData[Y+ba]=h<<O,l=0);break;case 4:K.blockData[Y+ba]&&(K.blockData[Y+ba]+=B()<<O)}Z++}4===l&&(c--,0===c&&(l=0))}var p=w.mcusPerLine,d=t,b=0,a=0,c=0,l=0,h,g=H.length,q,A,J,G;y=w.progressive?0===u?0===y?m:n:0===y?e:f:k;var Q=0;w=1===g?H[0].blocksPerLine*H[0].blocksPerColumn:p*w.mcusPerColumn;for(var S,W;Q<w;){var X=C?Math.min(w-
Q,C):w;for(q=0;q<g;q++)H[q].pred=0;c=0;if(1===g){var M=H[0];for(G=0;G<X;G++)y(M,64*((M.blocksPerLine+1)*(Q/M.blocksPerLine|0)+Q%M.blocksPerLine)),Q++}else for(G=0;G<X;G++){for(q=0;q<g;q++)for(M=H[q],S=M.h,W=M.v,A=0;A<W;A++)for(J=0;J<S;J++)y(M,64*((M.blocksPerLine+1)*((Q/p|0)*M.v+A)+(Q%p*M.h+J)));Q++}a=0;(M=L(x,t))&&M.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+M.invalid),t=M.offset);M=M&&M.marker;if(!M||65280>=M)throw new P("marker was not found");if(65488<=M&&65495>=
M)t+=2;else break}(M=L(x,t))&&M.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+M.invalid),t=M.offset);return t-d}function N(x,t){x=t.blocksPerLine;for(var w=t.blocksPerColumn,H=new Int16Array(64),C=0;C<w;C++)for(var u=0;u<x;u++){var r=void 0,y=void 0,O=void 0,B=void 0,F=void 0,E=void 0,v=void 0,k=void 0,m=F=E=B=y=r=void 0,n=void 0,e=void 0,f=void 0,p=64*((t.blocksPerLine+1)*C+u),d=H,b=t.quantizationTable,a=t.blockData;if(!b)throw new P("missing required Quantization Table.");
for(var c=0;64>c;c+=8)r=a[p+c],k=a[p+c+1],v=a[p+c+2],E=a[p+c+3],F=a[p+c+4],B=a[p+c+5],O=a[p+c+6],y=a[p+c+7],r*=b[c],0===(k|v|E|F|B|O|y)?(r=5793*r+512>>10,d[c]=r,d[c+1]=r,d[c+2]=r,d[c+3]=r,d[c+4]=r,d[c+5]=r,d[c+6]=r,d[c+7]=r):(k*=b[c+1],v*=b[c+2],E*=b[c+3],F*=b[c+4],B*=b[c+5],O*=b[c+6],y*=b[c+7],f=5793*r+128>>8,e=5793*F+128>>8,n=v,m=O,F=2896*(k-y)+128>>8,y=2896*(k+y)+128>>8,E<<=4,B<<=4,f=f+e+1>>1,e=f-e,r=3784*n+1567*m+128>>8,n=1567*n-3784*m+128>>8,m=r,F=F+B+1>>1,B=F-B,y=y+E+1>>1,E=y-E,f=f+m+1>>1,m=
f-m,e=e+n+1>>1,n=e-n,r=2276*F+3406*y+2048>>12,F=3406*F-2276*y+2048>>12,y=r,r=799*E+4017*B+2048>>12,E=4017*E-799*B+2048>>12,B=r,d[c]=f+y,d[c+7]=f-y,d[c+1]=e+B,d[c+6]=e-B,d[c+2]=n+E,d[c+5]=n-E,d[c+3]=m+F,d[c+4]=m-F);for(b=0;8>b;++b)r=d[b],k=d[b+8],v=d[b+16],E=d[b+24],F=d[b+32],B=d[b+40],O=d[b+48],y=d[b+56],0===(k|v|E|F|B|O|y)?(r=5793*r+8192>>14,r=-2040>r?0:2024<=r?255:r+2056>>4,a[p+b]=r,a[p+b+8]=r,a[p+b+16]=r,a[p+b+24]=r,a[p+b+32]=r,a[p+b+40]=r,a[p+b+48]=r,a[p+b+56]=r):(f=5793*r+2048>>12,e=5793*F+2048>>
12,n=v,m=O,F=2896*(k-y)+2048>>12,y=2896*(k+y)+2048>>12,f=(f+e+1>>1)+4112,e=f-e,r=3784*n+1567*m+2048>>12,n=1567*n-3784*m+2048>>12,m=r,F=F+B+1>>1,B=F-B,y=y+E+1>>1,E=y-E,f=f+m+1>>1,m=f-m,e=e+n+1>>1,n=e-n,r=2276*F+3406*y+2048>>12,F=3406*F-2276*y+2048>>12,y=r,r=799*E+4017*B+2048>>12,E=4017*E-799*B+2048>>12,B=r,r=f+y,y=f-y,k=e+B,O=e-B,v=n+E,B=n-E,E=m+F,F=m-F,r=16>r?0:4080<=r?255:r>>4,k=16>k?0:4080<=k?255:k>>4,v=16>v?0:4080<=v?255:v>>4,E=16>E?0:4080<=E?255:E>>4,F=16>F?0:4080<=F?255:F>>4,B=16>B?0:4080<=B?
255:B>>4,O=16>O?0:4080<=O?255:O>>4,y=16>y?0:4080<=y?255:y>>4,a[p+b]=r,a[p+b+8]=k,a[p+b+16]=v,a[p+b+24]=E,a[p+b+32]=F,a[p+b+40]=B,a[p+b+48]=O,a[p+b+56]=y)}return t.blockData}function L(x,t,w){var H=x.length-1;w=w<t?w:t;if(t>=H)return null;var C=x[t]<<8|x[t+1];if(65472<=C&&65534>=C)return{invalid:null,marker:C,offset:t};for(t=x[w]<<8|x[w+1];!(65472<=t&&65534>=t);){if(++w>=H)return null;t=x[w]<<8|x[w+1]}return{invalid:C.toString(16),marker:t,offset:w}}if(!self||!self.Uint8ClampedArray)return null;var I=
new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);z.prototype={parse:function(x){function t(){var b=x[C]<<8|x[C+1];C+=2;return b}function w(){var b=t();b=C+b-2;var a=L(x,b,C);a&&a.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+a.invalid),b=a.offset);b=x.subarray(C,b);C+=b.length;return b}function H(b){for(var a=Math.ceil(b.samplesPerLine/
8/b.maxH),c=Math.ceil(b.scanLines/8/b.maxV),l=0;l<b.components.length;l++){d=b.components[l];var h=Math.ceil(Math.ceil(b.samplesPerLine/8)*d.h/b.maxH),g=Math.ceil(Math.ceil(b.scanLines/8)*d.v/b.maxV);d.blockData=new Int16Array(64*c*d.v*(a*d.h+1));d.blocksPerLine=h;d.blocksPerColumn=g}b.mcusPerLine=a;b.mcusPerColumn=c}var C=0,u=null,r=null,y=[],O=[],B=[],F=t();if(65496!==F)throw new P("SOI not found");for(F=t();65497!==F;){switch(F){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var E=
w();65504===F&&74===E[0]&&70===E[1]&&73===E[2]&&70===E[3]&&0===E[4]&&(u={version:{major:E[5],minor:E[6]},densityUnits:E[7],xDensity:E[8]<<8|E[9],yDensity:E[10]<<8|E[11],thumbWidth:E[12],thumbHeight:E[13],thumbData:E.subarray(14,14+3*E[12]*E[13])});65518===F&&65===E[0]&&100===E[1]&&111===E[2]&&98===E[3]&&101===E[4]&&(r={version:E[5]<<8|E[6],flags0:E[7]<<8|E[8],flags1:E[9]<<8|E[10],transformCode:E[11]});break;case 65499:F=t()+C-2;for(var v;C<F;){var k=x[C++],m=new Uint16Array(64);if(0===k>>4)for(E=
0;64>E;E++)v=I[E],m[v]=x[C++];else if(1===k>>4)for(E=0;64>E;E++)v=I[E],m[v]=t();else throw new P("DQT - invalid table spec");y[k&15]=m}break;case 65472:case 65473:case 65474:if(n)throw new P("Only single frame JPEGs supported");t();var n={};n.extended=65473===F;n.progressive=65474===F;n.precision=x[C++];n.scanLines=t();n.samplesPerLine=t();n.components=[];n.componentIds={};E=x[C++];for(F=m=k=0;F<E;F++){v=x[C];var e=x[C+1]>>4;var f=x[C+1]&15;k<e&&(k=e);m<f&&(m=f);e=n.components.push({h:e,v:f,quantizationId:x[C+
2],quantizationTable:null});n.componentIds[v]=e-1;C+=3}n.maxH=k;n.maxV=m;H(n);break;case 65476:v=t();for(F=2;F<v;){k=x[C++];m=new Uint8Array(16);for(E=e=0;16>E;E++,C++)e+=m[E]=x[C];f=new Uint8Array(e);for(E=0;E<e;E++,C++)f[E]=x[C];F+=17+e;(0===k>>4?B:O)[k&15]=T(m,f)}break;case 65501:t();var p=t();break;case 65498:t();v=x[C++];E=[];for(F=0;F<v;F++){k=n.componentIds[x[C++]];var d=n.components[k];k=x[C++];d.huffmanTableDC=B[k>>4];d.huffmanTableAC=O[k&15];E.push(d)}F=x[C++];v=x[C++];k=x[C++];F=V(x,C,
n,E,p,F,v,k>>4,k&15);C+=F;break;case 65535:255!==x[C]&&C--;break;default:if(255===x[C-3]&&192<=x[C-2]&&254>=x[C-2])C-=3;else throw new P("unknown marker "+F.toString(16));}F=t()}this.width=n.samplesPerLine;this.height=n.scanLines;this.jfif=u;this.eof=C;this.adobe=r;this.components=[];for(F=0;F<n.components.length;F++){d=n.components[F];if(u=y[d.quantizationId])d.quantizationTable=u;this.components.push({output:N(n,d),scaleX:d.h/n.maxH,scaleY:d.v/n.maxV,blocksPerLine:d.blocksPerLine,blocksPerColumn:d.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(x,t){var w=this.width/x,H=this.height/t,C,u,r=0,y=this.components.length,O=x*t*y,B=new Uint8ClampedArray(O),F=new Uint32Array(x);for(u=0;u<y;u++){var E=this.components[u];var v=E.scaleX*w;var k=E.scaleY*H;r=u;var m=E.output;var n=E.blocksPerLine+1<<3;for(C=0;C<x;C++)E=0|C*v,F[C]=(E&4294967288)<<3|E&7;for(v=0;v<t;v++)for(E=0|v*k,E=n*(E&4294967288)|(E&7)<<3,C=0;C<x;C++)B[r]=m[E+F[C]],r+=y}if(t=this.decodeTransform)for(u=0;u<O;)for(x=E=0;E<y;E++,
u++,x+=2)B[u]=(B[u]*t[x]>>8)+t[x+1];return B},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(x){for(var t,w,H,C=0,u=x.length;C<u;C+=3)t=x[C],w=x[C+1],H=x[C+2],x[C]=t-179.456+1.402*H,x[C+1]=t+135.459-.344*w-.714*H,x[C+2]=t-226.816+1.772*w;return x},_convertYcckToRgb:function(x){for(var t,w,H,C,u=0,r=0,y=x.length;r<y;r+=4)t=x[r],w=x[r+1],H=x[r+2],C=x[r+3],x[u++]=
-122.67195406894+w*(-6.60635669420364E-5*w+4.37130475926232E-4*H-5.4080610064599E-5*t+4.8449797120281E-4*C-.154362151871126)+H*(-9.57964378445773E-4*H+8.17076911346625E-4*t-.00477271405408747*C+1.53380253221734)+t*(9.61250184130688E-4*t-.00266257332283933*C+.48357088451265)+C*(-3.36197177618394E-4*C+.484791561490776),x[u++]=107.268039397724+w*(2.19927104525741E-5*w-6.40992018297945E-4*H+6.59397001245577E-4*t+4.26105652938837E-4*C-.176491792462875)+H*(-7.78269941513683E-4*H+.00130872261408275*t+7.70482631801132E-4*
C-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*C+.25802910206845)+C*(-3.18913117588328E-4*C-.213742400323665),x[u++]=-20.810012546947+w*(-5.70115196973677E-4*w-2.63409051004589E-5*H+.0020741088115012*t-.00288260236853442*C+.814272968359295)+H*(-1.53496057440975E-5*H-1.32689043961446E-4*t+5.60833691242812E-4*C-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*C+.116935020465145)+C*(-3.43531996510555E-4*C+.24165260232407);return x},_convertYcckToCmyk:function(x){for(var t,
w,H,C=0,u=x.length;C<u;C+=4)t=x[C],w=x[C+1],H=x[C+2],x[C]=434.456-t-1.402*H,x[C+1]=119.541-t+.344*w+.714*H,x[C+2]=481.816-t-1.772*w;return x},_convertCmykToRgb:function(x){for(var t,w,H,C,u=0,r=1/255,y=0,O=x.length;y<O;y+=4)t=x[y]*r,w=x[y+1]*r,H=x[y+2]*r,C=x[y+3]*r,x[u++]=255+t*(-4.387332384609988*t+54.48615194189176*w+18.82290502165302*H+212.25662451639585*C-285.2331026137004)+w*(1.7149763477362134*w-5.6096736904047315*H-17.873870861415444*C-5.497006427196366)+H*(-2.5217340131683033*H-21.248923337353073*
C+17.5119270841813)-C*(21.86122147463605*C+189.48180835922747),x[u++]=255+t*(8.841041422036149*t+60.118027045597366*w+6.871425592049007*H+31.159100130055922*C-79.2970844816548)+w*(-15.310361306967817*w+17.575251261109482*H+131.35250912493976*C-190.9453302588951)+H*(4.444339102852739*H+9.8632861493405*C-24.86741582555878)-C*(20.737325471181034*C+187.80453709719578),x[u++]=255+t*(.8842522430003296*t+8.078677503112928*w+30.89978309703729*H-.23883238689178934*C-14.183576799673286)+w*(10.49593273432072*
w+63.02378494754052*H+50.606957656360734*C-112.23884253719248)+H*(.03296041114873217*H+115.60384449646641*C-193.58209356861505)-C*(22.33816807309886*C+180.12613974708367);return x},getData:function(x,t,w){if(4<this.numComponents)throw new P("Unsupported color mode");x=this._getLinearizedBlockData(x,t);if(1===this.numComponents&&w){w=x.length;t=new Uint8ClampedArray(3*w);for(var H=0,C=0;C<w;C++){var u=x[C];t[H++]=u;t[H++]=u;t[H++]=u}return t}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(x);
if(4===this.numComponents){if(this._isColorConversionNeeded())return w?this._convertYcckToRgb(x):this._convertYcckToCmyk(x);if(w)return this._convertCmykToRgb(x)}return x}};return z}()})})(R);U.JpegImage=R.exports})},"esri/chunks/TiffDecoder":function(){define("exports ../layers/support/rasterDatasets/byteStreamUtils ./Jpg ../layers/support/rasterFormats/Lzw ../layers/support/rasterFormats/TiffTags ../layers/support/rasterFormats/utils ./Zlib".split(" "),function(U,R,D,P,z,T,V){function N(a,c){let l=
"unknown";3===a?l="f32":1===a?1===c?l="u1":2===c?l="u2":4===c?l="u4":8>=c?l="u8":16>=c?l="u16":32>=c&&(l="u32"):2===a&&(8>=c?l="s8":16>=c?l="s16":32>=c&&(l="s32"));return l}function L(a){let c=null;switch(a?a.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":c=Uint8Array;break;case "u16":c=Uint16Array;break;case "u32":c=Uint32Array;break;case "s8":c=Int8Array;break;case "s16":c=Int16Array;break;case "s32":c=Int32Array;break;default:c=Float32Array}return c}function I(a,c){return{x:c[0]*
a.x+c[1]*a.y+c[2],y:c[3]*a.x+c[4]*a.y+c[5]}}function x(a,c){var l;return null==(l=a.get(c))?void 0:l.values}function t(a,c){var l;return null==(l=a.get(c))?void 0:l.values}function w(a,c){var l;return null==(l=a.get(c))?void 0:l.values[0]}function H(a,c){var l;return null==(l=a.get(c))?void 0:l.values[0]}function C(a,c,l,h=0,g=z.TIFF_TAGS,q=4){var A=8===q;const J=A?B(new DataView(a,l,8),0,c):(new DataView(a,l,2)).getUint16(0,c),G=4+2*q;var Q=A?8:2;A=Q+J*G;if(l+A>a.byteLength)return{success:!1,ifd:null,
nextIFD:null,requiredBufferSize:A};const S=l+A+4<=a.byteLength?F(new DataView(a,l+A,8===q?8:4),0,c,8===q):null;l+=Q;Q=new Map;let W,X,M,K,Y;for(let aa=0;aa<J;aa++){var Z=new DataView(a,l+G*aa,G);W=Z.getUint16(0,c);M=Z.getUint16(2,c);X=z.getTagName(W,g);const ba=[];2===q?(K=Z.getUint16(4,c),Y=Z.getUint16(6,c)):4===q?(K=Z.getUint32(4,c),Y=Z.getUint32(8,c)):8===q&&(K=F(Z,4,c,!0),Y=F(Z,12,c,!0),ba.push(Z.getUint32(12,c)),ba.push(Z.getUint32(16,c)));Z={id:W,type:M,valueCount:K,valueOffset:Y,valueOffsets:ba,
values:null};u(a,c,Z,h,!1,q);Q.set(X,Z)}return{success:!0,ifd:Q,nextIFD:S,requiredBufferSize:A}}function u(a,c,l,h=0,g=!1,q=4){if(l.values)return!0;var A=l.type,J=l.valueCount,G=l.valueOffset;let Q=[];var S=e[A],W=8*S,X=J*S,M=J*e[A]*8,K=8===q?64:32;q=l.valueOffsets;if(M>K&&X>(g?a.byteLength:a?a.byteLength-G+h:0))return l.offlineOffsetSize=[G,X],l.values=null,!1;if(M<=K)if(c||(32>=K?G>>>=32-M:(a=null!=q&&q.length?q[0]:G>>>0,c=null!=q&&q.length?q[1]:Math.round((G-a)/4294967296),32>=M?(G=a>>>32-M,q[0]=
G):(G=a*2**(32-M)+(c>>>32-M),q[0]=a,q[1]=c>>>32-M))),1===J&&W===K)Q=[G];else if(64===K)for(a=null!=q&&q.length?q[0]:G>>>0,G=null!=q&&q.length?q[1]:Math.round((G-a)/4294967296),c=a,S=32,a=1;a<=J;a++)X=32-W*a%32,S<W?(X=c<<X>>>32-S,M=G<<32-S>>>32-S,c=G,Q.push(X+M*2**(W-S)),S-=32-(W-S)):(Q.push(c<<X>>>32-W),S-=W),0===S&&(S=32,c=G);else for(a=1;a<=J;a++)Q.push(G<<32-W*a>>>32-W);else for(G-=h,g&&(G=0),J=G;J<G+X;J+=S){switch(A){case 1:W=(new DataView(a,J,1)).getUint8(0);break;case 2:W=(new DataView(a,J,
1)).getUint8(0);break;case 3:W=(new DataView(a,J,2)).getUint16(0,c);break;case 4:case 13:W=(new DataView(a,J,4)).getUint32(0,c);break;case 5:W=(new DataView(a,J,4)).getUint32(0,c)/(new DataView(a,J+4,4)).getUint32(0,c);break;case 6:W=(new DataView(a,J,1)).getInt8(0);break;case 7:W=(new DataView(a,J,1)).getUint8(0);break;case 8:W=(new DataView(a,J,2)).getInt16(0,c);break;case 9:W=(new DataView(a,J,4)).getInt32(0,c);break;case 10:W=(new DataView(a,J,4)).getInt32(0,c)/(new DataView(a,J+4,4)).getInt32(0,
c);break;case 11:W=(new DataView(a,J,4)).getFloat32(0,c);break;case 12:W=(new DataView(a,J,8)).getFloat64(0,c);break;case 16:case 18:W=B(new DataView(a,J,8),0,c);break;case 17:q=new DataView(a,J,8);M=(W=c)?q.getInt32(0,W):q.getUint32(0,W);q=W?q.getUint32(4,W):q.getInt32(4,W);K=0<=(W?M:q)?1:-1;W?M*=K:q*=K;W=K*(W?4294967296*q+M:4294967296*M+q);break;default:W=null}Q.push(W)}if(2===A){A="";G=Q;Q=[];for(a=0;a<G.length;a++)0===G[a]&&""!==A?(Q.push(A),A=""):A+=String.fromCharCode(G[a]);""===A&&0!==Q.length||
Q.push(A)}l.values=Q;return!0}function r(a){var c,l,h=a[0];const g=H(h,"TILEWIDTH"),q=H(h,"TILELENGTH"),A=H(h,"IMAGEWIDTH"),J=H(h,"IMAGELENGTH");var G=H(h,"BITSPERSAMPLE");const Q=H(h,"SAMPLESPERPIXEL");var S=null!=(c=H(h,"SAMPLEFORMAT"))?c:1;c=N(S,G);const W=y(h);var X=x(h,"GDAL_NODATA");let M;null!=X&&X.length&&(M=X.map(ia=>parseFloat(ia)),M.some(ia=>isNaN(ia))&&(M=null));var K=null!=(l=H(h,"COMPRESSION"))?l:1;switch(K){case 1:l="NONE";break;case 2:case 3:case 4:case 32771:l="CCITT";break;case 5:l=
"LZW";break;case 6:case 7:l="JPEG";break;case 32773:l="PACKBITS";break;case 8:case 32946:l="DEFLATE";break;case 34712:l="JPEG2000";break;case 34887:l="LERC";break;default:l=String(K)}X=!0;let Y="";f.has(K)||(X=!1,Y+="unsupported tag compression "+K);3<S&&(X=!1,Y+="unsupported tag sampleFormat "+S);0!==G%8&&(X=!1,Y+="unsupported tag bitsPerSample "+G);G=w(h,"GEOASCIIPARAMS");if(G){var Z=(Z=G.split("|").filter(ia=>-1<ia.indexOf("ESRI PE String \x3d "))[0])?Z.replace("ESRI PE String \x3d ",""):"";Z=
Z.startsWith("COMPD_CS")||Z.startsWith("PROJCS")||Z.startsWith("GEOGCS")?{wkid:null,wkt:Z}:null}S=t(h,"GEOTIEPOINTS");G=t(h,"GEOPIXELSCALE");K=t(h,"GEOTRANSMATRIX");var aa=h.has("GEOKEYDIRECTORY")?h.get("GEOKEYDIRECTORY").data:null;h=!1;if(aa){h=2===H(aa,"GTRasterTypeGeoKey");var ba=H(aa,"GTModelTypeGeoKey");2===ba?(aa=H(aa,"GeographicTypeGeoKey"),1024<=aa&&32766>=aa&&(Z={wkid:aa})):1===ba&&(aa=H(aa,"ProjectedCSTypeGeoKey"),1024<=aa&&32766>=aa&&(Z={wkid:aa}))}let da;G&&S&&6<=S.length?(da=[G[0],0,
S[3]-S[0]*G[0],0,-Math.abs(G[1]),S[4]-S[1]*G[1]],h&&(da[2]-=.5*da[0]+.5*da[1],da[5]-=.5*da[3]+.5*da[4])):K&&16===K.length&&(da=h?[K[0],K[1],K[3]-.5*K[0],K[4],K[5],K[7]-.5*K[5]]:[K[0],K[1],K[3],K[4],K[5],K[7]]);if(da){h=[{x:0,y:J},{x:0,y:0},{x:A,y:J},{x:A,y:0}];aa=K=Number.POSITIVE_INFINITY;let ia=ba=Number.NEGATIVE_INFINITY;for(let ca=0;ca<h.length;ca++)S=I(h[ca],da),K=S.x>K?K:S.x,ba=S.x<ba?ba:S.x,aa=S.y>aa?aa:S.y,ia=S.y<ia?ia:S.y;Z={xmin:K,xmax:ba,ymin:aa,ymax:ia,spatialReference:Z}}else Z={xmin:-.5,
ymin:.5-J,xmax:A-.5,ymax:.5,spatialReference:Z};h=a.filter(ia=>1===w(ia,"NEWSUBFILETYPE"));let fa,ja,ha;if(0<h.length){fa=Math.round(Math.log(A/H(h[0],"IMAGEWIDTH"))/Math.LN2);var ea=h[h.length-1];ja=Math.round(Math.log(A/H(ea,"IMAGEWIDTH"))/Math.LN2);ha=H(ea,"TILEWIDTH");ea=H(ea,"TILELENGTH")}ha=0<ja?ha||g:null;ea=0<ja?ea||q:null;let ka;g&&(ka=[{maxCol:Math.ceil(A/g)-1,maxRow:Math.ceil(J/q)-1,minRow:0,minCol:0}],h.forEach(ia=>{ka.push({maxCol:Math.ceil(H(ia,"IMAGEWIDTH")/H(ia,"TILEWIDTH"))-1,maxRow:Math.ceil(H(ia,
"IMAGELENGTH")/H(ia,"TILELENGTH"))-1,minRow:0,minCol:0})}));h=w(a[0],"GDAL_METADATA");h=b(h);Y+=" "+k({width:A,height:J,tileWidth:g,tileHeight:q,planes:Q,ifds:a});return{width:A,height:J,tileWidth:g,tileHeight:q,planes:Q,isBSQ:W,pixelType:c,compression:l,noData:M,isSupported:X,message:Y,extent:Z,affine:G?null:da,firstPyramidLevel:fa,maximumPyramidLevel:ja,pyramidBlockWidth:ha,pyramidBlockHeight:ea,tileBoundary:ka,metadata:h}}function y(a,c){return(a=x(a,"PLANARCONFIGURATION"))?2===a[0]:c?c.isBSQ:
!1}function O(a){const {littleEndian:c,isBigTiff:l,firstIFD:h}=E(a);var g=h;const q=[];do if(g=v(a,c,g,0,z.TIFF_TAGS,l?8:4),g.success)q.push(g.ifd),g=g.nextIFD;else break;while(0<g);return{...r(q),littleEndian:c,isBigTiff:l,ifds:q}}function B(a,c,l){const h=a.getUint32(c,l);a=a.getUint32(c+4,l);return l?4294967296*a+h:4294967296*h+a}function F(a,c,l,h){return h?B(a,c,l):a.getUint32(c,l)}function E(a){var c=new DataView(a,0,16),l=c.getUint16(0,!1);a=null;if(18761===l)a=!0;else if(19789===l)a=!1;else throw"unexpected endianess byte";
var h=c.getUint16(2,a);if(42!==h&&43!==h)throw"unexpected tiff identifier";l=4;if(h=43===h){const g=c.getUint16(l,a);l+=2;if(8!==g)throw"unsupported bigtiff version";if(0!==c.getUint16(l,a))throw"unsupported bigtiff version";l+=2}c=F(c,l,a,h);return{littleEndian:a,isBigTiff:h,firstIFD:c}}function v(a,c,l,h=0,g=z.TIFF_TAGS,q=4){l=C(a,c,l,h,g,q);let A;const J=l.ifd;J&&(z.ifdTags.forEach((G,Q)=>{J.has(Q)&&(A=J.get(Q),A.data=C(a,c,A.valueOffset-h,h,G).ifd)}),J.has("GEOKEYDIRECTORY")&&(A=J.get("GEOKEYDIRECTORY"),
(g=A.values)&&4<g.length&&(g=g[0]+"."+g[1]+"."+g[2],A.data=C(a,c,A.valueOffset+6-h,h,z.GEO_KEYS,2).ifd,A.data&&A.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[g]}))),J.has("XMP")&&(A=J.get("XMP"),g=A.values,"number"===typeof g[0]&&7===A.type&&(A.values=[R.bytesToUTF8(new Uint8Array(g))])));return l}function k(a){const {width:c,height:l,tileHeight:h,tileWidth:g}=a,q=a.planes,A=g?g*h:c*l;a=H(a.ifds[0],"BITSPERSAMPLE");let J="";A*q>2**30/(8<a?a/8:1)&&(J=g?"tiled tiff exceeding 1 gigabits per tile is not supported":
"scanline tiff exceeding 1 gigabits is not supported");return J}var m={exports:{}};(function(a){(function(c){c=c();void 0!==c&&(a.exports=c)})(function(){var c={unstuff:function(g,q,A,J,G,Q,S,W){var X=(1<<A)-1,M=0,K,Y=0;g[g.length-1]<<=8*(4*g.length-Math.ceil(A*J/8));if(G)for(K=0;K<J;K++){if(0===Y){var Z=g[M++];Y=32}if(Y>=A){var aa=Z>>>Y-A&X;Y-=A}else Y=A-Y,aa=(Z&X)<<Y&X,Z=g[M++],Y=32-Y,aa+=Z>>>Y;q[K]=G[aa]}else for(G=Math.ceil((W-Q)/S),K=0;K<J;K++)0===Y&&(Z=g[M++],Y=32),Y>=A?(aa=Z>>>Y-A&X,Y-=A):
(Y=A-Y,aa=(Z&X)<<Y&X,Z=g[M++],Y=32-Y,aa+=Z>>>Y),q[K]=aa<G?Q+aa*S:W},unstuffLUT:function(g,q,A,J,G,Q){var S=(1<<q)-1,W=0,X=0,M=0,K=M=0,Y=[];g[g.length-1]<<=8*(4*g.length-Math.ceil(q*A/8));var Z=Math.ceil((Q-J)/G);for(X=0;X<A;X++){if(0===M){var aa=g[W++];M=32}M>=q?(K=aa>>>M-q&S,M-=q):(M=q-M,K=(aa&S)<<M&S,aa=g[W++],M=32-M,K+=aa>>>M);Y[X]=K<Z?J+K*G:Q}Y.unshift(J);return Y},unstuff2:function(g,q,A,J,G,Q,S,W){var X=(1<<A)-1,M=0,K,Y=0,Z=0;if(G)for(K=0;K<J;K++){if(0===Y){var aa=g[M++];Y=32;Z=0}if(Y>=A){var ba=
aa>>>Z&X;Y-=A;Z+=A}else{var da=A-Y;ba=aa>>>Z&X;aa=g[M++];Y=32-da;ba|=(aa&(1<<da)-1)<<A-da;Z=da}q[K]=G[ba]}else for(G=Math.ceil((W-Q)/S),K=0;K<J;K++)0===Y&&(aa=g[M++],Y=32,Z=0),Y>=A?(ba=aa>>>Z&X,Y-=A,Z+=A):(da=A-Y,ba=aa>>>Z&X,aa=g[M++],Y=32-da,ba|=(aa&(1<<da)-1)<<A-da,Z=da),q[K]=ba<G?Q+ba*S:W;return q},unstuffLUT2:function(g,q,A,J,G,Q){var S=(1<<q)-1,W=0,X=0,M=0,K=0,Y=0,Z=0,aa=[],ba=Math.ceil((Q-J)/G);for(X=0;X<A;X++){if(0===K){var da=g[W++];K=32;Z=0}K>=q?(Y=da>>>Z&S,K-=q,Z+=q):(M=q-K,Y=da>>>Z&S,da=
g[W++],K=32-M,Y|=(da&(1<<M)-1)<<q-M,Z=M);aa[X]=Y<ba?J+Y*G:Q}aa.unshift(J);return aa},originalUnstuff:function(g,q,A,J){var G=(1<<A)-1,Q=0,S,W=0;g[g.length-1]<<=8*(4*g.length-Math.ceil(A*J/8));for(S=0;S<J;S++){if(0===W){var X=g[Q++];W=32}if(W>=A){var M=X>>>W-A&G;W-=A}else W=A-W,M=(X&G)<<W&G,X=g[Q++],W=32-W,M+=X>>>W;q[S]=M}return q},originalUnstuff2:function(g,q,A,J){var G=(1<<A)-1,Q=0,S,W=0,X=0;for(S=0;S<J;S++){if(0===W){var M=g[Q++];W=32;X=0}if(W>=A){var K=M>>>X&G;W-=A;X+=A}else{var Y=A-W;K=M>>>X&
G;M=g[Q++];W=32-Y;K|=(M&(1<<Y)-1)<<A-Y;X=Y}q[S]=K}return q}},l={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(g){for(var q=65535,A=65535,J=g.length,G=Math.floor(J/2),Q=0;G;){var S=359<=G?359:G;G-=S;do q+=g[Q++]<<8,A+=q+=g[Q++];while(--S);q=(q&65535)+(q>>>16);A=(A&65535)+(A>>>16)}J&1&&(A+=q+=g[Q]<<8);return((A&65535)+(A>>>16)<<16|(q&65535)+(q>>>16))>>>0},readHeaderInfo:function(g,q){var A=q.ptr,J=new Uint8Array(g,A,6),G={};G.fileIdentifierString=String.fromCharCode.apply(null,J);if(0!==
G.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+G.fileIdentifierString;A+=6;J=new DataView(g,A,8);var Q=J.getInt32(0,!0);G.fileVersion=Q;A+=4;3<=Q&&(G.checksum=J.getUint32(4,!0),A+=4);J=new DataView(g,A,12);G.height=J.getUint32(0,!0);G.width=J.getUint32(4,!0);A+=8;4<=Q?(G.numDims=J.getUint32(8,!0),A+=4):G.numDims=1;J=new DataView(g,A,40);G.numValidPixel=J.getUint32(0,!0);G.microBlockSize=J.getInt32(4,!0);G.blobSize=J.getInt32(8,!0);G.imageType=
J.getInt32(12,!0);G.maxZError=J.getFloat64(16,!0);G.zMin=J.getFloat64(24,!0);G.zMax=J.getFloat64(32,!0);A+=40;q.headerInfo=G;q.ptr=A;if(3<=Q&&(g=this.computeChecksumFletcher32(new Uint8Array(g,A-(4<=Q?52:48),G.blobSize-14)),g!==G.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(g,q){var A=q.headerInfo,J=this.getDataTypeArray(A.imageType),G=A.numDims*this.getDataTypeSize(A.imageType),Q=this.readSubArray(g,q.ptr,J,G);g=this.readSubArray(g,q.ptr+G,J,G);q.ptr+=2*G;G=!0;for(q=0;q<
A.numDims;q++)if(Q[q]!==g[q]){G=!1;break}A.minValues=Q;A.maxValues=g;return G},readSubArray:function(g,q,A,J){if(A===Uint8Array)g=new Uint8Array(g,q,J);else{var G=new ArrayBuffer(J);(new Uint8Array(G)).set(new Uint8Array(g,q,J));g=new A(G)}return g},readMask:function(g,q){var A=q.ptr,J=q.headerInfo,G=J.width*J.height,Q=J.numValidPixel,S=new DataView(g,A,4);J={};J.numBytes=S.getUint32(0,!0);A+=4;if((0===Q||G===Q)&&0!==J.numBytes)throw"invalid mask";if(0===Q)Q=new Uint8Array(Math.ceil(G/8)),J.bitset=
Q,S=new Uint8Array(G),q.pixels.resultMask=S,A+=J.numBytes;else if(0<J.numBytes){Q=new Uint8Array(Math.ceil(G/8));S=new DataView(g,A,J.numBytes);g=S.getInt16(0,!0);var W=2,X=0,M=0;do{if(0<g)for(;g--;)Q[X++]=S.getUint8(W++);else for(M=S.getUint8(W++),g=-g;g--;)Q[X++]=M;g=S.getInt16(W,!0);W+=2}while(W<J.numBytes);if(-32768!==g||X<Q.length)throw"Unexpected end of mask RLE encoding";S=new Uint8Array(G);for(W=W=g=0;W<G;W++)W&7?(g=Q[W>>3],g<<=W&7):g=Q[W>>3],g&128&&(S[W]=1);q.pixels.resultMask=S;J.bitset=
Q;A+=J.numBytes}q.ptr=A;q.mask=J;return!0},readDataOneSweep:function(g,q,A,J){var G=q.ptr,Q=q.headerInfo,S=Q.numDims,W=Q.width*Q.height;Q=Q.numValidPixel*l.getDataTypeSize(Q.imageType)*S;var X=q.pixels.resultMask;if(A===Uint8Array)g=new Uint8Array(g,G,Q);else{var M=new ArrayBuffer(Q);(new Uint8Array(M)).set(new Uint8Array(g,G,Q));g=new A(M)}if(g.length===W*S)q.pixels.resultPixels=J?l.swapDimensionOrder(g,W,S,A,!0):g;else{q.pixels.resultPixels=new A(W*S);var K=M=A=0,Y=0;if(1<S)if(J)for(M=0;M<W;M++){if(X[M])for(Y=
M,K=0;K<S;K++,Y+=W)q.pixels.resultPixels[Y]=g[A++]}else for(M=0;M<W;M++){if(X[M])for(Y=M*S,K=0;K<S;K++)q.pixels.resultPixels[Y+K]=g[A++]}else for(M=0;M<W;M++)X[M]&&(q.pixels.resultPixels[M]=g[A++])}q.ptr=G+Q;return!0},readHuffmanTree:function(g,q){var A=this.HUFFMAN_LUT_BITS_MAX,J=new DataView(g,q.ptr,16);q.ptr+=16;if(2>J.getInt32(0,!0))throw"unsupported Huffman version";var G=J.getInt32(4,!0),Q=J.getInt32(8,!0);J=J.getInt32(12,!0);if(Q>=J)return!1;var S=new Uint32Array(J-Q);l.decodeBits(g,q,S);var W=
[],X;for(X=Q;X<J;X++){var M=X-(X<G?0:G);W[M]={first:S[X-Q],second:null}}X=g.byteLength-q.ptr;S=new ArrayBuffer(4*Math.ceil(X/4));(new Uint8Array(S)).set(new Uint8Array(g,q.ptr,X));g=new Uint32Array(S);q=0;S=0;var K=g[0];for(X=Q;X<J;X++){M=X-(X<G?0:G);var Y=W[M].first;0<Y&&(W[M].second=K<<q>>>32-Y,32-q>=Y?(q+=Y,32===q&&(q=0,S++,K=g[S])):(q+=Y-32,S++,K=g[S],W[M].second|=K>>>32-q))}var Z=K=0,aa=new h;for(X=0;X<W.length;X++)void 0!==W[X]&&(K=Math.max(K,W[X].first));Z=K>=A?A:K;A=[];var ba;for(X=Q;X<J;X++)if(M=
X-(X<G?0:G),Y=W[M].first,0<Y)if(Q=[Y,M],Y<=Z){M=W[M].second<<Z-Y;var da=1<<Z-Y;for(Y=0;Y<da;Y++)A[M|Y]=Q}else for(M=W[M].second,da=aa,--Y;0<=Y;Y--)(ba=M>>>Y&1)?(da.right||(da.right=new h),da=da.right):(da.left||(da.left=new h),da=da.left),0!==Y||da.val||(da.val=Q[1]);return{decodeLut:A,numBitsLUTQick:Z,numBitsLUT:K,tree:aa,stuffedData:g,srcPtr:S,bitPos:q}},readHuffman:function(g,q,A,J){var G=q.headerInfo.numDims,Q=q.headerInfo.height,S=q.headerInfo.width,W=S*Q,X=this.readHuffmanTree(g,q);g=X.decodeLut;
var M=X.tree,K=X.stuffedData,Y=X.srcPtr,Z=X.bitPos,aa=X.numBitsLUTQick;X=X.numBitsLUT;var ba=0===q.headerInfo.imageType?128:0,da=q.pixels.resultMask,fa,ja,ha,ea,ka,ia,ca=0;0<Z&&(Y++,Z=0);var na=K[Y],ma=1===q.encodeMode,ra=new A(W*G),qa=ra,pa;if(2>G||ma)for(pa=0;pa<G;pa++)if(1<G&&(qa=new A(ra.buffer,W*pa,W),ca=0),q.headerInfo.numValidPixel===S*Q)for(ha=ka=0;ha<Q;ha++)for(ea=0;ea<S;ea++,ka++){var oa=0;var la=fa=na<<Z>>>32-aa;32-Z<aa&&(la=fa|=K[Y+1]>>>64-Z-aa);if(g[la])oa=g[la][1],Z+=g[la][0];else for(la=
fa=na<<Z>>>32-X,32-Z<X&&(la=fa|=K[Y+1]>>>64-Z-X),la=M,ia=0;ia<X;ia++)if(la=(ja=fa>>>X-ia-1&1)?la.right:la.left,!la.left&&!la.right){oa=la.val;Z=Z+ia+1;break}32<=Z&&(Z-=32,Y++,na=K[Y]);oa-=ba;ma?(oa=0<ea?oa+ca:0<ha?oa+qa[ka-S]:oa+ca,oa&=255,ca=qa[ka]=oa):qa[ka]=oa}else for(ha=ka=0;ha<Q;ha++)for(ea=0;ea<S;ea++,ka++){if(da[ka]){oa=0;la=fa=na<<Z>>>32-aa;32-Z<aa&&(la=fa|=K[Y+1]>>>64-Z-aa);if(g[la])oa=g[la][1],Z+=g[la][0];else for(la=fa=na<<Z>>>32-X,32-Z<X&&(la=fa|=K[Y+1]>>>64-Z-X),la=M,ia=0;ia<X;ia++)if(la=
(ja=fa>>>X-ia-1&1)?la.right:la.left,!la.left&&!la.right){oa=la.val;Z=Z+ia+1;break}32<=Z&&(Z-=32,Y++,na=K[Y]);oa-=ba;ma?(oa=0<ea&&da[ka-1]?oa+ca:0<ha&&da[ka-S]?oa+qa[ka-S]:oa+ca,oa&=255,ca=qa[ka]=oa):qa[ka]=oa}}else for(ha=ka=0;ha<Q;ha++)for(ea=0;ea<S;ea++)if(ka=ha*S+ea,!da||da[ka])for(pa=0;pa<G;pa++,ka+=W){oa=0;la=fa=na<<Z>>>32-aa;32-Z<aa&&(la=fa|=K[Y+1]>>>64-Z-aa);if(g[la])oa=g[la][1],Z+=g[la][0];else for(la=fa=na<<Z>>>32-X,32-Z<X&&(la=fa|=K[Y+1]>>>64-Z-X),la=M,ia=0;ia<X;ia++)if(la=(ja=fa>>>X-ia-
1&1)?la.right:la.left,!la.left&&!la.right){oa=la.val;Z=Z+ia+1;break}32<=Z&&(Z-=32,Y++,na=K[Y]);oa-=ba;qa[ka]=oa}q.ptr=q.ptr+4*(Y+1)+(0<Z?4:0);q.pixels.resultPixels=ra;1<G&&!J&&(q.pixels.resultPixels=l.swapDimensionOrder(ra,W,G,A))},decodeBits:function(g,q,A,J,G){var Q=q.headerInfo,S=Q.fileVersion,W=0,X=new DataView(g,q.ptr,5<=g.byteLength-q.ptr?5:g.byteLength-q.ptr),M=X.getUint8(0);W++;var K=M>>6,Y=0===K?4:3-K,Z=0<(M&32)?!0:!1;K=M&31;M=0;if(1===Y)M=X.getUint8(W),W++;else if(2===Y)M=X.getUint16(W,
!0),W+=2;else if(4===Y)M=X.getUint32(W,!0),W+=4;else throw"Invalid valid pixel count type";Y=2*Q.maxZError;G=1<Q.numDims?Q.maxValues[G]:Q.zMax;if(Z){q.counter.lut++;Z=X.getUint8(W);W++;Q=Math.ceil((Z-1)*K/8);var aa=Math.ceil(Q/4);aa=new ArrayBuffer(4*aa);var ba=new Uint8Array(aa);q.ptr+=W;ba.set(new Uint8Array(g,q.ptr,Q));W=new Uint32Array(aa);q.ptr+=Q;for(X=0;Z-1>>>X;)X++;Q=Math.ceil(M*X/8);aa=Math.ceil(Q/4);aa=new ArrayBuffer(4*aa);ba=new Uint8Array(aa);ba.set(new Uint8Array(g,q.ptr,Q));g=new Uint32Array(aa);
q.ptr+=Q;q=3<=S?c.unstuffLUT2(W,K,Z-1,J,Y,G):c.unstuffLUT(W,K,Z-1,J,Y,G);3<=S?c.unstuff2(g,A,X,M,q):c.unstuff(g,A,X,M,q)}else q.counter.bitstuffer++,X=K,q.ptr+=W,0<X&&(Q=Math.ceil(M*X/8),aa=Math.ceil(Q/4),aa=new ArrayBuffer(4*aa),ba=new Uint8Array(aa),ba.set(new Uint8Array(g,q.ptr,Q)),g=new Uint32Array(aa),q.ptr+=Q,3<=S?null==J?c.originalUnstuff2(g,A,X,M):c.unstuff2(g,A,X,M,!1,J,Y,G):null==J?c.originalUnstuff(g,A,X,M):c.unstuff(g,A,X,M,!1,J,Y,G))},readTiles:function(g,q,A,J){var G=q.headerInfo,Q=
G.width,S=G.height,W=Q*S,X=G.microBlockSize,M=G.imageType,K=l.getDataTypeSize(M),Y=Math.ceil(Q/X),Z=Math.ceil(S/X);q.pixels.numBlocksY=Z;q.pixels.numBlocksX=Y;var aa=q.pixels.ptr=0,ba=0,da=0,fa=0,ja=0,ha=0,ea=0,ka=0,ia=aa=0,ca=0,na=0,ma=ea=0;ea=ea=0;var ra=new A(X*X);S=S%X||X;var qa=Q%X||X,pa=G.numDims,oa,la=q.pixels.resultMask,sa=q.pixels.resultPixels,wa=5<=G.fileVersion?14:15,va=G.zMax;for(da=0;da<Z;da++)for(ja=da!==Z-1?X:S,fa=0;fa<Y;fa++)for(ha=fa!==Y-1?X:qa,ca=da*Q*X+fa*X,na=Q-ha,oa=0;oa<pa;oa++){1<
pa?(ma=sa,ca=da*Q*X+fa*X,sa=new A(q.pixels.resultPixels.buffer,W*oa*K,W),va=G.maxValues[oa]):ma=null;ea=g.byteLength-q.ptr;ba=new DataView(g,q.ptr,Math.min(10,ea));var ua={};ea=0;ka=ba.getUint8(0);ea++;var ta=5<=G.fileVersion?ka&4:0;aa=ka>>6&255;ia=ka>>2&wa;if(ia!==(fa*X>>3&wa))throw"integrity issue";if(ta&&0===oa)throw"integrity issue";ka&=3;if(3<ka)throw q.ptr+=ea,"Invalid block encoding ("+ka+")";if(2===ka){if(ta)if(la)for(aa=0;aa<ja;aa++)for(ba=0;ba<ha;ba++)la[ca]&&(sa[ca]=ma[ca]),ca++;else for(aa=
0;aa<ja;aa++)for(ba=0;ba<ha;ba++)sa[ca]=ma[ca],ca++;q.counter.constant++;q.ptr+=ea}else if(0===ka){if(ta)throw"integrity issue";q.counter.uncompressed++;q.ptr+=ea;ea=ja*ha*K;ma=g.byteLength-q.ptr;ea=ea<ma?ea:ma;ma=new ArrayBuffer(0===ea%K?ea:ea+K-ea%K);ta=new Uint8Array(ma);ta.set(new Uint8Array(g,q.ptr,ea));ma=new A(ma);ea=0;if(la)for(aa=0;aa<ja;aa++){for(ba=0;ba<ha;ba++)la[ca]&&(sa[ca]=ma[ea++]),ca++;ca+=na}else for(aa=0;aa<ja;aa++){for(ba=0;ba<ha;ba++)sa[ca++]=ma[ea++];ca+=na}q.ptr+=ea*K}else if(aa=
l.getDataTypeUsed(ta&&6>M?4:M,aa),ua=l.getOnePixel(ua,ea,aa,ba),ea+=l.getDataTypeSize(aa),3===ka)if(q.ptr+=ea,q.counter.constantoffset++,la)for(aa=0;aa<ja;aa++){for(ba=0;ba<ha;ba++)la[ca]&&(sa[ca]=ta?Math.min(va,ma[ca]+ua):ua),ca++;ca+=na}else for(aa=0;aa<ja;aa++){for(ba=0;ba<ha;ba++)sa[ca]=ta?Math.min(va,ma[ca]+ua):ua,ca++;ca+=na}else if(q.ptr+=ea,l.decodeBits(g,q,ra,ua,oa),ea=0,ta)if(la)for(aa=0;aa<ja;aa++){for(ba=0;ba<ha;ba++)la[ca]&&(sa[ca]=ra[ea++]+ma[ca]),ca++;ca+=na}else for(aa=0;aa<ja;aa++){for(ba=
0;ba<ha;ba++)sa[ca]=ra[ea++]+ma[ca],ca++;ca+=na}else if(la)for(aa=0;aa<ja;aa++){for(ba=0;ba<ha;ba++)la[ca]&&(sa[ca]=ra[ea++]),ca++;ca+=na}else for(aa=0;aa<ja;aa++){for(ba=0;ba<ha;ba++)sa[ca++]=ra[ea++];ca+=na}}1<pa&&!J&&(q.pixels.resultPixels=l.swapDimensionOrder(q.pixels.resultPixels,W,pa,A))},formatFileInfo:function(g){return{fileIdentifierString:g.headerInfo.fileIdentifierString,fileVersion:g.headerInfo.fileVersion,imageType:g.headerInfo.imageType,height:g.headerInfo.height,width:g.headerInfo.width,
numValidPixel:g.headerInfo.numValidPixel,microBlockSize:g.headerInfo.microBlockSize,blobSize:g.headerInfo.blobSize,maxZError:g.headerInfo.maxZError,pixelType:l.getPixelType(g.headerInfo.imageType),eofOffset:g.eofOffset,mask:g.mask?{numBytes:g.mask.numBytes}:null,pixels:{numBlocksX:g.pixels.numBlocksX,numBlocksY:g.pixels.numBlocksY,maxValue:g.headerInfo.zMax,minValue:g.headerInfo.zMin,noDataValue:g.noDataValue}}},constructConstantSurface:function(g,q){var A=g.headerInfo.zMax,J=g.headerInfo.zMin,G=
g.headerInfo.maxValues,Q=g.headerInfo.numDims,S=g.headerInfo.height*g.headerInfo.width,W=0,X=0,M=0,K=g.pixels.resultMask;g=g.pixels.resultPixels;if(K)if(1<Q)if(q)for(W=0;W<Q;W++)for(M=W*S,A=G[W],X=0;X<S;X++)K[X]&&(g[M+X]=A);else for(X=0;X<S;X++){if(K[X])for(M=X*Q,W=0;W<Q;W++)g[M+Q]=G[W]}else for(X=0;X<S;X++)K[X]&&(g[X]=A);else if(1<Q&&J!==A)if(q)for(W=0;W<Q;W++)for(M=W*S,A=G[W],X=0;X<S;X++)g[M+X]=A;else for(X=0;X<S;X++)for(M=X*Q,W=0;W<Q;W++)g[M+W]=G[W];else for(X=0;X<S*Q;X++)g[X]=A},getDataTypeArray:function(g){switch(g){case 0:g=
Int8Array;break;case 1:g=Uint8Array;break;case 2:g=Int16Array;break;case 3:g=Uint16Array;break;case 4:g=Int32Array;break;case 5:g=Uint32Array;break;case 6:g=Float32Array;break;case 7:g=Float64Array;break;default:g=Float32Array}return g},getPixelType:function(g){switch(g){case 0:g="S8";break;case 1:g="U8";break;case 2:g="S16";break;case 3:g="U16";break;case 4:g="S32";break;case 5:g="U32";break;case 6:g="F32";break;case 7:g="F64";break;default:g="F32"}return g},isValidPixelValue:function(g,q){if(null==
q)return!1;switch(g){case 0:g=-128<=q&&127>=q;break;case 1:g=0<=q&&255>=q;break;case 2:g=-32768<=q&&32767>=q;break;case 3:g=0<=q&&65536>=q;break;case 4:g=-2147483648<=q&&2147483647>=q;break;case 5:g=0<=q&&4294967296>=q;break;case 6:g=-3.4027999387901484E38<=q&&3.4027999387901484E38>=q;break;case 7:g=4.9E-324<=q&&1.7976931348623157E308>=q;break;default:g=!1}return g},getDataTypeSize:function(g){var q=0;switch(g){case 0:case 1:q=1;break;case 2:case 3:q=2;break;case 4:case 5:case 6:q=4;break;case 7:q=
8;break;default:q=g}return q},getDataTypeUsed:function(g,q){var A=g;switch(g){case 2:case 4:A=g-q;break;case 3:case 5:A=g-2*q;break;case 6:A=0===q?g:1===q?2:1;break;case 7:A=0===q?g:g-2*q+1;break;default:A=g}return A},getOnePixel:function(g,q,A,J){g=0;switch(A){case 0:g=J.getInt8(q);break;case 1:g=J.getUint8(q);break;case 2:g=J.getInt16(q,!0);break;case 3:g=J.getUint16(q,!0);break;case 4:g=J.getInt32(q,!0);break;case 5:g=J.getUInt32(q,!0);break;case 6:g=J.getFloat32(q,!0);break;case 7:g=J.getFloat64(q,
!0);break;default:throw"the decoder does not understand this pixel type";}return g},swapDimensionOrder:function(g,q,A,J,G){var Q=0,S=0,W=0,X=0,M=g;if(1<A)if(M=new J(q*A),G)for(Q=0;Q<q;Q++)for(X=Q,W=0;W<A;W++,X+=q)M[X]=g[S++];else for(Q=0;Q<q;Q++)for(X=Q,W=0;W<A;W++,X+=q)M[S++]=g[X];return M}},h=function(g,q,A){this.val=g;this.left=q;this.right=A};return{decode:function(g,q){q=q||{};var A=q.noDataValue,J=0,G={};G.ptr=q.inputOffset||0;G.pixels={};l.readHeaderInfo(g,G);J=G.headerInfo;var Q=J.fileVersion,
S=l.getDataTypeArray(J.imageType);if(5<Q)throw"unsupported lerc version 2."+Q;l.readMask(g,G);J.numValidPixel===J.width*J.height||G.pixels.resultMask||(G.pixels.resultMask=q.maskData);var W=J.width*J.height;G.pixels.resultPixels=new S(W*J.numDims);G.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var X=!q.returnPixelInterleavedDims;if(0!==J.numValidPixel)if(J.zMax===J.zMin)l.constructConstantSurface(G,X);else if(4<=Q&&l.checkMinMaxRanges(g,G))l.constructConstantSurface(G,
X);else{var M=new DataView(g,G.ptr,2),K=M.getUint8(0);G.ptr++;if(K)l.readDataOneSweep(g,G,S,X);else if(1<Q&&1>=J.imageType&&1E-5>Math.abs(J.maxZError-.5)){M=M.getUint8(1);G.ptr++;G.encodeMode=M;if(2<M||4>Q&&1<M)throw"Invalid Huffman flag "+M;M?l.readHuffman(g,G,S,X):l.readTiles(g,G,S,X)}else l.readTiles(g,G,S,X)}G.eofOffset=G.ptr;q.inputOffset?(g=G.headerInfo.blobSize+q.inputOffset-G.ptr,1<=Math.abs(g)&&(G.eofOffset=q.inputOffset+G.headerInfo.blobSize)):(g=G.headerInfo.blobSize-G.ptr,1<=Math.abs(g)&&
(G.eofOffset=G.headerInfo.blobSize));g={width:J.width,height:J.height,pixelData:G.pixels.resultPixels,minValue:J.zMin,maxValue:J.zMax,validPixelCount:J.numValidPixel,dimCount:J.numDims,dimStats:{minValues:J.minValues,maxValues:J.maxValues},maskData:G.pixels.resultMask};if(G.pixels.resultMask&&l.isValidPixelValue(J.imageType,A)){Q=G.pixels.resultMask;for(J=0;J<W;J++)Q[J]||(g.pixelData[J]=A);g.noDataValue=A}G.noDataValue=A;q.returnFileInfo&&(g.fileInfo=l.formatFileInfo(G));return g},getBandCount:function(g){for(var q=
0,A=0,J={ptr:0,pixels:{}};A<g.byteLength-58;)l.readHeaderInfo(g,J),A+=J.headerInfo.blobSize,q++,J.ptr=A;return q}}})})(m);const n=m.exports,e=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],f=new Set([1,5,6,7,8,34712,34887]),p=function(a,c,l,h,g){var q,A,J=T.isPlatformLittleEndian===c,G=H(l,"BITSPERSAMPLE");const Q=null!=(q=H(l,"SAMPLEFORMAT"))?q:1;q=N(Q,G);G=null!=(A=H(l,"COMPRESSION"))?A:1;A=L(q);if(34887===G)return n.decode(a,{inputOffset:h,returnFileInfo:!0}).pixelData;if(1===G){var S=a.slice(h,h+
g);var W=new Uint8Array(S)}else if(8===G||32946===G)W=new Uint8Array(a,h,g),W=new V.Zlib(W),a=W.getBytes(),S=new ArrayBuffer(a.length),W=new Uint8Array(S),W.set(a);else if(6===G)W=new Uint8Array(a,h,g),S=new D.JpegImage,S.parse(W),a=S.getData(S.width,S.height,!0),S=new ArrayBuffer(a.length),W=new Uint8Array(S),W.set(a);else if(7===G){c=l.get("JPEGTABLES").values;S=c.length-2;W=new Uint8Array(S+g-2);for(l=0;l<S;l++)W[l]=c[l];a=new Uint8Array(a,h+2,g-2);for(h=0;h<a.length;h++)W[S+h]=a[h];S=new D.JpegImage;
S.parse(W);a=S.getData(S.width,S.height,!0);S=new ArrayBuffer(a.length);W=new Uint8Array(S);W.set(a)}else 5===G&&(W=P.decode(a,h,g,c),S=W.buffer);if("u8"!==q&&"s8"!==q&&!J)switch(S=new ArrayBuffer(W.length),J=new Uint8Array(S),q){case "u16":case "s16":for(q=0;q<W.length;q+=2)J[q]=W[q+1],J[q+1]=W[q];break;case "u32":case "s32":case "f32":for(q=0;q<W.length;q+=4)J[q]=W[q+3],J[q+1]=W[q+2],J[q+2]=W[q+1],J[q+3]=W[q]}return new A(S)},d=function(a,c,l){if(!(a&&0<a.length&&c&&l))return null;let h,g,q;const A=
a[0].length,J=a.length,G=new Uint8Array(A);for(let S=0;S<J;S++)if(h=a[S],g=c[S],q=l[S],0===S)for(var Q=0;Q<A;Q++)G[Q]=h[Q]<g||h[Q]>q?0:1;else for(Q=0;Q<A;Q++)G[Q]&&(G[Q]=h[Q]<g||h[Q]>q?0:1);return G},b=function(a){if(!a)return null;var c=a.match(/<Item(.*?)Item>/gi);if(!c||0===c.length)return null;a=new Map;var l;for(var h=0;h<c.length;h++){var g=c[h];var q=g.slice(6,g.indexOf("\x3e"));var A=g.indexOf("sample\x3d");-1<A&&(l=g.slice(A+8,g.indexOf('"',A+8)));A=g.indexOf("name\x3d");-1<A&&(q=g.slice(A+
6,g.indexOf('"',A+6)));q&&(g=g.slice(g.indexOf("\x3e")+1,g.indexOf("\x3c/Item\x3e")).trim(),null!=l?a.has(q)?a.get(q)[l]=g:a.set(q,[g]):a.set(q,g));l=null}c=a.get("STATISTICS_MINIMUM");q=a.get("STATISTICS_MAXIMUM");h=a.get("STATISTICS_MEAN");g=a.get("STATISTICS_STDDEV");l=null;if(c&&q)for(l=[],A=0;A<c.length;A++)l.push({min:parseFloat(c[A]),max:parseFloat(q[A]),avg:h&&parseFloat(h[A]),stddev:g&&parseFloat(g[A])});q=a.get("BandName");h=a.get("WavelengthMin");g=a.get("WavelengthMax");c=null;if(q)for(c=
[],A=0;A<q.length;A++)c.push({BandName:q[A],WavelengthMin:h&&parseFloat(h[A]),WavelengthMax:g&&parseFloat(g[A])});q=a.get("DataType");return{statistics:l,bandProperties:c,dataType:q,rawMetadata:a}};U.Lerc2Codec=n;U.decode=function(a,c=0,l){l=l||O(a);const {ifds:h,noData:g}=l;if(0===h.length)throw"no valid image file directory";var q=k(l);if(q)throw q;q=-1===c?h[h.length-1]:h[c];c=g?g[0]:null;if(l.tileWidth){var A=l,J,G=t(q,"TILEOFFSETS");if(void 0===G)q=null;else{l=t(q,"TILEBYTECOUNTS");var {width:Q,
height:S,pixelType:W,tileWidth:X,tileHeight:M}=r([q]),K=y(q,A),Y=A.planes,Z=Q*S,aa=H(q,"BITSPERSAMPLE"),ba=34887===(null!=(J=H(q,"COMPRESSION"))?J:1),da=L(W);J=[];for(var fa=0;fa<Y;fa++)J.push(new da(Z));var ja,ha;Z=Math.ceil(Q/X);if(0===aa%8)if(ba&&K&&1<Y)for(K=Math.round(G.length/Y),aa=0;aa<K;aa++){var ea=Math.floor(aa/Z)*M;var ka=aa%Z*X;da=ea*Q+ka;for(ba=0;ba<Y;ba++){fa=aa*Y+ba;fa=p(a,A.littleEndian,q,G[fa],l[fa]);var ia=0;var ca=da;var na=Math.min(X,Q-ka);var ma=Math.min(M,S-ea);var ra=J[ba];
for(ja=0;ja<ma;ja++)for(ca=da+ja*Q,ia=ja*X,ha=0;ha<na;ha++,ca++,ia++)ra[ca]=fa[ia]}}else for(aa=0;aa<G.length;aa++)for(ea=Math.floor(aa/Z)*M,ka=aa%Z*X,da=ea*Q+ka,fa=p(a,A.littleEndian,q,G[aa],l[aa]),ia=0,ca=da,na=Math.min(X,Q-ka),ma=Math.min(M,S-ea),ea=0;ea<Y;ea++)if(ra=J[ea],K||ba)for(ja=0;ja<ma;ja++)for(ca=da+ja*Q,ia=X*M*ea+ja*X,ha=0;ha<na;ha++,ca++,ia++)ra[ca]=fa[ia];else for(ja=0;ja<ma;ja++)for(ca=da+ja*Q,ia=ja*X*Y+ea,ha=0;ha<na;ha++,ca++,ia+=Y)ra[ca]=fa[ia];q={width:Q,height:S,pixelType:W,pixels:J}}}else if(Z=
l,ja=T.isPlatformLittleEndian===Z.littleEndian,ha=t(q,"STRIPOFFSETS"),void 0===ha)q=null;else{var {width:qa,height:pa,pixelType:oa}=r([q]);l=Z.planes;Y=qa*pa;aa=H(q,"BITSPERSAMPLE");G=L(oa);J=new G(Y*l);da=t(q,"STRIPBYTECOUNTS");fa=H(q,"ROWSPERSTRIP");ea=null!=(ka=H(q,"COMPRESSION"))?ka:1;ca=fa;if(0===aa%8)for(q=0;q<ha.length;q++){ka=q*fa*qa*l;ca=(q+1)*fa>pa?pa-q*fa:fa;if("u8"===oa||"s8"===oa||ja)8===ea||32946===ea?(K=new Uint8Array(a,ha[q],da[q]),K=new V.Zlib(K),ia=K.getBytes(),ba=new ArrayBuffer(ia.length),
K=new Uint8Array(ba),K.set(ia),K.length!==ca*qa*l*aa/8&&console.log("strip byte counts is different than expected")):6===ea?(K=new Uint8Array(a,ha[q],da[q]),ba=new D.JpegImage,ba.parse(K),ca=ba.getData(ba.width,ba.height,!0),ba=new ArrayBuffer(ca.length),K=new Uint8Array(ba),K.set(ca)):5===ea?(K=P.decode(a,ha[q],da[q],Z.littleEndian),ba=K.buffer):1===ea&&(da[q]!==ca*qa*l*aa/8&&console.log("strip byte counts is different than expected"),ba=a.slice(ha[q],ha[q]+da[q]));else switch(6===ea||8===ea||32946===
ea?(K=new Uint8Array(a,ha[q],da[q]),K=new V.Zlib(K),K=K.getBytes(),ba=new ArrayBuffer(K.length),A=new Uint8Array(ba),K.length!==ca*qa*l*aa/8&&console.log("strip byte counts is different than expected")):1===ea&&(da[q]!==ca*qa*l*aa/8&&console.log("strip byte counts is different than expected"),ba=new ArrayBuffer(da[q]),K=new Uint8Array(a,ha[q],da[q]),A=new Uint8Array(ba)),oa){case "u16":case "s16":for(ca=0;ca<K.length;ca+=2)A[ca]=K[ca+1],A[ca+1]=K[ca];break;case "u32":case "s32":case "f32":for(ca=
0;ca<K.length;ca+=4)A[ca]=K[ca+3],A[ca+1]=K[ca+2],A[ca+2]=K[ca+1],A[ca+3]=K[ca]}ca=new G(ba);J.set(ca,ka)}K=[];if(1===l)K.push(J);else for(q=0;q<l;q++){A=new G(Y);for(a=0;a<Y;a++)A[a]=J[a*l+q];K.push(A)}q={width:qa,height:pa,pixelType:oa,pixels:K}}if(null!==c){q.mask=new Uint8Array(q.width*q.height);if(1E24<Math.abs(c))for(a=0;a<q.width*q.height;a++)q.mask[a]=1E-6>Math.abs((q.pixels[0][a]-c)/c)?0:1;else for(a=0;a<q.width*q.height;a++)q.mask[a]=q.pixels[0][a]===c?0:1;q.noDataValue=c}return q};U.decodeTileOrStrip=
function(a,c){var l;const {headerInfo:h,ifd:g,offsets:q,sizes:A}=c;var J=q.map((fa,ja)=>p(a,h.littleEndian,g,fa,A[ja]||a.byteLength)),G=y(g,h);const {pixelType:Q,planes:S}=h;var W=L(Q);const X=H(g,"TILEWIDTH"),M=H(g,"TILELENGTH");var K=null!=(l=H(g,"COMPRESSION"))?l:1;l=X*M;const Y=[];let Z=J[0];const aa=34887===K;for(let fa=0;fa<S;fa++){K=new W(l);if(G&&aa){Z=J[fa];for(var ba=0;ba<l;ba++)K[ba]=Z[fa][ba+fa]}else if(G||aa&&!G)K=Z.slice(l*fa,l*(fa+1));else for(ba=0;ba<l;ba++)K[ba]=Z[ba*S+fa];Y.push(K)}J=
h.noData?h.noData[0]:null;G=(W=h.metadata?h.metadata.statistics:null)?W.map(fa=>fa.min):null;W=W?W.map(fa=>fa.max):null;let da;if(null!=J)if(da=new Uint8Array(l),1E24<Math.abs(J))for(c=0;c<l;c++)da[c]=1E-6>Math.abs((Y[0][c]-J)/J)?0:1;else for(c=0;c<l;c++)da[c]=Y[0][c]===J?0:1;else G&&W&&c.applyMinMaxConstraint&&(da=d(Y,G,W));return{pixelType:Q,width:X,height:M,pixels:Y,mask:da,noDataValue:J}};U.getImageInfo=r;U.isBSQConfig=y;U.parseFieldValues=u;U.parseHeader=O;U.parseIFD=v;U.parseSignature=E})},
"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(U){U.bytesToUTF8=function(R,D){let P=0,z="",T=0,V=0;const N=R.length;for(;P<N;)if(V=R[P++],T=V>>4,8>T?T=1:15===T?(T=4,V=(V&7)<<18|(R[P++]&63)<<12|(R[P++]&63)<<6|R[P++]&63):14===T?(T=3,V=(V&15)<<12|(R[P++]&63)<<6|R[P++]&63):(T=2,V=(V&31)<<6|R[P++]&63),0!==V||D)z+=String.fromCharCode(V);return z};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],
function(U){function R(T,V,N,L=!0){if(0!==V%4||0!==N%4){var I=new ArrayBuffer(4*Math.ceil(N/4));I=new Uint8Array(I);T=new Uint8Array(T,V,N);if(L)for(L=0;L<I.length;L+=4)I[L]=T[L+3],I[L+1]=T[L+2],I[L+2]=T[L+1],I[L+3]=T[L];else I.set(T);return new Uint32Array(I.buffer)}if(L){L=new Uint8Array(T,V,N);I=new Uint8Array(L.length);for(T=0;T<I.length;T+=4)I[T]=L[T+3],I[T+1]=L[T+2],I[T+2]=L[T+1],I[T+3]=L[T];return new Uint32Array(I.buffer)}return new Uint32Array(T,V,N/4)}function D(){const T=[];for(let V=0;257>=
V;V++)T[V]=[V];return T}function P(T,V){for(let N=0;N<V.length;N++)T.push(V[N])}const z=new Set;z.add(511);z.add(1023);z.add(2047);z.add(4095);z.add(8191);U.decode=function(T,V,N,L=!0){T=R(T,V,N,L);V=9;L=D();let I=32,x=L.length,t=[],w=1,H=T[0],C=0;const u=T.length;N=8*(4*u-N);const r=[];for(;null!=H;){if(I>=V)I-=V,C=H>>>32-V,H<<=V;else{C=H>>>32-I;H=T[w++];var y=V-I;I=32-y;C=(C<<y)+(H>>>I);H<<=y}if(257===C)break;if(256===C)V=9,L=D(),x=L.length,t=[];else{y=L[C];if(null==y){if(C>L.length)throw"data integrity issue: code does not exist on code page";
t.push(t[0]);L[x++]=t.slice();P(r,t)}else P(r,y),t.push(y[0]),1<t.length&&(L[x++]=t.slice()),t=y.slice();z.has(x)&&V++;0===I&&(H=T[w++],I=32);if(w>u||w===u&&I<=N)break}}return new Uint8Array(r)};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const U=(()=>{const z=[];z[254]="NEWSUBFILETYPE";z[255]="SUBFILETYPE";z[256]="IMAGEWIDTH";z[257]="IMAGELENGTH";z[258]="BITSPERSAMPLE";z[259]="COMPRESSION";z[262]="PHOTOMETRICINTERPRETATION";
z[263]="THRESHHOLDING";z[264]="CELLWIDTH";z[265]="CELLLENGTH";z[266]="FILLORDER";z[269]="DOCUMENTNAME";z[270]="IMAGEDESCRIPTION";z[271]="MAKE";z[272]="MODEL";z[273]="STRIPOFFSETS";z[274]="ORIENTATION";z[277]="SAMPLESPERPIXEL";z[278]="ROWSPERSTRIP";z[279]="STRIPBYTECOUNTS";z[280]="MINSAMPLEVALUE";z[281]="MAXSAMPLEVALUE";z[282]="XRESOLUTION";z[283]="YRESOLUTION";z[284]="PLANARCONFIGURATION";z[285]="PAGENAME";z[286]="XPOSITION";z[287]="YPOSITION";z[288]="FREEOFFSETS";z[289]="FREEBYTECOUNTS";z[290]="GRAYRESPONSEUNIT";
z[291]="GRAYRESPONSECURVE";z[292]="T4OPTIONS";z[293]="T6OPTIONS";z[296]="RESOLUTIONUNIT";z[297]="PAGENUMBER";z[300]="COLORRESPONSEUNIT";z[301]="TRANSFERFUNCTION";z[305]="SOFTWARE";z[306]="DATETIME";z[315]="ARTIST";z[316]="HOSTCOMPUTER";z[317]="PREDICTOR";z[318]="WHITEPOINT";z[319]="PRIMARYCHROMATICITIES";z[320]="COLORMAP";z[321]="HALFTONEHINTS";z[322]="TILEWIDTH";z[323]="TILELENGTH";z[324]="TILEOFFSETS";z[325]="TILEBYTECOUNTS";z[326]="BADFAXLINES";z[327]="CLEANFAXDATA";z[328]="CONSECUTIVEBADFAXLINES";
z[330]="SUBIFD";z[332]="INKSET";z[333]="INKNAMES";z[334]="NUMBEROFINKS";z[336]="DOTRANGE";z[337]="TARGETPRINTER";z[338]="EXTRASAMPLES";z[339]="SAMPLEFORMAT";z[340]="SMINSAMPLEVALUE";z[341]="SMAXSAMPLEVALUE";z[342]="TRANSFERRANGE";z[347]="JPEGTABLES";z[512]="JPEGPROC";z[513]="JPEGIFOFFSET";z[514]="JPEGIFBYTECOUNT";z[515]="JPEGRESTARTINTERVAL";z[517]="JPEGLOSSLESSPREDICTORS";z[518]="JPEGPOINTTRANSFORM";z[519]="JPEGQTABLES";z[520]="JPEGDCTABLES";z[521]="JPEGACTABLES";z[529]="YCBCRCOEFFICIENTS";z[530]=
"YCBCRSUBSAMPLING";z[531]="YCBCRPOSITIONING";z[532]="REFERENCEBLACKWHITE";z[700]="XMP";z[33550]="GEOPIXELSCALE";z[33922]="GEOTIEPOINTS";z[33432]="COPYRIGHT";z[42112]="GDAL_METADATA";z[42113]="GDAL_NODATA";z[50844]="RPCCOEFFICIENT";z[34264]="GEOTRANSMATRIX";z[34735]="GEOKEYDIRECTORY";z[34736]="GEODOUBLEPARAMS";z[34737]="GEOASCIIPARAMS";z[34665]="EXIFIFD";z[34853]="GPSIFD";z[40965]="INTEROPERABILITYIFD";return z})(),R=(()=>{const z=[].concat(U);z[36864]="ExifVersion";z[40960]="FlashpixVersion";z[40961]=
"ColorSpace";z[42240]="Gamma";z[37121]="ComponentsConfiguration";z[37122]="CompressedBitsPerPixel";z[40962]="PixelXDimension";z[40963]="PixelYDimension";z[37500]="MakerNote";z[37510]="UserComment";z[40964]="RelatedSoundFile";z[36867]="DateTimeOriginal";z[36868]="DateTimeDigitized";z[36880]="OffsetTime";z[36881]="OffsetTimeOriginal";z[36882]="OffsetTimeDigitized";z[37520]="SubSecTime";z[37521]="SubSecTimeOriginal";z[37522]="SubSecTimeDigitized";z[37888]="Temperature";z[37889]="Humidity";z[37890]="Pressure";
z[37891]="WaterDepth";z[37892]="Acceleration";z[37893]="CameraElevationAngle";z[42016]="ImageUniqueID";z[42032]="CameraOwnerName";z[42033]="BodySerialNumber";z[42034]="LensSpecification";z[42035]="LensMake";z[42036]="LensModel";z[42037]="LensSerialNumber";z[33434]="ExposureTime";z[33437]="FNumber";z[34850]="ExposureProgram";z[34852]="SpectralSensitivity";z[34855]="PhotographicSensitivity";z[34856]="OECF";z[34864]="SensitivityType";z[34865]="StandardOutputSensitivity";z[34866]="RecommendedExposureIndex";
z[34867]="ISOSpeed";z[34868]="ISOSpeedLatitudeyyy";z[34869]="ISOSpeedLatitudezzz";z[37377]="ShutterSpeedValue";z[37378]="ApertureValue";z[37379]="BrightnessValue";z[37380]="ExposureBiasValue";z[37381]="MaxApertureValue";z[37382]="SubjectDistance";z[37383]="MeteringMode";z[37384]="LightSource";z[37385]="Flash";z[37386]="FocalLength";z[37396]="SubjectArea";z[41483]="FlashEnergy";z[41484]="SpatialFrequencyResponse";z[41486]="FocalPlaneXResolution";z[41487]="FocalPlaneYResolution";z[41488]="FocalPlaneResolutionUnit";
z[41492]="SubjectLocation";z[41493]="ExposureIndex";z[41495]="SensingMethod";z[41728]="FileSource";z[41729]="SceneType";z[41730]="CFAPattern";z[41985]="CustomRendered";z[41986]="ExposureMode";z[41987]="WhiteBalance";z[41988]="DigitalZoomRatio";z[41989]="FocalLengthIn35mmFilm";z[41990]="SceneCaptureType";z[41991]="GainControl";z[41992]="Contrast";z[41993]="Saturation";z[41994]="Sharpness";z[41995]="DeviceSettingDescription";z[41996]="SubjectDistanceRange";return z})(),D=(()=>{const z=[];z[1024]="GTModelTypeGeoKey";
z[1025]="GTRasterTypeGeoKey";z[1026]="GTCitationGeoKey";z[2048]="GeographicTypeGeoKey";z[2049]="GeogCitationGeoKey";z[2050]="GeogGeodeticDatumGeoKey";z[2051]="GeogPrimeMeridianGeoKey";z[2052]="GeogLinearUnitsGeoKey";z[2053]="GeogLinearUnitSizeGeoKey";z[2054]="GeogAngularUnitsGeoKey";z[2055]="GeogAngularUnitSizeGeoKey";z[2056]="GeogEllipsoidGeoKey";z[2057]="GeogSemiMajorAxisGeoKey";z[2058]="GeogSemiMinorAxisGeoKey";z[2059]="GeogInvFlatteningGeoKey";z[2061]="GeogPrimeMeridianLongGeoKey";z[2060]="GeogAzimuthUnitsGeoKey";
z[3072]="ProjectedCSTypeGeoKey";z[3073]="PCSCitationGeoKey";z[3074]="ProjectionGeoKey";z[3075]="ProjCoordTransGeoKey";z[3076]="ProjLinearUnitsGeoKey";z[3077]="ProjLinearUnitSizeGeoKey";z[3078]="ProjStdParallel1GeoKey";z[3079]="ProjStdParallel2GeoKey";z[3080]="ProjNatOriginLongGeoKey";z[3081]="ProjNatOriginLatGeoKey";z[3082]="ProjFalseEastingGeoKey";z[3083]="ProjFalseNorthingGeoKey";z[3084]="ProjFalseOriginLongGeoKey";z[3085]="ProjFalseOriginLatGeoKey";z[3086]="ProjFalseOriginEastingGeoKey";z[3087]=
"ProjFalseOriginNorthingGeoKey";z[3088]="ProjCenterLongGeoKey";z[3090]="ProjCenterEastingGeoKey";z[3091]="ProjCenterNorthingGeoKey";z[3092]="ProjScaleAtNatOriginGeoKey";z[3093]="ProjScaleAtCenterGeoKey";z[3094]="ProjAzimuthAngleGeoKey";z[3095]="ProjStraightVertPoleLongGeoKey";z[4096]="VerticalCSTypeGeoKey";z[4097]="VerticalCitationGeoKey";z[4098]="VerticalDatumGeoKey";z[4099]="VerticalUnitsGeoKey";return z})(),P=new Map;P.set("EXIFIFD",R);P.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:U,ifdTags:P,GEO_KEYS:D,getTagName:function(z,T){T=(T||U)[z];void 0===T&&(T="unknown"+String(z));return T}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(U){{var R=new ArrayBuffer(4);const D=new Uint8Array(R);(new Uint32Array(R))[0]=1;R=1===D[0]}U.isPlatformLittleEndian=R;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/chunks/LercCodec":function(){define(["exports","../core/mathUtils"],function(U,R){var D=R.clampFloat32(-Infinity);U.decode=
function(P,z){z=z||{};var T=z.inputOffset||0;var V=z.encodedMaskData||null===z.encodedMaskData;var N=new Uint8Array(P,T,10);N=String.fromCharCode.apply(null,N);if("CntZImage"!=N.trim())throw"Unexpected file identifier string: "+N;T+=10;var L=new DataView(P,T,24);var I=L.getInt32(0,!0);var x=L.getInt32(4,!0);var t=L.getUint32(8,!0);var w=L.getUint32(12,!0);var H=L.getFloat64(16,!0);T+=24;if(!V){L=new DataView(P,T,16);var C={};C.numBlocksY=L.getUint32(0,!0);C.numBlocksX=L.getUint32(4,!0);C.numBytes=
L.getUint32(8,!0);C.maxValue=L.getFloat32(12,!0);T+=16;if(0<C.numBytes){V=new Uint8Array(Math.ceil(w*t/8));L=new DataView(P,T,C.numBytes);var u=L.getInt16(0,!0);var r=2;var y=0;do{if(0<u)for(;u--;)V[y++]=L.getUint8(r++);else{var O=L.getUint8(r++);for(u=-u;u--;)V[y++]=O}u=L.getInt16(r,!0);r+=2}while(r<C.numBytes);if(-32768!==u||y<V.length)throw"Unexpected end of mask RLE encoding";C.bitset=V;T+=C.numBytes}else 0===(C.numBytes|C.numBlocksY|C.maxValue)&&(V=new Uint8Array(Math.ceil(w*t/8)),C.bitset=V)}L=
new DataView(P,T,16);var B=V=O=y=r=u=void 0;u=L.getUint32(0,!0);r=L.getUint32(4,!0);y=L.getUint32(8,!0);O=L.getFloat32(12,!0);T+=16;B=r;V=u;B+=0<w%B?1:0;var F=V+(0<t%V?1:0);V=Array(B*F);for(var E=1E9,v=0,k=0;k<F;k++)for(var m=0;m<B;m++){var n=0;L=new DataView(P,T,Math.min(10,P.byteLength-T));var e={};V[v++]=e;var f=L.getUint8(0);n++;e.encoding=f&63;if(3<e.encoding)throw"Invalid block encoding ("+e.encoding+")";if(2===e.encoding)T++,E=Math.min(E,0);else{if(0!==f&&2!==f){f>>=6;e.offsetType=f;if(2===
f)e.offset=L.getInt8(1),n++;else if(1===f)e.offset=L.getInt16(1,!0),n+=2;else if(0===f)e.offset=L.getFloat32(1,!0),n+=4;else throw"Invalid block offset type";E=Math.min(e.offset,E);if(1===e.encoding)if(f=L.getUint8(n),n++,e.bitsPerPixel=f&63,f>>=6,e.numValidPixelsType=f,2===f)e.numValidPixels=L.getUint8(n),n++;else if(1===f)e.numValidPixels=L.getUint16(n,!0),n+=2;else if(0===f)e.numValidPixels=L.getUint32(n,!0),n+=4;else throw"Invalid valid pixel count type";}T+=n;if(3!=e.encoding)if(0===e.encoding){L=
(y-1)/4;if(L!==Math.floor(L))throw"uncompressed block has invalid length";n=new ArrayBuffer(4*L);f=new Uint8Array(n);f.set(new Uint8Array(P,T,4*L));n=new Float32Array(n);for(f=0;f<n.length;f++)E=Math.min(E,n[f]);e.rawData=n;T+=4*L}else 1===e.encoding&&(L=Math.ceil(e.numValidPixels*e.bitsPerPixel/8),n=new ArrayBuffer(4*Math.ceil(L/4)),f=new Uint8Array(n),f.set(new Uint8Array(P,T,L)),e.stuffedData=new Uint32Array(n),T+=L)}}B=E;P=T;T=null!=z.noDataValue?R.clampFloat32(z.noDataValue):D;F=z.encodedMaskData;
f=z.returnMask;E=0;v=r;k=u;m=Math.floor(w/v);e=Math.floor(t/k);n=2*H;F=F||(C?C.bitset:null);var p;L=new (z.pixelType||Float32Array)(w*t);f&&F&&(p=new Uint8Array(w*t));f=new Float32Array(m*e);for(var d,b,a=0;a<=k;a++){var c=a!==k?e:t%k;if(0!==c)for(var l=0;l<=v;l++){var h=l!==v?m:w%v;if(0!==h){var g=a*w*e+l*m,q=w-h,A=V[E],J;if(2>A.encoding){if(0===A.encoding)var G=A.rawData;else{d=J=G=void 0;b=A.stuffedData;var Q=A.bitsPerPixel,S=A.numValidPixels,W=A.offset,X=n,M=f,K=O,Y=(1<<Q)-1,Z=0,aa=0,ba=Math.ceil((K-
W)/X);b[b.length-1]<<=8*(4*b.length-Math.ceil(Q*S/8));for(d=0;d<S;d++)0===aa&&(G=b[Z++],aa=32),aa>=Q?(J=G>>>aa-Q&Y,aa-=Q):(aa=Q-aa,J=(G&Y)<<aa&Y,G=b[Z++],aa=32-aa,J+=G>>>aa),M[d]=J<ba?W+J*X:K;G=f}J=0}else var da=2===A.encoding?0:A.offset;if(F)for(b=0;b<c;b++){if(g&7){var fa=F[g>>3];fa<<=g&7}for(d=0;d<h;d++)g&7||(fa=F[g>>3]),fa&128?(p&&(p[g]=1),L[g++]=2>A.encoding?G[J++]:da):(p&&(p[g]=0),L[g++]=T),fa<<=1;g+=q}else if(2>A.encoding)for(b=0;b<c;b++){for(d=0;d<h;d++)L[g++]=G[J++];g+=q}else for(b=0;b<c;b++)if(L.fill)L.fill(da,
g,g+h),g+=h+q;else{for(d=0;d<h;d++)L[g++]=da;g+=q}if(1===A.encoding&&J!==A.numValidPixels)throw"Block and Mask do not match";E++}}}da=p;p={width:w,height:t,pixelData:L,minValue:B,maxValue:O,noDataValue:T};da&&(p.maskData=da);z.returnEncodedMask&&C&&(p.encodedMaskData=C.bitset?C.bitset:null);if(z.returnFileInfo&&(p.fileInfo={fileIdentifierString:N,fileVersion:I,imageType:x,height:t,width:w,maxZError:H,eofOffset:P,mask:C?{numBlocksX:C.numBlocksX,numBlocksY:C.numBlocksY,numBytes:C.numBytes,maxValue:C.maxValue}:
null,pixels:{numBlocksX:r,numBlocksY:u,numBytes:y,maxValue:O,minValue:B,noDataValue:T}},z.computeUsedBitDepths)){z=p.fileInfo;C=r*u;N={};for(I=0;I<C;I++)x=V[I],0===x.encoding?N.float32=!0:1===x.encoding?N[x.bitsPerPixel]=!0:N[0]=!0;C=Object.keys(N);z.bitDepths=C}return p}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const U=function(R){let D=1;switch(R){case Uint8Array:case Int8Array:D=1;break;case Uint16Array:case Int16Array:D=2;break;case Uint32Array:case Int32Array:case Float32Array:D=
4;break;case Float64Array:D=8}return D};return function(){function R(){}R.decode=function(D,P){var z=P.pixelType;const T=[],V=P.width*P.height;var N=Math.floor(D.byteLength/(P.width*P.height*U(P.pixelType)));const {bandIds:L,format:I}=P;P=L&&L.length||Math.floor(D.byteLength/(P.width*P.height*U(P.pixelType)));var x=D.byteLength-D.byteLength%(V*U(z));const t=new z(D,0,V*N);let w,H;let C,u;if("bip"===I)for(w=0;w<P;w++){C=new z(V);u=L?L[w]:w;for(H=0;H<V;H++)C[H]=t[H*N+u];T.push(C)}else if("bsq"===I)for(w=
0;w<P;w++)u=L?L[w]:w,T.push(t.subarray(u*V,(u+1)*V));if(x<D.byteLength-1)if(D=D.slice(x),8*D.byteLength<V)var r=null;else{D=new Uint8Array(D,0,Math.ceil(V/8));z=new Uint8Array(V);for(P=x=P=r=N=0;P<D.length-1;P++)for(r=D[P],x=7;0<=x;x--)z[N++]=r>>x&1;for(x=7;N<V-1;)r=D[D.length-1],z[N++]=r>>x&1,x--;r=z}return{pixels:T,mask:r}};return R}()})},"esri/layers/support/rasterDatasets/DBFParser":function(){define(["../../../chunks/_rollupPluginBabelHelpers","./byteStreamUtils"],function(U,R){function D(P){var z=
P.fields;P=P.records;const T=z.some(x=>"oid"===x.name.toLowerCase())?"OBJECTID":"OID";z=[{name:T,type:"esriFieldTypeOID",alias:"OID"}].concat(z.map(x=>({name:x.name,type:"esriFieldType"+x.typeName,alias:x.name})));const V=z.map(x=>x.name),N=[];let L=0,I=0;P.forEach(x=>{const t={};t[T]=L++;for(I=1;I<V.length;I++)t[V[I]]=x[I-1];N.push({attributes:t})});return{displayFieldName:"",fields:z,features:N}}return function(){function P(){}P.parse=function(z){var T=new DataView(z),V=T.getUint8(0)&3;if(3!==V)return{header:{version:V},
recordSet:null};const N=T.getUint32(4,!0);var L=T.getUint16(8,!0);const I=T.getUint16(10,!0);L={version:V,recordCount:N,headerByteCount:L,recordByteCount:I};let x=32;const t=[],w=[];if(3===V){for(;13!==T.getUint8(x);)V=String.fromCharCode(T.getUint8(x+11)).trim(),t.push({name:R.bytesToUTF8(new Uint8Array(z,x,11)),type:V,typeName:"String Date Double Boolean String Integer".split(" ")["CDFLMN".split("").indexOf(V)],length:T.getUint8(x+16)}),x+=32;x+=1;if(0<t.length)for(;w.length<N&&z.byteLength-x>I;){const H=
[];32===T.getUint8(x)?(x+=1,t.forEach(C=>{if("C"===C.type)H.push(R.bytesToUTF8(new Uint8Array(z,x,C.length)).trim());else if("N"===C.type)H.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(z,x,C.length)).trim(),10));else if("F"===C.type)H.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(z,x,C.length)).trim()));else if("D"===C.type){const u=String.fromCharCode.apply(null,new Uint8Array(z,x,C.length)).trim();H.push(new Date(parseInt(u.substring(0,4),10),parseInt(u.substring(4,
6),10)-1,parseInt(u.substring(6,8),10)))}x+=C.length}),w.push(H)):x+=I}}T=D({fields:t,records:w});return{header:L,fields:t,records:w,recordSet:T}};U._createClass(P,null,[{key:"supportedVersions",get:function(){return[5]}}]);return P}()})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./GCSShiftTransform","./IdentityTransform","./PolynomialTransform"],function(U,R,D,P){const z={GCSShiftXform:R,IdentityXform:D,PolynomialXform:P},T=Object.keys(z);U.isTransformSupported=function(V){const N=
null==V?void 0:V.type;return!V||T.includes(N)};U.readTransform=function(V){if(null==V||!V.type)return null;var N=z[null==V?void 0:V.type];return N?(N=new N,N.read(V),N):null};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),
function(U,R,D,P,z,T,V,N,L){P=function(I){function x(){var w=I.apply(this,arguments)||this;w.type="gcs-shift";w.tolerance=1E-8;return w}U._inheritsLoose(x,I);var t=x.prototype;t.forwardTransform=function(w){w=w.clone();if("point"===w.type)return w.x>180+this.tolerance&&(w.x-=360),w;w.xmin>=180-this.tolerance?(w.xmax-=360,w.xmin-=360):w.xmax>180+this.tolerance&&(w.xmin=-180,w.xmax=180);return w};t.inverseTransform=function(w){w=w.clone();if("point"===w.type)return w.x<-this.tolerance&&(w.x+=360),w;
w.xmin<-this.tolerance&&(w.xmin+=360,w.xmax+=360);return w};return x}(L);R.__decorate([V.enumeration({GCSShiftXform:"gcs-shift"})],P.prototype,"type",void 0);R.__decorate([D.property()],P.prototype,"tolerance",void 0);return P=R.__decorate([N.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],P)})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(U,R,D,P,z,T,V,N){D=function(L){function I(){return L.apply(this,arguments)||this}U._inheritsLoose(I,L);var x=I.prototype;x.forwardTransform=function(t){return t};x.inverseTransform=function(t){return t};U._createClass(I,[{key:"affectsPixelSize",get:function(){return!1}}]);return I}(D.JSONSupport);R.__decorate([P.property()],D.prototype,"affectsPixelSize",null);R.__decorate([P.property({json:{write:!0}})],D.prototype,"spatialReference",void 0);return D=R.__decorate([N.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
D)})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(U,R,D,P,z,T,V,N,L,I){D=function(x){function t(){var w=x.apply(this,
arguments)||this;w.type="identity";return w}U._inheritsLoose(t,x);return t}(I);R.__decorate([N.enumeration({IdentityXform:"identity"})],D.prototype,"type",void 0);return D=R.__decorate([L.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],D)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H){function C(r,y,O){const {x:B,y:F}=y;if(2>O)return{x:r[0]+B*r[2]+F*r[4],y:r[1]+B*r[3]+F*r[5]};if(2===O){y=B*B;O=F*F;var E=B*F;return{x:r[0]+B*r[2]+F*r[4]+y*r[6]+E*r[8]+O*r[10],y:r[1]+B*r[3]+F*r[5]+y*r[7]+E*r[9]+O*r[11]}}y=B*B;O=F*F;E=B*F;const v=y*B,k=y*F,m=B*O,n=F*O;return{x:r[0]+B*r[2]+F*r[4]+y*r[6]+E*r[8]+O*r[10]+v*r[12]+k*r[14]+m*r[16]+n*r[18],y:r[1]+B*r[3]+F*r[5]+y*r[7]+E*r[9]+O*r[11]+v*r[13]+k*r[15]+m*r[17]+n*r[19]}}function u(r,y,O){const {xmin:B,ymin:F,
xmax:E,ymax:v,spatialReference:k}=y;y=[];if(2>O)y.push({x:B,y:v}),y.push({x:E,y:v}),y.push({x:B,y:F}),y.push({x:E,y:F});else{var m=10;for(var n=0;n<m;n++)y.push({x:B,y:F+(v-F)*n/(m-1)}),y.push({x:E,y:F+(v-F)*n/(m-1)});m=8;for(n=1;n<=m;n++)y.push({x:B+(E-B)*n/m,y:F}),y.push({x:B+(E-B)*n/m,y:v})}y=y.map(e=>C(r,e,O));m=y.map(e=>e.x);y=y.map(e=>e.y);return new H({xmin:Math.min.apply(null,m),xmax:Math.max.apply(null,m),ymin:Math.min.apply(null,y),ymax:Math.max.apply(null,y),spatialReference:k})}D=function(r){function y(){var B=
r.apply(this,arguments)||this;B.polynomialOrder=1;B.type="polynomial";return B}U._inheritsLoose(y,r);var O=y.prototype;O.readForwardCoefficients=function(B,F){const {coeffX:E,coeffY:v}=F;if(null==E||!E.length||null==v||!v.length||E.length!==v.length)return null;B=[];for(F=0;F<E.length;F++)B.push(E[F]),B.push(v[F]);return B};O.writeForwardCoefficients=function(B,F,E){E=[];const v=[];for(let k=0;k<(null==B?void 0:B.length);k++)0===k%2?E.push(B[k]):v.push(B[k]);F.coeffX=E;F.coeffY=v};O.readInverseCoefficients=
function(B,F){const {inverseCoeffX:E,inverseCoeffY:v}=F;if(null==E||!E.length||null==v||!v.length||E.length!==v.length)return null;B=[];for(F=0;F<E.length;F++)B.push(E[F]),B.push(v[F]);return B};O.writeInverseCoefficients=function(B,F,E){E=[];const v=[];for(let k=0;k<(null==B?void 0:B.length);k++)0===k%2?E.push(B[k]):v.push(B[k]);F.inverseCoeffX=E;F.inverseCoeffY=v};O.forwardTransform=function(B){if("point"===B.type){const F=C(this.forwardCoefficients,B,this.polynomialOrder);return new w({x:F.x,y:F.y,
spatialReference:B.spatialReference})}return u(this.forwardCoefficients,B,this.polynomialOrder)};O.inverseTransform=function(B){if("point"===B.type){const F=C(this.inverseCoefficients,B,this.polynomialOrder);return new w({x:F.x,y:F.y,spatialReference:B.spatialReference})}return u(this.inverseCoefficients,B,this.polynomialOrder)};U._createClass(y,[{key:"inverseCoefficients",get:function(){var B=this._get("inverseCoefficients"),F=this._get("forwardCoefficients");if(!B&&F&&2>this.polynomialOrder){{const [E,
v,k,m,n,e]=F;B=k*e-n*m;F=n*m-k*e;B=[(n*v-E*e)/B,(k*v-E*m)/F,e/B,m/F,-n/B,-k/F]}}return B},set:function(B){this._set("inverseCoefficients",B)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return y}(t);R.__decorate([P.property({json:{write:!0}})],D.prototype,"polynomialOrder",void 0);R.__decorate([P.property()],D.prototype,"forwardCoefficients",void 0);R.__decorate([L.reader("forwardCoefficients",["coeffX","coeffY"])],D.prototype,"readForwardCoefficients",null);R.__decorate([x.writer("forwardCoefficients")],
D.prototype,"writeForwardCoefficients",null);R.__decorate([P.property({json:{write:!0}})],D.prototype,"inverseCoefficients",null);R.__decorate([L.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],D.prototype,"readInverseCoefficients",null);R.__decorate([x.writer("inverseCoefficients")],D.prototype,"writeInverseCoefficients",null);R.__decorate([P.property()],D.prototype,"affectsPixelSize",null);R.__decorate([N.enumeration({PolynomialXform:"polynomial"})],D.prototype,"type",void 0);return D=
R.__decorate([I.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],D)})},"esri/layers/support/rasterDatasets/ImageAuxRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRaster ./InMemoryRaster ./pamParser ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../rasterTransforms/PolynomialTransform ../../../geometry/SpatialReference ../../../geometry/Extent".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O){D=function(B){function F(){return B.apply(this,arguments)||this}U._inheritsLoose(F,B);var E=F.prototype;E.open=function(){var v=U._asyncToGenerator(function*(k){yield this.init();var m=yield this._fetchData(k);let {spatialReference:n,statistics:e,histograms:f,transform:p}=yield this._fetchAuxiliaryData(k);(k=!n)&&(n=new y({wkid:3857}));null!=f&&f.length&&null==e&&(e=u.estimateStatisticsFromHistograms(f));const {width:d,height:b}=m;let a=new O({xmin:-.5,
ymin:.5-b,xmax:d-.5,ymax:.5,spatialReference:n});const c=p?p.forwardTransform(a):a;var l=!0;p&&(l=(l=p.forwardCoefficients)&&0===l[1]&&0===l[2])&&(p=null,a=c);m=new w({data:{extent:c,nativeExtent:a,transform:p,pixelBlock:m,statistics:e,histograms:f,keyProperties:{DateType:"Processed"},isPseudoSpatialReference:k}});yield m.open();this._set("rasterInfo",m.rasterInfo);this._inMemoryRaster=m});return function(k){return v.apply(this,arguments)}}();E.fetchRawTile=function(v,k,m,n={}){return this._inMemoryRaster.fetchRawTile(v,
k,m,n)};E._fetchData=function(){var v=U._asyncToGenerator(function*(k){({data:k}=yield this.request(this.url,{responseType:"array-buffer",signal:null==k?void 0:k.signal}));const m=C.getFormat(k).toUpperCase();if("JPG"===m||"PNG"===m||"GIF"===m||"BMP"===m)this._set("datasetFormat",m);else throw new P("image-aux-raster:open","the data is not a supported format");return yield this.decodePixelBlock(k,{format:"jpg",width:1,height:1,useCanvas:!0})});return function(k){return v.apply(this,arguments)}}();
E._fetchAuxiliaryData=function(){var v=U._asyncToGenerator(function*(k){var m,n;k=z.unwrap(null==k?void 0:k.signal);var e=null!=(m=this.ioConfig.skipExtensions)?m:[];m=-1<e.indexOf("aux.xml")?null:this.request(this.url+".aux.xml",{responseType:"xml",signal:k});var f=this.datasetFormat;f="JPG"===f?"jgw":"PNG"===f?"pgw":"BMP"===f?"bpw":null;e=-1<e.indexOf(f)?null:this.request(this.url.slice(0,this.url.lastIndexOf("."))+"."+f,{responseType:"text",signal:k});e=yield T.eachAlways([m,e]);if(null!=k&&k.aborted)throw T.createAbortError();
k=H.parsePAMInfo(null==(n=e[0].value)?void 0:n.data);k.transform||(n=e[1].value?e[1].value.data.split("\n").slice(0,6).map(p=>Number(p)):null,k.transform=6===(null==n?void 0:n.length)?new r({forwardCoefficients:[n[4],n[5],n[0],-n[1],n[2],-n[3]]}):null);return k});return function(k){return v.apply(this,arguments)}}();return F}(t);R.__decorate([V.property({type:String,json:{write:!0}})],D.prototype,"datasetFormat",void 0);return D=R.__decorate([x.subclass("esri.layers.support.rasterDatasets.ImageAuxRaster")],
D)})},"esri/layers/support/rasterDatasets/InMemoryRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../RasterInfo ./BaseRaster ../rasterFunctions/pixelUtils ../../../geometry/Extent ../../../geometry/SpatialReference".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u){D=function(r){function y(){var B=r.apply(this,arguments)||this;B.datasetFormat="MEMORY";return B}U._inheritsLoose(y,r);var O=y.prototype;O.open=function(){var B=U._asyncToGenerator(function*(F){var E;yield this.init();const {pixelBlock:v,statistics:k,histograms:m,name:n,keyProperties:e,nativeExtent:f,transform:p}=this.data,{width:d,height:b,pixelType:a}=v,c=this.data.extent||new C({xmin:-.5,ymin:.5,xmax:d-.5,ymax:b-.5,spatialReference:new u({wkid:3857})}),
l=null!=(E=this.data.isPseudoSpatialReference)?E:!this.data.extent;E=new t({width:d,height:b,pixelType:a,extent:c,nativeExtent:f,transform:p,pixelSize:{x:c.width/d,y:c.height/b},spatialReference:c.spatialReference,bandCount:3,keyProperties:e||{},statistics:k,isPseudoSpatialReference:l,histograms:m});this.createRemoteDatasetStorageInfo(E,512,512);this._set("rasterInfo",E);this.updateTileInfo();yield this._buildInMemoryRaster(v,{width:512,height:512},F);this.datasetName=n;this.url="/InMemory/"+n});
return function(F){return B.apply(this,arguments)}}();O.fetchRawTile=function(B,F,E,v){B=this._pixelBlockTiles.get(`${B}/${F}/${E}`);return Promise.resolve(B)};O._buildInMemoryRaster=function(){var B=U._asyncToGenerator(function*(F,E,v){var k=this.rasterInfo.storageInfo.maximumPyramidLevel;const m=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:F,tileSize:E,maximumPyramidLevel:k},v):Promise.resolve(H.split(F,E,k));E=z.isSome(this.rasterInfo.statistics);k=z.isSome(this.rasterInfo.histograms);
F=E&&k?Promise.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:F},v):Promise.resolve(H.estimateStatisticsHistograms(F));F=yield T.eachAlways([m,F]);if(!F[0].value&&F[1].value)throw new P("inmemory-raster:open","failed to build in memory raster");this._pixelBlockTiles=F[0].value;if(!E){var n;this.rasterInfo.statistics=null==(n=F[1].value)?void 0:n.statistics}if(k){var e;this.rasterInfo.histograms=null==(e=F[1].value)?void 0:
e.histograms}});return function(F,E,v){return B.apply(this,arguments)}}();return y}(w);R.__decorate([V.property({type:String,json:{write:!0}})],D.prototype,"datasetFormat",void 0);R.__decorate([V.property()],D.prototype,"data",void 0);return D=R.__decorate([x.subclass("esri.layers.support.rasterDatasets.InMemoryRaster")],D)})},"esri/layers/support/rasterDatasets/pamParser":function(){define(["exports","../../../geometry","./xmlUtilities","../rasterTransforms/PolynomialTransform","../../../geometry/SpatialReference"],
function(U,R,D,P,z){function T(x,t){if(!x||!t)return null;const w=[];for(let H=0;H<x.length;H++)w.push(x[H]),w.push(t[H]);return w}function V(x){var t,w=D.getElement(x,"GeodataXform");x=D.getElementNumericValue(w,"SpatialReference/WKID")||D.getElementValue(w,"SpatialReference/WKT");x=L(x);if("typens:PolynomialXform"!==w.getAttribute("xsi:type"))return{spatialReference:x,transform:null};var H=null!=(t=D.getElementNumericValue(w,"PolynomialOrder"))?t:1,C=D.getElementNumericValues(w,"CoeffX/Double");
const u=D.getElementNumericValues(w,"CoeffY/Double");t=D.getElementNumericValues(w,"InverseCoeffX/Double");w=D.getElementNumericValues(w,"InverseCoeffY/Double");C=T(C,u);w=T(t,w);H=new P({spatialReference:x,polynomialOrder:H,forwardCoefficients:C,inverseCoefficients:w});return{spatialReference:x,transform:H}}function N(x){var t;const w=D.getElementNumericValue(x,"NoDataValue");var H=D.getElement(x,"Histograms/HistItem");const C=D.getElementNumericValue(H,"HistMin"),u=D.getElementNumericValue(H,"HistMax"),
r=D.getElementNumericValue(H,"BucketCount");H=null==(t=D.getElementValue(H,"HistCounts"))?void 0:t.split("|").map(E=>Number(E));let y,O,B,F;D.getElements(x,"Metadata/MDI").forEach(E=>{var v;const k=Number(null!=(v=E.textContent)?v:E.nodeValue);switch(E.getAttribute("key").toUpperCase()){case "STATISTICS_MINIMUM":y=k;break;case "STATISTICS_MAXIMUM":O=k;break;case "STATISTICS_MEAN":B=k;break;case "STATISTICS_STDDEV":F=k}});x=D.getElementNumericValue(x,"Metadata/SourceBandIndex");return{noDataValue:w,
histogram:null!=H&&H.length&&null!=y&&null!=O?{min:C,max:u,size:r||H.length,counts:H}:null,sourceBandIndex:x,statistics:null!=y&&null!=O?{min:y,max:O,avg:B,stddev:F}:null}}function L(x){if(!x)return null;var t=Number(x);if(!isNaN(t)&&0!==t)return new z({wkid:t});x=String(x);if(x.startsWith("COMPD_CS")){if(!x.includes("VERTCS")||!x.includes("GEOGCS")&&!x.startsWith("PROJCS"))return null;t=x.indexOf("VERTCS");var w=x.indexOf("PROJCS");w=-1<w?w:x.indexOf("GEOGCS");if(-1===w)return null;w=x.slice(w,x.lastIndexOf("]",
t)+1).trim();x=x.slice(t,x.lastIndexOf("]")).trim();t=(t=I(w))?new z({wkid:t}):new z({wkt:w});if(x=I(x))t.vcsWkid=x;return t}if(!x.startsWith("GEOGCS")&&!x.startsWith("PROJCS"))return null;t=I(x);return 0!==t?new z({wkid:t}):new z({wkt:x})}function I(x){var t,w=x.replace(/\]/g,"[").replace(/"/g,"").split("[").map(C=>C.trim()).filter(C=>""!==C);w=w[w.length-1].split(",");const H=null==(t=w[0])?void 0:t.toLowerCase();return"epsg"!==H&&"esri"!==H||!x.endsWith('"]]')||(x=Number(w[1]),isNaN(x)||0===x)?
0:x}U.parsePAMInfo=function(x){var t;if("pamdataset"!==(null==x?void 0:null==(t=x.documentElement.tagName)?void 0:t.toLowerCase()))return{};const w={spatialReference:null,transform:null,metadata:{},rasterBands:[],statistics:null,histograms:null};x.documentElement.childNodes.forEach(H=>{if(1===H.nodeType)if(D.isSameTagIgnoreNS(H,"SRS"))w.spatialReference||(H=D.getElementValue(H),w.spatialReference=L(H));else if(D.isSameTagIgnoreNS(H,"Metadata"))if("xml:ESRI"===H.getAttribute("domain")){const {spatialReference:C,
transform:u}=V(H);w.transform=u;w.spatialReference||(w.spatialReference=C)}else D.getElements(H,"MDI").forEach(C=>w.metadata[C.getAttribute("key")]=D.getElementValue(C));else D.isSameTagIgnoreNS(H,"PAMRasterBand")&&(H=N(H),null!=H.sourceBandIndex&&null==w.rasterBands[H.sourceBandIndex]?w.rasterBands[H.sourceBandIndex]=H:w.rasterBands.push(H))});if(x=w.rasterBands)w.statistics=x[0].statistics?x.map(H=>H.statistics):null,w.histograms=x[0].histogram?x.map(H=>H.histogram):null;return w};U.parseSpatialReference=
L;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/xmlUtilities":function(){define(["exports"],function(U){function R(T,V){if(!T||!V)return[];var N=V;-1<V.indexOf("/")?(N=V.slice(0,V.indexOf("/")),V=V.slice(V.indexOf("/")+1)):V="";const L=[];if(V){T=R(T,N);for(N=0;N<T.length;N++)R(T[N],V).forEach(I=>L.push(I));return L}V=T.getElementsByTagNameNS("*",N);if(!V||0===V.length)return[];for(T=0;T<V.length;T++)L.push(V[T]||V.item[T]);return L}function D(T,V){if(!T||
!V)return null;let N=V;-1<V.indexOf("/")?(N=V.slice(0,V.indexOf("/")),V=V.slice(V.indexOf("/")+1)):V="";T=R(T,N);return 0<T.length?V?D(T[0],V):T[0]:null}function P(T,V=null){if(T=V?D(T,V):T)if(T=T.textContent||T.nodeValue)return T.trim();return null}function z(T,V){T=R(T,V);V=[];let N;for(let L=0;L<T.length;L++)if(N=T[L].textContent||T[L].nodeValue)N=N.trim(),""!==N&&V.push(N);return V}U.getElement=D;U.getElementNumericValue=function(T,V){T=P(T,V);return Number(T)};U.getElementNumericValues=function(T,
V){return z(T,V).map(N=>Number(N))};U.getElementValue=P;U.getElementValues=z;U.getElements=R;U.getNodeNameIgnoreNS=function(T){return T.nodeName.slice(T.nodeName.lastIndexOf(":")+1)};U.getSpaceDelimitedNumericValues=function(T,V=null){T=P(T,V);return null==T?void 0:T.split(" ").map(N=>Number(N))};U.isSameTagIgnoreNS=function(T,V){var N;T=null==T?void 0:null==(N=T.nodeName)?void 0:N.toLowerCase();V=V.toLowerCase();return T.slice(T.lastIndexOf(":")+1)===V};Object.defineProperty(U,"__esModule",{value:!0})})},
"esri/layers/support/rasterDatasets/ImageServerRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/urlUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ../serviceTileInfoProperty ../TileInfo ../TilemapCache ./BaseRaster ../rasterFunctions/pixelUtils ../rasterTransforms/GCSShiftTransform ../../../rest/support/FeatureSet ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B,F,E,v){D=function(k){function m(){var e=k.apply(this,arguments)||this;e._levelOffset=0;e._slices=null;e._tilemapCache=null;e.datasetFormat="RasterTileServer";return e}U._inheritsLoose(m,k);var n=m.prototype;n.open=function(){var e=U._asyncToGenerator(function*(f){yield this.init();f=f&&f.signal;var p=this.sourceJSON?{data:this.sourceJSON}:yield this.request(this.url,{query:{f:"json"},signal:f});p.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));
const d=p.data;this.sourceJSON=d;if(!d)throw new P("imageserverraster:open","cannot initialize tiled image service, missing service info");if(!d.tileInfo)throw new P("imageserverraster:open","use ImageryLayer to open non-tiled image services");this._fixScaleInServiceInfo();p="jpg jpeg png png8 png24 png32 mixed".split(" ");this.tileType=d.cacheType;null==this.tileType&&(-1<p.indexOf(d.tileInfo.format.toLowerCase())?this.tileType="Map":"lerc"===d.tileInfo.format.toLowerCase()?this.tileType="Elevation":
this.tileType="Raster");this.datasetName=d.name.slice(d.name.indexOf("/")+1);f=yield this._fetchRasterInfo({signal:f});if(z.isSome(f)){p="Map"===this.tileType?H.readServiceTileInfo(d.tileInfo,d):C.fromJSON(d.tileInfo);const {extent:a,pixelSize:c}=f,l=.5/f.width*c.x;let h,g;var b=p.lodAt(Math.max.apply(null,p.lods.map(W=>W.level)));"Map"!==this.tileType&&0!==d.maxScale&&("Raster"===this.tileType?(h=p.lods.filter(W=>W.resolution===c.x)[0])||(h=p.lods[p.lods.length-1]):(h=p.lods.filter(W=>Math.abs(W.scale-
d.maxScale)<l)[0])||(h=p.lods.filter(W=>W.scale>d.maxScale).sort((W,X)=>W.scale>X.scale?1:-1)[0]),c.x=c.y=h.resolution,f.width=Math.ceil((a.xmax-a.xmin)/c.x-.1),f.height=Math.ceil((a.ymax-a.ymin)/c.y-.1));h||(h=b);b=p.lodAt(Math.min.apply(null,p.lods.map(W=>W.level)));"Map"===this.tileType?this._levelOffset=p.lods[0].level:0!==d.minScale&&"Elevation"===this.tileType&&(g=p.lods.filter(W=>Math.abs(W.scale-d.minScale)<l)[0],this._levelOffset=g.level-b.level);g||(g=b);const q=Math.max(c.x,c.y);if(Math.abs(c.x-
c.y)>l||!p.lods.some(W=>Math.abs(W.resolution-q)<l))c.x=c.y=h.resolution,f.width=Math.ceil((a.xmax-a.xmin)/c.x-.1),f.height=Math.ceil((a.ymax-a.ymin)/c.y-.1);b=h.level-g.level;const [A,J]=p.size,G=[];p.lods.forEach(W=>{W.level>=g.level&&W.level<=h.level&&G.push({x:W.resolution,y:W.resolution})});G.sort((W,X)=>W.x-X.x);const Q=this.computeBlockBoundary(a,A,J,p.origin,G,b),S=1<G.length?G.slice(1):null;f.storageInfo=new w({blockWidth:p.size[0],blockHeight:p.size[1],pyramidBlockWidth:p.size[0],pyramidBlockHeight:p.size[1],
pyramidResolutions:S,compression:p.format,origin:p.origin,firstPyramidLevel:1,maximumPyramidLevel:b,tileInfo:p,blockBoundary:Q});this._fixGCSShift(f);this._set("rasterInfo",f)}else throw new P("image-server-raster:open","cannot initialize image service");-1<d.capabilities.toLowerCase().indexOf("tilemap")&&(f={tileInfo:f.storageInfo.tileInfo,parsedUrl:T.urlToObject(this.url),url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new u.TilemapCache({layer:f}))});return function(f){return e.apply(this,
arguments)}}();n.fetchRawTile=function(){var e=U._asyncToGenerator(function*(f,p,d,b={}){if(this._slices&&null==b.sliceId)return null;const {storageInfo:a,extent:c}=this.rasterInfo;({data:b}=yield this.request(`${this.url}/tile/${a.maximumPyramidLevel-f+this._levelOffset}/${p}/${d}`,{query:this._slices?{sliceId:b.sliceId||0}:null,responseType:"array-buffer",signal:b.signal}));if(!b)return null;b=yield this.decodePixelBlock(b,{width:a.tileInfo.size[0],height:a.tileInfo.size[1],planes:null,pixelType:null,
isPoint:"Elevation"===this.tileType});const l=a.blockBoundary[f];if("jpg"!==a.compression||d>l.minCol&&d<l.maxCol&&p>l.minRow&&p<l.maxRow)return b;const {origin:h,blockWidth:g,blockHeight:q}=a,{x:A,y:J}=this.getPyramidPixelSize(f);var G=Math.round((c.xmin-h.x)/A)%g;f=Math.round((c.xmax-h.x)/A)%g;var Q=Math.round((h.y-c.ymax)/J)%q;const S=Math.round((h.y-c.ymin)/J)%q;G=d===l.minCol?G:0;Q=p===l.minRow?Q:0;y.setValidBoundary(b,{x:G,y:Q},{width:(d===l.maxCol?f:g)-G,height:(p===l.maxRow?S:q)-Q});return b});
return function(f,p,d){return e.apply(this,arguments)}}();n.getSliceIndex=function(e){if(!this._slices||z.isNone(e)||0===e.length)return null;for(let f=0;f<this._slices.length;f++){const p=this._slices[f].multidimensionalDefinition;if(p.length===e.length&&!p.some(d=>{var b=e.filter(c=>d.variableName===c.variableName&&c.dimensionName===d.dimensionName)[0];if(!b)return!0;const a=Array.isArray(d.values[0])?`${d.values[0][0]}-${d.values[0][1]}`:d.values[0];b=Array.isArray(b.values[0])?`${b.values[0][0]}-${b.values[0][1]}`:
b.values[0];return a!==b}))return f}return null};n.fetchVariableStatisticsHistograms=function(){var e=U._asyncToGenerator(function*(f,p){var d=this.request(this.url+"/statistics",{query:{variable:f,f:"json"},signal:p}).then(b=>{var a;return null==(a=b.data)?void 0:a.statistics});f=this.request(this.url+"/histograms",{query:{variable:f,f:"json"},signal:p}).then(b=>{var a;return null==(a=b.data)?void 0:a.histograms});d=yield Promise.all([d,f]);d[0]&&d[0].forEach(b=>{b.avg=b.mean;b.stddev=b.standardDeviation});
return{statistics:d[0]||null,histograms:d[1]||null}});return function(f,p){return e.apply(this,arguments)}}();n.computeBestPyramidLevelForLocation=function(){var e=U._asyncToGenerator(function*(f,p={}){if(!this._tilemapCache)return 0;f=this.identifyPixelLocation(f,0,z.unwrap(p.datumTransformation));if(null===f)return null;let d=0;var {maximumPyramidLevel:b}=this.rasterInfo.storageInfo;b=b-d+this._levelOffset;const a=f.srcLocation;for(;0<=b;){try{if("available"===(yield this._tilemapCache.fetchAvailability(b,
f.row,f.col,p)))break}catch{}b--;d++;f=this.identifyPixelLocation(a,d,z.unwrap(p.datumTransformation));if(null===f)return null}return-1===b||null==f?null:d});return function(f){return e.apply(this,arguments)}}();n._fetchRasterInfo=function(){var e=U._asyncToGenerator(function*(f){const p=this.sourceJSON,d=Math.ceil((p.extent.xmax-p.extent.xmin)/p.pixelSizeX-.1),b=Math.ceil((p.extent.ymax-p.extent.ymin)/p.pixelSizeY-.1),a=F.fromJSON(p.spatialReference||p.extent.spatialReference);if("Map"===this.tileType)return new t({width:d,
height:b,bandCount:3,extent:E.fromJSON(p.extent),spatialReference:a,pixelSize:new v({x:p.pixelSizeX,y:p.pixelSizeY,spatialReference:a}),pixelType:"u8",statistics:null,keyProperties:{DataType:"processed"}});const {slice:c,signal:l}=f;f=p.hasRasterAttributeTable?this.request(this.url+"/rasterAttributeTable",{query:{slice:c,f:"json"},signal:l}).then(G=>B.fromJSON(G.data)).catch(()=>null):!1;const h=p.hasColormap?this.request(this.url+"/colormap",{query:{slice:c,f:"json"},signal:l}).then(G=>{var Q;return null==
(Q=G.data)?void 0:Q.colormap}):!1,g=p.hasHistograms?this.request(this.url+"/histograms",{query:{slice:c,f:"json"},signal:l}).then(G=>{var Q;return null==(Q=G.data)?void 0:Q.histograms}):!1,q=this.request(this.url+"/keyProperties",{query:{f:"json"},signal:l}).then(G=>G.data).catch(()=>{}),A=p.hasMultidimensions?this._fetchMultidimensionalInfo():!1,J=p.hasMultidimensions?this.request(this.url+"/slices",{query:{f:"json"},signal:l}).then(G=>G.data&&G.data.slices).catch(()=>{}):!1;return Promise.all([f,
h,g,q,A,J]).then(G=>{let Q=null;if(p.minValues&&p.minValues.length===p.bandCount){Q=[];for(let S=0;S<p.minValues.length;S++)Q.push({min:p.minValues[S],max:p.maxValues[S],avg:p.meanValues[S],stddev:p.stdvValues[S]})}this._slices=G[5]||null;return new t({width:d,height:b,bandCount:p.bandCount,extent:E.fromJSON(p.extent),spatialReference:a,pixelSize:new v({x:p.pixelSizeX,y:p.pixelSizeY,spatialReference:a}),pixelType:p.pixelType.toLowerCase(),statistics:Q,attributeTable:G[0]||null,colormap:G[1]||null,
histograms:G[2]||null,keyProperties:G[3]||{},multidimensionalInfo:G[4]||null})})});return function(f){return e.apply(this,arguments)}}();n._fetchMultidimensionalInfo=function(){var e=U._asyncToGenerator(function*(f){var p;f=yield this.request(this.url+"/multidimensionalInfo",{query:{f:"json"},signal:f}).then(d=>{var b;return null==(b=d.data)?void 0:b.multidimensionalInfo});null!=(p=f.variables)&&p.length&&f.variables.forEach(d=>{var b;null!=(b=d.statistics)&&b.length&&d.statistics.forEach(a=>{a.avg=
a.mean;a.stddev=a.standardDeviation})});return f});return function(f){return e.apply(this,arguments)}}();n._fixScaleInServiceInfo=function(){const {sourceJSON:e}=this;e.minScale&&0>e.minScale&&(e.minScale=0);e.maxScale&&0>e.maxScale&&(e.maxScale=0)};n._fixGCSShift=function(e){const {extent:f,spatialReference:p}=e;0===f.xmin&&360===f.xmax&&p.wkid&&p.isGeographic&&(e.nativeExtent=e.extent,e.transform=new O,e.extent=e.transform.forwardTransform(f))};return m}(r);R.__decorate([V.property({type:String,
json:{write:!0}})],D.prototype,"datasetFormat",void 0);R.__decorate([V.property()],D.prototype,"tileType",void 0);return D=R.__decorate([x.subclass("esri.layers.support.rasterDatasets.ImageServerRaster")],D)})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(U,R){function D(z,T,V,N){if(!z)return null;const {minScale:L,maxScale:I,minLOD:x,maxLOD:t}=T;if(null!=x&&null!=t)return N&&N.ignoreMinMaxLOD?R.fromJSON(z):R.fromJSON({...z,lods:z.lods.filter(({level:w})=>
null!=w&&w>=x&&w<=t)});if(0!==L&&0!==I){const w=L?Math.round(1E4*L)/1E4:Infinity,H=I?Math.round(1E4*I)/1E4:-Infinity;return R.fromJSON({...z,lods:z.lods.filter(C=>{C=Math.round(1E4*C.scale)/1E4;return C<=w&&C>=H})})}return R.fromJSON(z)}const P={type:R,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:D}}}}};U.readServiceTileInfo=D;U.serviceTileInfoProperty=P;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/urlUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./Tilemap".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B){var F;const E=N.getLogger("esri.layers.support.TilemapCache");U.TilemapCache=F=function(v){function k(n){n=v.call(this,n)||this;n._pendingTilemapRequests={};n._availableLevels={};n.levels=5;n.cacheByteSize=2097152;n.request=P;n._prefetchingEnabled=!0;return n}R._inheritsLoose(k,v);var m=k.prototype;m.initialize=function(){this._tilemapCache=new L(this.cacheByteSize);this.handles.add([this.watch(["layer.parsedUrl","layer.tileServers?","layer.apiKey?",
"layer.customParameters?"],()=>this._initializeTilemapDefinition()),H.init(this,"layer.tileInfo.lods",n=>this._initializeAvailableLevels(n),!0)]);this._initializeTilemapDefinition()};m.castLevels=function(n){return 2>=n?(E.error("Minimum levels for Tilemap is 3, but got ",n),3):n};m.fetchTilemap=function(n,e,f,p){if(!this._availableLevels[n])return Promise.reject(new T("tilemap-cache:level-unavailable",`Level ${n} is unavailable in the service`));const d=this._tmpTilemapDefinition;if(n=this._tilemapFromCache(n,
e,f,d))return Promise.resolve(n);const b=p&&p.signal;p={...p,signal:null};return new Promise((a,c)=>{x.onAbort(b,()=>c(x.createAbortError()));const l=B.tilemapDefinitionId(d);let h=this._pendingTilemapRequests[l];if(!h){h=B.Tilemap.fromDefinition(d,p).then(q=>{this._tilemapCache.put(l,q,q.byteSize);return q});const g=()=>delete this._pendingTilemapRequests[l];this._pendingTilemapRequests[l]=h;h.then(g,g)}h.then(a,c)})};m.getAvailability=function(n,e,f){return this._availableLevels[n]?(n=this._tilemapFromCache(n,
e,f,this._tmpTilemapDefinition))?n.getAvailability(e,f):"unknown":"unavailable"};m.fetchAvailability=function(n,e,f,p){return this._availableLevels[n]?this.fetchTilemap(n,e,f,p).catch(d=>d).then(d=>{if(d instanceof B.Tilemap)return d=d.getAvailability(e,f),"unavailable"===d?Promise.reject(new T("tile-map:tile-unavailable","Tile is not available",{level:n,row:e,col:f})):d;if(x.isAbortError(d))throw d;return"unknown"}):Promise.reject(new T("tilemap-cache:level-unavailable",`Level ${n} is unavailable in the service`))};
m.fetchAvailabilityUpsample=function(n,e,f,p,d){p.level=n;p.row=e;p.col=f;const b=this.layer.tileInfo;b.updateTileInfo(p);const a=this.fetchAvailability(n,e,f,d).catch(c=>{if(x.isAbortError(c))throw c;if(b.upsampleTile(p))return this.fetchAvailabilityUpsample(p.level,p.row,p.col,p);throw c;});this._fetchAvailabilityUpsamplePrefetch(p.id,n,e,f,d,a);return a};m._fetchAvailabilityUpsamplePrefetch=function(){var n=R._asyncToGenerator(function*(e,f,p,d,b,a){if(this._prefetchingEnabled){var c=`prefetch-${e}`;
if(!this.handles.has(c)){var l=new AbortController;a.then(()=>l.abort(),()=>l.abort());var h=!1;this.handles.add({remove(){h||(h=!0,l.abort())}},c);yield t.waitTicks(10,l.signal).catch(()=>{});h||(h=!0,this.handles.remove(c));if(!x.isAborted(l))for(e={id:e,level:f,row:p,col:d},b={...b,signal:l.signal},f=this.layer.tileInfo,p=0;F._prefetches.length<F._maxPrefetch&&f.upsampleTile(e);++p){const g=this.fetchAvailability(e.level,e.row,e.col,b);F._prefetches.push(g);d=()=>{F._prefetches.removeUnordered(g)};
g.then(d,d)}}}});return function(e,f,p,d,b,a){return n.apply(this,arguments)}}();m._initializeTilemapDefinition=function(){var n;if(this.layer.parsedUrl){var {parsedUrl:e,apiKey:f,customParameters:p}=this.layer;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:e.path,query:w.objectToQuery({...e.query,...p,token:null!=f?f:null==(n=e.query)?void 0:n.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,
col:0}}};m._tilemapFromCache=function(n,e,f,p){p.level=n;p.row=e-e%this.size;p.col=f-f%this.size;n=B.tilemapDefinitionId(p);return this._tilemapCache.get(n)};m._initializeAvailableLevels=function(n){this._availableLevels={};n&&n.forEach(e=>this._availableLevels[e.level]=!0)};R._createClass(k,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const n=this;return{get prefetchingEnabled(){return n._prefetchingEnabled},set prefetchingEnabled(e){n._prefetchingEnabled=e},hasTilemap(e,
f,p){return!!n._tilemapFromCache(e,f,p,n._tmpTilemapDefinition)}}}}]);return k}(V.HandleOwnerMixin(z));U.TilemapCache._maxPrefetch=4;U.TilemapCache._prefetches=new I({initialSize:F._maxPrefetch});D.__decorate([C.property({constructOnly:!0,type:Number})],U.TilemapCache.prototype,"levels",void 0);D.__decorate([y.cast("levels")],U.TilemapCache.prototype,"castLevels",null);D.__decorate([C.property({readOnly:!0,type:Number})],U.TilemapCache.prototype,"size",null);D.__decorate([C.property({constructOnly:!0,
type:Number})],U.TilemapCache.prototype,"cacheByteSize",void 0);D.__decorate([C.property({constructOnly:!0})],U.TilemapCache.prototype,"layer",void 0);D.__decorate([C.property({constructOnly:!0})],U.TilemapCache.prototype,"request",void 0);U.TilemapCache=F=D.__decorate([O.subclass("esri.layers.support.TilemapCache")],U.TilemapCache);Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/Tilemap":function(){define(["exports","../../request","../../core/arrayUtils","../../core/Error",
"../../core/lang"],function(U,R,D,P,z){function T(N){if("vector-tile"===N.service.type)var L=`${N.service.url}/tilemap/${N.level}/${N.row}/${N.col}/${N.width}/${N.height}`;else L=N.service.tileServers,L=`${L&&L.length?L[N.row%L.length]:N.service.url}/tilemap/${N.level}/${N.row}/${N.col}/${N.width}/${N.height}`;(N=N.service.query)&&(L=`${L}?${N}`);return L}let V=function(){function N(){this.location={left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var L=N.prototype;
L.getAvailability=function(I,x){if("unknown"!==this._allAvailability)return this._allAvailability;I=(I-this.location.top)*this.location.width+(x-this.location.left);x=I>>3;const t=this._tileAvailabilityBitSet;return 0>x||x>t.length?"unknown":t[x]&1<<I%8?"available":"unavailable"};L._updateFromData=function(I){let x=!0,t=!0;const w=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));let H=0;for(let C=0;C<I.length;C++){const u=C%8;I[C]?(t=!1,w[H]|=1<<u):x=!1;7===u&&++H}t?this._allAvailability=
"unavailable":x?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=w,this.byteSize+=w.length)};N.fromDefinition=function(I,x){const t=I.service.request||R,{row:w,col:H,width:C,height:u}=I,r={query:{f:"json"}};x=x?{...r,...x}:r;return t(T(I),x).then(y=>y.data).catch(y=>{if(y&&y.details&&422===y.details.httpStatus)return{location:{top:w,left:H,width:C,height:u},valid:!0,data:D.constant(C*u,0)};throw y;}).then(y=>{if(y.location&&(y.location.top!==w||y.location.left!==
H||y.location.width!==C||y.location.height!==u))throw new P("tilemap:location-mismatch","Tilemap response for different location than requested",{response:y,definition:{top:w,left:H,width:C,height:u}});return N.fromJSON(y)})};N.fromJSON=function(I){N.validateJSON(I);const x=new N;x.location=Object.freeze(z.clone(I.location));x._updateFromData(I.data);return Object.freeze(x)};N.validateJSON=function(I){if(!I||!I.location)throw new P("tilemap:missing-location","Location missing from tilemap response");
if(!1===I.valid)throw new P("tilemap:invalid","Tilemap response was marked as invalid");if(!I.data)throw new P("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(I.data))throw new P("tilemap:data-mismatch","Data must be an array of numbers");if(I.data.length!==I.location.width*I.location.height)throw new P("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return N}();U.Tilemap=V;U.default=V;U.tilemapDefinitionId=function(N){return`${N.level}/${N.row}/${N.col}/${N.width}/${N.height}`};
Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/MRFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../PixelBlock ../RasterInfo ../RasterStorageInfo ./BaseRaster ./pamParser ./xmlUtilities ../rasterFormats/utils ../rasterFunctions/pixelUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B,F){const E=new Map;E.set("Int8","s8");E.set("UInt8","u8");E.set("Int16","s16");E.set("UInt16","u16");E.set("Int32","s32");E.set("UInt32","u32");E.set("Float32","f32");E.set("Float64","f32");E.set("Double64","f32");const v=new Map;v.set("none",{blobExtension:".til",isOneSegment:!0,decoderFormat:"bip"});v.set("lerc",{blobExtension:".lrc",isOneSegment:!1,decoderFormat:"lerc"});v.set("deflate",{blobExtension:".pzp",isOneSegment:!0,decoderFormat:"deflate"});
v.set("jpeg",{blobExtension:".pjg",isOneSegment:!0,decoderFormat:"jpg"});D=function(k){function m(){var e=k.apply(this,arguments)||this;e._files=null;e._storageIndex=null;e.datasetFormat="MRF";return e}U._inheritsLoose(m,k);var n=m.prototype;n.open=function(){var e=U._asyncToGenerator(function*(f){var p;yield this.init();this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);var d=f?z.unwrap(f.signal):null,b=yield this.request(this.url,{responseType:"xml",signal:d});const {rasterInfo:a,files:c}=
this._parseHeader(b.data);if(-1===(null==(p=this.ioConfig.skipExtensions)?void 0:p.indexOf("aux.xml"))&&(f=yield this._fetchAuxiliaryData(f),null!=f)){var l;a.statistics=null!=(l=f.statistics)?l:a.statistics;(a.histograms=f.histograms)&&!z.isSome(a.statistics)&&(a.statistics=y.estimateStatisticsFromHistograms(f.histograms))}this._set("rasterInfo",a);this._files=c;d=yield this.request(c.index,{responseType:"array-buffer",signal:d});this._storageIndex=this._parseIndex(d.data);const {blockWidth:h,blockHeight:g}=
this.rasterInfo.storageInfo;d=this.rasterInfo.storageInfo.pyramidScalingFactor;const {width:q,height:A}=this.rasterInfo;l=[];f=this._getBandSegmentCount();p=0;for(b=-1;p<this._storageIndex.length;){b++;const J=Math.ceil(q/h/d**b)-1,G=Math.ceil(A/g/d**b)-1;p+=1*J*G*f*4;l.push({maxRow:G,maxCol:J,minCol:0,minRow:0})}this.rasterInfo.storageInfo.blockBoundary=l;0<b&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=b);this.updateTileInfo()});return function(f){return e.apply(this,
arguments)}}();n.fetchRawTile=function(){var e=U._asyncToGenerator(function*(f,p,d,b={}){const {blockWidth:a,blockHeight:c,blockBoundary:l}=this.rasterInfo.storageInfo;var h=l[f];if(!h||h.maxRow<p||h.maxCol<d||h.minRow>p||h.minCol>d)return null;const {bandCount:g,pixelType:q}=this.rasterInfo,{ranges:A,actualTileWidth:J,actualTileHeight:G}=this._getTileLocation(f,p,d);if(!A||0===A.length)return null;if(0===A[0].from&&0===A[0].to)return f=new Uint8Array(a*c),new x({width:a,height:c,pixels:null,mask:f,
validPixelCount:0});({bandIds:p}=this.ioConfig);d=this._getBandSegmentCount();h=[];for(f=f=0;f<d;f++)(!p||-1<p.indexOf[f])&&h.push(this.request(this._files.data,{range:{from:A[f].from,to:A[f].to},responseType:"array-buffer",signal:b.signal}));b=yield Promise.all(h);f=b.map(S=>S.data.byteLength).reduce((S,W)=>S+W);h=new Uint8Array(f);let Q=0;for(f=0;f<d;f++)h.set(new Uint8Array(b[f].data),Q),Q+=b[f].data.byteLength;f=v.get(this.rasterInfo.storageInfo.compression).decoderFormat;p=yield this.decodePixelBlock(h.buffer,
{width:a,height:c,format:f,planes:(null==p?void 0:p.length)||g,pixelType:q});if(z.isSome(this.rasterInfo.noDataValue)&&"lerc"!==f&&!p.mask&&(b=this.rasterInfo.noDataValue[0],null!=b)){d=p.width*p.height;h=new Uint8Array(d);if(1E24<Math.abs(b))for(f=0;f<d;f++)1E-6<Math.abs((p.pixels[0][f]-b)/b)&&(h[f]=1);else for(f=0;f<d;f++)p.pixels[0][f]!==b&&(h[f]=1);p.mask=h}d=b=0;if(J!==a||G!==c)if(h=p.mask)for(f=0;f<c;f++)for(d=f*a,b=f<G?J:0;b<a;b++)h[d+b]=0;else for(h=new Uint8Array(a*c),p.mask=h,f=0;f<G;f++)for(d=
f*a,b=0;b<J;b++)h[d+b]=1;return p});return function(f,p,d){return e.apply(this,arguments)}}();n._parseIndex=function(e){if(0<e.byteLength%16)throw"invalid array buffer must be multiples of 16";let f,p,d,b,a;if(r.isPlatformLittleEndian){f=new Uint8Array(e);d=new ArrayBuffer(e.byteLength);p=new Uint8Array(d);for(b=0;b<e.byteLength/4;b++)for(a=0;4>a;a++)p[4*b+a]=f[4*b+3-a];e=new Uint32Array(d)}else e=new Uint32Array(e);return e};n._getBandSegmentCount=function(){return v.get(this.rasterInfo.storageInfo.compression).isOneSegment?
1:this.rasterInfo.bandCount};n._getTileLocation=function(e,f,p){const {blockWidth:d,blockHeight:b,pyramidScalingFactor:a}=this.rasterInfo.storageInfo,{width:c,height:l}=this.rasterInfo,h=this._getBandSegmentCount();let g,q;var A,J=0;let G=0;for(A=0;A<e;A++)G=a**A,g=Math.ceil(c/d/G),q=Math.ceil(l/b/G),J+=g*q;G=a**e;g=Math.ceil(c/d/G);q=Math.ceil(l/b/G);J=4*(J+(f*g+p))*h;e=this._storageIndex.subarray(J,J+4*h);J=A=0;const Q=[];for(let S=0;S<h;S++)A=e[4*S]*2**32+e[4*S+1],J=A+e[4*S+2]*2**32+e[4*S+3],Q.push({from:A,
to:J});return{ranges:Q,actualTileWidth:p<g-1?d:Math.ceil(c/G)-d*(g-1),actualTileHeight:f<q-1?b:Math.ceil(l/G)-b*(q-1)}};n._parseHeader=function(e){var f=u.getElement(e,"MRF_META/Raster");if(!f)throw new P("mrf:open","not a valid MRF format");var p=u.getElement(f,"Size"),d=parseInt(p.getAttribute("x"),10),b=parseInt(p.getAttribute("y"),10);const a=parseInt(p.getAttribute("c"),10);p=(u.getElementValue(f,"Compression")||"none").toLowerCase();if(!v.has(p))throw new P("mrf:open","currently does not support compression "+
p);var c=u.getElementValue(f,"DataType")||"UInt8";const l=E.get(c);if(null==l)throw new P("mrf:open","currently does not support pixel type "+c);var h=u.getElement(f,"PageSize");c=parseInt(h.getAttribute("x"),10);h=parseInt(h.getAttribute("y"),10);f=u.getElement(f,"DataValues");let g;f&&(f=f.getAttribute("NoData"),null!=f&&(g=f.trim().split(" ").map(X=>parseFloat(X))));if(u.getElement(e,"MRF_META/CachedSource"))throw new P("mrf:open","currently does not support MRF referencing other data files");
var q=u.getElement(e,"MRF_META/GeoTags"),A=u.getElement(q,"BoundingBox");if(null==A)throw new P("mrf:open","missing node MRF_META/GeoTags/BoundingBox");f=parseFloat(A.getAttribute("minx"));const J=parseFloat(A.getAttribute("miny")),G=parseFloat(A.getAttribute("maxx")),Q=parseFloat(A.getAttribute("maxy"));var S=u.getElementValue(q,"Projection")||"";q=u.getElementValue(e,"datafile");A=u.getElementValue(e,"IndexFile");let W;"LOCAL_CS[]"!==S&&(S.toLowerCase().startsWith("epsg:")?(S=Number(S.slice(5)),
isNaN(S)||0===S||(W=new O({wkid:S}))):W=C.parseSpatialReference(S));S=new B(f,J,G,Q);S.spatialReference=W;e=u.getElement(e,"MRF_META/Rsets");e=parseInt(e&&e.getAttribute("scale")||"2",10);e=new w({origin:new F({x:S.xmin,y:S.ymax,spatialReference:W}),blockWidth:c,blockHeight:h,pyramidBlockWidth:c,pyramidBlockHeight:h,compression:p,pyramidScalingFactor:e});c=new F({x:(G-f)/d,y:(Q-J)/b,spatialReference:W});d=new t({width:d,height:b,extent:S,spatialReference:W,bandCount:a,pixelType:l,pixelSize:c,noDataValue:g,
storageInfo:e});b={mrf:this.url,index:A||this.url.replace(".mrf",".idx"),data:q||this.url.replace(".mrf",v.get(p).blobExtension)};return{rasterInfo:d,files:b}};n._fetchAuxiliaryData=function(){var e=U._asyncToGenerator(function*(f){try{const {data:p}=yield this.request(this.url+".aux.xml",{responseType:"xml",signal:null==f?void 0:f.signal});return C.parsePAMInfo(p)}catch{return null}});return function(f){return e.apply(this,arguments)}}();return m}(H);R.__decorate([T.property()],D.prototype,"_files",
void 0);R.__decorate([T.property()],D.prototype,"_storageIndex",void 0);R.__decorate([T.property({type:String,json:{write:!0}})],D.prototype,"datasetFormat",void 0);return D=R.__decorate([I.subclass("esri.layers.support.rasterIO.MRFRaster")],D)})},"esri/layers/support/rasterDatasets/TIFFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../RasterInfo ../RasterStorageInfo ./BaseRaster ./pamParser ../../../chunks/TiffDecoder ../rasterFormats/TiffTags ../rasterFunctions/pixelUtils ../rasterTransforms/PolynomialTransform ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Point".split(" "),
function(U,R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B,F){const E=function(k,m){return(k=k.get(m))&&k.values},v=function(k,m){return(k=k.get(m))&&k.values[0]};D=function(k){function m(){var e=k.apply(this,arguments)||this;e._files=null;e._headerInfo=null;e._bufferSize=1048576;e.datasetFormat="TIFF";return e}U._inheritsLoose(m,k);var n=m.prototype;n.open=function(){var e=U._asyncToGenerator(function*(f){var p,d,b;yield this.init();var a=f?z.unwrap(f.signal):null,{data:c}=yield this.request(this.url,{range:{from:0,
to:this._bufferSize},responseType:"array-buffer",signal:a});if(!c)throw new P("tiffraster:open","failed to open url "+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {littleEndian:l,firstIFD:h,isBigTiff:g}=C.parseSignature(c),q=[];yield this.readIFDs(q,c,l,h,0,g?8:4,a);a=C.getImageInfo(q);const {width:A,height:J,tileWidth:G,tileHeight:Q,planes:S,pixelType:W,compression:X,firstPyramidLevel:M,maximumPyramidLevel:K,pyramidBlockWidth:Y,pyramidBlockHeight:Z,tileBoundary:aa,
affine:ba,metadata:da}=a;c=(null==(p=a.extent.spatialReference)?void 0:p.wkt)||(null==(d=a.extent.spatialReference)?void 0:d.wkid);p=H.parseSpatialReference(c);c=!1;null==p&&(c=!0,p=new O({wkid:3857}));var fa=(d=new B({...a.extent,spatialReference:p}),new F({x:d.xmin,y:d.ymax,spatialReference:p}));fa=new t({blockWidth:G,blockHeight:Q,pyramidBlockWidth:Y,pyramidBlockHeight:Z,compression:X,origin:fa,firstPyramidLevel:M,maximumPyramidLevel:K,blockBoundary:aa});const ja=new F({x:(d.xmax-d.xmin)/A,y:(d.ymax-
d.ymin)/J,spatialReference:p});c=new x({width:A,height:J,bandCount:S,pixelType:W,compression:X,pixelSize:ja,storageInfo:fa,spatialReference:p,isPseudoSpatialReference:c,keyProperties:da?{BandProperties:da.bandProperties,DataType:da.dataType}:{},extent:d,statistics:da?da.statistics:null});null!=ba&&ba.length&&(c.nativeExtent=new B({xmin:-.5,ymin:.5-J,xmax:A-.5,ymax:.5,spatialReference:p}),c.transform=new y({polynomialOrder:1,forwardCoefficients:[ba[2]+ba[0]/2,ba[5]-ba[3]/2,ba[0],ba[3],-ba[1],-ba[4]]}),
c.extent=c.transform.forwardTransform(c.nativeExtent),c.pixelSize=new F({x:(d.xmax-d.xmin)/A,y:(d.ymax-d.ymin)/J,spatialReference:p}),fa.origin.x=-.5,fa.origin.y=.5);if(null==(b=this.ioConfig.skipExtensions)||!b.includes("aux.xml"))if(f=yield this._fetchAuxiliaryData(f),null!=f){var ha;c.statistics=null!=(ha=f.statistics)?ha:c.statistics;(c.histograms=f.histograms)&&!z.isSome(c.statistics)&&(c.statistics=r.estimateStatisticsFromHistograms(f.histograms));f.transform&&!ba&&(c.transform=f.transform,
c.nativeExtent=c.extent,ha=c.transform.forwardTransform(c.nativeExtent),c.pixelSize=new F({x:(ha.xmax-ha.xmin)/A,y:(ha.ymax-ha.ymin)/J,spatialReference:p}),c.extent=ha);c.spatialReference||(c.spatialReference=f.spatialReference)}this._set("rasterInfo",c);this._headerInfo={littleEndian:l,isBigTiff:g,ifds:q,...a};if(!this._headerInfo.isSupported)throw new P("tiffraster:open","this tiff is not supported: "+this._headerInfo.message);this.updateTileInfo()});return function(f){return e.apply(this,arguments)}}();
n.fetchRawTile=function(){var e=U._asyncToGenerator(function*(f,p,d,b={}){var a;if(null==(a=this._headerInfo)||!a.isSupported||this.isBlockOutside(f,p,d))return null;p=this.getTileLocation(f,p,d);if(!p)return null;const {ranges:c,actualTileWidth:l,actualTileHeight:h,ifd:g}=p;p=c.map(G=>this.request(this.url,{range:G,responseType:"array-buffer",signal:b.signal}));p=yield Promise.all(p);d=p.map(G=>G.data.byteLength).reduce((G,Q)=>G+Q);d=1===p.length?p[0].data:new ArrayBuffer(d);a=[0];var q=[0];if(1<
p.length){const G=new Uint8Array(d);for(let Q=0,S=0;Q<p.length;Q++){const W=p[Q].data;G.set(new Uint8Array(W),S);a[Q]=S;S+=W.byteLength;q[Q]=W.byteLength}}const {blockWidth:A,blockHeight:J}=this.getBlockWidthHeight(f);f=yield this.decodePixelBlock(d,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:g,offsets:a,sizes:q},width:A,height:J,planes:null,pixelType:null});if(l!==A||h!==J)if(q=f.mask)for(p=0;p<J;p++)for(a=p*A,d=p<h?l:0;d<A;d++)q[a+d]=0;else for(q=new Uint8Array(A*J),f.mask=q,p=
0;p<h;p++)for(a=p*A,d=0;d<l;d++)q[a+d]=1;return f});return function(f,p,d){return e.apply(this,arguments)}}();n.readIFDs=function(){var e=U._asyncToGenerator(function*(f,p,d,b,a,c=4,l){if(!b)return null;if(b>=p.byteLength||0>b)p=(yield this.request(this.url,{range:{from:b+a,to:b+a+this._bufferSize},responseType:"array-buffer",signal:l})).data,a=b+a,b=0;b=yield this.readIFD(p,d,b,a,u.TIFF_TAGS,c,l);f.push(b.ifd);if(!b.nextIFD)return null;yield this.readIFDs(f,p,d,b.nextIFD-a,a,c,l)});return function(f,
p,d,b,a){return e.apply(this,arguments)}}();n.readIFD=function(){var e=U._asyncToGenerator(function*(f,p,d,b,a=u.TIFF_TAGS,c=4,l){if(!f)return null;d=C.parseIFD(f,p,d,b,a,c);if(d.success){const h=[];d.ifd.forEach(g=>{g.values||h.push(g)});0<h.length&&(c=h.map(g=>g.offlineOffsetSize),a=Math.min.apply(null,c.map(g=>g[0])),Math.min.apply(null,c.map(g=>g[0]+g[1]))-a<=this._bufferSize&&({data:c}=yield this.request(this.url,{range:{from:a,to:a+this._bufferSize},responseType:"array-buffer",signal:l}),f=
c,b=a,h.forEach(g=>C.parseFieldValues(f,p,g,b))));d.ifd.has("GEOKEYDIRECTORY")&&(a=d.ifd.get("GEOKEYDIRECTORY"),(c=a.values)&&4<c.length&&(c=c[0]+"."+c[1]+"."+c[2],l=yield this.readIFD(f,p,a.valueOffset+6-b,b,u.GEO_KEYS,2,l),a.data=l.ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]})));return d}if(d.requiredBufferSize&&d.requiredBufferSize!==f.byteLength)return f=(yield this.request(this.url,{range:{from:b,to:b+d.requiredBufferSize+4},responseType:"array-buffer",
signal:l})).data,f.byteLength<d.requiredBufferSize?null:this.readIFD(f,p,0,b,u.TIFF_TAGS,4,l)});return function(f,p,d,b){return e.apply(this,arguments)}}();n.getTileLocation=function(e,f,p){const {firstPyramidLevel:d,blockBoundary:b}=this.rasterInfo.storageInfo;var a=0===e?0:e-(d-1);e=this._headerInfo.ifds[a];if(!e)return null;var c=C.isBSQConfig(e,this._headerInfo);const l=E(e,"TILEOFFSETS");if(void 0===l)return null;var h=E(e,"TILEBYTECOUNTS");const {minRow:g,minCol:q,maxRow:A,maxCol:J}=b[a];if(f>
A||p>J||f<g||p<q)return null;a=v(e,"IMAGEWIDTH");const G=v(e,"IMAGELENGTH"),Q=v(e,"TILEWIDTH"),S=v(e,"TILELENGTH"),W=c?this.rasterInfo.bandCount:1,X=W*f*(J+1)+p,M=[{from:l[X],to:l[X+W-1]+h[X+W-1]-1}];if(c){c=!0;for(let K=0;K<W;K++)if(l[X+K]+h[X+K]!==l[X+K+1]){c=!1;break}if(!c)for(c=0;c<W;c++)M[c]={from:l[X+c],to:l[X+c]+h[X+c]-1}}h=h[X];return null==l[X]||null==h?null:{ranges:M,ifd:e,actualTileWidth:p===J?a%Q:Q,actualTileHeight:f===A?G%S:S}};n._fetchAuxiliaryData=function(){var e=U._asyncToGenerator(function*(f){try{const {data:p}=
yield this.request(this.url+".aux.xml",{responseType:"xml",signal:null==f?void 0:f.signal});return H.parsePAMInfo(p)}catch{return null}});return function(f){return e.apply(this,arguments)}}();return m}(w);R.__decorate([T.property()],D.prototype,"_files",void 0);R.__decorate([T.property()],D.prototype,"_headerInfo",void 0);R.__decorate([T.property()],D.prototype,"_bufferSize",void 0);R.__decorate([T.property({type:String,json:{write:!0}})],D.prototype,"datasetFormat",void 0);return D=R.__decorate([I.subclass("esri.layers.support.rasterDatasets.TIFFRaster")],
D)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../rasterRenderers ../core/Error ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/ImageryTileMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/Field ./support/rasterEnums ./support/TimeInfo ./support/rasterDatasets/RasterFactory ../support/popupUtils".split(" "),function(U,
R,D,P,z,T,V,N,L,I,x,t,w,H,C,u,r,y,O,B,F,E,v,k,m,n,e,f,p,d){V=function(b){function a(...l){l=b.call(this,...l)||this;l.bandIds=null;l.interpolation=null;l.legendEnabled=!0;l.isReference=null;l.listMode="show";l.sourceJSON=null;l.version=null;l.title=null;l.type="imagery-tile";l.operationalLayerType="ArcGISTiledImageServiceLayer";l.popupEnabled=!0;l.popupTemplate=null;l.fields=null;return l}U._inheritsLoose(a,b);var c=a.prototype;c.normalizeCtorArgs=function(l,h){return"string"===typeof l?{url:l,...h}:
l};c.load=function(l){const h=T.isSome(l)?l.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},l).catch(N.throwIfAbortError).then(()=>this._openRaster(h)));return Promise.resolve(this)};c.readRenderer=function(l,h,g){l=P.read(h&&h.layerDefinition&&h.layerDefinition.drawingInfo&&h.layerDefinition.drawingInfo.renderer,g)||void 0;if(null!=l)return l};c.createPopupTemplate=function(l){return d.createPopupTemplate({fields:this.rasterFields,title:this.title},l)};
c.write=function(l,h){const {raster:g}=this;if(this.loaded?"RasterTileServer"===g.datasetFormat&&("Raster"===g.tileType||"Map"===g.tileType):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))return b.prototype.write.call(this,l,h);h&&h.messages&&h.messages.push(new z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${`${h.origin}/${h.layerContainerType||"operational-layers"}`}'`,{layer:this}));return null};c._openRaster=
function(){var l=U._asyncToGenerator(function*(h){this.raster?(this.raster.rasterInfo||(yield this.raster.open()),this.url=this.raster.url):this.raster=yield p.open({url:this.url,sourceJSON:this.sourceJSON,ioConfig:{sampling:"closest",...this.ioConfig,customFetchParameters:this.customParameters},signal:h});({rasterInfo:h}=this.raster);if(!h)throw new z("imagery-tile-layer:load","cannot load resources on "+this.url);this.sourceJSON=this.sourceJSON||this.raster.sourceJSON;null!=this.sourceJSON&&(this._set("version",
this.sourceJSON.currentVersion),this._set("copyright",this.sourceJSON.copyrightText),this.sourceJSON.timeInfo&&this._set("timeInfo",f.fromJSON(this.sourceJSON.timeInfo)));null==this.title&&(this.title=this.raster.datasetName);"Map"===this.raster.tileType&&(this.popupEnabled=!1);this._configDefaultSettings();this.watch("customParameters",g=>this.raster.ioConfig.customFetchParameters=g)});return function(h){return l.apply(this,arguments)}}();U._createClass(a,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},
{key:"rasterFields",get:function(){var l,h;let g=[new n({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})];const q=null==(l=this.rasterInfo)?void 0:null==(h=l.attributeTable)?void 0:h.fields;q&&(l=q.filter(J=>"oid"!==J.type&&"value"!==J.name.toLowerCase()).map(J=>{const G=J.clone();G.name="Raster."+J.name;return G}),g=g.concat(l));l=this.rasterInfo.dataType;if(("vector-magdir"===l||"vector-uv"===l)&&T.isSome(this.rasterInfo.multidimensionalInfo)){var A;
l=null==(A=this.rasterInfo.multidimensionalInfo.variables[0].unit)?void 0:A.trim();g.push(new n({name:"Raster.Magnitude",alias:"Magnitude"+(l?` (${l})`:""),domain:null,editable:!1,type:"double"}));g.push(new n({name:"Raster.Direction",alias:"Direction (\u00b0)",domain:null,editable:!1,type:"double"}))}return g}},{key:"renderer",set:function(l){this._set("renderer",l);this.updateRenderer()}}]);return a}(r.BlendLayer(v.ScaleRangeLayer(B.OperationalLayer(F.PortalLayer(y.CustomParametersMixin(O.ImageryTileMixin(k.TemporalLayer(E.RefreshableLayer(V.MultiOriginJSONMixin(u))))))))));
R.__decorate([L.property({type:[t.Integer],json:{write:{overridePolicy(){var b;return{enabled:!this.loaded||"Raster"===this.raster.tileType||"0,1,2"!==(null==(b=this.bandIds)?void 0:b.join(","))}}}}})],V.prototype,"bandIds",void 0);R.__decorate([L.property({json:{write:{overridePolicy(){return{enabled:!this.loaded||"Raster"===this.raster.tileType||"bilinear"!==this.interpolation}}}}}),w.enumeration(e.interpolationKebab)],V.prototype,"interpolation",void 0);R.__decorate([L.property({json:{write:!0}})],
V.prototype,"multidimensionalDefinition",void 0);R.__decorate([L.property(m.legendEnabled)],V.prototype,"legendEnabled",void 0);R.__decorate([L.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],V.prototype,"isReference",void 0);R.__decorate([L.property({type:["show","hide"]})],V.prototype,"listMode",void 0);R.__decorate([L.property()],V.prototype,"sourceJSON",void 0);R.__decorate([L.property({readOnly:!0})],V.prototype,"version",void 0);R.__decorate([L.property()],
V.prototype,"title",void 0);R.__decorate([L.property({readOnly:!0,json:{read:!1}})],V.prototype,"type",void 0);R.__decorate([L.property({type:["ArcGISTiledImageServiceLayer"]})],V.prototype,"operationalLayerType",void 0);R.__decorate([L.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(b,a){return!a.disablePopup}},write:{target:"disablePopup",overridePolicy(){return{enabled:!this.loaded||"Raster"===this.raster.tileType}},writer(b,a,c){a[c]=!b}}}})],V.prototype,"popupEnabled",
void 0);R.__decorate([L.property({type:D,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy(){return{enabled:!this.loaded||"Raster"===this.raster.tileType}}}}})],V.prototype,"popupTemplate",void 0);R.__decorate([L.property({readOnly:!0})],V.prototype,"defaultPopupTemplate",null);R.__decorate([L.property({readOnly:!0,type:[n]})],V.prototype,"fields",void 0);R.__decorate([L.property({readOnly:!0,type:[n]})],V.prototype,"rasterFields",null);R.__decorate([L.property({types:P.rasterRendererTypes,
json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(){var b;const a="raster-stretch"===(null==(b=this.renderer)?void 0:b.type)&&"none"===this.renderer.stretchType&&!this.renderer.useGamma;return{enabled:!this.loaded||"Raster"===this.raster.tileType||!a}}},origins:{"web-scene":{types:P.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(b){return{enabled:b&&"vector-field"!==b.type&&"animated-flow"!==b.type}}}}}}})],V.prototype,"renderer",
null);R.__decorate([H.reader("renderer")],V.prototype,"readRenderer",null);return V=R.__decorate([C.subclass("esri.layers.ImageryTileLayer")],V)});