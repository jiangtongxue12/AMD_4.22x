// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(c,a,F,M,p){let n=function(){function y(){this._emitter=new y.EventEmitter(this)}var C=y.prototype;C.emit=function(u,t){return this._emitter.emit(u,t)};C.on=function(u,t){return this._emitter.on(u,t)};C.once=function(u,t){return this._emitter.once(u,t)};C.hasEventListener=function(u){return this._emitter.hasEventListener(u)};
return y}();(function(y){let C=function(){function t(L=null){this.target=L;this._listenersMap=null}var z=t.prototype;z.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};z.emit=function(L,x){L=this._listenersMap&&this._listenersMap.get(L);if(!L)return!1;const h=this.target||this;[...L].forEach(H=>{H.call(h,x)});return 0<L.length};z.on=function(L,x){if(Array.isArray(L)){var h=L.map(H=>this.on(H,x));return M.handlesGroup(h)}if(-1<L.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);h=this._listenersMap.get(L)||[];h.push(x);this._listenersMap.set(L,h);return{remove:()=>{const H=this._listenersMap&&this._listenersMap.get(L)||[],b=H.indexOf(x);0<=b&&H.splice(b,1)}}};z.once=function(L,x){const h=this.on(L,H=>{h.remove();x.call(null,H)});return h};z.hasEventListener=function(L){L=this._listenersMap&&this._listenersMap.get(L);return null!=L&&0<L.length};return t}();y.EventEmitter=C;y.EventedMixin=t=>{t=function(z){function L(){var h=
z.apply(this,arguments)||this;h._emitter=new C;return h}c._inheritsLoose(L,z);var x=L.prototype;x.destroy=function(){this._emitter.clear()};x.emit=function(h,H){return this._emitter.emit(h,H)};x.on=function(h,H){return this._emitter.on(h,H)};x.once=function(h,H){return this._emitter.once(h,H)};x.hasEventListener=function(h){return this._emitter.hasEventListener(h)};return L}(t);return t=a.__decorate([p.subclass("esri.core.Evented")],t)};let u=function(t){function z(){var x=t.apply(this,arguments)||
this;x._emitter=new n.EventEmitter(c._assertThisInitialized(x));return x}c._inheritsLoose(z,t);var L=z.prototype;L.destroy=function(){this._emitter.clear()};L.emit=function(x,h){return this._emitter.emit(x,h)};L.on=function(x,h){return this._emitter.on(x,h)};L.once=function(x,h){return this._emitter.once(x,h)};L.hasEventListener=function(x){return this._emitter.hasEventListener(x)};return z}(F);u=a.__decorate([p.subclass("esri.core.Evented")],u);y.EventedAccessor=u})(n||(n={}));return n})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n,y){F=function(C){function u(z){z=C.call(this,z)||this;z._groups=new Map;return z}c._inheritsLoose(u,C);var t=u.prototype;t.destroy=function(){this.removeAll()};t.add=function(z,L){if(!this._isHandle(z)&&!Array.isArray(z)&&!M.isCollection(z))return this;const x=this._getOrCreateGroup(L);Array.isArray(z)||M.isCollection(z)?z.forEach(h=>this._isHandle(h)&&x.push(h)):x.push(z);this.notifyChange("size");return this};t.forEach=function(z,L){if("function"===typeof z)this._groups.forEach(x=>
x.forEach(z));else{const x=this._getGroup(z);x&&L&&x.forEach(L)}};t.has=function(z){return this._groups.has(this._ensureGroupKey(z))};t.remove=function(z){if(Array.isArray(z)||M.isCollection(z))return z.forEach(this.remove,this),this;if(!this.has(z))return this;const L=this._getGroup(z);for(let x=0;x<L.length;x++)L[x].remove();this._deleteGroup(z);this.notifyChange("size");return this};t.removeAll=function(){this._groups.forEach(z=>{for(let L=0;L<z.length;L++)z[L].remove()});this._groups.clear();
this.notifyChange("size");return this};t._isHandle=function(z){return z&&!!z.remove};t._getOrCreateGroup=function(z){if(this.has(z))return this._getGroup(z);const L=[];this._groups.set(this._ensureGroupKey(z),L);return L};t._getGroup=function(z){return p.assumeNonNull(this._groups.get(this._ensureGroupKey(z)))};t._deleteGroup=function(z){return this._groups.delete(this._ensureGroupKey(z))};t._ensureGroupKey=function(z){return z||"_default_"};c._createClass(u,[{key:"size",get:function(){let z=0;this._groups.forEach(L=>
{z+=L.length});return z}}]);return u}(F);a.__decorate([n.property({readOnly:!0})],F.prototype,"size",null);return F=a.__decorate([y.subclass("esri.core.Handles")],F)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h){function H(A){return A?A instanceof m?A.toArray():A.length?Array.prototype.slice.apply(A):[]:[]}function b(A){if(A&&A.length)return A[0]}function g(A,S,P,I){S&&S.forEach((q,w,N)=>{A.push(q);g(A,P.call(I,q,w,N),P,I)})}var r;let B=function(){function A(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var S=A.prototype;S.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};S.reset=function(P){this.defaultPrevented=
!1;this.item=P};return A}();const l=new y(B,void 0,A=>{A.item=null;A.target=null;A.defaultPrevented=!1;A.cancellable=!1}),E=()=>{},J=new Set,O=new Set,Q=new Set,f=new Map;let k=0,m=r=function(A,S){function P(q){q=A.call(this,q)||this;q._chgListeners=[];q._notifications=null;q._timer=null;q._observable=new h.SimpleObservable;q.length=0;q._items=[];Object.defineProperty(c._assertThisInitialized(q),"uid",{value:k++});return q}c._inheritsLoose(P,A);P.isCollection=function(q){return null!=q&&q instanceof
r};var I=P.prototype;I.normalizeCtorArgs=function(q){return q?Array.isArray(q)||q instanceof r?{items:q}:q:{}};I.destroy=function(){this.removeAll()};I[S]=function*(){yield*this.items};I.hasEventListener=function(q){return"change"===q?0<this._chgListeners.length:this._emitter.hasEventListener(q)};I.on=function(q,w){if("change"===q){const N=this._chgListeners,X={removed:!1,callback:w};N.push(X);this._notifications&&this._notifications.push({listeners:N.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=E;X.removed=!0;N.splice(N.indexOf(X),1)}}}return this._emitter.on(q,w)};I.once=function(q,w){const N=this.on(q,w);return{remove(){N.remove()}}};I.add=function(q,w){x.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;w=this.getNextIndex(null!=w?w:null);this._splice(w,0,[q]);this._emitAfterChanges(1);return this};I.addMany=function(q,w=this._items.length){x.trackAccess(this._observable);if(!q||!q.length||this._emitBeforeChanges(1))return this;w=this.getNextIndex(w);
this._splice(w,0,H(q));this._emitAfterChanges(1);return this};I.removeAll=function(){x.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const q=this._splice(0,this.length)||[];this._emitAfterChanges(2);return q};I.clone=function(){x.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(p.clone)})};I.concat=function(...q){x.trackAccess(this._observable);q=q.map(H);return this._createNewInstance({items:this._items.concat(...q)})};I.drain=
function(q,w){x.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var N=n.assumeNonNull(this._splice(0,this.length)),X=N.length;for(let ca=0;ca<X;ca++)q.call(w,N[ca],ca,N);this._emitAfterChanges(2)}};I.every=function(q,w){x.trackAccess(this._observable);return this._items.every(q,w)};I.filter=function(q,w){x.trackAccess(this._observable);let N;N=2===arguments.length?this._items.filter(q,w):this._items.filter(q);return this._createNewInstance({items:N})};I.find=function(q,
w){x.trackAccess(this._observable);return this._items.find(q,w)};I.findIndex=function(q,w){x.trackAccess(this._observable);return this._items.findIndex(q,w)};I.flatten=function(q,w){x.trackAccess(this._observable);const N=[];g(N,this,q,w);return new r(N)};I.forEach=function(q,w){x.trackAccess(this._observable);return this._items.forEach(q,w)};I.getItemAt=function(q){x.trackAccess(this._observable);return this._items[q]};I.getNextIndex=function(q){x.trackAccess(this._observable);const w=this.length;
q=null==q?w:q;0>q?q=0:q>w&&(q=w);return q};I.includes=function(q,w=0){x.trackAccess(this._observable);return this._items.includes(q,w)};I.indexOf=function(q,w=0){x.trackAccess(this._observable);return this._items.indexOf(q,w)};I.join=function(q=","){x.trackAccess(this._observable);return this._items.join(q)};I.lastIndexOf=function(q,w=this.length-1){x.trackAccess(this._observable);return this._items.lastIndexOf(q,w)};I.map=function(q,w){x.trackAccess(this._observable);q=this._items.map(q,w);return new r({items:q})};
I.reorder=function(q,w=this.length-1){x.trackAccess(this._observable);const N=this.indexOf(q);if(-1!==N){0>w?w=0:w>=this.length&&(w=this.length-1);if(N!==w){if(this._emitBeforeChanges(4))return q;this._splice(N,1);this._splice(w,0,[q]);this._emitAfterChanges(4)}return q}};I.pop=function(){x.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var q=b(this._splice(this.length-1,1));this._emitAfterChanges(2);return q}};I.push=function(...q){x.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;
this._splice(this.length,0,q);this._emitAfterChanges(1);return this.length};I.reduce=function(q,w){x.trackAccess(this._observable);const N=this._items;return 2===arguments.length?N.reduce(q,w):N.reduce(q)};I.reduceRight=function(q,w){x.trackAccess(this._observable);const N=this._items;return 2===arguments.length?N.reduceRight(q,w):N.reduceRight(q)};I.remove=function(q){x.trackAccess(this._observable);return this.removeAt(this.indexOf(q))};I.removeAt=function(q){x.trackAccess(this._observable);if(!(0>
q||q>=this.length||this._emitBeforeChanges(2)))return q=b(this._splice(q,1)),this._emitAfterChanges(2),q};I.removeMany=function(q){x.trackAccess(this._observable);if(!q||!q.length||this._emitBeforeChanges(2))return[];q=q instanceof r?q.toArray():q;const w=this._items,N=[],X=q.length;for(let ta=0;ta<X;ta++){var ca=w.indexOf(q[ta]);if(-1<ca){{var ja=ta+1;var na=ca+1;const ma=Math.min(q.length-ja,w.length-na);let la=0;for(;la<ma&&q[ja+la]===w[na+la];)la++;ja=la}ja=1+ja;(ca=this._splice(ca,ja))&&0<ca.length&&
N.push.apply(N,ca);ta+=ja-1}}this._emitAfterChanges(2);return N};I.reverse=function(){x.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const q=this._splice(0,this.length);q&&(q.reverse(),this._splice(0,0,q));this._emitAfterChanges(4);return this};I.shift=function(){x.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var q=b(this._splice(0,1));this._emitAfterChanges(2);return q}};I.slice=function(q=0,w=this.length){x.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(q,
w)})};I.some=function(q,w){x.trackAccess(this._observable);return this._items.some(q,w)};I.sort=function(q){x.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(4))return this;const w=n.assumeNonNull(this._splice(0,this.length));arguments.length?w.sort(q):w.sort();this._splice(0,0,w);this._emitAfterChanges(4);return this};I.splice=function(q,w,...N){x.trackAccess(this._observable);const X=(w?2:0)|(N.length?1:0);if(this._emitBeforeChanges(X))return[];q=this._splice(q,w,N)||[];this._emitAfterChanges(X);
return q};I.toArray=function(){x.trackAccess(this._observable);return this._items.slice()};I.toJSON=function(){x.trackAccess(this._observable);return this.toArray()};I.toLocaleString=function(){x.trackAccess(this._observable);return this._items.toLocaleString()};I.toString=function(){x.trackAccess(this._observable);return this._items.toString()};I.unshift=function(...q){x.trackAccess(this._observable);if(!q.length||this._emitBeforeChanges(1))return this.length;this._splice(0,0,q);this._emitAfterChanges(1);
return this.length};I._createNewInstance=function(q){return new this.constructor(q)};I._splice=function(q,w,N){const X=this._items;var ca=this.itemType;let ja=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=C.schedule(()=>this._dispatchChange()));if(w){ja=X.splice(q,w);if(this.hasEventListener("before-remove")){var na=l.acquire();na.target=
this;na.cancellable=!0;for(let la=0,va=ja.length;la<va;la++)w=ja[la],na.reset(w),this.emit("before-remove",na),na.defaultPrevented&&(ja.splice(la,1),X.splice(q,0,w),q+=1,--la,--va);l.release(na)}this.length=this._items.length;if(this.hasEventListener("after-remove")){w=l.acquire();w.target=this;w.cancellable=!1;na=ja.length;for(let la=0;la<na;la++)w.reset(ja[la]),this.emit("after-remove",w);l.release(w)}}if(N&&N.length){if(ca){w=[];for(var ta of N)N=ca.ensureType(ta),null==N&&null!=ta||w.push(N);
N=w}ca=this.hasEventListener("before-add");ta=this.hasEventListener("after-add");w=q===this.length;if(ca||ta){var ma=l.acquire();ma.target=this;ma.cancellable=!0;na=l.acquire();na.target=this;na.cancellable=!1;for(const la of N)ca?(ma.reset(la),this.emit("before-add",ma),ma.defaultPrevented||(w?X.push(la):X.splice(q++,0,la),this._set("length",X.length),ta&&(na.reset(la),this.emit("after-add",na)))):(w?X.push(la):X.splice(q++,0,la),this._set("length",X.length),na.reset(la),this.emit("after-add",na));
l.release(na);l.release(ma)}else{if(w)for(ma of N)X.push(ma);else X.splice(q,0,...N);this._set("length",X.length)}}(N&&N.length||ja&&ja.length)&&this._notifyChangeEvent(N,ja);return ja};I._emitBeforeChanges=function(q){let w=!1;if(this.hasEventListener("before-changes")){const N=l.acquire();N.target=this;N.cancellable=!0;N.type=q;this.emit("before-changes",N);w=N.defaultPrevented;l.release(N)}return w};I._emitAfterChanges=function(q){if(this.hasEventListener("after-changes")){const w=l.acquire();
w.target=this;w.cancellable=!1;w.type=q;this.emit("after-changes",w);l.release(w)}this._observable.notify()};I._notifyChangeEvent=function(q,w){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:q,removed:w})};I._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var q=this._notifications;this._notifications=null;for(const w of q){q=w.changes;J.clear();O.clear();Q.clear();for(const {added:ta,
removed:ma}of q){if(ta)if(0===Q.size&&0===O.size)for(const la of ta)J.add(la);else for(const la of ta)O.has(la)?(Q.add(la),O.delete(la)):Q.has(la)||J.add(la);if(ma)if(0===Q.size&&0===J.size)for(const la of ma)O.add(la);else for(const la of ma)J.has(la)?J.delete(la):(Q.delete(la),O.add(la))}const N=F.acquire();J.forEach(ta=>{N.push(ta)});const X=F.acquire();O.forEach(ta=>{X.push(ta)});const ca=this._items,ja=w.items,na=F.acquire();Q.forEach(ta=>{ja.indexOf(ta)!==ca.indexOf(ta)&&na.push(ta)});if(w.listeners&&
(N.length||X.length||na.length)){q={target:this,added:N,removed:X,moved:na};const ta=w.listeners.length;for(let ma=0;ma<ta;ma++){const la=w.listeners[ma];la.removed||la.callback.call(this,q)}}F.release(N);F.release(X);F.release(na)}J.clear();O.clear();Q.clear()}};c._createClass(P,[{key:"items",get:function(){x.trackAccess(this._observable);return this._items},set:function(q){this._emitBeforeChanges(1)||(this._splice(0,this.length,H(q)),this._emitAfterChanges(1))}}]);return P}(M.EventedAccessor,Symbol.iterator);
m.ofType=A=>{if(!A)return r;if(f.has(A))return f.get(A);let S=null;if("function"===typeof A)S=A.prototype.declaredClass;else if(A.base)S=A.base.prototype.declaredClass;else for(var P in A.typeMap){const I=A.typeMap[P].prototype.declaredClass;S=S?S+` | ${I}`:I}P=function(I){function q(){return I.apply(this,arguments)||this}c._inheritsLoose(q,I);return q}(r);a.__decorate([z.shared({Type:A,ensureType:"function"===typeof A?t.ensureType(A):t.ensureOneOfType(A)})],P.prototype,"itemType",void 0);P=a.__decorate([L.subclass(`esri.core.Collection<${S}>`)],
P);f.set(A,P);return P};a.__decorate([u.property()],m.prototype,"length",void 0);a.__decorate([u.property()],m.prototype,"items",null);return m=r=a.__decorate([L.subclass("esri.core.Collection")],m)})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],function(c){c.shared=function(a){return(F,M)=>{F[M]=a}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(c,
a){let F=function(){function M(){this._observers=[]}var p=M.prototype;p.observe=function(n){this._observers.includes(n)||this._observers.push(n);return new a.ObservationHandle(this._observers,n)};p.notify=function(){const n=this._observers.slice();for(let y=0;y<n.length;++y){const C=n[y];C.onInvalidated();C.onCommitted()}};return M}();c.SimpleObservable=F;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/watchUtils":function(){define(["exports","./events","./lang","./promiseUtils"],function(c,
a,F,M){function p(H,b,g,r){var B=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];b=H.watch(b,g,r);for(const l of B)B=l.trim().replace(h,"$1"),r=H.get(B),g.call(H,r,r,B,H);return b}function n(H,b,g,r,B){B=H.watch(b,(E,J,O,Q)=>{if(!g||g(E))null==r?void 0:r.call(H,E,J,O,Q)},B);if(Array.isArray(b))for(var l of b){const E=H.get(l);g&&g(E)&&(null==r?void 0:r.call(H,E,E,b,H))}else l=H.get(b),g&&g(l)&&(null==r?void 0:r.call(H,l,l,b,H));return B}function y(H,b,g,r,B){function l(){Q&&(Q.remove(),Q=null)}
const E="function"===typeof r?r:null,J="object"===typeof r?r:null;"boolean"===typeof r&&(B=r);let O=!1,Q;const f=M.createDeferred();M.onAbort(J,()=>{l();f.reject(M.createAbortError())});r={then:f.promise.then.bind(f.promise),catch:f.promise.catch.bind(f.promise),remove:l};Object.freeze(r);Q=n(H,b,g,(k,m,A,S)=>{O=!0;l();E&&E.call(H,k,m,A,S);f.resolve({value:k,oldValue:m,propertyName:A,target:S})},B);O&&l();return r}function C(H){return!!H}function u(H){return!H}function t(H){return!0===H}function z(H){return!1===
H}function L(H){return void 0!==H}function x(H){return void 0===H}const h=/\?(\.|$)/g;c.init=p;c.on=function(H,b,g,r,B,l,E){function J(f){const k=O[f];k&&(l&&l(k.target,f,H,g),k.handle.remove(),delete O[f])}const O={},Q=p(H,b,(f,k,m)=>{J(m);a.isEventTarget(f)&&(O[m]={handle:a.on(f,g,r),target:f},B&&B(f,m,H,g))},E);return{remove(){Q.remove();for(const f in O)J(f)}}};c.once=function(H,b,g,r){return y(H,b,null,g,r)};c.pausable=function(H,b,g,r){let B=!1;const l=H.watch(b,(E,J,O,Q)=>{B||g.call(H,E,J,
O,Q)},r);return{remove(){l.remove()},pause(){B=!0},resume(){B=!1}}};c.watch=function(H,b,g,r){return H.watch(b,g,r)};c.when=function(H,b,g,r){return n(H,b,C,g,r)};c.whenDefined=function(H,b,g,r){return n(H,b,L,g,r)};c.whenDefinedOnce=function(H,b,g,r){return y(H,b,L,g,r)};c.whenEqual=function(H,b,g,r,B){return n(H,b,l=>F.equals(g,l),r,B)};c.whenEqualOnce=function(H,b,g,r,B){return y(H,b,l=>F.equals(g,l),r,B)};c.whenFalse=function(H,b,g,r){return n(H,b,z,g,r)};c.whenFalseOnce=function(H,b,g,r){return y(H,
b,z,g,r)};c.whenNot=function(H,b,g,r){return n(H,b,u,g,r)};c.whenNotOnce=function(H,b,g,r){return y(H,b,u,g,r)};c.whenOnce=function(H,b,g,r){return y(H,b,C,g,r)};c.whenTrue=function(H,b,g,r){return n(H,b,t,g,r)};c.whenTrueOnce=function(H,b,g,r){return y(H,b,t,g,r)};c.whenUndefined=function(H,b,g,r){return n(H,b,x,g,r)};c.whenUndefinedOnce=function(H,b,g,r){return y(H,b,x,g,r)};c.whenValidOnce=y;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(c,a,F,M,p,n,y,C,u,t){return function(){function z(x){this.geometryInfo=x;this._boundsStore=new u.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new F;this.featureAdapter=t.optimizedFeatureQueryEngineAdapter}var L=z.prototype;L.add=function(x){this._add(x);this._emitChanged()};L.addMany=function(x){for(const h of x)this._add(h);this._emitChanged()};L.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};L.removeById=function(x){x=
this._featuresById.get(x);if(!x)return null;this._remove(x);this._emitChanged();return x};L.removeManyById=function(x){this._boundsStore.invalidateIndex();for(const h of x)(x=this._featuresById.get(h))&&this._remove(x);this._emitChanged()};L.forEachBounds=function(x,h,H){for(const b of x)(x=this._boundsStore.get(b.objectId))&&h(n.fromRect(H,x))};L.getFeature=function(x){return this._featuresById.get(x)};L.has=function(x){return this._featuresById.has(x)};L.forEach=function(x){this._featuresById.forEach(h=>
x(h))};L.forEachInBounds=function(x,h){this._boundsStore.forEachInBounds(x,H=>{h(this._featuresById.get(H))})};L.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};L.sweep=function(){let x=!1;this._featuresById.forEach((h,H)=>{this._markedIds.has(H)||(x=!0,this._remove(h))});this._markedIds.clear();x&&this._emitChanged()};L._emitChanged=function(){this.events.emit("changed",void 0)};L._add=function(x){if(x){var h=x.objectId;if(null==h)M.getLogger("esri.layers.graphics.data.FeatureStore").error(new a("featurestore:invalid-feature",
"feature id is missing",{feature:x}));else{var H=this._featuresById.get(h);this._markedIds.add(h);if(H){x.displayId=H.displayId;var b=this._boundsStore.get(h);this._boundsStore.delete(h)}else if(p.isSome(this.onFeatureAdd))this.onFeatureAdd(x);!p.isNone(x.geometry)&&x.geometry.coords&&x.geometry.coords.length?(b=C.getBoundsOptimizedGeometry(p.isSome(b)?b:y.create(),x.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),p.isSome(b)&&this._boundsStore.set(h,b)):this._boundsStore.set(h,null);this._featuresById.set(h,
x)}}};L._remove=function(x){if(p.isSome(this.onFeatureRemove))this.onFeatureRemove(x);this._markedIds.delete(x.objectId);this._boundsStore.delete(x.objectId);this._featuresById.delete(x.objectId);return x};c._createClass(z,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const x=y.create(y.NEGATIVE_INFINITY);this._featuresById.forEach(h=>{if(h=this._boundsStore.get(h.objectId))x[0]=Math.min(h[0],x[0]),x[1]=Math.min(h[1],x[1]),x[2]=Math.max(h[2],x[2]),x[3]=Math.max(h[3],x[3])});return x}},{key:"storeStatistics",get:function(){let x=0;this._featuresById.forEach(h=>{p.isSome(h.geometry)&&h.geometry.coords&&(x+=h.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:x/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return z}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(c,a,F,M){function p(b=h){return[b[0],b[1],b[2],b[3],b[4],b[5]]}function n(b,g,r,B,l,E,J=p()){J[0]=b;J[1]=g;J[2]=r;J[3]=B;J[4]=l;J[5]=E;return J}function y(b){return b[0]>=b[3]?0:b[3]-b[0]}function C(b){return b[1]>=b[4]?0:b[4]-b[1]}function u(b){return b[2]>=b[5]?0:b[5]-b[2]}function t(b,g){return Math.max(g[0],b[0])<=Math.min(g[3],b[3])&&
Math.max(g[1],b[1])<=Math.min(g[4],b[4])&&Math.max(g[2],b[2])<=Math.min(g[5],b[5])}function z(b,g){b[0]=g[0];b[1]=g[1];b[2]=g[2];b[3]=g[3];b[4]=g[4];b[5]=g[5];return b}function L(b){return 6===b.length}const x=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],h=[0,0,0,0,0,0],H=p();c.NEGATIVE_INFINITY=x;c.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];c.ZERO=h;c.allFinite=function(b){for(let g=0;6>g;g++)if(!isFinite(b[g]))return!1;return!0};c.center=function(b,
g=[0,0,0]){g[0]=b[0]+y(b)/2;g[1]=b[1]+C(b)/2;g[2]=b[2]+u(b)/2;return g};c.contains=function(b,g){return g[0]>=b[0]&&g[1]>=b[1]&&g[2]>=b[2]&&g[3]<=b[3]&&g[4]<=b[4]&&g[5]<=b[5]};c.containsPoint=function(b,g){return g[0]>=b[0]&&g[1]>=b[1]&&g[2]>=b[2]&&g[0]<=b[3]&&g[1]<=b[4]&&g[2]<=b[5]};c.containsPointWithMargin=function(b,g,r){return g[0]>=b[0]-r&&g[1]>=b[1]-r&&g[2]>=b[2]-r&&g[0]<=b[3]+r&&g[1]<=b[4]+r&&g[2]<=b[5]+r};c.create=p;c.depth=C;c.diameter=function(b){const g=y(b),r=u(b);b=C(b);return Math.sqrt(g*
g+r*r+b*b)};c.empty=function(b){return b?z(b,x):p(x)};c.equals=function(b,g,r){if(a.isNone(b)||a.isNone(g))return b===g;if(!L(b)||!L(g))return!1;if(r)for(let B=0;B<b.length;B++){if(!r(b[B],g[B]))return!1}else for(r=0;r<b.length;r++)if(b[r]!==g[r])return!1;return!0};c.expandWithAABB=function(b,g){b[0]=Math.min(b[0],g[0]);b[1]=Math.min(b[1],g[1]);b[2]=Math.min(b[2],g[2]);b[3]=Math.max(b[3],g[3]);b[4]=Math.max(b[4],g[4]);b[5]=Math.max(b[5],g[5])};c.expandWithBuffer=function(b,g,r=0,B=g.length/3){let l=
b[0],E=b[1],J=b[2],O=b[3],Q=b[4],f=b[5];for(let k=0;k<B;k++)l=Math.min(l,g[r+3*k]),E=Math.min(E,g[r+3*k+1]),J=Math.min(J,g[r+3*k+2]),O=Math.max(O,g[r+3*k]),Q=Math.max(Q,g[r+3*k+1]),f=Math.max(f,g[r+3*k+2]);b[0]=l;b[1]=E;b[2]=J;b[3]=O;b[4]=Q;b[5]=f};c.expandWithNestedArray=function(b,g,r){const B=g.length;let l=b[0],E=b[1],J=b[2],O=b[3],Q=b[4],f=b[5];if(r)for(r=0;r<B;r++){var k=g[r];l=Math.min(l,k[0]);E=Math.min(E,k[1]);J=Math.min(J,k[2]);O=Math.max(O,k[0]);Q=Math.max(Q,k[1]);f=Math.max(f,k[2])}else for(r=
0;r<B;r++)k=g[r],l=Math.min(l,k[0]),E=Math.min(E,k[1]),O=Math.max(O,k[0]),Q=Math.max(Q,k[1]);b[0]=l;b[1]=E;b[2]=J;b[3]=O;b[4]=Q;b[5]=f};c.expandWithOffset=function(b,g,r,B){b[0]=Math.min(b[0],b[0]+g);b[3]=Math.max(b[3],b[3]+g);b[1]=Math.min(b[1],b[1]+r);b[4]=Math.max(b[4],b[4]+r);b[2]=Math.min(b[2],b[2]+B);b[5]=Math.max(b[5],b[5]+B)};c.expandWithRect=function(b,g){b[0]=Math.min(b[0],g[0]);b[1]=Math.min(b[1],g[1]);b[3]=Math.max(b[3],g[2]);b[4]=Math.max(b[4],g[3])};c.expandWithVec3=function(b,g){b[0]=
Math.min(b[0],g[0]);b[1]=Math.min(b[1],g[1]);b[2]=Math.min(b[2],g[2]);b[3]=Math.max(b[3],g[0]);b[4]=Math.max(b[4],g[1]);b[5]=Math.max(b[5],g[2])};c.fromExtent=function(b,g=p()){g[0]=b.xmin;g[1]=b.ymin;g[2]=b.zmin;g[3]=b.xmax;g[4]=b.ymax;g[5]=b.zmax;return g};c.fromMinMax=function(b,g,r=p()){r[0]=b[0];r[1]=b[1];r[2]=b[2];r[3]=g[0];r[4]=g[1];r[5]=g[2];return r};c.fromRect=function(b,g){b[0]=g[0];b[1]=g[1];b[2]=Number.NEGATIVE_INFINITY;b[3]=g[2];b[4]=g[3];b[5]=Number.POSITIVE_INFINITY;return b};c.fromValues=
n;c.getMax=function(b,g){g[0]=b[3];g[1]=b[4];g[2]=b[5];return g};c.getMin=function(b,g){g[0]=b[0];g[1]=b[1];g[2]=b[2];return g};c.height=u;c.intersects=t;c.intersectsClippingArea=function(b,g){return a.isNone(g)?!0:t(b,g)};c.is=L;c.isPoint=function(b){return 0===y(b)&&0===C(b)&&0===u(b)};c.maximumDimension=function(b){return Math.max(y(b),u(b),C(b))};c.offset=function(b,g,r,B,l=b){l[0]=b[0]+g;l[1]=b[1]+r;l[2]=b[2]+B;l[3]=b[3]+g;l[4]=b[4]+r;l[5]=b[5]+B;return l};c.scale=function(b,g,r=b){const B=b[0]+
y(b)/2,l=b[1]+C(b)/2,E=b[2]+u(b)/2;r[0]=B+(b[0]-B)*g;r[1]=l+(b[1]-l)*g;r[2]=E+(b[2]-E)*g;r[3]=B+(b[3]-B)*g;r[4]=l+(b[4]-l)*g;r[5]=E+(b[5]-E)*g;return r};c.set=z;c.setMax=function(b,g,r=b){r[3]=g[0];r[4]=g[1];r[5]=g[2];r!==b&&(r[0]=b[0],r[1]=b[1],r[2]=b[2]);return b};c.setMin=function(b,g,r=b){r[0]=g[0];r[1]=g[1];r[2]=g[2];r!==b&&(r[3]=b[3],r[4]=b[4],r[5]=b[5]);return r};c.size=function(b,g=[0,0,0]){g[0]=y(b);g[1]=C(b);g[2]=u(b);return g};c.toExtent=function(b,g){return isFinite(b[2])||isFinite(b[5])?
new F({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],zmin:b[2],zmax:b[5],spatialReference:g}):new F({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],spatialReference:g})};c.toRect=function(b,g){g||(g=M.create());g[0]=b[0];g[1]=b[1];g[2]=b[3];g[3]=b[4];return g};c.width=y;c.wrap=function(b,g,r,B,l,E){return n(b,g,r,B,l,E,H)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],
function(c,a,F,M,p){function n(h=x){return[h[0],h[1],h[2],h[3]]}function y(h,H){h!==H&&(h[0]=H[0],h[1]=H[1],h[2]=H[2],h[3]=H[3]);return h}function C(h){return M.isNone(h)||h[0]>=h[2]?0:h[2]-h[0]}function u(h){return h[1]>=h[3]?0:h[3]-h[1]}function t(h,H,b){return H>=h[0]&&b>=h[1]&&H<=h[2]&&b<=h[3]}function z(h){return null!=h&&4===h.length}const L=[Infinity,Infinity,-Infinity,-Infinity],x=[0,0,0,0];c.NEGATIVE_INFINITY=L;c.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];c.UNIT=[0,0,1,1];
c.ZERO=x;c.allFinite=function(h){for(let H=0;4>H;H++)if(!isFinite(h[H]))return!1;return!0};c.area=function(h){return C(h)*u(h)};c.center=function(h,H=[0,0]){H[0]=(h[0]+h[2])/2;H[1]=(h[1]+h[3])/2;return H};c.clone=function(h){return[h[0],h[1],h[2],h[3]]};c.contains=function(h,H){return H[0]>=h[0]&&H[2]<=h[2]&&H[1]>=h[1]&&H[3]<=h[3]};c.containsPoint=function(h,H){return t(h,H[0],H[1])};c.containsPointObject=function(h,H){return t(h,H.x,H.y)};c.containsPointWithMargin=function(h,H,b){return H[0]>=h[0]-
b&&H[1]>=h[1]-b&&H[0]<=h[2]+b&&H[1]<=h[3]+b};c.containsXY=t;c.copy=y;c.create=n;c.distance=function(h,H){const b=(h[1]+h[3])/2,g=Math.max(Math.abs(H[0]-(h[0]+h[2])/2)-C(h)/2,0);h=Math.max(Math.abs(H[1]-b)-u(h)/2,0);return Math.sqrt(g*g+h*h)};c.empty=function(h){return h?y(h,L):n(L)};c.equals=function(h,H){return z(h)&&z(H)?h[0]===H[0]&&h[1]===H[1]&&h[2]===H[2]&&h[3]===H[3]:h===H};c.expand=function(h,H,b){if(M.isNone(H))y(b,h);else if("length"in H)if(z(H))b[0]=Math.min(h[0],H[0]),b[1]=Math.min(h[1],
H[1]),b[2]=Math.max(h[2],H[2]),b[3]=Math.max(h[3],H[3]);else{if(2===H.length||3===H.length)b[0]=Math.min(h[0],H[0]),b[1]=Math.min(h[1],H[1]),b[2]=Math.max(h[2],H[0]),b[3]=Math.max(h[3],H[1])}else switch(H.type){case "extent":b[0]=Math.min(h[0],H.xmin);b[1]=Math.min(h[1],H.ymin);b[2]=Math.max(h[2],H.xmax);b[3]=Math.max(h[3],H.ymax);break;case "point":b[0]=Math.min(h[0],H.x),b[1]=Math.min(h[1],H.y),b[2]=Math.max(h[2],H.x),b[3]=Math.max(h[3],H.y)}};c.expandPointInPlace=function(h,H){H[0]<h[0]&&(h[0]=
H[0]);H[0]>h[2]&&(h[2]=H[0]);H[1]<h[1]&&(h[1]=H[1]);H[1]>h[3]&&(h[3]=H[1])};c.expandWithNestedArray=function(h,H,b=h){const g=H.length;let r=h[0],B=h[1],l=h[2];h=h[3];for(let E=0;E<g;E++){const J=H[E];r=Math.min(r,J[0]);B=Math.min(B,J[1]);l=Math.max(l,J[0]);h=Math.max(h,J[1])}b[0]=r;b[1]=B;b[2]=l;b[3]=h;return b};c.fromExtent=function(h,H=n()){H[0]=h.xmin;H[1]=h.ymin;H[2]=h.xmax;H[3]=h.ymax;return H};c.fromValues=function(h,H,b,g,r=n()){r[0]=h;r[1]=H;r[2]=b;r[3]=g;return r};c.height=u;c.intersection=
function(h,H,b){if(M.isNone(H))return y(b,h);const g=H[0],r=H[1],B=H[2];H=H[3];b[0]=F.clamp(h[0],g,B);b[1]=F.clamp(h[1],r,H);b[2]=F.clamp(h[2],g,B);b[3]=F.clamp(h[3],r,H);return b};c.intersects=function(h,H){return Math.max(H[0],h[0])<=Math.min(H[2],h[2])&&Math.max(H[1],h[1])<=Math.min(H[3],h[3])};c.intersectsSphere=function(h,H){const b=H[3];var g=Math.abs(H[0]-.5*(h[0]+h[2]));const r=.5*(h[2]-h[0]);if(g>b+r)return!1;var B=.5*(h[3]-h[1]);h=Math.abs(H[1]-.5*(h[1]+h[3]));if(h>b+B)return!1;if(g<r||
h<B)return!0;g-=r;B=h-B;return g*g+B*B<=b*b};c.is=z;c.isPoint=function(h){return(0===C(h)||!isFinite(h[0]))&&(0===u(h)||!isFinite(h[1]))};c.offset=function(h,H,b,g=h){g[0]=h[0]+H;g[1]=h[1]+b;g[2]=h[2]+H;g[3]=h[3]+b;return g};c.pad=function(h,H,b=h){b[0]=h[0]-H;b[1]=h[1]-H;b[2]=h[2]+H;b[3]=h[3]+H;return b};c.setMax=function(h,H,b=h){b[2]=H[0];b[3]=H[1];b!==h&&(b[0]=h[0],b[1]=h[1]);return h};c.setMin=function(h,H,b=h){b[0]=H[0];b[1]=H[1];b!==h&&(b[2]=h[2],b[3]=h[3]);return b};c.size=function(h,H){H[0]=
h[2]-h[0];H[1]=h[3]-h[1]};c.toExtent=function(h,H){return new p({xmin:h[0],ymin:h[1],xmax:h[2],ymax:h[3],spatialReference:H})};c.width=C;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(c,a,F,M,p,n,y,C){function u(D,T){return D?T?4:3:T?3:2}function t(D,T,W,Y){if(D){if(W)return T&&
Y?e:Oa;if(T&&Y)return Ia}else if(T&&Y)return Oa;return Sa}function z({scale:D,translate:T},W){return Math.round((W-T[0])/D[0])}function L({scale:D,translate:T},W){return Math.round((T[1]-W)/D[1])}function x({scale:D,translate:T},W){return W*D[0]+T[0]}function h({scale:D,translate:T},W){return T[1]-W*D[1]}function H(D){D=D.coords;return{x:D[0],y:D[1]}}function b(D,T){D.coords[0]=T.x;D.coords[1]=T.y;return D}function g(D){D=D.coords;return{x:D[0],y:D[1],z:D[2]}}function r(D,T){D.coords[0]=T.x;D.coords[1]=
T.y;D.coords[2]=T.z;return D}function B(D){D=D.coords;return{x:D[0],y:D[1],m:D[2]}}function l(D,T){D.coords[0]=T.x;D.coords[1]=T.y;D.coords[2]=T.m;return D}function E(D){D=D.coords;return{x:D[0],y:D[1],z:D[2],m:D[3]}}function J(D,T){D.coords[0]=T.x;D.coords[1]=T.y;D.coords[2]=T.z;D.coords[3]=T.m;return D}function O(D,T){return D&&T?J:D?r:T?l:b}function Q(D,T,W,Y,ia){W=O(W,Y);for(const fa of T){const {geometry:U,attributes:V}=fa;let da;U&&(da=W(new C,U));D.push(new n.default(da,V,null,V[ia]))}return D}
function f(D,T,W,Y){for(const ia of T){const {geometry:fa,attributes:U}=ia;let V;fa&&(V=k(fa,W,Y));D.push({attributes:U,geometry:V})}return D}function k(D,T,W){if(M.isNone(D))return null;const Y=u(T,W),ia=[];for(let fa=0;fa<D.coords.length;fa+=Y){const U=[];for(let V=0;V<Y;V++)U.push(D.coords[fa+V]);ia.push(U)}return T?W?{points:ia,hasZ:T,hasM:W}:{points:ia,hasZ:T}:W?{points:ia,hasM:W}:{points:ia}}function m(D,T,W,Y,ia){W=u(W,Y);for(const fa of T){T=fa.geometry;Y=fa.attributes;let U;T&&(U=A(new C,
T,W));D.push(new n.default(U,Y,null,Y[ia]))}return D}function A(D,T,W=u(T.hasZ,T.hasM)){D.lengths[0]=T.points.length;const Y=D.coords;let ia=0;for(const fa of T.points)for(T=0;T<W;T++)Y[ia++]=fa[T];return D}function S(D,T,W){if(!D)return null;const Y=u(T,W),{coords:ia,lengths:fa}=D;D=[];let U=0;for(const V of fa){const da=[];for(let oa=0;oa<V;oa++){const pa=[];for(let ua=0;ua<Y;ua++)pa.push(ia[U++]);da.push(pa)}D.push(da)}return T?W?{paths:D,hasZ:T,hasM:W}:{paths:D,hasZ:T}:W?{paths:D,hasM:W}:{paths:D}}
function P(D,T,W,Y,ia){W=u(W,Y);for(const fa of T){T=fa.geometry;Y=fa.attributes;let U;T&&(U=I(new C,T,W));D.push(new n.default(U,Y,null,Y[ia]))}return D}function I(D,T,W=u(T.hasZ,T.hasM)){const {lengths:Y,coords:ia}=D;let fa=0;for(const U of T.paths){for(const V of U)for(T=0;T<W;T++)ia[fa++]=V[T];Y.push(U.length)}return D}function q(D,T,W){if(!D)return null;const Y=u(T,W),{coords:ia,lengths:fa}=D;D=[];let U=0;for(const V of fa){const da=[];for(let oa=0;oa<V;oa++){const pa=[];for(let ua=0;ua<Y;ua++)pa.push(ia[U++]);
da.push(pa)}D.push(da)}return T?W?{rings:D,hasZ:T,hasM:W}:{rings:D,hasZ:T}:W?{rings:D,hasM:W}:{rings:D}}function w(D,T,W,Y,ia){for(const fa of T){T=fa.geometry;const U=fa.centroid,V=fa.attributes;let da;T&&(da=N(new C,T,W,Y));M.isSome(U)?D.push(new n.default(da,V,b(new C,U),V[ia])):D.push(new n.default(da,V,null,V[ia]))}return D}function N(D,T,W=T.hasZ,Y=T.hasM){X(D,T.rings,W,Y);return D}function X(D,T,W,Y){W=u(W,Y);const {lengths:ia,coords:fa}=D;Y=0;ia.length=fa.length=0;for(const U of T){for(const V of U)for(T=
0;T<W;T++)fa[Y++]=V[T];ia.push(U.length)}return D}function ca(D,T,W,Y,ia,fa){D.length=0;if(!W){for(const U of T)D.push(new n.default(null,U.attributes,null,U.attributes[fa]));return D}switch(W){case "esriGeometryPoint":return Q(D,T,Y,ia,fa);case "esriGeometryMultipoint":return m(D,T,Y,ia,fa);case "esriGeometryPolyline":return P(D,T,Y,ia,fa);case "esriGeometryPolygon":return w(D,T,Y,ia,fa);default:Ja.error("convertToFeatureSet:unknown-geometry",new a(`Unable to parse unknown geometry type '${W}'`)),
D.length=0}return D}function ja(D,T,W,Y){D=D&&("coords"in D?D:D.geometry);if(M.isNone(D))return null;switch(T){case "esriGeometryPoint":return T=H,W&&Y?T=E:W?T=g:Y&&(T=B),T(D);case "esriGeometryMultipoint":return k(D,W,Y);case "esriGeometryPolyline":return S(D,W,Y);case "esriGeometryPolygon":return q(D,W,Y);default:Ja.error("convertToGeometry:unknown-geometry",new a(`Unable to parse unknown geometry type '${T}'`))}}function na(D,T,W,Y,ia){D.length=0;if(M.isNone(W)){for(const V of T)D.push({attributes:V.attributes});
return D}switch(W){case "esriGeometryPoint":var fa=H;Y&&ia?fa=E:Y?fa=g:ia&&(fa=B);for(var U of T){const {geometry:V,attributes:da}=U;Y=M.isSome(V)?fa(V):null;D.push({attributes:da,geometry:Y})}break;case "esriGeometryMultipoint":return f(D,T,Y,ia);case "esriGeometryPolyline":for(const V of T){const {geometry:da,attributes:oa}=V;let pa;M.isSome(da)&&(pa=S(da,Y,ia));D.push({attributes:oa,geometry:pa})}break;case "esriGeometryPolygon":for(fa of T){const {geometry:V,attributes:da,centroid:oa}=fa;let pa;
M.isSome(V)&&(pa=q(V,Y,ia));oa?(U=H(oa),D.push({attributes:da,centroid:U,geometry:pa})):D.push({attributes:da,geometry:pa})}break;default:Ja.error("convertToFeatureSet:unknown-geometry",new a(`Unable to parse unknown geometry type '${W}'`))}return D}function ta(D,T,W,Y,ia,fa,U=W,V=Y){D.lengths.length&&(D.lengths.length=0);D.coords.length&&(D.coords.length=0);if(M.isNone(T)||!T.coords.length)return null;ia=Ba[ia];const {coords:da,lengths:oa}=T;T=u(W,Y);const pa=u(W&&U,Y&&V);W=t(W,Y,U,V);if(!oa.length)return W(D.coords,
da,0,0,z(fa,da[0]),L(fa,da[1])),D.lengths.length&&(D.lengths.length=0),D.coords.length=T,D;let ua,wa=0,za,Ga=0;for(const Ca of oa){if(Ca<ia)continue;let Da=0;za=Ga;V=Y=z(fa,da[wa]);ua=U=L(fa,da[wa+1]);W(D.coords,da,za,wa,V,ua);Da++;wa+=T;za+=pa;for(let Ea=1;Ea<Ca;Ea++,wa+=T)if(V=z(fa,da[wa]),ua=L(fa,da[wa+1]),V!==Y||ua!==U)W(D.coords,da,za,wa,V-Y,ua-U),za+=pa,Da++,Y=V,U=ua;Da>=ia&&(D.lengths.push(Da),Ga=za)}D.coords.length=Ga;return D.coords.length?D:null}function ma(D,T,W,Y,ia,fa,U){let V=Y,da=0;
for(let pa=fa+W;pa<U;pa+=W){{var oa=T[pa];const ua=T[pa+1],wa=T[U],za=T[U+1];let Ga=T[fa],Ca=T[fa+1],Da=wa-Ga,Ea=za-Ca;if(0!==Da||0!==Ea){const Fa=((oa-Ga)*Da+(ua-Ca)*Ea)/(Da*Da+Ea*Ea);1<Fa?(Ga=wa,Ca=za):0<Fa&&(Ga+=Da*Fa,Ca+=Ea*Fa)}Da=oa-Ga;Ea=ua-Ca;oa=Da*Da+Ea*Ea}oa>V&&(da=pa,V=oa)}V>Y&&(da-fa>W&&ma(D,T,W,Y,ia,fa,da),ia(D,T,D.length,da,T[da],T[da+1]),U-da>W&&ma(D,T,W,Y,ia,da,U))}function la(D,T,W,Y,ia){const {coords:fa,lengths:U}=T,V=W?Y?e:Oa:Y?Oa:Sa;W=u(W,Y);if(!fa.length)return D!==T&&(D.lengths.length=
0,D.coords.length=0),D;if(!U.length)return V(D.coords,fa,0,0,x(ia,fa[0]),h(ia,fa[1])),D!==T&&(D.lengths.length=0,D.coords.length=W),D;const [da,oa]=ia.scale;Y=0;for(let pa=0;pa<U.length;pa++){const ua=U[pa];D.lengths[pa]=ua;let wa=x(ia,fa[Y]),za=h(ia,fa[Y+1]);V(D.coords,fa,Y,Y,wa,za);Y+=W;for(let Ga=1;Ga<ua;Ga++,Y+=W)wa+=fa[Y]*da,za-=fa[Y+1]*oa,V(D.coords,fa,Y,Y,wa,za)}D!==T&&(D.lengths.length=U.length,D.coords.length=fa.length);return D}function va(D,T,W,Y){let ia=0,fa=D[Y*T],U=D[Y*(T+1)];for(let V=
1;V<W;V++){const da=fa+D[Y*(T+V)],oa=U+D[Y*(T+V)+1],pa=(da-fa)*(oa+U);fa=da;U=oa;ia+=pa}return.5*ia}const Ja=F.getLogger("esri.tasks.support.optimizedFeatureSet"),Ba={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Sa=(D,T,W,Y,ia,fa)=>{D[W]=ia;D[W+1]=fa},Oa=(D,T,W,Y,ia,fa)=>{D[W]=ia;D[W+1]=fa;D[W+2]=T[Y+2]},Ia=(D,T,W,Y,ia,fa)=>{D[W]=ia;D[W+1]=fa;D[W+2]=T[Y+3]},e=(D,T,W,Y,ia,fa)=>{D[W]=ia;D[W+1]=fa;D[W+2]=T[Y+2];D[W+3]=T[Y+3]},G=[],ea=[];c.convertFromFeature=
function(D,T,W,Y,ia){G[0]=D;[D]=ca(ea,G,T,W,Y,ia);G.length=ea.length=0;return D};c.convertFromFeatureSet=function(D,T){const W=new y,{hasM:Y,hasZ:ia,features:fa,objectIdFieldName:U,spatialReference:V,geometryType:da,exceededTransferLimit:oa,transform:pa,fields:ua}=D;ua&&(W.fields=ua);W.geometryType=da;W.objectIdFieldName=U||T;W.spatialReference=V;if(!W.objectIdFieldName)return Ja.error(new a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),W;fa&&ca(W.features,fa,da,
ia,Y,W.objectIdFieldName);oa&&(W.exceededTransferLimit=oa);Y&&(W.hasM=Y);ia&&(W.hasZ=ia);pa&&(W.transform=pa);return W};c.convertFromFeatures=ca;c.convertFromGeometry=function(D,T,W){if(M.isNone(D))return null;const Y=new C;"hasZ"in D&&null==T&&(T=D.hasZ);"hasM"in D&&null==W&&(W=D.hasM);if(p.isPoint(D))return O(null!=T?T:null!=D.z,null!=W?W:null!=D.m)(Y,D);if(p.isPolygon(D))return N(Y,D,T,W);if(p.isPolyline(D))return I(Y,D,u(T,W));if(p.isMultipoint(D))return A(Y,D,u(T,W));Ja.error("convertFromGeometry:unknown-geometry",
new a(`Unable to parse unknown geometry type '${D}'`))};c.convertFromGraphics=function(D,T,W,Y,ia,fa){const U=D.length;switch(W){case "esriGeometryPoint":Q(D,T,Y,ia,fa);break;case "esriGeometryMultipoint":m(D,T,Y,ia,fa);break;case "esriGeometryPolyline":P(D,T,Y,ia,fa);break;case "esriGeometryPolygon":w(D,T,Y,ia,fa);break;default:Ja.error("convertToFeatureSet:unknown-geometry",new a(`Unable to parse unknown geometry type '${W}'`))}for(Y=0;Y<T.length;Y++)D[Y+U].geometryType=W,D[Y+U].insertAfter=T[Y].insertAfter,
D[Y+U].groupId=T[Y].groupId;return D};c.convertFromMultipoint=A;c.convertFromMultipointFeatures=m;c.convertFromNestedArray=X;c.convertFromPoint=function(D,T,W=O(null!=T.z,null!=T.m)){return W(D,T)};c.convertFromPointFeatures=Q;c.convertFromPolygon=N;c.convertFromPolyline=I;c.convertFromPolylineFeatures=P;c.convertToFeature=function(D,T,W,Y){ea[0]=D;na(G,ea,T,W,Y);D=G[0];G.length=ea.length=0;return D};c.convertToFeatureSet=function(D){const {objectIdFieldName:T,spatialReference:W,transform:Y,fields:ia,
hasM:fa,hasZ:U,features:V,geometryType:da,exceededTransferLimit:oa,uniqueIdField:pa,queryGeometry:ua,queryGeometryType:wa}=D;D=na([],V,da,U,fa);const za=ja(ua,wa,!1,!1);D={features:D,fields:ia,geometryType:da,objectIdFieldName:T,spatialReference:W,uniqueIdField:pa,queryGeometry:za};Y&&(D.transform=Y);oa&&(D.exceededTransferLimit=oa);fa&&(D.hasM=fa);U&&(D.hasZ=U);return D};c.convertToFeatures=na;c.convertToGeometry=ja;c.convertToMultipoint=k;c.convertToMultipointFeatures=f;c.convertToPoint=function(D,
T,W){return D?T?W?E(D):g(D):W?B(D):H(D):null};c.convertToPolygon=q;c.convertToPolyline=S;c.deltaDecodeGeometry=function(D,T){if(M.isNone(D))return null;const W=D.clone(),Y=D.coords;D=D.lengths;let ia=0;for(let V=0;V<D.length;V++){const da=D[V];var fa=Y[T*ia],U=Y[T*ia+1];for(let oa=1;oa<da;oa++)fa+=Y[T*(ia+oa)],U+=Y[T*(ia+oa)+1],W.coords[T*(ia+oa)]=fa,W.coords[T*(ia+oa)+1]=U;ia+=da}return W};c.deltaEncodeGeometry=function(D,T){const W=D.clone(),Y=D.coords;D=D.lengths;let ia=0;for(let U=0;U<D.length;U++){const V=
D[U];let da=Y[T*ia];var fa=Y[T*ia+1];for(let oa=1;oa<V;oa++){const pa=Y[T*(ia+oa)],ua=Y[T*(ia+oa)+1];fa=ua-fa;W.coords[T*(ia+oa)]=pa-da;W.coords[T*(ia+oa)+1]=fa;da=pa;fa=ua}ia+=V}return W};c.generalizeOptimizedGeometry=function(D,T,W,Y,ia,fa,U=W,V=Y){D.lengths.length&&(D.lengths.length=0);D.coords.length&&(D.coords.length=0);if(!T||!T.coords.length)return null;ia=Ba[ia];const {coords:da,lengths:oa}=T;T=u(W,Y);const pa=u(W&&U,Y&&V);W=t(W,Y,U,V);if(!oa.length)return W(D.coords,da,0,0,da[0],da[1]),D.lengths.length&&
(D.lengths.length=0),D.coords.length=T,D;Y=0;fa*=fa;for(const ua of oa){if(ua<ia){Y+=ua*T;continue}U=D.coords.length/pa;V=Y;const wa=Y+(ua-1)*T;W(D.coords,da,D.coords.length,V,da[V],da[V+1]);ma(D.coords,da,T,fa,W,V,wa);W(D.coords,da,D.coords.length,wa,da[wa],da[wa+1]);V=D.coords.length/pa-U;V>=ia?D.lengths.push(V):D.coords.length=U*pa;Y+=ua*T}return D.coords.length?D:null};c.getBoundsOptimizedGeometry=function(D,T,W,Y){if(M.isNone(T)||!T.coords||!T.coords.length)return null;W=u(W,Y);let ia=Y=Number.POSITIVE_INFINITY,
fa=Number.NEGATIVE_INFINITY,U=Number.NEGATIVE_INFINITY;if(T&&T.coords){T=T.coords;for(let V=0;V<T.length;V+=W){const da=T[V],oa=T[V+1];Y=Math.min(Y,da);fa=Math.max(fa,da);ia=Math.min(ia,oa);U=Math.max(U,oa)}}D[0]=Y;D[1]=ia;D[2]=fa;D[3]=U;return D};c.getQuantizedArea=function(D,T){const {coords:W,lengths:Y}=D;let ia=D=0;for(let fa=0;fa<Y.length;fa++)ia+=va(W,D,Y[fa],T),D+=fa;return Math.abs(ia)};c.getQuantizedBoundsOptimizedGeometry=function(D,T,W,Y){W=u(W,Y);const {lengths:ia,coords:fa}=T;Y=T=Number.POSITIVE_INFINITY;
let U=Number.NEGATIVE_INFINITY,V=Number.NEGATIVE_INFINITY,da=0;for(const oa of ia){let pa=fa[da],ua=fa[da+1];T=Math.min(pa,T);Y=Math.min(ua,Y);U=Math.max(pa,U);V=Math.max(ua,V);da+=W;for(let wa=1;wa<oa;wa++,da+=W){const za=fa[da],Ga=fa[da+1];pa+=za;ua+=Ga;0>za&&(T=Math.min(T,pa));0<za&&(U=Math.max(U,pa));0>Ga?Y=Math.min(Y,ua):0<Ga&&(V=Math.max(V,ua))}}D[0]=T;D[1]=Y;D[2]=U;D[3]=V;return D};c.getSignedQuantizedRingArea=va;c.quantizeOptimizedFeatureSet=function(D,T){const {geometryType:W,features:Y,
hasM:ia,hasZ:fa}=T;if(!D)return T;for(let U=0;U<Y.length;U++){const V=Y[U],da=V.weakClone();da.geometry=new C;ta(da.geometry,V.geometry,ia,fa,W,D);V.centroid&&(da.centroid=new C,ta(da.centroid,V.centroid,ia,fa,"esriGeometryPoint",D));Y[U]=da}T.transform=D;return T};c.quantizeOptimizedGeometry=ta;c.quantizeX=z;c.quantizeY=L;c.removeCollinearVectices=function(D,T,W,Y,ia){if(!T||!T.coords||!T.coords.length)return null;W=Ba[W];const {coords:fa,lengths:U}=T;T=t(Y,ia,Y,ia);Y=u(Y,ia);let V=ia=0,da=0,oa=
0;for(const wa of U){V=oa;T(D.coords,fa,V,ia,fa[ia],fa[ia+1]);ia+=Y;var pa=fa[ia];let za=fa[ia+1],Ga=pa,Ca=za;var ua=za/pa;V+=Y;T(D.coords,fa,V,ia,Ga,Ca);ia+=Y;for(let Da=2;Da<wa;Da++){pa=fa[ia];za=fa[ia+1];const Ea=za/pa,Fa=ua===Ea||!isFinite(ua)&&!isFinite(Ea);ua=Fa&&isFinite(Ea)?0<=ua&&0<=Ea||0>=ua&&0>=Ea:0<=Ca&&0<=za||0>=Ca&&0>=za;Fa&&ua?(Ga+=pa,Ca+=za):(Ga=pa,Ca=za,V+=Y);T(D.coords,fa,V,ia,Ga,Ca);ia+=Y;ua=Ea}V+=Y;pa=(V-oa)/Y;pa>=W&&(D.lengths[da]=pa,oa=V,da++)}D.coords.length>oa&&(D.coords.length=
oa);D.lengths.length>da&&(D.lengths.length=da);return D.coords.length&&D.lengths.length?D:null};c.removeZMValues=function(D,T,W,Y,ia,fa){const U=u(W,Y);W=t(W,Y,ia,fa);Y=T.coords;D.coords.length=0;D.lengths.length=0;D.lengths.push(...T.lengths);for(T=0;T<Y.length;T+=U)W(D.coords,Y,D.coords.length,T,Y[T],Y[T+1]);return D};c.unquantizeOptimizedFeatureSet=function(D){const {transform:T,features:W,hasM:Y,hasZ:ia}=D;if(!T)return D;for(const fa of W)M.isSome(fa.geometry)&&la(fa.geometry,fa.geometry,Y,ia,
T),fa.centroid&&la(fa.centroid,fa.centroid,Y,ia,T);D.transform=null;return D};c.unquantizeOptimizedGeometry=la;c.unquantizeX=x;c.unquantizeY=h;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(c,a,F){let M=function(){function n(y=null,C={},u,t){this.geometry=y;this.attributes=C;this.centroid=u;this.objectId=t;this.geohashY=this.geohashX=this.displayId=0}n.prototype.weakClone=
function(){const y=new n(this.geometry,this.attributes,this.centroid,this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y};return n}(),p=function(n){function y(){return n.apply(this,arguments)||this}a._inheritsLoose(y,n);return y}(M);c.OptimizedFeatureWithGeometry=p;c.default=M;c.hasGeometry=function(n){return!(F.isNone(n.geometry)||!n.geometry.coords||!n.geometry.coords.length)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function c(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}c.prototype.weakClone=function(){const a=new c;a.objectIdFieldName=this.objectIdFieldName;a.globalIdFieldName=this.globalIdFieldName;a.geohashFieldName=this.geohashFieldName;a.geometryProperties=this.geometryProperties;
a.geometryType=this.geometryType;a.spatialReference=this.spatialReference;a.hasZ=this.hasZ;a.hasM=this.hasM;a.features=this.features;a.fields=this.fields;a.transform=this.transform;a.exceededTransferLimit=this.exceededTransferLimit;a.uniqueIdField=this.uniqueIdField;a.queryGeometry=this.queryGeometry;a.queryGeometryType=this.queryGeometryType;return a};return c}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(c){return function(){function a(M=
[],p=[],n=!1){this.lengths=null!=M?M:[];this.coords=null!=p?p:[];this.hasIndeterminateRingOrder=n}var F=a.prototype;F.forEachVertex=function(M){let p=0;this.lengths.length||M(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const y=this.lengths[n];for(let C=0;C<y;C++)M(this.coords[2*(C+p)],this.coords[2*(C+p)+1]);p+=y}};F.clone=function(M){return M?(M.set(this.coords),new a(this.lengths.slice(),M,this.hasIndeterminateRingOrder)):new a(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};c._createClass(a,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((M,p)=>M+p)}}]);return a}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(c,a,F){function M(y,C,u){p.minX=C[0];p.minY=C[1];p.maxX=C[2];p.maxY=C[3];y.search(p,u)}const p={minX:0,
minY:0,maxX:0,maxY:0};let n=function(){function y(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new F.PooledRBush(9,a("esri-csp-restrictions")?u=>({minX:u[0],minY:u[1],maxX:u[2],maxY:u[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const u=Array(this._idByBounds.size);let t=0;this._idByBounds.forEach((z,L)=>{u[t++]=L});this._indexInvalid=!1;this._index.clear();this._index.load(u)}else this._boundsToLoad.length&&
(this._index.load(this._boundsToLoad.filter(u=>this._idByBounds.has(u))),this._boundsToLoad.length=0)}}var C=y.prototype;C.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};C.delete=function(u){const t=this._boundsById.get(u);this._boundsById.delete(u);t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))};C.forEachInBounds=function(u,t){this._loadIndex();M(this._index,u,z=>t(this._idByBounds.get(z)))};
C.get=function(u){return this._boundsById.get(u)};C.has=function(u){return this._boundsById.has(u)};C.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};C.set=function(u,t){if(!this._indexInvalid){const z=this._boundsById.get(u);z&&(this._index.remove(z),this._idByBounds.delete(z))}this._boundsById.set(u,t);t&&(this._idByBounds.set(t,u),this._indexInvalid||(this._boundsToLoad.push(t),5E4<this._boundsToLoad.length&&this._loadIndex()))};return y}();c.BoundsStore=
n;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(c,a,F,M,p,n){function y(f,k){C(f,0,f.children.length,k,f)}function C(f,k,m,A,S){S||(S=new O([]));S.minX=Infinity;S.minY=Infinity;S.maxX=-Infinity;S.maxY=-Infinity;for(let P=k,I;P<m;P++)I=f.children[P],u(S,f.leaf?A(I):I);return S}function u(f,k){f.minX=
Math.min(f.minX,k.minX);f.minY=Math.min(f.minY,k.minY);f.maxX=Math.max(f.maxX,k.maxX);f.maxY=Math.max(f.maxY,k.maxY)}function t(f,k){return f.minX-k.minX}function z(f,k){return f.minY-k.minY}function L(f){return(f.maxX-f.minX)*(f.maxY-f.minY)}function x(f){return f.maxX-f.minX+(f.maxY-f.minY)}function h(f,k){return f.minX<=k.minX&&f.minY<=k.minY&&k.maxX<=f.maxX&&k.maxY<=f.maxY}function H(f,k){return k.minX<=f.maxX&&k.minY<=f.maxY&&k.maxX>=f.minX&&k.maxY>=f.minY}function b(f,k,m,A,S){for(k=[k,m];k.length;){m=
M.assumeNonNull(k.pop());const P=M.assumeNonNull(k.pop());if(m-P<=A)continue;const I=P+Math.ceil((m-P)/A/2)*A;n.quickselect(f,I,P,m,S);k.push(P,I,I,m)}}let g=function(){function f(m=9,A){this.compareMinX=t;this.compareMinY=z;this.toBBox=function(S){return S};this._maxEntries=Math.max(4,m||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));A&&("function"===typeof A?this.toBBox=A:this._initFormat(A));this.clear()}var k=f.prototype;k.destroy=function(){this.clear();r.prune();B.prune();l.prune();
E.prune()};k.all=function(m){this._all(this.data,m)};k.search=function(m,A){let S=this.data;const P=this.toBBox;if(H(m,S))for(r.clear();S;){for(let I=0,q=S.children.length;I<q;I++){const w=S.children[I],N=S.leaf?P(w):w;H(m,N)&&(S.leaf?A(w):h(m,N)?this._all(w,A):r.push(w))}S=r.pop()}};k.collides=function(m){let A=this.data;const S=this.toBBox;if(!H(m,A))return!1;for(r.clear();A;){for(let P=0,I=A.children.length;P<I;P++){const q=A.children[P],w=A.leaf?S(q):q;if(H(m,w)){if(A.leaf||h(m,w))return!0;r.push(q)}}A=
r.pop()}return!1};k.load=function(m){if(!m.length)return this;if(m.length<this._minEntries){for(let A=0,S=m.length;A<S;A++)this.insert(m[A]);return this}m=this._build(m.slice(0,m.length),0,m.length-1,0);if(this.data.children.length)if(this.data.height===m.height)this._splitRoot(this.data,m);else{if(this.data.height<m.height){const A=this.data;this.data=m;m=A}this._insert(m,this.data.height-m.height-1,!0)}else this.data=m;return this};k.insert=function(m){m&&this._insert(m,this.data.height-1);return this};
k.clear=function(){this.data=new O([]);return this};k.remove=function(m){if(!m)return this;let A=this.data,S=null,P=0,I=!1,q;const w=this.toBBox(m);l.clear();for(E.clear();A||0<l.length;){if(!A){var N;A=M.assumeNonNull(l.pop());S=l.data[l.length-1];P=null!=(N=E.pop())?N:0;I=!0}if(A.leaf&&(q=F.indexOf(A.children,m,A.children.length,A.indexHint),-1!==q)){A.children.splice(q,1);l.push(A);this._condense(l);break}I||A.leaf||!h(A,w)?S?(P++,A=S.children[P],I=!1):A=null:(l.push(A),E.push(P),P=0,S=A,A=A.children[0])}return this};
k.toJSON=function(){return this.data};k.fromJSON=function(m){this.data=m;return this};k._all=function(m,A){for(B.clear();m;){var S;if(!0===m.leaf)for(const P of m.children)A(P);else B.pushArray(m.children);m=null!=(S=B.pop())?S:null}};k._build=function(m,A,S,P){var I=S-A+1,q=this._maxEntries;if(I<=q)return m=new O(m.slice(A,S+1)),y(m,this.toBBox),m;P||(P=Math.ceil(Math.log(I)/Math.log(q)),q=Math.ceil(I/q**(P-1)));const w=new Q([]);w.height=P;I=Math.ceil(I/q);q=I*Math.ceil(Math.sqrt(q));for(b(m,A,
S,q,this.compareMinX);A<=S;A+=q){const N=Math.min(A+q-1,S);b(m,A,N,I,this.compareMinY);for(let X=A;X<=N;X+=I)w.children.push(this._build(m,X,Math.min(X+I-1,N),P-1))}y(w,this.toBBox);return w};k._chooseSubtree=function(m,A,S,P){for(;;){P.push(A);if(!0===A.leaf||P.length-1===S)break;let I=Infinity,q=Infinity,w=void 0;for(let N=0,X=A.children.length;N<X;N++){const ca=A.children[N],ja=L(ca),na=(Math.max(ca.maxX,m.maxX)-Math.min(ca.minX,m.minX))*(Math.max(ca.maxY,m.maxY)-Math.min(ca.minY,m.minY))-ja;na<
q?(q=na,I=ja<I?ja:I,w=ca):na===q&&ja<I&&(I=ja,w=ca)}A=w||A.children[0]}return A};k._insert=function(m,A,S){var P=this.toBBox;S=S?m:P(m);l.clear();P=this._chooseSubtree(S,this.data,A,l);P.children.push(m);for(u(P,S);0<=A;)if(l.data[A].children.length>this._maxEntries)this._split(l,A),A--;else break;this._adjustParentBBoxes(S,l,A)};k._split=function(m,A){const S=m.data[A];var P=S.children.length;const I=this._minEntries;this._chooseSplitAxis(S,I,P);(P=this._chooseSplitIndex(S,I,P))?(P=S.children.splice(P,
S.children.length-P),P=S.leaf?new O(P):new Q(P),P.height=S.height,y(S,this.toBBox),y(P,this.toBBox),A?m.data[A-1].children.push(P):this._splitRoot(S,P)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};k._splitRoot=function(m,A){this.data=new Q([m,A]);this.data.height=m.height+1;y(this.data,this.toBBox)};k._chooseSplitIndex=function(m,A,S){let P,I,q=void 0;P=I=Infinity;for(let N=A;N<=S-A;N++){var w=C(m,0,N,this.toBBox);const X=C(m,N,S,this.toBBox),ca=Math.max(0,
Math.min(w.maxX,X.maxX)-Math.max(w.minX,X.minX))*Math.max(0,Math.min(w.maxY,X.maxY)-Math.max(w.minY,X.minY));w=L(w)+L(X);ca<P?(P=ca,q=N,I=w<I?w:I):ca===P&&w<I&&(I=w,q=N)}return q};k._chooseSplitAxis=function(m,A,S){const P=m.leaf?this.compareMinX:t,I=m.leaf?this.compareMinY:z,q=this._allDistMargin(m,A,S,P);A=this._allDistMargin(m,A,S,I);q<A&&m.children.sort(P)};k._allDistMargin=function(m,A,S,P){m.children.sort(P);P=this.toBBox;var I=C(m,0,A,P);const q=C(m,S-A,S,P);let w=x(I)+x(q);for(let N=A;N<S-
A;N++){const X=m.children[N];u(I,m.leaf?P(X):X);w+=x(I)}for(S=S-A-1;S>=A;S--)I=m.children[S],u(q,m.leaf?P(I):I),w+=x(q);return w};k._adjustParentBBoxes=function(m,A,S){for(;0<=S;S--)u(A.data[S],m)};k._condense=function(m){for(let A=m.length-1;0<=A;A--){const S=m.data[A];if(0===S.children.length)if(0<A){const P=m.data[A-1],I=P.children;I.splice(F.indexOf(I,S,I.length,P.indexHint),1)}else this.clear();else y(S,this.toBBox)}};k._initFormat=function(m){const A=["return a"," - b",";"];this.compareMinX=
new Function("a","b",A.join(m[0]));this.compareMinY=new Function("a","b",A.join(m[1]));this.toBBox=new Function("a","return {minX: a"+m[0]+", minY: a"+m[1]+", maxX: a"+m[2]+", maxY: a"+m[3]+"};")};return f}();const r=new p,B=new p,l=new p,E=new p({deallocator:void 0});p=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let J=function(f){function k(){var m=f.apply(this,arguments)||this;m.height=1;m.indexHint=new F.PositionHint;return m}a._inheritsLoose(k,f);return k}(p),O=function(f){function k(m){var A=
f.call(this)||this;A.children=m;A.leaf=!0;return A}a._inheritsLoose(k,f);return k}(J),Q=function(f){function k(m){var A=f.call(this)||this;A.children=m;A.leaf=!1;return A}a._inheritsLoose(k,f);return k}(J);c.BBox=p;c.PooledRBush=g;c.default=g;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(c){var a={exports:{}};(function(F){(function(M){M=M();void 0!==M&&(F.exports=M)})(function(){function M(y,C,u,t,z){for(;t>u;){if(600<t-u){var L=
t-u+1,x=C-u+1,h=Math.log(L),H=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*H*(L-H)/L)*(0>x-L/2?-1:1);M(y,C,Math.max(u,Math.floor(C-x*H/L+h)),Math.min(t,Math.floor(C+(L-x)*H/L+h)),z)}L=y[C];x=u;H=t;p(y,u,C);for(0<z(y[t],L)&&p(y,u,t);x<H;){p(y,x,H);x++;for(H--;0>z(y[x],L);)x++;for(;0<z(y[H],L);)H--}0===z(y[u],L)?p(y,u,H):(H++,p(y,H,t));H<=C&&(u=H+1);C<=H&&(t=H-1)}}function p(y,C,u){var t=y[C];y[C]=y[u];y[u]=t}function n(y,C){return y<C?-1:y>C?1:0}return function(y,C,u,t,z){M(y,C,u||0,t||y.length-1,z||n)}})})(a);
c.quickselect=a.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(c,a,F,M){const p={getObjectId(n){return n.objectId},getAttributes(n){return n.attributes},getAttribute(n,y){return n.attributes[y]},cloneWithGeometry(n,y){return new F.default(y,n.attributes,null,n.objectId)},getGeometry(n){return n.geometry},getCentroid(n,y){n.centroid||(n.centroid=a.getCentroidOptimizedGeometry(new M,
n.geometry,y.hasZ,y.hasM));return n.centroid}};c.default=p;c.optimizedFeatureQueryEngineAdapter=p;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(c,a){function F(p,n,y,C,u,t,z=1){t=u?t?4:3:t?3:2;let L=y,x=y+t,h=0,H=0,b=y=0,g=0;for(let r=0,B=C-1;r<B;r++,L+=t,x+=t){C=n[L];const l=n[L+1],E=n[L+2],J=n[x],O=n[x+1],Q=n[x+2];let f=C*O-J*l;b+=f;h+=(C+J)*f;H+=(l+O)*f;u&&(f=C*Q-J*E,y+=(E+Q)*f,g+=f);C<p[0]&&(p[0]=C);
C>p[1]&&(p[1]=C);l<p[2]&&(p[2]=l);l>p[3]&&(p[3]=l);u&&(E<p[4]&&(p[4]=E),E>p[5]&&(p[5]=E))}0<b*z&&(b*=-1);0<g*z&&(g*=-1);if(!b)return null;p=[h,H,.5*b];u&&(p[3]=y,p[4]=.5*g);return p}function M(p,n,y,C,u){u=C?u?4:3:u?3:2;let t=n,z=n+u,L=0,x=0,h=0,H=0;for(let B=0,l=y-1;B<l;B++,t+=u,z+=u){var b=p[t];const E=p[t+1],J=p[t+2],O=p[z],Q=p[z+1],f=p[z+2];if(C){{var g=O-b;var r=Q-E;const k=f-J;g=Math.sqrt(g*g+r*r+k*k)}}else g=O-b,r=Q-E,g=Math.sqrt(g*g+r*r);g&&(L+=g,C?(b=[b+.5*(O-b),E+.5*(Q-E),J+.5*(f-J)],x+=
g*b[0],h+=g*b[1],H+=g*b[2]):(b=[b+.5*(O-b),E+.5*(Q-E)],x+=g*b[0],h+=g*b[1]))}return 0<L?C?[x/L,h/L,H/L]:[x/L,h/L]:0<y?C?[p[n],p[n+1],p[n+2]]:[p[n],p[n+1]]:null}c.getCentroidOptimizedGeometry=function(p,n,y,C,u){if(a.isNone(n)||!n.lengths.length)return null;const t="upperLeft"===(null==u?void 0:u.originPosition)?-1:1;p.lengths.length&&(p.lengths.length=0);p.coords.length&&(p.coords.length=0);u=p.coords;const z=[],L=y?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:x,coords:h}=n,H=y?C?4:3:C?3:2;let b=0;for(var g of x){const r=F(L,h,b,g,y,C,t);r&&z.push(r);b+=g*H}z.sort((r,B)=>{let l=t*r[2]-t*B[2];0===l&&y&&(l=r[4]-B[4]);return l});z.length&&(g=6*z[0][2],u[0]=z[0][0]/g,u[1]=z[0][1]/g,y&&(g=6*z[0][4],u[2]=0!==g?z[0][3]/g:0),u[0]<L[0]||u[0]>L[1]||u[1]<L[2]||u[1]>L[3]||y&&(u[2]<L[4]||u[2]>L[5]))&&(u.length=
0);if(!u.length)if(n=n.lengths[0]?M(h,0,x[0],y,C):null)u[0]=n[0],u[1]=n[1],y&&2<n.length&&(u[2]=n[2]);else return null;return p};c.lineCentroid=M;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h,H,b,g,r,B,l,E,J,O){function Q(I){return I.every(q=>"exceedslimit"!==q.statisticType)}const f=new Set,k=new n.MemCacheStorage(2E6);let m=0,A=function(){function I(w){this.capabilities={query:b.queryCapabilities};this.geometryType=w.geometryType;this.hasM=w.hasM;this.hasZ=w.hasZ;this.objectIdField=w.objectIdField;this.spatialReference=w.spatialReference;this.definitionExpression=w.definitionExpression;this.featureStore=w.featureStore;this.aggregateAdapter=w.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=w.timeInfo;w.cacheSpatialQueries&&(this._geometryQueryCache=new n.MemCache(m++ +"$$",k));this.fieldsIndex=new E(w.fields);w.scheduler&&w.priority&&(this._frameTask=w.scheduler.registerTask(w.priority))}var q=I.prototype;q.destroy=function(){this._frameTask=p.removeMaybe(this._frameTask);this.clearCache();p.destroyMaybe(this._geometryQueryCache);this._changeHandle=p.removeMaybe(this._changeHandle);p.destroyMaybe(this.fieldsIndex)};
q.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};q.executeQuery=function(){var w=a._asyncToGenerator(function*(N={},X){let ca=M.clone(N),ja;try{ca=yield this._schedule(()=>l.normalizeQuery(ca,this.definitionExpression,this.spatialReference),X),ca=yield this._reschedule(()=>this._checkQuerySupport(ca),X),ja=yield this._reschedule(()=>this._executeGeometryQuery(ca,X),X),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),
X),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),X),ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),X),ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),X)}catch(na){if(na!==l.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new g([],null,this)}return ja.createQueryResponse(ca)});return function(){return w.apply(this,arguments)}}();q.executeQueryForCount=function(){var w=a._asyncToGenerator(function*(N={},X){let ca=M.clone(N);ca.returnGeometry=!1;ca.returnCentroid=!1;ca.outSR=null;
try{ca=yield this._schedule(()=>l.normalizeQuery(ca,this.definitionExpression,this.spatialReference),X);ca=yield this._reschedule(()=>this._checkQuerySupport(ca),X);let ja=yield this._reschedule(()=>this._executeGeometryQuery(ca,X),X);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),X);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),X);ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),X);ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),X);return ja.createQueryResponseForCount(ca)}catch(ja){if(ja!==
l.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}});return function(){return w.apply(this,arguments)}}();q.executeQueryForExtent=function(){var w=a._asyncToGenerator(function*(N={},X){let ca=M.clone(N),ja;N=ca.outSR;try{ca=yield this._schedule(()=>l.normalizeQuery(ca,this.definitionExpression,this.spatialReference),X);ca=yield this._reschedule(()=>this._checkQuerySupport(ca),X);ca.returnGeometry=!0;ca.returnCentroid=!1;ca.outSR=null;ja=yield this._reschedule(()=>this._executeGeometryQuery(ca,X),X);ja=
yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),X);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),X);ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),X);ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),X);const na=ja.size;if(!na)return{count:na,extent:null};C.set(P,C.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ja.items,la=>C.expandWithAABB(P,la),S);const ta={xmin:P[0],ymin:P[1],xmax:P[3],ymax:P[4],spatialReference:l.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(P[2])&&isFinite(P[5])&&(ta.zmin=P[2],ta.zmax=P[5]);const ma=H.project(ta,ja.spatialReference,N);ma.spatialReference=l.cleanFromGeometryEngine(N||this.spatialReference);if(0===ma.xmax-ma.xmin){const la=y.getMetersPerUnitForSR(ma.spatialReference);ma.xmin-=la;ma.xmax+=la}if(0===ma.ymax-ma.ymin){const la=y.getMetersPerUnitForSR(ma.spatialReference);ma.ymin-=la;ma.ymax+=la}if(this.hasZ&&null!=ma.zmin&&null!=ma.zmax&&0===ma.zmax-ma.zmin){const la=y.getMetersPerUnitForSR(ma.spatialReference);
ma.zmin-=la;ma.zmax+=la}return{count:na,extent:ma}}catch(na){if(na===l.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw na;}});return function(){return w.apply(this,arguments)}}();q.executeQueryForIds=function(){var w=a._asyncToGenerator(function*(N={},X){return this.executeQueryForIdSet(N,X).then(ca=>Array.from(ca))});return function(){return w.apply(this,arguments)}}();q.executeQueryForIdSet=function(){var w=a._asyncToGenerator(function*(N={},X){let ca=M.clone(N),ja;ca.returnGeometry=
!1;ca.returnCentroid=!1;ca.outSR=null;try{ca=yield this._schedule(()=>l.normalizeQuery(ca,this.definitionExpression,this.spatialReference),X);ca=yield this._reschedule(()=>this._checkQuerySupport(ca),X);ja=yield this._reschedule(()=>this._executeGeometryQuery(ca,X),X);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),X);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),X);ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),X);ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),
X);const na=ja.items,ta=new Set;yield this._reschedule(()=>{for(const ma of na)ta.add(ja.featureAdapter.getObjectId(ma))},X);return ta}catch(na){if(na===l.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw na;}});return function(){return w.apply(this,arguments)}}();q.executeQueryForSnapping=function(){var w=a._asyncToGenerator(function*(N,X){const {point:ca,distance:ja,types:na}=N;if(0===na)return{candidates:[]};const ta=yield this._reschedule(()=>this._checkQuerySupport(N.query),X),ma=!x.equals(ca.spatialReference,
this.spatialReference);ma&&(yield H.checkProjectionSupport(ca.spatialReference,this.spatialReference));var la="number"===typeof ja?ja:ja.x,va="number"===typeof ja?ja:ja.y;la={xmin:ca.x-la,xmax:ca.x+la,ymin:ca.y-va,ymax:ca.y+va,spatialReference:ca.spatialReference};la=ma?H.project(la,this.spatialReference):la;if(!la)return{candidates:[]};va=(yield L.normalizeCentralMeridian(z.fromJSON(ca),null,{signal:X}))[0];const Ja=(yield L.normalizeCentralMeridian(z.fromJSON(la),null,{signal:X}))[0];if(p.isNone(va)||
p.isNone(Ja))return{candidates:[]};let Ba=new g(this._searchFeatures(this._getQueryBBoxes(Ja.toJSON())),null,this);Ba=yield this._reschedule(()=>Ba.executeObjectIdsQuery(ta),X);Ba=yield this._reschedule(()=>Ba.executeTimeQuery(ta),X);Ba=yield this._reschedule(()=>Ba.executeAttributesQuery(ta),X);X=va.toJSON();X=ma?H.project(X,this.spatialReference):X;return Ba.createSnappingResponse({...N,point:X,distance:ma?Math.max(la.xmax-la.xmin,la.ymax-la.ymin)/2:ja},ca.spatialReference)});return function(N,
X){return w.apply(this,arguments)}}();q.executeQueryForLatestObservations=function(){var w=a._asyncToGenerator(function*(N={},X){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new F("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:N,timeInfo:this.timeInfo});let ca=M.clone(N),ja;try{ca=yield this._schedule(()=>l.normalizeQuery(ca,this.definitionExpression,this.spatialReference),X),ca=yield this._reschedule(()=>this._checkQuerySupport(ca),X),ja=yield this._reschedule(()=>
this._executeGeometryQuery(ca,X),X),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(ca),X),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(ca),X),ja=yield this._reschedule(()=>ja.executeTimeQuery(ca),X),ja=yield this._reschedule(()=>ja.executeAttributesQuery(ca),X),ja=yield this._reschedule(()=>ja.filterLatest(),X)}catch(na){if(na!==l.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new g([],null,this)}return ja.createQueryResponse(ca)});return function(){return w.apply(this,arguments)}}();
q.executeQueryForSummaryStatistics=function(){var w=a._asyncToGenerator(function*(N={},X,ca){const {field:ja,normalizationField:na,valueExpression:ta}=X;return(yield this._getQueryEngineResultForStats(N,{field:ja,normalizationField:na,valueExpression:ta},ca)).createSummaryStatisticsResponse(N,X)});return function(){return w.apply(this,arguments)}}();q.executeQueryForUniqueValues=function(){var w=a._asyncToGenerator(function*(N={},X,ca){const {field:ja,valueExpression:na}=X;return(yield this._getQueryEngineResultForStats(N,
{field:ja,valueExpression:na},ca)).createUniqueValuesResponse(N,X)});return function(){return w.apply(this,arguments)}}();q.executeQueryForClassBreaks=function(){var w=a._asyncToGenerator(function*(N={},X,ca){const {field:ja,normalizationField:na,valueExpression:ta}=X;return(yield this._getQueryEngineResultForStats(N,{field:ja,normalizationField:na,valueExpression:ta},ca)).createClassBreaksResponse(N,X)});return function(){return w.apply(this,arguments)}}();q.executeQueryForHistogram=function(){var w=
a._asyncToGenerator(function*(N={},X,ca){const {field:ja,normalizationField:na,valueExpression:ta}=X;return(yield this._getQueryEngineResultForStats(N,{field:ja,normalizationField:na,valueExpression:ta},ca)).createHistogramResponse(N,X)});return function(){return w.apply(this,arguments)}}();q._schedule=function(){var w=a._asyncToGenerator(function*(N,X){return p.isSome(this._frameTask)?this._frameTask.schedule(N,X):N(O.noBudget)});return function(N,X){return w.apply(this,arguments)}}();q._reschedule=
function(){var w=a._asyncToGenerator(function*(N,X){return p.isSome(this._frameTask)?this._frameTask.reschedule(N,X):N(O.noBudget)});return function(N,X){return w.apply(this,arguments)}}();q._getAll=function(){if(!this._allItems){const w=[];this.featureStore.forEach(N=>w.push(N));this._allItems=new g(w,null,this)}return this._allItems};q._executeGeometryQuery=function(){var w=a._asyncToGenerator(function*(N,X){var ca=this;const {geometry:ja,outSR:na,spatialRel:ta,returnGeometry:ma,returnCentroid:la}=
N,va=ma||la,Ja=x.isValid(na)&&!x.equals(this.spatialReference,na),Ba=this._geometryQueryCache?Ja&&va?JSON.stringify({geometry:ja,spatialRelationship:ta,outSpatialReference:na}):JSON.stringify({geometry:ja,spatialRelationship:ta}):null;if(Ba){var Sa=this._geometryQueryCache.get(Ba);if(!p.isUndefined(Sa))return Sa}Sa=function(){var G=a._asyncToGenerator(function*(ea){if(Ja&&va)return ea=yield ea.project(na),Ba&&ca._geometryQueryCache.put(Ba,ea,ea.size||1),ea;Ba&&ca._geometryQueryCache.put(Ba,ea,ea.size||
1);return ea});return function(ea){return G.apply(this,arguments)}}();if(!ja)return Sa(this._getAll());const Oa=this.featureAdapter;if("esriSpatialRelDisjoint"===ta){N=this._searchFeatures(this._getQueryBBoxes(ja));if(!N.length)return Sa(this._getAll());let G,ea;const D=new Set;for(var Ia of N)D.add(Oa.getObjectId(Ia));yield this._reschedule(()=>{let T=0;G=Array(D.size);this.featureStore.forEach(W=>G[T++]=W);ea=D},X);N=yield this._reschedule(a._asyncToGenerator(function*(){const T=yield r.getSpatialQueryOperator(ta,
ja,ca.geometryType,ca.hasZ,ca.hasM);return new g(yield ca._runSpatialFilter(G,W=>!ea.has(Oa.getObjectId(W))||T(Oa.getGeometry(W)),X),ja,ca)}),X);return Sa(N)}Ia=this._searchFeatures(this._getQueryBBoxes(ja));if(!Ia.length)return Sa=new g([],ja,this),Ba&&this._geometryQueryCache.put(Ba,Sa,Sa.size||1),Sa;if(this._canExecuteSoloPass(ja,N))return Sa(new g(Ia,ja,this));const e=yield r.getSpatialQueryOperator(ta,ja,this.geometryType,this.hasZ,this.hasM);N=yield this._runSpatialFilter(Ia,G=>e(Oa.getGeometry(G)),
X);return Sa(new g(N,ja,this))});return function(N,X){return w.apply(this,arguments)}}();q._runSpatialFilter=function(){var w=a._asyncToGenerator(function*(N,X,ca){var ja=this;if(!X)return N;if(p.isNone(this._frameTask))return N.filter(la=>X(la));let na=0;const ta=[],ma=function(){var la=a._asyncToGenerator(function*(va){for(;na<N.length;){const Ja=N[na++];X(Ja)&&(ta.push(Ja),va.madeProgress());va.done&&(yield ja._reschedule(Ba=>ma(Ba),ca))}});return function(va){return la.apply(this,arguments)}}();
return this._reschedule(la=>ma(la),ca).then(()=>ta)});return function(N,X,ca){return w.apply(this,arguments)}}();q._canExecuteSoloPass=function(w,N){const {geometryType:X}=this;({spatialRel:N}=N);return r.canQueryWithRBush(w)&&("esriSpatialRelEnvelopeIntersects"===N||"esriGeometryPoint"===X&&("esriSpatialRelIntersects"===N||"esriSpatialRelContains"===N||"esriSpatialRelWithin"===N))};q._getQueryBBoxes=function(w){if(r.canQueryWithRBush(w)){if(z.isExtent(w))return[u.fromValues(w.xmin,w.ymin,w.xmax,
w.ymax)];if(z.isPolygon(w))return w.rings.map(N=>u.fromValues(Math.min(N[0][0],N[2][0]),Math.min(N[0][1],N[2][1]),Math.max(N[0][0],N[2][0]),Math.max(N[0][1],N[2][1])))}return[t.getBoundsXY(u.create(),w)]};q._searchFeatures=function(w){for(const ca of w)this.featureStore.forEachInBounds(ca,ja=>{f.add(ja)});const N=Array(f.size);let X=0;f.forEach(ca=>N[X++]=ca);f.clear();return N};q._checkStatisticsSupport=function(){var w=a._asyncToGenerator(function*(N,X){if(0>N.distance||null!=N.geometryPrecision||
N.multipatchOption||N.pixelSize||N.relationParam||N.text||N.outStatistics||N.groupByFieldsForStatistics||N.having||N.orderByFields)throw new F("feature-store:unsupported-query","Unsupported query options",{query:N});return Promise.all([this._checkAttributesQuerySupport(N),this._checkStatisticsParamsSupport(X),r.checkSpatialQuerySupport(N,this.geometryType,this.spatialReference),H.checkProjectionSupport(this.spatialReference,N.outSR)]).then(()=>N)});return function(N,X){return w.apply(this,arguments)}}();
q._checkStatisticsParamsSupport=function(){var w=a._asyncToGenerator(function*(N){var X=[];N.valueExpression&&({arcadeUtils:X}=yield J.loadArcade(),X=X.extractFieldNames(N.valueExpression));N.field&&X.push(N.field);N.normalizationField&&X.push(N.normalizationField);if(!X.length)throw new F("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:N});h.validateFields(this.fieldsIndex,X,"params contains missing fields")});return function(N){return w.apply(this,
arguments)}}();q._checkQuerySupport=function(){var w=a._asyncToGenerator(function*(N){if(0>N.distance||null!=N.geometryPrecision||N.multipatchOption||N.pixelSize||N.relationParam||N.text)throw new F("feature-store:unsupported-query","Unsupported query options",{query:N});return Promise.all([this._checkAttributesQuerySupport(N),this._checkStatisticsQuerySupport(N),r.checkSpatialQuerySupport(N,this.geometryType,this.spatialReference),H.checkProjectionSupport(this.spatialReference,N.outSR)]).then(()=>
N)});return function(N){return w.apply(this,arguments)}}();q._checkAttributesQuerySupport=function(w){const {outFields:N,orderByFields:X,returnDistinctValues:ca,outStatistics:ja}=w,na=ja?ja.map(ta=>ta.outStatisticFieldName&&ta.outStatisticFieldName.toLowerCase()):[];if(X&&0<X.length){const ta=X.map(ma=>{const la=ma.toLowerCase();return-1<la.indexOf(" asc")?la.split(" asc")[0]:-1<la.indexOf(" desc")?la.split(" desc")[0]:ma}).filter(ma=>-1===na.indexOf(ma));h.validateFields(this.fieldsIndex,ta,"orderByFields contains missing fields")}if(N&&
0<N.length)h.validateFields(this.fieldsIndex,N,"outFields contains missing fields");else if(ca)throw new F("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:w});h.validateWhere(this.fieldsIndex,w.where)};q._checkStatisticsQuerySupport=function(){var w=a._asyncToGenerator(function*(N){const {outStatistics:X,groupByFieldsForStatistics:ca,having:ja}=N;var na=ca&&ca.length,ta=X&&X.length;if(ja){if(!na||!ta)throw new F("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",
{query:N});h.validateHaving(this.fieldsIndex,ja,X)}if(ta&&Q(X)){ta=X.map(ma=>ma.onStatisticField);h.validateFields(this.fieldsIndex,ta,"onStatisticFields contains missing fields");na&&h.validateFields(this.fieldsIndex,ca,"groupByFieldsForStatistics contains missing fields");for(const ma of X){const {onStatisticField:la,statisticType:va}=ma;if(("percentile_disc"===va||"percentile_cont"===va)&&"statisticParameters"in ma){if({statisticParameters:na}=ma,!na)throw new F("feature-store:unsupported-query",
"statisticParamters should be set for percentile type",{definition:ma,query:N});}else if("count"!==va&&la&&h.hasInvalidFieldType(la,this.fieldsIndex))throw new F("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:ma,query:N});}}});return function(N){return w.apply(this,arguments)}}();q._getQueryEngineResultForStats=function(){var w=a._asyncToGenerator(function*(N={},X,ca){N=M.clone(N);let ja;try{N=yield this._schedule(()=>l.normalizeQuery(N,this.definitionExpression,
this.spatialReference),ca),N=yield this._reschedule(()=>this._checkStatisticsSupport(N,X),ca),ja=yield this._reschedule(()=>this._executeGeometryQuery(N,ca),ca),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(N),ca),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(N),ca),ja=yield this._reschedule(()=>ja.executeTimeQuery(N),ca),ja=yield this._reschedule(()=>ja.executeAttributesQuery(N),ca)}catch(na){if(na!==l.QUERY_ENGINE_EMPTY_RESULT)throw na;ja=new g([],null,this)}return ja});return function(){return w.apply(this,
arguments)}}();a._createClass(I,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const w=this.featureStore.fullBounds;return w?{xmin:w[0],ymin:w[1],xmax:w[2],ymax:w[3],spatialReference:l.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=B.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return I}();const S=C.create(),P=
C.create();c.Feature=function(I,q=null,w,N,X){this.attributes=I;this.geometry=w;this.centroid=N;this.filterFlags=X;this.groupId=-1;this.displayId=q};c.default=A;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(c,a,F,M){let p=function(){function y(u,t,z){this._namespace=u;this._storage=t;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=
":";z&&(this._storage.registerRemoveFunc(this._namespace,z),this._removeFunc=!0)}var C=y.prototype;C.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};C.resetHitRate=function(){this._hit=this._miss=0};C.put=function(u,t,z,L=0){this._storage.put(this._namespace+u,t,z,L)};C.get=function(u){u=this._storage.get(this._namespace+u);void 0===u?++this._miss:++this._hit;return u};
C.pop=function(u){u=this._storage.pop(this._namespace+u);void 0===u?++this._miss:++this._hit;return u};C.updateSize=function(u,t,z){this._storage.updateSize(this._namespace+u,t,z)};C.clear=function(){this._storage.clear(this._namespace)};C.clearAll=function(){this._storage.clearAll()};C.getStats=function(){return this._storage.getStats()};C.resetStats=function(){this._storage.resetStats()};a._createClass(y,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/
(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return y}(),n=function(){function y(u=10485760){this._maxSize=u;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new M;this._users=new M}var C=y.prototype;C.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};C.register=function(u){this._users.push(u)};C.deregister=function(u){this._users.removeUnordered(u)};
C.registerRemoveFunc=function(u,t){this._removeFuncs.push([u,t])};C.deregisterRemoveFunc=function(u){this._removeFuncs.filterInPlace(t=>t[0]!==u)};C.put=function(u,t,z,L){const x=this._db.get(u);x&&(this._size-=x.size,this._db.delete(u),x.entry!==t&&this._notifyRemove(u,x.entry,0));z>this._maxSize?this._notifyRemove(u,t,0):void 0===t?console.warn("Refusing to cache undefined entry "):!z||0>z?console.warn("Refusing to cache entry with invalid size "+z):(L=1+Math.max(L,-3)- -3,this._db.set(u,{entry:t,
size:z,lifetime:L,lives:L}),this._size+=z,this._checkSizeLimit())};C.updateSize=function(u,t,z){const L=this._db.get(u);if(L&&L.entry===t){for(this._size-=L.size;z>this._maxSize;)if(z=this._notifyRemove(u,t,1),!(F.isSome(z)&&0<z)){this._db.delete(u);return}L.size=z;this._size+=z;this._checkSizeLimit()}};C.pop=function(u){const t=this._db.get(u);if(t)return this._size-=t.size,this._db.delete(u),++this._hit,t.entry;++this._miss};C.get=function(u){const t=this._db.get(u);if(void 0===t)++this._miss;else return this._db.delete(u),
t.lives=t.lifetime,this._db.set(u,t),++this._hit,t.entry};C.getStats=function(){const u={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},z=[];this._db.forEach((h,H)=>{const b=h.lifetime;z[b]=(z[b]||0)+h.size;this._users.forAll(g=>{g=g.namespace;H.startsWith(g)&&(t[g]=(t[g]||0)+h.size)})});const L={};this._users.forAll(h=>{const H=h.namespace;!isNaN(h.hitRate)&&0<h.hitRate?(t[H]=
t[H]||0,L[H]=Math.round(100*h.hitRate)+"%"):L[H]="0%"});var x=Object.keys(t);x.sort((h,H)=>t[H]-t[h]);x.forEach(h=>u[h]=Math.round(t[h]/2**20)+"MB / "+L[h]);for(x=z.length-1;0<=x;--x){const h=z[x];h&&(u["Priority "+(x+-3-1)]=Math.round(h/this.size*100)+"%")}return u};C.resetStats=function(){this._hit=this._miss=0;this._users.forAll(u=>u.resetHitRate())};C.clear=function(u){this._db.forEach((t,z)=>{z.startsWith(u)&&(this._size-=t.size,this._db.delete(z),this._notifyRemove(z,t.entry,0))})};C.clearAll=
function(){this._db.forEach((u,t)=>this._notifyRemove(t,u.entry,0));this._size=0;this._db.clear()};C._getHitRate=function(){return this._hit/(this._hit+this._miss)};C._notifyRemove=function(u,t,z){let L;this._removeFuncs.some(x=>u.startsWith(x[0])?(x=x[1](t,z),"number"===typeof x&&(L=x),!0):!1);return L};C._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [u,t]of this._db){this._db.delete(u);if(1>=t.lives){this._size-=t.size;const z=this._notifyRemove(u,t.entry,1);F.isSome(z)&&
0<z&&(this._size+=z,t.lives=t.lifetime,t.size=z,this._db.set(u,t))}else--t.lives,this._db.set(u,t);if(this._size<=.9*this.maxSize)break}};a._createClass(y,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(u){this._maxSize=Math.max(u,0);this._checkSizeLimit()}}]);return y}();c.MIN_PRIORITY=-3;c.MemCache=p;c.MemCacheStorage=n;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(c,a,F,M,p,n,y,C,u){function t(w){if(w=P[w])return w;throw Error("unknown measure");}function z(w){return S[w].baseUnit}function L(w,N=null){N=N||t(w);return S[N].baseUnit===w}function x(w,N,X){if(N===X)return w;const ca=t(N);if(ca!==t(X))throw Error("incompatible units");w=L(N,ca)?w:w*S[ca].units[N].inBaseUnits;return L(X,ca)?w:w/S[ca].units[X].inBaseUnits}function h(w,N){return 3E3>x(w,N,"meters")?"meters":"kilometers"}function H(w,N){return 1E5>x(w,N,"meters")?"meters":"kilometers"}function b(w,
N){return 1E3>x(w,N,"feet")?"feet":"miles"}function g(w,N){return 1E5>x(w,N,"feet")?"feet":"miles"}function r(w){return A.fromJSON(w.toLowerCase())||null}function B(w,N=y.earth.metersPerDegree){return l(w,!0)||N}function l(w,N=!1){let X,ca,ja=null;null!=w&&("object"===typeof w?(X=w.wkid,ca=w.wkt):"number"===typeof w?X=w:"string"===typeof w&&(ca=w));if(X){if(C.isWKIDFromMars(X))return y.mars.metersPerDegree;if(C.isWKIDFromMoon(X))return y.moon.metersPerDegree;ja=f.values[f[X]];!ja&&N&&m.has(X)&&(ja=
O)}else ca&&(/^PROJCS/i.test(ca)?ja=E(Q.exec(ca),ja):/^GEOCCS/i.test(ca)&&(ja=E(k.exec(ca),ja)));return ja}function E(w,N){return w&&w[1]?parseFloat(w[1].split(",")[1]):N}function J(w){var N=null;if(null!=w)if("object"===typeof w){var X=w.wkid;var ca=w.wkt}else"number"===typeof w?X=w:"string"===typeof w&&(ca=w);if(X)N=f.units[f[X]];else if(ca&&(w=/^PROJCS/i.test(ca)?Q:/^GEOCCS/i.test(ca)?k:null)&&(ca=w.exec(ca))&&ca[1]&&(ca=ca[1],N=(N=/[\\"\\']{1}([^\\"\\']+)/.exec(ca))&&N[1],!N||-1===f.units.indexOf(N)))for(ca=
parseFloat(ca.split(",")[1]),N=null,w=f.values,X=0;X<w.length;++X)if(1E-7>Math.abs(ca-w[X])){N=f.units[X];break}return M.isSome(N)?r(N):null}const O=y.earth.radius*Math.PI/200,Q=/UNIT\[([^\]]+)\]\]$/i,f=u,k=/UNIT\[([^\]]+)\]/i,m=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),A=F.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",
chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});a={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},
miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};u={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(w=>w*w)(1200/3937)},
acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const S={length:{baseUnit:"meters",units:a},area:{baseUnit:"square-meters",units:u},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},
"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},P=function(){const w={};for(const N in S)for(const X in S[N].units)w[X]=N;return w}(),I={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",
esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},q={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};a=F.strict()(I);u=F.strict()(q);F=F.strict()({...I,...q});c.areaUnitsJSONMap=a;c.baseUnitForMeasure=z;c.baseUnitForUnit=
function(w){return z(t(w))};c.convertUnit=x;c.getDefaultUnitSystem=function(w){if(!w)return null;switch(J(w)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};c.getMetersPerUnit=
l;c.getMetersPerUnitForSR=B;c.getMetersPerVerticalUnitForSR=function(w){if(w&&"object"===typeof w&&!C.isEarth(w))return 1;w=B(w);return 1E5<w?1:w};c.getUnitString=J;c.getVerticalUnitStringForSR=function(w){const N=B(w),X=w instanceof n?p.getReferenceEllipsoid(w).metersPerDegree:1E5;return N>=X?"meters":J(w)};c.inchesPerMeter=39.37;c.isBaseUnit=L;c.isMeasurementSystem=function(w){return"imperial"===w||"metric"===w};c.lengthToDegrees=function(w,N,X){return x(w,N,"meters")/(X*Math.PI/180)};c.lengthUnitsJSONMap=
u;c.measureForUnit=t;c.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");c.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");c.preferredImperialAreaUnit=function(w,N){return 1E6>x(w,N,"square-feet")?"square-feet":"square-miles"};c.preferredImperialLengthUnit=b;c.preferredImperialVerticalLengthUnit=g;c.preferredLengthUnit=
function(w,N,X){switch(X){case "metric":return h(w,N);case "imperial":return b(w,N);default:return X}};c.preferredMetricAreaUnit=function(w,N){return 3E6>x(w,N,"square-meters")?"square-meters":"square-kilometers"};c.preferredMetricLengthUnit=h;c.preferredMetricVerticalLengthUnit=H;c.preferredVerticalLengthUnit=function(w,N,X){switch(X){case "metric":return H(w,N);case "imperial":return g(w,N);default:return X}};c.unitFromRESTJSON=r;c.unitToRESTJSON=function(w){return A.toJSON(w)||null};c.unitsJSONMap=
F;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(c,a,F,M){function p(t){return new a({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${t.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const n=p(F.earth),y=p(F.mars),C=p(F.moon),u=new a({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${F.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});c.SphericalECEFSpatialReference=n;c.SphericalPCPFMars=
y;c.SphericalPCPFMoon=C;c.WGS84ECEFSpatialReference=u;c.createSphericalPCPF=p;c.getReferenceEllipsoid=function(t){return t&&(M.isMars(t)||t===y)?F.mars:t&&(M.isMoon(t)||t===C)?F.moon:F.earth};c.getReferenceEllipsoidFromWKID=function(t){return M.isWKIDFromMars(t)?F.mars:M.isWKIDFromMoon(t)?F.moon:F.earth};c.getSphericalPCPF=function(t){return t&&(M.isMars(t)||t===y)?y:t&&(M.isMoon(t)||t===C)?C:n};c.getSphericalPCPFForEllipsoid=function(t){return t&&t===F.mars?y:t&&t===F.moon?C:n};Object.defineProperty(c,
"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),function(c,a,F,M,p,n,y,C,u,t,z,L,x){function h(J){const O=[];let Q=0,f=0;for(let k=0;k<J.length;k++){const m=J[k];let A=null;for(let S=0;S<m.length;S++)A=
m[S],O.push(A),0===S?f=Q=A[0]:(Q=Math.min(Q,A[0]),f=Math.max(f,A[0]));A&&O.push([(Q+f)/2,0])}return O}function H(J,O){if(!(J instanceof C||J instanceof y))throw E.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new M("straightLineDensify: the input geometry is neither polyline nor polygon");var Q=u.getGeometryParts(J);const f=[];for(const m of Q){Q=[];f.push(Q);Q.push([m[0][0],m[0][1]]);for(let A=0;A<m.length-1;A++){const S=m[A][0],P=m[A][1],I=m[A+1][0],q=m[A+1][1];
var k=Math.sqrt((I-S)*(I-S)+(q-P)*(q-P));const w=(q-P)/k,N=(I-S)/k,X=k/O;if(1<X){for(let ca=1;ca<=X-1;ca++){const ja=ca*O;Q.push([N*ja+S,w*ja+P])}k=(k+Math.floor(X-1)*O)/2;Q.push([N*k+S,w*k+P])}Q.push([I,q])}}return"polygon"===J.type?new y({rings:f,spatialReference:J.spatialReference}):new C({paths:f,spatialReference:J.spatialReference})}function b(J,O,Q){O&&(J=H(J,1E6),J=z.webMercatorToGeographic(J,!0));Q&&(J=u.updatePolyGeometry(J,Q));return J}function g(J,O,Q){if(Array.isArray(J)){var f=J[0];f>
O?(Q=u.offsetMagnitude(f,O),J[0]=f+-2*Q*O):f<Q&&(O=u.offsetMagnitude(f,Q),J[0]=f+-2*O*Q)}else f=J.x,f>O?(Q=u.offsetMagnitude(f,O),J=J.clone().offset(-2*Q*O,0)):f<Q&&(O=u.offsetMagnitude(f,Q),J=J.clone().offset(-2*O*Q,0));return J}function r(J,O){let Q=-1;for(let f=0;f<O.cutIndexes.length;f++){const k=O.cutIndexes[f],m=O.geometries[f],A=u.getGeometryParts(m);for(let S=0;S<A.length;S++){const P=A[S];P.some(I=>{if(180>I[0])return!0;I=0;for(var q=0;q<P.length;q++){var w=P[q][0];I=w>I?w:I}I=Number(I.toFixed(9));
I=-360*u.offsetMagnitude(I,180);for(q=0;q<P.length;q++)w=m.getPoint(S,q),m.setPoint(S,q,w.clone().offset(I,0));return!0})}if(k===Q)if("polygon"===J[0].type)for(const S of u.getGeometryParts(m))J[k]=J[k].addRing(S);else{if("polyline"===J[0].type)for(const S of u.getGeometryParts(m))J[k]=J[k].addPath(S)}else Q=k,J[k]=m}return J}function B(J,O,Q){return l.apply(this,arguments)}function l(){l=a._asyncToGenerator(function*(J,O,Q){var f;if(!Array.isArray(J))return B([J],O);O=null!=(f=null==O?void 0:O.url)?
f:F.geometryServiceUrl;let k,m,A;let S=0;var P=[];f=[];for(var I of J)if(n.isNone(I))f.push(I);else{if(!q){var q=I.spatialReference;var w=t.getInfo(q);var N=(k=q.isWebMercator)?102100:4326;m=u.cutParams[N].maxX;A=u.cutParams[N].minX;var X=u.cutParams[N].plus180Line;N=u.cutParams[N].minus180Line}if(w)if("mesh"===I.type)f.push(I);else if("point"===I.type)f.push(g(I.clone(),m,A));else if("multipoint"===I.type){var ca=I.clone();ca.points=ca.points.map(ja=>g(ja,m,A));f.push(ca)}else if("extent"===I.type)ca=
I.clone()._normalize(!1,!1,w),f.push(ca.rings?new y(ca):ca);else if(I.extent){ca=I.extent;const ja=2*u.offsetMagnitude(ca.xmin,A)*m;let na=0===ja?I.clone():u.updatePolyGeometry(I.clone(),ja);ca.offset(ja,0);ca.intersects(X)&&ca.xmax!==m?(S=ca.xmax>S?ca.xmax:S,na=b(na,k),P.push(na),f.push("cut")):ca.intersects(N)&&ca.xmin!==A?(S=2*ca.xmax*m>S?2*ca.xmax*m:S,na=b(na,k,360),P.push(na),f.push("cut")):f.push(na)}else f.push(I.clone());else f.push(I)}q=u.offsetMagnitude(S,m);w=-90;X=q;for(I=new C;0<q;)N=
-180+360*q,I.addPath([[N,w],[N,-1*w]]),w*=-1,q--;if(0<P.length&&0<X){q=yield L.cut(O,P,I,Q);q=r(P,q);w=[];P=[];for(X=0;X<f.length;X++)I=f[X],"cut"!==I?P.push(I):(I=q.shift(),N=J[X],n.isSome(N)&&"polygon"===N.type&&N.rings&&1<N.rings.length&&I.rings.length>=N.rings.length?(w.push(I),P.push("simplify")):P.push(k?z.geographicToWebMercator(I):I));if(!w.length)return P;f=yield x.simplify(O,w,Q);J=[];for(Q=0;Q<P.length;Q++)O=P[Q],"simplify"!==O?J.push(O):J.push(k?z.geographicToWebMercator(f.shift()):f.shift());
return J}J=[];for(Q=0;Q<f.length;Q++)O=f[Q],"cut"!==O?J.push(O):(O=P.shift(),J.push(!0===k?z.geographicToWebMercator(O):O));return Promise.resolve(J)});return l.apply(this,arguments)}const E=p.getLogger("esri.geometry.support.normalizeUtils");c.getDenormalizedExtent=function(J){if(!J)return null;const O=J.extent;if(!O)return null;var Q=J.spatialReference&&t.getInfo(J.spatialReference);if(!Q)return O;const [f,k]=Q.valid;({width:Q}=O);let {xmin:m,xmax:A}=O;[m,A]=[A,m];if("extent"===J.type||0===Q||Q<=
k||Q>2*k||m<f||A>k)return O;let S;switch(J.type){case "polygon":if(1<J.rings.length)S=h(J.rings);else return O;break;case "polyline":if(1<J.paths.length)S=h(J.paths);else return O;break;case "multipoint":S=J.points}J=O.clone();for(let P=0;P<S.length;P++){let I=S[P][0];0>I?(I+=k,A=Math.max(I,A)):(I-=k,m=Math.min(I,m))}J.xmin=m;J.xmax=A;return J.width<Q?(J.xmin-=k,J.xmax-=k,J):O};c.normalizeCentralMeridian=B;c.normalizeMapX=function(J,O){if(O=t.getInfo(O)){const [Q,f]=O.valid;O=f-Q;if(J<Q)for(;J<Q;)J+=
O;if(J>f)for(;J>f;)J-=O}return J};c.straightLineDensify=H;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(c,a,F,M){function p(y){return M.isPolygon(y)?y.rings:y.paths}const n={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new a({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:F.WebMercator}),
minus180Line:new a({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:F.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new a({paths:[[[180,-180],[180,180]]],spatialReference:F.WGS84}),minus180Line:new a({paths:[[[-180,-180],[-180,180]]],spatialReference:F.WGS84})}};c.cutParams=n;c.getGeometryParts=p;c.getSpatialReferenceMinMaxX=function(y){y=(null==y?0:y.isWebMercator)?102100:4326;return[n[y].minX,n[y].maxX]};c.offsetMagnitude=
function(y,C){return Math.ceil((y-C)/(2*C))};c.updatePolyGeometry=function(y,C){const u=p(y);for(const t of u)for(const z of t)z[0]+=C;return y};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(c,a,F,M,p,n){function y(){y=a._asyncToGenerator(function*(C,u,t,z){C="string"===typeof C?p.urlToObject(C):C;const L=
u[0].spatialReference;u={...z,query:{...C.query,f:"json",sr:JSON.stringify(L),target:JSON.stringify({geometryType:n.getJsonType(u[0]),geometries:u}),cutter:JSON.stringify(t)}};u=yield M(C.path+"/cut",u);const {cutIndexes:x,geometries:h=[]}=u.data;return{cutIndexes:x,geometries:h.map(H=>{H=n.fromJSON(H);H.spatialReference=L;return H})}});return y.apply(this,arguments)}c.cut=function(C,u,t,z){return y.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(c,a,F,M,p){function n(){n=a._asyncToGenerator(function*(u,t,z){const L="string"===typeof u?M.urlToObject(u):u;u=t[0].spatialReference;const x=p.getJsonType(t[0]);t={...z,query:{...L.query,f:"json",sr:u.wkid?u.wkid:JSON.stringify(u),geometries:JSON.stringify(y(t))}};t=yield F(L.path+"/simplify",t);return C(t.data,x,u)});return n.apply(this,arguments)}function y(u){return{geometryType:p.getJsonType(u[0]),
geometries:u.map(t=>t.toJSON())}}function C(u,t,z){const L=p.getGeometryType(t);return u.map(x=>{x=L.fromJSON(x);x.spatialReference=z;return x})}c.simplify=function(u,t,z){return n.apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(c,a,F){function M(u,t){return u?y.get(u,t):null}function p(u,t,z,L=!0){const x=[];for(const h of t)if("*"!==
h&&!u.has(h))if(L){t=n(h);try{const H=M(t,u);if(!H)throw new a("feature-store:unsupported-query","invalid SQL expression",{where:t});if(!H.isStandardized)throw new a("feature-store:unsupported-query","expression is not standard",{clause:H});p(u,H.fieldNames,"expression contains missing fields")}catch(H){if((t=H&&H.details)&&(t.clause||t.where))throw H;t&&t.missingFields?x.push(...t.missingFields):x.push(h)}}else x.push(h);if(x.length)throw new a("feature-store:unsupported-query",z,{missingFields:x});
}function n(u){return u.split(" as ")[0]}const y=new F.WhereClauseCache(50,500),C=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));c.getAliasFromFieldName=function(u){return u.split(" as ")[1]};c.getExpressionFromFieldName=n;c.getWhereClause=M;c.hasInvalidFieldType=function(u,t){return(u=t.get(u))?!C.has(u.type):!1};c.validateFields=p;c.validateHaving=function(u,t,z){if(!t)return!0;const L=
y.get(t,u);if(!L)throw new a("feature-store:unsupported-query","invalid SQL expression",{having:t});if(!L.isAggregate)throw new a("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:t});p(u,L.fieldNames,"having contains missing fields");if(!L.getExpressions().every(x=>{const {aggregateType:h,field:H}=x,b=u.has(H)&&u.get(H).name;return z.some(g=>{const {onStatisticField:r,statisticType:B}=g;return(u.has(r)&&u.get(r).name)===b&&B.toLowerCase().trim()===h})}))throw new a("feature-store:unsupported-query",
"expressions in having should also exist in outStatistics",{having:t});return!0};c.validateWhere=function(u,t){if(!t)return!0;const z=y.get(t,u);if(!z)throw new a("feature-store:unsupported-query","invalid SQL expression",{where:t});if(!z.isStandardized)throw new a("feature-store:unsupported-query","where clause is not standard",{where:t});p(u,z.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../ItemCache","./WhereClause"],function(c,a,F){let M=function(){function p(n,y){this._cache=new a(n);this._invalidCache=new a(y)}p.prototype.get=function(n,y){const C=`${y.uid}:${n}`,u=this._cache.get(C);if(u)return u;if(void 0!==this._invalidCache.get(C))return null;try{const t=F.WhereClause.create(n,y);this._cache.put(C,t);return t}catch{return this._invalidCache.put(C,null),null}};return p}();c.WhereClauseCache=M;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],
function(c){return function(){function a(M,p){this._storage=new c.MemCacheStorage;this._storage.maxSize=M;p&&this._storage.registerRemoveFunc("",p)}var F=a.prototype;F.put=function(M,p){this._storage.put(M,p,1,1)};F.pop=function(M){return this._storage.pop(M)};F.get=function(M){return this._storage.get(M)};F.clear=function(){this._storage.clearAll()};F.destroy=function(){this._storage.destroy()};return a}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),
function(c,a,F,M,p,n){function y(P,I){P+="";return P.length>=I?P:Array(I-P.length+1).join("0")+P}function C(P,I,q="0",w="0",N="0",X="0",ca="",ja="0",na="0"){return"+"===ca||"-"===ca?(P=`${y(parseInt(P,10),4)}-${y(parseInt(I,10),2)}-${y(parseInt(q,10),2)}`,I="",10>parseFloat(X)&&(I="0"),w=`${y(parseInt(w,10),2)}:${y(parseInt(N,10),2)}:${I+parseFloat(X).toString()}`,ca=`${ca}${y(parseInt(ja,10),2)}:${y(parseInt(na,10),2)}`,new Date(P+"T"+w+ca)):new Date(parseInt(P,10),parseInt(I,10)-1,parseInt(q,10),
parseInt(w,10),parseInt(N,10),parseFloat(X))}function u(P){let I=J.exec(P);if(null!==I){const [,q,w,N,X,ca,ja]=I;return C(q,w,N,X,ca,ja)}I=O.exec(P);if(null!==I){const [,q,w,N,X,ca,ja,na,ta,ma]=I;return C(q,w,N,X,ca,ja,na,ta,ma)}I=Q.exec(P);if(null!==I){const [,q,w,N,X,ca,ja,na,ta]=I;return C(q,w,N,X,ca,"0",ja,na,ta)}I=f.exec(P);if(null!==I){const [,q,w,N,X,ca]=I;return C(q,w,N,X,ca)}I=E.exec(P);if(null!==I){const [,q,w,N]=I;return C(q,w,N)}throw Error("SQL Invalid Timestamp");}function t(P){P=E.exec(P);
if(null===P)throw Error("SQL Invalid Date");const [,I,q,w]=P;return new Date(parseInt(I,10),parseInt(q,10)-1,parseInt(w,10))}function z(P){return Array.isArray(P)?P:[P]}function L(P){return null!==P?!0!==P:null}function x(P,I){return null!=P&&null!=I?!0===P&&!0===I:!1===P||!1===I?!1:null}function h(P,I){return null!=P&&null!=I?!0===P||!0===I:!0===P||!0===I?!0:null}function H(P,I){if(null==P)return null;let q=!1;for(const w of I)if(null==w)q=null;else if(P===w){q=!0;break}return q}function b(P,I,q){if(null==
P)return null;let w="",N=0;for(let X=0;X<I.length;X++){const ca=I.charAt(X);switch(N){case 0:ca===q?N=1:w=0<="-[]/{}()*+?.\\^$|".indexOf(ca)?w+("\\"+ca):"%"===ca?w+".*":"_"===ca?w+".":w+ca;break;case 1:w=0<="-[]/{}()*+?.\\^$|".indexOf(ca)?w+("\\"+ca):w+ca,N=0}}return(new RegExp("^"+w+"$")).test(P)}function g(P){return P instanceof Date?P.valueOf():P}function r(P,I,q){if(null==I||null==q)return null;I=g(I);q=g(q);switch(P){case "\x3c\x3e":return I!==q;case "\x3d":return I===q;case "\x3e":return I>
q;case "\x3c":return I<q;case "\x3e\x3d":return I>=q;case "\x3c\x3d":return I<=q}}function B(P,I,q){if(I instanceof p.SqlInterval)if(q instanceof Date)switch(P){case "+":return new Date(I.valueInMilliseconds()+q.getTime());case "-":return I.valueInMilliseconds()-q.getTime();case "*":return I.valueInMilliseconds()*q.getTime();case "/":return I.valueInMilliseconds()/q.getTime()}else if(q instanceof p.SqlInterval)switch(P){case "+":return p.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()+
q.valueInMilliseconds());case "-":return p.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()-q.valueInMilliseconds());case "*":return I.valueInMilliseconds()*q.valueInMilliseconds();case "/":return I.valueInMilliseconds()/q.valueInMilliseconds()}else I=I.valueInMilliseconds();else if(q instanceof p.SqlInterval)if(I instanceof Date)switch(P){case "+":return new Date(q.valueInMilliseconds()+I.getTime());case "-":return new Date(I.getTime()-q.valueInMilliseconds());case "*":return I.getTime()*
q.valueInMilliseconds();case "/":return I.getTime()/q.valueInMilliseconds()}else q=q.valueInMilliseconds();else if(I instanceof Date&&"number"===typeof q)switch(q*=864E5,I=I.getTime(),P){case "+":return new Date(I+q);case "-":return new Date(I-q);case "*":return new Date(I*q);case "/":return new Date(I/q)}else if(q instanceof Date&&"number"===typeof I)switch(I*=864E5,q=q.getTime(),P){case "+":return new Date(I+q);case "-":return new Date(I-q);case "*":return new Date(I*q);case "/":return new Date(I/
q)}switch(P){case "+":return I+q;case "-":return I-q;case "*":return I*q;case "/":return I/q}}function l(P,I,q,w){P=w.getAttribute(P,I);return null!=P&&1===q[I]?new Date(P):P}const E=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,J=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,O=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,Q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,f=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
k=new Set(["current_timestamp","current_date","current_time"]);let m=function(){function P(){}P.makeBool=function(I){return!0===I};P.featureValue=function(I,q,w,N){return l(I,q,w,N)};P.equalsNull=function(I){return null===I};P.applyLike=function(I,q,w){return b(I,q,w)};P.ensureArray=function(I){return z(I)};P.applyIn=function(I,q){return H(I,q)};P.currentDate=function(){const I=new Date;I.setHours(0,0,0,0);return I};P.makeSqlInterval=function(I,q,w){return p.SqlInterval.createFromValueAndQualifer(I,
q,w)};P.convertInterval=function(I){return I instanceof p.SqlInterval?I.valueInMilliseconds():I};P.currentTimestamp=function(){return new Date};P.compare=function(I,q,w){return r(I,q,w)};P.calculate=function(I,q,w){return B(I,q,w)};P.makeComparable=function(I){return g(I)};P.evaluateFunction=function(I,q){return p.evaluateFunction(I,q)};P.lookup=function(I,q){I=q[I];return void 0===I?null:I};P.between=function(I,q){return null==I||null==q[0]||null==q[1]?null:I>=q[0]&&I<=q[1]};P.notbetween=function(I,
q){return null==I||null==q[0]||null==q[1]?null:I<q[0]||I>q[1]};P.ternaryNot=function(I){return L(I)};P.ternaryAnd=function(I,q){return x(I,q)};P.ternaryOr=function(I,q){return h(I,q)};return P}(),A=function(){function P(q,w){this.fieldsIndex=w;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=n.WhereGrammar.parse(q);const {isStandardized:N,isAggregate:X,referencedFieldNames:ca}=this.extractExpressionInfo(w);this.referencedFieldNames=ca;this.isStandardized=N;this.isAggregate=
X}P.create=function(q,w){return new P(q,w)};var I=P.prototype;I.testSet=function(q,w=S){const N={};for(const X of this.fieldNames)N[X]=q.map(ca=>w.getAttribute(ca,X));return!!this.evaluateNode(this.parseTree,{attributes:N},S)};I.calculateValue=function(q,w=S){q=this.evaluateNode(this.parseTree,q,w);return q instanceof p.SqlInterval?q.valueInMilliseconds()/864E5:q};I.calculateValueCompiled=function(q,w=S){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(q,this.parameters,
w,this.datefields);if(F("esri-csp-restrictions"))return this.calculateValue(q,w);this.compileMe();return this.parseTree._compiledVersion(q,this.parameters,w,this.datefields)};I.testFeature=function(q,w=S){return!!this.evaluateNode(this.parseTree,q,w)};I.testFeatureCompiled=function(q,w=S){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(q,this.parameters,w,this.datefields);if(F("esri-csp-restrictions"))return this.testFeature(q,w);this.compileMe();return!!this.parseTree._compiledVersion(q,
this.parameters,w,this.datefields)};I.getFunctions=function(){const q=new Set;this.visitAll(this.parseTree,w=>{"function"===w.type&&q.add(w.name.toLowerCase())});return Array.from(q)};I.getExpressions=function(){const q=new Map;this.visitAll(this.parseTree,w=>{if("function"===w.type){const N=w.name.toLowerCase();w=w.args.value[0];if("column_ref"===w.type){w=w.column;const X=`${N}-${w}`;q.has(X)||q.set(X,{aggregateType:N,field:w})}}});return[...q.values()]};I.getVariables=function(){const q=new Set;
this.visitAll(this.parseTree,w=>{"param"===w.type&&q.add(w.value.toLowerCase())});return Array.from(q)};I.compileMe=function(){const q="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",q)).bind(m)};I.extractExpressionInfo=function(q){const w=[],N=new Set;let X=!0,ca=!0;this.visitAll(this.parseTree,ja=>{switch(ja.type){case "column_ref":{const na=q.get(ja.column);let ta,
ma;na?ta=ma=na.name:(ma=ja.column,ta=ma.toLowerCase());!na||"date"!==na.type&&"esriFieldTypeDate"!==na.type||(this.datefields[na.name]=1);N.has(ta)||(N.add(ta),w.push(ma));ja.column=ma;break}case "function":{const {name:na,args:ta}=ja;ja=ta.value.length;X&&(X=p.isStandardized(na,ja));ca&&(ca=M.isAggregate(na,ja))}}});return{referencedFieldNames:Array.from(w),isStandardized:X,isAggregate:ca}};I.visitAll=function(q,w){if(null!=q)switch(w(q),q.type){case "when_clause":this.visitAll(q.operand,w);this.visitAll(q.value,
w);break;case "case_expression":for(const N of q.clauses)this.visitAll(N,w);"simple"===q.format&&this.visitAll(q.operand,w);null!==q.else&&this.visitAll(q.else,w);break;case "expr_list":for(const N of q.value)this.visitAll(N,w);break;case "unary_expr":this.visitAll(q.expr,w);break;case "binary_expr":this.visitAll(q.left,w);this.visitAll(q.right,w);break;case "function":this.visitAll(q.args,w)}};I.evaluateNodeToJavaScript=function(q){switch(q.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(q.value)+
", "+JSON.stringify(q.qualifier)+","+JSON.stringify(q.op)+")";case "case_expression":var w="";if("simple"===q.format){var N="this.makeComparable("+this.evaluateNodeToJavaScript(q.operand)+")";w="( ";for(let X=0;X<q.clauses.length;X++)w+=" ("+N+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(q.clauses[X].operand)+")) ? ("+this.evaluateNodeToJavaScript(q.clauses[X].value)+") : "}else for(w="( ",N=0;N<q.clauses.length;N++)w+=" this.makeBool("+this.evaluateNodeToJavaScript(q.clauses[N].operand)+
")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(q.clauses[N].value)+") : ";w=null!==q.else?w+this.evaluateNodeToJavaScript(q.else):w+"null";return w+=" )";case "param":return"this.lookup("+JSON.stringify(q.value.toLowerCase())+",lookups)";case "expr_list":w="[";for(N of q.value)"["!==w&&(w+=","),w+=this.evaluateNodeToJavaScript(N);return w+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(q.expr)+")";case "binary_expr":switch(q.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+" )";case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")";case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(q.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(q.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+
this.evaluateNodeToJavaScript(q.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")"}throw Error("Not Supported Operator "+q.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(q.value);case "date":return"(new Date("+t(q.value).getTime().toString()+"))";case "timestamp":return"(new Date("+u(q.value).getTime().toString()+"))";case "current_time":return"date"===
q.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(q.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(q.name)+","+this.evaluateNodeToJavaScript(q.args)+")"}throw Error("Unsupported sql syntax "+q.type);};I.evaluateNode=function(q,w,N){switch(q.type){case "interval":return w=this.evaluateNode(q.value,w,N),p.SqlInterval.createFromValueAndQualifer(w,q.qualifier,q.op);case "case_expression":if("simple"===
q.format){var X=g(this.evaluateNode(q.operand,w,N));for(var ca=0;ca<q.clauses.length;ca++)if(X===g(this.evaluateNode(q.clauses[ca].operand,w,N)))return this.evaluateNode(q.clauses[ca].value,w,N)}else for(X=0;X<q.clauses.length;X++)if(!0===this.evaluateNode(q.clauses[X].operand,w,N))return this.evaluateNode(q.clauses[X].value,w,N);return null!==q.else?this.evaluateNode(q.else,w,N):null;case "param":return this.parameters[q.value.toLowerCase()];case "expr_list":X=[];for(ca of q.value)X.push(this.evaluateNode(ca,
w,N));return X;case "unary_expr":return L(this.evaluateNode(q.expr,w,N));case "binary_expr":switch(q.operator){case "AND":return x(this.evaluateNode(q.left,w,N),this.evaluateNode(q.right,w,N));case "OR":return h(this.evaluateNode(q.left,w,N),this.evaluateNode(q.right,w,N));case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(q.left,w,N);case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(q.left,
w,N);case "IN":return X=z(this.evaluateNode(q.right,w,N)),H(this.evaluateNode(q.left,w,N),X);case "NOT IN":return X=z(this.evaluateNode(q.right,w,N)),L(H(this.evaluateNode(q.left,w,N),X));case "BETWEEN":return X=this.evaluateNode(q.left,w,N),q=this.evaluateNode(q.right,w,N),null==X||null==q[0]||null==q[1]?null:X>=g(q[0])&&X<=g(q[1]);case "NOTBETWEEN":return X=this.evaluateNode(q.left,w,N),q=this.evaluateNode(q.right,w,N),null==X||null==q[0]||null==q[1]?null:X<g(q[0])||X>g(q[1]);case "LIKE":return b(this.evaluateNode(q.left,
w,N),this.evaluateNode(q.right,w,N),q.escape);case "NOT LIKE":return L(b(this.evaluateNode(q.left,w,N),this.evaluateNode(q.right,w,N),q.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return r(q.operator,this.evaluateNode(q.left,w,N),this.evaluateNode(q.right,w,N));case "-":case "+":case "*":case "/":return B(q.operator,this.evaluateNode(q.left,w,N),this.evaluateNode(q.right,w,N))}case "null":case "bool":case "string":case "number":return q.value;case "date":return t(q.value);
case "timestamp":return u(q.value);case "current_time":return w=new Date,"date"===q.mode&&w.setHours(0,0,0,0),w;case "column_ref":return l(w,q.column,this.datefields,N);case "function":return w=this.evaluateNode(q.args,w,N),this.isAggregate?M.aggregateFunction(q.name,w):p.evaluateFunction(q.name,w)}throw Error("Unsupported sql syntax "+q.type);};a._createClass(P,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;
this._hasDateFunctions=!1;this.visitAll(this.parseTree,q=>{"current_time"===q.type?this._hasDateFunctions=!0:"function"===q.type&&(this._hasDateFunctions=this._hasDateFunctions||k.has(q.name.toLowerCase()))});return this._hasDateFunctions}}]);return P}();const S={getAttribute(P,I){return(P&&"object"===typeof P.attributes?P.attributes:P)[I]}};c.WhereClause=A;c.defaultAttributeAdapter=S;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],
function(c){function a(p){let n=0;for(let y=0;y<p.length;y++)n+=p[y];return n/p.length}function F(p){const n=a(p),y=p.length;let C=0;for(const u of p)C+=(u-n)**2;return 1<y?C/(y-1):0}const M={min:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.min.apply(Math,p[0])},max:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.max.apply(Math,p[0])},avg:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:a(p[0])},sum:{minParams:1,maxParams:1,evaluate:p=>{if(null==p[0])p=null;else{{p=p[0];
let n=0;for(let y=0;y<p.length;y++)n+=p[y];p=n}}return p}},stddev:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sqrt(F(p[0]))},count:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].length},var:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:F(p[0])}};c.aggregateFunction=function(p,n){const y=M[p.toLowerCase()];if(null==y)throw Error("Function Not Recognised");if(n.length<y.minParams||n.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);
return y.evaluate(n)};c.isAggregate=function(p,n){p=M[p.toLowerCase()];return null!=p&&n>=p.minParams&&n<=p.maxParams};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(c,a){let F=function(){function p(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}p.fixDefaults=function(n){if(null!==n.precision||null!==n.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");
};p.createFromMilliseconds=function(n){const y=new p;y.second=n/1E3;return y};p.createFromValueAndQualifer=function(n,y,C){let u=null;const t=new p;t.op="-"===C?"-":"+";if("interval-period"===y.type){p.fixDefaults(y);if("year"===y.period||"month"===y.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(n))t[y.period]=parseFloat(n);else throw Error("Illegal Interval");}else{p.fixDefaults(y.start);p.fixDefaults(y.end);if("year"===y.start.period||"month"===y.start.period)throw Error("Year-Month Intervals not supported");
if("year"===y.end.period||"month"===y.end.period)throw Error("Year-Month Intervals not supported");switch(y.start.period){case "day":switch(y.end.period){case "hour":u=/^[0-9]{1,} [0-9]{1,}$/;if(u.test(n))t[y.start.period]=parseFloat(n.split(" ")[0]),t[y.end.period]=parseFloat(n.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":u=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(u.test(n))t[y.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),t.hour=parseFloat(n[0]),
t.minute=parseFloat(n[1]);else throw Error("Illegal Interval");break;case "second":u=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(u.test(n))t[y.start.period]=parseFloat(n.split(" ")[0]),n=n.split(" ")[1].split(":"),t.hour=parseFloat(n[0]),t.minute=parseFloat(n[1]),t.second=parseFloat(n[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(y.end.period){case "minute":u=/^[0-9]{1,}:[0-9]{1,}$/;if(u.test(n))t.hour=parseFloat(n.split(":")[0]),
t.minute=parseFloat(n.split(":")[1]);else throw Error("Illegal Interval");break;case "second":u=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(u.test(n))n=n.split(":"),t.hour=parseFloat(n[0]),t.minute=parseFloat(n[1]),t.second=parseFloat(n[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(y.end.period){case "second":u=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(u.test(n))n=n.split(":"),t.minute=parseFloat(n[0]),t.second=parseFloat(n[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return t};p.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return p}();const M={extract:{minParams:2,maxParams:2,evaluate:([p,n])=>{if(null==n)return null;if(n instanceof Date)switch(p.toUpperCase()){case "SECOND":return n.getSeconds();case "MINUTE":return n.getMinutes();
case "HOUR":return n.getHours();case "DAY":return n.getDate();case "MONTH":return n.getMonth()+1;case "YEAR":return n.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:p=>{if(2===p.length){const [n,y]=p;return null==n||null==y?null:n.toString().substring(y-1)}if(3===p.length){const [n,y,C]=p;return null==n||null==y||null==C?null:0>=C?"":n.toString().substring(y-1,y+C-1)}}},position:{minParams:2,maxParams:2,evaluate:([p,n])=>null==p||
null==n?null:n.indexOf(p)+1},trim:{minParams:2,maxParams:3,evaluate:p=>{var n=3===p.length,y=n?p[1]:" ";n=n?p[2]:p[1];if(null==y||null==n)return null;y=`(${a.escapeRegExpString(y)})`;switch(p[0]){case "BOTH":return n.replace(new RegExp(`^${y}*|${y}*$`,"g"),"");case "LEADING":return n.replace(new RegExp(`^${y}*`,"g"),"");case "TRAILING":return n.replace(new RegExp(`${y}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.abs(p[0])},
ceiling:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.ceil(p[0])},floor:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.floor(p[0])},log:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])},log10:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sin(p[0])},cos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.cos(p[0])},tan:{minParams:1,maxParams:1,evaluate:p=>
null==p[0]?null:Math.tan(p[0])},asin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.asin(p[0])},acos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.acos(p[0])},atan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.atan(p[0])},sign:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:0<p[0]?1:0>p[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]**p[1]},mod:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]%p[1]},round:{minParams:1,
maxParams:2,evaluate:p=>{const n=p[0];p=2===p.length?10**p[1]:1;return null==n?null:Math.round(n*p)/p}},truncate:{minParams:1,maxParams:2,evaluate:p=>null==p[0]?null:1===p.length?parseInt(p[0].toFixed(0),10):parseFloat(p[0].toFixed(p[1]))},char_length:{minParams:1,maxParams:1,evaluate:p=>"string"===typeof p[0]||p[0]instanceof String?p[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:p=>{let n="";for(let y=0;y<p.length;y++){if(null==p[y])return null;n+=p[y].toString()}return n}},lower:{minParams:1,
maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toUpperCase()}};c.SqlInterval=F;c.evaluateFunction=function(p,n){const y=M[p.toLowerCase()];if(null==y)throw Error("Function Not Recognised");if(n.length<y.minParams||n.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return y.evaluate(n)};c.isStandardized=function(p,n){p=M[p.toLowerCase()];return null!=p&&n>=p.minParams&&
n<=p.maxParams};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(c,a){var F={exports:{}};(function(p){(function(n,y){p.exports&&(p.exports=y())})(a.commonjsGlobal,function(){function n(C,u,t,z){C=Error.call(this,C);Object.setPrototypeOf&&Object.setPrototypeOf(C,n.prototype);C.expected=u;C.found=t;C.location=z;C.name="SyntaxError";return C}function y(C,u,t){t=t||" ";if(C.length>u)return C;u-=C.length;
t+=t.repeat(u);return C+t.slice(0,u)}(function(C,u){function t(){this.constructor=C}t.prototype=u.prototype;C.prototype=new t})(n,Error);n.prototype.format=function(C){var u="Error: "+this.message;if(this.location){var t=null,z;for(z=0;z<C.length;z++)if(C[z].source===this.location.source){t=C[z].text.split(/\r\n|\n|\r/g);break}C=this.location.start;z=this.location.source+":"+C.line+":"+C.column;if(t){var L=this.location.end,x=y("",C.line.toString().length);t=t[C.line-1];L=C.line===L.line?L.column:
t.length+1;u+="\n --\x3e "+z+"\n"+x+" |\n"+C.line+" | "+t+"\n"+x+" | "+y("",C.column-1)+y("",L-C.column,"^")}else u+="\n at "+z}return u};n.buildMessage=function(C,u){function t(H){return H.charCodeAt(0).toString(16).toUpperCase()}function z(H){return H.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+t(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+t(b)})}function L(H){return H.replace(/\\/g,
"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(b){return"\\x0"+t(b)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(b){return"\\x"+t(b)})}function x(H){return h[H.type](H)}var h={literal:function(H){return'"'+z(H.text)+'"'},class:function(H){var b=H.parts.map(function(g){return Array.isArray(g)?L(g[0])+"-"+L(g[1]):L(g)});return"["+(H.inverted?"^":"")+b+"]"},any:function(){return"any character"},
end:function(){return"end of input"},other:function(H){return H.description}};return"Expected "+function(H){H=H.map(x);var b,g;H.sort();if(0<H.length){for(g=b=1;b<H.length;b++)H[b-1]!==H[b]&&(H[g]=H[b],g++);H.length=g}switch(H.length){case 1:return H[0];case 2:return H[0]+" or "+H[1];default:return H.slice(0,-1).join(", ")+", or "+H[H.length-1]}}(C)+" but "+(u?'"'+z(u)+'"':"end of input")+" found."};return{SyntaxError:n,parse:function(C,u){function t(K,R){return{type:"literal",text:K,ignoreCase:R}}
function z(K,R,Z){return{type:"class",parts:K,inverted:R,ignoreCase:Z}}function L(K){var R=Zb[K],Z;if(!R){for(Z=K-1;!Zb[Z];)Z--;R=Zb[Z];for(R={line:R.line,column:R.column};Z<K;)10===C.charCodeAt(Z)?(R.line++,R.column=1):R.column++,Z++;Zb[K]=R}return R}function x(K,R){var Z=L(K),qa=L(R);return{source:$a,start:{offset:K,line:Z.line,column:Z.column},end:{offset:R,line:qa.line,column:qa.column}}}function h(K){v<ob||(v>ob&&(ob=v,tc=[]),tc.push(K))}function H(){var K=v;ra();var R=g();R!==d?(ra(),K=R):(v=
K,K=d);return K}function b(){var K=v;var R=g();if(R!==d){K=[];var Z=v;var qa=ra();var Aa=Ea();if(Aa!==d){var La=ra();var Ma=g();Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)}else v=Z,Z=d;for(;Z!==d;)K.push(Z),Z=v,qa=ra(),Aa=Ea(),Aa!==d?(La=ra(),Ma=g(),Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)):(v=Z,Z=d);Z={type:"expr_list"};R=[R];for(qa=0;qa<K.length;qa++)R.push(K[qa][3]);Z.value=R;K=Z}else v=K,K=d;return K}function g(){var K=v;var R=r();if(R!==d){K=[];var Z=v;var qa=ra();var Aa=W();if(Aa!==d){var La=ra();var Ma=
r();Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)}else v=Z,Z=d;for(;Z!==d;)K.push(Z),Z=v,qa=ra(),Aa=W(),Aa!==d?(La=ra(),Ma=r(),Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)):(v=Z,Z=d);K=Va(R,K)}else v=K,K=d;return K}function r(){var K=v;var R=B();if(R!==d){K=[];var Z=v;var qa=ra();var Aa=T();if(Aa!==d){var La=ra();var Ma=B();Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)}else v=Z,Z=d;for(;Z!==d;)K.push(Z),Z=v,qa=ra(),Aa=T(),Aa!==d?(La=ra(),Ma=B(),Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)):(v=Z,Z=d);K=Va(R,K)}else v=K,K=d;return K}function B(){var K=
v;var R=D();if(R===d){R=v;if(33===C.charCodeAt(v)){var Z=sb;v++}else Z=d,0===sa&&h(ld);if(Z!==d){var qa=v;sa++;if(61===C.charCodeAt(v)){var Aa=jb;v++}else Aa=d,0===sa&&h(Jc);sa--;Aa===d?qa=void 0:(v=qa,qa=d);qa!==d?R=Z=[Z,qa]:(v=R,R=d)}else v=R,R=d}R!==d?(Z=ra(),qa=B(),qa!==d?K={type:"unary_expr",operator:"NOT",expr:qa}:(v=K,K=d)):(v=K,K=d);if(K===d){R=v;K=O();if(K!==d){ra();R=[];Z=v;qa=ra();Aa=l();if(Aa!==d){var La=ra();var Ma=O();Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)}else v=Z,Z=d;if(Z!==d)for(;Z!==
d;)R.push(Z),Z=v,qa=ra(),Aa=l(),Aa!==d?(La=ra(),Ma=O(),Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)):(v=Z,Z=d);else R=d;R!==d&&(R={type:"arithmetic",tail:R});R===d&&(R=v,Z=J(),Z!==d?(ra(),qa=Fa(),qa!==d?(ra(),qa=b(),qa!==d?(ra(),Aa=Pa(),Aa!==d?R={op:Z,right:qa}:(v=R,R=d)):(v=R,R=d)):(v=R,R=d)):(v=R,R=d),R===d&&(R=v,Z=J(),Z!==d?(ra(),qa=Fa(),qa!==d?(ra(),qa=Pa(),qa!==d?R={op:Z,right:{type:"expr_list",value:[]}}:(v=R,R=d)):(v=R,R=d)):(v=R,R=d),R===d&&(R=v,Z=J(),Z!==d?(ra(),qa=q(),qa!==d?R={op:Z,right:qa}:(v=
R,R=d)):(v=R,R=d))),R===d&&(R=v,Aa=D(),Aa!==d?(ra(),Z=Y(),Z!==d?(ra(),qa=O(),qa!==d?(ra(),La=T(),La!==d?(ra(),Aa=O(),Aa!==d?R={op:"NOT"+Z,right:{type:"expr_list",value:[qa,Aa]}}:(v=R,R=d)):(v=R,R=d)):(v=R,R=d)):(v=R,R=d)):(v=R,R=d),R===d&&(R=v,Aa=Y(),Aa!==d?(ra(),Z=O(),Z!==d?(ra(),qa=T(),qa!==d?(ra(),La=O(),La!==d?R={op:Aa,right:{type:"expr_list",value:[Z,La]}}:(v=R,R=d)):(v=R,R=d)):(v=R,R=d)):(v=R,R=d)),R===d&&(R=v,Z=G(),Z!==d?(ra(),qa=D(),qa!==d?(ra(),qa=O(),qa!==d?R={op:Z+"NOT",right:qa}:(v=R,
R=d)):(v=R,R=d)):(v=R,R=d),R===d&&(R=v,Z=G(),Z!==d?(ra(),qa=O(),qa!==d?R={op:Z,right:qa}:(v=R,R=d)):(v=R,R=d)),R===d&&(R=v,Z=E(),Z!==d?(ra(),qa=na(),qa!==d?(ra(),Aa=v,C.substr(v,6).toLowerCase()===Ta?(La=C.substr(v,6),v+=6):(La=d,0===sa&&h(md)),La!==d?(La=v,sa++,Ma=P(),sa--,Ma===d?La=void 0:(v=La,La=d),La!==d?Aa="ESCAPE":(v=Aa,Aa=d)):(v=Aa,Aa=d),Aa!==d?(ra(),Aa=ta(),Aa!==d?R={op:Z,right:qa,escape:Aa.value}:(v=R,R=d)):(v=R,R=d)):(v=R,R=d)):(v=R,R=d),R===d&&(R=v,Z=E(),Z!==d?(ra(),qa=na(),qa!==d?R={op:Z,
right:qa,escape:""}:(v=R,R=d)):(v=R,R=d))))));R===d&&(R=null);""==R||void 0==R||null==R?R=K:(Z=null,R=Z="arithmetic"==R.type?Va(K,R.tail):Ua(R.op,K,R.right,R.escape))}else v=R,R=d;K=R}return K}function l(){if(C.substr(v,2)===Ab){var K=Ab;v+=2}else K=d,0===sa&&h(nd);K===d&&(62===C.charCodeAt(v)?(K=$b,v++):(K=d,0===sa&&h(od)),K===d&&(C.substr(v,2)===Cb?(K=Cb,v+=2):(K=d,0===sa&&h(pd)),K===d&&(C.substr(v,2)===ac?(K=ac,v+=2):(K=d,0===sa&&h(qd)),K===d&&(60===C.charCodeAt(v)?(K=kb,v++):(K=d,0===sa&&h(rd)),
K===d&&(61===C.charCodeAt(v)?(K=jb,v++):(K=d,0===sa&&h(Jc)),K===d&&(C.substr(v,2)===tb?(K=tb,v+=2):(K=d,0===sa&&h(sd))))))));return K}function E(){var K=K=v;var R=D();if(R!==d){var Z=ra();var qa=ea();qa!==d?K=R=[R,Z,qa]:(v=K,K=d)}else v=K,K=d;K!==d&&(K=K[0]+" "+K[2]);K===d&&(K=ea());return K}function J(){var K=K=v;var R=D();if(R!==d){var Z=ra();var qa=e();qa!==d?K=R=[R,Z,qa]:(v=K,K=d)}else v=K,K=d;K!==d&&(K=K[0]+" "+K[2]);K===d&&(K=e());return K}function O(){var K=v;var R=f();if(R!==d){K=[];var Z=
v;var qa=ra();var Aa=Q();if(Aa!==d){var La=ra();var Ma=f();Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)}else v=Z,Z=d;for(;Z!==d;)K.push(Z),Z=v,qa=ra(),Aa=Q(),Aa!==d?(La=ra(),Ma=f(),Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)):(v=Z,Z=d);K=Va(R,K)}else v=K,K=d;return K}function Q(){if(43===C.charCodeAt(v)){var K=Qa;v++}else K=d,0===sa&&h(uc);K===d&&(45===C.charCodeAt(v)?(K=eb,v++):(K=d,0===sa&&h(vc)));return K}function f(){var K=v;var R=m();if(R!==d){K=[];var Z=v;var qa=ra();var Aa=k();if(Aa!==d){var La=ra();var Ma=
m();Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)}else v=Z,Z=d;for(;Z!==d;)K.push(Z),Z=v,qa=ra(),Aa=k(),Aa!==d?(La=ra(),Ma=m(),Ma!==d?Z=qa=[qa,Aa,La,Ma]:(v=Z,Z=d)):(v=Z,Z=d);K=Va(R,K)}else v=K,K=d;return K}function k(){if(42===C.charCodeAt(v)){var K=pb;v++}else K=d,0===sa&&h(td);K===d&&(47===C.charCodeAt(v)?(K=Na,v++):(K=d,0===sa&&h(ud)));return K}function m(){var K=ta();if(K===d){var R=v;var Z=v;var qa=Ja();if(qa!==d){var Aa=Ba();if(Aa!==d){var La=Sa();La!==d?Z=parseFloat(qa+Aa+La):(v=Z,Z=d)}else v=Z,Z=d}else v=
Z,Z=d;Z===d&&(Z=v,qa=Ja(),qa!==d?(Aa=Ba(),Aa!==d?Z=parseFloat(qa+Aa):(v=Z,Z=d)):(v=Z,Z=d),Z===d&&(Z=v,qa=Ja(),qa!==d?(Aa=Sa(),Aa!==d?Z=parseFloat(qa+Aa):(v=Z,Z=d)):(v=Z,Z=d),Z===d&&(Z=v,qa=Ja(),qa!==d&&(qa=parseFloat(qa)),Z=qa)));var Ma=Z;if(Ma!==d){var bc=v;sa++;var vd=S();sa--;vd===d?bc=void 0:(v=bc,bc=d);bc!==d?R={type:"number",value:Ma}:(v=R,R=d)}else v=R,R=d;K=R;if(K===d){var Pb=v;var Db=v;if(C.substr(v,4).toLowerCase()===ya){var cc=C.substr(v,4);v+=4}else cc=d,0===sa&&h(wd);if(cc!==d){var Qb=
v;sa++;var xd=P();sa--;xd===d?Qb=void 0:(v=Qb,Qb=d);Qb!==d?Db=cc=[cc,Qb]:(v=Db,Db=d)}else v=Db,Db=d;var Bb=Db;Bb!==d&&(Bb={type:"bool",value:!0});Pb=Bb;if(Pb===d){Pb=v;var Eb=v;if(C.substr(v,5).toLowerCase()===Ha){var dc=C.substr(v,5);v+=5}else dc=d,0===sa&&h(yd);if(dc!==d){var Rb=v;sa++;var zd=P();sa--;zd===d?Rb=void 0:(v=Rb,Rb=d);Rb!==d?Eb=dc=[dc,Rb]:(v=Eb,Eb=d)}else v=Eb,Eb=d;Bb=Eb;Bb!==d&&(Bb={type:"bool",value:!1});Pb=Bb}K=Pb;if(K===d){var Fb=v;if(C.substr(v,4).toLowerCase()===xa){var ec=C.substr(v,
4);v+=4}else ec=d,0===sa&&h(Ad);if(ec!==d){var Sb=v;sa++;var Bd=P();sa--;Bd===d?Sb=void 0:(v=Sb,Sb=d);Sb!==d?Fb=ec=[ec,Sb]:(v=Fb,Fb=d)}else v=Fb,Fb=d;var wc=Fb;wc!==d&&(wc={type:"null",value:null});K=wc;if(K===d){var Gb=v;var Hb=v;if(C.substr(v,4).toLowerCase()===Cd){var Kc=C.substr(v,4);v+=4}else Kc=d,0===sa&&h(Dd);if(Kc!==d){var fc=v;sa++;var Ed=P();sa--;Ed===d?fc=void 0:(v=fc,fc=d);fc!==d?Hb="DATE":(v=Hb,Hb=d)}else v=Hb,Hb=d;if(Hb!==d){ra();var Lc=na();Lc!==d?Gb={type:"date",value:Lc.value}:(v=
Gb,Gb=d)}else v=Gb,Gb=d;K=Gb;if(K===d){var Ib=v;var Jb=v;if(C.substr(v,9).toLowerCase()===Fd){var Mc=C.substr(v,9);v+=9}else Mc=d,0===sa&&h(Gd);if(Mc!==d){var gc=v;sa++;var Hd=P();sa--;Hd===d?gc=void 0:(v=gc,gc=d);gc!==d?Jb="TIMESTAMP":(v=Jb,Jb=d)}else v=Jb,Jb=d;if(Jb!==d){ra();var Nc=na();Nc!==d?Ib={type:"timestamp",value:Nc.value}:(v=Ib,Ib=d)}else v=Ib,Ib=d;K=Ib;if(K===d){var bb=v;var xc=U();if(xc!==d){ra();if(45===C.charCodeAt(v)){var ub=eb;v++}else ub=d,0===sa&&h(vc);ub===d&&(43===C.charCodeAt(v)?
(ub=Qa,v++):(ub=d,0===sa&&h(uc)));if(ub!==d){ra();var Tb=na();if(Tb!==d){ra();var Oc=N();Oc!==d?bb={type:"interval",value:Tb,qualifier:Oc,op:ub}:(v=bb,bb=d)}else v=bb,bb=d}else v=bb,bb=d}else v=bb,bb=d;bb===d&&(bb=v,xc=U(),xc!==d?(ra(),ub=na(),ub!==d?(ra(),Tb=N(),Tb!==d?bb={type:"interval",value:ub,qualifier:Tb,op:""}:(v=bb,bb=d)):(v=bb,bb=d)):(v=bb,bb=d));K=bb}}}}}}var Xa=K;if(Xa===d){var gb=v;var Kb=v;if(C.substr(v,7).toLowerCase()===Id){var Pc=C.substr(v,7);v+=7}else Pc=d,0===sa&&h(Jd);if(Pc!==
d){var hc=v;sa++;var Kd=P();sa--;Kd===d?hc=void 0:(v=hc,hc=d);hc!==d?Kb="EXTRACT":(v=Kb,Kb=d)}else v=Kb,Kb=d;if(Kb!==d){ra();var Ld=Fa();if(Ld!==d){ra();var mb=V();mb===d&&(mb=da(),mb===d&&(mb=oa(),mb===d&&(mb=pa(),mb===d&&(mb=ua(),mb===d&&(mb=wa())))));var Qc=mb;if(Qc!==d){ra();var Md=ia();if(Md!==d){ra();var Rc=g();if(Rc!==d){ra();var Nd=Pa();Nd!==d?gb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Qc},Rc]}}:(v=gb,gb=d)}else v=gb,gb=d}else v=gb,gb=d}else v=gb,
gb=d}else v=gb,gb=d}else v=gb,gb=d;Xa=gb;if(Xa===d){var hb=v;var Lb=v;if(C.substr(v,9).toLowerCase()===Od){var Sc=C.substr(v,9);v+=9}else Sc=d,0===sa&&h(Pd);if(Sc!==d){var ic=v;sa++;var Qd=P();sa--;Qd===d?ic=void 0:(v=ic,ic=d);ic!==d?Lb="SUBSTRING":(v=Lb,Lb=d)}else v=Lb,Lb=d;if(Lb!==d){ra();var Rd=Fa();if(Rd!==d){ra();var yc=g();if(yc!==d){ra();var Sd=ia();if(Sd!==d){ra();var zc=g();if(zc!==d){ra();var vb=v;var Mb=v;if(C.substr(v,3).toLowerCase()===Td){var Tc=C.substr(v,3);v+=3}else Tc=d,0===sa&&
h(Ud);if(Tc!==d){var jc=v;sa++;var Vd=P();sa--;Vd===d?jc=void 0:(v=jc,jc=d);jc!==d?Mb="FOR":(v=Mb,Mb=d)}else v=Mb,Mb=d;var Ub=Mb;if(Ub!==d){var Wd=ra();var Uc=g();if(Uc!==d){var Xd=ra();vb=Ub=[Ub,Wd,Uc,Xd]}else v=vb,vb=d}else v=vb,vb=d;vb===d&&(vb=null);Ub=Pa();Ub!==d?hb={type:"function",name:"substring",args:{type:"expr_list",value:vb?[yc,zc,vb[2]]:[yc,zc]}}:(v=hb,hb=d)}else v=hb,hb=d}else v=hb,hb=d}else v=hb,hb=d}else v=hb,hb=d}else v=hb,hb=d;Xa=hb;if(Xa===d){var Za=v;var Ac=fa();if(Ac!==d){ra();
var Bc=Fa();if(Bc!==d){ra();var wb=w();wb===d&&(wb=null);ra();var Vb=g();if(Vb!==d){ra();var Cc=ia();if(Cc!==d){ra();var Vc=g();if(Vc!==d){ra();var Yd=Pa();Yd!==d?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb,Vc]}}:(v=Za,Za=d)}else v=Za,Za=d}else v=Za,Za=d}else v=Za,Za=d}else v=Za,Za=d}else v=Za,Za=d;Za===d&&(Za=v,Ac=fa(),Ac!==d?(ra(),Bc=Fa(),Bc!==d?(ra(),wb=w(),wb===d&&(wb=null),ra(),Vb=g(),Vb!==d?(ra(),Cc=Pa(),Cc!==d?Za={type:"function",
name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==wb?"BOTH":wb},Vb]}}:(v=Za,Za=d)):(v=Za,Za=d)):(v=Za,Za=d)):(v=Za,Za=d));Xa=Za;if(Xa===d){var ib=v;var Nb=v;if(C.substr(v,8).toLowerCase()===Zd){var Wc=C.substr(v,8);v+=8}else Wc=d,0===sa&&h($d);if(Wc!==d){var kc=v;sa++;var ae=P();sa--;ae===d?kc=void 0:(v=kc,kc=d);kc!==d?Nb="POSITION":(v=Nb,Nb=d)}else v=Nb,Nb=d;if(Nb!==d){ra();var be=Fa();if(be!==d){ra();var Xc=g();if(Xc!==d){ra();var ce=e();if(ce!==d){ra();var Yc=g();if(Yc!==d){ra();
var de=Pa();de!==d?ib={type:"function",name:"position",args:{type:"expr_list",value:[Xc,Yc]}}:(v=ib,ib=d)}else v=ib,ib=d}else v=ib,ib=d}else v=ib,ib=d}else v=ib,ib=d}else v=ib,ib=d;Xa=ib;if(Xa===d){var yb=v;var lc;var nb=v;nb=lc=A();if(nb===d)if(nb=v,96===C.charCodeAt(v)?(lc=Zc,v++):(lc=d,0===sa&&h($c)),lc!==d){var mc=[];if(ad.test(C.charAt(v))){var xb=C.charAt(v);v++}else xb=d,0===sa&&h(bd);if(xb!==d)for(;xb!==d;)mc.push(xb),ad.test(C.charAt(v))?(xb=C.charAt(v),v++):(xb=d,0===sa&&h(bd));else mc=
d;mc!==d?(96===C.charCodeAt(v)?(xb=Zc,v++):(xb=d,0===sa&&h($c)),xb!==d?nb=mc.join(""):(v=nb,nb=d)):(v=nb,nb=d)}else v=nb,nb=d;var cd=nb;if(cd!==d){ra();var ee=Fa();if(ee!==d){ra();var nc=b();nc===d&&(nc=null);ra();var fe=Pa();fe!==d?yb={type:"function",name:cd,args:nc?nc:{type:"expr_list",value:[]}}:(v=yb,yb=d)}else v=yb,yb=d}else v=yb,yb=d;Xa=yb;if(Xa===d){var qb;var cb=v;var Dc=za();if(Dc!==d){ra();var Wb=g();if(Wb!==d){ra();var Xb=[];for(qb=la();qb!==d;)Xb.push(qb),qb=la();qb=ra();var oc=Ga();
oc!==d?cb={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:null}:(v=cb,cb=d)}else v=cb,cb=d}else v=cb,cb=d;if(cb===d)if(cb=v,Dc=za(),Dc!==d)if(ra(),Wb=g(),Wb!==d){ra();Xb=[];for(qb=la();qb!==d;)Xb.push(qb),qb=la();qb=ra();oc=va();if(oc!==d){ra();var ge=Ga();ge!==d?cb={type:"case_expression",format:"simple",operand:Wb,clauses:Xb,else:oc.value}:(v=cb,cb=d)}else v=cb,cb=d}else v=cb,cb=d;else v=cb,cb=d;var Ec=cb;if(Ec===d){var rb;var fb=v;var Fc=za();if(Fc!==d){ra();var Yb=[];for(rb=
ma();rb!==d;)Yb.push(rb),rb=ma();rb=ra();var pc=Ga();pc!==d?fb={type:"case_expression",format:"searched",clauses:Yb,else:null}:(v=fb,fb=d)}else v=fb,fb=d;if(fb===d)if(fb=v,Fc=za(),Fc!==d){ra();Yb=[];for(rb=ma();rb!==d;)Yb.push(rb),rb=ma();rb=ra();pc=va();if(pc!==d){ra();var he=Ga();he!==d?fb={type:"case_expression",format:"searched",clauses:Yb,else:pc.value}:(v=fb,fb=d)}else v=fb,fb=d}else v=fb,fb=d;Ec=fb}Xa=Ec;if(Xa===d){var qc;var rc=v;var dd=S();if(dd!==d){var ed=[];for(qc=I();qc!==d;)ed.push(qc),
qc=I();rc=dd+ed.join("")}else v=rc,rc=d;var sc=rc;if(sc!==d){var Gc=sc;sc=/^CURRENT_DATE$/i.test(Gc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Gc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Gc}}Xa=sc;if(Xa===d&&(Xa=q(),Xa===d)){Xa=v;var ie=Fa();if(ie!==d){ra();var Hc=g();if(Hc!==d){ra();var je=Pa();je!==d?(Hc.paren=!0,Xa=Hc):(v=Xa,Xa=d)}else v=Xa,Xa=d}else v=Xa,Xa=d}}}}}}}}return Xa}function A(){var K;var R=v;var Z=S();if(Z!==d){R=[];for(K=P();K!==
d;)R.push(K),K=P();R=Z+R.join("")}else v=R,R=d;return R}function S(){if(ke.test(C.charAt(v))){var K=C.charAt(v);v++}else K=d,0===sa&&h(le);return K}function P(){if(me.test(C.charAt(v))){var K=C.charAt(v);v++}else K=d,0===sa&&h(ne);return K}function I(){if(oe.test(C.charAt(v))){var K=C.charAt(v);v++}else K=d,0===sa&&h(pe);return K}function q(){var K=v;if(64===C.charCodeAt(v)){var R=Ob;v++}else R=d,0===sa&&h(qe);if(R!==d){var Z=A();Z!==d?K=R=[R,Z]:(v=K,K=d)}else v=K,K=d;K!==d&&(K={type:"param",value:K[1]});
return K}function w(){var K=v;if(C.substr(v,7).toLowerCase()===re){var R=C.substr(v,7);v+=7}else R=d,0===sa&&h(se);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="LEADING":(v=K,K=d)}else v=K,K=d;K===d&&(K=v,C.substr(v,8).toLowerCase()===te?(R=C.substr(v,8),v+=8):(R=d,0===sa&&h(ue)),R!==d?(R=v,sa++,Z=P(),sa--,Z===d?R=void 0:(v=R,R=d),R!==d?K="TRAILING":(v=K,K=d)):(v=K,K=d),K===d&&(K=v,C.substr(v,4).toLowerCase()===ve?(R=C.substr(v,4),v+=4):(R=d,0===sa&&h(we)),R!==d?(R=v,sa++,Z=
P(),sa--,Z===d?R=void 0:(v=R,R=d),R!==d?K="BOTH":(v=K,K=d)):(v=K,K=d)));return K}function N(){var K=v;var R=v;var Z=X();if(Z!==d){ra();var qa=Fa();if(qa!==d)if(ra(),qa=ja(),qa!==d){ra();var Aa=Pa();Aa!==d?R={type:"interval-period",period:Z.value,precision:qa,secondary:null}:(v=R,R=d)}else v=R,R=d;else v=R,R=d}else v=R,R=d;R===d&&(R=v,Z=X(),Z!==d&&(Z=fd(Z)),R=Z);if(R!==d)if(ra(),Z=v,C.substr(v,2).toLowerCase()===xe?(qa=C.substr(v,2),v+=2):(qa=d,0===sa&&h(ye)),qa!==d?(qa=v,sa++,Aa=P(),sa--,Aa===d?qa=
void 0:(v=qa,qa=d),qa!==d?Z="TO":(v=Z,Z=d)):(v=Z,Z=d),Z!==d){ra();Z=v;qa=X();qa!==d&&(qa={type:"interval-period",period:qa.value,precision:null,secondary:null});Z=qa;if(Z===d){Z=v;qa=wa();if(qa!==d)if(ra(),qa=Fa(),qa!==d)if(ra(),qa=ja(),qa!==d)if(ra(),Aa=Ea(),Aa!==d)if(ra(),Aa=ca(),Aa!==d){ra();var La=Pa();La!==d?Z=gd(qa,Aa):(v=Z,Z=d)}else v=Z,Z=d;else v=Z,Z=d;else v=Z,Z=d;else v=Z,Z=d;else v=Z,Z=d;Z===d&&(Z=v,qa=wa(),qa!==d?(ra(),qa=Fa(),qa!==d?(ra(),qa=ja(),qa!==d?(ra(),Aa=Pa(),Aa!==d?Z={type:"interval-period",
period:"second",precision:qa,secondary:null}:(v=Z,Z=d)):(v=Z,Z=d)):(v=Z,Z=d)):(v=Z,Z=d),Z===d&&(Z=v,qa=wa(),qa!==d&&(qa={type:"interval-period",period:"second",precision:null,secondary:null}),Z=qa))}Z!==d?K={type:"interval-qualifier",start:R,end:Z}:(v=K,K=d)}else v=K,K=d;else v=K,K=d;K===d&&(K=v,Z=X(),Z!==d?(ra(),R=Fa(),R!==d?(ra(),R=ca(),R!==d?(ra(),qa=Pa(),qa!==d?K={type:"interval-period",period:Z.value,precision:R,secondary:null}:(v=K,K=d)):(v=K,K=d)):(v=K,K=d)):(v=K,K=d),K===d&&(K=v,Z=X(),Z!==
d&&(Z=fd(Z)),K=Z,K===d&&(K=v,Z=wa(),Z!==d?(ra(),R=Fa(),R!==d?(ra(),R=ja(),R!==d?(ra(),qa=Ea(),qa!==d?(ra(),Z=ca(),Z!==d?(ra(),qa=Pa(),qa!==d?K=gd(R,Z):(v=K,K=d)):(v=K,K=d)):(v=K,K=d)):(v=K,K=d)):(v=K,K=d)):(v=K,K=d),K===d&&(K=v,Z=wa(),Z!==d?(ra(),R=Fa(),R!==d?(ra(),R=ca(),R!==d?(ra(),qa=Pa(),qa!==d?K={type:"interval-period",period:"second",precision:R,secondary:null}:(v=K,K=d)):(v=K,K=d)):(v=K,K=d)):(v=K,K=d),K===d&&(K=v,Z=wa(),Z!==d&&(Z={type:"interval-period",period:"second",precision:null,secondary:null}),
K=Z)))));return K}function X(){var K=v;K=oa();K!==d&&(K={type:"string",value:"day"});K===d&&(K=v,K=pa(),K!==d&&(K={type:"string",value:"hour"}),K===d&&(K=v,K=ua(),K!==d&&(K={type:"string",value:"minute"}),K===d&&(K=v,K=da(),K!==d&&(K={type:"string",value:"month"}),K===d&&(K=v,K=V(),K!==d&&(K={type:"string",value:"year"})))));return K}function ca(){var K=Oa();K!==d&&(K=parseFloat(K));return K}function ja(){var K=Oa();K!==d&&(K=parseFloat(K));return K}function na(){var K=ta();K===d&&(K=q());return K}
function ta(){var K=v;if(39===C.charCodeAt(v)){var R=ba;v++}else R=d,0===sa&&h(hd);R===d&&(C.substr(v,2)===ha?(R=ha,v+=2):(R=d,0===sa&&h(ze)));if(R!==d){R=[];var Z=v;C.substr(v,2)===aa?(Z=aa,v+=2):(Z=d,0===sa&&h(id));Z!==d&&(Z="'");Z===d&&(jd.test(C.charAt(v))?(Z=C.charAt(v),v++):(Z=d,0===sa&&h(kd)));for(;Z!==d;)R.push(Z),Z=v,C.substr(v,2)===aa?(Z=aa,v+=2):(Z=d,0===sa&&h(id)),Z!==d&&(Z="'"),Z===d&&(jd.test(C.charAt(v))?(Z=C.charAt(v),v++):(Z=d,0===sa&&h(kd)));39===C.charCodeAt(v)?(Z=ba,v++):(Z=d,
0===sa&&h(hd));Z!==d?K={type:"string",value:R.join("")}:(v=K,K=d)}else v=K,K=d;return K}function ma(){var K=v;if(Ca()!==d){ra();var R=g();if(R!==d){ra();var Z=Da();Z!==d?(ra(),Z=g(),Z!==d?K={type:"when_clause",operand:R,value:Z}:(v=K,K=d)):(v=K,K=d)}else v=K,K=d}else v=K,K=d;return K}function la(){var K=v;if(Ca()!==d){ra();var R=g();if(R!==d){ra();var Z=Da();Z!==d?(ra(),Z=g(),Z!==d?K={type:"when_clause",operand:R,value:Z}:(v=K,K=d)):(v=K,K=d)}else v=K,K=d}else v=K,K=d;return K}function va(){var K=
v;var R=v;if(C.substr(v,4).toLowerCase()===Ae){var Z=C.substr(v,4);v+=4}else Z=d,0===sa&&h(Be);if(Z!==d){Z=v;sa++;var qa=P();sa--;qa===d?Z=void 0:(v=Z,Z=d);Z!==d?R="ELSE":(v=R,R=d)}else v=R,R=d;R!==d?(ra(),R=g(),R!==d?K={type:"else_clause",value:R}:(v=K,K=d)):(v=K,K=d);return K}function Ja(){var K=Oa();if(K===d){K=v;if(45===C.charCodeAt(v)){var R=eb;v++}else R=d,0===sa&&h(vc);R===d&&(43===C.charCodeAt(v)?(R=Qa,v++):(R=d,0===sa&&h(uc)));if(R!==d){var Z=Oa();Z!==d?K=R[0]+Z:(v=K,K=d)}else v=K,K=d}return K}
function Ba(){var K=v;if(46===C.charCodeAt(v)){var R=ka;v++}else R=d,0===sa&&h(Ce);R!==d?(K=Oa(),K===d&&(K=null),K="."+(null!=K?K:"")):(v=K,K=d);return K}function Sa(){var K;var R=K=v;if(De.test(C.charAt(v))){var Z=C.charAt(v);v++}else Z=d,0===sa&&h(Ee);Z!==d?(Fe.test(C.charAt(v))?(R=C.charAt(v),v++):(R=d,0===sa&&h(Ge)),R===d&&(R=null),R="e"+(null===R?"":R)):(v=R,R=d);R!==d?(Z=Oa(),Z!==d?K=R+Z:(v=K,K=d)):(v=K,K=d);return K}function Oa(){var K=[];var R=Ia();if(R!==d)for(;R!==d;)K.push(R),R=Ia();else K=
d;K!==d&&(K=K.join(""));return K}function Ia(){if(He.test(C.charAt(v))){var K=C.charAt(v);v++}else K=d,0===sa&&h(Ie);return K}function e(){var K=v;if(C.substr(v,2).toLowerCase()===Ka){var R=C.substr(v,2);v+=2}else R=d,0===sa&&h(Je);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="IN":(v=K,K=d)}else v=K,K=d;return K}function G(){var K=v;if(C.substr(v,2).toLowerCase()===Ya){var R=C.substr(v,2);v+=2}else R=d,0===sa&&h(Ke);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);
R!==d?K="IS":(v=K,K=d)}else v=K,K=d;return K}function ea(){var K=v;if(C.substr(v,4).toLowerCase()===Wa){var R=C.substr(v,4);v+=4}else R=d,0===sa&&h(Le);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="LIKE":(v=K,K=d)}else v=K,K=d;return K}function D(){var K=v;if(C.substr(v,3).toLowerCase()===db){var R=C.substr(v,3);v+=3}else R=d,0===sa&&h(Me);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="NOT":(v=K,K=d)}else v=K,K=d;return K}function T(){var K=v;if(C.substr(v,
3).toLowerCase()===lb){var R=C.substr(v,3);v+=3}else R=d,0===sa&&h(Ne);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="AND":(v=K,K=d)}else v=K,K=d;return K}function W(){var K=v;if(C.substr(v,2).toLowerCase()===Oe){var R=C.substr(v,2);v+=2}else R=d,0===sa&&h(Pe);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="OR":(v=K,K=d)}else v=K,K=d;return K}function Y(){var K=v;if(C.substr(v,7).toLowerCase()===Qe){var R=C.substr(v,7);v+=7}else R=d,0===sa&&h(Re);if(R!==d){R=
v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="BETWEEN":(v=K,K=d)}else v=K,K=d;return K}function ia(){var K=v;if(C.substr(v,4).toLowerCase()===Se){var R=C.substr(v,4);v+=4}else R=d,0===sa&&h(Te);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="FROM":(v=K,K=d)}else v=K,K=d;return K}function fa(){var K=v;if(C.substr(v,4).toLowerCase()===Ue){var R=C.substr(v,4);v+=4}else R=d,0===sa&&h(Ve);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="TRIM":(v=K,K=d)}else v=
K,K=d;return K}function U(){var K=v;if(C.substr(v,8).toLowerCase()===We){var R=C.substr(v,8);v+=8}else R=d,0===sa&&h(Xe);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="INTERVAL":(v=K,K=d)}else v=K,K=d;return K}function V(){var K=v;if(C.substr(v,4).toLowerCase()===Ye){var R=C.substr(v,4);v+=4}else R=d,0===sa&&h(Ze);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="YEAR":(v=K,K=d)}else v=K,K=d;return K}function da(){var K=v;if(C.substr(v,5).toLowerCase()===$e){var R=
C.substr(v,5);v+=5}else R=d,0===sa&&h(af);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="MONTH":(v=K,K=d)}else v=K,K=d;return K}function oa(){var K=v;if(C.substr(v,3).toLowerCase()===bf){var R=C.substr(v,3);v+=3}else R=d,0===sa&&h(cf);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="DAY":(v=K,K=d)}else v=K,K=d;return K}function pa(){var K=v;if(C.substr(v,4).toLowerCase()===df){var R=C.substr(v,4);v+=4}else R=d,0===sa&&h(ef);if(R!==d){R=v;sa++;var Z=P();sa--;
Z===d?R=void 0:(v=R,R=d);R!==d?K="HOUR":(v=K,K=d)}else v=K,K=d;return K}function ua(){var K=v;if(C.substr(v,6).toLowerCase()===ff){var R=C.substr(v,6);v+=6}else R=d,0===sa&&h(gf);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="MINUTE":(v=K,K=d)}else v=K,K=d;return K}function wa(){var K=v;if(C.substr(v,6).toLowerCase()===hf){var R=C.substr(v,6);v+=6}else R=d,0===sa&&h(jf);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="SECOND":(v=K,K=d)}else v=K,K=d;return K}
function za(){var K=v;if(C.substr(v,4).toLowerCase()===kf){var R=C.substr(v,4);v+=4}else R=d,0===sa&&h(lf);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="CASE":(v=K,K=d)}else v=K,K=d;return K}function Ga(){var K=v;if(C.substr(v,3).toLowerCase()===mf){var R=C.substr(v,3);v+=3}else R=d,0===sa&&h(nf);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="END":(v=K,K=d)}else v=K,K=d;return K}function Ca(){var K=v;if(C.substr(v,4).toLowerCase()===of){var R=C.substr(v,
4);v+=4}else R=d,0===sa&&h(pf);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="WHEN":(v=K,K=d)}else v=K,K=d;return K}function Da(){var K=v;if(C.substr(v,4).toLowerCase()===qf){var R=C.substr(v,4);v+=4}else R=d,0===sa&&h(rf);if(R!==d){R=v;sa++;var Z=P();sa--;Z===d?R=void 0:(v=R,R=d);R!==d?K="THEN":(v=K,K=d)}else v=K,K=d;return K}function Ea(){if(44===C.charCodeAt(v)){var K=sf;v++}else K=d,0===sa&&h(tf);return K}function Fa(){if(40===C.charCodeAt(v)){var K=uf;v++}else K=d,0===sa&&
h(vf);return K}function Pa(){if(41===C.charCodeAt(v)){var K=wf;v++}else K=d,0===sa&&h(xf);return K}function ra(){var K;var R=[];for(K=ab();K!==d;)R.push(K),K=ab();return R}function ab(){if(yf.test(C.charAt(v))){var K=C.charAt(v);v++}else K=d,0===sa&&h(zf);return K}function Ua(K,R,Z,qa){K={type:"binary_expr",operator:K,left:R,right:Z};void 0!==qa&&(K.escape=qa);return K}function Va(K,R){for(var Z=0;Z<R.length;Z++)K=Ua(R[Z][1],K,R[Z][3]);return K}u=void 0!==u?u:{};var d={},$a=u.grammarSource,Ra={start:H},
zb=H,sb="!",jb="\x3d",Ab="\x3e\x3d",$b="\x3e",Cb="\x3c\x3d",ac="\x3c\x3e",kb="\x3c",tb="!\x3d",Qa="+",eb="-",pb="*",Na="/",Ob="@",ba="'",ha="N'",aa="''",ka=".",xa="null",ya="true",Ha="false",Ka="in",Ya="is",Wa="like",Ta="escape",db="not",lb="and",Oe="or",Qe="between",Se="from",Td="for",Od="substring",Id="extract",Ue="trim",Zd="position",Fd="timestamp",Cd="date",re="leading",te="trailing",ve="both",xe="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",
of="when",qf="then",Ae="else",sf=",",uf="(",wf=")",Zc="`",ke=/^[A-Za-z_\x80-\uFFFF]/,me=/^[A-Za-z0-9_]/,oe=/^[A-Za-z0-9_.\x80-\uFFFF]/,jd=/^[^']/,He=/^[0-9]/,De=/^[eE]/,Fe=/^[+\-]/,yf=/^[ \t\n\r]/,ad=/^[^`]/,ld=t("!",!1),Jc=t("\x3d",!1),nd=t("\x3e\x3d",!1),od=t("\x3e",!1),pd=t("\x3c\x3d",!1),qd=t("\x3c\x3e",!1),rd=t("\x3c",!1),sd=t("!\x3d",!1),uc=t("+",!1),vc=t("-",!1),td=t("*",!1),ud=t("/",!1),le=z([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),ne=z([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),
pe=z([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),qe=t("@",!1),hd=t("'",!1),ze=t("N'",!1),id=t("''",!1),kd=z(["'"],!0,!1),Ce=t(".",!1),Ie=z([["0","9"]],!1,!1),Ee=z(["e","E"],!1,!1),Ge=z(["+","-"],!1,!1),Ad=t("NULL",!0),wd=t("TRUE",!0),yd=t("FALSE",!0),Je=t("IN",!0),Ke=t("IS",!0),Le=t("LIKE",!0),md=t("ESCAPE",!0),Me=t("NOT",!0),Ne=t("AND",!0),Pe=t("OR",!0),Re=t("BETWEEN",!0),Te=t("FROM",!0),Ud=t("FOR",!0),Pd=t("SUBSTRING",!0),Jd=t("EXTRACT",!0),Ve=t("TRIM",!0),$d=t("POSITION",
!0),Gd=t("TIMESTAMP",!0),Dd=t("DATE",!0),se=t("LEADING",!0),ue=t("TRAILING",!0),we=t("BOTH",!0),ye=t("TO",!0),Xe=t("INTERVAL",!0),Ze=t("YEAR",!0),af=t("MONTH",!0),cf=t("DAY",!0),ef=t("HOUR",!0),gf=t("MINUTE",!0),jf=t("SECOND",!0),lf=t("CASE",!0),nf=t("END",!0),pf=t("WHEN",!0),rf=t("THEN",!0),Be=t("ELSE",!0),tf=t(",",!1),vf=t("(",!1),xf=t(")",!1),zf=z([" ","\t","\n","\r"],!1,!1),$c=t("`",!1),bd=z(["`"],!0,!1),fd=function(K){return{type:"interval-period",period:K.value,precision:null,secondary:null}},
gd=function(K,R){return{type:"interval-period",period:"second",precision:K,secondary:R}},v=0,Zb=[{line:1,column:1}],ob=0,tc=[],sa=0;if("startRule"in u){if(!(u.startRule in Ra))throw Error("Can't start parsing from rule \""+u.startRule+'".');zb=Ra[u.startRule]}var Ic=zb();if(Ic!==d&&v===C.length)return Ic;Ic!==d&&v<C.length&&h({type:"end"});throw function(K,R,Z){return new n(n.buildMessage(K,R),K,R,Z)}(tc,ob<C.length?C.charAt(ob):null,ob<C.length?x(ob,ob+1):x(ob,ob));}}})})(F);let M=function(){function p(){}
p.parse=function(n){return F.exports.parse(n)};return p}();c.WhereGrammar=M;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(c){c.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};c.commonjsRequire=function(a){throw Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};c.getDefaultExportFromCjs=function(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(c,a,F,M,p,n,y){function C(b,g){if(!g)return null;if("x"in
g){var r={x:0,y:0};[r.x,r.y]=b(g.x,g.y,L);null!=g.z&&(r.z=g.z);null!=g.m&&(r.m=g.m);return r}if("xmin"in g)return r={xmin:0,ymin:0,xmax:0,ymax:0},[r.xmin,r.ymin]=b(g.xmin,g.ymin,L),[r.xmax,r.ymax]=b(g.xmax,g.ymax,L),g.hasZ&&(r.zmin=g.zmin,r.zmax=g.zmax,r.hasZ=!0),g.hasM&&(r.mmin=g.mmin,r.mmax=g.mmax,r.hasM=!0),r;if("rings"in g)return{rings:u(g.rings,b),hasM:g.hasM,hasZ:g.hasZ};if("paths"in g)return{paths:u(g.paths,b),hasM:g.hasM,hasZ:g.hasZ};if("points"in g)return{points:t(g.points,b),hasM:g.hasM,
hasZ:g.hasZ}}function u(b,g){const r=[];for(const B of b)r.push(t(B,g));return r}function t(b,g){const r=[];for(const B of b)b=g(B[0],B[1],[0,0]),r.push(b),2<B.length&&b.push(B[2]),3<B.length&&b.push(B[3]);return r}function z(){z=a._asyncToGenerator(function*(b,g){g&&(b=Array.isArray(b)?b.map(r=>F.isSome(r.geometry)&&r.geometry.spatialReference):[b],yield M.initializeProjection(b.map(r=>({source:r,dest:g}))))});return z.apply(this,arguments)}const L=[0,0],x=C.bind(null,y.lngLatToXY),h=C.bind(null,
y.xyToLngLat),H=new (function(){function b(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var g=b.prototype;g.push=function(){var r=a._asyncToGenerator(function*(B,l,E){if(!(B&&B.length&&l&&E)||n.equals(l,E))return B;const J={geometries:B,inSpatialReference:l,outSpatialReference:E,resolve:null};this._jobs.push(J);return new Promise(O=>{J.resolve=O;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(B,l,E){return r.apply(this,arguments)}}();g._process=
function(){this._timer=null;const r=this._jobs.shift();if(r){var {geometries:B,inSpatialReference:l,outSpatialReference:E,resolve:J}=r;y.canProject(l,E)?n.isWebMercator(E)?J(B.map(x)):J(B.map(h)):J(M.projectMany(p.jsonAdapter,B,l,E,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return b}());c.checkProjectionSupport=function(b,g){return z.apply(this,arguments)};c.project=function(b,g,r){if(!b)return b;r||(r=g,g=b.spatialReference);return n.isValid(g)&&n.isValid(r)&&!n.equals(g,
r)?y.canProject(g,r)?n.isWebMercator(r)?x(b):h(b):M.projectMany(p.jsonAdapter,[b],g,r,null)[0]:b};c.projectMany=function(b,g,r){return H.push(b,g,r)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/zscale".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h,H,b,g,r,B,l,E,J,O,Q){function f(){return!!Ua&&h.isLoaded()}function k(ba){n.isNone(d)&&(d=Promise.all([h.load(),(new Promise((ha,aa)=>c(["../chunks/geometryEngineBase"],ha,aa))).then(ha=>ha.geometryEngineBase),new Promise((ha,aa)=>c(["./geometryAdapters/hydrated"],ha,aa))]));return d.then(([,ha,{hydratedAdapter:aa}])=>{y.throwIfAborted(ba);Va=aa;Ua=ha.default;Ua._enableProjection(h.pe)})}function m(ba,ha,aa=null){return Array.isArray(ba)?0===ba.length?[]:A(Va,
ba,ba[0].spatialReference,ha,aa):A(Va,[ba],ba.spatialReference,ha,aa)[0]}function A(ba,ha,aa,ka,xa=null){if(n.isNone(aa)||n.isNone(ka))return ha;if(P(aa,ka,xa))return ha.map(ya=>n.unwrap(q(ya,aa,ka)));if(n.isNone(xa)){const ya=J.cacheKey(aa,ka);void 0!==$a[ya]?xa=$a[ya]:(xa=S(aa,ka,null),n.isNone(xa)&&(xa=new J),$a[ya]=xa)}if(n.isNone(Ua))throw new Ra;return Ua._project(ba,ha,aa,ka,xa)}function S(ba,ha,aa=null){if(n.isNone(Ua))throw new Ra;if(n.isNone(ba)||n.isNone(ha))return null;ba=Ua._getTransformation(Va,
ba,ha,aa,null==aa?void 0:aa.spatialReference);return null!==ba?J.fromGE(ba):null}function P(ba,ha,aa){return aa?!1:O.equals(ba,ha)?!0:O.isValid(ba)&&O.isValid(ha)&&!!Pa(ba,ha,Cb)}function I(){I=F._asyncToGenerator(function*(ba,ha,aa,ka){if(!f())if(Array.isArray(ba))for(const {source:xa,dest:ya,geographicTransformation:Ha}of ba){if(!P(xa,ya,Ha))return k(ka)}else if(!P(ba,ha,aa))return k(ka)});return I.apply(this,arguments)}function q(ba,ha,aa){return ba?"x"in ba?w(ba,ha,new H,aa,0):"xmin"in ba?ja(ba,
ha,new L,aa,0):"rings"in ba?ca(ba,ha,new b,aa,0):"paths"in ba?X(ba,ha,new g,aa,0):"points"in ba?N(ba,ha,new x,aa,0):null:null}function w(ba,ha,aa,ka,xa){Na[0]=ba.x;Na[1]=ba.y;const ya=ba.z;Na[2]=void 0!==ya?ya:xa;if(!la(Na,ha,0,Na,ka,0,1))return null;aa.x=Na[0];aa.y=Na[1];aa.spatialReference=ka;void 0===ya?(aa.z=void 0,aa.hasZ=!1):(aa.z=Na[2],aa.hasZ=!0);void 0===ba.m?(aa.m=void 0,aa.hasM=!1):(aa.m=ba.m,aa.hasM=!0);return aa}function N(ba,ha,aa,ka,xa){const {points:ya,hasZ:Ha,hasM:Ka}=ba;ba=[];const Ya=
ya.length,Wa=[];for(var Ta of ya)Wa.push(Ta[0],Ta[1],Ha?Ta[2]:xa);if(!la(Wa,ha,0,Wa,ka,0,Ya))return null;for(ha=0;ha<Ya;++ha){xa=3*ha;Ta=Wa[xa];const db=Wa[xa+1];Ha&&Ka?ba.push([Ta,db,Wa[xa+2],ya[ha][3]]):Ha?ba.push([Ta,db,Wa[xa+2]]):Ka?ba.push([Ta,db,ya[ha][2]]):ba.push([Ta,db])}aa.points=ba;aa.spatialReference=ka;aa.hasZ=Ha;aa.hasM=Ka;return aa}function X(ba,ha,aa,ka,xa){const {paths:ya,hasZ:Ha,hasM:Ka}=ba;ba=[];if(!va(ya,Ha,Ka,ha,ba,ka,xa))return null;aa.paths=ba;aa.spatialReference=ka;aa.hasZ=
Ha;aa.hasM=Ka;return aa}function ca(ba,ha,aa,ka,xa){const {rings:ya,hasZ:Ha,hasM:Ka}=ba;ba=[];if(!va(ya,Ha,Ka,ha,ba,ka,xa))return null;aa.rings=ba;aa.spatialReference=ka;aa.hasZ=Ha;aa.hasM=Ka;return aa}function ja(ba,ha,aa,ka,xa){const {xmin:ya,ymin:Ha,xmax:Ka,ymax:Ya,hasZ:Wa,hasM:Ta}=ba;if(!na(ya,Ha,Wa?ba.zmin:xa,ha,Na,ka))return null;aa.xmin=Na[0];aa.ymin=Na[1];Wa&&(aa.zmin=Na[2]);if(!na(Ka,Ya,Wa?ba.zmax:xa,ha,Na,ka))return null;aa.xmax=Na[0];aa.ymax=Na[1];Wa&&(aa.zmax=Na[2]);Ta&&(aa.mmin=ba.mmin,
aa.mmax=ba.mmax);aa.spatialReference=ka;return aa}function na(ba,ha,aa,ka,xa,ya){Qa[0]=ba;Qa[1]=ha;Qa[2]=aa;return la(Qa,ka,0,xa,ya,0,1)}function ta(ba,ha,aa,ka){if(n.isNone(ha)||n.isNone(ka)||2>ba.length)return!1;2===ba.length&&(Qa[0]=ba[0],Qa[1]=ba[1],Qa[2]=0,ba=Qa);return la(ba,ha,0,aa,ka,0,1)}function ma(ba,ha,aa){if(n.isNone(ha))return!1;ha=Oa(ha,Ab);ha=jb[ha][6];if(n.isNone(ha))return!1;ha(ba,0,Qa,0);aa!==Qa&&(aa[0]=Qa[0],aa[1]=Qa[1],2<aa.length&&(aa[2]=Qa[2]));return!0}function la(ba,ha,aa,
ka,xa,ya,Ha=1){ha=Pa(ha,xa,Cb);if(n.isNone(ha))return!1;if(ha===Ia){if(ba===ka&&aa===ya)return!0;Ha=aa+3*Ha;for(let Ka=aa,Ya=ya;Ka<Ha;Ka++,Ya++)ka[Ya]=ba[Ka];return!0}Ha=aa+3*Ha;for(let Ka=aa,Ya=ya;Ka<Ha;Ka+=3,Ya+=3)ha(ba,Ka,ka,Ya);return!0}function va(ba,ha,aa,ka,xa,ya,Ha=0){const Ka=[];for(const Ya of ba)for(const Wa of Ya)Ka.push(Wa[0],Wa[1],ha?Wa[2]:Ha);if(!la(Ka,ka,0,Ka,ya,0,Ka.length/3))return!1;ka=0;xa.length=0;for(const Ya of ba){ba=[];for(const Wa of Ya)ha&&aa?ba.push([Ka[ka++],Ka[ka++],
Ka[ka++],Wa[3]]):ha?ba.push([Ka[ka++],Ka[ka++],Ka[ka++]]):(aa?ba.push([Ka[ka++],Ka[ka++],Wa[2]]):ba.push([Ka[ka++],Ka[ka++]]),ka++);xa.push(ba)}return!0}function Ja(ba,ha,aa,ka){ba=Math.abs(kb*ba)+Math.asin(aa/(ka+ha));return ba>=Math.PI/2?Number.MAX_VALUE:aa/Math.cos(ba)}function Ba(ba,ha,aa){const ka=Math.sin(ba);ba=Math.cos(ba);const xa=Math.sin(ha);ha=Math.cos(ha);aa[0]=-ka;aa[4]=-xa*ba;aa[8]=ha*ba;aa[12]=0;aa[1]=ba;aa[5]=-xa*ka;aa[9]=ha*ka;aa[13]=0;aa[2]=0;aa[6]=ha;aa[10]=xa;aa[14]=0;aa[3]=0;
aa[7]=0;aa[11]=0;aa[15]=1;return aa}function Sa(ba,ha,aa){Ba(ba,ha,aa);u.transpose(aa,aa);return aa}function Oa(ba,ha){if(ha.spatialReference===ba)return ha.spatialReferenceId;ha.spatialReference=ba;"metersPerUnit"in ha&&(ha.metersPerUnit=C.getMetersPerUnitForSR(ba,1));return ba.wkt===r.SphericalECEFSpatialReference.wkt?ha.spatialReferenceId=1:O.isWGS84(ba)?ha.spatialReferenceId=2:O.isWebMercator(ba)?ha.spatialReferenceId=3:O.isPlateCarree(ba)?ha.spatialReferenceId=12:ba.wkt===r.WGS84ECEFSpatialReference.wkt?
ha.spatialReferenceId=4:4490===ba.wkid?ha.spatialReferenceId=5:ba.wkt===r.SphericalPCPFMars.wkt?ha.spatialReferenceId=7:ba.wkt===r.SphericalPCPFMoon.wkt?ha.spatialReferenceId=9:O.isMars(ba)?ha.spatialReferenceId=8:O.isMoon(ba)?ha.spatialReferenceId=10:ha.spatialReferenceId=0}function Ia(ba,ha,aa,ka){ba!==aa&&(aa[ka++]=ba[ha++],aa[ka++]=ba[ha++],aa[ka]=ba[ha])}function e(ba,ha,aa,ka){aa[ka++]=tb*(ba[ha++]/l.earth.radius);aa[ka++]=tb*(Math.PI/2-2*Math.atan(Math.exp(-ba[ha++]/l.earth.radius)));aa[ka]=
ba[ha]}function G(ba,ha,aa,ka){e(ba,ha,aa,ka);da(aa,ka,aa,ka)}function ea(ba,ha,aa,ka){e(ba,ha,aa,ka);Ca(aa,ka,aa,ka)}function D(ba,ha,aa,ka,xa){var ya=.4999999*Math.PI;ya=p.clamp(kb*ba[ha+1],-ya,ya);ya=Math.sin(ya);aa[ka++]=kb*ba[ha]*xa.radius;aa[ka++]=xa.halfSemiMajorAxis*Math.log((1+ya)/(1-ya));aa[ka]=ba[ha+2]}function T(ba,ha,aa,ka){D(ba,ha,aa,ka,l.earth)}function W(ba,ha,aa,ka){aa[ka]=ba[ha]*zb;aa[ka+1]=ba[ha+1]*zb;aa[ka+2]=ba[ha+2]}function Y(ba,ha,aa,ka){aa[ka]=ba[ha]*sb;aa[ka+1]=ba[ha+1]*
sb;aa[ka+2]=ba[ha+2]}function ia(ba,ha,aa,ka){e(ba,ha,aa,ka);W(aa,ka,aa,ka)}function fa(ba,ha,aa,ka,xa){xa+=ba[ha+2];const ya=kb*ba[ha+1];ba=kb*ba[ha];ha=Math.cos(ya);aa[ka++]=Math.cos(ba)*ha*xa;aa[ka++]=Math.sin(ba)*ha*xa;aa[ka]=Math.sin(ya)*xa}function U(ba,ha,aa,ka){fa(ba,ha,aa,ka,l.moon.radius)}function V(ba,ha,aa,ka){fa(ba,ha,aa,ka,l.mars.radius)}function da(ba,ha,aa,ka){fa(ba,ha,aa,ka,l.earth.radius)}function oa(ba,ha,aa,ka,xa){var ya=ba[ha];const Ha=ba[ha+1];ha=ba[ha+2];ba=Math.sqrt(ya*ya+
Ha*Ha+ha*ha);ha=p.asinClamped(ha/(0===ba?1:ba));ya=Math.atan2(Ha,ya);aa[ka++]=tb*ya;aa[ka++]=tb*ha;aa[ka]=ba-xa}function pa(ba,ha,aa,ka){oa(ba,ha,aa,ka,l.moon.radius)}function ua(ba,ha,aa,ka){oa(ba,ha,aa,ka,l.mars.radius)}function wa(ba,ha,aa,ka){oa(ba,ha,aa,ka,l.earth.radius)}function za(ba,ha,aa,ka){wa(ba,ha,aa,ka);T(aa,ka,aa,ka)}function Ga(ba,ha,aa,ka){wa(ba,ha,aa,ka);Ca(aa,ka,aa,ka)}function Ca(ba,ha,aa,ka){{var xa=l.earth;const Ha=kb*ba[ha];var ya=kb*ba[ha+1];ba=ba[ha+2];ha=Math.sin(ya);ya=
Math.cos(ya);const Ka=xa.radius/Math.sqrt(1-xa.eccentricitySquared*ha*ha);aa[ka++]=(Ka+ba)*ya*Math.cos(Ha);aa[ka++]=(Ka+ba)*ya*Math.sin(Ha);aa[ka++]=(Ka*(1-xa.eccentricitySquared)+ba)*ha}}function Da(ba,ha,aa,ka){var xa=E.earthEllipsoidConstants,ya=ba[ha],Ha=ba[ha+1];ba=ba[ha+2];let Ka;ha=Math.abs(ba);var Ya=ya*ya+Ha*Ha;var Wa=Math.sqrt(Ya);var Ta=Ya+ba*ba;var db=Math.sqrt(Ta);ya=Math.atan2(Ha,ya);var lb=ba*ba/Ta;Ta=Ya/Ta;Ha=xa.a2/db;Ya=xa.a3-xa.a4/db;.3<Ta?(lb=ha/db*(1+Ta*(xa.a1+Ha+lb*Ya)/db),db=
Math.asin(lb),Ha=lb*lb,Ta=Math.sqrt(1-Ha)):(Ta=Wa/db*(1-lb*(xa.a5-Ha-Ta*Ya)/db),db=Math.acos(Ta),Ha=1-Ta*Ta,lb=Math.sqrt(Ha));Ka=1-l.earth.eccentricitySquared*Ha;Ha=l.earth.radius/Math.sqrt(Ka);xa=xa.a6*Ha;Ha=Wa-Ha*Ta;Ya=ha-xa*lb;ha=Ta*Ha+lb*Ya;Wa=Ta*Ya-lb*Ha;xa=Wa/(xa/Ka+ha);db+=xa;0>ba&&(db=-db);aa[ka++]=tb*ya;aa[ka++]=tb*db;aa[ka]=ha+Wa*xa/2}function Ea(ba,ha,aa,ka){Da(ba,ha,aa,ka);da(aa,ka,aa,ka)}function Fa(ba,ha,aa,ka){Da(ba,ha,aa,ka);T(aa,ka,aa,ka)}function Pa(ba,ha,aa=ab()){return n.isNone(ba)||
n.isNone(ha)?null:ra(ba,ha,aa).projector}function ra(ba,ha,aa){if(n.isNone(ba)||n.isNone(ha)||aa.source.spatialReference===ba&&aa.dest.spatialReference===ha)return aa;const ka=Oa(ba,aa.source),xa=Oa(ha,aa.dest);0===ka&&0===xa?O.equals(ba,ha)?aa.projector=Ia:aa.projector=null:aa.projector=jb[ka][xa];return aa}function ab(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Ia}}let Ua=null,Va=null,d=
null,$a={},Ra=function(ba){function ha(){return ba.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}F._inheritsLoose(ha,ba);return ha}(M);const zb=l.earth.radius*Math.PI/180,sb=180/(l.earth.radius*Math.PI),jb={[2]:{[5]:null,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:da,[7]:null,[9]:null,[0]:null,[3]:T,[12]:W,[2]:Ia,[4]:Ca},[5]:{[5]:Ia,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:da,[7]:null,[9]:null,[0]:null,[3]:null,[12]:W,[2]:null,[4]:Ca},[8]:{[5]:null,[8]:Ia,
[10]:null,[11]:Ia,[6]:null,[1]:null,[7]:V,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Ia,[11]:Ia,[6]:null,[1]:null,[7]:null,[9]:U,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[11]:e,[6]:e,[1]:G,[7]:null,[9]:null,[0]:null,[3]:Ia,[12]:ia,[2]:e,[4]:ea},[4]:{[5]:Da,[8]:null,[10]:null,[11]:Da,[6]:Da,[1]:Ea,[7]:null,[9]:null,[0]:null,[3]:Fa,[12]:function(ba,ha,aa,ka){Da(ba,ha,aa,ka);W(aa,ka,aa,ka)},[2]:Da,[4]:Ia},[1]:{[5]:wa,[8]:null,
[10]:null,[11]:wa,[6]:wa,[1]:Ia,[7]:null,[9]:null,[0]:null,[3]:za,[12]:function(ba,ha,aa,ka){wa(ba,ha,aa,ka);W(aa,ka,aa,ka)},[2]:wa,[4]:Ga},[7]:{[5]:null,[8]:ua,[10]:null,[11]:ua,[6]:null,[1]:null,[7]:Ia,[9]:null,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:pa,[11]:pa,[6]:null,[1]:null,[7]:null,[9]:Ia,[0]:null,[3]:null,[12]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[11]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Ia,[3]:null,[12]:null,[2]:null,[4]:null},
[11]:{[5]:Ia,[8]:Ia,[10]:Ia,[11]:Ia,[6]:Ia,[1]:da,[7]:V,[9]:U,[0]:null,[3]:T,[12]:W,[2]:Ia,[4]:Ca},[6]:{[5]:null,[8]:null,[10]:null,[11]:Ia,[6]:Ia,[1]:da,[7]:null,[9]:null,[0]:null,[3]:null,[12]:W,[2]:Ia,[4]:Ca},[12]:{[5]:Y,[8]:null,[10]:null,[11]:Y,[6]:Y,[1]:function(ba,ha,aa,ka){Y(ba,ha,aa,ka);da(aa,ka,aa,ka)},[7]:null,[9]:null,[0]:null,[3]:function(ba,ha,aa,ka){Y(ba,ha,aa,ka);T(aa,ka,aa,ka)},[12]:Ia,[2]:Y,[4]:function(ba,ha,aa,ka){Y(ba,ha,aa,ka);Ca(aa,ka,aa,ka)}}},Ab={spatialReference:null,spatialReferenceId:0},
$b={spatialReference:null,spatialReferenceId:0},Cb=ab(),ac=ab(),kb=p.deg2rad(1),tb=p.rad2deg(1),Qa=z.create(),eb=z.create(),pb=z.create(),Na=z.create(),Ob=z.create();a.canProjectToWGS84ComparableLonLat=function(ba){if(n.isNone(ba))return!1;ba=Oa(ba,Ab);return!!jb[ba][6]};a.canProjectWithoutEngine=P;a.computeENUToSphericalPCPFLocalRotation=Ba;a.computeSphericalPCPFToENULocalRotation=Sa;a.computeTranslationToOriginAndRotation=function(ba,ha,aa,ka){if(n.isNone(ba)||n.isNone(ka))return!1;var xa=Oa(ba,
Ab),ya=Oa(ka,$b);if(xa===ya&&1!==ya&&7!==ya&&9!==ya&&(0!==xa||O.equals(ba,ka)))return u.identity(aa),u.translate(aa,aa,ha),!0;if(1===ya||7===ya||9===ya){xa=jb[xa][11];ya=jb[11][ya];if(n.isNone(xa)||n.isNone(ya))return!1;xa(ha,0,eb,0);ya(eb,0,pb,0);Ba(kb*eb[0],kb*eb[1],aa);aa[12]=pb[0];aa[13]=pb[1];aa[14]=pb[2];return!0}if(!(3!==ya&&12!==ya||2!==xa&&1!==xa&&3!==xa)){ba=jb[xa][11];ya=jb[11][ya];if(n.isNone(ba)||n.isNone(ya))return!1;ba(ha,0,eb,0);ya(eb,0,pb,0);1===xa?Sa(kb*eb[0],kb*eb[1],aa):u.identity(aa);
aa[12]=pb[0];aa[13]=pb[1];aa[14]=pb[2];return!0}return!1};a.getProjectorName=function(ba,ha){switch(Pa(ba,ha,Cb)){case Ia:return"copy3";case da:return"wgs84ToSphericalECEF";case T:return"wgs84ToWebMercator";case W:return"wgs84ToPlateCarree";case Ca:return"wgs84ToWGS84ECEF";case e:return"webMercatorToWGS84";case G:return"webMercatorToSphericalECEF";case ea:return"webMercatorToWGS84ECEF";case ia:return"webMercatorToPlateCarree";case Da:return"wgs84ECEFToWGS84";case Ea:return"wgs84ECEFToSphericalECEF";
case Fa:return"wgs84ECEFToWebMercator";case wa:return"sphericalECEFToWGS84";case za:return"sphericalECEFToWebMercator";case ua:return"sphericalMarsPCPFToMars2000";case pa:return"sphericalMoonPCPFToMoon2000";case Ga:return"sphericalECEFToWGS84ECEF";case V:return"mars2000ToSphericalPCPF";case U:return"moon2000ToSphericalPCPF";default:return null}};a.getTransformation=S;a.getTransformations=function(ba,ha,aa=null){if(n.isNone(Ua))throw new Ra;ba=Ua._getTransformationBySuitability(Va,ba,ha,aa,null==aa?
void 0:aa.spatialReference);if(null!==ba){ha=[];for(const ka of ba)ha.push(J.fromGE(ka));return ha}return[]};a.initializeProjection=function(ba,ha,aa,ka){return I.apply(this,arguments)};a.isLoaded=f;a.load=k;a.localLinearScaleFactors=function(ba,ha,aa,ka){if(n.isNone(ha)||n.isNone(ka))return!1;const xa=Oa(ha,Ab);var ya=Oa(ka,$b);if(xa===ya&&0!==xa||O.equals(ha,ka))return aa[0]=1,aa[1]=1,aa[2]=1,!0;if(1===xa){ha=t.length(ba);ba=ha/Math.sqrt(ba[0]*ba[0]+ba[1]*ba[1]);ha/=l.earth.radius;if(3===ya)return aa[0]=
ba*ha,aa[1]=ba*ha,aa[2]=1,!0;if(2===ya||5===ya)return ya=180/(l.earth.radius*Math.PI),aa[0]=ya*ba*ha,aa[1]=ya*ha,aa[2]=1,!0}else if(12===xa&&(2===ya||5===ya))return aa[0]=sb,aa[1]=sb,aa[2]=1,!0;return!1};a.lonLatToSphericalPCPF=function(ba,ha,aa,ka,xa=0){ka+=xa;xa=Math.cos(aa);ba[0]=Math.cos(ha)*xa*ka;ba[1]=Math.sin(ha)*xa*ka;ba[2]=Math.sin(aa)*ka};a.lonLatToWebMercatorComparable=D;a.project=m;a.projectBoundingRect=function(ba,ha,aa,ka){if(null==ba)return!1;if(O.equals(ha,ka))return B.copy(aa,ba),
!0;Qa[0]=ba[0];Qa[1]=ba[1];Qa[2]=0;if(!la(Qa,ha,0,Qa,ka,0,1))return!1;aa[0]=Qa[0];aa[1]=Qa[1];Qa[0]=ba[2];Qa[1]=ba[3];Qa[2]=0;if(!la(Qa,ha,0,Qa,ka,0,1))return!1;aa[2]=Qa[0];aa[3]=Qa[1];return!0};a.projectBoundingSphere=function(ba,ha,aa,ka){if(n.isNone(ha)||n.isNone(ka))return!1;ha=ra(ha,ka,ac);if(ha.projector===Ia)return aa[0]=ba[0],aa[1]=ba[1],aa[2]=ba[2],aa[3]=ba[3],!0;if(n.isNone(ha.projector))return!1;const {source:xa,dest:ya}=ha;if(3===ya.spatialReferenceId){ha=jb[xa.spatialReferenceId][2];
if(n.isNone(ha))return!1;ha(ba,0,eb,0);T(eb,0,aa,0);aa[3]=Ja(eb[1],ba[2],ba[3],l.earth.radius);return!0}if(2!==xa.spatialReferenceId&&5!==xa.spatialReferenceId||12!==ya.spatialReferenceId)ha.projector(ba,0,aa,0),aa[3]=ba[3]*xa.metersPerUnit/ya.metersPerUnit;else{ka=jb[1][12];let Ha=ba[3];n.isSome(jb[xa.spatialReferenceId][1])&&n.isSome(ka)&&(Ha=Ja(ba[1],ba[2],ba[3],l.earth.radius));ha.projector(ba,0,aa,0);aa[3]=Ha}return!0};a.projectBuffer=la;a.projectDirection=function(ba,ha,aa,ka,xa){t.copy(Na,
ba);t.add(Ob,ba,ha);ta(Na,aa,Na,xa);ta(Ob,aa,Ob,xa);t.subtract(ka,Ob,Na);t.normalize(ka,ka)};a.projectExtent=function(ba,ha,aa=ha.spatialReference,ka=0){return n.isSome(aa)&&n.isSome(ja(ba,ba.spatialReference,ha,aa,ka))};a.projectMany=A;a.projectMultipoint=function(ba,ha,aa=ha.spatialReference,ka=0){return n.isNone(aa)?!1:n.isSome(N(ba,ba.spatialReference,ha,aa,ka))};a.projectPoint=function(ba,ha,aa=ha.spatialReference,ka=0){return n.isNone(aa)?!1:n.isSome(w(ba,ba.spatialReference,ha,aa,ka))};a.projectPointToVector=
function(ba,ha,aa,ka=0){Na[0]=ba.x;Na[1]=ba.y;const xa=ba.z;Na[2]=void 0!==xa?xa:ka;return la(Na,ba.spatialReference,0,ha,aa,0,1)};a.projectPointToWGS84ComparableLonLat=function(ba,ha){Na[0]=ba.x;Na[1]=ba.y;const aa=ba.z;Na[2]=void 0!==aa?aa:0;return ma(Na,ba.spatialReference,ha)};a.projectPolygon=function(ba,ha,aa=ha.spatialReference,ka=0){return n.isSome(aa)&&n.isSome(ca(ba,ba.spatialReference,ha,aa,ka))};a.projectPolyline=function(ba,ha,aa=ha.spatialReference,ka=0){return n.isSome(aa)&&n.isSome(X(ba,
ba.spatialReference,ha,aa,ka))};a.projectVectorToDehydratedPoint=function(ba,ha,aa){return la(ba,ha,0,Na,aa.spatialReference,0,1)?(aa.x=Na[0],aa.y=Na[1],aa.z=Na[2],aa):null};a.projectVectorToPoint=function(ba,ha,aa){if(n.isNone(ha)||n.isNone(aa))return null;const ka=new H({spatialReference:aa});return la(ba,ha,0,Na,aa,0,1)?(ka.x=Na[0],ka.y=Na[1],ka.z=Na[2],ka):null};a.projectVectorToVector=ta;a.projectVectorToWGS84ComparableLonLat=function(ba,ha,aa){return ma(ba,ha,aa)};a.projectWithoutEngine=q;a.projectXYZToVector=
na;a.sphericalPCPFtoLonLatElevation=oa;a.tryProjectWithZConversion=function(ba,ha){try{const aa=m(ba,ha);if(null==aa)return null;"xmin"in ba&&"xmin"in aa&&(aa.zmin=ba.zmin,aa.zmax=ba.zmax);const ka=Q.getGeometryZScaler(aa.type,ba.spatialReference,ha);n.isSome(ka)&&ka(aa);return aa}catch(aa){if(!(aa instanceof Ra))throw aa;return null}};a.unload=function(){d=Va=Ua=null;$a={}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],
function(c,a,F){function M(e,G){e[0]=G[0];e[1]=G[1];e[2]=G[2];e[3]=G[3];e[4]=G[4];e[5]=G[5];e[6]=G[6];e[7]=G[7];e[8]=G[8];e[9]=G[9];e[10]=G[10];e[11]=G[11];e[12]=G[12];e[13]=G[13];e[14]=G[14];e[15]=G[15];return e}function p(e,G,ea,D,T,W,Y,ia,fa,U,V,da,oa,pa,ua,wa,za){e[0]=G;e[1]=ea;e[2]=D;e[3]=T;e[4]=W;e[5]=Y;e[6]=ia;e[7]=fa;e[8]=U;e[9]=V;e[10]=da;e[11]=oa;e[12]=pa;e[13]=ua;e[14]=wa;e[15]=za;return e}function n(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=
0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function y(e,G){if(e===G){const ea=G[1],D=G[2],T=G[3],W=G[6],Y=G[7],ia=G[11];e[1]=G[4];e[2]=G[8];e[3]=G[12];e[4]=ea;e[6]=G[9];e[7]=G[13];e[8]=D;e[9]=W;e[11]=G[14];e[12]=T;e[13]=Y;e[14]=ia}else e[0]=G[0],e[1]=G[4],e[2]=G[8],e[3]=G[12],e[4]=G[1],e[5]=G[5],e[6]=G[9],e[7]=G[13],e[8]=G[2],e[9]=G[6],e[10]=G[10],e[11]=G[14],e[12]=G[3],e[13]=G[7],e[14]=G[11],e[15]=G[15];return e}function C(e,G){const ea=G[0],D=G[1],T=G[2],W=G[3],Y=G[4],ia=G[5],fa=G[6],U=G[7],V=G[8],
da=G[9],oa=G[10],pa=G[11],ua=G[12],wa=G[13],za=G[14];G=G[15];const Ga=ea*ia-D*Y,Ca=ea*fa-T*Y,Da=ea*U-W*Y,Ea=D*fa-T*ia,Fa=D*U-W*ia,Pa=T*U-W*fa,ra=V*wa-da*ua,ab=V*za-oa*ua,Ua=V*G-pa*ua,Va=da*za-oa*wa,d=da*G-pa*wa,$a=oa*G-pa*za;let Ra=Ga*$a-Ca*d+Da*Va+Ea*Ua-Fa*ab+Pa*ra;if(!Ra)return null;Ra=1/Ra;e[0]=(ia*$a-fa*d+U*Va)*Ra;e[1]=(T*d-D*$a-W*Va)*Ra;e[2]=(wa*Pa-za*Fa+G*Ea)*Ra;e[3]=(oa*Fa-da*Pa-pa*Ea)*Ra;e[4]=(fa*Ua-Y*$a-U*ab)*Ra;e[5]=(ea*$a-T*Ua+W*ab)*Ra;e[6]=(za*Da-ua*Pa-G*Ca)*Ra;e[7]=(V*Pa-oa*Da+pa*Ca)*
Ra;e[8]=(Y*d-ia*Ua+U*ra)*Ra;e[9]=(D*Ua-ea*d-W*ra)*Ra;e[10]=(ua*Fa-wa*Da+G*Ga)*Ra;e[11]=(da*Da-V*Fa-pa*Ga)*Ra;e[12]=(ia*ab-Y*Va-fa*ra)*Ra;e[13]=(ea*Va-D*ab+T*ra)*Ra;e[14]=(wa*Ca-ua*Ea-za*Ga)*Ra;e[15]=(V*Ea-da*Ca+oa*Ga)*Ra;return e}function u(e,G){const ea=G[0],D=G[1],T=G[2],W=G[3],Y=G[4],ia=G[5],fa=G[6],U=G[7],V=G[8],da=G[9],oa=G[10],pa=G[11],ua=G[12],wa=G[13],za=G[14];G=G[15];e[0]=ia*(oa*G-pa*za)-da*(fa*G-U*za)+wa*(fa*pa-U*oa);e[1]=-(D*(oa*G-pa*za)-da*(T*G-W*za)+wa*(T*pa-W*oa));e[2]=D*(fa*G-U*za)-
ia*(T*G-W*za)+wa*(T*U-W*fa);e[3]=-(D*(fa*pa-U*oa)-ia*(T*pa-W*oa)+da*(T*U-W*fa));e[4]=-(Y*(oa*G-pa*za)-V*(fa*G-U*za)+ua*(fa*pa-U*oa));e[5]=ea*(oa*G-pa*za)-V*(T*G-W*za)+ua*(T*pa-W*oa);e[6]=-(ea*(fa*G-U*za)-Y*(T*G-W*za)+ua*(T*U-W*fa));e[7]=ea*(fa*pa-U*oa)-Y*(T*pa-W*oa)+V*(T*U-W*fa);e[8]=Y*(da*G-pa*wa)-V*(ia*G-U*wa)+ua*(ia*pa-U*da);e[9]=-(ea*(da*G-pa*wa)-V*(D*G-W*wa)+ua*(D*pa-W*da));e[10]=ea*(ia*G-U*wa)-Y*(D*G-W*wa)+ua*(D*U-W*ia);e[11]=-(ea*(ia*pa-U*da)-Y*(D*pa-W*da)+V*(D*U-W*ia));e[12]=-(Y*(da*za-oa*
wa)-V*(ia*za-fa*wa)+ua*(ia*oa-fa*da));e[13]=ea*(da*za-oa*wa)-V*(D*za-T*wa)+ua*(D*oa-T*da);e[14]=-(ea*(ia*za-fa*wa)-Y*(D*za-T*wa)+ua*(D*fa-T*ia));e[15]=ea*(ia*oa-fa*da)-Y*(D*oa-T*da)+V*(D*fa-T*ia);return e}function t(e){const G=e[0],ea=e[1],D=e[2],T=e[3],W=e[4],Y=e[5],ia=e[6],fa=e[7],U=e[8],V=e[9],da=e[10],oa=e[11],pa=e[12],ua=e[13],wa=e[14];e=e[15];return(G*Y-ea*W)*(da*e-oa*wa)-(G*ia-D*W)*(V*e-oa*ua)+(G*fa-T*W)*(V*wa-da*ua)+(ea*ia-D*Y)*(U*e-oa*pa)-(ea*fa-T*Y)*(U*wa-da*pa)+(D*fa-T*ia)*(U*ua-V*pa)}
function z(e,G,ea){const D=G[0],T=G[1],W=G[2],Y=G[3],ia=G[4],fa=G[5],U=G[6],V=G[7],da=G[8],oa=G[9],pa=G[10],ua=G[11],wa=G[12],za=G[13],Ga=G[14];G=G[15];let Ca=ea[0],Da=ea[1],Ea=ea[2],Fa=ea[3];e[0]=Ca*D+Da*ia+Ea*da+Fa*wa;e[1]=Ca*T+Da*fa+Ea*oa+Fa*za;e[2]=Ca*W+Da*U+Ea*pa+Fa*Ga;e[3]=Ca*Y+Da*V+Ea*ua+Fa*G;Ca=ea[4];Da=ea[5];Ea=ea[6];Fa=ea[7];e[4]=Ca*D+Da*ia+Ea*da+Fa*wa;e[5]=Ca*T+Da*fa+Ea*oa+Fa*za;e[6]=Ca*W+Da*U+Ea*pa+Fa*Ga;e[7]=Ca*Y+Da*V+Ea*ua+Fa*G;Ca=ea[8];Da=ea[9];Ea=ea[10];Fa=ea[11];e[8]=Ca*D+Da*ia+Ea*
da+Fa*wa;e[9]=Ca*T+Da*fa+Ea*oa+Fa*za;e[10]=Ca*W+Da*U+Ea*pa+Fa*Ga;e[11]=Ca*Y+Da*V+Ea*ua+Fa*G;Ca=ea[12];Da=ea[13];Ea=ea[14];Fa=ea[15];e[12]=Ca*D+Da*ia+Ea*da+Fa*wa;e[13]=Ca*T+Da*fa+Ea*oa+Fa*za;e[14]=Ca*W+Da*U+Ea*pa+Fa*Ga;e[15]=Ca*Y+Da*V+Ea*ua+Fa*G;return e}function L(e,G,ea){const D=ea[0],T=ea[1];ea=ea[2];let W=void 0,Y=void 0,ia=void 0,fa=void 0,U=void 0,V=void 0,da=void 0,oa=void 0,pa=void 0,ua=void 0,wa=void 0,za=void 0;G===e?(e[12]=G[0]*D+G[4]*T+G[8]*ea+G[12],e[13]=G[1]*D+G[5]*T+G[9]*ea+G[13],e[14]=
G[2]*D+G[6]*T+G[10]*ea+G[14],e[15]=G[3]*D+G[7]*T+G[11]*ea+G[15]):(W=G[0],Y=G[1],ia=G[2],fa=G[3],U=G[4],V=G[5],da=G[6],oa=G[7],pa=G[8],ua=G[9],wa=G[10],za=G[11],e[0]=W,e[1]=Y,e[2]=ia,e[3]=fa,e[4]=U,e[5]=V,e[6]=da,e[7]=oa,e[8]=pa,e[9]=ua,e[10]=wa,e[11]=za,e[12]=W*D+U*T+pa*ea+G[12],e[13]=Y*D+V*T+ua*ea+G[13],e[14]=ia*D+da*T+wa*ea+G[14],e[15]=fa*D+oa*T+za*ea+G[15]);return e}function x(e,G,ea){const D=ea[0],T=ea[1];ea=ea[2];e[0]=G[0]*D;e[1]=G[1]*D;e[2]=G[2]*D;e[3]=G[3]*D;e[4]=G[4]*T;e[5]=G[5]*T;e[6]=G[6]*
T;e[7]=G[7]*T;e[8]=G[8]*ea;e[9]=G[9]*ea;e[10]=G[10]*ea;e[11]=G[11]*ea;e[12]=G[12];e[13]=G[13];e[14]=G[14];e[15]=G[15];return e}function h(e,G,ea,D){let T=D[0],W=D[1];D=D[2];let Y=Math.sqrt(T*T+W*W+D*D);var ia=void 0,fa=void 0;let U=void 0,V=void 0,da=void 0,oa=void 0,pa=void 0,ua=void 0,wa=void 0,za=void 0,Ga=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Pa=void 0,ra=void 0,ab=void 0,Ua=void 0,Va=void 0,d=void 0,$a=void 0;fa=ia=void 0;if(Y<F.EPSILON)return null;Y=1/Y;T*=Y;W*=Y;D*=Y;ia=Math.sin(ea);
fa=Math.cos(ea);U=1-fa;V=G[0];da=G[1];oa=G[2];pa=G[3];ua=G[4];wa=G[5];za=G[6];Ga=G[7];Ca=G[8];Da=G[9];Ea=G[10];Fa=G[11];Pa=T*T*U+fa;ra=W*T*U+D*ia;ab=D*T*U-W*ia;Ua=T*W*U-D*ia;Va=W*W*U+fa;d=D*W*U+T*ia;$a=T*D*U+W*ia;ia=W*D*U-T*ia;fa=D*D*U+fa;e[0]=V*Pa+ua*ra+Ca*ab;e[1]=da*Pa+wa*ra+Da*ab;e[2]=oa*Pa+za*ra+Ea*ab;e[3]=pa*Pa+Ga*ra+Fa*ab;e[4]=V*Ua+ua*Va+Ca*d;e[5]=da*Ua+wa*Va+Da*d;e[6]=oa*Ua+za*Va+Ea*d;e[7]=pa*Ua+Ga*Va+Fa*d;e[8]=V*$a+ua*ia+Ca*fa;e[9]=da*$a+wa*ia+Da*fa;e[10]=oa*$a+za*ia+Ea*fa;e[11]=pa*$a+Ga*
ia+Fa*fa;G!==e&&(e[12]=G[12],e[13]=G[13],e[14]=G[14],e[15]=G[15]);return e}function H(e,G,ea){const D=Math.sin(ea);ea=Math.cos(ea);const T=G[4],W=G[5],Y=G[6],ia=G[7],fa=G[8],U=G[9],V=G[10],da=G[11];G!==e&&(e[0]=G[0],e[1]=G[1],e[2]=G[2],e[3]=G[3],e[12]=G[12],e[13]=G[13],e[14]=G[14],e[15]=G[15]);e[4]=T*ea+fa*D;e[5]=W*ea+U*D;e[6]=Y*ea+V*D;e[7]=ia*ea+da*D;e[8]=fa*ea-T*D;e[9]=U*ea-W*D;e[10]=V*ea-Y*D;e[11]=da*ea-ia*D;return e}function b(e,G,ea){const D=Math.sin(ea);ea=Math.cos(ea);const T=G[0],W=G[1],Y=
G[2],ia=G[3],fa=G[8],U=G[9],V=G[10],da=G[11];G!==e&&(e[4]=G[4],e[5]=G[5],e[6]=G[6],e[7]=G[7],e[12]=G[12],e[13]=G[13],e[14]=G[14],e[15]=G[15]);e[0]=T*ea-fa*D;e[1]=W*ea-U*D;e[2]=Y*ea-V*D;e[3]=ia*ea-da*D;e[8]=T*D+fa*ea;e[9]=W*D+U*ea;e[10]=Y*D+V*ea;e[11]=ia*D+da*ea;return e}function g(e,G,ea){const D=Math.sin(ea);ea=Math.cos(ea);const T=G[0],W=G[1],Y=G[2],ia=G[3],fa=G[4],U=G[5],V=G[6],da=G[7];G!==e&&(e[8]=G[8],e[9]=G[9],e[10]=G[10],e[11]=G[11],e[12]=G[12],e[13]=G[13],e[14]=G[14],e[15]=G[15]);e[0]=T*ea+
fa*D;e[1]=W*ea+U*D;e[2]=Y*ea+V*D;e[3]=ia*ea+da*D;e[4]=fa*ea-T*D;e[5]=U*ea-W*D;e[6]=V*ea-Y*D;e[7]=da*ea-ia*D;return e}function r(e,G){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=G[0];e[13]=G[1];e[14]=G[2];e[15]=1;return e}function B(e,G){e[0]=G[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=G[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=G[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function l(e,G,ea){let D=ea[0],T=ea[1];ea=ea[2];let W=Math.sqrt(D*D+T*T+ea*ea),Y=
void 0,ia=void 0,fa=void 0;if(W<F.EPSILON)return null;W=1/W;D*=W;T*=W;ea*=W;Y=Math.sin(G);ia=Math.cos(G);fa=1-ia;e[0]=D*D*fa+ia;e[1]=T*D*fa+ea*Y;e[2]=ea*D*fa-T*Y;e[3]=0;e[4]=D*T*fa-ea*Y;e[5]=T*T*fa+ia;e[6]=ea*T*fa+D*Y;e[7]=0;e[8]=D*ea*fa+T*Y;e[9]=T*ea*fa-D*Y;e[10]=ea*ea*fa+ia;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function E(e,G){const ea=Math.sin(G);G=Math.cos(G);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=G;e[6]=ea;e[7]=0;e[8]=0;e[9]=-ea;e[10]=G;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}
function J(e,G){const ea=Math.sin(G);G=Math.cos(G);e[0]=G;e[1]=0;e[2]=-ea;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=ea;e[9]=0;e[10]=G;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function O(e,G){const ea=Math.sin(G);G=Math.cos(G);e[0]=G;e[1]=ea;e[2]=0;e[3]=0;e[4]=-ea;e[5]=G;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function Q(e,G,ea){var D=G[0],T=G[1],W=G[2],Y=G[3],ia=D+D,fa=T+T;const U=W+W;G=D*ia;const V=D*fa;D*=U;const da=T*fa;T*=U;W*=U;ia*=Y;fa*=Y;Y*=
U;e[0]=1-(da+W);e[1]=V+Y;e[2]=D-fa;e[3]=0;e[4]=V-Y;e[5]=1-(G+W);e[6]=T+ia;e[7]=0;e[8]=D+fa;e[9]=T-ia;e[10]=1-(G+da);e[11]=0;e[12]=ea[0];e[13]=ea[1];e[14]=ea[2];e[15]=1;return e}function f(e,G){const ea=Ia,D=-G[0],T=-G[1],W=-G[2],Y=G[3],ia=G[4],fa=G[5],U=G[6],V=G[7],da=D*D+T*T+W*W+Y*Y;0<da?(ea[0]=2*(ia*Y+V*D+fa*W-U*T)/da,ea[1]=2*(fa*Y+V*T+U*D-ia*W)/da,ea[2]=2*(U*Y+V*W+ia*T-fa*D)/da):(ea[0]=2*(ia*Y+V*D+fa*W-U*T),ea[1]=2*(fa*Y+V*T+U*D-ia*W),ea[2]=2*(U*Y+V*W+ia*T-fa*D));Q(e,G,ea);return e}function k(e,
G){e[0]=G[12];e[1]=G[13];e[2]=G[14];return e}function m(e,G){const ea=G[0],D=G[1],T=G[2],W=G[4],Y=G[5],ia=G[6],fa=G[8],U=G[9];G=G[10];e[0]=Math.sqrt(ea*ea+D*D+T*T);e[1]=Math.sqrt(W*W+Y*Y+ia*ia);e[2]=Math.sqrt(fa*fa+U*U+G*G);return e}function A(e,G){const ea=G[0]+G[5]+G[10];let D=0;0<ea?(D=2*Math.sqrt(ea+1),e[3]=.25*D,e[0]=(G[6]-G[9])/D,e[1]=(G[8]-G[2])/D,e[2]=(G[1]-G[4])/D):G[0]>G[5]&&G[0]>G[10]?(D=2*Math.sqrt(1+G[0]-G[5]-G[10]),e[3]=(G[6]-G[9])/D,e[0]=.25*D,e[1]=(G[1]+G[4])/D,e[2]=(G[8]+G[2])/D):
G[5]>G[10]?(D=2*Math.sqrt(1+G[5]-G[0]-G[10]),e[3]=(G[8]-G[2])/D,e[0]=(G[1]+G[4])/D,e[1]=.25*D,e[2]=(G[6]+G[9])/D):(D=2*Math.sqrt(1+G[10]-G[0]-G[5]),e[3]=(G[1]-G[4])/D,e[0]=(G[8]+G[2])/D,e[1]=(G[6]+G[9])/D,e[2]=.25*D);return e}function S(e,G,ea,D){var T=G[0],W=G[1],Y=G[2],ia=G[3],fa=T+T,U=W+W,V=Y+Y;G=T*fa;const da=T*U;T*=V;const oa=W*U;W*=V;Y*=V;fa*=ia;U*=ia;ia*=V;V=D[0];const pa=D[1];D=D[2];e[0]=(1-(oa+Y))*V;e[1]=(da+ia)*V;e[2]=(T-U)*V;e[3]=0;e[4]=(da-ia)*pa;e[5]=(1-(G+Y))*pa;e[6]=(W+fa)*pa;e[7]=
0;e[8]=(T+U)*D;e[9]=(W-fa)*D;e[10]=(1-(G+oa))*D;e[11]=0;e[12]=ea[0];e[13]=ea[1];e[14]=ea[2];e[15]=1;return e}function P(e,G,ea,D,T){var W=G[0],Y=G[1],ia=G[2],fa=G[3],U=W+W,V=Y+Y,da=ia+ia;G=W*U;var oa=W*V,pa=W*da;W=Y*V;Y*=da;var ua=ia*da;ia=fa*U;V*=fa;const wa=fa*da;var za=D[0],Ga=D[1];da=D[2];D=T[0];fa=T[1];T=T[2];U=(1-(W+ua))*za;const Ca=(oa+wa)*za;za*=pa-V;oa=(oa-wa)*Ga;ua=(1-(G+ua))*Ga;Ga*=Y+ia;pa=(pa+V)*da;Y=(Y-ia)*da;G=(1-(G+W))*da;e[0]=U;e[1]=Ca;e[2]=za;e[3]=0;e[4]=oa;e[5]=ua;e[6]=Ga;e[7]=0;
e[8]=pa;e[9]=Y;e[10]=G;e[11]=0;e[12]=ea[0]+D-(U*D+oa*fa+pa*T);e[13]=ea[1]+fa-(Ca*D+ua*fa+Y*T);e[14]=ea[2]+T-(za*D+Ga*fa+G*T);e[15]=1;return e}function I(e,G){var ea=G[0],D=G[1],T=G[2];G=G[3];var W=ea+ea,Y=D+D;const ia=T+T;ea*=W;const fa=D*W;D*=Y;const U=T*W,V=T*Y;T*=ia;W*=G;Y*=G;G*=ia;e[0]=1-D-T;e[1]=fa+G;e[2]=U-Y;e[3]=0;e[4]=fa-G;e[5]=1-ea-T;e[6]=V+W;e[7]=0;e[8]=U+Y;e[9]=V-W;e[10]=1-ea-D;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function q(e,G,ea,D,T,W,Y){const ia=1/(ea-G),fa=1/(T-D),U=1/
(W-Y);e[0]=2*W*ia;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2*W*fa;e[6]=0;e[7]=0;e[8]=(ea+G)*ia;e[9]=(T+D)*fa;e[10]=(Y+W)*U;e[11]=-1;e[12]=0;e[13]=0;e[14]=Y*W*2*U;e[15]=0;return e}function w(e,G,ea,D,T){G=1/Math.tan(G/2);let W=void 0;e[0]=G/ea;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=G;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[11]=-1;e[12]=0;e[13]=0;e[15]=0;null!=T&&Infinity!==T?(W=1/(D-T),e[10]=(T+D)*W,e[14]=2*T*D*W):(e[10]=-1,e[14]=-2*D);return e}function N(e,G,ea,D){const T=Math.tan(G.upDegrees*Math.PI/180),W=Math.tan(G.downDegrees*
Math.PI/180),Y=Math.tan(G.leftDegrees*Math.PI/180);G=Math.tan(G.rightDegrees*Math.PI/180);const ia=2/(Y+G),fa=2/(T+W);e[0]=ia;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=fa;e[6]=0;e[7]=0;e[8]=-((Y-G)*ia*.5);e[9]=(T-W)*fa*.5;e[10]=D/(ea-D);e[11]=-1;e[12]=0;e[13]=0;e[14]=D*ea/(ea-D);e[15]=0;return e}function X(e,G,ea,D,T,W,Y){const ia=1/(G-ea),fa=1/(D-T),U=1/(W-Y);e[0]=-2*ia;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*fa;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*U;e[11]=0;e[12]=(G+ea)*ia;e[13]=(T+D)*fa;e[14]=(Y+W)*U;e[15]=
1;return e}function ca(e,G,ea,D){let T=void 0,W=void 0;var Y=void 0,ia=void 0;let fa=void 0,U=void 0;var V=void 0,da=void 0;let oa=void 0,pa=void 0;const ua=G[0],wa=G[1];G=G[2];Y=D[0];ia=D[1];D=D[2];V=ea[0];da=ea[1];ea=ea[2];if(Math.abs(ua-V)<F.EPSILON&&Math.abs(wa-da)<F.EPSILON&&Math.abs(G-ea)<F.EPSILON)return n(e);V=ua-V;da=wa-da;oa=G-ea;pa=1/Math.sqrt(V*V+da*da+oa*oa);V*=pa;da*=pa;oa*=pa;T=ia*oa-D*da;W=D*V-Y*oa;Y=Y*da-ia*V;(pa=Math.sqrt(T*T+W*W+Y*Y))?(pa=1/pa,T*=pa,W*=pa,Y*=pa):Y=W=T=0;ia=da*Y-
oa*W;fa=oa*T-V*Y;U=V*W-da*T;(pa=Math.sqrt(ia*ia+fa*fa+U*U))?(pa=1/pa,ia*=pa,fa*=pa,U*=pa):U=fa=ia=0;e[0]=T;e[1]=ia;e[2]=V;e[3]=0;e[4]=W;e[5]=fa;e[6]=da;e[7]=0;e[8]=Y;e[9]=U;e[10]=oa;e[11]=0;e[12]=-(T*ua+W*wa+Y*G);e[13]=-(ia*ua+fa*wa+U*G);e[14]=-(V*ua+da*wa+oa*G);e[15]=1;return e}function ja(e,G,ea,D){const T=G[0],W=G[1];G=G[2];var Y=D[0];const ia=D[1];var fa=D[2];D=T-ea[0];let U=W-ea[1];ea=G-ea[2];let V=D*D+U*U+ea*ea;0<V&&(V=1/Math.sqrt(V),D*=V,U*=V,ea*=V);let da=ia*ea-fa*U;fa=fa*D-Y*ea;Y=Y*U-ia*
D;V=da*da+fa*fa+Y*Y;0<V&&(V=1/Math.sqrt(V),da*=V,fa*=V,Y*=V);e[0]=da;e[1]=fa;e[2]=Y;e[3]=0;e[4]=U*Y-ea*fa;e[5]=ea*da-D*Y;e[6]=D*fa-U*da;e[7]=0;e[8]=D;e[9]=U;e[10]=ea;e[11]=0;e[12]=T;e[13]=W;e[14]=G;e[15]=1;return e}function na(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ta(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**
2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function ma(e,G,ea){e[0]=G[0]+ea[0];e[1]=G[1]+ea[1];e[2]=G[2]+ea[2];e[3]=G[3]+ea[3];e[4]=G[4]+ea[4];e[5]=G[5]+ea[5];e[6]=G[6]+ea[6];e[7]=G[7]+ea[7];e[8]=G[8]+ea[8];e[9]=G[9]+ea[9];e[10]=G[10]+ea[10];e[11]=G[11]+ea[11];e[12]=G[12]+ea[12];e[13]=G[13]+ea[13];e[14]=G[14]+ea[14];e[15]=G[15]+ea[15];return e}function la(e,G,ea){e[0]=G[0]-ea[0];e[1]=G[1]-ea[1];e[2]=G[2]-ea[2];e[3]=G[3]-ea[3];e[4]=G[4]-ea[4];e[5]=G[5]-ea[5];e[6]=G[6]-
ea[6];e[7]=G[7]-ea[7];e[8]=G[8]-ea[8];e[9]=G[9]-ea[9];e[10]=G[10]-ea[10];e[11]=G[11]-ea[11];e[12]=G[12]-ea[12];e[13]=G[13]-ea[13];e[14]=G[14]-ea[14];e[15]=G[15]-ea[15];return e}function va(e,G,ea){e[0]=G[0]*ea;e[1]=G[1]*ea;e[2]=G[2]*ea;e[3]=G[3]*ea;e[4]=G[4]*ea;e[5]=G[5]*ea;e[6]=G[6]*ea;e[7]=G[7]*ea;e[8]=G[8]*ea;e[9]=G[9]*ea;e[10]=G[10]*ea;e[11]=G[11]*ea;e[12]=G[12]*ea;e[13]=G[13]*ea;e[14]=G[14]*ea;e[15]=G[15]*ea;return e}function Ja(e,G,ea,D){e[0]=G[0]+ea[0]*D;e[1]=G[1]+ea[1]*D;e[2]=G[2]+ea[2]*D;
e[3]=G[3]+ea[3]*D;e[4]=G[4]+ea[4]*D;e[5]=G[5]+ea[5]*D;e[6]=G[6]+ea[6]*D;e[7]=G[7]+ea[7]*D;e[8]=G[8]+ea[8]*D;e[9]=G[9]+ea[9]*D;e[10]=G[10]+ea[10]*D;e[11]=G[11]+ea[11]*D;e[12]=G[12]+ea[12]*D;e[13]=G[13]+ea[13]*D;e[14]=G[14]+ea[14]*D;e[15]=G[15]+ea[15]*D;return e}function Ba(e,G){return e[0]===G[0]&&e[1]===G[1]&&e[2]===G[2]&&e[3]===G[3]&&e[4]===G[4]&&e[5]===G[5]&&e[6]===G[6]&&e[7]===G[7]&&e[8]===G[8]&&e[9]===G[9]&&e[10]===G[10]&&e[11]===G[11]&&e[12]===G[12]&&e[13]===G[13]&&e[14]===G[14]&&e[15]===G[15]}
function Sa(e,G){if(e===G)return!0;const ea=e[0],D=e[1],T=e[2],W=e[3],Y=e[4],ia=e[5],fa=e[6],U=e[7],V=e[8],da=e[9],oa=e[10],pa=e[11],ua=e[12],wa=e[13],za=e[14];e=e[15];const Ga=G[0],Ca=G[1],Da=G[2],Ea=G[3],Fa=G[4],Pa=G[5],ra=G[6],ab=G[7],Ua=G[8],Va=G[9],d=G[10],$a=G[11],Ra=G[12],zb=G[13],sb=G[14];G=G[15];return Math.abs(ea-Ga)<=F.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Ga))&&Math.abs(D-Ca)<=F.EPSILON*Math.max(1,Math.abs(D),Math.abs(Ca))&&Math.abs(T-Da)<=F.EPSILON*Math.max(1,Math.abs(T),Math.abs(Da))&&
Math.abs(W-Ea)<=F.EPSILON*Math.max(1,Math.abs(W),Math.abs(Ea))&&Math.abs(Y-Fa)<=F.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Fa))&&Math.abs(ia-Pa)<=F.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Pa))&&Math.abs(fa-ra)<=F.EPSILON*Math.max(1,Math.abs(fa),Math.abs(ra))&&Math.abs(U-ab)<=F.EPSILON*Math.max(1,Math.abs(U),Math.abs(ab))&&Math.abs(V-Ua)<=F.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ua))&&Math.abs(da-Va)<=F.EPSILON*Math.max(1,Math.abs(da),Math.abs(Va))&&Math.abs(oa-d)<=F.EPSILON*Math.max(1,Math.abs(oa),
Math.abs(d))&&Math.abs(pa-$a)<=F.EPSILON*Math.max(1,Math.abs(pa),Math.abs($a))&&Math.abs(ua-Ra)<=F.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Ra))&&Math.abs(wa-zb)<=F.EPSILON*Math.max(1,Math.abs(wa),Math.abs(zb))&&Math.abs(za-sb)<=F.EPSILON*Math.max(1,Math.abs(za),Math.abs(sb))&&Math.abs(e-G)<=F.EPSILON*Math.max(1,Math.abs(e),Math.abs(G))}function Oa(e){const G=F.EPSILON,ea=e[0],D=e[1],T=e[2],W=e[4],Y=e[5],ia=e[6],fa=e[8],U=e[9];e=e[10];return Math.abs(1-(ea*ea+W*W+fa*fa))<=G&&Math.abs(1-(D*D+Y*Y+U*
U))<=G&&Math.abs(1-(T*T+ia*ia+e*e))<=G}const Ia=a.create();a=Object.freeze({__proto__:null,copy:M,set:p,identity:n,transpose:y,invert:C,adjoint:u,determinant:t,multiply:z,translate:L,scale:x,rotate:h,rotateX:H,rotateY:b,rotateZ:g,fromTranslation:r,fromScaling:B,fromRotation:l,fromXRotation:E,fromYRotation:J,fromZRotation:O,fromRotationTranslation:Q,fromQuat2:f,getTranslation:k,getScaling:m,getRotation:A,fromRotationTranslationScale:S,fromRotationTranslationScaleOrigin:P,fromQuat:I,frustum:q,perspective:w,
perspectiveFromFieldOfView:N,ortho:X,lookAt:ca,targetTo:ja,str:na,frob:ta,add:ma,subtract:la,multiplyScalar:va,multiplyScalarAndAdd:Ja,exactEquals:Ba,equals:Sa,isOrthoNormal:Oa,mul:z,sub:la});c.add=ma;c.adjoint=u;c.copy=M;c.determinant=t;c.equals=Sa;c.exactEquals=Ba;c.frob=ta;c.fromQuat=I;c.fromQuat2=f;c.fromRotation=l;c.fromRotationTranslation=Q;c.fromRotationTranslationScale=S;c.fromRotationTranslationScaleOrigin=P;c.fromScaling=B;c.fromTranslation=r;c.fromXRotation=E;c.fromYRotation=J;c.fromZRotation=
O;c.frustum=q;c.getRotation=A;c.getScaling=m;c.getTranslation=k;c.identity=n;c.invert=C;c.isOrthoNormal=Oa;c.lookAt=ca;c.mat4=a;c.mul=z;c.multiply=z;c.multiplyScalar=va;c.multiplyScalarAndAdd=Ja;c.ortho=X;c.perspective=w;c.perspectiveFromFieldOfView=N;c.rotate=h;c.rotateX=H;c.rotateY=b;c.rotateZ=g;c.scale=x;c.set=p;c.str=na;c.sub=la;c.subtract=la;c.targetTo=ja;c.translate=L;c.transpose=y})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],
function(c,a,F,M,p){function n(){return!!a._pe}function y(){return!!p("esri-wasm")}function C(){return h?h:h=(new Promise((b,g)=>c(["./pe-wasm"],b,g))).then(b=>b.peWasm).then(({default:b})=>b({locateFile:g=>M.getAssetUrl(`esri/geometry/support/${g}`)})).then(b=>{u(b)})}function u(b){function g(l,E,J){l[E]=J(l[E])}a._pe=b;a.PeDefs.init();a.PeGTlistExtended.init();a.PeNotationMgrs.init();a.PeNotationUtm.init();a.PePCSInfo.init();a.PeGCSExtent=function(l){function E(){return l.apply(this,arguments)||
this}F._inheritsLoose(E,l);E.prototype.destroy=function(){a._pe.destroy(this)};return E}(a._pe.PeGCSExtent);b=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];for(var r of b)g(r.prototype,"getName",l=>function(){return l.call(this,Array(a.PeDefs.PE_NAME_MAX))});for(const l of[a._pe.PeGeogtran,a._pe.PeProjcs])g(l.prototype,"getParameters",E=>function(){const J=Array(a.PeDefs.PE_PARM_MAX);let O=E.call(this);
for(let Q=0;Q<J.length;Q++){const f=a._pe.getValue(O,"*");J[Q]=f?a._pe.wrapPointer(f,a._pe.PeParameter):null;O+=Int32Array.BYTES_PER_ELEMENT}return J});g(a._pe.PeHorizon.prototype,"getCoord",l=>function(){const E=this.getSize();if(!E)return null;const J=[],O=l.call(this);x(J,E,O);return J});g(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",l=>{const E=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){let J=null;var O=l.call(this);if(!a._pe.compare(O,a._pe.NULL)){J=[O];const Q=this.getSteps();
if(1<Q){O=a._pe.getPointer(O);for(let f=1;f<Q;f++)J.push(a._pe.wrapPointer(O+E*f,a._pe.PeGTlistExtendedGTs))}}return J}});const B=a._pe._pe_getPeHorizonSize();r=l=>function(){let E=this._cache;E||(this._cache=E=new Map);if(E.has(l))return E.get(l);let J=null;var O=l.call(this);if(!a._pe.compare(O,a._pe.NULL)){J=[O];const Q=O.getNump();if(1<Q){O=a._pe.getPointer(O);for(let f=1;f<Q;f++)J.push(a._pe.wrapPointer(O+B*f,a._pe.PeHorizon))}}E.set(l,J);return J};g(a._pe.PeProjcs.prototype,"horizonGcsGenerate",
r);g(a._pe.PeProjcs.prototype,"horizonPcsGenerate",r);a._pe.PeObject.prototype.toString=function(l=a.PeDefs.PE_STR_OPTS_NONE){a._pe.ensureCache.prepare();const E=a._pe.getPointer(this),J=a._pe.ensureInt8(Array(a.PeDefs.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(E,l,J))}}function t(b){if(b){var g=a._pe.getClass(b);g&&(g=a._pe.getCache(g))&&(b=a._pe.getPointer(b))&&delete g[b]}}function z(b,g){const r=[];g=Array(g);for(let B=0;B<b;B++)r.push(a._pe.ensureInt8(g));return r}
function L(b){let g;Array.isArray(b[0])?(g=[],b.forEach(r=>{g.push(r[0],r[1])})):g=b;return g}function x(b,g,r,B=!1){if(B)for(B=0;B<2*g;B++)b[B]=a._pe.getValue(r+B*Float64Array.BYTES_PER_ELEMENT,"double");else{B=0===b.length;for(let l=0;l<g;l++)B&&(b[l]=Array(2)),b[l][0]=a._pe.getValue(r,"double"),b[l][1]=a._pe.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}let h;a._pe=null;a.PeCSTransformations=void 0;(function(b){function g(l,E,J){a._pe.ensureCache.prepare();
var O=L(J);const Q=J===O;O=a._pe.ensureFloat64(O);(l=a._pe._pe_geog_to_proj(a._pe.getPointer(l),E,O))&&x(J,E,O,Q);return l}function r(l,E,J){return B(l,E,J,0)}function B(l,E,J,O){a._pe.ensureCache.prepare();var Q=L(J);const f=J===Q;Q=a._pe.ensureFloat64(Q);(l=a._pe._pe_proj_to_geog_center(a._pe.getPointer(l),E,Q,O))&&x(J,E,Q,f);return l}b.geogToProj=g;b.projGeog=function(l,E,J,O){switch(O){case a.PeDefs.PE_TRANSFORM_P_TO_G:return r(l,E,J);case a.PeDefs.PE_TRANSFORM_G_TO_P:return g(l,E,J)}return 0};
b.projToGeog=r;b.projToGeogCenter=B})(a.PeCSTransformations||(a.PeCSTransformations={}));a.PeDefs=void 0;(function(b){b.init=function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;
b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_TYPE_LINUNIT=a._pe.PeDefs.prototype.PE_TYPE_LINUNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=
a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(a.PeDefs||(a.PeDefs={}));a.PeFactory=void 0;(function(b){function g(E,J){let O=null,Q=r[E];Q||(Q={},r[E]=Q);Q.hasOwnProperty(String(J))?O=Q[J]:(E=a._pe.PeFactory.prototype.factoryByType(E,J),a._pe.compare(E,a._pe.NULL)||(O=E,Q[J]=O));return O=l(O)}const r={},B={},l=E=>
{if(E){const J=E.getType();switch(J){case a.PeDefs.PE_TYPE_GEOGCS:E=a._pe.castObject(E,a._pe.PeGeogcs);break;case a.PeDefs.PE_TYPE_PROJCS:E=a._pe.castObject(E,a._pe.PeProjcs);break;case a.PeDefs.PE_TYPE_GEOGTRAN:E=a._pe.castObject(E,a._pe.PeGeogtran);break;default:J&a.PeDefs.PE_TYPE_UNIT&&(E=a._pe.castObject(E,a._pe.PeUnit))}}return E};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(E){return g(a.PeDefs.PE_TYPE_COORDSYS,E)};b.factoryByType=g;b.fromString=function(E,
J){let O=null,Q=B[E];Q||(Q={},B[E]=Q);Q.hasOwnProperty(J)?O=Q[J]:(E=a._pe.PeFactory.prototype.fromString(E,J),a._pe.compare(E,a._pe.NULL)||(O=E,Q[J]=O));return O=l(O)};b.geogcs=function(E){return g(a.PeDefs.PE_TYPE_GEOGCS,E)};b.geogtran=function(E){return g(a.PeDefs.PE_TYPE_GEOGTRAN,E)};b.getCode=function(E){return a._pe.PeFactory.prototype.getCode(E)};b.projcs=function(E){return g(a.PeDefs.PE_TYPE_PROJCS,E)};b.unit=function(E){return g(a.PeDefs.PE_TYPE_UNIT,E)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=
null;a.PeGTlistExtended=void 0;(function(b){let g;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;g=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(r,B,l,E,J,O){let Q=null;const f=new a._pe.PeInteger(O);try{const k=a._pe.PeGTlistExtended.prototype.getGTlist(r,B,l,E,J,f);if(O=f.val)if(Q=[k],1<O){const m=a._pe.getPointer(k);for(r=1;r<O;r++)Q.push(a._pe.wrapPointer(m+g*r,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(f)}return Q}})(a.PeGTlistExtended||
(a.PeGTlistExtended={}));a.PeGTlistExtendedEntry=void 0;(function(b){b.destroy=function(g){if(g&&g.length){for(const r of g)t(r),r.getEntries().forEach(B=>{t(B);B=B.getGeogtran();t(B);B.getParameters().forEach(t);[B.getGeogcs1(),B.getGeogcs2()].forEach(l=>{t(l);const E=l.getDatum();t(E);t(E.getSpheroid());t(l.getPrimem());t(l.getUnit())})});a._pe.PeGTlistExtendedEntry.prototype.Delete(g[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));a.PeGTTransformations=void 0;(function(b){b.geogToGeog=
function(g,r,B,l,E){a._pe.ensureCache.prepare();var J=L(B);const O=B===J;J=a._pe.ensureFloat64(J);let Q=0;l&&(Q=a._pe.ensureFloat64(l));(g=a._pe._pe_geog_to_geog(a._pe.getPointer(g),r,J,Q,E))&&x(B,r,J,O);return g}})(a.PeGTTransformations||(a.PeGTTransformations={}));a.PeNotationDms=void 0;(function(b){const g=(B,l,E,J,O,Q)=>{a._pe.ensureCache.prepare();switch(B){case "dd":var f=a._pe._pe_geog_to_dd;var k=a.PeDefs.PE_DD_MAX;break;case "ddm":f=a._pe._pe_geog_to_ddm;k=a.PeDefs.PE_DDM_MAX;break;case "dms":f=
a._pe._pe_geog_to_dms,k=a.PeDefs.PE_DMS_MAX}B=0;l&&(B=a._pe.getPointer(l));l=L(J);l=a._pe.ensureFloat64(l);k=z(E,k);J=a._pe.ensureInt32(k);if(O=f(B,E,l,O,J))for(f=0;f<E;f++)Q[f]=a._pe.UTF8ToString(k[f]);return O},r=(B,l,E,J,O)=>{a._pe.ensureCache.prepare();switch(B){case "dd":var Q=a._pe._pe_dd_to_geog;break;case "ddm":Q=a._pe._pe_ddm_to_geog;break;case "dms":Q=a._pe._pe_dms_to_geog}B=0;l&&(B=a._pe.getPointer(l));l=J.map(f=>a._pe.ensureString(f));J=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*
E));(Q=Q(B,E,J,l))&&x(O,E,l);return Q};b.geog_to_dms=function(B,l,E,J,O){return g("dms",B,l,E,J,O)};b.dms_to_geog=function(B,l,E,J){return r("dms",B,l,E,J)};b.geog_to_ddm=function(B,l,E,J,O){return g("ddm",B,l,E,J,O)};b.ddm_to_geog=function(B,l,E,J){return r("ddm",B,l,E,J)};b.geog_to_dd=function(B,l,E,J,O){return g("dd",B,l,E,J,O)};b.dd_to_geog=function(B,l,E,J){return r("dd",B,l,E,J)}})(a.PeNotationDms||(a.PeNotationDms={}));a.PeNotationMgrs=void 0;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=
a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(g,r,B,l,E,J,O){a._pe.ensureCache.prepare();let Q=0;g&&(Q=a._pe.getPointer(g));g=L(B);B=a._pe.ensureFloat64(g);g=z(r,a.PeDefs.PE_MGRS_MAX);
const f=a._pe.ensureInt32(g);if(l=a._pe._pe_geog_to_mgrs_extended(Q,r,B,l,E,J,f))for(E=0;E<r;E++)O[E]=a._pe.UTF8ToString(g[E]);return l};b.mgrs_to_geog_extended=function(g,r,B,l,E){a._pe.ensureCache.prepare();let J=0;g&&(J=a._pe.getPointer(g));g=B.map(O=>a._pe.ensureString(O));B=a._pe.ensureInt32(g);g=a._pe.ensureFloat64(Array(2*r));(l=a._pe._pe_mgrs_to_geog_extended(J,r,B,l,g))&&x(E,r,g);return l}})(a.PeNotationMgrs||(a.PeNotationMgrs={}));a.PeNotationUsng=void 0;(function(b){b.geog_to_usng=function(g,
r,B,l,E,J,O){a._pe.ensureCache.prepare();let Q=0;g&&(Q=a._pe.getPointer(g));g=L(B);B=a._pe.ensureFloat64(g);g=z(r,a.PeDefs.PE_MGRS_MAX);const f=a._pe.ensureInt32(g);if(l=a._pe._pe_geog_to_usng(Q,r,B,l,E,J,f))for(E=0;E<r;E++)O[E]=a._pe.UTF8ToString(g[E]);return l};b.usng_to_geog=function(g,r,B,l){a._pe.ensureCache.prepare();var E=0;g&&(E=a._pe.getPointer(g));g=B.map(J=>a._pe.ensureString(J));B=a._pe.ensureInt32(g);g=a._pe.ensureFloat64(Array(2*r));(E=a._pe._pe_usng_to_geog(E,r,B,g))&&x(l,r,g);return E}})(a.PeNotationUsng||
(a.PeNotationUsng={}));a.PeNotationUtm=void 0;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(g,r,B,l,E){a._pe.ensureCache.prepare();var J=0;g&&(J=a._pe.getPointer(g));g=L(B);B=a._pe.ensureFloat64(g);g=z(r,a.PeDefs.PE_UTM_MAX);const O=a._pe.ensureInt32(g);if(l=a._pe._pe_geog_to_utm(J,r,B,
l,O))for(J=0;J<r;J++)E[J]=a._pe.UTF8ToString(g[J]);return l};b.utm_to_geog=function(g,r,B,l,E){a._pe.ensureCache.prepare();let J=0;g&&(J=a._pe.getPointer(g));g=B.map(O=>a._pe.ensureString(O));B=a._pe.ensureInt32(g);g=a._pe.ensureFloat64(Array(2*r));(l=a._pe._pe_utm_to_geog(J,r,B,l,g))&&x(E,r,g);return l}})(a.PeNotationUtm||(a.PeNotationUtm={}));a.PePCSInfo=void 0;(function(b){const g=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=
a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(r,B=b.PE_PCSINFO_OPTION_DOMAIN){let l,E;g.has(r)&&(E=g.get(r),E[B]&&(l=E[B]));l||(l=a._pe.PePCSInfo.prototype.generate(r,B),E||(E=[],g.set(r,E)),E[B]=l);return l}})(a.PePCSInfo||(a.PePCSInfo={}));a.PeVersion=void 0;(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||
(a.PeVersion={}));const H=Object.freeze({__proto__:null,get _pe(){return a._pe},isLoaded:n,isSupported:y,load:C,get PeCSTransformations(){return a.PeCSTransformations},get PeDefs(){return a.PeDefs},get PeFactory(){return a.PeFactory},get PeGCSExtent(){return a.PeGCSExtent},get PeGTlistExtended(){return a.PeGTlistExtended},get PeGTlistExtendedEntry(){return a.PeGTlistExtendedEntry},get PeGTTransformations(){return a.PeGTTransformations},get PeNotationDms(){return a.PeNotationDms},get PeNotationMgrs(){return a.PeNotationMgrs},
get PeNotationUsng(){return a.PeNotationUsng},get PeNotationUtm(){return a.PeNotationUtm},get PePCSInfo(){return a.PePCSInfo},get PeVersion(){return a.PeVersion},_init:u});a._init=u;a.isLoaded=n;a.isSupported=y;a.load=C;a.pe=H})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(c,a){const F=Math.PI/180;var M=a.earth.radius;const p=a.earth.eccentricitySquared;M={a1:M*p,a2:M*p*M*p,a3:M*p*p/2,a4:M*p*M*p*2.5,a5:M*p+M*p*p/2,a6:1-p};a={4267:{a:6378206.4,f:1/
294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:a.earth.radius,f:a.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:a.moon.radius,f:a.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:a.mars.radius,f:a.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:a.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};c.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;c.earthEllipsoidConstants=M;c.spheroids=a;c.toRadians=F;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(c){return function(){function a(M){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(M&&M.steps)for(const p of M.steps)p instanceof c?this.steps.push(p):this.steps.push(new c({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}a.cacheKey=function(M,p){return[void 0!==M.wkid&&null!==M.wkid?M.wkid.toString():"-1",void 0!==M.wkt&&null!==M.wkt?M.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};
a.fromGE=function(M){const p=new a;let n="";for(const y of M.steps)M=c.fromGE(y),p.steps.push(M),n+=M.uid.toString()+",";p._cached_projection={};p._gtlistentry=null;p._chain=n;return p};var F=a.prototype;F.getInverse=function(){const M=new a;M.steps=[];for(let p=this.steps.length-1;0<=p;p--)M.steps.push(this.steps[p].getInverse());return M};F.getGTListEntry=function(){let M="";for(const p of this.steps)M+=p.uid.toString()+",";M!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
M);return this._gtlistentry};F.assignCachedGe=function(M,p,n){this._cached_projection[a.cacheKey(M,p)]=n};F.getCachedGeTransformation=function(M,p){let n="";for(const y of this.steps)n+=y.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);M=this._cached_projection[a.cacheKey(M,p)];return void 0===M?null:M};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(c){let a=
0;return function(){function F(M=null){this.uid=a++;M?(this._wkt=void 0!==M.wkt?M.wkt:null,this._wkid=void 0!==M.wkid?M.wkid:-1,this._isInverse=void 0!==M.isInverse?!0===M.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}F.fromGE=function(M){const p=new F;p._wkt=M.wkt;p._wkid=M.wkid;p._isInverse=M.isInverse;return p};F.prototype.getInverse=function(){const M=new F;M._wkt=this.wkt;M._wkid=this._wkid;M._isInverse=!this.isInverse;return M};c._createClass(F,[{key:"wkt",get:function(){return this._wkt},
set:function(M){this._wkt=M;this.uid=a++}},{key:"wkid",get:function(){return this._wkid},set:function(M){this._wkid=M;this.uid=a++}},{key:"isInverse",get:function(){return this._isInverse},set:function(M){this._isInverse=M;this.uid=a++}}]);return F}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(c,a,F,M){c.getGeometryZScaler=function(p,n,y){if(a.isNone(n)||a.isNone(y)||y.vcsWkid||M.equals(n,y))return null;
n=F.getMetersPerVerticalUnitForSR(n);y=F.getMetersPerVerticalUnitForSR(y);const C=n/y;if(1===C)return null;switch(p){case "point":case "esriGeometryPoint":return u=>{u&&null!=u.z&&(u.z*=C)};case "polyline":case "esriGeometryPolyline":return u=>{if(u)for(const t of u.paths)for(const z of t)2<z.length&&(z[2]*=C)};case "polygon":case "esriGeometryPolygon":return u=>{if(u)for(const t of u.rings)for(const z of t)2<z.length&&(z[2]*=C)};case "multipoint":case "esriGeometryMultipoint":return u=>{if(u)for(const t of u.points)2<
t.length&&(t[2]*=C)};case "extent":case "esriGeometryExtent":return u=>{u&&null!=u.zmin&&null!=u.zmax&&(u.zmin*=C,u.zmax*=C)};default:return null}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(c){let a=function(y,C,u){this.x=y;this.y=C;this.spatialReference=u;this.m=this.z=void 0},F=function(y,C,u,t){this.rings=y;this.spatialReference=C;this.hasM=this.hasZ=void 0;u&&(this.hasZ=u);t&&(this.hasM=t)},M=function(y,C,u,
t){this.paths=y;this.spatialReference=C;this.hasM=this.hasZ=void 0;u&&(this.hasZ=u);t&&(this.hasM=t)},p=function(y,C,u,t){this.points=y;this.spatialReference=C;this.hasM=this.hasZ=void 0;u&&(this.hasZ=u);t&&(this.hasM=t)},n=function(y,C,u,t,z){this.xmin=y;this.ymin=C;this.xmax=u;this.ymax=t;this.spatialReference=z;this.mmax=this.mmin=this.zmax=this.zmin=void 0};c.jsonAdapter={convertToGEGeometry:function(y,C){return null==C?null:y.convertJSONToGeometry(C)},exportPoint:function(y,C,u){u=new a(y.getPointX(C),
y.getPointY(C),u);const t=y.hasZ(C),z=y.hasM(C);t&&(u.z=y.getPointZ(C));z&&(u.m=y.getPointM(C));return u},exportPolygon:function(y,C,u){return new F(y.exportPaths(C),u,y.hasZ(C),y.hasM(C))},exportPolyline:function(y,C,u){return new M(y.exportPaths(C),u,y.hasZ(C),y.hasM(C))},exportMultipoint:function(y,C,u){return new p(y.exportPoints(C),u,y.hasZ(C),y.hasM(C))},exportExtent:function(y,C,u){var t=y.hasZ(C);const z=y.hasM(C);u=new n(y.getXMin(C),y.getYMin(C),y.getXMax(C),y.getYMax(C),u);t&&(t=y.getZExtent(C),
u.zmin=t.vmin,u.zmax=t.vmax);z&&(y=y.getMExtent(C),u.mmin=y.vmin,u.mmax=y.vmax);return u}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(c){c.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,
supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x){function h(b,g,r,B,l,E){l-=r;E-=B;b=Math.min(1,Math.max(0,((b-r)*l+(g-B)*E)/(l*l+E*E)));return{x:r+l*b,y:B+E*b}}function H(b,g){return b?g?4:3:g?3:2}return function(){function b(r,B,l){this.items=r;this.queryGeometry=B;this.definitionExpression=l.definitionExpression;this.geometryType=l.geometryType;this.hasM=l.hasM;this.hasZ=l.hasZ;this.objectIdField=l.objectIdField;this.spatialReference=l.spatialReference;this.fieldsIndex=l.fieldsIndex;this.timeInfo=l.timeInfo;
this.featureAdapter=l.featureAdapter;this.aggregateAdapter=l.aggregateAdapter}var g=b.prototype;g.createQueryResponseForCount=function(r){const B=new n(r,this.featureAdapter,this.fieldsIndex);if(!r.outStatistics)return B.countDistinctValues(this.items);const {groupByFieldsForStatistics:l,having:E}=r;if(null==l||!l.length)return 1;const J=new Map,O=new Map,Q=new Set;r=r.outStatistics;for(const k of r){({statisticType:r}=k);r="exceedslimit"!==r?k.onStatisticField:void 0;if(!O.has(r)){var f=[];for(const m of l){const A=
this._getAttributeValues(B,m,J);f.push(A)}O.set(r,this._calculateUniqueValues(f,B.returnDistinctValues))}r=O.get(r);for(const m in r){const {data:A,items:S}=r[m];f=A.join(",");E&&!B.validateItems(S,E)||Q.add(f)}}return Q.size};g.createQueryResponse=function(r){let B;B=r.outStatistics?r.outStatistics.some(l=>"exceedslimit"===l.statisticType)?this._createExceedsLimitQueryResponse(r):this._createStatisticsQueryResponse(r):this._createFeatureQueryResponse(r);r.returnQueryGeometry&&(M.isValid(r.outSR)&&
!M.equals(this.queryGeometry.spatialReference,r.outSR)?B.queryGeometry=t.cleanFromGeometryEngine({spatialReference:r.outSR,...C.project(this.queryGeometry,this.queryGeometry.spatialReference,r.outSR)}):B.queryGeometry=t.cleanFromGeometryEngine({spatialReference:r.outSR,...this.queryGeometry}));return B};g.createSnappingResponse=function(r,B){const l=this.featureAdapter,E=H(this.hasZ,this.hasM),{x:J,y:O}=r.point,Q="number"===typeof r.distance?r.distance:r.distance.x,f="number"===typeof r.distance?
r.distance:r.distance.y,k={candidates:[]},m="esriGeometryPolygon"===this.geometryType;B=this.getPointCreator(r.point,this.spatialReference,B);for(const X of this.items){var A=l.getGeometry(X);if(a.isNone(A))continue;const {coords:ca,lengths:ja}=A;if(r.types&1){A=0;for(var S=0;S<ja.length;S++){var P=ja[S];for(var I=0;I<P;I++,A+=E){var q=ca[A],w=ca[A+1];if(I!==P-1){const na=ca[A+E],ta=ca[A+E+1],{x:ma,y:la}=h(J,O,q,w,na,ta);var N=(J-ma)/Q;const va=(O-la)/f;N=N*N+va*va;1>=N&&k.candidates.push({type:"edge",
objectId:l.getObjectId(X),distance:Math.sqrt(N),target:B(ma,la),start:B(q,w),end:B(na,ta)})}}}}if(r.types&2)for(A=m?ca.length-E:ca.length,S=0;S<A;S+=E)P=ca[S],I=ca[S+1],q=(J-P)/Q,w=(O-I)/f,q=q*q+w*w,1>=q&&k.candidates.push({type:"vertex",objectId:l.getObjectId(X),distance:Math.sqrt(q),target:B(P,I)})}k.candidates.sort((X,ca)=>X.distance-ca.distance);return k};g.getPointCreator=function(r,B,l){const E=a.isSome(l)&&!M.equals(B,l)?J=>C.project(J,B,l):J=>J;return null!=r.z&&null!=r.m?(J,O)=>E({x:J,y:O,
z:r.z,m:r.m}):null!=r.z?(J,O)=>E({x:J,y:O,z:r.z}):null!=r.m?(J,O)=>E({x:J,y:O,m:r.m}):(J,O)=>E({x:J,y:O})};g.executeAttributesQuery=function(r){var B=y.getWhereClause(r.where,this.fieldsIndex);if(!B)return Promise.resolve(this);if(B.isStandardized){let l=0;const E=[];for(const J of this.items)B.testFeature(J,this.featureAdapter)&&(E[l++]=J);B=new b(E,this.queryGeometry,this);B.definitionExpression=r.where;return Promise.resolve(B)}return Promise.reject(new TypeError("Where clause is not standardized"))};
g.executeAggregateIdsQuery=function(r){if(!r.aggregateIds||!r.aggregateIds.length||a.isNone(this.aggregateAdapter))return Promise.resolve(this);const B=new Set;for(const E of r.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(E).forEach(J=>B.add(J));const l=this.featureAdapter.getObjectId;return Promise.resolve(new b(this.items.filter(E=>B.has(l(E))),this.queryGeometry,this))};g.executeObjectIdsQuery=function(r){if(!r.objectIds||!r.objectIds.length)return Promise.resolve(this);const B=new Set(r.objectIds),
l=this.featureAdapter.getObjectId;return Promise.resolve(new b(this.items.filter(E=>B.has(l(E))),this.queryGeometry,this))};g.executeTimeQuery=function(r){r=u.getTimeOperator(this.timeInfo,r.timeExtent,this.featureAdapter);if(!a.isSome(r))return Promise.resolve(this);r=this.items.filter(r);return Promise.resolve(new b(r,this.queryGeometry,this))};g.filterLatest=function(){const {trackIdField:r,startTimeField:B,endTimeField:l}=this.timeInfo;var E=l||B;const J=new Map,O=this.featureAdapter.getAttribute;
for(const Q of this.items){const f=O(Q,r),k=O(Q,E),m=J.get(f);(!m||k>O(m,E))&&J.set(f,Q)}E=Array.from(J.values());return Promise.resolve(new b(E,this.queryGeometry,this))};g.project=function(){var r=c._asyncToGenerator(function*(B){if(!B||M.equals(this.spatialReference,B))return this;const l=this.featureAdapter,E=(yield C.projectMany(this.items.map(J=>t.getGeometry(this.geometryType,this.hasZ,this.hasM,l.getGeometry(J))),this.spatialReference,B)).map((J,O)=>l.cloneWithGeometry(this.items[O],p.convertFromGeometry(J,
this.hasZ,this.hasM)));return new b(E,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:B,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(B){return r.apply(this,arguments)}}();g.createSummaryStatisticsResponse=function(){var r=c._asyncToGenerator(function*(B,l){const {field:E,valueExpression:J,normalizationField:O,
normalizationType:Q,normalizationTotal:f,minValue:k,maxValue:m,scale:A}=l;l=this.fieldsIndex.isDateField(E);B=yield this._getDataValues(B,{field:E,valueExpression:J,normalizationField:O,normalizationType:Q,normalizationTotal:f,scale:A});const S=L.isNullCountSupported({normalizationType:Q,normalizationField:O,minValue:k,maxValue:m}),P=this.fieldsIndex.get(E),I={value:.5,fieldType:null==P?void 0:P.type};B=z.isStringField(P)?L.calculateStringStatistics({values:B,supportsNullCount:S,percentileParams:I}):
L.calculateStatistics({values:B,minValue:k,maxValue:m,useSampleStdDev:!Q,supportsNullCount:S,percentileParams:I});return L.processSummaryStatisticsResult(B,l)});return function(B,l){return r.apply(this,arguments)}}();g.createUniqueValuesResponse=function(){var r=c._asyncToGenerator(function*(B,l){const {field:E,valueExpression:J,domain:O,returnAllCodedValues:Q,scale:f}=l;B=yield this._getDataValues(B,{field:E,valueExpression:J,scale:f});B=L.calculateUniqueValuesCount(B);return L.createUVResult(B,
O,Q)});return function(B,l){return r.apply(this,arguments)}}();g.createClassBreaksResponse=function(){var r=c._asyncToGenerator(function*(B,l){const {field:E,valueExpression:J,normalizationField:O,normalizationType:Q,normalizationTotal:f,classificationMethod:k,standardDeviationInterval:m,minValue:A,maxValue:S,numClasses:P,scale:I}=l;B=yield this._getDataValues(B,{field:E,valueExpression:J,normalizationField:O,normalizationType:Q,normalizationTotal:f,scale:I});B=L.calculateClassBreaks(B,{field:E,normalizationField:O,
normalizationType:Q,normalizationTotal:f,classificationMethod:k,standardDeviationInterval:m,minValue:A,maxValue:S,numClasses:P});return L.resolveCBResult(B,k)});return function(B,l){return r.apply(this,arguments)}}();g.createHistogramResponse=function(){var r=c._asyncToGenerator(function*(B,l){const {field:E,valueExpression:J,normalizationField:O,normalizationType:Q,normalizationTotal:f,classificationMethod:k,standardDeviationInterval:m,minValue:A,maxValue:S,numBins:P,scale:I}=l;B=yield this._getDataValues(B,
{field:E,valueExpression:J,normalizationField:O,normalizationType:Q,normalizationTotal:f,scale:I});return L.calculateHistogram(B,{field:E,normalizationField:O,normalizationType:Q,normalizationTotal:f,classificationMethod:k,standardDeviationInterval:m,minValue:A,maxValue:S,numBins:P})});return function(B,l){return r.apply(this,arguments)}}();g._sortFeatures=function(r,B,l){if(1<r.length&&B&&B.length)for(const E of B.reverse()){B=E.split(" ");const J=B[0],O=this.fieldsIndex.get(J);B=B[1]&&"desc"===
B[1].toLowerCase();const Q=L.getAttributeComparator(null==O?void 0:O.type,B);r.sort((f,k)=>{f=l(f,J,O);k=l(k,J,O);return Q(f,k)})}};g._createFeatureQueryResponse=function(r){const B=this.items,{geometryType:l,hasM:E,hasZ:J,objectIdField:O,spatialReference:Q}=this,{outFields:f,outSR:k,quantizationParameters:m,resultRecordCount:A,resultOffset:S,returnZ:P,returnM:I}=r,q=null!=A?B.length>(S||0)+A:!1,w=f&&(f.includes("*")?[...this.fieldsIndex.fields]:f.map(N=>this.fieldsIndex.get(N)));return{exceededTransferLimit:q,
features:this._createFeatures(r,B),fields:w,geometryType:l,hasM:E&&I,hasZ:J&&P,objectIdFieldName:O,spatialReference:t.cleanFromGeometryEngine(k?k:Q),transform:m&&F.toQuantizationTransform(m)||null}};g._createFeatures=function(r,B){const l=new n(r,this.featureAdapter,this.fieldsIndex),{hasM:E,hasZ:J}=this,{orderByFields:O,quantizationParameters:Q,returnGeometry:f,returnCentroid:k,maxAllowableOffset:m,resultOffset:A,resultRecordCount:S,returnZ:P=!1,returnM:I=!1}=r,q=J&&P,w=E&&I;r=[];var N=0;B=[...B];
this._sortFeatures(B,O,(ja,na,ta)=>l.getFieldValue(ja,na,ta));if(f||k){var X=F.toQuantizationTransform(Q);if(f&&!k)for(var ca of B)r[N++]={attributes:l.getAttributes(ca),geometry:t.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ca),m,X,q,w)};else if(!f&&k)for(const ja of B)r[N++]={attributes:l.getAttributes(ja),centroid:t.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),X)};else for(const ja of B)r[N++]={attributes:l.getAttributes(ja),centroid:t.transformCentroid(this,
this.featureAdapter.getCentroid(ja,this),X),geometry:t.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ja),m,X,q,w)}}else for(X of B)(ca=l.getAttributes(X))&&(r[N++]={attributes:ca});N=A||0;null!=S&&(r=r.slice(N,Math.min(r.length,N+S)));return r};g._createExceedsLimitQueryResponse=function(r){var B=!1;let l=Number.POSITIVE_INFINITY,E=Number.POSITIVE_INFINITY;B=Number.POSITIVE_INFINITY;for(const J of r.outStatistics)if("exceedslimit"===J.statisticType){l=null!=J.maxPointCount?
J.maxPointCount:Number.POSITIVE_INFINITY;E=null!=J.maxRecordCount?J.maxRecordCount:Number.POSITIVE_INFINITY;B=null!=J.maxVertexCount?J.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)B=this.items.length>l;else if(this.items.length>E)B=!0;else{r=this.hasZ?this.hasM?4:3:this.hasM?3:2;const J=this.featureAdapter;B=this.items.reduce((O,Q)=>{Q=J.getGeometry(Q);return O+(a.isSome(Q)&&Q.coords.length||0)},0)/r>B}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",
alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(B)}}]}};g._createStatisticsQueryResponse=function(r){var B={attributes:{}};const l=[],E=new Map,J=new Map,O=new Map,Q=new Map,f=new n(r,this.featureAdapter,this.fieldsIndex);var k=r.outStatistics;const {groupByFieldsForStatistics:m,having:A,orderByFields:S}=r;r=m&&m.length;const P=!!r,I=P&&m[0],q=P&&!this.fieldsIndex.get(I);for(const ja of k){const {outStatisticFieldName:na,statisticType:ta}=
ja;k=ja;var w="exceedslimit"!==ta?ja.onStatisticField:void 0;const ma="percentile_disc"===ta||"percentile_cont"===ta,la=P&&1===r&&(w===I||q)&&"count"===ta;if(P){if(!O.has(w)){var N=[];for(const va of m){var X=this._getAttributeValues(f,va,E);N.push(X)}O.set(w,this._calculateUniqueValues(N,f.returnDistinctValues))}N=O.get(w);for(const va in N){const {count:Ja,data:Ba,items:Sa,itemPositions:Oa}=N[va];X=Ba.join(",");if(!A||f.validateItems(Sa,A)){const Ia=Q.get(X)||{attributes:{}};var ca=null;if(la)ca=
Ja;else{const e=this._getAttributeValues(f,w,E);ca=Oa.map(G=>e[G]);ca=ma&&"statisticParameters"in k?this._getPercentileValue(k,ca):this._getStatisticValue(k,ca,null,f.returnDistinctValues)}Ia.attributes[na]=ca;m.forEach((e,G)=>Ia.attributes[this.fieldsIndex.get(e)?e:`EXPR_${G+1}`]=Ba[G]);Q.set(X,Ia)}}}else w=this._getAttributeValues(f,w,E),B.attributes[na]=ma&&"statisticParameters"in k?this._getPercentileValue(k,w):this._getStatisticValue(k,w,J,f.returnDistinctValues);l.push({name:na,alias:na,type:"esriFieldTypeDouble"})}B=
P?Array.from(Q.values()):[B];this._sortFeatures(B,S,(ja,na)=>ja.attributes[na]);return{fields:l,features:B}};g._getStatisticValue=function(r,B,l,E){const {onStatisticField:J,statisticType:O}=r;r=null;r=null!=l&&l.has(J)?l.get(J):z.isStringField(this.fieldsIndex.get(J))?L.calculateStringStatistics({values:B,returnDistinct:E}):L.calculateStatistics({values:B,minValue:null,maxValue:null,useSampleStdDev:!0});l&&l.set(J,r);return r["var"===O?"variance":O]};g._getPercentileValue=function(r,B){const {onStatisticField:l,
statisticParameters:E,statisticType:J}=r,{value:O,orderBy:Q}=E;r=this.fieldsIndex.get(l);return L.calculatePercentile(B,{value:O,orderBy:Q,fieldType:null==r?void 0:r.type,isDiscrete:"percentile_disc"===J})};g._getAttributeValues=function(r,B,l){if(l.has(B))return l.get(B);const E=this.fieldsIndex.get(B),J=this.items.map(O=>r.getFieldValue(O,B,E));l.set(B,J);return J};g._getAttributeNormalizedValues=function(r,B){return this.items.map(l=>r.getNormalizedValue(l,{field:B.field,fieldInfo:this.fieldsIndex.get(B.field),
normalizationField:B.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(B.normalizationField),normalizationType:B.normalizationType,normalizationTotal:B.normalizationTotal}))};g._getAttributeExpressionValues=function(){var r=c._asyncToGenerator(function*(B,l,E){const {arcadeUtils:J}=yield x.loadArcade(),O=J.createFunction(l),Q=E&&J.getViewInfo(E);return this.items.map(f=>B.getExpressionValue(f,{compiledFunc:O,viewInfo:Q},J))});return function(B,l,E){return r.apply(this,arguments)}}();
g._calculateUniqueValues=function(r,B){const l={},E=this.items,J=E.length;for(let O=0;O<J;O++){const Q=E[O],f=[];for(const m of r)f.push(m[O]);const k=f.join(",");B?null==l[k]&&(l[k]={count:1,data:f,items:[Q],itemPositions:[O]}):null==l[k]?l[k]={count:1,data:f,items:[Q],itemPositions:[O]}:(l[k].count++,l[k].items.push(Q),l[k].itemPositions.push(O))}return l};g._getDataValues=function(){var r=c._asyncToGenerator(function*(B,l){const E=new n(B,this.featureAdapter,this.fieldsIndex),{valueExpression:J,
field:O,normalizationField:Q,normalizationType:f,normalizationTotal:k,scale:m}=l;B=J?{viewingMode:"map",scale:m,spatialReference:B.outSR||this.spatialReference}:null;return J?this._getAttributeExpressionValues(E,J,B):this._getAttributeNormalizedValues(E,{field:O,normalizationField:Q,normalizationType:f,normalizationTotal:k})});return function(B,l){return r.apply(this,arguments)}}();c._createClass(b,[{key:"size",get:function(){return this.items.length}}]);return b}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports",
"../../core/maybe","./jsonUtils"],function(c,a,F){function M({scale:m,translate:A},S){return Math.round((S-A[0])/m[0])}function p({scale:m,translate:A},S){return Math.round((A[1]-S)/m[1])}function n(m,A,S){const P=[];let I,q,w,N;for(let X=0;X<S.length;X++){const ca=S[X];if(0<X){if(w=M(m,ca[0]),N=p(m,ca[1]),w!==I||N!==q)P.push(A(ca,w-I,N-q)),I=w,q=N}else I=M(m,ca[0]),q=p(m,ca[1]),P.push(A(ca,I,q))}return 0<P.length?P:null}function y(m,A,S,P){return n(m,S?P?k:f:P?f:Q,A)}function C(m,A,S,P){const I=
[];S=S?P?k:f:P?f:Q;for(P=0;P<A.length;P++){const q=n(m,S,A[P]);q&&3<=q.length&&I.push(q)}return I.length?I:null}function u(m,A,S,P){const I=[];S=S?P?k:f:P?f:Q;for(P=0;P<A.length;P++){const q=n(m,S,A[P]);q&&2<=q.length&&I.push(q)}return I.length?I:null}function t({scale:m,translate:A},S){return S*m[0]+A[0]}function z({scale:m,translate:A},S){return A[1]-S*m[1]}function L(m,A,S){const P=Array(S.length);if(!S.length)return P;const [I,q]=m.scale;let w=t(m,S[0][0]);m=z(m,S[0][1]);P[0]=A(S[0],w,m);for(let N=
1;N<S.length;N++){const X=S[N];w+=X[0]*I;m-=X[1]*q;P[N]=A(X,w,m)}return P}function x(m,A,S){const P=Array(S.length);for(let I=0;I<S.length;I++)P[I]=L(m,A,S[I]);return P}function h(m,A,S,P){return L(m,S?P?k:f:P?f:Q,A)}function H(m,A,S,P){return x(m,S?P?k:f:P?f:Q,A)}function b(m,A,S,P){return x(m,S?P?k:f:P?f:Q,A)}function g(m,A,S){let [P,I]=S[0],q=Math.min(P,A[0]),w=Math.min(I,A[1]),N=Math.max(P,A[2]);A=Math.max(I,A[3]);for(let X=1;X<S.length;X++){const [ca,ja]=S[X];P+=ca;I+=ja;0>ca&&(q=Math.min(q,
P));0<ca&&(N=Math.max(N,P));0>ja?w=Math.min(w,I):0<ja&&(A=Math.max(A,I))}m[0]=q;m[1]=w;m[2]=N;m[3]=A;return m}function r(m,A){if(!A.length)return null;m[0]=m[1]=Number.POSITIVE_INFINITY;m[2]=m[3]=Number.NEGATIVE_INFINITY;for(let S=0;S<A.length;S++)g(m,m,A[S]);return m}function B(m,A,S,P,I){A.xmin=M(m,S.xmin);A.ymin=p(m,S.ymin);A.xmax=M(m,S.xmax);A.ymax=p(m,S.ymax);A!==S&&(P&&(A.zmin=S.zmin,A.zmax=S.zmax),I&&(A.mmin=S.mmin,A.mmax=S.mmax));return A}function l(m,A,S,P,I){A.points=y(m,S.points,P,I);return A}
function E(m,A,S,P,I){A.x=M(m,S.x);A.y=p(m,S.y);A!==S&&(P&&(A.z=S.z),I&&(A.m=S.m));return A}function J(m,A,S,P,I){m=C(m,S.rings,P,I);if(!m)return null;A.rings=m;return A}function O(m,A,S,P,I){m=u(m,S.paths,P,I);if(!m)return null;A.paths=m;return A}const Q=(m,A,S)=>[A,S],f=(m,A,S)=>[A,S,m[2]],k=(m,A,S)=>[A,S,m[2],m[3]];c.equals=function(m,A){if(m===A||null==m&&null==A)return!0;if(null==m||null==A)return!1;let S,P,I,q;m&&"upperLeft"===m.originPosition?(S=m.translate[0],P=m.translate[1],m=m.scale[0]):
(S=a.isSome(m.extent)?m.extent.xmin:0,P=a.isSome(m.extent)?m.extent.ymax:0,m=m.tolerance);A&&"upperLeft"===A.originPosition?(I=A.translate[0],q=A.translate[1],A=A.scale[0]):(I=a.isSome(A.extent)?A.extent.xmin:0,q=a.isSome(A.extent)?A.extent.ymax:0,A=A.tolerance);return S===I&&P===q&&m===A};c.getQuantizedBoundsCoordsArray=g;c.getQuantizedBoundsCoordsArrayArray=r;c.getQuantizedBoundsPaths=function(m){return r([0,0,0,0],m)};c.getQuantizedBoundsPoints=function(m){const A=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return g(A,A,m)};c.getQuantizedBoundsRings=function(m){return r([0,0,0,0],m)};c.quantizeBounds=function(m,A,S){A[0]=M(m,S[0]);A[3]=p(m,S[1]);A[2]=M(m,S[2]);A[1]=p(m,S[3]);return A};c.quantizeExtent=B;c.quantizeGeometry=function(m,A){return m&&A?F.isPoint(A)?E(m,{},A,!1,!1):F.isPolyline(A)?O(m,{},A,!1,!1):F.isPolygon(A)?J(m,{},A,!1,!1):F.isMultipoint(A)?l(m,{},A,!1,!1):F.isExtent(A)?B(m,{},A,!1,!1):null:null};c.quantizeMultipoint=l;c.quantizePaths=
u;c.quantizePoint=E;c.quantizePoints=y;c.quantizePolygon=J;c.quantizePolyline=O;c.quantizeRings=C;c.quantizeX=M;c.quantizeY=p;c.toQuantizationTransform=function(m){return m?{originPosition:"upper-left"===m.originPosition?"upperLeft":"lower-left"===m.originPosition?"lowerLeft":m.originPosition,scale:m.tolerance?[m.tolerance,m.tolerance]:[1,1],translate:a.isSome(m.extent)?[m.extent.xmin,m.extent.ymax]:[0,0]}:null};c.unquantizeBounds=function(m,A,S){return S?(A[0]=t(m,S[0]),A[1]=z(m,S[3]),A[2]=t(m,S[2]),
A[3]=z(m,S[1]),A):[t(m,A[0]),z(m,A[3]),t(m,A[2]),z(m,A[1])]};c.unquantizeCoordsArray=L;c.unquantizeCoordsArrayArray=x;c.unquantizeExtent=function(m,A,S,P,I){A.xmin=t(m,S.xmin);A.ymin=z(m,S.ymin);A.xmax=t(m,S.xmax);A.ymax=z(m,S.ymax);A!==S&&(P&&(A.zmin=S.zmin,A.zmax=S.zmax),I&&(A.mmin=S.mmin,A.mmax=S.mmax));return A};c.unquantizeMultipoint=function(m,A,S,P,I){a.isSome(S)&&(A.points=h(m,S.points,P,I));return A};c.unquantizePaths=H;c.unquantizePoint=function(m,A,S,P,I){if(a.isNone(S))return A;A.x=t(m,
S.x);A.y=z(m,S.y);A!==S&&(P&&(A.z=S.z),I&&(A.m=S.m));return A};c.unquantizePoints=h;c.unquantizePolygon=function(m,A,S,P,I){a.isSome(S)&&(A.rings=b(m,S.rings,P,I));return A};c.unquantizePolyline=function(m,A,S,P,I){a.isSome(S)&&(A.paths=H(m,S.paths,P,I));return A};c.unquantizeRings=b;c.unquantizeX=t;c.unquantizeY=z;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],
function(c,a,F){return function(){function M(n,y,C){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=n.returnDistinctValues;this.fieldsIndex=C;this.featureAdapter=y;if((y=n.outFields)&&-1===y.indexOf("*")){this.outFields=y;n=0;for(const t of y){var u=a.getExpressionFromFieldName(t);u=(y=this.fieldsIndex.get(u))?null:a.getWhereClause(u,C);y=y?y.name:a.getAliasFromFieldName(t)||`FIELD_EXP_${n++}`;this._fieldDataCache.set(t,{alias:y,clause:u})}}}var p=M.prototype;
p.countDistinctValues=function(n){if(!this.returnDistinctValues)return n.length;n.forEach(y=>this.getAttributes(y));return this._returnDistinctMap.size};p.getAttributes=function(n){n=this._processAttributesForOutFields(n);return this._processAttributesForDistinctValues(n)};p.getFieldValue=function(n,y,C){const u=C?C.name:y;let t=null;this._fieldDataCache.has(u)?t=this._fieldDataCache.get(u).clause:C||(t=a.getWhereClause(y,this.fieldsIndex),this._fieldDataCache.set(u,{alias:u,clause:t}));return C?
this.featureAdapter.getAttribute(n,u):t.calculateValue(n,this.featureAdapter)};p.getNormalizedValue=function(n,y){const C=y.normalizationType,u=y.normalizationTotal;let t=this.getFieldValue(n,y.field,y.fieldInfo);C&&Number.isFinite(t)&&(n=this.getFieldValue(n,y.normalizationField,y.normalizationFieldInfo),t=F.getNormalizedValue(t,C,n,u));return t};p.getExpressionValue=function(n,y,C){n={attributes:this.featureAdapter.getAttributes(n)};n=C.createExecContext(n,y.viewInfo);return C.executeFunction(y.compiledFunc,
n)};p.validateItem=function(n,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:a.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testFeature(n,this.featureAdapter)};p.validateItems=function(n,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:a.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testSet(n,this.featureAdapter)};p._processAttributesForOutFields=function(n){const y=this.outFields;
if(!y||!y.length)return this.featureAdapter.getAttributes(n);const C={};for(const u of y){const {alias:t,clause:z}=this._fieldDataCache.get(u);C[t]=z?z.calculateValue(n,this.featureAdapter):this.featureAdapter.getAttribute(n,t)}return C};p._processAttributesForDistinctValues=function(n){if(c.isNone(n)||!this.returnDistinctValues)return n;var y=this.outFields,C=[];if(y)for(const t of y){var {alias:u}=this._fieldDataCache.get(t);C.push(n[u])}else for(u in n)C.push(n[u]);y=`${(y||["*"]).join(",")}=${C.join(",")}`;
C=this._returnDistinctMap.get(y)||0;this._returnDistinctMap.set(y,++C);return 1<C?null:n};return M}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(c,a,F){function M(l){const E=null!=l.minValue||null!=l.maxValue,J=!!l.sqlExpression&&l.supportsSQLExpression;return!(null!=l.normalizationField||null!=l.normalizationType)&&!E&&!J}function p(l){const {values:E,useSampleStdDev:J,supportsNullCount:O}=l;var Q=
Number.POSITIVE_INFINITY;let f=Number.NEGATIVE_INFINITY,k=null,m=null;var A=null;let S=null,P=0;const I=null==l.minValue?-Infinity:l.minValue,q=null==l.maxValue?Infinity:l.maxValue;for(const w of E)Number.isFinite(w)?w>=I&&w<=q&&(k+=w,Q=Math.min(Q,w),f=Math.max(f,w),P++):"string"===typeof w&&P++;if(P&&null!=k){m=k/P;A=0;for(const w of E)Number.isFinite(w)&&w>=I&&w<=q&&(A+=(w-m)**2);S=J?1<P?A/(P-1):0:0<P?A/P:0;A=Math.sqrt(S)}else f=Q=null;Q={avg:m,count:P,max:f,min:Q,stddev:A,sum:k,variance:S};O&&
(Q.nullcount=E.length-P);l.percentileParams&&(Q.median=n(E,l.percentileParams));return Q}function n(l,E){const {fieldType:J,value:O,orderBy:Q,isDiscrete:f}=E,k=y(J,"desc"===Q);l=[...l].filter(P=>null!=P).sort((P,I)=>k(P,I));if(0===l.length)return null;if(0>=O)return l[0];if(1<=O)return l[l.length-1];var m=(l.length-1)*O,A=Math.floor(m);E=A+1;m%=1;A=l[A];const S=l[E];return E>=l.length||f||"string"===typeof A||"string"===typeof S?A:A*(1-m)+S*m}function y(l,E){const J=E?1:-1,O=u(E),Q=C(E);if(!l||!["esriFieldTypeDate",
"esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...r].includes(l))return(f,k)=>"number"===typeof f&&"number"===typeof k?O(f,k):"string"===typeof f&&"string"===typeof k?Q(f,k):J;if("esriFieldTypeDate"===l)return(f,k)=>{f=(new Date(f)).getTime();k=(new Date(k)).getTime();return isNaN(f)||isNaN(k)?J:O(f,k)};if(r.has(l))return(f,k)=>O(f,k);if("esriFieldTypeString"===l)return(f,k)=>Q(f,k);if("esriFieldTypeGUID"===l||"esriFieldTypeGlobalID"===l){const f=C(E);return(k,m)=>f(t(k),t(m))}return E?
(f,k)=>1:(f,k)=>-1}function C(l){return l?(E,J)=>{E=E.toUpperCase();J=J.toUpperCase();return E>J?-1:E<J?1:0}:(E,J)=>{E=E.toUpperCase();J=J.toUpperCase();return E<J?-1:E>J?1:0}}function u(l){return l?(E,J)=>J-E:(E,J)=>E-J}function t(l){return l.substr(24,12)+l.substr(19,4)+l.substr(16,2)+l.substr(14,2)+l.substr(11,2)+l.substr(9,2)+l.substr(6,2)+l.substr(4,2)+l.substr(2,2)+l.substr(0,2)}function z(l,E){const J=x({field:E.field,normalizationType:E.normalizationType,normalizationField:E.normalizationField,
classificationMethod:E.classificationMethod,standardDeviationInterval:E.standardDeviationInterval,breakCount:E.numClasses||5});l=L(l,E.minValue,E.maxValue);return F.createGenerateRendererClassBreaks({definition:J,values:l,normalizationTotal:E.normalizationTotal})}function L(l,E,J){E=null==E?-Infinity:E;J=null==J?Infinity:J;return l.filter(O=>Number.isFinite(O)&&O>=E&&O<=J)}function x(l){const E=l.field,J=l.classificationMethod||"equal-interval",O=l.normalizationType,Q=l.normalizationField,f=new a;
f.classificationField=E;f.breakCount=l.breakCount;f.classificationMethod=J;f.standardDeviationInterval="standard-deviation"===J?l.standardDeviationInterval||1:void 0;f.normalizationType=O;f.normalizationField="field"===O?Q:void 0;return f}function h(l,E){const {field:J,classificationMethod:O,standardDeviationInterval:Q,normalizationType:f,normalizationField:k,normalizationTotal:m,minValue:A,maxValue:S}=E,P=E.numBins||10;let I=E=null,q=null;O&&"equal-interval"!==O||f?({classBreaks:l}=z(l,{field:J,
normalizationType:f,normalizationField:k,normalizationTotal:m,classificationMethod:O,standardDeviationInterval:Q,minValue:A,maxValue:S,numClasses:P}),E=l[0].minValue,I=l[l.length-1].maxValue,q=l.map(w=>[w.minValue,w.maxValue])):(null!=A&&null!=S?(E=A,I=S):(l=p({values:l,minValue:A,maxValue:S,useSampleStdDev:!f,supportsNullCount:M({normalizationType:f,normalizationField:k,minValue:A,maxValue:S})}),E=l.min,I=l.max),q=b(E,I,P));return{min:E,max:I,intervals:q}}function H(l,E){let J=-1;for(let O=l.length-
1;0<=O;O--)if(E>=l[O][0]){J=O;break}return J}function b(l,E,J){const O=(E-l)/J,Q=[];let f;for(let k=1;k<=J;k++)f=l+O,f=Number(f.toFixed(16)),Q.push([l,k===J?E:f]),l=f;return Q}const g=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,r=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),B="min max avg stddev count sum variance nullcount median".split(" ");c.calculateClassBreaks=z;c.calculateHistogram=function(l,E){const {min:J,max:O,intervals:Q}=h(l,E),
f=Q.map((k,m)=>({minValue:Q[m][0],maxValue:Q[m][1],count:0}));for(const k of l)null!=k&&k>=J&&k<=O&&(l=H(Q,k),-1<l&&f[l].count++);return{bins:f,minValue:J,maxValue:O,normalizationTotal:E.normalizationTotal}};c.calculatePercentile=n;c.calculateStatistics=p;c.calculateStringStatistics=function(l){const E=l.returnDistinct?[...new Set(l.values)]:l.values,J=E.filter(Q=>null!=Q).length,O={count:J};l.supportsNullCount&&(O.nullcount=E.length-J);l.percentileParams&&(O.median=n(E,l.percentileParams));return O};
c.calculateUniqueValuesCount=function(l){const E={};for(let J of l){if(null==J||"string"===typeof J&&""===J.trim())J=null;null==E[J]?E[J]={count:1,data:J}:E[J].count++}return{count:E}};c.createClassBreaksDefinition=x;c.createUVResult=function(l,E,J){const O=l.count;l=[];J&&E&&"coded-value"===E.type&&E.codedValues.forEach(Q=>{Q=Q.code;O.hasOwnProperty(Q)||(O[Q]={data:Q,count:0})});for(const Q in O)E=O[Q],l.push({value:E.data,count:E.count,label:E.label});return{uniqueValueInfos:l}};c.getAttributeComparator=
y;c.getEqualIntervalBins=b;c.getNormalizedValue=function(l,E,J,O){let Q=null;switch(E){case "log":0!==l&&(Q=Math.log(l)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(O)&&0!==O&&(Q=l/O*100);break;case "field":Number.isFinite(J)&&0!==J&&(Q=l/J);break;case "natural-log":0<l&&(Q=Math.log(l));break;case "square-root":0<l&&(Q=l**.5)}return Q};c.isNullCountSupported=M;c.processSummaryStatisticsResult=function(l,E){let J;for(J in l)-1<B.indexOf(J)&&(Number.isFinite(l[J])||(l[J]=null));if(!E)return l;
["avg","stddev","variance"].forEach(O=>{null!=l[O]&&(l[O]=Math.ceil(l[O]))});return l};c.resolveCBResult=function(l,E){let J=l.classBreaks;const O=J[0].minValue,Q=J[J.length-1].maxValue,f="standard-deviation"===E;J=J.map(k=>{const m=k.label;k={minValue:k.minValue,maxValue:k.maxValue,label:m};if(f&&m){const A=m.match(g).map(S=>+S.trim());2===A.length?(k.minStdDev=A[0],k.maxStdDev=A[1],0>A[0]&&0<A[1]&&(k.hasAvg=!0)):1===A.length&&(m.includes("\x3c")?(k.minStdDev=null,k.maxStdDev=A[0]):m.includes("\x3e")&&
(k.minStdDev=A[0],k.maxStdDev=null))}return k});return{minValue:O,maxValue:Q,classBreakInfos:J,normalizationTotal:l.normalizationTotal}};c.statisticTypes=B;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(c,a,F,M,p,n,y,C,u){p=new F.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});F=new F.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});u=function(t){function z(){var L=t.apply(this,arguments)||this;L.breakCount=null;L.classificationField=
null;L.classificationMethod=null;L.normalizationField=null;L.normalizationType=null;L.type="class-breaks-definition";return L}c._inheritsLoose(z,t);c._createClass(z,[{key:"standardDeviationInterval",set:function(L){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",L)}},{key:"definedInterval",set:function(L){"defined-interval"===this.classificationMethod&&this._set("definedInterval",L)}}]);return z}(u);a.__decorate([M.property({json:{write:!0}})],u.prototype,"breakCount",
void 0);a.__decorate([M.property({json:{write:!0}})],u.prototype,"classificationField",void 0);a.__decorate([M.property({type:String,json:{read:p.read,write:p.write}})],u.prototype,"classificationMethod",void 0);a.__decorate([M.property({json:{write:!0}})],u.prototype,"normalizationField",void 0);a.__decorate([M.property({json:{read:F.read,write:F.write}})],u.prototype,"normalizationType",void 0);a.__decorate([M.property({value:null,json:{write:!0}})],u.prototype,"standardDeviationInterval",null);
a.__decorate([M.property({value:null,json:{write:!0}})],u.prototype,"definedInterval",null);a.__decorate([M.property()],u.prototype,"type",void 0);return u=a.__decorate([C.subclass("esri.rest.support.ClassBreaksDefinition")],u)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z){F=new F.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});M=function(L){function x(){var h=L.apply(this,arguments)||this;h.baseSymbol=null;h.colorRamp=null;h.type=null;return h}c._inheritsLoose(x,L);return x}(M.JSONSupport);a.__decorate([p.property({type:z,json:{write:!0}})],M.prototype,"baseSymbol",void 0);a.__decorate([p.property({types:t.types,json:{read:{reader:t.fromJSON},write:!0}})],M.prototype,"colorRamp",void 0);a.__decorate([p.property({json:{read:F.read,
write:F.write}})],M.prototype,"type",void 0);return M=a.__decorate([u.subclass("esri.rest.support.ClassificationDefinition")],M)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(c,a,F,M){F={key:"type",base:F,typeMap:{algorithmic:a,multipart:M}};c.fromJSON=function(p){return p&&p.type?"algorithmic"===p.type?a.fromJSON(p):"multipart"===p.type?M.fromJSON(p):null:null};c.types=F;Object.defineProperty(c,"__esModule",
{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(c,a,F,M,p,n,y,C,u){var t;u=t=function(z){function L(x){x=z.call(this,x)||this;x.algorithm=null;x.fromColor=null;x.toColor=
null;x.type="algorithmic";return x}c._inheritsLoose(L,z);L.prototype.clone=function(){return new t({fromColor:M.clone(this.fromColor),toColor:M.clone(this.toColor),algorithm:this.algorithm})};return L}(u);a.__decorate([y.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],u.prototype,"algorithm",void 0);a.__decorate([p.property({type:F,json:{type:[n.Integer],write:!0}})],u.prototype,"fromColor",void 0);a.__decorate([p.property({type:F,json:{type:[n.Integer],
write:!0}})],u.prototype,"toColor",void 0);a.__decorate([p.property({type:["algorithmic"]})],u.prototype,"type",void 0);return u=t=a.__decorate([C.subclass("esri.rest.support.AlgorithmicColorRamp")],u)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(c,a,F){c.enumeration=function(M,p={}){var n;M=M instanceof a.JSONMap?M:new a.JSONMap(M,p);M={type:(null!=(n=null==p?void 0:p.ignoreUnknown)?n:1)?M.apiValues:String,readOnly:null==
p?void 0:p.readOnly,json:{type:M.jsonValues,read:null!=p&&p.readOnly?!1:{reader:M.read},write:{writer:M.write}}};void 0!==(null==p?void 0:p.default)&&(M.json.default=p.default);void 0!==(null==p?void 0:p.name)&&(M.json.name=p.name);return F.property(M)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n,y,C){F=function(u){function t(z){z=u.call(this,z)||this;z.type=null;return z}c._inheritsLoose(t,u);return t}(F.JSONSupport);a.__decorate([M.property({readOnly:!0,json:{read:!1,write:!0}})],F.prototype,"type",void 0);return F=a.__decorate([C.subclass("esri.rest.support.ColorRamp")],F)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(c,a,F,M,p,n,y,C){var u;p=u=function(t){function z(L){L=t.call(this,L)||this;L.colorRamps=null;L.type="multipart";return L}c._inheritsLoose(z,t);z.prototype.clone=function(){return new u({colorRamps:F.clone(this.colorRamps)})};return z}(C);a.__decorate([M.property({type:[y],json:{write:!0}})],p.prototype,"colorRamps",void 0);a.__decorate([M.property({type:["multipart"]})],p.prototype,"type",void 0);return p=u=a.__decorate([n.subclass("esri.rest.support.MultipartColorRamp")],p)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z){M=new M.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let L=0;p=function(x){function h(b){b=x.call(this,b)||this;b.id=`sym${L++}`;b.type=null;return b}c._inheritsLoose(h,
x);var H=h.prototype;H.readColor=function(b){return b&&null!=b[0]?[b[0],b[1],b[2],b[3]/255]:b};H.collectRequiredFields=function(){var b=c._asyncToGenerator(function*(g,r){});return function(g,r){return b.apply(this,arguments)}}();H.hash=function(){return JSON.stringify(this.toJSON())};H.clone=function(){};c._createClass(h,[{key:"color",set:function(b){this._set("color",b)}}]);return h}(p.JSONSupport);a.__decorate([n.property({type:M.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:M.write}}})],
p.prototype,"type",void 0);a.__decorate([n.property({type:F,value:new F([0,0,0,1]),json:{write:{allowNull:!0}}})],p.prototype,"color",null);a.__decorate([t.reader("color")],p.prototype,"readColor",null);return p=a.__decorate([z.subclass("esri.symbols.Symbol")],p)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(c){function a(z){const {classificationMethod:L,breakCount:x,normalizationType:h,definedInterval:H}=z.definition,b=[];var g=z.values;if(0===g.length)return[];
g=g.sort((O,Q)=>O-Q);var r=g[0],B=g[g.length-1];if("equal-interval"===L)if(g.length>=x){g=(B-r)/x;z=r;for(var l=1;l<x;l++){var E=Number((r+l*g).toFixed(6));b.push({minValue:z,maxValue:E,label:F(z,E,h)});z=E}b.push({minValue:z,maxValue:B,label:F(z,B,h)})}else g.forEach(O=>{b.push({minValue:O,maxValue:O,label:F(O,O,h)})});else if("natural-breaks"===L){g=M(g);z=p(g.uniqueValues,z.valueFrequency||g.valueFrequency,x);for(l=1;l<x;l++)g.uniqueValues.length>l&&(E=Number(g.uniqueValues[z[l]].toFixed(6)),b.push({minValue:r,
maxValue:E,label:F(r,E,h)}),r=E);b.push({minValue:r,maxValue:B,label:F(r,B,h)})}else if("quantile"===L)if(g.length>=x&&r!==B){z=Math.ceil(g.length/x);l=0;for(E=1;E<x;E++){var J=z+l-1;J>g.length&&(J=g.length-1);0>J&&(J=0);b.push({minValue:r,maxValue:g[J],label:F(r,g[J],h)});r=g[J];l+=z;z=Math.ceil((g.length-l)/(x-E))}b.push({minValue:r,maxValue:B,label:F(r,B,h)})}else for(B=-1,r=0;r<g.length;r++)z=g[r],z!==B&&(B=z,b.push({minValue:B,maxValue:z,label:F(B,z,h)}),B=z);else if("standard-deviation"===L)if(z=
C(g),l=u(g,z),0===l)b.push({minValue:g[0],maxValue:g[0],label:F(g[0],g[0],h)});else{g=y(r,B,x,z,l)*l;l=0;for(E=x;1<=E;E--)J=Number((z-(E-.5)*g).toFixed(6)),b.push({minValue:r,maxValue:J,label:F(r,J,h)}),r=J,l++;E=Number((z+.5*g).toFixed(6));b.push({minValue:r,maxValue:E,label:F(r,E,h)});r=E;l++;for(J=1;J<=x;J++)E=l===2*x?B:Number((z+(J+.5)*g).toFixed(6)),b.push({minValue:r,maxValue:E,label:F(r,E,h)}),r=E,l++}else if("defined-interval"===L){if(!H)return b;B=g[0];g=g[g.length-1];r=Math.ceil((g-B)/H);
z=B;for(l=1;l<r;l++)E=Number((B+l*H).toFixed(6)),b.push({minValue:z,maxValue:E,label:F(z,E,h)}),z=E;b.push({minValue:z,maxValue:g,label:F(z,g,h)})}return b}function F(z,L,x){let h=null;return h=z===L?x&&"percent-of-total"===x?z+"%":z.toString():x&&"percent-of-total"===x?z+"% - "+L+"%":z+" - "+L}function M(z){const L=[],x=[];let h=Number.MIN_VALUE,H=1,b=-1;for(let g=0;g<z.length;g++){const r=z[g];r===h?(H++,x[b]=H):null!==r&&(L.push(r),h=r,H=1,x.push(H),b++)}return{uniqueValues:L,valueFrequency:x}}
function p(z,L,x){var h=z.length;const H=[];x>h&&(x=h);for(var b=0;b<x;b++)H.push(Math.round(b*h/x-1));H.push(h-1);b=n(H,z,L,x);{h=b.mean;b=b.sdcm;var g=x,r=0,B=0;let E=0,J=0,O=!0;for(let Q=0;2>Q&&O;Q++){0===Q&&(O=!1);for(var l=0;l<g-1;l++)for(;H[l+1]+1!==H[l+2];)if(H[l+1]+=1,r=t(l,H,z,L),E=r.sbMean,r=r.sbSdcm,B=t(l+1,H,z,L),J=B.sbMean,B=B.sbSdcm,r+B<b[l]+b[l+1])b[l]=r,b[l+1]=B,h[l]=E,h[l+1]=J,O=!0;else{--H[l+1];break}for(l=g-1;0<l;l--)for(;H[l]!==H[l-1]+1;)if(--H[l],r=t(l-1,H,z,L),E=r.sbMean,r=r.sbSdcm,
B=t(l,H,z,L),J=B.sbMean,B=B.sbSdcm,r+B<b[l-1]+b[l])b[l-1]=r,b[l]=B,h[l-1]=E,h[l]=J,O=!0;else{H[l]+=1;break}}h=O}h&&(b=n(H,z,L,x));return H}function n(z,L,x,h){let H=[];var b=[],g=[];let r=0;const B=[],l=[];for(var E=0;E<h;E++){var J=t(E,z,L,x);B.push(J.sbMean);l.push(J.sbSdcm);r+=l[E]}J=r;for(E=!0;E||r<J;){E=!1;H=[];for(b=0;b<h;b++)H.push(z[b]);for(g=0;g<h;g++)for(J=z[g]+1;J<=z[g+1];J++)if(b=L[J],0<g&&J!==z[g+1]&&Math.abs(b-B[g])>Math.abs(b-B[g-1]))z[g]=J;else if(g<h-1&&z[g]!==J-1&&Math.abs(b-B[g])>
Math.abs(b-B[g+1])){z[g+1]=J-1;break}J=r;r=0;b=[];g=[];for(let O=0;O<h;O++){b.push(B[O]);g.push(l[O]);const Q=t(O,z,L,x);B[O]=Q.sbMean;l[O]=Q.sbSdcm;r+=l[O]}}if(r>J){for(L=0;L<h;L++)z[L]=H[L],B[L]=b[L],l[L]=g[L];r=J}return{mean:B,sdcm:l}}function y(z,L,x,h,H){z=Math.max(h-z,L-h)/H/x;return 1<=z?1:.5<=z?.5:.25}function C(z){let L=0;for(let x=0;x<z.length;x++)L+=z[x];return L/=z.length}function u(z,L){let x=0;for(let h=0;h<z.length;h++){const H=z[h];x+=(H-L)*(H-L)}x/=z.length;return Math.sqrt(x)}function t(z,
L,x,h){var H=0,b=0;for(var g=L[z]+1;g<=L[z+1];g++){const r=h[g];H+=x[g]*r;b+=r}0>=b&&console.log("Exception in Natural Breaks calculation");H/=b;b=0;for(g=L[z]+1;g<=L[z+1];g++)b+=h[g]*(x[g]-H)**2;return{sbMean:H,sbSdcm:b}}c.createGenerateRendererClassBreaks=function(z){const {normalizationTotal:L}=z;return{classBreaks:a(z),normalizationTotal:L}};c.createGenerateRendererUniqueValues=function(z){z=M(z);const L=[],x=z.uniqueValues.length;for(let h=0;h<x;h++){const H=z.uniqueValues[h];L.push({value:H,
count:z.valueFrequency[h],label:H.toString()})}return{uniqueValues:L}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(c){function a(p,n,y,C,u){if(null!=C&&null!=u)return t=>{const z=p.getAttribute(t,n);t=p.getAttribute(t,y);return(null==z||z<=u)&&(null==t||t>=C)};if(null!=C)return t=>{t=p.getAttribute(t,y);return null==t||t>=C};if(null!=u)return t=>{t=p.getAttribute(t,n);return null==t||t<=u}}function F(p,n,y,C){if(null!=
y&&null!=C&&y===C)return u=>p.getAttribute(u,n)===y;if(null!=y&&null!=C)return u=>{u=p.getAttribute(u,n);return u>=y&&u<=C};if(null!=y)return u=>p.getAttribute(u,n)>=y;if(null!=C)return u=>p.getAttribute(u,n)<=C}function M(){return()=>!1}c.getTimeExtent=function(p,n){if(!p)return null;const y=n.featureAdapter,{startTimeField:C,endTimeField:u}=p;let t=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY;if(C&&u)n.forEach(L=>{const x=y.getAttribute(L,C);L=y.getAttribute(L,u);null==x||isNaN(x)||(t=Math.min(t,
x));null==L||isNaN(L)||(z=Math.max(z,L))});else{const L=C||u;n.forEach(x=>{x=y.getAttribute(x,L);null==x||isNaN(x)||(t=Math.min(t,x),z=Math.max(z,x))})}return{start:t,end:z}};c.getTimeOperator=function(p,n,y){if(!n||!p)return null;const {startTimeField:C,endTimeField:u}=p;if(!C&&!u)return null;const {start:t,end:z}=n;return null===t&&null===z?null:void 0===t&&void 0===z?M():C&&u?a(y,C,u,t,z):F(y,C||u,t,z)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h){function H(I,q,w,N=I.hasZ,X=I.hasM){if(p.isNone(q))return null;const ca=I.hasZ&&N,ja=I.hasM&&X;return w?(I=L.quantizeOptimizedGeometry(A,q,I.hasZ,I.hasM,"esriGeometryPoint",w,N,X),L.convertToPoint(I,ca,ja)):L.convertToPoint(q,ca,ja)}function b(){b=F._asyncToGenerator(function*(I,q,w){const {outFields:N,orderByFields:X,groupByFieldsForStatistics:ca,outStatistics:ja}=I;if(N)for(var na=0;na<N.length;na++)N[na]=N[na].trim();if(X)for(na=0;na<X.length;na++)X[na]=X[na].trim();
if(ca)for(na=0;na<ca.length;na++)ca[na]=ca[na].trim();if(ja)for(na=0;na<ja.length;na++)ja[na].onStatisticField&&(ja[na].onStatisticField=ja[na].onStatisticField.trim());I.geometry&&!I.outSR&&(I.outSR=I.geometry.spatialReference);return r(I,q,w)});return b.apply(this,arguments)}function g(){g=F._asyncToGenerator(function*(I,q,w){return r(I,q,w)});return g.apply(this,arguments)}function r(I,q,w){return B.apply(this,arguments)}function B(){B=F._asyncToGenerator(function*(I,q,w){if(!I)return null;var {where:N}=
I;I.where=N=N&&N.trim();if(!N||/^1 *= *1$/.test(N)||q&&q===N)I.where=null;if(!I.geometry)return I;q=yield l(I);I.distance=0;I.units=null;"esriSpatialRelEnvelopeIntersects"===I.spatialRel&&({spatialReference:N}=I.geometry,q=y.getGeometryExtent(q),q.spatialReference=N);I.geometry=q;yield h.checkProjectionSupport(q.spatialReference,w);q=(yield u.normalizeCentralMeridian(C.fromJSON(q)))[0];if(p.isNone(q))throw f;q=q.toJSON();q=yield h.project(q,q.spatialReference,w);if(!q)throw f;q.spatialReference=w;
I.geometry=q;return I});return B.apply(this,arguments)}function l(I){return E.apply(this,arguments)}function E(){E=F._asyncToGenerator(function*(I){const {geometry:q,distance:w,units:N}=I;if(null==w||"vertexAttributes"in q)return q;var X=q.spatialReference;I=N?Q.fromJSON(N):n.getUnitString(X);X=X&&(t.isGeographic(X)||t.isWebMercator(X))?q:yield h.checkProjectionSupport(X,t.WGS84).then(()=>h.project(q,t.WGS84));return(yield J())(X.spatialReference,X,w,I)});return E.apply(this,arguments)}function J(){return O.apply(this,
arguments)}function O(){O=F._asyncToGenerator(function*(){return(yield new Promise((I,q)=>c(["../../../geometry/geometryEngineJSON"],I,q))).geodesicBuffer});return O.apply(this,arguments)}const Q=new M.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),f=Object.freeze({}),k=new x,m=new x,A=new x,S={esriGeometryPoint:L.convertToPoint,esriGeometryPolyline:L.convertToPolyline,
esriGeometryPolygon:L.convertToPolygon,esriGeometryMultipoint:L.convertToMultipoint},P=(I,q)=>"_geVersion"!==I?q:void 0;a.QUERY_ENGINE_EMPTY_RESULT=f;a.cleanFromGeometryEngine=function(I){return I&&"_geVersion"in I?JSON.parse(JSON.stringify(I,P)):I};a.getCentroid=function(I,q,w){if("esriGeometryPolygon"!==I.geometryType||!q||!q.centroid&&!q.geometry)return null;q.centroid||(q.centroid=z.getCentroidOptimizedGeometry(new x,q.geometry,I.hasZ,I.hasM));return H(I,q.centroid,w)};a.getGeometry=function(I,
q,w,N,X,ca,ja=q,na=w){const ta=q&&ja,ma=w&&na;N=p.isSome(N)?"coords"in N?N:N.geometry:null;if(p.isNone(N))return null;if(X)return q=L.generalizeOptimizedGeometry(m,N,q,w,I,X,ja,na),ca&&(q=L.quantizeOptimizedGeometry(A,q,ta,ma,I,ca)),S[I](q,ta,ma);if(ca)return ca=L.quantizeOptimizedGeometry(A,N,q,w,I,ca,ja,na),S[I](ca,ta,ma);L.removeZMValues(k,N,q,w,ja,na);return S[I](k,ta,ma)};a.normalizeFilter=function(I,q,w){return g.apply(this,arguments)};a.normalizeQuery=function(I,q,w){return b.apply(this,arguments)};
a.normalizeQueryLike=r;a.transformCentroid=H;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(c,a,F,M,p,n,y,C){function u(U,V,da){if(U)for(const oa of U)(U=(U=n.getDeepValue(oa,V))&&"function"!==typeof U&&da.get(U))&&n.setDeepValue(oa,U.name,V)}function t(U,V){if(!U||!V)return[];
G.clear();z(G,U,V);return Array.from(G).sort()}function z(U,V,da){var oa;if(da)if(null!=V&&null!=(oa=V.fields)&&oa.length)if(da.includes("*"))for(const {name:pa}of V.fields)U.add(pa);else for(const pa of da)L(U,V,pa);else if(da.includes("*"))U.clear(),U.add("*");else for(const pa of da)U.add(pa)}function L(U,V,da){"string"===typeof da&&(V?(V=V.get(da))&&U.add(V.name):U.add(da))}function x(U,V,da){return h.apply(this,arguments)}function h(){h=F._asyncToGenerator(function*(U,V,da){var oa;if(da){var {arcadeUtils:pa}=
yield C.loadArcade();da=pa.extractFieldNames(da,null==V?void 0:null==(oa=V.fields)?void 0:oa.map(ua=>ua.name));for(const ua of da)L(U,V,ua)}});return h.apply(this,arguments)}function H(U,V,da){return b.apply(this,arguments)}function b(){b=F._asyncToGenerator(function*(U,V,da){if(da&&"1\x3d1"!==da){da=(yield new Promise((oa,pa)=>c(["../../core/sql/WhereClause"],oa,pa))).WhereClause.create(da,V);if(!da.isStandardized)throw new M("fieldUtils:collectFilterFields","Where clause is not standardized");z(U,
V,da.fieldNames)}});return b.apply(this,arguments)}function g(U,V){for(const da of U)if(da&&da.valueType&&da.valueType===V)return da.name;return null}function r(){r=F._asyncToGenerator(function*(U){if(!U)return[];const V=new Set;yield B(V,U);return Array.from(V).sort()});return r.apply(this,arguments)}function B(U,V){return l.apply(this,arguments)}function l(){l=F._asyncToGenerator(function*(U,V){if(V){var da=n.getDeepValue("elevationInfo.featureExpressionInfo",V);if(da)return da.collectRequiredFields(U,
V.fieldsIndex)}});return l.apply(this,arguments)}function E(U,V,da){return J.apply(this,arguments)}function J(){J=F._asyncToGenerator(function*(U,V,da){da.outStatistic.onStatisticValueExpression?x(U,V,da.outStatistic.onStatisticValueExpression):U.add(da.outStatistic.onStatisticField)});return J.apply(this,arguments)}function O(){O=F._asyncToGenerator(function*(U,V,da){var oa,pa;if(V&&da&&"cluster"===da.type){var ua=[];null!=(oa=da.popupTemplate)&&oa.expressionInfos&&ua.push(...da.popupTemplate.expressionInfos.map(wa=>
x(U,V.fieldsIndex,wa.expression)));if(Array.isArray(null==(pa=da.popupTemplate)?void 0:pa.content)){oa=da.popupTemplate.content;for(const wa of oa)"expression"===wa.type&&wa.expressionInfo&&ua.push(x(U,V.fieldsIndex,wa.expressionInfo.expression))}da.fields&&ua.push(...da.fields.map(wa=>E(U,V.fieldsIndex,wa)));yield Promise.all(ua)}});return O.apply(this,arguments)}function Q(){Q=F._asyncToGenerator(function*(U,V,da){V&&(V.timeInfo&&p.isSome(da)&&da.timeExtent&&z(U,V.fieldsIndex,[V.timeInfo.startField,
V.timeInfo.endField]),V.floorInfo&&z(U,V.fieldsIndex,[V.floorInfo.floorField]),p.isSome(da)&&p.isSome(da.where)&&(yield H(U,V.fieldsIndex,da.where)))});return Q.apply(this,arguments)}function f(){f=F._asyncToGenerator(function*(U,V,da){V&&da&&(yield Promise.all(da.map(oa=>k(U,V,oa))))});return f.apply(this,arguments)}function k(U,V,da){return m.apply(this,arguments)}function m(){m=F._asyncToGenerator(function*(U,V,da){V&&da&&(da.valueExpression?yield x(U,V.fieldsIndex,da.valueExpression):da.field&&
L(U,V.fieldsIndex,da.field))});return m.apply(this,arguments)}function A(){A=F._asyncToGenerator(function*(U){if(!U)return[];const V="timeInfo"in U&&U.timeInfo;return V?t(U.fieldsIndex,[U.trackIdField,V.startField,V.endField]):[]});return A.apply(this,arguments)}function S(){S=F._asyncToGenerator(function*(U){if(!U)return[];const V=new Set;yield P(V,U);return Array.from(V).sort()});return S.apply(this,arguments)}function P(U,V){return I.apply(this,arguments)}function I(){I=F._asyncToGenerator(function*(U,
V){const {labelingInfo:da,fieldsIndex:oa}=V;da&&da.length&&(yield Promise.all(da.map(pa=>q(U,oa,pa))))});return I.apply(this,arguments)}function q(U,V,da){return w.apply(this,arguments)}function w(){w=F._asyncToGenerator(function*(U,V,da){if(da){var oa=da.getLabelExpression();da=da.where;"arcade"===oa.type?yield x(U,V,oa.expression):(oa=oa.expression.match(/{[^}]*}/g))&&oa.forEach(pa=>{L(U,V,pa.slice(1,-1))});yield H(U,V,da)}});return w.apply(this,arguments)}function N(U){return"number"===typeof U&&
!isNaN(U)&&isFinite(U)}function X(U){return null===U||N(U)}function ca(U){return null===U||ea(U)}function ja(U){return null!=U&&"string"===typeof U}function na(U){return null===U||ja(U)}function ta(){return!0}function ma(U,V){let da;switch(U.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":da=U.nullable?ca:ea;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":da=
U.nullable?X:N;break;case "string":case "esriFieldTypeString":da=U.nullable?na:ja;break;default:da=ta}return 1===arguments.length?da:da(V)}function la(U){return null!=U&&T.has(U.type)}function va(U,V){return U.nullable&&null===V?null:la(U)&&!Ja(U.type,Number(V))?a.NumericRangeValidationError.OUT_OF_RANGE:ma(U,V)?U.domain?y.validateDomainValue(U.domain,V):null:a.TypeValidationError.INVALID_TYPE}function Ja(U,V){return(U="string"===typeof U?Ba(U):U)?U.isInteger?ea(V)&&V>=U.min&&V<=U.max:V>=U.min&&V<=
U.max:!1}function Ba(U){switch(U){case "esriFieldTypeSmallInteger":case "small-integer":return W;case "esriFieldTypeInteger":case "integer":return Y;case "esriFieldTypeSingle":case "single":return ia;case "esriFieldTypeDouble":case "double":return fa}}function Sa(U,V,da){if(!V||!V.attributes||!U){if(p.isSome(da))for(var oa of U)da.add(oa);return!0}V=V.attributes;oa=!1;for(const pa of U)if(!(pa in V))if(oa=!0,p.isSome(da))da.add(pa);else break;return oa}function Oa(){Oa=F._asyncToGenerator(function*(U,
V){const da=new Set;for(const oa of V)yield x(da,U.fieldsIndex,oa);return Array.from(da).sort()});return Oa.apply(this,arguments)}const Ia="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),e=["field","normalizationField"],G=new Set,ea=(()=>"isInteger"in Number?Number.isInteger:U=>"number"===typeof U&&isFinite(U)&&Math.floor(U)===U)(),D=["integer","small-integer",
"single","double"],T=new Set([...D,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);a.NumericRangeValidationError=void 0;(a.NumericRangeValidationError||(a.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";a.TypeValidationError=void 0;(a.TypeValidationError||(a.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const W={min:-32768,max:32767,isInteger:!0},Y={min:-2147483648,max:2147483647,
isInteger:!0},ia={min:-3.4E38,max:1.2E38,isInteger:!1},fa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};a.collectArcadeFieldNames=x;a.collectElevationFields=B;a.collectFeatureReductionFields=function(U,V,da){return O.apply(this,arguments)};a.collectField=L;a.collectFields=z;a.collectFilterFields=function(U,V,da){return Q.apply(this,arguments)};a.collectLabelingFields=P;a.collectOrderByInfos=function(U,V,da){return f.apply(this,arguments)};a.doubleRange=fa;a.featureHasFields=function(U,
V){return!Sa(U,V,null)};a.fixFields=t;a.fixRendererFields=function(U,V){if(null!=U&&null!=V)for(const da of Array.isArray(U)?U:[U])if(u(Ia,da,V),"visualVariables"in da&&da.visualVariables)for(const oa of da.visualVariables)u(e,oa,V)};a.fixTimeInfoFields=function(U,V){if(null!=U&&null!=V&&V.fields.length)if("startField"in U){var da=V.get(U.startField);V=V.get(U.endField);U.startField=da&&da.name||null;U.endField=V&&V.name||null}else da=V.get(U.startTimeField),V=V.get(U.endTimeField),U.startTimeField=
da&&da.name||null,U.endTimeField=V&&V.name||null};a.getDisplayFieldName=function({displayField:U,fields:V}){if(U)return U;if(!V||!V.length)return null;if(!(U=g(V,"name-or-title")||g(V,"unique-identifier")||g(V,"type-or-category")))a:{for(const da of V)if(da&&da.name&&(V=da.name.toLowerCase(),-1<V.indexOf("name")||-1<V.indexOf("title"))){U=da.name;break a}U=null}return U};a.getElevationFields=function(U){return r.apply(this,arguments)};a.getExpressionFields=function(U,V){return Oa.apply(this,arguments)};
a.getFeatureEditFields=function(U){if(!U)return[];const V="editFieldsInfo"in U&&U.editFieldsInfo;return V?t(U.fieldsIndex,[V&&V.creatorField,V&&V.creationDateField,V&&V.editorField,V&&V.editDateField]):[]};a.getFeatureGeometryFields=function(U){if(!U)return[];const V=U.geometryFieldsInfo;return V?t(U.fieldsIndex,[V.shapeAreaField,V.shapeLengthField]):[]};a.getFieldDefaultValue=function(U){const V=U.defaultValue;if(void 0!==V&&ma(U,V))return V;if(U.nullable)return null};a.getFieldRange=function(U){const V=
y.getDomainRange(U.domain);if(V)return V;if(la(U))return Ba(U.type)};a.getLabelingFields=function(U){return S.apply(this,arguments)};a.getNumericTypeForValue=function(U){if(!N(U))return null;if(ea(U)){if(U>=W.min&&U<=W.max)return"esriFieldTypeSmallInteger";if(U>=Y.min&&U<=Y.max)return"esriFieldTypeInteger"}return U>=ia.min&&U<=ia.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};a.getTimeFields=function(U){return A.apply(this,arguments)};a.integerRange=Y;a.isDateField=function(U){return null!=U&&("date"===
U.type||"esriFieldTypeDate"===U.type)};a.isNumberInRange=Ja;a.isNumericField=la;a.isStringField=function(U){return null!=U&&("string"===U.type||"esriFieldTypeString"===U.type)};a.isValidFieldValue=function(U,V){return null===va(U,V)};a.isValueMatchingFieldType=ma;a.numericTypes=D;a.packFields=function(U,V,da=1){if(!V||!U)return[];if(V.includes("*"))return["*"];V=t(U,V);return V.length/U.fields.length>=da?["*"]:V};a.populateMissingFields=Sa;a.rendererFields=Ia;a.sanitizeNullFieldValue=function(U){return null==
U||"number"===typeof U&&isNaN(U)?null:U};a.singleRange=ia;a.smallIntegerRange=W;a.unpackFieldNames=function(U,V){return p.isNone(V)||p.isNone(U)?[]:V.includes("*")?U.fields.map(da=>da.name):V};a.validateFieldValue=va;a.validationErrorToString=function(U,V,da){switch(U){case y.DomainValidationError.INVALID_CODED_VALUE:return`Value ${da} is not in the coded domain - field: ${V.name}, domain: ${JSON.stringify(V.domain)}`;case y.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${da} is out of the range of valid values - field: ${V.name}, domain: ${JSON.stringify(V.domain)}`;
case a.TypeValidationError.INVALID_TYPE:return`Value ${da} is not a valid value for the field type - field: ${V.name}, type: ${V.type}, nullable: ${V.nullable}`;case a.NumericRangeValidationError.OUT_OF_RANGE:{const {min:oa,max:pa}=Ba(V.type);return`Value ${da} is out of range for the number type - field: ${V.name}, type: ${V.type}, value range is ${oa} to ${pa}`}}};a.visualVariableFields=e;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(c){function a(F,M){switch(F.type){case "range":{const p="range"in F?F.range[1]:F.maxValue;if(+M<("range"in F?F.range[0]:F.minValue)||+M>p)return c.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==F.codedValues||F.codedValues.every(p=>null==p||p.code!==M))return c.DomainValidationError.INVALID_CODED_VALUE}return null}c.DomainValidationError=void 0;(function(F){F.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";F.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(c.DomainValidationError||(c.DomainValidationError={}));c.getDomainRange=function(F){if(F&&"range"===F.type)return{min:"range"in F?F.range[0]:F.minValue,max:"range"in F?F.range[1]:F.maxValue}};c.isValidDomainValue=function(F,M){return null===a(F,M)};c.validateDomainValue=a;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(c,a,F,M,p,n){function y(){C||(C=F._asyncToGenerator(function*(){const t=yield new Promise((z,L)=>c(["./arcadeUtils"],z,L));return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})());return C}let C;M=(t,z,L)=>u.create(t,z,L,null,["$feature","$view"]);let u=function(){function t(L,x,h,H,b,g,r,B){this.script=L;this.evaluate=b;this.fields=Array.isArray(r)?r:r.fields;this._syntaxTree=H;this._arcade=x;this._arcadeDictionary=h;this._arcadeFeature=g;this._spatialReference=
B;this._referencesGeometry=x.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}t.create=function(){var L=F._asyncToGenerator(function*(x,h,H,b,g,r){const {arcade:B,Feature:l,Dictionary:E}=yield y(),J=n.fromJSON(h);h=B.parseScript(x,r);g=g.reduce((m,A)=>({...m,[A]:null}),{});let O=null;p.isSome(b)&&(O=new E(b),O.immutable=!0,g.$config=null);b=B.scriptUsesGeometryEngine(h)&&B.enableGeometrySupport();r=B.scriptUsesFeatureSet(h)&&B.enableFeatureSetSupport();
const Q=B.scriptIsAsync(h)&&B.enableAsyncSupport();g={vars:g,spatialReference:J,useAsync:!!Q};const f=new E;f.immutable=!1;f.setField("scale",0);const k=B.compileScript(h,g);yield Promise.all([b,r,Q]);return new t(x,B,E,h,m=>{"$view"in m&&m.$view&&(f.setField("scale",m.$view.scale),m.$view=f);O&&(m.$config=O);return k({vars:m,spatialReference:J})},new l,H,J)});return function(x,h,H,b,g,r){return L.apply(this,arguments)}}();var z=t.prototype;z.repurposeFeature=function(L){L.geometry&&!L.geometry.spatialReference&&
(L.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(L.geometry,L.attributes,{fields:this.fields});return this._arcadeFeature};z.repurposeAdapter=function(L){this._arcadeFeature.repurposeFromAdapter(L,{fields:this.fields});return this._arcadeFeature};z.createDictionary=function(){return new this._arcadeDictionary};z.referencesMember=function(L){return this._arcade.referencesMember(this._syntaxTree,L)};z.referencesFunction=function(L){return this._arcade.referencesFunction(this._syntaxTree,
L)};z.referencesGeometry=function(){return this._referencesGeometry};z.referencesScale=function(){return this._referencesScale};z.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return t}();a.ArcadeExpression=u;a.createDictionaryExpression=(t,z,L,x)=>u.create(t,z,L,x,["$feature","$view"]);a.createLabelExpression=(t,z,L)=>u.create(t,z,L,null,["$feature"]);a.createRendererExpression=M;a.createVVExpression=M;a.default=u;a.loadArcade=y;Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),function(c,a,F,M,p,n,y,C,u,t,z,L,x){function h(){return new Promise((r,B)=>
c(["../../../geometry/geometryEngineJSON"],r,B))}function H(){H=F._asyncToGenerator(function*(r,B,l){const {spatialRel:E,geometry:J}=r;if(J){if(!0!==g.spatialRelationship[E])throw new M("feature-store:unsupported-query","Unsupported query spatial relationship",{query:r});if(C.isValid(J.spatialReference)&&C.isValid(l)){if(!0!==g.queryGeometry[y.getJsonType(J)])throw new M("feature-store:unsupported-query","Unsupported query geometry type",{query:r});if(!0!==g.layerGeometry[B])throw new M("feature-store:unsupported-query",
"Unsupported layer geometry type",{query:r});if(r.outSR)return L.checkProjectionSupport(r.geometry&&r.geometry.spatialReference,r.outSR)}}});return H.apply(this,arguments)}const b={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},
g={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};a.canQueryWithRBush=function(r){if(y.isExtent(r))return!0;if(y.isPolygon(r)){for(const B of r.rings)if(5!==B.length||B[0][0]!==B[1][0]||B[0][0]!==B[4][0]||B[2][0]!==B[3][0]||B[0][1]!==B[3][1]||B[0][1]!==B[4][1]||B[1][1]!==B[2][1])return!1;return!0}return!1};a.checkSpatialQuerySupport=function(r,B,l){return H.apply(this,arguments)};a.getSpatialQueryOperator=function(r,B,l,E,J){if(y.isPolygon(B)&&"esriGeometryPoint"===l&&("esriSpatialRelIntersects"===
r||"esriSpatialRelContains"===r)){const O=t.convertFromPolygon(new z,B,!1,!1);return Promise.resolve(Q=>u.polygonContainsPoint(O,!1,!1,Q))}if(y.isPolygon(B)&&"esriGeometryMultipoint"===l){const O=t.convertFromPolygon(new z,B,!1,!1);if("esriSpatialRelContains"===r)return Promise.resolve(Q=>u.polygonContainsMultipoint(O,!1,!1,Q,E,J))}if(y.isExtent(B)&&"esriGeometryPoint"===l&&("esriSpatialRelIntersects"===r||"esriSpatialRelContains"===r))return Promise.resolve(O=>p.extentContainsPoint(B,x.getGeometry(l,
E,J,O)));if(y.isExtent(B)&&"esriGeometryMultipoint"===l&&"esriSpatialRelContains"===r)return Promise.resolve(O=>p.extentContainsMultipoint(B,x.getGeometry(l,E,J,O)));if(y.isExtent(B)&&"esriSpatialRelIntersects"===r){const O=n.getExtentIntersector(l);return Promise.resolve(Q=>O(B,x.getGeometry(l,E,J,Q)))}return h().then(O=>{const Q=O[b[r]].bind(null,B.spatialReference,B);return f=>Q(x.getGeometry(l,E,J,f))})};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports",
"./intersectsBase"],function(c,a){c.extentIntersectsExtent=a.extentIntersectsExtent;c.extentIntersectsMultipoint=a.extentIntersectsMultipoint;c.extentIntersectsPoint=a.extentIntersectsPoint;c.extentIntersectsPolygon=a.extentIntersectsPolygon;c.extentIntersectsPolyline=a.extentIntersectsPolyline;c.getFeatureExtentIntersector=a.getFeatureExtentIntersector;c.isSelfIntersecting=a.isSelfIntersecting;c.segmentIntersects=a.segmentIntersects;c.getExtentIntersector=function(F){return"mesh"===F?a.extentIntersectsExtent:
a.getFeatureExtentIntersector(F)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(c){function a(F,M,p,n,y){if(!F)return!1;M=M?p?4:3:p?3:2;const {coords:C,lengths:u}=F;p=!1;F=0;for(const z of u){var t=F;for(let L=F,x=F+z*M;L<x;L+=M){t=L+M;t===x&&(t=F);const h=C[L],H=C[L+1],b=C[t];t=C[t+1];(H<y&&t>=y||t<y&&H>=y)&&h+(y-H)/(t-H)*(b-h)<n&&(p=!p)}F+=z*M}return p}c.polygonContainsCoords=a;c.polygonContainsMultipoint=function(F,M,
p,n,y,C){y=y?C?4:3:C?3:2;const {coords:u,lengths:t}=n;if(!t)return!1;for(let z=0,L=0;z<t.length;z++,L+=y)if(!a(F,M,p,u[L],u[L+1]))return!1;return!0};c.polygonContainsPoint=function(F,M,p,n){return a(F,M,p,n.coords[0],n.coords[1])};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(c,a){function F(p){return"oid"===p.type||"esriFieldTypeOID"===p.type}function M(p){return"global-id"===
p.type||"esriFieldTypeGlobalID"===p.type}return function(){function p(y){this.fields=y;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(y){var C=[];for(const u of y)if(y=u&&u.name){const t=y.toLowerCase().trim();this._fieldsMap.set(y,u);this._fieldsMap.set(t,u);C.push(t);"date"===u.type||"esriFieldTypeDate"===u.type?(this.dateFields.push(u),this._dateFieldsSet.add(u)):a.isNumericField(u)&&(this._numericFieldsSet.add(u),
this.numericFields.push(u));F(u)||M(u)||(u.editable=null==u.editable?!0:!!u.editable,u.nullable=null==u.nullable?!0:!!u.nullable)}C.sort();this.uid=C.join(",")}}var n=p.prototype;n.destroy=function(){this._fieldsMap.clear()};n.has=function(y){return null!=this.get(y)};n.get=function(y){return null!=y?this._fieldsMap.get(y)||this._fieldsMap.get(y.toLowerCase().trim()):void 0};n.isDateField=function(y){return this._dateFieldsSet.has(this.get(y))};n.isNumericField=function(y){return this._numericFieldsSet.has(this.get(y))};
n.normalizeFieldName=function(y){if(y=this.get(y))return y.name};c._createClass(p,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const y of this.fields)F(y)||M(y)||y.nullable||void 0!==a.getFieldDefaultValue(y)||this._requiredFields.push(y)}return this._requiredFields}}]);return p}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h,H,b,g,r,B,l){function E(w){return O.has(w)?O.get(w):"number"===typeof w?w:1}const J=n.getLogger("esri.views.support.Scheduler");c.TaskPriority=void 0;(function(w){w.RESOURCE_CONTROLLER="schedule";w.SLIDE="slide";w.STREAM_DATA_LOADER="stream loader";w.ELEVATION_QUERY="elevation query";w.TERRAIN_SURFACE="terrain";w.SURFACE_GEOMETRY_UPDATES="surface geometry updates";w.GRAPHICS_CORE="Graphics3D";w.I3S_CONTROLLER="I3S";w.POINT_CLOUD_LAYER="point cloud";w.FEATURE_TILE_FETCHER=
"feature fetcher";w.OVERLAY="overlay";w.STAGE="stage";w.GRAPHICS_DECONFLICTOR="graphics deconflictor";w.FILTER_VISIBILITY="Graphics3D filter visibility";w.SCALE_VISIBILITY="Graphics3D scale visibility";w.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";w.POINT_OF_INTEREST_FREQUENT="POI frequent";w.POINT_OF_INTEREST_INFREQUENT="POI infrequent";w.LABELER="labeler";w.FEATURE_QUERY_ENGINE="feature query";w.FEATURE_TILE_TREE="feature tile tree";w.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";w.ELEVATION_ALIGNMENT=
"elevation alignment";w.TEXT_TEXTURE_ATLAS="text texture atlas";w.TEXTURE_UNLOAD="texture unload";w.LINE_OF_SIGHT_TOOL="line of sight tool";w.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";w.ELEVATION_PROFILE="elevation profile";w.SNAPPING="snapping";w.SHADOW_ACCUMULATOR="shadow accumulator";w.CLOUDS_GENERATOR="cloud generator";w[w.TEST_PRIO=1]="TEST_PRIO"})(c.TaskPriority||(c.TaskPriority={}));const O=new Map([[c.TaskPriority.RESOURCE_CONTROLLER,0],[c.TaskPriority.SLIDE,0],[c.TaskPriority.STREAM_DATA_LOADER,
0],[c.TaskPriority.ELEVATION_QUERY,0],[c.TaskPriority.TERRAIN_SURFACE,1],[c.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[c.TaskPriority.GRAPHICS_CORE,2],[c.TaskPriority.I3S_CONTROLLER,2],[c.TaskPriority.POINT_CLOUD_LAYER,2],[c.TaskPriority.FEATURE_TILE_FETCHER,2],[c.TaskPriority.OVERLAY,4],[c.TaskPriority.STAGE,4],[c.TaskPriority.GRAPHICS_DECONFLICTOR,4],[c.TaskPriority.FILTER_VISIBILITY,4],[c.TaskPriority.SCALE_VISIBILITY,4],[c.TaskPriority.FRUSTUM_VISIBILITY,4],[c.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[c.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[c.TaskPriority.LABELER,8],[c.TaskPriority.FEATURE_QUERY_ENGINE,8],[c.TaskPriority.FEATURE_TILE_TREE,16],[c.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[c.TaskPriority.ELEVATION_ALIGNMENT,12],[c.TaskPriority.TEXT_TEXTURE_ATLAS,12],[c.TaskPriority.CLOUDS_GENERATOR,12],[c.TaskPriority.TEXTURE_UNLOAD,12],[c.TaskPriority.LINE_OF_SIGHT_TOOL,16],[c.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[c.TaskPriority.SNAPPING,0],[c.TaskPriority.SHADOW_ACCUMULATOR,
30]]),Q=L.Milliseconds(6.5),f=L.Milliseconds(1),k=L.Milliseconds(30),m=L.Milliseconds(1E3/30),A=L.Milliseconds(100);var S;(function(w){let N=function(ja){function na(ma){var la=ja.call(this,ma)||this;la.updating=!0;la._microTaskQueued=!1;la.performanceInfo={total:new C("total"),tasks:new Map};la._frameTaskTimes=new Map;la._budget=null;la._state=1;la._tasks=new u;la._runQueue=new u;la._load=0;la._idleStateCallbacks=new u;la._idleUpdatesStartFired=!1;la._maxReschedule=q;la._forceTask=!1;la._debug=!1;
la._debugHandle=x.init(l,"SCHEDULER_LOG_SLOW_TASKS",Ba=>la._debug=Ba);la._budget=new ca(ma.nowFunc);for(const Ba of Object.keys(c.TaskPriority))la.performanceInfo.tasks.set(c.TaskPriority[Ba],new C(c.TaskPriority[Ba]));let va;const Ja=a._assertThisInitialized(la);la._test={get state(){return y.unwrapOr(va,Ja._state)},set state(Ba){va=Ba},FRAME_SAFETY_BUDGET:Q,INTERACTING_BUDGET:m,IDLE_BUDGET:A,get budget(){return Ja._budget.budget},usedBudget:0,setBudget:Ba=>Ja._budget=Ba,updateTask:Ba=>la._updateTask(Ba),
getState:Ba=>la._getState(Ba),getRuntime:Ba=>la._getRuntime(Ba),frameTaskTimes:la._frameTaskTimes,resetRuntimes:()=>la._resetRuntimes(),getRunning:()=>la._getRunning()};return la}a._inheritsLoose(na,ja);var ta=na.prototype;ta.destroy=function(){this._debugHandle&&this._debugHandle.remove();this._microTaskQueued=!1};ta.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=
q,this._schedule(),this.frame()))}))};ta.registerTask=function(ma,la){const va=E(ma);la=new X(this,ma,la,va);this._tasks.push(la);this.performanceInfo.tasks.has(ma)||this.performanceInfo.tasks.set(ma,new C(ma));return la};ta.registerIdleStateCallbacks=function(ma,la){const va={idleBegin:ma,idleEnd:la};this._idleStateCallbacks.push(va);2===this.state&&this._idleUpdatesStartFired&&va.idleBegin();const Ja=this;return{remove:()=>this._removeIdleStateCallbacks(va),set idleBegin(Ba){Ja._idleUpdatesStartFired&&
(va.idleEnd(),2===Ja._state&&Ba());va.idleBegin=Ba},set idleEnd(Ba){va.idleEnd=Ba}}};ta.updateBudget=function(ma){this._test.usedBudget=0;let la=Q,va=ma.frameDuration,Ja=f;switch(this.state){case 2:la=L.Milliseconds(0);va=L.Milliseconds(Math.max(A,ma.frameDuration));Ja=k;break;case 1:va=L.Milliseconds(Math.max(m,ma.frameDuration))}va=L.Milliseconds(va-ma.elapsedFrameTime-la);if(2!==this.state&&va<f&&!this._forceTask)return this._forceTask=!0,!1;va=L.Milliseconds(Math.max(va,Ja));this._budget.reset(va,
this.state);this._maxReschedule=q;this._updateLoad();return this._schedule()};ta.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(ma=>ma.idleBegin()));this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};ta.stopFrame=function(){this._budget.reset(L.Milliseconds(0),this._state);this._budget.madeProgress()};
ta._removeIdleStateCallbacks=function(ma){this._idleUpdatesStartFired&&ma.idleEnd();this._idleStateCallbacks.removeUnordered(ma)};ta.removeTask=function(ma){this._tasks.removeUnordered(ma);this._runQueue.removeUnordered(ma)};ta._updateTask=function(ma){this._tasks.forAll(la=>{la.name===ma&&la.setPriority(ma)})};ta._getState=function(ma){if(this._runQueue.some(va=>va.name===ma))return c.TaskState.SCHEDULED;let la=c.TaskState.IDLE;this._tasks.forAll(va=>{va.name===ma&&va.needsUpdate&&(1>=va.schedulePriority?
la=c.TaskState.READY:la!==c.TaskState.READY&&(la=c.TaskState.WAITING))});return la};ta._getRuntime=function(ma){let la=0;this._tasks.forAll(va=>{va.name===ma&&(la+=va.runtime)});return la};ta._resetRuntimes=function(){this._tasks.forAll(ma=>ma.runtime=0)};ta._getRunning=function(){const ma=new Map;this._tasks.forAll(va=>{va.needsUpdate&&ma.set(va.name,(ma.get(va.name)||0)+1)});if(0===ma.size)return null;let la="";ma.forEach((va,Ja)=>{la=1<va?la+` ${va}x ${Ja}`:la+` ${Ja}`});return la};ta._runIdle=
function(){this._run()};ta._runInteracting=function(){this._run()};ta._runAnimating=function(){this._run()};ta._updateLoad=function(){const ma=this._tasks.reduce((la,va)=>va.needsUpdate?++la:la,0);this._load=.9*this._load+ma*(1-.9)};ta._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(ma=>{if(ma.needsUpdate)return!0;ma.schedulePriority=ma.basePriority;return!1});for(this._tasks.forAll(ma=>{0===ma.basePriority&&ma.needsUpdate&&!this._runQueue.some(la=>la===ma)&&this._runQueue.unshift(ma)});0===
this._runQueue.length;){let ma=!1,la=0;this._tasks.forAll(va=>{if(va.needsUpdate&&0!==va.schedulePriority&&0!==va.basePriority)switch(ma=!0,la=Math.max(la,va.basePriority),va.schedulePriority){case 1:va.schedulePriority=0;this._runQueue.push(va);break;default:--va.schedulePriority}});if(!ma)return this.updating=!1;this._maxReschedule===q&&(this._maxReschedule=la);--this._maxReschedule}return this.updating=!0};ta._run=function(){const ma=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var la=
this._budget.now();const va=this._runQueue.pop();this._budget.resetProgress();try{va.task.runTask(this._budget)}catch(Ja){J.error(`Exception in task "${va.name}"`,Ja)}va.schedulePriority=va.basePriority;la=this._budget.now()-la;va.runtime+=la;this._frameTaskTimes.set(va.priority,this._frameTaskTimes.get(va.priority)+la);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",va.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._recordFrameTaskTimes(this._budget.now()-
ma);return}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-ma)};ta._startFrameTaskTimes=function(){for(const ma of Object.keys(c.TaskPriority))this._frameTaskTimes.set(c.TaskPriority[ma],0)};ta._recordFrameTaskTimes=function(ma){this._frameTaskTimes.forEach((la,va)=>this.performanceInfo.tasks.get(va).record(la));this.performanceInfo.total.record(ma)};a._createClass(na,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",
get:function(){return y.isNone(this._test.state)?this._state:this._test.state},set:function(ma){this._state!==ma&&(this._state=ma,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(la=>la.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return na}(M);F.__decorate([h.property()],N.prototype,"updating",void 0);F.__decorate([h.property()],N.prototype,"nowFunc",void 0);N=F.__decorate([r.subclass("esri.views.support.Scheduler")],
N);w.Scheduler=N;let X=function(ja){function na(ma,la,va,Ja){var Ba=ja.call(this,{})||this;Ba._scheduler=ma;Ba.name=la;Ba._basePriority=Ja;Ba.runtime=0;Ba._queue=new B.PromiseQueue;Ba._handles=new p;Ba.schedulePriority=Ba._basePriority;Ba.task=y.isSome(va)?va:Ba._queue;Ba._handles.add(z.reactTruthy(()=>Ba.task.running,()=>ma.activate()));return Ba}a._inheritsLoose(na,ja);var ta=na.prototype;ta.normalizeCtorArgs=function(){return{}};ta.remove=function(){this.processQueue(P);this._scheduler.removeTask(this);
this.schedule=I.schedule;this.reschedule=I.reschedule;this._handles.destroy()};ta.setPriority=function(ma){this.name=ma;ma=E(ma);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=ma;this._basePriority=ma};ta.schedule=function(ma,la,va){return this._queue.push(ma,la,va)};ta.reschedule=function(ma,la,va){return this._queue.unshift(ma,la,va)};ta.processQueue=function(ma){this._queue.runTask(ma)};a._createClass(na,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",
get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},set:function(ma){this.setPriority(ma)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return na}(M);F.__decorate([h.property({constructOnly:!0})],X.prototype,"task",void 0);F.__decorate([h.property({readOnly:!0})],X.prototype,"updating",null);X=F.__decorate([r.subclass("esri.views.support.SchedulerTask")],X);let ca=function(){function ja(ta){this.now=ta;this._budget=this._begin=
0;this._state=2;this._didWork=!1;this._enabled=!0}var na=ja.prototype;na.run=function(ta){if(this.done)return!1;!0===ta()&&(this._didWork=!0);return!0};na.madeProgress=function(){this._didWork=!0};na.reset=function(ta,ma){this._begin=this.now();this._budget=ta;this._state=ma;this._didWork=!1};na.resetProgress=function(){this._didWork=!1};a._createClass(ja,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},
{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(ta){this._enabled=ta}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return ja}();w.Budget=ca})(S||(S={}));c.TaskState=void 0;(function(w){w.SCHEDULED="s";w.READY="r";w.WAITING="w";w.IDLE="i"})(c.TaskState||(c.TaskState={}));const P=
(()=>{const w=new S.Budget(()=>performance.now());w.enabled=!1;return w})(),I=new (function(){function w(){}var N=w.prototype;N.remove=function(){};N.processQueue=function(){};N.schedule=function(X,ca,ja){try{if(t.isAborted(ca)){const na=t.createAbortError();return ja?Promise.resolve(ja(na)):Promise.reject(na)}return t.when(X(P))}catch(na){return Promise.reject(na)}};N.reschedule=function(X,ca,ja){return this.schedule(X,ca,ja)};return w}()),q=Number.MAX_SAFE_INTEGER;c.ImmediateTask=I;c.getTaskPriority=
E;c.newScheduler=function(w){return new S.Scheduler({nowFunc:w})};c.noBudget=P;c.taskPriorities=O;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(c,a,F,M,p,n){function y(t,z,L={},x){let h=null;const H=L.once?(b,g)=>{x(b)&&(M.removeMaybe(h),z(b,g))}:(b,g)=>{x(b)&&z(b,g)};h=p.watchTracked(t,H,L.sync,L.equals);L.initial&&(t=t(),H(t,t));return h}
function C(t){return!0}function u(t){return!!t}c.autorun=n.autorun;c.initial={initial:!0};c.react=function(t,z,L={}){return y(t,z,L,C)};c.reactListener=function(t,z,L,x={}){function h(){b&&g&&(g.remove(),null==x.onListenerRemove?void 0:x.onListenerRemove(b),g=b=null)}function H(l){x.once&&x.once&&M.removeMaybe(r);L(l)}let b=null,g=null,r=null;const B=p.watchTracked(t,(l,E)=>{h();a.isEventTarget(l)&&(b=l,g=a.on(l,z,H),null==x.onListenerAdd?void 0:x.onListenerAdd(l))},x.sync);return r=F.makeHandle(()=>
{B.remove();h()})};c.reactTruthy=function(t,z,L={}){return y(t,z,L,u)};c.sync={sync:!0};c.syncAndInitial={sync:!0,initial:!0};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n,y,C,u,t){c.PromiseQueue=function(L){function x(){var H=L.apply(this,arguments)||this;H._tasks=[];H.running=!1;return H}a._inheritsLoose(x,L);var h=x.prototype;h.destroy=function(){this.cancelAll()};h.runTask=function(H){for(;!H.done&&this._process(H);)H.madeProgress()};h.push=function(H,b,g){this.running=!0;return new Promise((r,B)=>this._tasks.push(new z(r,B,H,b,g)))};h.unshift=function(H,b,g){this.running=!0;return new Promise((r,B)=>this._tasks.unshift(new z(r,B,H,b,g)))};
h._process=function(H){if(0===this._tasks.length)return!1;const b=this._tasks.shift();try{const g=p.isAborted(b.signal);if(g&&!b.abortCallback)b.reject(p.createAbortError());else{const r=g?b.abortCallback(p.createAbortError()):b.callback(H);p.isPromise(r)?r.then(b.resolve,b.reject):b.resolve(r)}}catch(g){b.reject(g)}this.running=0<this._tasks.length;return!0};h.cancelAll=function(){const H=p.createAbortError();for(const b of this._tasks)if(b.abortCallback){const g=b.abortCallback(H);b.resolve(g)}else b.reject(H);
this._tasks.length=0;this.running=!1};a._createClass(x,[{key:"length",get:function(){return this._tasks.length}}]);return x}(M);F.__decorate([n.property()],c.PromiseQueue.prototype,"running",void 0);c.PromiseQueue=F.__decorate([t.subclass("esri.layers.support.PromiseQueue")],c.PromiseQueue);let z=function(L,x,h,H,b){this.resolve=L;this.reject=x;this.callback=h;this.signal=H;this.abortCallback=b};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n,y,C){F=function(u){function t(){var z=u.apply(this,arguments)||this;z.SCHEDULER_LOG_SLOW_TASKS=!1;z.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return z}c._inheritsLoose(t,u);return t}(F);a.__decorate([M.property()],F.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);a.__decorate([M.property()],F.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);F=a.__decorate([C.subclass("esri.views.support.DebugFlags")],F);return new F})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h,H,b,g,r,B){var l;F=new F.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});M=l=function(E){function J(Q){Q=E.call(this,Q)||this;Q.dpi=96;Q.format=null;Q.origin=null;Q.minScale=0;Q.maxScale=0;Q.size=null;Q.spatialReference=null;return Q}c._inheritsLoose(J,E);J.create=function(Q=
{}){const {resolutionFactor:f=1,scales:k,size:m=256,spatialReference:A=H.WebMercator,numLODs:S=24}=Q;if(!g.isValid(A)){Q=[];if(k)for(var P=0;P<k.length;P++){var I=k[P];Q.push({level:P,scale:I,resolution:I})}else for(P=5E-4,I=S-1;0<=I;I--)Q.unshift({level:I,scale:P,resolution:P}),P*=2;return new l({dpi:96,lods:Q,origin:new h(0,0,A),size:[m,m],spatialReference:A})}P=g.getInfo(A);Q=Q.origin?new h({x:Q.origin.x,y:Q.origin.y,spatialReference:A}):P?new h({x:P.origin[0],y:P.origin[1],spatialReference:A}):
new h({x:0,y:0,spatialReference:A});P=1/(39.37*n.getMetersPerUnitForSR(A)*96);I=[];if(k)for(var q=0;q<k.length;q++){var w=k[q];I.push({level:q,scale:w,resolution:w*P})}else{var N=g.isGeographic(A)?512/m*5.916575275917094E8:256/m*5.91657527591555E8;q=Math.ceil(S/f);I.push({level:0,scale:N,resolution:N*P});for(w=1;w<q;w++)N/=2**f,I.push({level:w,scale:N,resolution:N*P})}return new l({dpi:96,lods:I,origin:Q,size:[m,m],spatialReference:A})};var O=J.prototype;O.readOrigin=function(Q,f){return h.fromJSON({spatialReference:f.spatialReference,
...Q})};O.readSize=function(Q,f){return[f.cols,f.rows]};O.writeSize=function(Q,f){f.cols=Q[0];f.rows=Q[1]};O.zoomToScale=function(Q){const f=this.scales;if(0>=Q)return f[0];if(Q>=f.length-1)return f[f.length-1];{const k=Math.floor(Q);return f[k]/(f[k]/f[k+1])**(Q-k)}};O.scaleToZoom=function(Q){const f=this.scales,k=f.length-1;let m=0;for(;m<k;m++){const A=f[m],S=f[m+1];if(A<=Q)break;if(S===Q)return m+1;if(A>Q&&S<Q)return m+Math.log(A/Q)/Math.log(A/S)}return m};O.snapScale=function(Q,f=.95){Q=this.scaleToZoom(Q);
return Q%Math.floor(Q)>=f?this.zoomToScale(Math.ceil(Q)):this.zoomToScale(Math.floor(Q))};O.tileAt=function(Q,f,k,m){var A=this.lodAt(Q);if(!A)return null;let S;if("number"===typeof f)S=f,f=k;else{if(g.equals(f.spatialReference,this.spatialReference))S=f.x,f=f.y;else{m=r.project(f,this.spatialReference);if(p.isNone(m))return null;S=m.x;f=m.y}m=k}k=A.resolution*this.size[0];A=A.resolution*this.size[1];m||(m={id:null,level:0,row:0,col:0,extent:b.create()});m.level=Q;m.row=Math.floor((this.origin.y-
f)/A+.001);m.col=Math.floor((S-this.origin.x)/k+.001);this.updateTileInfo(m);return m};O.updateTileInfo=function(Q,f=0){var k=this.lodAt(Q.level);k||1!==f||(f=this.lods[this.lods.length-1],f.level<Q.level&&(k=f));if(k){var m=Q.level-k.level;f=k.resolution*this.size[0]/2**m;k=k.resolution*this.size[1]/2**m;Q.id=`${Q.level}/${Q.row}/${Q.col}`;Q.extent||(Q.extent=b.create());Q.extent[0]=this.origin.x+Q.col*f;Q.extent[1]=this.origin.y-(Q.row+1)*k;Q.extent[2]=Q.extent[0]+f;Q.extent[3]=Q.extent[1]+k}};
O.upsampleTile=function(Q){const f=this._upsampleLevels[Q.level];if(!f||-1===f.parentLevel)return!1;Q.level=f.parentLevel;Q.row=Math.floor(Q.row/f.factor+.001);Q.col=Math.floor(Q.col/f.factor+.001);this.updateTileInfo(Q);return!0};O.getTileBounds=function(Q,f){var {resolution:k}=this.lodAt(f.level);const m=k*this.size[0];k*=this.size[1];Q[0]=this.origin.x+f.col*m;Q[1]=this.origin.y-(f.row+1)*k;Q[2]=Q[0]+m;Q[3]=Q[1]+k;return Q};O.lodAt=function(Q){return this._levelToLOD&&this._levelToLOD[Q]||null};
O.clone=function(){return l.fromJSON(this.write({}))};O._initializeUpsampleLevels=function(){const Q=this.lods;this._upsampleLevels=[];let f=null;for(let k=0;k<Q.length;k++){const m=Q[k];this._upsampleLevels[m.level]={parentLevel:f?f.level:-1,factor:f?f.resolution/m.resolution:0};f=m}};c._createClass(J,[{key:"isWrappable",get:function(){const {spatialReference:Q,origin:f}=this;if(Q&&f){const k=g.getInfo(Q);return Q.isWrappable&&Math.abs(k.origin[0]-f.x)<=k.dx}return!1}},{key:"lods",set:function(Q){let f=
0,k=0;const m=[];this._levelToLOD={};Q&&(f=-Infinity,k=Infinity,Q.forEach(A=>{m.push(A.scale);f=A.scale>f?A.scale:f;k=A.scale<k?A.scale:k;this._levelToLOD[A.level]=A}));this._set("scales",m);this._set("minScale",f);this._set("maxScale",k);this._set("lods",Q);this._initializeUpsampleLevels()}}]);return J}(M.JSONSupport);a.__decorate([y.property({type:Number,json:{write:!0}})],M.prototype,"compressionQuality",void 0);a.__decorate([y.property({type:Number,json:{write:!0}})],M.prototype,"dpi",void 0);
a.__decorate([y.property({type:String,json:{read:F.read,write:F.write,origins:{"web-scene":{read:!1,write:!1}}}})],M.prototype,"format",void 0);a.__decorate([y.property({readOnly:!0})],M.prototype,"isWrappable",null);a.__decorate([y.property({type:h,json:{write:!0}})],M.prototype,"origin",void 0);a.__decorate([z.reader("origin")],M.prototype,"readOrigin",null);a.__decorate([y.property({type:[B],value:null,json:{write:!0}})],M.prototype,"lods",null);a.__decorate([y.property({readOnly:!0})],M.prototype,
"minScale",void 0);a.__decorate([y.property({readOnly:!0})],M.prototype,"maxScale",void 0);a.__decorate([y.property({readOnly:!0})],M.prototype,"scales",void 0);a.__decorate([y.property({cast:E=>Array.isArray(E)?E:"number"===typeof E?[E,E]:[256,256]})],M.prototype,"size",void 0);a.__decorate([z.reader("size",["rows","cols"])],M.prototype,"readSize",null);a.__decorate([x.writer("size",{cols:{type:t.Integer},rows:{type:t.Integer}})],M.prototype,"writeSize",null);a.__decorate([y.property({type:H,json:{write:!0}})],
M.prototype,"spatialReference",void 0);return M=l=a.__decorate([L.subclass("esri.layers.support.TileInfo")],M)})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(c,a,F,M,p,n,y,C){var u;F=u=function(t){function z(L){L=t.call(this,
L)||this;L.cols=null;L.level=0;L.levelValue=null;L.origin=null;L.resolution=0;L.rows=null;L.scale=0;return L}c._inheritsLoose(z,t);z.prototype.clone=function(){return new u({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return z}(F.JSONSupport);a.__decorate([M.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],F.prototype,"cols",void 0);a.__decorate([M.property({type:y.Integer,
json:{write:!0}})],F.prototype,"level",void 0);a.__decorate([M.property({type:String,json:{write:!0}})],F.prototype,"levelValue",void 0);a.__decorate([M.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],F.prototype,"origin",void 0);a.__decorate([M.property({type:Number,json:{write:!0}})],F.prototype,"resolution",void 0);a.__decorate([M.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],F.prototype,
"rows",void 0);a.__decorate([M.property({type:Number,json:{write:!0}})],F.prototype,"scale",void 0);return F=u=a.__decorate([C.subclass("esri.layers.support.LOD")],F)})},"esri/layers/support/TimeInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./TimeReference ../../portal/timeUnitKebabDictionary".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h){var H;p=H=function(b){function g(B){B=b.call(this,B)||this;B.cumulative=!1;B.endField=null;B.fullTimeExtent=null;B.hasLiveData=!1;B.interval=null;B.startField=null;B.timeReference=null;B.trackIdField=null;B.useTime=!0;return B}c._inheritsLoose(g,b);var r=g.prototype;r.readFullTimeExtent=function(B,l){return l.timeExtent&&Array.isArray(l.timeExtent)&&2===l.timeExtent.length?new F({start:new Date(l.timeExtent[0]),end:new Date(l.timeExtent[1])}):null};r.writeFullTimeExtent=
function(B,l){B&&y.isSome(B.start)&&y.isSome(B.end)?l.timeExtent=[B.start.getTime(),B.end.getTime()]:l.timeExtent=null};r.readInterval=function(B,l){return l.timeInterval&&l.timeIntervalUnits?new M({value:l.timeInterval,unit:h.timeUnitKebabDictionary.fromJSON(l.timeIntervalUnits)}):l.defaultTimeInterval&&l.defaultTimeIntervalUnits?new M({value:l.defaultTimeInterval,unit:h.timeUnitKebabDictionary.fromJSON(l.defaultTimeIntervalUnits)}):null};r.writeInterval=function(B,l){B?(B=B.toJSON(),l.timeInterval=
B.value,l.timeIntervalUnits=B.unit):(l.timeInterval=null,l.timeIntervalUnits=null)};r.clone=function(){const {cumulative:B,endField:l,hasLiveData:E,interval:J,startField:O,timeReference:Q,fullTimeExtent:f,trackIdField:k,useTime:m}=this;return new H({cumulative:B,endField:l,hasLiveData:E,interval:J,startField:O,timeReference:n.clone(Q),fullTimeExtent:n.clone(f),trackIdField:k,useTime:m})};return g}(p.JSONSupport);a.__decorate([C.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},
write:{target:"exportOptions.timeDataCumulative"}}})],p.prototype,"cumulative",void 0);a.__decorate([C.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],p.prototype,"endField",void 0);a.__decorate([C.property({type:F,json:{write:{enabled:!0,allowNull:!0}}})],p.prototype,"fullTimeExtent",void 0);a.__decorate([t.reader("fullTimeExtent",["timeExtent"])],p.prototype,"readFullTimeExtent",null);a.__decorate([L.writer("fullTimeExtent")],p.prototype,"writeFullTimeExtent",
null);a.__decorate([C.property({type:Boolean,json:{write:!0}})],p.prototype,"hasLiveData",void 0);a.__decorate([C.property({type:M,json:{write:{enabled:!0,allowNull:!0}}})],p.prototype,"interval",void 0);a.__decorate([t.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],p.prototype,"readInterval",null);a.__decorate([L.writer("interval")],p.prototype,"writeInterval",null);a.__decorate([C.property({type:String,json:{read:{source:"startTimeField"},
write:{target:"startTimeField",allowNull:!0}}})],p.prototype,"startField",void 0);a.__decorate([C.property({type:x,json:{write:{enabled:!0,allowNull:!0}}})],p.prototype,"timeReference",void 0);a.__decorate([C.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],p.prototype,"trackIdField",void 0);a.__decorate([C.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],p.prototype,"useTime",void 0);return p=H=a.__decorate([z.subclass("esri.layers.support.TimeInfo")],
p)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/arrayUtils ./core/has ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),function(c,a,F,M,p,n,y,C,u,t,z,L){var x;F=x=function(b){function g(B){B=b.call(this,B)||this;B.end=null;B.start=
null;return B}c._inheritsLoose(g,b);var r=g.prototype;r.readEnd=function(B,l){return null!=l.end?new Date(l.end):null};r.writeEnd=function(B,l){l.end=B?B.getTime():null};r.readStart=function(B,l){return null!=l.start?new Date(l.start):null};r.writeStart=function(B,l){l.start=B?B.getTime():null};r.clone=function(){return new x({end:this.end,start:this.start})};r.equals=function(B){if(!B)return!1;const l=M.isSome(this.start)?this.start.getTime():this.start,E=M.isSome(this.end)?this.end.getTime():this.end,
J=M.isSome(B.start)?B.start.getTime():B.start;B=M.isSome(B.end)?B.end.getTime():B.end;return l===J&&E===B};r.expandTo=function(B){if(this.isEmpty||this.isAllTime)return this.clone();const l=M.andThen(this.start,J=>p.truncateDate(J,B)),E=M.andThen(this.end,J=>p.offsetDate(p.truncateDate(J,B),1,B));return new x({start:l,end:E})};r.intersection=function(B){if(!B)return this.clone();if(this.isEmpty||B.isEmpty)return x.empty;if(this.isAllTime)return B.clone();if(B.isAllTime)return this.clone();var l=M.mapOr(this.start,
-Infinity,f=>f.getTime());const E=M.mapOr(this.end,Infinity,f=>f.getTime()),J=M.mapOr(B.start,-Infinity,f=>f.getTime());B=M.mapOr(B.end,Infinity,f=>f.getTime());let O,Q;J>=l&&J<=E?O=J:l>=J&&l<=B&&(O=l);E>=J&&E<=B?Q=E:B>=l&&B<=E&&(Q=B);return isNaN(O)||isNaN(Q)?x.empty:(l=new x,l.start=-Infinity===O?null:new Date(O),l.end=Infinity===Q?null:new Date(Q),l)};r.offset=function(B,l){if(this.isEmpty||this.isAllTime)return this.clone();const E=new x,{start:J,end:O}=this;M.isSome(J)&&(E.start=p.offsetDate(J,
B,l));M.isSome(O)&&(E.end=p.offsetDate(O,B,l));return E};r.union=function(B){if(!B||B.isEmpty)return this.clone();if(this.isEmpty)return B.clone();if(this.isAllTime||B.isAllTime)return h.clone();const l=M.isSome(this.start)&&M.isSome(B.start)?new Date(Math.min(this.start.getTime(),B.start.getTime())):null;B=M.isSome(this.end)&&M.isSome(B.end)?new Date(Math.max(this.end.getTime(),B.end.getTime())):null;return new x({start:l,end:B})};c._createClass(g,[{key:"isAllTime",get:function(){return this.equals(x.allTime)}},
{key:"isEmpty",get:function(){return this.equals(x.empty)}}],[{key:"allTime",get:function(){return h}},{key:"empty",get:function(){return H}}]);return g}(F.JSONSupport);a.__decorate([n.property({type:Date,json:{write:{allowNull:!0}}})],F.prototype,"end",void 0);a.__decorate([t.reader("end")],F.prototype,"readEnd",null);a.__decorate([L.writer("end")],F.prototype,"writeEnd",null);a.__decorate([n.property({readOnly:!0,json:{read:!1}})],F.prototype,"isAllTime",null);a.__decorate([n.property({readOnly:!0,
json:{read:!1}})],F.prototype,"isEmpty",null);a.__decorate([n.property({type:Date,json:{write:{allowNull:!0}}})],F.prototype,"start",void 0);a.__decorate([t.reader("start")],F.prototype,"readStart",null);a.__decorate([L.writer("start")],F.prototype,"writeStart",null);F=x=a.__decorate([z.subclass("esri.TimeExtent")],F);const h=new F,H=new F({start:void 0,end:void 0});return F})},"esri/core/timeUtils":function(){define(["exports","./has"],function(c,a){function F(n,y,C){return 0===n?0:n*M[y]/M[C]}const M=
{milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},p={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},
months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};c.convertTime=F;c.makeUTCTime=function(n,y,C="milliseconds"){y=new Date(F(y,C,"milliseconds"));y.setUTCFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return y};c.offsetDate=function(n,y,C){n=new Date(n.getTime());if(y&&C){const {getter:u,
setter:t,multiplier:z}=p[C];n[t](n[u]()+y*z)}return n};c.offsetDateUTC=function(n,y,C="milliseconds"){n=n.getTime();y=F(y,C,"milliseconds");return new Date(n+y)};c.resetUTCDate=function(n,y){n=new Date(n.getTime());n.setUTCFullYear(y.getFullYear(),y.getMonth(),y.getDate());return n};c.timeSinceUTCMidnight=function(n,y="milliseconds"){const C=F(n.getUTCHours(),"hours","milliseconds"),u=F(n.getUTCMinutes(),"minutes","milliseconds"),t=F(n.getUTCSeconds(),"seconds","milliseconds");n=n.getUTCMilliseconds();
return F(C+u+t+n,"milliseconds",y)};c.truncateDate=function(n,y){switch(y){case "milliseconds":return new Date(n.getTime());case "seconds":return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());case "minutes":return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes());case "hours":return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours());case "days":return new Date(n.getFullYear(),n.getMonth(),n.getDate());case "weeks":return new Date(n.getFullYear(),
n.getMonth(),n.getDate()-n.getDay());case "months":return new Date(n.getFullYear(),n.getMonth(),1);case "years":return new Date(n.getFullYear(),0,1);case "decades":return new Date(n.getFullYear()-n.getFullYear()%10,0,1);case "centuries":return new Date(n.getFullYear()-n.getFullYear()%100,0,1);default:return new Date}};c.truncateLocalTime=function(n){const y=new Date(0);y.setHours(0);y.setMinutes(0);y.setSeconds(0);y.setMilliseconds(0);y.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());
return y};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/TimeInterval":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/timeUtils ./core/accessorSupport/decorators/property ./core/arrayUtils ./core/has ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/subclass ./portal/timeUnitKebabDictionary".split(" "),function(c,a,F,M,p,n,y,C,u,t){var z;F=z=function(L){function x(H){H=L.call(this,H)||this;H.value=0;H.unit="milliseconds";
return H}c._inheritsLoose(x,L);var h=x.prototype;h.toMilliseconds=function(){return M.convertTime(this.value,this.unit,"milliseconds")};h.clone=function(){return new z({value:this.value,unit:this.unit})};return x}(F.JSONSupport);a.__decorate([p.property({type:Number,json:{write:!0},nonNullable:!0})],F.prototype,"value",void 0);a.__decorate([p.property({type:t.timeUnitKebabDictionary.apiValues,json:{type:t.timeUnitKebabDictionary.jsonValues,read:t.timeUnitKebabDictionary.read,write:t.timeUnitKebabDictionary.write},
nonNullable:!0})],F.prototype,"unit",void 0);return F=z=a.__decorate([u.subclass("esri.TimeInterval")],F)})},"esri/portal/timeUnitKebabDictionary":function(){define(["exports","../core/jsonMap"],function(c,a){a=a.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",
esriTimeUnitsUnknown:void 0});c.timeUnitKebabDictionary=a;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/TimeReference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass".split(" "),function(c,a,F,M,p,n,y,C,
u){var t;F=t=function(z){function L(h){h=z.call(this,h)||this;h.respectsDaylightSaving=!1;h.timezone=null;return h}c._inheritsLoose(L,z);var x=L.prototype;x.readRespectsDaylightSaving=function(h,H){return void 0!==H.respectsDaylightSaving?H.respectsDaylightSaving:void 0!==H.respectDaylightSaving?H.respectDaylightSaving:!1};x.clone=function(){const {respectsDaylightSaving:h,timezone:H}=this;return new t({respectsDaylightSaving:h,timezone:H})};return L}(F.JSONSupport);a.__decorate([M.property({type:Boolean,
json:{write:!0}})],F.prototype,"respectsDaylightSaving",void 0);a.__decorate([C.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],F.prototype,"readRespectsDaylightSaving",null);a.__decorate([M.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],F.prototype,"timezone",void 0);return F=t=a.__decorate([u.subclass("esri.layers.support.TimeReference")],F)})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h,H,b,g,r,B,l){var E;const J=new p.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});p=new p.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});n=E=function(O){function Q(k){k=O.call(this,k)||this;k.aggregateIds=null;k.cacheHint=void 0;k.datumTransformation=null;k.distance=void 0;k.dynamicDataSource=void 0;k.formatOf3DObjects=null;k.gdbVersion=null;k.geometry=null;k.geometryPrecision=void 0;k.groupByFieldsForStatistics=null;k.having=null;k.historicMoment=null;k.maxAllowableOffset=void 0;k.maxRecordCountFactor=
1;k.multipatchOption=null;k.num=void 0;k.objectIds=null;k.orderByFields=null;k.outFields=null;k.outSpatialReference=null;k.outStatistics=null;k.parameterValues=null;k.pixelSize=null;k.quantizationParameters=null;k.rangeValues=null;k.relationParameter=null;k.resultType=null;k.returnCentroid=!1;k.returnDistinctValues=!1;k.returnExceededLimitFeatures=!0;k.returnGeometry=!1;k.returnQueryGeometry=!1;k.returnM=void 0;k.returnZ=void 0;k.sourceSpatialReference=null;k.spatialRelationship="intersects";k.start=
void 0;k.sqlFormat=null;k.text=null;k.timeExtent=null;k.timeReferenceUnknownClient=!1;k.units=null;k.where=null;return k}c._inheritsLoose(Q,O);Q.from=function(k){return h.ensureClass(E,k)};var f=Q.prototype;f.castDatumTransformation=function(k){return"number"===typeof k||"object"===typeof k?k:null};f.writeHistoricMoment=function(k,m){m.historicMoment=k&&k.getTime()};f.writeParameterValues=function(k,m){if(k){const A={};for(const S in k){const P=k[S];Array.isArray(P)?A[S]=P.map(I=>I instanceof Date?
I.getTime():I):A[S]=P instanceof Date?P.getTime():P}m.parameterValues=A}};f.writeStart=function(k,m){m.resultOffset=this.start;m.resultRecordCount=this.num||10;m.where="1\x3d1"};f.writeWhere=function(k,m){m.where=k||"1\x3d1"};f.clone=function(){return new E(y.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,
having:this.having,historicMoment:C.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,
rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,
sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))};return Q}(n.JSONSupport);n.MAX_MAX_RECORD_COUNT_FACTOR=5;a.__decorate([u.property({json:{write:!0}})],n.prototype,"aggregateIds",void 0);a.__decorate([u.property({type:Boolean,json:{write:!0}})],n.prototype,"cacheHint",void 0);a.__decorate([u.property({json:{write:!0}})],n.prototype,"datumTransformation",void 0);a.__decorate([t.cast("datumTransformation")],
n.prototype,"castDatumTransformation",null);a.__decorate([u.property({type:Number,json:{write:{overridePolicy(O){return{enabled:0<O}}}}})],n.prototype,"distance",void 0);a.__decorate([u.property({type:b.DataLayerSource,json:{write:!0}})],n.prototype,"dynamicDataSource",void 0);a.__decorate([u.property({type:String,json:{write:!0}})],n.prototype,"formatOf3DObjects",void 0);a.__decorate([u.property({type:String,json:{write:!0}})],n.prototype,"gdbVersion",void 0);a.__decorate([u.property({types:F.geometryTypes,
json:{read:H.fromJSON,write:!0}})],n.prototype,"geometry",void 0);a.__decorate([u.property({type:Number,json:{write:!0}})],n.prototype,"geometryPrecision",void 0);a.__decorate([u.property({type:[String],json:{write:!0}})],n.prototype,"groupByFieldsForStatistics",void 0);a.__decorate([u.property({type:String,json:{write:!0}})],n.prototype,"having",void 0);a.__decorate([u.property({type:Date})],n.prototype,"historicMoment",void 0);a.__decorate([x.writer("historicMoment")],n.prototype,"writeHistoricMoment",
null);a.__decorate([u.property({type:Number,json:{write:!0}})],n.prototype,"maxAllowableOffset",void 0);a.__decorate([u.property({type:Number,cast(O){return 1>O?1:O>E.MAX_MAX_RECORD_COUNT_FACTOR?E.MAX_MAX_RECORD_COUNT_FACTOR:O},json:{write:{overridePolicy(O){return{enabled:1<O}}}}})],n.prototype,"maxRecordCountFactor",void 0);a.__decorate([u.property({type:["xyFootprint"],json:{write:!0}})],n.prototype,"multipatchOption",void 0);a.__decorate([u.property({type:Number,json:{read:{source:"resultRecordCount"}}})],
n.prototype,"num",void 0);a.__decorate([u.property({json:{write:!0}})],n.prototype,"objectIds",void 0);a.__decorate([u.property({type:[String],json:{write:!0}})],n.prototype,"orderByFields",void 0);a.__decorate([u.property({type:[String],json:{write:!0}})],n.prototype,"outFields",void 0);a.__decorate([u.property({type:B,json:{name:"outSR",write:!0}})],n.prototype,"outSpatialReference",void 0);a.__decorate([u.property({type:[r],json:{write:{enabled:!0,overridePolicy(){return{enabled:C.isSome(this.outStatistics)&&
0<this.outStatistics.length}}}}})],n.prototype,"outStatistics",void 0);a.__decorate([u.property({json:{write:!0}})],n.prototype,"parameterValues",void 0);a.__decorate([x.writer("parameterValues")],n.prototype,"writeParameterValues",null);a.__decorate([u.property({type:l,json:{write:!0}})],n.prototype,"pixelSize",void 0);a.__decorate([u.property({type:g,json:{write:!0}})],n.prototype,"quantizationParameters",void 0);a.__decorate([u.property({type:[Object],json:{write:!0}})],n.prototype,"rangeValues",
void 0);a.__decorate([u.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],n.prototype,"relationParameter",void 0);a.__decorate([u.property({type:String,json:{write:!0}})],n.prototype,"resultType",void 0);a.__decorate([u.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,"returnCentroid",void 0);a.__decorate([u.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,
"returnDistinctValues",void 0);a.__decorate([u.property({type:Boolean,json:{default:!0,write:!0}})],n.prototype,"returnExceededLimitFeatures",void 0);a.__decorate([u.property({type:Boolean,json:{write:!0}})],n.prototype,"returnGeometry",void 0);a.__decorate([u.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,"returnQueryGeometry",void 0);a.__decorate([u.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,"returnM",void 0);a.__decorate([u.property({type:Boolean,json:{write:{overridePolicy(O){return{enabled:O}}}}})],
n.prototype,"returnZ",void 0);a.__decorate([u.property({type:B,json:{write:!0}})],n.prototype,"sourceSpatialReference",void 0);a.__decorate([z.enumeration(J,{ignoreUnknown:!1,name:"spatialRel"})],n.prototype,"spatialRelationship",void 0);a.__decorate([u.property({type:Number,json:{read:{source:"resultOffset"}}})],n.prototype,"start",void 0);a.__decorate([x.writer("start"),x.writer("num")],n.prototype,"writeStart",null);a.__decorate([u.property({type:String,json:{write:!0}})],n.prototype,"sqlFormat",
void 0);a.__decorate([u.property({type:String,json:{write:!0}})],n.prototype,"text",void 0);a.__decorate([u.property({type:M,json:{write:!0}})],n.prototype,"timeExtent",void 0);a.__decorate([u.property({type:Boolean,json:{default:!1,write:!0}})],n.prototype,"timeReferenceUnknownClient",void 0);a.__decorate([z.enumeration(p,{ignoreUnknown:!1}),u.property({json:{write:{overridePolicy(O){return{enabled:O&&0<this.distance}}}}})],n.prototype,"units",void 0);a.__decorate([u.property({type:String,json:{write:{overridePolicy(O){return{enabled:null!=
O||0<this.start}}}}})],n.prototype,"where",void 0);a.__decorate([x.writer("where")],n.prototype,"writeWhere",null);return n=E=a.__decorate([L.subclass("esri.rest.support.Query")],n)})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h,H,b,g,r,B){function l(){Q||(Q=h.createTypeReader({types:E()}));return Q}function E(){f||(f={key:"type",base:null,typeMap:{"data-layer":c.DataLayerSource,"map-layer":b.MapLayerSource}});return f}var J,O;M=M.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});c.JoinTableDataSource=J=function(k){function m(S){S=k.call(this,S)||this;S.type="join-table";return S}a._inheritsLoose(m,k);var A=m.prototype;A.readLeftTableSource=function(S,
P,I){return l()(S,P,I)};A.castLeftTableSource=function(S){return x.ensureOneOfType(E(),S)};A.readRightTableSource=function(S,P,I){return l()(S,P,I)};A.castRightTableSource=function(S){return x.ensureOneOfType(E(),S)};A.clone=function(){var S,P;const {leftTableKey:I,rightTableKey:q,leftTableSource:w,rightTableSource:N,joinType:X}=this,ca={leftTableKey:I,rightTableKey:q,leftTableSource:null!=(S=null==w?void 0:w.clone())?S:void 0,rightTableSource:null!=(P=null==N?void 0:N.clone())?P:void 0,joinType:X};
return new J(ca)};return m}(p.JSONSupport);F.__decorate([t.enumeration({joinTable:"join-table"})],c.JoinTableDataSource.prototype,"type",void 0);F.__decorate([n.property({type:String,json:{write:!0}})],c.JoinTableDataSource.prototype,"leftTableKey",void 0);F.__decorate([n.property({type:String,json:{write:!0}})],c.JoinTableDataSource.prototype,"rightTableKey",void 0);F.__decorate([n.property({json:{write:!0}})],c.JoinTableDataSource.prototype,"leftTableSource",void 0);F.__decorate([z.reader("leftTableSource")],
c.JoinTableDataSource.prototype,"readLeftTableSource",null);F.__decorate([u.cast("leftTableSource")],c.JoinTableDataSource.prototype,"castLeftTableSource",null);F.__decorate([n.property({json:{write:!0}})],c.JoinTableDataSource.prototype,"rightTableSource",void 0);F.__decorate([z.reader("rightTableSource")],c.JoinTableDataSource.prototype,"readRightTableSource",null);F.__decorate([u.cast("rightTableSource")],c.JoinTableDataSource.prototype,"castRightTableSource",null);F.__decorate([t.enumeration(M)],
c.JoinTableDataSource.prototype,"joinType",void 0);c.JoinTableDataSource=J=F.__decorate([L.subclass("esri.layers.support.source.JoinTableDataSource")],c.JoinTableDataSource);let Q=null,f=null;u={key:"type",base:null,typeMap:{"join-table":c.JoinTableDataSource,"query-table":g.QueryTableDataSource,raster:r.RasterDataSource,table:B.TableDataSource}};c.DataLayerSource=O=function(k){function m(A){A=k.call(this,A)||this;A.type="data-layer";return A}a._inheritsLoose(m,k);m.prototype.clone=function(){const {fields:A,
dataSource:S}=this;return new O({fields:A,dataSource:S})};return m}(p.JSONSupport);F.__decorate([t.enumeration({dataLayer:"data-layer"})],c.DataLayerSource.prototype,"type",void 0);F.__decorate([n.property({type:[H],json:{write:!0}})],c.DataLayerSource.prototype,"fields",void 0);F.__decorate([n.property({types:u,json:{write:!0}})],c.DataLayerSource.prototype,"dataSource",void 0);c.DataLayerSource=O=F.__decorate([L.subclass("esri.layers.support.source.DataLayerSource")],c.DataLayerSource);c.DataLayerSource.from=
x.ensureType(c.DataLayerSource);Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x){var h;const H=new F.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});F=h=function(b){function g(B){B=b.call(this,B)||this;
B.alias=null;B.defaultValue=void 0;B.description=null;B.domain=null;B.editable=!0;B.length=-1;B.name=null;B.nullable=!0;B.type=null;B.valueType=null;return B}c._inheritsLoose(g,b);var r=g.prototype;r.readDescription=function(B,{description:l}){let E;try{E=JSON.parse(l)}catch(J){}return E?E.value:null};r.readValueType=function(B,{description:l}){let E;try{E=JSON.parse(l)}catch(J){}return E?H.fromJSON(E.fieldValueType):null};r.clone=function(){return new h({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return g}(M.JSONSupport);a.__decorate([p.property({type:String,json:{write:!0}})],F.prototype,"alias",void 0);a.__decorate([p.property({type:[String,Number],json:{write:{allowNull:!0}}})],F.prototype,"defaultValue",void 0);a.__decorate([p.property()],F.prototype,"description",void 0);a.__decorate([t.reader("description")],
F.prototype,"readDescription",null);a.__decorate([p.property({types:L.types,json:{read:{reader:L.fromJSON},write:!0}})],F.prototype,"domain",void 0);a.__decorate([p.property({type:Boolean,json:{write:!0}})],F.prototype,"editable",void 0);a.__decorate([p.property({type:C.Integer,json:{write:!0}})],F.prototype,"length",void 0);a.__decorate([p.property({type:String,json:{write:!0}})],F.prototype,"name",void 0);a.__decorate([p.property({type:Boolean,json:{write:!0}})],F.prototype,"nullable",void 0);a.__decorate([u.enumeration(x.kebabDict)],
F.prototype,"type",void 0);a.__decorate([p.property()],F.prototype,"valueType",void 0);a.__decorate([t.reader("valueType",["description"])],F.prototype,"readValueType",null);return F=h=a.__decorate([z.subclass("esri.layers.support.Field")],F)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(c,a,F,M,p,n){a={key:"type",base:M,typeMap:{range:n,"coded-value":F,inherited:p}};c.CodedValueDomain=F;
c.DomainBase=M;c.InheritedDomain=p;c.RangeDomain=n;c.fromJSON=function(y){if(!y||!y.type)return null;switch(y.type){case "range":return n.fromJSON(y);case "codedValue":return F.fromJSON(y);case "inherited":return p.fromJSON(y)}return null};c.types=a;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(c,a,F,M,p,n,y,C,u){var t;p=t=function(z){function L(h){h=z.call(this,h)||this;h.codedValues=null;h.type="coded-value";return h}c._inheritsLoose(L,z);var x=L.prototype;x.getName=function(h){let H=null;if(this.codedValues){const b=String(h);this.codedValues.some(g=>{String(g.code)===b&&(H=g.name);return!!H})}return H};x.clone=function(){return new t({codedValues:F.clone(this.codedValues),name:this.name})};return L}(u);a.__decorate([M.property({type:[C.default],json:{write:!0}})],p.prototype,
"codedValues",void 0);a.__decorate([n.enumeration({codedValue:"coded-value"})],p.prototype,"type",void 0);return p=t=a.__decorate([y.subclass("esri.layers.support.CodedValueDomain")],p)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n,y,C,u){var t;c.CodedValue=t=function(z){function L(x){x=z.call(this,x)||this;x.name=null;x.code=null;return x}a._inheritsLoose(L,z);L.prototype.clone=function(){return new t({name:this.name,code:this.code})};return L}(M.JSONSupport);F.__decorate([p.property({type:String,json:{write:!0}})],c.CodedValue.prototype,"name",void 0);F.__decorate([p.property({type:[String,Number],json:{write:!0}})],c.CodedValue.prototype,"code",void 0);c.CodedValue=t=F.__decorate([u.subclass("esri.layers.support.CodedValue")],
c.CodedValue);c.default=c.CodedValue;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(c,a,F,M,p,n,y,C,u,t){F=
new F.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});M=function(z){function L(x){x=z.call(this,x)||this;x.name=null;x.type=null;return x}c._inheritsLoose(L,z);return L}(M.JSONSupport);a.__decorate([p.property({type:String,json:{write:!0}})],M.prototype,"name",void 0);a.__decorate([u.enumeration(F)],M.prototype,"type",void 0);return M=a.__decorate([t.subclass("esri.layers.support.Domain")],M)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(c,a,F,M,p,n,y,C,u,t){var z;F=z=function(L){function x(h){h=L.call(this,h)||this;h.type="inherited";return h}c._inheritsLoose(x,L);x.prototype.clone=function(){return new z};return x}(t);a.__decorate([C.enumeration({inherited:"inherited"})],F.prototype,"type",void 0);return F=z=a.__decorate([u.subclass("esri.layers.support.InheritedDomain")],F)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(c,a,F,M,p,n,y,C,u){var t;M=t=function(z){function L(x){x=z.call(this,x)||this;x.maxValue=null;x.minValue=null;x.type="range";return x}c._inheritsLoose(L,z);L.prototype.clone=function(){return new t({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return L}(u);a.__decorate([F.property({type:Number,json:{type:[Number],read:{source:"range",reader(z,L){return L.range&&L.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(z,L,x){L[x]=[this.minValue||0,z]}}}})],M.prototype,"maxValue",void 0);a.__decorate([F.property({type:Number,json:{type:[Number],read:{source:"range",reader(z,L){return L.range&&L.range[0]}},write:{target:"range",writer(z,L,x){L[x]=[z,this.maxValue||0]}}}})],M.prototype,"minValue",void 0);a.__decorate([y.enumeration({range:"range"})],M.prototype,"type",void 0);return M=t=a.__decorate([C.subclass("esri.layers.support.RangeDomain")],M)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(c,a){a=new a.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});c.kebabDict=a;Object.defineProperty(c,"__esModule",
{value:!0})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(c,a,F,M,p,n,y,C,u,t){var z;c.MapLayerSource=z=function(L){function x(h){h=
L.call(this,h)||this;h.type="map-layer";return h}a._inheritsLoose(x,L);x.prototype.clone=function(){const {mapLayerId:h,gdbVersion:H}=this;return new z({mapLayerId:h,gdbVersion:H})};return x}(M.JSONSupport);F.__decorate([u.enumeration({mapLayer:"map-layer"})],c.MapLayerSource.prototype,"type",void 0);F.__decorate([p.property({type:C.Integer,json:{write:!0}})],c.MapLayerSource.prototype,"mapLayerId",void 0);F.__decorate([p.property({type:String,json:{write:!0}})],c.MapLayerSource.prototype,"gdbVersion",
void 0);c.MapLayerSource=z=F.__decorate([t.subclass("esri.layers.support.source.MapLayerSource")],c.MapLayerSource);Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x){var h;c.QueryTableDataSource=h=function(H){function b(g){g=H.call(this,g)||this;g.type="query-table";return g}a._inheritsLoose(b,H);b.prototype.clone=function(){var g;const {workspaceId:r,query:B,oidFields:l,spatialReference:E,geometryType:J}=this,O={workspaceId:r,query:B,oidFields:l,spatialReference:null!=(g=null==E?void 0:E.clone())?g:void 0,geometryType:J};return new h(O)};return b}(p.JSONSupport);F.__decorate([t.enumeration({queryTable:"query-table"})],c.QueryTableDataSource.prototype,
"type",void 0);F.__decorate([n.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"workspaceId",void 0);F.__decorate([n.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"query",void 0);F.__decorate([n.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"oidFields",void 0);F.__decorate([n.property({type:L,json:{write:!0}})],c.QueryTableDataSource.prototype,"spatialReference",void 0);F.__decorate([t.enumeration(x.featureGeometryTypeKebabDictionary)],
c.QueryTableDataSource.prototype,"geometryType",void 0);c.QueryTableDataSource=h=F.__decorate([z.subclass("esri.layers.support.source.QueryTableDataSource")],c.QueryTableDataSource);Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n,y,C,u,t){var z;c.RasterDataSource=z=function(L){function x(h){h=L.call(this,h)||this;h.type="raster";return h}a._inheritsLoose(x,L);x.prototype.clone=function(){const {workspaceId:h,dataSourceName:H}=this;return new z({workspaceId:h,dataSourceName:H})};return x}(M.JSONSupport);F.__decorate([u.enumeration({raster:"raster"})],c.RasterDataSource.prototype,"type",void 0);F.__decorate([p.property({type:String,json:{write:!0}})],c.RasterDataSource.prototype,"dataSourceName",void 0);
F.__decorate([p.property({type:String,json:{write:!0}})],c.RasterDataSource.prototype,"workspaceId",void 0);c.RasterDataSource=z=F.__decorate([t.subclass("esri.layers.support.source.RasterDataSource")],c.RasterDataSource);Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n,y,C,u,t){var z;c.TableDataSource=z=function(L){function x(h){h=L.call(this,h)||this;h.type="table";return h}a._inheritsLoose(x,L);x.prototype.clone=function(){const {workspaceId:h,gdbVersion:H,dataSourceName:b}=this;return new z({workspaceId:h,gdbVersion:H,dataSourceName:b})};return x}(M.JSONSupport);F.__decorate([u.enumeration({table:"table"})],c.TableDataSource.prototype,"type",void 0);F.__decorate([p.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"workspaceId",
void 0);F.__decorate([p.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"gdbVersion",void 0);F.__decorate([p.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"dataSourceName",void 0);c.TableDataSource=z=F.__decorate([t.subclass("esri.layers.support.source.TableDataSource")],c.TableDataSource);Object.defineProperty(c,"__esModule",{value:!0})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(c,a,F,M,p,n,y,C,u,t){var z;F=new M.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});p=z=function(L){function x(h){h=L.call(this,h)||this;h.extent=null;h.mode="view";h.originPosition="upper-left";h.tolerance=1;return h}c._inheritsLoose(x,L);x.prototype.clone=function(){return new z(n.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return x}(p.JSONSupport);a.__decorate([y.property({type:t,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],p.prototype,"extent",void 0);a.__decorate([y.property({type:["view","edit"],json:{write:!0}})],p.prototype,"mode",void 0);a.__decorate([y.property({type:String,json:{read:F.read,write:F.write}})],p.prototype,"originPosition",void 0);a.__decorate([y.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],p.prototype,"tolerance",void 0);return p=z=a.__decorate([u.subclass("esri.rest.support.QuantizationParameters")],p)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(c,a,F,M,p,n,y,C,u){var t;F=new F.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});M=t=function(z){function L(h){h=z.call(this,h)||this;h.maxPointCount=void 0;h.maxRecordCount=void 0;h.maxVertexCount=void 0;h.onStatisticField=null;h.outStatisticFieldName=null;h.statisticType=null;h.statisticParameters=null;return h}c._inheritsLoose(L,z);var x=
L.prototype;x.writeStatisticParameters=function(h,H){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)H.statisticParameters=p.clone(h)};x.clone=function(){return new t({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:p.clone(this.statisticParameters)})};return L}(M.JSONSupport);
a.__decorate([n.property({type:Number,json:{write:!0}})],M.prototype,"maxPointCount",void 0);a.__decorate([n.property({type:Number,json:{write:!0}})],M.prototype,"maxRecordCount",void 0);a.__decorate([n.property({type:Number,json:{write:!0}})],M.prototype,"maxVertexCount",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],M.prototype,"onStatisticField",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],M.prototype,"outStatisticFieldName",void 0);a.__decorate([n.property({type:String,
json:{read:{source:"statisticType",reader:F.read},write:{target:"statisticType",writer:F.write}}})],M.prototype,"statisticType",void 0);a.__decorate([n.property({type:Object})],M.prototype,"statisticParameters",void 0);a.__decorate([u.writer("statisticParameters")],M.prototype,"writeStatisticParameters",null);return M=t=a.__decorate([C.subclass("esri.rest.support.StatisticDefinition")],M)})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/AsyncSequence ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../rest/support/Query ./PendingFeatureTile".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h,H,b,g,r,B,l,E){const J=C.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");c.FeatureServiceTiledFetcher=function(O){function Q(k){k=O.call(this,k)||this;k.tilesOfInterest=[];k.availability=0;k.pendingTiles=new Map;k.pendingEdits=new p.AsyncSequence;k.pendingEditsAbortController=new AbortController;return k}a._inheritsLoose(Q,O);var f=Q.prototype;f.initialize=function(){this.initializeFetchExtent();this.updatingHandles.add(this,
"configuration",()=>this.refresh());this.updatingHandles.add(this,"tilesOfInterest",(k,m)=>{M.equals(k,m,({id:A},{id:S})=>A===S)||this.process()},1)};f.destroy=function(){this.pendingTiles.forEach(k=>this.deletePendingTile(k));this.pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this.pendingEditsAbortController.abort();this.pendingEditsAbortController=null};f.refresh=function(){this.store.refresh();this.pendingTiles.forEach(k=>this.deletePendingTile(k));this.process()};f.applyEdits=
function(k){var m=this;this.pendingEdits.push(k,function(){var A=a._asyncToGenerator(function*(S){if(0!==S.addedFeatures.length||0!==S.updatedFeatures.length||0!==S.deletedFeatures.length){for(const [,P]of m.pendingTiles)P.reset();S={...S,deletedFeatures:S.deletedFeatures.map(({objectId:P,globalId:I})=>P&&-1!==P?P:m.lookupObjectIdByGlobalId(I))};yield m.updatingHandles.addPromise(m.store.processEdits(S,(P,I)=>m.queryFeaturesById(P,I),m.pendingEditsAbortController.signal));m.processPendingTiles()}});
return function(S){return A.apply(this,arguments)}}())};f.initializeFetchExtent=function(){var k=this;if(this.capabilities.query.supportsExtent){var m=t.createTask(function(){var A=a._asyncToGenerator(function*(S){try{var P;const I=yield B.executeQueryForExtent(k.url,new l({where:"1\x3d1",outSpatialReference:k.spatialReference,cacheHint:k.capabilities.query.supportsCacheHint?!0:void 0}),{query:k.configuration.customParameters,signal:S});k.store.extent=H.fromJSON(null==(P=I.data)?void 0:P.extent)}catch(I){t.throwIfAbortError(I),
J.warn("Failed to fetch data extent",I)}});return function(S){return A.apply(this,arguments)}}());this.updatingHandles.addPromise(m.promise.then(()=>this.process()));this.handles.add(y.makeHandle(()=>m.abort()))}};f.process=function(){this.markTilesNotAlive();this.createPendingTiles();this.deletePendingTiles();this.processPendingTiles()};f.markTilesNotAlive=function(){for(const [,k]of this.pendingTiles)k.alive=!1};f.createPendingTiles=function(){var k=this.collectMissingTilesInfo();this.setAvailability(u.isNone(k)?
1:k.coveredArea/k.fullArea);if(!u.isNone(k))for(const {data:m,resolution:A}of k.missingTiles)(k=this.pendingTiles.get(m.id))?(k.resolution=A,k.alive=!0):this.createPendingTile(m,A)};f.collectMissingTilesInfo=function(){let k=null;for(let m=this.tilesOfInterest.length-1;0<=m;m--){const A=this.store.process(this.tilesOfInterest[m],(S,P)=>this.verifyTileComplexity(S,P));u.isNone(k)?k=A:k.prepend(A)}return k};f.deletePendingTiles=function(){for(const [,k]of this.pendingTiles)k.alive||this.deletePendingTile(k)};
f.processPendingTiles=function(){const k={fetchCount:(m,A)=>this.fetchCount(m,A),fetchFeatures:(m,A,S)=>this.fetchFeatures(m,A,S),finish:(m,A)=>this.finishPendingTile(m,A),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(k))for(const [,m]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(m.data),m.resolution)&&this.updatingHandles.addPromise(m.process(k))};f.verifyTileComplexity=function(k,m){return this.verifyVertexComplexity(k)&&this.verifyFeatureDensity(k,
m)};f.verifyVertexComplexity=function(k){return 1E6>k*this.minimumVerticesPerFeature};f.verifyFeatureDensity=function(k,m){if(u.isNone(this.tileInfo))return!1;m*=this.tileSize;return 1>25/(m*m)*k};f.ensureFetchAllCounts=function(k){let m=!0;for(const [,A]of this.pendingTiles)2>A.state.type&&this.updatingHandles.addPromise(A.process(k)),1>=A.state.type&&(m=!1);return m};f.finishPendingTile=function(k,m){this.store.add(k.data,m);this.deletePendingTile(k);this.updateAvailability()};f.updateAvailability=
function(){const k=this.collectMissingTilesInfo();this.setAvailability(u.isNone(k)?1:k.coveredArea/k.fullArea)};f.setAvailability=function(k){this._set("availability",k)};f.createPendingTile=function(k,m){m=new E.PendingFeatureTile(k,m);this.pendingTiles.set(k.id,m);return m};f.deletePendingTile=function(k){k.reset();this.pendingTiles.delete(k.data.id)};f.fetchCount=function(){var k=a._asyncToGenerator(function*(m,A){return this.store.fetchCount(m.data,this.url,this.createCountQuery(m),{query:this.customParameters,
timeout:6E5,signal:A})});return function(m,A){return k.apply(this,arguments)}}();f.fetchFeatures=function(){var k=a._asyncToGenerator(function*(m,A,S){let P=0,I,q=0,w=A;for(;;){const N=this.createFeaturesQuery(m),X=this.setPagingParameters(N,P,w),{features:ca,exceededTransferLimit:ja}=yield this.queryFeatures(N,S);X&&(P+=u.unwrap(N.num));q+=ca.length;I=I?I.concat(ca):ca;w=A-q;if(!X||!ja||0>=w)return I}});return function(m,A,S){return k.apply(this,arguments)}}();f.filterProperties=function(k){return u.isNone(k)?
{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:k.where||"1\x3d1",timeExtent:k.timeExtent,gdbVersion:k.gdbVersion}};f.lookupObjectIdByGlobalId=function(k){const m=this.globalIdField,A=this.objectIdField;if(u.isNone(m))throw Error("Expected globalIdField to be defined");let S=null;this.store.featureStore.forEach(P=>{if(k===P.attributes[m]){var I;S=null!=(I=P.objectId)?I:P.attributes[A]}});if(u.isNone(S))throw Error(`Expected to find a feature with globalId ${k}`);return S};f.queryFeaturesById=
function(k,m){const A=this.createFeaturesQuery(null);A.objectIds=k;return this.queryFeatures(A,m)};f.queryFeatures=function(k,m){return this.capabilities.query.supportsFormatPBF?this.queryFeaturesPBF(k,m):this.queryFeaturesJSON(k,m)};f.queryFeaturesPBF=function(){var k=a._asyncToGenerator(function*(m,A){const {sourceSpatialReference:S}=this;({data:m}=yield B.executeQueryPBF(this.url,m,new r.OptimizedFeatureSetParserContext({sourceSpatialReference:S}),{query:this.configuration.customParameters,timeout:6E5,
signal:A}));return g.unquantizeOptimizedFeatureSet(m)});return function(m,A){return k.apply(this,arguments)}}();f.queryFeaturesJSON=function(){var k=a._asyncToGenerator(function*(m,A){const {sourceSpatialReference:S}=this;({data:m}=yield B.executeQuery(this.url,m,S,{query:this.configuration.customParameters,timeout:6E5,signal:A}));return g.convertFromFeatureSet(m,this.objectIdField)});return function(m,A){return k.apply(this,arguments)}}();f.createCountQuery=function(k){k=this.createBaseQuery(k);
this.capabilities.query.supportsCacheHint&&(k.cacheHint=!0);return k};f.createFeaturesQuery=function(k){const m=this.createBaseQuery(k);m.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField];m.returnGeometry=!0;u.isSome(k)&&(this.capabilities.query.supportsResultType?m.resultType="tile":this.capabilities.query.supportsCacheHint&&(m.cacheHint=!0));return m};f.createBaseQuery=function(k){k=new l({returnZ:!1,returnM:!1,geometry:u.isSome(this.tileInfo)&&u.isSome(k)?
b.toExtent(k.data.extent,this.tileInfo.spatialReference):void 0});const m=this.configuration.filter;u.isSome(m)&&(k.where=m.where,k.gdbVersion=m.gdbVersion,k.timeExtent=m.timeExtent);k.outSpatialReference=this.spatialReference;return k};f.setPagingParameters=function(k,m,A){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:S,supportsCacheHint:P,tileMaxRecordCount:I,maxRecordCount:q,supportsResultType:w}=this.capabilities.query,N=S?l.MAX_MAX_RECORD_COUNT_FACTOR:
1,X=N*((w||P)&&I?I:q?q:2E3);k.start=m;S?(k.maxRecordCountFactor=Math.min(N,Math.ceil(A/X)),k.num=Math.min(A,k.maxRecordCountFactor*X)):k.num=Math.min(A,X);return!0};a._createClass(Q,[{key:"minimumVerticesPerFeature",get:function(){var k;switch(null==(k=this.store)?void 0:k.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}},{key:"filter",set:function(k){const m=this._get("filter");k=
this.filterProperties(k);JSON.stringify(m)!==JSON.stringify(k)&&this._set("filter",k)}},{key:"customParameters",set:function(k){const m=this._get("customParameters");JSON.stringify(m)!==JSON.stringify(k)&&this._set("customParameters",k)}},{key:"configuration",get:function(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}},{key:"tileInfo",set:function(k){const m=this._get("tileInfo");m===k||u.isSome(k)&&u.isSome(m)&&JSON.stringify(k)===
JSON.stringify(m)||(this._set("tileInfo",k),this.store.tileInfo=k)}},{key:"tileSize",set:function(k){this._get("tileSize")!==k&&this._set("tileSize",k)}},{key:"updating",get:function(){return this.updatingHandles.updating||this.pendingEdits.updating}},{key:"debugInfo",get:function(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map(k=>k.debugInfo),storedTiles:this.store.debugInfo}}}]);return Q}(n.HandleOwner);
F.__decorate([z.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"url",void 0);F.__decorate([z.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);F.__decorate([z.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"globalIdField",void 0);F.__decorate([z.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);F.__decorate([z.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,
"sourceSpatialReference",void 0);F.__decorate([z.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);F.__decorate([z.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"store",void 0);F.__decorate([z.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"minimumVerticesPerFeature",null);F.__decorate([z.property()],c.FeatureServiceTiledFetcher.prototype,"filter",null);F.__decorate([z.property()],c.FeatureServiceTiledFetcher.prototype,
"customParameters",null);F.__decorate([z.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"configuration",null);F.__decorate([z.property()],c.FeatureServiceTiledFetcher.prototype,"tileInfo",null);F.__decorate([z.property()],c.FeatureServiceTiledFetcher.prototype,"tileSize",null);F.__decorate([z.property()],c.FeatureServiceTiledFetcher.prototype,"tilesOfInterest",void 0);F.__decorate([z.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"updating",null);F.__decorate([z.property({readOnly:!0})],
c.FeatureServiceTiledFetcher.prototype,"availability",void 0);c.FeatureServiceTiledFetcher=F.__decorate([h.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],c.FeatureServiceTiledFetcher);Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/AsyncSequence":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n){c.AsyncSequence=function(y){function C(){var t=y.apply(this,arguments)||this;t.updating=!1;t.pending=[];return t}a._inheritsLoose(C,y);var u=C.prototype;u.push=function(t,z){this.pending.push({promise:t,callback:z});1===this.pending.length&&this.process()};u.process=function(){if(this.pending.length){this.updating=!0;var t=this.pending[0];t.promise.then(z=>t.callback(z)).catch(()=>{}).then(()=>{this.pending.shift();this.process()})}else this.updating=!1};return C}(M);F.__decorate([p.property()],
c.AsyncSequence.prototype,"updating",void 0);c.AsyncSequence=F.__decorate([n.subclass("esri.core.AsyncSequence")],c.AsyncSequence);Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ../views/support/WatchUpdatingTracking".split(" "),function(c,a,F,M,p,n,y,C){const u=t=>{t=function(z){function L(){return z.apply(this,
arguments)||this}a._inheritsLoose(L,z);L.prototype.destroy=function(){var x,h;this.destroyed||(null==(x=this._get("handles"))?void 0:x.destroy(),null==(h=this._get("updatingHandles"))?void 0:h.destroy())};a._createClass(L,[{key:"handles",get:function(){return this._get("handles")||new p}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new C.WatchUpdatingTracking}}]);return L}(t);F.__decorate([n.property({readOnly:!0})],t.prototype,"handles",null);F.__decorate([n.property({readOnly:!0})],
t.prototype,"updatingHandles",null);return t=F.__decorate([y.subclass("esri.core.HandleOwner")],t)};c.HandleOwner=function(t){function z(){return t.apply(this,arguments)||this}a._inheritsLoose(z,t);return z}(u(M));c.HandleOwner=F.__decorate([y.subclass("esri.core.HandleOwner")],c.HandleOwner);c.HandleOwnerMixin=u;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/scheduling ../../core/watchUtils ../../core/accessorSupport/get ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L){c.WatchUpdatingTracking=function(x){function h(){var b=x.apply(this,arguments)||this;b.updating=!1;b.handleId=0;b.handles=new p;b.scheduleHandleId=0;b.pendingPromises=new Set;return b}a._inheritsLoose(h,x);var H=h.prototype;H.destroy=function(){this.removeAll();this.handles.destroy()};H.add=function(b,g,r,B=0){const l=0!==(B&1),E=++this.handleId;l||this.installSyncUpdatingWatch(b,g,E);b=0!==(B&2)?u.init(b,g,r,l):b.watch(g,r,l);this.handles.add(b,E);return{remove:()=>
this.handles.remove(E)}};H.addOnCollectionPropertyChange=function(b,g,r,B=0){B=0!==(B&2);const l=++this.handleId;this.handles.add([u.on(b,g,"after-changes",this.createSyncUpdatingCallback()),u.on(b,g,"change",r,B?E=>{r({added:E.items,removed:[],moved:[],target:E})}:void 0)],l);return{remove:()=>{this.handles.remove(l)}}};H.addOnCollectionChange=function(b,g,r=0){r=0!==(r&2);const B=++this.handleId;this.handles.add([b.on("after-changes",this.createSyncUpdatingCallback()),b.on("change",g)],B);r&&g({added:b.items,
removed:[],moved:[],target:b});return{remove:()=>{this.handles.remove(B)}}};H.addPromise=function(b){if(n.isNone(b))return b;const g=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(b)&&(0!==this.pendingPromises.size||this.handles.has(-42)||this._set("updating",!1))}},g);this.pendingPromises.add(b);this._set("updating",!0);const r=()=>this.handles.remove(g);b.then(r,r);return b};H.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();this._set("updating",
!1)};H.installSyncUpdatingWatch=function(b,g,r){var B=this.createSyncUpdatingCallback();B=y.react(()=>t.valueOf(b,g),B,{sync:!0,equals:()=>!1});this.handles.add(B,r);return B};H.createSyncUpdatingCallback=function(){return()=>{this.handles.remove(-42);++this.scheduleHandleId;const b=this.scheduleHandleId;this._get("updating")||this._set("updating",!0);this.handles.add(C.schedule(()=>{b===this.scheduleHandleId&&(this._set("updating",0<this.pendingPromises.size),this.handles.remove(-42))}),-42)}};return h}(M);
F.__decorate([z.property({readOnly:!0})],c.WatchUpdatingTracking.prototype,"updating",void 0);c.WatchUpdatingTracking=F.__decorate([L.subclass("esri.views.support.WatchUpdatingTracking")],c.WatchUpdatingTracking);Object.defineProperty(c,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(c,a,F,M,p,n){const y=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let C=function(){function u(z){this.options=z;this.geometryTypes=y;this._vertexDimension=this._coordinatePtr=0}var t=u.prototype;t.createFeatureResult=function(){return new p};t.prepareFeatures=function(z){this._vertexDimension=2;z.hasZ&&this._vertexDimension++;z.hasM&&this._vertexDimension++};t.finishFeatureResult=function(z){if(z&&z.features&&z.hasZ&&this.options.sourceSpatialReference&&
z.spatialReference&&!F.equals(z.spatialReference,this.options.sourceSpatialReference)&&!z.spatialReference.vcsWkid){var L=a.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),x=a.getMetersPerVerticalUnitForSR(z.spatialReference);L/=x;if(1!==L)for(const h of z.features)if(M.hasGeometry(h))for(z=h.geometry.coords,x=2;x<z.length;x+=3)z[x]*=L}};t.addFeature=function(z,L){z.features.push(L)};t.createFeature=function(){return new M.default};t.createSpatialReference=function(){return{wkid:0}};
t.createGeometry=function(){return new n};t.addField=function(z,L){z.fields.push(L)};t.allocateCoordinates=function(z){z.coords.length=z.lengths.reduce((L,x)=>L+x,0)*this._vertexDimension;this._coordinatePtr=0};t.addCoordinate=function(z,L){z.coords[this._coordinatePtr++]=L};t.addCoordinatePoint=function(z,L){z.coords.push(L)};t.addLength=function(z,L){z.lengths.push(L)};t.addQueryGeometry=function(z,L){z.queryGeometry=L.queryGeometry;z.queryGeometryType=L.queryGeometryType};t.createPointGeometry=
function(){return new n};return u}();c.OPTIMIZED_GEOMETRY_TYPES=y;c.OptimizedFeatureSetParserContext=C;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/rest/query/operations/query":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../layers/support/arcgisLayerUrl ./pbfQueryUtils ./queryZScale ../../../tasks/operations/urlUtils".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z){function L(g,r,B=!1){const l=g.geometry,E=g.toJSON(),J=g.outSpatialReference;let O,Q;if(M.isSome(l)){O=l.spatialReference;Q=l.spatialReference.wkid||JSON.stringify(l.spatialReference);E.geometryType=n.getJsonType(l);if("extent"===l.type)E.geometry=`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`;else if("point"===l.type)E.geometry=`${l.x},${l.y}`;else{const f=l.toJSON();delete f.spatialReference;E.geometry=JSON.stringify(f)}E.inSR=Q}O||(O=J);E.groupByFieldsForStatistics&&
(E.groupByFieldsForStatistics=E.groupByFieldsForStatistics.join(","));E.objectIds&&(E.objectIds=E.objectIds.join(","));E.orderByFields&&(E.orderByFields=E.orderByFields.join(","));!E.outFields||!E.returnDistinctValues&&(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?delete E.outFields:-1!==E.outFields.indexOf("*")?E.outFields="*":E.outFields=E.outFields.join(",");E.outSR?E.outSR=E.outSR.wkid||JSON.stringify(E.outSR):l&&(E.returnGeometry||E.returnCentroid)&&(E.outSR=
E.inSR);E.returnGeometry&&delete E.returnGeometry;E.outStatistics&&(E.outStatistics=JSON.stringify(E.outStatistics));E.pixelSize&&(E.pixelSize=JSON.stringify(E.pixelSize));E.quantizationParameters&&(B&&M.isSome(O)&&M.isSome(g.quantizationParameters)&&M.isSome(g.quantizationParameters.extent)&&O.equals(g.quantizationParameters.extent.spatialReference)&&delete E.quantizationParameters.extent.spatialReference,E.quantizationParameters=JSON.stringify(E.quantizationParameters));E.parameterValues&&(E.parameterValues=
JSON.stringify(E.parameterValues));E.rangeValues&&(E.rangeValues=JSON.stringify(E.rangeValues));E.dynamicDataSource&&(E.layer=JSON.stringify({source:E.dynamicDataSource}),delete E.dynamicDataSource);if(E.timeExtent){const {start:f,end:k}=E.timeExtent;if(null!=f||null!=k)E.time=f===k?f:`${null==f?"null":f},${null==k?"null":k}`;delete E.timeExtent}return E}function x(){x=a._asyncToGenerator(function*(g,r,B,l){g=M.isSome(r.timeExtent)&&r.timeExtent.isEmpty?{data:{features:[]}}:yield b(g,r,"json",l);
t.applyFeatureSetZUnitScaling(r,B,g.data);return g});return x.apply(this,arguments)}function h(){h=a._asyncToGenerator(function*(g,r,B,l){if(M.isSome(r.timeExtent)&&r.timeExtent.isEmpty)return Promise.resolve({data:B.createFeatureResult()});g=yield H(g,r,l);g.data=u.parsePBFFeatureQuery(g.data,B);return g});return h.apply(this,arguments)}function H(g,r,B){return b(g,r,"pbf",B)}function b(g,r,B,l={},E={}){const J="string"===typeof g?p.urlToObject(g):g;g=r.geometry?[r.geometry]:[];l.responseType="pbf"===
B?"array-buffer":"json";return y.normalizeCentralMeridian(g,null,l).then(O=>{O=O&&O[0];M.isSome(O)&&(r=r.clone(),r.geometry=O);O=C.isHostedAgolService(J.path);O=z.mapParameters({...J.query,f:B,...E,...L(r,E,O)});return F(p.join(J.path,"query"),{...l,query:{...O,...l.query}})})}c.executeQuery=function(g,r,B,l){return x.apply(this,arguments)};c.executeQueryForCount=function(g,r,B){return M.isSome(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):b(g,r,"json",B,{returnIdsOnly:!0,
returnCountOnly:!0})};c.executeQueryForExtent=function(g,r,B){return M.isSome(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):b(g,r,"json",B,{returnExtentOnly:!0,returnCountOnly:!0}).then(l=>{const E=l.data;if(E.hasOwnProperty("extent"))return l;if(E.features)throw Error("Layer does not support extent calculation.");if(E.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return l})};c.executeQueryForIds=function(g,r,B){return M.isSome(r.timeExtent)&&
r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):b(g,r,"json",B,{returnIdsOnly:!0})};c.executeQueryPBF=function(g,r,B,l){return h.apply(this,arguments)};c.executeQueryPBFBuffer=H;c.queryToQueryStringParameters=L;c.runQuery=b;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/maybe","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(c,a,F,M){function p(x){x=F.urlToObject(x);x=x.path.match(t)||
x.path.match(z);if(!x)return null;const [,h,H,b,g]=x;x=H.indexOf("/");return{title:y(-1!==x?H.slice(x+1):H),serverType:C[b.toLowerCase()],sublayer:null!=g&&""!==g?parseInt(g,10):null,url:{path:h}}}function n(x){return(x=F.urlToObject(x).path.match(L))?{serviceUrl:x[1],sublayerId:Number(x[2])}:null}function y(x){x=x.replace(/\s*[/_]+\s*/g," ");return x[0].toUpperCase()+x.slice(1)}const C={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",
vectortileserver:"VectorTileServer"},u=Object.values(C),t=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${u.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),z=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${u.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),L=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;c.cleanTitle=y;c.isAGOLUrl=function(x){return x?(new F.Url(F.makeAbsolute(x))).authority.toLowerCase().includes("arcgis.com"):!1};c.isArcGISUrl=function(x){return!!t.test(x)};c.isHostedAgolService=
function(x){if(!x)return!1;x=x.toLowerCase();const h=-1!==x.indexOf(".arcgis.com/");x=-1!==x.indexOf("//services")||-1!==x.indexOf("//tiles")||-1!==x.indexOf("//features");return h&&x};c.isHostedSecuredProxyService=function(x,h){return h&&x&&-1!==x.toLowerCase().indexOf(h.toLowerCase())};c.isServerOrServicesAGOLUrl=function(x){if(!x)return!1;x=(new F.Url(F.makeAbsolute(x))).authority.toLowerCase();return"server.arcgisonline.com"===x||"services.arcgisonline.com"===x};c.isWmsServer=function(x){if(!x)return!1;
var h=x.toLowerCase();x=-1!==h.indexOf("/services/");const H=-1!==h.indexOf("/mapserver/wmsserver"),b=-1!==h.indexOf("/imageserver/wmsserver");h=-1!==h.indexOf("/wmsserver");return x&&(H||b||h)};c.parse=p;c.parseNonStandardSublayerUrl=n;c.sanitizeUrl=function(x,h){return x?F.removeTrailingSlash(F.removeQueryParameters(x,h)):x};c.sanitizeUrlWithLayerId=function(x){let {url:h}=x;if(!h)return{url:h};h=F.removeQueryParameters(h,x.logger);const H=F.urlToObject(h),b=p(H.path);let g;a.isSome(b)?(null!=b.sublayer&&
null==x.layer.layerId&&(g=b.sublayer),h=b.url.path):x.nonStandardUrlAllowed&&(x=n(H.path),a.isSome(x)&&(h=x.serviceUrl,g=x.sublayerId));return{url:F.removeTrailingSlash(h),layerId:g}};c.serverTypes=u;c.titleFromUrlAndName=function(x,h){const H=[];x&&(x=p(x),a.isSome(x)&&x.title&&H.push(x.title));h&&(h=y(h),H.push(h));if(2===H.length){if(-1!==H[0].toLowerCase().indexOf(H[1].toLowerCase()))return H[0];if(-1!==H[1].toLowerCase().indexOf(H[0].toLowerCase()))return H[1]}return H.join(" - ")};c.writeUrlWithLayerId=
function(x,h,H,b,g){M.write(h,b,"url",g);b.url&&null!=x.layerId&&(b.url=F.join(b.url,H,x.layerId.toString()))};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/maybe","../core/urlUtils"],function(c,a,F){function M(x,h){var H=h&&h.url&&h.url.path;x&&H&&(x=F.makeAbsolute(x,H,{preserveProtocolRelative:!0}),h.portalItem&&h.readResourcePaths&&(H=F.makeRelative(x,h.portalItem.itemUrl),z.test(H)&&h.readResourcePaths.push(h.portalItem.resourceFromPath(H).path)));
return u(x,h&&h.portal)}function p(x,h,H=0){if(!x)return x;!F.isAbsolute(x)&&h&&h.blockedRelativeUrls&&h.blockedRelativeUrls.push(x);var b=F.makeAbsolute(x);if(h){var g=h.verifyItemRelativeUrls&&h.verifyItemRelativeUrls.rootPath||h.url&&h.url.path;g&&(g=u(g,h.portal),b=F.makeRelative(u(b,h.portal),g,g),b!==x&&h.verifyItemRelativeUrls&&h.verifyItemRelativeUrls.writtenUrls.push(b))}x=b;b=(b=h&&h.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?F.changeDomain(x,`${b.urlKey}.${b.customBaseUrl}`,b.portalHostname):
x;F.isAbsolute(b)&&(b=F.normalize(b));null!=h&&h.resources&&null!=h&&h.portalItem&&!F.isAbsolute(b)&&!F.isDataProtocol(b)&&0===H&&h.resources.toKeep.push({resource:h.portalItem.resourceFromPath(b)});return b}function n(x,h,H){return M(x,H)}function y(x,h,H,b){x=p(x,b);void 0!==x&&(h[H]=x)}function C(x){x=a.isSome(x)?x.match(t):null;return a.isSome(x)?x[1]:null}function u(x,h){if(!h||h.isPortal||!h.urlKey||!h.customBaseUrl)return x;const H=`${h.urlKey}.${h.customBaseUrl}`;return F.hasSameOrigin(F.appUrl,
`${F.appUrl.scheme}://${H}`)?F.changeDomain(x,h.portalHostname,H):F.changeDomain(x,H,h.portalHostname)}const t=/\/items\/([^\/]+)\/resources\//,z=/^\.\/resources\//,L=Object.freeze({__proto__:null,fromJSON:M,toJSON:p,read:n,write:y,itemIdFromResourceUrl:C});c.fromJSON=M;c.itemIdFromResourceUrl=C;c.persistableUrlUtils=L;c.read=n;c.toJSON=p;c.write=y})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(c,a){c.parsePBFFeatureQuery=function(F,
M){var p=a.parseFeatureQuery(F,M);F=p.queryResult.featureResult;M=p.queryResult.queryGeometry;p=p.queryResult.queryGeometryType;if(F&&F.features&&F.features.length&&F.objectIdFieldName){const n=F.objectIdFieldName;for(const y of F.features)y.attributes&&(y.objectId=y.attributes[n])}F&&(F.queryGeometry=M,F.queryGeometryType=p);return F};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/Error ../../../core/maybe ../../../core/pbf ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet".split(" "),
function(c,a,F,M,p,n){function y(f){return f>=J.length?null:J[f]}function C(f,k,m){for(m=k.createPointGeometry(m);f.next();)switch(f.tag()){case 3:{var A=f.getUInt32();A=f.pos()+A;let S=0;for(;f.pos()<A;)k.addCoordinatePoint(m,f.getSInt64(),S++);break}default:f.skip()}return m}function u(f,k,m){const A=k.createGeometry(m);for(m=2+(m.hasZ?1:0)+(m.hasM?1:0);f.next();)switch(f.tag()){case 2:var S=f.getUInt32();S=f.pos()+S;for(var P=0;f.pos()<S;)k.addLength(A,f.getUInt32(),P++);break;case 3:S=f.getUInt32();
S=f.pos()+S;P=0;for(k.allocateCoordinates(A);f.pos()<S;)k.addCoordinate(A,f.getSInt64(),P),P++,P===m&&(P=0);break;default:f.skip()}return A}function t(f){const k=new p;let m="esriGeometryPoint";for(;f.next();)switch(f.tag()){case 2:var A=f.getUInt32();for(A=f.pos()+A;f.pos()<A;)k.lengths.push(f.getUInt32());break;case 3:A=f.getUInt32();for(A=f.pos()+A;f.pos()<A;)k.coords.push(f.getSInt64());break;case 1:m=n.OPTIMIZED_GEOMETRY_TYPES[f.getEnum()];break;default:f.skip()}return{queryGeometry:k,queryGeometryType:m}}
function z(f){for(;f.next();)switch(f.tag()){case 1:return f.getString();case 2:return f.getFloat();case 3:return f.getDouble();case 4:return f.getSInt32();case 5:return f.getUInt32();case 6:return f.getInt64();case 7:return f.getUInt64();case 8:return f.getSInt64();case 9:return f.getBool();default:return f.skip(),null}return null}function L(f){const k={type:y(0)};for(;f.next();)switch(f.tag()){case 1:k.name=f.getString();break;case 2:k.type=y(f.getEnum());break;case 3:k.alias=f.getString();break;
case 4:var m=f.getEnum();m=m>=O.length?null:O[m];k.sqlType=m;break;case 5:f.skip();break;case 6:k.defaultValue=f.getString();break;default:f.skip()}return k}function x(f){const k={};for(;f.next();)switch(f.tag()){case 1:k.name=f.getString();break;case 2:k.isSystemMaintained=f.getBool();break;default:f.skip()}return k}function h(f,k,m,A){const S=k.createFeature(m);let P=0;for(;f.next();)switch(f.tag()){case 1:{const I=A[P++].name;S.attributes[I]=f.processMessage(z);break}case 2:S.geometry=f.processMessageWithArgs(u,
k,m);break;case 4:S.centroid=f.processMessageWithArgs(C,k,m);break;default:f.skip()}return S}function H(f){const k=[1,1,1,1];for(;f.next();)switch(f.tag()){case 1:k[0]=f.getDouble();break;case 2:k[1]=f.getDouble();break;case 4:k[2]=f.getDouble();break;case 3:k[3]=f.getDouble();break;default:f.skip()}return k}function b(f){const k=[0,0,0,0];for(;f.next();)switch(f.tag()){case 1:k[0]=f.getDouble();break;case 2:k[1]=f.getDouble();break;case 4:k[2]=f.getDouble();break;case 3:k[3]=f.getDouble();break;
default:f.skip()}return k}function g(f){const k={originPosition:0>=Q.length?null:Q[0]};for(;f.next();)switch(f.tag()){case 1:var m=f.getEnum();k.originPosition=m>=Q.length?null:Q[m];break;case 2:k.scale=f.processMessage(H);break;case 3:k.translate=f.processMessage(b);break;default:f.skip()}return k}function r(f){const k={};for(;f.next();)switch(f.tag()){case 1:k.shapeAreaFieldName=f.getString();break;case 2:k.shapeLengthFieldName=f.getString();break;case 3:k.units=f.getString();break;default:f.skip()}return k}
function B(f,k){for(k=k.createSpatialReference();f.next();)switch(f.tag()){case 1:k.wkid=f.getUInt32();break;case 5:k.wkt=f.getString();break;case 2:k.latestWkid=f.getUInt32();break;case 3:k.vcsWkid=f.getUInt32();break;case 4:k.latestVcsWkid=f.getUInt32();break;default:f.skip()}return k}function l(f,k){const m=k.createFeatureResult();m.geometryType=0>=k.geometryTypes.length?null:k.geometryTypes[0];let A=!1;for(;f.next();)switch(f.tag()){case 1:m.objectIdFieldName=f.getString();break;case 3:m.globalIdFieldName=
f.getString();break;case 4:m.geohashFieldName=f.getString();break;case 5:m.geometryProperties=f.processMessage(r);break;case 7:var S=f.getEnum();m.geometryType=S>=k.geometryTypes.length?null:k.geometryTypes[S];break;case 8:m.spatialReference=f.processMessageWithArgs(B,k);break;case 10:m.hasZ=f.getBool();break;case 11:m.hasM=f.getBool();break;case 12:m.transform=f.processMessage(g);break;case 9:S=f.getBool();m.exceededTransferLimit=S;break;case 13:k.addField(m,f.processMessage(L));break;case 15:A||
(k.prepareFeatures(m),A=!0);k.addFeature(m,f.processMessageWithArgs(h,k,m,m.fields));break;case 2:m.uniqueIdField=f.processMessage(x);break;default:f.skip()}k.finishFeatureResult(m);return m}function E(f,k){const m={};let A=null;for(;f.next();)switch(f.tag()){case 4:A=f.processMessageWithArgs(t);break;case 1:m.featureResult=f.processMessageWithArgs(l,k);break;default:f.skip()}F.isSome(A)&&m.featureResult&&k.addQueryGeometry(m,A);return m}const J="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
O="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),Q=["upperLeft","lowerLeft"];c.parseFeatureQuery=function(f,k){try{const m=new M(new Uint8Array(f),new DataView(f));
for(f={};m.next();)switch(m.tag()){case 2:f.queryResult=m.processMessageWithArgs(E,k);break;default:m.skip()}return f}catch(m){throw new a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:m});}};c.parseFieldType=y;c.parseTransform=g;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","../../../core/maybe","../../../geometry/support/zscale"],function(c,a,F){c.applyFeatureSetZUnitScaling=function(M,p,n){if(n&&
n.features&&n.hasZ&&(M=F.getGeometryZScaler(n.geometryType,p,M.outSpatialReference),!a.isNone(M)))for(const y of n.features)M(y.geometry)};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/tasks/operations/urlUtils":function(){define(["exports"],function(c){function a(F){const M={};for(const p in F){if("declaredClass"===p)continue;const n=F[p];if(null!=n&&"function"!==typeof n)if(Array.isArray(n)){M[p]=[];for(let y=0;y<n.length;y++)M[p][y]=a(n[y])}else"object"===typeof n?n.toJSON&&(M[p]=JSON.stringify(n)):
M[p]=n}return M}c.mapParameters=a;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/asyncUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../geometry/support/aaBoundingRect".split(" "),function(c,a,F,M,p,n){let y=function(){function u(z,L){this.data=z;this.resolution=L;this.state={type:0};
this.alive=!0}var t=u.prototype;t.process=function(z){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,z),this.state.task.promise.then(z.resume,z.resume);case 2:return this.state=this.gotoFetchFeatures(this.state,z),this.state.task.promise.then(z.resume,z.resume);case 4:this.state=this.goToDone(this.state,z)}return null};t.gotoFetchCount=function(z,L){var x=this;return{type:1,previous:z,task:p.createTask(function(){var h=a._asyncToGenerator(function*(H){H=yield F.resultOrAbort(L.fetchCount(x,
H));1===x.state.type&&(x.state=x.gotoFetchedCount(x.state,H.ok?H.value:Infinity))});return function(H){return h.apply(this,arguments)}}())}};t.gotoFetchedCount=function(z,L){return{type:2,featureCount:L,previous:z}};t.gotoFetchFeatures=function(z,L){var x=this;return{type:3,previous:z,task:p.createTask(function(){var h=a._asyncToGenerator(function*(H){H=yield F.resultOrAbort(L.fetchFeatures(x,z.featureCount,H));3===x.state.type&&(x.state=x.gotoFetchedFeatures(x.state,H.ok?H.value:[]))});return function(H){return h.apply(this,
arguments)}}())}};t.gotoFetchedFeatures=function(z,L){return{type:4,previous:z,features:L}};t.goToDone=function(z,L){L.finish(this,z.features);return{type:5,previous:z}};t.reset=function(){const z=this.state;this.state={type:0};switch(z.type){case 1:case 3:z.task.abort()}};t.intersects=function(z){if(M.isNone(z)||!this.data.extent)return!0;n.fromExtent(z,C);return n.intersects(this.data.extent,C)};a._createClass(u,[{key:"debugInfo",get:function(){return{data:this.data,featureCount:this.featureCount,
state:this.stateToString}}},{key:"featureCount",get:function(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}},{key:"stateToString",get:function(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}}]);
return u}();const C=n.create();c.PendingFeatureTile=y;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/asyncUtils":function(){define(["exports","./maybe","./promiseUtils"],function(c,a,F){c.assertResult=function(M){if(!0===M.ok)return M.value;throw M.error;};c.forEach=function(M,p,n){return F.eachAlways(M.map((y,C)=>p.apply(n,[y,C])))};c.map=function(M,p,n){return F.eachAlways(M.map((y,C)=>p.apply(n,[y,C]))).then(y=>y.map(C=>C.value))};c.result=function(M){return a.isNone(M)?F.resolve():
M.then(p=>({ok:!0,value:p})).catch(p=>({ok:!1,error:p}))};c.resultOrAbort=function(M){return M.then(p=>({ok:!0,value:p})).catch(p=>{F.throwIfAbortError(p);return{ok:!1,error:p}})};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/byteSizeEstimations ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/BoundsStore ../../../../../rest/query/operations/query ./FeatureServiceTileCache".split(" "),
function(c,a,F,M,p,n,y,C,u,t,z,L,x,h,H,b){function g(J){return J.reduce((O,Q)=>{var f=Q.geometry;if(n.isNone(f))f=0;else{var k=p.estimateFixedArraySize(f.lengths,4);f=32+p.estimateFixedArraySize(f.coords,8)+k}Q=32+f+p.estimateAttributesObjectSize(Q.attributes);return O+Q},0)}c.FeatureServiceTileStore=function(J){function O(f){f=J.call(this,f)||this;f.tileInfo=null;f.extent=null;f.maximumByteSize=10485760;f.tileBounds=new h.BoundsStore;f.tiles=new b.FeatureServiceTileCache;f.refCounts=new Map;f.tileFeatureCounts=
new Map;f.tmpBoundingRect=L.create();return f}a._inheritsLoose(O,J);var Q=O.prototype;Q.add=function(f,k){const m=[];for(const A of k)0===this.referenceFeature(A.objectId)&&m.push(A);this.addTileStorage(f,new Set(k.map(({objectId:A})=>A)),g(k));this.featureStore.addMany(m);this.tiles.applyByteSizeLimit(this.maximumByteSize,A=>this.removeTileStorage(A))};Q.destroy=function(){this.clear();this.tileFeatureCounts.clear()};Q.clear=function(){this.featureStore.clear();this.tileBounds.clear();this.tiles.clear();
this.refCounts.clear()};Q.refresh=function(){this.clear();this.tileFeatureCounts.clear()};Q.processEdits=function(f,k,m){this.processEditsDelete(f.deletedFeatures.concat(f.updatedFeatures));return this.processEditsRefetch(f.addedFeatures.concat(f.updatedFeatures),k,m)};Q.addTileStorage=function(f,k,m){this.tiles.set(f.id,new r(f,k,m));this.tileBounds.set(f.id,f.extent);this.tileFeatureCounts.set(f.id,k.size)};Q.remove=function({id:f}){(f=this.tiles.get(f))&&this.removeTileStorage(f)};Q.removeTileStorage=
function(f){const k=[];for(const m of f.objectIds)1===this.unreferenceFeature(m)&&k.push(m);this.featureStore.removeManyById(k);f=f.data.id;this.tiles.delete(f);this.tileBounds.delete(f)};Q.processEditsDelete=function(f){this.featureStore.removeManyById(f);for(const [,k]of this.tiles){for(const m of f)k.objectIds.delete(m);this.tileFeatureCounts.set(k.data.id,k.objectIds.size)}for(const k of f)this.refCounts.delete(k)};Q.processEditsRefetch=function(){var f=a._asyncToGenerator(function*(k,m,A){k=
(yield m(k,A)).features;const {hasZ:S,hasM:P}=this.featureStore;for(const I of k)k=x.getBoundsOptimizedGeometry(this.tmpBoundingRect,I.geometry,S,P),n.isNone(k)||this.tileBounds.forEachInBounds(k,q=>{q=this.tiles.get(q);this.featureStore.add(I);q.objectIds.has(I.objectId)||(q.objectIds.add(I.objectId),this.referenceFeature(I.objectId),this.tileFeatureCounts.set(q.data.id,q.objectIds.size))})});return function(k,m,A){return f.apply(this,arguments)}}();Q.process=function(f,k=()=>!0){if(n.isNone(this.tileInfo)||
!f.extent||n.isSome(this.extent)&&!L.intersects(L.fromExtent(this.extent,this.tmpBoundingRect),f.extent)||this.tiles.has(f.id))return new l(f);const m=this.createTileTree(f,this.tileInfo);this.simplify(m,k,null,0,1);return this.collectMissingTiles(f,m,this.tileInfo)};Q.getFeatureCount=function(f){f=this.tileFeatureCounts.get(f.id);return null!=f?f:0};Q.fetchCount=function(){var f=a._asyncToGenerator(function*(k,m,A,S){const P=this.tileFeatureCounts.get(k.id);if(null!=P)return P;m=yield H.executeQueryForCount(m,
A,S);this.tileFeatureCounts.set(k.id,m.data.count);return m.data.count});return function(k,m,A,S){return f.apply(this,arguments)}}();Q.createTileTree=function(f,k){const m=new B(f.level,f.row,f.col);k.updateTileInfo(m,1);this.tileBounds.forEachInBounds(f.extent,A=>{A=this.tiles.get(A).data;this.tilesAreRelated(f,A)&&this.populateChildren(m,A,k,this.tileFeatureCounts.get(A.id)||0)});return m};Q.tilesAreRelated=function(f,k){if(!f||!k)return!1;if(f.level===k.level)return f.row===k.row&&f.col===k.col;
const m=f.level<k.level,A=m?f:k;f=m?k:f;k=1<<f.level-A.level;return Math.floor(f.row/k)===A.row&&Math.floor(f.col/k)===A.col};Q.populateChildren=function(f,k,m,A){var S=k.level-f.level-1;if(0>S)f.isLeaf=!0;else{var P=k.row>>S,I=k.col>>S;S=(P-(f.row<<1)<<1)+(I-(f.col<<1));var q=f.children[S];n.isSome(q)?this.populateChildren(q,k,m,A):(P=new B(f.level+1,P,I),m.updateTileInfo(P,1),f.children[S]=P,this.populateChildren(P,k,m,A))}};Q.simplify=function(f,k,m,A,S){const P=S*S;if(f.isLeaf)return k(this.getFeatureCount(f),
S)?0:(this.remove(f),n.isSome(m)&&(m.children[A]=null),P);S/=2;const I=S*S;let q=0;for(let w=0;w<f.children.length;w++){const N=f.children[w];q+=n.isSome(N)?this.simplify(N,k,f,w,S):I}0===q?this.mergeChildren(f):.18751>1-q/P&&(this.purge(f),n.isSome(m)&&(m.children[A]=null),q=P);return q};Q.mergeChildren=function(f){const k=new Set;let m=0;this.forEachLeaf(f,A=>{const S=this.tiles.get(A.id);if(S){m+=S.byteSize;for(const P of S.objectIds)k.has(P)||(k.add(P),this.referenceFeature(P));this.remove(A)}});
this.addTileStorage(f,k,m);f.isLeaf=!0;f.children[0]=f.children[1]=f.children[2]=f.children[3]=null;this.tileFeatureCounts.set(f.id,k.size)};Q.forEachLeaf=function(f,k){for(const m of f.children)n.isNone(m)||(m.isLeaf?k(m):this.forEachLeaf(m,k))};Q.purge=function(f){if(!n.isNone(f))if(f.isLeaf)this.remove(f);else for(let k=0;k<f.children.length;k++)this.purge(f.children[k]),f.children[k]=null};Q.collectMissingTiles=function(f,k,m){f=new E(m,f,this.extent);this.collectMissingTilesRecurse(k,f,1);return f.info};
Q.collectMissingTilesRecurse=function(f,k,m){if(!f.isLeaf)if(f.hasChildren){m/=2;for(let A=0;A<f.children.length;A++){const S=f.children[A];n.isNone(S)?k.addMissing(f.level+1,(f.row<<1)+((A&2)>>1),(f.col<<1)+(A&1),m):this.collectMissingTilesRecurse(S,k,m)}}else k.addMissing(f.level,f.row,f.col,m)};Q.referenceFeature=function(f){const k=(this.refCounts.get(f)||0)+1;this.refCounts.set(f,k);return 1===k?0:2};Q.unreferenceFeature=function(f){const k=(this.refCounts.get(f)||0)-1;if(0===k)return this.refCounts.delete(f),
1;0<k&&this.refCounts.set(f,k);return 2};a._createClass(O,[{key:"debugInfo",get:function(){return Array.from(this.tiles.values()).map(({data:f})=>({data:f,featureCount:this.tileFeatureCounts.get(f.id)||0}))}},{key:"test",get:function(){return{tiles:Array.from(this.tiles.values()).map(f=>`${f.data.id}:[${Array.from(f.objectIds)}]`),featureReferences:Array.from(this.refCounts.keys()).map(f=>`${f}:${this.refCounts.get(f)}`)}}}]);return O}(M);F.__decorate([y.property({constructOnly:!0})],c.FeatureServiceTileStore.prototype,
"featureStore",void 0);F.__decorate([y.property()],c.FeatureServiceTileStore.prototype,"tileInfo",void 0);F.__decorate([y.property()],c.FeatureServiceTileStore.prototype,"extent",void 0);F.__decorate([y.property()],c.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);c.FeatureServiceTileStore=F.__decorate([z.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],c.FeatureServiceTileStore);let r=function(J,O,Q){this.data=J;this.objectIds=O;
this.byteSize=Q},B=function(){function J(O,Q,f){this.level=O;this.row=Q;this.col=f;this.isLeaf=!1;this.extent=null;this.children=[null,null,null,null]}a._createClass(J,[{key:"hasChildren",get:function(){return!this.isLeaf&&(n.isSome(this.children[0])||n.isSome(this.children[1])||n.isSome(this.children[2])||n.isSome(this.children[3]))}}]);return J}(),l=function(){function J(O,Q=[]){this.missingTiles=Q;this.coveredArea=this.fullArea=0;this.coveredArea=this.fullArea=L.area(O.extent)}J.prototype.prepend=
function(O){this.missingTiles=O.missingTiles.concat(this.missingTiles);this.coveredArea+=O.coveredArea;this.fullArea+=O.fullArea};return J}(),E=function(){function J(O,Q,f){this.tileInfo=O;this.extent=null;this.info=new l(Q);n.isSome(f)&&(this.extent=L.fromExtent(f))}J.prototype.addMissing=function(O,Q,f,k){O={id:null,level:O,row:Q,col:f};this.tileInfo.updateTileInfo(O,1);!n.isSome(O.extent)||n.isSome(this.extent)&&!L.intersects(this.extent,O.extent)||(this.info.missingTiles.push({data:O,resolution:k}),
this.info.coveredArea-=L.area(O.extent))};return J}();c.ProcessResult=l;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(c){function a(F){return 32+F.length}c.estimateAttributesObjectSize=function(F){if(!F)return 0;let M=32;for(const p in F)if(F.hasOwnProperty(p)){const n=F[p];switch(typeof n){case "string":M+=a(n);break;case "number":M+=16;break;case "boolean":M+=4}}return M};c.estimateFixedArraySize=function(F,M){return 32+
F.length*M};c.estimateNumberByteSize=function(){return 16};c.estimateStringByteSize=a;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports"],function(c){let a=function(F){function M(){this._store=new Map;this._byteSize=0}var p=M.prototype;p.set=function(n,y){this.delete(n);this._store.set(n,y);this._byteSize+=y.byteSize};p.delete=function(n){const y=this._store.get(n);return this._store.delete(n)?
(this._byteSize-=y.byteSize,!0):!1};p.get=function(n){this.used(n);return this._store.get(n)};p.has=function(n){this.used(n);return this._store.has(n)};p.clear=function(){this._store.clear()};p.applyByteSizeLimit=function(n,y){for(const [C,u]of this._store){if(this._byteSize<=n)break;this.delete(C);y(u)}};p.values=function(){return this._store.values()};p[F]=function(){return this._store[Symbol.iterator]()};p.used=function(n){const y=this._store.get(n);y&&(this._store.delete(n),this._store.set(n,
y))};return M}(Symbol.iterator);c.FeatureServiceTileCache=a;Object.defineProperty(c,"__esModule",{value:!0})})},"*noref":1}});
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/watchUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/TileInfo ../../../../../layers/support/TimeInfo ../../../../../rest/support/Query ./FeatureServiceTiledFetcher ./FeatureServiceTileStore ../../../../support/WatchUpdatingTracking".split(" "),function(c,
a,F,M,p,n,y,C,u,t,z,L,x,h,H,b,g,r,B,l,E,J){c.FeatureServiceSnappingSourceWorker=function(O){function Q(){var k=O.apply(this,arguments)||this;k.isInitializing=!0;k.whenSetup=y.createDeferred();k.handles=new p;k.updatingHandles=new J.WatchUpdatingTracking;k.pendingApplyEdits=new Map;return k}a._inheritsLoose(Q,O);var f=Q.prototype;f.destroy=function(){this.featureFetcher.destroy();this.queryEngine.destroy();this.featureStore.clear();this.handles.destroy()};f.setup=function(){var k=a._asyncToGenerator(function*(m){const {geometryType:A,
objectIdField:S,timeInfo:P,fields:I}=m.serviceInfo;this.featureStore=new H({...m.serviceInfo,hasZ:!1,hasM:!1});this.queryEngine=new b.default({spatialReference:m.spatialReference,featureStore:this.featureStore,geometryType:A,fields:I,hasZ:!1,hasM:!1,objectIdField:S,timeInfo:P?r.fromJSON(P):null});this.featureFetcher=new l.FeatureServiceTiledFetcher({store:new E.FeatureServiceTileStore({featureStore:this.featureStore}),url:m.serviceInfo.url,objectIdField:m.serviceInfo.objectIdField,globalIdField:m.serviceInfo.globalIdField,
capabilities:m.serviceInfo.capabilities,spatialReference:h.fromJSON(m.spatialReference),sourceSpatialReference:h.fromJSON(m.serviceInfo.spatialReference)});this.handles.add([this.featureFetcher.watch("availability",q=>this.emit("notify-availability",{availability:q}),!0),this.watch("updating",()=>this.notifyUpdating())]);this.whenSetup.resolve();this.isInitializing=!1;return this.configure(m.configuration)});return function(m){return k.apply(this,arguments)}}();f.configure=function(){var k=a._asyncToGenerator(function*(m){yield this.updatingHandles.addPromise(this.whenSetup.promise);
this.updateFeatureFetcherConfiguration(m);return{result:{}}});return function(m){return k.apply(this,arguments)}}();f.fetchCandidates=function(){var k=a._asyncToGenerator(function*(m,A){yield this.whenSetup.promise;y.throwIfAborted(A);return{result:yield this.queryEngine.executeQueryForSnapping({point:m.point,distance:m.distance,types:m.types,query:n.isSome(m.filter)?m.filter:{where:"1\x3d1"}},n.isSome(A)?A.signal:null)}});return function(m,A){return k.apply(this,arguments)}}();f.updateTiles=function(){var k=
a._asyncToGenerator(function*(m,A){yield this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(A);this.featureFetcher.tileSize=m.tileSize;this.featureFetcher.tilesOfInterest=m.tiles;this.featureFetcher.tileInfo=n.isSome(m.tileInfo)?g.fromJSON(m.tileInfo):null;return{result:{}}});return function(m,A){return k.apply(this,arguments)}}();f.refresh=function(){var k=a._asyncToGenerator(function*(m,A){yield this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(A);this.featureFetcher.refresh();
return{result:{}}});return function(m,A){return k.apply(this,arguments)}}();f.whenNotUpdating=function(){var k=a._asyncToGenerator(function*(m,A){yield this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(A);yield y.whenOrAbort(C.whenNotOnce(this,"updating"),A);return{result:{}}});return function(m,A){return k.apply(this,arguments)}}();f.getDebugInfo=function(){var k=a._asyncToGenerator(function*(m,A){y.throwIfAborted(A);return{result:this.featureFetcher.debugInfo}});return function(m,
A){return k.apply(this,arguments)}}();f.beginApplyEdits=function(){var k=a._asyncToGenerator(function*(m,A){this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(A);A=y.createDeferred();this.pendingApplyEdits.set(m.id,A);this.featureFetcher.applyEdits(A.promise);this.updatingHandles.addPromise(A.promise);return{result:{}}});return function(m,A){return k.apply(this,arguments)}}();f.endApplyEdits=function(){var k=a._asyncToGenerator(function*(m,A){const S=this.pendingApplyEdits.get(m.id);
S&&S.resolve(m.edits);y.throwIfAborted(A);return{result:{}}});return function(m,A){return k.apply(this,arguments)}}();f.updateFeatureFetcherConfiguration=function(k){this.featureFetcher.filter=n.isSome(k.filter)?B.fromJSON(k.filter):null;this.featureFetcher.customParameters=k.customParameters};f.notifyUpdating=function(){this.emit("notify-updating",{updating:this.updating})};a._createClass(Q,[{key:"updating",get:function(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}}]);
return Q}(M.EventedAccessor);F.__decorate([u.property({readOnly:!0})],c.FeatureServiceSnappingSourceWorker.prototype,"updating",null);F.__decorate([u.property()],c.FeatureServiceSnappingSourceWorker.prototype,"isInitializing",void 0);c.FeatureServiceSnappingSourceWorker=F.__decorate([x.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],c.FeatureServiceSnappingSourceWorker);c.default=function(){return new c.FeatureServiceSnappingSourceWorker};
Object.defineProperty(c,"__esModule",{value:!0})});