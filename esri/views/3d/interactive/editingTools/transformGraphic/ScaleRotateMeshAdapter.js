// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/axisAngleDegrees ./undoRecords".split(" "),
function(b,q,d,r,h,t,k,e,w,x,y,u,l,v){b.ScaleRotateMeshAdapter=function(m){function g(a){a=m.call(this,a)||this;a.angle=0;a.scale=1;a.initialAngle=0;a.previousAngle=0;a.previousScale=1;return a}q._inheritsLoose(g,m);var f=g.prototype;f.initialize=function(){this.restart()};f.restart=function(){this.handles.remove("scale-heading-update-key");const a=this.geometry.transform;this.scale=1;if(t.isSome(a)){const c=l.axis(a.rotation)[2];.999999<Math.abs(c)&&(this.angle=h.deg2rad(l.angle(a.rotation))*Math.sign(c))}this.previousAngle=
this.initialAngle=this.angle;this.previousScale=this.scale;this.handles.add(k.react(()=>({angle:this.angle,scale:this.scale}),c=>this.update(c),k.sync),"scale-heading-update-key")};f.cancel=function(){this.scale=1;this.angle=this.initialAngle};f.createUndoRecord=function(){return v.createGraphicGeometryUndoRecord(this.graphic)};f.update=function({scale:a,angle:c}){const n=this.geometry.anchor,p=1===this.viewingMode;a!==this.previousScale&&(this.geometry.scale(a/this.previousScale,{origin:n,geographic:p}),
this.previousScale=a,this.graphic.notifyGeometryChanged());c!==this.previousAngle&&(this.geometry.rotate(0,0,h.rad2deg(c-this.previousAngle),{origin:n,geographic:p}),this.previousAngle=c,this.graphic.notifyGeometryChanged())};return g}(r.HandleOwner);d.__decorate([e.property({constructOnly:!0})],b.ScaleRotateMeshAdapter.prototype,"graphic",void 0);d.__decorate([e.property({constructOnly:!0})],b.ScaleRotateMeshAdapter.prototype,"geometry",void 0);d.__decorate([e.property({constructOnly:!0})],b.ScaleRotateMeshAdapter.prototype,
"viewingMode",void 0);d.__decorate([e.property()],b.ScaleRotateMeshAdapter.prototype,"angle",void 0);d.__decorate([e.property()],b.ScaleRotateMeshAdapter.prototype,"scale",void 0);b.ScaleRotateMeshAdapter=d.__decorate([u.subclass("esri.views.3d.interactive.editingTools.transformGraphic.ScaleRotateMeshAdapter")],b.ScaleRotateMeshAdapter);Object.defineProperty(b,"__esModule",{value:!0})});