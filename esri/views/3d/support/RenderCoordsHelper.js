// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/unitUtils ../../../chunks/mat4 ../../../chunks/vec3 ../../../geometry/projection ../../../geometry/SpatialReference ../../../geometry/support/coordinateSystem ../../../geometry/support/plane ../../../geometry/support/vectorStacks ../../../layers/graphics/dehydratedFeatureUtils ../../support/spatialReferenceSupport".split(" "),function(l,r,t,m,u,n,h,v,d,w,k,p,x){function q(e){if(x.isSpatialReferenceSupported(e,
1))return 1;e=d.renderSRFromViewSR(!1,e);return m.getMetersPerUnitForSR(e)}let y=function(){function e(b,a,c,g){this.viewingMode=b;this.spatialReference=a;this.unitInMeters=c;this.coordinateSystem=g;this._coordinateSystem=d.create(g)}var f=e.prototype;f.getAltitude=function(b){return d.altitudeAt(this.coordinateSystem,b)};f.setAltitude=function(b,a,c=b){return d.setAltitudeAt(this.coordinateSystem,c,a,b)};f.setAltitudeOfTransformation=function(b,a){d.setAltitudeOfTransformation(this.coordinateSystem,
a,b,a)};f.worldUpAtPosition=function(b,a){return d.normalAt(this.coordinateSystem,b,a)};f.worldBasisAtPosition=function(b,a,c){return d.axisAt(this.coordinateSystem,b,a,c)};f.basisMatrixAtPosition=function(b,a){const c=this.worldBasisAtPosition(b,0,k.sv3d.get()),g=this.worldBasisAtPosition(b,1,k.sv3d.get());b=this.worldBasisAtPosition(b,2,k.sv3d.get());u.set(a,c[0],c[1],c[2],0,g[0],g[1],g[2],0,b[0],b[1],b[2],0,0,0,0,1);return a};f.intersectManifoldClosestSilhouette=function(b,a,c){d.elevate(this.coordinateSystem,
a,this._coordinateSystem);d.intersectRayClosestSilhouette(this._coordinateSystem,b,c);return c};f.intersectManifold=function(b,a,c){d.elevate(this.coordinateSystem,a,this._coordinateSystem);a=k.sv3d.get();return d.intersectRay(this._coordinateSystem,b,a)?n.copy(c,a):null};f.intersectInfiniteManifold=function(b,a,c){if(1===this.viewingMode)return this.intersectManifold(b,a,c);d.elevate(this.coordinateSystem,a,this._coordinateSystem);a=this._coordinateSystem.value;const g=k.sv3d.get();return w.intersectRay(a.plane,
b,g)?n.copy(c,g):null};f.toRenderCoords=function(b,a,c){return p.isDehydratedPoint(b)?h.projectPointToVector(b,a,this.spatialReference):h.projectVectorToVector(b,a,c,this.spatialReference)};f.fromRenderCoords=function(b,a,c=null){return p.isDehydratedPoint(a)?(t.isSome(c)&&(a.spatialReference=c),h.projectVectorToDehydratedPoint(b,this.spatialReference,a)):a instanceof v?h.projectVectorToPoint(b,this.spatialReference,a):h.projectVectorToVector(b,this.spatialReference,a,c)?a:null};e.create=function(b,
a){switch(b){case 2:return new e(2,a,m.getMetersPerUnitForSR(a),d.createLocal());case 1:return new e(1,a,1,d.createGlobal(a))}};e.renderUnitScaleFactor=function(b,a){return q(b)/q(a)};r._createClass(e,[{key:"extent",set:function(b){b&&d.setExtent(this.coordinateSystem,b,this.coordinateSystem)}}]);return e}();l.RenderCoordsHelper=y;Object.defineProperty(l,"__esModule",{value:!0})});