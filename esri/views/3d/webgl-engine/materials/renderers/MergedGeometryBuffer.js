// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(l,m){function n(c,d,a){return d<=a?c>=a?c:65536*Math.ceil(Math.max(2*c,a)/65536):c<=2*a?c:65536*Math.ceil(a/65536)}let q=function(){function c(a,e){this._pool=a;this._size=0;this._buffer=a.newBuffer(65536*Math.ceil(e/65536))}var d=c.prototype;d.dispose=function(){this._buffer=this._pool.deleteBuffer(this._buffer);this._size=0};d.release=function(){this.erase(0,this._size);this.dispose()};d.grow=function(a){this._resize(this._size+
a,!0).dispose()};d.alloc=function(a){return this._resize(a,!1)};d._resize=function(a,e){let f;const h=n(this._buffer.length,this._size,a);if(this._buffer.length!==h){const b=this._pool.newBuffer(h);e&&(b.array.set(this._buffer.array.subarray(0,Math.min(this._size,h))),b.vao.vertexBuffers.geometry.setSubData(b.array,0,0,b.array.byteLength));f=this._buffer;this._buffer=b}const p=this._size;this._size=a;return f?{dispose:()=>{f.array.fill(0,0,p);this._pool.deleteBuffer(f)},copy:(b,g,k)=>this._buffer.array.set(f.array.subarray(g,
k),b),hasNewBuffer:!0}:{dispose:()=>{},copy:(b,g,k)=>{b!==g&&this._buffer.array.copyWithin(b,g,k)},hasNewBuffer:!1}};d.erase=function(a,e){this._buffer.array.fill(0,a,e)};m._createClass(c,[{key:"vao",get:function(){return this._buffer.vao}},{key:"array",get:function(){return this._buffer.array}},{key:"size",get:function(){return this._size}}]);return c}();l.MergedGeometryBuffer=q;Object.defineProperty(l,"__esModule",{value:!0})});