// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../lib/AnimationTimer ../lib/GLMaterials ../lib/Material ../lib/OrderIndependentTransparency ./WaterGLMaterial ./WaterTechnique ./internal/DefaultBufferWriter ./internal/MaterialUtil ./internal/waterMaterialUtils".split(" "),function(f,l,m,n,d,p,g,q,h,r,t){d=function(k){function e(a){a=k.call(this,a,t.defaultWaterMaterialParameters)||this;a._techniqueConfig=new q.WaterTechniqueConfiguration;a.animation=new m.AnimationTimer;return a}l._inheritsLoose(e,
k);var c=e.prototype;c.getTechniqueConfig=function(a,b){this._techniqueConfig.output=a;this._techniqueConfig.writeDepth=this.parameters.writeDepth;this._techniqueConfig.receiveShadows=this.parameters.receiveShadows;this._techniqueConfig.slicePlaneEnabled=this.parameters.slicePlaneEnabled;this._techniqueConfig.transparent=this.parameters.transparent;this._techniqueConfig.useSSR=this.parameters.ssrEnabled;this._techniqueConfig.isDraped=this.parameters.isDraped;this._techniqueConfig.transparencyPassType=
b.transparencyPassType;this._techniqueConfig.enableOffset=b.camera.relativeElevation<p.OITPolygonOffsetLimit;this._techniqueConfig.multipassTerrainEnabled=b.multipassTerrainEnabled;this._techniqueConfig.cullAboveGround=b.cullAboveGround;return this._techniqueConfig};c.update=function(a){this.animation.enabled=35E3>Math.sqrt(this.parameters.waveTextureRepeat/this.parameters.waveStrength)*Math.min(a.camera.relativeElevation,a.camera.distance);a=this.animation.advance(a);return this.animation.enabled&&
a};c.intersect=function(a,b,y,u,v,w,x){r.intersectTriangleGeometry(a,b,u,v,w,void 0,x)};c.requiresSlot=function(a,b){switch(n.outputFromPass(b)){case 2:return 21===a;case 0:if(this.parameters.isDraped)return 20===a;break;case 4:return 2===a||20===a}b=2;this.parameters.transparent&&(b=this.parameters.writeDepth?4:7);return a===b};c.createGLMaterial=function(a){if(0===a.output&&this.parameters.isDraped)return a.output=5,new g.WaterGLMaterial(a);switch(a.output){case 0:case 2:case 4:case 7:return new g.WaterGLMaterial(a)}return null};
c.createBufferWriter=function(){return new h.DefaultBufferWriter(h.PositionUVLayout)};return e}(d.Material);f.WaterMaterial=d;Object.defineProperty(f,"__esModule",{value:!0})});