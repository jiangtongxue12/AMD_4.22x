// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Error ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/support/spatialReferenceUtils ../../../layers/VoxelWasmManager ./LayerView3D ../../layers/LayerView".split(" "),function(m,g,b,n,k,c,w,x,p,q,d,r,t){c=function(l){function h(){var a=
l.apply(this,arguments)||this;a.type="voxel-3d";a._wasmLayerId=-1;return a}m._inheritsLoose(h,l);var e=h.prototype;e.initialize=function(){if("local"!==this.view.viewingMode)throw new b("voxel:unsupported-viewingMode","Voxel layers support local viewingMode only.",{});if("webgl2"!==this.view._stage.renderView.renderingContext.webglVersion)throw new b("voxel:unsupported-context","Voxel layers are supported in WebGL2 rendering contexts only.",{});if(!q.equals(this.layer.spatialReference,this.view.spatialReference))throw new b("layerview:spatial-reference-incompatible",
"The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});const a=d.getInstance(),v=a.addLayer(this.view,this).then(f=>{this._wasmLayerId=f;this._suspendedHandle=n.init(this,"suspended",u=>{d.getInstance().setLayerEnabled(this.view,this,!u)})}).catch(f=>{a.removeLayer(this.view,this);this._wasmLayerId=-1;if(-1===f)throw new b("voxel:addLayer-failure","The voxel layer description was invalid.",{});if(-2===f)throw new b("voxel:addLayer-failure","The voxel layer web assembly module failed to download.",
{});});this.addResolvingPromise(v)};e.destroy=function(){d.getInstance().removeLayer(this.view,this);this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null)};e.isUpdating=function(){return 0>this._wasmLayerId?!1:d.getInstance().isUpdating(this.view,this._wasmLayerId)};e.updatingFlagChanged=function(){this.notifyChange("updating")};return h}(r.LayerView3D(t));g.__decorate([k.property()],c.prototype,"layer",void 0);g.__decorate([k.property({readOnly:!0,aliasOf:"layer.parsedUrl.path"})],
c.prototype,"baseUrl",void 0);return c=g.__decorate([p.subclass("esri.views.3d.layers.VoxelLayerView3D")],c)});