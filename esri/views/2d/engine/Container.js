// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/mat3f32","../../../layers/effects/EffectView","./DisplayObject"],function(h,k,l,m,f){f=function(d){function e(){var a=d.apply(this,arguments)||this;a._childrenSet=new Set;a._needsSort=!1;a.children=[];a._effectView=null;return a}k._inheritsLoose(e,d);var c=e.prototype;c.updateTransitionProperties=function(a,b){d.prototype.updateTransitionProperties.call(this,a,b);this._effectView&&(this._effectView.transitionStep(a,b),
this._effectView.transitioning&&this.requestRender())};c.doRender=function(a){a=this.createRenderParams(a);this.renderChildren(a)};c.addChild=function(a){return this.addChildAt(a,this.children.length)};c.addChildAt=function(a,b=this.children.length){if(!a||this.contains(a))return a;this._needsSort=!0;const g=a.parent;g&&g!==this&&g.removeChild(a);b>=this.children.length?this.children.push(a):this.children.splice(b,0,a);this._childrenSet.add(a);a.parent=this;a.stage=this.stage;this!==this.stage&&(a.clips=
this.clips);this.requestRender();return a};c.contains=function(a){return this._childrenSet.has(a)};c.removeAllChildren=function(){this._childrenSet.clear();this._needsSort=!0;for(const a of this.children)this!==this.stage&&(a.clips=null),a.stage=null,a.parent=null;this.children.length=0};c.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.children.indexOf(a)):a};c.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;this._needsSort=!0;a=this.children.splice(a,
1)[0];this._childrenSet.delete(a);this!==this.stage&&(a.clips=null);a.stage=null;a.parent=null;return a};c.sortChildren=function(a){this._needsSort&&(this.children.sort(a),this._needsSort=!1)};c._createTransforms=function(){return{dvs:l.create()}};c.onAttach=function(){d.prototype.onAttach.call(this);const a=this.stage;for(const b of this.children)b.stage=a};c.onDetach=function(){d.prototype.onDetach.call(this);for(const a of this.children)a.stage=null};c.renderChildren=function(a){for(const b of this.children)b.beforeRender(a);
for(const b of this.children)b.processRender(a);for(const b of this.children)b.afterRender(a)};c.createRenderParams=function(a){return{...a,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:a.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}};k._createClass(e,[{key:"blendMode",get:function(){return this._blendMode},set:function(a){this._blendMode=a;this.requestRender()}},{key:"clips",get:function(){return this._clips},set:function(a){this._clips=a;this.children.forEach(b=>
b.clips=a)}},{key:"computedEffects",get:function(){var a,b;return null!=(a=null==(b=this._effectView)?void 0:b.effects)?a:null}},{key:"effect",get:function(){var a,b;return null!=(a=null==(b=this._effectView)?void 0:b.effect)?a:""},set:function(a){if(this._effectView||a)this._effectView||(this._effectView=new m.default),this._effectView.effect=a,this.requestRender()}}]);return e}(f.DisplayObject);h.Container=f;Object.defineProperty(h,"__esModule",{value:!0})});