// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../layers/graphics/featureConversionUtils ../../enums ../../number ../../materialKey/MaterialKey ./templateUtils ./WGLLineTemplate".split(" "),function(v,q,r,w,x,y,m,z){return A=>function(t){function n(...a){a=t.call(this,...a)||this;a.forceLibtess=!1;a._bitset=0;a._lineTemplate=null;a.geometryType=w.WGLGeometryType.FILL;return a}v._inheritsLoose(n,t);var h=n.prototype;h._maybeAddLineTemplate=function(a){this._lineTemplate=
z.fromFillOutline(a)};h._write=function(a,c,e){const d="esriGeometryPoint"===c.geometryType,b=y.FillMaterialKey.load(this._materialKey);a.recordStart(c.getDisplayId(),this._materialKey,this.geometryType,d);this._writeGeometry(a,c,b,e,d);b.outlinedFill&&q.isSome(this._lineTemplate)&&this._lineTemplate.writeGeometry(a,c,e,d);a.recordEnd()};h._writeGeometry=function(a,c,e,d,b){b=this._getGeometry(c,d,b);if(!q.isNone(b))if(d=a.indexCount(),100<b.maxLength||this.forceLibtess||!m.triangulate(a,b)){b=m.triangulateLibtess(a,
b);var f=a.indexCount();d!==f&&this._writeVertices(a,c,b,[b.length/2],e)}else f=a.indexCount(),d!==f&&this._writeVertices(a,c,b.coords,b.lengths,e)};h._writeVertices=function(a,c,e,d,b){var f=c.getDisplayId();f|=this._bitset<<24;let p=0;var g=d.reduce((k,l)=>k+l);a.vertexEnsureSize((b.dotDensity?4:10)*g);for(const k of d){g=p;for(d=k+p;g<d;g++){const l=e[2*g],u=e[2*g+1],B=x.i1616to32(1*l,1*u);a.vertexBounds(l,u,0,0);a.vertexWrite(B);a.vertexWrite(f);b.dotDensity?a.vertexWriteF32(1/Math.abs(c.readGeometryArea())):
(a.vertexWrite(this.fillColor),b.simple||(a.vertexWrite(this.tl),a.vertexWrite(this.br)),a.vertexWrite(this.aux2),a.vertexWrite(this.aux3),b.simple||a.vertexWrite(this._minMaxZoom))}p+=k}};h._getGeometry=function(a,c,e){return(a=c?r.deltaDecodeGeometry(r.convertFromGeometry(c),2):a.readGeometryForDisplay())?m.clipMarshall(a,e?256:8):null};return n}(A)});