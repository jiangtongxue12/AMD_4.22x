// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/BidiText ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../definitions ../../number ../../materialKey/MaterialKey ./util ./WGLBaseTextTemplate ./WGLMeshTemplate".split(" "),function(v,r,f,m,h,n,w,x,p,y,z){return function(t){function g(a,e,c,d,k,q,l,u,A,B,C,D,E,F,G,H,I,J,K=!1,L,M){var b=t.call(this)||this;b._xOffset=f.pt2px(E);b._yOffset=f.pt2px(F);b._decoration=B||"none";b._color=k;b._haloColor=
q;b._haloSize=Math.min(Math.floor(5*f.pt2px(f.toPt(c))),127);b._size=Math.min(Math.round(f.pt2px(e)),127);e=Math.min(Math.round(f.pt2px(d||e)),127);b._referenceSize=Math.round(Math.sqrt(256*e));b._scale=b._size/n.GLYPH_SIZE;b._angle=D;b._justify=m.getJustification(l||"center");b._xAlignD=m.getXAnchorDirection(l||"center");b._yAlignD=m.getYAnchorDirection(u||"baseline");b._baseline="baseline"===(u||"baseline");b._bitset=(1===A?1:0)|(C?1:0)<<1;a=x.MaterialKeyBase.load(a);a.sdf=!0;b._materialKey=a.data;
b._lineWidth=f.pt2px(G)||512;b._lineHeight=H||1;b._textPlacement=I;b._effects=J;b._isCIM=K;b._minMaxZoom=w.i1616to32(Math.round(L*n.MIN_MAX_ZOOM_PRECISION_FACTOR),Math.round(M*n.MIN_MAX_ZOOM_PRECISION_FACTOR));return b}v._inheritsLoose(g,t);g.fromText=function(a,e){const c=new g(a.materialKey,a.font.size,a.haloSize||0,a.font.size,a.color&&h.premultiplyAlphaRGBAArray(a.color)||0,a.haloColor&&h.premultiplyAlphaRGBAArray(a.haloColor)||0,a.horizontalAlignment,a.verticalAlignment,0,a.font.decoration,!1,
a.angle||0,a.xoffset,a.yoffset,a.lineWidth,a.lineHeight,null,null,!1,p.DEFAULT_MIN_ZOOM,p.DEFAULT_MAX_ZOOM),[,d]=r.bidiText(a.text);c.bindTextInfo(e,d);c._vertexBoundsScale=a.maxVVSize?a.maxVVSize/a.font.size:1;return c};g.fromCIMText=function(a,e,c){var d=a.scaleFactor||1;const k=a.size*a.sizeRatio*d,[q,l]=p.getMinMaxZoom(a.scaleInfo,c);c=new g(a.materialKey,k,a.outlineSize*a.sizeRatio,a.referenceSize,h.premultiplyAlphaRGBA(a.color),h.premultiplyAlphaRGBA(a.outlineColor),a.horizontalAlignment,a.verticalAlignment,
a.alignment,a.decoration,a.colorLocked,a.angle,a.offsetX*a.sizeRatio*d,a.offsetY*a.sizeRatio*d,512,1,a.markerPlacement,a.effects,!0,q,l);[,d]=r.bidiText(a.text);c.bindTextInfo(e,d);c._vertexBoundsScale=a.maxVVSize?a.maxVVSize/k:1;return c};return g}(y(z))});