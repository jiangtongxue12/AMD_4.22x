// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../definitions","./WGLBrush"],function(l,m,f,n){return function(k){function g(){return k.apply(this,arguments)||this}l._inheritsLoose(g,k);var e=g.prototype;e.prepareState=function({context:a},b,c){c=c&&-1!==c.indexOf("id");a.setBlendingEnabled(!c);a.setBlendFunctionSeparate(1,771,1,771);a.setColorMask(!0,!0,!0,!0);a.setStencilWriteMask(0);a.setStencilTestEnabled(!0);a.setStencilFunction(514,b.stencilRef,255)};
e.draw=function(a,b,c){var d=this.getGeometryType();b.commit(a);d=b.getGeometry(d);m.isNone(d)||(a.timeline.begin(this.name),a.attributeView.bindTextures(a.context),d.forEachCommand(h=>this.drawGeometry(a,b,h,c)))};e._setSharedUniforms=function(a,b,c){const {displayLevel:d,pixelRatio:h,state:p}=b;a.setUniform1f("u_pixelRatio",h);a.setUniformMatrix3fv("u_dvsMat3",c.transforms.dvs,!1,!0);a.setUniformMatrix3fv("u_displayViewMat3",p.displayViewMat3,!1,!0);a.setUniform1f("u_currentZoom",Math.round(d*f.MIN_MAX_ZOOM_PRECISION_FACTOR));
a.setUniform1i("u_attributeTextureSize",b.attributeView.size);a.setUniform1i("u_attributeData0",f.TEXTURE_BINDING_ATTRIBUTE_DATA_0);a.setUniform1i("u_attributeData1",f.TEXTURE_BINDING_ATTRIBUTE_DATA_1);a.setUniform1i("u_attributeData2",f.TEXTURE_BINDING_ATTRIBUTE_DATA_2);a.setUniform1i("u_attributeData3",f.TEXTURE_BINDING_ATTRIBUTE_DATA_3)};e._setSizeVVUniforms=function(a,b,c,d){a.vvSizeMinMaxValue&&b.setUniform4fv("u_vvSizeMinMaxValue",c.vvSizeMinMaxValue);a.vvSizeScaleStops&&b.setUniform1f("u_vvSizeScaleStopsValue",
c.vvSizeScaleStopsValue);a.vvSizeFieldStops&&(d=c.getSizeVVFieldStops(d.key.level),b.setUniform1fv("u_vvSizeFieldStopsValues",d.values),b.setUniform1fv("u_vvSizeFieldStopsSizes",d.sizes));a.vvSizeUnitValue&&b.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",c.vvSizeUnitValueToPixelsRatio)};e._setColorAndOpacityVVUniforms=function(a,b,c){a.vvColor&&(b.setUniform1fv("u_vvColorValues",c.vvColorValues),b.setUniform4fv("u_vvColors",c.vvColors));a.vvOpacity&&(b.setUniform1fv("u_vvOpacityValues",c.vvOpacityValues),
b.setUniform1fv("u_vvOpacities",c.vvOpacities))};e._setRotationVVUniforms=function(a,b,c){a.vvRotation&&b.setUniform1f("u_vvRotationType","geographic"===c.vvMaterialParameters.vvRotationType?0:1)};return g}(n)});