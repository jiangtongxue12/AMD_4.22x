// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("exports ./componentsUtils ./calcite-color-picker-swatch2 ./dom ./key ./calcite-icon2 ./calcite-input2 ./math ./calcite-button2 ./calcite-loader2 ./calcite-tab2 ./calcite-tab-nav2 ./calcite-tab-title2 ./calcite-tabs2 ./debounce".split(" "),function(P,g,l,A,E,Q,F,ea,fa,ha,ia,ja,ka,la,R){function S(a){const {r:b,g:c,b:d}=a;return`#${b.toString(16).padStart(2,"0")}${c.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toLowerCase()}function G(a){return a&&4===a.length&&T.test(a)||
a&&7===a.length&&U.test(a)}function q(a){a=a.toLowerCase();a.startsWith("#")||(a=`#${a}`);return a&&4===a.length&&T.test(a)?S(V(a)):a}function V(a){if(!G(a))return null;a=a.replace("#","");if(3===a.length){const [d,f,e]=a.split("");var b=parseInt(`${d}${d}`,16),c=parseInt(`${f}${f}`,16);a=parseInt(`${e}${e}`,16);return{r:b,g:c,b:a}}b=parseInt(a.slice(0,2),16);c=parseInt(a.slice(2,4),16);a=parseInt(a.slice(4,6),16);return{r:b,g:c,b:a}}function W(a){if("string"===typeof a){if(a.startsWith("#")){const {length:b}=
a;if(4===b||7===b)return u.HEX;if(5===b||9===b)return u.HEXA}if(a.startsWith("rgba("))return u.RGBA_CSS;if(a.startsWith("rgb("))return u.RGB_CSS;if(a.startsWith("hsl("))return u.HSL_CSS;if(a.startsWith("hsla("))return u.HSLA_CSS}if("object"===typeof a){if(v(a,"r","g","b"))return v(a,"a")?w.RGBA:w.RGB;if(v(a,"h","s","l"))return v(a,"a")?w.HSLA:w.HSL;if(v(a,"h","s","v"))return v(a,"a")?w.HSVA:w.HSV}return null}function v(a,...b){return b.every(c=>c&&a&&`${c}`in a)}function X(a,b){return(null===a||void 0===
a?void 0:a.rgbNumber())===(null===b||void 0===b?void 0:b.rgbNumber())}function Y(){["calcite-color-picker-hex-input","calcite-color-picker-swatch","calcite-icon","calcite-input","calcite-progress"].forEach(a=>{switch(a){case "calcite-color-picker-hex-input":customElements.get(a)||customElements.define(a,J);break;case "calcite-color-picker-swatch":customElements.get(a)||l.defineCustomElement();break;case "calcite-icon":customElements.get(a)||Q.defineCustomElement();break;case "calcite-input":customElements.get(a)||
F.defineCustomElement$1();break;case "calcite-progress":customElements.get(a)||F.defineCustomElement()}})}function ma(a,b,c){var d=!0,f=!0;if("function"!=typeof a)throw new TypeError("Expected a function");R.isObject(c)&&(d="leading"in c?!!c.leading:d,f="trailing"in c?!!c.trailing:f);return R.debounce(a,b,{leading:d,maxWait:b,trailing:f})}function Z(){"calcite-color-picker calcite-button calcite-color-picker-hex-input calcite-color-picker-swatch calcite-icon calcite-input calcite-loader calcite-progress calcite-tab calcite-tab-nav calcite-tab-title calcite-tabs".split(" ").forEach(a=>
{switch(a){case "calcite-color-picker":customElements.get(a)||customElements.define(a,H);break;case "calcite-button":customElements.get(a)||fa.defineCustomElement();break;case "calcite-color-picker-hex-input":customElements.get(a)||Y();break;case "calcite-color-picker-swatch":customElements.get(a)||l.defineCustomElement();break;case "calcite-icon":customElements.get(a)||Q.defineCustomElement();break;case "calcite-input":customElements.get(a)||F.defineCustomElement$1();break;case "calcite-loader":customElements.get(a)||
ha.defineCustomElement();break;case "calcite-progress":customElements.get(a)||F.defineCustomElement();break;case "calcite-tab":customElements.get(a)||ia.defineCustomElement();break;case "calcite-tab-nav":customElements.get(a)||ja.defineCustomElement();break;case "calcite-tab-title":customElements.get(a)||ka.defineCustomElement();break;case "calcite-tabs":customElements.get(a)||la.defineCustomElement()}})}const na=/^[0-9A-F]$/i,T=/^#[0-9A-F]{3}$/i,U=/^#[0-9A-F]{6}$/i,u={HEX:"hex",HEXA:"hexa",RGB_CSS:"rgb-css",
RGBA_CSS:"rgba-css",HSL_CSS:"hsl-css",HSLA_CSS:"hsla-css"},w={RGB:"rgb",RGBA:"rgba",HSL:"hsl",HSLA:"hsla",HSV:"hsv",HSVA:"hsva"},x=l.color("#007AC2"),aa={r:255,g:255,b:255},m={h:360,s:100,v:100},ba={s:{slider:{height:10,width:160},colorField:{height:80,width:160},thumb:{radius:8}},m:{slider:{height:14,width:272},colorField:{height:150,width:272},thumb:{radius:10}},l:{slider:{height:16,width:464},colorField:{height:200,width:464},thumb:{radius:12}}},ca=l.color();let J=class extends HTMLElement{constructor(){super();
this.__registerHost();this.__attachShadow();this.calciteColorPickerHexInputChange=g.createEvent(this,"calciteColorPickerHexInputChange",7);this.allowEmpty=!1;this.intlHex="Hex";this.intlNoColor="No color";this.scale="m";this.value=q(ca.hex());this.onCalciteInputBlur=a=>{a=a.currentTarget;const b=a.value,c=`#${b}`;this.allowEmpty&&!b||G(c)&&c&&7===c.length&&U.test(c)||(a.value=this.allowEmpty&&!this.internalColor?"":this.formatForInternalInput(S(this.internalColor.object())))};this.onInputChange=a=>
{a=a.currentTarget.value;let b;if(a){if(!V(`#${a}`))return;b=q(a)}else this.allowEmpty&&(b=null);this.value=b;this.calciteColorPickerHexInputChange.emit()};this.internalColor=ca;this.previousNonNullValue=this.value;this.storeInputRef=a=>{this.inputNode=a}}connectedCallback(){const {allowEmpty:a,value:b}=this;if(b){const c=q(b);G(c)&&(this.internalColor=l.color(c),this.value=c)}else a&&(this.value=this.internalColor=null)}handleValueChange(a,b){if(a){if(a=q(a),G(a)){({internalColor:b}=this);b=!b||
a!==q(b.hex());this.internalColor=l.color(a);this.value=this.previousNonNullValue=a;b&&this.calciteColorPickerHexInputChange.emit();return}}else if(this.allowEmpty){this.value=this.internalColor=null;this.calciteColorPickerHexInputChange.emit();return}this.value=b}onInputKeyDown(a){const {altKey:b,ctrlKey:c,metaKey:d,shiftKey:f}=a,{el:e,inputNode:h,internalColor:k,value:p}=this;var n=E.getKey(a.key);if("ArrowDown"===n||"ArrowUp"===n)this.value=p?q(this.nudgeRGBChannels(k,(f?10:1)*("ArrowUp"===n?1:
-1)).hex()):this.previousNonNullValue,a.preventDefault();else{var y=b||c||d,z=6<=h.value.length,r=e.shadowRoot.activeElement;r=r.selectionStart!=r.selectionEnd;var t=1===n.length;n=na.test(n);!t||y||n&&(r||!z)||a.preventDefault()}}render(){const {el:a,intlHex:b,value:c}=this,d=this.formatForInternalInput(c),f=A.getElementDir(a);return g.h("div",{class:"container"},g.h("calcite-input",{class:"input",dir:f,label:b,onCalciteInputBlur:this.onCalciteInputBlur,onChange:this.onInputChange,prefixText:"#",
ref:this.storeInputRef,scale:this.scale,value:d}),d?g.h("calcite-color-picker-swatch",{active:!0,class:"preview",color:`#${d}`,scale:this.scale}):null)}async setFocus(){A.focusElement(this.inputNode)}formatForInternalInput(a){return a?a.replace("#",""):""}nudgeRGBChannels(a,b){return l.color.rgb(a.array().map(c=>c+b))}get el(){return this}static get watchers(){return{value:["handleValueChange"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:300ms}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host{display:block}.container{width:100%;display:inline-grid;-ms-flex-align:center;align-items:center;grid-template-columns:1fr auto}.preview{grid-column:2/3;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;pointer-events:none;margin-top:0;margin-bottom:0;margin-left:0.25rem;margin-right:0.25rem;z-index:1}.preview,.input{grid-row:1}.input{grid-column:1/3;text-transform:uppercase;width:100%}"}};
J=g.proxyCustomElement(J,[1,"calcite-color-picker-hex-input",{allowEmpty:[4,"allow-empty"],intlHex:[1,"intl-hex"],intlNoColor:[1,"intl-no-color"],scale:[513],value:[1537],internalColor:[32],setFocus:[64]},[[2,"keydown","onInputKeyDown"]]]);Y();const oa=q(x.hex());let H=class extends HTMLElement{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteColorPickerChange=g.createEvent(this,"calciteColorPickerChange",7);this.calciteColorPickerInput=g.createEvent(this,"calciteColorPickerInput",
7);this.allowEmpty=!1;this.appearance="default";this.color=x;this.format="auto";this.hideSaved=this.hideChannels=this.hideHex=!1;this.intlB="B";this.intlBlue="Blue";this.intlDeleteColor="Delete color";this.intlG="G";this.intlGreen="Green";this.intlH="H";this.intlHsv="HSV";this.intlHex="Hex";this.intlHue="Hue";this.intlNoColor="No color";this.intlR="R";this.intlRed="Red";this.intlRgb="RGB";this.intlS="S";this.intlSaturation="Saturation";this.intlSaveColor="Save color";this.intlSaved="Saved";this.intlV=
"V";this.intlValue="Value";this.scale="m";this.value=oa;this.colorFieldAndSliderHovered=!1;this.hueThumbState="idle";this.internalColorUpdateContext=null;this.mode=u.HEX;this.shiftKeyChannelAdjustment=0;this.sliderThumbState="idle";this.colorFieldAndSliderInteractive=!1;this.channelMode="rgb";this.channels=this.toChannels(x);this.dimensions=ba.m;this.savedColors=[];this.handleTabActivate=a=>{this.channelMode=a.currentTarget.getAttribute("data-color-mode");this.updateChannelsFromColor(this.color)};
this.handleColorFieldScopeKeyDown=a=>{const b=E.getKey(a.key),c={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};c[b]&&(a.preventDefault(),this.scopeOrientation="ArrowDown"===b||"ArrowUp"===b?"vertical":"horizontal",this.captureColorFieldColor(this.colorFieldScopeLeft+c[b].x||0,this.colorFieldScopeTop+c[b].y||0,!1))};this.handleHueScopeKeyDown=a=>{var b=a.shiftKey?10:1;const c=E.getKey(a.key),d={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};d[c]&&(a.preventDefault(),
a=d[c]*b,b=this.baseColorFieldColor.hue(),a=this.baseColorFieldColor.hue(b+a),this.internalColorSet(a,!1))};this.handleHexInputChange=a=>{a.stopPropagation();const {allowEmpty:b,color:c}=this;a=a.target.value;if(b&&!a)this.internalColorSet(null);else{var d=c&&q(c.hex());a!==d&&this.internalColorSet(l.color(a))}};this.handleSavedColorSelect=a=>{this.internalColorSet(l.color(a.currentTarget.color))};this.handleChannelInput=a=>{const b=a.currentTarget;a=a.detail.nativeEvent.target;var c=Number(b.getAttribute("data-channel-index"));
c="rgb"===this.channelMode?aa[Object.keys(aa)[c]]:m[Object.keys(m)[c]];c=this.allowEmpty&&!b.value?"":ea.clamp(Number(b.value)+this.shiftKeyChannelAdjustment,0,c).toString();b.value=c;a.value=c};this.handleChannelChange=a=>{a=a.currentTarget;const b=Number(a.getAttribute("data-channel-index")),c=[...this.channels];this.allowEmpty&&!a.value?(this.channels=[null,null,null],this.internalColorSet(null)):(c[b]=Number(a.value),this.updateColorFromChannels(c))};this.handleSavedColorKeyDown=a=>{if(" "===
a.key||"Enter"===a.key)a.preventDefault(),a.stopPropagation(),this.handleSavedColorSelect(a)};this.handleColorFieldAndSliderMouseLeave=()=>{this.colorFieldAndSliderHovered=this.colorFieldAndSliderInteractive=!1;"drag"!==this.sliderThumbState&&"drag"!==this.hueThumbState&&(this.sliderThumbState=this.hueThumbState="idle",this.drawColorFieldAndSlider())};this.handleColorFieldAndSliderMouseDown=a=>{const {offsetX:b,offsetY:c}=a,d=this.getCanvasRegion(c);"color-field"===d?(this.hueThumbState="drag",this.captureColorFieldColor(b,
c)):"slider"===d&&(this.sliderThumbState="drag",this.captureHueSliderColor(b));a.preventDefault();document.addEventListener("mousemove",this.globalMouseMoveHandler);document.addEventListener("mouseup",this.globalMouseUpHandler,{once:!0});this.activeColorFieldAndSliderRect=this.fieldAndSliderRenderingContext.canvas.getBoundingClientRect()};this.globalMouseUpHandler=()=>{const a="drag"===this.sliderThumbState||"drag"===this.hueThumbState;this.sliderThumbState=this.hueThumbState="idle";this.activeColorFieldAndSliderRect=
null;this.drawColorFieldAndSlider();a&&this.calciteColorPickerChange.emit()};this.globalMouseMoveHandler=a=>{const {el:b,dimensions:c}=this;var d="drag"===this.sliderThumbState;const f="drag"===this.hueThumbState;if(b.isConnected&&(d||f)){d=this.activeColorFieldAndSliderRect;var {clientX:e,clientY:h}=a;if(this.colorFieldAndSliderHovered)a=e-d.x,d=h-d.y;else{a=c.colorField.width;const k=c.colorField.height,p=c.slider.height;a=e<d.x+a&&e>d.x?e-d.x:e<d.x?0:a;d=h<d.y+k+p&&h>d.y?h-d.y:h<d.y?0:k+p}f?this.captureColorFieldColor(a,
d,!1):this.captureHueSliderColor(a)}};this.handleColorFieldAndSliderMouseEnterOrMove=({offsetX:a,offsetY:b})=>{const {dimensions:{colorField:c,slider:d,thumb:f}}=this;this.colorFieldAndSliderInteractive=b<=c.height+d.height;this.colorFieldAndSliderHovered=!0;var e=this.getCanvasRegion(b);if("color-field"===e){e=this.hueThumbState;var h=this.baseColorFieldColor.hsv(),k=Math.round(h.saturationv()/(m.s/c.width));h=Math.round(c.height-h.value()/(m.v/c.height));a=this.containsPoint(a,b,k,h,f.radius);b=
!1;"idle"===e&&a?(this.hueThumbState="hover",b=!0):"hover"!==e||a||(this.hueThumbState="idle",b=!0);"drag"!==this.hueThumbState&&b&&this.drawColorFieldAndSlider()}else"slider"===e&&(k=this.baseColorFieldColor.hsv().saturationv(100).value(100),e=this.sliderThumbState,k=Math.round(k.hue()/(360/d.width)),h=Math.round((d.height+this.getSliderCapSpacing())/2)+c.height,a=this.containsPoint(a,b,k,h,f.radius),b=!1,"idle"===e&&a?(this.sliderThumbState="hover",b=!0):"hover"!==e||a||(this.sliderThumbState="idle",
b=!0),"drag"!==this.sliderThumbState&&b&&this.drawColorFieldAndSlider())};this.storeColorFieldScope=a=>{this.colorFieldScopeNode=a};this.renderChannelsTabTitle=a=>{const {channelMode:b,intlRgb:c,intlHsv:d}=this;return g.h("calcite-tab-title",{active:a===b,class:"color-mode","data-color-mode":a,key:a,onCalciteTabsActivate:this.handleTabActivate},"rgb"===a?c:d)};this.renderChannelsTab=a=>{const {channelMode:b,channels:c,intlB:d,intlBlue:f,intlG:e,intlGreen:h,intlH:k,intlHue:p,intlR:n,intlRed:y,intlS:z,
intlSaturation:r,intlV:t,intlValue:K}=this,I="rgb"===a,L=I?[n,e,d]:[k,z,t],B=I?[y,h,f]:[p,r,K];return g.h("calcite-tab",{active:a===b,class:"control",key:a},g.h("div",{class:"channels"},c.map((C,D)=>this.renderChannel(C,D,L[D],B[D]))))};this.renderChannel=(a,b,c,d)=>g.h("calcite-input",{class:"channel","data-channel-index":b,label:d,numberButtonType:"none",onCalciteInputChange:this.handleChannelChange,onCalciteInputInput:this.handleChannelInput,prefixText:c,scale:"l"===this.scale?"m":"s",type:"number",
value:null===a||void 0===a?void 0:a.toString()});this.deleteColor=()=>{const a=this.color.hex();if(-1<this.savedColors.indexOf(a)){var b=this.savedColors.filter(d=>d!==a);this.savedColors=b;var c=`${"calcite-color-"}${this.storageId}`;this.storageId&&localStorage.setItem(c,JSON.stringify(b))}};this.saveColor=()=>{var a=this.color.hex();if(!(-1<this.savedColors.indexOf(a))){this.savedColors=a=[...this.savedColors,a];var b=`${"calcite-color-"}${this.storageId}`;this.storageId&&localStorage.setItem(b,
JSON.stringify(a))}};this.drawColorFieldAndSlider=ma(()=>{this.fieldAndSliderRenderingContext&&(this.drawColorField(),this.drawHueSlider())},16);this.captureColorFieldColor=(a,b,c=!0)=>{const {dimensions:{colorField:{height:d,width:f}}}=this;a=Math.round(m.s/f*a);b=Math.round(m.v/d*(d-b));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(a).value(b),c)};this.initColorFieldAndSlider=a=>{this.fieldAndSliderRenderingContext=a.getContext("2d");this.setCanvasContextSize(a,{width:this.dimensions.colorField.width,
height:this.dimensions.colorField.height+this.dimensions.slider.height+2*this.getSliderCapSpacing()});this.drawColorFieldAndSlider()}}handleColorChange(a,b){this.drawColorFieldAndSlider();this.updateChannelsFromColor(a);this.previousColor=b;this.internalColorUpdateContext||(this.value=this.toValue(a))}handleFormatChange(a){this.setMode(a);this.value=this.toValue(this.color)}handleScaleChange(a="m"){this.updateDimensions(a)}handleValueChange(a,b){const {allowEmpty:c,format:d}=this;let f=!1;if(!c||
a){var e=W(a);if(!e||"auto"!==d&&e!==d){this.showIncompatibleColorWarning(a,d);this.value=b;return}f=this.mode!==e;this.setMode(e)}b="drag"===this.sliderThumbState||"drag"===this.hueThumbState;if(this.internalColorUpdateContext)"initial"!==this.internalColorUpdateContext&&(this.calciteColorPickerInput.emit(),b||this.calciteColorPickerChange.emit());else if(a=c&&!a?null:l.color(a),e=!X(a,this.color),f||e)this.color=a,this.calciteColorPickerInput.emit(),b||this.calciteColorPickerChange.emit()}get baseColorFieldColor(){return this.color||
this.previousColor||x}handleChannelKeyUpOrDown(a){this.shiftKeyChannelAdjustment=0;const b=E.getKey(a.key);if(("ArrowUp"===b||"ArrowDown"===b)&&a.composedPath().some(d=>{var f;return null===(f=d.classList)||void 0===f?void 0:f.contains("channel")})){var {shiftKey:c}=a;a.preventDefault();this.color?this.shiftKeyChannelAdjustment="ArrowUp"===b&&c?9:"ArrowDown"===b&&c?-9:0:(this.internalColorSet(this.previousColor),a.stopPropagation())}}async setFocus(){return A.focusElement(this.colorFieldScopeNode)}componentWillLoad(){const a=
`${"calcite-color-"}${this.storageId}`;this.storageId&&localStorage.getItem(a)&&(this.savedColors=JSON.parse(localStorage.getItem(a)))}connectedCallback(){const {allowEmpty:a,color:b,format:c,value:d}=this;var f=a&&!d,e=W(d);e=f||"auto"===c&&e||c===e;f=f?null:e?l.color(d):b;e||this.showIncompatibleColorWarning(d,c);this.setMode(c);this.internalColorSet(f,!1,"initial");this.updateDimensions(this.scale)}disconnectedCallback(){document.removeEventListener("mousemove",this.globalMouseMoveHandler);document.removeEventListener("mouseup",
this.globalMouseUpHandler)}render(){const {allowEmpty:a,color:b,intlDeleteColor:c,el:d,hideHex:f,hideChannels:e,hideSaved:h,intlHex:k,intlSaved:p,intlSaveColor:n,savedColors:y,scale:z}=this,r=b?b.hex():null,t="l"===z?"m":"s",{colorFieldAndSliderInteractive:K,colorFieldScopeTop:I,colorFieldScopeLeft:L,hueScopeLeft:B,hueScopeTop:C,scopeOrientation:D,dimensions:{colorField:{height:pa,width:qa},slider:{height:ra}}}=this,sa=null!==C&&void 0!==C?C:ra/2+pa,ta=null!==B&&void 0!==B?B:qa*x.hue()/m.h,M=A.getElementDir(d),
da=null===b,N="vertical"===D;return g.h("div",{class:"container"},g.h("div",{class:"color-field-and-slider-wrap"},g.h("canvas",{class:{["color-field-and-slider"]:!0,["color-field-and-slider--interactive"]:K},onMouseDown:this.handleColorFieldAndSliderMouseDown,onMouseEnter:this.handleColorFieldAndSliderMouseEnterOrMove,onMouseLeave:this.handleColorFieldAndSliderMouseLeave,onMouseMove:this.handleColorFieldAndSliderMouseEnterOrMove,ref:this.initColorFieldAndSlider}),g.h("div",{"aria-label":N?this.intlValue:
this.intlSaturation,"aria-valuemax":N?m.v:m.s,"aria-valuemin":"0","aria-valuenow":(N?null===b||void 0===b?void 0:b.saturationv():null===b||void 0===b?void 0:b.value())||"0",class:{["scope"]:!0,["scope--color-field"]:!0},onKeyDown:this.handleColorFieldScopeKeyDown,ref:this.storeColorFieldScope,role:"slider",style:{top:`${I||0}px`,left:`${L||0}px`},tabindex:"0"}),g.h("div",{"aria-label":this.intlHue,"aria-valuemax":m.h,"aria-valuemin":"0","aria-valuenow":(null===b||void 0===b?void 0:b.round().hue())||
x.round().hue(),class:{["scope"]:!0,["scope--hue"]:!0},onKeyDown:this.handleHueScopeKeyDown,role:"slider",style:{top:`${sa}px`,left:`${ta}px`},tabindex:"0"})),f&&e?null:g.h("div",{class:{["control-section"]:!0,["section"]:!0,[A.CSS_UTILITY.rtl]:"rtl"===M}},f?null:g.h("div",{class:"color-hex-options"},g.h("span",{class:{["header"]:!0,["header--hex"]:!0}},k),g.h("calcite-color-picker-hex-input",{allowEmpty:a,class:"control",dir:M,onCalciteColorPickerHexInputChange:this.handleHexInputChange,scale:t,
value:r})),e?null:g.h("calcite-tabs",{class:{["color-mode-container"]:!0,["section--split"]:!0},dir:M,scale:t},g.h("calcite-tab-nav",{slot:"tab-nav"},this.renderChannelsTabTitle("rgb"),this.renderChannelsTabTitle("hsv")),this.renderChannelsTab("rgb"),this.renderChannelsTab("hsv"))),h?null:g.h("div",{class:{["saved-colors-section"]:!0,["section"]:!0}},g.h("div",{class:"header"},g.h("label",null,p),g.h("div",{class:"saved-colors-buttons"},g.h("calcite-button",{appearance:"transparent",class:"delete-color",
color:"neutral",disabled:da,iconStart:"minus",label:c,onClick:this.deleteColor,scale:t}),g.h("calcite-button",{appearance:"transparent",class:"save-color",color:"neutral",disabled:da,iconStart:"plus",label:n,onClick:this.saveColor,scale:t}))),0<y.length?g.h("div",{class:"saved-colors"},[...y.map(O=>g.h("calcite-color-picker-swatch",{active:r===O,class:"saved-color",color:O,key:O,onClick:this.handleSavedColorSelect,onKeyDown:this.handleSavedColorKeyDown,scale:z,tabIndex:0}))]):null))}showIncompatibleColorWarning(a,
b){console.warn(`ignoring color value (${a}) as it is not compatible with the current format (${b})`)}setMode(a){this.mode="auto"===a?this.mode:a}captureHueSliderColor(a){const {dimensions:{slider:{width:b}}}=this;this.internalColorSet(this.baseColorFieldColor.hue(360/b*a),!1)}getCanvasRegion(a){const {dimensions:{colorField:{height:b},slider:{height:c}}}=this;return a<=b?"color-field":a<=b+c?"slider":"none"}internalColorSet(a,b=!0,c="internal"){b&&X(a,this.color)||(this.internalColorUpdateContext=
c,this.color=a,this.value=this.toValue(a),this.internalColorUpdateContext=null)}toValue(a,b=this.mode){if(!a)return null;if(b.includes("hex"))return q(a.round().hex());if(b.includes("-css"))return a[b.replace("-css","").replace("a","")]().round().string();a=a[b]().round().object();b.endsWith("a")&&(a.a=a.alpha,delete a.alpha);return a}getSliderCapSpacing(){const {dimensions:{slider:{height:a},thumb:{radius:b}}}=this;return 2*b-a}updateDimensions(a="m"){this.dimensions=ba[a]}drawColorField(){const a=
this.fieldAndSliderRenderingContext,{dimensions:{colorField:{height:b,width:c}}}=this;a.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).string();a.fillRect(0,0,c,b);var d=a.createLinearGradient(0,0,c,0);d.addColorStop(0,"rgba(255,255,255,1)");d.addColorStop(1,"rgba(255,255,255,0)");a.fillStyle=d;a.fillRect(0,0,c,b);d=a.createLinearGradient(0,0,0,b);d.addColorStop(0,"rgba(0,0,0,0)");d.addColorStop(1,"rgba(0,0,0,1)");a.fillStyle=d;a.fillRect(0,0,c,b);this.drawActiveColorFieldColor()}setCanvasContextSize(a,
{height:b,width:c}){const d=window.devicePixelRatio||1;a.width=c*d;a.height=b*d;a.style.height=`${b}px`;a.style.width=`${c}px`;a.getContext("2d").scale(d,d)}containsPoint(a,b,c,d,f){return Math.pow(a-c,2)+Math.pow(b-d,2)<=Math.pow(f,2)}drawActiveColorFieldColor(){var {color:a}=this;if(a){a=a.hsv();var {dimensions:{colorField:{height:b,width:c},thumb:{radius:d}}}=this,f=a.saturationv()/(m.s/c),e=b-a.value()/(m.v/b);requestAnimationFrame(()=>{this.colorFieldScopeLeft=f;this.colorFieldScopeTop=e});this.drawThumb(this.fieldAndSliderRenderingContext,
d,f,e,a,this.hueThumbState)}}drawThumb(a,b,c,d,f,e){const h=2*Math.PI;a.beginPath();a.arc(c,d,b,0,h);a.shadowBlur="hover"===e?32:16;a.shadowColor=`rgba(0, 0, 0, ${"drag"===e?.32:.16})`;a.fillStyle="#fff";a.fill();a.beginPath();a.arc(c,d,b-3,0,h);a.shadowBlur=0;a.shadowColor="transparent";a.fillStyle=f.rgb().string();a.fill()}drawActiveHueSliderColor(){var {color:a}=this;if(a){a=a.hsv().saturationv(100).value(100);var {dimensions:{colorField:{height:b},slider:{height:c,width:d},thumb:{radius:f}}}=
this,e=a.hue()/(360/d),h=c/2+b;requestAnimationFrame(()=>{this.hueScopeLeft=e;this.hueScopeTop=h});this.drawThumb(this.fieldAndSliderRenderingContext,f,e,h,a,this.sliderThumbState)}}drawHueSlider(){const a=this.fieldAndSliderRenderingContext,{dimensions:{colorField:{height:b},slider:{height:c,width:d}}}=this,f=a.createLinearGradient(0,0,d,0),e="red yellow lime cyan blue magenta red".split(" "),h=1/(e.length-1);let k=0;e.forEach(p=>{f.addColorStop(k,l.color(p).string());k+=h});a.fillStyle=f;a.clearRect(0,
b,d,c+2*this.getSliderCapSpacing());a.fillRect(0,b,d,c);this.drawActiveHueSliderColor()}updateColorFromChannels(a){this.internalColorSet(l.color(a,this.channelMode))}updateChannelsFromColor(a){this.channels=a?this.toChannels(a):[null,null,null]}toChannels(a){const {channelMode:b}=this;return a[b]().array().map(c=>Math.floor(c))}get el(){return this}static get watchers(){return{color:["handleColorChange"],format:["handleFormatChange"],scale:["handleScaleChange"],value:["handleValueChange"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:300ms}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale\x3ds]) .container{width:160px}:host([scale\x3ds]) .saved-colors{grid-template-columns:repeat(auto-fill, minmax(20px, 1fr))}:host([scale\x3ds]) .channels{-ms-flex-direction:column;flex-direction:column}:host([scale\x3ds]) .channel{width:100%;margin-bottom:4px}:host([scale\x3ds]) .channel:last-child{margin-bottom:0}:host([scale\x3dm]) .container{width:272px}:host([scale\x3dl]) .control-section.section.calcite--rtl\x3e:nth-child(2){margin-left:0;margin-right:12px}:host([scale\x3dl]) .header{padding-bottom:0}:host([scale\x3dl]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale\x3dl]) .container{width:464px}:host([scale\x3dl]) .color-field-and-slider{margin-bottom:-20px}:host([scale\x3dl]) .section{padding:0 16px 16px}:host([scale\x3dl]) .section:first-of-type{padding-top:16px}:host([scale\x3dl]) .saved-colors{grid-template-columns:repeat(auto-fill, minmax(28px, 1fr));grid-gap:12px;padding-top:16px}:host([scale\x3dl]) .control-section{-ms-flex-wrap:nowrap;flex-wrap:nowrap;-ms-flex-align:baseline;align-items:baseline}:host([scale\x3dl]) .control-section\x3e:nth-child(2){margin-left:12px}:host([scale\x3dl]) .color-hex-options{-ms-flex-negative:1;flex-shrink:1;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:distribute;justify-content:space-around;min-height:98px;width:160px}:host([scale\x3dl]) .color-mode-container{-ms-flex-negative:3;flex-shrink:3}:host([appearance\x3dminimal]) .container{border:none}.container{background-color:var(--calcite-ui-foreground-1);display:inline-block;border:1px solid var(--calcite-ui-border-1)}.color-field-and-slider-wrap{position:relative}.scope{font-size:var(--calcite-font-size--1);padding:0;margin-bottom:0;margin-right:0;outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;width:0.5rem;height:0.5rem;position:absolute;pointer-events:none;margin-top:-0.25rem;margin-left:-0.25rem;outline-offset:10px}.scope:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px;outline-offset:12px}.color-field-and-slider{margin-bottom:-16px}.color-field-and-slider--interactive{cursor:pointer}.control-section{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap}.section{padding:0 12px 12px}.section:first-of-type{padding-top:12px}.color-hex-options,.section--split{-ms-flex-positive:1;flex-grow:1}.header{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;color:var(--calcite-ui-text-1);padding-bottom:0.25rem}.header--hex,.color-mode-container{padding-top:12px}.channels{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.channel{width:31%}.saved-colors{padding-top:12px;display:grid;grid-template-columns:repeat(auto-fill, minmax(24px, 1fr));grid-gap:8px;width:100%}.saved-colors-buttons{display:-ms-flexbox;display:flex}.saved-color{outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;cursor:pointer}.saved-color:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.saved-color:hover{-webkit-transition:outline-color 100ms ease-in-out;transition:outline-color 100ms ease-in-out;outline:2px solid var(--calcite-ui-border-2);outline-offset:2px}"}};
H=g.proxyCustomElement(H,[1,"calcite-color-picker",{allowEmpty:[4,"allow-empty"],appearance:[513],color:[1040],format:[1],hideHex:[4,"hide-hex"],hideChannels:[4,"hide-channels"],hideSaved:[4,"hide-saved"],intlB:[1,"intl-b"],intlBlue:[1,"intl-blue"],intlDeleteColor:[1,"intl-delete-color"],intlG:[1,"intl-g"],intlGreen:[1,"intl-green"],intlH:[1,"intl-h"],intlHsv:[1,"intl-hsv"],intlHex:[1,"intl-hex"],intlHue:[1,"intl-hue"],intlNoColor:[1,"intl-no-color"],intlR:[1,"intl-r"],intlRed:[1,"intl-red"],intlRgb:[1,
"intl-rgb"],intlS:[1,"intl-s"],intlSaturation:[1,"intl-saturation"],intlSaveColor:[1,"intl-save-color"],intlSaved:[1,"intl-saved"],intlV:[1,"intl-v"],intlValue:[1,"intl-value"],scale:[513],storageId:[1,"storage-id"],value:[1025],colorFieldAndSliderInteractive:[32],channelMode:[32],channels:[32],dimensions:[32],savedColors:[32],colorFieldScopeTop:[32],colorFieldScopeLeft:[32],scopeOrientation:[32],hueScopeLeft:[32],hueScopeTop:[32],setFocus:[64]},[[2,"keydown","handleChannelKeyUpOrDown"],[2,"keyup",
"handleChannelKeyUpOrDown"]]]);Z();P.CalciteColorPicker=H;P.defineCustomElement=Z});