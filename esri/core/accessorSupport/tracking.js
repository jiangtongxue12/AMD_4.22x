// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define(["exports","../has","../Logger","./utils"],function(e,A,x,p){function q(a){if(void 0!==h)h.onObservableAccessed(a)}function r(a,b,d){if(k)return l(a,b,d);h=a;f.push(a);a=b.call(d);t();return a}function l(a,b,d){const c=k;k=!0;h=a;f.push(a);a=null;try{a=b.call(d)}catch(g){m&&y.error(g)}t();k=c;return a}function t(){const a=f.pop();h=0<f.length?f[f.length-1]:void 0;if(void 0!==a)a.onTrackingEnd()}function u(a,b){if(!(b.flags&32)){var d=m;m=!1;b.flags&64?l(b,b.metadata.get,a):v(a,b);m=d}}function v(a,
b){b.flags&128||(b.flags|=128,l(b,()=>{var d=b.metadata.dependsOn||z;for(const c of d)if("string"===typeof c&&-1===c.indexOf("."))w(a,c,!1);else{d=p.pathToArray(c);for(let g=0,n=a;g<d.length&&null!=n&&"object"===typeof n;++g)n=w(n,d[g],g!==d.length-1)}}),b.flags&=-129)}function w(a,b,d){b="?"===b[b.length-1]?b.slice(0,-1):b;if(null!=a.getItemAt||Array.isArray(a)){var c=parseInt(b,10);if(!isNaN(c))return Array.isArray(a)?a[c]:a.getItemAt(c)}c=p.getProperties(a);if(c=null==c?void 0:c.properties.get(b))q(c),
u(a,c);return d?a[b]:void 0}let f=[],h=void 0;const y=x.getLogger("esri.core.Accessor");let k=!1,m=!1;const z=[];e.initializeDependencyTracking=u;e.resetGlobalTarget=function(){f=[]};e.runTracked=r;e.runTrackedNoThrow=l;e.runUntracked=function(a,b){return r(void 0,a,b)};e.trackAccess=q;e.trackExplicitDependencies=v;Object.defineProperty(e,"__esModule",{value:!0})});