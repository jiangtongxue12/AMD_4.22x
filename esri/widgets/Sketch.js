// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),function(e,k,b,z,B,G,J,F,P,H,w){b=function(h){function c(g){g=h.call(this,
g)||this;g.enabled=!1;g.enabledToggled=!1;g.selfEnabled=!0;g.featureEnabled=!0;g.featureSources=new z;g.distance=w.defaults.distance;g.touchSensitivityMultiplier=w.defaults.touchSensitivityMultiplier;return g}e._inheritsLoose(c,h);e._createClass(c,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&
this.featureEnabled}}]);return c}(b);k.__decorate([B.property()],b.prototype,"enabled",void 0);k.__decorate([B.property()],b.prototype,"enabledToggled",void 0);k.__decorate([B.property()],b.prototype,"selfEnabled",void 0);k.__decorate([B.property()],b.prototype,"featureEnabled",void 0);k.__decorate([B.property({type:z.ofType(H)})],b.prototype,"featureSources",void 0);k.__decorate([B.property()],b.prototype,"distance",void 0);k.__decorate([B.property()],b.prototype,"touchSensitivityMultiplier",void 0);
k.__decorate([B.property({readOnly:!0})],b.prototype,"effectiveEnabled",null);k.__decorate([B.property({readOnly:!0})],b.prototype,"effectiveSelfEnabled",null);k.__decorate([B.property({readOnly:!0})],b.prototype,"effectiveFeatureEnabled",null);return b=k.__decorate([P.subclass("esri.views.interactive.snapping.SnappingOptions")],b)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(e,k,b,z,B,G,J,F){b=function(P){function H(w){w=P.call(this,w)||this;w.layer=null;w.enabled=!0;w.updating=!1;w.availability=1;return w}e._inheritsLoose(H,P);return H}(b);k.__decorate([z.property({constructOnly:!0})],b.prototype,"layer",void 0);k.__decorate([z.property()],b.prototype,"enabled",void 0);k.__decorate([z.property()],b.prototype,"updating",void 0);k.__decorate([z.property()],b.prototype,"availability",void 0);return b=k.__decorate([F.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
b)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(e,k,b,z,B,G,J){let F=function(P){function H(){var w=P.apply(this,arguments)||this;w.enabled=!0;return w}k._inheritsLoose(H,P);return H}(B.JSONSupport);b.__decorate([G.property({type:Boolean})],F.prototype,
"enabled",void 0);F=b.__decorate([J.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],F);B=function(P){function H(w){w=P.call(this,w)||this;w.lineSnapper=new F;w.parallelLineSnapper=new F;w.rightAngleSnapper=new F;w.rightAngleTriangleSnapper=new F;w.shortLineThreshold=15;w.distance=5;w.pointThreshold=1E-6;w.intersectionParallelLineThreshold=1E-6;w.parallelLineThreshold=1E-6;w.touchSensitivityMultiplier=1.5;w.pointOnLineThreshold=1E-6;w.orange=new z([255,127,0]);w.lineHintWidthReference=
3;w.lineHintWidthTarget=3;w.lineHintFadedExtensions=.3;w.parallelLineHintWidth=2;w.parallelLineHintLength=24;w.parallelLineHintOffset=1.5;w.rightAngleHintSize=24;w.rightAngleHintOutlineSize=1.5;return w}k._inheritsLoose(H,P);return H}(B.JSONSupport);b.__decorate([G.property({type:F,constructOnly:!0,nonNullable:!0,json:{write:!0}})],B.prototype,"lineSnapper",void 0);b.__decorate([G.property({type:F,constructOnly:!0,nonNullable:!0,json:{write:!0}})],B.prototype,"parallelLineSnapper",void 0);b.__decorate([G.property({type:F,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],B.prototype,"rightAngleSnapper",void 0);b.__decorate([G.property({type:F,constructOnly:!0,nonNullable:!0,json:{write:!0}})],B.prototype,"rightAngleTriangleSnapper",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],B.prototype,"shortLineThreshold",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],B.prototype,"distance",void 0);b.__decorate([G.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],B.prototype,"pointThreshold",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],B.prototype,"intersectionParallelLineThreshold",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],B.prototype,"parallelLineThreshold",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],B.prototype,"touchSensitivityMultiplier",
void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],B.prototype,"pointOnLineThreshold",void 0);b.__decorate([G.property({type:z,nonNullable:!0})],B.prototype,"orange",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],B.prototype,"lineHintWidthReference",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],B.prototype,"lineHintWidthTarget",void 0);b.__decorate([G.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],B.prototype,"lineHintFadedExtensions",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],B.prototype,"parallelLineHintWidth",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],B.prototype,"parallelLineHintLength",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],B.prototype,"parallelLineHintOffset",
void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],B.prototype,"rightAngleHintSize",void 0);b.__decorate([G.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],B.prototype,"rightAngleHintOutlineSize",void 0);B=b.__decorate([J.subclass("esri.views.interactive.snapping.Settings.Defaults")],B);b=new B;e.defaults=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/Collection ../../core/has ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/projectionEllipsoid ../../geometry/support/coordsUtils ../../layers/GraphicsLayer ../../views/DOMContainer ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/support/screenUtils ./support/OperationHandle ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n,u,v,A,q,p,C,K,L,Q,D,M,N,O,Y,fa,Z,r){function x(Aa){return"polygon"===Aa||"rectangle"===Aa||"circle"===Aa?!0:!1}function t(Aa,ea){U("undo",Aa.history.undo,Aa.history.redo,ea)}function R(Aa,ea){U("redo",Aa.history.redo,Aa.history.undo,ea)}function U(Aa,ea,da,S){const X=ea.pop().updates,W=[];S.forEach((ba,ka)=>{ka=X[ka];null!=ka&&("geometry"in ka&&w.isSome(ka.geometry)&&(W.push({geometry:ba.geometry}),ba.geometry=ka.geometry),"symbol"in ka&&w.isSome(ka.symbol)&&
(W.push({symbol:ba.symbol}),ba.symbol=ka.symbol),"undo"in ka&&(W.push(ka),ka[Aa](ba)))});da.push({updates:W})}function ha(Aa){return{updates:Aa.map(ea=>({geometry:ea.geometry}))}}function ma(Aa){return"requireError"in Aa&&"aborted"===Aa.requireError}const ta=Aa=>Object.freeze({__proto__:null,default:Aa}),ua=H.getLogger("esri.widgets.Sketch.SketchViewModel"),Da={defaultZ:0},Ha={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,
enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};G=function(Aa){function ea(S){S=Aa.call(this,S)||this;S._numUpdating=0;S._handles=new P;S._internalGraphicsLayer=new v({listMode:"hide",internal:!0,title:"SVM Internal"});S._operationHandle=null;S._viewHandles=new P;S.activeFillSymbol=null;S.activeLineSymbol=null;S.activeVertexSymbol=null;S.allowDeleteKey=!0;S.layer=null;S.pointSymbol=new fa({style:"circle",size:6,color:[255,255,255],
outline:{color:[50,50,50],width:1}});S.polygonSymbol=new Z({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});S.polylineSymbol=new r({color:[130,130,130,1],width:2});S._snappingManager=null;S.updateGraphics=new B;S.updateOnGraphicClick=!0;S.updatePointSymbol=new fa({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});S.updatePolygonSymbol=new Z({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});S.updatePolylineSymbol=new r({color:[12,207,255],width:2});
S.vertexSymbol=new fa({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});S._moduleLoaderAbortController=null;S._viewReadyAbortController=null;S._originalAutoOpenEnabled=null;S.defaultCreateOptions=Da;S.defaultUpdateOptions=Ha;S.snappingOptions=new N;return S}k._inheritsLoose(ea,Aa);var da=ea.prototype;da.initialize=function(){this._handles.add([g.watch(this,"layer",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=w.isSome(this.layer)?this.layer.elevationInfo:
null}),g.on(this,"view.map.layers","change",S=>{S.removed.includes(this.layer)&&this.cancel()}),g.on(this,"layer.graphics","change",S=>{if(w.isSome(this._operationHandle))for(const X of S.removed)this.updateGraphics.includes(X)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(X):this._operationHandle.cancel())}),g.init(this,"layer.elevationInfo",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=w.isSome(this.layer)?this.layer.elevationInfo:null},!0),g.init(this,
"view",S=>{w.destroyMaybe(this._snappingManager);S&&(this._snappingManager=new M.SnappingManager({view:S,options:this.snappingOptions}),"2d"===S.type?new Promise((X,W)=>e(["../../views/2d/interactive/editingTools"],X,W)):"3d"===S.type&&(new Promise((X,W)=>e(["../../views/3d/interactive/editingTools"],X,W)),new Promise((X,W)=>e(["../../views/3d/layers/GraphicsLayerView3D"],ba=>X(ta(ba)),W))))},!0)])};da.destroy=function(){this.cancel();this._handles=w.destroyMaybe(this._handles);this._viewHandles=
w.destroyMaybe(this._viewHandles);this._removeDefaultLayer();this._snappingManager=w.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};da.cancel=function(){this._moduleLoaderAbortController=w.abortMaybe(this._moduleLoaderAbortController);this._viewReadyAbortController=w.abortMaybe(this._viewReadyAbortController);this._operationHandle&&this._operationHandle.cancel()};da.complete=function(){this._operationHandle&&this._operationHandle.complete()};da.delete=function(){const {state:S,
updateGraphics:X}=this;if("active"===S&&X.length){const {activeTool:W,layer:ba}=this,ka=X.toArray();ba.removeMany(ka);this.cancel();this._emitDeleteEvent({graphics:ka,tool:W})}};da.create=function(){var S=k._asyncToGenerator(function*(X,W){this.cancel();yield this._waitViewReady();if("disabled"===this.state)throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),
h.createAbortError();w.isSome(this.view.activeTool)&&(this.view.activeTool=null);if(X){L.addUniqueLayer(this.view,this._internalGraphicsLayer);var ba=yield this._setupCreateOperation(X,W);w.isNone(ba)||this.destroyed?this.view.map.remove(this._internalGraphicsLayer):(ba.on("complete",()=>{if(ba===this._operationHandle){const ka=this.createGraphic,ia=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&
this.view.map.remove(this._internalGraphicsLayer);ba.cancelled||null==ka||this.layer.add(ka);this.emit("create",{graphic:ka,state:ia?"cancel":"complete",tool:X,toolEventInfo:null,type:"create"})}}),this._operationHandle=ba,this.view.ready&&A.isDOMContainer(this.view)&&this.view.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")});return function(X,W){return S.apply(this,arguments)}}();da.update=function(){var S=k._asyncToGenerator(function*(X,W){this.cancel();yield this._waitViewReady();
const {layer:ba,view:ka,state:ia}=this;if("disabled"===ia)throw ka||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),ba||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),h.createAbortError();w.isSome(this.view.activeTool)&&(this.view.activeTool=null);const oa=Array.isArray(X)?X:[X];null!=X&&oa&&oa.length?oa.some(la=>la.layer!==ba?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),
!0):w.isNone(la.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"!==ka.type||ka.spatialReference.equals(la.geometry.spatialReference)?!1:(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),!0))||(X=yield this._setupUpdateOperation(oa,W),this.destroyed||w.isNone(X)||ma(X)||(L.addUniqueLayer(this.view,
this._internalGraphicsLayer),this._setUpdateOperationHandle(X,W),this.emit("update",{graphics:oa,state:"start",aborted:!1,tool:X.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")});return function(X,W){return S.apply(this,arguments)}}();da.undo=function(){this.canUndo()&&this._operationHandle.undo()};da.redo=function(){this.canRedo()&&this._operationHandle.redo()};da.canUndo=function(){return!(!this._operationHandle||!this._operationHandle.canUndo())};
da.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};da.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};da._getFirstHit=function(){var S=k._asyncToGenerator(function*(X){const W=[];switch(this.view.type){case "2d":{const ka=[];this.view.map.allLayers.forEach(ia=>{"vector-tile"!==ia.type&&"imagery"!==ia.type||ka.push(ia)});var ba=yield this.view.hitTest(X,{exclude:ka});0<ba.results.length&&
(ba=ba.results[0],ba.graphic&&W.push(ba))}break;case "3d":{const ka=[this.view.map.ground];this.view.map.allLayers.forEach(ia=>{"integrated-mesh"===ia.type&&ka.push(ia)});ba=yield this.view.hitTest(X,{exclude:ka});if(0<ba.results.length){const ia=ba.results[0];(!ba.ground.mapPoint||1>this.view.map.ground.opacity||ba.ground.distance-w.unwrapOr(ia.distance,0)>-Math.min(3*ba.ground.distance,"global"===this.view.viewingMode?n.getReferenceEllipsoid(this.view.renderCoordsHelper.spatialReference).radius/
this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&W.push(ia)}}}return{screenPoint:X,results:W}});return function(X){return S.apply(this,arguments)}}();da._generateViewHandles=function(S){var X=this;return[S.on("immediate-click",function(){var W=k._asyncToGenerator(function*(ba){var ka="active"===X.state&&"create"===X._operationHandle.type;if("disabled"!==X.state&&!ka&&X.updateOnGraphicClick){X._beginAsyncOperation();var ia=(yield ba.async(()=>X._getFirstHit(O.createScreenPointFromEvent(ba)))).results;
ka=null;if(ia.length)for(const oa of ia){if(oa.graphic){ia=oa.graphic;if(X.updateGraphics.includes(ia)||ia.layer===X.layer){ba.stopPropagation();ka=ia;break}"2d"!==S.type||X._isComponentGraphic(ia)||"active"!==X.state||X.cancel()}}else"active"===X.state&&X.cancel();w.isSome(ka)&&!X.updateGraphics.includes(ka)&&(yield X.update([ka],{...X.defaultUpdateOptions,reshapeOptions:{...X.defaultUpdateOptions.reshapeOptions}}));X._endAsyncOperation()}});return function(ba){return W.apply(this,arguments)}}(),
Q.ViewEventPriorities.WIDGET)]};da._setupCreateOperation=function(){var S=k._asyncToGenerator(function*(X,W){X=yield this._setupDrawGraphicTool(X,this.view,{hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...W});if(w.isNone(X))return null;this.view.tools.add(X);this.view.activeTool=X;return this._setupCreateOperationHandle(X)});return function(X,W){return S.apply(this,arguments)}}();da._setupDrawGraphicTool=function(){var S=k._asyncToGenerator(function*(X,W,ba){if("multipoint"===X&&"3d"===
W.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView"),null;const ka="rectangle"!==X,ia="rectangle"!==X;this.snappingOptions.enabledToggled=!1;X={view:W,mode:"rectangle"===X||"circle"===X?"hybrid":"click",...ba,snapToScene:!1,geometryType:X,graphicSymbol:this._getGraphicSymbolFromTool(X),snappingManager:this._snappingManager,forceUniformSize:ia,centered:ka};return"2d"===this.view.type?this._makeDrawGraphicTool2D(X):this._makeDrawGraphicTool3D(X)});return function(X,
W,ba){return S.apply(this,arguments)}}();da._makeDrawGraphicTool2D=function(){var S=k._asyncToGenerator(function*(X){const W=yield this._requireModule(new Promise((ba,ka)=>e(["../../views/2d/interactive/editingTools"],ba,ka)));return ma(W)||this.destroyed?null:new W.module.DrawGraphicTool2D({...X,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:x(X.geometryType)?this.activeFillSymbol:null})});return function(X){return S.apply(this,
arguments)}}();da._makeDrawGraphicTool3D=function(){var S=k._asyncToGenerator(function*(X){const W=yield this._requireModule(new Promise((ba,ka)=>e(["../../views/3d/interactive/editingTools"],ba,ka)));return ma(W)||this.destroyed?null:new W.module.DrawGraphicTool3D({...X,elevationInfo:this.layer.elevationInfo,snapToScene:w.isSome(this.layer.elevationInfo)?"absolute-height"===this.layer.elevationInfo.mode:!0})});return function(X){return S.apply(this,arguments)}}();da._setupCreateOperationHandle=function(S){let X=
null;const W=S.forceUniformSize,ba=S.centered,ka=[this.view.on("key-down",oa=>{if(oa.key===D.SKETCH_KEYS.pan)oa.stopPropagation(),oa.repeat||(S.enabled=!1);else if(oa.key===D.SKETCH_KEYS.complete)oa.stopPropagation(),S.completeCreateOperation();else if(oa.key!==D.SKETCH_KEYS.vertexAdd||oa.repeat)oa.key===D.SKETCH_KEYS.undo?(oa.stopPropagation(),ia.undo()):oa.key===D.SKETCH_KEYS.redo?(oa.stopPropagation(),ia.redo()):oa.key!==D.SKETCH_KEYS.snappingToggle||"rectangle"===S.geometryType||"circle"===S.geometryType||
oa.repeat?oa.key!==D.SKETCH_KEYS.constraint||"rectangle"!==S.geometryType&&"circle"!==S.geometryType||oa.repeat?oa.key!==D.SKETCH_KEYS.center||oa.repeat||(S.centered=!ba,oa.stopPropagation()):(S.forceUniformSize=!W,oa.stopPropagation()):(this.snappingOptions.enabledToggled=!0,oa.stopPropagation());else{const la=S.drawOperation.geometryType;if("polyline"===la||"polygon"===la||"multipoint"===la)oa.stopPropagation(),S.drawOperation.commitStagedVertex()}},Q.ViewEventPriorities.WIDGET),this.view.on("key-up",
oa=>{oa.key===D.SKETCH_KEYS.pan?S.enabled=!0:oa.key===D.SKETCH_KEYS.snappingToggle&&"rectangle"!==S.geometryType&&"circle"!==S.geometryType?(this.snappingOptions.enabledToggled=!1,oa.stopPropagation()):oa.key!==D.SKETCH_KEYS.constraint||"rectangle"!==S.geometryType&&"circle"!==S.geometryType?oa.key===D.SKETCH_KEYS.center&&(S.centered=ba,oa.stopPropagation()):(S.forceUniformSize=W,oa.stopPropagation())},Q.ViewEventPriorities.WIDGET),S.on("vertex-add",oa=>{X=w.isNone(X)?"start":"active";switch(oa.operation){case "apply":this.emit("create",
{graphic:w.unwrap(S.graphic),state:X,tool:this.activeTool,toolEventInfo:oa,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[w.unwrap(S.graphic)],tool:S.geometryType});break;case "redo":this._emitRedoEvent({graphics:[w.unwrap(S.graphic)],tool:S.geometryType})}}),S.on("cursor-update",oa=>{0<S.drawOperation.numCommittedVertices&&this.emit("create",{graphic:w.unwrap(S.graphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:oa.vertices[0].coordinates,type:"cursor-update"},
type:"create"})}),S.on("vertex-remove",oa=>{switch(oa.operation){case "apply":this.emit("create",{graphic:w.unwrap(S.graphic),state:"active",tool:this.activeTool,toolEventInfo:oa,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[w.unwrap(S.graphic)],tool:S.geometryType});break;case "redo":this._emitRedoEvent({graphics:[w.unwrap(S.graphic)],tool:S.geometryType})}}),S.on("complete",oa=>{this._set("createGraphic",w.unwrap(oa.graphic));X="complete";oa.aborted?ia&&ia.cancel():ia&&ia.complete()}),
c.react(()=>this._getGraphicSymbolFromTool(S.geometryType),oa=>{S.graphicSymbol=oa})],ia=new Y.OperationHandle({activeComponent:S,tool:S.geometryType,type:"create",onEnd:()=>{var oa;ka.forEach(la=>la.remove());ka.length=0;null==(oa=this.view.tools)?void 0:oa.remove(S);S.destroy()},undo:()=>{S.canUndo&&S.undo()},redo:()=>{S.canRedo&&S.redo()},canUndo:()=>S.canUndo,canRedo:()=>S.canRedo});return ia};da._getGraphicSymbolFromTool=function(S){switch(S){case "point":case "multipoint":return this.pointSymbol;
case "polyline":return this.polylineSymbol;case "circle":case "rectangle":case "polygon":return this.polygonSymbol;default:return null}};da._setupUpdateOperation=function(){var S=k._asyncToGenerator(function*(X,W){const {layer:ba,view:ka}=this;W={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...W,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...null==W?void 0:W.reshapeOptions}};var ia=W.tool;for(var oa of X)ba.remove(oa),ba.add(oa);if("3d"===ka.type){if(0===X.length)return null;
switch(ia){case "move":return this._setupMove3DOperation(X,W,ka,ia);case "reshape":if(1<X.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;ia=C.isSupportedGraphic(X[0]);if(0===ia)return this._setupReshape3DOperation(X[0],W,ka);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${q.isSupportedGraphicResultMessage(ia)}).`);return null;case "transform":return this._setupGraphicTransform3DOperation(X,
W,ka)}}switch(ia){case "move":return this._setupMoveOperation(X,W,ka);case "reshape":if(1<X.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;oa=C.isSupportedGraphic(X[0]);if(0===oa)return this._setupTransformOrReshapeOperation(X,ia,W,ka);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${q.isSupportedGraphicResultMessage(oa)}).`);return null;case "transform":return 1===X.length&&(oa=w.get(X[0].geometry,
"type"),"point"===oa||"multipoint"===oa)&&(ia="reshape"),this._setupTransformOrReshapeOperation(X,ia,W,ka)}});return function(X,W){return S.apply(this,arguments)}}();da._setupMove3DOperation=function(){var S=k._asyncToGenerator(function*(X,W,ba,ka,ia=!1){var oa=this;for(var la of X){const pa=p.isSupportedGraphic(la);if(0!==pa)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${q.isSupportedGraphicResultMessage(pa)}).`),null}la=yield this._requireModule(new Promise((pa,
wa)=>e(["../../views/3d/interactive/editingTools"],pa,wa)));if(ma(la))return la;const za=new la.module.GraphicMoveTool({view:ba,enableZ:W.enableZ,snappingManager:this._snappingManager});this.view.tools.add(za);za.graphics.addMany(X);ia||this.updateGraphics.addMany(X);const qa=[],sa=new Y.UpdateOperationHandle({activeComponent:za,tool:ka,type:"update",onEnd:()=>{var pa;qa.forEach(wa=>wa.remove());qa.length=0;null==(pa=this.view.tools)?void 0:pa.remove(za);za.destroyed||za.destroy()},undo:()=>{t(sa,
this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:ka})},redo:()=>{R(sa,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:ka})},addToSelection:pa=>{this.updateGraphics.push(pa);za.graphics.push(pa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[pa],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:pa=>{const wa=
this.updateGraphics.indexOf(pa);sa.history.undo.forEach(Ea=>Ea.updates.splice(wa,1));sa.history.redo.forEach(Ea=>Ea.updates.splice(wa,1));this.updateGraphics.remove(pa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[pa],type:"selection-change"},type:"update"});0===this.updateGraphics.length?sa.complete():za.graphics.remove(pa)},toggleTool:function(){var pa=k._asyncToGenerator(function*(){if(1===oa.updateGraphics.length&&
!1!==W.toggleToolOnClick&&"transform"===ka){var wa=oa.updateGraphics.getItemAt(0);0===C.isSupportedGraphic(wa)&&(wa=yield oa._setupReshape3DOperation(wa,W,ba,!0),ma(wa)||(sa.onEnd(),sa.destroy(),oa._setUpdateOperationHandle(wa,W)))}});return function(){return pa.apply(this,arguments)}}()});qa.push(...this._getHandlesForComponent(sa,W),this.view.on("immediate-click",pa=>this._getCommonUpdateOperationClickHandlers(sa,pa,W),Q.ViewEventPriorities.WIDGET),ba.on("key-down",pa=>{this._getCommonUpdateOperationKeyDownHandlers(sa,
pa);pa.key===D.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,pa.stopPropagation())},Q.ViewEventPriorities.WIDGET),ba.on("key-up",pa=>{pa.key===D.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,pa.stopPropagation())},Q.ViewEventPriorities.WIDGET));return sa});return function(X,W,ba,ka){return S.apply(this,arguments)}}();da._setupGraphicTransform3DOperation=function(S,X,W,ba=!1){if(1===S.length&&0===K.isSupportedGraphic(S[0])){const ka=S[0],ia=ka.geometry;if(w.isSome(ia)&&
("point"===ia.type||"mesh"===ia.type))return this._setupPointTransform3DOperation(ka,X,W);if(w.isSome(ia)&&("polygon"===ia.type||"polyline"===ia.type))return this._setupPolyTransform3DOperation(ka,X,W,ba)}return this._setupMove3DOperation(S,X,W,"transform",ba)};da._setupPointTransform3DOperation=function(){var S=k._asyncToGenerator(function*(X,W,ba){var ka=this;const {enableRotation:ia,enableScaling:oa,enableZ:la}=W,za=yield this._requireModule(new Promise((wa,Ea)=>e(["../../views/3d/interactive/editingTools"],
wa,Ea)));if(ma(za))return za;const qa=new za.module.GraphicTransformTool({graphic:X,view:ba,enableRotation:ia,enableScaling:oa,enableZ:la,snappingManager:this._snappingManager});this.view.tools.add(qa);this.updateGraphics.add(X);const sa=[],pa=new Y.UpdateOperationHandle({activeComponent:qa,tool:"transform",type:"update",onEnd:()=>{var wa;sa.forEach(Ea=>Ea.remove());sa.length=0;null==(wa=this.view.tools)?void 0:wa.remove(qa);qa.destroyed||qa.destroy()},undo:()=>{t(pa,this.updateGraphics.toArray());
this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>{R(pa,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var wa=k._asyncToGenerator(function*(Ea){ka.updateGraphics.add(Ea);ka.emit("update",{graphics:ka.updateGraphics.toArray(),state:"active",aborted:!1,tool:ka.activeTool,toolEventInfo:{added:[Ea],removed:[],type:"selection-change"},type:"update"});Ea=yield ka._setupMove3DOperation(ka.updateGraphics.toArray(),
W,ba,"transform",!0);ma(Ea)||(pa.onEnd(),pa.destroy(),ka._setUpdateOperationHandle(Ea,W))});return function(Ea){return wa.apply(this,arguments)}}(),removeFromSelection:wa=>{this.updateGraphics.remove(wa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[wa],type:"selection-change"},type:"update"});pa.complete()},toggleTool:()=>{}});sa.push(...this._getHandlesForComponent(pa,W),this.view.on("immediate-click",wa=>
this._getCommonUpdateOperationClickHandlers(pa,wa,W),Q.ViewEventPriorities.WIDGET),ba.on("key-down",wa=>{this._getCommonUpdateOperationKeyDownHandlers(pa,wa);wa.key===D.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,wa.stopPropagation())},Q.ViewEventPriorities.WIDGET),ba.on("key-up",wa=>{wa.key===D.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,wa.stopPropagation())},Q.ViewEventPriorities.WIDGET));return pa});return function(X,W,ba){return S.apply(this,arguments)}}();
da._setupPolyTransform3DOperation=function(){var S=k._asyncToGenerator(function*(X,W,ba,ka=!1){var ia=this;const {enableRotation:oa,enableScaling:la,enableZ:za,preserveAspectRatio:qa}=W,sa=yield this._requireModule(new Promise((Ba,Na)=>e(["../../views/3d/interactive/editingTools"],Ba,Na)));if(ma(sa))return sa;const pa=new sa.module.ExtentTransformTool({graphic:X,view:ba,enableRotation:oa,enableScaling:la,enableZ:za,preserveAspectRatio:qa});this.view.tools.add(pa);ka||this.updateGraphics.add(X);const wa=
[],Ea=new Y.UpdateOperationHandle({activeComponent:pa,tool:"transform",type:"update",onEnd:()=>{var Ba;wa.forEach(Na=>Na.remove());wa.length=0;null==(Ba=this.view.tools)?void 0:Ba.remove(pa);pa.destroyed||pa.destroy()},canUndo:()=>pa.canUndo,undo:()=>{pa.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>pa.canRedo,redo:()=>{pa.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var Ba=k._asyncToGenerator(function*(Na){ia.updateGraphics.add(Na);
ia.emit("update",{graphics:ia.updateGraphics.toArray(),state:"active",aborted:!1,tool:ia.activeTool,toolEventInfo:{added:[Na],removed:[],type:"selection-change"},type:"update"});Na=yield ia._setupMove3DOperation(ia.updateGraphics.toArray(),W,ba,"transform",!0);ma(Na)||(Ea.onEnd(),Ea.destroy(),ia._setUpdateOperationHandle(Na,W))});return function(Na){return Ba.apply(this,arguments)}}(),removeFromSelection:Ba=>{this.updateGraphics.remove(Ba);this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ba],type:"selection-change"},type:"update"});Ea.complete()},toggleTool:function(){var Ba=k._asyncToGenerator(function*(){if(1===ia.updateGraphics.length&&!1!==W.toggleToolOnClick){var Na=ia.updateGraphics.getItemAt(0);0===C.isSupportedGraphic(Na)&&(Na=yield ia._setupReshape3DOperation(Na,W,ba,!0),ma(Na)||(Ea.onEnd(),Ea.destroy(),ia._setUpdateOperationHandle(Na,W)))}});return function(){return Ba.apply(this,arguments)}}()});
wa.push(...this._getHandlesForComponent(Ea,W),this.view.on("immediate-click",Ba=>this._getCommonUpdateOperationClickHandlers(Ea,Ba,W),Q.ViewEventPriorities.WIDGET),this.view.on("key-down",Ba=>this._getCommonUpdateOperationKeyDownHandlers(Ea,Ba),Q.ViewEventPriorities.WIDGET),this.view.on("key-down",Ba=>{Ba.key!==D.SKETCH_KEYS.constraint||Ba.repeat||(pa.preserveAspectRatio=!pa.preserveAspectRatio,Ba.stopPropagation())},Q.ViewEventPriorities.WIDGET),this.view.on("key-up",Ba=>{Ba.key===D.SKETCH_KEYS.constraint&&
(pa.preserveAspectRatio=!pa.preserveAspectRatio,Ba.stopPropagation())},Q.ViewEventPriorities.WIDGET));return Ea});return function(X,W,ba){return S.apply(this,arguments)}}();da._setupMoveOperation=function(){var S=k._asyncToGenerator(function*(X,W,ba){this.updateGraphics.addMany(X);const ka=yield this._getGraphicMover(X,W,ba);if(ma(ka))return ka;const ia=new Y.UpdateOperationHandle({activeComponent:ka,tool:"move",type:"update",onEnd:()=>{var qa;this._displayDefaultCursor();za.forEach(sa=>sa.remove());
la.forEach(sa=>sa.remove());za=[];la=[];ka.destroy();null==(qa=this._internalGraphicsLayer)?void 0:qa.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const qa=this.updateGraphics.toArray();t(ia,qa);ia.refreshComponent();this._emitUndoEvent({graphics:qa,tool:"move"})},redo:()=>{const qa=this.updateGraphics.toArray();R(ia,qa);ia.refreshComponent();this._emitRedoEvent({graphics:qa,tool:"move"})},addToSelection:qa=>{this.updateGraphics.push(qa);ka.graphics=this.updateGraphics.toArray();this.emit("update",
{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[qa],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:qa=>{const sa=this.updateGraphics.indexOf(qa);ia.history.undo.forEach(wa=>wa.updates.splice(sa,1));ia.history.redo.forEach(wa=>wa.updates.splice(sa,1));this.updateGraphics.remove(qa);const pa=this.updateGraphics.toArray();this.emit("update",{graphics:pa,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],
removed:[qa],type:"selection-change"},type:"update"});0===this.updateGraphics.length?ia.complete():ka.graphics=pa}});let oa=!1,la=[ba.on("immediate-click",qa=>this._getCommonUpdateOperationClickHandlers(ia,qa,W),Q.ViewEventPriorities.WIDGET),ba.on("key-down",qa=>{this._getCommonUpdateOperationKeyDownHandlers(ia,qa);qa.key!==D.SKETCH_KEYS.constraint||qa.repeat||(oa=!0,ka.enableMoveAllGraphics=!ka.enableMoveAllGraphics)},Q.ViewEventPriorities.WIDGET),ba.on("key-up",qa=>{qa.key===D.SKETCH_KEYS.constraint&&
oa&&(oa=!1,ka.enableMoveAllGraphics=!ka.enableMoveAllGraphics)},Q.ViewEventPriorities.WIDGET)],za=this._getHandlesForComponent(ia,W);return ia});return function(X,W,ba){return S.apply(this,arguments)}}();da._setupReshape3DOperation=function(){var S=k._asyncToGenerator(function*(X,W,ba,ka=!1){var ia=this;const oa=yield this._requireModule(new Promise((sa,pa)=>e(["../../views/3d/interactive/editingTools"],sa,pa)));if(ma(oa))return oa;this.snappingOptions.enabledToggled=!1;const la=new oa.module.GraphicReshapeTool({view:ba,
graphic:X,enableZVertex:W.enableZ&&"move"===W.reshapeOptions.vertexOperation,enableZShape:W.enableZ&&"move"===W.reshapeOptions.shapeOperation,enableMoveGraphic:"move"===W.reshapeOptions.shapeOperation||"move-xy"===W.reshapeOptions.shapeOperation,enableMidpoints:"split"===W.reshapeOptions.edgeOperation,enableEdgeOffset:"offset"===W.reshapeOptions.edgeOperation,snappingManager:this._snappingManager});ba.tools.add(la);ka||this.updateGraphics.add(X);const za=[],qa=new Y.UpdateOperationHandle({activeComponent:la,
tool:"reshape",type:"update",onEnd:()=>{var sa;za.forEach(pa=>pa.remove());za.length=0;null==(sa=this.view.tools)?void 0:sa.remove(la);la.destroyed||la.destroy()},canUndo:()=>la.canUndo,undo:()=>{la.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>la.canRedo,redo:()=>{la.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},addToSelection:function(){var sa=k._asyncToGenerator(function*(pa){ia.updateGraphics.add(pa);ia.emit("update",
{graphics:ia.updateGraphics.toArray(),state:"active",aborted:!1,tool:ia.activeTool,toolEventInfo:{added:[pa],removed:[],type:"selection-change"},type:"update"});pa=yield ia._setupMove3DOperation(ia.updateGraphics.toArray(),W,ba,"transform",!0);ma(pa)||(qa.onEnd(),qa.destroy(),ia._setUpdateOperationHandle(pa,W))});return function(pa){return sa.apply(this,arguments)}}(),removeFromSelection:sa=>{this.updateGraphics.remove(sa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[sa],type:"selection-change"},type:"update"});qa.complete()},toggleTool:function(){var sa=k._asyncToGenerator(function*(){if(!1!==W.toggleToolOnClick){var pa=yield ia._setupGraphicTransform3DOperation(ia.updateGraphics.toArray(),W,ba,!0);ma(pa)||(qa.onEnd(),qa.destroy(),ia._setUpdateOperationHandle(pa,W))}});return function(){return sa.apply(this,arguments)}}()});za.push(...this._getHandlesForComponent(qa,W),ba.on("immediate-click",sa=>
this._getCommonUpdateOperationClickHandlers(qa,sa,W),Q.ViewEventPriorities.WIDGET),ba.on("key-down",sa=>{this._getCommonUpdateOperationKeyDownHandlers(qa,sa);sa.key===D.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,sa.stopPropagation())},Q.ViewEventPriorities.WIDGET),ba.on("key-up",sa=>{sa.key===D.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,sa.stopPropagation())},Q.ViewEventPriorities.WIDGET));return qa});return function(X,W,ba){return S.apply(this,arguments)}}();
da._setupTransformOrReshapeOperation=function(){var S=k._asyncToGenerator(function*(X,W,ba,ka){var ia=this;const {multipleSelectionEnabled:oa}=ba;this.updateGraphics.addMany(X);X="transform"===W?yield this._getBox(X,ba,ka):yield this._getReshape(X,ba,ka);if(ma(X))return X;const la=new Y.UpdateOperationHandle({activeComponent:X,type:"update",onEnd:()=>{qa.forEach(sa=>sa.remove());za.forEach(sa=>sa.remove());qa=[];za=[];la.activeComponent&&!la.activeComponent.destroyed&&la.activeComponent.destroy();
this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{t(la,this.updateGraphics.toArray());la.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:la.tool})},redo:()=>{R(la,this.updateGraphics.toArray());la.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:la.tool})},addToSelection:function(){var sa=k._asyncToGenerator(function*(pa){var wa=la.activeComponent;if("reshape"===wa.type){wa=[...ia.updateGraphics,
pa];ia.updateGraphics.removeAll();wa=yield ia._setupMoveOperation(wa,ba,ka);if(ma(wa))return;la.onEnd();la.destroy();ia._setUpdateOperationHandle(wa,ba)}else ia.updateGraphics.add(pa),wa.graphics=ia.updateGraphics.toArray(),wa.refresh(),la.resetHistory();ia.emit("update",{graphics:ia.updateGraphics.toArray(),state:"active",aborted:!1,tool:ia.activeTool,toolEventInfo:{added:[pa],removed:[],type:"selection-change"},type:"update"})});return function(pa){return sa.apply(this,arguments)}}(),removeFromSelection:function(){var sa=
k._asyncToGenerator(function*(pa){const wa=ia.updateGraphics.indexOf(pa);la.history.undo.forEach(Ba=>Ba.updates.splice(wa,1));la.history.redo.forEach(Ba=>Ba.updates.splice(wa,1));ia.updateGraphics.remove(pa);const Ea=ia.updateGraphics.toArray();if(0===Ea.length)la.complete();else{const Ba=Ea[0].geometry;1!==Ea.length||!w.isSome(Ba)||"point"!==Ba.type&&"multipoint"!==Ba.type?la.activeComponent.graphics=Ea:la.toggleTool()}ia.emit("update",{graphics:Ea,state:"active",aborted:!1,tool:ia.activeTool,toolEventInfo:{added:[],
removed:[pa],type:"selection-change"},type:"update"})});return function(pa){return sa.apply(this,arguments)}}(),toggleTool:function(){var sa=k._asyncToGenerator(function*(){if(!(1<ia.updateGraphics.length)){var pa=ia.updateGraphics.getItemAt(0),wa=pa.geometry;w.isSome(wa)&&("reshape"===la.tool&&("point"===wa.type||"multipoint"===wa.type)||"transform"===la.tool&&"extent"===wa.type)||(wa=null,"transform"===la.tool?wa=yield ia._getReshape([pa],ba,ka):"reshape"===la.tool&&(wa=yield ia._getBox([pa],ba,
ka)),ma(wa)||(la.activeComponent.destroy(),la.activeComponent=wa,la.activeComponent&&(qa.forEach(Ea=>Ea.remove()),qa=ia._getHandlesForComponent(la,ba))))}});return function(){return sa.apply(this,arguments)}}()});let za=[ka.on("immediate-click",function(){var sa=k._asyncToGenerator(function*(pa){var wa;const Ea=yield pa.async(()=>ia._getFirstHit(O.createScreenPointFromEvent(pa)));null!=(wa=Ea.results)&&wa.length?Ea.results.some(Ba=>{if(Ba.graphic){var Na;Ba=Ba.graphic;if(null!=(Na=pa.native)&&Na.shiftKey&&
oa)return pa.stopPropagation(),la.addToSelection(Ba),!0;if(Ba.layer===ia.layer)return la.complete(),!0}return!1}):la.complete()});return function(pa){return sa.apply(this,arguments)}}(),Q.ViewEventPriorities.WIDGET),ka.on("key-down",sa=>{this._getCommonUpdateOperationKeyDownHandlers(la,sa);sa.key!==D.SKETCH_KEYS.snappingToggle||sa.repeat||(this.snappingOptions.enabledToggled=!0,sa.stopPropagation());sa.key===D.SKETCH_KEYS.constraint&&!sa.repeat&&la&&(sa=la.activeComponent)&&"box"===sa.type&&(sa.preserveAspectRatio=
!sa.preserveAspectRatio)},Q.ViewEventPriorities.WIDGET),ka.on("key-up",sa=>{var pa;sa.key===D.SKETCH_KEYS.snappingToggle&&"reshape"===(null==la?void 0:null==(pa=la.activeComponent)?void 0:pa.type)&&(this.snappingOptions.enabledToggled=!1,sa.stopPropagation());sa.key===D.SKETCH_KEYS.constraint&&la&&(sa=la.activeComponent)&&"box"===sa.type&&(sa.preserveAspectRatio=!sa.preserveAspectRatio)},Q.ViewEventPriorities.WIDGET)],qa=this._getHandlesForComponent(la,ba);return la});return function(X,W,ba,ka){return S.apply(this,
arguments)}}();da._getGraphicMover=function(){var S=k._asyncToGenerator(function*(X,W,ba){({enableMoveAllGraphics:W}=W);const ka=yield this._requireModule(new Promise((ia,oa)=>e(["../../views/draw/support/GraphicMover"],la=>ia(ta(la)),oa)));return ma(ka)?ka:new ka.module.default({enableMoveAllGraphics:W,graphics:X,view:ba,callbacks:{onGraphicMoveStart:({dx:ia,dy:oa,graphic:la})=>{this._displayGrabbingCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{dx:ia,dy:oa,mover:la,type:"move-start"},type:"update"})},onGraphicMove:({dx:ia,dy:oa,graphic:la})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ia,dy:oa,mover:la,type:"move"},type:"update"}),onGraphicMoveStop:({dx:ia,dy:oa,graphic:la})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ia,dy:oa,mover:la,
type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})});return function(X,W,ba){return S.apply(this,arguments)}}();da._getBox=function(){var S=k._asyncToGenerator(function*(X,W,ba){const {enableRotation:ka,enableScaling:ia,preserveAspectRatio:oa}=W;W=yield this._requireModule(new Promise((la,za)=>e(["../../views/draw/support/Box"],qa=>la(ta(qa)),za)));return ma(W)?W:new W.module.default({graphics:X,enableRotation:ka,
enableScaling:ia,preserveAspectRatio:oa,layer:this._internalGraphicsLayer,view:ba,callbacks:{onMoveStart:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onMove:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onMoveStop:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onScaleStart:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onScale:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onScaleStop:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},
type:"update"}),onRotateStart:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onRotate:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onRotateStop:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"})}})});
return function(X,W,ba){return S.apply(this,arguments)}}();da._getReshape=function(){var S=k._asyncToGenerator(function*(X,W,ba){var ka,ia;const oa="split"===(null==(ka=W.reshapeOptions)?void 0:ka.edgeOperation);W="move"===(null==(ia=W.reshapeOptions)?void 0:ia.shapeOperation);ia=yield this._requireModule(new Promise((la,za)=>e(["../../views/draw/support/Reshape"],qa=>la(ta(qa)),za)));return ma(ia)?ia:new ia.module.default({enableMidpoints:oa,enableMovement:W,graphic:X[0],layer:this._internalGraphicsLayer,
snappingManager:this._snappingManager,view:ba,callbacks:{onReshapeStart:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onReshape:la=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...la},type:"update"}),onReshapeStop:({mover:la,type:za})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{mover:la,type:za},type:"update"}),onMoveStart:({dx:la,dy:za,mover:qa,type:sa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:la,dy:za,mover:qa,type:sa},type:"update"}),onMove:({dx:la,dy:za,mover:qa,type:sa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:la,dy:za,mover:qa,type:sa},type:"update"}),onMoveStop:({dx:la,dy:za,mover:qa,
type:sa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:la,dy:za,mover:qa,type:sa},type:"update"}),onVertexAdd:({added:la,type:za,vertices:qa})=>{la=la.map(sa=>u.geometryToCoordinates(sa.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:la,vertices:qa,type:za},type:"update"})},onVertexRemove:({removed:la,type:za,vertices:qa})=>{la=la.map(sa=>
u.geometryToCoordinates(sa.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:la,vertices:qa,type:za},type:"update"})}}})});return function(X,W,ba){return S.apply(this,arguments)}}();da._getHandlesForComponent=function(S,X){const W=S.activeComponent;switch(W.type){case "graphic-mover":return[W.on("graphic-click",({graphic:ba,viewEvent:ka})=>{var ia;null!=(ia=ka.native)&&ia.shiftKey&&(ka.stopPropagation(),S.removeFromSelection(ba))}),
W.on("graphic-move-start",ba=>S.addToHistory(ha(ba.allGraphics)))];case "box":return[W.on("graphic-click",ba=>this._onTransformOrReshape2DGraphicClick(S,X,ba)),W.on("move-start",ba=>S.addToHistory(ha(ba.graphics))),W.on("rotate-start",ba=>S.addToHistory(ha(ba.graphics))),W.on("scale-start",ba=>S.addToHistory(ha(ba.graphics)))];case "reshape":return[W.on("graphic-click",ba=>this._onTransformOrReshape2DGraphicClick(S,X,ba)),W.on("move-start",ba=>S.addToHistory(ha([ba.mover]))),W.on("reshape-start",
ba=>S.addToHistory(ha([ba.graphic]))),W.on("vertex-add",ba=>S.addToHistory(ha([ba.oldGraphic]))),W.on("vertex-remove",ba=>S.addToHistory(ha([ba.oldGraphic])))];case "move-3d":return[W.on("graphic-move-start",ba=>{S.addToHistory(ha(ba.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ba.allGraphics.length?ba.allGraphics[0]:null,type:"move-start"},type:"update"})}),W.on("graphic-move",ba=>{this.emit("update",
{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ba.dx,dy:ba.dy,mover:0<ba.allGraphics.length?ba.allGraphics[0]:null,type:"move"},type:"update"})}),W.on("graphic-move-stop",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ba.allGraphics.length?ba.allGraphics[0]:null,type:"move-stop"},type:"update"})}),W.on("immediate-click",ba=>{ba.shiftKey?this._toggleSelection([ba.graphic],
S,X):S.toggleTool()})];case "transform-3d":return[W.on("record-undo",({record:ba})=>{S.addToHistory({updates:[ba]})}),W.on("graphic-translate-start",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ba.graphic,dx:ba.dxScreen,dy:ba.dyScreen,type:"move-start"},type:"update"})}),W.on("graphic-translate-stop",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ba.graphic,
dx:ba.dxScreen,dy:ba.dyScreen,type:"move-stop"},type:"update"})}),W.on("graphic-rotate-start",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ba.graphic,angle:ba.angle,type:"rotate-start"},type:"update"})}),W.on("graphic-rotate-stop",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ba.graphic,angle:ba.angle,type:"rotate-stop"},type:"update"})}),
W.on("graphic-scale-start",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ba.graphic,xScale:ba.xScale,yScale:ba.yScale,type:"scale-start"},type:"update"})}),W.on("graphic-scale-stop",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ba.graphic,xScale:ba.xScale,yScale:ba.yScale,type:"scale-stop"},type:"update"})}),W.on("graphic-translate",
ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ba.graphic,dx:ba.dxScreen,dy:ba.dyScreen,type:"move"},type:"update"})}),W.on("graphic-rotate",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ba.graphic,angle:ba.angle,type:"rotate"},type:"update"})}),W.on("graphic-scale",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ba.graphic,xScale:ba.xScale,yScale:ba.yScale,type:"scale"},type:"update"})}),W.on("immediate-click",ba=>{ba.shiftKey?this._toggleSelection([ba.graphic],S,X):S.toggleTool()})];case "reshape-3d":return[W.on("reshape",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ba,type:"update"})}),W.on("move",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ba,type:"update"})}),W.on("vertex-add",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ba,type:"update"})}),W.on("vertex-remove",ba=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ba,type:"update"})}),W.on("immediate-click",ba=>{ba.shiftKey?this._toggleSelection([ba.graphic],S,X):S.toggleTool()})]}};
da._onTransformOrReshape2DGraphicClick=function(S,X,W){var ba;const {graphic:ka,viewEvent:ia}=W;if(null!=(ba=ia.native)&&ba.shiftKey&&ka.layer===this.layer)return ia.stopPropagation(),S.removeFromSelection(ka);if(X.toggleToolOnClick)return ia.stopPropagation(),S.toggleTool()};da._setUpdateOperationHandle=function(S,X){this._operationHandle=S;const W=this.view.map;this._disablePopup(X);S.on("complete",()=>{if(S===this._operationHandle){const ba=this.updateGraphics.toArray(),ka=this._operationHandle.tool;
this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();W&&W.remove(this._internalGraphicsLayer);this._restorePopup(X);this.emit("update",{graphics:ba,state:"complete",aborted:S.cancelled,tool:ka,toolEventInfo:null,type:"update"})}})};da._getCommonUpdateOperationClickHandlers=function(){var S=k._asyncToGenerator(function*(X,W,ba){const ka=O.createScreenPointFromEvent(W),ia=(yield W.async(()=>this._getFirstHit(ka))).results;
ia.length?W.native.shiftKey&&this._toggleSelection(ia.map(oa=>oa.graphic),X,ba)?W.stopPropagation():ia.some(oa=>oa.graphic&&this.updateGraphics.includes(oa.graphic))?W.stopPropagation():X.complete():X.complete()});return function(X,W,ba){return S.apply(this,arguments)}}();da._toggleSelection=function(S,X,W){const ba=!!W.multipleSelectionEnabled;return S.some(ka=>null==ka?!1:ba&&ka.layer===this.layer?(this.updateGraphics.includes(ka)?X.removeFromSelection(ka):X.addToSelection(ka),!0):!1)};da._getCommonUpdateOperationKeyDownHandlers=
function(S,X){if(S){var W=X.key;W===D.SKETCH_KEYS.undo&&S.canUndo()?(X.stopPropagation(),S.undo()):W===D.SKETCH_KEYS.redo&&S.canRedo()?(X.stopPropagation(),S.redo()):W===D.SKETCH_KEYS.cancel?(X.stopPropagation(),S.cancel()):this.allowDeleteKey&&D.SKETCH_KEYS.delete.includes(W)&&this._onDeleteKey(X)}};da._onDeleteKey=function(S){if(this._operationHandle&&"update"===this._operationHandle.type){var X=this.activeComponent,W=this.updateGraphics.toArray();w.isNone(X)||"reshape-3d"===X.type||"reshape"===
X.type&&(1!==W.length||"point"!==w.get(W[0].geometry,"type"))||(S.stopPropagation(),this.delete())}};da._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=w.destroyMaybe(this._internalGraphicsLayer))};da._isComponentGraphic=function(S){const {activeComponent:X}=this;return!S||w.isNone(X)?!1:S.attributes&&S.attributes.esriSketchTool||"draw-2d"===X.type&&X.graphic===S||("box"===X.type||
"reshape"===X.type)&&X.isUIGraphic(S)};da._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};da._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};da._displayDefaultCursor=function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};da._logError=function(S,X,W){ua.error(new J(S,X,W))};da._requireModule=function(){var S=
k._asyncToGenerator(function*(X){const W=new AbortController;this._moduleLoaderAbortController=W;X=yield X;return this._moduleLoaderAbortController!==W||W.signal.aborted?{requireError:"aborted"}:{module:X}});return function(X){return S.apply(this,arguments)}}();da._emitUndoEvent=function(S){this.emit("undo",{...S,type:"undo"})};da._emitRedoEvent=function(S){this.emit("redo",{...S,type:"redo"})};da._emitDeleteEvent=function(S){this.emit("delete",{...S,type:"delete"})};da.test=function(){return{operationHandle:this._operationHandle,
defaultUpdateOptions:Ha}};da.wait=function(){return g.whenNotOnce(this,"updating")};da._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};da._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};da._disablePopupEnabled=function(S){var X;return"3d"!==(null==(X=this.view)?void 0:X.type)||this.updateOnGraphicClick||w.isSome(S)&&S.toggleToolOnClick};da._disablePopup=function(S){this._disablePopupEnabled(S)&&(S=this.view.popup)&&w.isNone(this._originalAutoOpenEnabled)&&
(this._originalAutoOpenEnabled=S.autoOpenEnabled,S.autoOpenEnabled=!1)};da._restorePopup=function(S){this._disablePopupEnabled(S)&&(S=this.view.popup)&&w.isSome(this._originalAutoOpenEnabled)&&(S.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};da._waitViewReady=function(){var S=k._asyncToGenerator(function*(){this.view&&(w.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,yield h.whenOrAbort(g.whenOnce(this.view,"ready"),
this._viewReadyAbortController.signal))});return function(){return S.apply(this,arguments)}}();k._createClass(ea,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"updating",get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",
get:function(){return!w.isSome(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):w.unwrap(this.activeComponent.graphic)}},{key:"defaultCreateOptions",set:function(S){this._set("defaultCreateOptions",{...Da,...S})}},{key:"defaultUpdateOptions",set:function(S){this._set("defaultUpdateOptions",{...Ha,...S,reshapeOptions:{...Ha.reshapeOptions,...null==S?void 0:S.reshapeOptions}})}},{key:"snappingOptions",set:function(S){w.isSome(this._snappingManager)&&
(this._snappingManager.options=S);this._set("snappingOptions",S)}},{key:"state",get:function(){var S;const X=!(null==(S=this.view)||!S.ready||!this.layer);S=this._operationHandle;return X&&S?"active":X?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(S){const X=this._get("view");if(X){const {container:W,map:ba}=X;W&&(X.cursor=null);ba&&ba.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();this.cancel()}this._handles.remove("view-ready");S&&this._handles.add(g.when(S,
"ready",W=>{this._viewHandles.removeAll();W&&this._viewHandles.add(this._generateViewHandles(S))},!0),"view-ready");this._set("view",S)}}]);return ea}(F.EventedAccessor);b.__decorate([l.property()],G.prototype,"updating",null);b.__decorate([l.property()],G.prototype,"_operationHandle",void 0);b.__decorate([l.property({readOnly:!0})],G.prototype,"activeTool",null);b.__decorate([l.property()],G.prototype,"activeFillSymbol",void 0);b.__decorate([l.property()],G.prototype,"activeLineSymbol",void 0);b.__decorate([l.property()],
G.prototype,"activeVertexSymbol",void 0);b.__decorate([l.property()],G.prototype,"allowDeleteKey",void 0);b.__decorate([l.property({readOnly:!0})],G.prototype,"createGraphic",null);b.__decorate([l.property()],G.prototype,"defaultCreateOptions",null);b.__decorate([l.property()],G.prototype,"defaultUpdateOptions",null);b.__decorate([l.property()],G.prototype,"layer",void 0);b.__decorate([l.property({types:z.symbolTypes})],G.prototype,"pointSymbol",void 0);b.__decorate([l.property({types:z.symbolTypes})],
G.prototype,"polygonSymbol",void 0);b.__decorate([l.property({types:z.symbolTypes})],G.prototype,"polylineSymbol",void 0);b.__decorate([l.property({type:N,nonNullable:!0})],G.prototype,"snappingOptions",null);b.__decorate([l.property()],G.prototype,"_snappingManager",void 0);b.__decorate([l.property({readOnly:!0})],G.prototype,"state",null);b.__decorate([l.property({readOnly:!0})],G.prototype,"updateGraphics",void 0);b.__decorate([l.property()],G.prototype,"updateOnGraphicClick",void 0);b.__decorate([l.property({types:z.symbolTypes})],
G.prototype,"updatePointSymbol",void 0);b.__decorate([l.property({types:z.symbolTypes})],G.prototype,"updatePolygonSymbol",void 0);b.__decorate([l.property({types:z.symbolTypes})],G.prototype,"updatePolylineSymbol",void 0);b.__decorate([l.property({types:z.symbolTypes})],G.prototype,"vertexSymbol",void 0);b.__decorate([l.property({value:null})],G.prototype,"view",null);b.__decorate([l.property()],G.prototype,"cancel",null);b.__decorate([l.property()],G.prototype,"complete",null);b.__decorate([l.property()],
G.prototype,"delete",null);b.__decorate([l.property()],G.prototype,"create",null);b.__decorate([l.property()],G.prototype,"update",null);b.__decorate([l.property()],G.prototype,"undo",null);b.__decorate([l.property()],G.prototype,"redo",null);b.__decorate([l.property()],G.prototype,"canUndo",null);b.__decorate([l.property()],G.prototype,"canRedo",null);b.__decorate([l.property()],G.prototype,"toggleUpdateTool",null);return G=b.__decorate([f.subclass("esri.widgets.Sketch.SketchViewModel")],G)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c){z=function(g){function l(y){y=g.call(this,y)||this;y.elevationInfo=null;y.graphics=new h.GraphicsCollection;y.screenSizePerspectiveEnabled=!0;y.type="graphics";y.internal=!1;return y}e._inheritsLoose(l,g);var d=l.prototype;d.destroy=function(){this.removeAll();this.graphics.destroy()};d.add=function(y){this.graphics.add(y);return this};d.addMany=function(y){this.graphics.addMany(y);return this};d.removeAll=function(){this.graphics.removeAll();return this};d.remove=
function(y){this.graphics.remove(y)};d.removeMany=function(y){this.graphics.removeMany(y)};d.on=function(y,f){return g.prototype.on.call(this,y,f)};d.graphicChanged=function(y){this.emit("graphic-update",y)};return l}(H.BlendLayer(w.ScaleRangeLayer(P)));k.__decorate([b.property({type:c})],z.prototype,"elevationInfo",void 0);k.__decorate([b.property(F.owningCollectionProperty(h.GraphicsCollection,"graphics"))],z.prototype,"graphics",void 0);k.__decorate([b.property({type:["show","hide"]})],z.prototype,
"listMode",void 0);k.__decorate([b.property()],z.prototype,"screenSizePerspectiveEnabled",void 0);k.__decorate([b.property({readOnly:!0})],z.prototype,"type",void 0);k.__decorate([b.property({constructOnly:!0})],z.prototype,"internal",void 0);return z=k.__decorate([J.subclass("esri.layers.GraphicsLayer")],z)})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c){function g(d){d&&(z.empty(d),d.parentNode&&d.parentNode.removeChild(d))}const l=[0,0];e.DOMContainer=d=>{d=function(y){function f(...u){var v=y.call(this,...u)||this;v._freqInfo={freq:16,time:750};v._overlayRenderTaskHandle=null;v.height=0;v.position=null;v.resizing=!1;v.root=null;v.surface=null;v.suspended=!0;v.ui=null;v.userContent=null;v.width=0;v.widthBreakpoint=null;v.handles.add([v.watch("cursor",A=>{const q=v.surface;q&&q.setAttribute("data-cursor",A)}),
v.watch("interacting",A=>{const q=v.surface;q&&q.setAttribute("data-interacting",A.toString())})]);return v}k._inheritsLoose(f,y);var n=f.prototype;n.initialize=function(){this.handles.add(this.watch("ui",(u,v)=>this._handleUIChange(u,v)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};n.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),
this.container=null)};n.blur=function(){this.surface&&this.surface.blur()};n.focus=function(){this.surface&&this.surface.focus()};n.pageToContainer=function(u,v,A){const q=this.position;u-=q[0];v-=q[1];A?(A[0]=u,A[1]=v):A=[u,v];return A};n.containerToPage=function(u,v,A){const q=this.position;u+=q[0];v+=q[1];A?(A[0]=u,A[1]=v):A=[u,v];return A};n._handleUIChange=function(u,v){v&&(this.handles.remove("ui"),v.destroy());u&&this._wireUI(u);this._set("ui",u)};n._wireUI=function(u){this.handles.remove("ui");
u&&(u.view=this,this.handles.add([G.init(this,"root",v=>{if(v){{const A=document.createElement("div");v.appendChild(A);v=A}}else v=null;u.container=v}),G.init(this,"popup",(v,A)=>{A&&u.remove(A,"popup");v&&(v.view=u.view,u.add(v,{key:"popup",position:"manual"}))})],"ui"))};n._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};n._startMeasuring=function(){const u=this._freqInfo;u.freq=16;u.time=750;this.handles.add([(()=>{const v=()=>{u.freq=
16;u.time=750};window.addEventListener("resize",v);return{remove(){window.removeEventListener("resize",v)}}})(),B.addFrameTask({prepare:v=>{const A=this._measure(),q=this._freqInfo;q.time+=v.deltaTime;A&&(q.freq=16,this._get("resizing")||this._set("resizing",!0));q.time<q.freq||(q.time=0,this._position()||A?q.freq=16:q.freq=Math.min(750,2*q.freq),!A&&512<=q.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};n._measure=function(){var u=this.container;
const v=u?u.clientWidth:0;u=u?u.clientHeight:0;if(0===v||0===u)return this.suspended||this._set("suspended",!0),!1;const A=this.width,q=this.height;if(v===A&&u===q)return this.suspended&&this._set("suspended",!1),!1;this._set("width",v);this._set("height",u);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:A,oldHeight:q,width:v,height:u});return!0};n._position=function(){var u=this.container;const v=this.position;{const A=(u.ownerDocument||window.document).defaultView;u=u.getBoundingClientRect();
l[0]=u.left+A.pageXOffset;l[1]=u.top+A.pageYOffset}return v&&l[0]===v[0]&&l[1]===v[1]?!1:(this._set("position",[l[0],l[1]]),!0)};n.forceDOMReadyCycle=function(){};k._createClass(f,[{key:"container",set:function(u){var v=this._get("container");if(v!==u)if(this.handles.remove("dom-size"),this._stopMeasuring(),v&&(v.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),
g(this.root),this._set("root",null),z.reparent(this.userContent,v),g(this.userContent),this._set("userContent",null)),u){u.classList.add("esri-view");v=document.createElement("div");v.className="esri-view-user-storage";z.reparent(u,v);u.appendChild(v);this._set("userContent",v);v=document.createElement("div");v.className="esri-view-root";u.insertBefore(v,u.firstChild);this._set("root",v);const A=document.createElement("div");A.className="esri-view-surface";A.setAttribute("role","application");A.tabIndex=
0;v.appendChild(A);this._set("surface",A);const q=new h;v.appendChild(q.surface);this._set("overlay",q);q.watch("needsRender",p=>{p&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=B.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(G.init(this,"size",p=>{const [C,K]=p;C>=document.body.clientWidth||K>=document.body.clientHeight?A.classList.add("esri-view-surface--inset-outline"):
A.classList.remove("esri-view-surface--inset-outline")}),"dom-size");this._set("container",u);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const u=document.activeElement===this.surface;return document.hasFocus()&&u}},{key:"popup",get:function(){return this._get("popup")||new c({view:this})},set:function(u){const v=this._get("popup");v&&
v!==u&&v.destroy();this._set("popup",u)}},{key:"size",get:function(){return[this.width,this.height]}}]);return f}(d);b.__decorate([J.property({value:null,cast:y=>z.byId(y)})],d.prototype,"container",null);b.__decorate([J.property({readOnly:!0})],d.prototype,"focused",null);b.__decorate([J.property({readOnly:!0})],d.prototype,"height",void 0);b.__decorate([J.property({type:c})],d.prototype,"popup",null);b.__decorate([J.property({type:h})],d.prototype,"overlay",void 0);b.__decorate([J.property({readOnly:!0})],
d.prototype,"position",void 0);b.__decorate([J.property({readOnly:!0})],d.prototype,"resizing",void 0);b.__decorate([J.property({readOnly:!0})],d.prototype,"root",void 0);b.__decorate([J.property({value:null,readOnly:!0})],d.prototype,"size",null);b.__decorate([J.property({readOnly:!0})],d.prototype,"surface",void 0);b.__decorate([J.property({readOnly:!0})],d.prototype,"suspended",void 0);b.__decorate([J.property()],d.prototype,"ui",void 0);b.__decorate([J.property({readOnly:!0})],d.prototype,"userContent",
void 0);b.__decorate([J.property({readOnly:!0})],d.prototype,"width",void 0);b.__decorate([J.property()],d.prototype,"widthBreakpoint",void 0);return d=b.__decorate([w.subclass("esri.views.DOMContainer")],d)};e.isDOMContainer=function(d){return d&&"focus"in d};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/projector ../support/WatchUpdatingTracking".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h){b=function(c){function g(){var d=c.apply(this,arguments)||this;d.items=new z;d._watchUpdatingTracking=new h.WatchUpdatingTracking;d._callbacks=new Map;d._projector=w.createProjector();d._hiddenProjector=w.createProjector();return d}e._inheritsLoose(g,c);var l=g.prototype;l.initialize=function(){const d=document.createElement("div");d.className="esri-overlay-surface";this._set("surface",d);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");d.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(this.items,y=>{for(const f of y.added){const n=()=>f.render();this._callbacks.set(f,n);this._projector.append(this.surface,n)}for(const f of y.removed)y=this._projector.detach(this._callbacks.get(f)),this.surface.removeChild(y.domNode),this._callbacks.delete(f)})};l.addItem=function(d){this.items.add(d)};l.removeItem=function(d){this.items.remove(d)};l.destroy=function(){this.items.removeAll();
this._callbacks.forEach(d=>this._projector.detach(d));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};l.render=function(){this._projector.renderNow()};l.computeBoundingRect=function(d){const y=this._hiddenSurface,f=this._hiddenProjector;let n=null;const u=()=>n=d.render();f.append(y,u);f.renderNow();const v={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const A=n.domNode.getBoundingClientRect();v.left=A.left;v.top=A.top;v.right=A.right;v.bottom=A.bottom}for(f.detach(u);y.firstChild;)y.removeChild(y.firstChild);
return v};l.overlaps=function(d,y){d=this.computeBoundingRect(d);y=this.computeBoundingRect(y);return Math.max(d.left,y.left)<=Math.min(d.right,y.right)&&Math.max(d.top,y.top)<=Math.min(d.bottom,y.bottom)};l.renderCanvas=function(d){if(this.items.some(f=>f.visible)){var y=d.getContext("2d");y.save();y.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(f=>{y.save();f.renderCanvas(y);y.restore()});y.restore()}};e._createClass(g,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(d=>d.visible)}}]);return g}(b);k.__decorate([B.property({readOnly:!0})],b.prototype,"surface",void 0);k.__decorate([B.property({readOnly:!0})],b.prototype,"items",void 0);k.__decorate([B.property({readOnly:!0})],b.prototype,"needsRender",null);k.__decorate([B.property({readOnly:!0})],b.prototype,"_watchUpdatingTracking",void 0);k.__decorate([B.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],b.prototype,"updating",void 0);
return b=k.__decorate([P.subclass("esri.views.overlay.ViewOverlay")],b)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/throttle ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n,u,v,A,q,p,C,K,L,Q){function D(Y,fa){return void 0===fa?`${"esri-popup"}__${Y}`:`${"esri-popup"}__${Y}-${fa}`}const M={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},N=J.getLogger("esri.widgets.Popup"),O={closeButton:!0,featureNavigation:!0};b=function(Y){function fa(r,x){var t=Y.call(this,r,x)||this;t._blurClose=!1;t._blurContainer=!1;t._containerNode=null;t._mainContainerNode=null;t._featureMenuNode=null;t._actionsMenuNode=null;t._focusClose=
!1;t._focusContainer=!1;t._focusDockButton=!1;t._focusFeatureMenuButton=!1;t._focusActionsMenuButton=!1;t._focusFirstFeature=!1;t._focusFirstAction=!1;t._handles=new G;t._pointerOffsetInPx=16;t._spinner=null;t._feature=null;t._featureMenuIntersectionObserverCallback=([R])=>{null!=R&&R.isIntersecting&&t.viewModel.featurePage++};t._featureMenuIntersectionObserver=new IntersectionObserver(t._featureMenuIntersectionObserverCallback,{root:window.document});t._displaySpinnerThrottled=P.throttle(()=>t._displaySpinner(),
0);t.actions=null;t.alignment="auto";t.autoCloseEnabled=null;t.autoOpenEnabled=null;t.defaultPopupTemplateEnabled=null;t.content=null;t.collapsed=!1;t.collapseEnabled=!0;t.dockEnabled=!1;t.featureCount=null;t.featureMenuOpen=!1;t.features=null;t.goToOverride=null;t.headingLevel=2;t.highlightEnabled=null;t.location=null;t.label=void 0;t.maxInlineActions=3;t.messages=null;t.messagesCommon=null;t.promises=null;t.selectedFeature=null;t.selectedFeatureIndex=null;t.spinnerEnabled=!0;t.title=null;t.updateLocationEnabled=
null;t.view=null;t.viewModel=new v;t.visible=null;t.visibleElements={...O};t._addSelectedFeatureIndexHandle();t.own([H.watch(e._assertThisInitialized(t),"viewModel.screenLocation",()=>t._positionContainer()),H.watch(e._assertThisInitialized(t),["viewModel.active","dockEnabled"],()=>t._toggleScreenLocationEnabled()),H.watch(e._assertThisInitialized(t),"viewModel.screenLocation",(R,U)=>{!!R!==!!U&&t.reposition()}),H.watch(e._assertThisInitialized(t),["viewModel.view.padding","viewModel.view.size","viewModel.active",
"viewModel.location","alignment"],()=>t.reposition()),H.watch(e._assertThisInitialized(t),"spinnerEnabled",R=>t._spinnerEnabledChange(R)),H.watch(e._assertThisInitialized(t),"viewModel.view.size",(R,U)=>t._updateDockEnabledForViewSize(R,U)),H.watch(e._assertThisInitialized(t),"viewModel.view",(R,U)=>t._viewChange(R,U)),H.watch(e._assertThisInitialized(t),"viewModel.view.ready",(R,U)=>t._viewReadyChange(R,U)),H.watch(e._assertThisInitialized(t),["viewModel.waitingForResult","viewModel.location"],()=>
{t._hideSpinner();t._displaySpinnerThrottled()}),H.watch(e._assertThisInitialized(t),["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>t._setTitleFromFeatureWidget()),H.watch(e._assertThisInitialized(t),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>t._setContentFromFeatureWidget()),H.whenFalse(e._assertThisInitialized(t),"collapsed",()=>{var R,U;"xsmall"===(null==(R=t.viewModel)?void 0:null==(U=R.view)?void 0:U.widthBreakpoint)&&
t.viewModel.active&&t.collapseEnabled&&t.viewModel.centerAtLocation()}),H.on(e._assertThisInitialized(t),"viewModel.allActions","change",()=>t._watchActions()),H.init(e._assertThisInitialized(t),"viewModel.allActions",()=>t._watchActions()),H.watch(e._assertThisInitialized(t),"viewModel.featureViewModels",()=>t._featureMenuViewportScrollTop())]);return t}e._inheritsLoose(fa,Y);var Z=fa.prototype;Z.destroy=function(){var r,x;this._destroySelectedFeatureWidget();this._destroySpinner();null==(r=this._handles)?
void 0:r.destroy();this._unobserveFeatureMenuObserver();null==(x=this._featureMenuIntersectionObserver)?void 0:x.disconnect();this._handles=null};Z.castVisibleElements=function(r){return{...O,...r}};Z.blur=function(){const {active:r}=this.viewModel;r||N.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};Z.clear=function(){this.viewModel.clear()};Z.close=function(){this.visible=!1};Z.fetchFeatures=
function(r,x){return this.viewModel.fetchFeatures(r,x)};Z.focus=function(){const {active:r}=this.viewModel;r||N.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};Z.next=function(){return this.viewModel.next()};Z.open=function(r){var x,t;this._handles.remove("selected-index");const R={collapsed:r?!!r.collapsed:!1,actionsMenuOpen:r?!!r.actionsMenuOpen:!1,featureMenuOpen:r?!!r.featureMenuOpen:!1};
"xsmall"===(null==(x=this.viewModel)?void 0:null==(t=x.view)?void 0:t.widthBreakpoint)&&(R.collapsed=!0);this.set(R);this.viewModel.open(r);this._addSelectedFeatureIndexHandle()};Z.previous=function(){return this.viewModel.previous()};Z.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};Z.triggerAction=function(r){this.viewModel.triggerAction(r)};Z.render=function(){var r,x,t,R;const {actionsMenuOpen:U,dockEnabled:ha,featureMenuVisible:ma,dividedActions:ta,
currentAlignment:ua,currentDockPosition:Da}=this,{active:Ha}=this.viewModel;var {menuActions:Aa}=ta;Aa=Ha&&1<Aa.length&&U;const ea=null==(r=this.selectedFeature)?void 0:null==(x=r.layer)?void 0:x.title;r=null==(t=this.selectedFeature)?void 0:null==(R=t.layer)?void 0:R.id;return K.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===ua,["esri-popup--aligned-bottom-center"]:"bottom-center"===ua,["esri-popup--aligned-top-left"]:"top-left"===ua,["esri-popup--aligned-bottom-left"]:"bottom-left"===
ua,["esri-popup--aligned-top-right"]:"top-right"===ua,["esri-popup--aligned-bottom-right"]:"bottom-right"===ua,["esri-popup--is-docked"]:Ha&&ha,["esri-popup--shadow"]:Ha&&!ha,["esri-popup--is-docked-top-left"]:"top-left"===Da,["esri-popup--is-docked-top-center"]:"top-center"===Da,["esri-popup--is-docked-top-right"]:"top-right"===Da,["esri-popup--is-docked-bottom-left"]:"bottom-left"===Da,["esri-popup--is-docked-bottom-center"]:"bottom-center"===Da,["esri-popup--is-docked-bottom-right"]:"bottom-right"===
Da,["esri-popup--feature-menu-open"]:ma,["esri-popup--actions-menu-open"]:Aa}),role:"presentation","data-layer-title":ea,"data-layer-id":r,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},Ha?[this.renderMainContainer(),this.renderPointer()]:null)};Z.renderLoadingIcon=function(){return K.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};Z.renderNavigationLoading=function(){const {messagesCommon:r}=
this;return this.viewModel.pendingPromisesCount?K.tsx("div",{key:D("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":r.loading,title:r.loading},this.renderLoadingIcon()):null};Z.renderPreviousIcon=function(){const r=L.isRTL(this.container);return K.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:r,["esri-popup__pagination-previous-icon--rtl"]:r,["esri-icon-left-triangle-arrow"]:!r,["esri-popup__pagination-previous-icon"]:!r})})};
Z.renderPreviousButton=function(){const {messages:r}=this;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":r.previous,title:r.previous},this.renderPreviousIcon())};Z.renderNextIcon=function(){const r=L.isRTL(this.container);return K.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:r,["esri-popup__pagination-next-icon--rtl"]:r,
["esri-icon-right-triangle-arrow"]:!r,["esri-popup__pagination-next-icon"]:!r})})};Z.renderNextButton=function(){const {messages:r}=this;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":r.next,title:r.next},this.renderNextIcon())};Z.renderFeatureMenuButton=function(){const {featureMenuOpen:r,featureMenuId:x,messagesCommon:t}=this,{featureCount:R,selectedFeatureIndex:U}=
this.viewModel;return K.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":x,"aria-expanded":r.toString(),"aria-label":t.menu,title:t.menu},this._getPageText(R,U))};Z.renderNavigationButtons=function(){return this.featureNavigationVisible?
[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null};Z.renderDockIcon=function(){const {dockEnabled:r}=this,x=this._wouldDockTo();return K.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:r,["esri-popup__icon--dock-icon"]:!r,["esri-icon-dock-right"]:!r&&("top-right"===x||"bottom-right"===x),["esri-icon-dock-left"]:!r&&("top-left"===x||"bottom-left"===x),["esri-icon-maximize"]:!r&&"top-center"===x,["esri-icon-dock-bottom"]:!r&&
"bottom-center"===x},"esri-popup__icon")})};Z.renderDockButton=function(){var r,x,t;const {dockEnabled:R,messages:U}=this,ha=null==(r=this.viewModel)?void 0:null==(x=r.view)?void 0:x.widthBreakpoint;r=R?U.undock:U.dock;return"xsmall"!==ha&&null!=(t=this.dockOptions)&&t.buttonEnabled?K.tsx("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button",
"esri-popup__button--dock")},this.renderDockIcon()):null};Z.renderTitle=function(){const {title:r}=this.viewModel,{titleId:x,collapsible:t,contentCollapsed:R,messagesCommon:U}=this;var ha={["esri-popup__header-container--button"]:t};const ma=K.tsx(A.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:r});ha=t?K.tsx("button",{key:`${r}--collapsible`,id:x,title:R?U.expand:U.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",
ha),"aria-expanded":R?"false":"true",onclick:this._toggleCollapsed},ma):K.tsx("div",{key:r,id:x,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",ha)},ma);return r?ha:null};Z.renderCloseIcon=function(){return K.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};Z.renderCloseButton=function(){const {visibleElements:r,messagesCommon:x}=this;return r.closeButton?K.tsx("div",{role:"button",tabIndex:0,
bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":x.close,title:x.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};Z.renderHeader=function(){return K.tsx("header",{class:"esri-popup__header"},this.renderTitle(),K.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};Z.renderContentContainer=function(){const {contentId:r,hasContent:x,contentCollapsed:t}=
this,{content:R}=this.viewModel;return x&&!t?K.tsx("article",{key:R,enterAnimation:this._createFeatureUpdatedAnimation(),id:r,class:"esri-popup__content"},this.renderContent()):null};Z.renderActionsMenuButton=function(){const {actionsMenuId:r,actionsMenuButtonId:x,actionsMenuOpen:t,dividedActions:R,messagesCommon:U}=this,ha=t?U.close:U.open,{menuActions:ma}=R;return ma.length?K.tsx("div",{key:D("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",
id:x,"aria-haspopup":"true","aria-controls":t?r:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":ha,title:ha},K.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};Z.renderMenuActions=function(){const {actionsMenuId:r,actionsMenuButtonId:x,actionsMenuOpen:t,dividedActions:R}=this,{menuActions:U}=R;return U.length&&t?K.tsx("ul",
{id:r,role:"menu","aria-labelledby":x,key:D("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},U.toArray().map(ha=>this.renderAction({action:ha,type:"menu-item"}))):null};Z.renderInlineActions=function(){const {inlineActions:r}=this.dividedActions;return!!r.length&&r.toArray().map(x=>this.renderAction({action:x,type:"inline"}))};Z.renderInlineActionsContainer=function(){const {inlineActions:r,
menuActions:x}=this.dividedActions,t=!!r.length,R=!!x.length;return t||R?K.tsx("div",{key:"inline-actions-container","data-inline-actions":t.toString(),"data-menu-actions":R.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};Z.renderNavigation=function(){return this.featureNavigationVisible?K.tsx("section",{key:D("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):
null};Z.renderFooter=function(){const {featureNavigationVisible:r,dividedActions:x}=this,{inlineActions:t,menuActions:R}=x,U=!!t.length,ha={["esri-popup__footer--has-pagination"]:r,["esri-popup__footer--has-actions"]:U,["esri-popup__footer--has-actions-menu"]:!!R.length};return r||U?K.tsx("div",{key:D("feature-buttons"),class:this.classes("esri-popup__footer",ha)},this.renderInlineActionsContainer(),this.renderNavigation()):null};Z.renderFeatureMenuContainer=function(){var {messages:r}=this;const {featureViewModels:x,
isLoadingFeature:t}=this.viewModel;r=Q.substitute(r.selectedFeatures,{total:x.length});return K.tsx("section",{key:D("menu"),class:"esri-popup__feature-menu"},K.tsx("strong",{class:"esri-popup__feature-menu-header"},r),K.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:L.storeNode},this.renderFeatureMenu(),K.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),
t?K.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))};Z.renderPointer=function(){return this.dockEnabled?null:K.tsx("div",{key:D("pointer"),class:"esri-popup__pointer",role:"presentation"},K.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};Z.renderMainContainer=function(){const {dockEnabled:r,currentAlignment:x,currentDockPosition:t,titleId:R,contentId:U,collapsible:ha,hasContent:ma,contentCollapsed:ta,visibleElements:ua}=
this,{title:Da}=this.viewModel,Ha="bottom-left"===x||"bottom-center"===x||"bottom-right"===x||"top-left"===t||"top-center"===t||"top-right"===t,Aa="top-left"===x||"top-center"===x||"top-right"===x||"bottom-left"===t||"bottom-center"===t||"bottom-right"===t;return K.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:r,["esri-popup--is-collapsible"]:ha,["esri-popup--is-collapsed"]:ta}),tabIndex:ua.closeButton?null:-1,role:"dialog","aria-labelledby":Da?R:
"","aria-describedby":ma&&!ta?U:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},Ha?this.renderFooter():null,Ha?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),Aa?this.renderFooter():null,Aa?this.renderFeatureMenuContainer():null)};Z.renderContent=function(){var r;const x=null==(r=this.viewModel)?void 0:r.content;return x?"string"===typeof x?K.tsx("div",{key:x,innerHTML:x}):this.renderNodeContent(x):
null};Z.renderActionText=function(r){return K.tsx("span",{key:"text",class:"esri-popup__action-text"},r)};Z.renderActionIcon=function(r){const x=this._getActionClass(r),t=this._getActionImage(r),R={["esri-icon-loading-indicator"]:r.active,["esri-rotating"]:r.active,["esri-popup__icon"]:!!x,["esri-popup__action-image"]:!r.active&&!!t};x&&(R[x]=!r.active);return K.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",R),styles:this._getIconStyles(t)})};Z.renderAction=function(r){const {action:x,
type:t}=r;r=this._getActionTitle(x);const R={["esri-popup__action"]:"toggle"!==x.type,["esri-popup__action-toggle"]:"toggle"===x.type,["esri-popup__action-toggle--on"]:"toggle"===x.type&&x.value,["esri-popup__button--disabled"]:x.disabled},U=[this.renderActionIcon(x),this.renderActionText(r)];r="menu-item"===t?K.tsx("li",{key:x.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes("esri-popup__button",R),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":x.uid,
onclick:this._triggerAction,onkeydown:this._triggerAction},U):K.tsx("div",{key:x.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes("esri-popup__button",R),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":x.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},U);return x.visible?r:null};Z.renderFeatureMenuItem=function(r,x){const {messages:t,messagesCommon:R}=this,{selectedFeatureIndex:U,selectedFeatureViewModel:ha}=this.viewModel;var ma=r===ha;const ta=
{["esri-popup__feature-menu-item--selected"]:ma};ma=ma?K.tsx("span",{key:D(`feature-menu-selected-feature-${U}`),title:t.selectedFeature,"aria-label":t.selectedFeature,class:"esri-icon-check-mark"}):null;r=K.tsx("span",{innerHTML:r.title||R.untitled});return K.tsx("li",{role:"menuitem",tabIndex:-1,key:D(`feature-menu-feature-${U}`),class:this.classes(ta,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":x,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},
K.tsx("span",{class:"esri-popup__feature-menu-title"},r,ma))};Z.renderFeatureMenu=function(){const {featureMenuId:r}=this,{featureViewModels:x}=this.viewModel;return 1<x.length?K.tsx("ol",{class:"esri-popup__feature-menu-list",id:r,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},x.filter(t=>!!t.graphic).map((t,R)=>this.renderFeatureMenuItem(t,R))):null};Z._getActionTitle=function(r){const {messages:x,selectedFeature:t,
messagesCommon:R}=this,{id:U}=r,ha=null==t?void 0:t.attributes;return(r="zoom-to-feature"===U?Q.substitute(r.title,{messages:x}):"remove-selected-feature"===U?Q.substitute(r.title,{messages:R}):"zoom-to-clustered-features"===U?Q.substitute(r.title,{messages:x}):"browse-clustered-features"===U?Q.substitute(r.title,{messages:x}):r.title)&&ha?Q.substitute(r,ha):r};Z._getActionClass=function(r){var {selectedFeature:x}=this;x=null==x?void 0:x.attributes;const {className:t,image:R}=r;return(r=R||t?t:"esri-icon-default-action")&&
x?Q.substitute(r,x):r};Z._getActionImage=function(r){var {selectedFeature:x}=this;x=null==x?void 0:x.attributes;({image:r}=r);return r&&x?Q.substitute(r,x):r};Z._createFeatureUpdatedAnimation=function(){return L.cssTransition("enter","esri-popup--feature-updated")};Z._getInlineActionCount=function(){const {maxInlineActions:r,featureNavigationVisible:x}=this;if("number"!==typeof r)return null;const t=Math.round(r);return Math.max(x?t-1:t,0)};Z._watchActions=function(){const {allActions:r}=this.viewModel;
this.notifyChange("dividedActions");this._handles.remove("actions");r&&r.forEach(x=>{this._handles.add(H.watch(x,"uid active className disabled id title image visible".split(" "),()=>this.scheduleRender()),"actions")})};Z._divideActions=function(){var {allActions:r}=this.viewModel;r=r.filter(U=>U.visible);const x=this._getInlineActionCount(),t=null===x,R=0===x;return{inlineActions:t?r.slice(0):R?new z:r.slice(0,x),menuActions:t?new z:R?r.slice(0):r.slice(x)}};Z._featureMenuOpenChanged=function(r){r?
this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};Z._actionsMenuOpenChanged=function(r){r?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};Z._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:r,messagesCommon:x}=this;if(r){var t,R;this.viewModel.title="error"===(null==(t=r.viewModel)?void 0:t.state)?x.errorMessage:(null==(R=r.viewModel)?void 0:R.title)||""}};Z._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:r}=this;r&&(this.viewModel.content=
r)};Z._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};Z._featureMenuIntersectionObserverCreated=function(r){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(r);this._featureMenuIntersectionObserverNode=r};Z._handleFeatureMenuKeyup=function(r){"Escape"===B.eventKey(r)&&(r.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=
!1,this.scheduleRender())};Z._handleActionMenuKeyup=function(r){"Escape"===B.eventKey(r)&&(r.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};Z._handleFeatureMenuItemKeyup=function(r){const x=B.eventKey(r);var {_featureMenuNode:t}=this;const R=r.currentTarget["data-feature-index"];if(t){t=t.querySelectorAll("li");var U=t.length;"ArrowUp"===x?(r.stopPropagation(),t[(R-1+U)%U].focus()):"ArrowDown"===x?(r.stopPropagation(),t[(R+1+U)%U].focus()):"Home"===
x?(r.stopPropagation(),t[0].focus()):"End"===x&&(r.stopPropagation(),t[t.length-1].focus())}};Z._handleActionMenuItemKeyup=function(r){const x=B.eventKey(r);var {_actionsMenuNode:t}=this;const R=r.currentTarget.dataset.actionUid;var {menuActions:U}=this.dividedActions;U=U.findIndex(ma=>ma.uid===R);if(t){t=t.querySelectorAll("li");var ha=t.length;"ArrowUp"===x?(r.stopPropagation(),t[(U-1+ha)%ha].focus()):"ArrowDown"===x?(r.stopPropagation(),t[(U+1+ha)%ha].focus()):"Home"===x?(r.stopPropagation(),t[0].focus()):
"End"===x&&(r.stopPropagation(),t[t.length-1].focus())}};Z._handleMainKeyup=function(r){const x=B.eventKey(r);"ArrowLeft"===x&&(r.stopPropagation(),this.previous());"ArrowRight"===x&&(r.stopPropagation(),this.next())};Z._spinnerEnabledChange=function(r){this._destroySpinner();r&&(r=this.get("viewModel.view"),this._createSpinner(r))};Z._hideSpinner=function(){const {_spinner:r}=this;r&&(r.location=null,r.hide())};Z._displaySpinner=function(){const {_spinner:r}=this;if(r){var {location:x,waitingForResult:t}=
this.viewModel;t?r.show({location:x}):r.hide()}};Z._getIconStyles=function(r){return{"background-image":r?`url(${r})`:""}};Z._addSelectedFeatureIndexHandle=function(){const r=H.watch(this,"viewModel.selectedFeatureIndex",(x,t)=>this._selectedFeatureIndexUpdated(x,t));this._handles.add(r,"selected-index")};Z._selectedFeatureIndexUpdated=function(r,x){const {featureCount:t}=this;t&&r!==x&&-1!==r&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};Z._destroySelectedFeatureWidget=function(){const {_feature:r}=
this;r&&(r.viewModel=null,r&&!r.destroyed&&r.destroy());this._feature=null};Z._isScreenLocationWithinView=function(r,x){return-1<r.x&&-1<r.y&&r.x<=x.width&&r.y<=x.height};Z._isOutsideView=function(r){const {popupHeight:x,popupWidth:t,screenLocation:R,side:U,view:ha}=r;if(isNaN(t)||isNaN(x)||!ha||!R)return!1;r=ha.padding;return"right"===U&&R.x+t/2>ha.width-r.right||"left"===U&&R.x-t/2<r.left||"top"===U&&R.y-x<r.top||"bottom"===U&&R.y+x>ha.height-r.bottom?!0:!1};Z._calculateAutoAlignment=function(r){if("auto"!==
r)return r;const {_pointerOffsetInPx:x,_containerNode:t,_mainContainerNode:R,viewModel:U}=this,{screenLocation:ha,view:ma}=U;if(F.isNone(ha)||!ma||!t)return"top-center";if(!this._isScreenLocationWithinView(ha,ma))return this._get("currentAlignment")||"top-center";var ta=(r=R?window.getComputedStyle(R,null):null)?parseInt(r.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,ua=r?parseInt(r.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:Da,width:Ha}=t.getBoundingClientRect();
r=Ha+x;const Aa=Math.max(Da,ta,ua)+x;ta=this._isOutsideView({popupHeight:Aa,popupWidth:r,screenLocation:ha,side:"right",view:ma});ua=this._isOutsideView({popupHeight:Aa,popupWidth:r,screenLocation:ha,side:"left",view:ma});const ea=this._isOutsideView({popupHeight:Aa,popupWidth:r,screenLocation:ha,side:"top",view:ma});r=this._isOutsideView({popupHeight:Aa,popupWidth:r,screenLocation:ha,side:"bottom",view:ma});return ua?ea?"bottom-right":"top-right":ta?ea?"bottom-left":"top-left":ea?r?"top-center":
"bottom-center":"top-center"};Z._callCurrentAlignment=function(r){return"function"===typeof r?r.call(this):r};Z._getCurrentAlignment=function(){const {alignment:r,dockEnabled:x}=this;return x||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(r)))};Z._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};Z._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};
Z._calculatePositionResult=function(r){const x=["left","right"];L.isRTL(this.container)&&x.reverse();return r.replace(/leading/gi,x[0]).replace(/trailing/gi,x[1])};Z._callDockPosition=function(r){return"function"===typeof r?r.call(this):r};Z._getDockPosition=function(){var r;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(r=this.dockOptions)?void 0:r.position)))};Z._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?
this._getDockPosition():null};Z._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};Z._calculateAutoDockPosition=function(r){var x;if("auto"!==r)return r;r=null==(x=this.viewModel)?void 0:x.view;x=L.isRTL(this.container)?"top-left":"top-right";if(!r)return x;var t=r.padding||{left:0,right:0,top:0,bottom:0};t=r.width-t.left-t.right;({breakpoints:r}=r);return r&&t<=r.xsmall?"bottom-center":x};Z._positionContainer=function(r=this._containerNode){r&&(this._containerNode=r);if(r){var {screenLocation:x}=
this.viewModel,{width:t}=r.getBoundingClientRect();if(x=this._calculatePositionStyle(x,t))r.style.top=x.top,r.style.left=x.left,r.style.bottom=x.bottom,r.style.right=x.right}};Z._calculateFullWidth=function(r){const {currentAlignment:x,_pointerOffsetInPx:t}=this;return"top-left"===x||"bottom-left"===x||"top-right"===x||"bottom-right"===x?r+t:r};Z._calculateAlignmentPosition=function(r,x,t,R){const {currentAlignment:U,_pointerOffsetInPx:ha}=this;R/=2;const ma=t.height-x;t=t.width-r;const {padding:ta}=
this.view;if("bottom-center"===U)return{top:x+ha-ta.top,left:r-R-ta.left};if("top-left"===U)return{bottom:ma+ha-ta.bottom,right:t+ha-ta.right};if("bottom-left"===U)return{top:x+ha-ta.top,right:t+ha-ta.right};if("top-right"===U)return{bottom:ma+ha-ta.bottom,left:r+ha-ta.left};if("bottom-right"===U)return{top:x+ha-ta.top,left:r+ha-ta.left};if("top-center"===U)return{bottom:ma+ha-ta.bottom,left:r-R-ta.left}};Z._calculatePositionStyle=function(r,x){const {dockEnabled:t,view:R}=this;if(R){if(t)return{left:"",
top:"",right:"",bottom:""};if(!F.isNone(r)&&x&&(x=this._calculateFullWidth(x),r=this._calculateAlignmentPosition(r.x,r.y,R,x)))return{top:void 0!==r.top?`${r.top}px`:"auto",left:void 0!==r.left?`${r.left}px`:"auto",bottom:void 0!==r.bottom?`${r.bottom}px`:"auto",right:void 0!==r.right?`${r.right}px`:"auto"}}};Z._viewChange=function(r,x){r&&x&&(this.close(),this.clear())};Z._viewReadyChange=function(r,x){r?(r=this.get("viewModel.view"),this._wireUpView(r)):x&&(this.close(),this.clear())};Z._wireUpView=
function(r){this._destroySpinner();if(r){var {spinnerEnabled:x}=this;x&&this._createSpinner(r);this._setDockEnabledForViewSize(this.dockOptions)}};Z._dockingThresholdCrossed=function(r,x,t){const [R,U]=r,[ha,ma]=x,{width:ta,height:ua}=t;return R<=ta&&ha>ta||R>ta&&ha<=ta||U<=ua&&ma>ua||U>ua&&ma<=ua};Z._updateDockEnabledForViewSize=function(r,x){if(r&&x){var t=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},R=t.left+t.right,U=t.top+t.bottom;t=[];var ha=[];t[0]=r[0]-R;t[1]=r[1]-U;
ha[0]=x[0]-R;ha[1]=x[1]-U;({dockOptions:r}=this);this._dockingThresholdCrossed(t,ha,r.breakpoint)&&this._setDockEnabledForViewSize(r);this._setCurrentDockPosition()}};Z._focusDockButtonNode=function(r){this._focusDockButton&&(this._focusDockButton=!1,r.focus())};Z._closeButtonNodeUpdated=function(r){this._focusClose?(this._focusClose=!1,r.focus()):this._blurClose&&(this._blurClose=!1,r.blur())};Z._mainContainerNodeUpdated=function(r){this._mainContainerNode=r;this._focusContainer?(this._focusContainer=
!1,r.focus()):this._blurContainer&&(this._blurContainer=!1,r.blur())};Z._featureMenuNodeUpdated=function(r){(this._featureMenuNode=r)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,r=r.querySelectorAll("li"),r.length&&r[0].focus())};Z._actionsMenuNodeUpdated=function(r){(this._actionsMenuNode=r)&&this._focusFirstAction&&(this._focusFirstAction=!1,r=r.querySelectorAll("li"),r.length&&r[0].focus())};Z._focusFeatureMenuButtonNode=function(r){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=
!1,r.focus())};Z._focusActionsMenuButtonNode=function(r){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,r.focus())};Z._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};Z._toggleScreenLocationEnabled=function(){const {dockEnabled:r,viewModel:x}=this;x&&(x.screenLocationEnabled=x.active&&!r)};Z._shouldDockAtCurrentViewSize=function(r){var x,t;r=r.breakpoint;const R=null==(x=this.viewModel)?void 0:null==(t=x.view)?void 0:
t.ui;if(!R)return!1;const {width:U,height:ha}=R;if(isNaN(U)||isNaN(ha))return!1;x=r.hasOwnProperty("width")&&U<=r.width;t=r.hasOwnProperty("height")&&ha<=r.height;return x||t};Z._setDockEnabledForViewSize=function(r){r.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(r))};Z._getPageText=function(r,x){return this.featureNavigationVisible?Q.substitute(this.messages.pageText,{index:x+1,total:r}):null};Z._destroySpinner=function(){const {_spinner:r,view:x}=this;r&&(x&&x.ui&&x.ui.remove(this._spinner,
"popup-spinner"),r.destroy(),this._spinner=null)};Z._createSpinner=function(r){r&&(this._spinner=new f({view:r}),r.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};Z._toggleCollapsed=function(){this.collapsed=!this.collapsed};Z._close=function(){this.close();this.view&&this.view.focus()};Z._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};Z._toggleFeatureMenu=function(){const r=!this.featureMenuOpen;this._featureMenuOpenChanged(r);
this.actionsMenuOpen=!1;this.featureMenuOpen=r};Z._toggleActionsMenu=function(){const r=!this.actionsMenuOpen;this._actionsMenuOpenChanged(r);this.featureMenuOpen=!1;this.actionsMenuOpen=r};Z._triggerAction=function(r){const x=r.currentTarget.dataset.actionUid;var {allActions:t}=this.viewModel;r=t.findIndex(R=>R.uid===x);(t=t.getItemAt(r))&&"toggle"===t.type&&(t.value=!t.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(r)};Z._selectFeature=function(r){r=r.currentTarget["data-feature-index"];
isNaN(r)||(this.viewModel.selectedFeatureIndex=r);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};Z._next=function(){this.next()};Z._previous=function(){this.previous()};e._createClass(fa,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},
{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var r,x,t,R,U,ha,ma;return!!(this.selectedFeatureWidget?(null==(r=this.selectedFeatureWidget)?0:null==(x=r.viewModel)?0:x.waitingForContent)||"error"===(null==(t=this.selectedFeatureWidget)?void 0:null==(R=t.viewModel)?void 0:R.state)||(null==(U=this.selectedFeatureWidget)?0:null==(ha=U.viewModel)?0:ha.content):null==(ma=this.viewModel)?0:ma.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&
1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?
this._get("actionsMenuOpen"):!1},set:function(r){this._set("actionsMenuOpen",!!r)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||M},set:function(r){var x={...M};const t=this.get("viewModel.view.breakpoints");var R={};t&&(R.width=t.xsmall,R.height=t.xsmall);r={...x,...r};x={...x.breakpoint,...R};({breakpoint:R}=r);!0===R?
r.breakpoint=x:"object"===typeof R&&(r.breakpoint={...x,...R});this._set("dockOptions",r);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:r,visibleElements:x,headingLevel:t}=this,{selectedFeatureViewModel:R}=this.viewModel,U={...x,title:!1};if(!R)return null;r?(r.viewModel=R,r.visibleElements=U):this._feature=new y({headingLevel:t+1,viewModel:R,visibleElements:U});return this._feature}}]);return fa}(u.FeatureContentMixin(n));k.__decorate([l.property({readOnly:!0})],
b.prototype,"actionsMenuId",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"actionsMenuButtonId",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"featureMenuId",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"titleId",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"contentId",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"hasContent",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"featureNavigationVisible",null);k.__decorate([l.property({readOnly:!0})],
b.prototype,"collapsible",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"featureMenuVisible",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"contentCollapsed",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"dividedActions",null);k.__decorate([w.aliasOf("viewModel.actions")],b.prototype,"actions",void 0);k.__decorate([l.property()],b.prototype,"actionsMenuOpen",null);k.__decorate([l.property()],b.prototype,"alignment",void 0);k.__decorate([w.aliasOf("viewModel.autoCloseEnabled")],
b.prototype,"autoCloseEnabled",void 0);k.__decorate([w.aliasOf("viewModel.autoOpenEnabled")],b.prototype,"autoOpenEnabled",void 0);k.__decorate([w.aliasOf("viewModel.defaultPopupTemplateEnabled")],b.prototype,"defaultPopupTemplateEnabled",void 0);k.__decorate([w.aliasOf("viewModel.content")],b.prototype,"content",void 0);k.__decorate([l.property()],b.prototype,"collapsed",void 0);k.__decorate([l.property()],b.prototype,"collapseEnabled",void 0);k.__decorate([l.property({readOnly:!0})],b.prototype,
"currentAlignment",null);k.__decorate([l.property({readOnly:!0})],b.prototype,"currentDockPosition",null);k.__decorate([l.property()],b.prototype,"dockOptions",null);k.__decorate([l.property()],b.prototype,"dockEnabled",void 0);k.__decorate([w.aliasOf("viewModel.featureCount")],b.prototype,"featureCount",void 0);k.__decorate([l.property()],b.prototype,"featureMenuOpen",void 0);k.__decorate([w.aliasOf("viewModel.features")],b.prototype,"features",void 0);k.__decorate([w.aliasOf("viewModel.goToOverride")],
b.prototype,"goToOverride",void 0);k.__decorate([l.property()],b.prototype,"headingLevel",void 0);k.__decorate([w.aliasOf("viewModel.highlightEnabled")],b.prototype,"highlightEnabled",void 0);k.__decorate([w.aliasOf("viewModel.location")],b.prototype,"location",void 0);k.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);k.__decorate([l.property()],b.prototype,"maxInlineActions",void 0);k.__decorate([l.property(),p.messageBundle("esri/widgets/Popup/t9n/Popup")],
b.prototype,"messages",void 0);k.__decorate([l.property(),p.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);k.__decorate([w.aliasOf("viewModel.promises")],b.prototype,"promises",void 0);k.__decorate([w.aliasOf("viewModel.selectedFeature")],b.prototype,"selectedFeature",void 0);k.__decorate([w.aliasOf("viewModel.selectedFeatureIndex")],b.prototype,"selectedFeatureIndex",void 0);k.__decorate([l.property({readOnly:!0})],b.prototype,"selectedFeatureWidget",null);k.__decorate([l.property()],
b.prototype,"spinnerEnabled",void 0);k.__decorate([w.aliasOf("viewModel.title")],b.prototype,"title",void 0);k.__decorate([w.aliasOf("viewModel.updateLocationEnabled")],b.prototype,"updateLocationEnabled",void 0);k.__decorate([w.aliasOf("viewModel.view")],b.prototype,"view",void 0);k.__decorate([l.property({type:v}),C.vmEvent(["triggerAction","trigger-action"])],b.prototype,"viewModel",void 0);k.__decorate([w.aliasOf("viewModel.visible")],b.prototype,"visible",void 0);k.__decorate([l.property()],
b.prototype,"visibleElements",void 0);k.__decorate([g.cast("visibleElements")],b.prototype,"castVisibleElements",null);k.__decorate([q.accessibleHandler()],b.prototype,"_close",null);k.__decorate([q.accessibleHandler()],b.prototype,"_toggleDockEnabled",null);k.__decorate([q.accessibleHandler()],b.prototype,"_toggleFeatureMenu",null);k.__decorate([q.accessibleHandler()],b.prototype,"_toggleActionsMenu",null);k.__decorate([q.accessibleHandler()],b.prototype,"_triggerAction",null);k.__decorate([q.accessibleHandler()],
b.prototype,"_selectFeature",null);k.__decorate([q.accessibleHandler()],b.prototype,"_next",null);k.__decorate([q.accessibleHandler()],b.prototype,"_previous",null);return b=k.__decorate([d.subclass("esri.widgets.Popup")],b)})},"esri/core/throttle":function(){define(["exports"],function(e){function k(b,z,B,G){let J=null,F=1E3;"number"===typeof z?(F=z,G=B):(J=null!=z?z:null,F=B);let P=0,H;const w=()=>{P=0;b.apply(G,H)};z=(...h)=>{J&&J.apply(G,h);H=h;F?P||(P=setTimeout(w,F)):w()};z.remove=()=>{P&&(clearTimeout(P),
P=0)};z.forceUpdate=()=>{P&&(clearTimeout(P),w())};z.hasPendingUpdates=()=>!!P;return z}e.default=k;e.throttle=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ../intl/substitute".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n,u,v,A,q,p,C){const K={title:!0,content:!0,lastEditedInfo:!0};z=function(L){function Q(M,N){M=L.call(this,M,N)||this;M._contentWidgets=[];M.graphic=null;M.defaultPopupTemplateEnabled=!1;M.headingLevel=2;M.label=void 0;M.messages=null;M.messagesCommon=null;M.messagesURIUtils=null;M.spatialReference=null;M.title=null;M.visibleElements={...K};M.map=null;M.view=null;M.viewModel=new f;return M}k._inheritsLoose(Q,L);var D=Q.prototype;D.initialize=function(){this.own(B.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};D.loadDependencies=function(){return new Promise((M,N)=>e(["../chunks/calcite-notice"],M,N))};D.destroy=function(){this._destroyContentWidgets()};D.castVisibleElements=function(M){return{...K,...M}};D.render=function(){var {state:M}=this.viewModel;M=p.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===M?this.renderError():"loading"===M?this.renderLoading():this.renderContentContainer());return p.tsx("div",
{class:this.classes("esri-feature","esri-widget")},M)};D.setActiveMedia=function(M,N){this.viewModel.setActiveMedia(M,N)};D.nextMedia=function(M){this.viewModel.nextMedia(M)};D.previousMedia=function(M){this.viewModel.previousMedia(M)};D.renderError=function(){const {messagesCommon:M,messages:N,visibleElements:O}=this;return p.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},O.title?p.tsx("div",{key:"error-title",slot:"title"},M.errorMessage):null,p.tsx("div",
{key:"error-message",slot:"message"},N.loadingError))};D.renderLoading=function(){return p.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},p.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};D.renderContentContainer=function(){const {visibleElements:M}=this;return M.content?p.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};D.renderTitle=function(){const {visibleElements:M,
title:N}=this;return M.title?p.tsx(u.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:N}):null};D.renderContent=function(){var M=this.viewModel.content;return M?Array.isArray(M)?M.length?p.tsx("div",{key:"content-content-elements"},M.map(this.renderContentElement,this)):null:"string"===typeof M?(M=this._contentWidgets[0],!M||M.destroyed?null:p.tsx("div",{key:"content-content"},M.render())):this.renderNodeContent(M):null};D.renderContentElement=function(M,N){const {visibleElements:O}=
this;if("boolean"!==typeof O.content&&!O.content[M.type])return null;switch(M.type){case "attachments":return this.renderAttachments(N);case "custom":return this.renderCustom(M,N);case "fields":return this.renderFields(N);case "media":return this.renderMedia(N);case "text":return this.renderText(M,N);case "expression":return this.renderExpression(N);default:return null}};D.renderAttachments=function(M){const N=this._contentWidgets[M];if(!N||N.destroyed)return null;const {state:O,attachmentInfos:Y}=
N.viewModel;return"loading"===O||0<Y.length?p.tsx("div",{key:this._buildKey("attachments-element",M),class:this.classes("esri-feature__content-element")},N.render()):null};D.renderExpression=function(M){const N=this._contentWidgets[M];return!N||N.destroyed?null:p.tsx("div",{key:this._buildKey("expression-element",M),class:"esri-feature__content-element"},N.render())};D.renderCustom=function(M,N){({creator:M}=M);const O=this._contentWidgets[N];return!O||O.destroyed?null:M?p.tsx("div",{key:this._buildKey("custom-element",
N),class:"esri-feature__content-element"},O.render()):null};D.renderFields=function(M){const N=this._contentWidgets[M];return!N||N.destroyed?null:p.tsx("div",{key:this._buildKey("fields-element",M),class:"esri-feature__content-element"},N.render())};D.renderMedia=function(M){const N=this._contentWidgets[M];return!N||N.destroyed?null:p.tsx("div",{key:this._buildKey("media-element",M),class:"esri-feature__content-element"},N.render())};D.renderLastEditInfo=function(){const {visibleElements:M,messages:N}=
this;var {lastEditInfo:O}=this.viewModel;if(!O||!M.lastEditedInfo)return null;const {date:Y,user:fa}=O;O=C.substitute("edit"===O.type?fa?N.lastEditedByUser:N.lastEdited:fa?N.lastCreatedByUser:N.lastCreated,{date:Y,user:fa});return p.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},O)};D.renderText=function(M,N){const O=this._contentWidgets[N];return!O||O.destroyed?null:M.text?p.tsx("div",{key:this._buildKey("text-element",N),
class:this.classes("esri-feature__content-element","esri-feature__text")},O.render()):null};D._buildKey=function(M,...N){const O=this.get("viewModel.graphic.uid")||"0";N=N.join("-");return`${M}__${O}-${N}`};D._destroyContentWidget=function(M){M&&(M.viewModel=null,!M.destroyed&&M.destroy())};D._destroyContentWidgets=function(){this._contentWidgets.forEach(M=>this._destroyContentWidget(M));this._contentWidgets=[]};D._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:M,
visibleElements:N}=this;var O=this.get("viewModel.content");const {contentViewModels:Y}=this.viewModel;Array.isArray(O)?O.forEach((fa,Z)=>{"attachments"===fa.type&&(this._contentWidgets[Z]=new c({displayType:fa.displayType,headingLevel:N.title?M+1:M,viewModel:Y[Z]}));"fields"===fa.type&&(this._contentWidgets[Z]=new d({viewModel:Y[Z]}));"media"===fa.type&&(this._contentWidgets[Z]=new y({viewModel:Y[Z]}));"text"===fa.type&&(this._contentWidgets[Z]=new g({viewModel:Y[Z]}));"custom"===fa.type&&(this._contentWidgets[Z]=
new g({viewModel:Y[Z]}));"expression"===fa.type&&(this._contentWidgets[Z]=new l({viewModel:Y[Z]}))},this):(O=Y[0])&&!O.destroyed&&(this._contentWidgets[0]=new g({viewModel:O}));this.scheduleRender()};return Q}(n.FeatureContentMixin(h));b.__decorate([G.aliasOf("viewModel.graphic")],z.prototype,"graphic",void 0);b.__decorate([G.aliasOf("viewModel.defaultPopupTemplateEnabled")],z.prototype,"defaultPopupTemplateEnabled",void 0);b.__decorate([H.property()],z.prototype,"headingLevel",void 0);b.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],z.prototype,"label",void 0);b.__decorate([H.property(),A.messageBundle("esri/widgets/Feature/t9n/Feature")],z.prototype,"messages",void 0);b.__decorate([H.property(),A.messageBundle("esri/t9n/common")],z.prototype,"messagesCommon",void 0);b.__decorate([H.property(),A.messageBundle("esri/widgets/support/t9n/uriUtils")],z.prototype,"messagesURIUtils",void 0);b.__decorate([G.aliasOf("viewModel.spatialReference")],z.prototype,"spatialReference",void 0);b.__decorate([G.aliasOf("viewModel.title")],
z.prototype,"title",void 0);b.__decorate([H.property()],z.prototype,"visibleElements",void 0);b.__decorate([P.cast("visibleElements")],z.prototype,"castVisibleElements",null);b.__decorate([G.aliasOf("viewModel.map")],z.prototype,"map",void 0);b.__decorate([G.aliasOf("viewModel.view")],z.prototype,"view",void 0);b.__decorate([H.property({type:f})],z.prototype,"viewModel",void 0);return z=b.__decorate([w.subclass("esri.widgets.Feature")],z)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d){B=function(y){function f(u,v){u=y.call(this,u,v)||this;u._featureElementInfo=null;u.attachmentsWidget=new H;u.description=null;u.displayType=null;u.graphic=null;u.headingLevel=2;u.title=null;u.viewModel=new h;return u}e._inheritsLoose(f,y);var n=f.prototype;n.initialize=function(){this._featureElementInfo=new c;b.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());b.init(this,"viewModel.graphic",u=>this.attachmentsWidget.graphic=
u)};n.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};n.render=function(){var u;const {attachmentsWidget:v}=this;return d.tsx("div",{class:"esri-feature-attachments"},null==(u=this._featureElementInfo)?void 0:u.render(),null==v?void 0:v.render())};n._setupFeatureElementInfo=function(){const {description:u,title:v,headingLevel:A}=this;this._featureElementInfo.set({description:u,title:v,headingLevel:A})};return f}(w);k.__decorate([F.property({readOnly:!0})],B.prototype,
"attachmentsWidget",void 0);k.__decorate([z.aliasOf("viewModel.description")],B.prototype,"description",void 0);k.__decorate([z.aliasOf("attachmentsWidget.displayType")],B.prototype,"displayType",void 0);k.__decorate([z.aliasOf("viewModel.graphic")],B.prototype,"graphic",void 0);k.__decorate([F.property()],B.prototype,"headingLevel",void 0);k.__decorate([z.aliasOf("viewModel.title")],B.prototype,"title",void 0);k.__decorate([F.property({type:h})],B.prototype,"viewModel",void 0);return B=k.__decorate([P.subclass("esri.widgets.Feature.FeatureAttachments")],
B)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f){const n={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},u=window.CSS;J=function(v){function A(p,C){p=v.call(this,p,C)||this;p.abilities=null;p.displayType="auto";p.graphic=null;p.label=void 0;p.messages=null;p.messagesUnits=null;p.selectedFile=null;p.submitting=!1;p.viewModel=new c;p.visibleElements={...n};p._supportsImageOrientation=u&&u.supports&&u.supports("image-orientation",
"from-image");p._addAttachmentForm=null;p._updateAttachmentForm=null;return p}e._inheritsLoose(A,v);var q=A.prototype;q.initialize=function(){this.own(B.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),B.init(this,"viewModel.mode",()=>this._modeChanged()))};q.castVisibleElements=function(p){return{...n,...p}};q.addAttachment=function(){const {_addAttachmentForm:p,viewModel:C}=this;this._set("submitting",!0);this._set("error",null);return C.addAttachment(p).then(K=>{this._set("submitting",
!1);this._set("error",null);C.mode="view";return K}).catch(K=>{this._set("submitting",!1);this._set("error",new b("attachments:add-attachment",this.messages.addErrorMessage,K));throw K;})};q.deleteAttachment=function(p){const {viewModel:C}=this;this._set("submitting",!0);this._set("error",null);return C.deleteAttachment(p).then(K=>{this._set("submitting",!1);this._set("error",null);C.mode="view";return K}).catch(K=>{this._set("submitting",!1);this._set("error",new b("attachments:delete-attachment",
this.messages.deleteErrorMessage,K));throw K;})};q.updateAttachment=function(){const {viewModel:p}=this,{_updateAttachmentForm:C}=this;this._set("submitting",!0);this._set("error",null);return p.updateAttachment(C).then(K=>{this._set("submitting",!1);this._set("error",null);p.mode="view";return K}).catch(K=>{this._set("submitting",!1);this._set("error",new b("attachments:update-attachment",this.messages.updateErrorMessage,K));throw K;})};q.render=function(){const {submitting:p,viewModel:C}=this,{state:K}=
C;return f.tsx("div",{class:this.classes("esri-attachments","esri-widget")},p?this.renderProgressBar():null,"loading"===K?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};q.renderErrorMessage=function(){const {error:p,visibleElements:C}=this;return p&&C.errorMessage?f.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},p.message):null};q.renderAttachments=function(){const {mode:p,activeAttachmentInfo:C}=this.viewModel;return"add"===p?this.renderAddForm():
"edit"===p?this.renderDetailsForm(C):this.renderAttachmentContainer()};q.renderLoading=function(){return f.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},f.tsx("div",{class:"esri-attachments__loader"}))};q.renderProgressBar=function(){return this.visibleElements.progressBar?f.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};q.renderAddForm=function(){const {submitting:p,selectedFile:C}=this;var K=p||!C,L=this.visibleElements.cancelAddButton?f.tsx("button",
{type:"button",bind:this,disabled:p,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",p&&"esri-button--disabled")},this.messages.cancel):null;K=this.visibleElements.addSubmitButton?f.tsx("button",{type:"submit",disabled:K,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:K})},this.messages.add):null;const Q=C?f.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
C.name):null;L=f.tsx("form",{bind:this,afterCreate:l.storeNode,afterRemoved:l.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},f.tsx("fieldset",{class:"esri-attachments__file-fieldset"},Q,f.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},C?this.messages.changeFile:this.messages.selectFile,f.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
K,L);return f.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},L)};q.renderDetailsForm=function(p){const {visibleElements:C,viewModel:K,selectedFile:L,submitting:Q}=this,{contentType:D,size:M,url:N}=p;var {abilities:O}=K,Y=Q||!L,fa=O.editing&&O.operations.delete&&C.deleteButton?f.tsx("button",{key:"delete-button",type:"button",disabled:Q,bind:this,onclick:t=>this._submitDeleteAttachment(t,p),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:Q})},this.messages.delete):null;Y=O.editing&&O.operations.update&&C.updateButton?f.tsx("button",{disabled:Y,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:Y})},this.messages.update):null;const Z=this.visibleElements.cancelUpdateButton?f.tsx("button",{disabled:Q,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:Q})},this.messages.cancel):null;var r=L?f.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},L.name):null;O=O.editing&&O.operations.update?f.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},r,f.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,f.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;r=f.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},f.tsx("label",null,z.formatFileSize(this.messagesUnits,M)));const x=f.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},f.tsx("label",null,D));fa=f.tsx("form",{bind:this,afterCreate:l.storeNode,afterRemoved:l.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},f.tsx("div",{class:"esri-attachments__metadata"},
r,x),O,f.tsx("div",{class:"esri-attachments__actions"},fa,Z,Y));return f.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},f.tsx("a",{class:"esri-attachments__item-link",href:N,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:p,size:400}),f.tsx("div",{class:"esri-attachments__item-link-overlay"},f.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},f.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},f.tsx("path",
{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),f.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),fa)};q.renderImageMask=function({attachmentInfo:p,size:C}){var {supportsResizeAttachments:K}=this.viewModel;const {contentType:L,name:Q,url:D}=p,M=K&&g.isSupportedImage(L);p=(p=this._getCSSTransform(p,M))?{transform:p,"image-orientation":"none"}:{};const N=-1===D.indexOf("?")?"?":"\x26";C=M?`${D}${N}w=${C}`:g.getIconPath(L);K={["esri-attachments__image--resizable"]:K};
return f.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!M},"esri-attachments__item-mask")},f.tsx("img",{styles:p,alt:Q,src:C,class:this.classes(K,"esri-attachments__image")}))};q.renderAttachmentInfo=function({attachmentInfo:p,displayType:C}){var {viewModel:K}=this;({abilities:K}=K);const {name:L,url:Q}=p;C=this.renderImageMask({attachmentInfo:p,size:"list"===C?48:400});var D=K.editing?f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
l.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;D=f.tsx("label",{class:"esri-attachments__label"},f.tsx("span",{class:"esri-attachments__filename"},L||this.messages.noTitle),D);C=[C,D];K=K.editing?f.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":p.id,onclick:()=>this._startEditAttachment(p),type:"button"},C):f.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:Q,target:"_blank"},C);return f.tsx("li",{class:"esri-attachments__item",key:p},K)};q.renderAttachmentContainer=function(){const {effectiveDisplayType:p,viewModel:C,visibleElements:K}=this,{attachmentInfos:L,abilities:Q}=C;var D=L&&L.length;const M={["esri-attachments__container--list"]:"preview"!==p,["esri-attachments__container--preview"]:"preview"===p},N=Q.editing&&Q.operations.add&&K.addButton?f.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),
class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},f.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;D=D?f.tsx("ul",{class:"esri-attachments__items"},L.toArray().map(O=>this.renderAttachmentInfo({attachmentInfo:O,displayType:p}))):f.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return f.tsx("div",{key:"attachments-container",
class:this.classes("esri-attachments__container",M)},D,N)};q._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};q._handleFileInputChange=function(p){p=(p=p.target)&&p.files&&p.files.item(0);this._set("selectedFile",p)};q._submitDeleteAttachment=function(p,C){p.preventDefault();this.deleteAttachment(C)};q._submitAddAttachment=function(p){p.preventDefault();this.addAttachment()};q._submitUpdateAttachment=function(p){p.preventDefault();this.updateAttachment()};q._startEditAttachment=
function(p){const {viewModel:C}=this;C.activeAttachmentInfo=p;C.mode="edit"};q._startAddAttachment=function(){this.viewModel.mode="add"};q._cancelForm=function(p){p.preventDefault();this.viewModel.mode="view"};q._getCSSTransform=function(p,C){({orientationInfo:p}=p);return!this._supportsImageOrientation&&C&&p?[p.rotation?`rotate(${p.rotation}deg)`:"",p.mirrored?"scaleX(-1)":""].join(" "):""};e._createClass(A,[{key:"effectiveDisplayType",get:function(){return"auto"===this.displayType?this.viewModel.supportsResizeAttachments?
"preview":"list":this.displayType}}]);return A}(h);k.__decorate([G.aliasOf("viewModel.abilities")],J.prototype,"abilities",void 0);k.__decorate([H.property()],J.prototype,"displayType",void 0);k.__decorate([H.property({readOnly:!0})],J.prototype,"effectiveDisplayType",null);k.__decorate([G.aliasOf("viewModel.graphic")],J.prototype,"graphic",void 0);k.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],J.prototype,"label",void 0);k.__decorate([H.property(),d.messageBundle("esri/widgets/Attachments/t9n/Attachments")],
J.prototype,"messages",void 0);k.__decorate([H.property(),d.messageBundle("esri/core/t9n/Units")],J.prototype,"messagesUnits",void 0);k.__decorate([H.property({readOnly:!0})],J.prototype,"selectedFile",void 0);k.__decorate([H.property({readOnly:!0})],J.prototype,"submitting",void 0);k.__decorate([H.property({readOnly:!0})],J.prototype,"error",void 0);k.__decorate([H.property({type:c})],J.prototype,"viewModel",void 0);k.__decorate([H.property()],J.prototype,"visibleElements",void 0);k.__decorate([P.cast("visibleElements")],
J.prototype,"castVisibleElements",null);return J=k.__decorate([w.subclass("esri.widgets.Attachments")],J)})},"esri/core/unitFormatUtils":function(){define(["exports","./mathUtils","./string","./unitUtils","../intl/number"],function(e,k,b,z,B){function G(P,H,w){return P.units[H][w]}function J(P,H,w,h=2,c="abbr"){return`${B.formatNumber(H,{minimumFractionDigits:h,maximumFractionDigits:h})} ${G(P,w,c)}`}const F=["B","kB","MB","GB","TB"];e.formatAngleDegrees=function(P,H,w=2){P=z.convertUnit(P,H,"degrees");
return B.formatNumber(P,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:w,minimumFractionDigits:w})};e.formatDMS=function(P,H,w=2){P=z.convertUnit(P,H,"degrees");H=P-Math.floor(P);P-=H;H*=60;let h=H-Math.floor(H);H-=h;h*=60;return`${P.toFixed()}\u00b0 ${H.toFixed()}' ${h.toFixed(w)}"`};e.formatDecimal=J;e.formatFileSize=function(P,H){let w=0===H?0:Math.floor(Math.log(H)/Math.log(1024));w=k.clamp(w,0,F.length-1);H=B.formatNumber(H/1024**w,{maximumFractionDigits:2});return b.replace(P.units.bytes[F[w]],
{fileSize:H})};e.formatImperialArea=function(P,H,w,h=2,c="abbr"){const g=z.preferredImperialAreaUnit(H,w);return J(P,z.convertUnit(H,w,g),g,h,c)};e.formatImperialLength=function(P,H,w,h=2,c="abbr"){const g=z.preferredImperialLengthUnit(H,w);return J(P,z.convertUnit(H,w,g),g,h,c)};e.formatImperialVerticalLength=function(P,H,w,h=2,c="abbr"){const g=z.preferredImperialVerticalLengthUnit(H,w);return J(P,z.convertUnit(H,w,g),g,h,c)};e.formatMetricArea=function(P,H,w,h=2,c="abbr"){const g=z.preferredMetricAreaUnit(H,
w);return J(P,z.convertUnit(H,w,g),g,h,c)};e.formatMetricLength=function(P,H,w,h=2,c="abbr"){const g=z.preferredMetricLengthUnit(H,w);return J(P,z.convertUnit(H,w,g),g,h,c)};e.formatMetricVerticalLength=function(P,H,w,h=2,c="abbr"){const g=z.preferredMetricVerticalLengthUnit(H,w);return J(P,z.convertUnit(H,w,g),g,h,c)};e.unitName=G;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d){const y={editing:!1,operations:{add:!0,update:!0,delete:!0}},f=z.ofType(g);z=function(n){function u(A){var q=n.call(this,A)||this;q._getAttachmentsPromise=null;q._attachmentLayer=null;q.abilities={...y};q.activeAttachmentInfo=null;q.attachmentInfos=new f;q.graphic=null;q.mode="view";q.handles.add([F.init(e._assertThisInitialized(q),"graphic",()=>q._graphicChanged())]);return q}e._inheritsLoose(u,n);var v=u.prototype;v.destroy=function(){this.graphic=this._attachmentLayer=
null};v.castAbilities=function(A){return{...y,...A}};v.getAttachments=function(){var A=e._asyncToGenerator(function*(){const {_attachmentLayer:q,attachmentInfos:p}=this;if(!q||"function"!==typeof q.queryAttachments)throw new B("invalid-layer","getAttachments(): A valid layer is required.");const C=this._getFeatureId();var K=new l({objectIds:[C],returnMetadata:!0});const L=[];this._getAttachmentsPromise=K=q.queryAttachments(K).then(Q=>Q[C]||L).catch(()=>L);this.notifyChange("state");K=yield K;p.removeAll();
K.length&&p.addMany(K);this._getAttachmentsPromise=null;this.notifyChange("state");return K});return function(){return A.apply(this,arguments)}}();v.addAttachment=function(){var A=e._asyncToGenerator(function*(q){const {_attachmentLayer:p,attachmentInfos:C,graphic:K,abilities:L}=this;if(!q)throw new B("invalid-attachment","addAttachment(): An attachment is required.",{attachment:q});if(!L.operations.add)throw new B("invalid-abilities","addAttachment(): add abilities are required.");if(!p||"function"!==
typeof p.addAttachment)throw new B("invalid-layer","addAttachment(): A valid layer is required.");q=yield p.addAttachment(K,q).then(Q=>this._queryAttachment(Q.objectId));C.add(q);return q});return function(q){return A.apply(this,arguments)}}();v.deleteAttachment=function(){var A=e._asyncToGenerator(function*(q){const {_attachmentLayer:p,attachmentInfos:C,graphic:K,abilities:L}=this;if(!q)throw new B("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:q});
if(!L.operations.delete)throw new B("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!p||"function"!==typeof p.deleteAttachments)throw new B("invalid-layer","deleteAttachment(): A valid layer is required.");const Q=yield p.deleteAttachments(K,[q.id]).then(()=>q);C.remove(Q);return Q});return function(q){return A.apply(this,arguments)}}();v.updateAttachment=function(){var A=e._asyncToGenerator(function*(q,p=this.activeAttachmentInfo){const {_attachmentLayer:C,attachmentInfos:K,
graphic:L,abilities:Q}=this;if(!q)throw new B("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:q});if(!p)throw new B("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:p});if(!Q.operations.update)throw new B("invalid-abilities","updateAttachment(): Update abilities are required.");const D=K.findIndex(M=>M===p);if(!C||"function"!==typeof C.updateAttachment)throw new B("invalid-layer","updateAttachment(): A valid layer is required.");
q=yield C.updateAttachment(L,p.id,q).then(M=>this._queryAttachment(M.objectId));K.splice(D,1,q);return q});return function(q){return A.apply(this,arguments)}}();v._queryAttachment=function(){var A=e._asyncToGenerator(function*(q){if(!q)throw new B("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:p}=this,C=this._getFeatureId();q=new l({objectIds:[C],attachmentsWhere:`AttachmentId=${q}`,returnMetadata:!0});return p.queryAttachments(q).then(K=>K[C][0])});return function(q){return A.apply(this,
arguments)}}();v._getFeatureId=function(){const {_attachmentLayer:A,graphic:q}=this;if(!A||!q)return null;const {objectIdField:p}=A,{attributes:C}=q;return C&&C[p]};v._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};v._setAttachmentLayer=function(){var {graphic:A}=this;this._attachmentLayer=(A=d.getSourceLayer(A))?"scene"===A.type&&J.isSome(A.associatedLayer)?A.associatedLayer:A:null};e._createClass(u,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return u}(G.HandleOwner);k.__decorate([P.property()],z.prototype,"abilities",void 0);k.__decorate([h.cast("abilities")],z.prototype,"castAbilities",null);k.__decorate([P.property()],z.prototype,"activeAttachmentInfo",void 0);k.__decorate([P.property({readOnly:!0,type:f})],z.prototype,"attachmentInfos",void 0);k.__decorate([P.property({type:b})],
z.prototype,"graphic",void 0);k.__decorate([P.property()],z.prototype,"mode",void 0);k.__decorate([P.property({readOnly:!0})],z.prototype,"state",null);k.__decorate([P.property({readOnly:!0})],z.prototype,"supportsResizeAttachments",null);return z=k.__decorate([c.subclass("esri.widgets.Attachments.AttachmentsViewModel")],z)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w){function h(){h=k._asyncToGenerator(function*(ea,da){return"function"===typeof ea?ea.call(null,da):ea});return h.apply(this,arguments)}function c(ea){return ea?U.test(ea):!1}function g(ea,da){if(!c(da)||!ea)return null;const S=da.replace(U,"").toLowerCase();let X;ea.some(W=>W.name.toLowerCase()===S?(X=W,!0):!1);return X}function l(ea,da){return(da=d(da,ea))?da.name:ea}function d(ea,da){return ea&&"function"===typeof ea.getField?ea.getField(da):null}function y({formattedAttributes:ea,
template:da,fieldInfoMap:S}){return`${G.replace(G.replace(da,X=>{{const W=S.get(X.toLowerCase());X=`{${W&&W.fieldName||X}}`}return X}),ea).replace(x,"")}`.trim()}function f(ea,da,S=!1){const X=da[ea];"string"===typeof X&&(S=(S?encodeURIComponent(X):X).replace(R,"%27"),da[ea]=S)}function n(ea,da=!1){const S={...ea};Object.keys(S).forEach(X=>f(X,S,da));return S}function u(ea,da){return ea.replace(t,(S,X,W)=>(S=d(da,W))?`{${S.name}}`:X)}function v(ea,da,S){return(ea=u(ea,S))?ea.replace(ta,(X,W,ba)=>
{W=`${W||ba}`.trim();return G.replace(X,n(da,W&&"{"!==W[0]))}):ea}function A(ea,da){var S=da.fieldName,X=q(da.fieldInfos,S),W=null==X?void 0:X.clone();X=da.preventPlacesFormatting;da=da.layer;S=d(da,S);if(W&&"date"===(null==S?void 0:S.type)){S=W.format||new H;S.dateFormat=S.dateFormat||"short-date-short-time";var ba;if(!(ba="feature"===(null==da?void 0:da.type)&&da.datesInUnknownTimezone)){if(ba=!(null==da||!da.layer))ba=da.layer,ba="map-image"===(null==ba?void 0:ba.type);ba=ba&&da.layer.datesInUnknownTimezone}S.dateTimeFormatOptions=
ba?{timeZone:"UTC"}:null;W.format=S}W=W&&W.format;"string"!==typeof ea||!W||null!=W.dateFormat||null==W.places&&null==W.digitSeparator||(da=Number(ea),isNaN(da)||(ea=da));return"string"===typeof ea||null==ea||null==W?K(ea):X?F.formatNumber(ea,{...F.convertNumberFormatToIntlOptions(W),minimumFractionDigits:0,maximumFractionDigits:20}):W.format(ea)}function q(ea,da){if(ea&&ea.length&&da){var S=da.toLowerCase(),X=void 0;ea.some(W=>W.fieldName&&W.fieldName.toLowerCase()===S?(X=W,!0):!1);return X}}function p({fieldName:ea,
graphic:da,layer:S}){if(Y(ea)||!S||"function"!==typeof S.getFeatureType)return null;const {typeIdField:X}=S;return X&&ea===X?(ea=S.getFeatureType(da))?ea.name:null:null}function C({fieldName:ea,value:da,graphic:S,layer:X}){return Y(ea)||!X||"function"!==typeof X.getFieldDomain?null:(ea=X.getFieldDomain(ea,{feature:S}))&&"coded-value"===ea.type?ea.getName(da):null}function K(ea){return"string"===typeof ea?ea.replace(ha,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):ea}function L(ea){const {value:da,
fieldName:S,fieldInfos:X,fieldInfoMap:W,layer:ba,graphic:ka}=ea;return null==da?"":(ea=C({fieldName:S,value:da,graphic:ka,layer:ba}))||(ea=p({fieldName:S,graphic:ka,layer:ba}))?ea:W.get(S.toLowerCase())?A(da,{fieldInfos:X,fieldName:S,layer:ba}):(ea=ba&&ba.fieldsIndex)&&ea.isDateField(S)?J.formatDate(da,Da):K(da)}function Q(ea,da){return D.apply(this,arguments)}function D(){D=k._asyncToGenerator(function*(ea,da){var S,X;const {layer:W,graphic:ba,outFields:ka,objectIds:ia,returnGeometry:oa,spatialReference:la}=
ea;ea=ia[0];if("number"!==typeof ea&&"string"!==typeof ea)return r.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:W,graphic:ba,objectId:ea,requiredFields:ka}),null;if(null==(S=W.capabilities)||null==(X=S.operations)||!X.supportsQuery)return r.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:W,graphic:ba,requiredFields:ka,returnGeometry:oa}),null;S=W.createQuery();S.objectIds=ia;S.outFields=null!=
ka&&ka.length?ka:[W.objectIdField];S.returnGeometry=!!oa;S.returnZ=!!oa;S.returnM=!!oa;S.outSpatialReference=la;return(yield W.queryFeatures(S,da)).features[0]});return D.apply(this,arguments)}function M(ea){return N.apply(this,arguments)}function N(){N=k._asyncToGenerator(function*(ea){var da;if(null==(da=ea.expressionInfos)||!da.length)return!1;da=yield w.loadArcade();({arcadeUtils:{hasGeometryFunctions:da}}=da);return da(ea)});return N.apply(this,arguments)}function O(){O=k._asyncToGenerator(function*({graphic:ea,
popupTemplate:da,layer:S,spatialReference:X},W){if(S&&da&&("function"===typeof S.load&&(yield S.load(W)),ea.attributes)){var ba=ea.attributes[S.objectIdField];if(null!=ba){ba=[ba];var ka=yield da.getRequiredFields(S.fieldsIndex),ia=P.featureHasFields(ka,ea);ka=ia?[]:ka;da=da.returnGeometry||(yield M(da));if(!ia||da)if(S=yield Q({layer:S,graphic:ea,outFields:ka,objectIds:ba,returnGeometry:da,spatialReference:X},W))S.geometry&&(ea.geometry=S.geometry),S.attributes&&(ea.attributes={...ea.attributes,
...S.attributes})}}});return O.apply(this,arguments)}function Y(ea=""){return ea?-1!==ea.indexOf("relationships/"):!1}function fa({attributes:ea,graphic:da,relatedInfo:S}){ea&&da&&S&&Object.keys(da.attributes).forEach(X=>{var W={layerId:S.relation.id.toString(),fieldName:X};ea[W?`${"relationships/"}${W.layerId}/${W.fieldName}`:""]=da.attributes[X]})}function Z(ea,da){ea&&da&&(da.relatedFeatures&&da.relatedFeatures&&da.relatedFeatures.forEach(S=>fa({attributes:ea,graphic:S,relatedInfo:da})),da.relatedStatsFeatures&&
da.relatedStatsFeatures&&da.relatedStatsFeatures.forEach(S=>fa({attributes:ea,graphic:S,relatedInfo:da})))}const r=z.getLogger("esri.widgets.Feature.support.featureUtils"),x=/href=(""|'')/gi,t=/(\{([^\{\r\n]+)\})/g,R=/'/g,U=/^\s*expression\//i,ha=/(\n)/gi,ma=/[\u00A0-\u9999<>&]/gim,ta=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,ua=/^(?:mailto:|tel:)/,Da=J.convertDateFormatToIntlOptions("short-date-short-time"),Ha=ea=>{if(!ea)return!1;ea=ea.toUpperCase();return-1<ea.indexOf("CURRENT_TIMESTAMP")||-1<ea.indexOf("CURRENT_DATE")||
-1<ea.indexOf("CURRENT_TIME")},Aa=({layer:ea,method:da,query:S,definitionExpression:X})=>{var W,ba;null!=(W=ea.capabilities)&&null!=(ba=W.query)&&ba.supportsCacheHint&&"attachments"!==da&&(ea=B.isSome(S.where)&&S.where,da=B.isSome(S.geometry)&&S.geometry,Ha(X)||Ha(ea)||"extent"===(null==da?void 0:da.type)||"tile"===S.resultType||(S.cacheHint=!0))};e.applyTextFormattingHTML=K;e.createfieldInfoMap=function(ea,da){const S=new Map;ea&&ea.forEach(X=>{const W=l(X.fieldName,da);X.fieldName=W;S.set(W.toLowerCase(),
X)});return S};e.fixTokens=u;e.formatAttributes=function({fieldInfos:ea,attributes:da,layer:S,graphic:X,fieldInfoMap:W,relatedInfos:ba}){const ka={};null==ba?void 0:ba.forEach(ia=>Z(ka,ia));Object.keys(da).forEach(ia=>{ka[ia]=L({fieldName:ia,fieldInfos:ea,fieldInfoMap:W,layer:S,value:da[ia],graphic:X})});return ka};e.formatEditInfo=function(ea,da){const {creatorField:S,creationDateField:X,editorField:W,editDateField:ba}=ea;if(da){ea=da[ba];if("number"===typeof ea)return da=da[W],{type:"edit",date:J.formatDate(ea,
Da),user:da};ea=da[X];return"number"===typeof ea?(da=da[S],{type:"create",date:J.formatDate(ea,Da),user:da}):null}};e.formatValueToFieldInfo=A;e.getAllFieldInfos=function(ea){const da=[];if(!ea)return da;const {fieldInfos:S,content:X}=ea;S&&da.push(...S);if(!X||!Array.isArray(X))return da;X.forEach(W=>{"fields"===W.type&&(W=W&&W.fieldInfos)&&da.push(...W)});return da};e.getFieldInfo=q;e.getFieldInfoLabel=function(ea,da){return(da=g(da,null==ea?void 0:ea.fieldName))?da.title||null:ea?ea.label||ea.fieldName:
null};e.getFixedFieldName=l;e.getFixedFieldNames=function(ea,da){return ea&&ea.map(S=>l(S,da))};e.getSourceLayer=function(ea){if(!B.isNone(ea))return ea.get("sourceLayer")||ea.get("layer")};e.graphicCallback=function(ea,da){return h.apply(this,arguments)};e.htmlEntities=function(ea){return ea.replace(ma,da=>`&#${da.charCodeAt(0)};`)};e.isExpressionField=c;e.isRelatedField=Y;e.preLayerQueryCallback=({query:ea,layer:da,method:S})=>{Aa({layer:da,method:S,query:ea,definitionExpression:`${da.definitionExpression} ${da.serviceDefinitionExpression}`})};
e.preRequestCallback=({queryPayload:ea,layer:da,method:S})=>{Aa({layer:da,method:S,query:ea,definitionExpression:`${da.definitionExpression} ${da.serviceDefinitionExpression}`})};e.queryUpdatedFeature=function(ea,da){return O.apply(this,arguments)};e.shouldOpenInNewTab=function(ea=""){if(ea)return!ua.test(ea.trim().toLowerCase())};e.substituteAttributes=y;e.substituteFieldsInLinksAndAttributes=function({attributes:ea,globalAttributes:da,layer:S,text:X,expressionAttributes:W,fieldInfoMap:ba}){return X?
y({formattedAttributes:da,template:v(X,{...da,...W,...ea},S),fieldInfoMap:ba}):""};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(e,k){e.getIconPath=function(b){const z=k.getAssetUrl("esri/themes/base/images/files/");return b?"text/plain"===b?`${z}text-32.svg`:"application/pdf"===b?`${z}pdf-32.svg`:"text/csv"===b?`${z}csv-32.svg`:"application/gpx+xml"===b?`${z}gpx-32.svg`:"application/x-dwf"===
b?`${z}cad-32.svg`:"application/postscript"===b||"application/json"===b||"text/xml"===b||"model/vrml"===b?`${z}code-32.svg`:"application/x-zip-compressed"===b||"application/x-7z-compressed"===b||"application/x-gzip"===b||"application/x-tar"===b||"application/x-gtar"===b||"application/x-bzip2"===b||"application/gzip"===b||"application/x-compress"===b||"application/x-apple-diskimage"===b||"application/x-rar-compressed"===b||"application/zip"===b?`${z}zip-32.svg`:-1!==b.indexOf("image/")?`${z}image-32.svg`:
-1!==b.indexOf("audio/")?`${z}sound-32.svg`:-1!==b.indexOf("video/")?`${z}video-32.svg`:-1!==b.indexOf("msexcel")||-1!==b.indexOf("ms-excel")||-1!==b.indexOf("spreadsheetml")?`${z}excel-32.svg`:-1!==b.indexOf("msword")||-1!==b.indexOf("ms-word")||-1!==b.indexOf("wordprocessingml")?`${z}word-32.svg`:-1!==b.indexOf("powerpoint")||-1!==b.indexOf("presentationml")?`${z}report-32.svg`:`${z}generic-32.svg`:`${z}generic-32.svg`};e.isSupportedImage=function(b){b=b.toLowerCase();return"image/bmp"===b||"image/emf"===
b||"image/exif"===b||"image/gif"===b||"image/x-icon"===b||"image/jpeg"===b||"image/png"===b||"image/tiff"===b||"image/x-wmf"===b};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(e,k,b,z,B,G,J,F){z=function(P){function H(w){w=P.call(this,w)||this;w.description=null;w.title=null;return w}e._inheritsLoose(H,P);return H}(F);k.__decorate([b.property()],z.prototype,"description",void 0);k.__decorate([b.property()],z.prototype,"title",void 0);return z=k.__decorate([J.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],z)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../../core/Logger ../../support/jsxFactory".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h){z=function(c){function g(d,y){d=c.call(this,d,y)||this;d.description=null;d.headingLevel=2;d.title=null;return d}e._inheritsLoose(g,c);var l=g.prototype;l.render=function(){return h.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};l.renderTitle=function(){const {title:d}=this;return d?h.tsx(P.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},d):null};l.renderDescription=function(){const {description:d}=
this;return d?h.tsx("div",{key:"description",class:"esri-feature-element-info__description"},d):null};return g}(F);k.__decorate([b.property()],z.prototype,"description",void 0);k.__decorate([b.property()],z.prototype,"headingLevel",void 0);k.__decorate([b.property()],z.prototype,"title",void 0);return z=k.__decorate([J.subclass("esri.widgets.Feature.support.FeatureElementInfo")],z)})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),
function(e,k,b,z,B,G){const J={heading:"esri-widget__heading"};e.CSS=J;e.Heading=function(F,P){const H=`h${k.clamp(Math.ceil(F.level),1,6)}`;delete F.level;return G.tsx(H,{...F,class:b.classes(J.heading,F.class)},P)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c){z=function(g){function l(y,f){y=g.call(this,y,f)||this;y.creator=null;y.graphic=null;y.viewModel=null;y._addTargetToAnchors=n=>{Array.from(n.querySelectorAll("a")).forEach(u=>{w.shouldOpenInNewTab(u.href)&&!u.hasAttribute("target")&&u.setAttribute("target","_blank")})};return y}e._inheritsLoose(l,g);var d=l.prototype;d.renderLoading=function(){return c.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},c.tsx("div",{class:"esri-feature-content__loader"}))};
d.renderCreated=function(){var y;const f=null==(y=this.viewModel)?void 0:y.created;return f?f instanceof HTMLElement?c.tsx("div",{key:f,bind:f,afterCreate:this._attachToNode}):h.isWidget(f)?c.tsx("div",{key:f},!f.destroyed&&f.render()):c.tsx("div",{key:f,innerHTML:f,afterCreate:this._addTargetToAnchors}):null};d.render=function(){var y;const f=null==(y=this.viewModel)?void 0:y.state;return c.tsx("div",{class:"esri-feature-content"},"loading"===f?this.renderLoading():this.renderCreated())};d._attachToNode=
function(y){y.appendChild(this)};return l}(P);k.__decorate([b.aliasOf("viewModel.creator")],z.prototype,"creator",void 0);k.__decorate([b.aliasOf("viewModel.graphic")],z.prototype,"graphic",void 0);k.__decorate([J.property({type:H})],z.prototype,"viewModel",void 0);return z=k.__decorate([F.subclass("esri.widgets.Feature.FeatureContent")],z)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h){z=function(c){function g(d){var y=c.call(this,d)||this;y._loadingPromise=null;y.created=null;y.creator=null;y.destroyer=null;y.graphic=null;y.handles.add(G.init(e._assertThisInitialized(y),"creator",f=>{y._destroyContent();y._createContent(f)}));return y}e._inheritsLoose(g,c);var l=g.prototype;l.destroy=function(){this._destroyContent()};l._destroyContent=function(){const {created:d,graphic:y,destroyer:f}=this;d&&(h.graphicCallback(f,{graphic:y}).catch(()=>null),
this._set("created",null))};l._createContent=function(){var d=e._asyncToGenerator(function*(y){var {graphic:f}=this;this._loadingPromise=y=h.graphicCallback(y,{graphic:f}).catch(()=>null);this.notifyChange("state");f=yield y;y===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",f))});return function(y){return d.apply(this,arguments)}}();e._createClass(g,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return g}(B.HandleOwnerMixin(z));
k.__decorate([J.property({readOnly:!0})],z.prototype,"created",void 0);k.__decorate([J.property()],z.prototype,"creator",void 0);k.__decorate([J.property()],z.prototype,"destroyer",void 0);k.__decorate([J.property({type:b})],z.prototype,"graphic",void 0);k.__decorate([J.property({readOnly:!0})],z.prototype,"state",null);return z=k.__decorate([w.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],z)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d){B=function(y){function f(u,v){u=y.call(this,u,v)||this;u.viewModel=new c;return u}e._inheritsLoose(f,y);var n=f.prototype;n.initialize=function(){b.init(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())};n.destroy=function(){var u;null==(u=this._contentWidget)?void 0:u.destroy();this._contentWidget=null};n.renderLoading=function(){return d.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},d.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};n.render=function(){var u;const {state:v}=this.viewModel;return d.tsx("div",{class:"esri-feature-expression"},"loading"===v?this.renderLoading():"disabled"===v?null:null==(u=this._contentWidget)?void 0:u.render())};n._setupExpressionWidget=function(){var u;const {contentElementViewModel:v,contentElement:A}=this.viewModel,q=null==A?void 0:A.type;null==(u=this._contentWidget)?void 0:u.destroy();this._contentWidget=null;this._contentWidget=v?"fields"===q?new w({viewModel:v}):
"media"===q?new h({viewModel:v}):"text"===q?new H({viewModel:v}):null:null;this.scheduleRender()};return f}(P);k.__decorate([z.property({type:c})],B.prototype,"viewModel",void 0);return B=k.__decorate([F.subclass("esri.widgets.Feature.FeatureExpression")],B)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y){B=function(f){function n(v,A){v=f.call(this,v,A)||this;v._featureElementInfo=null;v.attributes=null;v.description=null;v.expressionInfos=null;v.fieldInfos=null;v.title=null;v.viewModel=new w;v.messages=null;v.messagesURIUtils=null;return v}e._inheritsLoose(n,f);var u=n.prototype;u.initialize=function(){this._featureElementInfo=new h;b.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};u.destroy=function(){this._featureElementInfo.destroy()};
u.renderFieldInfo=function(v,A){var {attributes:q}=this.viewModel;const p=v.fieldName,C=v.label||p;q=q?null==q[p]?"":q[p]:"";v=!(!v.format||!v.format.dateFormat);q="number"!==typeof q||v?c.autoLink(this.messagesURIUtils,q):this._forceLTR(q);v={["esri-feature-fields__field-data--date"]:v};return y.tsx("tr",{key:`fields-element-info-row-${p}-${A}`},y.tsx("th",{key:`fields-element-info-row-header-${p}-${A}`,class:"esri-feature-fields__field-header",innerHTML:C}),y.tsx("td",{key:`fields-element-info-row-data-${p}-${A}`,
class:this.classes("esri-feature-fields__field-data",v),innerHTML:q}))};u.renderFields=function(){const {formattedFieldInfos:v}=this.viewModel;return null!=v&&v.length?y.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},y.tsx("tbody",null,v.map((A,q)=>this.renderFieldInfo(A,q)))):null};u.render=function(){var v;return y.tsx("div",{class:"esri-feature-fields"},null==(v=this._featureElementInfo)?void 0:v.render(),this.renderFields())};u._setupFeatureElementInfo=function(){const {description:v,
title:A}=this;this._featureElementInfo.set({description:v,title:A})};u._forceLTR=function(v){return`&lrm;${v}`};return n}(H);k.__decorate([z.aliasOf("viewModel.attributes")],B.prototype,"attributes",void 0);k.__decorate([z.aliasOf("viewModel.description")],B.prototype,"description",void 0);k.__decorate([z.aliasOf("viewModel.expressionInfos")],B.prototype,"expressionInfos",void 0);k.__decorate([z.aliasOf("viewModel.fieldInfos")],B.prototype,"fieldInfos",void 0);k.__decorate([z.aliasOf("viewModel.title")],
B.prototype,"title",void 0);k.__decorate([F.property({type:w})],B.prototype,"viewModel",void 0);k.__decorate([F.property(),l.messageBundle("esri/widgets/Feature/t9n/Feature")],B.prototype,"messages",void 0);k.__decorate([F.property(),l.messageBundle("esri/widgets/support/t9n/uriUtils")],B.prototype,"messagesURIUtils",void 0);return B=k.__decorate([P.subclass("esri.widgets.Feature.FeatureFields")],B)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w){b=function(h){function c(g){g=h.call(this,g)||this;g.attributes=null;g.expressionInfos=null;g.description=null;g.fieldInfos=null;g.title=null;return g}e._inheritsLoose(c,h);e._createClass(c,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:g,fieldInfos:l}=this,d=[];null==l?void 0:l.forEach(y=>{if(!y.hasOwnProperty("visible")||y.visible)y=y.clone(),y.label=w.getFieldInfoLabel(y,g),d.push(y)});return d}}]);return c}(b);k.__decorate([z.property()],b.prototype,
"attributes",void 0);k.__decorate([z.property({type:[P]})],b.prototype,"expressionInfos",void 0);k.__decorate([z.property()],b.prototype,"description",void 0);k.__decorate([z.property({type:[H]})],b.prototype,"fieldInfos",void 0);k.__decorate([z.property({readOnly:!0})],b.prototype,"formattedFieldInfos",null);k.__decorate([z.property()],b.prototype,"title",void 0);return b=k.__decorate([F.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],b)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(e,k){function b(B){let G=null;z.some(J=>{J.pattern.test(B)&&(G=J);return!!G});return G}const z=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];e.autoLink=function(B,G){if("string"!==typeof G||!G)return G;const J=b(G);if(!J)return G;const F=G.match(J.pattern);
B=k.replace(k.replace(J.label,{messages:B,hierPart:F&&F[2]}),{appName:J.appName});return G.replace(J.pattern,`<a${J.target?` target="${J.target}"`:""} href="$1"${"_blank"===J.target?' rel\x3d"noreferrer"':""}>${B}</a>`)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n){G=function(u){function v(q,p){var C=u.call(this,q,p)||this;C._refreshTimer=null;C._refreshIntervalInfo=null;C._featureElementInfo=null;C.attributes=null;C.activeMediaInfoIndex=null;C.description=null;C.fieldInfoMap=null;C.layer=null;C.mediaInfos=null;C.popupTemplate=null;C.relatedInfos=null;C.title=null;C.viewModel=new h;C.messages=null;C._getChartDependencies=function(){var K=e._asyncToGenerator(function*(L){const Q=yield l.loadChartsModule();var {viewModel:D}=
e._assertThisInitialized(C);D&&({activeMediaInfo:D}=D,C._renderChart({chartDiv:L,mediaInfo:D,chartsModule:Q}))});return function(L){return K.apply(this,arguments)}}();return C}e._inheritsLoose(v,u);var A=v.prototype;A.initialize=function(){this._featureElementInfo=new c;this.own(z.init(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),z.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};A.destroy=function(){this._clearMediaRefreshTimer();
this._featureElementInfo.destroy()};A.render=function(){var q;return n.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(q=this._featureElementInfo)?void 0:q.render(),this.renderMedia())};A.renderMedia=function(){const {formattedMediaInfoCount:q}=this.viewModel;return q?n.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};A.renderImageMediaInfo=
function(q){var {_refreshIntervalInfo:p}=this;const {activeMediaInfoIndex:C,formattedMediaInfoCount:K}=this.viewModel,{value:L,refreshInterval:Q,altText:D,title:M,type:N}=q,{sourceURL:O,linkURL:Y}=L;q=g.shouldOpenInNewTab(Y)?"_blank":"_self";const fa="_blank"===q?"noreferrer":"";p=Q?p:null;p=n.tsx("img",{alt:D||M,key:`media-${N}-${C}-${K}-${p?p.timestamp:0}`,src:p?p.sourceURL:O});return(q=Y?n.tsx("a",{title:M,href:Y,rel:fa,target:q},p):null)?q:p};A.renderChartMediaInfo=function(q){const {activeMediaInfoIndex:p,
formattedMediaInfoCount:C}=this.viewModel;return n.tsx("div",{key:`media-${q.type}-${p}-${C}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};A.renderMediaInfoType=function(){const {activeMediaInfo:q}=this.viewModel;return q?"image"===q.type?this.renderImageMediaInfo(q):-1!==q.type.indexOf("chart")?this.renderChartMediaInfo(q):null:null};A.renderMediaInfo=function(){var {activeMediaInfo:q}=this.viewModel;if(!q)return null;const p=q.title?n.tsx("div",{key:"media-title",
class:"esri-feature-media__item-title",innerHTML:q.title}):null;q=q.caption?n.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:q.caption}):null;return n.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},n.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),p,q)};A.renderMediaPageButton=function(q){if(2>this.viewModel.formattedMediaInfoCount)return null;const p=(q="previous"===q)?this.messages.previous:
this.messages.next,C=q?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),K=q?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),L=q?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return n.tsx("button",{type:"button",key:q?"media-previous":"media-next",title:p,"aria-label":p,tabIndex:0,class:C,bind:this,onclick:q?this._previous:this._next},n.tsx("span",{"aria-hidden":"true",class:K}),n.tsx("span",{"aria-hidden":"true",class:L}))};A._setupFeatureElementInfo=function(){const {description:q,title:p}=this;this._featureElementInfo.set({description:q,title:p})};A._next=function(){this.viewModel.next()};
A._previous=function(){this.viewModel.previous()};A._handleMediaKeyup=function(q){const p=b.eventKey(q);"ArrowLeft"===p&&(q.stopPropagation(),this.viewModel.previous());"ArrowRight"===p&&(q.stopPropagation(),this.viewModel.next())};A._renderChart=function(q){const {chartsModule:p,chartDiv:C,mediaInfo:K}=q,{value:L,type:Q}=K,{am4core:D}=p,M=l.getColorSet(D);d.isDarkTheme()&&D.useTheme(p.am4themes_dark);D.useTheme(p.am4themes_animated);D.useTheme(function(N){N instanceof D.ColorSet&&M&&(N.list=M)});
q="pie-chart"===Q?this._createPieChart(q):this._createXYChart(q);C.setAttribute("aria-label",K.altText||K.title);q.data=L.series.map(N=>({tooltip:N.tooltip,value:N.value})).filter(N=>"pie-chart"===Q?0<N.value:!0)};A._customizeChartTooltip=function(q,p){q.label.wrap=!0;q.label.maxWidth=200;q.autoTextColor=!1;q.getFillFromObject=!1;q.label.fill=p.color("#ffffff");q.background.fill=p.color({r:0,g:0,b:0,a:.7})};A._createPieChart=function(q){const {chartDiv:p,chartsModule:C}=q,{am4core:K,am4charts:L}=
C;q=K.create(p,L.PieChart);q.rtl=d.isRTL(this.container);const Q=q.series.push(new L.PieSeries);Q.labels.template.disabled=!0;Q.ticks.template.disabled=!0;Q.dataFields.value="value";Q.dataFields.category="tooltip";this._customizeChartTooltip(Q.tooltip,K);return q};A._getMinSeriesValue=function(q){let p=0;q.forEach(C=>p=Math.min(C.value,p));return p};A._createColumnChart=function(q,p){const {chartsModule:C,mediaInfo:K}=p;({value:p}=K);const {am4core:L,am4charts:Q}=C,D=q.xAxes.push(new Q.CategoryAxis);
D.dataFields.category="tooltip";D.renderer.labels.template.disabled=!0;this._customizeChartTooltip(D.tooltip,L);D.tooltip.events.on("sizechanged",()=>{D.tooltip.dy=-D.tooltip.contentHeight});var M=q.yAxes.push(new Q.ValueAxis);const N=M.renderer.labels.template;M.renderer.minLabelPosition=.05;M.renderer.maxLabelPosition=.95;M.min=this._getMinSeriesValue(p.series);this._customizeChartTooltip(M.tooltip,L);N.wrap=!0;M=q.series.push(new Q.ColumnSeries);M.dataFields.valueY="value";M.dataFields.categoryX=
"tooltip";q.cursor=new Q.XYCursor;15<p.series.length&&(q.scrollbarX=new L.Scrollbar)};A._createBarChart=function(q,p){const {chartsModule:C,mediaInfo:K}=p;({value:p}=K);const {am4core:L,am4charts:Q}=C,D=q.yAxes.push(new Q.CategoryAxis);D.dataFields.category="tooltip";D.renderer.inversed=!0;D.renderer.labels.template.disabled=!0;this._customizeChartTooltip(D.tooltip,L);D.tooltip.events.on("sizechanged",()=>{D.tooltip.dx=D.tooltip.contentWidth});var M=q.xAxes.push(new Q.ValueAxis);const N=M.renderer.labels.template;
M.renderer.minLabelPosition=.05;M.renderer.maxLabelPosition=.95;M.min=this._getMinSeriesValue(p.series);this._customizeChartTooltip(M.tooltip,L);N.wrap=!0;M=q.series.push(new Q.ColumnSeries);M.dataFields.valueX="value";M.dataFields.categoryY="tooltip";q.cursor=new Q.XYCursor;15<p.series.length&&(q.scrollbarY=new L.Scrollbar)};A._createLineChart=function(q,p){const {chartsModule:C,mediaInfo:K}=p;({value:p}=K);const {am4core:L,am4charts:Q}=C,D=q.xAxes.push(new Q.CategoryAxis);D.dataFields.category=
"tooltip";D.renderer.labels.template.disabled=!0;this._customizeChartTooltip(D.tooltip,L);D.tooltip.events.on("sizechanged",()=>{D.tooltip.dy=-D.tooltip.contentHeight});var M=q.yAxes.push(new Q.ValueAxis);const N=M.renderer.labels.template;M.renderer.minLabelPosition=.05;M.renderer.maxLabelPosition=.95;M.min=this._getMinSeriesValue(p.series);this._customizeChartTooltip(M.tooltip,L);N.wrap=!0;M=q.series.push(new Q.LineSeries);M.dataFields.categoryX="tooltip";M.dataFields.valueY="value";q.cursor=new Q.XYCursor;
15<p.series.length&&(q.scrollbarX=new L.Scrollbar)};A._createXYChart=function(q){const {chartDiv:p,chartsModule:C,mediaInfo:K}=q,{type:L}=K,{am4core:Q,am4charts:D}=C,M=Q.create(p,D.XYChart);M.rtl=d.isRTL(this.container);"column-chart"===L&&this._createColumnChart(M,q);"bar-chart"===L&&this._createBarChart(M,q);"line-chart"===L&&this._createLineChart(M,q);return M};A._clearMediaRefreshTimer=function(){const {_refreshTimer:q}=this;q&&(clearTimeout(q),this._refreshTimer=null)};A._updateMediaInfoTimestamp=
function(q){const p=Date.now();this._refreshIntervalInfo={timestamp:p,sourceURL:this._getImageSource(q,p)};this.scheduleRender()};A._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:q}=this.viewModel;q&&"image"===q.type&&q.refreshInterval&&this._setRefreshTimeout(q)};A._setRefreshTimeout=function(q){const {refreshInterval:p,value:C}=q;p&&(q=6E4*p,this._updateMediaInfoTimestamp(C.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(C.sourceURL)},
q))};A._getImageSource=function(q,p){const C=-1!==q.indexOf("?")?"\x26":"?",[K,L=""]=q.split("#");return`${K}${C}timestamp=${p}${L?"#":""}${L}`};return v}(w);k.__decorate([B.aliasOf("viewModel.attributes")],G.prototype,"attributes",void 0);k.__decorate([B.aliasOf("viewModel.activeMediaInfoIndex")],G.prototype,"activeMediaInfoIndex",void 0);k.__decorate([B.aliasOf("viewModel.description")],G.prototype,"description",void 0);k.__decorate([B.aliasOf("viewModel.fieldInfoMap")],G.prototype,"fieldInfoMap",
void 0);k.__decorate([B.aliasOf("viewModel.layer")],G.prototype,"layer",void 0);k.__decorate([B.aliasOf("viewModel.mediaInfos")],G.prototype,"mediaInfos",void 0);k.__decorate([B.aliasOf("viewModel.popupTemplate")],G.prototype,"popupTemplate",void 0);k.__decorate([B.aliasOf("viewModel.relatedInfos")],G.prototype,"relatedInfos",void 0);k.__decorate([B.aliasOf("viewModel.title")],G.prototype,"title",void 0);k.__decorate([P.property({type:h})],G.prototype,"viewModel",void 0);k.__decorate([P.property(),
y.messageBundle("esri/widgets/Feature/t9n/Feature")],G.prototype,"messages",void 0);return G=k.__decorate([H.subclass("esri.widgets.Feature.FeatureMedia")],G)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h){b=function(c){function g(d){d=c.call(this,d)||this;d.activeMediaInfoIndex=0;d.attributes=null;d.description=null;d.fieldInfoMap=null;d.formattedAttributes=null;d.expressionAttributes=null;d.layer=null;d.mediaInfos=null;d.popupTemplate=null;d.relatedInfos=null;d.title=null;return d}e._inheritsLoose(g,c);var l=g.prototype;l.setActiveMedia=function(d){this._setContentElementMedia(d)};l.next=function(){this._pageContentElementMedia(1)};l.previous=function(){this._pageContentElementMedia(-1)};
l._setContentElementMedia=function(d){const {formattedMediaInfoCount:y}=this;this.activeMediaInfoIndex=(d+y)%y};l._pageContentElementMedia=function(d){const {activeMediaInfoIndex:y}=this;this._setContentElementMedia(y+d)};l._formatMediaInfos=function(){const {attributes:d,mediaInfos:y,formattedAttributes:f,expressionAttributes:n,fieldInfoMap:u,layer:v}=this;return null==y?void 0:y.map(A=>{A=null==A?void 0:A.clone();if(!A)return null;A.title=w.substituteFieldsInLinksAndAttributes({attributes:d,fieldInfoMap:u,
globalAttributes:f,expressionAttributes:n,layer:v,text:A.title});A.caption=w.substituteFieldsInLinksAndAttributes({attributes:d,fieldInfoMap:u,globalAttributes:f,expressionAttributes:n,layer:v,text:A.caption});A.altText=w.substituteFieldsInLinksAndAttributes({attributes:d,fieldInfoMap:u,globalAttributes:f,expressionAttributes:n,layer:v,text:A.altText});if("image"===A.type){var {value:q}=A;this._setImageValue({value:q,formattedAttributes:f,layer:v});return A.value.sourceURL?A:void 0}return"pie-chart"===
A.type||"line-chart"===A.type||"column-chart"===A.type||"bar-chart"===A.type?({value:q}=A,this._setChartValue({value:q,chartType:A.type,attributes:d,formattedAttributes:f,layer:v}),A):null}).filter(Boolean)};l._setImageValue=function(d){const {fieldInfoMap:y}=this,{value:f,formattedAttributes:n,layer:u}=d,{linkURL:v,sourceURL:A}=f;A&&(d=w.fixTokens(A,u),f.sourceURL=w.substituteAttributes({formattedAttributes:n,template:d,fieldInfoMap:y}));v&&(d=w.fixTokens(v,u),f.linkURL=w.substituteAttributes({formattedAttributes:n,
template:d,fieldInfoMap:y}))};l._setChartValue=function(d){const {value:y,attributes:f,formattedAttributes:n,chartType:u,layer:v}=d,{popupTemplate:A,relatedInfos:q}=this,{fields:p,normalizeField:C}=y;y.fields=w.getFixedFieldNames(p,v);C&&(y.normalizeField=w.getFixedFieldName(C,v));if(p.some(L=>!!(null!=n[L]||w.isRelatedField(L)&&q.size))){var K=null==A?void 0:A.fieldInfos;p.forEach(L=>{w.isRelatedField(L)?y.series=[...y.series,...this._getRelatedChartInfos({fieldInfos:K,fieldName:L,formattedAttributes:n,
chartType:u,value:y})]:(L=this._getChartOption({value:y,attributes:f,chartType:u,formattedAttributes:n,fieldName:L,fieldInfos:K}),y.series.push(L))})}};l._getRelatedChartInfos=function(d){var y;const {fieldInfos:f,fieldName:n,formattedAttributes:u,chartType:v,value:A}=d,q=[];d=h.getRelatedFieldInfo(n);const {layerId:p,fieldName:C}=d;d=null==(y=this.relatedInfos)?void 0:y.get(p.toString());if(!d)return q;const {relatedFeatures:K,relation:L}=d;if(!L||!K)return q;({cardinality:y}=L);K.forEach(Q=>{const {attributes:D}=
Q;D&&Object.keys(D).forEach(M=>{M===C&&q.push(this._getChartOption({value:A,attributes:D,formattedAttributes:u,fieldName:n,chartType:v,relatedFieldName:M,fieldInfos:f}))})});return"one-to-many"===y||"many-to-many"===y?q:[q[0]]};l._getTooltip=function({label:d,value:y,chartType:f}){return"pie-chart"===f?d:`${d}: ${y}`};l._getChartOption=function(d){const {value:y,attributes:f,formattedAttributes:n,fieldName:u,relatedFieldName:v,fieldInfos:A,chartType:q}=d;var {layer:p}=this;const {normalizeField:C,
tooltipField:K}=y;var L=C?w.isRelatedField(C)?f[h.getRelatedFieldInfo(C).fieldName]:f[C]:null;d=v&&void 0!==f[v]?f[v]:void 0!==f[u]?f[u]:n[u];const Q=void 0===d?null:d&&L?d/L:d;d=new H({value:Q});if(w.isRelatedField(u)){var D=h.getRelatedFieldInfo(u);var M=h.getRelatedFieldInfo(K);M=M?M.fieldName:null;p=w.formatValueToFieldInfo(Q,{fieldInfos:A,fieldName:v,layer:p,preventPlacesFormatting:!!L});D=D?D.label||D.fieldName:v;d.tooltip=this._getTooltip({label:M&&void 0!==f[M]?f[M]:D,value:p,chartType:q});
return d}L=w.getFieldInfo(A,u);p=w.getFixedFieldName(u,p);L=K&&void 0!==n[K]?n[K]:w.getFieldInfoLabel(L||new P({fieldName:p}),null==(D=this.popupTemplate)?void 0:D.expressionInfos);d.tooltip=this._getTooltip({label:L,value:n[p],chartType:q});return d};e._createClass(g,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);
return g}(b);k.__decorate([z.property()],b.prototype,"activeMediaInfoIndex",void 0);k.__decorate([z.property({readOnly:!0})],b.prototype,"activeMediaInfo",null);k.__decorate([z.property()],b.prototype,"attributes",void 0);k.__decorate([z.property()],b.prototype,"description",void 0);k.__decorate([z.property()],b.prototype,"fieldInfoMap",void 0);k.__decorate([z.property()],b.prototype,"formattedAttributes",void 0);k.__decorate([z.property()],b.prototype,"expressionAttributes",void 0);k.__decorate([z.property({readOnly:!0})],
b.prototype,"formattedMediaInfos",null);k.__decorate([z.property()],b.prototype,"layer",void 0);k.__decorate([z.property({readOnly:!0})],b.prototype,"formattedMediaInfoCount",null);k.__decorate([z.property()],b.prototype,"mediaInfos",void 0);k.__decorate([z.property()],b.prototype,"popupTemplate",void 0);k.__decorate([z.property()],b.prototype,"relatedInfos",void 0);k.__decorate([z.property()],b.prototype,"title",void 0);return b=k.__decorate([F.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
b)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),function(e,k,b,z,B,G,J,F,P,H,w,h){function c(q,p){if(!p.relationships)return null;let C=null;
({relationships:p}=p);p.some(K=>K.id===parseInt(q,10)?(C=K,!0):!1);return C}function g({originRelationship:q,relationships:p,layerId:C}){let K;p&&p.some(L=>{`${L.relatedTableId}`===C&&L.id===q.id&&(K=L);return!!K});return K}function l(q,p){p=p.toLowerCase();for(const C in q)if(C.toLowerCase()===p)return q[C];return null}function d(q,p,C,K){const L=new P;L.outFields=["*"];L.relationshipId="number"===typeof p.id?p.id:parseInt(p.id,10);L.objectIds=[q.attributes[C.objectIdField]];return C.queryRelatedFeatures(L,
K)}function y(q,p,C){let K=0;const L=[];for(;K<p.length;)L.push(`${q} IN (${p.slice(K,C+K)})`),K+=C;return L.join(" OR ")}function f(q,p,C,K){return n.apply(this,arguments)}function n(){n=k._asyncToGenerator(function*(q,p,C,K){var L=C.layerId.toString();const {layerInfo:Q,queryTask:D,relation:M,relatedFields:N,outStatistics:O}=p;L=g({originRelationship:M,relationships:Q.relationships,layerId:L});if(L.relationshipTableId&&L.keyFieldInRelationshipTable){C=(yield d(q,L,C,K))[q.attributes[C.objectIdField]];
if(!C)return null;const Y=C.features.map(fa=>fa.attributes[Q.objectIdField]);if(0<(null==O?void 0:O.length)&&Q.supportsStatistics)return p=new F,p.where=y(Q.objectIdField,Y,1E3),p.outFields=N,p.outStatistics=O,p={features:Promise.resolve(C),statsFeatures:D.execute(p)},G.eachAlways(p)}return(L=null==L?void 0:L.keyField)?(C=J.isNumericField(u(Q.fields,L)),q=l(q.attributes,M.keyField),L=C?`${L}=${q}`:`${L}='${q}'`,q=D.execute(new F({where:L,outFields:p.relatedFields}),K),p=p.outStatistics&&0<p.outStatistics.length&&
Q.supportsStatistics?D.execute(new F({where:L,outFields:p.relatedFields,outStatistics:p.outStatistics}),K):null,K={features:q},p&&(K.statsFeatures=p),G.eachAlways(K)):null});return n.apply(this,arguments)}function u(q,p){if(null!=q){p=p.toLowerCase();for(const C of q)if(C&&C.name.toLowerCase()===p)return C}return null}const v=B.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),A=new Map;e.createRelatedInfo=function(q,p){if(q=c(q,p)){var C=`${p.url}/${q.relatedTableId}`;p=new w({url:C,
sourceSpatialReference:p.spatialReference});return{url:C,queryTask:p,relation:q,relatedFields:[],outStatistics:[]}}};e.getDestinationRelation=g;e.getRelatedFieldInfo=function(q){if(!h.isRelatedField(q))return null;const [p,C]=q.split("/").slice(1);return{layerId:p,fieldName:C}};e.queryLayerInfos=function({relatedInfos:q,layer:p},C){const K={};q.forEach((L,Q)=>{({relation:L}=L);if(!L)throw Q=new z("relation-required","A relation is required on a layer to retrieve related records."),v.error(Q),Q;({relatedTableId:L}=
L);if("number"!==typeof L)throw Q=new z("A related table ID is required on a layer to retrieve related records."),v.error(Q),Q;L=`${p.url}/${L}`;const D=A.get(L),M=D?D:b(L,{query:{f:"json"},signal:C&&C.signal});D||A.set(L,M);K[Q]=M});return G.eachAlways(K)};e.queryRelatedFeatures=function({graphic:q,relatedInfos:p,layer:C},K){const L={};p.forEach((Q,D)=>{Q.layerInfo&&(L[D]=f(q,Q,C,K))});return G.eachAlways(L)};e.setRelatedFeatures=function(q,p){if(p&&q){var {features:C,statsFeatures:K}=q;q=C&&C.value;
p.relatedFeatures=q?q.features:[];q=K&&K.value;p.relatedStatsFeatures=q?q.features:[]}};e.updateRelatedInfo=function({relatedInfo:q,fieldName:p,fieldInfo:C}){q.relatedFields.push(p);C.statisticType&&(p=new H({statisticType:C.statisticType,onStatisticField:p,outStatisticFieldName:p}),q.outStatistics.push(p))};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(e,k,b,z,B,G){function J(c){if(!c)return"en-us";if(H.has(c.toLowerCase()))return c.toLowerCase();{c=c.split("-")[0].toLowerCase();let l=null;for(g of H.keys())if(g.startsWith(c)){l=g;break}var g=l}return g||"en-us"}function F(){F=b._asyncToGenerator(function*(c=G.getLocale()){c=J(c);if(w&&c===h)return w;w=(new Promise((g,l)=>e(["../../chunks/index"],g,l))).then(g=>g.index);h=c;try{const [g,l]=yield Promise.all([w,H.get(h)()]);h===c&&(g.am4core.options.defaultLocale=l.default);g.am4core.options.suppressWarnings=
!0;g.am4core.options.autoDispose=!0}catch{return h=w=null}return w});return F.apply(this,arguments)}z="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var P=[{name:"default",colors:[].concat(z.slice(30,39),z.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const H=new Map([["ar",()=>(new Promise((c,g)=>e(["../../chunks/ar2"],c,g))).then(c=>c.ar)],["bg-bg",()=>(new Promise((c,
g)=>e(["../../chunks/bg_BG"],c,g))).then(c=>c.bg_BG)],["bs-ba",()=>(new Promise((c,g)=>e(["../../chunks/bs_BA"],c,g))).then(c=>c.bs_BA)],["ca-es",()=>(new Promise((c,g)=>e(["../../chunks/ca_ES"],c,g))).then(c=>c.ca_ES)],["cs-cz",()=>(new Promise((c,g)=>e(["../../chunks/cs_CZ"],c,g))).then(c=>c.cs_CZ)],["da-dk",()=>(new Promise((c,g)=>e(["../../chunks/da_DK"],c,g))).then(c=>c.da_DK)],["de-de",()=>(new Promise((c,g)=>e(["../../chunks/de_DE"],c,g))).then(c=>c.de_DE)],["de-ch",()=>(new Promise((c,g)=>
e(["../../chunks/de_CH"],c,g))).then(c=>c.de_CH)],["el-gr",()=>(new Promise((c,g)=>e(["../../chunks/el_GR"],c,g))).then(c=>c.el_GR)],["en-us",()=>(new Promise((c,g)=>e(["../../chunks/en_US"],c,g))).then(c=>c.en_US)],["en-ca",()=>(new Promise((c,g)=>e(["../../chunks/en_CA"],c,g))).then(c=>c.en_CA)],["es-es",()=>(new Promise((c,g)=>e(["../../chunks/es_ES"],c,g))).then(c=>c.es_ES)],["et-ee",()=>(new Promise((c,g)=>e(["../../chunks/et_EE"],c,g))).then(c=>c.et_EE)],["fi-fi",()=>(new Promise((c,g)=>e(["../../chunks/fi_FI"],
c,g))).then(c=>c.fi_FI)],["fr-fr",()=>(new Promise((c,g)=>e(["../../chunks/fr_FR"],c,g))).then(c=>c.fr_FR)],["he-il",()=>(new Promise((c,g)=>e(["../../chunks/he_IL"],c,g))).then(c=>c.he_IL)],["hr-hr",()=>(new Promise((c,g)=>e(["../../chunks/hr_HR"],c,g))).then(c=>c.hr_HR)],["hu-hu",()=>(new Promise((c,g)=>e(["../../chunks/hu_HU"],c,g))).then(c=>c.hu_HU)],["id-id",()=>(new Promise((c,g)=>e(["../../chunks/id_ID"],c,g))).then(c=>c.id_ID)],["it-it",()=>(new Promise((c,g)=>e(["../../chunks/it_IT"],c,g))).then(c=>
c.it_IT)],["ja-jp",()=>(new Promise((c,g)=>e(["../../chunks/ja_JP"],c,g))).then(c=>c.ja_JP)],["ko-kr",()=>(new Promise((c,g)=>e(["../../chunks/ko_KR"],c,g))).then(c=>c.ko_KR)],["lt-lt",()=>(new Promise((c,g)=>e(["../../chunks/lt_LT"],c,g))).then(c=>c.lt_LT)],["lv-lv",()=>(new Promise((c,g)=>e(["../../chunks/lv_LV"],c,g))).then(c=>c.lv_LV)],["nb-no",()=>(new Promise((c,g)=>e(["../../chunks/nb_NO"],c,g))).then(c=>c.nb_NO)],["nl-nl",()=>(new Promise((c,g)=>e(["../../chunks/nl_NL"],c,g))).then(c=>c.nl_NL)],
["pl-pl",()=>(new Promise((c,g)=>e(["../../chunks/pl_PL"],c,g))).then(c=>c.pl_PL)],["pt-br",()=>(new Promise((c,g)=>e(["../../chunks/pt_BR"],c,g))).then(c=>c.pt_BR)],["pt-pt",()=>(new Promise((c,g)=>e(["../../chunks/pt_PT"],c,g))).then(c=>c.pt_PT)],["ro-ro",()=>(new Promise((c,g)=>e(["../../chunks/ro_RO"],c,g))).then(c=>c.ro_RO)],["ru-ru",()=>(new Promise((c,g)=>e(["../../chunks/ru_RU"],c,g))).then(c=>c.ru_RU)],["sk-sk",()=>(new Promise((c,g)=>e(["../../chunks/sk_SK"],c,g))).then(c=>c.sk_SK)],["sl-sl",
()=>(new Promise((c,g)=>e(["../../chunks/sl_SL"],c,g))).then(c=>c.sl_SL)],["sr-rs",()=>(new Promise((c,g)=>e(["../../chunks/sr_RS"],c,g))).then(c=>c.sr_RS)],["sv-se",()=>(new Promise((c,g)=>e(["../../chunks/sv_SE"],c,g))).then(c=>c.sv_SE)],["th-th",()=>(new Promise((c,g)=>e(["../../chunks/th_TH"],c,g))).then(c=>c.th_TH)],["tr-tr",()=>(new Promise((c,g)=>e(["../../chunks/tr_TR"],c,g))).then(c=>c.tr_TR)],["uk-ua",()=>(new Promise((c,g)=>e(["../../chunks/uk_UA"],c,g))).then(c=>c.uk_UA)],["vi-vn",()=>
(new Promise((c,g)=>e(["../../chunks/vi_VN"],c,g))).then(c=>c.vi_VN)],["zh-cn",()=>(new Promise((c,g)=>e(["../../chunks/zh_Hans"],c,g))).then(c=>c.zh_Hans)],["zh-hk",()=>(new Promise((c,g)=>e(["../../chunks/zh_Hant"],c,g))).then(c=>c.zh_Hant)],["zh-tw",()=>(new Promise((c,g)=>e(["../../chunks/zh_Hant"],c,g))).then(c=>c.zh_Hant)]]);let w,h;k.getChartLocale=J;k.getColorSet=function(c,g="default"){const l=P.find(d=>d.name===g);return l?l.colors.map(d=>c.color(d)):null};k.loadChartsModule=function(){return F.apply(this,
arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/throttle ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n,u,v,A,q,p,C){B=function(K){function L(Q){var D=K.call(this,Q)||this;D._abortController=null;D.expressionInfo=null;D.graphic=null;D.contentElement=null;D.contentElementViewModel=null;D.interceptor=null;D.view=null;D._cancelQuery=()=>{const {_abortController:M}=e._assertThisInitialized(D);M&&M.abort();D._abortController=null};D._createVM=()=>{var M,N;const O=null==(M=D.contentElement)?void 0:M.type;null==(N=D.contentElementViewModel)?void 0:N.destroy();
M="fields"===O?new q:"media"===O?new p:"text"===O?new A:null;D._set("contentElementViewModel",M)};D._compile=e._asyncToGenerator(function*(){D._cancelQuery();const M=new AbortController;D._abortController=M;yield D._compileExpression();D._abortController===M&&(D._abortController=null)});D._compileThrottled=J.throttle(D._compile,1,e._assertThisInitialized(D));D._compileExpression=e._asyncToGenerator(function*(){const {expressionInfo:M,graphic:N,interceptor:O,spatialReference:Y,map:fa,view:Z,_abortController:r}=
e._assertThisInitialized(D);if(M&&N&&Y&&fa&&Z){var x=yield C.loadArcadeUtils();if(r===D._abortController)if((x=yield C.createCompiledExpression({arcadeUtils:x,expressionInfo:M,graphic:N,interceptor:O,map:fa,spatialReference:Y,view:Z}))&&"esri.arcade.Dictionary"===x.declaredClass){x=yield z.castAsJsonAsync(x,r.signal);var t=null==x?void 0:x.type;x="media"===t?n.fromJSON(x):"text"===t?u.fromJSON(x):"fields"===t?f.fromJSON(x):null;D._set("contentElement",x)}else D._set("contentElement",null)}else D._set("contentElement",
null)});D.handles.add([F.init(e._assertThisInitialized(D),["expressionInfo","graphic","map","spatialReference","view"],D._compileThrottled),F.init(e._assertThisInitialized(D),"contentElement",D._createVM)]);return D}e._inheritsLoose(L,K);L.prototype.destroy=function(){var Q;this._cancelQuery();null==(Q=this.contentElementViewModel)?void 0:Q.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};e._createClass(L,[{key:"spatialReference",get:function(){var Q;return(null==
(Q=this.view)?void 0:Q.spatialReference)||null},set:function(Q){void 0===Q?this._clearOverride("spatialReference"):this._override("spatialReference",Q)}},{key:"state",get:function(){const {_abortController:Q,contentElement:D,contentElementViewModel:M}=this;return Q?"loading":D||M?"ready":"disabled"}},{key:"map",get:function(){var Q;return(null==(Q=this.view)?void 0:Q.map)||null},set:function(Q){void 0===Q?this._clearOverride("map"):this._override("map",Q)}}]);return L}(G.HandleOwnerMixin(B));k.__decorate([P.property()],
B.prototype,"_abortController",void 0);k.__decorate([P.property({type:v})],B.prototype,"expressionInfo",void 0);k.__decorate([P.property({type:b})],B.prototype,"graphic",void 0);k.__decorate([P.property({readOnly:!0})],B.prototype,"contentElement",void 0);k.__decorate([P.property({readOnly:!0})],B.prototype,"contentElementViewModel",void 0);k.__decorate([P.property()],B.prototype,"interceptor",void 0);k.__decorate([P.property()],B.prototype,"spatialReference",null);k.__decorate([P.property({readOnly:!0})],
B.prototype,"state",null);k.__decorate([P.property()],B.prototype,"map",null);k.__decorate([P.property()],B.prototype,"view",void 0);return B=k.__decorate([c.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],B)})},"esri/chunks/languageUtils":function(){define("exports ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y){function f(E,V,ja){return""===V||null===V||void 0===V||V===ja||V===ja?E:E=E.split(V).join(ja)}function n(E){return E instanceof fb||E instanceof k||E instanceof gb}function u(E){return A(E)||p(E)||M(E)||q(E)||null===E||E===Sa||"number"===typeof E?!0:!1}function v(E,V){return void 0===E?V:E}function A(E){return"string"===typeof E||E instanceof String}function q(E){return"boolean"===typeof E}function p(E){return"number"===typeof E}function C(E){return"number"===
typeof E&&isFinite(E)&&Math.floor(E)===E}function K(E){return E instanceof Array}function L(E){return!0===(E&&E.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===E.declaredRootClass)}function Q(E){return!0===(E&&E.declaredRootClass&&"esri.arcade.featureSetCollection"===E.declaredRootClass)}function D(E){return E instanceof b}function M(E){return E instanceof Date}function N(E,V,ja){if(E.length<V||E.length>ja)throw Error("Function called with wrong number of Parameters");}function O(E){return 0>
E?-Math.round(-E):Math.round(E)}function Y(){let E=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(V){const ja=(E+16*Math.random())%16|0;E=Math.floor(E/16);return("x"===V?ja:ja&3|8).toString(16)})}function fa(E,V){if(!1===isNaN(E)){if(void 0===V||null===V||""===V)return E.toString();V=f(V,"\u2030","");V=f(V,"\u00a4","");return l.format(E,{pattern:V})}return E.toString()}function Z(E,V){E=c.DateTime.fromJSDate(E);return void 0===V||null===V||""===V?E.toISO({suppressMilliseconds:!0}):
E.toFormat(r(V),{locale:y.getLocale(),numberingSystem:"latn"})}function r(E){E=E.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let V="";const ja=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const ya of E.match(ja))switch(ya){case "D":V+="d";break;case "DD":V+="dd";break;case "DDD":V+="o";break;case "d":V+="c";break;case "ddd":V+="ccc";break;
case "dddd":V+="cccc";break;case "M":V+="L";break;case "MM":V+="LL";break;case "MMM":V+="LLL";break;case "MMMM":V+="LLLL";break;case "YY":V+="yy";break;case "Y":case "YYYY":V+="yyyy";break;case "Q":V+="q";break;case "Z":V+="ZZ";break;case "ZZ":V+="ZZZ";break;case "S":V+="'S'";break;case "SS":V+="'SS'";break;case "SSS":V+="u";break;case "A":case "a":V+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":V+=ya;break;default:V=2<=ya.length&&"["===ya.slice(0,
1)&&"]"===ya.slice(-1)?V+`'${ya.slice(1,-1)}'`:V+`'${ya}'`}return V}function x(E,V,ja){switch(ja){case "\x3e":return E>V;case "\x3c":return E<V;case "\x3e\x3d":return E>=V;case "\x3c\x3d":return E<=V}return!1}function t(E,V,ja){if(null===E){if(null===V||V===Sa)return x(null,null,ja);if(p(V))return x(0,V,ja);if(A(V)||q(V))return x(0,ua(V),ja);if(M(V))return x(0,V.getTime(),ja)}if(E===Sa){if(null===V||V===Sa)return x(null,null,ja);if(p(V))return x(0,V,ja);if(A(V)||q(V))return x(0,ua(V),ja);if(M(V))return x(0,
V.getTime(),ja)}else if(p(E)){if(p(V))return x(E,V,ja);if(q(V))return x(E,ua(V),ja);if(null===V||V===Sa)return x(E,0,ja);if(A(V))return x(E,ua(V),ja);if(M(V))return x(E,V.getTime(),ja)}else if(A(E)){if(A(V))return x(U(E),U(V),ja);if(M(V))return x(ua(E),V.getTime(),ja);if(p(V))return x(ua(E),V,ja);if(null===V||V===Sa)return x(ua(E),0,ja);if(q(V))return x(ua(E),ua(V),ja)}else if(M(E)){if(M(V))return x(E,V,ja);if(null===V||V===Sa)return x(E.getTime(),0,ja);if(p(V))return x(E.getTime(),V,ja);if(q(V)||
A(V))return x(E.getTime(),ua(V),ja)}else if(q(E)){if(q(V))return x(E,V,ja);if(p(V))return x(ua(E),ua(V),ja);if(M(V))return x(ua(E),V.getTime(),ja);if(null===V||V===Sa)return x(ua(E),0,ja);if(A(V))return x(ua(E),ua(V),ja)}return!R(E,V)||"\x3c\x3d"!==ja&&"\x3e\x3d"!==ja?!1:!0}function R(E,V){if(E===V||null===E&&V===Sa||null===V&&E===Sa)return!0;if(M(E)&&M(V))return E.getTime()===V.getTime();if(E instanceof z||E instanceof B)return E.equalityTest(V);if(E instanceof H&&V instanceof H){const ja=E.cache._arcadeCacheId,
ya=V.cache._arcadeCacheId;if(void 0!==ja&&null!==ja)return ja===ya}return void 0!==E&&void 0!==V&&null!==E&&null!==V&&"object"===typeof E&&"object"===typeof V&&(E._arcadeCacheId===V._arcadeCacheId&&void 0!==E._arcadeCacheId&&null!==E._arcadeCacheId||E._underlyingGraphic===V._underlyingGraphic&&void 0!==E._underlyingGraphic&&null!==E._underlyingGraphic)?!0:!1}function U(E,V){if(A(E))return E;if(null===E)return"";if(p(E))return fa(E,V);if(q(E))return E.toString();if(M(E))return Z(E,V);if(E instanceof
F)return JSON.stringify(E.toJSON());if(K(E)){V=[];for(var ja=0;ja<E.length;ja++)V[ja]=ta(E[ja]);return"["+V.join(",")+"]"}if(E instanceof b){V=[];for(ja=0;ja<E.length();ja++)V[ja]=ta(E.get(ja));return"["+V.join(",")+"]"}return null!==E&&"object"===typeof E&&void 0!==E.castToText?E.castToText():n(E)?"object, Function":""}function ha(E){const V=[];if(!1===K(E))return null;if(E instanceof b){for(var ja=0;ja<E.length();ja++)V[ja]=ua(E.get(ja));return V}for(ja=0;ja<E.length;ja++)V[ja]=ua(E[ja]);return V}
function ma(E,V){if(A(E))return E;if(null===E)return"";if(p(E))return fa(E,V);if(q(E))return E.toString();if(M(E))return Z(E,V);if(E instanceof F)return E instanceof J?'{"xmin":'+E.xmin.toString()+',"ymin":'+E.ymin.toString()+","+(E.hasZ?'"zmin":'+E.zmin.toString()+",":"")+(E.hasM?'"mmin":'+E.mmin.toString()+",":"")+'"xmax":'+E.xmax.toString()+',"ymax":'+E.ymax.toString()+","+(E.hasZ?'"zmax":'+E.zmax.toString()+",":"")+(E.hasM?'"mmax":'+E.mmax.toString()+",":"")+'"spatialReference":'+ia(E.spatialReference)+
"}":ia(E.toJSON(),(ya,xa)=>ya.key===xa.key?0:"spatialReference"===ya.key?1:"spatialReference"===xa.key||ya.key<xa.key?-1:ya.key>xa.key?1:0);if(K(E)){V=[];for(var ja=0;ja<E.length;ja++)V[ja]=ta(E[ja]);return"["+V.join(",")+"]"}if(E instanceof b){V=[];for(ja=0;ja<E.length();ja++)V[ja]=ta(E.get(ja));return"["+V.join(",")+"]"}return null!==E&&"object"===typeof E&&void 0!==E.castToText?E.castToText():n(E)?"object, Function":""}function ta(E){return null===E?"null":q(E)||p(E)||A(E)?JSON.stringify(E):E instanceof
F||E instanceof b||E instanceof Array?ma(E):E instanceof Date?JSON.stringify(Z(E,"")):null!==E&&"object"===typeof E&&void 0!==E.castToText?E.castToText():"null"}function ua(E,V){return p(E)?E:null===E||""===E?0:M(E)?NaN:q(E)?E?1:0:K(E)||""===E||void 0===E?NaN:void 0!==V&&A(E)?(V=f(V,"\u2030",""),V=f(V,"\u00a4",""),l.parse(E,{pattern:V})):E===Sa?0:Number(E)}function Da(E){return M(E)?E:A(E)&&(E=Aa(E))?E.toJSDate():null}function Ha(E){return M(E)?c.DateTime.fromJSDate(E):A(E)?Aa(E):null}function Aa(E){const V=
/ (\d\d)/;let ja=c.DateTime.fromISO(E);return ja.isValid||V.test(E)&&(E=E.replace(V,"T$1"),ja=c.DateTime.fromISO(E),ja.isValid)?ja:null}function ea(E){return q(E)?E:A(E)?(E=E.toLowerCase(),"true"===E?!0:!1):p(E)?0===E||isNaN(E)?!1:!0:!1}function da(E,V){if(g.isNone(E))return null;if(null===E.spatialReference||void 0===E.spatialReference)E.spatialReference=V;return E}function S(E){if(null===E)return null;if(E instanceof H)return"NaN"===E.x||null===E.x||isNaN(E.x)?null:E;if(E instanceof w){if(0===E.rings.length)return null;
for(const V of E.rings)if(0<V.length)return E;return null}if(E instanceof h){if(0===E.paths.length)return null;for(const V of E.paths)if(0<V.length)return E;return null}return E instanceof P?0===E.points.length?null:E:E instanceof J?"NaN"===E.xmin||null===E.xmin||isNaN(E.xmin)?null:E:null}function X(E,V){if(!E||!E.domain)return V;let ja=null;if("string"===E.field.type||"esriFieldTypeString"===E.field.type)V=U(V);else{if(null===V||void 0===V)return null;if(""===V)return V;V=ua(V)}for(let ya=0;ya<E.domain.codedValues.length;ya++){const xa=
E.domain.codedValues[ya];xa.code===V&&(ja=xa)}return null===ja?V:ja.name}function W(E,V){if(!E||!E.domain)return V;let ja=null;V=U(V);for(let ya=0;ya<E.domain.codedValues.length;ya++){const xa=E.domain.codedValues[ya];xa.name===V&&(ja=xa)}return null===ja?V:ja.code}function ba(E,V,ja=null,ya){if(!V||!V.fields)return null;let xa=null;for(let Ta=0;Ta<V.fields.length;Ta++){const Qa=V.fields[Ta];Qa.name.toLowerCase()===E.toString().toLowerCase()&&(xa=Qa)}if(null===xa)throw Error("Field not found");let Ga,
La;ya||(ya=ja&&V.typeIdField&&ja._field(V.typeIdField));null!=ya&&V.types.some(function(Ta){return Ta.id===ya?((Ga=Ta.domains&&Ta.domains[xa.name])&&"inherited"===Ga.type&&(Ga=ka(xa.name,V),La=!0),!0):!1});La||Ga||(Ga=ka(E,V));return{field:xa,domain:Ga}}function ka(E,V){let ja;V.fields.some(function(ya){ya.name.toLowerCase()===E.toLowerCase()&&(ja=ya.domain);return!!ja});return ja}function ia(E,V){V||(V={});"function"===typeof V&&(V={cmp:V});const ja="boolean"===typeof V.cycles?V.cycles:!1,ya=V.cmp&&
function(Ga){return function(La){return function(Ta,Qa){return Ga({key:Ta,value:La[Ta]},{key:Qa,value:La[Qa]})}}}(V.cmp),xa=[];return function Ta(La){La&&La.toJSON&&"function"===typeof La.toJSON&&(La=La.toJSON());if(void 0!==La){if("number"===typeof La)return isFinite(La)?""+La:"null";if("object"!==typeof La)return JSON.stringify(La);var Qa;if(Array.isArray(La)){var Ya="[";for(Qa=0;Qa<La.length;Qa++)Qa&&(Ya+=","),Ya+=Ta(La[Qa])||"null";return Ya+"]"}if(null===La)return"null";if(-1!==xa.indexOf(La)){if(ja)return JSON.stringify("__cycle__");
throw new TypeError("Converting circular structure to JSON");}var db=xa.push(La)-1,ab=Object.keys(La).sort(ya&&ya(La));Ya="";for(Qa=0;Qa<ab.length;Qa++){const nb=ab[Qa],ob=Ta(La[nb]);ob&&(Ya&&(Ya+=","),Ya+=JSON.stringify(nb)+":"+ob)}xa.splice(db,1);return"{"+Ya+"}"}}(E)}function oa(E){if(null===E)return null;const V=[];for(const ja of E)ja&&(ja.declaredClass&&"esri.arcade.Feature"===ja.declaredClass||"FeatureSetReader"===ja.type)?V.push(ja.geometry()):V.push(ja);return V}function la(E,V){if(V instanceof
H)E.push(V.hasZ?V.hasM?[V.x,V.y,V.z,V.m]:[V.x,V.y,V.z]:[V.x,V.y]);else throw Error("Invalid Argument");}function za(E,V){if(K(E)||D(E)){let ja=!1,ya=!1,xa=[];if(K(E)){for(const Ga of E)la(xa,Ga);0<xa.length&&(V=E[0].spatialReference,ja=E[0].hasZ,ya=E[0].hasM)}else if(E instanceof B)xa=E._elements,0<xa.length&&(ja=E._hasZ,ya=E._hasM,V=E.get(0).spatialReference);else if(D(E)){for(const Ga of E.toArray())la(xa,Ga);0<xa.length&&(V=E.get(0).spatialReference,ja=!0===E.get(0).hasZ,ya=!0===E.get(0).hasM)}else throw Error("Invalid Argument");
if(0===xa.length)return null;!1===d.isClockwise(xa,ya,ja)&&(xa=xa.slice(0).reverse());return new w({rings:[xa],spatialReference:V,hasZ:ja,hasM:ya})}return E}function qa(E,V){if(K(E)||D(E)){let ja=!1,ya=!1,xa=[];if(K(E)){for(const Ga of E)la(xa,Ga);0<xa.length&&(V=E[0].spatialReference,ja=!0===E[0].hasZ,ya=!0===E[0].hasM)}else if(E instanceof B)xa=E._elements,0<xa.length&&(ja=E._hasZ,ya=E._hasM,V=E.get(0).spatialReference);else if(D(E)){for(const Ga of E.toArray())la(xa,Ga);0<xa.length&&(V=E.get(0).spatialReference,
ja=!0===E.get(0).hasZ,ya=!0===E.get(0).hasM)}return 0===xa.length?null:new h({paths:[xa],spatialReference:V,hasZ:ja,hasM:ya})}return E}function sa(E,V){if(K(E)||D(E)){let ja=!1,ya=!1,xa=[];if(K(E)){for(const Ga of E)la(xa,Ga);0<xa.length&&(V=E[0].spatialReference,ja=!0===E[0].hasZ,ya=!0===E[0].hasM)}else if(E instanceof B)xa=E._elements,0<xa.length&&(ja=E._hasZ,ya=E._hasM,V=E.get(0).spatialReference);else if(D(E)){for(const Ga of E.toArray())la(xa,Ga);0<xa.length&&(V=E.get(0).spatialReference,ja=
!0===E.get(0).hasZ,ya=!0===E.get(0).hasM)}return 0===xa.length?null:new P({points:xa,spatialReference:V,hasZ:ja,hasM:ya})}return E}function pa(E,V=!1){const ja=[];if(null===E)return ja;if(!0===K(E)){for(var ya=0;ya<E.length;ya++){var xa=U(E[ya]);""===xa&&!0!==V||ja.push(xa)}return ja}if(E instanceof b){for(ya=0;ya<E.length();ya++)xa=U(E.get(ya)),""===xa&&!0!==V||ja.push(xa);return ja}return u(E)?(E=U(E),""===E&&!0!==V||ja.push(E),ja):[]}function wa(E){hb++;return 0===hb%100?(hb=0,G.create(V=>{setTimeout(()=>
{V(E)},0)})):E}function Ea(E,V,ja){switch(ja){case "\x26":return E&V;case "|":return E|V;case "^":return E^V;case "\x3c\x3c":return E<<V;case "\x3e\x3e":return E>>V;case "\x3e\x3e\x3e":return E>>>V}}function Ba(E,V=null){if(null!=E){if(q(E)||p(E)||A(E))return E;if(E instanceof F)return!0===(null==V?void 0:V.keepGeometryType)?E:E.toJSON();if(E instanceof b)return E.toArray().map(ja=>Ba(ja,V));if(E instanceof Array)return E.map(ja=>Ba(ja,V));if(E instanceof Date)return E;if(null!==E&&"object"===typeof E&&
void 0!==E.castAsJson)return E.castAsJson(V)}return null}function Na(E,V,ja,ya,xa){return pb(E,V,ja).then(Ga=>{xa[ya]=Ga})}function pb(E,V=null,ja=null){E instanceof b&&(E=E.toArray());if(null!=E){if(u(E)||E instanceof F||E instanceof Date)return G.resolve(Ba(E,ja));if(E instanceof Array){const ya=[],xa=[];for(const Ga of E)null===Ga||u(Ga)||Ga instanceof F||Ga instanceof Date?xa.push(Ba(Ga,ja)):(xa.push(null),ya.push(Na(Ga,V,ja,xa.length-1,xa)));return 0<ya.length?G.all(ya).then(()=>xa):G.resolve(xa)}if(null!==
E&&"object"===typeof E&&void 0!==E.castAsJsonAsync)return E.castAsJsonAsync(V,ja)}return G.resolve(null)}let ib=function(E){this.value=E},jb=function(E){this.value=E},fb=function(E){this.fn=E},gb=function(E,V){this.paramCount=V;this.fn=E};const qb=fb,Ua=gb,Sa={type:"VOID"},rb={type:"BREAK"},kb={type:"CONTINUE"};let hb=0;const sb=Object.freeze({__proto__:null,ReturnResultE:ib,ImplicitResultE:jb,NativeFunctionE:fb,SizzleFunctionE:gb,NativeFunction:qb,ImplicitResult:jb,ReturnResult:ib,SizzleFunction:Ua,
voidOperation:Sa,breakResult:rb,continueResult:kb,multiReplace:f,isFunctionParameter:n,isSimpleType:u,defaultUndefined:v,isString:A,isBoolean:q,isNumber:p,isInteger:C,isArray:K,isFeatureSet:L,isFeatureSetCollection:Q,isImmutableArray:D,isDate:M,pcCheck:N,absRound:O,generateUUID:Y,formatNumber:fa,formatDate:Z,standardiseDateFormat:r,greaterThanLessThan:t,equalityTest:R,toString:U,toNumberArray:ha,toStringExplicit:ma,toNumber:ua,toDate:Da,toDateTime:Ha,toBoolean:ea,fixSpatialReference:da,fixNullGeometry:S,
getDomainValue:X,getDomainCode:W,getDomain:ba,stableStringify:ia,autoCastFeatureToGeometry:oa,autoCastArrayOfPointsToPolygon:za,autoCastArrayOfPointsToPolyline:qa,autoCastArrayOfPointsToMultiPoint:sa,toStringArray:pa,tick:wa,binaryOperator:Ea,castAsJson:Ba,castAsJsonAsync:pb});e.ImplicitResult=jb;e.ImplicitResultE=jb;e.NativeFunction=qb;e.NativeFunctionE=fb;e.ReturnResult=ib;e.ReturnResultE=ib;e.SizzleFunction=Ua;e.SizzleFunctionE=gb;e.absRound=O;e.autoCastArrayOfPointsToMultiPoint=sa;e.autoCastArrayOfPointsToPolygon=
za;e.autoCastArrayOfPointsToPolyline=qa;e.autoCastFeatureToGeometry=oa;e.binaryOperator=Ea;e.breakResult=rb;e.castAsJson=Ba;e.castAsJsonAsync=pb;e.continueResult=kb;e.defaultUndefined=v;e.equalityTest=R;e.fixNullGeometry=S;e.fixSpatialReference=da;e.formatDate=Z;e.formatNumber=fa;e.generateUUID=Y;e.getDomain=ba;e.getDomainCode=W;e.getDomainValue=X;e.greaterThanLessThan=t;e.isArray=K;e.isBoolean=q;e.isDate=M;e.isFeatureSet=L;e.isFeatureSetCollection=Q;e.isFunctionParameter=n;e.isImmutableArray=D;e.isInteger=
C;e.isNumber=p;e.isSimpleType=u;e.isString=A;e.lc=sb;e.multiReplace=f;e.pcCheck=N;e.stableStringify=ia;e.standardiseDateFormat=r;e.tick=wa;e.toBoolean=ea;e.toDate=Da;e.toDateTime=Ha;e.toNumber=ua;e.toNumberArray=ha;e.toString=U;e.toStringArray=pa;e.toStringExplicit=ma;e.voidOperation=Sa})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(e,k){this.context=this.definition=null;this.definition=e;this.context=k}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function e(b=
[]){this._elements=b}var k=e.prototype;k.length=function(){return this._elements.length};k.get=function(b){return this._elements[b]};k.toArray=function(){const b=[];for(let z=0;z<this.length();z++)b.push(this.get(z));return b};return e}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(e,k,b){return function(z){function B(J,F,P,H,w){J=z.call(this,J)||this;J._lazyPath=[];J._hasZ=!1;J._hasM=!1;J._hasZ=
P;J._hasM=H;J._spRef=F;J._cacheId=w;return J}e._inheritsLoose(B,z);var G=B.prototype;G.get=function(J){if(void 0===this._lazyPath[J]){const F=this._elements[J];if(void 0===F)return;this._lazyPath[J]=new b(F,this._spRef,this._hasZ,this._hasM,this._cacheId,J)}return this._lazyPath[J]};G.equalityTest=function(J){return J===this?!0:null===J||!1===J instanceof B?!1:J.getUniqueHash()===this.getUniqueHash()};G.getUniqueHash=function(){return this._cacheId.toString()};return B}(k)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers",
"./ImmutableArray","../geometry/Point"],function(e,k,b){return function(z){function B(J,F,P,H,w,h){J=z.call(this,J)||this;J._lazyPt=[];J._hasZ=!1;J._hasM=!1;J._spRef=F;J._hasZ=P;J._hasM=H;J._cacheId=w;J._partId=h;return J}e._inheritsLoose(B,z);var G=B.prototype;G.get=function(J){if(void 0===this._lazyPt[J]){const F=this._elements[J];if(void 0===F)return;const P=this._hasZ,H=this._hasM;let w=null;w=P&&!H?new b(F[0],F[1],F[2],void 0,this._spRef):H&&!P?new b(F[0],F[1],void 0,F[2],this._spRef):P&&H?new b(F[0],
F[1],F[2],F[3],this._spRef):new b(F[0],F[1],this._spRef);w.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+J.toString();this._lazyPt[J]=w}return this._lazyPt[J]};G.equalityTest=function(J){return J===this?!0:null===J||!1===J instanceof B?!1:J.getUniqueHash()===this.getUniqueHash()};G.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return B}(k)})},"esri/chunks/datetime":function(){define(["exports"],function(e){function k(a){return"undefined"===
typeof a}function b(a){return"number"===typeof a}function z(a){return"number"===typeof a&&0===a%1}function B(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function G(a,m,I){if(0!==a.length)return a.reduce((T,aa)=>{aa=[m(aa),aa];return T?I(T[0],aa[0])===T[0]?T:aa:aa},null)[1]}function J(a,m){return m.reduce((I,T)=>{I[T]=a[T];return I},{})}function F(a,m){return Object.prototype.hasOwnProperty.call(a,m)}function P(a,m,I){return z(a)&&a>=m&&a<=I}function H(a,m=2){const I=
0>a?"-":"";a=I?-1*a:a;m=a.toString().length<m?("0".repeat(m)+a).slice(-m):a.toString();return`${I}${m}`}function w(a){if(!k(a)&&null!==a&&""!==a)return parseInt(a,10)}function h(a){if(!k(a)&&null!==a&&""!==a)return parseFloat(a)}function c(a){if(!k(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function g(a,m,I=!1){m=10**m;return(I?Math.trunc:Math.round)(a*m)/m}function l(a){return 0===a%4&&(0!==a%100||0===a%400)}function d(a,m){var I=m-1;I=I-12*Math.floor(I/12)+1;return 2===I?
l(a+(m-I)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][I-1]}function y(a){let m=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(m=new Date(m),m.setUTCFullYear(m.getUTCFullYear()-1900));return+m}function f(a){var m=a-1;m=(m+Math.floor(m/4)-Math.floor(m/100)+Math.floor(m/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===m?53:52}function n(a){return 99<a?a:60<a?1900+a:2E3+a}function u(a,m,I,T=null){a=new Date(a);const aa=
{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};T&&(aa.timeZone=T);return(m=(new Intl.DateTimeFormat(I,{timeZoneName:m,...aa})).formatToParts(a).find(ca=>"timezonename"===ca.type.toLowerCase()))?m.value:null}function v(a,m){a=parseInt(a,10);Number.isNaN(a)&&(a=0);m=parseInt(m,10)||0;m=0>a||Object.is(a,-0)?-m:m;return 60*a+m}function A(a){const m=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(m))throw new Xa(`Invalid unit value ${a}`);return m}
function q(a,m){const I={};for(const T in a)if(F(a,T)){const aa=a[T];void 0!==aa&&null!==aa&&(I[m(T)]=A(aa))}return I}function p(a,m){const I=Math.trunc(Math.abs(a/60)),T=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(m){case "short":return`${a}${H(I,2)}:${H(T,2)}`;case "narrow":return`${a}${I}${0<T?`:${T}`:""}`;case "techie":return`${a}${H(I,2)}${H(T,2)}`;default:throw new RangeError(`Value format ${m} is out of range for property format`);}}function C(a){return J(a,["hour","minute","second","millisecond"])}
function K(a){switch(a){case "narrow":return[...Fc];case "short":return[...Ob];case "long":return[...Gc];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function L(a){switch(a){case "narrow":return[...Hc];case "short":return[...Pb];case "long":return[...Qb];case "numeric":return"1234567".split("");default:return null}}function Q(a){switch(a){case "narrow":return[...Ic];case "short":return[...Jc];
case "long":return[...Kc];default:return null}}function D(a,m,I="always",T=!1){const aa={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var ca=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===I&&ca)switch(I="days"===a,m){case 1:return I?"tomorrow":`next ${aa[a][0]}`;case -1:return I?"yesterday":`last ${aa[a][0]}`;case 0:return I?"today":`this ${aa[a][0]}`}I=
Object.is(m,-0)||0>m;m=Math.abs(m);ca=1===m;const na=aa[a];a=T?ca?na[1]:na[2]||na[1]:ca?aa[a][0]:a;return I?`${m} ${a} ago`:`in ${m} ${a}`}function M(a,m){let I="";for(const T of a)I=T.literal?I+T.val:I+m(T.val);return I}function N(a,m){if(k(a)||null===a)return m;if(a instanceof tb)return a;if("string"===typeof a){const I=a.toLowerCase();return"local"===I||"system"===I?m:"utc"===I||"gmt"===I?Va.utcInstance:$a.isValidSpecifier(I)?$a.create(a):Va.parseSpecifier(I)||new Rb(a)}return b(a)?Va.instance(a):
"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Rb(a)}function O(a,m={}){const I=JSON.stringify([a,m]);let T=Bb[I];T||(T=new Intl.DateTimeFormat(a,m),Bb[I]=T);return T}function Y(a,m={}){const I=JSON.stringify([a,m]);let T=Cb[I];T||(T=new Intl.NumberFormat(a,m),Cb[I]=T);return T}function fa(a,m={}){const {base:I,...T}=m,aa=JSON.stringify([a,T]);let ca=Db[aa];ca||(ca=new Intl.RelativeTimeFormat(a,m),Db[aa]=ca);return ca}function Z(a){const m=[];for(let I=1;12>=I;I++){const T=Fa.utc(2016,
I,1);m.push(a(T))}return m}function r(a){const m=[];for(let I=1;7>=I;I++){const T=Fa.utc(2016,11,13+I);m.push(a(T))}return m}function x(a,m,I,T,aa){a=a.listingMode(I);return"error"===a?null:"en"===a?T(m):aa(m)}function t(...a){a=a.reduce((m,I)=>m+I.source,"");return RegExp(`^${a}$`)}function R(...a){return m=>a.reduce(([I,T,aa],ca)=>{const [na,ra,va]=ca(m,aa);return[{...I,...na},T||ra,va]},[{},null,1]).slice(0,2)}function U(a,...m){if(null==a)return[null,null];for(const [I,T]of m)if(m=I.exec(a))return T(m);
return[null,null]}function ha(...a){return(m,I)=>{const T={};let aa;for(aa=0;aa<a.length;aa++)T[a[aa]]=w(m[I+aa]);return[T,null,I+aa]}}function ma(a,m,I){a=a[m];return k(a)?I:w(a)}function ta(a,m){return[{year:ma(a,m),month:ma(a,m+1,1),day:ma(a,m+2,1)},null,m+3]}function ua(a,m){return[{hours:ma(a,m,0),minutes:ma(a,m+1,0),seconds:ma(a,m+2,0),milliseconds:c(a[m+3])},null,m+4]}function Da(a,m){const I=!a[m]&&!a[m+1];a=v(a[m+1],a[m+2]);return[{},I?null:Va.instance(a),m+3]}function Ha(a,m){return[{},
a[m]?$a.create(a[m]):null,m+1]}function Aa(a){const [m,I,T,aa,ca,na,ra,va,Ka]=a,Ca="-"===m[0];a=va&&"-"===va[0];const Ia=(Ma,bb=!1)=>void 0!==Ma&&(bb||Ma&&Ca)?-Ma:Ma;return[{years:Ia(h(I)),months:Ia(h(T)),weeks:Ia(h(aa)),days:Ia(h(ca)),hours:Ia(h(na)),minutes:Ia(h(ra)),seconds:Ia(h(va),"-0"===va),milliseconds:Ia(c(Ka),a)}]}function ea(a,m,I,T,aa,ca,na){m={year:2===m.length?n(w(m)):w(m),month:Ob.indexOf(I)+1,day:w(T),hour:w(aa),minute:w(ca)};na&&(m.second=w(na));a&&(m.weekday=3<a.length?Qb.indexOf(a)+
1:Pb.indexOf(a)+1);return m}function da(a){const [,m,I,T,aa,ca,na,ra,va,Ka,Ca,Ia]=a;a=ea(m,aa,T,I,ca,na,ra);let Ma;Ma=va?Lc[va]:Ka?0:v(Ca,Ia);return[a,new Va(Ma)]}function S(a){const [,m,I,T,aa,ca,na,ra]=a;return[ea(m,aa,T,I,ca,na,ra),Va.utcInstance]}function X(a){const [,m,I,T,aa,ca,na,ra]=a;return[ea(m,ra,I,T,aa,ca,na),Va.utcInstance]}function W(a,m,I=!1){a={values:I?m.values:{...a.values,...m.values||{}},loc:a.loc.clone(m.loc),conversionAccuracy:m.conversionAccuracy||a.conversionAccuracy};return new Ja(a)}
function ba(a,m,I,T,aa){a=a[aa][I];var ca=m[I]/a;ca=Math.sign(ca)!==Math.sign(T[aa])&&0!==T[aa]&&1>=Math.abs(ca)?0>ca?Math.floor(ca):Math.ceil(ca):Math.trunc(ca);T[aa]+=ca;m[I]-=ca*a}function ka(a,m){Mc.reduce((I,T)=>{if(k(m[T]))return I;I&&ba(a,m,I,m,T);return T},null)}function ia(a,m){a=m.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Ja.fromMillis(a).as("days"))}function oa(a,m,I){var T=[["years",(ra,va)=>va.year-ra.year],
["quarters",(ra,va)=>va.quarter-ra.quarter],["months",(ra,va)=>va.month-ra.month+12*(va.year-ra.year)],["weeks",(ra,va)=>{ra=ia(ra,va);return(ra-ra%7)/7}],["days",ia]];const aa={};let ca,na;for(const [ra,va]of T)0<=I.indexOf(ra)&&(ca=ra,T=va(a,m),na=a.plus({[ra]:T}),na>m?(a=a.plus({[ra]:T-1}),--T):a=na,aa[ra]=T);return[a,aa,na,ca]}function la(a,m,I,T){let [aa,ca,na,ra]=oa(a,m,I);a=m-aa;I=I.filter(va=>0<=["hours","minutes","seconds","milliseconds"].indexOf(va));0===I.length&&(na<m&&(na=aa.plus({[ra]:1})),
na!==aa&&(ca[ra]=(ca[ra]||0)+a/(na-aa)));m=Ja.fromObject(ca,T);return 0<I.length?Ja.fromMillis(a,T).shiftTo(...I).plus(m):m}function za({numberingSystem:a},m=""){return new RegExp(`${Eb[a||"latn"]}${m}`)}function qa(a,m=I=>I){return{regex:a,deser:([I])=>{{let T=parseInt(I,10);if(isNaN(T)){T="";for(let aa=0;aa<I.length;aa++){const ca=I.charCodeAt(aa);if(-1!==I[aa].search(Eb.hanidec))T+=Nc.indexOf(I[aa]);else for(const na in Sb){const [ra,va]=Sb[na];ca>=ra&&ca<=va&&(T+=ca-ra)}}I=parseInt(T,10)}else I=
T}return m(I)}}}function sa(a){return a.replace(/\./g,"\\.?").replace(Fb,Tb)}function pa(a,m){return null===a?null:{regex:RegExp(a.map(sa).join("|")),deser:([I])=>a.findIndex(T=>I.replace(/\./g,"").replace(Fb," ").toLowerCase()===T.replace(/\./g,"").replace(Fb," ").toLowerCase())+m}}function wa(a,m){return{regex:a,deser:([,I,T])=>v(I,T),groups:m}}function Ea(a){return{regex:a,deser:([m])=>m}}function Ba(a,m){const I=za(m),T=za(m,"{2}"),aa=za(m,"{3}"),ca=za(m,"{4}"),na=za(m,"{6}"),ra=za(m,"{1,2}"),
va=za(m,"{1,3}"),Ka=za(m,"{1,6}"),Ca=za(m,"{1,9}"),Ia=za(m,"{2,4}"),Ma=za(m,"{4,6}"),bb=ub=>({regex:RegExp(ub.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Oc])=>Oc,literal:!0}),lb=(ub=>{if(a.literal)return bb(ub);switch(ub.val){case "G":return pa(m.eras("short",!1),0);case "GG":return pa(m.eras("long",!1),0);case "y":return qa(Ka);case "yy":return qa(Ia,n);case "yyyy":return qa(ca);case "yyyyy":return qa(Ma);case "yyyyyy":return qa(na);case "M":return qa(ra);case "MM":return qa(T);
case "MMM":return pa(m.months("short",!0,!1),1);case "MMMM":return pa(m.months("long",!0,!1),1);case "L":return qa(ra);case "LL":return qa(T);case "LLL":return pa(m.months("short",!1,!1),1);case "LLLL":return pa(m.months("long",!1,!1),1);case "d":return qa(ra);case "dd":return qa(T);case "o":return qa(va);case "ooo":return qa(aa);case "HH":return qa(T);case "H":return qa(ra);case "hh":return qa(T);case "h":return qa(ra);case "mm":return qa(T);case "m":return qa(ra);case "q":return qa(ra);case "qq":return qa(T);
case "s":return qa(ra);case "ss":return qa(T);case "S":return qa(va);case "SSS":return qa(aa);case "u":return Ea(Ca);case "uu":return Ea(ra);case "uuu":return qa(I);case "a":return pa(m.meridiems(),0);case "kkkk":return qa(ca);case "kk":return qa(Ia,n);case "W":return qa(ra);case "WW":return qa(T);case "E":case "c":return qa(I);case "EEE":return pa(m.weekdays("short",!1,!1),1);case "EEEE":return pa(m.weekdays("long",!1,!1),1);case "ccc":return pa(m.weekdays("short",!0,!1),1);case "cccc":return pa(m.weekdays("long",
!0,!1),1);case "Z":case "ZZ":return wa(new RegExp(`([+-]${ra.source})(?::(${T.source}))?`),2);case "ZZZ":return wa(new RegExp(`([+-]${ra.source})(${T.source})?`),2);case "z":return Ea(/[a-z_+-/]{1,256}?/i);default:return bb(ub)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};lb.token=a;return lb}function Na(a){return[`^${a.map(m=>m.regex).reduce((m,I)=>`${m}(${I.source})`,"")}$`,a]}function pb(a,m,I){if(a=a.match(m)){m={};let T=1;for(const aa in I)if(F(I,aa)){const ca=I[aa],
na=ca.groups?ca.groups+1:1;!ca.literal&&ca.token&&(m[ca.token.val[0]]=ca.deser(a.slice(T,T+na)));T+=na}return[a,m]}return[a,{}]}function ib(a){const m=T=>{switch(T){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};
let I;I=k(a.Z)?k(a.z)?null:$a.create(a.z):new Va(a.Z);k(a.q)||(a.M=3*(a.q-1)+1);k(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);k(a.u)||(a.S=c(a.u));return[Object.keys(a).reduce((T,aa)=>{const ca=m(aa);ca&&(T[ca]=a[aa]);return T},{}),I]}function jb(){Gb||(Gb=Fa.fromMillis(1555555555555));return Gb}function fb(a,m){if(a.literal)return a;const I=Wa.macroTokenToFormatOpts(a.val);if(!I)return a;m=Wa.create(m,I).formatDateTimeParts(jb()).map(T=>{{const {type:ca,value:na}=
T;if("literal"===ca)T={literal:!0,val:na};else{T=I[ca];var aa=Pc[ca];"object"===typeof aa&&(aa=aa[T]);T=aa?{literal:!1,val:aa}:void 0}}return T});return m.includes(void 0)?a:m}function gb(a,m){return Array.prototype.concat(...a.map(I=>fb(I,m)))}function qb(a,m,I){I=gb(Wa.parseFormat(I),a);var T=I.map(ca=>Ba(ca,a));const aa=T.find(ca=>ca.invalidReason);if(aa)return{input:m,tokens:I,invalidReason:aa.invalidReason};{const [ca,na]=Na(T);T=RegExp(ca,"i");const [ra,va]=pb(m,T,na),[Ka,Ca]=va?ib(va):[null,
null];if(F(va,"a")&&F(va,"H"))throw new vb("Can't include meridiem when specifying 24-hour format");return{input:m,tokens:I,regex:T,rawMatches:ra,matches:va,result:Ka,zone:Ca}}}function Ua(a,m){return new Za("unit out of range",`you specified ${m} (of type ${typeof m}) as a ${a}, which is invalid`)}function Sa(a,m,I){a=(new Date(Date.UTC(a,m-1,I))).getUTCDay();return 0===a?7:a}function rb(a,m){a=l(a)?Hb:Ib;const I=a.findIndex(T=>T<m);return{month:I+1,day:m-a[I]}}function kb(a){const {year:m,month:I,
day:T}=a;var aa=T+(l(m)?Hb:Ib)[I-1];const ca=Sa(m,I,T);aa=Math.floor((aa-ca+10)/7);let na;1>aa?(na=m-1,aa=f(na)):aa>f(m)?(na=m+1,aa=1):na=m;return{weekYear:na,weekNumber:aa,weekday:ca,...C(a)}}function hb(a){const {weekYear:m,weekNumber:I,weekday:T}=a;var aa=Sa(m,1,4),ca=l(m)?366:365;aa=7*I+T-aa-3;1>aa?(ca=m-1,aa+=l(ca)?366:365):aa>ca?(ca=m+1,aa-=l(m)?366:365):ca=m;const {month:na,day:ra}=rb(ca,aa);return{year:ca,month:na,day:ra,...C(a)}}function sb(a){const {year:m,month:I,day:T}=a;var aa=T+(l(m)?
Hb:Ib)[I-1];return{year:m,ordinal:aa,...C(a)}}function E(a){const {year:m,ordinal:I}=a,{month:T,day:aa}=rb(m,I);return{year:m,month:T,day:aa,...C(a)}}function V(a){const m=z(a.year),I=P(a.month,1,12),T=P(a.day,1,d(a.year,a.month));return m?I?T?!1:Ua("day",a.day):Ua("month",a.month):Ua("year",a.year)}function ja(a){const {hour:m,minute:I,second:T,millisecond:aa}=a;a=P(m,0,23)||24===m&&0===I&&0===T&&0===aa;const ca=P(I,0,59),na=P(T,0,59),ra=P(aa,0,999);return a?ca?na?ra?!1:Ua("millisecond",aa):Ua("second",
T):Ua("minute",I):Ua("hour",m)}function ya(a){return new Za("unsupported zone",`the zone "${a.name}" is not supported`)}function xa(a){null===a.weekData&&(a.weekData=kb(a.c));return a.weekData}function Ga(a,m){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Fa({...a,...m,old:a})}function La(a,m,I){let T=a-6E4*m;const aa=I.offset(T);if(m===aa)return[T,m];T-=6E4*(aa-m);m=I.offset(T);return aa===m?[T,aa]:[a-6E4*Math.min(aa,m),Math.max(aa,m)]}function Ta(a,m){a=new Date(a+6E4*
m);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Qa(a,m,I){return La(y(a),m,I)}function Ya(a,m){const I=a.o;var T=a.c.year+Math.trunc(m.years);const aa=a.c.month+Math.trunc(m.months)+3*Math.trunc(m.quarters);T={...a.c,year:T,month:aa,day:Math.min(a.c.day,d(T,aa))+Math.trunc(m.days)+7*Math.trunc(m.weeks)};m=Ja.fromObject({years:m.years-Math.trunc(m.years),
quarters:m.quarters-Math.trunc(m.quarters),months:m.months-Math.trunc(m.months),weeks:m.weeks-Math.trunc(m.weeks),days:m.days-Math.trunc(m.days),hours:m.hours,minutes:m.minutes,seconds:m.seconds,milliseconds:m.milliseconds}).as("milliseconds");T=y(T);let [ca,na]=La(T,I,a.zone);0!==m&&(ca+=m,na=a.zone.offset(ca));return{ts:ca,o:na}}function db(a,m,I,T,aa){const {setZone:ca,zone:na}=I;return a&&0!==Object.keys(a).length?(a=Fa.fromObject(a,{...I,zone:m||na}),ca?a:a.setZone(na)):Fa.invalid(new Za("unparsable",
`the input "${aa}" can't be parsed as ${T}`))}function ab(a,m,I=!0){return a.isValid?Wa.create(Oa.create("en-US"),{allowZ:I,forceSimple:!0}).formatDateTimeFromString(a,m):null}function nb(a,{suppressSeconds:m=!1,suppressMilliseconds:I=!1,includeOffset:T,includePrefix:aa=!1,includeZone:ca=!1,spaceZone:na=!1,format:ra="extended"}){let va="basic"===ra?"HHmm":"HH:mm";m&&0===a.second&&0===a.millisecond||(va+="basic"===ra?"ss":":ss",I&&0===a.millisecond||(va+=".SSS"));(ca||T)&&na&&(va+=" ");ca?va+="z":
T&&(va+="basic"===ra?"ZZZ":"ZZ");a=ab(a,va);aa&&(a="T"+a);return a}function ob(a){const m={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];
if(!m)throw new Ub(a);return m}function Vb(a,m){const I=N(m.zone,Ra.defaultZone);m=Oa.fromObject(m);const T=Ra.now();var aa;if(k(a.year))a=T;else{for(const ca of Wb)k(a[ca])&&(a[ca]=Xb[ca]);if(aa=V(a)||ja(a))return Fa.invalid(aa);aa=I.offset(T);[a,aa]=Qa(a,aa,I)}return new Fa({ts:a,zone:I,loc:m,o:aa})}function Yb(a,m,I){const T=k(I.round)?!0:I.round,aa=(na,ra)=>{na=g(na,T||I.calendary?0:2,!0);return m.loc.clone(I).relFormatter(I).format(na,ra)},ca=na=>I.calendary?m.hasSame(a,na)?0:m.startOf(na).diff(a.startOf(na),
na).get(na):m.diff(a,na).get(na);if(I.unit)return aa(ca(I.unit),I.unit);for(const na of I.units){const ra=ca(na);if(1<=Math.abs(ra))return aa(ra,na)}return aa(a>m?-0:0,I.units[I.units.length-1])}function Zb(a){let m={};0<a.length&&"object"===typeof a[a.length-1]?(m=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[m,a]}function wb(a){if(Fa.isDateTime(a))return a;if(a&&a.valueOf&&b(a.valueOf()))return Fa.fromJSDate(a);if(a&&"object"===typeof a)return Fa.fromObject(a);throw new Xa(`Unknown datetime argument: ${a}, of type ${typeof a}`);
}class eb extends Error{}class Qc extends eb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class Rc extends eb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class Sc extends eb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class vb extends eb{}class Ub extends eb{constructor(a){super(`Invalid unit ${a}`)}}class Xa extends eb{}class cb extends eb{constructor(){super("Zone is an abstract class")}}const Jb={year:"numeric",month:"numeric",day:"numeric"},$b={year:"numeric",
month:"short",day:"numeric"},Tc={year:"numeric",month:"short",day:"numeric",weekday:"short"},ac={year:"numeric",month:"long",day:"numeric"},bc={year:"numeric",month:"long",day:"numeric",weekday:"long"},cc={hour:"numeric",minute:"numeric"},dc={hour:"numeric",minute:"numeric",second:"numeric"},ec={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},fc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},gc={hour:"numeric",minute:"numeric",hourCycle:"h23"},hc={hour:"numeric",
minute:"numeric",second:"numeric",hourCycle:"h23"},ic={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},jc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},kc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},lc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},mc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},nc={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Uc={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},oc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},pc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},qc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},
rc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},sc=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,Gc="January February March April May June July August September October November December".split(" "),Ob="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Fc="JFMAMJJASOND".split(""),Qb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Pb="Mon Tue Wed Thu Fri Sat Sun".split(" "),
Hc="MTWTFSS".split(""),tc=["AM","PM"],Kc=["Before Christ","Anno Domini"],Jc=["BC","AD"],Ic=["B","A"],Vc={D:Jb,DD:$b,DDD:ac,DDDD:bc,t:cc,tt:dc,ttt:ec,tttt:fc,T:gc,TT:hc,TTT:ic,TTTT:jc,f:kc,ff:mc,fff:oc,ffff:qc,F:lc,FF:nc,FFF:pc,FFFF:rc};class Wa{static create(a,m={}){return new Wa(a,m)}static parseFormat(a){let m=null,I="",T=!1;const aa=[];for(let ca=0;ca<a.length;ca++){const na=a.charAt(ca);"'"===na?(0<I.length&&aa.push({literal:T,val:I}),m=null,I="",T=!T):T?I+=na:na===m?I+=na:(0<I.length&&aa.push({literal:!1,
val:I}),m=I=na)}0<I.length&&aa.push({literal:T,val:I});return aa}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,m){this.opts=m;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,m){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...m}).format()}formatDateTime(a,m={}){return this.loc.dtFormatter(a,{...this.opts,...m}).format()}formatDateTimeParts(a,m={}){return this.loc.dtFormatter(a,{...this.opts,...m}).formatToParts()}resolvedOptions(a,
m={}){return this.loc.dtFormatter(a,{...this.opts,...m}).resolvedOptions()}num(a,m=0){if(this.opts.forceSimple)return H(a,m);const I={...this.opts};0<m&&(I.padTo=m);return this.loc.numberFormatter(I).format(a)}formatDateTimeFromString(a,m){const I="en"===this.loc.listingMode(),T=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,aa=(Ca,Ia)=>this.loc.extract(a,Ca,Ia),ca=Ca=>a.isOffsetFixed&&0===a.offset&&Ca.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Ca.format):"",na=(Ca,Ia)=>I?K(Ca)[a.month-
1]:aa(Ia?{month:Ca}:{month:Ca,day:"numeric"},"month"),ra=(Ca,Ia)=>I?L(Ca)[a.weekday-1]:aa(Ia?{weekday:Ca}:{weekday:Ca,month:"long",day:"numeric"},"weekday"),va=Ca=>{const Ia=Wa.macroTokenToFormatOpts(Ca);return Ia?this.formatWithSystemDefault(a,Ia):Ca},Ka=Ca=>I?Q(Ca)[0>a.year?0:1]:aa({era:Ca},"era");return M(Wa.parseFormat(m),Ca=>{switch(Ca){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,
2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return ca({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return ca({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return ca({format:"techie",
allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return I?tc[12>a.hour?0:1]:aa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return T?aa({day:"numeric"},"day"):this.num(a.day);case "dd":return T?aa({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return ra("short",!0);case "cccc":return ra("long",
!0);case "ccccc":return ra("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return ra("short",!1);case "EEEE":return ra("long",!1);case "EEEEE":return ra("narrow",!1);case "L":return T?aa({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return T?aa({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return na("short",!0);case "LLLL":return na("long",!0);case "LLLLL":return na("narrow",!0);case "M":return T?aa({month:"numeric"},"month"):this.num(a.month);
case "MM":return T?aa({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return na("short",!1);case "MMMM":return na("long",!1);case "MMMMM":return na("narrow",!1);case "y":return T?aa({year:"numeric"},"year"):this.num(a.year);case "yy":return T?aa({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return T?aa({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return T?aa({year:"numeric"},"year"):this.num(a.year,6);case "G":return Ka("short");case "GG":return Ka("long");
case "GGGGG":return Ka("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return va(Ca)}})}formatDurationFromString(a,m){const I=
aa=>{switch(aa[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}};m=Wa.parseFormat(m);const T=m.reduce((aa,{literal:ca,val:na})=>ca?aa:aa.concat(na),[]);a=a.shiftTo(...T.map(I).filter(aa=>aa));return M(m,(aa=>ca=>{const na=I(ca);return na?this.num(aa.get(na),ca.length):ca})(a))}}class Za{constructor(a,m){this.reason=a;this.explanation=m}toMessage(){return this.explanation?
`${this.reason}: ${this.explanation}`:this.reason}}class tb{get type(){throw new cb;}get name(){throw new cb;}get isUniversal(){throw new cb;}offsetName(a,m){throw new cb;}formatOffset(a,m){throw new cb;}offset(a){throw new cb;}equals(a){throw new cb;}get isValid(){throw new cb;}}let Kb=null;class uc extends tb{static get instance(){null===Kb&&(Kb=new uc);return Kb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:m,locale:I}){return u(a,m,I)}formatOffset(a,m){return p(this.offset(a),m)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}const Wc=RegExp(`^${sc.source}$`);let xb={};const Xc={year:0,month:1,day:2,hour:3,minute:4,second:5};let yb={};class $a extends tb{static create(a){yb[a]||(yb[a]=new $a(a));return yb[a]}static resetCache(){yb={};xb={}}static isValidSpecifier(a){return!(!a||!a.match(Wc))}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(m){return!1}}constructor(a){super();this.zoneName=a;this.valid=$a.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:m,locale:I}){return u(a,m,I,this.name)}formatOffset(a,m){return p(this.offset(a),m)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var m=this.name;xb[m]||(xb[m]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:m,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit"}));m=xb[m];if(m.formatToParts){m=m.formatToParts(a);var I=[];for(let Ka=0;Ka<m.length;Ka++){const {type:Ca,value:Ia}=m[Ka],Ma=Xc[Ca];k(Ma)||(I[Ma]=parseInt(Ia,10))}m=I}else{{m=m.format(a).replace(/\u200E/g,"");m=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(m);const [,Ka,Ca,Ia,Ma,bb,lb]=m;m=[Ia,Ka,Ca,Ma,bb,lb]}}const [T,aa,ca,na,ra,va]=m;m=y({year:T,month:aa,day:ca,hour:24===na?0:na,minute:ra,second:va,millisecond:0});a=+a;I=a%1E3;return(m-(a-(0<=I?I:1E3+I)))/6E4}equals(a){return"iana"===
a.type&&a.name===this.name}get isValid(){return this.valid}}let Lb=null;class Va extends tb{static get utcInstance(){null===Lb&&(Lb=new Va(0));return Lb}static instance(a){return 0===a?Va.utcInstance:new Va(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Va(v(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${p(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,m){return p(this.fixed,
m)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Rb extends tb{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let vc=()=>Date.now(),wc="system",xc=null,yc=null,zc=null,Ac;class Ra{static get now(){return vc}static set now(a){vc=
a}static set defaultZone(a){wc=a}static get defaultZone(){return N(wc,uc.instance)}static get defaultLocale(){return xc}static set defaultLocale(a){xc=a}static get defaultNumberingSystem(){return yc}static set defaultNumberingSystem(a){yc=a}static get defaultOutputCalendar(){return zc}static set defaultOutputCalendar(a){zc=a}static get throwOnInvalid(){return Ac}static set throwOnInvalid(a){Ac=a}static resetCaches(){Oa.resetCache();$a.resetCache()}}let Bb={},Cb={},Db={},zb=null;class Yc{constructor(a,
m,I){this.padTo=I.padTo||0;this.floor=I.floor||!1;m||(m={useGrouping:!1},0<I.padTo&&(m.minimumIntegerDigits=I.padTo),this.inf=Y(a,m))}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):g(a,3);return H(a,this.padTo)}}class Zc{constructor(a,m,I){this.opts=I;if(a.zone.isUniversal){var T=a.offset/60*-1;T=0<=T?`Etc/GMT+${T}`:`Etc/GMT${T}`;0!==a.offset&&$a.create(T).valid?this.dt=a:(T="UTC",this.dt=I.timeZoneName?a:0===a.offset?a:Fa.fromMillis(a.ts+6E4*a.offset))}else"system"===
a.zone.type?this.dt=a:(this.dt=a,T=a.zone.name);a={...this.opts};T&&(a.timeZone=T);this.dtf=O(m,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class $c{constructor(a,m,I){this.opts={style:"long",...I};!m&&B()&&(this.rtf=fa(a,I))}format(a,m){return this.rtf?this.rtf.format(a,m):D(m,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,m){return this.rtf?this.rtf.formatToParts(a,
m):[]}}class Oa{static fromOpts(a){return Oa.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,m,I,T=!1){a=a||Ra.defaultLocale;var aa;(aa=a)||(T?T="en-US":(zb||(zb=(new Intl.DateTimeFormat).resolvedOptions().locale),T=zb),aa=T);return new Oa(aa,m||Ra.defaultNumberingSystem,I||Ra.defaultOutputCalendar,a)}static resetCache(){zb=null;Bb={};Cb={};Db={}}static fromObject({locale:a,numberingSystem:m,outputCalendar:I}={}){return Oa.create(a,m,I)}constructor(a,m,I,T){var aa=
a.indexOf("-u-");if(-1===aa)a=[a];else{let va;aa=a.substring(0,aa);try{va=O(a).resolvedOptions()}catch(Ia){va=O(aa).resolvedOptions()}const {numberingSystem:Ka,calendar:Ca}=va;a=[aa,Ka,Ca]}const [ca,na,ra]=a;this.locale=ca;this.numberingSystem=m||na||null;this.outputCalendar=I||ra||null;m=this.locale;I=this.numberingSystem;if((a=this.outputCalendar)||I)m+="-u",a&&(m+=`-ca-${a}`),I&&(m+=`-nu-${I}`);this.intl=m;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};
this.meridiemCache=null;this.eraCache={};this.specifiedLocale=T;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(a){a=this.isEnglish();const m=(null===this.numberingSystem||"latn"===this.numberingSystem)&&
(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&m?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?Oa.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,m=!1,I=!0){return x(this,a,I,K,()=>{const T=m?{month:a,day:"numeric"}:{month:a},
aa=m?"format":"standalone";this.monthsCache[aa][a]||(this.monthsCache[aa][a]=Z(ca=>this.extract(ca,T,"month")));return this.monthsCache[aa][a]})}weekdays(a,m=!1,I=!0){return x(this,a,I,L,()=>{const T=m?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},aa=m?"format":"standalone";this.weekdaysCache[aa][a]||(this.weekdaysCache[aa][a]=r(ca=>this.extract(ca,T,"weekday")));return this.weekdaysCache[aa][a]})}meridiems(a=!0){return x(this,void 0,a,()=>tc,()=>{if(!this.meridiemCache){const m=
{hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Fa.utc(2016,11,13,9),Fa.utc(2016,11,13,19)].map(I=>this.extract(I,m,"dayperiod"))}return this.meridiemCache})}eras(a,m=!0){return x(this,a,m,Q,()=>{const I={era:a};this.eraCache[a]||(this.eraCache[a]=[Fa.utc(-40,1,1),Fa.utc(2017,1,1)].map(T=>this.extract(T,I,"era")));return this.eraCache[a]})}extract(a,m,I){return(a=this.dtFormatter(a,m).formatToParts().find(T=>T.type.toLowerCase()===I))?a.value:null}numberFormatter(a={}){return new Yc(this.intl,
a.forceSimple||this.fastNumbers,a)}dtFormatter(a,m={}){return new Zc(a,this.intl,m)}relFormatter(a={}){return new $c(this.intl,this.isEnglish(),a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}const Bc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Mb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,
Cc=RegExp(`${Mb.source}${Bc.source}?`),Nb=RegExp(`(?:T${Cc.source})?`),ad=ha("weekYear","weekNumber","weekDay"),bd=ha("year","ordinal"),Dc=RegExp(`${Mb.source} ?(?:${Bc.source}|(${sc.source}))?`),cd=RegExp(`(?: ${Dc.source})?`),dd=RegExp(`^T?${Mb.source}$`),ed=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Lc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},fd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,gd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
id=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,jd=t(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Nb),kd=t(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Nb),ld=t(/(\d{4})-?(\d{3})/,Nb),md=t(Cc),nd=R(ta,ua,Da),od=R(ad,ua,Da),pd=R(bd,ua,Da),qd=R(ua,Da),rd=R(ua),sd=t(/(\d{4})-(\d\d)-(\d\d)/,cd),td=t(Dc),ud=R(ta,ua,Da,Ha),vd=R(ua,Da,Ha),Ec={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,
seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},wd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...Ec},xd={years:{quarters:4,months:12,weeks:52.1775,
days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Ec},mb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Mc=mb.slice(0).reverse();class Ja{constructor(a){const m="longterm"===a.conversionAccuracy||
!1;this.values=a.values;this.loc=a.loc||Oa.create();this.conversionAccuracy=m?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=m?xd:wd;this.isLuxonDuration=!0}static fromMillis(a,m){return Ja.fromObject({milliseconds:a},m)}static fromObject(a,m={}){if(null==a||"object"!==typeof a)throw new Xa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new Ja({values:q(a,Ja.normalizeUnit),loc:Oa.fromObject(m),conversionAccuracy:m.conversionAccuracy})}static fromDurationLike(a){if(b(a))return Ja.fromMillis(a);
if(Ja.isDuration(a))return a;if("object"===typeof a)return Ja.fromObject(a);throw new Xa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,m){const [I]=U(a,[ed,Aa]);return I?Ja.fromObject(I,m):Ja.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,m){const [I]=U(a,[dd,rd]);return I?Ja.fromObject(I,m):Ja.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,m=null){if(!a)throw new Xa("need to specify a reason the Duration is invalid");
a=a instanceof Za?a:new Za(a,m);if(Ra.throwOnInvalid)throw new Sc(a);return new Ja({invalid:a})}static normalizeUnit(a){const m={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!m)throw new Ub(a);return m}static isDuration(a){return a&&
a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,m={}){m={...m,floor:!1!==m.round&&!1!==m.floor};return this.isValid?Wa.create(this.loc,m).formatDurationFromString(this,a):"Invalid Duration"}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+
"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=g(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var m=this.toMillis();if(0>m||864E5<=m)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,
format:"extended",...a};m=this.shiftTo("hours","minutes","seconds","milliseconds");let I="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===m.seconds&&0===m.milliseconds||(I+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===m.milliseconds||(I+=".SSS"));m=m.toFormat(I);a.includePrefix&&(m="T"+m);return m}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=Ja.fromDurationLike(a);
const m={};for(const I of mb)if(F(a.values,I)||F(this.values,I))m[I]=a.get(I)+this.get(I);return W(this,{values:m},!0)}minus(a){if(!this.isValid)return this;a=Ja.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const m={};for(const I of Object.keys(this.values))m[I]=A(a(this.values[I],I));return W(this,{values:m},!0)}get(a){return this[Ja.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...q(a,Ja.normalizeUnit)};return W(this,{values:a})}reconfigure({locale:a,
numberingSystem:m,conversionAccuracy:I}={}){a={loc:this.loc.clone({locale:a,numberingSystem:m})};I&&(a.conversionAccuracy=I);return W(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();ka(this.matrix,a);return W(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(ca=>Ja.normalizeUnit(ca));const m={},I={},T=this.toObject();let aa;for(const ca of mb)if(0<=a.indexOf(ca)){aa=ca;let na=0;for(const va in I)na+=
this.matrix[va][ca]*I[va],I[va]=0;b(T[ca])&&(na+=T[ca]);const ra=Math.trunc(na);m[ca]=ra;I[ca]=na-ra;for(const va in T)mb.indexOf(va)>mb.indexOf(ca)&&ba(this.matrix,T,va,m,ca)}else b(T[ca])&&(I[ca]=T[ca]);for(const ca in I)0!==I[ca]&&(m[aa]+=ca===aa?I[ca]:I[ca]/this.matrix[aa][ca]);return W(this,{values:m},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const m of Object.keys(this.values))a[m]=-this.values[m];return W(this,{values:a},!0)}get years(){return this.isValid?this.values.years||
0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const T of mb){var m=this.values[T];var I=a.values[T];m=void 0===m||0===m?void 0===I||0===I:m===I;if(!m)return!1}return!0}}class Pa{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,m=null){if(!a)throw new Xa("need to specify a reason the Interval is invalid");
a=a instanceof Za?a:new Za(a,m);if(Ra.throwOnInvalid)throw new Rc(a);return new Pa({invalid:a})}static fromDateTimes(a,m){a=wb(a);m=wb(m);var I=a&&a.isValid?m&&m.isValid?m<a?Pa.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${m.toISO()}`):null:Pa.invalid("missing or invalid end"):Pa.invalid("missing or invalid start");return null==I?new Pa({start:a,end:m}):I}static after(a,m){m=Ja.fromDurationLike(m);a=wb(a);return Pa.fromDateTimes(a,
a.plus(m))}static before(a,m){m=Ja.fromDurationLike(m);a=wb(a);return Pa.fromDateTimes(a.minus(m),a)}static fromISO(a,m){const [I,T]=(a||"").split("/",2);if(I&&T){let na;try{var aa=Fa.fromISO(I,m);na=aa.isValid}catch(va){na=!1}let ra;try{var ca=Fa.fromISO(T,m);ra=ca.isValid}catch(va){ra=!1}if(na&&ra)return Pa.fromDateTimes(aa,ca);if(na){if(ca=Ja.fromISO(T,m),ca.isValid)return Pa.after(aa,ca)}else if(ra&&(aa=Ja.fromISO(I,m),aa.isValid))return Pa.before(ca,aa)}return Pa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&
a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const m=this.start.startOf(a),I=this.end.startOf(a);return Math.floor(I.diff(m,
a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:m}={}){return this.isValid?Pa.fromDateTimes(a||this.s,m||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(wb).filter(ca=>this.contains(ca)).sort();const m=[];let {s:I}=this,T=0;for(;I<
this.e;){var aa=a[T]||this.e;aa=+aa>+this.e?this.e:aa;m.push(Pa.fromDateTimes(I,aa));I=aa;T+=1}return m}splitBy(a){a=Ja.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:m}=this,I=1;const T=[];for(;m<this.e;){var aa=this.start.plus(a.mapUnits(ca=>ca*I));aa=+aa>+this.e?this.e:aa;T.push(Pa.fromDateTimes(m,aa));m=aa;I+=1}return T}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?
+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const m=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return m>=a?null:Pa.fromDateTimes(m,a)}union(a){return this.isValid?Pa.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [m,I]=a.sort((T,aa)=>T.s-aa.s).reduce(([T,
aa],ca)=>aa?aa.overlaps(ca)||aa.abutsStart(ca)?[T,aa.union(ca)]:[T.concat([aa]),ca]:[T,ca],[[],null]);I&&m.push(I);return m}static xor(a){let m=null,I=0;const T=[];a=a.map(aa=>[{time:aa.s,type:"s"},{time:aa.e,type:"e"}]);a=Array.prototype.concat(...a).sort((aa,ca)=>aa.time-ca.time);for(const aa of a)I+="s"===aa.type?1:-1,1===I?m=aa.time:(m&&+m!==+aa.time&&T.push(Pa.fromDateTimes(m,aa.time)),m=null);return Pa.merge(T)}difference(...a){return Pa.xor([this].concat(a)).map(m=>this.intersection(m)).filter(m=>
m&&!m.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:m=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${m}${this.e.toFormat(a)}`:
"Invalid Interval"}toDuration(a,m){return this.isValid?this.e.diff(this.s,a,m):Ja.invalid(this.invalidReason)}mapEndpoints(a){return Pa.fromDateTimes(a(this.s),a(this.e))}}class Ab{static hasDST(a=Ra.defaultZone){const m=Fa.now().setZone(a).set({month:12});return!a.isUniversal&&m.offset!==m.set({month:6}).offset}static isValidIANAZone(a){return $a.isValidSpecifier(a)&&$a.isValidZone(a)}static normalizeZone(a){return N(a,Ra.defaultZone)}static months(a="long",{locale:m=null,numberingSystem:I=null,
locObj:T=null,outputCalendar:aa="gregory"}={}){return(T||Oa.create(m,I,aa)).months(a)}static monthsFormat(a="long",{locale:m=null,numberingSystem:I=null,locObj:T=null,outputCalendar:aa="gregory"}={}){return(T||Oa.create(m,I,aa)).months(a,!0)}static weekdays(a="long",{locale:m=null,numberingSystem:I=null,locObj:T=null}={}){return(T||Oa.create(m,I,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:m=null,numberingSystem:I=null,locObj:T=null}={}){return(T||Oa.create(m,I,null)).weekdays(a,!0)}static meridiems({locale:a=
null}={}){return Oa.create(a).meridiems()}static eras(a="short",{locale:m=null}={}){return Oa.create(m,null,"gregory").eras(a)}static features(){return{relative:B()}}}const Eb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",
mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Sb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],
thai:[3664,3673],tibt:[3872,3881]},Nc=Eb.hanidec.replace(/[\[|\]]/g,"").split(""),Tb=`( |${String.fromCharCode(160)})`,Fb=new RegExp(Tb,"g"),Pc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let Gb=null;const Ib=[0,31,59,90,120,151,181,212,243,273,
304,334],Hb=[0,31,60,91,121,152,182,213,244,274,305,335],Xb={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Wb="year month day hour minute second millisecond".split(" "),Ad="weekYear weekNumber weekday hour minute second millisecond".split(" "),Bd="year ordinal hour minute second millisecond".split(" ");class Fa{constructor(a){const m=a.zone||Ra.defaultZone;let I=a.invalid||
(Number.isNaN(a.ts)?new Za("invalid input"):null)||(m.isValid?null:ya(m));this.ts=k(a.ts)?Ra.now():a.ts;let T=null;var aa=null;I||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(m)?[T,aa]=[a.old.c,a.old.o]:(aa=m.offset(this.ts),T=Ta(this.ts,aa),T=(I=Number.isNaN(T.year)?new Za("invalid input"):null)?null:T,aa=I?null:aa));this._zone=m;this.loc=a.loc||Oa.create();this.invalid=I;this.weekData=null;this.c=T;this.o=aa;this.isLuxonDateTime=!0}static now(){return new Fa({})}static local(){const [a,m]=Zb(arguments),
[I,T,aa,ca,na,ra,va]=m;return Vb({year:I,month:T,day:aa,hour:ca,minute:na,second:ra,millisecond:va},a)}static utc(){const [a,m]=Zb(arguments),[I,T,aa,ca,na,ra,va]=m;a.zone=Va.utcInstance;return Vb({year:I,month:T,day:aa,hour:ca,minute:na,second:ra,millisecond:va},a)}static fromJSDate(a,m={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Fa.invalid("invalid input");const I=N(m.zone,Ra.defaultZone);return I.isValid?new Fa({ts:a,zone:I,loc:Oa.fromObject(m)}):
Fa.invalid(ya(I))}static fromMillis(a,m={}){if(b(a))return-864E13>a||864E13<a?Fa.invalid("Timestamp out of range"):new Fa({ts:a,zone:N(m.zone,Ra.defaultZone),loc:Oa.fromObject(m)});throw new Xa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,m={}){if(b(a))return new Fa({ts:1E3*a,zone:N(m.zone,Ra.defaultZone),loc:Oa.fromObject(m)});throw new Xa("fromSeconds requires a numerical input");}static fromObject(a,m={}){a=a||{};var I=N(m.zone,Ra.defaultZone);
if(!I.isValid)return Fa.invalid(ya(I));var T=Ra.now();const aa=I.offset(T),ca=q(a,ob);var na=!k(ca.ordinal),ra=!k(ca.year),va=!k(ca.month)||!k(ca.day);ra=ra||va;var Ka=ca.weekYear||ca.weekNumber;m=Oa.fromObject(m);if((ra||na)&&Ka)throw new vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(va&&na)throw new vb("Can't mix ordinal dates with month/day");va=Ka||ca.weekday&&!ra;let Ca=Ta(T,aa);va?(T=Ad,Ka=yd,Ca=kb(Ca)):na?(T=Bd,Ka=zd,Ca=sb(Ca)):(T=Wb,Ka=Xb);let Ia=!1;for(var Ma of T)k(ca[Ma])?
ca[Ma]=Ia?Ka[Ma]:Ca[Ma]:Ia=!0;va?(Ma=z(ca.weekYear),T=P(ca.weekNumber,1,f(ca.weekYear)),Ka=P(ca.weekday,1,7),Ma=Ma?T?Ka?!1:Ua("weekday",ca.weekday):Ua("week",ca.week):Ua("weekYear",ca.weekYear)):na?(Ma=z(ca.year),T=P(ca.ordinal,1,l(ca.year)?366:365),Ma=Ma?T?!1:Ua("ordinal",ca.ordinal):Ua("year",ca.year)):Ma=V(ca);if(Ma=Ma||ja(ca))return Fa.invalid(Ma);na=va?hb(ca):na?E(ca):ca;const [bb,lb]=Qa(na,aa,I);I=new Fa({ts:bb,zone:I,o:lb,loc:m});return ca.weekday&&ra&&a.weekday!==I.weekday?Fa.invalid("mismatched weekday",
`you can't specify both a weekday of ${ca.weekday} and a date of ${I.toISO()}`):I}static fromISO(a,m={}){const [I,T]=U(a,[jd,nd],[kd,od],[ld,pd],[md,qd]);return db(I,T,m,"ISO 8601",a)}static fromRFC2822(a,m={}){const [I,T]=U(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[fd,da]);return db(I,T,m,"RFC 2822",a)}static fromHTTP(a,m={}){const [I,T]=U(a,[gd,S],[hd,S],[id,X]);return db(I,T,m,"HTTP",m)}static fromFormat(a,m,I={}){if(k(a)||k(m))throw new Xa("fromFormat requires an input string and a format");
const {locale:T=null,numberingSystem:aa=null}=I;var ca=Oa.fromOpts({locale:T,numberingSystem:aa,defaultToEN:!0});{const {result:Ka,zone:Ca,invalidReason:Ia}=qb(ca,a,m);ca=[Ka,Ca,Ia]}const [na,ra,va]=ca;return va?Fa.invalid(va):db(na,ra,I,`format ${m}`,a)}static fromString(a,m,I={}){return Fa.fromFormat(a,m,I)}static fromSQL(a,m={}){const [I,T]=U(a,[sd,ud],[td,vd]);return db(I,T,m,"SQL",a)}static invalid(a,m=null){if(!a)throw new Xa("need to specify a reason the DateTime is invalid");a=a instanceof
Za?a:new Za(a,m);if(Ra.throwOnInvalid)throw new Qc(a);return new Fa({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?
this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?
this.c.millisecond:NaN}get weekYear(){return this.isValid?xa(this).weekYear:NaN}get weekNumber(){return this.isValid?xa(this).weekNumber:NaN}get weekday(){return this.isValid?xa(this).weekday:NaN}get ordinal(){return this.isValid?sb(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ab.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ab.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ab.weekdays("short",{locObj:this.loc})[this.weekday-
1]:null}get weekdayLong(){return this.isValid?Ab.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||
this.offset>this.set({month:5}).offset}get isInLeapYear(){return l(this.year)}get daysInMonth(){return d(this.year,this.month)}get daysInYear(){return this.isValid?l(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?f(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:m,numberingSystem:I,calendar:T}=Wa.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:m,numberingSystem:I,outputCalendar:T}}toUTC(a=0,m={}){return this.setZone(Va.instance(a),m)}toLocal(){return this.setZone(Ra.defaultZone)}setZone(a,
{keepLocalTime:m=!1,keepCalendarTime:I=!1}={}){a=N(a,Ra.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let T=this.ts;if(m||I)m=a.offset(this.ts),I=this.toObject(),[T]=Qa(I,m,a);return Ga(this,{ts:T,zone:a})}return Fa.invalid(ya(a))}reconfigure({locale:a,numberingSystem:m,outputCalendar:I}={}){a=this.loc.clone({locale:a,numberingSystem:m,outputCalendar:I});return Ga(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=q(a,ob);var m=!k(a.weekYear)||
!k(a.weekNumber)||!k(a.weekday);const I=!k(a.ordinal),T=!k(a.year),aa=!k(a.month)||!k(a.day),ca=a.weekYear||a.weekNumber;if((T||aa||I)&&ca)throw new vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(aa&&I)throw new vb("Can't mix ordinal dates with month/day");m?m=hb({...kb(this.c),...a}):k(a.ordinal)?(m={...this.toObject(),...a},k(a.day)&&(m.day=Math.min(d(m.year,m.month),m.day))):m=E({...sb(this.c),...a});const [na,ra]=Qa(m,this.o,this.zone);return Ga(this,{ts:na,o:ra})}plus(a){if(!this.isValid)return this;
a=Ja.fromDurationLike(a);return Ga(this,Ya(this,a))}minus(a){if(!this.isValid)return this;a=Ja.fromDurationLike(a).negate();return Ga(this,Ya(this,a))}startOf(a){if(!this.isValid)return this;const m={};a=Ja.normalizeUnit(a);switch(a){case "years":m.month=1;case "quarters":case "months":m.day=1;case "weeks":case "days":m.hour=0;case "hours":m.minute=0;case "minutes":m.second=0;case "seconds":m.millisecond=0}"weeks"===a&&(m.weekday=1);"quarters"===a&&(m.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(m)}endOf(a){return this.isValid?
this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,m={}){return this.isValid?Wa.create(this.loc.redefaultToEN(m)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Jb,m={}){return this.isValid?Wa.create(this.loc.clone(m),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Wa.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO(a={}){return this.isValid?`${this.toISODate(a)}T${this.toISOTime(a)}`:null}toISODate({format:a="extended"}={}){a=
"basic"===a?"yyyyMMdd":"yyyy-MM-dd";9999<this.year&&(a="+"+a);return ab(this,a)}toISOWeekDate(){return ab(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:m=!1,includeOffset:I=!0,includePrefix:T=!1,format:aa="extended"}={}){return nb(this,{suppressSeconds:m,suppressMilliseconds:a,includeOffset:I,includePrefix:T,format:aa})}toRFC2822(){return ab(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ab(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return ab(this,
"yyyy-MM-dd")}toSQLTime({includeOffset:a=!0,includeZone:m=!1}={}){return nb(this,{includeOffset:a,includeZone:m,spaceZone:!0})}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const m=
{...this.c};a.includeConfig&&(m.outputCalendar=this.outputCalendar,m.numberingSystem=this.loc.numberingSystem,m.locale=this.loc.locale);return m}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,m="milliseconds",I={}){if(!this.isValid||!a.isValid)return Ja.invalid("created by diffing an invalid DateTime");I={locale:this.locale,numberingSystem:this.numberingSystem,...I};const T=(Array.isArray(m)?m:[m]).map(Ja.normalizeUnit);m=a.valueOf()>this.valueOf();a=la(m?this:a,m?a:this,T,I);return m?
a.negate():a}diffNow(a="milliseconds",m={}){return this.diff(Fa.now(),a,m)}until(a){return this.isValid?Pa.fromDateTimes(this,a):this}hasSame(a,m){if(!this.isValid)return!1;const I=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(m)<=I&&I<=a.endOf(m)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a={}){if(!this.isValid)return null;const m=a.base||Fa.fromObject({},{zone:this.zone}),I=a.padding?
this<m?-a.padding:a.padding:0;let T="years months days hours minutes seconds".split(" "),aa=a.unit;Array.isArray(a.unit)&&(T=a.unit,aa=void 0);return Yb(m,this.plus(I),{...a,numeric:"always",units:T,unit:aa})}toRelativeCalendar(a={}){return this.isValid?Yb(a.base||Fa.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Fa.isDateTime))throw new Xa("min requires all arguments be DateTimes");return G(a,m=>m.valueOf(),
Math.min)}static max(...a){if(!a.every(Fa.isDateTime))throw new Xa("max requires all arguments be DateTimes");return G(a,m=>m.valueOf(),Math.max)}static fromFormatExplain(a,m,I={}){const {locale:T=null,numberingSystem:aa=null}=I;I=Oa.fromOpts({locale:T,numberingSystem:aa,defaultToEN:!0});return qb(I,a,m)}static fromStringExplain(a,m,I={}){return Fa.fromFormatExplain(a,m,I)}static get DATE_SHORT(){return Jb}static get DATE_MED(){return $b}static get DATE_MED_WITH_WEEKDAY(){return Tc}static get DATE_FULL(){return ac}static get DATE_HUGE(){return bc}static get TIME_SIMPLE(){return cc}static get TIME_WITH_SECONDS(){return dc}static get TIME_WITH_SHORT_OFFSET(){return ec}static get TIME_WITH_LONG_OFFSET(){return fc}static get TIME_24_SIMPLE(){return gc}static get TIME_24_WITH_SECONDS(){return hc}static get TIME_24_WITH_SHORT_OFFSET(){return ic}static get TIME_24_WITH_LONG_OFFSET(){return jc}static get DATETIME_SHORT(){return kc}static get DATETIME_SHORT_WITH_SECONDS(){return lc}static get DATETIME_MED(){return mc}static get DATETIME_MED_WITH_SECONDS(){return nc}static get DATETIME_MED_WITH_WEEKDAY(){return Uc}static get DATETIME_FULL(){return oc}static get DATETIME_FULL_WITH_SECONDS(){return pc}static get DATETIME_HUGE(){return qc}static get DATETIME_HUGE_WITH_SECONDS(){return rc}}
e.DateTime=Fa})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(e,k,b){function z(h){h||(h=b.getLocale());let c=h in P;if(!c){const y=h.split("-");1<y.length&&y[0]in P&&(h=y[0],c=!0);c||(h="en")}const [g,l,d="#,##0.###"]=P[h];return{decimal:g,group:l,pattern:d}}function B(h,c,g){g=g||{};!0===g.places&&(g.places=0);Infinity===g.places&&(g.places=6);c=c.split(".");var l="string"===typeof g.places&&g.places.indexOf(","),d=g.places;l?d=g.places.substring(l+1):0<=
d||(d=(c[1]||[]).length);0>g.round||(h=Number(h.toFixed(Number(d))));h=String(Math.abs(h)).split(".");const y=h[1]||"";c[1]||g.places?(l&&(g.places=g.places.substring(0,l)),l=void 0!==g.places?g.places:c[1]&&c[1].lastIndexOf("0")+1,l>y.length&&(h[1]=y.padEnd(Number(l),"0")),d<y.length&&(h[1]=y.substr(0,Number(d)))):h[1]&&h.pop();d=c[0].replace(",","");l=d.indexOf("0");-1!==l&&(l=d.length-l,l>h[0].length&&(h[0]=h[0].padStart(l,"0")),-1===d.indexOf("#")&&(h[0]=h[0].substr(h[0].length-l)));d=c[0].lastIndexOf(",");
let f,n;-1!==d&&(f=c[0].length-d-1,c=c[0].substr(0,d),d=c.lastIndexOf(","),-1!==d&&(n=c.length-d-1));c=[];for(d=h[0];d;)l=d.length-f,c.push(0<l?d.substr(l):d),d=0<l?d.slice(0,l):"",n&&(f=n,n=void 0);h[0]=c.reverse().join(g.group||",");return h.join(g.decimal||".")}function G(h){h=h||{};var c=z(h.locale);const g=h.pattern||c.pattern,l=c.group,d=c.decimal;let y=1;if(-1!==g.indexOf("%"))y/=100;else if(-1!==g.indexOf("\u2030"))y/=1E3;else if(-1!==g.indexOf("\u00a4"))throw Error("currency notation not supported");
c=g.split(";");1===c.length&&c.push("-"+c[0]);return{regexp:w(c,function(f){f="(?:"+k.escapeRegExpString(f,".")+")";return f.replace(H,function(n){const u={signed:!1,separator:h.strict?l:[l,""],fractional:h.fractional,decimal:d,exponent:!1};n=n.split(".");let v=h.places;1===n.length&&1!==y&&(n[1]="###");1===n.length||0===v?u.fractional=!1:(void 0===v&&(v=h.pattern?n[1].lastIndexOf("0")+1:Infinity),v&&null==h.fractional&&(u.fractional=!0),!h.places&&v<n[1].length&&(v+=","+n[1].length),u.places=v);
n=n[0].split(",");1<n.length&&(u.groupSize=n.pop().length,1<n.length&&(u.groupSize2=n.pop().length));return"("+J(u)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:l,decimal:d,factor:y}}function J(h){h=h||{};"places"in h||(h.places=Infinity);"string"!==typeof h.decimal&&(h.decimal=".");"fractional"in h&&!/^0/.test(String(h.places))||(h.fractional=[!0,!1]);"exponent"in h||(h.exponent=[!0,!1]);"eSigned"in h||(h.eSigned=[!0,!1]);var c=F(h);const g=w(h.fractional,function(d){let y="";d&&0!==h.places&&
(y="\\"+h.decimal,y=Infinity===h.places?"(?:"+y+"\\d+)?":y+("\\d{"+h.places+"}"));return y},!0),l=w(h.exponent,function(d){return d?"([eE]"+F({signed:h.eSigned})+")":""});c+=g;g&&(c="(?:(?:"+c+")|(?:"+g+"))");return c+l}function F(h){h=h||{};"signed"in h||(h.signed=[!0,!1]);"separator"in h?"groupSize"in h||(h.groupSize=3):h.separator="";const c=w(h.signed,function(l){return l?"[-+]":""},!0),g=w(h.separator,function(l){if(!l)return"(?:\\d+)";l=k.escapeRegExpString(l);" "===l?l="\\s":"\u00a0"===l&&
(l="\\s\\xa0");const d=h.groupSize,y=h.groupSize2;return y?(l="(?:0|[1-9]\\d{0,"+(y-1)+"}(?:["+l+"]\\d{"+y+"})*["+l+"]\\d{"+d+"})",0<d-y?"(?:"+l+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":l):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+l+"]\\d{"+d+"})*)"},!0);return c+g}const P={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],
"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},H=/[#0,]*[#0](?:\.0*#*)?/,w=function(h,
c,g){if(!(h instanceof Array))return c(h);const l=[];for(let d=0;d<h.length;d++)l.push(c(h[d]));h=l.join("|");return"("+(g?"?:":"")+h+")"};e._parseInfo=G;e.format=function(h,c){c={...c};var g=z(c.locale);c.customs=g;var l=c.pattern||g.pattern;if(isNaN(h)||Infinity===Math.abs(h))return null;{c=c||{};g=c.customs.group;const y=c.customs.decimal;l=l.split(";");var d=l[0];l=l[0>h?1:0]||"-"+d;if(-1!==l.indexOf("%"))h*=100;else if(-1!==l.indexOf("\u2030"))h*=1E3;else{if(-1!==l.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==l.indexOf("E"))throw Error("exponential notation not supported");}const f=H;d=d.match(f);if(!d)throw Error("unable to find a number expression in pattern: "+l);!1===c.fractional&&(c.places=0);h=l.replace(f,B(h,d[0],{decimal:y,group:g,places:c.places,round:c.round}))}return h};e.getCustoms=z;e.parse=function(h,c){c=G(c);h=(new RegExp("^"+c.regexp+"$")).exec(h);if(!h)return NaN;let g=h[1];if(!h[1]){if(!h[2])return NaN;g=h[2];c.factor*=-1}g=g.replace(new RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,
".");return Number(g)*c.factor};e.regexp=function(h){return G(h).regexp};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(e,k,b,z,B,G,J){function F(n){return`<ul class="esri-widget__list">${n.map(u=>`<li>${"string"===typeof u?J.applyTextFormattingHTML(J.htmlEntities(u)):
u}</li>`).join("")}</ul>`}function P(n){return`<table class="esri-widget__table">${n.keys().map(u=>{var v=n.field(u);v="string"===typeof v?J.applyTextFormattingHTML(J.htmlEntities(v)):v;return`<tr><th>${u}</th><td>${v}</td></tr>`}).join("")}</table>`}function H({aggregatedFeatures:n,arcadeUtils:u,featureSetVars:v,context:A,viewInfo:q,map:p,graphic:C,interceptor:K}){v.forEach(L=>{L=L.toLowerCase();var Q={map:p,spatialReference:q.sr,interceptor:K};"$map"===L&&(A.vars[L]=u.convertMapToFeatureSetCollection(Q));
"$layer"===L&&(A.vars[L]=u.convertFeatureLayerToFeatureSet({layer:C.sourceLayer,spatialReference:q.sr,interceptor:K}));"$datastore"===L&&(A.vars[L]=u.convertServiceUrlToWorkspace({url:C.sourceLayer.url,spatialReference:q.sr,interceptor:K}));if("$aggregatedfeatures"===L){Q=C.layer;const {fields:D,objectIdField:M,geometryType:N,spatialReference:O,displayField:Y}=Q;Q=new G({fields:D,objectIdField:M,geometryType:N,spatialReference:O,displayField:Y,..."feature"===Q.type?{templates:Q.templates,typeIdField:Q.typeIdField,
types:Q.types}:null,source:n});A.vars[L]=u.convertFeatureLayerToFeatureSet({layer:Q,spatialReference:q.sr,interceptor:K})}})}function w(){return new Promise((n,u)=>e(["../../../support/arcadeUtils"],n,u))}function h(n){return c.apply(this,arguments)}function c(){c=b._asyncToGenerator(function*({graphic:n,view:u}){const {isAggregate:v,layer:A}=n;if(!v||!A||"2d"!==(null==u?void 0:u.type))return[];u=yield u.whenLayerView(A);if(!u.createQuery||!u.queryFeatures)return[];const q=u.createQuery();q.aggregateIds=
[n.getObjectId()];({features:n}=yield u.queryFeatures(q));return n});return c.apply(this,arguments)}function g(n){return l.apply(this,arguments)}function l(){l=b._asyncToGenerator(function*({expressionInfo:n,arcadeUtils:u,interceptor:v,spatialReference:A,map:q,graphic:p,view:C}){if(!n||!n.expression)return null;const K=u.createSyntaxTree(n.expression),L=y.filter(D=>u.hasVariable(K,D));[C]=yield B.all([h({graphic:p,view:C}),u.loadScriptDependencies(K,!0,L)]);const Q=u.getViewInfo({spatialReference:A});
A=u.createExecContext(p,Q);A.interceptor=v;A.useAsync=!0;H({aggregatedFeatures:C,arcadeUtils:u,featureSetVars:L,context:A,viewInfo:Q,map:q,graphic:p,interceptor:v});v=u.createFunction(K,A);return u.executeAsyncFunction(v,A).catch(D=>f.error("arcade-execution-error",{error:D,graphic:p,expressionInfo:n}))});return l.apply(this,arguments)}function d(){d=b._asyncToGenerator(function*({expressionInfos:n,spatialReference:u,graphic:v,interceptor:A,map:q,view:p}){if(!n||!n.length)return{};const C=yield w(),
K={};for(const L of n)K[`expression/${L.name}`]=g({expressionInfo:L,arcadeUtils:C,interceptor:A,spatialReference:u,map:q,graphic:v,view:p});n=yield B.eachAlways(K);u={};for(const L in n)v=n[L].value,v="string"===typeof v?J.applyTextFormattingHTML(J.htmlEntities(v)):Array.isArray(v)?F(v):"esri.arcade.Dictionary"===(null==v?void 0:v.declaredClass)?P(v):v,u[L]=v;return u});return d.apply(this,arguments)}const y=["$datastore","$map","$layer","$aggregatedfeatures"],f=z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");
k.createCompiledExpression=g;k.createCompiledExpressions=function(n){return d.apply(this,arguments)};k.loadArcadeUtils=w;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n,u,v,A,q,p,C){var K;const L=J.getLogger("esri.widgets.FeatureViewModel"),Q={attachmentsContent:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};B=K=function(D){function M(O){var Y=D.call(this,O)||this;Y._handles=new G;Y._error=null;Y._featureAbortController=null;Y.graphicChangedThrottled=H.throttle(Y.graphicChanged,1,e._assertThisInitialized(Y));Y._expressionAttributes=null;Y._graphicExpressionAttributes=null;Y.abilities=
{...Q};Y.content=null;Y.contentViewModels=[];Y.defaultPopupTemplateEnabled=!1;Y.formattedAttributes=null;Y.lastEditInfo=null;Y.relatedInfos=new Map;Y.title="";Y.view=null;Y._isAllowedContentType=fa=>{const {abilities:Z}=e._assertThisInitialized(Y);return"attachments"===fa.type&&Z.attachmentsContent||"custom"===fa.type&&Z.customContent||"fields"===fa.type&&Z.fieldsContent||"media"===fa.type&&Z.mediaContent||"text"===fa.type&&Z.textContent||"expression"===fa.type&&Z.expressionContent};Y._handles.add(w.init(e._assertThisInitialized(Y),
["graphic","_effectivePopupTemplate","abilities"],()=>Y.graphicChangedThrottled()));return Y}e._inheritsLoose(M,D);var N=M.prototype;N.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};N.castAbilities=function(O){return{...Q,...O}};N.setActiveMedia=function(O,Y){O=this.contentViewModels[O];O instanceof A&&O.setActiveMedia(Y)};N.nextMedia=function(O){O=this.contentViewModels[O];
O instanceof A&&O.next()};N.previousMedia=function(O){O=this.contentViewModels[O];O instanceof A&&O.previous()};N._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};N.graphicChanged=function(){var O=e._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:Y}=this;if(Y){var fa=new AbortController;this._featureAbortController=fa;try{yield this._queryFeature({signal:fa.signal})}catch(Z){P.isAbortError(Z)||
(this._error=Z,L.error("error","The popupTemplate could not be displayed for this feature.",{error:Z,graphic:Y,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===fa&&(this._featureAbortController=null)}});return function(){return O.apply(this,arguments)}}();N._cancelFeatureQuery=function(){const {_featureAbortController:O}=this;O&&O.abort();this._featureAbortController=null};N._compileContentElement=function(O,Y){if("attachments"===O.type)return this._compileAttachments(O,
Y);if("custom"===O.type)return this._compileCustom(O,Y);if("fields"===O.type)return this._compileFields(O,Y);if("media"===O.type)return this._compileMedia(O,Y);if("text"===O.type)return this._compileText(O,Y);if("expression"===O.type)return this._compileExpression(O,Y)};N._compileContent=function(O){this._destroyContentViewModels();if(this.graphic)return Array.isArray(O)?O.filter(this._isAllowedContentType).map((Y,fa)=>this._compileContentElement(Y,fa)):"string"===typeof O?this._compileText(new y({text:O}),
0).text:O};N._destroyContentViewModels=function(){var O;null==(O=this._handles)?void 0:O.remove("content-view-models");this.contentViewModels.forEach(Y=>Y&&!Y.destroyed&&Y.destroy());this._set("contentViewModels",[])};N._setExpressionContentVM=function(O,Y){const {formattedAttributes:fa}=this,{contentElement:Z,contentElementViewModel:r}=O;O=null==Z?void 0:Z.type;r&&O&&("fields"===O&&(this._createFieldsFormattedAttributes({contentElement:Z,contentElementIndex:Y,formattedAttributes:fa}),r.set(this._createFieldsVMParams(Z,
Y))),"media"===O&&(this._createMediaFormattedAttributes({contentElement:Z,contentElementIndex:Y,formattedAttributes:fa}),r.set(this._createMediaVMParams(Z,Y))),"text"===O&&r.set(this._createTextVMParams(Z)))};N._compileExpression=function(O,Y){const {expressionInfo:fa}=O,{graphic:Z,map:r,spatialReference:x,view:t}=this,R=new u({expressionInfo:fa,graphic:Z,interceptor:K.interceptor,map:r,spatialReference:x,view:t});this.contentViewModels[Y]=R;this._handles.add(w.init(R,"contentElementViewModel",()=>
this._setExpressionContentVM(R,Y)),"content-view-models");return O};N._compileAttachments=function(O,Y){const {graphic:fa}=this,{description:Z,title:r}=O;this.contentViewModels[Y]=new f({graphic:fa,...this._compileTitleAndDesc({title:r,description:Z})});return O};N._compileCustom=function(O,Y){const {graphic:fa}=this,{creator:Z,destroyer:r}=O;this.contentViewModels[Y]=new n({graphic:fa,creator:Z,destroyer:r});return O};N._compileTitleAndDesc=function({title:O,description:Y}){const {_fieldInfoMap:fa,
_sourceLayer:Z,graphic:r,formattedAttributes:x,_expressionAttributes:t}=this,{attributes:R}=r,U=x.global;return{title:p.substituteFieldsInLinksAndAttributes({attributes:R,fieldInfoMap:fa,globalAttributes:U,expressionAttributes:t,layer:Z,text:O}),description:p.substituteFieldsInLinksAndAttributes({attributes:R,fieldInfoMap:fa,globalAttributes:U,expressionAttributes:t,layer:Z,text:Y})}};N._createFieldsVMParams=function(O,Y){const {_effectivePopupTemplate:fa,formattedAttributes:Z}=this,r={...Z.global,
...Z.content[Y]};Y=(null==O?void 0:O.fieldInfos)||(null==fa?void 0:fa.fieldInfos);Y=null==Y?void 0:Y.filter(({fieldName:U})=>p.isExpressionField(U)||p.isRelatedField(U)||r.hasOwnProperty(U));const x=null==fa?void 0:fa.expressionInfos,{description:t,title:R}=O;return{attributes:r,expressionInfos:x,fieldInfos:Y,...this._compileTitleAndDesc({title:R,description:t})}};N._compileFields=function(O,Y){const fa=O.clone();O=new v(this._createFieldsVMParams(O,Y));this.contentViewModels[Y]=O;fa.fieldInfos=O.formattedFieldInfos.slice(0);
return fa};N._createMediaVMParams=function(O,Y){const {graphic:fa,_fieldInfoMap:Z,formattedAttributes:r,_effectivePopupTemplate:x,relatedInfos:t,_sourceLayer:R,_expressionAttributes:U}=this,{attributes:ha}=fa,{description:ma,mediaInfos:ta,title:ua}=O;return{activeMediaInfoIndex:O.activeMediaInfoIndex||0,attributes:ha,layer:R,fieldInfoMap:Z,formattedAttributes:{...r.global,...r.content[Y]},expressionAttributes:U,mediaInfos:ta,popupTemplate:x,relatedInfos:t,...this._compileTitleAndDesc({title:ua,description:ma})}};
N._compileMedia=function(O,Y){const fa=O.clone();O=new A(this._createMediaVMParams(O,Y));fa.mediaInfos=O.formattedMediaInfos.slice(0);this.contentViewModels[Y]=O;return fa};N._createTextVMParams=function(O){const {graphic:Y,_fieldInfoMap:fa,_sourceLayer:Z,_expressionAttributes:r}=this;if(O&&O.text){const {attributes:x}=Y;O.text=p.substituteFieldsInLinksAndAttributes({attributes:x,fieldInfoMap:fa,globalAttributes:this.formattedAttributes.global,expressionAttributes:r,layer:Z,text:O.text})}return{graphic:Y,
creator:O.text}};N._compileText=function(O,Y){O=O.clone();this.contentViewModels[Y]=new n(this._createTextVMParams(O));return O};N._compileLastEditInfo=function(){const {_effectivePopupTemplate:O,_sourceLayer:Y,graphic:fa}=this;if(O){var {lastEditInfoEnabled:Z}=O,r=null==Y?void 0:Y.editFieldsInfo;if(Z&&r)return p.formatEditInfo(r,fa.attributes)}};N._compileTitle=function(O){const {_fieldInfoMap:Y,_sourceLayer:fa,graphic:Z,_expressionAttributes:r}=this,{attributes:x}=Z;return p.substituteFieldsInLinksAndAttributes({attributes:x,
fieldInfoMap:Y,globalAttributes:this.formattedAttributes.global,expressionAttributes:r,layer:fa,text:O})};N._getTitle=function(){var O=e._asyncToGenerator(function*(){const {_effectivePopupTemplate:Y,graphic:fa}=this;return p.graphicCallback(null==Y?void 0:Y.title,{graphic:fa})});return function(){return O.apply(this,arguments)}}();N._getContent=function(){var O=e._asyncToGenerator(function*(){const {_effectivePopupTemplate:Y,graphic:fa}=this;return p.graphicCallback(null==Y?void 0:Y.content,{graphic:fa})});
return function(){return O.apply(this,arguments)}}();N._queryFeature=function(){var O=e._asyncToGenerator(function*(Y){const {_featureAbortController:fa,_sourceLayer:Z,graphic:r,_effectivePopupTemplate:x,spatialReference:t,map:R,view:U}=this,{content:{value:ha},title:{value:ma}}=yield P.eachAlways({content:this._getContent(),title:this._getTitle()});fa===this._featureAbortController&&r&&(yield p.queryUpdatedFeature({graphic:r,popupTemplate:x,layer:Z,spatialReference:t},Y),{expressionAttributes:{value:Y}}=
yield P.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(Y),expressionAttributes:q.createCompiledExpressions({expressionInfos:null==x?void 0:x.expressionInfos,spatialReference:t,graphic:r,map:R,interceptor:K.interceptor,view:U})}),fa===this._featureAbortController&&r&&(this._expressionAttributes=Y,this._graphicExpressionAttributes={...r.attributes,...Y},this._set("formattedAttributes",this._createFormattedAttributes(ha)),this._set("title",this._compileTitle(ma)),this._set("lastEditInfo",
this._compileLastEditInfo()||null),this._set("content",this._compileContent(ha)||null)))});return function(Y){return O.apply(this,arguments)}}();N._createMediaFormattedAttributes=function({contentElement:O,contentElementIndex:Y,formattedAttributes:fa}){const {_effectivePopupTemplate:Z,graphic:r,relatedInfos:x,_sourceLayer:t,_fieldInfoMap:R,_graphicExpressionAttributes:U}=this;fa.content[Y]=p.formatAttributes({fieldInfos:null==Z?void 0:Z.fieldInfos,graphic:r,attributes:{...U,...O.attributes},layer:t,
fieldInfoMap:R,relatedInfos:x})};N._createFieldsFormattedAttributes=function({contentElement:O,contentElementIndex:Y,formattedAttributes:fa}){if(O.fieldInfos){const {graphic:Z,relatedInfos:r,_sourceLayer:x,_fieldInfoMap:t,_graphicExpressionAttributes:R}=this;fa.content[Y]=p.formatAttributes({fieldInfos:O.fieldInfos,graphic:Z,attributes:{...R,...O.attributes},layer:x,fieldInfoMap:t,relatedInfos:r})}};N._createFormattedAttributes=function(O){const {_effectivePopupTemplate:Y,graphic:fa,relatedInfos:Z,
_sourceLayer:r,_fieldInfoMap:x,_graphicExpressionAttributes:t}=this,R={global:p.formatAttributes({fieldInfos:null==Y?void 0:Y.fieldInfos,graphic:fa,attributes:t,layer:r,fieldInfoMap:x,relatedInfos:Z}),content:[]};Array.isArray(O)&&O.forEach((U,ha)=>{"fields"===U.type&&this._createFieldsFormattedAttributes({contentElement:U,contentElementIndex:ha,formattedAttributes:R});"media"===U.type&&this._createMediaFormattedAttributes({contentElement:U,contentElementIndex:ha,formattedAttributes:R})});return R};
N._checkForRelatedFeatures=function(O){const {graphic:Y,_effectivePopupTemplate:fa}=this;return this._queryRelatedInfos(Y,p.getAllFieldInfos(fa),O)};N._queryRelatedInfos=function(){var O=e._asyncToGenerator(function*(Y,fa,Z){const {relatedInfos:r,_sourceLayer:x}=this;r.clear();const t=F.isSome(x.associatedLayer)?yield x.associatedLayer.load(Z):x;if(t){var R=fa.filter(ma=>ma&&p.isRelatedField(ma.fieldName));if(R&&R.length){fa.forEach(ma=>this._configureRelatedInfo(ma,t));var U=yield C.queryLayerInfos({relatedInfos:r,
layer:t},Z);Object.keys(U).forEach(ma=>{var ta;const ua=r.get(ma.toString());ma=null==(ta=U[ma])?void 0:ta.value;ua&&ma&&(ua.layerInfo=ma.data)});var ha=yield C.queryRelatedFeatures({graphic:Y,relatedInfos:r,layer:t},Z);Object.keys(ha).forEach(ma=>{var ta;C.setRelatedFeatures(null==(ta=ha[ma])?void 0:ta.value,r.get(ma.toString()))})}}});return function(Y,fa,Z){return O.apply(this,arguments)}}();N._configureRelatedInfo=function(O,Y){const {relatedInfos:fa}=this,Z=C.getRelatedFieldInfo(O.fieldName);
if(Z){var {layerId:r,fieldName:x}=Z;r&&(Y=fa.get(r.toString())||C.createRelatedInfo(r,Y))&&(C.updateRelatedInfo({relatedInfo:Y,fieldName:x,fieldInfo:O}),this.relatedInfos.set(r,Y))}};e._createClass(M,[{key:"_effectivePopupTemplate",get:function(){return F.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return p.createfieldInfoMap(p.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",
get:function(){return p.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(O){this._set("graphic",O?O.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(O){void 0===O?this._clearOverride("spatialReference"):this._override("spatialReference",O)}},{key:"map",get:function(){return this.get("view.map")||null},
set:function(O){void 0===O?this._clearOverride("map"):this._override("map",O)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return M}(B);B.interceptor=new z.FeatureSetQueryInterceptor(p.preLayerQueryCallback,p.preRequestCallback);k.__decorate([h.property()],B.prototype,"_error",void 0);k.__decorate([h.property()],B.prototype,"_featureAbortController",void 0);k.__decorate([h.property({readOnly:!0})],B.prototype,"_effectivePopupTemplate",null);k.__decorate([h.property({readOnly:!0})],
B.prototype,"_fieldInfoMap",null);k.__decorate([h.property({readOnly:!0})],B.prototype,"_sourceLayer",null);k.__decorate([h.property()],B.prototype,"abilities",void 0);k.__decorate([l.cast("abilities")],B.prototype,"castAbilities",null);k.__decorate([h.property({readOnly:!0})],B.prototype,"content",void 0);k.__decorate([h.property({readOnly:!0})],B.prototype,"contentViewModels",void 0);k.__decorate([h.property({type:Boolean})],B.prototype,"defaultPopupTemplateEnabled",void 0);k.__decorate([h.property({readOnly:!0})],
B.prototype,"state",null);k.__decorate([h.property({readOnly:!0})],B.prototype,"formattedAttributes",void 0);k.__decorate([h.property({type:b,value:null})],B.prototype,"graphic",null);k.__decorate([h.property({readOnly:!0})],B.prototype,"lastEditInfo",void 0);k.__decorate([h.property({readOnly:!0})],B.prototype,"relatedInfos",void 0);k.__decorate([h.property()],B.prototype,"spatialReference",null);k.__decorate([h.property({readOnly:!0})],B.prototype,"title",void 0);k.__decorate([h.property()],B.prototype,
"map",null);k.__decorate([h.property({readOnly:!0})],B.prototype,"waitingForContent",null);k.__decorate([h.property()],B.prototype,"view",void 0);return B=K=k.__decorate([d.subclass("esri.widgets.FeatureViewModel")],B)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(e){e.FeatureSetQueryInterceptor=function(k,b){this.preLayerQueryCallback=k;this.preRequestCallback=b;this.preLayerQueryCallback||(this.preLayerQueryCallback=z=>{});this.preRequestCallback||
(this.preLayerQueryCallback=z=>{})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(e,k,b,z,B,G,
J,F,P,H,w){e.FeatureContentMixin=h=>{h=function(c){function g(){var l=c.apply(this,arguments)||this;l.renderNodeContent=d=>H.isWidget(d)&&!d.destroyed?w.tsx("div",{key:d},d.render()):d instanceof HTMLElement?w.tsx("div",{key:d,bind:d,afterCreate:l._attachToNode}):H.hasDomNode(d)?w.tsx("div",{key:d,bind:d.domNode,afterCreate:l._attachToNode}):null;return l}k._inheritsLoose(g,c);g.prototype._attachToNode=function(l){l.appendChild(this)};return g}(h);return h=b.__decorate([P.subclass("esri.widgets.Feature.ContentMixin")],
h)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ../core/Logger ./support/jsxFactory".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d){J=function(y){function f(u,v){u=y.call(this,u,v)||this;u._animationDelay=500;u._animationPromise=null;u.location=null;u.view=null;u.viewModel=new c;u.visible=!1;return u}e._inheritsLoose(f,y);var n=f.prototype;n.initialize=function(){this.own([B.watch(this,"visible",u=>this._visibleChange(u))])};n.destroy=function(){this._animationPromise=null};n.show=function(u){const {location:v,promise:A}=u;v&&(this.viewModel.location=v);this.visible=!0;u=()=>this.hide();
A&&A.catch(()=>{}).then(u)};n.hide=function(){this.visible=!1};n.render=function(){var {visible:u}=this,{screenLocation:v}=this.viewModel;v=!!v;u={["esri-spinner--start"]:u&&v,["esri-spinner--finish"]:!u&&v};v=this._getPositionStyles();return d.tsx("div",{class:this.classes("esri-spinner",u),styles:v})};n._visibleChange=function(u){if(u)this.viewModel.screenLocationEnabled=!0;else{var v=z.after(this._animationDelay);this._animationPromise=v;v.catch(()=>{}).then(()=>{this._animationPromise===v&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};n._getPositionStyles=function(){const {screenLocation:u,view:v}=this.viewModel;if(!v||b.isNone(u))return{};const {padding:A}=v;return{left:`${u.x-A.left}px`,top:`${u.y-A.top}px`}};return f}(h);k.__decorate([G.aliasOf("viewModel.location")],J.prototype,"location",void 0);k.__decorate([G.aliasOf("viewModel.view")],J.prototype,"view",void 0);k.__decorate([H.property({type:c})],J.prototype,"viewModel",void 0);k.__decorate([G.aliasOf("viewModel.visible")],J.prototype,
"visible",void 0);return J=k.__decorate([w.subclass("esri.widgets.Spinner")],J)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(e,k,b,z,B,G,J,F){z=function(P){function H(w){w=P.call(this,w)||this;w.visible=
!1;return w}e._inheritsLoose(H,P);return H}(F);k.__decorate([b.property()],z.prototype,"visible",void 0);return z=k.__decorate([J.subclass("esri.widgets.CompassViewModel")],z)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w){b=function(h){function c(l){var d=h.call(this,l)||this;d._anchorHandles=new z;d.location=null;d.screenLocation=null;d.screenLocationEnabled=!1;d.view=null;d._anchorHandles.add([G.watch(e._assertThisInitialized(d),["screenLocationEnabled","location","view.size","view.stationary"],()=>d._updateScreenPointAndHandle()),G.watch(e._assertThisInitialized(d),["view","view.ready"],()=>d._wireUpView())]);return d}e._inheritsLoose(c,h);var g=c.prototype;g.destroy=function(){this.view=
null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};g._wireUpView=function(){this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var {view:l}=this;l=G.pausable(l,"3d"===l.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(l,"view");this._viewpointHandle=l;this._toggleWatchingViewpoint()}};g._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};
g._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};g._toggleWatchingViewpoint=function(){const {_viewpointHandle:l,location:d,screenLocationEnabled:y}=this;l&&(d&&y?l.resume():l.pause())};g._setScreenLocation=function(){const {location:l,view:d,screenLocationEnabled:y}=this;var f=this.get("view.ready");f=y&&f&&B.isSome(l)?d.toScreen(l):null;this._set("screenLocation",f)};return c}(b.EventedAccessor);k.__decorate([J.property()],b.prototype,"location",
void 0);k.__decorate([J.property({readOnly:!0})],b.prototype,"screenLocation",void 0);k.__decorate([J.property()],b.prototype,"screenLocationEnabled",void 0);k.__decorate([J.property()],b.prototype,"view",void 0);return b=k.__decorate([w.subclass("esri.widgets.support.AnchorElementViewModel")],b)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n,u,v,A,q,p,C,K,L,Q,D,M,N){const O=G.ofType({key:"type",defaultKeyValue:"button",base:n,typeMap:{button:u,toggle:v}}),Y=P.getLogger("esri.widgets.Popup.PopupViewModel");b=function(fa){function Z(x){x=fa.call(this,x)||this;x._handles=new F;x._pendingPromises=new Set;x._fetchFeaturesController=null;x._selectedClusterFeature=null;x.featurePage=null;x.actions=new O;x.defaultPopupTemplateEnabled=!1;x.autoCloseEnabled=!1;x.autoOpenEnabled=!0;x.browseClusterEnabled=
!1;x.content=null;x.featuresPerPage=20;x.featureViewModelAbilities=null;x.featureViewModels=[];x.highlightEnabled=!0;x.includeDefaultActions=!0;x.selectedClusterBoundaryFeature=new z({symbol:new N({outline:{width:1.5,color:"cyan"},style:"none"})});x.title=null;x.updateLocationEnabled=!1;x.view=null;x.visible=!1;x.zoomFactor=4;x.zoomToLocation=null;return x}e._inheritsLoose(Z,fa);var r=Z.prototype;r.initialize=function(){this._handles.add([w.init(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),
this.on("view-change",()=>this._autoClose()),w.watch(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),w.watch(this,"view.animation.state",x=>this._animationStateChange(x)),w.watch(this,"location",x=>this._locationChange(x)),w.watch(this,"selectedFeature",x=>this._selectedFeatureChange(x)),w.watch(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),w.watch(this,["featurePage","selectedFeatureIndex","featureCount",
"featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),w.watch(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",x=>L.triggerAction({event:x,view:this.view})),w.whenFalse(this,"waitingForResult",()=>this._waitingForResultChange(),!0),w.watch(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),w.watch(this,["view.scale"],this._viewScaleChange),w.whenFalse(this,"visible",()=>this.browseClusterEnabled=
!1),w.watch(this,"browseClusterEnabled",x=>x?this.enableClusterBrowsing():this.disableClusterBrowsing())])};r.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};r.centerAtLocation=function(){var {view:x}=this;const t=L.getSelectedTarget(this);return t?this.callGoTo({target:{target:t,scale:x.scale}}):(x=new J("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",
{target:t,view:x}),Y.error(x),Promise.reject(x))};r.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};r.fetchFeatures=function(x,t){const {view:R}=this;return R&&x?R.fetchPopupFeatures(x,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal}):(x=new J("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:x,view:R}),Y.error(x),Promise.reject(x))};r.open=
function(x){x={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...x,visible:!0};const {fetchFeatures:t}=x;delete x.fetchFeatures;t&&this._setFetchFeaturesPromises(x.location);this.set(x)};r.triggerAction=function(x){(x=this.allActions.getItemAt(x))&&!x.disabled&&this.emit("trigger-action",{action:x})};r.next=function(){this.selectedFeatureIndex+=1;return this};r.previous=function(){--this.selectedFeatureIndex;return this};r.disableClusterBrowsing=function(){L.removeClusteredFeaturesForBrowsing(this);
this._clearBrowsedClusterGraphics()};r.enableClusterBrowsing=function(){var x=e._asyncToGenerator(function*(){yield L.displayClusterExtent(this);yield L.browseAggregateFeatures(this)});return function(){return x.apply(this,arguments)}}();r._animationStateChange=function(x){this.zoomToLocation||(K.zoomToFeature.disabled="waiting-for-target"===x)};r._clearBrowsedClusterGraphics=function(){var x;const t=null==(x=this.view)?void 0:x.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature));
this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};r._viewScaleChange=function(){var x;if(null!=(x=this.selectedFeature)&&x.isAggregate||this.browseClusterEnabled)this.visible=this.browseClusterEnabled=!1};r._locationChange=function(x){const {selectedFeature:t,updateLocationEnabled:R}=this;R&&x&&(!t||t.geometry)&&this.centerAtLocation()};r._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+
1:null};r._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};r._setGraphicOnFeatureViewModels=function(){const {features:x,featureCount:t,featurePage:R,featuresPerPage:U,featureViewModels:ha}=this;if(null!==R){var ma=((R-1)*U+t)%t;ha.slice(ma,ma+U).forEach((ta,ua)=>{ta&&!ta.graphic&&(ta.graphic=x[ma+ua])})}};r._selectedFeatureChange=function(){var x=e._asyncToGenerator(function*(t){if(t){var {location:R,updateLocationEnabled:U,view:ha}=this;this.browseClusterEnabled?
(this._selectedClusterFeature&&(ha.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),t.isAggregate||(t.symbol=yield A.getDisplayedSymbol(t),this._selectedClusterFeature=t,ha.graphics.add(this._selectedClusterFeature))):!U&&R||!t.geometry?U&&!t.geometry&&this.centerAtLocation().then(()=>{this.location=ha.center.clone()}):this.location=H.unwrap(this._getPointFromGeometry(t.geometry))}});return function(t){return x.apply(this,arguments)}}();r._waitingForResultChange=function(){!this.featureCount&&
this.promises&&(this.visible=!1)};r._setFetchFeaturesPromises=function(x){return this._fetchFeaturesWithController(this._getScreenPoint(x||this.location)).then(t=>{const {clientOnlyGraphics:R,promisesPerLayerView:U}=t;t=Promise.resolve(R);const ha=U.map(ma=>ma.promise);this.promises=[t,...ha]})};r._destroyFeatureVMs=function(){this.featureViewModels.forEach(x=>x&&!x.destroyed&&x.destroy());this._set("featureViewModels",[])};r._updateFeatureVMs=function(){const {selectedFeature:x,features:t,featureViewModels:R}=
this;null!=x&&x.isAggregate||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(t&&t.length){var U=R.slice(0),ha=[];t.forEach((ma,ta)=>{if(ma){var ua=null;U.some((Aa,ea)=>{Aa&&Aa.graphic===ma&&(ua=Aa,U.splice(ea,1));return!!ua});if(ua)ha[ta]=ua;else{var Da,Ha;const Aa=new C({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(Da=this.view)?void 0:Da.spatialReference,graphic:ma===x?ma:null,map:null==(Ha=this.view)?void 0:
Ha.map,view:this.view});ha[ta]=Aa}}});U.forEach(ma=>ma&&!ma.destroyed&&ma.destroy());this._set("featureViewModels",ha)}};r._getScreenPoint=function(x){const {view:t}=this;return t&&x&&"function"===typeof t.toScreen?t.toScreen(x):null};r._autoOpenEnabledChange=function(){const {_handles:x,autoOpenEnabled:t}=this;x.remove("auto-fetch-features");if(t&&this.view){const R=this.view.on("click",U=>{"mouse"===U.pointerType&&0!==U.button||this._fetchFeaturesAndOpen(U)},q.ViewEventPriorities.WIDGET);x.add(R,
"auto-fetch-features")}};r._cancelFetchingFeatures=function(){const x=this._fetchFeaturesController;x&&x.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};r._fetchFeaturesWithController=function(x,t){this._cancelFetchingFeatures();const R=new AbortController,{signal:U}=R;this._fetchFeaturesController=R;this.notifyChange("waitingForResult");x=this.fetchFeatures(x,{signal:U,event:t});x.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});
return x};r._fetchFeaturesAndOpen=function(x){const {screenPoint:t,mapPoint:R}=x,{view:U}=this;this._fetchFeaturesWithController(t,x).then(ha=>{const {clientOnlyGraphics:ma,promisesPerLayerView:ta,location:ua}=ha,Da=[Promise.resolve(ma),...ta.map(Ha=>Ha.promise)];U.popup.open({location:ua||R,promises:Da});return ha})};r._updatePendingPromises=function(x){x&&this._pendingPromises.has(x)&&(this._pendingPromises.delete(x),this.notifyChange("pendingPromisesCount"))};r._autoClose=function(){this.autoCloseEnabled&&
(this.visible=!1)};r._getPointFromGeometry=function(x){return H.isNone(x)?null:"point"===x.type?x:"extent"===x.type?x.center:"polygon"===x.type?x.centroid:"multipoint"===x.type||"polyline"===x.type?x.extent.center:null};r._getLayerView=function(){var x=e._asyncToGenerator(function*(t,R){yield t.when();return t.whenLayerView(R)});return function(t,R){return x.apply(this,arguments)}}();r._highlightFeature=function(){var x=e._asyncToGenerator(function*(){this._handles.remove("highlight");const {selectedFeature:t,
highlightEnabled:R,view:U,visible:ha}=this;if(t&&U&&R&&ha){var {layer:ma,sourceLayer:ta}=t;if("map-notes"===(null==ta?void 0:ta.type)||"subtype-group"===(null==ta?void 0:ta.type))ma=ta;if(ma&&ma instanceof f){var ua=this._getLayerView(U,ma);this._highlightPromise=ua;var Da=yield ua;if(Da&&p.highlightsSupported(Da)&&this._highlightPromise===ua&&this.selectedFeature&&this.highlightEnabled&&this.visible){ua="objectIdField"in ma&&ma.objectIdField;var Ha=t.attributes;Da=Da.highlight(Ha&&ua&&Ha[ua]||t);
this._handles.add(Da,"highlight")}}}});return function(){return x.apply(this,arguments)}}();r._updateFeatures=function(x){const {features:t}=this;x&&x.length&&(t.length?(x=x.filter(R=>-1===t.indexOf(R)),this.features=t.concat(x)):this.features=x)};e._createClass(Z,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(x=>x.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const x=this._get("allActions")||
new O;x.removeAll();const {actions:t,defaultActions:R,defaultPopupTemplateEnabled:U,includeDefaultActions:ha,selectedFeature:ma}=this;var ta=ha?R.concat(t):t;const ua=ma&&("function"===typeof ma.getEffectivePopupTemplate&&ma.getEffectivePopupTemplate(U)||ma.popupTemplate),Da=ua&&ua.actions;(ta=ua&&ua.overwriteActions?Da:Da?Da.concat(ta):ta)&&ta.filter(Boolean).forEach(Ha=>x.add(Ha));return x}},{key:"defaultActions",get:function(){var x;const t=this._get("defaultActions")||new O;t.removeAll();t.addMany(null!=
(x=this.selectedFeature)&&x.isAggregate?[K.zoomToClusteredFeatures.clone(),K.browseClusteredFeatures.clone()]:[K.zoomToFeature.clone()]);return t}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(x){x=x||[];this._set("features",x);const {pendingPromisesCount:t,promiseCount:R,selectedFeatureIndex:U}=this,ha=R&&x.length;ha&&t&&-1===U?this.selectedFeatureIndex=0:ha&&-1!==U||(this.selectedFeatureIndex=x.length?
0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(x){const t=this.get("view.spatialReference.isWebMercator");x&&x.get("spatialReference.isWGS84")&&t&&(x=y.geographicToWebMercator(x));this._set("location",x)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},
{key:"promises",get:function(){return this._get("promises")||[]},set:function(x){this._pendingPromises.clear();this.features=[];Array.isArray(x)&&x.length?(this._set("promises",x),x=x.slice(0),x.forEach(t=>{this._pendingPromises.add(t);t.then(R=>{this._pendingPromises.has(t)&&this._updateFeatures(R);this._updatePendingPromises(t)},()=>this._updatePendingPromises(t))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:x,selectedFeatureIndex:t}=
this;return-1===t?null:x[t]||null}},{key:"selectedFeatureIndex",get:function(){const x=this._get("selectedFeatureIndex");return"number"===typeof x?x:-1},set:function(x){const {featureCount:t}=this;x=isNaN(x)||-1>x||!t?-1:(x+t)%t;this._set("selectedFeatureIndex",x)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return Z}(D.GoToMixin(Q));k.__decorate([h.property()],
b.prototype,"featurePage",void 0);k.__decorate([h.property()],b.prototype,"isLoadingFeature",null);k.__decorate([h.property({type:O})],b.prototype,"actions",void 0);k.__decorate([h.property({readOnly:!0})],b.prototype,"active",null);k.__decorate([h.property({readOnly:!0})],b.prototype,"allActions",null);k.__decorate([h.property({type:Boolean})],b.prototype,"defaultPopupTemplateEnabled",void 0);k.__decorate([h.property()],b.prototype,"autoCloseEnabled",void 0);k.__decorate([h.property()],b.prototype,
"autoOpenEnabled",void 0);k.__decorate([h.property()],b.prototype,"browseClusterEnabled",void 0);k.__decorate([h.property()],b.prototype,"content",void 0);k.__decorate([h.property({type:O,readOnly:!0})],b.prototype,"defaultActions",null);k.__decorate([h.property({readOnly:!0})],b.prototype,"featureCount",null);k.__decorate([h.property()],b.prototype,"features",null);k.__decorate([h.property()],b.prototype,"featuresPerPage",void 0);k.__decorate([h.property()],b.prototype,"featureViewModelAbilities",
void 0);k.__decorate([h.property({readOnly:!0})],b.prototype,"featureViewModels",void 0);k.__decorate([h.property()],b.prototype,"highlightEnabled",void 0);k.__decorate([h.property()],b.prototype,"includeDefaultActions",void 0);k.__decorate([h.property({type:M})],b.prototype,"location",null);k.__decorate([h.property({readOnly:!0})],b.prototype,"pendingPromisesCount",null);k.__decorate([h.property({readOnly:!0})],b.prototype,"selectedClusterBoundaryFeature",void 0);k.__decorate([h.property({readOnly:!0})],
b.prototype,"waitingForResult",null);k.__decorate([h.property({readOnly:!0})],b.prototype,"promiseCount",null);k.__decorate([h.property()],b.prototype,"promises",null);k.__decorate([h.property({value:null,readOnly:!0})],b.prototype,"selectedFeature",null);k.__decorate([h.property({value:-1})],b.prototype,"selectedFeatureIndex",null);k.__decorate([h.property({readOnly:!0})],b.prototype,"selectedFeatureViewModel",null);k.__decorate([h.property({readOnly:!0})],b.prototype,"state",null);k.__decorate([h.property()],
b.prototype,"title",void 0);k.__decorate([h.property()],b.prototype,"updateLocationEnabled",void 0);k.__decorate([h.property()],b.prototype,"view",void 0);k.__decorate([h.property()],b.prototype,"visible",void 0);k.__decorate([h.property()],b.prototype,"zoomFactor",void 0);k.__decorate([h.property()],b.prototype,"zoomToLocation",void 0);k.__decorate([h.property()],b.prototype,"centerAtLocation",null);return b=k.__decorate([d.subclass("esri.widgets.Popup.PopupViewModel")],b)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./utils".split(" "),
function(e,k,b,z,B,G,J){function F(g,l){return P.apply(this,arguments)}function P(){P=b._asyncToGenerator(function*(g,l){switch(g.type){case "web-style":var {previewWebStyleSymbol:d}=yield new Promise((y,f)=>e(["./previewWebStyleSymbol"],y,f));return d(g,F,l);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:d}=yield new Promise((y,f)=>e(["./previewSymbol3D"],y,f)),d(g,l);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:d}=
yield new Promise((y,f)=>e(["./previewSymbol2D"],y,f)),d(g,l);case "cim":return{previewCIMSymbol:d}=yield new Promise((y,f)=>e(["./previewCIMSymbol"],y,f)),d(g,l)}});return P.apply(this,arguments)}function H(g){return g&&"opacity"in g?g.opacity*H(g.parent):1}function w(){w=b._asyncToGenerator(function*(g,l){var d,y;if(g){var f=g.sourceLayer;f=null!=(d=B.isSome(l)&&null!=(y=l.useSourceLayer)&&y?f:g.layer)?d:f;d=H(f);if(B.isSome(g.symbol)&&(!B.isSome(l)||!0!==l.ignoreGraphicSymbol))return g="web-style"===
g.symbol.type?yield g.symbol.fetchSymbol(B.isSome(l)?l.abortOptions:null):g.symbol.clone(),J.applyColorToSymbol(g,null,d),g;var n=B.isSome(l)&&l.renderer||f&&"renderer"in f&&f.renderer;if(y=n&&"getSymbolAsync"in n?yield n.getSymbolAsync(g,l):null){y="web-style"===y.type?yield y.fetchSymbol(B.isSome(l)?l.abortOptions:null):y.clone();if(!("visualVariables"in n&&n.visualVariables&&n.visualVariables.length))return J.applyColorToSymbol(y,null,d),y;"arcadeRequiredForVisualVariables"in n&&n.arcadeRequiredForVisualVariables&&
(B.isNone(l)||B.isNone(l.arcade))&&(l={...B.unwrap(l)},l.arcade=yield G.loadArcade());f=yield new Promise((C,K)=>e(["../../renderers/visualVariables/support/visualVariableUtils"],C,K));var u=[],v=[],A=[],q=[];for(var p of n.visualVariables)switch(p.type){case "color":u.push(p);break;case "opacity":v.push(p);break;case "rotation":q.push(p);break;case "size":p.target||A.push(p)}p=(p=!!u.length&&u[u.length-1])?f.getColor(p,g,l):null;v=(v=!!v.length&&v[v.length-1])?f.getOpacity(v,g,l):null;null!=d&&(v=
null!=v?v*d:d);J.applyColorToSymbol(y,p,v);A.length&&(d=f.getAllSizes(A,g,l),yield J.applySizesToSymbol(y,d));for(const C of q)J.applyRotationToSymbol(y,f.getRotationAngle(C,g,l),C.axis);return y}}});return w.apply(this,arguments)}function h(){h=b._asyncToGenerator(function*(g,l){var d;if(g){var y=H(g.layer||g.sourceLayer);if(B.isSome(g.symbol)&&(!B.isSome(l)||!0!==l.ignoreGraphicSymbol))return g="web-style"===g.symbol.type?yield g.symbol.fetchSymbol(B.isSome(l)?l.abortOptions:null):g.symbol.clone(),
J.getColorFromSymbol(g,y);var f=B.isSome(l)&&l.renderer||g.get("layer.renderer")||g.get("sourceLayer.renderer"),n=yield f.getSymbolAsync(g,l);if(n){n="web-style"===n.type?yield n.fetchSymbol(B.isSome(l)?l.abortOptions:null):n.clone();n=J.getColorFromSymbol(n,y);if(!("visualVariables"in f)||"visualVariables"in f&&!f.visualVariables||"visualVariables"in f&&(null==(d=f.visualVariables)||!d.length))return n;f.arcadeRequiredForVisualVariables&&(B.isNone(l)||B.isNone(l.arcade))&&(l={...B.unwrap(l)},l.arcade=
yield G.loadArcade());d=yield new Promise((A,q)=>e(["../../renderers/visualVariables/support/visualVariableUtils"],A,q));var u=[],v=[];for(const A of f.visualVariables)switch(A.type){case "color":u.push(A);break;case "opacity":v.push(A)}f=(f=0<u.length?u[u.length-1]:null)?d.getColor(f,g,l):n;g=(n=0<v.length?v[v.length-1]:null)?d.getOpacity(n,g,l):null;null!=y&&(g=null!=g?g*y:y);return f?J.applyOpacityToColor(f,g):null}}});return h.apply(this,arguments)}let c=null;k.getDisplayedColor=function(g,l){return h.apply(this,
arguments)};k.getDisplayedSymbol=function(g,l){return w.apply(this,arguments)};k.renderColorRampPreviewHTML=function(g,l={}){var d="horizontal"===l.align;const {width:y=d?75:24,height:f=d?24:75,gradient:n=!0}=l;var u=window.devicePixelRatio,v=y*u,A=f*u;u=document.createElement("canvas");u.width=v;u.height=A;u.style.width=`${y}px`;u.style.height=`${f}px`;const q=u.getContext("2d");var p=d?v:0,C=d?0:A;if(n){const K=q.createLinearGradient(0,0,p,C);d=g.length;const L=1===d?0:1/(d-1);g.forEach((Q,D)=>
K.addColorStop(D*L,Q.toString()));q.fillStyle=K;q.fillRect(0,0,v,A)}else{v=d?v/g.length:v;A=d?A:A/g.length;C=p=0;for(const K of g)q.fillStyle=K.toString(),q.fillRect(p,C,v,A),p=d?p+v:0,C=d?0:C+A}g=document.createElement("div");g.style.width=`${y}px`;g.style.height=`${f}px`;g.style.filter=J.getCSSFilterFromEffectList(null==l?void 0:l.effectList);g.appendChild(u);return g};k.renderDotDensityPreviewHTML=function(g,l,d){const {backgroundColor:y,outline:f,dotSize:n}=g;d=d&&d.swatchSize||22;const u=Math.round(d*
d/n**2*.8),v=window.devicePixelRatio;g=document.createElement("canvas");const A=d*v;g.width=A;g.height=A;g.style.width=`${g.width/v}px`;g.style.height=`${g.height/v}px`;const q=g.getContext("2d");y&&(q.fillStyle=y.toCss(!0),q.fillRect(0,0,A,A),q.fill());q.fillStyle=l.toCss(!0);if(c&&c.length/2===u)for(l=0;l<2*u;l+=2)q.fillRect(c[l],c[l+1],n*v,n*v),q.fill();else for(c=[],l=0;l<2*u;l+=2){const p=Math.floor(Math.random()*(A-0+1)),C=Math.floor(Math.random()*(A-0+1));c.push(p,C);q.fillRect(p,C,n*v,n*v);
q.fill()}f&&(f.color&&(q.strokeStyle=f.color.toCss(!0)),q.lineWidth=f.width,q.strokeRect(0,0,A,A));d=new Image(d,d);d.src=g.toDataURL();return d};k.renderPreviewHTML=F;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c){function g(N){N=N.symbolLayers;if(!N)return null;let O=null;N.forEach(Y=>{if("object"!==Y.type||null==Y.resource.href)O="water"===Y.type?F.unwrap(Y.color):F.isSome(Y.material)?F.unwrap(Y.material.color):null});return O?new z(O):null}function l(N,O){if(null==O)return N;N=N.toRgba();N[3]*=O;return new z(N)}function d(N,O,Y){if(N=N.symbolLayers){var fa=Z=>{Z=F.isSome(Z)?Z:null;O=O||Z||null!=Y&&M;return l(O,Y)};N.forEach(Z=>{if("object"!==Z.type||null==Z.resource.href||
O)if("water"===Z.type)Z.color=fa(Z.color);else{var r=F.isSome(Z.material)?Z.material.color:null;r=fa(r);F.isNone(Z.material)?Z.material=new c.default({color:r}):Z.material.color=r;null!=Y&&"outline"in Z&&F.isSome(Z.outline)&&F.isSome(Z.outline.color)&&(Z.outline.color=l(Z.outline.color,Y))}})}}function y(N,O){return f.apply(this,arguments)}function f(){f=b._asyncToGenerator(function*(N,O){(N=N.symbolLayers)&&(yield G.forEach(N,function(){var Y=b._asyncToGenerator(function*(fa){return n(fa,O)});return function(fa){return Y.apply(this,
arguments)}}()))});return f.apply(this,arguments)}function n(N,O){return u.apply(this,arguments)}function u(){u=b._asyncToGenerator(function*(N,O){switch(N.type){case "extrude":N.size="number"===typeof O[2]?O[2]:0;break;case "icon":case "line":case "text":O=v(O);F.isSome(O)&&(N.size=O);break;case "path":{const Y=p(O,H.ONES,[N.width,void 0,N.height]);N.width=L(O[0],N.width,1,Y);N.height=L(O[2],N.height,1,Y)}break;case "object":yield A(N,O)}});return u.apply(this,arguments)}function v(N){for(const O of N)if("number"===
typeof O)return O;return null}function A(N,O){return q.apply(this,arguments)}function q(){q=b._asyncToGenerator(function*(N,O){const {resourceSize:Y,symbolSize:fa}=yield C(N),Z=p(O,Y,fa);N.width=L(O[0],fa[0],Y[0],Z);N.depth=L(O[1],fa[1],Y[1],Z);N.height=L(O[2],fa[2],Y[2],Z)});return q.apply(this,arguments)}function p(N,O,Y){for(let fa=0;3>fa;fa++){const Z=N[fa];switch(Z){case "symbol-value":return null!=Y[fa]?Y[fa]/O[fa]:1;case "proportional":break;default:if(Z&&O[fa])return Z/O[fa]}}return 1}function C(N){return K.apply(this,
arguments)}function K(){K=b._asyncToGenerator(function*(N){const O=yield(yield new Promise((t,R)=>e(["./symbolLayerUtils"],t,R))).computeObjectLayerResourceSize(N,10),{width:Y,height:fa,depth:Z}=N;N=[Y,Z,fa];let r=1;for(var x=0;3>x;x++)if(null!=N[x]){r=N[x]/O[x];break}for(x=0;3>x;x++)null==N[x]&&(N[x]=O[x]*r);return{resourceSize:O,symbolSize:N}});return K.apply(this,arguments)}function L(N,O,Y,fa){switch(N){case "proportional":return Y*fa;case "symbol-value":return null!=O?O:Y;default:return N}}function Q(){Q=
b._asyncToGenerator(function*(N,O){if(N&&O){if(B.isSymbol3D(N))return y(N,O);if(B.isSymbol2D(N)&&(O=v(O),!F.isNone(O)))switch(N.type){case "simple-marker":N.size=O;break;case "picture-marker":{const Y=N.width/N.height;1<Y?(N.width=O,N.height=O*Y):(N.width=O*Y,N.height=O);break}case "simple-line":N.width=O;break;case "text":N.font.size=O}}});return Q.apply(this,arguments)}const D=/\/resource\/(.*?)\.svg$/,M=new z("white");k.applyColorToSymbol=function(N,O,Y){if(N&&(O||null!=Y))if(O&&(O=new z(O)),B.isSymbol3D(N))d(N,
O,Y);else if(B.isSymbol2D(N)){if(O=O||N.color)N.color=l(O,Y);null!=Y&&"outline"in N&&N.outline&&N.outline.color&&(N.outline.color=l(N.outline.color,Y))}};k.applyOpacityToColor=l;k.applyRotationToSymbol=function(N,O,Y){N&&null!=O&&(B.isSymbol3D(N)?(N=N.symbolLayers)&&N.forEach(fa=>{if(fa&&"object"===fa.type)switch(Y){case "tilt":fa.tilt=O;break;case "roll":fa.roll=O;break;default:fa.heading=O}}):!B.isSymbol2D(N)||"simple-marker"!==N.type&&"picture-marker"!==N.type&&"text"!==N.type||(N.angle=O))};k.applySizesToSymbol=
function(N,O){return Q.apply(this,arguments)};k.getCSSFilterFromEffectList=function(N){if(!N)return null;N=N.effects.filter(O=>"bloom"!==O.type).map(O=>O.toJSON());return w.effectFunctionsFromJSON(N)};k.getColorFromSymbol=function(N,O){if(!N)return null;let Y=null;B.isSymbol3D(N)?Y=g(N):B.isSymbol2D(N)&&(Y=N.color?new z(N.color):null);return Y?l(Y,O):null};k.getIconHref=function(N,O){O=O.resource.href;return!J("esri-canvas-svg-support")&&N.styleOrigin&&D.test(O)?O.replace(D,"/resource/png/$1.png"):
O};k.getSymbolOutlineSize=function(N){if(!N)return 0;if(B.isSymbol3D(N)){{const O=N.symbolLayers&&N.symbolLayers.length;O?(N=N.symbolLayers.getItemAt(O-1),N="outline"in N?F.get(N,"outline","size"):void 0):N=void 0}return F.isSome(N)?N:0}return(N=h.getStroke(N))&&P.px2pt(N.width)||0};k.isVolumetricSymbol=function(N){if(F.isNone(N)||!("symbolLayers"in N)||F.isNone(N.symbolLayers))return!1;switch(N.type){case "point-3d":return N.symbolLayers.some(O=>"object"===O.type);case "line-3d":return N.symbolLayers.some(O=>
"path"===O.type);case "polygon-3d":return N.symbolLayers.some(O=>"object"===O.type||"extrude"===O.type);default:return!1}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(e,k,b,z,B,G,J){function F(c){if(!c)return null;let g;switch(c.type){case "simple-fill":case "picture-fill":case "simple-marker":g=F(c.outline);break;
case "simple-line":{const l=G.pt2px(c.width);"none"!==c.style&&0!==l&&(g={color:c.color,style:h(c.style),width:l,cap:c.cap,join:"miter"===c.join?G.pt2px(c.miterLimit):c.join});break}default:g=null}return g}const P={left:"start",center:"middle",right:"end",justify:"start"},H={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},w=new B(1E3),h=function(){const c={};return function(g){if(c[g])return c[g];const l=g.replace(/-/g,"");return c[g]=l}}();b=new b([128,128,
128]);e.defaultThematicColor=b;e.dekebabifyLineStyle=h;e.getFill=function(c){const g=c.style;let l=null;if(c)switch(c.type){case "simple-marker":"cross"!==g&&"x"!==g&&(l=c.color);break;case "simple-fill":"solid"===g?l=c.color:"none"!==g&&(l={type:"pattern",x:0,y:0,src:k.getAssetUrl(`esri/symbols/patterns/${g}.png`),width:5,height:5});break;case "picture-fill":l={type:"pattern",src:c.url,width:G.pt2px(c.width)*c.xscale,height:G.pt2px(c.height)*c.yscale,x:G.pt2px(c.xoffset),y:G.pt2px(c.yoffset)};break;
case "text":l=c.color;break;case "cim":l=J.getCIMSymbolColor(c)}return l};e.getPatternUrlWithColor=function(c,g){const l=c+"-"+g;return void 0!==w.get(l)?Promise.resolve(w.get(l)):z(c,{responseType:"image"}).then(d=>{d=d.data;const y=d.naturalWidth,f=d.naturalHeight,n=document.createElement("canvas");n.width=y;n.height=f;const u=n.getContext("2d");u.fillStyle=g;u.fillRect(0,0,y,f);u.globalCompositeOperation="destination-in";u.drawImage(d,0,0);d=n.toDataURL();w.put(l,d);return d})};e.getSVGAlign=function(c){return c=
(c=c.horizontalAlignment)&&P[c.toLowerCase()]||"middle"};e.getSVGBaseline=function(c){return(c=c.verticalAlignment)&&H[c.toLowerCase()]||"alphabetic"};e.getSVGBaselineShift=function(c){return"bottom"===c.verticalAlignment?"super":null};e.getStroke=F;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(e){return function(){function k(z,B){this._storage=new e.MemCacheStorage;this._storage.maxSize=z;B&&this._storage.registerRemoveFunc("",
B)}var b=k.prototype;b.put=function(z,B){this._storage.put(z,B,1,1)};b.pop=function(z){return this._storage.pop(z)};b.get=function(z){return this._storage.get(z)};b.clear=function(){this._storage.clearAll()};b.destroy=function(){this._storage.destroy()};return k}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(e,k,b){function z(h){h=b.toCIMSymbolJSON(h);if("CIMTextSymbol"===h.type)return h.height;let c=0;if(h.symbolLayers)for(const g of h.symbolLayers)b.isCIMMarker(g)&&
g.size>c?c=g.size:b.isCIMStroke(g)&&g.width>c?c=g.width:b.isCIMFill(g);return c}function B(h,c,g,l){if("CIMTextSymbol"===h.type)h.height*=c;else{if(g&&h.effects)for(const d of h.effects)F(d,c);if(h.symbolLayers)for(const d of h.symbolLayers)switch(d.type){case "CIMPictureMarker":case "CIMVectorMarker":G(d,c,l);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=l&&l.preserveOutlineWidth||(d.width*=c);break;case "CIMPictureFill":d.height*=c;d.offsetX*=c;d.offsetY*=c;break;case "CIMHatchFill":B(d.lineSymbol,
c,!0,{...l,preserveOutlineWidth:!1}),d.offsetX*=c,d.offsetY*=c,d.separation*=c}}}function G(h,c,g){h.markerPlacement&&J(h.markerPlacement,c);h.offsetX*=c;h.offsetY*=c;h.anchorPoint&&"Absolute"===h.anchorPointUnits&&(h.anchorPoint={x:h.anchorPoint.x*c,y:h.anchorPoint.y*c});h.size*=c;if("CIMVectorMarker"===h.type&&h.markerGraphics)for(const l of h.markerGraphics)h.scaleSymbolsProportionally||B(l.symbol,c,!0,g)}function J(h,c){b.isCIMMarkerStrokePlacement(h)&&(h.offset*=c);switch(h.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":h.customEndingOffset*=
c;h.offsetAlongLine*=c;if(h.placementTemplate&&h.placementTemplate.length){var g=h.placementTemplate.map(l=>l*c);h.placementTemplate=g}break;case "CIMMarkerPlacementAlongLineVariableSize":h.maxRandomOffset*=c;h.placementTemplate&&h.placementTemplate.length&&(g=h.placementTemplate.map(l=>l*c),h.placementTemplate=g);break;case "CIMMarkerPlacementOnLine":h.startPointOffset*=c;break;case "CIMMarkerPlacementAtExtremities":h.offsetAlongLine*=c;break;case "CIMMarkerPlacementAtRatioPositions":h.beginPosition*=
c;h.endPosition*=c;break;case "CIMMarkerPlacementPolygonCenter":h.offsetX*=c;h.offsetY*=c;break;case "CIMMarkerPlacementInsidePolygon":h.offsetX*=c,h.offsetY*=c,h.stepX*=c,h.stepY*=c}}function F(h,c){switch(h.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":h.width*=c;break;case "CIMGeometricEffectBuffer":h.size*=c;break;case "CIMGeometricEffectCut":h.beginCut*=c;h.endCut*=c;h.middleCut*=c;break;case "CIMGeometricEffectDashes":h.customEndingOffset*=c;h.offsetAlongLine*=c;if(h.dashTemplate&&
h.dashTemplate.length){const g=h.dashTemplate.map(l=>l*c);h.dashTemplate=g}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":h.length*=c;break;case "CIMGeometricEffectMove":h.offsetX*=c;h.offsetY*=c;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":h.offset*=c;break;case "CIMGeometricEffectRegularPolygon":h.radius*=c;break;case "CIMGeometricEffectTaperedPolygon":h.fromWidth*=c;h.length*=c;h.toWidth*=c;break;case "CIMGeometricEffectWave":h.amplitude*=
c,h.period*=c}}function P(h,c){let g;g="CIMTextSymbol"===h.type?h.symbol:h;h="CIMPolygonSymbol"===h.type;if(g.symbolLayers)for(const l of g.symbolLayers)if(!(l.colorLocked||h&&(b.isCIMStroke(l)||b.isCIMMarker(l)&&l.markerPlacement&&b.isCIMMarkerStrokePlacement(l.markerPlacement))))switch(l.type){case "CIMVectorMarker":l.markerGraphics.forEach(d=>{P(d.symbol,c)});break;case "CIMSolidStroke":case "CIMSolidFill":H(c,l.color);break;case "CIMHatchFill":P(l.lineSymbol,c)}}function H(h,c){for(const g of h)if(g.join(".")===
c.join("."))return;h.push(c)}function w(h,c){var g="CIMTextSymbol"===h.type?h.symbol:h;h="CIMPolygonSymbol"===h.type?!0:!1;if(g.symbolLayers)for(const l of g.symbolLayers)if(!(l.colorLocked||h&&(b.isCIMStroke(l)||b.isCIMMarker(l)&&l.markerPlacement&&b.isCIMMarkerStrokePlacement(l.markerPlacement))))switch(g=c.toArray(0),l.type){case "CIMVectorMarker":l.markerGraphics.forEach(d=>{w(d.symbol,c)});break;case "CIMSolidStroke":case "CIMSolidFill":l.color=g;break;case "CIMHatchFill":w(l.lineSymbol,c)}}
e.applyCIMSymbolColor=function(h,c){c instanceof k||(c=new k(c));h=b.toCIMSymbolJSON(h);w(h,c)};e.applyCIMSymbolRotation=function(h,c,g=!1){h=b.toCIMSymbolJSON(h);g&&0!==c&&(c=360-c);if("CIMTextSymbol"===h.type)h.angle=c;else if("CIMPointSymbol"===h.type&&h.symbolLayers){g=c-(h.angle||0);for(const l of h.symbolLayers)if(b.isCIMMarker(l)){let d=l.rotation||0;d=l.rotateClockwise?d-g:d+g;l.rotation=d}h.angle=c}};e.getCIMSymbolColor=function(h){h=b.toCIMSymbolJSON(h);const c=[];P(h,c);return c.length?
new k(b.fromCIMColor(c[0])):null};e.getCIMSymbolRotation=function(h,c=!1){h=b.toCIMSymbolJSON(h);return"CIMTextSymbol"===h.type||"CIMPointSymbol"===h.type?c&&0!==h.angle?360-h.angle:h.angle||0:0};e.getCIMSymbolSize=z;e.scaleCIMMarker=G;e.scaleCIMSymbolTo=function(h,c,g){const l=b.toCIMSymbolJSON(h);h=z(h);if(0===h)if("CIMTextSymbol"===l.type)l.height=c;else{if(l.symbolLayers)for(const d of l.symbolLayers)switch(d.type){case "CIMPictureMarker":case "CIMVectorMarker":d.size=c;break;case "CIMPictureStroke":case "CIMSolidStroke":d.width=
c}}else B(l,c/h,!1,g)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(e){function k(b,z){"string"!==typeof b&&(b=String(b));switch(z){case "LowerCase":return b.toLowerCase();case "Allcaps":return b.toUpperCase();default:return b}}e._adjustTextCase=k;e.colorToArray=function(b){return[b.r,b.g,b.b,b.a]};e.createLabelOverrideFunction=function(b,z,B){const G=H=>{let w=H.length;for(;w--;)if(-1===" /-,\n".indexOf(H.charAt(w)))return!1;
return!0},J=[];var F=0;let P=-1;do P=z.indexOf("[",F),P>=F&&(P>F&&(F=z.substr(F,P-F),J.push([F,null,G(F)])),F=P+1,P=z.indexOf("]",F),P>=F&&(P>F&&(F=z.substr(F,P-F),(F=b[F])&&J.push([null,F,!1])),F=P+1));while(-1!==P);F<z.length-1&&(b=z.substr(F),J.push([b,null,G(b)]));return H=>{let w="",h=null;for(const c of J){const [g,l,d]=c;if(g)d?h=g:(h&&(w+=h,h=null),w+=g);else{const y=H.attributes[l];y&&(h&&(w+=h,h=null),w+=y)}}return k(w,B)}};e.evaluateValueOrFunction=function(b,z,B,G){return"function"===
typeof b?b(z,B,G):b};e.fromCIMColor=function(b){return b?{r:b[0],g:b[1],b:b[2],a:b[3]/255}:{r:0,g:0,b:0,a:0}};e.getValue=b=>isNaN(b)||!b?0:b;e.isCIMFill=function(b){return"CIMGradientFill"===b.type||"CIMHatchFill"===b.type||"CIMPictureFill"===b.type||"CIMSolidFill"===b.type||"CIMWaterFill"===b.type};e.isCIMMarker=function(b){return"CIMVectorMarker"===b.type||"CIMPictureMarker"===b.type||"CIMBarChartMarker"===b.type||"CIMCharacterMarker"===b.type||"CIMPieChartMarker"===b.type||"CIMStackedBarChartMarker"===
b.type};e.isCIMMarkerStrokePlacement=function(b){return"CIMMarkerPlacementAlongLineRandomSize"===b.type||"CIMMarkerPlacementAlongLineSameSize"===b.type||"CIMMarkerPlacementAlongLineVariableSize"===b.type||"CIMMarkerPlacementAtExtremities"===b.type||"CIMMarkerPlacementAtMeasuredUnits"===b.type||"CIMMarkerPlacementAtRatioPositions"===b.type||"CIMMarkerPlacementOnLine"===b.type||"CIMMarkerPlacementOnVertices"===b.type};e.isCIMStroke=function(b){return"CIMGradientStroke"===b.type||"CIMPictureStroke"===
b.type||"CIMSolidStroke"===b.type};e.resampleHermite=function(b,z,B,G,J,F,P=!0){const H=z/J;B/=F;const w=Math.ceil(H/2),h=Math.ceil(B/2);for(let l=0;l<F;l++)for(let d=0;d<J;d++){const y=4*(d+(P?F-l-1:l)*J);var c=0;let f=0,n=0,u=0,v=0,A=0,q=0;const p=(l+.5)*B;for(let C=Math.floor(l*B);C<(l+1)*B;C++){var g=Math.abs(p-(C+.5))/h;const K=(d+.5)*H;g*=g;for(let L=Math.floor(d*H);L<(d+1)*H;L++){let Q=Math.abs(K-(L+.5))/w;c=Math.sqrt(g+Q*Q);-1<=c&&1>=c&&(c=2*c*c*c-3*c*c+1,0<c&&(Q=4*(L+C*z),q+=c*b[Q+3],n+=
c,255>b[Q+3]&&(c=c*b[Q+3]/250),u+=c*b[Q],v+=c*b[Q+1],A+=c*b[Q+2],f+=c))}}G[y]=u/f;G[y+1]=v/f;G[y+2]=A/f;G[y+3]=q/n}};e.toCIMSymbolJSON=function(b){var z;return null==(z=b.data)?void 0:z.symbol};e.toKebabCase=b=>b&&b.toLowerCase().replace(/\s+/g,"-");Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(e,k){e.extractSafeScaleBounds=function(b){let {minScale:z,maxScale:B}=b;return{minScale:z||0,maxScale:B||
0}};e.highlightsSupported=function(b){return b&&"function"===typeof b.highlight};e.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};e.scaleBoundsPredicate=function(b,z,B){return k.isNone(b)||b>B&&(0===z||b<z)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(e,k){const b=new k({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),
z=new k({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),B=new k({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});k=new k({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});e.all=[b,z,k,B];e.browseClusteredFeatures=k;e.removeSelectedFeature=z;e.zoomToClusteredFeatures=B;e.zoomToFeature=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),
function(e,k,b,z,B,G){function J(d){const {selectedFeature:y,location:f,view:n}=d;return n?"3d"===n.type?y||f:d.get("selectedFeature.geometry")||f:null}function F(d,y){if("3d"!==(null==y?void 0:y.type)||!d||"esri.Graphic"!==d.declaredClass)return!0;if((y=y.getViewForGraphic(d))&&"whenGraphicBounds"in y){let f=!1;y.whenGraphicBounds(d,{useViewElevation:!0}).then(n=>{f=!n||!n.boundingBox||n.boundingBox[0]===n.boundingBox[3]&&n.boundingBox[1]===n.boundingBox[4]&&n.boundingBox[2]===n.boundingBox[5]}).catch(()=>
{const n=new b("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:d});l.error(n)});return f}return!0}function P(d){return H.apply(this,arguments)}function H(){H=k._asyncToGenerator(function*(d){const {location:y,selectedFeature:f,view:n,zoomFactor:u}=d,v=J(d);if(!v)return d=new b("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:v,view:n}),l.error(d),Promise.reject(d);const A=n.scale/u,q=d.get("selectedFeature.geometry")||
y,p=q&&"point"===q.type&&F(f,n);G.zoomToFeature.active=!0;G.zoomToFeature.disabled=!0;try{yield d.view.goTo({target:v,scale:p?A:void 0})}finally{G.zoomToFeature.active=!1,G.zoomToFeature.disabled=!1,d.zoomToLocation=null,p&&(d.location=q)}});return H.apply(this,arguments)}function w(d){return h.apply(this,arguments)}function h(){h=k._asyncToGenerator(function*(d){const {selectedFeature:y,view:f}=d;if("2d"!==(null==f?void 0:f.type))throw d=new b("zoomToCluster:invalid-view","View must be 2d MapView.",
{view:f}),l.error(d),d;if(!y.isAggregate)throw d=new b("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:y}),l.error(d),d;d=yield f.whenLayerView(y.sourceLayer);const n=d.createQuery();n.aggregateIds=[y.getObjectId()];G.zoomToClusteredFeatures.active=!0;G.zoomToClusteredFeatures.disabled=!0;({extent:d}=yield d.queryExtent(n));yield f.goTo({target:d});G.zoomToClusteredFeatures.active=!1;G.zoomToClusteredFeatures.disabled=!1});return h.apply(this,
arguments)}function c(){c=k._asyncToGenerator(function*(d){const {selectedFeature:y,view:f}=d;if("2d"!==(null==f?void 0:f.type))throw d=new b("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:f}),l.error(d),d;if(!y.isAggregate)throw d=new b("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:y}),l.error(d),d;var n=yield f.whenLayerView(y.sourceLayer);const u=n.createQuery();u.aggregateIds=[y.getObjectId()];({extent:n}=
yield n.queryExtent(u));d.selectedClusterBoundaryFeature.geometry=n;f.graphics.add(d.selectedClusterBoundaryFeature)});return c.apply(this,arguments)}function g(){g=k._asyncToGenerator(function*(d){const {selectedFeature:y,view:f}=d;if("2d"!==(null==f?void 0:f.type))throw d=new b("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:f}),l.error(d),d;if(!y.isAggregate)throw d=new b("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",
{selectedFeature:y}),l.error(d),d;d=yield f.whenLayerView(y.sourceLayer);const n=d.createQuery();n.aggregateIds=[y.getObjectId()];G.browseClusteredFeatures.active=!0;G.browseClusteredFeatures.disabled=!0;({features:d}=yield d.queryFeatures(n));G.browseClusteredFeatures.active=!1;G.browseClusteredFeatures.disabled=!1;f.popup.open({features:[y].concat(d),featureMenuOpen:!0})});return g.apply(this,arguments)}const l=z.getLogger("esri.widgets.Popup.PopupViewModel");e.browseAggregateFeatures=function(d){return g.apply(this,
arguments)};e.displayClusterExtent=function(d){return c.apply(this,arguments)};e.getSelectedTarget=J;e.isZoomScreenSize=F;e.removeClusteredFeaturesForBrowsing=function(d){d.features=d.features.filter(y=>y.isAggregate)};e.triggerAction=function(d){const {event:y,view:f}=d;({action:d}=y);var n=f&&f.popup;if(!d)return Promise.reject(new b("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new b("trigger-action:missing-arguments","view.popup is missing"));const {disabled:u,
id:v}=d;if(!v)return Promise.reject(new b("trigger-action:invalid-action","action.id is missing"));if(u)return Promise.reject(new b("trigger-action:invalid-action","Action is disabled"));if(v===G.zoomToFeature.id)return P(n.viewModel).catch(B.throwIfNotAbortError);if(v===G.zoomToClusteredFeatures.id)return w(n.viewModel);if(v===G.browseClusteredFeatures.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();n.viewModel.browseClusterEnabled=
!1;if(v===G.removeSelectedFeature.id){n.close();({selectedFeature:d}=n);if(!d)return Promise.reject(new b(`trigger-action:${G.removeSelectedFeature.id}`,"selectedFeature is required",{selectedFeature:d}));({sourceLayer:n}=d);n?n.remove(d):f.graphics.remove(d)}return Promise.resolve()};e.zoomToClusterExtent=w;e.zoomToLocation=P;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,k,b,z,B,G,J,F){e.GoToMixin=P=>{P=function(H){function w(...h){h=H.call(this,...h)||this;h.goToOverride=null;h.view=null;return h}k._inheritsLoose(w,H);w.prototype.callGoTo=function(h){const {view:c}=this;return this.goToOverride?this.goToOverride(c,h):c.goTo(h.target,h.options)};return w}(P);b.__decorate([z.property()],P.prototype,"goToOverride",void 0);b.__decorate([z.property()],P.prototype,"view",void 0);return P=b.__decorate([F.subclass("esri.widgets.support.GoTo")],P)};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(e,k){e.isSupportedGraphicResultMessage=function(b){switch(b){case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports",
"../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(e,k,b,z){e.isSupportedGraphic=function(B){var G;if("graphics"!==(null==(G=B.layer)?void 0:G.type))return 1;if(b.isNone(B.geometry))return 2;switch(B.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return 3;default:return 3}return"on-the-ground"!==z.getGraphicEffectiveElevationMode(B)&&z.hasGraphicFeatureExpressionInfo(B)?4:0};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/support/elevationInfoUtils":function(){define(["exports","../core/maybe","../symbols/support/unitConversionUtils"],function(e,k,b){function z(H,w){return k.isNone(w)||!w.mode?H?"absolute-height":"on-the-ground":w.mode}function B(H,w){return z(k.isSome(H)?H.hasZ:!1,w)}function G(H){const w=J(H);return B(H.geometry,w)}function J(H){return H.layer&&"elevationInfo"in H.layer?H.layer.elevationInfo:null}function F(H,w,h,c,g,l,d=null){if(!k.isNone(l)){var y=k.isSome(d)?
d.mode:"absolute-height";if("on-the-ground"===y)return 0;a:{l=P(w,h,c,g,H,l);d=k.isSome(d)&&k.isSome(d.offset)?d.offset:0;switch(y){case "absolute-height":H=l-d;break a;case "relative-to-ground":H=l-(k.unwrapOr(H.elevationProvider.getElevation(w,h,c,g,"ground"),0)+d);break a;case "relative-to-scene":H=l-(k.unwrapOr(H.elevationProvider.getElevation(w,h,c,g,"scene"),0)+d);break a}H=void 0}return H}}function P(H,w,h,c,g,l){const d=k.isSome(l.offset)?l.offset:0;switch(l.mode){case "absolute-height":return h+
d;case "on-the-ground":return k.unwrapOr(g.elevationProvider.getElevation(H,w,0,c,"ground"),0);case "relative-to-ground":return h+k.unwrapOr(g.elevationProvider.getElevation(H,w,h,c,"ground"),0)+d;case "relative-to-scene":return h+k.unwrapOr(g.elevationProvider.getElevation(H,w,h,c,"scene"),0)+d}}e.getConvertedElevation=function(H,w,h,c=null){return F(H,w.x,w.y,w.hasZ?w.z:0,w.spatialReference,h,c)};e.getConvertedElevationFromVector=function(H,w,h,c,g=null){return F(H,w[0],w[1],2<w.length?w[2]:0,h,
c,g)};e.getEffectiveElevationMode=z;e.getGeometryEffectiveElevationMode=B;e.getGraphicEffectiveElevationInfo=function(H){var w=J(H);H=B(H.geometry,w);w=k.isSome(w)&&"on-the-ground"!==H?k.unwrapOr(w.offset,0)*b.getMetersPerUnit(k.unwrapOr(w.unit,"meters")):0;return{mode:H,offset:w}};e.getGraphicEffectiveElevationMode=G;e.getZForElevationMode=function(H,w,h){if(!k.isNone(h)&&h.mode){var c=H.hasZ?H.z:0,g=k.isSome(h.offset)?h.offset:0;switch(h.mode){case "absolute-height":return c-g;case "on-the-ground":return 0;
case "relative-to-ground":return H=k.unwrapOr(w.elevationProvider.getElevation(H.x,H.y,H.z,H.spatialReference,"ground"),0)+g,c-H;case "relative-to-scene":return H=k.unwrapOr(w.elevationProvider.getElevation(H.x,H.y,H.z,H.spatialReference,"scene"),0)+g,c-H}}};e.hasGraphicFeatureExpressionInfo=function(H){if("on-the-ground"===G(H))return!1;H=J(H);H=k.isSome(H)&&H.featureExpressionInfo?H.featureExpressionInfo.expression:null;return!(!H||"0"===H)};e.zValueInAbsoluteHeightMode=P;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils"],function(e,k,b,z){function B(G){var J;return"graphics"!==(null==(J=G.layer)?void 0:J.type)?{result:1,geometry:null}:k.isNone(G.geometry)?{result:2,geometry:null}:"on-the-ground"!==z.getGraphicEffectiveElevationMode(G)&&z.hasGraphicFeatureExpressionInfo(G)?{result:4,
geometry:null}:"point"!==G.geometry.type&&"polyline"!==G.geometry.type&&("polygon"!==G.geometry.type||G.geometry instanceof b)?{result:3,geometry:null}:{result:0,geometry:G.geometry}}e.geometryOfSupportedGraphic=function(G){return B(G).geometry};e.isSupportedGraphic=function(G){return B(G).result};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Point ./Polygon ./projectionEllipsoid ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g){var l;B=l=function(d){function y(...n){n=d.call(this,...n)||this;n.center=null;n.geodesic=!1;n.numberOfPoints=60;n.radius=1E3;n.radiusUnit="meters";return n}e._inheritsLoose(y,d);var f=y.prototype;f.normalizeCtorArgs=function(n,u){if(!n||!n.center){if(n&&n.rings)return d.prototype.normalizeCtorArgs.call(this,n,u);n={center:n}}return{...d.prototype.normalizeCtorArgs.call(this),...n,...u}};f.initialize=function(){var n=this.center;const u=this.numberOfPoints;this.hasZ=
n&&n.hasZ;if(0===this.rings.length&&n){var v=b.convertUnit(this.radius,this.radiusUnit,"meters"),A=n.spatialReference,q="geographic";if(A.isWebMercator)q="webMercator";else if(null!=g[A.wkid]||A.wkt&&0===A.wkt.indexOf("PROJCS"))q="projected";if(this.geodesic){let p;switch(q){case "webMercator":p=c.webMercatorToGeographic(n);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":p=
n}n=this._createGeodesicCircle(p,v,u);"webMercator"===q&&(n=c.geographicToWebMercator(n))}else{let p;"webMercator"===q||"projected"===q?p=v/this._convert2Meters(1,n.spatialReference):"geographic"===q&&(p=b.lengthToDegrees(v,"meters",w.getReferenceEllipsoid(n.spatialReference).radius));n=this._createPlanarCircle(n,p,u)}this.spatialReference=n.spatialReference;this.addRing(n.rings[0])}};f.clone=function(){const {center:n,numberOfPoints:u,radius:v,radiusUnit:A,geodesic:q}=this;return new l({center:n.clone(),
numberOfPoints:u,radius:v,radiusUnit:A,geodesic:q})};f._createGeodesicCircle=function(n,u,v){let A=0;const q=[];for(;360>A;){const p=[0,0];h.directGeodeticSolver(p,[n.x,n.y],A,u);this.hasZ&&p.push(n.z);q.push(p);A+=360/v}q.push(q[0]);return new H(q)};f._createPlanarCircle=function(n,u,v){const A=[],q=2*Math.PI/v;for(let C=0;C<v;++C){var p=q*C;p=[n.x+Math.cos(-p)*u,n.y+Math.sin(-p)*u];this.hasZ&&p.push(n.z);A.push(p)}A.push(A[0]);return new H({spatialReference:n.spatialReference,rings:[A]})};f._convert2Meters=
function(n,u){if(null!=g[u.wkid])u=g.values[g[u.wkid]];else{u=u.wkt;const v=u.lastIndexOf(",")+1,A=u.lastIndexOf("]]");u=parseFloat(u.substring(v,A))}return n*u};return y}(H);k.__decorate([z.property({type:P})],B.prototype,"center",void 0);k.__decorate([z.property()],B.prototype,"geodesic",void 0);k.__decorate([z.property()],B.prototype,"numberOfPoints",void 0);k.__decorate([z.property()],B.prototype,"radius",void 0);k.__decorate([z.property()],B.prototype,"radiusUnit",void 0);return B=l=k.__decorate([F.subclass("esri.geometry.Circle")],
B)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),function(e,k,b,z,B,G,J,F,P){function H(f){if(!f)return null;if(f.isGeographic&&f.wkid){var n=B.spheroids[f.wkid];if(n)return n}return f.wkt&&((f=B.WKT_SPHEROID_REGEX.exec(f.wkt))&&2===f.length?(n=f[1].split(","),!n||3>n.length?f=null:(f=parseFloat(n[1]),n=parseFloat(n[2]),f=isNaN(f)||isNaN(n)?
null:{a:f,f:0===n?0:1/n})):f=null,f)?f:null}function w(f){f=H(f||P.WGS84);if("b"in f&&"eSq"in f&&"radius"in f)return f;const n=f.a*(1-f.f);return Object.assign(f,{b:n,eSq:1-(n/f.a)**2,radius:(2*f.a+n)/3,densificationRatio:1E4/((2*f.a+n)/3)})}function h(f){return 0>f?f+360:f}function c(f,n,u){const {a:v,eSq:A}=w(u);u=Math.sqrt(A);const q=Math.sin(n[1]*B.toRadians);n=v*n[0]*B.toRadians;u=0<A?v*(1-A)*(q/(1-A*q*q)-1/(2*u)*Math.log((1-u*q)/(1+u*q)))*.5:v*q;f[0]=n;f[1]=u;return f}function g(f){return null!==
H(f)}function l(f,n){if("polyline"!==f.type&&"polygon"!==f.type)throw new b("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:u}=f;if(!g(u))throw new b("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var v="polyline"===f.type?f.paths:f.rings;const A=[],q=[0,0],p={distance:null};for(const L of v){v=[];A.push(v);v.push([L[0][0],L[0][1]]);var C=L[0][0],K=L[0][1];let Q,D;for(let M=0;M<
L.length-1;M++){Q=L[M+1][0];D=L[M+1][1];if(C===Q&&K===D)continue;const N=[C,K];y(p,[C,K],[Q,D],u);const {azimuth:O,distance:Y}=p;C=Y/n;if(1<C){for(K=1;K<=C-1;K++)d(q,N,O,K*n,u),v.push(q.slice(0));d(q,N,O,(Y+Math.floor(C-1)*n)/2,u);v.push(q.slice(0))}d(q,N,O,Y,u);v.push(q.slice(0));C=q[0];K=q[1]}}return"polyline"===f.type?new G({paths:A,spatialReference:u}):new J({rings:A,spatialReference:u})}function d(f,n,u,v,A){const q=n[0]*B.toRadians;n=n[1]*B.toRadians;u*=B.toRadians;const {a:p,b:C,f:K}=w(A);
A=Math.sin(u);u=Math.cos(u);var L=(1-K)*Math.tan(n);n=1/Math.sqrt(1+L*L);const Q=L*n,D=Math.atan2(L,u);L=n*A;const M=L*L;var N=1-M,O=N*(p*p-C*C)/(C*C);const Y=1+O/16384*(4096+O*(-768+O*(320-175*O))),fa=O/1024*(256+O*(-128+O*(74-47*O)));O=v/(C*Y);let Z=2*Math.PI,r,x,t,R;for(;1E-12<Math.abs(O-Z);)t=Math.cos(2*D+O),r=Math.sin(O),x=Math.cos(O),R=fa*r*(t+fa/4*(x*(-1+2*t*t)-fa/6*t*(-3+4*r*r)*(-3+4*t*t))),Z=O,O=v/(C*Y)+R;v=Q*r-n*x*u;N=K/16*N*(4+K*(4-3*N));v=Math.atan2(Q*x+n*r*u,(1-K)*Math.sqrt(M+v*v))/B.toRadians;
f[0]=(q+(Math.atan2(r*A,n*x-Q*r*u)-(1-N)*K*L*(O+N*r*(t+N*x*(-1+2*t*t)))))/B.toRadians;f[1]=v;return f}function y(f,n,u,v){var A=n[0]*B.toRadians;n=n[1]*B.toRadians;var q=u[0]*B.toRadians;u=u[1]*B.toRadians;const {a:p,b:C,f:K,radius:L}=w(v),Q=q-A;var D=Math.atan((1-K)*Math.tan(n)),M=Math.atan((1-K)*Math.tan(u));v=Math.sin(D);D=Math.cos(D);const N=Math.sin(M);M=Math.cos(M);let O=1E3,Y=Q,fa,Z,r;let x,t,R;do{var U=Math.sin(Y);var ha=Math.cos(Y);r=Math.sqrt(M*U*M*U+(D*N-v*M*ha)*(D*N-v*M*ha));if(0===r)return f.distance=
0,f.azimuth=void 0,f.reverseAzimuth=void 0,f;ha=v*N+D*M*ha;x=Math.atan2(r,ha);t=D*M*U/r;Z=1-t*t;U=ha-2*v*N/Z;isNaN(U)&&(U=0);R=K/16*Z*(4+K*(4-3*Z));fa=Y;Y=Q+(1-R)*K*t*(x+R*r*(U+R*ha*(-1+2*U*U)))}while(1E-12<Math.abs(Y-fa)&&0<--O);if(0===O)return v=Math.acos(Math.sin(n)*Math.sin(u)+Math.cos(n)*Math.cos(u)*Math.cos(q-A))*L,A=q-A,f.azimuth=Math.atan2(Math.sin(A)*Math.cos(u),Math.cos(n)*Math.sin(u)-Math.sin(n)*Math.cos(u)*Math.cos(A))/B.toRadians,f.distance=v,f.reverseAzimuth=void 0,f;A=Z*(p*p-C*C)/(C*
C);n=A/1024*(256+A*(-128+A*(74-47*A)));q=Math.atan2(D*Math.sin(Y),D*N*Math.cos(Y)-v*M);f.azimuth=Math.atan2(M*Math.sin(Y),D*N-v*M*Math.cos(Y))/B.toRadians;f.distance=C*(1+A/16384*(4096+A*(-768+A*(320-175*A))))*(x-n*r*(U+n/4*(ha*(-1+2*U*U)-n/6*U*(-3+4*r*r)*(-3+4*U*U))));f.reverseAzimuth=q/B.toRadians;return f}e.directGeodeticSolver=d;e.geodesicAreas=function(f,n="square-meters"){if(f.some(q=>!g(q.spatialReference)))throw new b("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");
const u=[];for(var v=0;v<f.length;v++){var A=f[v];const {radius:q,densificationRatio:p}=w(A.spatialReference);u.push(l(A,q*p))}f=[];v=[0,0];A=[0,0];for(let q=0;q<u.length;q++){const {rings:p,spatialReference:C}=u[q];let K=0;for(let L=0;L<p.length;L++){const Q=p[L];c(v,Q[0],C);c(A,Q[Q.length-1],C);let D=A[0]*v[1]-v[0]*A[1];for(let M=0;M<Q.length-1;M++)c(v,Q[M+1],C),c(A,Q[M],C),D+=A[0]*v[1]-v[0]*A[1];K+=D}K=z.convertUnit(K,"square-meters",n);f.push(K/-2)}return f};e.geodesicDensify=l;e.geodesicDistance=
function(f,n,u="meters"){if(!f||!n)throw new b("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!f.spatialReference||!n.spatialReference)throw new b("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!f.spatialReference.equals(n.spatialReference))throw new b("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:v}=f;if(!g(v))throw new b("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");if(f.equals(n))return{distance:0,azimuth:0,reverseAzimuth:0};const A={distance:null};y(A,[f.x,f.y],[n.x,n.y],v);A.distance=z.convertUnit(A.distance,"meters",u);A.azimuth=h(A.azimuth);A.reverseAzimuth=h(A.reverseAzimuth);return A};e.geodesicLengths=function(f,n="meters"){if(!f)throw new b("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(f.some(A=>!g(A.spatialReference)))throw new b("geodesic-lengths:invalid-spatial-reference",
"the input geometries spatial reference is not supported");const u=[];for(let A=0;A<f.length;A++){var v=f[A];const {spatialReference:q}=v;v="polyline"===v.type?v.paths:v.rings;let p=0;for(let C=0;C<v.length;C++){const K=v[C];let L=0;for(let Q=1;Q<K.length;Q++){const D=K[Q-1][0],M=K[Q][0],N=K[Q-1][1],O=K[Q][1];if(N!==O||D!==M){const Y={distance:null};y(Y,[D,N],[M,O],q);L+=Y.distance}}p+=L}p=z.convertUnit(p,"meters",n);u.push(p)}return u};e.inverseGeodeticSolver=y;e.isSupported=g;e.pointFromDistance=
function(f,n,u){if(!f||null==n||null==u)throw new b("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>u||360<u)throw new b("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!f.spatialReference)throw new b("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:v}=f;if(!g(v))throw new b("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");const A=[0,0];d(A,[f.x,f.y],u,n,v);return new F({x:A[0],y:A[1],spatialReference:v})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(e,k,b,z){e.isSupportedGraphic=function(B){var G;if("graphics"!==(null==(G=B.layer)?void 0:G.type))return 1;
if(b.isNone(B.geometry))return 2;switch(B.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return 0;default:return 3}return(G=b.isSome(B.symbol)&&"point-3d"===B.symbol.type&&B.symbol.symbolLayers)&&0<G.length&&G.some(J=>"object"===J.type)?"on-the-ground"!==z.getGraphicEffectiveElevationMode(B)&&z.hasGraphicFeatureExpressionInfo(B)?4:0:5};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/draw/support/layerUtils":function(){define(["exports"],
function(e){e.addUniqueLayer=function(k,b,z){if(b&&k&&k.map){({map:k}=k);var B=k.layers.find(G=>G===b);B||k.add(b,z);void 0!==z&&null!==z&&k.layers.reorder(B,z)}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(e){e.SKETCH_KEYS={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};Object.defineProperty(e,"__esModule",
{value:!0})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../../geometry/SpatialReference ./FeatureSnappingEngine ./SelfSnappingEngine ./SnappingOptions ./snappingUtils ./candidates/IntersectionSnappingCandidate".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n,u){e.SnappingManager=function(v){function A(p){p=v.call(this,p)||this;p.options=new f;p.engines=[];p._currentMainCandidate=null;p._currentOtherActiveCandidates=[];return p}k._inheritsLoose(A,v);var q=A.prototype;q.initialize=function(){this.handles.add([F.react(()=>{const {effectiveFeatureEnabled:p,effectiveSelfEnabled:C,touchSensitivityMultiplier:K,distance:L}=this.options;return{effectiveFeatureEnabled:p,effectiveSelfEnabled:C,touchSensitivityMultiplier:K,
distance:L}},()=>{this.doneSnapping();this.emit("changed")},F.sync),F.react(()=>this.options,p=>{for(const C of this.engines)C.options=p},F.sync),F.react(()=>this.view.ready,p=>this.onViewReady(p),F.syncAndInitial)])};q.destroy=function(){this.destroyEngines()};q.onViewReady=function(p){this.destroyEngines();if(p){var C,K;this.engines=[new y.SelfSnappingEngine({view:this.view,options:this.options}),new d.FeatureSnappingEngine({view:this.view,spatialReference:null!=(C=null==(K=this.view)?void 0:K.spatialReference)?
C:l.WGS84,options:this.options})]}};q.destroyEngines=function(){for(const p of this.engines)p.destroy();this.engines.length=0};q.snap=function(){var p=k._asyncToGenerator(function*(C,K,L){const Q=K.coordinateHelper.pointToVector(C),D=yield this.fetchCandidates(Q,K,L);return{get valid(){return!J.isAborted(L)},apply:()=>{const {snappedPoint:M,hints:N}=this.processCandidates(Q,D,K);this.removeVisualization();G.isSome(K.visualizer)&&this.handles.add(K.visualizer.draw(N,{coordinateHelper:K.coordinateHelper,
elevationInfo:K.elevationInfo,view:this.view}),"visualization-handle");return M}}});return function(C,K,L){return p.apply(this,arguments)}}();q.update=function(p,C){this.removeVisualization();let K=p;const L=[];if(G.isSome(this._currentMainCandidate)){const Q=C.coordinateHelper;p=Q.pointToVector(p);const D=this._currentMainCandidate.constraint.closestTo(p);if(n.squareDistance(n.anyMapPointToScreenPoint(p,Q,C.elevationInfo,this.view),n.anyMapPointToScreenPoint(D,Q,C.elevationInfo,this.view))<this.squaredPointProximityThreshold(C.pointer)){K=
Q.vectorToDehydratedPoint(D);this._currentMainCandidate.targetPoint=D;L.push(...this._currentMainCandidate.hints);for(const M of this._currentOtherActiveCandidates)M.targetPoint=D,L.push(...M.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}G.isSome(C.visualizer)&&this.handles.add(C.visualizer.draw(L,{coordinateHelper:C.coordinateHelper,elevationInfo:C.elevationInfo,view:this.view}),"visualization-handle");return K};q.doneSnapping=function(){this.removeVisualization();
this._currentMainCandidate=null;this._currentOtherActiveCandidates=[]};q.removeVisualization=function(){this.handles.remove("visualization-handle")};q.fetchCandidates=function(){var p=k._asyncToGenerator(function*(C,K,L){return(yield Promise.all(this.engines.map(Q=>Q.fetchCandidates(C,K,L)))).flat()});return function(C,K,L){return p.apply(this,arguments)}}();q.processCandidates=function(p,C,K){if(1>C.length)return this.doneSnapping(),{snappedPoint:K.coordinateHelper.vectorToDehydratedPoint(p),hints:[]};
n.sortCandidatesInPlace(p,C);const L=this._currentMainCandidate;if(G.isSome(L)){const Q=this.findOldConstraintInNewCandidates(L,C);if(0<=Q)if(C[Q]instanceof u.IntersectionSnappingCandidate){if(g.squaredDistance(p,L.targetPoint)<this.squaredPointProximityThreshold(K.pointer))return this.updateSnappingCandidate(L,C,K)}else return this.intersectWithOtherCandidates(Q,C,p,K)}return this.intersectWithOtherCandidates(0,C,p,K)};q.findOldConstraintInNewCandidates=function(p,C){return p instanceof u.IntersectionSnappingCandidate?
0<=this.findOldCandidateIndex(C,p.first)&&0<=this.findOldCandidateIndex(C,p.second)?0:-1:this.findOldCandidateIndex(C,p)};q.intersectWithOtherCandidates=function(p,C,K,L){const Q=C[p],D=[],M=L.coordinateHelper;for(let N=0;N<C.length;++N){if(N===p)continue;const O=C[N];for(const Y of Q.constraint.intersect(O.constraint)){const fa=M.fromXYZ(Y.intersection,Q.targetPoint[2]);D.push([new u.IntersectionSnappingCandidate(M,fa,Q,O),n.squareDistance(n.anyMapPointToScreenPoint(K,L.coordinateHelper,L.elevationInfo,
this.view),n.anyMapPointToScreenPoint(fa,L.coordinateHelper,L.elevationInfo,this.view))])}}return 0<D.length&&(D.sort((N,O)=>N[1]-O[1]),D[0][1]<this.squaredPointProximityThreshold(L.pointer))?this.updateSnappingCandidate(D[0][0],C,L):this.updateSnappingCandidate(Q,C,L)};q.updateSnappingCandidate=function(p,C,K){this.doneSnapping();this._currentMainCandidate=p;const L=this._currentMainCandidate.targetPoint,Q=[];Q.push(...p.hints);for(const D of C){if(p instanceof u.IntersectionSnappingCandidate){if(D.constraint.objectEqual(p.first.constraint)||
D.constraint.objectEqual(p.second.constraint))continue}else if(D.constraint.objectEqual(p.constraint))continue;D.constraint.check(L)&&(D.targetPoint=L,this._currentOtherActiveCandidates.push(D),Q.push(...D.hints))}return{snappedPoint:K.coordinateHelper.vectorToDehydratedPoint(L),hints:Q}};q.squaredPointProximityThreshold=function(p){return"touch"===p?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};q.findOldCandidateIndex=function(p,C){let K=-1;for(let L=0;L<p.length;++L)if(C.constraint.objectEqual(p[L].constraint)){K=
L;break}return K};k._createClass(A,[{key:"updating",get:function(){return this.engines.some(p=>p.updating)}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:p,touchSensitivityMultiplier:C}=this.options,K=p*C;return K*K}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle"),engines:this.engines}}}]);return A}(z.EventedMixin(B.HandleOwner));
b.__decorate([P.property({constructOnly:!0})],e.SnappingManager.prototype,"view",void 0);b.__decorate([P.property()],e.SnappingManager.prototype,"options",void 0);b.__decorate([P.property({readOnly:!0})],e.SnappingManager.prototype,"updating",null);b.__decorate([P.property()],e.SnappingManager.prototype,"engines",void 0);b.__decorate([P.property()],e.SnappingManager.prototype,"squaredMouseProximityTreshold",null);b.__decorate([P.property()],e.SnappingManager.prototype,"squaredTouchProximityThreshold",
null);e.SnappingManager=b.__decorate([c.subclass("esri.views.interactive.snapping.SnappingManager")],e.SnappingManager);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(e,k){function b(t,R){t[0]=R[0];t[1]=R[1];return t}function z(t,R,U){t[0]=R;t[1]=U;return t}function B(t,R,U){t[0]=R[0]+U[0];t[1]=R[1]+U[1];return t}function G(t,R,U){t[0]=R[0]-U[0];t[1]=R[1]-U[1];return t}function J(t,R,U){t[0]=R[0]*U[0];t[1]=R[1]*U[1];return t}
function F(t,R,U){t[0]=R[0]/U[0];t[1]=R[1]/U[1];return t}function P(t,R){t[0]=Math.ceil(R[0]);t[1]=Math.ceil(R[1]);return t}function H(t,R){t[0]=Math.floor(R[0]);t[1]=Math.floor(R[1]);return t}function w(t,R,U){t[0]=Math.min(R[0],U[0]);t[1]=Math.min(R[1],U[1]);return t}function h(t,R,U){t[0]=Math.max(R[0],U[0]);t[1]=Math.max(R[1],U[1]);return t}function c(t,R){t[0]=Math.round(R[0]);t[1]=Math.round(R[1]);return t}function g(t,R,U){t[0]=R[0]*U;t[1]=R[1]*U;return t}function l(t,R,U,ha){t[0]=R[0]+U[0]*
ha;t[1]=R[1]+U[1]*ha;return t}function d(t,R){const U=R[0]-t[0];t=R[1]-t[1];return Math.sqrt(U*U+t*t)}function y(t,R){const U=R[0]-t[0];t=R[1]-t[1];return U*U+t*t}function f(t){const R=t[0];t=t[1];return Math.sqrt(R*R+t*t)}function n(t){const R=t[0];t=t[1];return R*R+t*t}function u(t,R){t[0]=-R[0];t[1]=-R[1];return t}function v(t,R){t[0]=1/R[0];t[1]=1/R[1];return t}function A(t,R){var U=R[0];const ha=R[1];U=U*U+ha*ha;0<U&&(U=1/Math.sqrt(U),t[0]=R[0]*U,t[1]=R[1]*U);return t}function q(t,R){return t[0]*
R[0]+t[1]*R[1]}function p(t,R,U){R=R[0]*U[1]-R[1]*U[0];t[0]=t[1]=0;t[2]=R;return t}function C(t,R,U,ha){const ma=R[0];R=R[1];t[0]=ma+ha*(U[0]-ma);t[1]=R+ha*(U[1]-R);return t}function K(t,R){R=R||1;const U=2*k.RANDOM()*Math.PI;t[0]=Math.cos(U)*R;t[1]=Math.sin(U)*R;return t}function L(t,R,U){const ha=R[0];R=R[1];t[0]=U[0]*ha+U[2]*R;t[1]=U[1]*ha+U[3]*R;return t}function Q(t,R,U){const ha=R[0];R=R[1];t[0]=U[0]*ha+U[2]*R+U[4];t[1]=U[1]*ha+U[3]*R+U[5];return t}function D(t,R,U){const ha=R[0];R=R[1];t[0]=
U[0]*ha+U[3]*R+U[6];t[1]=U[1]*ha+U[4]*R+U[7];return t}function M(t,R,U){const ha=R[0];R=R[1];t[0]=U[0]*ha+U[4]*R+U[12];t[1]=U[1]*ha+U[5]*R+U[13];return t}function N(t,R,U,ha){const ma=R[0]-U[0];R=R[1]-U[1];const ta=Math.sin(ha);ha=Math.cos(ha);t[0]=ma*ha-R*ta+U[0];t[1]=ma*ta+R*ha+U[1];return t}function O(t,R){var U=t[0];t=t[1];const ha=R[0];R=R[1];let ma=U*U+t*t;0<ma&&(ma=1/Math.sqrt(ma));let ta=ha*ha+R*R;0<ta&&(ta=1/Math.sqrt(ta));U=(U*ha+t*R)*ma*ta;return 1<U?0:-1>U?Math.PI:Math.acos(U)}function Y(t){return"vec2("+
t[0]+", "+t[1]+")"}function fa(t,R){return t[0]===R[0]&&t[1]===R[1]}function Z(t,R){const U=t[0];t=t[1];const ha=R[0];R=R[1];return Math.abs(U-ha)<=k.EPSILON*Math.max(1,Math.abs(U),Math.abs(ha))&&Math.abs(t-R)<=k.EPSILON*Math.max(1,Math.abs(t),Math.abs(R))}function r(t,R,U,ha,ma){let ta=R[0]-U[0];U=R[1]-U[1];ma=(ha[0]*ta+ha[1]*U)*(ma-1);ta=ha[0]*ma;U=ha[1]*ma;t[0]=R[0]+ta;t[1]=R[1]+U;return t}const x=Object.freeze({__proto__:null,copy:b,set:z,add:B,subtract:G,multiply:J,divide:F,ceil:P,floor:H,min:w,
max:h,round:c,scale:g,scaleAndAdd:l,distance:d,squaredDistance:y,length:f,squaredLength:n,negate:u,inverse:v,normalize:A,dot:q,cross:p,lerp:C,random:K,transformMat2:L,transformMat2d:Q,transformMat3:D,transformMat4:M,rotate:N,angle:O,str:Y,exactEquals:fa,equals:Z,projectAndScale:r,len:f,sub:G,mul:J,div:F,dist:d,sqrDist:y,sqrLen:n});e.add=B;e.angle=O;e.ceil=P;e.copy=b;e.cross=p;e.dist=d;e.distance=d;e.div=F;e.divide=F;e.dot=q;e.equals=Z;e.exactEquals=fa;e.floor=H;e.inverse=v;e.len=f;e.length=f;e.lerp=
C;e.max=h;e.min=w;e.mul=J;e.multiply=J;e.negate=u;e.normalize=A;e.projectAndScale=r;e.random=K;e.rotate=N;e.round=c;e.scale=g;e.scaleAndAdd=l;e.set=z;e.sqrDist=y;e.sqrLen=n;e.squaredDistance=y;e.squaredLength=n;e.str=Y;e.sub=G;e.subtract=G;e.transformMat2=L;e.transformMat2d=Q;e.transformMat3=D;e.transformMat4=M;e.vec2=x})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/HandleOwner ../../../core/Handles ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ./SnappingConstraint ./snappingUtils ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n,u,v){k.FeatureSnappingEngine=function(p){function C(L){L=p.call(this,L)||this;L.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}};return L}b._inheritsLoose(C,p);var K=C.prototype;K.initialize=function(){this.updatingHandles.add(this,"snappingSources",()=>{this.notifyChange("updating")},1);F.isSome(this.view)&&this.handles.add([this.view.on("layerview-create",L=>this.updateLayerView(L.layer,
L.layerView)),this.view.on("layerview-destroy",L=>this.updateLayerView(L.layer,null))])};K.updateLayerView=function(L,Q){for(const [,D]of this.snappingSources)D.snappingSource.layerSource.layer===L&&(D.layerView=Q)};K.destroy=function(){this._set("options",null);for(const [,L]of this.snappingSources)L.destroy()};K.fetchCandidates=function(){var L=b._asyncToGenerator(function*(Q,D,M){if(!this.options.effectiveFeatureEnabled)return[];var N=[];const O=this.computeScreeenSizeDistanceParameters(Q,D),Y=
{distance:O,point:Q,coordinateHelper:D.coordinateHelper,types:this.types,filter:null};for(const [,{snappingSource:fa,layerView:Z}]of this.snappingSources)!fa.layerSource.enabled||F.isSome(Z)&&Z.suspended||N.push(fa.fetchCandidates(Y,M).then(r=>r.filter(x=>!this.candidateIsExcluded(fa,x,D.excludeFeature))));N=(yield P.eachAlwaysValues(N)).flat();this.addRightAngleCandidates(N,Q,O,D);P.throwIfAborted(M);f.sortCandidatesInPlace(Q,N);return N});return function(Q,D,M){return L.apply(this,arguments)}}();
K.addRightAngleCandidates=function(L,Q,D,M){var N,O,Y,fa,Z,r,x,t;const R=F.isSome(M.vertexHandle)?null==(N=M.vertexHandle.rightEdge)?void 0:null==(O=N.rightVertex)?void 0:O.pos:F.isSome(M.editGeometryOperations)&&"polygon"===M.editGeometryOperations.data.type?null==(Y=F.unwrap(null==(fa=M.editGeometryOperations.data.components[0])?void 0:fa.getFirstVertex()))?void 0:Y.pos:null;N=F.isSome(M.vertexHandle)?null==(Z=M.vertexHandle.leftEdge)?void 0:null==(r=Z.leftVertex)?void 0:r.pos:F.isSome(M.editGeometryOperations)?
null==(x=F.unwrap(null==(t=M.editGeometryOperations.data.components[0])?void 0:t.getLastVertex()))?void 0:x.pos:null;Z=L.length;for(r=0;r<Z;r++)this.addRightAngleCandidate(L[r],N,Q,D,M,L),this.addRightAngleCandidate(L[r],R,Q,D,M,L)};K.addRightAngleCandidate=function(L,Q,D,M,N,O){if(!F.isNone(Q)&&L instanceof n.EdgeSnappingCandidate){var Y=L.constraint.closestTo(Q),fa=(Y[0]-D[0])/M.x;D=(Y[1]-D[1])/M.y;1>=fa*fa+D*D&&(N=N.coordinateHelper,O.push(new v.RightAngleSnappingCandidate({coordinateHelper:N,
targetPoint:Y,otherVertex:Q,otherVertexType:0,previousVertex:L.constraint.start,constraint:new y.RayConstraint(N,Q,Y),objectId:L.objectId})))}};K.computeScreeenSizeDistanceParameters=function(L,Q){const D=this.options.distance*("touch"===Q.pointer?this.options.touchSensitivityMultiplier:1);return F.isNone(this.view)?{x:D,y:D}:"2d"===this.view.type?{x:D*this.view.resolution,y:D*this.view.resolution}:this.computeScreeenSizeDistanceParameters3D(L,D,this.view,Q)};K.computeScreeenSizeDistanceParameters3D=
function(L,Q,D,M){const {coordinateHelper:N,elevationInfo:O}=M,Y=D.state.camera.computeScreenPixelSizeAt(f.anyMapPointToRender(L,N,O,D,q))*D.renderCoordsHelper.unitInMeters/D.mapCoordsHelper.unitInMeters;Q*=Y;const fa=this.computeScreenMagnitudeOfMapOffset(L,Y,0,D,M);L=this.computeScreenMagnitudeOfMapOffset(L,0,Y,D,M);return{x:Q/fa,y:Q/L}};K.computeScreenMagnitudeOfMapOffset=function(L,Q,D,M,{coordinateHelper:N,elevationInfo:O}){const Y=N.clone(L);Y[0]+=Q;Y[1]+=D;L=f.anyMapPointToScreenPoint(L,N,
O,M);N=f.anyMapPointToScreenPoint(Y,N,O,M);M=N.x-L.x;N=N.y-L.y;return Math.sqrt(M*M+N*N)};K.candidateIsExcluded=function(L,Q,D){if(F.isNone(D))return!1;Q=this.getCandidateObjectId(Q);if(F.isNone(Q))return!1;L=L.layerSource.layer;return"graphics"===L.type?D.uid===Q:D.sourceLayer===L&&D.attributes&&"objectIdField"in L?D.attributes[L.objectIdField]===Q:!1};K.getCandidateObjectId=function(L){return L instanceof u.FeatureSnappingCandidate?L.objectId:null};K.createSourceInfo=function(L){const Q=this.createFeatureSnappingSourceType(L);
if(F.isNone(Q))return null;if("loading"in Q)return this.updatingHandles.addPromise(Q.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const D=F.isSome(this.view)?this.view.allLayerViews.find(M=>M.layer===L.layer):null;return new A(Q.source,D)};K.createFeatureSnappingSourceType=function(L){switch(L.layer.type){case "feature":case "geojson":case "csv":case "subtype-group":case "wfs":return this.createFeatureSnappingSourceFeatureLayer(L);case "graphics":return this.createFeatureSnappingSourceGraphicsLayer(L)}return null};
K.createFeatureSnappingSourceFeatureLayer=function(L){switch(L.layer.source.type){case "feature-layer":var Q=this.getSourceModule("featureService");return F.isSome(Q.module)?{source:new Q.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:L})}:{loading:Q.loader};case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==L.layer.geometryType)return Q=this.getSourceModule("featureCollection"),F.isSome(Q.module)?{source:new Q.module.FeatureCollectionSnappingSource({layerSource:L})}:
{loading:Q.loader}}return null};K.createFeatureSnappingSourceGraphicsLayer=function(L){const Q=this.getSourceModule("graphics");return F.isSome(Q.module)?{source:new Q.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:L})}:{loading:Q.loader}};K.getSourceModule=function(L){const Q=this.sourceModules[L];return F.isNone(Q.loader)?(L=this.loadSourceModule(L).then(D=>{Q.module=D}),Q.loader=L,{module:Q.module,loader:L}):{module:Q.module,loader:Q.loader}};K.loadSourceModule=
function(L){switch(L){case "featureService":return this.updatingHandles.addPromise(new Promise((Q,D)=>e(["./featureSources/FeatureServiceSnappingSource"],Q,D)));case "featureCollection":return this.updatingHandles.addPromise(new Promise((Q,D)=>e(["./featureSources/FeatureCollectionSnappingSource"],Q,D)));case "graphics":return this.updatingHandles.addPromise(new Promise((Q,D)=>e(["./featureSources/GraphicsSnappingSource"],Q,D)))}return null};b._createClass(C,[{key:"updating",get:function(){return J.someMap(this.snappingSources,
({snappingSource:L})=>L.updating)||this.updatingHandles.updating}},{key:"snappingSources",get:function(){var L;const Q=this._get("snappingSources")||new Map,D=new Map;if(null!=(L=this.options)&&L.featureSources)for(const N of this.options.featureSources.items){L=N.layer.uid;var M=Q.get(L);M?(Q.delete(L),D.set(L,M)):N.layer.loaded?(M=this.createSourceInfo(N),F.isSome(M)&&D.set(L,M)):this.updatingHandles.addPromise(N.layer.load())}for(const [,N]of Q)N.destroy();return D}},{key:"types",get:function(){return 3}}]);
return C}(B.HandleOwner);z.__decorate([w.property({constructOnly:!0})],k.FeatureSnappingEngine.prototype,"spatialReference",void 0);z.__decorate([w.property({constructOnly:!0})],k.FeatureSnappingEngine.prototype,"view",void 0);z.__decorate([w.property()],k.FeatureSnappingEngine.prototype,"options",void 0);z.__decorate([w.property({readOnly:!0})],k.FeatureSnappingEngine.prototype,"updating",null);z.__decorate([w.property({readOnly:!0})],k.FeatureSnappingEngine.prototype,"snappingSources",null);k.FeatureSnappingEngine=
z.__decorate([l.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],k.FeatureSnappingEngine);let A=function(){function p(C,K){this.snappingSource=C;this.layerView=K;this.handles=new G;K=this.snappingSource.layerSource.layer;"refresh"in K&&this.handles.add(K.on("refresh",()=>C.refresh()));this.handles.add([H.init(C,"updating",L=>C.layerSource.updating=L,!0),H.init(C,"availability",L=>C.layerSource.availability=L,!0)])}p.prototype.destroy=function(){this.snappingSource.destroy();this.handles.destroy()};
return p}();const q=d.create();Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./snappingUtils ../../support/geometry2dUtils".split(" "),function(e,k,b,z,B,G,J){let F=function(l){this.coordinateHelper=l},P=function(l){function d(f,n){f=l.call(this,f)||this;f.point=n;return f}k._inheritsLoose(d,l);var y=d.prototype;y.objectEqual=
function(f){return f instanceof d?G.objectEqual(this.point,f.point):!1};y.check=function(f){return b.squaredDistance(f,this.point)<B.defaults.pointThreshold};y.closestTo=function(){return this.coordinateHelper.clone(this.point)};y.intersect=function(f){const n=[];f instanceof H?n.push(...J.intersectLineAndPoint({start:f.start,end:f.end,type:f instanceof h?1:0},this.point)):f instanceof g&&n.push(...J.intersectCircleAndPoint(f.center,f.radius,this.point));return n.map(u=>new c(this.coordinateHelper,
u,this,f))};return d}(F),H=function(l){function d(f,n,u){f=l.call(this,f)||this;f.start=n;f.end=u;return f}k._inheritsLoose(d,l);var y=d.prototype;y.objectEqual=function(f){return f instanceof d?G.objectEqual(this.start,f.start)&&G.objectEqual(this.end,f.end):!1};y.intersect=function(f){const n=[];f instanceof P?n.push(...J.intersectLineAndPoint({start:this.start,end:this.end,type:this instanceof h?1:0},f.point)):f instanceof d?n.push(...J.intersectLineAndRay({start:this.start,end:this.end,type:this instanceof
h?1:0},{start:f.start,end:f.end,type:f instanceof h?1:0})):f instanceof g&&n.push(...J.intersectLineLikeAndCircle({start:this.start,end:this.end,type:this instanceof h?1:0},f.center,f.radius));return n.map(u=>new c(this.coordinateHelper,u,this,f))};return d}(F),w=function(l){function d(f,n,u){f=l.call(this,f,n,u)||this;f.dir=z.create();f.p=z.create();return f}k._inheritsLoose(d,l);var y=d.prototype;y.objectEqual=function(f){return f instanceof d?l.prototype.objectEqual.call(this,f):!1};y.check=function(f){b.subtract(this.dir,
this.end,this.start);b.subtract(this.p,f,this.start);return 0<=b.dot(this.dir,this.p)?J.pointToLineDistance(f,this.start,this.end)<B.defaults.pointOnLineThreshold:!1};y.closestTo=function(f){const n=this.coordinateHelper.clone(f);J.projectPointToRay(n,f,this.start,this.end);return n};return d}(H),h=function(l){function d(f,n,u){return l.call(this,f,n,u)||this}k._inheritsLoose(d,l);var y=d.prototype;y.objectEqual=function(f){return f instanceof d?l.prototype.objectEqual.call(this,f):!1};y.check=function(f){return J.pointToLineDistance(f,
this.start,this.end)<B.defaults.pointOnLineThreshold};y.closestTo=function(f){const n=this.coordinateHelper.clone(f);J.projectPointToLine(n,f,this.start,this.end);return n};return d}(H),c=function(l){function d(f,n,u,v){f=l.call(this,f)||this;f.intersection=n;f.first=u;f.second=v;return f}k._inheritsLoose(d,l);var y=d.prototype;y.objectEqual=function(f){return f instanceof d?this.first.objectEqual(f.first)&&this.second.objectEqual(f.second):!1};y.check=function(){return!1};y.closestTo=function(f){f=
this.coordinateHelper.clone(f);b.copy(f,this.intersection);return f};y.intersect=function(){return[]};return d}(F),g=function(l){function d(f,n,u){f=l.call(this,f)||this;f.center=n;f.radius=u;return f}k._inheritsLoose(d,l);var y=d.prototype;y.objectEqual=function(f){return f instanceof d?this.center[0]===f.center[0]&&this.center[1]===f.center[1]&&this.radius===f.radius:!1};y.check=function(){return!1};y.closestTo=function(f){const n=this.coordinateHelper.clone(f);J.projectPointToCircle(n,f,this.center,
this.radius);return n};y.intersect=function(f){const n=[];f instanceof H?n.push(...J.intersectLineLikeAndCircle({start:f.start,end:f.end,type:f instanceof h?1:0},this.center,this.radius)):f instanceof P&&n.push(...J.intersectCircleAndPoint(this.center,this.radius,f.point));return n.map(u=>new c(this.coordinateHelper,u,this,f))};return d}(F);e.IntersectionConstraint=c;e.LineConstraint=h;e.LineLikeConstraint=H;e.PlanarCircleConstraint=g;e.PointConstraint=P;e.RayConstraint=w;e.SnappingConstraint=F;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/chunks/vec2f64":function(){define(["exports"],function(e){function k(){return[0,0]}function b(d){return[d[0],d[1]]}function z(d,y){return[d,y]}function B(d){const y=[0,0],f=Math.min(2,d.length);for(let n=0;n<f;++n)y[n]=d[n];return y}function G(d,y){return new Float64Array(d,y,2)}function J(){return[0,0]}function F(){return[1,1]}function P(){return[1,0]}function H(){return[0,1]}const w=[0,0],h=[1,1],c=[1,0],g=[0,1],l=Object.freeze({__proto__:null,create:k,clone:b,
fromValues:z,fromArray:B,createView:G,zeros:J,ones:F,unitX:P,unitY:H,ZEROS:w,ONES:h,UNIT_X:c,UNIT_Y:g});e.ONES=h;e.UNIT_X=c;e.UNIT_Y=g;e.ZEROS=w;e.clone=b;e.create=k;e.createView=G;e.fromArray=B;e.fromValues=z;e.ones=F;e.unitX=P;e.unitY=H;e.vec2f64=l;e.zeros=J})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3f64 ../../../geometry/Point ../../../support/elevationInfoUtils".split(" "),function(e,k,b,z,B,
G){function J(w,h,c,g,l=z.create()){w=h.toXYZ(w);w[2]=G.getConvertedElevationFromVector(g,w,h.spatialReference,c)||0;g.renderCoordsHelper.toRenderCoords(w,h.spatialReference,l);return l}const F=z.create(),P=k.createScreenPointArray(),H=new B;e.anyMapPointToRender=J;e.anyMapPointToScreenPoint=function(w,h,c,g){if("2d"===g.type)return g.toScreen(h.vectorToPoint(w,H));J(w,h,c,g,F);g.state.camera.projectToScreen(F,P);return k.createScreenPoint(P[0],P[1])};e.anyMapPointsToRenderWithEqualZ=function(w,h,
c,g,l,d,y){w=c.toXYZ(w);h=c.toXYZ(h);const f=G.getConvertedElevationFromVector(l,w,c.spatialReference,g);g=G.getConvertedElevationFromVector(l,h,c.spatialReference,g);g=(null==f?g:null==g?f:Math.min(f,g))||0;w[2]=g;h[2]=g;l.renderCoordsHelper.toRenderCoords(w,c.spatialReference,d);l.renderCoordsHelper.toRenderCoords(h,c.spatialReference,y)};e.objectEqual=function(w,h){const c=w.length===h.length&&w[0]===h[0]&&w[1]===h[1];switch(w.length){case 2:return c;case 3:return c&&w[2]===h[2];case 4:return c&&
w[3]===h[3]}return!1};e.sortCandidatesInPlace=function(w,h){h.sort((c,g)=>{c=b.squaredDistance(c.targetPoint,w);g=b.squaredDistance(g.targetPoint,w);return c-g})};e.squareDistance=function(w,h){const c=w.x-h.x;w=w.y-h.y;return c*c+w*w};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(e,k,b,z){function B(c,g){return c[0]*g[1]-c[1]*g[0]}function G(c,g,l){g=
b.dot(l,g)/b.squaredLength(l);return b.scale(c,l,g)}function J(c,g,l,d,y=l){b.subtract(P,d,l);b.subtract(w,g,y);G(h,w,P);return b.add(c,y,h)}function F(c,g,l,d){b.subtract(P,g,l);g=d/b.length(P);return b.scaleAndAdd(c,l,P,g)}const P=z.create(),H=z.create(),w=z.create(),h=z.create();e.cross=B;e.intersectCircleAndPoint=function(c,g,l){F(w,l,c,g);return k.floatEqualAbsolute(w[0],l[0])&&k.floatEqualAbsolute(w[1],l[1])?[z.clone(l)]:[]};e.intersectLineAndPoint=function(c,g){J(w,g,c.start,c.end);return k.floatEqualAbsolute(w[0],
g[0])&&k.floatEqualAbsolute(w[1],g[1])?[z.clone(g)]:[]};e.intersectLineAndRay=function(c,g){const l=c.start;var d=g.start,y=g.end;const f=b.subtract(P,c.end,l);var n=b.subtract(H,y,d);y=B(f,n);if(1E-6>=Math.abs(y))return[];d=b.subtract(w,l,d);n=B(n,d)/y;y=B(f,d)/y;if(0<=n){if(0<=y||1===g.type)return[b.scaleAndAdd(h,l,f,n)]}else if(1===c.type&&(0<=y||1===g.type))return[b.scaleAndAdd(h,l,f,n)];return[]};e.intersectLineLikeAndCircle=function(c,g,l){const d=[],y=b.subtract(P,c.end,c.start);var f=b.subtract(H,
c.start,g);g=b.squaredLength(y);const n=2*b.dot(y,f);l=b.squaredLength(f)-l*l;l=n*n-4*g*l;0===l?(g=-n/(2*g),(1===c.type||0<=g)&&d.push(b.scaleAndAdd(h,c.start,y,g))):0<l&&(l=Math.sqrt(l),f=(-n+l)/(2*g),(1===c.type||0<=f)&&d.push(b.scaleAndAdd(h,c.start,y,f)),g=(-n-l)/(2*g),(1===c.type||0<=g)&&d.push(b.scaleAndAdd(w,c.start,y,g)));return d};e.pointToLineDistance=function(c,g,l){return Math.abs((g[0]-c[0])*(l[1]-c[1])-(g[1]-c[1])*(l[0]-c[0]))/b.distance(g,l)};e.projectPoint=G;e.projectPointToCircle=
F;e.projectPointToLine=J;e.projectPointToRay=function(c,g,l,d){b.subtract(P,d,l);b.subtract(w,g,l);g=b.dot(P,w)/b.squaredLength(P);return 0<g?b.scaleAndAdd(c,l,P,g):b.copy(c,l)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./FeatureSnappingCandidate","../hints/LineSnappingHint"],function(e,k,b,z,B){z=function(G){function J(F){return G.call(this,
{...F,constraint:new b.LineConstraint(F.coordinateHelper,F.edgeStart,F.edgeEnd)})||this}k._inheritsLoose(J,G);k._createClass(J,[{key:"hints",get:function(){return[new B.LineSnappingHint(1,this.constraint.start,this.constraint.end)]}}]);return J}(z.FeatureSnappingCandidate);e.EdgeSnappingCandidate=z;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate"],
function(e,k,b){b=function(z){function B({coordinateHelper:G,targetPoint:J,objectId:F,constraint:P}){G=z.call(this,G,J,P)||this;G.objectId=F;return G}k._inheritsLoose(B,z);return B}(b.SnappingCandidate);e.FeatureSnappingCandidate=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(e){e.SnappingCandidate=function(k,b,z){this.coordinateHelper=k;this.targetPoint=b;this.constraint=z};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(e,k,b,z,B,G){z.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");b=function(J){function F(P,H,w,h=!0,c=!0){var g=J.call(this)||this;g.type=P;g.lineStart=H;g.lineEnd=w;g.fadeLeft=h;g.fadeRight=c;return g}k._inheritsLoose(F,J);F.prototype.equals=
function(P){return P instanceof F?this.type===P.type&&B.objectEqual(this.lineStart,P.lineStart)&&B.objectEqual(this.lineEnd,P.lineEnd)&&this.fadeLeft===P.fadeLeft&&this.fadeRight===P.fadeRight:!1};return F}(G.SnappingHint);e.LineSnappingHint=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(e){e.SnappingHint=function(){};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate","../hints/LineSnappingHint","../hints/RightAngleSnappingHint"],function(e,k,b,z,B){b=function(G){function J({coordinateHelper:F,targetPoint:P,constraint:H,previousVertex:w,otherVertex:h,otherVertexType:c,objectId:g}){F=G.call(this,F,P,H)||this;F.previousVertex=w;F.otherVertex=h;F.otherVertexType=c;F.objectId=g;return F}k._inheritsLoose(J,G);k._createClass(J,[{key:"hints",get:function(){const F=this.previousVertex,P=1===this.otherVertexType?
this.otherVertex:this.targetPoint,H=1===this.otherVertexType?this.targetPoint:this.otherVertex;return[new z.LineSnappingHint(0,P,H),new z.LineSnappingHint(1,F,P),new B.RightAngleSnappingHint(this.previousVertex,P,H)]}}]);return J}(b.SnappingCandidate);e.RightAngleSnappingCandidate=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),
function(e,k,b,z,B,G){z.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");b=function(J){function F(P,H,w){var h=J.call(this)||this;h.previousVertex=P;h.centerVertex=H;h.nextVertex=w;return h}k._inheritsLoose(F,J);F.prototype.equals=function(P){return P instanceof F?B.objectEqual(this.previousVertex,P.previousVertex)&&B.objectEqual(this.centerVertex,P.centerVertex)&&B.objectEqual(this.nextVertex,P.nextVertex):!1};return F}(G.SnappingHint);e.RightAngleSnappingHint=b;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./snappingUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l){e.SelfSnappingEngine=function(d){function y(n){n=d.call(this,n)||this;n.updating=!1;n._snappers=new B;return n}k._inheritsLoose(y,d);var f=y.prototype;f.initialize=function(){this._snappers.push(new h.ParallelLineSnapper(this.view,this.options),new w.LineSnapper(this.view,this.options),new c.RightAngleSnapper(this.view,this.options),new g.RightAngleTriangleSnapper(this.view,this.options))};f.fetchCandidates=function(){var n=k._asyncToGenerator(function*(u,v){if(!this.options.effectiveSelfEnabled)return[];
const A=[];for(const q of this._snappers.items)A.push(...q.snap(u,v));l.sortCandidatesInPlace(u,A);return A});return function(u,v){return n.apply(this,arguments)}}();k._createClass(y,[{key:"options",set:function(n){this._set("options",n);for(const u of this._snappers)u.options=n}}]);return y}(z);b.__decorate([G.property({readOnly:!0})],e.SelfSnappingEngine.prototype,"updating",void 0);b.__decorate([G.property({constructOnly:!0})],e.SelfSnappingEngine.prototype,"view",void 0);b.__decorate([G.property()],
e.SelfSnappingEngine.prototype,"options",null);e.SelfSnappingEngine=b.__decorate([H.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],e.SelfSnappingEngine);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/LineSnappingCandidate ../../support/geometry2dUtils".split(" "),function(e,
k,b,z,B,G,J,F){B=function(P){function H(){return P.apply(this,arguments)||this}k._inheritsLoose(H,P);var w=H.prototype;w.snapNewVertex=function(h,c){var g=c.editGeometryOperations.data.components[0],l=g.edges.length;const d=[];if(1>l)return d;const y=G.anyMapPointToScreenPoint(h,c.coordinateHelper,c.elevationInfo,this.view);l=g=g.edges[l-1];do this.edgeExceedsShortLineThreshold(l,c)&&this._processCandidateProposal(l.leftVertex.pos,l.rightVertex.pos,h,y,c,d),l=l.leftVertex.leftEdge;while(l&&l!==g);
return d};w.snapExistingVertex=function(h,c){const g=[],l=b.unwrap(c.vertexHandle);var d=l.component;if(2>d.edges.length)return g;const y=G.anyMapPointToScreenPoint(h,c.coordinateHelper,c.elevationInfo,this.view);var f=l.leftEdge;const n=l.rightEdge;f&&n&&this.edgeExceedsShortLineThreshold(f,c)&&this.edgeExceedsShortLineThreshold(n,c)&&this._processCandidateProposal(f.leftVertex.pos,n.rightVertex.pos,h,y,c,g);f=d=d.edges[0];do f!==l.leftEdge&&f!==l.rightEdge&&this.edgeExceedsShortLineThreshold(f,
c)&&this._processCandidateProposal(f.leftVertex.pos,f.rightVertex.pos,h,y,c,g),f=f.rightVertex.rightEdge;while(f&&f!==d);return g};w._processCandidateProposal=function(h,c,g,l,d,y){const f=F.projectPointToLine(z.create(),g,h,c),n=d.coordinateHelper;g=n.fromXYZ(f,n.getZ(g,0));G.squareDistance(l,G.anyMapPointToScreenPoint(g,n,d.elevationInfo,this.view))<this.squaredProximityTreshold(d.pointer)&&y.push(new J.LineSnappingCandidate({coordinateHelper:d.coordinateHelper,lineStart:h,lineEnd:c,targetPoint:g}))};
return H}(B.SnappingAlgorithm);e.LineSnapper=B;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./Settings","./snappingUtils"],function(e,k,b,z,B){let G=function(){function J(P,H){this.view=P;this.options=H;this.squaredShortLineThreshold=z.defaults.shortLineThreshold*z.defaults.shortLineThreshold}var F=J.prototype;F.snap=function(P,H){return b.isSome(H.vertexHandle)?
"vertex"!==H.vertexHandle.type?[]:this.snapExistingVertex(P,H):this.snapNewVertex(P,H)};F.edgeExceedsShortLineThreshold=function(P,H){return this.exceedsShortLineThreshold(P.leftVertex.pos,P.rightVertex.pos,H)};F.exceedsShortLineThreshold=function(P,H,{elevationInfo:w,editGeometryOperations:h}){h=h.data.coordinateHelper;return 0===this.squaredShortLineThreshold||B.squareDistance(B.anyMapPointToScreenPoint(H,h,w,this.view),B.anyMapPointToScreenPoint(P,h,w,this.view))>this.squaredShortLineThreshold};
F.squaredProximityTreshold=function(P){return"touch"===P?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};k._createClass(J,[{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:P,touchSensitivityMultiplier:H}=this.options,w=P*H;return w*w}}]);return J}();e.SnappingAlgorithm=G;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint".split(" "),
function(e,k,b,z,B,G,J){G=function(H){function w({coordinateHelper:h,lineStart:c,lineEnd:g,targetPoint:l}){h=H.call(this,h,l,new B.LineConstraint(h,c,g))||this;h.referenceLineHint=new J.LineSnappingHint(2,c,g);return h}k._inheritsLoose(w,H);w.prototype.lineEndClosestToTarget=function(){const h=this.constraint.start,c=this.constraint.end;return 0<Math.sign(b.dot(b.subtract(P,c,h),b.subtract(F,this.targetPoint,h)))?c:h};k._createClass(w,[{key:"hints",get:function(){return[this.referenceLineHint,new J.LineSnappingHint(0,
this.lineEndClosestToTarget(),this.targetPoint)]}}]);return w}(G.SnappingCandidate);const F=z.create(),P=z.create();e.LineSnappingCandidate=G;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./SnappingAlgorithm ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H){J=function(w){function h(){var g=w.apply(this,arguments)||this;g._tmpProjection=B.create();return g}k._inheritsLoose(h,w);var c=h.prototype;c.snapNewVertex=function(g,l){var d=l.editGeometryOperations.data.components[0],y=d.edges.length,f=d.vertices.length;const n=[];if(2>y)return n;const u=F.anyMapPointToScreenPoint(g,l.coordinateHelper,l.elevationInfo,this.view);f=d.vertices[f-1];const v=d.vertices[0];y=d=d.edges[y-1];do this.edgeExceedsShortLineThreshold(y,l)&&(this._checkEdgeForParalleLines(y,
f.pos,g,u,l,n),this._checkEdgeForParalleLines(y,v.pos,g,u,l,n)),y=y.leftVertex.leftEdge;while(y&&y!==d);return n};c.snapExistingVertex=function(g,l){const d=[],y=b.unwrap(l.vertexHandle);var f=y.component;if(3>f.edges.length)return d;const n=F.anyMapPointToScreenPoint(g,l.coordinateHelper,l.elevationInfo,this.view),u=y.leftEdge,v=y.rightEdge,A=f.vertices[0],q=f.vertices[f.vertices.length-1];let p=f=f.edges[0];do p!==u&&p!==v&&this.edgeExceedsShortLineThreshold(p,l)&&(u&&this._checkEdgeForParalleLines(p,
u.leftVertex.pos,g,n,l,d),v&&this._checkEdgeForParalleLines(p,v.rightVertex.pos,g,n,l,d),y===A?this._checkEdgeForParalleLines(p,q.pos,g,n,l,d):y===q&&this._checkEdgeForParalleLines(p,A.pos,g,n,l,d)),p=p.rightVertex.rightEdge;while(p&&p!==f);return d};c._checkEdgeForParalleLines=function(g,l,d,y,f,n){var u=g.leftVertex.pos;const v=g.rightVertex.pos;H.projectPointToLine(this._tmpProjection,l,u,v);z.squaredDistance(this._tmpProjection,l)<G.defaults.parallelLineThreshold||(H.projectPointToLine(this._tmpProjection,
d,u,v,l),u=f.coordinateHelper,d=u.fromXYZ(this._tmpProjection,u.getZ(d,0)),F.squareDistance(y,F.anyMapPointToScreenPoint(d,u,f.elevationInfo,this.view))<this.squaredProximityTreshold(f.pointer)&&!this.parallelToPreviousCandidate(g,n)&&n.push(new P.ParallelLineSnappingCandidate({coordinateHelper:u,referenceLine:g,lineStart:l,targetPoint:d})))};c.parallelToPreviousCandidate=function(g,l){const d=g.leftVertex.pos,y=g.rightVertex.pos;for(const f of l)if(H.projectPointToLine(this._tmpProjection,y,f.constraint.start,
f.constraint.end,d),z.squaredDistance(this._tmpProjection,y)<G.defaults.parallelLineThreshold)return f.addReferenceLine(g),!0;return!1};return h}(J.SnappingAlgorithm);e.ParallelLineSnapper=J;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),
function(e,k,b,z,B,G,J){B=function(F){function P({coordinateHelper:H,referenceLine:w,lineStart:h,targetPoint:c}){const g=H.clone(h);b.subtract(g,b.add(g,g,w.rightVertex.pos),w.leftVertex.pos);H=F.call(this,H,c,new z.LineConstraint(H,h,g))||this;H._referenceLines=[{edge:w,fadeLeft:!0,fadeRight:!0}];return H}k._inheritsLoose(P,F);P.prototype.addReferenceLine=function(H){const w={edge:H,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(h=>{H.rightVertex.rightEdge===h.edge&&(h.fadeLeft=!1,w.fadeRight=
!1);H.leftVertex.leftEdge===h.edge&&(h.fadeRight=!1,w.fadeLeft=!1)});this._referenceLines.push(w)};k._createClass(P,[{key:"hints",get:function(){return[new G.LineSnappingHint(0,this.constraint.start,this.targetPoint),new J.ParallelSnappingHint(this.constraint.start,this.targetPoint),...this._referenceLines.map(H=>new G.LineSnappingHint(1,H.edge.leftVertex.pos,H.edge.rightVertex.pos,H.fadeLeft,H.fadeRight))]}}]);return P}(B.SnappingCandidate);e.ParallelLineSnappingCandidate=B;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(e,k,b,z,B,G){z.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");b=function(J){function F(P,H){var w=J.call(this)||this;w.lineStart=P;w.lineEnd=H;return w}k._inheritsLoose(F,J);F.prototype.equals=function(P){return P instanceof
F?B.objectEqual(this.lineStart,P.lineStart)&&B.objectEqual(this.lineEnd,P.lineEnd):!1};return F}(G.SnappingHint);e.ParallelSnappingHint=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./SnappingConstraint ./snappingUtils ./candidates/RightAngleSnappingCandidate".split(" "),function(e,k,b,
z,B,G,J,F,P){G=function(H){function w(){var c=H.apply(this,arguments)||this;c._tmp=B.create();return c}k._inheritsLoose(w,H);var h=w.prototype;h.snapNewVertex=function(c,g){var l=g.editGeometryOperations.data.components[0],d=l.vertices.length;const y=[];if(2>d)return y;const f=F.anyMapPointToScreenPoint(c,g.coordinateHelper,g.elevationInfo,this.view);d=l.vertices[d-1];this._checkForSnappingCandidate(y,d.leftEdge,d.pos,c,d.leftEdge.leftVertex.pos,d.pos,g,c,f);l=l.vertices[0];this._checkForSnappingCandidate(y,
l.rightEdge,l.pos,c,l.rightEdge.rightVertex.pos,l.pos,g,c,f);return y};h.snapExistingVertex=function(c,g){const l=[];var d=b.unwrap(g.vertexHandle),y=d.component;const f=y.vertices.length;if(3>f)return l;const n=F.anyMapPointToScreenPoint(c,g.coordinateHelper,g.elevationInfo,this.view);var u=d.leftEdge;d=d.rightEdge;const v=y.vertices[0];y=y.vertices[f-1];if(!u)return this._checkForSnappingCandidate(l,v.rightEdge.rightVertex.rightEdge,v.rightEdge.rightVertex.pos,c,v.rightEdge.rightVertex.rightEdge.rightVertex.pos,
v.rightEdge.rightVertex.pos,g,c,n),l;if(!d)return this._checkForSnappingCandidate(l,y.leftEdge.leftVertex.leftEdge,y.leftEdge.leftVertex.pos,c,y.leftEdge.leftVertex.leftEdge.leftVertex.pos,y.leftEdge.leftVertex.pos,g,c,n),l;u&&u.leftVertex.leftEdge&&(y=u.leftVertex.leftEdge,this._checkForSnappingCandidate(l,y,u.leftVertex.pos,c,y.leftVertex.pos,u.leftVertex.pos,g,c,n));d&&d.rightVertex.rightEdge&&(u=d.rightVertex.rightEdge,this._checkForSnappingCandidate(l,u,d.rightVertex.pos,c,u.rightVertex.pos,
d.rightVertex.pos,g,c,n));return l};h._checkForSnappingCandidate=function(c,g,l,d,y,f,n,u,v){this.edgeExceedsShortLineThreshold(g,n)&&(z.subtract(this._tmp,g.rightVertex.pos,g.leftVertex.pos),g=B.fromValues(this._tmp[1],-this._tmp[0]),l=z.dot(g,z.subtract(this._tmp,d,l))/z.squaredLength(g),d=n.coordinateHelper,u=d.fromXYZ(z.scaleAndAdd(B.create(),f,g,l),d.getZ(u,0)),F.squareDistance(v,F.anyMapPointToScreenPoint(u,d,n.elevationInfo,this.view))<this.squaredProximityTreshold(n.pointer)&&c.push(new P.RightAngleSnappingCandidate({coordinateHelper:d,
targetPoint:u,constraint:new J.RayConstraint(d,f,z.scaleAndAdd(d.createVector(),f,g,Math.sign(l))),previousVertex:y,otherVertex:f,otherVertexType:1})))};return w}(G.SnappingAlgorithm);e.RightAngleSnapper=G;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(e,k,b,z,B,G,J,F,P){G=function(H){function w(){return H.apply(this,arguments)||this}k._inheritsLoose(w,H);var h=w.prototype;h.snapNewVertex=function(c,g){const l=g.editGeometryOperations.data.components[0],d=[],y=l.vertices.length;if("polygon"!==g.editGeometryOperations.data.type||2>y)return d;this._processCandidateProposal(l.vertices[0].pos,l.vertices[y-1].pos,c,g,d);return d};h.snapExistingVertex=function(c,g){const l=[],d=b.unwrap(g.vertexHandle),y=d.component;if(2>y.edges.length||"polyline"===
g.editGeometryOperations.data.type&&(0===d.index||d.index===y.vertices.length-1))return l;this._processCandidateProposal(d.leftEdge.leftVertex.pos,d.rightEdge.rightVertex.pos,c,g,l);return l};h._processCandidateProposal=function(c,g,l,d,y){if(this.exceedsShortLineThreshold(c,g,d)){var f=z.lerp(B.create(),c,g,.5),n=.5*z.distance(c,g);n=P.projectPointToCircle(B.create(),l,f,n);f=d.coordinateHelper;n=f.fromXYZ(n,f.getZ(l,0));l=J.anyMapPointToScreenPoint(l,f,d.elevationInfo,this.view);J.squareDistance(l,
J.anyMapPointToScreenPoint(n,f,d.elevationInfo,this.view))<this.squaredProximityTreshold(d.pointer)&&y.push(new F.RightAngleTriangleSnappingCandidate({coordinateHelper:f,targetPoint:n,point1:c,point2:g}))}};return w}(G.SnappingAlgorithm);e.RightAngleTriangleSnapper=G;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(e,k,b,z,B,G,J,F){G=function(H){function w({coordinateHelper:h,targetPoint:c,point1:g,point2:l}){h=H.call(this,h,c,new B.PlanarCircleConstraint(h,b.lerp(P,g,l,.5),.5*b.distance(g,l)))||this;h.p1=g;h.p2=l;return h}k._inheritsLoose(w,H);k._createClass(w,[{key:"hints",get:function(){return[new J.LineSnappingHint(1,this.targetPoint,this.p1),new J.LineSnappingHint(1,this.targetPoint,this.p2),new F.RightAngleSnappingHint(this.p1,this.targetPoint,this.p2)]}}]);return w}(G.SnappingCandidate);const P=
z.create();e.RightAngleTriangleSnappingCandidate=G;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./SnappingCandidate","../hints/IntersectionSnappingHint"],function(e,k,b,z,B){z=function(G){function J(F,P,H,w){F=G.call(this,F,P,new b.IntersectionConstraint(F,P,H.constraint,w.constraint))||this;F.first=H;F.second=w;return F}
k._inheritsLoose(J,G);k._createClass(J,[{key:"hints",get:function(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new B.IntersectionSnappingHint(this.targetPoint)]}}]);return J}(z.SnappingCandidate);e.IntersectionSnappingCandidate=z;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../snappingUtils","./SnappingHint"],function(e,k,b,z){z=function(B){function G(J){var F=B.call(this)||this;F.intersectionPoint=J;return F}k._inheritsLoose(G,B);G.prototype.equals=function(J){return J instanceof G?b.objectEqual(this.intersectionPoint,J.intersectionPoint):!1};return G}(z.SnappingHint);e.IntersectionSnappingHint=z;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(e,k,b,z,B,G,J,F,P,H){e.OperationHandle=function(w){function h(g){g=w.call(this,g)||this;g.cancelled=!1;g.history={undo:[],redo:[]};g.type=null;return g}k._inheritsLoose(h,w);var c=h.prototype;c.addToHistory=function(g){this.history.redo=[];this.history.undo.push(g)};c.resetHistory=function(){this.history.redo=[];this.history.undo=[]};c.canUndo=function(){return 0<this.history.undo.length};c.canRedo=function(){return 0<this.history.redo.length};c.complete=function(){this.reset();this.onEnd();
this.emit("complete")};c.cancel=function(){this.cancelled=!0;this.complete()};c.reset=function(){this.activeComponent.reset()};c.refreshComponent=function(){const g=this.activeComponent;g&&("box"!==g.type&&"reshape"!==g.type&&"graphic-mover"!==g.type||g.refresh())};k._createClass(h,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw-2d":case "draw-3d":return this.activeComponent.geometryType;default:z.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(g){this._set("undo",()=>{this.canUndo()&&g()})}},{key:"redo",set:function(g){this._set("redo",()=>{this.canRedo()&&g()})}}]);return h}(B.EventedAccessor);b.__decorate([G.property()],e.OperationHandle.prototype,"activeComponent",void 0);b.__decorate([G.property()],e.OperationHandle.prototype,"cancelled",void 0);b.__decorate([G.property()],e.OperationHandle.prototype,
"history",void 0);b.__decorate([G.property()],e.OperationHandle.prototype,"tool",null);b.__decorate([G.property()],e.OperationHandle.prototype,"type",void 0);b.__decorate([G.property()],e.OperationHandle.prototype,"canUndo",null);b.__decorate([G.property()],e.OperationHandle.prototype,"canRedo",null);b.__decorate([G.property()],e.OperationHandle.prototype,"onEnd",void 0);b.__decorate([G.property()],e.OperationHandle.prototype,"undo",null);b.__decorate([G.property()],e.OperationHandle.prototype,"redo",
null);b.__decorate([G.property()],e.OperationHandle.prototype,"toggleTool",void 0);b.__decorate([G.property()],e.OperationHandle.prototype,"addToSelection",void 0);b.__decorate([G.property()],e.OperationHandle.prototype,"removeFromSelection",void 0);e.OperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.OperationHandle")],e.OperationHandle);e.CreateOperationHandle=function(w){function h(){return w.apply(this,arguments)||this}k._inheritsLoose(h,w);return h}(e.OperationHandle);b.__decorate([G.property()],
e.CreateOperationHandle.prototype,"activeComponent",void 0);e.CreateOperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.CreateOperationHandle")],e.CreateOperationHandle);e.UpdateOperationHandle=function(w){function h(c){return w.call(this,c)||this}k._inheritsLoose(h,w);return h}(e.OperationHandle);b.__decorate([G.property()],e.UpdateOperationHandle.prototype,"activeComponent",void 0);e.UpdateOperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.UpdateOperationHandle")],
e.UpdateOperationHandle);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/SelectionToolbar":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/handleUtils ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ../../core/Logger ./jsxFactory ./SelectionToolbar/SelectionToolbarViewModel".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y){const f={lassoTool:!0,rectangleTool:!0},n={createTool:"polygon",createOptions:{mode:"freehand"}},u={createTool:"rectangle"};J=function(v){function A(p,C){var K=v.call(this,p,C)||this;K._viewModelHandlesGroup=null;K.activeToolInfo=null;K.label=void 0;K.layers=[];K.messages=null;K.toolConfigs=[];K.view=null;K.viewModel=new y;K.visibleElements={...f};K._viewModelHandlesGroup=z.handlesGroup([K.viewModel.on("selection-change",L=>K.emit("selection-change",L)),
K.viewModel.on("complete",L=>{K._set("activeToolInfo",null);K.emit("complete",L)})]);return K}k._inheritsLoose(A,v);var q=A.prototype;q.destroy=function(){this._viewModelHandlesGroup=B.removeMaybe(this._viewModelHandlesGroup)};q.loadDependencies=function(){return new Promise((p,C)=>e(["../../chunks/calcite-action"],p,C))};q.castVisibleElements=function(p){return{...f,...p}};q.activate=function(p){this.cancel();switch(p){case "lasso":this._activateTool("lasso");case "rectangle":this._activateTool("rectangle");
default:this._activateTool(p)}};q.cancel=function(){this.viewModel.cancel();this._set("activeToolInfo",null)};q.render=function(){return d.tsx("div",{"aria-label":this.label,class:this.classes("esri-selection-toolbar","esri-widget")},d.tsx("div",{class:"esri-selection-toolbar__container"},this.renderDefaultTools(),this.renderCustomTools()))};q.renderDefaultTools=function(){var p;if("2d"===(null==(p=this.view)?void 0:p.type))return[this.renderRectangleTool(),this.renderLassoTool()]};q.renderCustomTools=
function(){if(this.toolConfigs&&this.toolConfigs.length)return this.toolConfigs.map(p=>{var C;return d.tsx("calcite-action",{active:(null==(C=this.activeToolInfo)?void 0:C.toolName)===p.toolName,bind:this,class:"esri-selection-toolbar__tool-button",icon:p.icon||"selection",label:p.toolName,onclick:()=>this._onCustomToolClick(p.toolName),scale:"s",text:p.toolName,title:p.toolName})})};q.renderLassoTool=function(){const {activeToolInfo:p,messages:C,visibleElements:K}=this;if(K.lassoTool)return d.tsx("calcite-action",
{active:"lasso"===(null==p?void 0:p.toolName),bind:this,icon:"lasso",label:C.selectByLasso,onclick:this._onLassoToolClick,scale:"s",text:C.selectByLasso,title:C.selectByLasso})};q.renderRectangleTool=function(){const {activeToolInfo:p,messages:C,visibleElements:K}=this;if(K.rectangleTool)return d.tsx("calcite-action",{active:"rectangle"===(null==p?void 0:p.toolName),bind:this,icon:"cursor-marquee",label:C.selectByRectangle,onclick:this._onRectangleToolClick,scale:"s",text:C.selectByRectangle,title:C.selectByRectangle})};
q._onCustomToolClick=function(p){this._toggleTool(p)};q._onLassoToolClick=function(){this._toggleTool("lasso")};q._onRectangleToolClick=function(){this._toggleTool("rectangle")};q._activateTool=function(p){var C=this._getToolOptions(p);C&&(C=this.viewModel.activate(C),this._set("activeToolInfo",{toolName:p,operation:C}))};q._toggleTool=function(p){if(this.activeToolInfo){const C=this.activeToolInfo.toolName;this.cancel();if(C===p)return}this._activateTool(p)};q._getToolOptions=function(p){if("lasso"===
p)return n;if("rectangle"===p)return u;const C=this.toolConfigs.find(D=>D.toolName===p);if(C){var {createTool:K,createOptions:L,selectionOptions:Q}=C;return{createTool:K,createOptions:L,selectionOptions:Q}}};return A}(h);b.__decorate([H.property({readOnly:!0})],J.prototype,"activeToolInfo",void 0);b.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],J.prototype,"label",void 0);b.__decorate([G.aliasOf("viewModel.layers")],J.prototype,"layers",void 0);b.__decorate([H.property(),
g.messageBundle("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],J.prototype,"messages",void 0);b.__decorate([H.property()],J.prototype,"toolConfigs",void 0);b.__decorate([G.aliasOf("viewModel.view")],J.prototype,"view",void 0);b.__decorate([H.property()],J.prototype,"viewModel",void 0);b.__decorate([H.property()],J.prototype,"visibleElements",void 0);b.__decorate([P.cast("visibleElements")],J.prototype,"castVisibleElements",null);return J=b.__decorate([w.subclass("esri.widgets.support.SelectionToolbar")],
J)})},"esri/widgets/support/SelectionToolbar/SelectionToolbarViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/handleUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../Selector2D".split(" "),function(e,k,b,z,B,G,J,F,P,H,w){b=function(h){function c(l){l=h.call(this,
l)||this;l._operationHandlesGroup=null;l.activeOperation=null;l.layers=null;l.selector=new w;return l}e._inheritsLoose(c,h);var g=c.prototype;g.destroy=function(){this._operationHandlesGroup=B.removeMaybe(this._operationHandlesGroup);this.selector.destroy()};g.cancel=function(){"active"===this.state&&(this.activeOperation.cancel(),this.activeOperation=null);this.selector.candidates=null};g.activate=function(l){const {state:d}=this;if("disabled"!==d)return"active"===d&&this.cancel(),this.selector.candidates=
this._getCandidates(),l=this.selector.draw(l),this._operationHandlesGroup=z.handlesGroup([l.once("complete",y=>this._onOperationComplete(y)),l.on("selection-change",y=>this._onOperationSelectionChange(y))]),this.activeOperation=l};g._getCandidates=function(){let l=[];this.layers.forEach(d=>{l=l.concat(...d.graphics.toArray())});return l};g._onOperationSelectionChange=function(l){this.emit("selection-change",l)};g._onOperationComplete=function(l){this._operationHandlesGroup=B.removeMaybe(this._operationHandlesGroup);
this.activeOperation=null;this.emit("complete",l)};e._createClass(c,[{key:"state",get:function(){var l,d;return this.activeOperation?"active":null!=(l=this.view)&&l.ready&&null!=(d=this.layers)&&d.length?"ready":"disabled"}},{key:"view",set:function(l){this.selector.view=l;this._set("view",l)}}]);return c}(b.EventedAccessor);k.__decorate([G.property()],b.prototype,"activeOperation",void 0);k.__decorate([G.property()],b.prototype,"layers",void 0);k.__decorate([G.property({readOnly:!0})],b.prototype,
"selector",void 0);k.__decorate([G.property({readOnly:!0})],b.prototype,"state",null);k.__decorate([G.property()],b.prototype,"view",null);return b=k.__decorate([H.subclass("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],b)})},"esri/widgets/support/Selector2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Selector2D/SelectionOperation2D ./Selector2D/selectorUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h){b=function(c){function g(d){d=c.call(this,d)||this;d._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0};d.candidates=null;d.options=null;d.view=null;return d}e._inheritsLoose(g,c);var l=g.prototype;l.draw=function(d){const {_defaultSelectionOptions:y,candidates:f,options:n,view:u}=this;return new w({candidates:f,options:{...d,selectionOptions:{...y,...n,...null==d?void 0:d.selectionOptions}},view:u})};l.selectionFrom=function(){var d=e._asyncToGenerator(function*(y,
f){const {_defaultSelectionOptions:n,candidates:u,options:v,view:A}=this,q=new z;yield h.updateSelection({selector:y,candidates:u,currentSelection:q,options:{...n,...v,...f},view:A});return q.toArray()});return function(y,f){return d.apply(this,arguments)}}();return g}(B.HandleOwnerMixin(b));k.__decorate([G.property()],b.prototype,"candidates",void 0);k.__decorate([G.property()],b.prototype,"options",void 0);k.__decorate([G.property({value:null})],b.prototype,"view",void 0);return b=k.__decorate([H.subclass("esri.widgets.support.Selector2D")],
b)})},"esri/widgets/support/Selector2D/SelectionOperation2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../symbols ../../../core/Collection ../../../core/Evented ../../../core/Handles ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../layers/GraphicsLayer ../../Sketch/SketchViewModel ./selectorUtils ../../../symbols/SimpleFillSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/SimpleMarkerSymbol".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y){b=function(f){function n({candidates:v,options:A,view:q}){var p=f.call(this)||this;p._activeOptions=null;p._dashedFillSymbol=new l({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}});p._dashedLineSymbol=new d({style:"dash",color:[12,207,255],width:2});p._defaultOptions={createTool:"rectangle",createOptions:null,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}};p._completed=!1;p._handles=new G;p._sketchViewModel=new c;p._sketchGraphicsLayer=
new h({listMode:"hide",internal:!0});p._transparentPointSymbol=new y({color:[0,0,0,0],outline:{style:"none",width:0}});p.candidates=null;p.geometry=null;p.options=null;p.selection=new z;p.view=null;p.candidates=v;p.options=A;p.view=q;const {_dashedFillSymbol:C,_dashedLineSymbol:K,_sketchViewModel:L,_sketchGraphicsLayer:Q,_transparentPointSymbol:D}=e._assertThisInitialized(p);L.set({layer:Q,view:p.view,activePointSymbol:D,activeLineSymbol:K,activeVertexSymbol:D,activeFillSymbol:C,pointSymbol:D,polygonSymbol:C,
polylineSymbol:K,vertexSymbol:D});p._handles.add([L.on("create",M=>p._onSketchEvent(M)),L.on(["undo","redo"],M=>p._onSketchEvent(M))]);return p}e._inheritsLoose(n,f);var u=n.prototype;u.initialize=function(){this._load()};u.destroy=function(){this._handles.destroy();this._handles=null};u.cancel=function(){this._sketchViewModel.cancel()};u._load=function(){var v=e._asyncToGenerator(function*(){yield this.view.whenReady();const {options:A}=this,{createTool:q,createOptions:p}=this._activeOptions={...this._defaultOptions,
...A};this._sketchViewModel.create(q,p)});return function(){return v.apply(this,arguments)}}();u._onSketchEvent=function(v){const A="create"===v.type?v.graphic:v.graphics[0];this._processSelectionGeometry((null==A?void 0:A.geometry)||null,"create"===v.type&&"complete"===v.state,"create"===v.type&&"cancel"===v.state)};u._processSelectionGeometry=function(v,A,q){this._set("geometry",v);if(A||q)this._completed=!0;if(q)this._onComplete([],!0);else{var {_activeOptions:p,candidates:C,selection:K,view:L}=
this;g.updateSelection({selector:v,candidates:C,currentSelection:K,options:p.selectionOptions,view:L}).then(({added:Q,removed:D})=>{A?this._onComplete(this.selection.toArray(),!1):(Q.length||D.length)&&this.emit("selection-change",{added:Q,removed:D,type:"selection-change"})})}};u._onComplete=function(v,A){this._handles.removeAll();this.notifyChange("state");this.emit("complete",{aborted:A,selection:v,type:"complete"})};e._createClass(n,[{key:"state",get:function(){const {_completed:v,_sketchViewModel:{state:A}}=
this;return v?"complete":"active"===A?"active":"disabled"}}]);return n}(B.EventedAccessor);k.__decorate([J.property()],b.prototype,"_completed",void 0);k.__decorate([J.property()],b.prototype,"candidates",void 0);k.__decorate([J.property({readOnly:!0})],b.prototype,"geometry",void 0);k.__decorate([J.property()],b.prototype,"options",void 0);k.__decorate([J.property({readOnly:!0})],b.prototype,"selection",void 0);k.__decorate([J.property({readOnly:!0})],b.prototype,"state",null);k.__decorate([J.property({value:null})],
b.prototype,"view",void 0);return b=k.__decorate([w.subclass("esri.widgets.support.Selector2D.SelectionOperation2D")],b)})},"esri/widgets/support/Selector2D/selectorUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers"],function(e,k,b){function z(){return B.apply(this,arguments)}function B(){B=b._asyncToGenerator(function*(){return new Promise((P,H)=>e(["../../../geometry/geometryEngineJSON"],P,H))});return B.apply(this,arguments)}function G(){return J.apply(this,
arguments)}function J(){J=b._asyncToGenerator(function*(){return z().then(({contains:P,intersects:H,overlaps:w,simplify:h})=>({contains:P,intersects:H,overlaps:w,simplify:h}))});return J.apply(this,arguments)}function F(){F=b._asyncToGenerator(function*(P){const {selector:H,candidates:w,currentSelection:h,options:c,view:g}=P;if(!(w&&w.length&&h&&g))return{added:[],removed:[]};const {overlaps:l,intersects:d,contains:y}=c,{spatialReference:f}=g;if(!H)return{added:[],removed:h.removeAll()};const n=yield G(),
u=[],v=[];w.forEach(A=>{var q=A.geometry;const p=l&&!!n.overlaps(f,H,q),C=d&&!!n.intersects(f,H,q);q=y&&!!n.contains(f,H,q);const K=h.includes(A);p||C||q?!K&&u.push(A):K&&v.push(A)});h.removeMany(v);h.addMany(u);return{added:u,removed:v}});return F.apply(this,arguments)}k.getGeometryEngineOperations=G;k.importGeometryEngine=z;k.updateSelection=function(P){return F.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/widgets/support/SnappingControls":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ../../core/Logger ./jsxFactory ./SnappingControls/SnappingControlsViewModel".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d){const y={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0};G=function(f){function n(v,A){A=f.call(this,(()=>{const {view:q,viewModel:p,snappingOptions:C,...K}=v;return K})(),A)||this;A.label=void 0;A.messages=null;A.messagesCommon=null;A.snappingOptions=null;A.view=null;A.visibleElements={...y};A._defaultViewModel=null;null!=v&&v.viewModel?A.viewModel=v.viewModel:(A._defaultViewModel=new d({snappingOptions:v.snappingOptions,
view:v.view}),A.viewModel=A._defaultViewModel);return A}k._inheritsLoose(n,f);var u=n.prototype;u.destroy=function(){this._defaultViewModel=z.destroyMaybe(this._defaultViewModel)};u.loadDependencies=function(){return Promise.all([new Promise((v,A)=>e(["../../chunks/calcite-action"],v,A)),new Promise((v,A)=>e(["../../chunks/calcite-block"],v,A)),new Promise((v,A)=>e(["../../chunks/calcite-icon"],v,A)),new Promise((v,A)=>e(["../../chunks/calcite-label"],v,A)),new Promise((v,A)=>e(["../../chunks/calcite-panel"],
v,A)),new Promise((v,A)=>e(["../../chunks/calcite-pick-list"],v,A)),new Promise((v,A)=>e(["../../chunks/calcite-pick-list-item"],v,A)),new Promise((v,A)=>e(["../../chunks/calcite-switch"],v,A))])};u.castVisibleElements=function(v){return{...y,...v}};u.render=function(){const {label:v,visibleElements:{header:A}}=this;return l.tsx("div",{"aria-label":v,class:this.classes("esri-snapping-controls","esri-widget")},l.tsx("div",{class:"esri-snapping-controls__container"},A?this.renderHeaderView():this.renderContent()))};
u.renderHeaderView=function(){return l.tsx("calcite-panel",{heading:this.label,class:"esri-snapping-controls__panel"},this.renderContent())};u.renderContent=function(){return[this.renderToggles(),this.renderLayerList()]};u.renderToggles=function(){return l.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",heading:"",open:!0},this.renderEnabledToggle(),l.tsx("div",{class:"esri-snapping-controls__nested-container"},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle()))};
u.renderEnabledToggle=function(){if(this.visibleElements.enabledToggle){var {messages:{enableSnapping:v},viewModel:{snappingOptions:{enabled:A,enabledToggled:q}}}=this;return l.tsx("calcite-label",{layout:"inline-space-between"},v,l.tsx("calcite-switch",{checked:A,disabled:q,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}};u.renderSelfEnabledToggle=function(){if(this.visibleElements.selfEnabledToggle){var {messages:{geometryGuides:v},viewModel:{snappingOptions:{enabled:A,selfEnabled:q,
enabledToggled:p}}}=this;return l.tsx("calcite-label",{layout:"inline-space-between"},v,l.tsx("calcite-switch",{checked:q,disabled:p||!A,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}};u.renderFeatureEnabledToggle=function(){if(this.visibleElements.featureEnabledToggle){var {messages:{featureToFeature:v},viewModel:{snappingOptions:{enabled:A,featureEnabled:q,enabledToggled:p}}}=this;return l.tsx("calcite-label",{layout:"inline-space-between"},v,l.tsx("calcite-switch",{checked:q,
disabled:p||!A,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}};u.renderLayerList=function(){if(this.visibleElements.layerList){var {messages:{snappingLayers:v,searchLayers:A}}=this;return l.tsx("calcite-block",{heading:v,open:!0,collapsible:!0},l.tsx("calcite-pick-list",{multiple:!0,bind:this,onCalciteListChange:this._layerListChange,filterEnabled:10<=this.viewModel.layerListViewModel.operationalItems.length,"filter-placeholder":A},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems)))}};
u.renderLayerListItemCollection=function(v){return v.map(A=>0<A.children.length?this.renderLayerListItemGroup(A):this.renderLayerListItem(A)).toArray()};u.renderLayerListItem=function(v){var A,{messages:{untitledLayer:q}}=this;q=v.title||q;const p=0<(null==(A=v.children)?void 0:A.length);return l.tsx("calcite-pick-list-item",{slot:p?"parent-item":null,key:`${this.id}-pick-list-item-${v.uid}`,label:q,value:v.layer.id,selected:v.enabled})};u.renderLayerListItemGroup=function(v){return l.tsx("calcite-pick-list-group",
{"group-title":v.title||this.messages.untitledLayer},[...this.renderLayerListItemCollection(v.children)])};u._enableSnappingSwitchChange=function(v){this.snappingOptions.enabled=v.target.checked};u._featureEnabledSwitchChange=function(v){this.snappingOptions.featureEnabled=v.target.checked};u._selfEnabledSwitchChange=function(v){this.snappingOptions.selfEnabled=v.target.checked};u._layerListChange=function(){var v=k._asyncToGenerator(function*(A){A=yield A.target.getSelectedItems();this.viewModel.updateEnabledFeatureSources([...A.keys()])});
return function(A){return v.apply(this,arguments)}}();k._createClass(n,[{key:"viewModel",set:function(v){if(v!==this._get("viewModel")){if(z.isNone(this._defaultViewModel)||this._defaultViewModel!==v)this._defaultViewModel=z.destroyMaybe(this._defaultViewModel);this._set("viewModel",v)}}}]);return n}(w);b.__decorate([P.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],G.prototype,"label",void 0);b.__decorate([P.property(),c.messageBundle("esri/widgets/support/SnappingControls/t9n/SnappingControls")],
G.prototype,"messages",void 0);b.__decorate([P.property(),c.messageBundle("esri/t9n/common")],G.prototype,"messagesCommon",void 0);b.__decorate([B.aliasOf("viewModel.snappingOptions")],G.prototype,"snappingOptions",void 0);b.__decorate([B.aliasOf("viewModel.view")],G.prototype,"view",void 0);b.__decorate([P.property()],G.prototype,"viewModel",null);b.__decorate([P.property()],G.prototype,"visibleElements",void 0);b.__decorate([F.cast("visibleElements")],G.prototype,"castVisibleElements",null);return G=
b.__decorate([H.subclass("esri.widgets.support.SnappingControls")],G)})},"esri/widgets/support/SnappingControls/SnappingControlsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/support/layerListUtils ./SnappingLayerListViewModel".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h){b=function(c){function g(d){d=c.call(this,d)||this;d.layerListViewModel=new h.SnappingLayerListViewModel;d.snappingOptions=null;d.view=null;return d}e._inheritsLoose(g,c);var l=g.prototype;l.initialize=function(){this.handles.add([B.init(this,"view",d=>{this.layerListViewModel.view=d}),B.init(this,"snappingOptions.featureSources",()=>{this.layerListViewModel.featureSnappingSources=this.snappingOptions.featureSources})])};l.updateEnabledFeatureSources=function(d){for(const y of this.snappingOptions.featureSources)w.canDisplayLayer(y.layer)&&
(y.enabled=d.includes(y.layer.id))};e._createClass(g,[{key:"state",get:function(){return this.get("snappingOptions")?"ready":"disabled"}}]);return g}(z.HandleOwnerMixin(b));k.__decorate([G.property({constructOnly:!0})],b.prototype,"layerListViewModel",void 0);k.__decorate([G.property({constructOnly:!0})],b.prototype,"snappingOptions",void 0);k.__decorate([G.property()],b.prototype,"state",null);k.__decorate([G.property({constructOnly:!0})],b.prototype,"view",void 0);return b=k.__decorate([H.subclass("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],
b)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(e){function k(F){if(F)return null!=F.listMode?F.listMode:void 0}function b(F){if(F)return null!=F.minScale?F.minScale:void 0}function z(F){if(F)return null!=F.maxScale?F.maxScale:void 0}function B(F){if(F){if(!("type"in F))return"sublayers";if(F.listMode!==J.hideChildren&&"wmts"!==F.type)switch(F.type){case "group":return"layers";case "analysis":return"analyses";default:return"sublayers"}}}function G(F,P){F&&
F.sort((H,w)=>{H=P.indexOf(H.uid);w=P.indexOf(w.uid);return H>w?-1:H<w?1:0})}const J={hide:"hide",hideChildren:"hide-children"};e.canDisplayLayer=function(F){return k(F)!==J.hide};e.canSortSublayers=function(F){F=F&&(F.get("layer.layer")||F.layer);if(!F)return!1;F=F.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof F?F:!0};e.findLayerListMode=k;e.findLayerMaxScale=z;e.findLayerMinScale=b;e.findLayerVisibilityMode=function(F){if(!F)return"inherited";var P=F.get("layer.capabilities.exportMap.supportsSublayerVisibility");
if("boolean"===typeof P)return P?"independent":"inherited";P=F.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof P?P?"independent":"inherited":null!=F.visibilityMode?F.visibilityMode:"independent"};e.findSelectedItem=function(F,P){var H;const w=null==(H=F.layer)?void 0:H.uid;return w&&P.find(h=>{var c;return(null==(c=h.layer)?void 0:c.uid)===w})};e.getItemLayers=function(F){return(F=null==F?void 0:F.layer)&&"group"===F.type?F.layers:null};e.getNormalizedChildLayerProperty=
B;e.isLayerOutsideScaleRange=function(F,P){if(!F||isNaN(P))return!1;var H=b(F);F=z(F);H=!isNaN(H)&&0<H&&P>H;P=!isNaN(F)&&0<F&&P<F;return H||P};e.sortChildLayersToIds=function(F,P){if(F=null==F?void 0:F.layer){var H=B(F);H&&(F=F.get(H),G(F,P))}};e.sortLayersToIds=G;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/SnappingControls/SnappingLayerListViewModel":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../views/interactive/snapping/FeatureSnappingLayerSource ../../LayerList/LayerListViewModel ./snappingLayerListUtils ./SnappingListItem".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c){e.SnappingLayerListViewModel=function(l){function d(){var f=l.apply(this,arguments)||this;f.featureSnappingSources=new z;return f}k._inheritsLoose(d,l);var y=d.prototype;y._compileList=function(){var f=this.get("view.map.layers");f&&(f=f.filter(h.isValidSnappingLayer),this._watchLayersListMode(f),(f=this._getViewableLayers(f))&&f.length?(this._createNewItems(f),this._removeItems(f),this._sortItems(f),this._beforeCallListItemsCreated()):this._removeAllItems())};
y._createListItem=function(f){const {view:n}=this,u=g(this.featureSnappingSources,f);f=new c.SnappingListItem({layer:f,view:n,featureSource:u});for(const v of f.children)v.featureSource=g(this.featureSnappingSources,v.layer);this._watchItemProperties(f);return f};k._createClass(d,[{key:"operationalItemsFlat",get:function(){return this.operationalItems.flatten(f=>f.children)}}]);return d}(w);b.__decorate([B.property()],e.SnappingLayerListViewModel.prototype,"featureSnappingSources",void 0);b.__decorate([B.property()],
e.SnappingLayerListViewModel.prototype,"operationalItems",void 0);e.SnappingLayerListViewModel=b.__decorate([P.subclass("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],e.SnappingLayerListViewModel);const g=(l,d)=>{if(!h.isValidSnappingLayerSource(d))return null;let y=l.find(f=>f.layer===d);y||(y=new H({layer:d,enabled:!1}),l.add(y));return y};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g){const l=b.ofType(c);b=function(d){function y(n){var u=d.call(this,n)||this;u._handles=new B;u.listItemCreatedFunction=null;u.operationalItems=new l;u.view=null;u._callListItemsCreatedDebounced=G.debounce(e._asyncToGenerator(function*(){return u._callListItemsCreated()}),300);return u}e._inheritsLoose(y,d);var f=y.prototype;f.initialize=function(){this._handles.add(J.init(this,["view","view.ready"],()=>this._viewHandles()),"view")};f.destroy=function(){this._handles.destroy();
this.view=this._handles=null;this.operationalItems.removeAll()};f.triggerAction=function(n,u){n&&!n.disabled&&this.emit("trigger-action",{action:n,item:u})};f.moveListItem=function(n,u,v,A){var q,p;const C=null==n?void 0:n.layer;if(C){var K=null==(q=this.view)?void 0:null==(p=q.map)?void 0:p.layers;q=u?g.getItemLayers(u):K;K=v?g.getItemLayers(v):K;q&&K&&({operationalItems:p}=this,u=(null==u?void 0:u.children)||p,p=(null==v?void 0:v.children)||p,A=K.length-A,n.parent=v||null,u.includes(n)&&u.remove(n),
q.includes(C)&&q.remove(C),p.includes(n)||p.add(n,A),K.includes(C)||K.add(C,A))}};f._createLayerViewHandles=function(n){const {_handles:u}=this;u.remove("layer-views");this._compileList();n&&u.add(n.on("change",()=>this._compileList()),"layer-views")};f._createMapLayerHandles=function(n){const {_handles:u}=this;u.remove("map-layers");this._compileList();n&&u.add(n.on("change",()=>this._compileList()),"map-layers")};f._watchItemProperties=function(n){this._handles.add([n.children.on("change",()=>{this._callListItemCreatedChildren(n.children)})],
`children-change-${n.uid}`)};f._callListItemCreatedChildren=function(n){n.forEach(u=>this._callListItemCreated(u))};f._callListItemCreated=function(n){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:n});this._callListItemCreatedChildren(n.children)};f._createListItem=function(n){const {view:u}=this;n=new c({layer:n,view:u});this._watchItemProperties(n);return n};f._removeAllItems=function(){const {_handles:n,operationalItems:u}=this;u.forEach(v=>{n.remove(`children-change-${v.uid}`)});
u.removeAll()};f._getViewableLayers=function(n){if(n)return n.filter(u=>"hide"!==g.findLayerListMode(u))};f._watchLayersListMode=function(n){const {_handles:u}=this;u.remove("layer-list-mode");n&&n.forEach(v=>{u.add(J.watch(v,"listMode",()=>this._compileList()),"layer-list-mode")})};f._compileList=function(){var n=this.get("view.map.layers");this._watchLayersListMode(n);(n=this._getViewableLayers(n))&&n.length?(this._createNewItems(n),this._removeItems(n),this._sortItems(n),this._beforeCallListItemsCreated()):
this._removeAllItems()};f._beforeCallListItemsCreated=function(){var n=e._asyncToGenerator(function*(){return this._callListItemsCreatedDebounced().catch(G.throwIfNotAbortError)});return function(){return n.apply(this,arguments)}}();f._callListItemsCreated=function(){var n=e._asyncToGenerator(function*(){var u;yield null==(u=this.view)?void 0:u.when();this.operationalItems.forEach(v=>this._callListItemCreated(v))});return function(){return n.apply(this,arguments)}}();f._createNewItems=function(n){const {operationalItems:u}=
this;n.forEach(v=>{u.find(A=>A.layer===v)||u.add(this._createListItem(v))})};f._removeItems=function(n){const {_handles:u,operationalItems:v}=this,A=[];v.forEach(q=>{q&&n&&n.find(p=>q.layer===p)||(u.remove(`children-change-${q.uid}`),A.push(q))});v.removeMany(A)};f._sortItems=function(n){const {operationalItems:u}=this;u.sort((v,A)=>{v=n.indexOf(v.layer);A=n.indexOf(A.layer);return v>A?-1:v<A?1:0})};f._viewHandles=function(){const {_handles:n,view:u}=this;n.remove(["map-layers","layer-views","view-layers"]);
this._compileList();u&&u.ready&&n.add([J.init(this,"view.map.allLayers",v=>this._createMapLayerHandles(v)),J.init(this,"view.allLayerViews",v=>this._createLayerViewHandles(v)),J.init(this,"listItemCreatedFunction",()=>this._compileList())],"view-layers")};e._createClass(y,[{key:"state",get:function(){const n=this.get("view");return this.get("view.ready")?"ready":n?"loading":"disabled"}}]);return y}(z.EventedAccessor);k.__decorate([F.property()],b.prototype,"listItemCreatedFunction",void 0);k.__decorate([F.property({type:l})],
b.prototype,"operationalItems",void 0);k.__decorate([F.property({readOnly:!0})],b.prototype,"state",null);k.__decorate([F.property()],b.prototype,"view",void 0);return b=k.__decorate([h.subclass("esri.widgets.LayerList.LayerListViewModel")],b)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n){var u;P=z.ofType({key:"type",defaultKeyValue:"button",base:g,typeMap:{button:l,toggle:y,slider:d}});const v=z.ofType(P);b=u=function(A){function q(C){C=A.call(this,C)||this;C.actionsSections=new v;C.actionsOpen=!1;C.children=new (z.ofType(u));C.childrenSortable=!0;C.error=null;C.layer=null;C.layerView=null;C.open=!1;C.panel=null;C.parent=null;C.sortable=!0;C.view=null;C.visible=null;return C}e._inheritsLoose(q,A);var p=q.prototype;p.initialize=function(){this.handles.add([J.init(this,
"layer",C=>this._watchLayerProperties(C)),J.init(this,"view",C=>this._updateChildren(C)),J.init(this,"panel",C=>this._setListItemOnPanel(C)),J.init(this,["layer","view"],()=>this._getLayerView())])};p.destroy=function(){this.view=null};p.castPanel=function(C){this.get("panel.open")&&!C.hasOwnProperty("open")&&(C.open=!0);return C?new f(C):null};p.clone=function(){return new u({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,
open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};p._setListItemOnPanel=function(C){C&&(C.listItem=this)};p._updateChildren=function(C){const K=this.children;K&&K.forEach(L=>L.view=C)};p._addChildren=function(C){this.handles.remove("child-list-mode");this.children.removeAll();if(C){C.forEach(L=>{this.handles.add(J.watch(L,"listMode",()=>this._addChildren(C)),"child-list-mode")});var K=C.filter(L=>"hide"!==n.findLayerListMode(L));this.children.addMany(this._makeChildren(K))}};
p._watchSublayerChanges=function(C){C&&this.handles.add(C.on("change",()=>{this._addChildren(C)}),"layer")};p._initializeChildLayers=function(C){this._addChildren(C);this._watchSublayerChanges(C)};p._makeChildren=function(C){return C.map(K=>n.canDisplayLayer(K)?new u({layer:K,parent:this,view:this.view}):null).reverse()};p._watchLayerProperties=function(C){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),C))if(this.handles.add(J.watch(C,"listMode",()=>this._watchLayerProperties(C)),
"layer"),"hide-children"===n.findLayerListMode(C))this.children.removeAll();else{var K=n.getNormalizedChildLayerProperty(C);K&&this.handles.add(J.init(C,K,()=>{C.hasOwnProperty(K)&&this._initializeChildLayers(C[K])}),"layer")}};p._getLayerView=function(){var C=e._asyncToGenerator(function*(){const {layer:K,view:L}=this;if(K&&L)try{const Q=yield L.whenLayerView(K);Q.layer===this.layer&&this._set("layerView",Q)}catch{}});return function(){return C.apply(this,arguments)}}();p._isLayerUpdating=function(C){return C&&
"loading"===C.loadStatus};e._createClass(q,[{key:"title",get:function(){const C=this.get("layer.layer");return(!C||C&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(C){void 0===C?this._clearOverride("title"):this._override("title",C)}},{key:"updating",get:function(){const C=this.layerView;return C?C.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!n.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},
{key:"visibilityMode",get:function(){return n.findLayerVisibilityMode(this.layer)}}]);return q}(G.IdentifiableMixin(B.HandleOwnerMixin(b)));k.__decorate([h.property({type:v})],b.prototype,"actionsSections",void 0);k.__decorate([h.property()],b.prototype,"actionsOpen",void 0);k.__decorate([h.property({type:z})],b.prototype,"children",void 0);k.__decorate([h.property()],b.prototype,"childrenSortable",void 0);k.__decorate([F.aliasOf("layer.loadError?")],b.prototype,"error",void 0);k.__decorate([h.property()],
b.prototype,"layer",void 0);k.__decorate([h.property({readOnly:!0})],b.prototype,"layerView",void 0);k.__decorate([h.property()],b.prototype,"open",void 0);k.__decorate([h.property({type:f})],b.prototype,"panel",void 0);k.__decorate([w.cast("panel")],b.prototype,"castPanel",null);k.__decorate([h.property()],b.prototype,"parent",void 0);k.__decorate([h.property()],b.prototype,"sortable",void 0);k.__decorate([h.property()],b.prototype,"title",null);k.__decorate([h.property({readOnly:!0})],b.prototype,
"updating",null);k.__decorate([h.property({value:null})],b.prototype,"view",void 0);k.__decorate([F.aliasOf("layer.visible")],b.prototype,"visible",void 0);k.__decorate([h.property({readOnly:!0})],b.prototype,"visibleAtCurrentScale",null);k.__decorate([h.property({readOnly:!0})],b.prototype,"visibilityMode",null);return b=u=k.__decorate([c.subclass("esri.widgets.LayerList.ListItem")],b)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),
function(e,k,b,z,B,G,J,F){var P;z=P=function(H){function w(h){h=H.call(this,h)||this;h.displayValueEnabled=!1;h.max=1;h.min=0;h.step=.1;h.type="slider";h.value=null;return h}e._inheritsLoose(w,H);w.prototype.clone=function(){return new P({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return w}(F);k.__decorate([b.property()],
z.prototype,"displayValueEnabled",void 0);k.__decorate([b.property()],z.prototype,"max",void 0);k.__decorate([b.property()],z.prototype,"min",void 0);k.__decorate([b.property()],z.prototype,"step",void 0);k.__decorate([b.property()],z.prototype,"value",void 0);return z=P=k.__decorate([J.subclass("esri.support.Action.ActionSlider")],z)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ../support/widget ../support/jsxFactory".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h,c,g){B=function(l){function d(f,n){f=l.call(this,f,n)||this;f._legend=null;f._handles=new z;f.content=null;f.image=null;f.listItem=null;f.open=!1;f.visible=!0;return f}k._inheritsLoose(d,l);var y=d.prototype;y.initialize=function(){this.own([G.init(this,"content",f=>this._createLegend(f))])};y.destroy=function(){const {_legend:f}=this;f&&f.destroy();this._legend=null};y.render=function(){return g.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};y._renderContent=
function(f){const {_legend:n,listItem:u}=this;return f?"legend"===f?u&&u.view&&u.layer&&n?g.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:n},n.render()):null:"string"===typeof f?g.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:f,innerHTML:f}):c.isWidget(f)?g.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:f},f.render()):
f instanceof HTMLElement?g.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:f,bind:f,afterCreate:this._attachToNode}):null:null};y._renderContents=function(){const {content:f}=this;return Array.isArray(f)?f.map(n=>this._renderContent(n)):this._renderContent(f)};y._getLegendOptions=function(f){if(f){var {layer:n,view:u}=f;if(n&&u)return{view:u,layerInfos:[{layer:n,title:""}]}}};y._createLegend=function(f){this._hasLegend(f)&&!this._legend&&
(new Promise((n,u)=>e(["../Legend"],v=>n(Object.freeze({__proto__:null,default:v})),u))).then(({default:n})=>{const {_handles:u,listItem:v}=this,A=new n(this._getLegendOptions(v));this._legend=A;this.notifyChange("className");this.notifyChange("title");n=G.init(this,["listItem.view","listItem.layer"],()=>this._updateLegend(A));u.add(n,"legends");this.scheduleRender()})};y._hasLegend=function(f){return"legend"===f?!0:Array.isArray(f)?f.some(n=>"legend"===n):!1};y._attachToNode=function(f){f.appendChild(this)};
y._updateLegend=function(f){const {listItem:n}=this;if(n){var {layer:u,view:v}=n;f.view=v;f.layerInfos=[{layer:u,title:null}];this.scheduleRender()}};y._getWidget=function(f){return"legend"===f?this._legend:c.isWidget(f)?f:null};y._getFirstWidget=function(){const {content:f}=this;if(Array.isArray(f)){let n=null;f.some(u=>{(u=this._getWidget(u))&&(n=u);return!!u});return n}return this._getWidget(f)};k._createClass(d,[{key:"className",get:function(){const {image:f}=this,n=this._getFirstWidget();return this._get("className")||
!f&&n?n.iconClass:""},set:function(f){void 0===f?this._clearOverride("className"):this._override("className",f)}},{key:"title",get:function(){const f=this._getFirstWidget();return this._get("title")||f?f.label:""},set:function(f){void 0===f?this._clearOverride("title"):this._override("title",f)}}]);return d}(B.IdentifiableMixin(h));b.__decorate([J.property()],B.prototype,"className",null);b.__decorate([J.property()],B.prototype,"content",void 0);b.__decorate([J.property()],B.prototype,"image",void 0);
b.__decorate([J.property()],B.prototype,"listItem",void 0);b.__decorate([J.property()],B.prototype,"title",null);b.__decorate([J.property()],B.prototype,"open",void 0);b.__decorate([J.property()],B.prototype,"visible",void 0);return B=b.__decorate([w.subclass("esri.widgets.LayerList.ListItemPanel")],B)})},"esri/widgets/support/SnappingControls/snappingLayerListUtils":function(){define(["exports","../../../core/maybe","../../LayerList/support/layerListUtils"],function(e,k,b){const z=J=>B(J)||G(J),
B=J=>{if(!("type"in J))return!1;switch(J.type){case "feature":case "geojson":case "csv":case "graphics":case "wfs":return!0;default:return!1}},G=J=>{const F=b.getNormalizedChildLayerProperty(J);if(J.hasOwnProperty(F)&&k.isSome(J[F]))for(const P of J[F])if(z(P))return!0;return!1};e.isValidSnappingLayer=z;e.isValidSnappingLayerGroup=G;e.isValidSnappingLayerSource=B;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/SnappingControls/SnappingListItem":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/ListItem ../../LayerList/support/layerListUtils ./snappingLayerListUtils".split(" "),
function(e,k,b,z,B,G,J,F,P,H,w,h){var c;e.SnappingListItem=c=function(g){function l(){var y=g.apply(this,arguments)||this;y.featureSource=null;return y}k._inheritsLoose(l,g);var d=l.prototype;d._initializeChildLayers=function(y){y=y.filter(h.isValidSnappingLayer);g.prototype._initializeChildLayers.call(this,y)};d._makeChildren=function(y){return y.map(f=>w.canDisplayLayer(f)?new c({layer:f,parent:this,view:this.view}):null).reverse()};k._createClass(l,[{key:"enabled",get:function(){return z.isSome(this.featureSource)?
this.featureSource.enabled:!1}}]);return l}(H);b.__decorate([B.property()],e.SnappingListItem.prototype,"children",void 0);b.__decorate([B.property()],e.SnappingListItem.prototype,"enabled",null);b.__decorate([B.property()],e.SnappingListItem.prototype,"featureSource",void 0);b.__decorate([B.property()],e.SnappingListItem.prototype,"parent",void 0);e.SnappingListItem=c=b.__decorate([P.subclass("esri.widgets.support.SnappingControls.SnappingListItem")],e.SnappingListItem);Object.defineProperty(e,"__esModule",
{value:!0})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/handleUtils ../core/maybe ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../views/interactive/snapping/SnappingOptions ./Widget ./Sketch/SketchViewModel ./support/SelectionToolbar ./support/SnappingControls ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(e,
k,b,z,B,G,J,F,P,H,w,h,c,g,l,d,y,f,n,u,v,A,q,p){const C={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0,settingsMenu:!0};z=function(K){function L(D,M){M=K.call(this,D,M)||this;M._activeCreateOptions=null;M._defaultViewModel=null;M._menuOpen=!1;M._selectionToolbar=null;M._selectionHandlesGroup=null;M._snappingControls=null;M._viewModelHandlesGroup=null;M.availableCreateTools=["point","polyline","polygon",
"rectangle","circle"];M.createGraphic=null;M.creationMode="continuous";M.defaultCreateOptions=null;M.defaultUpdateOptions=null;M.iconClass="esri-icon-edit";M.label=void 0;M.layer=null;M.layout="horizontal";M.messages=null;M.snappingOptions=new g;M.updateGraphics=new B;M.view=null;M.visibleElements={...C};M._activateCreateTool=M._activateCreateTool.bind(k._assertThisInitialized(M));null!=D&&D.viewModel||(M._defaultViewModel=new d,M.viewModel=M._defaultViewModel);return M}k._inheritsLoose(L,K);var Q=
L.prototype;Q.initialize=function(){const {layer:D,view:M}=this,N=new y({view:"2d"===(null==M?void 0:M.type)?M:null,layers:D?[D]:null});this._selectionHandlesGroup=G.handlesGroup([N.watch("activeToolInfo",O=>{O&&this.viewModel.cancel()}),N.on("complete",O=>this._onSelectionOperationComplete(O))]);this._selectionToolbar=N;this._setUpSnappingControls()};Q.loadDependencies=function(){return new Promise((D,M)=>e(["../chunks/calcite-action"],D,M))};Q.destroy=function(){this._selectionToolbar.destroy();
this._cleanupViewModel();this._selectionHandlesGroup=J.removeMaybe(this._selectionHandlesGroup);this._snappingControls=J.destroyMaybe(this._snappingControls)};Q.castVisibleElements=function(D){return{...C,...D,createTools:{...C.createTools,...null==D?void 0:D.createTools},selectionTools:{...C.selectionTools,...null==D?void 0:D.selectionTools}}};Q.create=function(D,M){this._activeCreateOptions=M||null;this.viewModel.create(D,M)};Q.update=function(D,M){return this.viewModel.update(D,M)};Q.complete=
function(){};Q.cancel=function(){this._selectionToolbar.cancel();this.viewModel.cancel()};Q.undo=function(){var D;this.viewModel.undo();null==(D=this.view)?void 0:D.focus()};Q.redo=function(){var D;this.viewModel.redo();null==(D=this.view)?void 0:D.focus()};Q.delete=function(){};Q.render=function(){const {label:D,layout:M,viewModel:{state:N}}=this;return q.tsx("div",{"aria-label":D,class:this.classes("esri-sketch","esri-widget",{["esri-disabled"]:"disabled"===N,["esri-sketch--vertical"]:"vertical"===
M})},q.tsx("div",{role:"toolbar",class:"esri-sketch__panel"},this.renderTopPanelContents()),q.tsx("div",{class:this.classes("esri-sketch__panel","esri-sketch__info-panel")},this.renderInfoPanelContents()))};Q.renderTopPanelContents=function(){const D=this.classes("esri-sketch__section","esri-sketch__tool-section"),{availableCreateTools:M,visibleElements:N}=this;return[q.tsx("div",{role:"menu",key:"selection-button-container",class:D},this.renderDefaultSelectionButton(),this.renderSelectionToolbar()),
M&&M.length?q.tsx("div",{role:"menu",class:D},this.renderDrawButtons()):null,N.undoRedoMenu?q.tsx("div",{role:"menu",key:"undo-redo-menu-button-container",class:D},this.renderUndoRedoMenuButtons()):null,N.settingsMenu?q.tsx("div",{key:"settings-menu-button-container",class:"esri-sketch__section"},this.renderSettingsMenuButton()):null]};Q.renderInfoPanelContents=function(){if(this._menuOpen)return this.renderSettingsMenu();if(this.updateGraphics.length)return[q.tsx("div",{class:this.classes("esri-sketch__section",
"esri-sketch__info-section","esri-sketch__info-count-section"),key:"feature-count-container"},this.renderFeatureCount()),q.tsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section"),key:"delete-button-container"},this.renderDeleteButton())]};Q.renderSettingsMenu=function(){const {settings:D}=this.messages;return[q.tsx("div",{role:"menu",class:"esri-sketch__menu-container",key:"settings-menu-container"},q.tsx("header",{class:"esri-sketch__menu-header",key:"settings-menu-header"},
q.tsx("span",{class:"esri-sketch__menu-title"},D)),this.renderSnappingControls())]};Q.renderSnappingControls=function(){if(J.isSome(this._snappingControls))return this._snappingControls.render()};Q.renderFeatureCount=function(){const {layout:D,messages:M,updateGraphics:{length:N}}=this,O=p.substitute(1===N?M.featureCount:M.featuresCount,{count:N});return q.tsx("div",{class:"esri-sketch__feature-count-badge","aria-label":O},q.tsx("span",{class:"esri-sketch__feature-count-number"},"vertical"===D?N:
O))};Q.renderDeleteButton=function(){const D=this.messages.deleteFeature;return q.tsx("calcite-action",{bind:this,icon:"trash",label:D,onclick:this.delete,scale:"s",text:D,title:D})};Q.renderDefaultSelectionButton=function(){if(this.viewModel.updateOnGraphicClick){var D=this.messages.selectFeature;return q.tsx("calcite-action",{active:"ready"===this.state,bind:this,icon:"cursor",label:D,onclick:this._activateDefaultSelectTool,scale:"s",text:D,title:D})}};Q.renderSelectionToolbar=function(){var D;
if("2d"===(null==(D=this.view)?void 0:D.type))return D=this.visibleElements.selectionTools,this._selectionToolbar.visibleElements={lassoTool:!!D["lasso-selection"],rectangleTool:!!D["rectangle-selection"]},this._selectionToolbar.render()};Q.renderDrawButtons=function(){const D=this.visibleElements.createTools;return this.availableCreateTools.map(M=>{if("point"===M&&D.point)return this.renderPointButton();if("polyline"===M&&D.polyline)return this.renderPolylineButton();if("polygon"===M&&D.polygon)return this.renderPolygonButton();
if("rectangle"===M&&D.rectangle)return this.renderRectangleButton();if("circle"===M&&D.circle)return this.renderCircleButton()})};Q.renderPointButton=function(){const D=this.messages.drawPoint;return q.tsx("calcite-action",{active:"point"===this.activeTool,bind:this,icon:"pin",label:D,onclick:()=>this._activateCreateTool("point"),scale:"s",text:D,title:D})};Q.renderPolygonButton=function(){const D=this.messages.drawPolygon;return q.tsx("calcite-action",{active:"polygon"===this.activeTool,bind:this,
icon:"polygon",label:D,onclick:()=>this._activateCreateTool("polygon"),scale:"s",text:D,title:D})};Q.renderPolylineButton=function(){const D=this.messages.drawPolyline;return q.tsx("calcite-action",{active:"polyline"===this.activeTool,bind:this,icon:"line",label:D,onclick:()=>this._activateCreateTool("polyline"),scale:"s",text:D,title:D})};Q.renderCircleButton=function(){const D=this.messages.drawCircle;return q.tsx("calcite-action",{active:"circle"===this.activeTool,bind:this,icon:"circle",label:D,
onclick:()=>this._activateCreateTool("circle"),scale:"s",text:D,title:D})};Q.renderRectangleButton=function(){const D=this.messages.drawRectangle;return q.tsx("calcite-action",{active:"rectangle"===this.activeTool,bind:this,icon:"rectangle",label:D,onclick:()=>this._activateCreateTool("rectangle"),scale:"s",text:D,title:D})};Q.renderUndoRedoMenuButtons=function(){return[this.renderUndoButton(),this.renderRedoButton()]};Q.renderUndoButton=function(){const D=this.messages.undo;return q.tsx("calcite-action",
{disabled:!this.viewModel.canUndo(),bind:this,icon:n.isRTL(this.container)?"redo":"undo",label:D,onclick:this.undo,scale:"s",text:D,title:D})};Q.renderRedoButton=function(){const D=this.messages.redo;return q.tsx("calcite-action",{disabled:!this.viewModel.canRedo(),bind:this,icon:n.isRTL(this.container)?"undo":"redo",label:D,onclick:this.redo,scale:"s",text:D,title:D})};Q.renderSettingsMenuButton=function(){const D=this.messages.settings;return q.tsx("calcite-action",{active:this._menuOpen,bind:this,
icon:"gear",label:D,onclick:this._toggleMenu,scale:"s",text:D,title:D})};Q._activateCreateTool=function(D){this.activeTool===D?this.cancel():(this._selectionToolbar.cancel(),this.create(D))};Q._onCreateOperation=function(D){if("complete"===D.state){var {creationMode:M}=this,{type:N}=D;if("create"===N){const {tool:O,graphic:Y}=D;D=this._activeCreateOptions;this._activeCreateOptions=null;"continuous"===M?this.create(O,D):"update"===M&&this.update([Y])}}};Q._toggleMenu=function(){this._menuOpen=!this._menuOpen;
this.scheduleRender()};Q._onSelectionOperationComplete=function(D){const {viewModel:{defaultUpdateOptions:M}}=this,{selection:N}=D;!D.aborted&&N.length&&(D=M.tool,this.update(N,{...M,tool:1<N.length&&"reshape"===D?"transform":D}));this.notifyChange("state")};Q._activateDefaultSelectTool=function(){var D;this.cancel();null==(D=this.view)?void 0:D.focus()};Q._cleanupViewModel=function(){this._defaultViewModel=J.destroyMaybe(this._defaultViewModel);this._viewModelHandlesGroup=J.removeMaybe(this._viewModelHandlesGroup)};
Q._setUpSnappingControls=function(){const {snappingOptions:D,view:M}=this;this._snappingControls=J.destroyMaybe(this._snappingControls);D&&M&&(this._snappingControls=new f({snappingOptions:D,view:M,visibleElements:{header:!1}}))};k._createClass(L,[{key:"activeTool",get:function(){const D=this._selectionToolbar.activeToolInfo;if(D)switch(D.toolName){case "lasso":return"lasso-selection";case "rectangle":return"rectangle-selection";case "default":return"custom-selection"}return this.viewModel.activeTool}},
{key:"state",get:function(){return this._selectionToolbar.activeToolInfo?"active":this.viewModel.state}},{key:"viewModel",set:function(D){D!==this._get("viewModel")&&((J.isNone(this._defaultViewModel)||this._defaultViewModel!==D)&&this._cleanupViewModel(),this._set("viewModel",D),this.viewModel&&(this._viewModelHandlesGroup=G.handlesGroup([this.viewModel.on("create",M=>{this.scheduleRender();this._onCreateOperation(M)}),this.viewModel.on("update",()=>this.scheduleRender()),this.viewModel.on("delete",
M=>this.emit("delete",M)),this.viewModel.on("undo",()=>this.scheduleRender()),this.viewModel.on("redo",()=>this.scheduleRender()),this.viewModel.watch("layer",M=>{this._selectionToolbar.layers=M?[M]:null}),this.viewModel.watch("view",M=>{this._selectionToolbar.view="2d"===(null==M?void 0:M.type)?M:null;this._setUpSnappingControls()}),this.viewModel.watch("state",()=>this.notifyChange("state"))])))}}]);return L}(l);b.__decorate([h.property()],z.prototype,"activeTool",null);b.__decorate([h.property({cast:K=>
{if(!K||!K.length)return null;const L=new Set(["point","polyline","polygon","rectangle","circle"]);return K.filter(Q=>L.has(Q))}})],z.prototype,"availableCreateTools",void 0);b.__decorate([F.aliasOf("viewModel.createGraphic")],z.prototype,"createGraphic",void 0);b.__decorate([h.property()],z.prototype,"creationMode",void 0);b.__decorate([F.aliasOf("viewModel.defaultCreateOptions")],z.prototype,"defaultCreateOptions",void 0);b.__decorate([F.aliasOf("viewModel.defaultUpdateOptions")],z.prototype,"defaultUpdateOptions",
void 0);b.__decorate([h.property()],z.prototype,"iconClass",void 0);b.__decorate([h.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],z.prototype,"label",void 0);b.__decorate([F.aliasOf("viewModel.layer")],z.prototype,"layer",void 0);b.__decorate([h.property({type:["horizontal","vertical"]})],z.prototype,"layout",void 0);b.__decorate([h.property(),u.messageBundle("esri/widgets/Sketch/t9n/Sketch")],z.prototype,"messages",void 0);b.__decorate([F.aliasOf("viewModel.snappingOptions")],
z.prototype,"snappingOptions",void 0);b.__decorate([h.property()],z.prototype,"state",null);b.__decorate([F.aliasOf("viewModel.updateGraphics")],z.prototype,"updateGraphics",void 0);b.__decorate([F.aliasOf("viewModel.view")],z.prototype,"view",void 0);b.__decorate([h.property(),A.vmEvent(["create","update","undo","redo"])],z.prototype,"viewModel",null);b.__decorate([h.property()],z.prototype,"visibleElements",void 0);b.__decorate([w.cast("visibleElements")],z.prototype,"castVisibleElements",null);
b.__decorate([F.aliasOf("viewModel.complete")],z.prototype,"complete",null);b.__decorate([F.aliasOf("viewModel.delete")],z.prototype,"delete",null);return z=b.__decorate([c.subclass("esri.widgets.Sketch")],z)});