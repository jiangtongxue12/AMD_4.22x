// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("require ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../kernel ../../../request ../../../symbols ../../../core/Accessor ../../../core/Collection ../../../core/Handles ../../../core/jsonMap ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/screenUtils ../../../core/urlUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../layers/effects/EffectView ../../../layers/effects/jsonUtils ../../../layers/support/ExportImageParameters ../../../layers/support/fieldUtils ../../../renderers/support/jsonUtils ../../../renderers/support/rendererConversion ../../../renderers/visualVariables/support/SizeVariableLegendOptions ../../../symbols/support/cimSymbolUtils ../../../symbols/support/renderUtils ../../../symbols/support/symbolUtils ../../../symbols/support/utils ./clusterUtils ./colorRampUtils ./heatmapRampUtils ./relationshipRampUtils ./sizeRampUtils ./utils ../../smartMapping/support/utils ../../../symbols/SimpleMarkerSymbol ../../../symbols/SimpleFillSymbol".split(" "),
function(V,v,z,W,ja,X,x,ka,la,ma,na,oa,H,F,pa,qa,C,A,Pa,Qa,Ra,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,D,Ba,Ca,L,Da,Y,P,Q,Ea,Z,aa){function I(q){return"esri.renderers.SimpleRenderer"===q.declaredClass}function J(q){return"esri.renderers.ClassBreaksRenderer"===q.declaredClass}function R(q){return"esri.renderers.UniqueValueRenderer"===q.declaredClass}function ba(q){return"esri.renderers.HeatmapRenderer"===q.declaredClass}function S(q){return"esri.renderers.PointCloudClassBreaksRenderer"===q.declaredClass}function T(q){return"esri.renderers.PointCloudStretchRenderer"===
q.declaredClass}function U(q){return"esri.renderers.PointCloudUniqueValueRenderer"===q.declaredClass}function ca(q){return"esri.renderers.DotDensityRenderer"===q.declaredClass}function da(q){return"esri.layers.BuildingSceneLayer"===q.declaredClass}function Fa(q){q="authoringInfo"in q&&(null==q?void 0:q.authoringInfo);return"univariate-color-size"===(null==q?void 0:q.type)}function Ga(q){q="authoringInfo"in q&&(null==q?void 0:q.authoringInfo);return"univariate-color-size"===(null==q?void 0:q.type)&&
"above-and-below"===(null==q?void 0:q.univariateTheme)}const E=oa.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),M=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Ha=new na.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),ea={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,
3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},N=new Z({size:6,outline:{color:[128,128,128,.5],width:.5}}),Ia=new aa({style:"solid"}),Ja=new Z({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let K={};x=function(q){function O(b){b=q.call(this,b)||this;b._handles=new ma;b._hasColorRamp=!1;b._hasOpacityRamp=!1;b._hasSizeRamp=!1;b._webStyleSymbolCache=new Map;b._dotDensityUrlCache=new Map;b._scaleDrivenSizeVariable=null;b._hasClusterSizeVariable=!1;b.children=
new la;b.layerView=null;b.layer=null;b.legendElements=[];b.parent=null;b.hideLayersNotInCurrentView=!1;b.keepCacheOnDestroy=!1;b.respectLayerVisibility=!0;b.sublayerIds=[];b.title=null;b.view=null;return b}v._inheritsLoose(O,q);var l=O.prototype;l.initialize=function(){const b=()=>this.notifyChange("ready");this._handles.add([C.on(this,"children","change",a=>{const {added:c,removed:d}=a,e=this._handles;c.forEach(f=>{const g=`activeLayerInfo-ready-watcher-${f.layer.uid}`;e.add(C.init(f,"ready",b),
g)});d.forEach(f=>e.remove(f.layer.uid));b()})]);this.keepCacheOnDestroy||(K={})};l.destroy=function(){this._handles.destroy();this._scaleDrivenSizeVariable=this._dotDensityUrlCache=this._webStyleSymbolCache=this._handles=null;this.keepCacheOnDestroy||(K=null)};l.buildLegendElementsForFeatureCollections=function(){var b=v._asyncToGenerator(function*(a){if(this.hideLayersNotInCurrentView&&!(yield this._isLayerInCurrentView()))this.legendElements=[],this.notifyChange("ready");else{a=Array.from(a,c=>
{if("esri.layers.FeatureLayer"===c.declaredClass)return this._getRendererLegendElements(c.renderer,{title:c.title});if(c.featureSet&&c.featureSet.features.length){var d=c.layerDefinition,e=d&&d.drawingInfo;e=e&&wa.fromJSON(e.renderer);d=Ha.read(d.geometryType);return e?this._getRendererLegendElements(e,{title:c.name,geometryType:d}):(E.warn("drawingInfo not available!"),null)}return null});try{const c=[];yield F.eachAlways(a).then(d=>{d.forEach(({value:e})=>e&&c.push(...e))});this.legendElements=
c;this.notifyChange("ready")}catch(c){E.warn("error while building legend for layer!",c)}}});return function(a){return b.apply(this,arguments)}}();l.buildLegendElementsForRenderer=function(){var b=v._asyncToGenerator(function*(a){try{this.legendElements=(this.hideLayersNotInCurrentView?yield this._isLayerInCurrentView():1)?yield this._getRendererLegendElements(a):[],this.notifyChange("ready")}catch(c){E.warn("error while building legend for layer!",c)}});return function(a){return b.apply(this,arguments)}}();
l.buildLegendElementsForTools=function(){var b=v._asyncToGenerator(function*(){var a=this;const c=this.layer;if("esri.layers.VoxelLayer"===c.declaredClass)this._constructLegendElementsForVoxellayer();else if("esri.layers.WMTSLayer"===c.declaredClass)this._constructLegendElementsForWMTSlayer();else if("esri.layers.WMSLayer"===c.declaredClass)yield this._constructLegendElementsForWMSSublayers();else if(da(c))yield this._constructLegendElementsForBuildingSceneLayer();else if("esri.layers.MapImageLayer"===
c.declaredClass||"esri.layers.TileLayer"===c.declaredClass||da(c))yield this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");var d="default";if("esri.layers.ImageryLayer"===c.declaredClass){var e,f;d=(null==c?void 0:null==(e=c.renderingRule)?void 0:e.functionName)||"default";e=null!=(f=c.bandIds)&&f.length?c.bandIds.join(""):"###";d=d+"_"+e}yield this._getLegendLayers(`${c.uid}-${d}`).then(function(){var g=v._asyncToGenerator(function*(h){a.legendElements=
[];a.notifyChange("ready");h=h.map(function(){var n=v._asyncToGenerator(function*(r){if("esri.layers.ImageryLayer"===c.declaredClass||"esri.layers.ImageryTileLayer"===c.declaredClass){const y=c.watch(["renderingRule","bandIds"],()=>F.debounce(v._asyncToGenerator(function*(){K["default"]=null;c.renderer?yield a.buildLegendElementsForRenderer(c.renderer):yield a.buildLegendElementsForTools()}))());a._handles.add(y,"imageryLayers-watcher")}(r=a._generateSymbolTableElementForLegendLayer(r))&&r.infos.length&&
("esri.layers.ImageryLayer"===c.declaredClass&&(r.title=c.title),a.legendElements.push(r));a.notifyChange("ready")});return function(r){return n.apply(this,arguments)}}());yield F.eachAlways(h)});return function(h){return g.apply(this,arguments)}}()).catch(g=>{E.warn("Request to server for legend has failed!",g)})}});return function(){return b.apply(this,arguments)}}();l._isLayerInCurrentView=function(){var b=v._asyncToGenerator(function*(){const a=this.layer,c=this.layerView,d=c&&"createQuery"in
c&&"queryFeatureCount"in c;if(!(d||c&&"createQuery"in a&&"queryFeatureCount"in a))return!0;yield C.whenFalseOnce(c,"updating");const e=d?"createQuery"in c&&c.createQuery():"createQuery"in a&&a.createQuery();e.geometry=this.view.extent;return 0!==(d?"queryFeatureCount"in c&&(yield c.queryFeatureCount(e)):"queryFeatureCount"in a&&(yield a.queryFeatureCount(e)))});return function(){return b.apply(this,arguments)}}();l._getParentLayerOpacity=function(b){let a=1;const c=b.parent;c&&"uid"in c&&(a=this._getParentLayerOpacity(c));
return b.opacity*a};l._isGroupActive=function(){const b=this.children;return b.length?b.some(a=>a.ready):!1};l._isScaleDrivenSizeVariable=function(b){if(b&&"size"!==b.type)return!1;const a=b.minSize,c=b.maxSize;return"object"===typeof a&&a?this._isScaleDrivenSizeVariable(a):"object"===typeof c&&c?this._isScaleDrivenSizeVariable(c):!!b.expression||M.test(b.valueExpression)};l._isLayerScaleDriven=function(b){if("minScale"in b&&0<b.minScale||"maxScale"in b&&0<b.maxScale)return!0;if("sublayers"in b&&
b.sublayers)return b.sublayers.some(c=>this._isLayerScaleDriven(c));const a=b.parent;if(!1===b.loaded&&a&&"esri.layers.MapImageLayer"===a.declaredClass&&"source"in b&&b.source&&"map-layer"===b.source.type)for(const c of a.sourceJSON.layers)if(c.id===b.source.mapLayerId&&(0<c.minScale||0<c.maxScale))return!0;return!1};l._constructLegendElementsForVoxellayer=function(){var b=v._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("voxel-style-watcher");var a=this.layer;this._handles.add(C.watch(a,
"style",()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");const c=H.unwrap(a.getVariableStyle(null)),d=[];if(c){var e;if(null!=(e=c.uniqueValues)&&e.length){const g=[];c.uniqueValues.forEach(h=>{h.enabled&&g.push({label:h.label||`${h.value}`,value:h.value,symbol:new aa({color:h.color,outline:null})})});g.length&&d.push({type:"symbol-table",title:c.label,infos:g})}else if(c.transferFunction){const {colorStops:g,stretchRange:h}=c.transferFunction;e=g.toArray().reverse();const n=
h.map((y,k)=>`${0===k?Q.SPECIAL_CHARS_LESS_THAN:Q.SPECIAL_CHARS_GREATER_THAN} ${Ea.formatNumberLabel(y)}`).reverse(),r=e.map(y=>({color:y.color,value:null,label:null}));r[0].label=n[0];r[r.length-1].label=n[1];d.push({type:"color-ramp",title:c.label,infos:r,preview:D.renderColorRampPreviewHTML(e.map(y=>y.color))})}}const f=a.opacity;a=d.reduce((g,h)=>g.concat(this._getAllInfos(h)),[]).filter(g=>!(null==g||!g.symbol)).map(g=>this._getSymbolPreview(g,f));yield F.eachAlways(a);this.legendElements=d;
this.notifyChange("ready")});return function(){return b.apply(this,arguments)}}();l._constructLegendElementsForWMTSlayer=function(){this.legendElements=[];this._handles.remove("wmts-activeLayer-watcher");const b=this.layer.activeLayer;this._handles.add(C.watch(this.layer,"activeLayer",()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");if(b.styleId&&b.styles){let a=null;b.styles.some(c=>b.styleId===c.id?(a=c.legendUrl,!0):!1);a&&(this.legendElements=[{type:"symbol-table",
title:b.title,infos:[{src:a,opacity:this.opacity}]}])}this.notifyChange("ready")};l._constructLegendElementsForWMSSublayers=function(){var b=v._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("wms-sublayers-watcher");const a=this.layer;let c=null;if(a.customParameters||a.customLayerParameters)c={...a.customParameters,...a.customLayerParameters};this._handles.add(C.watch(this.layer,"sublayers",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");this.legendElements=
yield this._generateLegendElementsForWMSSublayers(a.sublayers,c);this.notifyChange("ready")});return function(){return b.apply(this,arguments)}}();l._generateLegendElementsForWMSSublayers=function(){var b=v._asyncToGenerator(function*(a,c){const d=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");a=a.toArray();for(const e of a)a=e.watch(["title","visible","legendEnabled"],()=>this._constructLegendElementsForWMSSublayers()),this._handles.add(a,
"wms-sublayers-watcher"),(!this.respectLayerVisibility||e.visible&&e.legendEnabled)&&(a=yield this._generateSymbolTableElementForWMSSublayer(e,c))&&a.infos.length&&d.unshift(a);return d});return function(a,c){return b.apply(this,arguments)}}();l._generateSymbolTableElementForWMSSublayer=function(){var b=v._asyncToGenerator(function*(a,c){return!a.legendUrl&&a.sublayers?(c=(yield this._generateLegendElementsForWMSSublayers(a.sublayers,c)).filter(d=>d),{type:"symbol-table",title:a.title,infos:c}):this._generateSymbolTableElementForLegendUrl(a,
c)});return function(a,c){return b.apply(this,arguments)}}();l._generateSymbolTableElementForLegendUrl=function(){var b=v._asyncToGenerator(function*(a,c){var d;let e=a.legendUrl;if(e){var f={type:"symbol-table",title:a.title||a.name||a.id&&a.id+"",infos:[]};c&&(e=qa.addQueryParameters(e,c));c=null;a=null==(d=a.layer)?void 0:d.opacity;try{if(c=(yield X(e,{responseType:"image"})).data)c.style.opacity=a}catch{}f.infos.push({src:e,preview:c,opacity:a});return f}});return function(a,c){return b.apply(this,
arguments)}}();l._getLegendLayers=function(b,a){const c=K&&K[b];return c?Promise.resolve(c):this._legendRequest(a).then(d=>{d=d.layers;return K[b]=d})};l._legendRequest=function(b){var a=this.layer;b={f:"json",dynamicLayers:b};if("esri.layers.ImageryLayer"===a.declaredClass){var c=a.exportImageServiceParameters.renderingRule;c&&(b.renderingRule=JSON.stringify(c.toJSON()));a.bandIds&&(b.bandIds=a.bandIds.join());if(a.raster||a.viewId||a.customParameters){const {raster:d,viewId:e,customParameters:f}=
a;b={raster:d,viewId:e,...b,...f}}}c=a.url.replace(/(\/)+$/,"");"version"in a&&10.01<=a.version?(a=c.indexOf("?"),c=-1<a?c.substring(0,a)+"/legend"+c.substring(a):c+"/legend"):(a=c.toLowerCase().indexOf("/rest/"),a=c.substring(0,a)+c.substring(a+5,c.length),c="https://utility.arcgis.com/sharing/tools/legend?soapUrl\x3d"+encodeURI(a)+"\x26returnbytes\x3dtrue");return X(c,{query:b}).then(d=>d.data)};l._constructLegendElementsForBuildingSceneLayer=function(){var b=v._asyncToGenerator(function*(){this.legendElements=
[];this._handles.remove("sublayers-watcher");const a=this.layer;this._handles.add(C.watch(a,"sublayers",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForBuildingSublayers(a.sublayers,this.opacity),this.notifyChange("ready")}catch(c){E.warn("Request to server for legend has failed!",c)}});return function(){return b.apply(this,arguments)}}();l._generateLegendElementsForBuildingSublayers=function(){var b=v._asyncToGenerator(function*(a,
c){let d=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");a=a.toArray();for(const f of a)if(a=f.watch(["renderer","opacity","title","visible"],()=>this._constructLegendElementsForBuildingSceneLayer()),this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||f.visible){a=f&&null!=f.opacity?f.opacity:null;var e=null!=a?a*c:c;"building-group"===f.type?(a={type:"symbol-table",title:f.title,infos:[]},e=yield this._generateLegendElementsForBuildingSublayers(f.sublayers,
e),a.infos.push(...e),d=[a,...d]):f.renderer&&(d=[...yield this._getRendererLegendElements(f.renderer,{title:f.title,opacity:e,sublayer:f}),...d])}return d.filter(f=>!!f&&("infos"in f?0<f.infos.length:!0))});return function(a,c){return b.apply(this,arguments)}}();l._constructLegendElementsForSublayers=function(){var b=v._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("sublayers-watcher");const a=this.layer;this._handles.add(C.watch(a,"sublayers",()=>this._constructLegendElementsForSublayers),
"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForSublayers(a.sublayers,this.opacity),this.notifyChange("ready")}catch(c){E.warn("Request to server for legend has failed!",c)}});return function(){return b.apply(this,arguments)}}();l._generateLegendElementsForSublayers=function(){var b=v._asyncToGenerator(function*(a,c,d){const e=this.layer;let f=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");a=a.toArray();!d&&
this.sublayerIds&&this.sublayerIds.length&&(a=this.sublayerIds.map(g=>e.findSublayerById(g)).filter(Boolean));for(const g of a)if(a=g.watch("renderer, opacity, title, visible, legendEnabled",()=>this._constructLegendElementsForSublayers()),this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||g.visible&&g.legendEnabled&&this._isSublayerInScale(g))a=g&&null!=g.opacity?g.opacity:null,a=null!=a?a*c:c,g.renderer&&!g.sublayers&&2<g.originIdOf("renderer")?(yield g.load(),f=[...yield this._getRendererLegendElements(g.renderer,
{title:g.title,opacity:a,sublayer:g}),...f]):(a=yield this._generateSymbolTableElementForSublayer(g,a,d))&&f.unshift(a);return f.filter(g=>!!g&&("infos"in g?0<g.infos.length:!0))});return function(a,c,d){return b.apply(this,arguments)}}();l._generateSymbolTableElementForSublayer=function(){var b=v._asyncToGenerator(function*(a,c,d){if(!d){d=new Map;var e=this.layer,f=a.source;let g=null;if(f&&("map-layer"!==f.type||f.mapLayerId!==a.id||f.gdbVersion&&f.gdbVersion!==("gdbVersion"in e&&e.gdbVersion))||
2<a.originIdOf("renderer")||2<a.originIdOf("labelingInfo")||2<a.originIdOf("labelsVisible"))f=new ua.ExportImageParameters({layer:this.layer}),g=f.hasDynamicLayers?f.dynamicLayers:null,f.destroy();(yield this._getLegendLayers(g||`${e.uid}-default`,g)).forEach(h=>d.set(h.layerId,h))}e=d.get(a.id);return!e&&a.sublayers?(c=yield this._generateLegendElementsForSublayers(a.sublayers,c,d),{type:"symbol-table",title:a.title,infos:c}):this._generateSymbolTableElementForLegendLayer(e,a,c)});return function(a,
c,d){return b.apply(this,arguments)}}();l._generateSymbolTableElementForLegendLayer=function(b,a,c){var d;if(!b||!b.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(b,a))return null;var e=null==a?void 0:a.renderer;let f=(null==a?void 0:a.title)||b.layerName;e&&(!a||2<(null==a?void 0:a.originIdOf("renderer")))&&(e=(null==a?void 0:a.title)||this._getRendererTitle(e,a))&&(f&&"string"!==typeof e&&"title"in e&&(e.title=f),f=e);const g={type:"symbol-table",title:f,legendType:b.legendType?
b.legendType:null,infos:[]},h=a?this._sanitizeLegendForSublayer(b.legend.slice(),a):b.legend;0<(null==(d=b.legendGroups)?void 0:d.length)?b.legendGroups.forEach(n=>{var r;const y={type:"symbol-table",title:n.heading,legendType:b.legendType?b.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(h.filter(k=>k.groupId===n.id),b.layerId,c)};0<(null==(r=y.infos)?void 0:r.length)&&g.infos.push(y)}):g.infos=this._generateSymbolTableElementInfosForLegendLayer(h,b.layerId,c);return 0<
g.infos.length?g:null};l._generateSymbolTableElementInfosForLegendLayer=function(b,a,c){return b.map(d=>{let e=d.url;if(d.imageData&&0<d.imageData.length)e=`data:image/png;base64,${d.imageData}`;else if(0!==e.indexOf("http"))e=ja.addTokenParameter(`${this.layer.url}/${a}/images/${e}`);else return null;return{label:d.label,src:e,opacity:null==c?this.opacity:c,width:d.width,height:d.height}}).filter(d=>!!d)};l._isSublayerInScale=function(b){const a=b.minScale||0;b=b.maxScale||0;return 0<a&&a<this.scale||
b>this.scale?!1:!0};l._isLegendLayerInScale=function(b,a){a=a||this.layer;let c=null,d=null,e=!0;!a.minScale&&0!==a.minScale||!a.maxScale&&0!==a.maxScale?(0===b.minScale&&a.tileInfo&&(c=a.tileInfo.lods[0].scale),0===b.maxScale&&a.tileInfo&&(d=a.tileInfo.lods[a.tileInfo.lods.length-1].scale)):(c=Math.min(a.minScale,b.minScale)||a.minScale||b.minScale,d=Math.max(a.maxScale,b.maxScale));if(0<c&&c<this.scale||d>this.scale)e=!1;return e};l._sanitizeLegendForSublayer=function(b,a){if("version"in this.layer&&
10.1>this.layer.version||0===b.length)return b;a=a.renderer;let c=null,d=null;b.some(e=>e.values)&&b.some((e,f)=>{e.values||(c=f,d=e,d.label||(d.label="others"));return null!=d});a?"unique-value"===a.type?d&&(b.splice(c,1),b.push(d)):"class-breaks"===a.type&&(d&&b.splice(c,1),b.reverse(),d&&b.push(d)):d&&(b.splice(c,1),b.push(d));return b};l._getRendererLegendElements=function(){var b=v._asyncToGenerator(function*(a,c={}){var d=this.view;d=I(a)||J(a)||R(a)||ba(a)||ca(a)?"2d"===d.type||xa.isSupportedRenderer3D(a):
"raster-stretch"===a.type||"raster-colormap"===a.type||"raster-shaded-relief"===a.type||S(a)||T(a)||U(a)||"vector-field"===a.type;return d?S(a)||T(a)||U(a)||"esri.renderers.PointCloudRGBRenderer"===a.declaredClass?this._constructPointCloudRendererLegendElements(a,c):ca(a)?this._constructDotDensityRendererLegendElements(a):this._constructRendererLegendElements(a,c):(E.warn(`Renderer of type '${a.type}' not supported!`),[])});return function(a){return b.apply(this,arguments)}}();l._getPointCloudRendererTitle=
function(b){return b.legendOptions&&b.legendOptions.title||b.field};l._constructPointCloudRendererLegendElements=function(b,a={}){a=a.title;const c=[];let d=null;var e=null;if(S(b))d={type:"symbol-table",title:a||this._getPointCloudRendererTitle(b),infos:[]},b.colorClassBreakInfos.forEach(f=>{d.infos.unshift({label:f.label||f.minValue+" - "+f.maxValue,value:[f.minValue,f.maxValue],symbol:this._getAppliedCloneSymbol(N,f.color)})});else if(T(b)){e=b.stops;let f=null;if(e.length&&(1===e.length&&(f=e[0].color),
!f)){const g=e[0].value,h=e[e.length-1].value;null!=g&&null!=h&&(f=L.getColorFromPointCloudStops(g+(h-g)/2,e))}d={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(N,f||N.color)}]};e=L.getRampStopsForPointCloud(b.stops);e={type:"color-ramp",title:a||this._getPointCloudRendererTitle(b),infos:e,preview:D.renderColorRampPreviewHTML(e.map(g=>g.color))}}else U(b)&&(d={type:"symbol-table",title:a||this._getPointCloudRendererTitle(b),infos:[]},b.colorUniqueValueInfos.forEach(f=>
{d.infos.push({label:f.label||f.values.join(", "),value:f.values.join(", "),symbol:this._getAppliedCloneSymbol(N,f.color)})}));d&&d.infos.length&&c.push(d);e&&e.infos.length&&c.push(e);a=c.reduce((f,g)=>f.concat(g.infos),[]).filter(f=>!!f.symbol).map(f=>this._getSymbolPreview(f,this.opacity,{symbolConfig:{applyColorModulation:!!b.colorModulation}}));return F.eachAlways(a).then(()=>c)};l._getElementInfoForDotDensity=function(b,a){const {backgroundColor:c,outline:d,dotSize:e}=b;var f=this.effectList;
f=null==f?void 0:f.effects.map(h=>h.toJSON());f=ta.effectFunctionsFromJSON(f);f=e+"-"+a+"-"+c+"-"+(d&&JSON.stringify(d.toJSON()))+"-"+f;const g=this._dotDensityUrlCache;b=g.has(f)?g.get(f):D.renderDotDensityPreviewHTML(b,a);g.set(f,b);a=Aa.renderSymbol([[{shape:{type:"image",x:0,y:0,width:b.width,height:b.height,src:b.src},fill:null,stroke:null,offset:[0,0]}]],[b.width,b.height],{effectView:this.effectList});return{opacity:1,src:b.src,preview:a,width:b.width,height:b.height}};l._constructDotDensityRendererLegendElements=
function(b){const a=b.calculateDotValue(this.view.scale),c={type:"symbol-table",title:{value:a&&Math.round(a),unit:b.legendOptions&&b.legendOptions.unit||""},infos:[]};b.attributes.forEach(d=>{const e=this._getElementInfoForDotDensity(b,d.color);e.label=d.label||d.valueExpressionTitle||d.field;c.infos.push(e)});return Promise.resolve([c])};l._constructRendererLegendElements=function(){var b=v._asyncToGenerator(function*(a,c={}){const {title:d,sublayer:e}=c,f=e||this.layer;a=yield this._loadRenderer(a);
this._hasSizeRamp=this._hasOpacityRamp=this._hasColorRamp=!1;this._scaleDrivenSizeVariable=null;const g=(yield this._getVisualVariableLegendElements(a,f))||[],h={type:"symbol-table",title:d||this._getRendererTitle(a,f),infos:[]};let n=null,r=!1;const y=new Set;if(Fa(a)){var k=d,m=Ga(a)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",u=g.findIndex(p=>"color-ramp"===p.type);u=-1!==u?g.splice(u,1)[0]:null;var t=g.findIndex(p=>"size-ramp"===p.type);t=-1!==t?g.splice(t,1)[0]:null;var w=
[];u&&(k=u.title,w.push(u));t&&(k=t.title,w.push(t));0<w.length&&g.push({type:m,title:k,infos:w})}else if(ba(a))k=Da.getHeatmapRampStops(a),g.push({type:"heatmap-ramp",title:d,infos:k,preview:D.renderColorRampPreviewHTML(k.map(p=>p.color),{effectList:this.effectList})});else if(R(a)){if((m=a&&a.authoringInfo)&&"relationship"===m.type){const {focus:p,numClasses:B,field1:fa,field2:ha}=m;if(B&&fa&&ha){u=[fa,ha];m=Y.getRotationAngleForFocus(p)||0;for(k of u){const {field:Ka,normalizationField:ia,label:La}=
k;u=La||{field:this._getFieldAlias(Ka,f),normField:ia&&this._getFieldAlias(ia,f)};t=Ja.clone();t.angle=m;h.infos.push({label:u,symbol:t});y.add(t);m+=90}k=Y.getRelationshipRampElement({focus:p,numClasses:B,infos:a.uniqueValueInfos});g.unshift(k)}}else{const p=a.field;a.uniqueValueInfos.forEach(B=>{B.symbol&&h.infos.push({label:B.label||this._getDomainName(p,B.value,f)||B.value,value:B.value,symbol:B.symbol})})}a.defaultSymbol&&(h.infos.push({label:a.defaultLabel||"others",symbol:a.defaultSymbol}),
r=!0)}else if(J(a))n=this._isUnclassedRenderer(a),n&&this._hasSizeRamp||(a.classBreakInfos.forEach(p=>{p.symbol&&h.infos.unshift({label:p.label||(n?null:p.minValue+" - "+p.maxValue),value:[p.minValue,p.maxValue],symbol:p.symbol})}),n&&(h.title=null),this._updateInfosforClassedSizeRenderer(a,h.infos)),a.defaultSymbol&&!n&&(h.infos.push({label:a.defaultLabel||"others",symbol:a.defaultSymbol}),r=!0);else if("raster-stretch"===a.type)if("esri.layers.ImageryTileLayer"===this.layer.declaredClass||"esri.layers.WCSLayer"===
this.layer.declaredClass)k=this._constructTileImageryStretchRendererElements(a),"stretch-ramp"===k.type?g.push(k):h.infos=k;else{k=this.layer;a.statistics&&a.statistics.length&&(m=null!=a.statistics[0].min?a.statistics[0].min:a.statistics[0][0],u=null!=a.statistics[0].max?a.statistics[0].max:a.statistics[0][1]);t=[];t=H.unwrap(k.renderingRule?yield k.generateRasterInfo(k.renderingRule):k.serviceRasterInfo);const p=t.keyProperties.BandProperties;w=ea[k.rasterInfo.pixelType.toLowerCase()];1===t.bandCount?
(m=null!=m?m:t.statistics?t.statistics[k.bandIds[0]].min:w[0],u=null!=u?u:t.statistics?t.statistics[k.bandIds[0]].max:w[1],m||u?g.push(this._getStretchLegendElements(a,{min:m,max:u})):this._getServerSideLegend()):k.bandIds&&1===k.bandIds.length?(m=null!=m?m:t.statistics?t.statistics[k.bandIds[0]].min:w[0],u=null!=u?u:t.statistics?t.statistics[k.bandIds[0]].max:w[1],m||u?g.push(this._getStretchLegendElements(a,{min:m,max:u})):this._getServerSideLegend()):3<=t.bandCount?p&&p.length>=t.bandCount?k.bandIds&&
3===k.bandIds.length?(t=k.bandIds.map(B=>p[B].BandName),h.infos=this._createSymbolTableElementMultiBand(t)):"lerc"===k.format?(t=[0,1,2].map(B=>p[B].BandName),h.infos=this._createSymbolTableElementMultiBand(t)):this._getServerSideLegend():"lerc"===k.format?(t=["band1","band2","band3"],h.infos=this._createSymbolTableElementMultiBand(t)):this._getServerSideLegend():this._getServerSideLegend()}else if("raster-colormap"===a.type)a.colormapInfos.forEach(p=>{h.infos.push({label:p.label,value:p.value,symbol:this._getAppliedCloneSymbol(Ia,
p.color)})});else if(I(a)){k=a.symbol;switch(c.geometryType){case "point":k="pointSymbol"in f&&f.pointSymbol;break;case "polyline":k="lineSymbol"in f&&f.lineSymbol;break;case "polygon":k="polygonSymbol"in f&&f.polygonSymbol}a.symbol&&!this._hasSizeRamp&&h.infos.push({label:a.label,symbol:k})}else"vector-field"===a.type?(a.outputUnit&&(this.title="("+a.toJSON().outputUnit+")"),h.title=a.attributeField,k=a.getClassBreakInfos(),null!=k&&k.length?k.forEach(p=>{h.infos.push({label:p.minValue+" - "+p.maxValue,
symbol:p.symbol})}):h.infos.push({label:a.attributeField,symbol:a.getDefaultSymbol()})):"raster-shaded-relief"===a.type&&g.push(this._getStretchLegendElements(a,{min:0,max:255}));const G=a.defaultSymbol;!G||r||I(a)||n&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||g.push({type:"symbol-table",infos:[{label:a.defaultLabel||"others",symbol:G}]});h.infos.length&&g.unshift(h);const Ma=null==c.opacity?this.opacity:c.opacity,Na=this._isTallSymbol("visualVariables"in a&&a.visualVariables),
Oa="esri.layers.ImageryLayer"===this.layer.declaredClass||"esri.layers.ImageryTileLayer"===this.layer.declaredClass;c=g.reduce((p,B)=>p.concat(this._getAllInfos(B)),[]).filter(p=>!(null==p||!p.symbol)).map(p=>this._getSymbolPreview(p,Ma,{isDefault:p.symbol===G,applyScaleDrivenSize:!y.has(p.symbol),symbolConfig:{isTall:Na,isSquareFill:Oa},effectList:y.has(p.symbol)?null:this.effectList}));a=null;yield F.eachAlways(c);return g});return function(a){return b.apply(this,arguments)}}();l._getServerSideLegend=
function(){setTimeout(()=>this.buildLegendElementsForTools(),0)};l._getAllInfos=function(b){const a=null==b?void 0:b.infos;return a?a.reduce((c,d)=>c.concat(this._getAllInfos(d)),[]):[b]};l._constructTileImageryStretchRendererElements=function(b){function a(r){var y;const k=(null!=e&&null!=(y=e.bandIds)&&y.length?e.bandIds:Array.from(Array(Math.min(f.bandCount,3)).keys())).map(m=>r&&r[m]&&r[m].BandName||"band"+(m+1));3>k.length?k.push(k[1]):3<k.length&&k.splice(3);return k}var c,d;const e=this.layer,
f=e.rasterInfo,g=f.bandCount||b.statistics.length;var h,n=[];n=f.keyProperties&&f.keyProperties.BandProperties;(h=null!=b&&null!=(c=b.statistics)&&c.length?b.statistics:null==f?void 0:f.statistics)?(c=void 0!==h[0].min?h[0].min:h[0][0],h=h[0].max||h[0][1]):(h=ea[e.rasterInfo.pixelType.toLowerCase()],c=h[0],h=h[1]);e.hasStandardTime()&&(c=e.getStandardTimeValue(c),h=e.getStandardTimeValue(h));if(1===f.bandCount||1===(null==(d=e.bandIds)?void 0:d.length))return this._getStretchLegendElements(b,{min:c,
max:h});n=n&&n.length>=g?a(n):a();return this._createSymbolTableElementMultiBand(n)};l._getStretchLegendElements=function(b,a){b=L.getStrectchRampStops(b.colorRamp,a);return{type:"stretch-ramp",title:"",infos:b,preview:D.renderColorRampPreviewHTML(b.map(c=>c.color))}};l._createSymbolTableElementMultiBand=function(b){const a=[],c=["red","green","blue"];b.forEach((d,e)=>{a.push({label:{colorName:c[e],bandName:d},src:Q.RGB_IMG_SOURCE[e],opacity:1})});return a};l._updateInfosforClassedSizeRenderer=function(b,
a){const c=b.authoringInfo&&"class-breaks-size"===b.authoringInfo.type,d=b.classBreakInfos.some(e=>Ba.isVolumetricSymbol(e.symbol));if(c&&d){const e=P.REAL_WORLD_MAX_SIZE;b=b.classBreakInfos.length;const f=(e-P.REAL_WORLD_MIN_SIZE)/(1<b?b-1:b);a.forEach((g,h)=>{g.size=e-f*h})}};l._isTallSymbol=function(b){let a=!1,c=!1;if(b)for(let d=0;d<b.length&&(!a||!c);d++){const e=b[d];"size"===e.type&&("height"===e.axis&&(a=!0),"width-and-depth"===e.axis&&(c=!0))}return a&&c};l._getSymbolPreview=function(){var b=
v._asyncToGenerator(function*(a,c,d){var e=null!=d&&d.isDefault||null!=a.size||!this._hasSizeRamp?a.size:pa.px2pt(22);this._scaleDrivenSizeVariable&&null!=d&&d.applyScaleDrivenSize&&({getSize:e}=yield new Promise((f,g)=>V(["../../../renderers/visualVariables/support/visualVariableUtils"],f,g)),e=e(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===a.symbol.type?a.symbol.style:null}));return D.renderPreviewHTML(a.symbol,{size:e,opacity:c,scale:!1,symbolConfig:null==
d?void 0:d.symbolConfig,effectView:null==d?void 0:d.effectList}).then(f=>{a.preview=f;return a}).catch(()=>{a.preview=null;return a})});return function(a,c,d){return b.apply(this,arguments)}}();l._loadRenderer=function(){var b=v._asyncToGenerator(function*(a){var c,d;const e=[];var f=this.layer;a=a.clone();this._hasClusterSizeVariable=!1;const g="visualVariables"in a&&(null==(c=a.visualVariables)?void 0:c.some(n=>"size"===n.type&&"outline"!==n.target&&!M.test(n.valueExpression)));if(a&&"visualVariables"in
a&&!g&&"featureReduction"in f&&"cluster"===(null==(d=f.featureReduction)?void 0:d.type)&&(c=H.unwrap(Ca.getClusterSizeVariable(this.layerView._effectiveRenderer,this.view)))){f=f.featureReduction;if("clusterMinSize"in f&&"clusterMaxSize"in f){const {clusterMinSize:n,clusterMaxSize:r}=f;c.legendOptions=new ya({showLegend:n!==r})}a.visualVariables=(a.visualVariables||[]).concat([c]);this._hasClusterSizeVariable=!0}const h=yield this._getMedianColor(a);if(J(a)||R(a))f=(a.classBreakInfos||a.uniqueValueInfos).map(n=>
this._fetchSymbol(n.symbol,h).then(r=>{n.symbol=r}).catch(()=>{n.symbol=null})),Array.prototype.push.apply(e,f);e.push(this._fetchSymbol(a.symbol||a.defaultSymbol,a.defaultSymbol?null:h).then(n=>{this._applySymbolToRenderer(a,n,I(a))}).catch(()=>{this._applySymbolToRenderer(a,null,I(a))}));return F.eachAlways(e).then(()=>a)});return function(a){return b.apply(this,arguments)}}();l._applySymbolToRenderer=function(b,a,c){c?b.symbol=a:b.defaultSymbol=a};l._getMedianColor=function(){var b=v._asyncToGenerator(function*(a){if(!("visualVariables"in
a&&a.visualVariables))return null;a=a.visualVariables.find(e=>"color"===e.type);if(!a)return null;var c=null,d=null;if(a.stops){if(1===a.stops.length)return a.stops[0].color;c=a.stops[0].value;d=a.stops[a.stops.length-1].value}c+=(d-c)/2;({getColor:d}=yield new Promise((e,f)=>V(["../../../renderers/visualVariables/support/visualVariableUtils"],e,f)));return d(a,c)});return function(a){return b.apply(this,arguments)}}();l._fetchSymbol=function(b,a){if(!b)return Promise.reject();if("web-style"===b.type){var c=
b.portal;c=b.name+"-"+b.styleName+"-"+b.styleUrl+"-"+(c&&c.url)+"-"+(c&&c.user&&c.user.username);const d=this._webStyleSymbolCache;d.has(c)||("2d"===this.view.type?d.set(c,b.fetchCIMSymbol()):d.set(c,b.fetchSymbol()));return d.get(c).then(e=>this._getAppliedCloneSymbol(e,a)).catch(()=>{E.warn("Fetching web-style failed!");return Promise.reject()})}return Promise.resolve(this._getAppliedCloneSymbol(b,a))};l._getAppliedCloneSymbol=function(b,a){if(!b||!a)return b;b=b.clone();const c=a&&a.toRgba();-1<
b.type.indexOf("3d")?this._applyColorTo3dSymbol(b,c):"cim"===b.type?za.applyCIMSymbolColor(b,a):b.color&&(b.color=new W(c||b.color));return b};l._applyColorTo3dSymbol=function(b,a){a&&b.symbolLayers.forEach(c=>{c&&(c.material||(c.material={}),c.material.color=new W(a))})};l._getVisualVariableLegendElements=function(){var b=v._asyncToGenerator(function*(a,c){var d=this;if(!("visualVariables"in a&&a.visualVariables)||"vector-field"===a.type)return null;var e=a.visualVariables,f=[];const g=[],h=[];for(const k of e)"color"===
k.type?f.push(k):"size"===k.type?g.push(k):"opacity"===k.type&&h.push(k);e=[...f,...g,...h];let n;if(0===f.length&&J(a)&&a.classBreakInfos&&1===a.classBreakInfos.length)var r=(r=a.classBreakInfos[0])&&r.symbol;0===f.length&&I(a)&&(r=a.symbol);r&&(-1<r.type.indexOf("3d")?(f=r.symbolLayers.getItemAt(0),"water"===f.type?H.isSome(f.color)&&(n=f.color):H.isSome(f.material)&&H.isSome(f.material.color)&&(n=f.material.color)):r.url||(n=r.color));const y=this.effectList;return(yield Promise.all(e.map(function(){var k=
v._asyncToGenerator(function*(m){if(!m.legendOptions||!1!==m.legendOptions.showLegend){const t=d._getRampTitle(m,c);let w=null;var u="getField"in c&&c.getField&&c.getField(m.field);u=u&&va.isDateField(u);"color"===m.type?(m=yield L.getRampStops(m,null,u),w={type:"color-ramp",title:t,infos:m,preview:D.renderColorRampPreviewHTML(m.map(G=>G.color),{effectList:y})},d._hasColorRamp||(d._hasColorRamp=!(null==w.infos||!w.infos.length))):"size"===m.type&&"outline"!==m.target?M.test(m.valueExpression)?d._hasClusterSizeVariable||
(d._scaleDrivenSizeVariable=m):(w={type:"size-ramp",title:d._hasClusterSizeVariable?d._getClusterTitle(m):t,infos:yield P.getRampStops(a,m,yield d._getMedianColor(a),d.scale,d.view.type,u)},d._hasSizeRamp||(d._hasSizeRamp=!(null==w.infos||!w.infos.length))):"opacity"===m.type&&(m=yield L.getRampStops(m,n,u),w={type:"opacity-ramp",title:t,infos:m,preview:D.renderColorRampPreviewHTML(m.map(G=>G.color),{effectList:y})},d._hasOpacityRamp||(d._hasOpacityRamp=!(null==w.infos||!w.infos.length)));return w&&
w.infos?w:null}});return function(m){return k.apply(this,arguments)}}()))).filter(k=>!!k)});return function(a,c){return b.apply(this,arguments)}}();l._getDomainName=function(b,a,c){return b&&"function"!==typeof b?(c=(b="getField"in c&&c.getField&&c.getField(b))&&"getFieldDomain"in c&&c.getFieldDomain?c.getFieldDomain(b.name):null)&&"coded-value"===c.type?c.getName(a):null:null};l._getClusterTitle=function(b){var a=this.layer;b=b.field;if("featureReduction"in a&&a.featureReduction&&"cluster"===a.featureReduction.type&&
(a=a.featureReduction,a=(a="popupTemplate"in a&&a.popupTemplate)&&a.fieldInfos))for(const c of a)if(c.fieldName===b)return"cluster_count"===b?c.label||{showCount:!0}:c.label;return{showCount:!0}};l._getRampTitle=function(b,a){let c=b.field,d=b.normalizationField,e=!1,f=!1,g=!1;var h=null;c="function"===typeof c?null:c;d="function"===typeof d?null:d;h=b.legendOptions&&b.legendOptions.title;if(null==h)if(b.valueExpressionTitle)h=b.valueExpressionTitle;else{if("renderer"in a&&a.renderer&&"authoringInfo"in
a.renderer&&a.renderer.authoringInfo&&a.renderer.authoringInfo.visualVariables)for(b=a.renderer.authoringInfo.visualVariables,h=0;h<b.length;h++){const n=b[h];if("color"===n.type){if("ratio"===n.style){e=!0;break}if("percent"===n.style){f=!0;break}if("percent-of-total"===n.style){g=!0;break}}}h={field:c&&this._getFieldAlias(c,a),normField:d&&this._getFieldAlias(d,a),ratio:e,ratioPercent:f,ratioPercentTotal:g}}return h};l._getRendererTitle=function(b,a){if(b.legendOptions&&b.legendOptions.title)return b.legendOptions.title;
if(b.valueExpressionTitle)return b.valueExpressionTitle;let c=b.field,d=null,e=null;J(b)&&(d=b.normalizationField,e="percent-of-total"===b.normalizationType);c="function"===typeof c?null:c;d="function"===typeof d?null:d;b=null;if(c||d)b={field:c&&this._getFieldAlias(c,a),normField:d&&this._getFieldAlias(d,a),normByPct:e};return b};l._getFieldAlias=function(b,a){var c="popupTemplate"in a&&a.popupTemplate;c=c&&c.fieldInfos;let d=null;c&&c.some(f=>b===f.fieldName?(d=f,!0):!1);c=null;"getField"in a&&
a.getField?c=a.getField(b):"fieldsIndex"in a&&a.fieldsIndex&&(c=a.fieldsIndex.get(b));a=d||c;let e=null;a&&(e=d&&d.label||c&&c.alias||"name"in a&&a.name||"fieldName"in a&&a.fieldName);return e};l._isUnclassedRenderer=function(b){const a=b.visualVariables;let c=!1;J(b)&&b.classBreakInfos&&1===b.classBreakInfos.length&&a&&(c=b.field?a.some(d=>!(!d||b.field!==d.field||(b.normalizationField||d.normalizationField)&&b.normalizationField!==d.normalizationField)):!!a.length);return c};v._createClass(O,[{key:"effectList",
get:function(){const b=this.layer;let a=null;"effect"in b&&b.effect&&(a=new sa.default,a.effect=b.effect,a.end(),a.scale=this.scale);return a}},{key:"opacity",get:function(){var b;const a=this.layer.opacity,c=null==(b=this.parent)?void 0:b.opacity;b=(b=this.layer.parent)&&"uid"in b?this._getParentLayerOpacity(b):null;return null!=c?c*a:null!=b?b*a:a}},{key:"ready",get:function(){return null===this.layer?!0:0<this.children.length?this._isGroupActive():0<this.legendElements.length}},{key:"scale",get:function(){return this.view&&
this.view.scale}},{key:"isScaleDriven",get:function(){var b=this.layer;if(null===b)return!1;if("effect"in b&&b.effect&&Array.isArray(b.effect)||"featureReduction"in b&&b.featureReduction&&"cluster"===b.featureReduction.type)return!0;if("renderer"in b&&b.renderer){if("dot-density"===b.renderer.type)return!0;const a=b.get("renderer.valueExpression");if(M.test(a))return!0;if(b=b.get("renderer.visualVariables"))return b.some(c=>this._isScaleDrivenSizeVariable(c))}return this._isLayerScaleDriven(this.layer)}},
{key:"version",get:function(){return this._get("version")+1}}]);return O}(ka);z.__decorate([A.property()],x.prototype,"children",void 0);z.__decorate([A.property({readOnly:!0})],x.prototype,"effectList",null);z.__decorate([A.property()],x.prototype,"layerView",void 0);z.__decorate([A.property()],x.prototype,"layer",void 0);z.__decorate([A.property()],x.prototype,"legendElements",void 0);z.__decorate([A.property({readOnly:!0})],x.prototype,"opacity",null);z.__decorate([A.property()],x.prototype,"parent",
void 0);z.__decorate([A.property({readOnly:!0,dependsOn:[]})],x.prototype,"ready",null);z.__decorate([A.property()],x.prototype,"hideLayersNotInCurrentView",void 0);z.__decorate([A.property()],x.prototype,"keepCacheOnDestroy",void 0);z.__decorate([A.property()],x.prototype,"respectLayerVisibility",void 0);z.__decorate([A.property({readOnly:!0})],x.prototype,"scale",null);z.__decorate([A.property()],x.prototype,"sublayerIds",void 0);z.__decorate([A.property({readOnly:!0})],x.prototype,"isScaleDriven",
null);z.__decorate([A.property()],x.prototype,"title",void 0);z.__decorate([A.property({readOnly:!0,dependsOn:["ready"],value:0})],x.prototype,"version",null);z.__decorate([A.property()],x.prototype,"view",void 0);return x=z.__decorate([ra.subclass("esri.widgets.Legend.support.ActiveLayerInfo")],x)});