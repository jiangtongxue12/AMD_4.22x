// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ../../core/Logger ./jsxFactory ./SnappingControls/SnappingControlsViewModel".split(" "),function(h,n,g,p,q,e,A,v,l,w,x,B,r,C,d,y){const t=
{header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0};e=function(u){function m(a,b){b=u.call(this,(()=>{const {view:f,viewModel:k,snappingOptions:D,...z}=a;return z})(),b)||this;b.label=void 0;b.messages=null;b.messagesCommon=null;b.snappingOptions=null;b.view=null;b.visibleElements={...t};b._defaultViewModel=null;null!=a&&a.viewModel?b.viewModel=a.viewModel:(b._defaultViewModel=new y({snappingOptions:a.snappingOptions,view:a.view}),b.viewModel=b._defaultViewModel);
return b}n._inheritsLoose(m,u);var c=m.prototype;c.destroy=function(){this._defaultViewModel=p.destroyMaybe(this._defaultViewModel)};c.loadDependencies=function(){return Promise.all([new Promise((a,b)=>h(["../../chunks/calcite-action"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-block"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-icon"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-label"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-panel"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-pick-list"],
a,b)),new Promise((a,b)=>h(["../../chunks/calcite-pick-list-item"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-switch"],a,b))])};c.castVisibleElements=function(a){return{...t,...a}};c.render=function(){const {label:a,visibleElements:{header:b}}=this;return d.tsx("div",{"aria-label":a,class:this.classes("esri-snapping-controls","esri-widget")},d.tsx("div",{class:"esri-snapping-controls__container"},b?this.renderHeaderView():this.renderContent()))};c.renderHeaderView=function(){return d.tsx("calcite-panel",
{heading:this.label,class:"esri-snapping-controls__panel"},this.renderContent())};c.renderContent=function(){return[this.renderToggles(),this.renderLayerList()]};c.renderToggles=function(){return d.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",heading:"",open:!0},this.renderEnabledToggle(),d.tsx("div",{class:"esri-snapping-controls__nested-container"},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle()))};c.renderEnabledToggle=function(){if(this.visibleElements.enabledToggle){var {messages:{enableSnapping:a},
viewModel:{snappingOptions:{enabled:b,enabledToggled:f}}}=this;return d.tsx("calcite-label",{layout:"inline-space-between"},a,d.tsx("calcite-switch",{checked:b,disabled:f,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}};c.renderSelfEnabledToggle=function(){if(this.visibleElements.selfEnabledToggle){var {messages:{geometryGuides:a},viewModel:{snappingOptions:{enabled:b,selfEnabled:f,enabledToggled:k}}}=this;return d.tsx("calcite-label",{layout:"inline-space-between"},a,d.tsx("calcite-switch",
{checked:f,disabled:k||!b,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}};c.renderFeatureEnabledToggle=function(){if(this.visibleElements.featureEnabledToggle){var {messages:{featureToFeature:a},viewModel:{snappingOptions:{enabled:b,featureEnabled:f,enabledToggled:k}}}=this;return d.tsx("calcite-label",{layout:"inline-space-between"},a,d.tsx("calcite-switch",{checked:f,disabled:k||!b,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}};c.renderLayerList=function(){if(this.visibleElements.layerList){var {messages:{snappingLayers:a,
searchLayers:b}}=this;return d.tsx("calcite-block",{heading:a,open:!0,collapsible:!0},d.tsx("calcite-pick-list",{multiple:!0,bind:this,onCalciteListChange:this._layerListChange,filterEnabled:10<=this.viewModel.layerListViewModel.operationalItems.length,"filter-placeholder":b},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems)))}};c.renderLayerListItemCollection=function(a){return a.map(b=>0<b.children.length?this.renderLayerListItemGroup(b):this.renderLayerListItem(b)).toArray()};
c.renderLayerListItem=function(a){var b,{messages:{untitledLayer:f}}=this;f=a.title||f;const k=0<(null==(b=a.children)?void 0:b.length);return d.tsx("calcite-pick-list-item",{slot:k?"parent-item":null,key:`${this.id}-pick-list-item-${a.uid}`,label:f,value:a.layer.id,selected:a.enabled})};c.renderLayerListItemGroup=function(a){return d.tsx("calcite-pick-list-group",{"group-title":a.title||this.messages.untitledLayer},[...this.renderLayerListItemCollection(a.children)])};c._enableSnappingSwitchChange=
function(a){this.snappingOptions.enabled=a.target.checked};c._featureEnabledSwitchChange=function(a){this.snappingOptions.featureEnabled=a.target.checked};c._selfEnabledSwitchChange=function(a){this.snappingOptions.selfEnabled=a.target.checked};c._layerListChange=function(){var a=n._asyncToGenerator(function*(b){b=yield b.target.getSelectedItems();this.viewModel.updateEnabledFeatureSources([...b.keys()])});return function(b){return a.apply(this,arguments)}}();n._createClass(m,[{key:"viewModel",set:function(a){if(a!==
this._get("viewModel")){if(p.isNone(this._defaultViewModel)||this._defaultViewModel!==a)this._defaultViewModel=p.destroyMaybe(this._defaultViewModel);this._set("viewModel",a)}}}]);return m}(x);g.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],e.prototype,"label",void 0);g.__decorate([l.property(),r.messageBundle("esri/widgets/support/SnappingControls/t9n/SnappingControls")],e.prototype,"messages",void 0);g.__decorate([l.property(),r.messageBundle("esri/t9n/common")],
e.prototype,"messagesCommon",void 0);g.__decorate([q.aliasOf("viewModel.snappingOptions")],e.prototype,"snappingOptions",void 0);g.__decorate([q.aliasOf("viewModel.view")],e.prototype,"view",void 0);g.__decorate([l.property()],e.prototype,"viewModel",null);g.__decorate([l.property()],e.prototype,"visibleElements",void 0);g.__decorate([v.cast("visibleElements")],e.prototype,"castVisibleElements",null);return e=g.__decorate([w.subclass("esri.widgets.support.SnappingControls")],e)});