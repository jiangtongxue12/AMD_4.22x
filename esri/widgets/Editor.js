// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),function(e,d,b,z,x,I,Q,V,T,H,w){b=function(h){function c(f){f=h.call(this,
f)||this;f.enabled=!1;f.enabledToggled=!1;f.selfEnabled=!0;f.featureEnabled=!0;f.featureSources=new z;f.distance=w.defaults.distance;f.touchSensitivityMultiplier=w.defaults.touchSensitivityMultiplier;return f}e._inheritsLoose(c,h);e._createClass(c,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&
this.featureEnabled}}]);return c}(b);d.__decorate([x.property()],b.prototype,"enabled",void 0);d.__decorate([x.property()],b.prototype,"enabledToggled",void 0);d.__decorate([x.property()],b.prototype,"selfEnabled",void 0);d.__decorate([x.property()],b.prototype,"featureEnabled",void 0);d.__decorate([x.property({type:z.ofType(H)})],b.prototype,"featureSources",void 0);d.__decorate([x.property()],b.prototype,"distance",void 0);d.__decorate([x.property()],b.prototype,"touchSensitivityMultiplier",void 0);
d.__decorate([x.property({readOnly:!0})],b.prototype,"effectiveEnabled",null);d.__decorate([x.property({readOnly:!0})],b.prototype,"effectiveSelfEnabled",null);d.__decorate([x.property({readOnly:!0})],b.prototype,"effectiveFeatureEnabled",null);return b=d.__decorate([T.subclass("esri.views.interactive.snapping.SnappingOptions")],b)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V){b=function(T){function H(w){w=T.call(this,w)||this;w.layer=null;w.enabled=!0;w.updating=!1;w.availability=1;return w}e._inheritsLoose(H,T);return H}(b);d.__decorate([z.property({constructOnly:!0})],b.prototype,"layer",void 0);d.__decorate([z.property()],b.prototype,"enabled",void 0);d.__decorate([z.property()],b.prototype,"updating",void 0);d.__decorate([z.property()],b.prototype,"availability",void 0);return b=d.__decorate([V.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
b)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(e,d,b,z,x,I,Q){let V=function(T){function H(){var w=T.apply(this,arguments)||this;w.enabled=!0;return w}d._inheritsLoose(H,T);return H}(x.JSONSupport);b.__decorate([I.property({type:Boolean})],V.prototype,
"enabled",void 0);V=b.__decorate([Q.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],V);x=function(T){function H(w){w=T.call(this,w)||this;w.lineSnapper=new V;w.parallelLineSnapper=new V;w.rightAngleSnapper=new V;w.rightAngleTriangleSnapper=new V;w.shortLineThreshold=15;w.distance=5;w.pointThreshold=1E-6;w.intersectionParallelLineThreshold=1E-6;w.parallelLineThreshold=1E-6;w.touchSensitivityMultiplier=1.5;w.pointOnLineThreshold=1E-6;w.orange=new z([255,127,0]);w.lineHintWidthReference=
3;w.lineHintWidthTarget=3;w.lineHintFadedExtensions=.3;w.parallelLineHintWidth=2;w.parallelLineHintLength=24;w.parallelLineHintOffset=1.5;w.rightAngleHintSize=24;w.rightAngleHintOutlineSize=1.5;return w}d._inheritsLoose(H,T);return H}(x.JSONSupport);b.__decorate([I.property({type:V,constructOnly:!0,nonNullable:!0,json:{write:!0}})],x.prototype,"lineSnapper",void 0);b.__decorate([I.property({type:V,constructOnly:!0,nonNullable:!0,json:{write:!0}})],x.prototype,"parallelLineSnapper",void 0);b.__decorate([I.property({type:V,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],x.prototype,"rightAngleSnapper",void 0);b.__decorate([I.property({type:V,constructOnly:!0,nonNullable:!0,json:{write:!0}})],x.prototype,"rightAngleTriangleSnapper",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],x.prototype,"shortLineThreshold",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],x.prototype,"distance",void 0);b.__decorate([I.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],x.prototype,"pointThreshold",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],x.prototype,"intersectionParallelLineThreshold",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],x.prototype,"parallelLineThreshold",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],x.prototype,"touchSensitivityMultiplier",
void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],x.prototype,"pointOnLineThreshold",void 0);b.__decorate([I.property({type:z,nonNullable:!0})],x.prototype,"orange",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],x.prototype,"lineHintWidthReference",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],x.prototype,"lineHintWidthTarget",void 0);b.__decorate([I.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],x.prototype,"lineHintFadedExtensions",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],x.prototype,"parallelLineHintWidth",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],x.prototype,"parallelLineHintLength",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],x.prototype,"parallelLineHintOffset",
void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],x.prototype,"rightAngleHintSize",void 0);b.__decorate([I.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],x.prototype,"rightAngleHintOutlineSize",void 0);x=b.__decorate([Q.subclass("esri.views.interactive.snapping.Settings.Defaults")],x);b=new x;e.defaults=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r){const l={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},y=window.CSS;Q=function(F){function J(q,O){q=F.call(this,q,O)||this;q.abilities=null;q.displayType="auto";q.graphic=null;q.label=void 0;q.messages=null;q.messagesUnits=null;q.selectedFile=null;q.submitting=!1;q.viewModel=new c;q.visibleElements={...l};q._supportsImageOrientation=y&&y.supports&&y.supports("image-orientation",
"from-image");q._addAttachmentForm=null;q._updateAttachmentForm=null;return q}e._inheritsLoose(J,F);var t=J.prototype;t.initialize=function(){this.own(x.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),x.init(this,"viewModel.mode",()=>this._modeChanged()))};t.castVisibleElements=function(q){return{...l,...q}};t.addAttachment=function(){const {_addAttachmentForm:q,viewModel:O}=this;this._set("submitting",!0);this._set("error",null);return O.addAttachment(q).then(L=>{this._set("submitting",
!1);this._set("error",null);O.mode="view";return L}).catch(L=>{this._set("submitting",!1);this._set("error",new b("attachments:add-attachment",this.messages.addErrorMessage,L));throw L;})};t.deleteAttachment=function(q){const {viewModel:O}=this;this._set("submitting",!0);this._set("error",null);return O.deleteAttachment(q).then(L=>{this._set("submitting",!1);this._set("error",null);O.mode="view";return L}).catch(L=>{this._set("submitting",!1);this._set("error",new b("attachments:delete-attachment",
this.messages.deleteErrorMessage,L));throw L;})};t.updateAttachment=function(){const {viewModel:q}=this,{_updateAttachmentForm:O}=this;this._set("submitting",!0);this._set("error",null);return q.updateAttachment(O).then(L=>{this._set("submitting",!1);this._set("error",null);q.mode="view";return L}).catch(L=>{this._set("submitting",!1);this._set("error",new b("attachments:update-attachment",this.messages.updateErrorMessage,L));throw L;})};t.render=function(){const {submitting:q,viewModel:O}=this,{state:L}=
O;return r.tsx("div",{class:this.classes("esri-attachments","esri-widget")},q?this.renderProgressBar():null,"loading"===L?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};t.renderErrorMessage=function(){const {error:q,visibleElements:O}=this;return q&&O.errorMessage?r.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},q.message):null};t.renderAttachments=function(){const {mode:q,activeAttachmentInfo:O}=this.viewModel;return"add"===q?this.renderAddForm():
"edit"===q?this.renderDetailsForm(O):this.renderAttachmentContainer()};t.renderLoading=function(){return r.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},r.tsx("div",{class:"esri-attachments__loader"}))};t.renderProgressBar=function(){return this.visibleElements.progressBar?r.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};t.renderAddForm=function(){const {submitting:q,selectedFile:O}=this;var L=q||!O,n=this.visibleElements.cancelAddButton?r.tsx("button",
{type:"button",bind:this,disabled:q,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",q&&"esri-button--disabled")},this.messages.cancel):null;L=this.visibleElements.addSubmitButton?r.tsx("button",{type:"submit",disabled:L,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:L})},this.messages.add):null;const G=O?r.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
O.name):null;n=r.tsx("form",{bind:this,afterCreate:m.storeNode,afterRemoved:m.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},r.tsx("fieldset",{class:"esri-attachments__file-fieldset"},G,r.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},O?this.messages.changeFile:this.messages.selectFile,r.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
L,n);return r.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},n)};t.renderDetailsForm=function(q){const {visibleElements:O,viewModel:L,selectedFile:n,submitting:G}=this,{contentType:C,size:B,url:D}=q;var {abilities:A}=L,K=G||!n,P=A.editing&&A.operations.delete&&O.deleteButton?r.tsx("button",{key:"delete-button",type:"button",disabled:G,bind:this,onclick:u=>this._submitDeleteAttachment(u,q),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:G})},this.messages.delete):null;K=A.editing&&A.operations.update&&O.updateButton?r.tsx("button",{disabled:K,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:K})},this.messages.update):null;const N=this.visibleElements.cancelUpdateButton?r.tsx("button",{disabled:G,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:G})},this.messages.cancel):null;var g=n?r.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},n.name):null;A=A.editing&&A.operations.update?r.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},g,r.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,r.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;g=r.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},r.tsx("label",null,z.formatFileSize(this.messagesUnits,B)));const v=r.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},r.tsx("label",null,C));P=r.tsx("form",{bind:this,afterCreate:m.storeNode,afterRemoved:m.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},r.tsx("div",{class:"esri-attachments__metadata"},
g,v),A,r.tsx("div",{class:"esri-attachments__actions"},P,N,K));return r.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},r.tsx("a",{class:"esri-attachments__item-link",href:D,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:q,size:400}),r.tsx("div",{class:"esri-attachments__item-link-overlay"},r.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},r.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},r.tsx("path",
{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),r.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),P)};t.renderImageMask=function({attachmentInfo:q,size:O}){var {supportsResizeAttachments:L}=this.viewModel;const {contentType:n,name:G,url:C}=q,B=L&&f.isSupportedImage(n);q=(q=this._getCSSTransform(q,B))?{transform:q,"image-orientation":"none"}:{};const D=-1===C.indexOf("?")?"?":"\x26";O=B?`${C}${D}w=${O}`:f.getIconPath(n);L={["esri-attachments__image--resizable"]:L};
return r.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!B},"esri-attachments__item-mask")},r.tsx("img",{styles:q,alt:G,src:O,class:this.classes(L,"esri-attachments__image")}))};t.renderAttachmentInfo=function({attachmentInfo:q,displayType:O}){var {viewModel:L}=this;({abilities:L}=L);const {name:n,url:G}=q;O=this.renderImageMask({attachmentInfo:q,size:"list"===O?48:400});var C=L.editing?r.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
m.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;C=r.tsx("label",{class:"esri-attachments__label"},r.tsx("span",{class:"esri-attachments__filename"},n||this.messages.noTitle),C);O=[O,C];L=L.editing?r.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":q.id,onclick:()=>this._startEditAttachment(q),type:"button"},O):r.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:G,target:"_blank"},O);return r.tsx("li",{class:"esri-attachments__item",key:q},L)};t.renderAttachmentContainer=function(){const {effectiveDisplayType:q,viewModel:O,visibleElements:L}=this,{attachmentInfos:n,abilities:G}=O;var C=n&&n.length;const B={["esri-attachments__container--list"]:"preview"!==q,["esri-attachments__container--preview"]:"preview"===q},D=G.editing&&G.operations.add&&L.addButton?r.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),
class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},r.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;C=C?r.tsx("ul",{class:"esri-attachments__items"},n.toArray().map(A=>this.renderAttachmentInfo({attachmentInfo:A,displayType:q}))):r.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return r.tsx("div",{key:"attachments-container",
class:this.classes("esri-attachments__container",B)},C,D)};t._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};t._handleFileInputChange=function(q){q=(q=q.target)&&q.files&&q.files.item(0);this._set("selectedFile",q)};t._submitDeleteAttachment=function(q,O){q.preventDefault();this.deleteAttachment(O)};t._submitAddAttachment=function(q){q.preventDefault();this.addAttachment()};t._submitUpdateAttachment=function(q){q.preventDefault();this.updateAttachment()};t._startEditAttachment=
function(q){const {viewModel:O}=this;O.activeAttachmentInfo=q;O.mode="edit"};t._startAddAttachment=function(){this.viewModel.mode="add"};t._cancelForm=function(q){q.preventDefault();this.viewModel.mode="view"};t._getCSSTransform=function(q,O){({orientationInfo:q}=q);return!this._supportsImageOrientation&&O&&q?[q.rotation?`rotate(${q.rotation}deg)`:"",q.mirrored?"scaleX(-1)":""].join(" "):""};e._createClass(J,[{key:"effectiveDisplayType",get:function(){return"auto"===this.displayType?this.viewModel.supportsResizeAttachments?
"preview":"list":this.displayType}}]);return J}(h);d.__decorate([I.aliasOf("viewModel.abilities")],Q.prototype,"abilities",void 0);d.__decorate([H.property()],Q.prototype,"displayType",void 0);d.__decorate([H.property({readOnly:!0})],Q.prototype,"effectiveDisplayType",null);d.__decorate([I.aliasOf("viewModel.graphic")],Q.prototype,"graphic",void 0);d.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Q.prototype,"label",void 0);d.__decorate([H.property(),k.messageBundle("esri/widgets/Attachments/t9n/Attachments")],
Q.prototype,"messages",void 0);d.__decorate([H.property(),k.messageBundle("esri/core/t9n/Units")],Q.prototype,"messagesUnits",void 0);d.__decorate([H.property({readOnly:!0})],Q.prototype,"selectedFile",void 0);d.__decorate([H.property({readOnly:!0})],Q.prototype,"submitting",void 0);d.__decorate([H.property({readOnly:!0})],Q.prototype,"error",void 0);d.__decorate([H.property({type:c})],Q.prototype,"viewModel",void 0);d.__decorate([H.property()],Q.prototype,"visibleElements",void 0);d.__decorate([T.cast("visibleElements")],
Q.prototype,"castVisibleElements",null);return Q=d.__decorate([w.subclass("esri.widgets.Attachments")],Q)})},"esri/core/unitFormatUtils":function(){define(["exports","./mathUtils","./string","./unitUtils","../intl/number"],function(e,d,b,z,x){function I(T,H,w){return T.units[H][w]}function Q(T,H,w,h=2,c="abbr"){return`${x.formatNumber(H,{minimumFractionDigits:h,maximumFractionDigits:h})} ${I(T,w,c)}`}const V=["B","kB","MB","GB","TB"];e.formatAngleDegrees=function(T,H,w=2){T=z.convertUnit(T,H,"degrees");
return x.formatNumber(T,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:w,minimumFractionDigits:w})};e.formatDMS=function(T,H,w=2){T=z.convertUnit(T,H,"degrees");H=T-Math.floor(T);T-=H;H*=60;let h=H-Math.floor(H);H-=h;h*=60;return`${T.toFixed()}\u00b0 ${H.toFixed()}' ${h.toFixed(w)}"`};e.formatDecimal=Q;e.formatFileSize=function(T,H){let w=0===H?0:Math.floor(Math.log(H)/Math.log(1024));w=d.clamp(w,0,V.length-1);H=x.formatNumber(H/1024**w,{maximumFractionDigits:2});return b.replace(T.units.bytes[V[w]],
{fileSize:H})};e.formatImperialArea=function(T,H,w,h=2,c="abbr"){const f=z.preferredImperialAreaUnit(H,w);return Q(T,z.convertUnit(H,w,f),f,h,c)};e.formatImperialLength=function(T,H,w,h=2,c="abbr"){const f=z.preferredImperialLengthUnit(H,w);return Q(T,z.convertUnit(H,w,f),f,h,c)};e.formatImperialVerticalLength=function(T,H,w,h=2,c="abbr"){const f=z.preferredImperialVerticalLengthUnit(H,w);return Q(T,z.convertUnit(H,w,f),f,h,c)};e.formatMetricArea=function(T,H,w,h=2,c="abbr"){const f=z.preferredMetricAreaUnit(H,
w);return Q(T,z.convertUnit(H,w,f),f,h,c)};e.formatMetricLength=function(T,H,w,h=2,c="abbr"){const f=z.preferredMetricLengthUnit(H,w);return Q(T,z.convertUnit(H,w,f),f,h,c)};e.formatMetricVerticalLength=function(T,H,w,h=2,c="abbr"){const f=z.preferredMetricVerticalLengthUnit(H,w);return Q(T,z.convertUnit(H,w,f),f,h,c)};e.unitName=I;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k){const E={editing:!1,operations:{add:!0,update:!0,delete:!0}},r=z.ofType(f);z=function(l){function y(J){var t=l.call(this,J)||this;t._getAttachmentsPromise=null;t._attachmentLayer=null;t.abilities={...E};t.activeAttachmentInfo=null;t.attachmentInfos=new r;t.graphic=null;t.mode="view";t.handles.add([V.init(e._assertThisInitialized(t),"graphic",()=>t._graphicChanged())]);return t}e._inheritsLoose(y,l);var F=y.prototype;F.destroy=function(){this.graphic=this._attachmentLayer=
null};F.castAbilities=function(J){return{...E,...J}};F.getAttachments=function(){var J=e._asyncToGenerator(function*(){const {_attachmentLayer:t,attachmentInfos:q}=this;if(!t||"function"!==typeof t.queryAttachments)throw new x("invalid-layer","getAttachments(): A valid layer is required.");const O=this._getFeatureId();var L=new m({objectIds:[O],returnMetadata:!0});const n=[];this._getAttachmentsPromise=L=t.queryAttachments(L).then(G=>G[O]||n).catch(()=>n);this.notifyChange("state");L=yield L;q.removeAll();
L.length&&q.addMany(L);this._getAttachmentsPromise=null;this.notifyChange("state");return L});return function(){return J.apply(this,arguments)}}();F.addAttachment=function(){var J=e._asyncToGenerator(function*(t){const {_attachmentLayer:q,attachmentInfos:O,graphic:L,abilities:n}=this;if(!t)throw new x("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!n.operations.add)throw new x("invalid-abilities","addAttachment(): add abilities are required.");if(!q||"function"!==
typeof q.addAttachment)throw new x("invalid-layer","addAttachment(): A valid layer is required.");t=yield q.addAttachment(L,t).then(G=>this._queryAttachment(G.objectId));O.add(t);return t});return function(t){return J.apply(this,arguments)}}();F.deleteAttachment=function(){var J=e._asyncToGenerator(function*(t){const {_attachmentLayer:q,attachmentInfos:O,graphic:L,abilities:n}=this;if(!t)throw new x("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});
if(!n.operations.delete)throw new x("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!q||"function"!==typeof q.deleteAttachments)throw new x("invalid-layer","deleteAttachment(): A valid layer is required.");const G=yield q.deleteAttachments(L,[t.id]).then(()=>t);O.remove(G);return G});return function(t){return J.apply(this,arguments)}}();F.updateAttachment=function(){var J=e._asyncToGenerator(function*(t,q=this.activeAttachmentInfo){const {_attachmentLayer:O,attachmentInfos:L,
graphic:n,abilities:G}=this;if(!t)throw new x("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!q)throw new x("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:q});if(!G.operations.update)throw new x("invalid-abilities","updateAttachment(): Update abilities are required.");const C=L.findIndex(B=>B===q);if(!O||"function"!==typeof O.updateAttachment)throw new x("invalid-layer","updateAttachment(): A valid layer is required.");
t=yield O.updateAttachment(n,q.id,t).then(B=>this._queryAttachment(B.objectId));L.splice(C,1,t);return t});return function(t){return J.apply(this,arguments)}}();F._queryAttachment=function(){var J=e._asyncToGenerator(function*(t){if(!t)throw new x("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:q}=this,O=this._getFeatureId();t=new m({objectIds:[O],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return q.queryAttachments(t).then(L=>L[O][0])});return function(t){return J.apply(this,
arguments)}}();F._getFeatureId=function(){const {_attachmentLayer:J,graphic:t}=this;if(!J||!t)return null;const {objectIdField:q}=J,{attributes:O}=t;return O&&O[q]};F._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};F._setAttachmentLayer=function(){var {graphic:J}=this;this._attachmentLayer=(J=k.getSourceLayer(J))?"scene"===J.type&&Q.isSome(J.associatedLayer)?J.associatedLayer:J:null};e._createClass(y,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return y}(I.HandleOwner);d.__decorate([T.property()],z.prototype,"abilities",void 0);d.__decorate([h.cast("abilities")],z.prototype,"castAbilities",null);d.__decorate([T.property()],z.prototype,"activeAttachmentInfo",void 0);d.__decorate([T.property({readOnly:!0,type:r})],z.prototype,"attachmentInfos",void 0);d.__decorate([T.property({type:b})],
z.prototype,"graphic",void 0);d.__decorate([T.property()],z.prototype,"mode",void 0);d.__decorate([T.property({readOnly:!0})],z.prototype,"state",null);d.__decorate([T.property({readOnly:!0})],z.prototype,"supportsResizeAttachments",null);return z=d.__decorate([c.subclass("esri.widgets.Attachments.AttachmentsViewModel")],z)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w){function h(){h=d._asyncToGenerator(function*(ba,aa){return"function"===typeof ba?ba.call(null,aa):ba});return h.apply(this,arguments)}function c(ba){return ba?X.test(ba):!1}function f(ba,aa){if(!c(aa)||!ba)return null;const R=aa.replace(X,"").toLowerCase();let Y;ba.some(W=>W.name.toLowerCase()===R?(Y=W,!0):!1);return Y}function m(ba,aa){return(aa=k(aa,ba))?aa.name:ba}function k(ba,aa){return ba&&"function"===typeof ba.getField?ba.getField(aa):null}function E({formattedAttributes:ba,
template:aa,fieldInfoMap:R}){return`${I.replace(I.replace(aa,Y=>{{const W=R.get(Y.toLowerCase());Y=`{${W&&W.fieldName||Y}}`}return Y}),ba).replace(v,"")}`.trim()}function r(ba,aa,R=!1){const Y=aa[ba];"string"===typeof Y&&(R=(R?encodeURIComponent(Y):Y).replace(U,"%27"),aa[ba]=R)}function l(ba,aa=!1){const R={...ba};Object.keys(R).forEach(Y=>r(Y,R,aa));return R}function y(ba,aa){return ba.replace(u,(R,Y,W)=>(R=k(aa,W))?`{${R.name}}`:Y)}function F(ba,aa,R){return(ba=y(ba,R))?ba.replace(ta,(Y,W,ca)=>
{W=`${W||ca}`.trim();return I.replace(Y,l(aa,W&&"{"!==W[0]))}):ba}function J(ba,aa){var R=aa.fieldName,Y=t(aa.fieldInfos,R),W=null==Y?void 0:Y.clone();Y=aa.preventPlacesFormatting;aa=aa.layer;R=k(aa,R);if(W&&"date"===(null==R?void 0:R.type)){R=W.format||new H;R.dateFormat=R.dateFormat||"short-date-short-time";var ca;if(!(ca="feature"===(null==aa?void 0:aa.type)&&aa.datesInUnknownTimezone)){if(ca=!(null==aa||!aa.layer))ca=aa.layer,ca="map-image"===(null==ca?void 0:ca.type);ca=ca&&aa.layer.datesInUnknownTimezone}R.dateTimeFormatOptions=
ca?{timeZone:"UTC"}:null;W.format=R}W=W&&W.format;"string"!==typeof ba||!W||null!=W.dateFormat||null==W.places&&null==W.digitSeparator||(aa=Number(ba),isNaN(aa)||(ba=aa));return"string"===typeof ba||null==ba||null==W?L(ba):Y?V.formatNumber(ba,{...V.convertNumberFormatToIntlOptions(W),minimumFractionDigits:0,maximumFractionDigits:20}):W.format(ba)}function t(ba,aa){if(ba&&ba.length&&aa){var R=aa.toLowerCase(),Y=void 0;ba.some(W=>W.fieldName&&W.fieldName.toLowerCase()===R?(Y=W,!0):!1);return Y}}function q({fieldName:ba,
graphic:aa,layer:R}){if(K(ba)||!R||"function"!==typeof R.getFeatureType)return null;const {typeIdField:Y}=R;return Y&&ba===Y?(ba=R.getFeatureType(aa))?ba.name:null:null}function O({fieldName:ba,value:aa,graphic:R,layer:Y}){return K(ba)||!Y||"function"!==typeof Y.getFieldDomain?null:(ba=Y.getFieldDomain(ba,{feature:R}))&&"coded-value"===ba.type?ba.getName(aa):null}function L(ba){return"string"===typeof ba?ba.replace(fa,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):ba}function n(ba){const {value:aa,
fieldName:R,fieldInfos:Y,fieldInfoMap:W,layer:ca,graphic:ia}=ba;return null==aa?"":(ba=O({fieldName:R,value:aa,graphic:ia,layer:ca}))||(ba=q({fieldName:R,graphic:ia,layer:ca}))?ba:W.get(R.toLowerCase())?J(aa,{fieldInfos:Y,fieldName:R,layer:ca}):(ba=ca&&ca.fieldsIndex)&&ba.isDateField(R)?Q.formatDate(aa,Ba):L(aa)}function G(ba,aa){return C.apply(this,arguments)}function C(){C=d._asyncToGenerator(function*(ba,aa){var R,Y;const {layer:W,graphic:ca,outFields:ia,objectIds:ja,returnGeometry:na,spatialReference:ka}=
ba;ba=ja[0];if("number"!==typeof ba&&"string"!==typeof ba)return g.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:W,graphic:ca,objectId:ba,requiredFields:ia}),null;if(null==(R=W.capabilities)||null==(Y=R.operations)||!Y.supportsQuery)return g.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:W,graphic:ca,requiredFields:ia,returnGeometry:na}),null;R=W.createQuery();R.objectIds=ja;R.outFields=null!=
ia&&ia.length?ia:[W.objectIdField];R.returnGeometry=!!na;R.returnZ=!!na;R.returnM=!!na;R.outSpatialReference=ka;return(yield W.queryFeatures(R,aa)).features[0]});return C.apply(this,arguments)}function B(ba){return D.apply(this,arguments)}function D(){D=d._asyncToGenerator(function*(ba){var aa;if(null==(aa=ba.expressionInfos)||!aa.length)return!1;aa=yield w.loadArcade();({arcadeUtils:{hasGeometryFunctions:aa}}=aa);return aa(ba)});return D.apply(this,arguments)}function A(){A=d._asyncToGenerator(function*({graphic:ba,
popupTemplate:aa,layer:R,spatialReference:Y},W){if(R&&aa&&("function"===typeof R.load&&(yield R.load(W)),ba.attributes)){var ca=ba.attributes[R.objectIdField];if(null!=ca){ca=[ca];var ia=yield aa.getRequiredFields(R.fieldsIndex),ja=T.featureHasFields(ia,ba);ia=ja?[]:ia;aa=aa.returnGeometry||(yield B(aa));if(!ja||aa)if(R=yield G({layer:R,graphic:ba,outFields:ia,objectIds:ca,returnGeometry:aa,spatialReference:Y},W))R.geometry&&(ba.geometry=R.geometry),R.attributes&&(ba.attributes={...ba.attributes,
...R.attributes})}}});return A.apply(this,arguments)}function K(ba=""){return ba?-1!==ba.indexOf("relationships/"):!1}function P({attributes:ba,graphic:aa,relatedInfo:R}){ba&&aa&&R&&Object.keys(aa.attributes).forEach(Y=>{var W={layerId:R.relation.id.toString(),fieldName:Y};ba[W?`${"relationships/"}${W.layerId}/${W.fieldName}`:""]=aa.attributes[Y]})}function N(ba,aa){ba&&aa&&(aa.relatedFeatures&&aa.relatedFeatures&&aa.relatedFeatures.forEach(R=>P({attributes:ba,graphic:R,relatedInfo:aa})),aa.relatedStatsFeatures&&
aa.relatedStatsFeatures&&aa.relatedStatsFeatures.forEach(R=>P({attributes:ba,graphic:R,relatedInfo:aa})))}const g=z.getLogger("esri.widgets.Feature.support.featureUtils"),v=/href=(""|'')/gi,u=/(\{([^\{\r\n]+)\})/g,U=/'/g,X=/^\s*expression\//i,fa=/(\n)/gi,ma=/[\u00A0-\u9999<>&]/gim,ta=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,va=/^(?:mailto:|tel:)/,Ba=Q.convertDateFormatToIntlOptions("short-date-short-time"),Da=ba=>{if(!ba)return!1;ba=ba.toUpperCase();return-1<ba.indexOf("CURRENT_TIMESTAMP")||-1<ba.indexOf("CURRENT_DATE")||
-1<ba.indexOf("CURRENT_TIME")},la=({layer:ba,method:aa,query:R,definitionExpression:Y})=>{var W,ca;null!=(W=ba.capabilities)&&null!=(ca=W.query)&&ca.supportsCacheHint&&"attachments"!==aa&&(ba=x.isSome(R.where)&&R.where,aa=x.isSome(R.geometry)&&R.geometry,Da(Y)||Da(ba)||"extent"===(null==aa?void 0:aa.type)||"tile"===R.resultType||(R.cacheHint=!0))};e.applyTextFormattingHTML=L;e.createfieldInfoMap=function(ba,aa){const R=new Map;ba&&ba.forEach(Y=>{const W=m(Y.fieldName,aa);Y.fieldName=W;R.set(W.toLowerCase(),
Y)});return R};e.fixTokens=y;e.formatAttributes=function({fieldInfos:ba,attributes:aa,layer:R,graphic:Y,fieldInfoMap:W,relatedInfos:ca}){const ia={};null==ca?void 0:ca.forEach(ja=>N(ia,ja));Object.keys(aa).forEach(ja=>{ia[ja]=n({fieldName:ja,fieldInfos:ba,fieldInfoMap:W,layer:R,value:aa[ja],graphic:Y})});return ia};e.formatEditInfo=function(ba,aa){const {creatorField:R,creationDateField:Y,editorField:W,editDateField:ca}=ba;if(aa){ba=aa[ca];if("number"===typeof ba)return aa=aa[W],{type:"edit",date:Q.formatDate(ba,
Ba),user:aa};ba=aa[Y];return"number"===typeof ba?(aa=aa[R],{type:"create",date:Q.formatDate(ba,Ba),user:aa}):null}};e.formatValueToFieldInfo=J;e.getAllFieldInfos=function(ba){const aa=[];if(!ba)return aa;const {fieldInfos:R,content:Y}=ba;R&&aa.push(...R);if(!Y||!Array.isArray(Y))return aa;Y.forEach(W=>{"fields"===W.type&&(W=W&&W.fieldInfos)&&aa.push(...W)});return aa};e.getFieldInfo=t;e.getFieldInfoLabel=function(ba,aa){return(aa=f(aa,null==ba?void 0:ba.fieldName))?aa.title||null:ba?ba.label||ba.fieldName:
null};e.getFixedFieldName=m;e.getFixedFieldNames=function(ba,aa){return ba&&ba.map(R=>m(R,aa))};e.getSourceLayer=function(ba){if(!x.isNone(ba))return ba.get("sourceLayer")||ba.get("layer")};e.graphicCallback=function(ba,aa){return h.apply(this,arguments)};e.htmlEntities=function(ba){return ba.replace(ma,aa=>`&#${aa.charCodeAt(0)};`)};e.isExpressionField=c;e.isRelatedField=K;e.preLayerQueryCallback=({query:ba,layer:aa,method:R})=>{la({layer:aa,method:R,query:ba,definitionExpression:`${aa.definitionExpression} ${aa.serviceDefinitionExpression}`})};
e.preRequestCallback=({queryPayload:ba,layer:aa,method:R})=>{la({layer:aa,method:R,query:ba,definitionExpression:`${aa.definitionExpression} ${aa.serviceDefinitionExpression}`})};e.queryUpdatedFeature=function(ba,aa){return A.apply(this,arguments)};e.shouldOpenInNewTab=function(ba=""){if(ba)return!va.test(ba.trim().toLowerCase())};e.substituteAttributes=E;e.substituteFieldsInLinksAndAttributes=function({attributes:ba,globalAttributes:aa,layer:R,text:Y,expressionAttributes:W,fieldInfoMap:ca}){return Y?
E({formattedAttributes:aa,template:F(Y,{...aa,...W,...ba},R),fieldInfoMap:ca}):""};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(e,d){e.getIconPath=function(b){const z=d.getAssetUrl("esri/themes/base/images/files/");return b?"text/plain"===b?`${z}text-32.svg`:"application/pdf"===b?`${z}pdf-32.svg`:"text/csv"===b?`${z}csv-32.svg`:"application/gpx+xml"===b?`${z}gpx-32.svg`:"application/x-dwf"===
b?`${z}cad-32.svg`:"application/postscript"===b||"application/json"===b||"text/xml"===b||"model/vrml"===b?`${z}code-32.svg`:"application/x-zip-compressed"===b||"application/x-7z-compressed"===b||"application/x-gzip"===b||"application/x-tar"===b||"application/x-gtar"===b||"application/x-bzip2"===b||"application/gzip"===b||"application/x-compress"===b||"application/x-apple-diskimage"===b||"application/x-rar-compressed"===b||"application/zip"===b?`${z}zip-32.svg`:-1!==b.indexOf("image/")?`${z}image-32.svg`:
-1!==b.indexOf("audio/")?`${z}sound-32.svg`:-1!==b.indexOf("video/")?`${z}video-32.svg`:-1!==b.indexOf("msexcel")||-1!==b.indexOf("ms-excel")||-1!==b.indexOf("spreadsheetml")?`${z}excel-32.svg`:-1!==b.indexOf("msword")||-1!==b.indexOf("ms-word")||-1!==b.indexOf("wordprocessingml")?`${z}word-32.svg`:-1!==b.indexOf("powerpoint")||-1!==b.indexOf("presentationml")?`${z}report-32.svg`:`${z}generic-32.svg`:`${z}generic-32.svg`};e.isSupportedImage=function(b){b=b.toLowerCase();return"image/bmp"===b||"image/emf"===
b||"image/exif"===b||"image/gif"===b||"image/x-icon"===b||"image/jpeg"===b||"image/png"===b||"image/tiff"===b||"image/x-wmf"===b};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/FeatureForm":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/domainUtils ../layers/support/fieldUtils ./Widget ./FeatureForm/FeatureFormViewModel ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory ../chunks/datetime ../intl/locale".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J){const t={datePattern:"D",timePattern:"tt"};z=function(q){function O(n,G){var C=q.call(this,n,G)||this;C._activeDateFieldEdit=null;C._activeInputName=null;C._fieldFocusNeeded=!1;C._fieldToInitialIncompatibleDomainValue=new Map;C._switchFieldsWithInitialIncompatibleValue=new Set;C._userUpdatedInputFieldNames=new Set;C.description=null;C.feature=null;C.fieldConfig=null;C.formTemplate=null;C.groupDisplay="all";C.headingLevel=2;C.label=void 0;C.layer=
null;C.messages=null;C.strict=null;C.title=null;C.viewModel=new f;C._handleSwitchClick=B=>{B.target===B.currentTarget&&B.stopImmediatePropagation()};C._handleRadioInputChange=B=>{C._commitInputValue(B.target)};C._handleInputInput=B=>{C._commitInputValue(B.currentTarget,!0)};C._handleFormKeyDown=C._handleFormKeyDown.bind(d._assertThisInitialized(C));C._handleInputBlur=C._handleInputBlur.bind(d._assertThisInitialized(C));C._handleInputFocus=C._handleInputFocus.bind(d._assertThisInitialized(C));C._handleNumberInputMouseDown=
C._handleNumberInputMouseDown.bind(d._assertThisInitialized(C));C._handleInputKeyDown=C._handleInputKeyDown.bind(d._assertThisInitialized(C));C._handleOptionChange=C._handleOptionChange.bind(d._assertThisInitialized(C));C._handleGroupClick=C._handleGroupClick.bind(d._assertThisInitialized(C));C._handleSubmit=C._handleSubmit.bind(d._assertThisInitialized(C));C._afterInputCreateOrUpdate=C._afterInputCreateOrUpdate.bind(d._assertThisInitialized(C));return C}d._inheritsLoose(O,q);var L=O.prototype;L.initialize=
function(){this.own(this.watch("feature",()=>{const n=this._getFocusableInput("forward");this._activeInputName=n&&n.name;this._userUpdatedInputFieldNames.clear();this._fieldToInitialIncompatibleDomainValue.clear();this._switchFieldsWithInitialIncompatibleValue.clear();this._fieldFocusNeeded=!0}),this.on("submit",n=>{if(0<n.invalid.length){const [G]=n.invalid;n.invalid.forEach(C=>this._userUpdatedInputFieldNames.add(C));this._activeInputName=G;this._fieldFocusNeeded=!0;this.scheduleRender()}}))};L.loadDependencies=
function(){return new Promise((n,G)=>e(["../chunks/calcite-switch"],n,G))};L.destroy=function(){this._userUpdatedInputFieldNames.clear();this._userUpdatedInputFieldNames=null};L.getValues=function(){return null};L.submit=function(){return null};L.render=function(){const {state:n}=this.viewModel;return y.tsx("div",{class:this.classes("esri-feature-form","esri-widget","esri-widget--panel")},"ready"===n?this.renderForm():null)};L.renderForm=function(){var n=this.title?y.tsx(m.Heading,{key:"title",level:this.headingLevel},
this.title):null;const G=this.description?y.tsx("p",{class:"esri-feature-form__description-text",key:"description"},this.description):null;n=n||G?y.tsx("div",{class:"esri-feature-form__form-header"},n,G):null;return y.tsx("form",{class:"esri-feature-form__form",novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},n,this.renderFields())};L.renderFields=function(){const {viewModel:{inputFields:n}}=this;return n.map((G,C)=>G&&G.inputFields?this.renderGroup(G,C):this.renderLabeledField(G))};
L.renderGroup=function(n,G){const {description:C,inputFields:B,label:D,state:A}=n;var K=this.viewModel.findField(this._activeInputName);K=!(!K||K.group!==n);const P=`${this.id}_group_${G}`,N=`${this.id}_group-label_${G}`,g=`${this.id}_group-description_${G}`,v=C?y.tsx("p",{class:this.classes("esri-feature-form__group-description","esri-feature-form__description-text"),id:g},C):null,u="sequential"===this.groupDisplay,U=u?K:"expanded"===A,X=U?"esri-icon-up":"esri-icon-down";return y.tsx("fieldset",
{"aria-expanded":U.toString(),"aria-labelledby":N,"aria-describedby":C?g:"",class:this.classes("esri-feature-form__group",u?"esri-feature-form__group--sequential":null,U?null:"esri-feature-form__group--collapsed",K?"esri-feature-form__group--active":null),"data-group":n,id:P,key:G,onclick:this._handleGroupClick},y.tsx("button",{role:u?"presentation":void 0,class:"esri-feature-form__group-header",type:"button",tabIndex:u?-1:0},y.tsx("div",{class:"esri-feature-form__group-title"},y.tsx(m.Heading,{class:"esri-feature-form__group-label",
id:N,level:this.headingLevel+(this.title?1:0)},D),v),u?null:y.tsx("span",{class:this.classes(X,"esri-feature-form__group-toggle-icon")})),B.map(fa=>this.renderLabeledField(fa)))};L._getFocusableInput=function(n,G){var C=this.viewModel._allInputFields;C="forward"===n?C:C.slice().reverse();G?G&&G.inputFields?n=C.indexOf(G.inputFields[0]):(this._isFieldInClosedCollapsibleGroup(G)?({inputFields:G}=G.group,n="forward"===n?G[G.length-1]:G[0]):n=G,n=C.indexOf(n)+1):n=0;for(;n<C.length;n++)if(G=C[n],G.visible)return G;
return null};L.renderLabeledField=function(n){const {label:G,layer:C,type:B}=n;return y.tsx("label",{key:`${C.id}-${n.name}`,class:"esri-feature-form__label"},[G,"unsupported"!==B?this.renderInputField(n):this.renderUnsupportedField(n),this.renderAuxiliaryText(n)])};L.renderInputField=function(n){var {viewModel:G}=this;const {domain:C,editable:B,name:D,type:A}=n;G=G.getValue(D);const K=!B,P=this.getCommonInputProps(n);if("coded-value"===(null==C?void 0:C.type)&&!K){if("switch"===n.editorType)if(this._switchFieldsWithInitialIncompatibleValue.has(D)||
null==G||n.config.onValue!==G&&n.config.offValue!==G)this._switchFieldsWithInitialIncompatibleValue.add(D);else return this.renderSwitchInputField(G,P);return"radio-buttons"===n.editorType?this.renderRadioButtonsInputField(G,C.codedValues.map(({code:N,name:g})=>({value:N,name:g})),P):this.renderSelectInputField(G,C.codedValues.map(({code:N,name:g})=>({value:N,name:g})),P)}return"text"===A&&"text-area"===n.editorType||"rich-text"===n.editorType?y.tsx("textarea",{...P}):"datetime-picker"===n.editorType||
"date"===A?this.renderDateInputField(G,P):y.tsx("input",{type:"text"===A?"text":"number",...P})};L._parseDateTime=function(n,G,C){if(C){var B;n=F.DateTime.fromJSDate(this._parseDate(n,C));G=F.DateTime.fromMillis(null!=(B=G.value)?B:Date.now());n="date"===C?n.set({hour:G.hour,minute:G.minute,second:G.second}):n.set({day:G.day,month:G.month,year:G.year});return n.isValid?n.toMillis():null}C=F.DateTime.fromJSDate(this._parseDate(n));return C.isValid?C.toMillis():null};L.renderDateInputField=function(n,
G){const {date:C,time:B}=this._formatDate(0);var D=`${this.id}-${G.key}`;const A=`${D}-date`;D=`${D}-time`;const K=G["data-field"],{includeTime:P}=K,{_activeDateFieldEdit:N}=this;let {date:g,time:v}=this._formatDate(n);if((null==N?void 0:N.fieldName)===K.name){var u,U,X,fa;g=null!=(u=null==(U=N.date.input)?void 0:U.value)?u:g;v=null!=(X=null==(fa=N.time.input)?void 0:fa.value)?X:v}return y.tsx("div",{key:`${G.key}-date`,class:"esri-feature-form__date-input-container"},y.tsx("div",{class:this.classes("esri-feature-form__date-input-part",
P?null:"esri-feature-form__date-input-part--lone")},y.tsx("input",{"aria-label":K.label,"aria-describedby":A,type:"text",...G,"data-date-part":"date",class:this.classes(G.class,"esri-feature-form__input--date"),value:g}),y.tsx("div",{class:"esri-feature-form__date-format-hint",id:A},C)),P?y.tsx("div",{class:"esri-feature-form__date-input-part",key:"time-input"},y.tsx("input",{"aria-describedby":D,"aria-label":K.label,type:"text",...G,"data-date-part":"time",class:this.classes(G.class,"esri-feature-form__input--time"),
value:v}),y.tsx("div",{class:"esri-feature-form__date-format-hint",id:D},B)):null)};L.renderUnsupportedField=function(n){n=this.getCommonInputProps(n);return y.tsx("input",{afterCreate:n.afterCreate,afterUpdate:n.afterUpdate,class:this.classes("esri-input","esri-feature-form__input","esri-feature-form__input--disabled"),"data-field":n["data-field"],onfocus:n.onfocus,readOnly:!0,tabIndex:n.tabIndex,type:"text",value:n.value})};L.renderSelectInputField=function(n,G,C){const B=G.map(K=>y.tsx("option",
{value:`${K.value}`,key:K.name},K.name)),D=C["data-field"];this.registerIncompatibleValue(n,G,D,K=>{B.unshift(y.tsx("option",{value:`${K}`,key:"incompatible-option",readOnly:!0},K))});if(!D.required&&("combo-box"!==D.editorType||D.config.showNoValueOption)){var A;n=(null==(A=D.config)?void 0:A.noValueOptionLabel)||this.messages.empty;B.unshift(y.tsx("option",{value:"",key:"empty-option"},n))}return y.tsx("select",{...C,class:this.classes(C.class,"esri-select"),onchange:this._handleOptionChange},B)};
L.registerIncompatibleValue=function(n,G,C,B){const D=this._fieldToInitialIncompatibleDomainValue,A=D.has(C.name);if(A||null!=n&&""!==n&&!G.find(K=>K.value===n)||A)A||D.set(C.name,n),null==B?void 0:B(D.get(C.name))};L.renderRadioButtonsInputField=function(n,G,C){const B=C["data-field"],D=G.map(K=>this.renderRadioButton({key:K.name,label:K.name,name:B.name,value:K.value,selected:K.value===n,props:C}));this.registerIncompatibleValue(n,G,B);if(!B.required&&(!B.config||B.config.showNoValueOption)){var A;
G=(null==(A=B.config)?void 0:A.noValueOptionLabel)||this.messages.empty;D.unshift(this.renderRadioButton({key:"empty-option",label:G,name:B.name,value:"",selected:""===n||null===n,props:C}))}return y.tsx("div",{key:`${C.key}-radio`,class:"esri-feature-form__input--radio-group"},D)};L.renderSwitchInputField=function(n,G){return y.tsx("calcite-switch",{...G,class:"esri-feature-form__input--switch",onclick:this._handleSwitchClick,checked:n===G["data-field"].config.onValue})};L.renderRadioButton=function({key:n,
name:G,value:C,selected:B,label:D,props:A}){return y.tsx("label",{key:n,class:"esri-feature-form__input--radio-label"},y.tsx("input",{...A,class:"esri-feature-form__input--radio",name:G,type:"radio",value:C,checked:B,onchange:this._handleRadioInputChange}),D)};L.renderAuxiliaryText=function(n){if(this._userUpdatedInputFieldNames.has(n.name)&&!n.valid)return y.tsx("div",{key:"error-message"},y.tsx("span",{class:this.classes("esri-feature-form__input-icon--invalid","esri-icon-notice-triangle")}),y.tsx("div",
{class:"esri-feature-form__field-error-message"},n.errorMessage));if(n.description)return y.tsx("div",{key:"description",class:"esri-feature-form__description-text"},n.description)};L.getCommonInputProps=function(n){const {groupDisplay:G,viewModel:C}=this,{editable:B,group:D,hint:A,maxLength:K,minLength:P,name:N,required:g,type:v,valid:u}=n,U=C.getValue(N),X=this._userUpdatedInputFieldNames.has(N),fa=!B,ma="all"===G&&"collapsed"===(null==D?void 0:D.state);return{afterCreate:this._afterInputCreateOrUpdate,
afterUpdate:this._afterInputCreateOrUpdate,"aria-invalid":u?"false":"true",class:this.classes("esri-input","esri-feature-form__input",fa?"esri-feature-form__input--disabled":null,X&&!u?"esri-feature-form__input--invalid":null),key:N,minlength:-1<P?`${P}`:"",maxlength:-1<K?`${K}`:"",...this._getNumberFieldConstraints(n),readOnly:fa,value:null==U?"":`${U}`,"data-field":n,onfocus:this._handleInputFocus,oninput:this._handleInputInput,onblur:this._handleInputBlur,onkeydown:this._handleInputKeyDown,onmousedown:"number"===
v?this._handleNumberInputMouseDown:null,placeholder:"number"===v||"text"===v?A:"",required:g,tabIndex:ma?-1:0}};L._isFieldInClosedCollapsibleGroup=function(n){var G;return"all"===this.groupDisplay&&!(n&&n.inputFields)&&"collapsed"===(null==n?void 0:null==(G=n.group)?void 0:G.state)};L._handleNumberInputMouseDown=function({target:n}){n.focus();this.scheduleRender()};L._getNumberFieldConstraints=function(n){return(n=w.getDomainRange(n.domain)||h.getFieldRange(n.field))&&n.max!==Number.MAX_VALUE&&n.min!==
Number.MIN_VALUE?n:{min:null,max:null}};L._afterInputCreateOrUpdate=function(n){const G=n["data-field"],C=this.viewModel.findField(this._activeInputName),B=this._fieldToInitialIncompatibleDomainValue.get(G.name)===G.value;this._fieldFocusNeeded&&C===G&&("radio-buttons"!==G.editorType||B||n.checked)&&(this._fieldFocusNeeded=!1,n.focus())};L._handleInputFocus=function(n){n=n.target;const G=n["data-field"];this._activeInputName=G.name;"date"===G.type&&this._syncDateFieldEdits(n)};L._handleInputBlur=
function(n){const G=n.target,C=G["data-field"];if("date"===C.type){const A=n.relatedTarget;var B=A&&A["data-field"];if(B&&"date"===C.type&&"date"===B.type&&C.field===B.field){if(""!==G.value&&""===A.value){var D;B=A.getAttribute("data-date-part");A.value=this._formatDate(null!=(D=C.value)?D:Date.now())[B];this._parseDate(G.value,G.getAttribute("data-date-part"))&&this._commitInputValue(n.target,!0,!1)}return}}this._commitInputValue(G);this.scheduleRender()};L._commitInputValue=function(n,G=!1,C=!0){const B=
n["data-field"];if(this._activeDateFieldEdit){const {date:N,time:g}=this._activeDateFieldEdit,v=this._parseDateTime(n.value,B,N.active?"date":"time");n=null!==this.viewModel.getValue(B.name);const u=N.input&&(g.input||!B.includeTime),U=null===v;if(G)U||(u||!C||n)&&this._updateDateFieldValue(B,v);else{var D,A;if(""===(null==(D=N.input)?void 0:D.value)||""===(null==(A=g.input)?void 0:A.value))this._updateDateFieldValue(B,null);else if(u){var K,P;G=`${N.input.value} ${null!=(K=null==(P=g.input)?void 0:
P.value)?K:""}`;K=this._parseDateTime(G,B);null===K&&n||this._updateDateFieldValue(B,K)}this._activeDateFieldEdit=null}}else this._updateFieldValue(n)};L._handleInputKeyDown=function(n){const {key:G,altKey:C,ctrlKey:B,metaKey:D}=n;var A=n.target["data-field"];if("Enter"!==G){var {type:K}=A.field;A="single"===K||"double"===K;if(!("integer"!==K&&"small-integer"!==K&&!A||C||B||D)&&1===G.length){K=Number(G);const P=["-","+"],N=["e","."];A=A?[...P,...N]:P;isNaN(K)&&-1===A.indexOf(G)&&n.preventDefault()}}else this._isFieldInClosedCollapsibleGroup(A)&&
(A.group.state="expanded")};L._syncDateFieldEdits=function(n){var G,C;const B=n["data-field"];if("date"===B.type){var D=n.getAttribute("data-date-part"),A="date"===D?{value:n.value,input:n,active:!0}:{...null==(G=this._activeDateFieldEdit)?void 0:G.date,active:!1};n="time"===D?{value:n.value,input:n,active:!0}:{...null==(C=this._activeDateFieldEdit)?void 0:C.time,active:!1};this._activeDateFieldEdit={fieldName:B.name,date:A,time:n}}};L._updateFieldValue=function(n){const G=n["data-field"];this.viewModel.setValue(G.name,
this._parseValue(n));this._userUpdatedInputFieldNames.add(G.name)};L._updateDateFieldValue=function(n,G){this.viewModel.setValue(n.name,G);this._userUpdatedInputFieldNames.add(n.name)};L._parseValue=function(n){var G=n["data-field"],C=n.value;if("switch"===G.editorType&&!(n instanceof HTMLSelectElement))return n.checked?G.config.onValue:G.config.offValue;if("radio-buttons"===G.editorType&&"radio"===n.type&&!n.checked)return G.value;var {type:B}=G;if("number"===B)return C?parseFloat(C):null;if("date"===
B){if(!C)return null;B=Number(C);if(!isNaN(B))return B;n=n.getAttribute("data-date-part");C=this._parseDate(C,n);if(!C)return null;C=F.DateTime.fromJSDate(C);var D=G.domain;const A=F.DateTime.now();B=A;D&&"range"===D.type&&(D=F.DateTime.fromMillis(D.maxValue),A<D&&(B=D));G=this.viewModel.getValue(G.name);G=null!=G?F.DateTime.fromMillis(G):B;C="date"===n?C.set({hour:G.hour,minute:G.minute,second:G.second}):C.set({day:G.day,month:G.month,year:G.year});return C.toMillis()}return C};L._handleOptionChange=
function(n){this._commitInputValue(n.target);this.scheduleRender()};L._handleGroupClick=function(n){var G;const C=n.currentTarget["data-group"],B="expanded"===C.state,D="sequential"===this.groupDisplay;if(!B||n.target.closest(".esri-feature-form__group-header")){this._activeInputName=null==(G=this._getFocusableInput("forward",C))?void 0:G.name;if(D){n=n.target.closest(".esri-feature-form__group-header");if(B&&!n)return;this.viewModel.inputFields.forEach(A=>{A&&A.inputFields&&A!==C&&(A.state="collapsed")})}C.state=
B?"collapsed":"expanded";this._fieldFocusNeeded=D;this.scheduleRender()}};L._handleSubmit=function(n){n.preventDefault()};L._handleFormKeyDown=function(n){"Enter"===n.key&&this.viewModel.submit()};L._formatDate=function(n){if(null==n)return{date:"",time:""};n=F.DateTime.fromMillis(n,{locale:J.getLocale(),numberingSystem:"latn"});return{date:n.toLocaleString({year:"numeric",month:"2-digit",day:"2-digit"}),time:n.toFormat(t.timePattern)}};L._parseDate=function(n,G){if(null==n||""===n)return null;const {timePattern:C,
datePattern:B}=t;n=F.DateTime.fromFormat(n,G?"date"===G?B:C:`${B} ${C}`,{locale:J.getLocale(),numberingSystem:"latn"});return n.isValid?n.toJSDate():null};return O}(c);b.__decorate([x.aliasOf("viewModel.description")],z.prototype,"description",void 0);b.__decorate([x.aliasOf("viewModel.feature")],z.prototype,"feature",void 0);b.__decorate([x.aliasOf("viewModel.fieldConfig")],z.prototype,"fieldConfig",void 0);b.__decorate([x.aliasOf("viewModel.formTemplate")],z.prototype,"formTemplate",void 0);b.__decorate([T.property()],
z.prototype,"groupDisplay",void 0);b.__decorate([T.property()],z.prototype,"headingLevel",void 0);b.__decorate([T.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],z.prototype,"label",void 0);b.__decorate([x.aliasOf("viewModel.layer")],z.prototype,"layer",void 0);b.__decorate([T.property(),E.messageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")],z.prototype,"messages",void 0);b.__decorate([x.aliasOf("viewModel.strict")],z.prototype,"strict",void 0);b.__decorate([x.aliasOf("viewModel.title")],
z.prototype,"title",void 0);b.__decorate([T.property(),l.vmEvent(["value-change","submit"])],z.prototype,"viewModel",void 0);b.__decorate([x.aliasOf("viewModel.getValues")],z.prototype,"getValues",null);b.__decorate([x.aliasOf("viewModel.submit")],z.prototype,"submit",null);return z=b.__decorate([H.subclass("esri.widgets.FeatureForm")],z)})},"esri/widgets/FeatureForm/FeatureFormViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../intl ../../core/Evented ../../core/HandleOwner ../../core/Logger ../../core/ReentrantObjectPool ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../form/FormTemplate ../../support/arcadeOnDemand ./FieldConfig ./FieldGroupConfig ./InputField ./InputFieldGroup ./support/formTemplateUtils ../../intl/locale ../../intl/messages".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J,t){function q(n){return!!n.fieldConfig}const O=new b({attributes:{}}),L=Q.getLogger("esri.widgets.FeatureForm.FeatureFormViewModel");b=function(n){function G(B){B=n.call(this,B)||this;B._arcade=null;B._fieldPool=new V.ReentrantObjectPool(l);B._fieldGroupPool=new V.ReentrantObjectPool(y);B._featureClone=O.clone();B._initialFeature=O.clone();B._needsArcade=!1;B.messages=null;B.strict=!1;return B}e._inheritsLoose(G,n);var C=G.prototype;C.initialize=
function(){var B=this;const D=function(){var K=e._asyncToGenerator(function*(){return B.messages=yield t.fetchMessageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")});return function(){return K.apply(this,arguments)}}();D();this.handles.add(J.onLocaleChange(D));const A=T.init(this,"fieldConfig",function(){var K=e._asyncToGenerator(function*(P){const N=[];P&&P.forEach(v=>{N.push(v.visibilityExpression);v.fieldConfig?v.fieldConfig.forEach(({requiredExpression:u,visibilityExpression:U})=>{N.push(u,
U)}):N.push(v.requiredExpression)});P=N.filter(v=>!!v);const g=0<P.length;if(g){const v=yield k.loadArcade(),{arcadeUtils:u}=v;P.some(U=>u.hasGeometryOperations(U))&&(yield u.enableGeometryOperations(),A.remove());B._arcade=v;B.notifyChange("inputFields")}B._needsArcade=g});return function(P){return K.apply(this,arguments)}}());this.handles.add(A)};C.destroy=function(){this.layer=this.feature=this.fieldConfig=null;this._fieldPool.destroy();this._fieldGroupPool.destroy()};C.castFieldConfig=function(B){return B?
B.map(D=>D instanceof E||D instanceof r?D:D.fieldConfig?new r(D):new E(D)):null};C.findField=function(B){return this._allInputFields.find(D=>D.name===B)};C.getValue=function(B){var D;const {_featureClone:A,layer:K}=this,P=!(null==K||!K.getField(B));return null!=(D=A.getAttribute(B))?D:P?null:void 0};C.setValue=function(B,D){const {_featureClone:A,strict:K}=this,P=this.findField(B);D=""===D?null:D;if(P&&A.getAttribute(B)!==D){P.value=D;if(this.get("layer.typeIdField")===P.name&&"types"in this.layer){const N=
new Set;this.layer.types.forEach(g=>Object.keys(g.domains).forEach(v=>N.add(v)));N.forEach(g=>{(g=this.findField(g))&&g.notifyChange("domain")})}if(!K||P.valid)A.setAttribute(B,D),this.notifyChange("inputFields"),this._emitChangeEvent(P)}};C.getValues=function(){return{...this._featureClone.attributes}};C.submit=function(){var B=this._allInputFields;const D=B.filter(K=>K.valid).map(({name:K})=>K);B=B.filter(K=>!K.valid).map(({name:K})=>K);const A=this.getValues();this.emit("submit",{valid:D,invalid:B,
values:A})};C._disposeInputOrGroup=function(B){B.inputFields?this._disposeGroup(B):this._disposeInput(B)};C._disposeGroup=function(B){B.inputFields.forEach(D=>this._disposeInput(D));this._fieldGroupPool.release(B)};C._disposeInput=function(B){this._fieldPool.release(B)};C._emitChangeEvent=function({name:B,valid:D,value:A}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:B,value:A,valid:D})};e._createClass(G,[{key:"_allInputFields",get:function(){return this.inputFields.reduce((B,
D)=>D.inputFields?[...B,...D.inputFields]:[...B,D],[])}},{key:"_inputFieldCache",get:function(){const B=this._get("_inputFieldCache")||new Map;B.forEach(D=>this._disposeInputOrGroup(D));B.clear();(this.get("layer.fields")||[]).forEach(D=>B.set(D,this._fieldPool.acquire()));return B}},{key:"_inputFieldGroupCache",get:function(){const B=this._get("_inputFieldGroupCache")||new Map;B.forEach(D=>this._disposeInputOrGroup(D));B.clear();(this.fieldConfig||[]).filter(q).forEach(D=>B.set(D,this._fieldGroupPool.acquire()));
return B}},{key:"description",get:function(){var B;return null==(B=this.formTemplate)?void 0:B.description},set:function(B){void 0===B?this._clearOverride("description"):this._override("description",B)}},{key:"feature",get:function(){return this._get("feature")},set:function(B){this._featureClone=B?B.clone():O.clone();this._initialFeature=this._featureClone.clone();this._set("feature",B)}},{key:"fieldConfig",get:function(){const {formTemplate:B}=this;if(!B)return null;const {config:D,encounteredUnsupportedTypes:A}=
F.fieldConfigsFromFormTemplate(B);0<A.length&&L.warn("form-info::unsupported-type","encountered unsupported elements/types when parsing form info",A);return D},set:function(B){B?this._override("fieldConfig",B):this._clearOverride("fieldConfig")}},{key:"formTemplate",get:function(){return this.layer&&"formTemplate"in this.layer?this.layer.formTemplate:null},set:function(B){void 0===B?this._clearOverride("formTemplate"):this._override("formTemplate",B)}},{key:"inputFields",get:function(){const {_arcade:B,
_inputFieldCache:D,_inputFieldGroupCache:A,_featureClone:K,messages:P,_needsArcade:N,layer:g,state:v}=this,u=K.clone();if("ready"!==v||N&&!B)return[];const U=this.get("layer.fields")||[],X=this.fieldConfig||[];return(0!==X.length?X.map(fa=>{if(fa.fieldConfig){const va=A.get(fa);var ma=fa.fieldConfig.map(Ba=>{const Da=U.find(ba=>ba.name===Ba.name),la=D.get(Da);la.set({arcade:B,field:Da,config:Ba,feature:u,group:va,initialFeature:this._initialFeature,layer:g,messages:P,value:this.getValue(Da.name)});
return la}).filter(Ba=>Ba.visible);va.set({arcade:B,config:fa,feature:u,inputFields:ma});return va}ma=U.find(va=>va.name===fa.name);const ta=D.get(ma);ta.set({arcade:B,field:ma,config:fa,feature:u,group:null,initialFeature:this._initialFeature,layer:g,messages:P,value:this.getValue(ma.name)});return ta}):U.map(fa=>{const ma=D.get(fa);ma.set({arcade:B,config:null,field:fa,feature:u,group:null,initialFeature:this._initialFeature,layer:g,messages:P,value:this.getValue(fa.name)});return ma})).filter(fa=>
fa.visible)}},{key:"layer",get:function(){var B;return null!=(B=this.feature)&&B.sourceLayer&&"applyEdits"in this.feature.sourceLayer?this.feature.sourceLayer:null},set:function(B){B?this._override("layer",B):this._clearOverride("layer")}},{key:"state",get:function(){return this.messages&&this.get("layer.loaded")?"ready":"disabled"}},{key:"title",get:function(){var B;return null==(B=this.formTemplate)?void 0:B.title},set:function(B){void 0===B?this._clearOverride("title"):this._override("title",B)}},
{key:"valid",get:function(){const B=this._allInputFields;return 0<B.length&&B.every(({valid:D})=>D)}}]);return G}(I.HandleOwnerMixin(x.EventedAccessor));d.__decorate([H.property({readOnly:!0})],b.prototype,"_allInputFields",null);d.__decorate([H.property({readOnly:!0})],b.prototype,"_inputFieldCache",null);d.__decorate([H.property({readOnly:!0})],b.prototype,"_inputFieldGroupCache",null);d.__decorate([H.property()],b.prototype,"description",null);d.__decorate([H.property()],b.prototype,"feature",
null);d.__decorate([H.property()],b.prototype,"fieldConfig",null);d.__decorate([c.cast("fieldConfig")],b.prototype,"castFieldConfig",null);d.__decorate([H.property({type:m})],b.prototype,"formTemplate",null);d.__decorate([H.property({readOnly:!0,dependsOn:"messages feature fieldConfig layer.fields layer.loaded state".split(" ")})],b.prototype,"inputFields",null);d.__decorate([H.property()],b.prototype,"layer",null);d.__decorate([H.property()],b.prototype,"messages",void 0);d.__decorate([H.property()],
b.prototype,"state",null);d.__decorate([H.property()],b.prototype,"strict",void 0);d.__decorate([H.property()],b.prototype,"title",null);d.__decorate([H.property()],b.prototype,"valid",null);d.__decorate([H.property()],b.prototype,"getValues",null);d.__decorate([H.property()],b.prototype,"submit",null);return b=d.__decorate([f.subclass("esri.widgets.FeatureForm.FeatureFormViewModel")],b)})},"esri/widgets/FeatureForm/FieldConfig":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Format".split(" "),
function(e,d,b,z,x,I,Q,V,T){b=function(H){function w(h){h=H.call(this,h)||this;h.description=null;h.domain=null;h.editable=!0;h.editorType=null;h.format=null;h.hint=null;h.includeTime=!0;h.label=null;h.maxLength=-1;h.minLength=-1;h.name=null;h.noValueOptionLabel=null;h.offValue=null;h.onValue=null;h.required=!1;h.requiredExpression=null;h.showNoValueOption=!1;h.visibilityExpression=null;return h}e._inheritsLoose(w,H);return w}(b);d.__decorate([z.property()],b.prototype,"description",void 0);d.__decorate([z.property()],
b.prototype,"domain",void 0);d.__decorate([z.property()],b.prototype,"editable",void 0);d.__decorate([z.property()],b.prototype,"editorType",void 0);d.__decorate([z.property({type:T})],b.prototype,"format",void 0);d.__decorate([z.property()],b.prototype,"hint",void 0);d.__decorate([z.property()],b.prototype,"includeTime",void 0);d.__decorate([z.property()],b.prototype,"label",void 0);d.__decorate([z.property()],b.prototype,"maxLength",void 0);d.__decorate([z.property()],b.prototype,"minLength",void 0);
d.__decorate([z.property()],b.prototype,"name",void 0);d.__decorate([z.property()],b.prototype,"noValueOptionLabel",void 0);d.__decorate([z.property()],b.prototype,"offValue",void 0);d.__decorate([z.property()],b.prototype,"onValue",void 0);d.__decorate([z.property()],b.prototype,"required",void 0);d.__decorate([z.property()],b.prototype,"requiredExpression",void 0);d.__decorate([z.property()],b.prototype,"showNoValueOption",void 0);d.__decorate([z.property()],b.prototype,"visibilityExpression",void 0);
return b=d.__decorate([V.subclass("esri.widgets.FeatureForm.FieldConfig")],b)})},"esri/widgets/FeatureForm/Format":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(e,d,b,z,x,I,Q,V,T){z=function(H){function w(h){h=H.call(this,h)||this;h.digitSeparator=
!1;h.dateFormat=null;h.places=null;return h}e._inheritsLoose(w,H);return w}(z.JSONSupport);d.__decorate([x.property()],z.prototype,"digitSeparator",void 0);d.__decorate([x.property({json:{read:{source:"dateFormat",reader:b.fromJSON}}})],z.prototype,"dateFormat",void 0);d.__decorate([x.property()],z.prototype,"places",void 0);return z=d.__decorate([T.subclass("esri.widgets.FeatureForm.Format")],z)})},"esri/widgets/FeatureForm/FieldGroupConfig":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./FieldConfig".split(" "),
function(e,d,b,z,x,I,Q,V,T){b=function(H){function w(h){h=H.call(this,h)||this;h.description=null;h.fieldConfig=null;h.label=null;h.state="expanded";h.visibilityExpression=null;return h}e._inheritsLoose(w,H);w.prototype.castFieldConfig=function(h){return h?h.map(c=>c.declaredClass?c:new T(c)):null};return w}(b);d.__decorate([z.property()],b.prototype,"description",void 0);d.__decorate([z.property()],b.prototype,"fieldConfig",void 0);d.__decorate([Q.cast("fieldConfig")],b.prototype,"castFieldConfig",
null);d.__decorate([z.property()],b.prototype,"label",void 0);d.__decorate([z.property()],b.prototype,"state",void 0);d.__decorate([z.property()],b.prototype,"visibilityExpression",void 0);return b=d.__decorate([V.subclass("esri.widgets.FeatureForm.FieldGroupConfig")],b)})},"esri/widgets/FeatureForm/InputField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/CodedValueDomain ../../layers/support/Domain ../../layers/support/InheritedDomain ../../layers/support/RangeDomain ../../layers/support/domainUtils ../../layers/support/fieldUtils ../../intl/substitute".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k){const E={type:"number"},r={type:"number",intlOptions:{notation:"scientific"}},l={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};b=function(y){function F(t){t=y.call(this,t)||this;t.arcade=null;t.config=null;t.feature=null;t.field=null;t.initialFeature=null;t.layer=null;t.description=null;t.editorType=null;t.error=null;t.format=null;t.group=null;t.hint=null;t.messages=null;t.name=null;
return t}e._inheritsLoose(F,y);var J=F.prototype;J._isDomainCompatible=function(t){const {field:q}=this;if("coded-value"===(null==t?void 0:t.type)){const O=typeof t.codedValues[0].code;if("string"===O&&m.isStringField(q)||"number"===O&&m.isNumericField(q))return!0}return"range"===(null==t?void 0:t.type)&&m.isNumericField(q)||m.isDateField(q)?!0:!1};J._validate=function(){const {domain:t,field:q,initialFeature:O,minLength:L,required:n,type:G,valid:C,value:B}=this,D=n&&null===B,A=void 0!==C;return!D&&
O.getAttribute(q.name)===B&&A?null:"text"===G&&-1<L&&"string"===typeof B&&B.length<L?"length-validation-error::too-short":t?null!==B||n?f.validateDomainValue(t,B):null:D?m.TypeValidationError.INVALID_TYPE:m.validateFieldValue(q,B)};J._shownByDefault=function(){var t;const q=null==(t=this.field)?void 0:t.type;return"oid"!==q&&"global-id"!==q&&!this._isGeometryField()};J._isEditorField=function(){return-1<m.getFeatureEditFields(this.layer).indexOf(this.name)};J._isGeometryField=function(){return-1<
m.getFeatureGeometryFields(this.layer).indexOf(this.name)};J._toErrorMessage=function(){const {domain:t,field:q,messages:O,minLength:L,value:n,required:G,type:C}=this;var B=this.error;return G&&null===n?O.validationErrors.cannotBeNull:B===f.DomainValidationError.VALUE_OUT_OF_RANGE||B===m.NumericRangeValidationError.OUT_OF_RANGE?(B=f.getDomainRange(t)||m.getFieldRange(q),k.substitute(O.validationErrors.outsideRange,B,{format:{max:"date"===C?l:B.isInteger?E:r,min:"date"===C?l:B.isInteger?E:r}})):B===
f.DomainValidationError.INVALID_CODED_VALUE?O.validationErrors.invalidCodedValue:B===m.TypeValidationError.INVALID_TYPE?O.validationErrors.invalidType:"length-validation-error::too-short"===B?k.substitute(O.validationErrors.tooShort,{min:L}):null};e._createClass(F,[{key:"compiledFunc",get:function(){var t;const {arcade:q}=this;return q&&q.arcadeUtils.createFunction(null==(t=this.config)?void 0:t.visibilityExpression)}},{key:"compiledRequiredFunc",get:function(){var t;const {arcade:q}=this;return q&&
q.arcadeUtils.createFunction(null==(t=this.config)?void 0:t.requiredExpression)}},{key:"evaluatedRequirement",get:function(){const t=this.compiledRequiredFunc;if(!t)return null;const {arcade:q}=this;return q.arcadeUtils.executeFunction(t,q.arcadeUtils.createExecContext(this.feature))}},{key:"evaluatedVisibility",get:function(){const t=this.compiledFunc;if(!t)return null;const {arcade:q}=this;return q.arcadeUtils.executeFunction(t,q.arcadeUtils.createExecContext(this.feature))}},{key:"domain",get:function(){var t,
q,{typeIdField:O}=this.layer;const L=O===this.name;var n=null==(t=this.field)?void 0:t.domain;if(L&&!n)return new H({name:"__internal-type-based-coded-value-domain__",codedValues:this.layer.types.map(({id:G,name:C})=>({code:G,name:C}))});({feature:t}=this);O=O&&this.layer.getFieldDomain(this.name,{feature:t})||n;n=null==(q=this.config)?void 0:q.domain;return this._isDomainCompatible(n)?n:O}},{key:"editable",get:function(){var t,q;const {config:O,field:L,layer:n,name:G}=this,C=n.capabilities.operations.supportsEditing&&
L.editable,B=null==(t=n.popupTemplate)?void 0:null==(q=t.fieldInfos)?void 0:q.find(({fieldName:D})=>D===G);t=O?!1!==O.editable:!1!==(null==B?void 0:B.isEditable);return C&&t}},{key:"errorMessage",get:function(){return this._toErrorMessage()}},{key:"includeTime",get:function(){var t;const q=null==(t=this.config)?void 0:t.includeTime;return void 0===q?!0:q}},{key:"label",get:function(){var t;return(null==(t=this.config)?void 0:t.label)||this.field.alias||this.field.name}},{key:"maxLength",get:function(){var t,
q;if("date"===this.type)return-1;const O=null==(t=this.field)?void 0:t.length;t=null==(q=this.config)?void 0:q.maxLength;return!isNaN(t)&&-1<=t&&(-1===O||t<=O)?t:O}},{key:"minLength",get:function(){var t,q;if("date"===this.type)return-1;const O=null==(t=this.field)?void 0:t.length;t=null==(q=this.config)?void 0:q.minLength;return!isNaN(t)&&-1<=t&&(-1===O||t<=O)?t:-1}},{key:"required",get:function(){var t,q;return this.editable?null!=(t=this.field)&&t.nullable?"boolean"===typeof this.evaluatedRequirement?
this.evaluatedRequirement:!0===(null==(q=this.config)?void 0:q.required):!0:!1}},{key:"type",get:function(){const {field:t}=this;return m.isNumericField(t)?"number":m.isStringField(t)?"text":m.isDateField(t)?"date":"unsupported"}},{key:"valid",get:function(){const t=this.editable?this._validate():null;this._set("error",t);return null===t}},{key:"value",get:function(){return this._get("value")},set:function(t){this.notifyChange("evaluatedVisibility");this._set("value",t)}},{key:"visible",get:function(){return this._isEditorField()?
!1:"boolean"===typeof this.evaluatedVisibility?this.evaluatedVisibility:!!this.config||this._shownByDefault()}}]);return F}(z);d.__decorate([x.property()],b.prototype,"arcade",void 0);d.__decorate([x.property()],b.prototype,"compiledFunc",null);d.__decorate([x.property()],b.prototype,"compiledRequiredFunc",null);d.__decorate([x.property()],b.prototype,"config",void 0);d.__decorate([x.property()],b.prototype,"evaluatedRequirement",null);d.__decorate([x.property()],b.prototype,"evaluatedVisibility",
null);d.__decorate([x.property()],b.prototype,"feature",void 0);d.__decorate([x.property()],b.prototype,"field",void 0);d.__decorate([x.property()],b.prototype,"initialFeature",void 0);d.__decorate([x.property()],b.prototype,"layer",void 0);d.__decorate([x.property({aliasOf:"config.description"})],b.prototype,"description",void 0);d.__decorate([x.property()],b.prototype,"domain",null);d.__decorate([x.property()],b.prototype,"editable",null);d.__decorate([x.property({aliasOf:"config.editorType"})],
b.prototype,"editorType",void 0);d.__decorate([x.property({readOnly:!0})],b.prototype,"error",void 0);d.__decorate([x.property({dependsOn:["error","messages","value"]})],b.prototype,"errorMessage",null);d.__decorate([x.property({aliasOf:"config.format"})],b.prototype,"format",void 0);d.__decorate([x.property()],b.prototype,"group",void 0);d.__decorate([x.property({aliasOf:"config.hint"})],b.prototype,"hint",void 0);d.__decorate([x.property()],b.prototype,"includeTime",null);d.__decorate([x.property()],
b.prototype,"label",null);d.__decorate([x.property()],b.prototype,"maxLength",null);d.__decorate([x.property()],b.prototype,"minLength",null);d.__decorate([x.property()],b.prototype,"messages",void 0);d.__decorate([x.property({aliasOf:"field.name"})],b.prototype,"name",void 0);d.__decorate([x.property()],b.prototype,"required",null);d.__decorate([x.property()],b.prototype,"type",null);d.__decorate([x.property()],b.prototype,"valid",null);d.__decorate([x.property({value:null})],b.prototype,"value",
null);d.__decorate([x.property()],b.prototype,"visible",null);return b=d.__decorate([T.subclass("esri.widgets.FeatureForm.InputField")],b)})},"esri/widgets/FeatureForm/InputFieldGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V,T,H){b=function(w){function h(c){c=w.call(this,c)||this;c.arcade=null;c.config=null;c.description=null;c.feature=null;c.label=null;c.state=null;c.visibilityExpression=null;return c}e._inheritsLoose(h,w);h.prototype._dirtyEvaluatedVisibility=function(){this.visibilityExpression&&this.notifyChange("evaluatedVisibility")};e._createClass(h,[{key:"compiledFunc",get:function(){const {arcade:c}=this;return c&&c.arcadeUtils.createFunction(this.visibilityExpression)}},{key:"evaluatedVisibility",
get:function(){const c=this.compiledFunc;if(c){var {arcade:f}=this;return f.arcadeUtils.executeFunction(c,f.arcadeUtils.createExecContext(this.feature))}}},{key:"inputFields",get:function(){return this._get("inputFields")},set:function(c){this.handles.removeAll();c&&this.handles.add(c.map(f=>f.watch("visible",this._dirtyEvaluatedVisibility)));this._set("inputFields",c)}},{key:"visible",get:function(){return!1!==this.evaluatedVisibility&&this.inputFields&&this.inputFields.some(c=>c.visible)}}]);return h}(z.HandleOwnerMixin(b));
d.__decorate([T.property()],b.prototype,"arcade",void 0);d.__decorate([T.property()],b.prototype,"compiledFunc",null);d.__decorate([T.property()],b.prototype,"config",void 0);d.__decorate([T.property()],b.prototype,"evaluatedVisibility",null);d.__decorate([x.aliasOf("config.description")],b.prototype,"description",void 0);d.__decorate([T.property()],b.prototype,"feature",void 0);d.__decorate([T.property()],b.prototype,"inputFields",null);d.__decorate([x.aliasOf("config.label")],b.prototype,"label",
void 0);d.__decorate([x.aliasOf("config.state")],b.prototype,"state",void 0);d.__decorate([x.aliasOf("config.visibilityExpression")],b.prototype,"visibilityExpression",void 0);d.__decorate([T.property()],b.prototype,"visible",null);return b=d.__decorate([H.subclass("esri.widgets.FeatureForm.InputFieldGroup")],b)})},"esri/widgets/FeatureForm/support/formTemplateUtils":function(){define(["exports","../../../layers/support/RangeDomain","../FieldConfig","../FieldGroupConfig"],function(e,d,b,z){function x(I,
Q,V,T=!0){return I.map(H=>{if("field"===H.type){{const {description:h,domain:c,editable:f,fieldName:m,hint:k,input:E,label:r,requiredExpression:l,visibilityExpression:y}=H;H=new b({description:h,domain:c,editable:f,hint:k,label:r,name:m,requiredExpression:Q[l]||null,visibilityExpression:Q[y]||null});if(E)if("barcode-scanner"===E.type||"text-area"===E.type||"text-box"===E.type)H.editorType=E.type,H.minLength=E.minLength,H.maxLength=E.maxLength;else if("combo-box"===E.type||"radio-buttons"===E.type)H.editorType=
E.type,H.noValueOptionLabel=E.noValueOptionLabel,H.showNoValueOption=E.showNoValueOption;else if("switch"===E.type)H.editorType=E.type,H.offValue=E.offValue,H.onValue=E.onValue;else if("datetime-picker"===E.type){H.editorType=E.type;H.includeTime=E.includeTime;const {max:F,min:J}=E;if(F||J){var w="range"===(null==c?void 0:c.type)?Math.min(null==F?void 0:F.getTime(),c.maxValue):null==F?void 0:F.getTime();const t="range"===(null==c?void 0:c.type)?Math.max(null==J?void 0:J.getTime(),c.minValue):null==
J?void 0:J.getTime();H.domain=new d({maxValue:w,minValue:t,name:"__internal-range-domain-based-on-datetime-picker-input__"})}}else V.push({type:"unsupported-input-type",details:E})}return H}if("group"===H.type){if(!T)return V.push({type:"nested-group",details:H}),null;w=Q[H.visibilityExpression]||null;return new z({description:H.description,state:H.initialState,fieldConfig:x(H.elements,Q,V,!1),label:H.label,visibilityExpression:w})}V.push({type:"unsupported-element-type",details:H});return null}).filter(H=>
!!H)}e.fieldConfigsFromFormTemplate=function(I){var Q;const V={},T=[];null==(Q=I.expressionInfos)?void 0:Q.map(H=>V[H.name]=H.expression);return{config:x(I.elements,V,T),encounteredUnsupportedTypes:T}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),function(e,d,b,z,x,I){const Q={heading:"esri-widget__heading"};e.CSS=Q;e.Heading=function(V,T){const H=
`h${d.clamp(Math.ceil(V.level),1,6)}`;delete V.level;return I.tsx(H,{...V,class:b.classes(Q.heading,V.class)},T)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/datetime":function(){define(["exports"],function(e){function d(a){return"undefined"===typeof a}function b(a){return"number"===typeof a}function z(a){return"number"===typeof a&&0===a%1}function x(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function I(a,p,S){if(0!==a.length)return a.reduce((Z,
ea)=>{ea=[p(ea),ea];return Z?S(Z[0],ea[0])===Z[0]?Z:ea:ea},null)[1]}function Q(a,p){return p.reduce((S,Z)=>{S[Z]=a[Z];return S},{})}function V(a,p){return Object.prototype.hasOwnProperty.call(a,p)}function T(a,p,S){return z(a)&&a>=p&&a<=S}function H(a,p=2){const S=0>a?"-":"";a=S?-1*a:a;p=a.toString().length<p?("0".repeat(p)+a).slice(-p):a.toString();return`${S}${p}`}function w(a){if(!d(a)&&null!==a&&""!==a)return parseInt(a,10)}function h(a){if(!d(a)&&null!==a&&""!==a)return parseFloat(a)}function c(a){if(!d(a)&&
null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function f(a,p,S=!1){p=10**p;return(S?Math.trunc:Math.round)(a*p)/p}function m(a){return 0===a%4&&(0!==a%100||0===a%400)}function k(a,p){var S=p-1;S=S-12*Math.floor(S/12)+1;return 2===S?m(a+(p-S)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][S-1]}function E(a){let p=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(p=new Date(p),p.setUTCFullYear(p.getUTCFullYear()-1900));return+p}function r(a){var p=
a-1;p=(p+Math.floor(p/4)-Math.floor(p/100)+Math.floor(p/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===p?53:52}function l(a){return 99<a?a:60<a?1900+a:2E3+a}function y(a,p,S,Z=null){a=new Date(a);const ea={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};Z&&(ea.timeZone=Z);return(p=(new Intl.DateTimeFormat(S,{timeZoneName:p,...ea})).formatToParts(a).find(ha=>"timezonename"===ha.type.toLowerCase()))?p.value:null}function F(a,
p){a=parseInt(a,10);Number.isNaN(a)&&(a=0);p=parseInt(p,10)||0;p=0>a||Object.is(a,-0)?-p:p;return 60*a+p}function J(a){const p=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(p))throw new $a(`Invalid unit value ${a}`);return p}function t(a,p){const S={};for(const Z in a)if(V(a,Z)){const ea=a[Z];void 0!==ea&&null!==ea&&(S[p(Z)]=J(ea))}return S}function q(a,p){const S=Math.trunc(Math.abs(a/60)),Z=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(p){case "short":return`${a}${H(S,2)}:${H(Z,2)}`;
case "narrow":return`${a}${S}${0<Z?`:${Z}`:""}`;case "techie":return`${a}${H(S,2)}${H(Z,2)}`;default:throw new RangeError(`Value format ${p} is out of range for property format`);}}function O(a){return Q(a,["hour","minute","second","millisecond"])}function L(a){switch(a){case "narrow":return[...Fc];case "short":return[...Ob];case "long":return[...Gc];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}
function n(a){switch(a){case "narrow":return[...Hc];case "short":return[...Pb];case "long":return[...Qb];case "numeric":return"1234567".split("");default:return null}}function G(a){switch(a){case "narrow":return[...Ic];case "short":return[...Jc];case "long":return[...Kc];default:return null}}function C(a,p,S="always",Z=!1){const ea={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],
seconds:["second","sec."]};var ha=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===S&&ha)switch(S="days"===a,p){case 1:return S?"tomorrow":`next ${ea[a][0]}`;case -1:return S?"yesterday":`last ${ea[a][0]}`;case 0:return S?"today":`this ${ea[a][0]}`}S=Object.is(p,-0)||0>p;p=Math.abs(p);ha=1===p;const pa=ea[a];a=Z?ha?pa[1]:pa[2]||pa[1]:ha?ea[a][0]:a;return S?`${p} ${a} ago`:`in ${p} ${a}`}function B(a,p){let S="";for(const Z of a)S=Z.literal?S+Z.val:S+p(Z.val);return S}function D(a,p){if(d(a)||
null===a)return p;if(a instanceof ob)return a;if("string"===typeof a){const S=a.toLowerCase();return"local"===S||"system"===S?p:"utc"===S||"gmt"===S?Wa.utcInstance:db.isValidSpecifier(S)?db.create(a):Wa.parseSpecifier(S)||new Rb(a)}return b(a)?Wa.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Rb(a)}function A(a,p={}){const S=JSON.stringify([a,p]);let Z=Bb[S];Z||(Z=new Intl.DateTimeFormat(a,p),Bb[S]=Z);return Z}function K(a,p={}){const S=JSON.stringify([a,p]);let Z=Cb[S];
Z||(Z=new Intl.NumberFormat(a,p),Cb[S]=Z);return Z}function P(a,p={}){const {base:S,...Z}=p,ea=JSON.stringify([a,Z]);let ha=Db[ea];ha||(ha=new Intl.RelativeTimeFormat(a,p),Db[ea]=ha);return ha}function N(a){const p=[];for(let S=1;12>=S;S++){const Z=Ga.utc(2016,S,1);p.push(a(Z))}return p}function g(a){const p=[];for(let S=1;7>=S;S++){const Z=Ga.utc(2016,11,13+S);p.push(a(Z))}return p}function v(a,p,S,Z,ea){a=a.listingMode(S);return"error"===a?null:"en"===a?Z(p):ea(p)}function u(...a){a=a.reduce((p,
S)=>p+S.source,"");return RegExp(`^${a}$`)}function U(...a){return p=>a.reduce(([S,Z,ea],ha)=>{const [pa,ua,xa]=ha(p,ea);return[{...S,...pa},Z||ua,xa]},[{},null,1]).slice(0,2)}function X(a,...p){if(null==a)return[null,null];for(const [S,Z]of p)if(p=S.exec(a))return Z(p);return[null,null]}function fa(...a){return(p,S)=>{const Z={};let ea;for(ea=0;ea<a.length;ea++)Z[a[ea]]=w(p[S+ea]);return[Z,null,S+ea]}}function ma(a,p,S){a=a[p];return d(a)?S:w(a)}function ta(a,p){return[{year:ma(a,p),month:ma(a,p+
1,1),day:ma(a,p+2,1)},null,p+3]}function va(a,p){return[{hours:ma(a,p,0),minutes:ma(a,p+1,0),seconds:ma(a,p+2,0),milliseconds:c(a[p+3])},null,p+4]}function Ba(a,p){const S=!a[p]&&!a[p+1];a=F(a[p+1],a[p+2]);return[{},S?null:Wa.instance(a),p+3]}function Da(a,p){return[{},a[p]?db.create(a[p]):null,p+1]}function la(a){const [p,S,Z,ea,ha,pa,ua,xa,La]=a,Fa="-"===p[0];a=xa&&"-"===xa[0];const Ja=(Ma,fb=!1)=>void 0!==Ma&&(fb||Ma&&Fa)?-Ma:Ma;return[{years:Ja(h(S)),months:Ja(h(Z)),weeks:Ja(h(ea)),days:Ja(h(ha)),
hours:Ja(h(pa)),minutes:Ja(h(ua)),seconds:Ja(h(xa),"-0"===xa),milliseconds:Ja(c(La),a)}]}function ba(a,p,S,Z,ea,ha,pa){p={year:2===p.length?l(w(p)):w(p),month:Ob.indexOf(S)+1,day:w(Z),hour:w(ea),minute:w(ha)};pa&&(p.second=w(pa));a&&(p.weekday=3<a.length?Qb.indexOf(a)+1:Pb.indexOf(a)+1);return p}function aa(a){const [,p,S,Z,ea,ha,pa,ua,xa,La,Fa,Ja]=a;a=ba(p,ea,Z,S,ha,pa,ua);let Ma;Ma=xa?Lc[xa]:La?0:F(Fa,Ja);return[a,new Wa(Ma)]}function R(a){const [,p,S,Z,ea,ha,pa,ua]=a;return[ba(p,ea,Z,S,ha,pa,ua),
Wa.utcInstance]}function Y(a){const [,p,S,Z,ea,ha,pa,ua]=a;return[ba(p,ua,S,Z,ea,ha,pa),Wa.utcInstance]}function W(a,p,S=!1){a={values:S?p.values:{...a.values,...p.values||{}},loc:a.loc.clone(p.loc),conversionAccuracy:p.conversionAccuracy||a.conversionAccuracy};return new Ka(a)}function ca(a,p,S,Z,ea){a=a[ea][S];var ha=p[S]/a;ha=Math.sign(ha)!==Math.sign(Z[ea])&&0!==Z[ea]&&1>=Math.abs(ha)?0>ha?Math.floor(ha):Math.ceil(ha):Math.trunc(ha);Z[ea]+=ha;p[S]-=ha*a}function ia(a,p){Mc.reduce((S,Z)=>{if(d(p[Z]))return S;
S&&ca(a,p,S,p,Z);return Z},null)}function ja(a,p){a=p.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Ka.fromMillis(a).as("days"))}function na(a,p,S){var Z=[["years",(ua,xa)=>xa.year-ua.year],["quarters",(ua,xa)=>xa.quarter-ua.quarter],["months",(ua,xa)=>xa.month-ua.month+12*(xa.year-ua.year)],["weeks",(ua,xa)=>{ua=ja(ua,xa);return(ua-ua%7)/7}],["days",ja]];const ea={};let ha,pa;for(const [ua,xa]of Z)0<=S.indexOf(ua)&&(ha=
ua,Z=xa(a,p),pa=a.plus({[ua]:Z}),pa>p?(a=a.plus({[ua]:Z-1}),--Z):a=pa,ea[ua]=Z);return[a,ea,pa,ha]}function ka(a,p,S,Z){let [ea,ha,pa,ua]=na(a,p,S);a=p-ea;S=S.filter(xa=>0<=["hours","minutes","seconds","milliseconds"].indexOf(xa));0===S.length&&(pa<p&&(pa=ea.plus({[ua]:1})),pa!==ea&&(ha[ua]=(ha[ua]||0)+a/(pa-ea)));p=Ka.fromObject(ha,Z);return 0<S.length?Ka.fromMillis(a,Z).shiftTo(...S).plus(p):p}function Aa({numberingSystem:a},p=""){return new RegExp(`${Eb[a||"latn"]}${p}`)}function qa(a,p=S=>S){return{regex:a,
deser:([S])=>{{let Z=parseInt(S,10);if(isNaN(Z)){Z="";for(let ea=0;ea<S.length;ea++){const ha=S.charCodeAt(ea);if(-1!==S[ea].search(Eb.hanidec))Z+=Nc.indexOf(S[ea]);else for(const pa in Sb){const [ua,xa]=Sb[pa];ha>=ua&&ha<=xa&&(Z+=ha-ua)}}S=parseInt(Z,10)}else S=Z}return p(S)}}}function sa(a){return a.replace(/\./g,"\\.?").replace(Fb,Tb)}function ra(a,p){return null===a?null:{regex:RegExp(a.map(sa).join("|")),deser:([S])=>a.findIndex(Z=>S.replace(/\./g,"").replace(Fb," ").toLowerCase()===Z.replace(/\./g,
"").replace(Fb," ").toLowerCase())+p}}function wa(a,p){return{regex:a,deser:([,S,Z])=>F(S,Z),groups:p}}function Ea(a){return{regex:a,deser:([p])=>p}}function Ca(a,p){const S=Aa(p),Z=Aa(p,"{2}"),ea=Aa(p,"{3}"),ha=Aa(p,"{4}"),pa=Aa(p,"{6}"),ua=Aa(p,"{1,2}"),xa=Aa(p,"{1,3}"),La=Aa(p,"{1,6}"),Fa=Aa(p,"{1,9}"),Ja=Aa(p,"{2,4}"),Ma=Aa(p,"{4,6}"),fb=pb=>({regex:RegExp(pb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Oc])=>Oc,literal:!0}),jb=(pb=>{if(a.literal)return fb(pb);switch(pb.val){case "G":return ra(p.eras("short",
!1),0);case "GG":return ra(p.eras("long",!1),0);case "y":return qa(La);case "yy":return qa(Ja,l);case "yyyy":return qa(ha);case "yyyyy":return qa(Ma);case "yyyyyy":return qa(pa);case "M":return qa(ua);case "MM":return qa(Z);case "MMM":return ra(p.months("short",!0,!1),1);case "MMMM":return ra(p.months("long",!0,!1),1);case "L":return qa(ua);case "LL":return qa(Z);case "LLL":return ra(p.months("short",!1,!1),1);case "LLLL":return ra(p.months("long",!1,!1),1);case "d":return qa(ua);case "dd":return qa(Z);
case "o":return qa(xa);case "ooo":return qa(ea);case "HH":return qa(Z);case "H":return qa(ua);case "hh":return qa(Z);case "h":return qa(ua);case "mm":return qa(Z);case "m":return qa(ua);case "q":return qa(ua);case "qq":return qa(Z);case "s":return qa(ua);case "ss":return qa(Z);case "S":return qa(xa);case "SSS":return qa(ea);case "u":return Ea(Fa);case "uu":return Ea(ua);case "uuu":return qa(S);case "a":return ra(p.meridiems(),0);case "kkkk":return qa(ha);case "kk":return qa(Ja,l);case "W":return qa(ua);
case "WW":return qa(Z);case "E":case "c":return qa(S);case "EEE":return ra(p.weekdays("short",!1,!1),1);case "EEEE":return ra(p.weekdays("long",!1,!1),1);case "ccc":return ra(p.weekdays("short",!0,!1),1);case "cccc":return ra(p.weekdays("long",!0,!1),1);case "Z":case "ZZ":return wa(new RegExp(`([+-]${ua.source})(?::(${Z.source}))?`),2);case "ZZZ":return wa(new RegExp(`([+-]${ua.source})(${Z.source})?`),2);case "z":return Ea(/[a-z_+-/]{1,256}?/i);default:return fb(pb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};
jb.token=a;return jb}function Ha(a){return[`^${a.map(p=>p.regex).reduce((p,S)=>`${p}(${S.source})`,"")}$`,a]}function Oa(a,p,S){if(a=a.match(p)){p={};let Z=1;for(const ea in S)if(V(S,ea)){const ha=S[ea],pa=ha.groups?ha.groups+1:1;!ha.literal&&ha.token&&(p[ha.token.val[0]]=ha.deser(a.slice(Z,Z+pa)));Z+=pa}return[a,p]}return[a,{}]}function Xa(a){const p=Z=>{switch(Z){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";
case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let S;S=d(a.Z)?d(a.z)?null:db.create(a.z):new Wa(a.Z);d(a.q)||(a.M=3*(a.q-1)+1);d(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);d(a.u)||(a.S=c(a.u));return[Object.keys(a).reduce((Z,ea)=>{const ha=p(ea);ha&&(Z[ha]=a[ea]);return Z},{}),S]}function Ya(){Gb||(Gb=Ga.fromMillis(1555555555555));
return Gb}function ab(a,p){if(a.literal)return a;const S=Za.macroTokenToFormatOpts(a.val);if(!S)return a;p=Za.create(p,S).formatDateTimeParts(Ya()).map(Z=>{{const {type:ha,value:pa}=Z;if("literal"===ha)Z={literal:!0,val:pa};else{Z=S[ha];var ea=Pc[ha];"object"===typeof ea&&(ea=ea[Z]);Z=ea?{literal:!1,val:ea}:void 0}}return Z});return p.includes(void 0)?a:p}function kb(a,p){return Array.prototype.concat(...a.map(S=>ab(S,p)))}function qb(a,p,S){S=kb(Za.parseFormat(S),a);var Z=S.map(ha=>Ca(ha,a));const ea=
Z.find(ha=>ha.invalidReason);if(ea)return{input:p,tokens:S,invalidReason:ea.invalidReason};{const [ha,pa]=Ha(Z);Z=RegExp(ha,"i");const [ua,xa]=Oa(p,Z,pa),[La,Fa]=xa?Xa(xa):[null,null];if(V(xa,"a")&&V(xa,"H"))throw new rb("Can't include meridiem when specifying 24-hour format");return{input:p,tokens:S,regex:Z,rawMatches:ua,matches:xa,result:La,zone:Fa}}}function Va(a,p){return new bb("unit out of range",`you specified ${p} (of type ${typeof p}) as a ${a}, which is invalid`)}function Ta(a,p,S){a=(new Date(Date.UTC(a,
p-1,S))).getUTCDay();return 0===a?7:a}function sb(a,p){a=m(a)?Hb:Ib;const S=a.findIndex(Z=>Z<p);return{month:S+1,day:p-a[S]}}function lb(a){const {year:p,month:S,day:Z}=a;var ea=Z+(m(p)?Hb:Ib)[S-1];const ha=Ta(p,S,Z);ea=Math.floor((ea-ha+10)/7);let pa;1>ea?(pa=p-1,ea=r(pa)):ea>r(p)?(pa=p+1,ea=1):pa=p;return{weekYear:pa,weekNumber:ea,weekday:ha,...O(a)}}function mb(a){const {weekYear:p,weekNumber:S,weekday:Z}=a;var ea=Ta(p,1,4),ha=m(p)?366:365;ea=7*S+Z-ea-3;1>ea?(ha=p-1,ea+=m(ha)?366:365):ea>ha?(ha=
p+1,ea-=m(p)?366:365):ha=p;const {month:pa,day:ua}=sb(ha,ea);return{year:ha,month:pa,day:ua,...O(a)}}function tb(a){const {year:p,month:S,day:Z}=a;var ea=Z+(m(p)?Hb:Ib)[S-1];return{year:p,ordinal:ea,...O(a)}}function M(a){const {year:p,ordinal:S}=a,{month:Z,day:ea}=sb(p,S);return{year:p,month:Z,day:ea,...O(a)}}function da(a){const p=z(a.year),S=T(a.month,1,12),Z=T(a.day,1,k(a.year,a.month));return p?S?Z?!1:Va("day",a.day):Va("month",a.month):Va("year",a.year)}function oa(a){const {hour:p,minute:S,
second:Z,millisecond:ea}=a;a=T(p,0,23)||24===p&&0===S&&0===Z&&0===ea;const ha=T(S,0,59),pa=T(Z,0,59),ua=T(ea,0,999);return a?ha?pa?ua?!1:Va("millisecond",ea):Va("second",Z):Va("minute",S):Va("hour",p)}function za(a){return new bb("unsupported zone",`the zone "${a.name}" is not supported`)}function ya(a){null===a.weekData&&(a.weekData=lb(a.c));return a.weekData}function Ia(a,p){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Ga({...a,...p,old:a})}function Na(a,p,S){let Z=
a-6E4*p;const ea=S.offset(Z);if(p===ea)return[Z,p];Z-=6E4*(ea-p);p=S.offset(Z);return ea===p?[Z,ea]:[a-6E4*Math.min(ea,p),Math.max(ea,p)]}function Ua(a,p){a=new Date(a+6E4*p);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function Ra(a,p,S){return Na(E(a),p,S)}function cb(a,p){const S=a.o;var Z=a.c.year+Math.trunc(p.years);const ea=a.c.month+Math.trunc(p.months)+3*
Math.trunc(p.quarters);Z={...a.c,year:Z,month:ea,day:Math.min(a.c.day,k(Z,ea))+Math.trunc(p.days)+7*Math.trunc(p.weeks)};p=Ka.fromObject({years:p.years-Math.trunc(p.years),quarters:p.quarters-Math.trunc(p.quarters),months:p.months-Math.trunc(p.months),weeks:p.weeks-Math.trunc(p.weeks),days:p.days-Math.trunc(p.days),hours:p.hours,minutes:p.minutes,seconds:p.seconds,milliseconds:p.milliseconds}).as("milliseconds");Z=E(Z);let [ha,pa]=Na(Z,S,a.zone);0!==p&&(ha+=p,pa=a.zone.offset(ha));return{ts:ha,o:pa}}
function hb(a,p,S,Z,ea){const {setZone:ha,zone:pa}=S;return a&&0!==Object.keys(a).length?(a=Ga.fromObject(a,{...S,zone:p||pa}),ha?a:a.setZone(pa)):Ga.invalid(new bb("unparsable",`the input "${ea}" can't be parsed as ${Z}`))}function eb(a,p,S=!0){return a.isValid?Za.create(Pa.create("en-US"),{allowZ:S,forceSimple:!0}).formatDateTimeFromString(a,p):null}function ub(a,{suppressSeconds:p=!1,suppressMilliseconds:S=!1,includeOffset:Z,includePrefix:ea=!1,includeZone:ha=!1,spaceZone:pa=!1,format:ua="extended"}){let xa=
"basic"===ua?"HHmm":"HH:mm";p&&0===a.second&&0===a.millisecond||(xa+="basic"===ua?"ss":":ss",S&&0===a.millisecond||(xa+=".SSS"));(ha||Z)&&pa&&(xa+=" ");ha?xa+="z":Z&&(xa+="basic"===ua?"ZZZ":"ZZ");a=eb(a,xa);ea&&(a="T"+a);return a}function vb(a){const p={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",
weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!p)throw new Ub(a);return p}function Vb(a,p){const S=D(p.zone,Sa.defaultZone);p=Pa.fromObject(p);const Z=Sa.now();var ea;if(d(a.year))a=Z;else{for(const ha of Wb)d(a[ha])&&(a[ha]=Xb[ha]);if(ea=da(a)||oa(a))return Ga.invalid(ea);ea=S.offset(Z);[a,ea]=Ra(a,ea,S)}return new Ga({ts:a,zone:S,loc:p,o:ea})}function Yb(a,
p,S){const Z=d(S.round)?!0:S.round,ea=(pa,ua)=>{pa=f(pa,Z||S.calendary?0:2,!0);return p.loc.clone(S).relFormatter(S).format(pa,ua)},ha=pa=>S.calendary?p.hasSame(a,pa)?0:p.startOf(pa).diff(a.startOf(pa),pa).get(pa):p.diff(a,pa).get(pa);if(S.unit)return ea(ha(S.unit),S.unit);for(const pa of S.units){const ua=ha(pa);if(1<=Math.abs(ua))return ea(ua,pa)}return ea(a>p?-0:0,S.units[S.units.length-1])}function Zb(a){let p={};0<a.length&&"object"===typeof a[a.length-1]?(p=a[a.length-1],a=Array.from(a).slice(0,
a.length-1)):a=Array.from(a);return[p,a]}function wb(a){if(Ga.isDateTime(a))return a;if(a&&a.valueOf&&b(a.valueOf()))return Ga.fromJSDate(a);if(a&&"object"===typeof a)return Ga.fromObject(a);throw new $a(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class ib extends Error{}class Qc extends ib{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class Rc extends ib{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class Sc extends ib{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}
class rb extends ib{}class Ub extends ib{constructor(a){super(`Invalid unit ${a}`)}}class $a extends ib{}class gb extends ib{constructor(){super("Zone is an abstract class")}}const Jb={year:"numeric",month:"numeric",day:"numeric"},$b={year:"numeric",month:"short",day:"numeric"},Tc={year:"numeric",month:"short",day:"numeric",weekday:"short"},ac={year:"numeric",month:"long",day:"numeric"},bc={year:"numeric",month:"long",day:"numeric",weekday:"long"},cc={hour:"numeric",minute:"numeric"},dc={hour:"numeric",
minute:"numeric",second:"numeric"},ec={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},fc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},gc={hour:"numeric",minute:"numeric",hourCycle:"h23"},hc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},ic={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},jc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},kc={year:"numeric",
month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},lc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},mc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},nc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Uc={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},oc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",
timeZoneName:"short"},pc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},qc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},rc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},sc=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,Gc="January February March April May June July August September October November December".split(" "),
Ob="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Fc="JFMAMJJASOND".split(""),Qb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Pb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Hc="MTWTFSS".split(""),tc=["AM","PM"],Kc=["Before Christ","Anno Domini"],Jc=["BC","AD"],Ic=["B","A"],Vc={D:Jb,DD:$b,DDD:ac,DDDD:bc,t:cc,tt:dc,ttt:ec,tttt:fc,T:gc,TT:hc,TTT:ic,TTTT:jc,f:kc,ff:mc,fff:oc,ffff:qc,F:lc,FF:nc,FFF:pc,FFFF:rc};class Za{static create(a,p={}){return new Za(a,p)}static parseFormat(a){let p=
null,S="",Z=!1;const ea=[];for(let ha=0;ha<a.length;ha++){const pa=a.charAt(ha);"'"===pa?(0<S.length&&ea.push({literal:Z,val:S}),p=null,S="",Z=!Z):Z?S+=pa:pa===p?S+=pa:(0<S.length&&ea.push({literal:!1,val:S}),p=S=pa)}0<S.length&&ea.push({literal:Z,val:S});return ea}static macroTokenToFormatOpts(a){return Vc[a]}constructor(a,p){this.opts=p;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,p){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,
{...this.opts,...p}).format()}formatDateTime(a,p={}){return this.loc.dtFormatter(a,{...this.opts,...p}).format()}formatDateTimeParts(a,p={}){return this.loc.dtFormatter(a,{...this.opts,...p}).formatToParts()}resolvedOptions(a,p={}){return this.loc.dtFormatter(a,{...this.opts,...p}).resolvedOptions()}num(a,p=0){if(this.opts.forceSimple)return H(a,p);const S={...this.opts};0<p&&(S.padTo=p);return this.loc.numberFormatter(S).format(a)}formatDateTimeFromString(a,p){const S="en"===this.loc.listingMode(),
Z=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ea=(Fa,Ja)=>this.loc.extract(a,Fa,Ja),ha=Fa=>a.isOffsetFixed&&0===a.offset&&Fa.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Fa.format):"",pa=(Fa,Ja)=>S?L(Fa)[a.month-1]:ea(Ja?{month:Fa}:{month:Fa,day:"numeric"},"month"),ua=(Fa,Ja)=>S?n(Fa)[a.weekday-1]:ea(Ja?{weekday:Fa}:{weekday:Fa,month:"long",day:"numeric"},"weekday"),xa=Fa=>{const Ja=Za.macroTokenToFormatOpts(Fa);return Ja?this.formatWithSystemDefault(a,Ja):Fa},La=Fa=>S?G(Fa)[0>a.year?
0:1]:ea({era:Fa},"era");return B(Za.parseFormat(p),Fa=>{switch(Fa){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===
a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return ha({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return ha({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return ha({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return S?tc[12>a.hour?
0:1]:ea({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Z?ea({day:"numeric"},"day"):this.num(a.day);case "dd":return Z?ea({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return ua("short",!0);case "cccc":return ua("long",!0);case "ccccc":return ua("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return ua("short",!1);case "EEEE":return ua("long",!1);case "EEEEE":return ua("narrow",!1);case "L":return Z?ea({month:"numeric",day:"numeric"},
"month"):this.num(a.month);case "LL":return Z?ea({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return pa("short",!0);case "LLLL":return pa("long",!0);case "LLLLL":return pa("narrow",!0);case "M":return Z?ea({month:"numeric"},"month"):this.num(a.month);case "MM":return Z?ea({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return pa("short",!1);case "MMMM":return pa("long",!1);case "MMMMM":return pa("narrow",!1);case "y":return Z?ea({year:"numeric"},"year"):this.num(a.year);
case "yy":return Z?ea({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return Z?ea({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return Z?ea({year:"numeric"},"year"):this.num(a.year,6);case "G":return La("short");case "GG":return La("long");case "GGGGG":return La("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);
case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return xa(Fa)}})}formatDurationFromString(a,p){const S=ea=>{switch(ea[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}};p=Za.parseFormat(p);const Z=p.reduce((ea,
{literal:ha,val:pa})=>ha?ea:ea.concat(pa),[]);a=a.shiftTo(...Z.map(S).filter(ea=>ea));return B(p,(ea=>ha=>{const pa=S(ha);return pa?this.num(ea.get(pa),ha.length):ha})(a))}}class bb{constructor(a,p){this.reason=a;this.explanation=p}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class ob{get type(){throw new gb;}get name(){throw new gb;}get isUniversal(){throw new gb;}offsetName(a,p){throw new gb;}formatOffset(a,p){throw new gb;}offset(a){throw new gb;}equals(a){throw new gb;
}get isValid(){throw new gb;}}let Kb=null;class uc extends ob{static get instance(){null===Kb&&(Kb=new uc);return Kb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:p,locale:S}){return y(a,p,S)}formatOffset(a,p){return q(this.offset(a),p)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}const Wc=RegExp(`^${sc.source}$`);let xb={};const Xc={year:0,
month:1,day:2,hour:3,minute:4,second:5};let yb={};class db extends ob{static create(a){yb[a]||(yb[a]=new db(a));return yb[a]}static resetCache(){yb={};xb={}}static isValidSpecifier(a){return!(!a||!a.match(Wc))}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(p){return!1}}constructor(a){super();this.zoneName=a;this.valid=db.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:p,
locale:S}){return y(a,p,S,this.name)}formatOffset(a,p){return q(this.offset(a),p)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var p=this.name;xb[p]||(xb[p]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:p,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));p=xb[p];if(p.formatToParts){p=p.formatToParts(a);var S=[];for(let La=0;La<p.length;La++){const {type:Fa,value:Ja}=p[La],Ma=Xc[Fa];d(Ma)||(S[Ma]=parseInt(Ja,10))}p=S}else{{p=p.format(a).replace(/\u200E/g,
"");p=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(p);const [,La,Fa,Ja,Ma,fb,jb]=p;p=[Ja,La,Fa,Ma,fb,jb]}}const [Z,ea,ha,pa,ua,xa]=p;p=E({year:Z,month:ea,day:ha,hour:24===pa?0:pa,minute:ua,second:xa,millisecond:0});a=+a;S=a%1E3;return(p-(a-(0<=S?S:1E3+S)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let Lb=null;class Wa extends ob{static get utcInstance(){null===Lb&&(Lb=new Wa(0));return Lb}static instance(a){return 0===a?Wa.utcInstance:new Wa(a)}static parseSpecifier(a){return a&&
(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Wa(F(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${q(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,p){return q(this.fixed,p)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Rb extends ob{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let vc=()=>Date.now(),wc="system",xc=null,yc=null,zc=null,Ac;class Sa{static get now(){return vc}static set now(a){vc=a}static set defaultZone(a){wc=a}static get defaultZone(){return D(wc,uc.instance)}static get defaultLocale(){return xc}static set defaultLocale(a){xc=a}static get defaultNumberingSystem(){return yc}static set defaultNumberingSystem(a){yc=a}static get defaultOutputCalendar(){return zc}static set defaultOutputCalendar(a){zc=a}static get throwOnInvalid(){return Ac}static set throwOnInvalid(a){Ac=
a}static resetCaches(){Pa.resetCache();db.resetCache()}}let Bb={},Cb={},Db={},zb=null;class Yc{constructor(a,p,S){this.padTo=S.padTo||0;this.floor=S.floor||!1;p||(p={useGrouping:!1},0<S.padTo&&(p.minimumIntegerDigits=S.padTo),this.inf=K(a,p))}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):f(a,3);return H(a,this.padTo)}}class Zc{constructor(a,p,S){this.opts=S;if(a.zone.isUniversal){var Z=a.offset/60*-1;Z=0<=Z?`Etc/GMT+${Z}`:`Etc/GMT${Z}`;0!==a.offset&&
db.create(Z).valid?this.dt=a:(Z="UTC",this.dt=S.timeZoneName?a:0===a.offset?a:Ga.fromMillis(a.ts+6E4*a.offset))}else"system"===a.zone.type?this.dt=a:(this.dt=a,Z=a.zone.name);a={...this.opts};Z&&(a.timeZone=Z);this.dtf=A(p,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class $c{constructor(a,p,S){this.opts={style:"long",...S};!p&&x()&&(this.rtf=P(a,S))}format(a,p){return this.rtf?
this.rtf.format(a,p):C(p,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,p){return this.rtf?this.rtf.formatToParts(a,p):[]}}class Pa{static fromOpts(a){return Pa.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,p,S,Z=!1){a=a||Sa.defaultLocale;var ea;(ea=a)||(Z?Z="en-US":(zb||(zb=(new Intl.DateTimeFormat).resolvedOptions().locale),Z=zb),ea=Z);return new Pa(ea,p||Sa.defaultNumberingSystem,S||Sa.defaultOutputCalendar,a)}static resetCache(){zb=null;Bb={};
Cb={};Db={}}static fromObject({locale:a,numberingSystem:p,outputCalendar:S}={}){return Pa.create(a,p,S)}constructor(a,p,S,Z){var ea=a.indexOf("-u-");if(-1===ea)a=[a];else{let xa;ea=a.substring(0,ea);try{xa=A(a).resolvedOptions()}catch(Ja){xa=A(ea).resolvedOptions()}const {numberingSystem:La,calendar:Fa}=xa;a=[ea,La,Fa]}const [ha,pa,ua]=a;this.locale=ha;this.numberingSystem=p||pa||null;this.outputCalendar=S||ua||null;p=this.locale;S=this.numberingSystem;if((a=this.outputCalendar)||S)p+="-u",a&&(p+=
`-ca-${a}`),S&&(p+=`-nu-${S}`);this.intl=p;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Z;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=
a}return this.fastNumbersCached}listingMode(a){a=this.isEnglish();const p=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&p?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?Pa.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a=
{}){return this.clone({...a,defaultToEN:!1})}months(a,p=!1,S=!0){return v(this,a,S,L,()=>{const Z=p?{month:a,day:"numeric"}:{month:a},ea=p?"format":"standalone";this.monthsCache[ea][a]||(this.monthsCache[ea][a]=N(ha=>this.extract(ha,Z,"month")));return this.monthsCache[ea][a]})}weekdays(a,p=!1,S=!0){return v(this,a,S,n,()=>{const Z=p?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ea=p?"format":"standalone";this.weekdaysCache[ea][a]||(this.weekdaysCache[ea][a]=g(ha=>this.extract(ha,
Z,"weekday")));return this.weekdaysCache[ea][a]})}meridiems(a=!0){return v(this,void 0,a,()=>tc,()=>{if(!this.meridiemCache){const p={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ga.utc(2016,11,13,9),Ga.utc(2016,11,13,19)].map(S=>this.extract(S,p,"dayperiod"))}return this.meridiemCache})}eras(a,p=!0){return v(this,a,p,G,()=>{const S={era:a};this.eraCache[a]||(this.eraCache[a]=[Ga.utc(-40,1,1),Ga.utc(2017,1,1)].map(Z=>this.extract(Z,S,"era")));return this.eraCache[a]})}extract(a,p,S){return(a=
this.dtFormatter(a,p).formatToParts().find(Z=>Z.type.toLowerCase()===S))?a.value:null}numberFormatter(a={}){return new Yc(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,p={}){return new Zc(a,this.intl,p)}relFormatter(a={}){return new $c(this.intl,this.isEnglish(),a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&
this.outputCalendar===a.outputCalendar}}const Bc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Mb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Cc=RegExp(`${Mb.source}${Bc.source}?`),Nb=RegExp(`(?:T${Cc.source})?`),ad=fa("weekYear","weekNumber","weekDay"),bd=fa("year","ordinal"),Dc=RegExp(`${Mb.source} ?(?:${Bc.source}|(${sc.source}))?`),cd=RegExp(`(?: ${Dc.source})?`),dd=RegExp(`^T?${Mb.source}$`),ed=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Lc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},fd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,gd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
id=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,jd=u(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Nb),kd=u(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Nb),ld=u(/(\d{4})-?(\d{3})/,Nb),md=u(Cc),nd=U(ta,va,Ba),od=U(ad,va,Ba),pd=U(bd,va,Ba),qd=U(va,Ba),rd=U(va),sd=u(/(\d{4})-(\d\d)-(\d\d)/,cd),td=u(Dc),ud=U(ta,va,Ba,Da),vd=U(va,Ba,Da),Ec={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,
seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},wd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...Ec},xd={years:{quarters:4,months:12,weeks:52.1775,
days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Ec},nb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Mc=nb.slice(0).reverse();class Ka{constructor(a){const p="longterm"===a.conversionAccuracy||
!1;this.values=a.values;this.loc=a.loc||Pa.create();this.conversionAccuracy=p?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=p?xd:wd;this.isLuxonDuration=!0}static fromMillis(a,p){return Ka.fromObject({milliseconds:a},p)}static fromObject(a,p={}){if(null==a||"object"!==typeof a)throw new $a(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new Ka({values:t(a,Ka.normalizeUnit),loc:Pa.fromObject(p),conversionAccuracy:p.conversionAccuracy})}static fromDurationLike(a){if(b(a))return Ka.fromMillis(a);
if(Ka.isDuration(a))return a;if("object"===typeof a)return Ka.fromObject(a);throw new $a(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,p){const [S]=X(a,[ed,la]);return S?Ka.fromObject(S,p):Ka.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,p){const [S]=X(a,[dd,rd]);return S?Ka.fromObject(S,p):Ka.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,p=null){if(!a)throw new $a("need to specify a reason the Duration is invalid");
a=a instanceof bb?a:new bb(a,p);if(Sa.throwOnInvalid)throw new Sc(a);return new Ka({invalid:a})}static normalizeUnit(a){const p={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!p)throw new Ub(a);return p}static isDuration(a){return a&&
a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,p={}){p={...p,floor:!1!==p.round&&!1!==p.floor};return this.isValid?Za.create(this.loc,p).formatDurationFromString(this,a):"Invalid Duration"}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+
"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=f(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var p=this.toMillis();if(0>p||864E5<=p)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,
format:"extended",...a};p=this.shiftTo("hours","minutes","seconds","milliseconds");let S="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===p.seconds&&0===p.milliseconds||(S+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===p.milliseconds||(S+=".SSS"));p=p.toFormat(S);a.includePrefix&&(p="T"+p);return p}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=Ka.fromDurationLike(a);
const p={};for(const S of nb)if(V(a.values,S)||V(this.values,S))p[S]=a.get(S)+this.get(S);return W(this,{values:p},!0)}minus(a){if(!this.isValid)return this;a=Ka.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const p={};for(const S of Object.keys(this.values))p[S]=J(a(this.values[S],S));return W(this,{values:p},!0)}get(a){return this[Ka.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...t(a,Ka.normalizeUnit)};return W(this,{values:a})}reconfigure({locale:a,
numberingSystem:p,conversionAccuracy:S}={}){a={loc:this.loc.clone({locale:a,numberingSystem:p})};S&&(a.conversionAccuracy=S);return W(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();ia(this.matrix,a);return W(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(ha=>Ka.normalizeUnit(ha));const p={},S={},Z=this.toObject();let ea;for(const ha of nb)if(0<=a.indexOf(ha)){ea=ha;let pa=0;for(const xa in S)pa+=
this.matrix[xa][ha]*S[xa],S[xa]=0;b(Z[ha])&&(pa+=Z[ha]);const ua=Math.trunc(pa);p[ha]=ua;S[ha]=pa-ua;for(const xa in Z)nb.indexOf(xa)>nb.indexOf(ha)&&ca(this.matrix,Z,xa,p,ha)}else b(Z[ha])&&(S[ha]=Z[ha]);for(const ha in S)0!==S[ha]&&(p[ea]+=ha===ea?S[ha]:S[ha]/this.matrix[ea][ha]);return W(this,{values:p},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const p of Object.keys(this.values))a[p]=-this.values[p];return W(this,{values:a},!0)}get years(){return this.isValid?this.values.years||
0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===
this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const Z of nb){var p=this.values[Z];var S=a.values[Z];p=void 0===p||0===p?void 0===S||0===S:p===S;if(!p)return!1}return!0}}class Qa{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,p=null){if(!a)throw new $a("need to specify a reason the Interval is invalid");
a=a instanceof bb?a:new bb(a,p);if(Sa.throwOnInvalid)throw new Rc(a);return new Qa({invalid:a})}static fromDateTimes(a,p){a=wb(a);p=wb(p);var S=a&&a.isValid?p&&p.isValid?p<a?Qa.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${p.toISO()}`):null:Qa.invalid("missing or invalid end"):Qa.invalid("missing or invalid start");return null==S?new Qa({start:a,end:p}):S}static after(a,p){p=Ka.fromDurationLike(p);a=wb(a);return Qa.fromDateTimes(a,
a.plus(p))}static before(a,p){p=Ka.fromDurationLike(p);a=wb(a);return Qa.fromDateTimes(a.minus(p),a)}static fromISO(a,p){const [S,Z]=(a||"").split("/",2);if(S&&Z){let pa;try{var ea=Ga.fromISO(S,p);pa=ea.isValid}catch(xa){pa=!1}let ua;try{var ha=Ga.fromISO(Z,p);ua=ha.isValid}catch(xa){ua=!1}if(pa&&ua)return Qa.fromDateTimes(ea,ha);if(pa){if(ha=Ka.fromISO(Z,p),ha.isValid)return Qa.after(ea,ha)}else if(ua&&(ea=Ka.fromISO(S,p),ea.isValid))return Qa.before(ha,ea)}return Qa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&
a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const p=this.start.startOf(a),S=this.end.startOf(a);return Math.floor(S.diff(p,
a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:p}={}){return this.isValid?Qa.fromDateTimes(a||this.s,p||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(wb).filter(ha=>this.contains(ha)).sort();const p=[];let {s:S}=this,Z=0;for(;S<
this.e;){var ea=a[Z]||this.e;ea=+ea>+this.e?this.e:ea;p.push(Qa.fromDateTimes(S,ea));S=ea;Z+=1}return p}splitBy(a){a=Ka.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:p}=this,S=1;const Z=[];for(;p<this.e;){var ea=this.start.plus(a.mapUnits(ha=>ha*S));ea=+ea>+this.e?this.e:ea;Z.push(Qa.fromDateTimes(p,ea));p=ea;S+=1}return Z}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?
+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const p=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return p>=a?null:Qa.fromDateTimes(p,a)}union(a){return this.isValid?Qa.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [p,S]=a.sort((Z,ea)=>Z.s-ea.s).reduce(([Z,
ea],ha)=>ea?ea.overlaps(ha)||ea.abutsStart(ha)?[Z,ea.union(ha)]:[Z.concat([ea]),ha]:[Z,ha],[[],null]);S&&p.push(S);return p}static xor(a){let p=null,S=0;const Z=[];a=a.map(ea=>[{time:ea.s,type:"s"},{time:ea.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ea,ha)=>ea.time-ha.time);for(const ea of a)S+="s"===ea.type?1:-1,1===S?p=ea.time:(p&&+p!==+ea.time&&Z.push(Qa.fromDateTimes(p,ea.time)),p=null);return Qa.merge(Z)}difference(...a){return Qa.xor([this].concat(a)).map(p=>this.intersection(p)).filter(p=>
p&&!p.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:p=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${p}${this.e.toFormat(a)}`:
"Invalid Interval"}toDuration(a,p){return this.isValid?this.e.diff(this.s,a,p):Ka.invalid(this.invalidReason)}mapEndpoints(a){return Qa.fromDateTimes(a(this.s),a(this.e))}}class Ab{static hasDST(a=Sa.defaultZone){const p=Ga.now().setZone(a).set({month:12});return!a.isUniversal&&p.offset!==p.set({month:6}).offset}static isValidIANAZone(a){return db.isValidSpecifier(a)&&db.isValidZone(a)}static normalizeZone(a){return D(a,Sa.defaultZone)}static months(a="long",{locale:p=null,numberingSystem:S=null,
locObj:Z=null,outputCalendar:ea="gregory"}={}){return(Z||Pa.create(p,S,ea)).months(a)}static monthsFormat(a="long",{locale:p=null,numberingSystem:S=null,locObj:Z=null,outputCalendar:ea="gregory"}={}){return(Z||Pa.create(p,S,ea)).months(a,!0)}static weekdays(a="long",{locale:p=null,numberingSystem:S=null,locObj:Z=null}={}){return(Z||Pa.create(p,S,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:p=null,numberingSystem:S=null,locObj:Z=null}={}){return(Z||Pa.create(p,S,null)).weekdays(a,!0)}static meridiems({locale:a=
null}={}){return Pa.create(a).meridiems()}static eras(a="short",{locale:p=null}={}){return Pa.create(p,null,"gregory").eras(a)}static features(){return{relative:x()}}}const Eb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",
mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Sb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],
thai:[3664,3673],tibt:[3872,3881]},Nc=Eb.hanidec.replace(/[\[|\]]/g,"").split(""),Tb=`( |${String.fromCharCode(160)})`,Fb=new RegExp(Tb,"g"),Pc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let Gb=null;const Ib=[0,31,59,90,120,151,181,212,243,273,
304,334],Hb=[0,31,60,91,121,152,182,213,244,274,305,335],Xb={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},yd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Wb="year month day hour minute second millisecond".split(" "),Ad="weekYear weekNumber weekday hour minute second millisecond".split(" "),Bd="year ordinal hour minute second millisecond".split(" ");class Ga{constructor(a){const p=a.zone||Sa.defaultZone;let S=a.invalid||
(Number.isNaN(a.ts)?new bb("invalid input"):null)||(p.isValid?null:za(p));this.ts=d(a.ts)?Sa.now():a.ts;let Z=null;var ea=null;S||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(p)?[Z,ea]=[a.old.c,a.old.o]:(ea=p.offset(this.ts),Z=Ua(this.ts,ea),Z=(S=Number.isNaN(Z.year)?new bb("invalid input"):null)?null:Z,ea=S?null:ea));this._zone=p;this.loc=a.loc||Pa.create();this.invalid=S;this.weekData=null;this.c=Z;this.o=ea;this.isLuxonDateTime=!0}static now(){return new Ga({})}static local(){const [a,p]=Zb(arguments),
[S,Z,ea,ha,pa,ua,xa]=p;return Vb({year:S,month:Z,day:ea,hour:ha,minute:pa,second:ua,millisecond:xa},a)}static utc(){const [a,p]=Zb(arguments),[S,Z,ea,ha,pa,ua,xa]=p;a.zone=Wa.utcInstance;return Vb({year:S,month:Z,day:ea,hour:ha,minute:pa,second:ua,millisecond:xa},a)}static fromJSDate(a,p={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Ga.invalid("invalid input");const S=D(p.zone,Sa.defaultZone);return S.isValid?new Ga({ts:a,zone:S,loc:Pa.fromObject(p)}):
Ga.invalid(za(S))}static fromMillis(a,p={}){if(b(a))return-864E13>a||864E13<a?Ga.invalid("Timestamp out of range"):new Ga({ts:a,zone:D(p.zone,Sa.defaultZone),loc:Pa.fromObject(p)});throw new $a(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,p={}){if(b(a))return new Ga({ts:1E3*a,zone:D(p.zone,Sa.defaultZone),loc:Pa.fromObject(p)});throw new $a("fromSeconds requires a numerical input");}static fromObject(a,p={}){a=a||{};var S=D(p.zone,Sa.defaultZone);
if(!S.isValid)return Ga.invalid(za(S));var Z=Sa.now();const ea=S.offset(Z),ha=t(a,vb);var pa=!d(ha.ordinal),ua=!d(ha.year),xa=!d(ha.month)||!d(ha.day);ua=ua||xa;var La=ha.weekYear||ha.weekNumber;p=Pa.fromObject(p);if((ua||pa)&&La)throw new rb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(xa&&pa)throw new rb("Can't mix ordinal dates with month/day");xa=La||ha.weekday&&!ua;let Fa=Ua(Z,ea);xa?(Z=Ad,La=yd,Fa=lb(Fa)):pa?(Z=Bd,La=zd,Fa=tb(Fa)):(Z=Wb,La=Xb);let Ja=!1;for(var Ma of Z)d(ha[Ma])?
ha[Ma]=Ja?La[Ma]:Fa[Ma]:Ja=!0;xa?(Ma=z(ha.weekYear),Z=T(ha.weekNumber,1,r(ha.weekYear)),La=T(ha.weekday,1,7),Ma=Ma?Z?La?!1:Va("weekday",ha.weekday):Va("week",ha.week):Va("weekYear",ha.weekYear)):pa?(Ma=z(ha.year),Z=T(ha.ordinal,1,m(ha.year)?366:365),Ma=Ma?Z?!1:Va("ordinal",ha.ordinal):Va("year",ha.year)):Ma=da(ha);if(Ma=Ma||oa(ha))return Ga.invalid(Ma);pa=xa?mb(ha):pa?M(ha):ha;const [fb,jb]=Ra(pa,ea,S);S=new Ga({ts:fb,zone:S,o:jb,loc:p});return ha.weekday&&ua&&a.weekday!==S.weekday?Ga.invalid("mismatched weekday",
`you can't specify both a weekday of ${ha.weekday} and a date of ${S.toISO()}`):S}static fromISO(a,p={}){const [S,Z]=X(a,[jd,nd],[kd,od],[ld,pd],[md,qd]);return hb(S,Z,p,"ISO 8601",a)}static fromRFC2822(a,p={}){const [S,Z]=X(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[fd,aa]);return hb(S,Z,p,"RFC 2822",a)}static fromHTTP(a,p={}){const [S,Z]=X(a,[gd,R],[hd,R],[id,Y]);return hb(S,Z,p,"HTTP",p)}static fromFormat(a,p,S={}){if(d(a)||d(p))throw new $a("fromFormat requires an input string and a format");
const {locale:Z=null,numberingSystem:ea=null}=S;var ha=Pa.fromOpts({locale:Z,numberingSystem:ea,defaultToEN:!0});{const {result:La,zone:Fa,invalidReason:Ja}=qb(ha,a,p);ha=[La,Fa,Ja]}const [pa,ua,xa]=ha;return xa?Ga.invalid(xa):hb(pa,ua,S,`format ${p}`,a)}static fromString(a,p,S={}){return Ga.fromFormat(a,p,S)}static fromSQL(a,p={}){const [S,Z]=X(a,[sd,ud],[td,vd]);return hb(S,Z,p,"SQL",a)}static invalid(a,p=null){if(!a)throw new $a("need to specify a reason the DateTime is invalid");a=a instanceof
bb?a:new bb(a,p);if(Sa.throwOnInvalid)throw new Qc(a);return new Ga({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?
this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?
this.c.millisecond:NaN}get weekYear(){return this.isValid?ya(this).weekYear:NaN}get weekNumber(){return this.isValid?ya(this).weekNumber:NaN}get weekday(){return this.isValid?ya(this).weekday:NaN}get ordinal(){return this.isValid?tb(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ab.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ab.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ab.weekdays("short",{locObj:this.loc})[this.weekday-
1]:null}get weekdayLong(){return this.isValid?Ab.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||
this.offset>this.set({month:5}).offset}get isInLeapYear(){return m(this.year)}get daysInMonth(){return k(this.year,this.month)}get daysInYear(){return this.isValid?m(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?r(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:p,numberingSystem:S,calendar:Z}=Za.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:p,numberingSystem:S,outputCalendar:Z}}toUTC(a=0,p={}){return this.setZone(Wa.instance(a),p)}toLocal(){return this.setZone(Sa.defaultZone)}setZone(a,
{keepLocalTime:p=!1,keepCalendarTime:S=!1}={}){a=D(a,Sa.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let Z=this.ts;if(p||S)p=a.offset(this.ts),S=this.toObject(),[Z]=Ra(S,p,a);return Ia(this,{ts:Z,zone:a})}return Ga.invalid(za(a))}reconfigure({locale:a,numberingSystem:p,outputCalendar:S}={}){a=this.loc.clone({locale:a,numberingSystem:p,outputCalendar:S});return Ia(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=t(a,vb);var p=!d(a.weekYear)||
!d(a.weekNumber)||!d(a.weekday);const S=!d(a.ordinal),Z=!d(a.year),ea=!d(a.month)||!d(a.day),ha=a.weekYear||a.weekNumber;if((Z||ea||S)&&ha)throw new rb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ea&&S)throw new rb("Can't mix ordinal dates with month/day");p?p=mb({...lb(this.c),...a}):d(a.ordinal)?(p={...this.toObject(),...a},d(a.day)&&(p.day=Math.min(k(p.year,p.month),p.day))):p=M({...tb(this.c),...a});const [pa,ua]=Ra(p,this.o,this.zone);return Ia(this,{ts:pa,o:ua})}plus(a){if(!this.isValid)return this;
a=Ka.fromDurationLike(a);return Ia(this,cb(this,a))}minus(a){if(!this.isValid)return this;a=Ka.fromDurationLike(a).negate();return Ia(this,cb(this,a))}startOf(a){if(!this.isValid)return this;const p={};a=Ka.normalizeUnit(a);switch(a){case "years":p.month=1;case "quarters":case "months":p.day=1;case "weeks":case "days":p.hour=0;case "hours":p.minute=0;case "minutes":p.second=0;case "seconds":p.millisecond=0}"weeks"===a&&(p.weekday=1);"quarters"===a&&(p.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(p)}endOf(a){return this.isValid?
this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,p={}){return this.isValid?Za.create(this.loc.redefaultToEN(p)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Jb,p={}){return this.isValid?Za.create(this.loc.clone(p),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Za.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO(a={}){return this.isValid?`${this.toISODate(a)}T${this.toISOTime(a)}`:null}toISODate({format:a="extended"}={}){a=
"basic"===a?"yyyyMMdd":"yyyy-MM-dd";9999<this.year&&(a="+"+a);return eb(this,a)}toISOWeekDate(){return eb(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:p=!1,includeOffset:S=!0,includePrefix:Z=!1,format:ea="extended"}={}){return ub(this,{suppressSeconds:p,suppressMilliseconds:a,includeOffset:S,includePrefix:Z,format:ea})}toRFC2822(){return eb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return eb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return eb(this,
"yyyy-MM-dd")}toSQLTime({includeOffset:a=!0,includeZone:p=!1}={}){return ub(this,{includeOffset:a,includeZone:p,spaceZone:!0})}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const p=
{...this.c};a.includeConfig&&(p.outputCalendar=this.outputCalendar,p.numberingSystem=this.loc.numberingSystem,p.locale=this.loc.locale);return p}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,p="milliseconds",S={}){if(!this.isValid||!a.isValid)return Ka.invalid("created by diffing an invalid DateTime");S={locale:this.locale,numberingSystem:this.numberingSystem,...S};const Z=(Array.isArray(p)?p:[p]).map(Ka.normalizeUnit);p=a.valueOf()>this.valueOf();a=ka(p?this:a,p?a:this,Z,S);return p?
a.negate():a}diffNow(a="milliseconds",p={}){return this.diff(Ga.now(),a,p)}until(a){return this.isValid?Qa.fromDateTimes(this,a):this}hasSame(a,p){if(!this.isValid)return!1;const S=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(p)<=S&&S<=a.endOf(p)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a={}){if(!this.isValid)return null;const p=a.base||Ga.fromObject({},{zone:this.zone}),S=a.padding?
this<p?-a.padding:a.padding:0;let Z="years months days hours minutes seconds".split(" "),ea=a.unit;Array.isArray(a.unit)&&(Z=a.unit,ea=void 0);return Yb(p,this.plus(S),{...a,numeric:"always",units:Z,unit:ea})}toRelativeCalendar(a={}){return this.isValid?Yb(a.base||Ga.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Ga.isDateTime))throw new $a("min requires all arguments be DateTimes");return I(a,p=>p.valueOf(),
Math.min)}static max(...a){if(!a.every(Ga.isDateTime))throw new $a("max requires all arguments be DateTimes");return I(a,p=>p.valueOf(),Math.max)}static fromFormatExplain(a,p,S={}){const {locale:Z=null,numberingSystem:ea=null}=S;S=Pa.fromOpts({locale:Z,numberingSystem:ea,defaultToEN:!0});return qb(S,a,p)}static fromStringExplain(a,p,S={}){return Ga.fromFormatExplain(a,p,S)}static get DATE_SHORT(){return Jb}static get DATE_MED(){return $b}static get DATE_MED_WITH_WEEKDAY(){return Tc}static get DATE_FULL(){return ac}static get DATE_HUGE(){return bc}static get TIME_SIMPLE(){return cc}static get TIME_WITH_SECONDS(){return dc}static get TIME_WITH_SHORT_OFFSET(){return ec}static get TIME_WITH_LONG_OFFSET(){return fc}static get TIME_24_SIMPLE(){return gc}static get TIME_24_WITH_SECONDS(){return hc}static get TIME_24_WITH_SHORT_OFFSET(){return ic}static get TIME_24_WITH_LONG_OFFSET(){return jc}static get DATETIME_SHORT(){return kc}static get DATETIME_SHORT_WITH_SECONDS(){return lc}static get DATETIME_MED(){return mc}static get DATETIME_MED_WITH_SECONDS(){return nc}static get DATETIME_MED_WITH_WEEKDAY(){return Uc}static get DATETIME_FULL(){return oc}static get DATETIME_FULL_WITH_SECONDS(){return pc}static get DATETIME_HUGE(){return qc}static get DATETIME_HUGE_WITH_SECONDS(){return rc}}
e.DateTime=Ga})},"esri/widgets/FeatureTemplates":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/HandleOwner ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./FeatureTemplates/FeatureTemplatesViewModel ./FeatureTemplates/ItemList ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r){function l(F){const {label:J}=F;return"items"in F?J:`${J}\u2013${F.layer.id}`}const y={filter:!0};b=function(F){function J(q,O){q=F.call(this,q,O)||this;q._iconIntersectionObserver=new IntersectionObserver((L,n)=>{L.forEach(function(){var G=e._asyncToGenerator(function*(C){if(C.isIntersecting&&(C=C.target,!C["data-has-icon"])){const B=C["data-item"];C["data-has-icon"]=!0;n.unobserve(C);yield B.fetchThumbnail();C["data-item"]===B&&B.thumbnail?C.appendChild(B.thumbnail):
(C["data-has-icon"]=!1,n.observe(C))}});return function(C){return G.apply(this,arguments)}}())});q.filterFunction=null;q.filterText="";q.groupBy=null;q.headingLevel=4;q.label=void 0;q.layers=null;q.messages=null;q.selectedItem=null;q.viewModel=new h;q.visibleElements={...y};q.renderItemIcon=q.renderItemIcon.bind(e._assertThisInitialized(q));q._afterItemCreateOrUpdate=q._afterItemCreateOrUpdate.bind(e._assertThisInitialized(q));q._afterItemRemoved=q._afterItemRemoved.bind(e._assertThisInitialized(q));
return q}e._inheritsLoose(J,F);var t=J.prototype;t.initialize=function(){const q=({label:O})=>!this.filterText||-1<O.toLowerCase().indexOf(this.filterText.toLowerCase());this.own(z.init(this,"viewModel",(O,L)=>{O&&!O.filterFunction&&(this.filterFunction=q);L&&L!==O&&L.filterFunction===q&&(L.filterFunction=null)}))};t.destroy=function(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=null)};t.castVisibleElements=function(q){return{...y,...q}};
t.select=function(q){return null};t.render=function(){const {filterText:q,headingLevel:O,messages:L,viewModel:{items:n,selectedItem:G,state:C}}=this,B=this.visibleElements.filter;return r.tsx("div",{class:this.classes("esri-feature-templates","esri-widget"),"aria-label":L.widgetLabel},"loading"===C?this.renderLoader():"ready"===C?r.tsx(c.ItemList,{id:this.id,identify:l,filterText:q,items:n,headingLevel:O,messages:{filterPlaceholder:L.filterPlaceholder,noItems:L.noItems,noMatches:L.noMatches},filterEnabled:B,
onItemSelect:D=>{this.viewModel.select(D)},onFilterChange:D=>{this.filterText=D;this.viewModel.refresh()},renderIcon:this.renderItemIcon,selectedItem:G}):null)};t.renderItemIcon=function({item:q}){return r.tsx("span",{key:"icon",class:"esri-feature-templates__list-item-icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":q,"data-has-icon":!1})};t.renderLoader=function(){return r.tsx("div",{class:"esri-feature-templates__loader",
key:"loader"})};t._afterItemCreateOrUpdate=function(q){this._iconIntersectionObserver.observe(q)};t._afterItemRemoved=function(q){this._iconIntersectionObserver.unobserve(q)};return J}(b.HandleOwnerMixin(w));d.__decorate([x.aliasOf("viewModel.filterFunction")],b.prototype,"filterFunction",void 0);d.__decorate([T.property()],b.prototype,"filterText",void 0);d.__decorate([x.aliasOf("viewModel.groupBy")],b.prototype,"groupBy",void 0);d.__decorate([T.property()],b.prototype,"headingLevel",void 0);d.__decorate([T.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],b.prototype,"label",void 0);d.__decorate([x.aliasOf("viewModel.layers")],b.prototype,"layers",void 0);d.__decorate([T.property(),m.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],b.prototype,"messages",void 0);d.__decorate([x.aliasOf("viewModel.selectedItem")],b.prototype,"selectedItem",void 0);d.__decorate([T.property(),E.vmEvent("select")],b.prototype,"viewModel",void 0);d.__decorate([T.property()],b.prototype,"visibleElements",void 0);d.__decorate([V.cast("visibleElements")],
b.prototype,"castVisibleElements",null);d.__decorate([x.aliasOf("viewModel.select")],b.prototype,"select",null);return b=d.__decorate([H.subclass("esri.widgets.FeatureTemplates")],b)})},"esri/widgets/FeatureTemplates/FeatureTemplatesViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/HandleOwner ../../core/ObjectPool ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./TemplateItem ./TemplateItemGroup".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c){const f=({layer:k})=>({key:k,label:k.title}),m=({layer:k})=>k.geometryType;b=function(k){function E(l){l=k.call(this,l)||this;l._itemPool=new x(h);l._groupPool=new x(c);l.filterFunction=null;l.groupBy="layer";l.selectedItem=null;return l}e._inheritsLoose(E,k);var r=E.prototype;r.destroy=function(){this._templateToLayer.clear()};r.refresh=function(){this.notifyChange("items")};r.select=function(l){l=(null==l?void 0:l.clone())||null;this._set("selectedItem",l);this.emit("select",
{item:l,template:(null==l?void 0:l.template)||null})};r._getTemplatesForLayer=function(l){const y=l.templates||[];l=(l.types||[]).map(F=>F.templates).reduce((F,J)=>[...F,...J],[]);return[...y,...l]};r._createItem=function(l){const y=this._itemPool.acquire();y.set({template:l,layer:this._templateToLayer.get(l)});return y};r._createGroup=function(l,y){const F=this._groupPool.acquire();F.set("label",l);F.items=y;return F};r._releasePreviousItems=function(){this._destroyItems(this._get("items"))};r._destroyItems=
function(l){l&&(l[0]instanceof h?l.forEach(y=>this._destroyItem(y)):l.forEach(y=>this._destroyGroup(y)))};r._destroyGroup=function(l){l.items.forEach(y=>this._destroyItem(y));l.items.length=0;this._groupPool.release(l)};r._destroyItem=function(l){l.layer=null;l.template=null;this._itemPool.release(l)};e._createClass(E,[{key:"_templateToLayer",get:function(){const l=new Map;for(const {layer:y,templates:F}of this._featureTemplateInfos)for(const J of F)l.set(J,y);return l}},{key:"layers",get:function(){return this._get("layers")},
set:function(l){this.handles.remove("layers");if(l){const y=()=>this.notifyChange("state");this.handles.add(l.map(F=>I.when(F,"loadStatus",y)),"layers")}this._set("layers",l)}},{key:"state",get:function(){const {layers:l}=this;return l&&0!==l.length?l.some(y=>"loading"===y.loadStatus||"not-loaded"===y.loadStatus)?"loading":"ready":"disabled"}},{key:"_featureTemplateInfos",get:function(){return this.layers?this.layers.filter(({capabilities:l,loaded:y})=>y&&l.operations.supportsEditing&&l.operations.supportsAdd).map(l=>
{const y=this._getTemplatesForLayer(l);return{layer:l,templates:y}}).filter(l=>null!=l&&0<l.templates.length):[]}},{key:"numberOfFeatureTemplates",get:function(){return this._featureTemplateInfos.reduce((l,y)=>l+y.templates.length,0)}},{key:"items",get:function(){var l=this._featureTemplateInfos;if(0===l.length)return this._releasePreviousItems(),[];const {groupBy:y}=this;if("none"===y)return l=l.map(({templates:t})=>t.filter(({name:q})=>!this.filterFunction||this.filterFunction({label:q}))).map(t=>
t.map(q=>this._createItem(q))).reduce((t,q)=>[...t,...q],[]),this._releasePreviousItems(),l;l=l.reduce((t,{layer:q,templates:O})=>{O.forEach(L=>{var n=("layer"===y?f:"geometry"===y?m:y)({template:L,layer:q});if(n){const G="string"===typeof n?n:n.key;n="string"===typeof n?n:n.label;t.has(G)||t.set(G,{label:n,templates:[]});t.get(G).templates.push(L)}});return t},new Map);if(0===l.size)return this._releasePreviousItems(),[];const F=[],{filterFunction:J}=this;l.forEach(t=>{const {label:q,templates:O}=
t;!J||this.filterFunction(t)?F.push(this._createGroup(q,O.map(L=>this._createItem(L)))):(t=O.filter(({name:L})=>this.filterFunction({label:L})).map(L=>this._createItem(L)),0<t.length&&F.push(this._createGroup(q,t)))});this._releasePreviousItems();return F}}]);return E}(z.HandleOwnerMixin(b.EventedAccessor));d.__decorate([Q.property({readOnly:!0})],b.prototype,"_templateToLayer",null);d.__decorate([Q.property()],b.prototype,"filterFunction",void 0);d.__decorate([Q.property()],b.prototype,"groupBy",
void 0);d.__decorate([Q.property()],b.prototype,"layers",null);d.__decorate([Q.property()],b.prototype,"state",null);d.__decorate([Q.property({readOnly:!0})],b.prototype,"_featureTemplateInfos",null);d.__decorate([Q.property({readOnly:!0})],b.prototype,"numberOfFeatureTemplates",null);d.__decorate([Q.property({readOnly:!0})],b.prototype,"items",null);d.__decorate([Q.property({readOnly:!0})],b.prototype,"selectedItem",void 0);d.__decorate([Q.property()],b.prototype,"select",null);return b=d.__decorate([w.subclass("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],
b)})},"esri/widgets/FeatureTemplates/TemplateItem":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../symbols/support/symbolUtils".split(" "),function(e,d,b,z,x,I,Q,V,T,H,w,h,c){var f;x=f=function(m){function k(r){r=
m.call(this,r)||this;r._activeFetchInfo={id:null,request:null};r.description=null;r.label=null;r.layer=null;r.template=null;r.thumbnail=null;return r}d._inheritsLoose(k,m);var E=k.prototype;E.initialize=function(){this.handles.add(Q.init(this,["layer.renderer","template"],()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",null)}))};E.clone=function(){const r=this.thumbnail?this.thumbnail.cloneNode(!0):null,l=new f({layer:this.layer,template:this.template});
l._set("thumbnail",r);return l};E.fetchThumbnail=function(){var r=d._asyncToGenerator(function*(){var l=this;const {_activeFetchInfo:y}=this;if(`${this.label}-${this.layer.id}`===y.id)return y.request;y.id=`${this.label}-${this.layer.id}`;y.request=this._getPreviewSymbol().then(function(){var F=d._asyncToGenerator(function*(J){var t;if(`${l.label}-${l.layer.id}`===y.id){var q={maxSize:36};"dictionary"===(null==(t=l.layer.renderer)?void 0:t.type)&&(q.fieldMap=l.layer.renderer.fieldMap,q.feature={attributes:l.template.prototype.attributes});
J=yield c.renderPreviewHTML(J,q);`${l.label}-${l.layer.id}`===y.id&&l._set("thumbnail",J)}});return function(J){return F.apply(this,arguments)}}());return y.request});return function(){return r.apply(this,arguments)}}();E._getPreviewSymbol=function(){var r=d._asyncToGenerator(function*(){const {layer:l,template:y,layer:{renderer:F}}=this;if(F){var J=new z({attributes:y.prototype.attributes});if(J=yield F.getSymbolAsync(J))return J}return this._getFallbackSymbolFromGeometry(l)});return function(){return r.apply(this,
arguments)}}();E._getFallbackSymbolFromGeometry=function(r){({geometryType:r}=r);if("point"===r||"multipoint"===r)return(new Promise((l,y)=>e(["../../symbols/SimpleMarkerSymbol"],F=>l(Object.freeze({__proto__:null,default:F})),y))).then(l=>new l.default);if("polyline"===r)return(new Promise((l,y)=>e(["../../symbols/SimpleLineSymbol"],F=>l(Object.freeze({__proto__:null,default:F})),y))).then(l=>new l.default);if("polygon"===r||"mesh"===r||"multipatch"===r)return(new Promise((l,y)=>e(["../../symbols/SimpleFillSymbol"],
F=>l(Object.freeze({__proto__:null,default:F})),y))).then(l=>new l.default)};return k}(I.HandleOwnerMixin(x));b.__decorate([V.property({aliasOf:"template.description"})],x.prototype,"description",void 0);b.__decorate([V.property({aliasOf:"template.name"})],x.prototype,"label",void 0);b.__decorate([V.property()],x.prototype,"layer",void 0);b.__decorate([V.property()],x.prototype,"template",void 0);b.__decorate([V.property({readOnly:!0})],x.prototype,"thumbnail",void 0);return x=f=b.__decorate([h.subclass("esri.widgets.FeatureTemplates.TemplateItem")],
x)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./utils".split(" "),function(e,d,b,z,x,I,Q){function V(f,m){return T.apply(this,arguments)}function T(){T=b._asyncToGenerator(function*(f,m){switch(f.type){case "web-style":var {previewWebStyleSymbol:k}=yield new Promise((E,r)=>e(["./previewWebStyleSymbol"],E,r));return k(f,V,m);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:k}=
yield new Promise((E,r)=>e(["./previewSymbol3D"],E,r)),k(f,m);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:k}=yield new Promise((E,r)=>e(["./previewSymbol2D"],E,r)),k(f,m);case "cim":return{previewCIMSymbol:k}=yield new Promise((E,r)=>e(["./previewCIMSymbol"],E,r)),k(f,m)}});return T.apply(this,arguments)}function H(f){return f&&"opacity"in f?f.opacity*H(f.parent):1}function w(){w=b._asyncToGenerator(function*(f,
m){var k,E;if(f){var r=f.sourceLayer;r=null!=(k=x.isSome(m)&&null!=(E=m.useSourceLayer)&&E?r:f.layer)?k:r;k=H(r);if(x.isSome(f.symbol)&&(!x.isSome(m)||!0!==m.ignoreGraphicSymbol))return f="web-style"===f.symbol.type?yield f.symbol.fetchSymbol(x.isSome(m)?m.abortOptions:null):f.symbol.clone(),Q.applyColorToSymbol(f,null,k),f;var l=x.isSome(m)&&m.renderer||r&&"renderer"in r&&r.renderer;if(E=l&&"getSymbolAsync"in l?yield l.getSymbolAsync(f,m):null){E="web-style"===E.type?yield E.fetchSymbol(x.isSome(m)?
m.abortOptions:null):E.clone();if(!("visualVariables"in l&&l.visualVariables&&l.visualVariables.length))return Q.applyColorToSymbol(E,null,k),E;"arcadeRequiredForVisualVariables"in l&&l.arcadeRequiredForVisualVariables&&(x.isNone(m)||x.isNone(m.arcade))&&(m={...x.unwrap(m)},m.arcade=yield I.loadArcade());r=yield new Promise((O,L)=>e(["../../renderers/visualVariables/support/visualVariableUtils"],O,L));var y=[],F=[],J=[],t=[];for(var q of l.visualVariables)switch(q.type){case "color":y.push(q);break;
case "opacity":F.push(q);break;case "rotation":t.push(q);break;case "size":q.target||J.push(q)}q=(q=!!y.length&&y[y.length-1])?r.getColor(q,f,m):null;F=(F=!!F.length&&F[F.length-1])?r.getOpacity(F,f,m):null;null!=k&&(F=null!=F?F*k:k);Q.applyColorToSymbol(E,q,F);J.length&&(k=r.getAllSizes(J,f,m),yield Q.applySizesToSymbol(E,k));for(const O of t)Q.applyRotationToSymbol(E,r.getRotationAngle(O,f,m),O.axis);return E}}});return w.apply(this,arguments)}function h(){h=b._asyncToGenerator(function*(f,m){var k;
if(f){var E=H(f.layer||f.sourceLayer);if(x.isSome(f.symbol)&&(!x.isSome(m)||!0!==m.ignoreGraphicSymbol))return f="web-style"===f.symbol.type?yield f.symbol.fetchSymbol(x.isSome(m)?m.abortOptions:null):f.symbol.clone(),Q.getColorFromSymbol(f,E);var r=x.isSome(m)&&m.renderer||f.get("layer.renderer")||f.get("sourceLayer.renderer"),l=yield r.getSymbolAsync(f,m);if(l){l="web-style"===l.type?yield l.fetchSymbol(x.isSome(m)?m.abortOptions:null):l.clone();l=Q.getColorFromSymbol(l,E);if(!("visualVariables"in
r)||"visualVariables"in r&&!r.visualVariables||"visualVariables"in r&&(null==(k=r.visualVariables)||!k.length))return l;r.arcadeRequiredForVisualVariables&&(x.isNone(m)||x.isNone(m.arcade))&&(m={...x.unwrap(m)},m.arcade=yield I.loadArcade());k=yield new Promise((J,t)=>e(["../../renderers/visualVariables/support/visualVariableUtils"],J,t));var y=[],F=[];for(const J of r.visualVariables)switch(J.type){case "color":y.push(J);break;case "opacity":F.push(J)}r=(r=0<y.length?y[y.length-1]:null)?k.getColor(r,
f,m):l;f=(l=0<F.length?F[F.length-1]:null)?k.getOpacity(l,f,m):null;null!=E&&(f=null!=f?f*E:E);return r?Q.applyOpacityToColor(r,f):null}}});return h.apply(this,arguments)}let c=null;d.getDisplayedColor=function(f,m){return h.apply(this,arguments)};d.getDisplayedSymbol=function(f,m){return w.apply(this,arguments)};d.renderColorRampPreviewHTML=function(f,m={}){var k="horizontal"===m.align;const {width:E=k?75:24,height:r=k?24:75,gradient:l=!0}=m;var y=window.devicePixelRatio,F=E*y,J=r*y;y=document.createElement("canvas");
y.width=F;y.height=J;y.style.width=`${E}px`;y.style.height=`${r}px`;const t=y.getContext("2d");var q=k?F:0,O=k?0:J;if(l){const L=t.createLinearGradient(0,0,q,O);k=f.length;const n=1===k?0:1/(k-1);f.forEach((G,C)=>L.addColorStop(C*n,G.toString()));t.fillStyle=L;t.fillRect(0,0,F,J)}else{F=k?F/f.length:F;J=k?J:J/f.length;O=q=0;for(const L of f)t.fillStyle=L.toString(),t.fillRect(q,O,F,J),q=k?q+F:0,O=k?0:O+J}f=document.createElement("div");f.style.width=`${E}px`;f.style.height=`${r}px`;f.style.filter=
Q.getCSSFilterFromEffectList(null==m?void 0:m.effectList);f.appendChild(y);return f};d.renderDotDensityPreviewHTML=function(f,m,k){const {backgroundColor:E,outline:r,dotSize:l}=f;k=k&&k.swatchSize||22;const y=Math.round(k*k/l**2*.8),F=window.devicePixelRatio;f=document.createElement("canvas");const J=k*F;f.width=J;f.height=J;f.style.width=`${f.width/F}px`;f.style.height=`${f.height/F}px`;const t=f.getContext("2d");E&&(t.fillStyle=E.toCss(!0),t.fillRect(0,0,J,J),t.fill());t.fillStyle=m.toCss(!0);if(c&&
c.length/2===y)for(m=0;m<2*y;m+=2)t.fillRect(c[m],c[m+1],l*F,l*F),t.fill();else for(c=[],m=0;m<2*y;m+=2){const q=Math.floor(Math.random()*(J-0+1)),O=Math.floor(Math.random()*(J-0+1));c.push(q,O);t.fillRect(q,O,l*F,l*F);t.fill()}r&&(r.color&&(t.strokeStyle=r.color.toCss(!0)),t.lineWidth=r.width,t.strokeRect(0,0,J,J));k=new Image(k,k);k.src=f.toDataURL();return k};d.renderPreviewHTML=V;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c){function f(D){D=D.symbolLayers;if(!D)return null;let A=null;D.forEach(K=>{if("object"!==K.type||null==K.resource.href)A="water"===K.type?V.unwrap(K.color):V.isSome(K.material)?V.unwrap(K.material.color):null});return A?new z(A):null}function m(D,A){if(null==A)return D;D=D.toRgba();D[3]*=A;return new z(D)}function k(D,A,K){if(D=D.symbolLayers){var P=N=>{N=V.isSome(N)?N:null;A=A||N||null!=K&&B;return m(A,K)};D.forEach(N=>{if("object"!==N.type||null==N.resource.href||
A)if("water"===N.type)N.color=P(N.color);else{var g=V.isSome(N.material)?N.material.color:null;g=P(g);V.isNone(N.material)?N.material=new c.default({color:g}):N.material.color=g;null!=K&&"outline"in N&&V.isSome(N.outline)&&V.isSome(N.outline.color)&&(N.outline.color=m(N.outline.color,K))}})}}function E(D,A){return r.apply(this,arguments)}function r(){r=b._asyncToGenerator(function*(D,A){(D=D.symbolLayers)&&(yield I.forEach(D,function(){var K=b._asyncToGenerator(function*(P){return l(P,A)});return function(P){return K.apply(this,
arguments)}}()))});return r.apply(this,arguments)}function l(D,A){return y.apply(this,arguments)}function y(){y=b._asyncToGenerator(function*(D,A){switch(D.type){case "extrude":D.size="number"===typeof A[2]?A[2]:0;break;case "icon":case "line":case "text":A=F(A);V.isSome(A)&&(D.size=A);break;case "path":{const K=q(A,H.ONES,[D.width,void 0,D.height]);D.width=n(A[0],D.width,1,K);D.height=n(A[2],D.height,1,K)}break;case "object":yield J(D,A)}});return y.apply(this,arguments)}function F(D){for(const A of D)if("number"===
typeof A)return A;return null}function J(D,A){return t.apply(this,arguments)}function t(){t=b._asyncToGenerator(function*(D,A){const {resourceSize:K,symbolSize:P}=yield O(D),N=q(A,K,P);D.width=n(A[0],P[0],K[0],N);D.depth=n(A[1],P[1],K[1],N);D.height=n(A[2],P[2],K[2],N)});return t.apply(this,arguments)}function q(D,A,K){for(let P=0;3>P;P++){const N=D[P];switch(N){case "symbol-value":return null!=K[P]?K[P]/A[P]:1;case "proportional":break;default:if(N&&A[P])return N/A[P]}}return 1}function O(D){return L.apply(this,
arguments)}function L(){L=b._asyncToGenerator(function*(D){const A=yield(yield new Promise((u,U)=>e(["./symbolLayerUtils"],u,U))).computeObjectLayerResourceSize(D,10),{width:K,height:P,depth:N}=D;D=[K,N,P];let g=1;for(var v=0;3>v;v++)if(null!=D[v]){g=D[v]/A[v];break}for(v=0;3>v;v++)null==D[v]&&(D[v]=A[v]*g);return{resourceSize:A,symbolSize:D}});return L.apply(this,arguments)}function n(D,A,K,P){switch(D){case "proportional":return K*P;case "symbol-value":return null!=A?A:K;default:return D}}function G(){G=
b._asyncToGenerator(function*(D,A){if(D&&A){if(x.isSymbol3D(D))return E(D,A);if(x.isSymbol2D(D)&&(A=F(A),!V.isNone(A)))switch(D.type){case "simple-marker":D.size=A;break;case "picture-marker":{const K=D.width/D.height;1<K?(D.width=A,D.height=A*K):(D.width=A*K,D.height=A);break}case "simple-line":D.width=A;break;case "text":D.font.size=A}}});return G.apply(this,arguments)}const C=/\/resource\/(.*?)\.svg$/,B=new z("white");d.applyColorToSymbol=function(D,A,K){if(D&&(A||null!=K))if(A&&(A=new z(A)),x.isSymbol3D(D))k(D,
A,K);else if(x.isSymbol2D(D)){if(A=A||D.color)D.color=m(A,K);null!=K&&"outline"in D&&D.outline&&D.outline.color&&(D.outline.color=m(D.outline.color,K))}};d.applyOpacityToColor=m;d.applyRotationToSymbol=function(D,A,K){D&&null!=A&&(x.isSymbol3D(D)?(D=D.symbolLayers)&&D.forEach(P=>{if(P&&"object"===P.type)switch(K){case "tilt":P.tilt=A;break;case "roll":P.roll=A;break;default:P.heading=A}}):!x.isSymbol2D(D)||"simple-marker"!==D.type&&"picture-marker"!==D.type&&"text"!==D.type||(D.angle=A))};d.applySizesToSymbol=
function(D,A){return G.apply(this,arguments)};d.getCSSFilterFromEffectList=function(D){if(!D)return null;D=D.effects.filter(A=>"bloom"!==A.type).map(A=>A.toJSON());return w.effectFunctionsFromJSON(D)};d.getColorFromSymbol=function(D,A){if(!D)return null;let K=null;x.isSymbol3D(D)?K=f(D):x.isSymbol2D(D)&&(K=D.color?new z(D.color):null);return K?m(K,A):null};d.getIconHref=function(D,A){A=A.resource.href;return!Q("esri-canvas-svg-support")&&D.styleOrigin&&C.test(A)?A.replace(C,"/resource/png/$1.png"):
A};d.getSymbolOutlineSize=function(D){if(!D)return 0;if(x.isSymbol3D(D)){{const A=D.symbolLayers&&D.symbolLayers.length;A?(D=D.symbolLayers.getItemAt(A-1),D="outline"in D?V.get(D,"outline","size"):void 0):D=void 0}return V.isSome(D)?D:0}return(D=h.getStroke(D))&&T.px2pt(D.width)||0};d.isVolumetricSymbol=function(D){if(V.isNone(D)||!("symbolLayers"in D)||V.isNone(D.symbolLayers))return!1;switch(D.type){case "point-3d":return D.symbolLayers.some(A=>"object"===A.type);case "line-3d":return D.symbolLayers.some(A=>
"path"===A.type);case "polygon-3d":return D.symbolLayers.some(A=>"object"===A.type||"extrude"===A.type);default:return!1}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(e,d,b,z,x,I,Q){function V(c){if(!c)return null;let f;switch(c.type){case "simple-fill":case "picture-fill":case "simple-marker":f=V(c.outline);break;
case "simple-line":{const m=I.pt2px(c.width);"none"!==c.style&&0!==m&&(f={color:c.color,style:h(c.style),width:m,cap:c.cap,join:"miter"===c.join?I.pt2px(c.miterLimit):c.join});break}default:f=null}return f}const T={left:"start",center:"middle",right:"end",justify:"start"},H={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},w=new x(1E3),h=function(){const c={};return function(f){if(c[f])return c[f];const m=f.replace(/-/g,"");return c[f]=m}}();b=new b([128,128,
128]);e.defaultThematicColor=b;e.dekebabifyLineStyle=h;e.getFill=function(c){const f=c.style;let m=null;if(c)switch(c.type){case "simple-marker":"cross"!==f&&"x"!==f&&(m=c.color);break;case "simple-fill":"solid"===f?m=c.color:"none"!==f&&(m={type:"pattern",x:0,y:0,src:d.getAssetUrl(`esri/symbols/patterns/${f}.png`),width:5,height:5});break;case "picture-fill":m={type:"pattern",src:c.url,width:I.pt2px(c.width)*c.xscale,height:I.pt2px(c.height)*c.yscale,x:I.pt2px(c.xoffset),y:I.pt2px(c.yoffset)};break;
case "text":m=c.color;break;case "cim":m=Q.getCIMSymbolColor(c)}return m};e.getPatternUrlWithColor=function(c,f){const m=c+"-"+f;return void 0!==w.get(m)?Promise.resolve(w.get(m)):z(c,{responseType:"image"}).then(k=>{k=k.data;const E=k.naturalWidth,r=k.naturalHeight,l=document.createElement("canvas");l.width=E;l.height=r;const y=l.getContext("2d");y.fillStyle=f;y.fillRect(0,0,E,r);y.globalCompositeOperation="destination-in";y.drawImage(k,0,0);k=l.toDataURL();w.put(m,k);return k})};e.getSVGAlign=function(c){return c=
(c=c.horizontalAlignment)&&T[c.toLowerCase()]||"middle"};e.getSVGBaseline=function(c){return(c=c.verticalAlignment)&&H[c.toLowerCase()]||"alphabetic"};e.getSVGBaselineShift=function(c){return"bottom"===c.verticalAlignment?"super":null};e.getStroke=V;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(e){return function(){function d(z,x){this._storage=new e.MemCacheStorage;this._storage.maxSize=z;x&&this._storage.registerRemoveFunc("",
x)}var b=d.prototype;b.put=function(z,x){this._storage.put(z,x,1,1)};b.pop=function(z){return this._storage.pop(z)};b.get=function(z){return this._storage.get(z)};b.clear=function(){this._storage.clearAll()};b.destroy=function(){this._storage.destroy()};return d}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(e,d,b){function z(h){h=b.toCIMSymbolJSON(h);if("CIMTextSymbol"===h.type)return h.height;let c=0;if(h.symbolLayers)for(const f of h.symbolLayers)b.isCIMMarker(f)&&
f.size>c?c=f.size:b.isCIMStroke(f)&&f.width>c?c=f.width:b.isCIMFill(f);return c}function x(h,c,f,m){if("CIMTextSymbol"===h.type)h.height*=c;else{if(f&&h.effects)for(const k of h.effects)V(k,c);if(h.symbolLayers)for(const k of h.symbolLayers)switch(k.type){case "CIMPictureMarker":case "CIMVectorMarker":I(k,c,m);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=m&&m.preserveOutlineWidth||(k.width*=c);break;case "CIMPictureFill":k.height*=c;k.offsetX*=c;k.offsetY*=c;break;case "CIMHatchFill":x(k.lineSymbol,
c,!0,{...m,preserveOutlineWidth:!1}),k.offsetX*=c,k.offsetY*=c,k.separation*=c}}}function I(h,c,f){h.markerPlacement&&Q(h.markerPlacement,c);h.offsetX*=c;h.offsetY*=c;h.anchorPoint&&"Absolute"===h.anchorPointUnits&&(h.anchorPoint={x:h.anchorPoint.x*c,y:h.anchorPoint.y*c});h.size*=c;if("CIMVectorMarker"===h.type&&h.markerGraphics)for(const m of h.markerGraphics)h.scaleSymbolsProportionally||x(m.symbol,c,!0,f)}function Q(h,c){b.isCIMMarkerStrokePlacement(h)&&(h.offset*=c);switch(h.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":h.customEndingOffset*=
c;h.offsetAlongLine*=c;if(h.placementTemplate&&h.placementTemplate.length){var f=h.placementTemplate.map(m=>m*c);h.placementTemplate=f}break;case "CIMMarkerPlacementAlongLineVariableSize":h.maxRandomOffset*=c;h.placementTemplate&&h.placementTemplate.length&&(f=h.placementTemplate.map(m=>m*c),h.placementTemplate=f);break;case "CIMMarkerPlacementOnLine":h.startPointOffset*=c;break;case "CIMMarkerPlacementAtExtremities":h.offsetAlongLine*=c;break;case "CIMMarkerPlacementAtRatioPositions":h.beginPosition*=
c;h.endPosition*=c;break;case "CIMMarkerPlacementPolygonCenter":h.offsetX*=c;h.offsetY*=c;break;case "CIMMarkerPlacementInsidePolygon":h.offsetX*=c,h.offsetY*=c,h.stepX*=c,h.stepY*=c}}function V(h,c){switch(h.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":h.width*=c;break;case "CIMGeometricEffectBuffer":h.size*=c;break;case "CIMGeometricEffectCut":h.beginCut*=c;h.endCut*=c;h.middleCut*=c;break;case "CIMGeometricEffectDashes":h.customEndingOffset*=c;h.offsetAlongLine*=c;if(h.dashTemplate&&
h.dashTemplate.length){const f=h.dashTemplate.map(m=>m*c);h.dashTemplate=f}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":h.length*=c;break;case "CIMGeometricEffectMove":h.offsetX*=c;h.offsetY*=c;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":h.offset*=c;break;case "CIMGeometricEffectRegularPolygon":h.radius*=c;break;case "CIMGeometricEffectTaperedPolygon":h.fromWidth*=c;h.length*=c;h.toWidth*=c;break;case "CIMGeometricEffectWave":h.amplitude*=
c,h.period*=c}}function T(h,c){let f;f="CIMTextSymbol"===h.type?h.symbol:h;h="CIMPolygonSymbol"===h.type;if(f.symbolLayers)for(const m of f.symbolLayers)if(!(m.colorLocked||h&&(b.isCIMStroke(m)||b.isCIMMarker(m)&&m.markerPlacement&&b.isCIMMarkerStrokePlacement(m.markerPlacement))))switch(m.type){case "CIMVectorMarker":m.markerGraphics.forEach(k=>{T(k.symbol,c)});break;case "CIMSolidStroke":case "CIMSolidFill":H(c,m.color);break;case "CIMHatchFill":T(m.lineSymbol,c)}}function H(h,c){for(const f of h)if(f.join(".")===
c.join("."))return;h.push(c)}function w(h,c){var f="CIMTextSymbol"===h.type?h.symbol:h;h="CIMPolygonSymbol"===h.type?!0:!1;if(f.symbolLayers)for(const m of f.symbolLayers)if(!(m.colorLocked||h&&(b.isCIMStroke(m)||b.isCIMMarker(m)&&m.markerPlacement&&b.isCIMMarkerStrokePlacement(m.markerPlacement))))switch(f=c.toArray(0),m.type){case "CIMVectorMarker":m.markerGraphics.forEach(k=>{w(k.symbol,c)});break;case "CIMSolidStroke":case "CIMSolidFill":m.color=f;break;case "CIMHatchFill":w(m.lineSymbol,c)}}
e.applyCIMSymbolColor=function(h,c){c instanceof d||(c=new d(c));h=b.toCIMSymbolJSON(h);w(h,c)};e.applyCIMSymbolRotation=function(h,c,f=!1){h=b.toCIMSymbolJSON(h);f&&0!==c&&(c=360-c);if("CIMTextSymbol"===h.type)h.angle=c;else if("CIMPointSymbol"===h.type&&h.symbolLayers){f=c-(h.angle||0);for(const m of h.symbolLayers)if(b.isCIMMarker(m)){let k=m.rotation||0;k=m.rotateClockwise?k-f:k+f;m.rotation=k}h.angle=c}};e.getCIMSymbolColor=function(h){h=b.toCIMSymbolJSON(h);const c=[];T(h,c);return c.length?
new d(b.fromCIMColor(c[0])):null};e.getCIMSymbolRotation=function(h,c=!1){h=b.toCIMSymbolJSON(h);return"CIMTextSymbol"===h.type||"CIMPointSymbol"===h.type?c&&0!==h.angle?360-h.angle:h.angle||0:0};e.getCIMSymbolSize=z;e.scaleCIMMarker=I;e.scaleCIMSymbolTo=function(h,c,f){const m=b.toCIMSymbolJSON(h);h=z(h);if(0===h)if("CIMTextSymbol"===m.type)m.height=c;else{if(m.symbolLayers)for(const k of m.symbolLayers)switch(k.type){case "CIMPictureMarker":case "CIMVectorMarker":k.size=c;break;case "CIMPictureStroke":case "CIMSolidStroke":k.width=
c}}else x(m,c/h,!1,f)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(e){function d(b,z){"string"!==typeof b&&(b=String(b));switch(z){case "LowerCase":return b.toLowerCase();case "Allcaps":return b.toUpperCase();default:return b}}e._adjustTextCase=d;e.colorToArray=function(b){return[b.r,b.g,b.b,b.a]};e.createLabelOverrideFunction=function(b,z,x){const I=H=>{let w=H.length;for(;w--;)if(-1===" /-,\n".indexOf(H.charAt(w)))return!1;
return!0},Q=[];var V=0;let T=-1;do T=z.indexOf("[",V),T>=V&&(T>V&&(V=z.substr(V,T-V),Q.push([V,null,I(V)])),V=T+1,T=z.indexOf("]",V),T>=V&&(T>V&&(V=z.substr(V,T-V),(V=b[V])&&Q.push([null,V,!1])),V=T+1));while(-1!==T);V<z.length-1&&(b=z.substr(V),Q.push([b,null,I(b)]));return H=>{let w="",h=null;for(const c of Q){const [f,m,k]=c;if(f)k?h=f:(h&&(w+=h,h=null),w+=f);else{const E=H.attributes[m];E&&(h&&(w+=h,h=null),w+=E)}}return d(w,x)}};e.evaluateValueOrFunction=function(b,z,x,I){return"function"===
typeof b?b(z,x,I):b};e.fromCIMColor=function(b){return b?{r:b[0],g:b[1],b:b[2],a:b[3]/255}:{r:0,g:0,b:0,a:0}};e.getValue=b=>isNaN(b)||!b?0:b;e.isCIMFill=function(b){return"CIMGradientFill"===b.type||"CIMHatchFill"===b.type||"CIMPictureFill"===b.type||"CIMSolidFill"===b.type||"CIMWaterFill"===b.type};e.isCIMMarker=function(b){return"CIMVectorMarker"===b.type||"CIMPictureMarker"===b.type||"CIMBarChartMarker"===b.type||"CIMCharacterMarker"===b.type||"CIMPieChartMarker"===b.type||"CIMStackedBarChartMarker"===
b.type};e.isCIMMarkerStrokePlacement=function(b){return"CIMMarkerPlacementAlongLineRandomSize"===b.type||"CIMMarkerPlacementAlongLineSameSize"===b.type||"CIMMarkerPlacementAlongLineVariableSize"===b.type||"CIMMarkerPlacementAtExtremities"===b.type||"CIMMarkerPlacementAtMeasuredUnits"===b.type||"CIMMarkerPlacementAtRatioPositions"===b.type||"CIMMarkerPlacementOnLine"===b.type||"CIMMarkerPlacementOnVertices"===b.type};e.isCIMStroke=function(b){return"CIMGradientStroke"===b.type||"CIMPictureStroke"===
b.type||"CIMSolidStroke"===b.type};e.resampleHermite=function(b,z,x,I,Q,V,T=!0){const H=z/Q;x/=V;const w=Math.ceil(H/2),h=Math.ceil(x/2);for(let m=0;m<V;m++)for(let k=0;k<Q;k++){const E=4*(k+(T?V-m-1:m)*Q);var c=0;let r=0,l=0,y=0,F=0,J=0,t=0;const q=(m+.5)*x;for(let O=Math.floor(m*x);O<(m+1)*x;O++){var f=Math.abs(q-(O+.5))/h;const L=(k+.5)*H;f*=f;for(let n=Math.floor(k*H);n<(k+1)*H;n++){let G=Math.abs(L-(n+.5))/w;c=Math.sqrt(f+G*G);-1<=c&&1>=c&&(c=2*c*c*c-3*c*c+1,0<c&&(G=4*(n+O*z),t+=c*b[G+3],l+=
c,255>b[G+3]&&(c=c*b[G+3]/250),y+=c*b[G],F+=c*b[G+1],J+=c*b[G+2],r+=c))}}I[E]=y/r;I[E+1]=F/r;I[E+2]=J/r;I[E+3]=t/l}};e.toCIMSymbolJSON=function(b){var z;return null==(z=b.data)?void 0:z.symbol};e.toKebabCase=b=>b&&b.toLowerCase().replace(/\s+/g,"-");Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/FeatureTemplates/TemplateItemGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V,T){b=function(H){function w(h){h=H.call(this,h)||this;h.items=null;h.label=null;return h}e._inheritsLoose(w,H);return w}(z.IdentifiableMixin(b));d.__decorate([x.property()],b.prototype,"items",void 0);d.__decorate([x.property()],b.prototype,"label",void 0);return b=d.__decorate([T.subclass("esri.widgets.FeatureTemplates.TemplateItemGroup")],b)})},"esri/widgets/FeatureTemplates/ItemList":function(){define(["exports","../support/Heading","../support/jsxFactory","../support/widgetUtils"],
function(e,d,b,z){function x(w){const {headingLevel:h,identify:c,items:f,renderIcon:m,filterText:k,onItemMouseLeave:E,onItemMouseEnter:r,onItemSelect:l,selectedItem:y}=w;return 0===f.length?b.tsx("div",{class:H.noMatchesMessage,key:"no-matches"},w.messages.noMatches):f[0].items?b.tsx("div",{class:H.scroller,key:"item-container"},f.map(F=>V({filterText:k,group:F,headingLevel:h,identify:c,onItemMouseLeave:E,onItemMouseEnter:r,onItemSelect:l,renderIcon:m,selectedItem:y}))):b.tsx("ul",{class:z.classes(H.list,
H.scroller),key:"item-container"},f.map(F=>Q({item:F,identify:c,grouped:!0,onItemMouseLeave:E,onItemMouseEnter:r,onItemSelect:l,renderIcon:m,filterText:k,selectedItem:y})))}function I(w){const h=`${w.id}-placeholder`;return b.tsx("div",{class:H.filterContainer,key:"filter"},b.tsx("input",{"aria-labelledby":h,class:z.classes(H.input,H.filterInput),oninput:c=>{c=c.currentTarget;w.onFilterChange&&w.onFilterChange(c.value)},value:w.filterText,type:"search"}),w.filterText?null:b.tsx("div",{class:H.filterPlaceholder,
id:h,key:"placeholder"},b.tsx("span",{class:H.searchIcon,"aria-hidden":"true"}),b.tsx("div",{class:H.filterPlaceholderText},w.messages.filterPlaceholder)))}function Q(w){const {identify:h,item:c,selectedItem:f,grouped:m,filterText:k,onItemSelect:E,onItemMouseEnter:r,onItemMouseLeave:l,renderIcon:y}=w;w=`${(null==h?void 0:h(c))||c.id}__${c.label}`;const F=f?`${(null==h?void 0:h(f))||f.id}__${f.label}`:"";return b.tsx("li",{"aria-level":m?"2":"",class:z.classes(H.item,w===F&&H.itemSelected),"data-item":c,
key:w,onclick:J=>{J=J.currentTarget["data-item"];E&&E(J)},onmouseenter:J=>{J=J.currentTarget["data-item"];r&&r(J)},onkeydown:J=>{z.isActivationKey(J.key)&&(J=J.currentTarget["data-item"],E&&E(J))},onmouseleave:J=>{J=J.currentTarget["data-item"];l&&l(J)},tabIndex:0},b.tsx("div",{class:H.itemContainer},y&&y({item:c}),T({text:c.label,match:k})))}function V(w){const {group:h,headingLevel:c,identify:f,onItemMouseLeave:m,onItemMouseEnter:k,onItemSelect:E,filterText:r,renderIcon:l,selectedItem:y}=w;w=`${f&&
f(h)||h.id}-heading`;return b.tsx("section",{"aria-labelledby":w,class:H.group,key:h.label},b.tsx(d.Heading,{id:w,class:H.groupHeader,level:c},T({text:h.label,match:r})),b.tsx("ul",{class:H.list},h.items.map(F=>Q({item:F,identify:f,grouped:!0,onItemMouseLeave:m,onItemMouseEnter:k,onItemSelect:E,renderIcon:l,filterText:r,selectedItem:y}))))}function T(w){const {match:h,text:c}=w;w=null;if(h){w=c.toLowerCase();var f=h.toLowerCase(),m=w.indexOf(f);-1===m?w=c:(w=c.substring(0,m),f=c.substr(m,h.length),
m=c.substring(m+h.length),w=b.tsx("span",null,w,b.tsx("strong",null,f),m))}else w=c;return b.tsx("span",{class:H.itemLabel},w)}const H={base:"esri-item-list",list:"esri-item-list__list",group:"esri-item-list__group",scroller:"esri-item-list__scroller",groupHeader:"esri-item-list__group-header",item:"esri-item-list__list-item",itemSelected:"esri-item-list__list-item--selected",itemContainer:"esri-item-list__list-item-container",itemLabel:"esri-item-list__list-item-label",noMatchesMessage:"esri-item-list__no-matches-message",
noItemsMessage:"esri-item-list__no-items-message",filterContainer:"esri-item-list__filter-container",filterPlaceholder:"esri-item-list__filter-placeholder",filterInput:"esri-item-list__filter-input",filterPlaceholderText:"esri-item-list__filter-placeholder-text",searchIcon:"esri-icon-search",widget:"esri-widget",input:"esri-input"};e.ItemList=function(w){const {id:h,identify:c,filterEnabled:f=!0,headingLevel:m=4,items:k,selectedItem:E,messages:r,filterText:l="",onFilterChange:y,renderIcon:F,onItemMouseLeave:J,
onItemMouseEnter:t,onItemSelect:q}=w;return b.tsx("div",{class:z.classes(H.base,H.widget),key:h},f?I({filterText:l,messages:r,onFilterChange:y,id:h}):null,x({identify:c,items:k,selectedItem:E,messages:r,filterText:l,headingLevel:m,renderIcon:F,onItemMouseLeave:J,onItemMouseEnter:t,onItemSelect:q}))};e.renderGroup=V;e.renderItem=Q;e.renderLabel=T;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ../core/Logger ./support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k){Q=function(E){function r(y,F){y=E.call(this,y,F)||this;y._animationDelay=500;y._animationPromise=null;y.location=null;y.view=null;y.viewModel=new c;y.visible=!1;return y}e._inheritsLoose(r,E);var l=r.prototype;l.initialize=function(){this.own([x.watch(this,"visible",y=>this._visibleChange(y))])};l.destroy=function(){this._animationPromise=null};l.show=function(y){const {location:F,promise:J}=y;F&&(this.viewModel.location=F);this.visible=!0;y=()=>this.hide();
J&&J.catch(()=>{}).then(y)};l.hide=function(){this.visible=!1};l.render=function(){var {visible:y}=this,{screenLocation:F}=this.viewModel;F=!!F;y={["esri-spinner--start"]:y&&F,["esri-spinner--finish"]:!y&&F};F=this._getPositionStyles();return k.tsx("div",{class:this.classes("esri-spinner",y),styles:F})};l._visibleChange=function(y){if(y)this.viewModel.screenLocationEnabled=!0;else{var F=z.after(this._animationDelay);this._animationPromise=F;F.catch(()=>{}).then(()=>{this._animationPromise===F&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};l._getPositionStyles=function(){const {screenLocation:y,view:F}=this.viewModel;if(!F||b.isNone(y))return{};const {padding:J}=F;return{left:`${y.x-J.left}px`,top:`${y.y-J.top}px`}};return r}(h);d.__decorate([I.aliasOf("viewModel.location")],Q.prototype,"location",void 0);d.__decorate([I.aliasOf("viewModel.view")],Q.prototype,"view",void 0);d.__decorate([H.property({type:c})],Q.prototype,"viewModel",void 0);d.__decorate([I.aliasOf("viewModel.visible")],Q.prototype,
"visible",void 0);return Q=d.__decorate([w.subclass("esri.widgets.Spinner")],Q)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(e,d,b,z,x,I,Q,V){z=function(T){function H(w){w=T.call(this,w)||this;w.visible=
!1;return w}e._inheritsLoose(H,T);return H}(V);d.__decorate([b.property()],z.prototype,"visible",void 0);return z=d.__decorate([Q.subclass("esri.widgets.CompassViewModel")],z)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w){b=function(h){function c(m){var k=h.call(this,m)||this;k._anchorHandles=new z;k.location=null;k.screenLocation=null;k.screenLocationEnabled=!1;k.view=null;k._anchorHandles.add([I.watch(e._assertThisInitialized(k),["screenLocationEnabled","location","view.size","view.stationary"],()=>k._updateScreenPointAndHandle()),I.watch(e._assertThisInitialized(k),["view","view.ready"],()=>k._wireUpView())]);return k}e._inheritsLoose(c,h);var f=c.prototype;f.destroy=function(){this.view=
null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};f._wireUpView=function(){this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var {view:m}=this;m=I.pausable(m,"3d"===m.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(m,"view");this._viewpointHandle=m;this._toggleWatchingViewpoint()}};f._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};
f._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};f._toggleWatchingViewpoint=function(){const {_viewpointHandle:m,location:k,screenLocationEnabled:E}=this;m&&(k&&E?m.resume():m.pause())};f._setScreenLocation=function(){const {location:m,view:k,screenLocationEnabled:E}=this;var r=this.get("view.ready");r=E&&r&&x.isSome(m)?k.toScreen(m):null;this._set("screenLocation",r)};return c}(b.EventedAccessor);d.__decorate([Q.property()],b.prototype,"location",
void 0);d.__decorate([Q.property({readOnly:!0})],b.prototype,"screenLocation",void 0);d.__decorate([Q.property()],b.prototype,"screenLocationEnabled",void 0);d.__decorate([Q.property()],b.prototype,"view",void 0);return b=d.__decorate([w.subclass("esri.widgets.support.AnchorElementViewModel")],b)})},"esri/widgets/Editor/EditorViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleOwner ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../layers/GraphicsLayer ../../views/interactive/snapping/SnappingOptions ../Attachments/AttachmentsViewModel ./BatchCreateWorkflow ./CreateWorkflow ./UpdateWorkflow ../FeatureForm/FeatureFormViewModel ../FeatureTemplates/FeatureTemplatesViewModel ../Sketch/SketchViewModel ../Spinner/SpinnerViewModel".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J,t,q){function O(C,B,D){n.error(new z(C,B,D))}function L(C,B){return C&&C.find(D=>D.layer===B)}const n=Q.getLogger("esri.widgets.Editor.EditorViewModel"),G=["create","update"];x=function(C){function B(A){A=C.call(this,A)||this;A._sketchGraphicsLayer=new m({listMode:"hide",internal:!0});A.activeWorkflow=null;A.activityQueue=[];A.failures=[];A.attachmentsViewModel=new E({abilities:{editing:!0}});A.featureFormViewModel=new F;A.featureTemplatesViewModel=
new J;A.layerInfos=null;A.sketchViewModel=new t({layer:A._sketchGraphicsLayer});A.snappingOptions=new k;A.spinnerViewModel=new q;return A}e._inheritsLoose(B,C);var D=B.prototype;D.initialize=function(){this.handles.add([V.on(this,"activeWorkflow","cancel",()=>this.emit("workflow-cancel")),V.on(this,"activeWorkflow","commit",()=>this.emit("workflow-commit")),V.init(this,"view.map",A=>{A&&A.add(this._sketchGraphicsLayer)}),V.watch(this,"editableItems",()=>{const {activeWorkflow:A}=this;this.refreshCreationTemplates();
if(A){var {stepId:K}=A;"create"===A.type?"awaiting-feature-creation-info"!==K||this.canCreate||this._cancelWorkflow():"update"===A.type&&("awaiting-feature-to-update"===K&&!this.canUpdate||"awaiting-update-feature-candidate"===K&&!A.data.candidates.some(P=>{const N=this.editableItems.find(g=>g.layer===P.layer);return N&&-1<N.supports.indexOf("update")}))&&this._cancelWorkflow()}})])};D.destroy=function(){this._cancelWorkflow().then(()=>{var A;null!=(A=this.view)&&A.map&&this.view.map.remove(this._sketchGraphicsLayer);
this.view=null})};D.startCreateWorkflowAtFeatureTypeSelection=function(){var A=e._asyncToGenerator(function*(){if(this.canCreate){yield this._cancelWorkflow();var K=this._createCreateWorkflow();yield K.start();this._set("activeWorkflow",K)}else O("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(){return A.apply(this,arguments)}}();D.startCreateWorkflowAtFeatureCreation=function(){var A=e._asyncToGenerator(function*(K){if(this.canCreate){yield this._cancelWorkflow();
var P=this._createCreateWorkflow("awaiting-feature-to-create");P.data.creationInfo=K;yield P.start();this._set("activeWorkflow",P)}else O("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(K){return A.apply(this,arguments)}}();D.startBatchCreateWorkflow=function(){var A=e._asyncToGenerator(function*(K,P="awaiting-feature-creation-info"){if(!this.canCreate)throw new z("editing:unsupported-workflow","Batch create workflow is unsupported or disabled.");yield this._cancelWorkflow();
K=this._createBatchCreateWorkflow(K,P);yield K.start();this._set("activeWorkflow",K)});return function(K){return A.apply(this,arguments)}}();D.startCreateWorkflowAtFeatureEdit=function(){var A=e._asyncToGenerator(function*(K){if(this.canCreate){yield this._cancelWorkflow();var P=this._createCreateWorkflow("editing-new-feature");P.data.edits.feature=K;yield P.start();this._set("activeWorkflow",P)}else O("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(K){return A.apply(this,
arguments)}}();D.startUpdateWorkflowAtFeatureSelection=function(){var A=e._asyncToGenerator(function*(){if(this.canUpdate){yield this._cancelWorkflow();var K=this._createUpdateWorkflow();yield K.start();this._set("activeWorkflow",K)}else O("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(){return A.apply(this,arguments)}}();D.startUpdateWorkflowAtMultipleFeatureSelection=function(){var A=e._asyncToGenerator(function*(K){if(this.canUpdate){yield this._cancelWorkflow();
var P=this._createUpdateWorkflow("awaiting-update-feature-candidate");P.data.candidates=K;yield P.start();this._set("activeWorkflow",P)}else O("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(K){return A.apply(this,arguments)}}();D.startUpdateWorkflowAtFeatureEdit=function(){var A=e._asyncToGenerator(function*(K){if(this.canUpdate){yield this._cancelWorkflow();var P=this._createUpdateWorkflow("editing-existing-feature");P.data.edits.feature=K;yield P.start();
this._set("activeWorkflow",P)}else O("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(K){return A.apply(this,arguments)}}();D.deleteFeatureFromWorkflow=function(){var A=e._asyncToGenerator(function*(){const {activeWorkflow:K}=this;K&&"update"===K.type?(yield this._delete(K.data.edits.feature),yield K.reset()):O("editing:unsupported-workflow","Deleting requires an active update workflow.")});return function(){return A.apply(this,arguments)}}();D.cancelWorkflow=
function(){var A=e._asyncToGenerator(function*(K){return this._cancelWorkflow({warn:!0,...K})});return function(K){return A.apply(this,arguments)}}();D.refreshCreationTemplates=function(){const A=[];for(const {layer:K,supports:P}of this.editableItems)"templates"in K&&P.includes("create")&&A.push(K);this.featureTemplatesViewModel.layers=A};D._cancelWorkflow=function(){var A=e._asyncToGenerator(function*(K){const P=this.activeWorkflow;P?K&&!1===K.force?(yield P.cancel(K),this._set("activeWorkflow",
null)):(this.emit("workflow-cancel"),this._set("activeWorkflow",null),yield P.cancel(K)):K&&K.warn&&O("editing:no-active-workflow","There is no active workflow to cancel.")});return function(K){return A.apply(this,arguments)}}();D._createBatchCreateWorkflow=function(A,K){return r.create(this,A,K,(P,N)=>this._applyEdits(P,N))};D._createCreateWorkflow=function(A){return l.create(this,A,(K,P)=>this._applyEdits(K,P))};D._createUpdateWorkflow=function(A){return y.create(this,A,(K,P)=>this._applyEdits(K,
P))};D._delete=function(){var A=e._asyncToGenerator(function*(K){const P=K.sourceLayer;"applyEdits"in P&&(yield this._applyEdits(P,{deleteFeatures:[K]}))});return function(K){return A.apply(this,arguments)}}();D._applyEdits=function(){var A=e._asyncToGenerator(function*(K,P){var N=this;yield this._queueOperation(e._asyncToGenerator(function*(){const g=yield N.view.whenLayerView(K),v=yield K.applyEdits(P);yield V.whenFalseOnce(g,"updating");return v}))});return function(K,P){return A.apply(this,arguments)}}();
D._queueOperation=function(A){this.activityQueue.push(A);this.notifyChange("syncing");const K=(P,N)=>{P=N.indexOf(P);-1<P&&N.splice(P,1)};return A().then(({addFeatureResults:P,deleteFeatureResults:N,updateFeatureResults:g})=>{if(P=P.find(v=>!!v.error)||g.find(v=>!!v.error)||N.find(v=>!!v.error))throw P.error;}).catch(P=>{O("editing:operation-error","An error occurred.",{error:P});const N={error:P,retry:()=>{K(N,this.failures);return this._queueOperation(A)},cancel:()=>{K(N,this.failures)}};this._set("failures",
[...this.failures,N])}).then(()=>{K(A,this.activityQueue);this.notifyChange("syncing")})};e._createClass(B,[{key:"allowedWorkflows",get:function(){return this._get("allowedWorkflows")},set:function(A){A&&0!==A.length||(A=[...G]);this._set("allowedWorkflows",A)}},{key:"canCreate",get:function(){return this.editableItems.some(A=>A.supports.includes("create"))}},{key:"canUpdate",get:function(){return this.editableItems.some(A=>A.supports.includes("update"))}},{key:"editableItems",get:function(){var A,
K,P;const N=null==(A=this.view)?void 0:A.allLayerViews;if(!N)return new b;const g=new Set(null==(K=this.view)?void 0:null==(P=K.map)?void 0:P.editableLayers);return N.filter(v=>g.has(v.layer)).map(v=>{const {layer:u,suspended:U}=v,{data:X,operations:fa}=u.capabilities;v=L(this.layerInfos,u);const ma="supportsAttachment"in X&&X.supportsAttachment&&(!v||!1!==v.allowAttachments);if(U)return{hasAttachments:ma,layer:u,supports:[]};const ta=[];fa.supportsAdd&&this.allowedWorkflows.includes("create")&&(!v||
!1!==v.enabled&&!1!==v.addEnabled)&&ta.push("create");fa.supportsUpdate&&this.allowedWorkflows.includes("update")&&(!v||!1!==v.enabled&&!1!==v.updateEnabled)&&ta.push("update");!1!==(v&&v.deleteEnabled)&&fa.supportsDelete&&ta.push("delete");return{hasAttachments:ma,layer:u,supports:ta}}).reverse()}},{key:"state",get:function(){if(!this.get("view.ready")||0===this.editableItems.length)return"disabled";var A=this.attachmentsViewModel.mode;if("add"===A)return"adding-attachment";if("edit"===A)return"editing-attachment";
({activeWorkflow:A}=this);return A?A.stepId:"ready"}},{key:"syncing",get:function(){return 0<this.activityQueue.length}},{key:"view",set:function(A){this.sketchViewModel.view=A;this.spinnerViewModel.view=A;this._set("view",A)}}]);return B}(I.HandleOwnerMixin(x.EventedAccessor));d.__decorate([c.property({readOnly:!0})],x.prototype,"activeWorkflow",void 0);d.__decorate([c.property({readOnly:!0})],x.prototype,"activityQueue",void 0);d.__decorate([c.property({value:[...G]})],x.prototype,"allowedWorkflows",
null);d.__decorate([c.property({readOnly:!0})],x.prototype,"canCreate",null);d.__decorate([c.property({readOnly:!0})],x.prototype,"canUpdate",null);d.__decorate([c.property({readOnly:!0})],x.prototype,"editableItems",null);d.__decorate([c.property({readOnly:!0})],x.prototype,"failures",void 0);d.__decorate([c.property()],x.prototype,"attachmentsViewModel",void 0);d.__decorate([c.property()],x.prototype,"featureFormViewModel",void 0);d.__decorate([c.property()],x.prototype,"featureTemplatesViewModel",
void 0);d.__decorate([c.property()],x.prototype,"layerInfos",void 0);d.__decorate([c.property()],x.prototype,"sketchViewModel",void 0);d.__decorate([T.aliasOf("sketchViewModel.snappingOptions")],x.prototype,"snappingOptions",void 0);d.__decorate([c.property()],x.prototype,"spinnerViewModel",void 0);d.__decorate([c.property()],x.prototype,"state",null);d.__decorate([c.property({readOnly:!0})],x.prototype,"syncing",null);d.__decorate([c.property()],x.prototype,"view",null);return x=d.__decorate([f.subclass("esri.widgets.Editor.EditorViewModel")],
x)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),function(e,d,b,z,x,I,Q,V,T,H,w,h,c){z=function(f){function m(E){E=f.call(this,
E)||this;E.elevationInfo=null;E.graphics=new h.GraphicsCollection;E.screenSizePerspectiveEnabled=!0;E.type="graphics";E.internal=!1;return E}e._inheritsLoose(m,f);var k=m.prototype;k.destroy=function(){this.removeAll();this.graphics.destroy()};k.add=function(E){this.graphics.add(E);return this};k.addMany=function(E){this.graphics.addMany(E);return this};k.removeAll=function(){this.graphics.removeAll();return this};k.remove=function(E){this.graphics.remove(E)};k.removeMany=function(E){this.graphics.removeMany(E)};
k.on=function(E,r){return f.prototype.on.call(this,E,r)};k.graphicChanged=function(E){this.emit("graphic-update",E)};return m}(H.BlendLayer(w.ScaleRangeLayer(T)));d.__decorate([b.property({type:c})],z.prototype,"elevationInfo",void 0);d.__decorate([b.property(V.owningCollectionProperty(h.GraphicsCollection,"graphics"))],z.prototype,"graphics",void 0);d.__decorate([b.property({type:["show","hide"]})],z.prototype,"listMode",void 0);d.__decorate([b.property()],z.prototype,"screenSizePerspectiveEnabled",
void 0);d.__decorate([b.property({readOnly:!0})],z.prototype,"type",void 0);d.__decorate([b.property({constructOnly:!0})],z.prototype,"internal",void 0);return z=d.__decorate([Q.subclass("esri.layers.GraphicsLayer")],z)})},"esri/widgets/Editor/BatchCreateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/arrayUtils ../../core/maybe ../../core/reactiveUtils ../../core/Logger ../../core/accessorSupport/ensureType ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass ../../views/interactive/snapping/FeatureSnappingLayerSource ./BatchCreateWorkflowData ./Workflow ./workflowUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f){var m;I=m=function(k){function E(l){l=k.call(this,l)||this;l.type="batch-create";l.createFeatureState="create-new";l.featureFormHandle=null;l.visualVariableAttributes={rotation:null,size:null};l.highlightHandles=new Map;l.preventDefaultActionOnCancel=!1;return l}e._inheritsLoose(E,k);var r=E.prototype;r.updatePendingFeature=function(){var l=e._asyncToGenerator(function*(y){this.preventDefaultActionOnCancel=!0;this.data.viewModel.sketchViewModel.cancel();b.remove(this.lastActiveGraphics,
y);return this.startUpdating(y)});return function(y){return l.apply(this,arguments)}}();E.create=function(l,y,F,J){l=new m({data:new h.BatchCreateWorkflowData({creationInfo:y,viewModel:l}),onCommit:function(){var t=e._asyncToGenerator(function*(q){yield J(q.creationInfo.layer,{addFeatures:q.viewModel.sketchViewModel.layer.graphics.toArray()})});return function(q){return t.apply(this,arguments)}}()});l._set("steps",this._createWorkflowSteps(l,F));return l};r.highlight=function(l){const y=this.data.viewModel.view;
"3d"===y.type&&this.highlightHandles.set(l,y.highlight(l))};r.removeHighlight=function(l){z.removeMaybe(this.highlightHandles.get(l));this.highlightHandles.delete(l)};r.startCreating=function(){var l=e._asyncToGenerator(function*(){this.createFeatureState="create-new";return f.startCreatingNewFeature(this.data.viewModel.sketchViewModel,this.data.creationInfo)});return function(){return l.apply(this,arguments)}}();r.startUpdating=function(){var l=e._asyncToGenerator(function*(y){const F=this.data.viewModel,
J=F.sketchViewModel,t=this.data.creationInfo.layer,q=f.findLayerInfo(F.layerInfos,t),O=null==q?void 0:q.formTemplate;F.featureFormViewModel.set({feature:y,fieldConfig:O?null:null==q?void 0:q.fieldConfig,formTemplate:O});z.removeMaybe(this.featureFormHandle);this.featureFormHandle=F.featureFormViewModel.on("value-change",e._asyncToGenerator(function*(){y.attributes=F.featureFormViewModel.getValues();"3d"===J.view.type&&(yield f.updateGraphicSymbolWhenRequired(y))}));this.removeHighlight(y);this.createFeatureState=
"update-pending";this.visualVariableAttributes=f.getVisualVariableAttributes(y);return f.startUpdatingFeature(J,y,t,this.visualVariableAttributes)});return function(y){return l.apply(this,arguments)}}();E._createWorkflowSteps=function(l,y="awaiting-feature-creation-info"){const {data:F,handles:J}=l;let t=null,q=!0;y=f.createWorkflowSteps(["awaiting-feature-creation-info","batch-creating-features"],y,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",setUp(){var O=this;return e._asyncToGenerator(function*(){F.creationInfo=
null;J.add(F.viewModel.featureTemplatesViewModel.on("select",({item:L})=>{F.creationInfo={layer:L.layer,template:L.template};F.viewModel.activeWorkflow.next()}),O.id)})()},tearDown(){var O=this;return e._asyncToGenerator(function*(){J.remove(O.id)})()}}),"batch-creating-features":()=>({id:"batch-creating-features",setUp(){var O=this;return e._asyncToGenerator(function*(){const L=F.viewModel.view,n=F.viewModel.sketchViewModel;q=n.updateOnGraphicClick;n.updateOnGraphicClick=!1;l.lastActiveGraphics=
[];l.featureFormHandle=z.removeMaybe(l.featureFormHandle);l.visualVariableAttributes={rotation:null,size:null};const G=n.on("create",function(){var P=e._asyncToGenerator(function*(N){if("cancel"===N.state){if(l.preventDefaultActionOnCancel){l.preventDefaultActionOnCancel=!1;return}if(1>l.lastActiveGraphics.length)return l.startCreating();N=l.lastActiveGraphics.pop();return l.startUpdating(N)}if("complete"===N.state)return l.startUpdating(N.graphic)});return function(N){return P.apply(this,arguments)}}()),
C=n.on("update",function(){var P=e._asyncToGenerator(function*(N){var g=N.graphics[0];if("complete"===N.state){g!==t&&(l.lastActiveGraphics.push(g),l.highlight(g));t=null;if(N.aborted&&l.preventDefaultActionOnCancel){l.preventDefaultActionOnCancel=!1;return}return l.startCreating()}"start"===N.state&&l.removeHighlight(g);yield f.visualVariableInteractiveUpdate(L,g,N,l.visualVariableAttributes);N=g.attributes;z.isSome(l.visualVariableAttributes.rotation)&&({field:g}=l.visualVariableAttributes.rotation,
F.viewModel.featureFormViewModel.setValue(g,N[g]));z.isSome(l.visualVariableAttributes.size)&&({field:g}=l.visualVariableAttributes.size,F.viewModel.featureFormViewModel.setValue(g,N[g]))});return function(N){return P.apply(this,arguments)}}()),B=n.on("delete",function(){var P=e._asyncToGenerator(function*(N){N=N.graphics[0];b.remove(l.lastActiveGraphics,N);t=N});return function(N){return P.apply(this,arguments)}}());let D=null;const A=x.react(()=>{var P;const N=n.snappingOptions.featureSources.find(g=>
g.layer===F.creationInfo.layer);return{hasFeatureLayerSource:!!N,enabled:null!=(P=null==N?void 0:N.enabled)?P:!1}},({hasFeatureLayerSource:P,enabled:N})=>{const g=n.snappingOptions.featureSources;P?(z.isNone(D)&&(D=new w({layer:n.layer,enabled:N}),g.add(D)),D.enabled=N):(z.isSome(D)&&g.remove(D),D=z.destroyMaybe(D))},x.syncAndInitial),K=L.on("immediate-click",function(){var P=e._asyncToGenerator(function*(N){N=yield L.hitTest(N,{include:n.layer});0<N.results.length&&(N=N.results[0].graphic,"transform"!==
n.activeTool&&"reshape"!==n.activeTool||n.updateGraphics.getItemAt(0)===N||(yield l.updatePendingFeature(N)))});return function(N){return P.apply(this,arguments)}}());yield l.startCreating();J.add({remove:()=>{z.removeMaybe(l.featureFormHandle);G.remove();C.remove();B.remove();A.remove();z.isSome(D)&&n.snappingOptions.featureSources.remove(D);D=z.destroyMaybe(D);n.cancel();K.remove()}},O.id)})()},tearDown(O){var L=this;return e._asyncToGenerator(function*(){O.cancelled&&F.viewModel.sketchViewModel.layer.removeAll();
J.remove(L.id);F.viewModel.sketchViewModel.updateOnGraphicClick=q})()}})});return f.avoidFeatureTemplateSelectionWithOnlyOneItem(F,y)};e._createClass(E,[{key:"numPendingFeatures",get:function(){return this.data.viewModel.sketchViewModel.layer.graphics.length}},{key:"pendingFeatures",get:function(){return this.data.viewModel.sketchViewModel.layer.graphics}}]);return E}(c);return I=m=d.__decorate([H.subclass("esri.widgets.Editor.BatchCreateWorkflow")],I)})},"esri/widgets/Editor/BatchCreateWorkflowData":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V,T){e.BatchCreateWorkflowData=function(H){function w(h){h=H.call(this,h)||this;h.creationInfo=null;h.viewModel=null;return h}d._inheritsLoose(w,H);return w}(z);b.__decorate([x.property()],e.BatchCreateWorkflowData.prototype,"creationInfo",void 0);b.__decorate([x.property()],e.BatchCreateWorkflowData.prototype,"viewModel",void 0);e.BatchCreateWorkflowData=b.__decorate([T.subclass("esri.widgets.Editor.BatchCreateWorkflowData")],e.BatchCreateWorkflowData);Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/widgets/Editor/Workflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Evented ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(e,d,b,z,x,I,Q,V,T,H){z=function(w){function h(f){f=w.call(this,f)||this;f._indexHistory=[];f._lastStepIndex=-1;f._stepIndex=
-1;f._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"};f.data=void 0;f.started=!1;f.steps=[];f.type=null;return f}e._inheritsLoose(h,w);var c=h.prototype;c.cancel=function(){var f=e._asyncToGenerator(function*(m={force:!0}){return!1!==m.force?this._cancel():new Promise((k,E)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel().then(k)},deny:()=>E(new b("workflow:cancel-denied","Request to cancel workflow was denied."))}})})});return function(){return f.apply(this,
arguments)}}();c.commit=function(){var f=e._asyncToGenerator(function*(){this.handles.remove(this._handleKeys.beforeCommit);yield this.onCommit(this.data);this.handles.remove(this._handleKeys.afterCommit);this.emit("commit");this.started&&(yield this.reset())});return function(){return f.apply(this,arguments)}}();c.go=function(){var f=e._asyncToGenerator(function*(m){var {steps:k}=this;k=k.findIndex(E=>E.id===m);this._indexHistory.push(this._stepIndex);yield this._go(k)});return function(m){return f.apply(this,
arguments)}}();c.next=function(){var f=e._asyncToGenerator(function*(){this._indexHistory.push(this._stepIndex);yield this._go(this._stepIndex+1)});return function(){return f.apply(this,arguments)}}();c.previous=function(){var f=e._asyncToGenerator(function*(m={cancelCurrentStep:!1}){yield this._go(this._indexHistory.pop(),m.cancelCurrentStep)});return function(){return f.apply(this,arguments)}}();c.reset=function(){var f=e._asyncToGenerator(function*(){yield this._cancel(!1);yield this.start()});
return function(){return f.apply(this,arguments)}}();c.start=function(){var f=e._asyncToGenerator(function*(){this._set("started",!0);yield this._go(-1===this._stepIndex?0:this._stepIndex)});return function(){return f.apply(this,arguments)}}();c._cancel=function(){var f=e._asyncToGenerator(function*(m=!0){this.started&&(this._set("started",!1),yield this.steps[this._stepIndex].tearDown({cancelled:!0}),this.data&&this.data.viewModel.sketchViewModel.layer.removeAll());this.handles.remove([this._handleKeys.afterCommit,
this._handleKeys.beforeCommit]);this._resetIndexing(m);m&&this.emit("cancel")});return function(){return f.apply(this,arguments)}}();c._go=function(){var f=e._asyncToGenerator(function*(m=-1,k=!1){-1>=m||m>=this.steps.length||(this.started&&(-1<this._lastStepIndex&&(yield this.steps[this._lastStepIndex].tearDown({cancelled:k})),yield this.steps[m].setUp(),this._lastStepIndex=m),this._stepIndex=m,this._notifyStepProps())});return function(){return f.apply(this,arguments)}}();c._resetIndexing=function(f=
!0){this._lastStepIndex=this._stepIndex=-1;this._indexHistory.length=0;f&&this._notifyStepProps()};c._notifyStepProps=function(){this.notifyChange("stepId");this.notifyChange("hasPreviousStep");this.notifyChange("hasNextStep")};e._createClass(h,[{key:"hasNextStep",get:function(){const {steps:f}=this;return!!(f&&this._stepIndex<f.filter(m=>!m.parent).length-1)}},{key:"hasPreviousStep",get:function(){return 0<this._stepIndex}},{key:"stepId",get:function(){var {steps:f}=this;return(f=f&&f[this._stepIndex])&&
f.id}}]);return h}(x.HandleOwnerMixin(z.EventedAccessor));d.__decorate([I.property()],z.prototype,"data",void 0);d.__decorate([I.property()],z.prototype,"hasNextStep",null);d.__decorate([I.property()],z.prototype,"hasPreviousStep",null);d.__decorate([I.property()],z.prototype,"onCommit",void 0);d.__decorate([I.property()],z.prototype,"started",void 0);d.__decorate([I.property({readOnly:!0})],z.prototype,"stepId",null);d.__decorate([I.property()],z.prototype,"steps",void 0);d.__decorate([I.property({readOnly:!0})],
z.prototype,"type",void 0);d.__decorate([I.property()],z.prototype,"commit",null);return z=d.__decorate([H.subclass("esri.widgets.Editor.Workflow")],z)})},"esri/widgets/Editor/workflowUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Graphic ../../core/has ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ../../core/watchUtils ../../core/accessorSupport/diffUtils ../../renderers/support/clickToleranceUtils ../../renderers/support/lengthUtils ../../renderers/visualVariables/support/sizeVariableUtils ../../renderers/visualVariables/support/visualVariableUtils ../../symbols/support/symbolConversion ../../symbols/support/symbolUtils ../../views/3d/layers/graphics/GraphicState ../../views/support/drapedUtils ../../views/support/hitTestSelectUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l){function y(la){const ba=la.sourceLayer;var aa;if(!(aa="feature"!==ba.type)){a:switch(ba.renderer.type){case "class-breaks":case "simple":case "unique-value":case "dot-density":case "dictionary":aa=!0;break a;default:aa=!1}aa=!aa}if(aa)return{rotation:null,size:null};let R=aa=null;var Y=ba.renderer.getVisualVariablesForType("rotation").filter(W=>(!W.axis||"heading"===W.axis)&&W.field&&!W.valueExpression&&I.isSome(f.getRotationAngle(W,la)));1===Y.length&&
(aa=F(Y[0],ba));Y=ba.renderer.getVisualVariablesForType("size").filter(W=>W.field&&!W.useSymbolValue&&!W.valueExpression&&"real-world-size"===c.getTransformationType(W)&&I.isSome(f.getSize(W,la)));1===Y.length&&(R=O(Y[0],ba));return{rotation:aa,size:R}}function F(la,ba){const aa="heading"===(la.axis||"heading")&&"arithmetic"===la.rotationType?-1:1,R=la.field,Y=(la=ba.fields&&ba.fields.filter(ia=>ia.name===R))&&1===la.length?la[0].type:"double";var W=0,ca=0;return{field:R,getDefault:()=>Promise.resolve(0),
getValue:ia=>{ca=W-aa*ia;return L((ca+360)%360,Y)},initValue:ia=>{W=null!=ia?ia:ca;ca=0},isUpdatingInteractively:!1}}function J(la,ba){switch(ba){case "width":return la[0];case "depth":return la[1];case "height":return la[2];default:return la[2]||la[1]||la[0]}}function t(la,ba,aa){return q.apply(this,arguments)}function q(){q=b._asyncToGenerator(function*(la,ba,aa){if(I.isNone(ba))return 0;({symbol:ba}=m.to3D(ba));if(I.isNone(ba)||"web-style"===ba.type||"cim"===ba.type)return 0;ba=ba.symbolLayers.getItemAt(0);
if(!ba)return 0;switch(ba.type){case "icon":return{computeIconLayerResourceSize:aa}=yield new Promise((R,Y)=>e(["../../symbols/support/symbolLayerUtils"],R,Y)),ba.size||Math.min(Da.icon,(yield aa(ba,Da.icon))[0])||Da.icon;case "text":return ba.size||Da.text;case "line":return ba.size||Da.line;case "object":{const {computeObjectLayerResourceSize:R}=yield new Promise((Y,W)=>e(["../../symbols/support/symbolLayerUtils"],Y,W));la=yield R(ba,la.scale/Da.viewScaleSizeFactor);return J(la,aa)}case "path":return(null!=
ba.width?ba.width:ba.height)||la.scale/Da.viewScaleSizeFactor;case "extrude":return ba.size||la.scale/Da.viewScaleSizeFactor;case "fill":case "water":return 0;default:return 0}});return q.apply(this,arguments)}function O(la,ba){const aa=la.field,R=la.axis,Y=(ba=ba.fields&&ba.fields.filter(na=>na.name===aa))&&1===ba.length?ba[0].type:"double";var W=0,ca=0;const ia=h.meterIn[la.valueUnit];let ja;ja="area"===la.valueRepresentation?na=>(na*ia/2)**2*Math.PI:"radius"===la.valueRepresentation||"distance"===
la.valueRepresentation?na=>na*ia/2:na=>na*ia;return{field:aa,getDefault:function(){var na=b._asyncToGenerator(function*(ka,Aa){return L(ja(yield t(Aa,ka,R)),Y)});return function(ka,Aa){return na.apply(this,arguments)}}(),getValue:(na,ka)=>{W||(W=ka.pixelSizeAt(ka.center));ca=W*na;return L(ca,Y)},initValue:na=>{W=null!=na?na:ca;ca=0},isUpdatingInteractively:!1}}function L(la,ba){switch(ba){case "small-integer":case "integer":case "long":return Math.round(la);case "double":case "single":return la;default:return 0}}
function n(la){return G.apply(this,arguments)}function G(){G=b._asyncToGenerator(function*(la){const ba=yield k.getDisplayedSymbol(la,{useSourceLayer:!0,ignoreGraphicSymbol:!0}),aa=H.diff(la.symbol,ba);I.isSome(aa)&&(la.symbol=ba)});return G.apply(this,arguments)}function C(la){if("mesh"===la||"multipatch"===la)throw Error("Mesh and Multipatch not supported");return la}function B(){B=b._asyncToGenerator(function*(la,ba,aa){yield D(la,ba);const R=la.on("create",function(){var Y=b._asyncToGenerator(function*(W){if("cancel"===
W.state)return D(la,ba);"complete"===W.state&&(W=W.graphic,W.sourceLayer||(W.sourceLayer=ba.layer),W.attributes||(W.attributes={...ba.template.prototype.attributes}),yield n(W),aa(W))});return function(W){return Y.apply(this,arguments)}}());return{remove:()=>{R.remove();la.cancel()}}});return B.apply(this,arguments)}function D(la,ba){return A.apply(this,arguments)}function A(){A=b._asyncToGenerator(function*(la,ba){const aa=ba.layer;ba={...ba.template.prototype.attributes};yield K(la,aa,ba);ba={graphicProperties:{attributes:ba,
sourceLayer:aa},hasZ:aa.capabilities.data.supportsZ};la.layer.elevationInfo=aa.elevationInfo;return la.create(C(aa.geometryType),ba)});return A.apply(this,arguments)}function K(la,ba,aa){return P.apply(this,arguments)}function P(){P=b._asyncToGenerator(function*(la,ba,aa){var R;if("3d"===la.view.type){ba=new z({sourceLayer:ba,attributes:aa});var {rotation:Y,size:W}=y(ba),ca=yield k.getDisplayedSymbol(ba,{useSourceLayer:!0}),ia=!1;for(const ja of[W,Y])I.isNone(ja)||null!=aa[ja.field]||(aa[ja.field]=
yield ja.getDefault(ca,la.view),ia=!0);ia&&(ca=yield k.getDisplayedSymbol(ba,{useSourceLayer:!0}));switch(null==(R=ca)?void 0:R.type){case "simple-fill":case "polygon-3d":la.polygonSymbol=ca;break;case "simple-line":case "line-3d":la.polylineSymbol=ca;break;case "simple-marker":case "point-3d":la.pointSymbol=ca}}});return P.apply(this,arguments)}function N(la,ba,aa,R){return g.apply(this,arguments)}function g(){g=b._asyncToGenerator(function*(la,ba,aa,R){if(0===la.length)return[];const {updatable:Y,
graphicsByLayer:W}=yield aa.async(b._asyncToGenerator(function*(){var {results:ca}=yield Q.whenOrAbort(l.hitTestSelectSameDistance(ba,aa),R);const ia=new Map,ja=({layer:na})=>{var ka=ia.get(na);return ka?ka:(ka=[],ia.set(na,ka),ka)};ca.forEach(({graphic:na})=>ja(na).push(na));ca=la.filter(({supports:na,layer:ka})=>-1<na.indexOf("update")&&ia.has(ka));0!==ca.length&&aa.stopPropagation();return{updatable:ca,graphicsByLayer:ia}}));return Q.whenOrAbort(Q.eachAlways(Y.map(function(){var ca=b._asyncToGenerator(function*({layer:ia}){const {objectIdField:ja,
displayField:na}=ia,ka=[ja];ia.fieldsIndex.has(na)&&ka.push(na);const Aa=W.get(ia);if(Aa.some(qa=>ka.some(sa=>!(sa in qa.attributes)))){const qa=ia.createQuery();qa.outFields=ka;qa.returnGeometry=!1;qa.objectIds=Aa.map(sa=>sa.getObjectId());return ia.queryFeatures(qa,{signal:R}).then(({features:sa})=>sa)}return Aa});return function(ia){return ca.apply(this,arguments)}}())),R)});return g.apply(this,arguments)}function v(la,ba,aa,R){return u.apply(this,arguments)}function u(){u=b._asyncToGenerator(function*(la,
ba,aa,R){if(0===la.length)return[];const Y=yield aa.async(b._asyncToGenerator(function*(){var {results:W}=yield Q.whenOrAbort(ba.hitTest(aa),R);if(0===W.length)return[];const ca=new Set;W.forEach(({graphic:ia})=>ca.add(ia.layer));W=la.items.filter(({layer:ia,supports:ja})=>-1<ja.indexOf("update")&&ca.has(ia));0<W.length&&aa.stopPropagation();return W}));return Q.whenOrAbort(Q.eachAlways(Y.map(({layer:W})=>{const {objectIdField:ca,displayField:ia}=W;var ja=[ca];W.fieldsIndex.has(ia)&&ja.push(ia);const na=
W.createQuery();na.outFields=ja;na.returnGeometry=!1;ja="renderer"in W?w.calculateTolerance({renderer:W.renderer,event:aa}):0;na.geometry=r.createQueryGeometry(aa.mapPoint,ja,ba);na.outSpatialReference=ba.spatialReference;return W.queryFeatures(na,{signal:R}).then(({features:ka})=>ka)})),R)});return u.apply(this,arguments)}function U(){U=b._asyncToGenerator(function*(la,ba,aa,R){switch(ba.type){case "3d":return N(la,ba,aa,R);case "2d":return v(la,ba,aa,R)}});return U.apply(this,arguments)}function X(){X=
b._asyncToGenerator(function*(la,ba,aa){const R=la.layer,Y=R.createQuery();Y.objectIds=[la.getAttribute(R.objectIdField)];Y.outFields=["*"];Y.outSpatialReference=ba.spatialReference;Y.returnM=R.capabilities.data.supportsM;Y.returnZ=R.capabilities.data.supportsZ;return(yield R.queryFeatures(Y,{signal:aa})).features[0]});return X.apply(this,arguments)}function fa(la,ba,aa,R){return ma.apply(this,arguments)}function ma(){ma=b._asyncToGenerator(function*(la,ba,aa,R){let Y=!1;const {rotation:W,size:ca}=
R;[W,ca].forEach(function(){var ia=b._asyncToGenerator(function*(ja){if(!I.isNone(ja)){var na=ba.attributes[ja.field];I.isSome(na)?ja.initValue(na):(na=yield ja.getDefault(ba.symbol,la.view),ja.initValue(na),ba.setAttribute(ja.field,na),Y=!0)}});return function(ja){return ia.apply(this,arguments)}}());Y&&"3d"===la.view.type&&(yield n(ba));R={multipleSelectionEnabled:!1};"point"===aa.geometryType&&(R.enableRotation=I.isSome(W),R.enableScaling=I.isSome(ca));la.layer.elevationInfo=aa.elevationInfo;return la.update(ba,
R)});return ma.apply(this,arguments)}function ta(la,ba,aa,R){return va.apply(this,arguments)}function va(){va=b._asyncToGenerator(function*(la,ba,aa,R){var Y;if(I.isSome(ba.geometry)&&"point"===(null==(Y=ba.geometry)?void 0:Y.type)){Y=R.rotation;var W=aa.toolEventInfo;W=!W||"rotate-start"!==W.type&&"rotate"!==W.type&&"rotate-stop"!==W.type?null:W;if(I.isSome(Y)&&I.isSome(W))if("rotate-stop"===W.type)Y.isUpdatingInteractively=!1,Y.initValue();else{Y.isUpdatingInteractively=!0;const {field:ca,getValue:ia}=
Y;ba.attributes[ca]=ia(W.angle,la)}R=R.size;aa=aa.toolEventInfo;aa=!aa||"scale-start"!==aa.type&&"scale"!==aa.type&&"scale-stop"!==aa.type?null:aa;if(I.isSome(R)&&I.isSome(aa))if("scale-stop"===aa.type)R.isUpdatingInteractively=!1,R.initValue();else{R.isUpdatingInteractively=!0;const {field:ca,getValue:ia}=R;ba.attributes[ca]=ia(aa.xScale,la)}"3d"===la.type&&(yield n(ba))}});return va.apply(this,arguments)}function Ba(){Ba=b._asyncToGenerator(function*(la,ba,aa,R,Y){const W=la.clone();yield n(W);
R.map.add(aa.layer);aa.layer.add(W);const ca=la.sourceLayer,ia=R.whenLayerView(ca),ja=()=>{const Ha=la.attributes[la.layer.objectIdField];ia.then(Oa=>Oa.setVisibility(Ha,!1),()=>{});return{remove(){ia.then(Oa=>Oa.setVisibility(Ha,!0),()=>{})}}};let na=null,ka=null;if("3d"===R.type){const Ha=new E.GraphicState({graphic:W});na=R.trackGraphicState(Ha);T.init(Ha,"displaying",Oa=>{ka=Oa?ja():I.removeMaybe(ka)})}else ka=ja();yield fa(aa,W,ca,ba);let Aa=null;ia.then(Ha=>Aa=Ha,()=>{});const qa=ba.size,sa=
ba.rotation,ra=la.watch("attributes",function(){var Ha=b._asyncToGenerator(function*(Oa){let Xa=!1;for(const Ya in Oa){const ab=Oa[Ya];ab!==W.attributes[Ya]&&(W.setAttribute(Ya,ab),I.isSome(qa)&&!qa.isUpdatingInteractively&&qa.field===Ya&&qa.initValue(ab),I.isSome(sa)&&!sa.isUpdatingInteractively&&sa.field===Ya&&sa.initValue(ab),I.isNone(Aa)||Aa.requiredFields.includes(Ya))&&(Xa=!0)}Xa&&"3d"===R.type&&(yield n(W))});return function(Oa){return Ha.apply(this,arguments)}}()),wa=aa.on("update",function(){var Ha=
b._asyncToGenerator(function*(Oa){const Xa=Oa.graphics[0];if("complete"===Oa.state)return fa(aa,Xa,ca,ba);yield ta(R,Xa,Oa,ba);Y(Xa.clone())});return function(Oa){return Ha.apply(this,arguments)}}()),Ea=aa.on(["undo","redo"],function(){var Ha=b._asyncToGenerator(function*(Oa){Y(Oa.graphics[0].clone())});return function(Oa){return Ha.apply(this,arguments)}}()),Ca=()=>{};return{interactive:{remove(){Ea.remove();wa.remove();aa.cancel();ra&&ra.remove();this.remove=Ca}},visual:{remove(){I.removeMaybe(ka);
R.whenLayerView(ca).then(Ha=>T.whenFalseOnce(Ha,"updating")).then(()=>{I.removeMaybe(na);aa.layer.remove(W);this.remove=Ca})}}}});return Ba.apply(this,arguments)}const Da={icon:V.px2pt(24),text:V.px2pt(12),line:V.px2pt(1),viewScaleSizeFactor:100};d.avoidFeatureTemplateSelectionWithOnlyOneItem=function(la,ba){la.viewModel.refreshCreationTemplates();if("awaiting-feature-creation-info"===ba[0].id){var aa=la.viewModel.featureTemplatesViewModel.items;1!==aa.length?aa=null:(aa=aa[0],aa="items"in aa?1===
aa.items.length?aa.items[0]:null:aa);I.isSome(aa)&&(la.creationInfo={layer:aa.layer,template:aa.template},ba.shift())}return ba};d.createWorkflowSteps=function(la,ba,aa){let R=!1;return la.filter(Y=>R?!0:R=Y===ba).map(Y=>aa[Y]())};d.fetchCandidates=function(la,ba,aa,R){return U.apply(this,arguments)};d.fetchFullFeature=function(la,ba,aa){return X.apply(this,arguments)};d.findLayerInfo=function(la,ba){return la&&la.find(aa=>aa.layer===ba)};d.getVisualVariableAttributes=y;d.setUpFeatureAdd=function(la,
ba,aa){return B.apply(this,arguments)};d.setUpGeometryUpdate=function(la,ba,aa,R,Y){return Ba.apply(this,arguments)};d.sizeDefaults=Da;d.startCreatingNewFeature=D;d.startUpdatingFeature=fa;d.updateGraphicSymbolWhenRequired=n;d.visualVariableInteractiveUpdate=ta;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(e){function d(x,I){return I?"xoffset"in I&&I.xoffset?Math.max(x,Math.abs(I.xoffset)):"yoffset"in I&&I.yoffset?
Math.max(x,Math.abs(I.yoffset||0)):x:x}function b(x,I){if("number"===typeof x)return x;if(x&&x.stops&&x.stops.length){{x=x.stops;let Q=I=0;for(let V=0;V<x.length;V++){const T=x[V].size;"number"===typeof T&&(I+=T,Q++)}x=I/Q}return x}return I}function z(x,I){if(!I)return x;I=I.filter(T=>"size"===T.type).map(T=>{const {maxSize:H,minSize:w}=T;return(b(H,x)+b(w,x))/2});let Q=0;const V=I.length;if(0===V)return x;for(let T=0;T<V;T++)Q+=I[T];return Math.max(Math.floor(Q/V),x)}e.calculateTolerance=function(x){const I=
x&&x.renderer;x="touch"===(x&&x.event&&x.event.pointerType)?9:6;if(!I)return x;x="visualVariables"in I?z(x,I.visualVariables):x;if("simple"===I.type)return d(x,I.symbol);if("unique-value"===I.type){let Q=x;I.uniqueValueInfos.forEach(V=>{Q=d(Q,V.symbol)});return Q}if("class-breaks"===I.type){let Q=x;I.classBreakInfos.forEach(V=>{Q=d(Q,V.symbol)});return Q}return x};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/GraphicState":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Evented ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V,T){e.GraphicState=function(H){function w(h){h=H.call(this,h)||this;h.tracking=!1;h.displaying=!1;h.isDraped=!1;return h}d._inheritsLoose(w,H);return w}(z.EventedAccessor);b.__decorate([x.property({constructOnly:!0})],e.GraphicState.prototype,"graphic",void 0);b.__decorate([x.property()],e.GraphicState.prototype,"tracking",void 0);b.__decorate([x.property()],e.GraphicState.prototype,"displaying",void 0);b.__decorate([x.property()],e.GraphicState.prototype,"isDraped",void 0);
e.GraphicState=b.__decorate([T.subclass("esri.views.3d.layers.graphics.GraphicState")],e.GraphicState);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/support/drapedUtils":function(){define("exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils ../../geometry/Extent".split(" "),function(e,d,b,z,x,I){function Q(T,H,w,h=new I){let c;if("2d"===w.type)c=H*w.resolution;else if("3d"===w.type){var f=w.overlayPixelSizeInMapUnits(T),m=w.basemapSpatialReference;
c=b.isSome(m)&&!m.equals(w.spatialReference)?z.getMetersPerUnitForSR(m)/z.getMetersPerUnitForSR(w.spatialReference):H*f}H=T.x-c;f=T.y-c;m=T.x+c;T=T.y+c;({spatialReference:w}=w);h.xmin=Math.min(H,m);h.ymin=Math.min(f,T);h.xmax=Math.max(H,m);h.ymax=Math.max(f,T);h.spatialReference=w;return h}const V=new I;e.createQueryGeometry=Q;e.intersectsDrapedGeometry=function(T,H,w){T=w.toMap(T);if(b.isNone(T))return!1;const h=x.calculateTolerance();return Q(T,h,w,V).intersects(H)};Object.defineProperty(e,"__esModule",
{value:!0})})},"esri/views/support/hitTestSelectUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(e,d){function b(){b=d._asyncToGenerator(function*(z,x){if("2d"===z.type)return z.hitTest(x);z=yield z.hitTest(x);const I=z.results[0];x=z.results.findIndex(Q=>Q.distance!==I.distance);-1!==x&&(z.results=z.results.slice(0,x));return z});return b.apply(this,arguments)}e.hitTestSelectSameDistance=function(z,x){return b.apply(this,arguments)};Object.defineProperty(e,"__esModule",
{value:!0})})},"esri/widgets/Editor/CreateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass ./CreateWorkflowData ./Edits ./Workflow ./workflowUtils".split(" "),function(e,d,b,z,x,I,Q,V,T,H,w,h,c){var f;z=f=function(m){function k(E){E=m.call(this,E)||this;E.type="create";return E}
e._inheritsLoose(k,m);k.create=function(E,r,l){E=new f({data:new H({edits:new w.Edits,viewModel:E}),onCommit:function(){var y=e._asyncToGenerator(function*(F){yield l(F.creationInfo.layer,{addFeatures:[F.edits.feature]})});return function(F){return y.apply(this,arguments)}}()});E._set("steps",this._createWorkflowSteps(E,r));return E};k._createWorkflowSteps=function(E,r="awaiting-feature-creation-info"){const {data:l,handles:y}=E;E=c.createWorkflowSteps(["awaiting-feature-creation-info","awaiting-feature-to-create",
"editing-new-feature"],r,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",setUp(){var F=this;return e._asyncToGenerator(function*(){l.creationInfo=null;l.edits.feature=null;l.viewModel.featureTemplatesViewModel.select(null);y.add(l.viewModel.featureTemplatesViewModel.on("select",({item:J})=>{l.creationInfo={layer:J.layer,template:J.template};l.viewModel.activeWorkflow.next()}),F.id)})()},tearDown(){var F=this;return e._asyncToGenerator(function*(){y.remove(F.id)})()}}),
"awaiting-feature-to-create":()=>({id:"awaiting-feature-to-create",setUp(){var F=this;return e._asyncToGenerator(function*(){y.add(yield c.setUpFeatureAdd(l.viewModel.sketchViewModel,l.creationInfo,J=>{l.edits.feature=J;l.viewModel.activeWorkflow.next()}),F.id)})()},tearDown(){var F=this;return e._asyncToGenerator(function*(){y.remove(F.id)})()}}),"editing-new-feature":()=>({id:"editing-new-feature",setUp(){var F=this;return e._asyncToGenerator(function*(){const J=l.edits.feature,t=J.sourceLayer,
q=l.viewModel,O=q.sketchViewModel;var L=c.findLayerInfo(q.layerInfos,t);const n=null==L?void 0:L.formTemplate;q.featureFormViewModel.set({feature:J,fieldConfig:n?null:null==L?void 0:L.fieldConfig,formTemplate:n});O.allowDeleteKey=!1;const G=c.getVisualVariableAttributes(J);yield c.startUpdatingFeature(O,J,t,G);L=O.on("update",function(){var C=e._asyncToGenerator(function*(B){var D=B.graphics[0];if("complete"===B.state)return c.startUpdatingFeature(O,D,t,G);yield c.visualVariableInteractiveUpdate(O.view,
D,B,G);B=D.attributes;b.isSome(G.rotation)&&({field:D}=G.rotation,q.featureFormViewModel.setValue(D,B[D]));b.isSome(G.size)&&({field:D}=G.size,q.featureFormViewModel.setValue(D,B[D]))});return function(B){return C.apply(this,arguments)}}());y.add([l.viewModel.featureFormViewModel.on("value-change",e._asyncToGenerator(function*(){l.edits.updateAttributes(l.viewModel.featureFormViewModel.getValues());J.attributes=l.edits.feature.attributes;"3d"===O.view.type&&(yield c.updateGraphicSymbolWhenRequired(J))})),
L],F.id)})()},tearDown(F){var J=this;return e._asyncToGenerator(function*(){F.cancelled&&l.viewModel.sketchViewModel.layer.removeAll();y.remove(J.id)})()}})});return c.avoidFeatureTemplateSelectionWithOnlyOneItem(l,E)};return k}(h);return z=f=d.__decorate([T.subclass("esri.widgets.Editor.CreateWorkflow")],z)})},"esri/widgets/Editor/CreateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V){b=function(T){function H(w){w=T.call(this,w)||this;w.creationInfo=null;w.edits=null;w.viewModel=null;return w}e._inheritsLoose(H,T);return H}(b);d.__decorate([z.property()],b.prototype,"creationInfo",void 0);d.__decorate([z.property()],b.prototype,"edits",void 0);d.__decorate([z.property()],b.prototype,"viewModel",void 0);return b=d.__decorate([V.subclass("esri.widgets.Editor.CreateWorkflowData")],b)})},"esri/widgets/Editor/Edits":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w){function h(c){return I.isNone(c)?null:JSON.stringify(c)}e.Edits=function(c){function f(k){k=c.call(this,k)||this;k._baselineAttributesJSON=null;k._baselineGeometryJSON=null;k.feature=null;return k}d._inheritsLoose(f,c);var m=f.prototype;m.trackChanges=function(){this.feature&&(this._baselineAttributesJSON=h(this.feature.attributes),this._baselineGeometryJSON=h(this.feature.geometry),this.notifyChange("attributesModified"),this.notifyChange("geometryModified"))};m.updateAttributes=
function(k){this.feature.attributes=k;this.notifyChange("attributesModified")};m.updateGeometry=function(k){this.feature.geometry=k;this.notifyChange("geometryModified")};d._createClass(f,[{key:"attributesModified",get:function(){const {_baselineAttributesJSON:k,feature:E}=this;return!(!E||k===h(E.attributes))}},{key:"geometryModified",get:function(){const {_baselineGeometryJSON:k,feature:E}=this;return!(!E||k===h(E.geometry))}},{key:"modified",get:function(){return this.attributesModified||this.geometryModified}}]);
return f}(x.HandleOwnerMixin(z));b.__decorate([Q.property()],e.Edits.prototype,"attributesModified",null);b.__decorate([Q.property()],e.Edits.prototype,"feature",void 0);b.__decorate([Q.property()],e.Edits.prototype,"geometryModified",null);b.__decorate([Q.property()],e.Edits.prototype,"modified",null);e.Edits=b.__decorate([w.subclass("esri.widgets.Editor.Edits")],e.Edits);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Editor/UpdateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/handleUtils ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass ../../views/support/layerViewUtils ./Edits ./UpdateWorkflowData ./Workflow ./workflowUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E){var r;Q=r=function(l){function y(J){J=l.call(this,J)||this;J.type="update";return J}e._inheritsLoose(y,l);y.create=function(J,t,q){J=new r({data:new m({edits:new f.Edits,viewModel:J}),onCommit:function(){var O=e._asyncToGenerator(function*(L){const n=L.edits.feature,G=n.sourceLayer,C=n.clone();if(!L.edits.attributesModified){const {objectIdField:B}=G;C.attributes={[B]:n.getAttribute(B)}}L.edits.geometryModified||(C.geometry=null);yield q(G,{updateFeatures:[C]})});
return function(L){return O.apply(this,arguments)}}()});J._set("steps",this._createWorkflowSteps(J,t));return J};var F=y.prototype;F.highlight=function(J){var {data:{viewModel:{view:t}}}=this;t=J&&t.allLayerViews.items.find(({layer:q})=>q===J.layer);c.highlightsSupported(t)&&this.handles.add(t.highlight(J),"candidate-highlight")};F.unhighlight=function(){this.handles.remove("candidate-highlight")};y._createWorkflowSteps=function(J,t="awaiting-feature-to-update"){const {data:q,handles:O}=J;return E.createWorkflowSteps(["awaiting-feature-to-update",
"awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"],t,{"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",setUp(){var L=this;return e._asyncToGenerator(function*(){const {spinnerViewModel:n,view:G}=q.viewModel;let C=null;O.add({remove(){C&&(C.abort(),C=null)}},L.id);q.edits.feature=null;const B=G.on("immediate-click",D=>{n.location=D.mapPoint;n.visible=!0;C&&C.abort();const {editableItems:A}=q.viewModel;C=new AbortController;(new Promise((K,
P)=>{x.onAbort(C.signal,()=>P(x.createAbortError()));K(E.fetchCandidates(A,G,D,C.signal))})).then(K=>{x.throwIfAborted(C);q.candidates=K.reduce((P,N)=>N.error?P:[...P,...N.value],[]);q.viewModel.spinnerViewModel.visible=1===q.candidates.length;0!==q.candidates.length&&(1===q.candidates.length?(q.edits.feature=q.candidates[0],q.viewModel.activeWorkflow.go("editing-existing-feature").catch(()=>{}).then(()=>q.viewModel.spinnerViewModel.visible=!1)):q.viewModel.activeWorkflow.next())})});O.add(B,L.id)})()},
tearDown(){var L=this;return e._asyncToGenerator(function*(){O.remove(L.id)})()}}),"awaiting-update-feature-candidate":()=>({id:"awaiting-update-feature-candidate",setUp(){var L=this;return e._asyncToGenerator(function*(){const {edits:n}=q;n.feature=null;O.add(I.watch(n,"feature",G=>{J.unhighlight();J.highlight(G)}),L.id)})()},tearDown(){var L=this;return e._asyncToGenerator(function*(){J.unhighlight();O.remove(L.id)})()}}),"editing-existing-feature":()=>({id:"editing-existing-feature",setUp(){var L=
this;return e._asyncToGenerator(function*(){const n=q.edits.feature,G=q.viewModel;q.editableItem=G.editableItems.find(g=>g.layer===n.layer);const C=new AbortController;O.add({remove:()=>C.abort()},L.id);var B=G.view.whenLayerView(n.layer),D=E.fetchFullFeature(n,G.view,C.signal);B=yield B;const A=yield D;if(!x.isAborted(C)){q.edits.updateGeometry(A.geometry);q.edits.updateAttributes(A.attributes);q.edits.trackChanges();G.attachmentsViewModel.set({graphic:A,mode:"view"});D=A.sourceLayer;var K=E.findLayerInfo(G.layerInfos,
D),P=null==K?void 0:K.formTemplate;G.featureFormViewModel.set({feature:A,fieldConfig:P?null:null==K?void 0:K.fieldConfig,formTemplate:P});var N="createInteractiveEditSession"in B?B.createInteractiveEditSession(n):null;B=[G.featureFormViewModel.on("value-change",g=>{q.edits.updateAttributes(G.featureFormViewModel.getValues());A.attributes=q.edits.feature.attributes;N&&N.setAttribute(g.fieldName,g.value)}),G.attachmentsViewModel.watch("mode",g=>{"add"===g&&q.viewModel.activeWorkflow.go("adding-attachment");
"edit"===g&&q.viewModel.activeWorkflow.go("editing-attachment")})];N&&(B.push(b.makeHandle(()=>N.rollback())),O.add(b.makeHandle(()=>N.commit()),J._handleKeys.afterCommit));({supportsGeometryUpdate:D}=D.capabilities.editing);if(D){G.sketchViewModel.allowDeleteKey=!1;const g=E.getVisualVariableAttributes(A),{interactive:v,visual:u}=yield E.setUpGeometryUpdate(A,g,G.sketchViewModel,G.view,({geometry:U,attributes:X})=>{if(z.isSome(g.rotation)){var {field:fa}=g.rotation;G.featureFormViewModel.setValue(fa,
X[fa])}z.isSome(g.size)&&({field:fa}=g.size,G.featureFormViewModel.setValue(fa,X[fa]));q.edits.updateAttributes(X);q.edits.updateGeometry(U)});B.push(v,u);O.add(v,J._handleKeys.beforeCommit);O.add(u,J._handleKeys.afterCommit)}else J.highlight(A);O.add(B,L.id)}})()},tearDown(){var L=this;return e._asyncToGenerator(function*(){J.unhighlight();O.remove(L.id)})()}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-existing-feature",setUp(){return e._asyncToGenerator(function*(){})()},
tearDown(){return e._asyncToGenerator(function*(){})()}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-existing-feature",setUp(){return e._asyncToGenerator(function*(){})()},tearDown(){return e._asyncToGenerator(function*(){})()}})})};return y}(k);return Q=r=d.__decorate([h.subclass("esri.widgets.Editor.UpdateWorkflow")],Q)})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(e,d){e.extractSafeScaleBounds=function(b){let {minScale:z,
maxScale:x}=b;return{minScale:z||0,maxScale:x||0}};e.highlightsSupported=function(b){return b&&"function"===typeof b.highlight};e.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};e.scaleBoundsPredicate=function(b,z,x){return d.isNone(b)||b>x&&(0===z||b<z)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Editor/UpdateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V){b=function(T){function H(w){w=T.call(this,w)||this;w.candidates=null;w.editableItem=null;w.edits=null;w.viewModel=null;return w}e._inheritsLoose(H,T);return H}(b);d.__decorate([z.property()],b.prototype,"candidates",void 0);d.__decorate([z.property()],b.prototype,"editableItem",void 0);d.__decorate([z.property()],b.prototype,"edits",void 0);d.__decorate([z.property()],b.prototype,"viewModel",void 0);return b=d.__decorate([V.subclass("esri.widgets.Editor.UpdateWorkflowData")],
b)})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/Collection ../../core/has ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/projectionEllipsoid ../../geometry/support/coordsUtils ../../layers/GraphicsLayer ../../views/DOMContainer ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/support/screenUtils ./support/OperationHandle ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J,t,q,O,L,n,G,C,B,D,A,K,P,N,g){function v(la){return"polygon"===la||"rectangle"===la||"circle"===la?!0:!1}function u(la,ba){X("undo",la.history.undo,la.history.redo,ba)}function U(la,ba){X("redo",la.history.redo,la.history.undo,ba)}function X(la,ba,aa,R){const Y=ba.pop().updates,W=[];R.forEach((ca,ia)=>{ia=Y[ia];null!=ia&&("geometry"in ia&&w.isSome(ia.geometry)&&(W.push({geometry:ca.geometry}),ca.geometry=ia.geometry),"symbol"in ia&&w.isSome(ia.symbol)&&
(W.push({symbol:ca.symbol}),ca.symbol=ia.symbol),"undo"in ia&&(W.push(ia),ia[la](ca)))});aa.push({updates:W})}function fa(la){return{updates:la.map(ba=>({geometry:ba.geometry}))}}function ma(la){return"requireError"in la&&"aborted"===la.requireError}const ta=la=>Object.freeze({__proto__:null,default:la}),va=H.getLogger("esri.widgets.Sketch.SketchViewModel"),Ba={defaultZ:0},Da={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,
enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};I=function(la){function ba(R){R=la.call(this,R)||this;R._numUpdating=0;R._handles=new T;R._internalGraphicsLayer=new F({listMode:"hide",internal:!0,title:"SVM Internal"});R._operationHandle=null;R._viewHandles=new T;R.activeFillSymbol=null;R.activeLineSymbol=null;R.activeVertexSymbol=null;R.allowDeleteKey=!0;R.layer=null;R.pointSymbol=new P({style:"circle",size:6,color:[255,255,255],
outline:{color:[50,50,50],width:1}});R.polygonSymbol=new N({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});R.polylineSymbol=new g({color:[130,130,130,1],width:2});R._snappingManager=null;R.updateGraphics=new x;R.updateOnGraphicClick=!0;R.updatePointSymbol=new P({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});R.updatePolygonSymbol=new N({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});R.updatePolylineSymbol=new g({color:[12,207,255],width:2});
R.vertexSymbol=new P({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});R._moduleLoaderAbortController=null;R._viewReadyAbortController=null;R._originalAutoOpenEnabled=null;R.defaultCreateOptions=Ba;R.defaultUpdateOptions=Da;R.snappingOptions=new D;return R}d._inheritsLoose(ba,la);var aa=ba.prototype;aa.initialize=function(){this._handles.add([f.watch(this,"layer",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=w.isSome(this.layer)?this.layer.elevationInfo:
null}),f.on(this,"view.map.layers","change",R=>{R.removed.includes(this.layer)&&this.cancel()}),f.on(this,"layer.graphics","change",R=>{if(w.isSome(this._operationHandle))for(const Y of R.removed)this.updateGraphics.includes(Y)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(Y):this._operationHandle.cancel())}),f.init(this,"layer.elevationInfo",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=w.isSome(this.layer)?this.layer.elevationInfo:null},!0),f.init(this,
"view",R=>{w.destroyMaybe(this._snappingManager);R&&(this._snappingManager=new B.SnappingManager({view:R,options:this.snappingOptions}),"2d"===R.type?new Promise((Y,W)=>e(["../../views/2d/interactive/editingTools"],Y,W)):"3d"===R.type&&(new Promise((Y,W)=>e(["../../views/3d/interactive/editingTools"],Y,W)),new Promise((Y,W)=>e(["../../views/3d/layers/GraphicsLayerView3D"],ca=>Y(ta(ca)),W))))},!0)])};aa.destroy=function(){this.cancel();this._handles=w.destroyMaybe(this._handles);this._viewHandles=
w.destroyMaybe(this._viewHandles);this._removeDefaultLayer();this._snappingManager=w.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};aa.cancel=function(){this._moduleLoaderAbortController=w.abortMaybe(this._moduleLoaderAbortController);this._viewReadyAbortController=w.abortMaybe(this._viewReadyAbortController);this._operationHandle&&this._operationHandle.cancel()};aa.complete=function(){this._operationHandle&&this._operationHandle.complete()};aa.delete=function(){const {state:R,
updateGraphics:Y}=this;if("active"===R&&Y.length){const {activeTool:W,layer:ca}=this,ia=Y.toArray();ca.removeMany(ia);this.cancel();this._emitDeleteEvent({graphics:ia,tool:W})}};aa.create=function(){var R=d._asyncToGenerator(function*(Y,W){this.cancel();yield this._waitViewReady();if("disabled"===this.state)throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),
h.createAbortError();w.isSome(this.view.activeTool)&&(this.view.activeTool=null);if(Y){n.addUniqueLayer(this.view,this._internalGraphicsLayer);var ca=yield this._setupCreateOperation(Y,W);w.isNone(ca)||this.destroyed?this.view.map.remove(this._internalGraphicsLayer):(ca.on("complete",()=>{if(ca===this._operationHandle){const ia=this.createGraphic,ja=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&
this.view.map.remove(this._internalGraphicsLayer);ca.cancelled||null==ia||this.layer.add(ia);this.emit("create",{graphic:ia,state:ja?"cancel":"complete",tool:Y,toolEventInfo:null,type:"create"})}}),this._operationHandle=ca,this.view.ready&&J.isDOMContainer(this.view)&&this.view.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")});return function(Y,W){return R.apply(this,arguments)}}();aa.update=function(){var R=d._asyncToGenerator(function*(Y,W){this.cancel();yield this._waitViewReady();
const {layer:ca,view:ia,state:ja}=this;if("disabled"===ja)throw ia||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),ca||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),h.createAbortError();w.isSome(this.view.activeTool)&&(this.view.activeTool=null);const na=Array.isArray(Y)?Y:[Y];null!=Y&&na&&na.length?na.some(ka=>ka.layer!==ca?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),
!0):w.isNone(ka.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"!==ia.type||ia.spatialReference.equals(ka.geometry.spatialReference)?!1:(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),!0))||(Y=yield this._setupUpdateOperation(na,W),this.destroyed||w.isNone(Y)||ma(Y)||(n.addUniqueLayer(this.view,
this._internalGraphicsLayer),this._setUpdateOperationHandle(Y,W),this.emit("update",{graphics:na,state:"start",aborted:!1,tool:Y.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")});return function(Y,W){return R.apply(this,arguments)}}();aa.undo=function(){this.canUndo()&&this._operationHandle.undo()};aa.redo=function(){this.canRedo()&&this._operationHandle.redo()};aa.canUndo=function(){return!(!this._operationHandle||!this._operationHandle.canUndo())};
aa.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};aa.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};aa._getFirstHit=function(){var R=d._asyncToGenerator(function*(Y){const W=[];switch(this.view.type){case "2d":{const ia=[];this.view.map.allLayers.forEach(ja=>{"vector-tile"!==ja.type&&"imagery"!==ja.type||ia.push(ja)});var ca=yield this.view.hitTest(Y,{exclude:ia});0<ca.results.length&&
(ca=ca.results[0],ca.graphic&&W.push(ca))}break;case "3d":{const ia=[this.view.map.ground];this.view.map.allLayers.forEach(ja=>{"integrated-mesh"===ja.type&&ia.push(ja)});ca=yield this.view.hitTest(Y,{exclude:ia});if(0<ca.results.length){const ja=ca.results[0];(!ca.ground.mapPoint||1>this.view.map.ground.opacity||ca.ground.distance-w.unwrapOr(ja.distance,0)>-Math.min(3*ca.ground.distance,"global"===this.view.viewingMode?l.getReferenceEllipsoid(this.view.renderCoordsHelper.spatialReference).radius/
this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&W.push(ja)}}}return{screenPoint:Y,results:W}});return function(Y){return R.apply(this,arguments)}}();aa._generateViewHandles=function(R){var Y=this;return[R.on("immediate-click",function(){var W=d._asyncToGenerator(function*(ca){var ia="active"===Y.state&&"create"===Y._operationHandle.type;if("disabled"!==Y.state&&!ia&&Y.updateOnGraphicClick){Y._beginAsyncOperation();var ja=(yield ca.async(()=>Y._getFirstHit(A.createScreenPointFromEvent(ca)))).results;
ia=null;if(ja.length)for(const na of ja){if(na.graphic){ja=na.graphic;if(Y.updateGraphics.includes(ja)||ja.layer===Y.layer){ca.stopPropagation();ia=ja;break}"2d"!==R.type||Y._isComponentGraphic(ja)||"active"!==Y.state||Y.cancel()}}else"active"===Y.state&&Y.cancel();w.isSome(ia)&&!Y.updateGraphics.includes(ia)&&(yield Y.update([ia],{...Y.defaultUpdateOptions,reshapeOptions:{...Y.defaultUpdateOptions.reshapeOptions}}));Y._endAsyncOperation()}});return function(ca){return W.apply(this,arguments)}}(),
G.ViewEventPriorities.WIDGET)]};aa._setupCreateOperation=function(){var R=d._asyncToGenerator(function*(Y,W){Y=yield this._setupDrawGraphicTool(Y,this.view,{hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...W});if(w.isNone(Y))return null;this.view.tools.add(Y);this.view.activeTool=Y;return this._setupCreateOperationHandle(Y)});return function(Y,W){return R.apply(this,arguments)}}();aa._setupDrawGraphicTool=function(){var R=d._asyncToGenerator(function*(Y,W,ca){if("multipoint"===Y&&"3d"===
W.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView"),null;const ia="rectangle"!==Y,ja="rectangle"!==Y;this.snappingOptions.enabledToggled=!1;Y={view:W,mode:"rectangle"===Y||"circle"===Y?"hybrid":"click",...ca,snapToScene:!1,geometryType:Y,graphicSymbol:this._getGraphicSymbolFromTool(Y),snappingManager:this._snappingManager,forceUniformSize:ja,centered:ia};return"2d"===this.view.type?this._makeDrawGraphicTool2D(Y):this._makeDrawGraphicTool3D(Y)});return function(Y,
W,ca){return R.apply(this,arguments)}}();aa._makeDrawGraphicTool2D=function(){var R=d._asyncToGenerator(function*(Y){const W=yield this._requireModule(new Promise((ca,ia)=>e(["../../views/2d/interactive/editingTools"],ca,ia)));return ma(W)||this.destroyed?null:new W.module.DrawGraphicTool2D({...Y,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:v(Y.geometryType)?this.activeFillSymbol:null})});return function(Y){return R.apply(this,
arguments)}}();aa._makeDrawGraphicTool3D=function(){var R=d._asyncToGenerator(function*(Y){const W=yield this._requireModule(new Promise((ca,ia)=>e(["../../views/3d/interactive/editingTools"],ca,ia)));return ma(W)||this.destroyed?null:new W.module.DrawGraphicTool3D({...Y,elevationInfo:this.layer.elevationInfo,snapToScene:w.isSome(this.layer.elevationInfo)?"absolute-height"===this.layer.elevationInfo.mode:!0})});return function(Y){return R.apply(this,arguments)}}();aa._setupCreateOperationHandle=function(R){let Y=
null;const W=R.forceUniformSize,ca=R.centered,ia=[this.view.on("key-down",na=>{if(na.key===C.SKETCH_KEYS.pan)na.stopPropagation(),na.repeat||(R.enabled=!1);else if(na.key===C.SKETCH_KEYS.complete)na.stopPropagation(),R.completeCreateOperation();else if(na.key!==C.SKETCH_KEYS.vertexAdd||na.repeat)na.key===C.SKETCH_KEYS.undo?(na.stopPropagation(),ja.undo()):na.key===C.SKETCH_KEYS.redo?(na.stopPropagation(),ja.redo()):na.key!==C.SKETCH_KEYS.snappingToggle||"rectangle"===R.geometryType||"circle"===R.geometryType||
na.repeat?na.key!==C.SKETCH_KEYS.constraint||"rectangle"!==R.geometryType&&"circle"!==R.geometryType||na.repeat?na.key!==C.SKETCH_KEYS.center||na.repeat||(R.centered=!ca,na.stopPropagation()):(R.forceUniformSize=!W,na.stopPropagation()):(this.snappingOptions.enabledToggled=!0,na.stopPropagation());else{const ka=R.drawOperation.geometryType;if("polyline"===ka||"polygon"===ka||"multipoint"===ka)na.stopPropagation(),R.drawOperation.commitStagedVertex()}},G.ViewEventPriorities.WIDGET),this.view.on("key-up",
na=>{na.key===C.SKETCH_KEYS.pan?R.enabled=!0:na.key===C.SKETCH_KEYS.snappingToggle&&"rectangle"!==R.geometryType&&"circle"!==R.geometryType?(this.snappingOptions.enabledToggled=!1,na.stopPropagation()):na.key!==C.SKETCH_KEYS.constraint||"rectangle"!==R.geometryType&&"circle"!==R.geometryType?na.key===C.SKETCH_KEYS.center&&(R.centered=ca,na.stopPropagation()):(R.forceUniformSize=W,na.stopPropagation())},G.ViewEventPriorities.WIDGET),R.on("vertex-add",na=>{Y=w.isNone(Y)?"start":"active";switch(na.operation){case "apply":this.emit("create",
{graphic:w.unwrap(R.graphic),state:Y,tool:this.activeTool,toolEventInfo:na,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[w.unwrap(R.graphic)],tool:R.geometryType});break;case "redo":this._emitRedoEvent({graphics:[w.unwrap(R.graphic)],tool:R.geometryType})}}),R.on("cursor-update",na=>{0<R.drawOperation.numCommittedVertices&&this.emit("create",{graphic:w.unwrap(R.graphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:na.vertices[0].coordinates,type:"cursor-update"},
type:"create"})}),R.on("vertex-remove",na=>{switch(na.operation){case "apply":this.emit("create",{graphic:w.unwrap(R.graphic),state:"active",tool:this.activeTool,toolEventInfo:na,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[w.unwrap(R.graphic)],tool:R.geometryType});break;case "redo":this._emitRedoEvent({graphics:[w.unwrap(R.graphic)],tool:R.geometryType})}}),R.on("complete",na=>{this._set("createGraphic",w.unwrap(na.graphic));Y="complete";na.aborted?ja&&ja.cancel():ja&&ja.complete()}),
c.react(()=>this._getGraphicSymbolFromTool(R.geometryType),na=>{R.graphicSymbol=na})],ja=new K.OperationHandle({activeComponent:R,tool:R.geometryType,type:"create",onEnd:()=>{var na;ia.forEach(ka=>ka.remove());ia.length=0;null==(na=this.view.tools)?void 0:na.remove(R);R.destroy()},undo:()=>{R.canUndo&&R.undo()},redo:()=>{R.canRedo&&R.redo()},canUndo:()=>R.canUndo,canRedo:()=>R.canRedo});return ja};aa._getGraphicSymbolFromTool=function(R){switch(R){case "point":case "multipoint":return this.pointSymbol;
case "polyline":return this.polylineSymbol;case "circle":case "rectangle":case "polygon":return this.polygonSymbol;default:return null}};aa._setupUpdateOperation=function(){var R=d._asyncToGenerator(function*(Y,W){const {layer:ca,view:ia}=this;W={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...W,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...null==W?void 0:W.reshapeOptions}};var ja=W.tool;for(var na of Y)ca.remove(na),ca.add(na);if("3d"===ia.type){if(0===Y.length)return null;
switch(ja){case "move":return this._setupMove3DOperation(Y,W,ia,ja);case "reshape":if(1<Y.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;ja=O.isSupportedGraphic(Y[0]);if(0===ja)return this._setupReshape3DOperation(Y[0],W,ia);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${t.isSupportedGraphicResultMessage(ja)}).`);return null;case "transform":return this._setupGraphicTransform3DOperation(Y,
W,ia)}}switch(ja){case "move":return this._setupMoveOperation(Y,W,ia);case "reshape":if(1<Y.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;na=O.isSupportedGraphic(Y[0]);if(0===na)return this._setupTransformOrReshapeOperation(Y,ja,W,ia);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${t.isSupportedGraphicResultMessage(na)}).`);return null;case "transform":return 1===Y.length&&(na=w.get(Y[0].geometry,
"type"),"point"===na||"multipoint"===na)&&(ja="reshape"),this._setupTransformOrReshapeOperation(Y,ja,W,ia)}});return function(Y,W){return R.apply(this,arguments)}}();aa._setupMove3DOperation=function(){var R=d._asyncToGenerator(function*(Y,W,ca,ia,ja=!1){var na=this;for(var ka of Y){const ra=q.isSupportedGraphic(ka);if(0!==ra)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${t.isSupportedGraphicResultMessage(ra)}).`),null}ka=yield this._requireModule(new Promise((ra,
wa)=>e(["../../views/3d/interactive/editingTools"],ra,wa)));if(ma(ka))return ka;const Aa=new ka.module.GraphicMoveTool({view:ca,enableZ:W.enableZ,snappingManager:this._snappingManager});this.view.tools.add(Aa);Aa.graphics.addMany(Y);ja||this.updateGraphics.addMany(Y);const qa=[],sa=new K.UpdateOperationHandle({activeComponent:Aa,tool:ia,type:"update",onEnd:()=>{var ra;qa.forEach(wa=>wa.remove());qa.length=0;null==(ra=this.view.tools)?void 0:ra.remove(Aa);Aa.destroyed||Aa.destroy()},undo:()=>{u(sa,
this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:ia})},redo:()=>{U(sa,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:ia})},addToSelection:ra=>{this.updateGraphics.push(ra);Aa.graphics.push(ra);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[ra],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:ra=>{const wa=
this.updateGraphics.indexOf(ra);sa.history.undo.forEach(Ea=>Ea.updates.splice(wa,1));sa.history.redo.forEach(Ea=>Ea.updates.splice(wa,1));this.updateGraphics.remove(ra);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[ra],type:"selection-change"},type:"update"});0===this.updateGraphics.length?sa.complete():Aa.graphics.remove(ra)},toggleTool:function(){var ra=d._asyncToGenerator(function*(){if(1===na.updateGraphics.length&&
!1!==W.toggleToolOnClick&&"transform"===ia){var wa=na.updateGraphics.getItemAt(0);0===O.isSupportedGraphic(wa)&&(wa=yield na._setupReshape3DOperation(wa,W,ca,!0),ma(wa)||(sa.onEnd(),sa.destroy(),na._setUpdateOperationHandle(wa,W)))}});return function(){return ra.apply(this,arguments)}}()});qa.push(...this._getHandlesForComponent(sa,W),this.view.on("immediate-click",ra=>this._getCommonUpdateOperationClickHandlers(sa,ra,W),G.ViewEventPriorities.WIDGET),ca.on("key-down",ra=>{this._getCommonUpdateOperationKeyDownHandlers(sa,
ra);ra.key===C.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,ra.stopPropagation())},G.ViewEventPriorities.WIDGET),ca.on("key-up",ra=>{ra.key===C.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,ra.stopPropagation())},G.ViewEventPriorities.WIDGET));return sa});return function(Y,W,ca,ia){return R.apply(this,arguments)}}();aa._setupGraphicTransform3DOperation=function(R,Y,W,ca=!1){if(1===R.length&&0===L.isSupportedGraphic(R[0])){const ia=R[0],ja=ia.geometry;if(w.isSome(ja)&&
("point"===ja.type||"mesh"===ja.type))return this._setupPointTransform3DOperation(ia,Y,W);if(w.isSome(ja)&&("polygon"===ja.type||"polyline"===ja.type))return this._setupPolyTransform3DOperation(ia,Y,W,ca)}return this._setupMove3DOperation(R,Y,W,"transform",ca)};aa._setupPointTransform3DOperation=function(){var R=d._asyncToGenerator(function*(Y,W,ca){var ia=this;const {enableRotation:ja,enableScaling:na,enableZ:ka}=W,Aa=yield this._requireModule(new Promise((wa,Ea)=>e(["../../views/3d/interactive/editingTools"],
wa,Ea)));if(ma(Aa))return Aa;const qa=new Aa.module.GraphicTransformTool({graphic:Y,view:ca,enableRotation:ja,enableScaling:na,enableZ:ka,snappingManager:this._snappingManager});this.view.tools.add(qa);this.updateGraphics.add(Y);const sa=[],ra=new K.UpdateOperationHandle({activeComponent:qa,tool:"transform",type:"update",onEnd:()=>{var wa;sa.forEach(Ea=>Ea.remove());sa.length=0;null==(wa=this.view.tools)?void 0:wa.remove(qa);qa.destroyed||qa.destroy()},undo:()=>{u(ra,this.updateGraphics.toArray());
this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>{U(ra,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var wa=d._asyncToGenerator(function*(Ea){ia.updateGraphics.add(Ea);ia.emit("update",{graphics:ia.updateGraphics.toArray(),state:"active",aborted:!1,tool:ia.activeTool,toolEventInfo:{added:[Ea],removed:[],type:"selection-change"},type:"update"});Ea=yield ia._setupMove3DOperation(ia.updateGraphics.toArray(),
W,ca,"transform",!0);ma(Ea)||(ra.onEnd(),ra.destroy(),ia._setUpdateOperationHandle(Ea,W))});return function(Ea){return wa.apply(this,arguments)}}(),removeFromSelection:wa=>{this.updateGraphics.remove(wa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[wa],type:"selection-change"},type:"update"});ra.complete()},toggleTool:()=>{}});sa.push(...this._getHandlesForComponent(ra,W),this.view.on("immediate-click",wa=>
this._getCommonUpdateOperationClickHandlers(ra,wa,W),G.ViewEventPriorities.WIDGET),ca.on("key-down",wa=>{this._getCommonUpdateOperationKeyDownHandlers(ra,wa);wa.key===C.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,wa.stopPropagation())},G.ViewEventPriorities.WIDGET),ca.on("key-up",wa=>{wa.key===C.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,wa.stopPropagation())},G.ViewEventPriorities.WIDGET));return ra});return function(Y,W,ca){return R.apply(this,arguments)}}();
aa._setupPolyTransform3DOperation=function(){var R=d._asyncToGenerator(function*(Y,W,ca,ia=!1){var ja=this;const {enableRotation:na,enableScaling:ka,enableZ:Aa,preserveAspectRatio:qa}=W,sa=yield this._requireModule(new Promise((Ca,Ha)=>e(["../../views/3d/interactive/editingTools"],Ca,Ha)));if(ma(sa))return sa;const ra=new sa.module.ExtentTransformTool({graphic:Y,view:ca,enableRotation:na,enableScaling:ka,enableZ:Aa,preserveAspectRatio:qa});this.view.tools.add(ra);ia||this.updateGraphics.add(Y);const wa=
[],Ea=new K.UpdateOperationHandle({activeComponent:ra,tool:"transform",type:"update",onEnd:()=>{var Ca;wa.forEach(Ha=>Ha.remove());wa.length=0;null==(Ca=this.view.tools)?void 0:Ca.remove(ra);ra.destroyed||ra.destroy()},canUndo:()=>ra.canUndo,undo:()=>{ra.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>ra.canRedo,redo:()=>{ra.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var Ca=d._asyncToGenerator(function*(Ha){ja.updateGraphics.add(Ha);
ja.emit("update",{graphics:ja.updateGraphics.toArray(),state:"active",aborted:!1,tool:ja.activeTool,toolEventInfo:{added:[Ha],removed:[],type:"selection-change"},type:"update"});Ha=yield ja._setupMove3DOperation(ja.updateGraphics.toArray(),W,ca,"transform",!0);ma(Ha)||(Ea.onEnd(),Ea.destroy(),ja._setUpdateOperationHandle(Ha,W))});return function(Ha){return Ca.apply(this,arguments)}}(),removeFromSelection:Ca=>{this.updateGraphics.remove(Ca);this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ca],type:"selection-change"},type:"update"});Ea.complete()},toggleTool:function(){var Ca=d._asyncToGenerator(function*(){if(1===ja.updateGraphics.length&&!1!==W.toggleToolOnClick){var Ha=ja.updateGraphics.getItemAt(0);0===O.isSupportedGraphic(Ha)&&(Ha=yield ja._setupReshape3DOperation(Ha,W,ca,!0),ma(Ha)||(Ea.onEnd(),Ea.destroy(),ja._setUpdateOperationHandle(Ha,W)))}});return function(){return Ca.apply(this,arguments)}}()});
wa.push(...this._getHandlesForComponent(Ea,W),this.view.on("immediate-click",Ca=>this._getCommonUpdateOperationClickHandlers(Ea,Ca,W),G.ViewEventPriorities.WIDGET),this.view.on("key-down",Ca=>this._getCommonUpdateOperationKeyDownHandlers(Ea,Ca),G.ViewEventPriorities.WIDGET),this.view.on("key-down",Ca=>{Ca.key!==C.SKETCH_KEYS.constraint||Ca.repeat||(ra.preserveAspectRatio=!ra.preserveAspectRatio,Ca.stopPropagation())},G.ViewEventPriorities.WIDGET),this.view.on("key-up",Ca=>{Ca.key===C.SKETCH_KEYS.constraint&&
(ra.preserveAspectRatio=!ra.preserveAspectRatio,Ca.stopPropagation())},G.ViewEventPriorities.WIDGET));return Ea});return function(Y,W,ca){return R.apply(this,arguments)}}();aa._setupMoveOperation=function(){var R=d._asyncToGenerator(function*(Y,W,ca){this.updateGraphics.addMany(Y);const ia=yield this._getGraphicMover(Y,W,ca);if(ma(ia))return ia;const ja=new K.UpdateOperationHandle({activeComponent:ia,tool:"move",type:"update",onEnd:()=>{var qa;this._displayDefaultCursor();Aa.forEach(sa=>sa.remove());
ka.forEach(sa=>sa.remove());Aa=[];ka=[];ia.destroy();null==(qa=this._internalGraphicsLayer)?void 0:qa.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const qa=this.updateGraphics.toArray();u(ja,qa);ja.refreshComponent();this._emitUndoEvent({graphics:qa,tool:"move"})},redo:()=>{const qa=this.updateGraphics.toArray();U(ja,qa);ja.refreshComponent();this._emitRedoEvent({graphics:qa,tool:"move"})},addToSelection:qa=>{this.updateGraphics.push(qa);ia.graphics=this.updateGraphics.toArray();this.emit("update",
{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[qa],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:qa=>{const sa=this.updateGraphics.indexOf(qa);ja.history.undo.forEach(wa=>wa.updates.splice(sa,1));ja.history.redo.forEach(wa=>wa.updates.splice(sa,1));this.updateGraphics.remove(qa);const ra=this.updateGraphics.toArray();this.emit("update",{graphics:ra,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],
removed:[qa],type:"selection-change"},type:"update"});0===this.updateGraphics.length?ja.complete():ia.graphics=ra}});let na=!1,ka=[ca.on("immediate-click",qa=>this._getCommonUpdateOperationClickHandlers(ja,qa,W),G.ViewEventPriorities.WIDGET),ca.on("key-down",qa=>{this._getCommonUpdateOperationKeyDownHandlers(ja,qa);qa.key!==C.SKETCH_KEYS.constraint||qa.repeat||(na=!0,ia.enableMoveAllGraphics=!ia.enableMoveAllGraphics)},G.ViewEventPriorities.WIDGET),ca.on("key-up",qa=>{qa.key===C.SKETCH_KEYS.constraint&&
na&&(na=!1,ia.enableMoveAllGraphics=!ia.enableMoveAllGraphics)},G.ViewEventPriorities.WIDGET)],Aa=this._getHandlesForComponent(ja,W);return ja});return function(Y,W,ca){return R.apply(this,arguments)}}();aa._setupReshape3DOperation=function(){var R=d._asyncToGenerator(function*(Y,W,ca,ia=!1){var ja=this;const na=yield this._requireModule(new Promise((sa,ra)=>e(["../../views/3d/interactive/editingTools"],sa,ra)));if(ma(na))return na;this.snappingOptions.enabledToggled=!1;const ka=new na.module.GraphicReshapeTool({view:ca,
graphic:Y,enableZVertex:W.enableZ&&"move"===W.reshapeOptions.vertexOperation,enableZShape:W.enableZ&&"move"===W.reshapeOptions.shapeOperation,enableMoveGraphic:"move"===W.reshapeOptions.shapeOperation||"move-xy"===W.reshapeOptions.shapeOperation,enableMidpoints:"split"===W.reshapeOptions.edgeOperation,enableEdgeOffset:"offset"===W.reshapeOptions.edgeOperation,snappingManager:this._snappingManager});ca.tools.add(ka);ia||this.updateGraphics.add(Y);const Aa=[],qa=new K.UpdateOperationHandle({activeComponent:ka,
tool:"reshape",type:"update",onEnd:()=>{var sa;Aa.forEach(ra=>ra.remove());Aa.length=0;null==(sa=this.view.tools)?void 0:sa.remove(ka);ka.destroyed||ka.destroy()},canUndo:()=>ka.canUndo,undo:()=>{ka.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>ka.canRedo,redo:()=>{ka.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},addToSelection:function(){var sa=d._asyncToGenerator(function*(ra){ja.updateGraphics.add(ra);ja.emit("update",
{graphics:ja.updateGraphics.toArray(),state:"active",aborted:!1,tool:ja.activeTool,toolEventInfo:{added:[ra],removed:[],type:"selection-change"},type:"update"});ra=yield ja._setupMove3DOperation(ja.updateGraphics.toArray(),W,ca,"transform",!0);ma(ra)||(qa.onEnd(),qa.destroy(),ja._setUpdateOperationHandle(ra,W))});return function(ra){return sa.apply(this,arguments)}}(),removeFromSelection:sa=>{this.updateGraphics.remove(sa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[sa],type:"selection-change"},type:"update"});qa.complete()},toggleTool:function(){var sa=d._asyncToGenerator(function*(){if(!1!==W.toggleToolOnClick){var ra=yield ja._setupGraphicTransform3DOperation(ja.updateGraphics.toArray(),W,ca,!0);ma(ra)||(qa.onEnd(),qa.destroy(),ja._setUpdateOperationHandle(ra,W))}});return function(){return sa.apply(this,arguments)}}()});Aa.push(...this._getHandlesForComponent(qa,W),ca.on("immediate-click",sa=>
this._getCommonUpdateOperationClickHandlers(qa,sa,W),G.ViewEventPriorities.WIDGET),ca.on("key-down",sa=>{this._getCommonUpdateOperationKeyDownHandlers(qa,sa);sa.key===C.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,sa.stopPropagation())},G.ViewEventPriorities.WIDGET),ca.on("key-up",sa=>{sa.key===C.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,sa.stopPropagation())},G.ViewEventPriorities.WIDGET));return qa});return function(Y,W,ca){return R.apply(this,arguments)}}();
aa._setupTransformOrReshapeOperation=function(){var R=d._asyncToGenerator(function*(Y,W,ca,ia){var ja=this;const {multipleSelectionEnabled:na}=ca;this.updateGraphics.addMany(Y);Y="transform"===W?yield this._getBox(Y,ca,ia):yield this._getReshape(Y,ca,ia);if(ma(Y))return Y;const ka=new K.UpdateOperationHandle({activeComponent:Y,type:"update",onEnd:()=>{qa.forEach(sa=>sa.remove());Aa.forEach(sa=>sa.remove());qa=[];Aa=[];ka.activeComponent&&!ka.activeComponent.destroyed&&ka.activeComponent.destroy();
this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{u(ka,this.updateGraphics.toArray());ka.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:ka.tool})},redo:()=>{U(ka,this.updateGraphics.toArray());ka.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:ka.tool})},addToSelection:function(){var sa=d._asyncToGenerator(function*(ra){var wa=ka.activeComponent;if("reshape"===wa.type){wa=[...ja.updateGraphics,
ra];ja.updateGraphics.removeAll();wa=yield ja._setupMoveOperation(wa,ca,ia);if(ma(wa))return;ka.onEnd();ka.destroy();ja._setUpdateOperationHandle(wa,ca)}else ja.updateGraphics.add(ra),wa.graphics=ja.updateGraphics.toArray(),wa.refresh(),ka.resetHistory();ja.emit("update",{graphics:ja.updateGraphics.toArray(),state:"active",aborted:!1,tool:ja.activeTool,toolEventInfo:{added:[ra],removed:[],type:"selection-change"},type:"update"})});return function(ra){return sa.apply(this,arguments)}}(),removeFromSelection:function(){var sa=
d._asyncToGenerator(function*(ra){const wa=ja.updateGraphics.indexOf(ra);ka.history.undo.forEach(Ca=>Ca.updates.splice(wa,1));ka.history.redo.forEach(Ca=>Ca.updates.splice(wa,1));ja.updateGraphics.remove(ra);const Ea=ja.updateGraphics.toArray();if(0===Ea.length)ka.complete();else{const Ca=Ea[0].geometry;1!==Ea.length||!w.isSome(Ca)||"point"!==Ca.type&&"multipoint"!==Ca.type?ka.activeComponent.graphics=Ea:ka.toggleTool()}ja.emit("update",{graphics:Ea,state:"active",aborted:!1,tool:ja.activeTool,toolEventInfo:{added:[],
removed:[ra],type:"selection-change"},type:"update"})});return function(ra){return sa.apply(this,arguments)}}(),toggleTool:function(){var sa=d._asyncToGenerator(function*(){if(!(1<ja.updateGraphics.length)){var ra=ja.updateGraphics.getItemAt(0),wa=ra.geometry;w.isSome(wa)&&("reshape"===ka.tool&&("point"===wa.type||"multipoint"===wa.type)||"transform"===ka.tool&&"extent"===wa.type)||(wa=null,"transform"===ka.tool?wa=yield ja._getReshape([ra],ca,ia):"reshape"===ka.tool&&(wa=yield ja._getBox([ra],ca,
ia)),ma(wa)||(ka.activeComponent.destroy(),ka.activeComponent=wa,ka.activeComponent&&(qa.forEach(Ea=>Ea.remove()),qa=ja._getHandlesForComponent(ka,ca))))}});return function(){return sa.apply(this,arguments)}}()});let Aa=[ia.on("immediate-click",function(){var sa=d._asyncToGenerator(function*(ra){var wa;const Ea=yield ra.async(()=>ja._getFirstHit(A.createScreenPointFromEvent(ra)));null!=(wa=Ea.results)&&wa.length?Ea.results.some(Ca=>{if(Ca.graphic){var Ha;Ca=Ca.graphic;if(null!=(Ha=ra.native)&&Ha.shiftKey&&
na)return ra.stopPropagation(),ka.addToSelection(Ca),!0;if(Ca.layer===ja.layer)return ka.complete(),!0}return!1}):ka.complete()});return function(ra){return sa.apply(this,arguments)}}(),G.ViewEventPriorities.WIDGET),ia.on("key-down",sa=>{this._getCommonUpdateOperationKeyDownHandlers(ka,sa);sa.key!==C.SKETCH_KEYS.snappingToggle||sa.repeat||(this.snappingOptions.enabledToggled=!0,sa.stopPropagation());sa.key===C.SKETCH_KEYS.constraint&&!sa.repeat&&ka&&(sa=ka.activeComponent)&&"box"===sa.type&&(sa.preserveAspectRatio=
!sa.preserveAspectRatio)},G.ViewEventPriorities.WIDGET),ia.on("key-up",sa=>{var ra;sa.key===C.SKETCH_KEYS.snappingToggle&&"reshape"===(null==ka?void 0:null==(ra=ka.activeComponent)?void 0:ra.type)&&(this.snappingOptions.enabledToggled=!1,sa.stopPropagation());sa.key===C.SKETCH_KEYS.constraint&&ka&&(sa=ka.activeComponent)&&"box"===sa.type&&(sa.preserveAspectRatio=!sa.preserveAspectRatio)},G.ViewEventPriorities.WIDGET)],qa=this._getHandlesForComponent(ka,ca);return ka});return function(Y,W,ca,ia){return R.apply(this,
arguments)}}();aa._getGraphicMover=function(){var R=d._asyncToGenerator(function*(Y,W,ca){({enableMoveAllGraphics:W}=W);const ia=yield this._requireModule(new Promise((ja,na)=>e(["../../views/draw/support/GraphicMover"],ka=>ja(ta(ka)),na)));return ma(ia)?ia:new ia.module.default({enableMoveAllGraphics:W,graphics:Y,view:ca,callbacks:{onGraphicMoveStart:({dx:ja,dy:na,graphic:ka})=>{this._displayGrabbingCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{dx:ja,dy:na,mover:ka,type:"move-start"},type:"update"})},onGraphicMove:({dx:ja,dy:na,graphic:ka})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ja,dy:na,mover:ka,type:"move"},type:"update"}),onGraphicMoveStop:({dx:ja,dy:na,graphic:ka})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ja,dy:na,mover:ka,
type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})});return function(Y,W,ca){return R.apply(this,arguments)}}();aa._getBox=function(){var R=d._asyncToGenerator(function*(Y,W,ca){const {enableRotation:ia,enableScaling:ja,preserveAspectRatio:na}=W;W=yield this._requireModule(new Promise((ka,Aa)=>e(["../../views/draw/support/Box"],qa=>ka(ta(qa)),Aa)));return ma(W)?W:new W.module.default({graphics:Y,enableRotation:ia,
enableScaling:ja,preserveAspectRatio:na,layer:this._internalGraphicsLayer,view:ca,callbacks:{onMoveStart:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},type:"update"}),onMove:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},type:"update"}),onMoveStop:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...ka},type:"update"}),onScaleStart:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},type:"update"}),onScale:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},type:"update"}),onScaleStop:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},
type:"update"}),onRotateStart:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},type:"update"}),onRotate:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},type:"update"}),onRotateStop:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},type:"update"})}})});
return function(Y,W,ca){return R.apply(this,arguments)}}();aa._getReshape=function(){var R=d._asyncToGenerator(function*(Y,W,ca){var ia,ja;const na="split"===(null==(ia=W.reshapeOptions)?void 0:ia.edgeOperation);W="move"===(null==(ja=W.reshapeOptions)?void 0:ja.shapeOperation);ja=yield this._requireModule(new Promise((ka,Aa)=>e(["../../views/draw/support/Reshape"],qa=>ka(ta(qa)),Aa)));return ma(ja)?ja:new ja.module.default({enableMidpoints:na,enableMovement:W,graphic:Y[0],layer:this._internalGraphicsLayer,
snappingManager:this._snappingManager,view:ca,callbacks:{onReshapeStart:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},type:"update"}),onReshape:ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ka},type:"update"}),onReshapeStop:({mover:ka,type:Aa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{mover:ka,type:Aa},type:"update"}),onMoveStart:({dx:ka,dy:Aa,mover:qa,type:sa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ka,dy:Aa,mover:qa,type:sa},type:"update"}),onMove:({dx:ka,dy:Aa,mover:qa,type:sa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ka,dy:Aa,mover:qa,type:sa},type:"update"}),onMoveStop:({dx:ka,dy:Aa,mover:qa,
type:sa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ka,dy:Aa,mover:qa,type:sa},type:"update"}),onVertexAdd:({added:ka,type:Aa,vertices:qa})=>{ka=ka.map(sa=>y.geometryToCoordinates(sa.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:ka,vertices:qa,type:Aa},type:"update"})},onVertexRemove:({removed:ka,type:Aa,vertices:qa})=>{ka=ka.map(sa=>
y.geometryToCoordinates(sa.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:ka,vertices:qa,type:Aa},type:"update"})}}})});return function(Y,W,ca){return R.apply(this,arguments)}}();aa._getHandlesForComponent=function(R,Y){const W=R.activeComponent;switch(W.type){case "graphic-mover":return[W.on("graphic-click",({graphic:ca,viewEvent:ia})=>{var ja;null!=(ja=ia.native)&&ja.shiftKey&&(ia.stopPropagation(),R.removeFromSelection(ca))}),
W.on("graphic-move-start",ca=>R.addToHistory(fa(ca.allGraphics)))];case "box":return[W.on("graphic-click",ca=>this._onTransformOrReshape2DGraphicClick(R,Y,ca)),W.on("move-start",ca=>R.addToHistory(fa(ca.graphics))),W.on("rotate-start",ca=>R.addToHistory(fa(ca.graphics))),W.on("scale-start",ca=>R.addToHistory(fa(ca.graphics)))];case "reshape":return[W.on("graphic-click",ca=>this._onTransformOrReshape2DGraphicClick(R,Y,ca)),W.on("move-start",ca=>R.addToHistory(fa([ca.mover]))),W.on("reshape-start",
ca=>R.addToHistory(fa([ca.graphic]))),W.on("vertex-add",ca=>R.addToHistory(fa([ca.oldGraphic]))),W.on("vertex-remove",ca=>R.addToHistory(fa([ca.oldGraphic])))];case "move-3d":return[W.on("graphic-move-start",ca=>{R.addToHistory(fa(ca.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ca.allGraphics.length?ca.allGraphics[0]:null,type:"move-start"},type:"update"})}),W.on("graphic-move",ca=>{this.emit("update",
{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ca.dx,dy:ca.dy,mover:0<ca.allGraphics.length?ca.allGraphics[0]:null,type:"move"},type:"update"})}),W.on("graphic-move-stop",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ca.allGraphics.length?ca.allGraphics[0]:null,type:"move-stop"},type:"update"})}),W.on("immediate-click",ca=>{ca.shiftKey?this._toggleSelection([ca.graphic],
R,Y):R.toggleTool()})];case "transform-3d":return[W.on("record-undo",({record:ca})=>{R.addToHistory({updates:[ca]})}),W.on("graphic-translate-start",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ca.graphic,dx:ca.dxScreen,dy:ca.dyScreen,type:"move-start"},type:"update"})}),W.on("graphic-translate-stop",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ca.graphic,
dx:ca.dxScreen,dy:ca.dyScreen,type:"move-stop"},type:"update"})}),W.on("graphic-rotate-start",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ca.graphic,angle:ca.angle,type:"rotate-start"},type:"update"})}),W.on("graphic-rotate-stop",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ca.graphic,angle:ca.angle,type:"rotate-stop"},type:"update"})}),
W.on("graphic-scale-start",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ca.graphic,xScale:ca.xScale,yScale:ca.yScale,type:"scale-start"},type:"update"})}),W.on("graphic-scale-stop",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ca.graphic,xScale:ca.xScale,yScale:ca.yScale,type:"scale-stop"},type:"update"})}),W.on("graphic-translate",
ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ca.graphic,dx:ca.dxScreen,dy:ca.dyScreen,type:"move"},type:"update"})}),W.on("graphic-rotate",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ca.graphic,angle:ca.angle,type:"rotate"},type:"update"})}),W.on("graphic-scale",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ca.graphic,xScale:ca.xScale,yScale:ca.yScale,type:"scale"},type:"update"})}),W.on("immediate-click",ca=>{ca.shiftKey?this._toggleSelection([ca.graphic],R,Y):R.toggleTool()})];case "reshape-3d":return[W.on("reshape",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ca,type:"update"})}),W.on("move",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ca,type:"update"})}),W.on("vertex-add",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ca,type:"update"})}),W.on("vertex-remove",ca=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ca,type:"update"})}),W.on("immediate-click",ca=>{ca.shiftKey?this._toggleSelection([ca.graphic],R,Y):R.toggleTool()})]}};
aa._onTransformOrReshape2DGraphicClick=function(R,Y,W){var ca;const {graphic:ia,viewEvent:ja}=W;if(null!=(ca=ja.native)&&ca.shiftKey&&ia.layer===this.layer)return ja.stopPropagation(),R.removeFromSelection(ia);if(Y.toggleToolOnClick)return ja.stopPropagation(),R.toggleTool()};aa._setUpdateOperationHandle=function(R,Y){this._operationHandle=R;const W=this.view.map;this._disablePopup(Y);R.on("complete",()=>{if(R===this._operationHandle){const ca=this.updateGraphics.toArray(),ia=this._operationHandle.tool;
this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();W&&W.remove(this._internalGraphicsLayer);this._restorePopup(Y);this.emit("update",{graphics:ca,state:"complete",aborted:R.cancelled,tool:ia,toolEventInfo:null,type:"update"})}})};aa._getCommonUpdateOperationClickHandlers=function(){var R=d._asyncToGenerator(function*(Y,W,ca){const ia=A.createScreenPointFromEvent(W),ja=(yield W.async(()=>this._getFirstHit(ia))).results;
ja.length?W.native.shiftKey&&this._toggleSelection(ja.map(na=>na.graphic),Y,ca)?W.stopPropagation():ja.some(na=>na.graphic&&this.updateGraphics.includes(na.graphic))?W.stopPropagation():Y.complete():Y.complete()});return function(Y,W,ca){return R.apply(this,arguments)}}();aa._toggleSelection=function(R,Y,W){const ca=!!W.multipleSelectionEnabled;return R.some(ia=>null==ia?!1:ca&&ia.layer===this.layer?(this.updateGraphics.includes(ia)?Y.removeFromSelection(ia):Y.addToSelection(ia),!0):!1)};aa._getCommonUpdateOperationKeyDownHandlers=
function(R,Y){if(R){var W=Y.key;W===C.SKETCH_KEYS.undo&&R.canUndo()?(Y.stopPropagation(),R.undo()):W===C.SKETCH_KEYS.redo&&R.canRedo()?(Y.stopPropagation(),R.redo()):W===C.SKETCH_KEYS.cancel?(Y.stopPropagation(),R.cancel()):this.allowDeleteKey&&C.SKETCH_KEYS.delete.includes(W)&&this._onDeleteKey(Y)}};aa._onDeleteKey=function(R){if(this._operationHandle&&"update"===this._operationHandle.type){var Y=this.activeComponent,W=this.updateGraphics.toArray();w.isNone(Y)||"reshape-3d"===Y.type||"reshape"===
Y.type&&(1!==W.length||"point"!==w.get(W[0].geometry,"type"))||(R.stopPropagation(),this.delete())}};aa._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=w.destroyMaybe(this._internalGraphicsLayer))};aa._isComponentGraphic=function(R){const {activeComponent:Y}=this;return!R||w.isNone(Y)?!1:R.attributes&&R.attributes.esriSketchTool||"draw-2d"===Y.type&&Y.graphic===R||("box"===Y.type||
"reshape"===Y.type)&&Y.isUIGraphic(R)};aa._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};aa._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};aa._displayDefaultCursor=function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};aa._logError=function(R,Y,W){va.error(new Q(R,Y,W))};aa._requireModule=function(){var R=
d._asyncToGenerator(function*(Y){const W=new AbortController;this._moduleLoaderAbortController=W;Y=yield Y;return this._moduleLoaderAbortController!==W||W.signal.aborted?{requireError:"aborted"}:{module:Y}});return function(Y){return R.apply(this,arguments)}}();aa._emitUndoEvent=function(R){this.emit("undo",{...R,type:"undo"})};aa._emitRedoEvent=function(R){this.emit("redo",{...R,type:"redo"})};aa._emitDeleteEvent=function(R){this.emit("delete",{...R,type:"delete"})};aa.test=function(){return{operationHandle:this._operationHandle,
defaultUpdateOptions:Da}};aa.wait=function(){return f.whenNotOnce(this,"updating")};aa._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};aa._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};aa._disablePopupEnabled=function(R){var Y;return"3d"!==(null==(Y=this.view)?void 0:Y.type)||this.updateOnGraphicClick||w.isSome(R)&&R.toggleToolOnClick};aa._disablePopup=function(R){this._disablePopupEnabled(R)&&(R=this.view.popup)&&w.isNone(this._originalAutoOpenEnabled)&&
(this._originalAutoOpenEnabled=R.autoOpenEnabled,R.autoOpenEnabled=!1)};aa._restorePopup=function(R){this._disablePopupEnabled(R)&&(R=this.view.popup)&&w.isSome(this._originalAutoOpenEnabled)&&(R.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};aa._waitViewReady=function(){var R=d._asyncToGenerator(function*(){this.view&&(w.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,yield h.whenOrAbort(f.whenOnce(this.view,"ready"),
this._viewReadyAbortController.signal))});return function(){return R.apply(this,arguments)}}();d._createClass(ba,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"updating",get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",
get:function(){return!w.isSome(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):w.unwrap(this.activeComponent.graphic)}},{key:"defaultCreateOptions",set:function(R){this._set("defaultCreateOptions",{...Ba,...R})}},{key:"defaultUpdateOptions",set:function(R){this._set("defaultUpdateOptions",{...Da,...R,reshapeOptions:{...Da.reshapeOptions,...null==R?void 0:R.reshapeOptions}})}},{key:"snappingOptions",set:function(R){w.isSome(this._snappingManager)&&
(this._snappingManager.options=R);this._set("snappingOptions",R)}},{key:"state",get:function(){var R;const Y=!(null==(R=this.view)||!R.ready||!this.layer);R=this._operationHandle;return Y&&R?"active":Y?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(R){const Y=this._get("view");if(Y){const {container:W,map:ca}=Y;W&&(Y.cursor=null);ca&&ca.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();this.cancel()}this._handles.remove("view-ready");R&&this._handles.add(f.when(R,
"ready",W=>{this._viewHandles.removeAll();W&&this._viewHandles.add(this._generateViewHandles(R))},!0),"view-ready");this._set("view",R)}}]);return ba}(V.EventedAccessor);b.__decorate([m.property()],I.prototype,"updating",null);b.__decorate([m.property()],I.prototype,"_operationHandle",void 0);b.__decorate([m.property({readOnly:!0})],I.prototype,"activeTool",null);b.__decorate([m.property()],I.prototype,"activeFillSymbol",void 0);b.__decorate([m.property()],I.prototype,"activeLineSymbol",void 0);b.__decorate([m.property()],
I.prototype,"activeVertexSymbol",void 0);b.__decorate([m.property()],I.prototype,"allowDeleteKey",void 0);b.__decorate([m.property({readOnly:!0})],I.prototype,"createGraphic",null);b.__decorate([m.property()],I.prototype,"defaultCreateOptions",null);b.__decorate([m.property()],I.prototype,"defaultUpdateOptions",null);b.__decorate([m.property()],I.prototype,"layer",void 0);b.__decorate([m.property({types:z.symbolTypes})],I.prototype,"pointSymbol",void 0);b.__decorate([m.property({types:z.symbolTypes})],
I.prototype,"polygonSymbol",void 0);b.__decorate([m.property({types:z.symbolTypes})],I.prototype,"polylineSymbol",void 0);b.__decorate([m.property({type:D,nonNullable:!0})],I.prototype,"snappingOptions",null);b.__decorate([m.property()],I.prototype,"_snappingManager",void 0);b.__decorate([m.property({readOnly:!0})],I.prototype,"state",null);b.__decorate([m.property({readOnly:!0})],I.prototype,"updateGraphics",void 0);b.__decorate([m.property()],I.prototype,"updateOnGraphicClick",void 0);b.__decorate([m.property({types:z.symbolTypes})],
I.prototype,"updatePointSymbol",void 0);b.__decorate([m.property({types:z.symbolTypes})],I.prototype,"updatePolygonSymbol",void 0);b.__decorate([m.property({types:z.symbolTypes})],I.prototype,"updatePolylineSymbol",void 0);b.__decorate([m.property({types:z.symbolTypes})],I.prototype,"vertexSymbol",void 0);b.__decorate([m.property({value:null})],I.prototype,"view",null);b.__decorate([m.property()],I.prototype,"cancel",null);b.__decorate([m.property()],I.prototype,"complete",null);b.__decorate([m.property()],
I.prototype,"delete",null);b.__decorate([m.property()],I.prototype,"create",null);b.__decorate([m.property()],I.prototype,"update",null);b.__decorate([m.property()],I.prototype,"undo",null);b.__decorate([m.property()],I.prototype,"redo",null);b.__decorate([m.property()],I.prototype,"canUndo",null);b.__decorate([m.property()],I.prototype,"canRedo",null);b.__decorate([m.property()],I.prototype,"toggleUpdateTool",null);return I=b.__decorate([r.subclass("esri.widgets.Sketch.SketchViewModel")],I)})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c){function f(k){k&&(z.empty(k),k.parentNode&&k.parentNode.removeChild(k))}const m=[0,0];e.DOMContainer=k=>{k=function(E){function r(...y){var F=E.call(this,...y)||this;F._freqInfo={freq:16,time:750};F._overlayRenderTaskHandle=null;F.height=0;F.position=null;F.resizing=!1;F.root=null;F.surface=null;F.suspended=!0;F.ui=null;F.userContent=null;F.width=0;F.widthBreakpoint=null;F.handles.add([F.watch("cursor",J=>{const t=F.surface;t&&t.setAttribute("data-cursor",J)}),
F.watch("interacting",J=>{const t=F.surface;t&&t.setAttribute("data-interacting",J.toString())})]);return F}d._inheritsLoose(r,E);var l=r.prototype;l.initialize=function(){this.handles.add(this.watch("ui",(y,F)=>this._handleUIChange(y,F)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};l.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),
this.container=null)};l.blur=function(){this.surface&&this.surface.blur()};l.focus=function(){this.surface&&this.surface.focus()};l.pageToContainer=function(y,F,J){const t=this.position;y-=t[0];F-=t[1];J?(J[0]=y,J[1]=F):J=[y,F];return J};l.containerToPage=function(y,F,J){const t=this.position;y+=t[0];F+=t[1];J?(J[0]=y,J[1]=F):J=[y,F];return J};l._handleUIChange=function(y,F){F&&(this.handles.remove("ui"),F.destroy());y&&this._wireUI(y);this._set("ui",y)};l._wireUI=function(y){this.handles.remove("ui");
y&&(y.view=this,this.handles.add([I.init(this,"root",F=>{if(F){{const J=document.createElement("div");F.appendChild(J);F=J}}else F=null;y.container=F}),I.init(this,"popup",(F,J)=>{J&&y.remove(J,"popup");F&&(F.view=y.view,y.add(F,{key:"popup",position:"manual"}))})],"ui"))};l._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};l._startMeasuring=function(){const y=this._freqInfo;y.freq=16;y.time=750;this.handles.add([(()=>{const F=()=>{y.freq=
16;y.time=750};window.addEventListener("resize",F);return{remove(){window.removeEventListener("resize",F)}}})(),x.addFrameTask({prepare:F=>{const J=this._measure(),t=this._freqInfo;t.time+=F.deltaTime;J&&(t.freq=16,this._get("resizing")||this._set("resizing",!0));t.time<t.freq||(t.time=0,this._position()||J?t.freq=16:t.freq=Math.min(750,2*t.freq),!J&&512<=t.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};l._measure=function(){var y=this.container;
const F=y?y.clientWidth:0;y=y?y.clientHeight:0;if(0===F||0===y)return this.suspended||this._set("suspended",!0),!1;const J=this.width,t=this.height;if(F===J&&y===t)return this.suspended&&this._set("suspended",!1),!1;this._set("width",F);this._set("height",y);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:J,oldHeight:t,width:F,height:y});return!0};l._position=function(){var y=this.container;const F=this.position;{const J=(y.ownerDocument||window.document).defaultView;y=y.getBoundingClientRect();
m[0]=y.left+J.pageXOffset;m[1]=y.top+J.pageYOffset}return F&&m[0]===F[0]&&m[1]===F[1]?!1:(this._set("position",[m[0],m[1]]),!0)};l.forceDOMReadyCycle=function(){};d._createClass(r,[{key:"container",set:function(y){var F=this._get("container");if(F!==y)if(this.handles.remove("dom-size"),this._stopMeasuring(),F&&(F.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),
f(this.root),this._set("root",null),z.reparent(this.userContent,F),f(this.userContent),this._set("userContent",null)),y){y.classList.add("esri-view");F=document.createElement("div");F.className="esri-view-user-storage";z.reparent(y,F);y.appendChild(F);this._set("userContent",F);F=document.createElement("div");F.className="esri-view-root";y.insertBefore(F,y.firstChild);this._set("root",F);const J=document.createElement("div");J.className="esri-view-surface";J.setAttribute("role","application");J.tabIndex=
0;F.appendChild(J);this._set("surface",J);const t=new h;F.appendChild(t.surface);this._set("overlay",t);t.watch("needsRender",q=>{q&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=x.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(I.init(this,"size",q=>{const [O,L]=q;O>=document.body.clientWidth||L>=document.body.clientHeight?J.classList.add("esri-view-surface--inset-outline"):
J.classList.remove("esri-view-surface--inset-outline")}),"dom-size");this._set("container",y);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const y=document.activeElement===this.surface;return document.hasFocus()&&y}},{key:"popup",get:function(){return this._get("popup")||new c({view:this})},set:function(y){const F=this._get("popup");F&&
F!==y&&F.destroy();this._set("popup",y)}},{key:"size",get:function(){return[this.width,this.height]}}]);return r}(k);b.__decorate([Q.property({value:null,cast:E=>z.byId(E)})],k.prototype,"container",null);b.__decorate([Q.property({readOnly:!0})],k.prototype,"focused",null);b.__decorate([Q.property({readOnly:!0})],k.prototype,"height",void 0);b.__decorate([Q.property({type:c})],k.prototype,"popup",null);b.__decorate([Q.property({type:h})],k.prototype,"overlay",void 0);b.__decorate([Q.property({readOnly:!0})],
k.prototype,"position",void 0);b.__decorate([Q.property({readOnly:!0})],k.prototype,"resizing",void 0);b.__decorate([Q.property({readOnly:!0})],k.prototype,"root",void 0);b.__decorate([Q.property({value:null,readOnly:!0})],k.prototype,"size",null);b.__decorate([Q.property({readOnly:!0})],k.prototype,"surface",void 0);b.__decorate([Q.property({readOnly:!0})],k.prototype,"suspended",void 0);b.__decorate([Q.property()],k.prototype,"ui",void 0);b.__decorate([Q.property({readOnly:!0})],k.prototype,"userContent",
void 0);b.__decorate([Q.property({readOnly:!0})],k.prototype,"width",void 0);b.__decorate([Q.property()],k.prototype,"widthBreakpoint",void 0);return k=b.__decorate([w.subclass("esri.views.DOMContainer")],k)};e.isDOMContainer=function(k){return k&&"focus"in k};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/projector ../support/WatchUpdatingTracking".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h){b=function(c){function f(){var k=c.apply(this,arguments)||this;k.items=new z;k._watchUpdatingTracking=new h.WatchUpdatingTracking;k._callbacks=new Map;k._projector=w.createProjector();k._hiddenProjector=w.createProjector();return k}e._inheritsLoose(f,c);var m=f.prototype;m.initialize=function(){const k=document.createElement("div");k.className="esri-overlay-surface";this._set("surface",k);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");k.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(this.items,E=>{for(const r of E.added){const l=()=>r.render();this._callbacks.set(r,l);this._projector.append(this.surface,l)}for(const r of E.removed)E=this._projector.detach(this._callbacks.get(r)),this.surface.removeChild(E.domNode),this._callbacks.delete(r)})};m.addItem=function(k){this.items.add(k)};m.removeItem=function(k){this.items.remove(k)};m.destroy=function(){this.items.removeAll();
this._callbacks.forEach(k=>this._projector.detach(k));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};m.render=function(){this._projector.renderNow()};m.computeBoundingRect=function(k){const E=this._hiddenSurface,r=this._hiddenProjector;let l=null;const y=()=>l=k.render();r.append(E,y);r.renderNow();const F={left:0,top:0,right:0,bottom:0};if(l&&l.domNode){const J=l.domNode.getBoundingClientRect();F.left=J.left;F.top=J.top;F.right=J.right;F.bottom=J.bottom}for(r.detach(y);E.firstChild;)E.removeChild(E.firstChild);
return F};m.overlaps=function(k,E){k=this.computeBoundingRect(k);E=this.computeBoundingRect(E);return Math.max(k.left,E.left)<=Math.min(k.right,E.right)&&Math.max(k.top,E.top)<=Math.min(k.bottom,E.bottom)};m.renderCanvas=function(k){if(this.items.some(r=>r.visible)){var E=k.getContext("2d");E.save();E.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(r=>{E.save();r.renderCanvas(E);E.restore()});E.restore()}};e._createClass(f,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(k=>k.visible)}}]);return f}(b);d.__decorate([x.property({readOnly:!0})],b.prototype,"surface",void 0);d.__decorate([x.property({readOnly:!0})],b.prototype,"items",void 0);d.__decorate([x.property({readOnly:!0})],b.prototype,"needsRender",null);d.__decorate([x.property({readOnly:!0})],b.prototype,"_watchUpdatingTracking",void 0);d.__decorate([x.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],b.prototype,"updating",void 0);
return b=d.__decorate([T.subclass("esri.views.overlay.ViewOverlay")],b)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/throttle ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J,t,q,O,L,n,G){function C(K,P){return void 0===P?`${"esri-popup"}__${K}`:`${"esri-popup"}__${K}-${P}`}const B={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},D=Q.getLogger("esri.widgets.Popup"),A={closeButton:!0,featureNavigation:!0};b=function(K){function P(g,v){var u=K.call(this,g,v)||this;u._blurClose=!1;u._blurContainer=!1;u._containerNode=null;u._mainContainerNode=null;u._featureMenuNode=null;u._actionsMenuNode=null;u._focusClose=!1;
u._focusContainer=!1;u._focusDockButton=!1;u._focusFeatureMenuButton=!1;u._focusActionsMenuButton=!1;u._focusFirstFeature=!1;u._focusFirstAction=!1;u._handles=new I;u._pointerOffsetInPx=16;u._spinner=null;u._feature=null;u._featureMenuIntersectionObserverCallback=([U])=>{null!=U&&U.isIntersecting&&u.viewModel.featurePage++};u._featureMenuIntersectionObserver=new IntersectionObserver(u._featureMenuIntersectionObserverCallback,{root:window.document});u._displaySpinnerThrottled=T.throttle(()=>u._displaySpinner(),
0);u.actions=null;u.alignment="auto";u.autoCloseEnabled=null;u.autoOpenEnabled=null;u.defaultPopupTemplateEnabled=null;u.content=null;u.collapsed=!1;u.collapseEnabled=!0;u.dockEnabled=!1;u.featureCount=null;u.featureMenuOpen=!1;u.features=null;u.goToOverride=null;u.headingLevel=2;u.highlightEnabled=null;u.location=null;u.label=void 0;u.maxInlineActions=3;u.messages=null;u.messagesCommon=null;u.promises=null;u.selectedFeature=null;u.selectedFeatureIndex=null;u.spinnerEnabled=!0;u.title=null;u.updateLocationEnabled=
null;u.view=null;u.viewModel=new F;u.visible=null;u.visibleElements={...A};u._addSelectedFeatureIndexHandle();u.own([H.watch(e._assertThisInitialized(u),"viewModel.screenLocation",()=>u._positionContainer()),H.watch(e._assertThisInitialized(u),["viewModel.active","dockEnabled"],()=>u._toggleScreenLocationEnabled()),H.watch(e._assertThisInitialized(u),"viewModel.screenLocation",(U,X)=>{!!U!==!!X&&u.reposition()}),H.watch(e._assertThisInitialized(u),["viewModel.view.padding","viewModel.view.size","viewModel.active",
"viewModel.location","alignment"],()=>u.reposition()),H.watch(e._assertThisInitialized(u),"spinnerEnabled",U=>u._spinnerEnabledChange(U)),H.watch(e._assertThisInitialized(u),"viewModel.view.size",(U,X)=>u._updateDockEnabledForViewSize(U,X)),H.watch(e._assertThisInitialized(u),"viewModel.view",(U,X)=>u._viewChange(U,X)),H.watch(e._assertThisInitialized(u),"viewModel.view.ready",(U,X)=>u._viewReadyChange(U,X)),H.watch(e._assertThisInitialized(u),["viewModel.waitingForResult","viewModel.location"],()=>
{u._hideSpinner();u._displaySpinnerThrottled()}),H.watch(e._assertThisInitialized(u),["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>u._setTitleFromFeatureWidget()),H.watch(e._assertThisInitialized(u),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>u._setContentFromFeatureWidget()),H.whenFalse(e._assertThisInitialized(u),"collapsed",()=>{var U,X;"xsmall"===(null==(U=u.viewModel)?void 0:null==(X=U.view)?void 0:X.widthBreakpoint)&&
u.viewModel.active&&u.collapseEnabled&&u.viewModel.centerAtLocation()}),H.on(e._assertThisInitialized(u),"viewModel.allActions","change",()=>u._watchActions()),H.init(e._assertThisInitialized(u),"viewModel.allActions",()=>u._watchActions()),H.watch(e._assertThisInitialized(u),"viewModel.featureViewModels",()=>u._featureMenuViewportScrollTop())]);return u}e._inheritsLoose(P,K);var N=P.prototype;N.destroy=function(){var g,v;this._destroySelectedFeatureWidget();this._destroySpinner();null==(g=this._handles)?
void 0:g.destroy();this._unobserveFeatureMenuObserver();null==(v=this._featureMenuIntersectionObserver)?void 0:v.disconnect();this._handles=null};N.castVisibleElements=function(g){return{...A,...g}};N.blur=function(){const {active:g}=this.viewModel;g||D.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};N.clear=function(){this.viewModel.clear()};N.close=function(){this.visible=!1};N.fetchFeatures=
function(g,v){return this.viewModel.fetchFeatures(g,v)};N.focus=function(){const {active:g}=this.viewModel;g||D.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};N.next=function(){return this.viewModel.next()};N.open=function(g){var v,u;this._handles.remove("selected-index");const U={collapsed:g?!!g.collapsed:!1,actionsMenuOpen:g?!!g.actionsMenuOpen:!1,featureMenuOpen:g?!!g.featureMenuOpen:!1};
"xsmall"===(null==(v=this.viewModel)?void 0:null==(u=v.view)?void 0:u.widthBreakpoint)&&(U.collapsed=!0);this.set(U);this.viewModel.open(g);this._addSelectedFeatureIndexHandle()};N.previous=function(){return this.viewModel.previous()};N.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};N.triggerAction=function(g){this.viewModel.triggerAction(g)};N.render=function(){var g,v,u,U;const {actionsMenuOpen:X,dockEnabled:fa,featureMenuVisible:ma,dividedActions:ta,
currentAlignment:va,currentDockPosition:Ba}=this,{active:Da}=this.viewModel;var {menuActions:la}=ta;la=Da&&1<la.length&&X;const ba=null==(g=this.selectedFeature)?void 0:null==(v=g.layer)?void 0:v.title;g=null==(u=this.selectedFeature)?void 0:null==(U=u.layer)?void 0:U.id;return L.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===va,["esri-popup--aligned-bottom-center"]:"bottom-center"===va,["esri-popup--aligned-top-left"]:"top-left"===va,["esri-popup--aligned-bottom-left"]:"bottom-left"===
va,["esri-popup--aligned-top-right"]:"top-right"===va,["esri-popup--aligned-bottom-right"]:"bottom-right"===va,["esri-popup--is-docked"]:Da&&fa,["esri-popup--shadow"]:Da&&!fa,["esri-popup--is-docked-top-left"]:"top-left"===Ba,["esri-popup--is-docked-top-center"]:"top-center"===Ba,["esri-popup--is-docked-top-right"]:"top-right"===Ba,["esri-popup--is-docked-bottom-left"]:"bottom-left"===Ba,["esri-popup--is-docked-bottom-center"]:"bottom-center"===Ba,["esri-popup--is-docked-bottom-right"]:"bottom-right"===
Ba,["esri-popup--feature-menu-open"]:ma,["esri-popup--actions-menu-open"]:la}),role:"presentation","data-layer-title":ba,"data-layer-id":g,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},Da?[this.renderMainContainer(),this.renderPointer()]:null)};N.renderLoadingIcon=function(){return L.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};N.renderNavigationLoading=function(){const {messagesCommon:g}=
this;return this.viewModel.pendingPromisesCount?L.tsx("div",{key:C("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":g.loading,title:g.loading},this.renderLoadingIcon()):null};N.renderPreviousIcon=function(){const g=n.isRTL(this.container);return L.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:g,["esri-popup__pagination-previous-icon--rtl"]:g,["esri-icon-left-triangle-arrow"]:!g,["esri-popup__pagination-previous-icon"]:!g})})};
N.renderPreviousButton=function(){const {messages:g}=this;return L.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":g.previous,title:g.previous},this.renderPreviousIcon())};N.renderNextIcon=function(){const g=n.isRTL(this.container);return L.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:g,["esri-popup__pagination-next-icon--rtl"]:g,
["esri-icon-right-triangle-arrow"]:!g,["esri-popup__pagination-next-icon"]:!g})})};N.renderNextButton=function(){const {messages:g}=this;return L.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":g.next,title:g.next},this.renderNextIcon())};N.renderFeatureMenuButton=function(){const {featureMenuOpen:g,featureMenuId:v,messagesCommon:u}=this,{featureCount:U,selectedFeatureIndex:X}=
this.viewModel;return L.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":v,"aria-expanded":g.toString(),"aria-label":u.menu,title:u.menu},this._getPageText(U,X))};N.renderNavigationButtons=function(){return this.featureNavigationVisible?
[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null};N.renderDockIcon=function(){const {dockEnabled:g}=this,v=this._wouldDockTo();return L.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:g,["esri-popup__icon--dock-icon"]:!g,["esri-icon-dock-right"]:!g&&("top-right"===v||"bottom-right"===v),["esri-icon-dock-left"]:!g&&("top-left"===v||"bottom-left"===v),["esri-icon-maximize"]:!g&&"top-center"===v,["esri-icon-dock-bottom"]:!g&&
"bottom-center"===v},"esri-popup__icon")})};N.renderDockButton=function(){var g,v,u;const {dockEnabled:U,messages:X}=this,fa=null==(g=this.viewModel)?void 0:null==(v=g.view)?void 0:v.widthBreakpoint;g=U?X.undock:X.dock;return"xsmall"!==fa&&null!=(u=this.dockOptions)&&u.buttonEnabled?L.tsx("div",{role:"button","aria-label":g,title:g,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button",
"esri-popup__button--dock")},this.renderDockIcon()):null};N.renderTitle=function(){const {title:g}=this.viewModel,{titleId:v,collapsible:u,contentCollapsed:U,messagesCommon:X}=this;var fa={["esri-popup__header-container--button"]:u};const ma=L.tsx(J.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:g});fa=u?L.tsx("button",{key:`${g}--collapsible`,id:v,title:U?X.expand:X.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",
fa),"aria-expanded":U?"false":"true",onclick:this._toggleCollapsed},ma):L.tsx("div",{key:g,id:v,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",fa)},ma);return g?fa:null};N.renderCloseIcon=function(){return L.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};N.renderCloseButton=function(){const {visibleElements:g,messagesCommon:v}=this;return g.closeButton?L.tsx("div",{role:"button",tabIndex:0,
bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":v.close,title:v.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};N.renderHeader=function(){return L.tsx("header",{class:"esri-popup__header"},this.renderTitle(),L.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};N.renderContentContainer=function(){const {contentId:g,hasContent:v,contentCollapsed:u}=
this,{content:U}=this.viewModel;return v&&!u?L.tsx("article",{key:U,enterAnimation:this._createFeatureUpdatedAnimation(),id:g,class:"esri-popup__content"},this.renderContent()):null};N.renderActionsMenuButton=function(){const {actionsMenuId:g,actionsMenuButtonId:v,actionsMenuOpen:u,dividedActions:U,messagesCommon:X}=this,fa=u?X.close:X.open,{menuActions:ma}=U;return ma.length?L.tsx("div",{key:C("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",
id:v,"aria-haspopup":"true","aria-controls":u?g:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":fa,title:fa},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};N.renderMenuActions=function(){const {actionsMenuId:g,actionsMenuButtonId:v,actionsMenuOpen:u,dividedActions:U}=this,{menuActions:X}=U;return X.length&&u?L.tsx("ul",
{id:g,role:"menu","aria-labelledby":v,key:C("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},X.toArray().map(fa=>this.renderAction({action:fa,type:"menu-item"}))):null};N.renderInlineActions=function(){const {inlineActions:g}=this.dividedActions;return!!g.length&&g.toArray().map(v=>this.renderAction({action:v,type:"inline"}))};N.renderInlineActionsContainer=function(){const {inlineActions:g,
menuActions:v}=this.dividedActions,u=!!g.length,U=!!v.length;return u||U?L.tsx("div",{key:"inline-actions-container","data-inline-actions":u.toString(),"data-menu-actions":U.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};N.renderNavigation=function(){return this.featureNavigationVisible?L.tsx("section",{key:C("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):
null};N.renderFooter=function(){const {featureNavigationVisible:g,dividedActions:v}=this,{inlineActions:u,menuActions:U}=v,X=!!u.length,fa={["esri-popup__footer--has-pagination"]:g,["esri-popup__footer--has-actions"]:X,["esri-popup__footer--has-actions-menu"]:!!U.length};return g||X?L.tsx("div",{key:C("feature-buttons"),class:this.classes("esri-popup__footer",fa)},this.renderInlineActionsContainer(),this.renderNavigation()):null};N.renderFeatureMenuContainer=function(){var {messages:g}=this;const {featureViewModels:v,
isLoadingFeature:u}=this.viewModel;g=G.substitute(g.selectedFeatures,{total:v.length});return L.tsx("section",{key:C("menu"),class:"esri-popup__feature-menu"},L.tsx("strong",{class:"esri-popup__feature-menu-header"},g),L.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:n.storeNode},this.renderFeatureMenu(),L.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),
u?L.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))};N.renderPointer=function(){return this.dockEnabled?null:L.tsx("div",{key:C("pointer"),class:"esri-popup__pointer",role:"presentation"},L.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};N.renderMainContainer=function(){const {dockEnabled:g,currentAlignment:v,currentDockPosition:u,titleId:U,contentId:X,collapsible:fa,hasContent:ma,contentCollapsed:ta,visibleElements:va}=
this,{title:Ba}=this.viewModel,Da="bottom-left"===v||"bottom-center"===v||"bottom-right"===v||"top-left"===u||"top-center"===u||"top-right"===u,la="top-left"===v||"top-center"===v||"top-right"===v||"bottom-left"===u||"bottom-center"===u||"bottom-right"===u;return L.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:g,["esri-popup--is-collapsible"]:fa,["esri-popup--is-collapsed"]:ta}),tabIndex:va.closeButton?null:-1,role:"dialog","aria-labelledby":Ba?U:
"","aria-describedby":ma&&!ta?X:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},Da?this.renderFooter():null,Da?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),la?this.renderFooter():null,la?this.renderFeatureMenuContainer():null)};N.renderContent=function(){var g;const v=null==(g=this.viewModel)?void 0:g.content;return v?"string"===typeof v?L.tsx("div",{key:v,innerHTML:v}):this.renderNodeContent(v):
null};N.renderActionText=function(g){return L.tsx("span",{key:"text",class:"esri-popup__action-text"},g)};N.renderActionIcon=function(g){const v=this._getActionClass(g),u=this._getActionImage(g),U={["esri-icon-loading-indicator"]:g.active,["esri-rotating"]:g.active,["esri-popup__icon"]:!!v,["esri-popup__action-image"]:!g.active&&!!u};v&&(U[v]=!g.active);return L.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",U),styles:this._getIconStyles(u)})};N.renderAction=function(g){const {action:v,
type:u}=g;g=this._getActionTitle(v);const U={["esri-popup__action"]:"toggle"!==v.type,["esri-popup__action-toggle"]:"toggle"===v.type,["esri-popup__action-toggle--on"]:"toggle"===v.type&&v.value,["esri-popup__button--disabled"]:v.disabled},X=[this.renderActionIcon(v),this.renderActionText(g)];g="menu-item"===u?L.tsx("li",{key:v.uid,role:"menuitem",tabIndex:0,title:g,"aria-label":g,class:this.classes("esri-popup__button",U),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":v.uid,
onclick:this._triggerAction,onkeydown:this._triggerAction},X):L.tsx("div",{key:v.uid,role:"button",tabIndex:0,title:g,"aria-label":g,class:this.classes("esri-popup__button",U),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":v.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},X);return v.visible?g:null};N.renderFeatureMenuItem=function(g,v){const {messages:u,messagesCommon:U}=this,{selectedFeatureIndex:X,selectedFeatureViewModel:fa}=this.viewModel;var ma=g===fa;const ta=
{["esri-popup__feature-menu-item--selected"]:ma};ma=ma?L.tsx("span",{key:C(`feature-menu-selected-feature-${X}`),title:u.selectedFeature,"aria-label":u.selectedFeature,class:"esri-icon-check-mark"}):null;g=L.tsx("span",{innerHTML:g.title||U.untitled});return L.tsx("li",{role:"menuitem",tabIndex:-1,key:C(`feature-menu-feature-${X}`),class:this.classes(ta,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":v,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},
L.tsx("span",{class:"esri-popup__feature-menu-title"},g,ma))};N.renderFeatureMenu=function(){const {featureMenuId:g}=this,{featureViewModels:v}=this.viewModel;return 1<v.length?L.tsx("ol",{class:"esri-popup__feature-menu-list",id:g,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},v.filter(u=>!!u.graphic).map((u,U)=>this.renderFeatureMenuItem(u,U))):null};N._getActionTitle=function(g){const {messages:v,selectedFeature:u,
messagesCommon:U}=this,{id:X}=g,fa=null==u?void 0:u.attributes;return(g="zoom-to-feature"===X?G.substitute(g.title,{messages:v}):"remove-selected-feature"===X?G.substitute(g.title,{messages:U}):"zoom-to-clustered-features"===X?G.substitute(g.title,{messages:v}):"browse-clustered-features"===X?G.substitute(g.title,{messages:v}):g.title)&&fa?G.substitute(g,fa):g};N._getActionClass=function(g){var {selectedFeature:v}=this;v=null==v?void 0:v.attributes;const {className:u,image:U}=g;return(g=U||u?u:"esri-icon-default-action")&&
v?G.substitute(g,v):g};N._getActionImage=function(g){var {selectedFeature:v}=this;v=null==v?void 0:v.attributes;({image:g}=g);return g&&v?G.substitute(g,v):g};N._createFeatureUpdatedAnimation=function(){return n.cssTransition("enter","esri-popup--feature-updated")};N._getInlineActionCount=function(){const {maxInlineActions:g,featureNavigationVisible:v}=this;if("number"!==typeof g)return null;const u=Math.round(g);return Math.max(v?u-1:u,0)};N._watchActions=function(){const {allActions:g}=this.viewModel;
this.notifyChange("dividedActions");this._handles.remove("actions");g&&g.forEach(v=>{this._handles.add(H.watch(v,"uid active className disabled id title image visible".split(" "),()=>this.scheduleRender()),"actions")})};N._divideActions=function(){var {allActions:g}=this.viewModel;g=g.filter(X=>X.visible);const v=this._getInlineActionCount(),u=null===v,U=0===v;return{inlineActions:u?g.slice(0):U?new z:g.slice(0,v),menuActions:u?new z:U?g.slice(0):g.slice(v)}};N._featureMenuOpenChanged=function(g){g?
this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};N._actionsMenuOpenChanged=function(g){g?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};N._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:g,messagesCommon:v}=this;if(g){var u,U;this.viewModel.title="error"===(null==(u=g.viewModel)?void 0:u.state)?v.errorMessage:(null==(U=g.viewModel)?void 0:U.title)||""}};N._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:g}=this;g&&(this.viewModel.content=
g)};N._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};N._featureMenuIntersectionObserverCreated=function(g){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(g);this._featureMenuIntersectionObserverNode=g};N._handleFeatureMenuKeyup=function(g){"Escape"===x.eventKey(g)&&(g.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=
!1,this.scheduleRender())};N._handleActionMenuKeyup=function(g){"Escape"===x.eventKey(g)&&(g.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};N._handleFeatureMenuItemKeyup=function(g){const v=x.eventKey(g);var {_featureMenuNode:u}=this;const U=g.currentTarget["data-feature-index"];if(u){u=u.querySelectorAll("li");var X=u.length;"ArrowUp"===v?(g.stopPropagation(),u[(U-1+X)%X].focus()):"ArrowDown"===v?(g.stopPropagation(),u[(U+1+X)%X].focus()):"Home"===
v?(g.stopPropagation(),u[0].focus()):"End"===v&&(g.stopPropagation(),u[u.length-1].focus())}};N._handleActionMenuItemKeyup=function(g){const v=x.eventKey(g);var {_actionsMenuNode:u}=this;const U=g.currentTarget.dataset.actionUid;var {menuActions:X}=this.dividedActions;X=X.findIndex(ma=>ma.uid===U);if(u){u=u.querySelectorAll("li");var fa=u.length;"ArrowUp"===v?(g.stopPropagation(),u[(X-1+fa)%fa].focus()):"ArrowDown"===v?(g.stopPropagation(),u[(X+1+fa)%fa].focus()):"Home"===v?(g.stopPropagation(),u[0].focus()):
"End"===v&&(g.stopPropagation(),u[u.length-1].focus())}};N._handleMainKeyup=function(g){const v=x.eventKey(g);"ArrowLeft"===v&&(g.stopPropagation(),this.previous());"ArrowRight"===v&&(g.stopPropagation(),this.next())};N._spinnerEnabledChange=function(g){this._destroySpinner();g&&(g=this.get("viewModel.view"),this._createSpinner(g))};N._hideSpinner=function(){const {_spinner:g}=this;g&&(g.location=null,g.hide())};N._displaySpinner=function(){const {_spinner:g}=this;if(g){var {location:v,waitingForResult:u}=
this.viewModel;u?g.show({location:v}):g.hide()}};N._getIconStyles=function(g){return{"background-image":g?`url(${g})`:""}};N._addSelectedFeatureIndexHandle=function(){const g=H.watch(this,"viewModel.selectedFeatureIndex",(v,u)=>this._selectedFeatureIndexUpdated(v,u));this._handles.add(g,"selected-index")};N._selectedFeatureIndexUpdated=function(g,v){const {featureCount:u}=this;u&&g!==v&&-1!==g&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};N._destroySelectedFeatureWidget=function(){const {_feature:g}=
this;g&&(g.viewModel=null,g&&!g.destroyed&&g.destroy());this._feature=null};N._isScreenLocationWithinView=function(g,v){return-1<g.x&&-1<g.y&&g.x<=v.width&&g.y<=v.height};N._isOutsideView=function(g){const {popupHeight:v,popupWidth:u,screenLocation:U,side:X,view:fa}=g;if(isNaN(u)||isNaN(v)||!fa||!U)return!1;g=fa.padding;return"right"===X&&U.x+u/2>fa.width-g.right||"left"===X&&U.x-u/2<g.left||"top"===X&&U.y-v<g.top||"bottom"===X&&U.y+v>fa.height-g.bottom?!0:!1};N._calculateAutoAlignment=function(g){if("auto"!==
g)return g;const {_pointerOffsetInPx:v,_containerNode:u,_mainContainerNode:U,viewModel:X}=this,{screenLocation:fa,view:ma}=X;if(V.isNone(fa)||!ma||!u)return"top-center";if(!this._isScreenLocationWithinView(fa,ma))return this._get("currentAlignment")||"top-center";var ta=(g=U?window.getComputedStyle(U,null):null)?parseInt(g.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,va=g?parseInt(g.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:Ba,width:Da}=u.getBoundingClientRect();
g=Da+v;const la=Math.max(Ba,ta,va)+v;ta=this._isOutsideView({popupHeight:la,popupWidth:g,screenLocation:fa,side:"right",view:ma});va=this._isOutsideView({popupHeight:la,popupWidth:g,screenLocation:fa,side:"left",view:ma});const ba=this._isOutsideView({popupHeight:la,popupWidth:g,screenLocation:fa,side:"top",view:ma});g=this._isOutsideView({popupHeight:la,popupWidth:g,screenLocation:fa,side:"bottom",view:ma});return va?ba?"bottom-right":"top-right":ta?ba?"bottom-left":"top-left":ba?g?"top-center":
"bottom-center":"top-center"};N._callCurrentAlignment=function(g){return"function"===typeof g?g.call(this):g};N._getCurrentAlignment=function(){const {alignment:g,dockEnabled:v}=this;return v||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(g)))};N._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};N._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};
N._calculatePositionResult=function(g){const v=["left","right"];n.isRTL(this.container)&&v.reverse();return g.replace(/leading/gi,v[0]).replace(/trailing/gi,v[1])};N._callDockPosition=function(g){return"function"===typeof g?g.call(this):g};N._getDockPosition=function(){var g;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(g=this.dockOptions)?void 0:g.position)))};N._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?
this._getDockPosition():null};N._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};N._calculateAutoDockPosition=function(g){var v;if("auto"!==g)return g;g=null==(v=this.viewModel)?void 0:v.view;v=n.isRTL(this.container)?"top-left":"top-right";if(!g)return v;var u=g.padding||{left:0,right:0,top:0,bottom:0};u=g.width-u.left-u.right;({breakpoints:g}=g);return g&&u<=g.xsmall?"bottom-center":v};N._positionContainer=function(g=this._containerNode){g&&(this._containerNode=g);if(g){var {screenLocation:v}=
this.viewModel,{width:u}=g.getBoundingClientRect();if(v=this._calculatePositionStyle(v,u))g.style.top=v.top,g.style.left=v.left,g.style.bottom=v.bottom,g.style.right=v.right}};N._calculateFullWidth=function(g){const {currentAlignment:v,_pointerOffsetInPx:u}=this;return"top-left"===v||"bottom-left"===v||"top-right"===v||"bottom-right"===v?g+u:g};N._calculateAlignmentPosition=function(g,v,u,U){const {currentAlignment:X,_pointerOffsetInPx:fa}=this;U/=2;const ma=u.height-v;u=u.width-g;const {padding:ta}=
this.view;if("bottom-center"===X)return{top:v+fa-ta.top,left:g-U-ta.left};if("top-left"===X)return{bottom:ma+fa-ta.bottom,right:u+fa-ta.right};if("bottom-left"===X)return{top:v+fa-ta.top,right:u+fa-ta.right};if("top-right"===X)return{bottom:ma+fa-ta.bottom,left:g+fa-ta.left};if("bottom-right"===X)return{top:v+fa-ta.top,left:g+fa-ta.left};if("top-center"===X)return{bottom:ma+fa-ta.bottom,left:g-U-ta.left}};N._calculatePositionStyle=function(g,v){const {dockEnabled:u,view:U}=this;if(U){if(u)return{left:"",
top:"",right:"",bottom:""};if(!V.isNone(g)&&v&&(v=this._calculateFullWidth(v),g=this._calculateAlignmentPosition(g.x,g.y,U,v)))return{top:void 0!==g.top?`${g.top}px`:"auto",left:void 0!==g.left?`${g.left}px`:"auto",bottom:void 0!==g.bottom?`${g.bottom}px`:"auto",right:void 0!==g.right?`${g.right}px`:"auto"}}};N._viewChange=function(g,v){g&&v&&(this.close(),this.clear())};N._viewReadyChange=function(g,v){g?(g=this.get("viewModel.view"),this._wireUpView(g)):v&&(this.close(),this.clear())};N._wireUpView=
function(g){this._destroySpinner();if(g){var {spinnerEnabled:v}=this;v&&this._createSpinner(g);this._setDockEnabledForViewSize(this.dockOptions)}};N._dockingThresholdCrossed=function(g,v,u){const [U,X]=g,[fa,ma]=v,{width:ta,height:va}=u;return U<=ta&&fa>ta||U>ta&&fa<=ta||X<=va&&ma>va||X>va&&ma<=va};N._updateDockEnabledForViewSize=function(g,v){if(g&&v){var u=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},U=u.left+u.right,X=u.top+u.bottom;u=[];var fa=[];u[0]=g[0]-U;u[1]=g[1]-X;
fa[0]=v[0]-U;fa[1]=v[1]-X;({dockOptions:g}=this);this._dockingThresholdCrossed(u,fa,g.breakpoint)&&this._setDockEnabledForViewSize(g);this._setCurrentDockPosition()}};N._focusDockButtonNode=function(g){this._focusDockButton&&(this._focusDockButton=!1,g.focus())};N._closeButtonNodeUpdated=function(g){this._focusClose?(this._focusClose=!1,g.focus()):this._blurClose&&(this._blurClose=!1,g.blur())};N._mainContainerNodeUpdated=function(g){this._mainContainerNode=g;this._focusContainer?(this._focusContainer=
!1,g.focus()):this._blurContainer&&(this._blurContainer=!1,g.blur())};N._featureMenuNodeUpdated=function(g){(this._featureMenuNode=g)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,g=g.querySelectorAll("li"),g.length&&g[0].focus())};N._actionsMenuNodeUpdated=function(g){(this._actionsMenuNode=g)&&this._focusFirstAction&&(this._focusFirstAction=!1,g=g.querySelectorAll("li"),g.length&&g[0].focus())};N._focusFeatureMenuButtonNode=function(g){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=
!1,g.focus())};N._focusActionsMenuButtonNode=function(g){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,g.focus())};N._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)};N._toggleScreenLocationEnabled=function(){const {dockEnabled:g,viewModel:v}=this;v&&(v.screenLocationEnabled=v.active&&!g)};N._shouldDockAtCurrentViewSize=function(g){var v,u;g=g.breakpoint;const U=null==(v=this.viewModel)?void 0:null==(u=v.view)?void 0:
u.ui;if(!U)return!1;const {width:X,height:fa}=U;if(isNaN(X)||isNaN(fa))return!1;v=g.hasOwnProperty("width")&&X<=g.width;u=g.hasOwnProperty("height")&&fa<=g.height;return v||u};N._setDockEnabledForViewSize=function(g){g.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(g))};N._getPageText=function(g,v){return this.featureNavigationVisible?G.substitute(this.messages.pageText,{index:v+1,total:g}):null};N._destroySpinner=function(){const {_spinner:g,view:v}=this;g&&(v&&v.ui&&v.ui.remove(this._spinner,
"popup-spinner"),g.destroy(),this._spinner=null)};N._createSpinner=function(g){g&&(this._spinner=new r({view:g}),g.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};N._toggleCollapsed=function(){this.collapsed=!this.collapsed};N._close=function(){this.close();this.view&&this.view.focus()};N._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};N._toggleFeatureMenu=function(){const g=!this.featureMenuOpen;this._featureMenuOpenChanged(g);
this.actionsMenuOpen=!1;this.featureMenuOpen=g};N._toggleActionsMenu=function(){const g=!this.actionsMenuOpen;this._actionsMenuOpenChanged(g);this.featureMenuOpen=!1;this.actionsMenuOpen=g};N._triggerAction=function(g){const v=g.currentTarget.dataset.actionUid;var {allActions:u}=this.viewModel;g=u.findIndex(U=>U.uid===v);(u=u.getItemAt(g))&&"toggle"===u.type&&(u.value=!u.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(g)};N._selectFeature=function(g){g=g.currentTarget["data-feature-index"];
isNaN(g)||(this.viewModel.selectedFeatureIndex=g);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};N._next=function(){this.next()};N._previous=function(){this.previous()};e._createClass(P,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},
{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var g,v,u,U,X,fa,ma;return!!(this.selectedFeatureWidget?(null==(g=this.selectedFeatureWidget)?0:null==(v=g.viewModel)?0:v.waitingForContent)||"error"===(null==(u=this.selectedFeatureWidget)?void 0:null==(U=u.viewModel)?void 0:U.state)||(null==(X=this.selectedFeatureWidget)?0:null==(fa=X.viewModel)?0:fa.content):null==(ma=this.viewModel)?0:ma.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&
1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?
this._get("actionsMenuOpen"):!1},set:function(g){this._set("actionsMenuOpen",!!g)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||B},set:function(g){var v={...B};const u=this.get("viewModel.view.breakpoints");var U={};u&&(U.width=u.xsmall,U.height=u.xsmall);g={...v,...g};v={...v.breakpoint,...U};({breakpoint:U}=g);!0===U?
g.breakpoint=v:"object"===typeof U&&(g.breakpoint={...v,...U});this._set("dockOptions",g);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",get:function(){const {_feature:g,visibleElements:v,headingLevel:u}=this,{selectedFeatureViewModel:U}=this.viewModel,X={...v,title:!1};if(!U)return null;g?(g.viewModel=U,g.visibleElements=X):this._feature=new E({headingLevel:u+1,viewModel:U,visibleElements:X});return this._feature}}]);return P}(y.FeatureContentMixin(l));d.__decorate([m.property({readOnly:!0})],
b.prototype,"actionsMenuId",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"actionsMenuButtonId",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"featureMenuId",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"titleId",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"contentId",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"hasContent",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"featureNavigationVisible",null);d.__decorate([m.property({readOnly:!0})],
b.prototype,"collapsible",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"featureMenuVisible",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"contentCollapsed",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"dividedActions",null);d.__decorate([w.aliasOf("viewModel.actions")],b.prototype,"actions",void 0);d.__decorate([m.property()],b.prototype,"actionsMenuOpen",null);d.__decorate([m.property()],b.prototype,"alignment",void 0);d.__decorate([w.aliasOf("viewModel.autoCloseEnabled")],
b.prototype,"autoCloseEnabled",void 0);d.__decorate([w.aliasOf("viewModel.autoOpenEnabled")],b.prototype,"autoOpenEnabled",void 0);d.__decorate([w.aliasOf("viewModel.defaultPopupTemplateEnabled")],b.prototype,"defaultPopupTemplateEnabled",void 0);d.__decorate([w.aliasOf("viewModel.content")],b.prototype,"content",void 0);d.__decorate([m.property()],b.prototype,"collapsed",void 0);d.__decorate([m.property()],b.prototype,"collapseEnabled",void 0);d.__decorate([m.property({readOnly:!0})],b.prototype,
"currentAlignment",null);d.__decorate([m.property({readOnly:!0})],b.prototype,"currentDockPosition",null);d.__decorate([m.property()],b.prototype,"dockOptions",null);d.__decorate([m.property()],b.prototype,"dockEnabled",void 0);d.__decorate([w.aliasOf("viewModel.featureCount")],b.prototype,"featureCount",void 0);d.__decorate([m.property()],b.prototype,"featureMenuOpen",void 0);d.__decorate([w.aliasOf("viewModel.features")],b.prototype,"features",void 0);d.__decorate([w.aliasOf("viewModel.goToOverride")],
b.prototype,"goToOverride",void 0);d.__decorate([m.property()],b.prototype,"headingLevel",void 0);d.__decorate([w.aliasOf("viewModel.highlightEnabled")],b.prototype,"highlightEnabled",void 0);d.__decorate([w.aliasOf("viewModel.location")],b.prototype,"location",void 0);d.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);d.__decorate([m.property()],b.prototype,"maxInlineActions",void 0);d.__decorate([m.property(),q.messageBundle("esri/widgets/Popup/t9n/Popup")],
b.prototype,"messages",void 0);d.__decorate([m.property(),q.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);d.__decorate([w.aliasOf("viewModel.promises")],b.prototype,"promises",void 0);d.__decorate([w.aliasOf("viewModel.selectedFeature")],b.prototype,"selectedFeature",void 0);d.__decorate([w.aliasOf("viewModel.selectedFeatureIndex")],b.prototype,"selectedFeatureIndex",void 0);d.__decorate([m.property({readOnly:!0})],b.prototype,"selectedFeatureWidget",null);d.__decorate([m.property()],
b.prototype,"spinnerEnabled",void 0);d.__decorate([w.aliasOf("viewModel.title")],b.prototype,"title",void 0);d.__decorate([w.aliasOf("viewModel.updateLocationEnabled")],b.prototype,"updateLocationEnabled",void 0);d.__decorate([w.aliasOf("viewModel.view")],b.prototype,"view",void 0);d.__decorate([m.property({type:F}),O.vmEvent(["triggerAction","trigger-action"])],b.prototype,"viewModel",void 0);d.__decorate([w.aliasOf("viewModel.visible")],b.prototype,"visible",void 0);d.__decorate([m.property()],
b.prototype,"visibleElements",void 0);d.__decorate([f.cast("visibleElements")],b.prototype,"castVisibleElements",null);d.__decorate([t.accessibleHandler()],b.prototype,"_close",null);d.__decorate([t.accessibleHandler()],b.prototype,"_toggleDockEnabled",null);d.__decorate([t.accessibleHandler()],b.prototype,"_toggleFeatureMenu",null);d.__decorate([t.accessibleHandler()],b.prototype,"_toggleActionsMenu",null);d.__decorate([t.accessibleHandler()],b.prototype,"_triggerAction",null);d.__decorate([t.accessibleHandler()],
b.prototype,"_selectFeature",null);d.__decorate([t.accessibleHandler()],b.prototype,"_next",null);d.__decorate([t.accessibleHandler()],b.prototype,"_previous",null);return b=d.__decorate([k.subclass("esri.widgets.Popup")],b)})},"esri/core/throttle":function(){define(["exports"],function(e){function d(b,z,x,I){let Q=null,V=1E3;"number"===typeof z?(V=z,I=x):(Q=null!=z?z:null,V=x);let T=0,H;const w=()=>{T=0;b.apply(I,H)};z=(...h)=>{Q&&Q.apply(I,h);H=h;V?T||(T=setTimeout(w,V)):w()};z.remove=()=>{T&&(clearTimeout(T),
T=0)};z.forceUpdate=()=>{T&&(clearTimeout(T),w())};z.hasPendingUpdates=()=>!!T;return z}e.default=d;e.throttle=d;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ../intl/substitute".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J,t,q,O){const L={title:!0,content:!0,lastEditedInfo:!0};z=function(n){function G(B,D){B=n.call(this,B,D)||this;B._contentWidgets=[];B.graphic=null;B.defaultPopupTemplateEnabled=!1;B.headingLevel=2;B.label=void 0;B.messages=null;B.messagesCommon=null;B.messagesURIUtils=null;B.spatialReference=null;B.title=null;B.visibleElements={...L};B.map=null;B.view=null;B.viewModel=new r;return B}d._inheritsLoose(G,n);var C=G.prototype;C.initialize=function(){this.own(x.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};C.loadDependencies=function(){return new Promise((B,D)=>e(["../chunks/calcite-notice"],B,D))};C.destroy=function(){this._destroyContentWidgets()};C.castVisibleElements=function(B){return{...L,...B}};C.render=function(){var {state:B}=this.viewModel;B=q.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===B?this.renderError():"loading"===B?this.renderLoading():this.renderContentContainer());return q.tsx("div",
{class:this.classes("esri-feature","esri-widget")},B)};C.setActiveMedia=function(B,D){this.viewModel.setActiveMedia(B,D)};C.nextMedia=function(B){this.viewModel.nextMedia(B)};C.previousMedia=function(B){this.viewModel.previousMedia(B)};C.renderError=function(){const {messagesCommon:B,messages:D,visibleElements:A}=this;return q.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},A.title?q.tsx("div",{key:"error-title",slot:"title"},B.errorMessage):null,q.tsx("div",
{key:"error-message",slot:"message"},D.loadingError))};C.renderLoading=function(){return q.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},q.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};C.renderContentContainer=function(){const {visibleElements:B}=this;return B.content?q.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};C.renderTitle=function(){const {visibleElements:B,
title:D}=this;return B.title?q.tsx(y.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:D}):null};C.renderContent=function(){var B=this.viewModel.content;return B?Array.isArray(B)?B.length?q.tsx("div",{key:"content-content-elements"},B.map(this.renderContentElement,this)):null:"string"===typeof B?(B=this._contentWidgets[0],!B||B.destroyed?null:q.tsx("div",{key:"content-content"},B.render())):this.renderNodeContent(B):null};C.renderContentElement=function(B,D){const {visibleElements:A}=
this;if("boolean"!==typeof A.content&&!A.content[B.type])return null;switch(B.type){case "attachments":return this.renderAttachments(D);case "custom":return this.renderCustom(B,D);case "fields":return this.renderFields(D);case "media":return this.renderMedia(D);case "text":return this.renderText(B,D);case "expression":return this.renderExpression(D);default:return null}};C.renderAttachments=function(B){const D=this._contentWidgets[B];if(!D||D.destroyed)return null;const {state:A,attachmentInfos:K}=
D.viewModel;return"loading"===A||0<K.length?q.tsx("div",{key:this._buildKey("attachments-element",B),class:this.classes("esri-feature__content-element")},D.render()):null};C.renderExpression=function(B){const D=this._contentWidgets[B];return!D||D.destroyed?null:q.tsx("div",{key:this._buildKey("expression-element",B),class:"esri-feature__content-element"},D.render())};C.renderCustom=function(B,D){({creator:B}=B);const A=this._contentWidgets[D];return!A||A.destroyed?null:B?q.tsx("div",{key:this._buildKey("custom-element",
D),class:"esri-feature__content-element"},A.render()):null};C.renderFields=function(B){const D=this._contentWidgets[B];return!D||D.destroyed?null:q.tsx("div",{key:this._buildKey("fields-element",B),class:"esri-feature__content-element"},D.render())};C.renderMedia=function(B){const D=this._contentWidgets[B];return!D||D.destroyed?null:q.tsx("div",{key:this._buildKey("media-element",B),class:"esri-feature__content-element"},D.render())};C.renderLastEditInfo=function(){const {visibleElements:B,messages:D}=
this;var {lastEditInfo:A}=this.viewModel;if(!A||!B.lastEditedInfo)return null;const {date:K,user:P}=A;A=O.substitute("edit"===A.type?P?D.lastEditedByUser:D.lastEdited:P?D.lastCreatedByUser:D.lastCreated,{date:K,user:P});return q.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},A)};C.renderText=function(B,D){const A=this._contentWidgets[D];return!A||A.destroyed?null:B.text?q.tsx("div",{key:this._buildKey("text-element",D),class:this.classes("esri-feature__content-element",
"esri-feature__text")},A.render()):null};C._buildKey=function(B,...D){const A=this.get("viewModel.graphic.uid")||"0";D=D.join("-");return`${B}__${A}-${D}`};C._destroyContentWidget=function(B){B&&(B.viewModel=null,!B.destroyed&&B.destroy())};C._destroyContentWidgets=function(){this._contentWidgets.forEach(B=>this._destroyContentWidget(B));this._contentWidgets=[]};C._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:B,visibleElements:D}=this;var A=this.get("viewModel.content");
const {contentViewModels:K}=this.viewModel;Array.isArray(A)?A.forEach((P,N)=>{"attachments"===P.type&&(this._contentWidgets[N]=new c({displayType:P.displayType,headingLevel:D.title?B+1:B,viewModel:K[N]}));"fields"===P.type&&(this._contentWidgets[N]=new k({viewModel:K[N]}));"media"===P.type&&(this._contentWidgets[N]=new E({viewModel:K[N]}));"text"===P.type&&(this._contentWidgets[N]=new f({viewModel:K[N]}));"custom"===P.type&&(this._contentWidgets[N]=new f({viewModel:K[N]}));"expression"===P.type&&
(this._contentWidgets[N]=new m({viewModel:K[N]}))},this):(A=K[0])&&!A.destroyed&&(this._contentWidgets[0]=new f({viewModel:A}));this.scheduleRender()};return G}(l.FeatureContentMixin(h));b.__decorate([I.aliasOf("viewModel.graphic")],z.prototype,"graphic",void 0);b.__decorate([I.aliasOf("viewModel.defaultPopupTemplateEnabled")],z.prototype,"defaultPopupTemplateEnabled",void 0);b.__decorate([H.property()],z.prototype,"headingLevel",void 0);b.__decorate([H.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],z.prototype,"label",void 0);b.__decorate([H.property(),J.messageBundle("esri/widgets/Feature/t9n/Feature")],z.prototype,"messages",void 0);b.__decorate([H.property(),J.messageBundle("esri/t9n/common")],z.prototype,"messagesCommon",void 0);b.__decorate([H.property(),J.messageBundle("esri/widgets/support/t9n/uriUtils")],z.prototype,"messagesURIUtils",void 0);b.__decorate([I.aliasOf("viewModel.spatialReference")],z.prototype,"spatialReference",void 0);b.__decorate([I.aliasOf("viewModel.title")],
z.prototype,"title",void 0);b.__decorate([H.property()],z.prototype,"visibleElements",void 0);b.__decorate([T.cast("visibleElements")],z.prototype,"castVisibleElements",null);b.__decorate([I.aliasOf("viewModel.map")],z.prototype,"map",void 0);b.__decorate([I.aliasOf("viewModel.view")],z.prototype,"view",void 0);b.__decorate([H.property({type:r})],z.prototype,"viewModel",void 0);return z=b.__decorate([w.subclass("esri.widgets.Feature")],z)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k){x=function(E){function r(y,F){y=E.call(this,y,F)||this;y._featureElementInfo=null;y.attachmentsWidget=new H;y.description=null;y.displayType=null;y.graphic=null;y.headingLevel=2;y.title=null;y.viewModel=new h;return y}e._inheritsLoose(r,E);var l=r.prototype;l.initialize=function(){this._featureElementInfo=new c;b.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());b.init(this,"viewModel.graphic",y=>this.attachmentsWidget.graphic=
y)};l.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};l.render=function(){var y;const {attachmentsWidget:F}=this;return k.tsx("div",{class:"esri-feature-attachments"},null==(y=this._featureElementInfo)?void 0:y.render(),null==F?void 0:F.render())};l._setupFeatureElementInfo=function(){const {description:y,title:F,headingLevel:J}=this;this._featureElementInfo.set({description:y,title:F,headingLevel:J})};return r}(w);d.__decorate([V.property({readOnly:!0})],x.prototype,
"attachmentsWidget",void 0);d.__decorate([z.aliasOf("viewModel.description")],x.prototype,"description",void 0);d.__decorate([z.aliasOf("attachmentsWidget.displayType")],x.prototype,"displayType",void 0);d.__decorate([z.aliasOf("viewModel.graphic")],x.prototype,"graphic",void 0);d.__decorate([V.property()],x.prototype,"headingLevel",void 0);d.__decorate([z.aliasOf("viewModel.title")],x.prototype,"title",void 0);d.__decorate([V.property({type:h})],x.prototype,"viewModel",void 0);return x=d.__decorate([T.subclass("esri.widgets.Feature.FeatureAttachments")],
x)})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),function(e,d,b,z,x,I,Q,V){z=function(T){function H(w){w=T.call(this,w)||this;w.description=null;w.title=
null;return w}e._inheritsLoose(H,T);return H}(V);d.__decorate([b.property()],z.prototype,"description",void 0);d.__decorate([b.property()],z.prototype,"title",void 0);return z=d.__decorate([Q.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],z)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../../core/Logger ../../support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h){z=function(c){function f(k,E){k=c.call(this,k,E)||this;k.description=null;k.headingLevel=2;k.title=null;return k}e._inheritsLoose(f,c);var m=f.prototype;m.render=function(){return h.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};m.renderTitle=function(){const {title:k}=this;return k?h.tsx(T.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},k):null};m.renderDescription=function(){const {description:k}=
this;return k?h.tsx("div",{key:"description",class:"esri-feature-element-info__description"},k):null};return f}(V);d.__decorate([b.property()],z.prototype,"description",void 0);d.__decorate([b.property()],z.prototype,"headingLevel",void 0);d.__decorate([b.property()],z.prototype,"title",void 0);return z=d.__decorate([Q.subclass("esri.widgets.Feature.support.FeatureElementInfo")],z)})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c){z=function(f){function m(E,r){E=f.call(this,E,r)||this;E.creator=null;E.graphic=null;E.viewModel=null;E._addTargetToAnchors=l=>{Array.from(l.querySelectorAll("a")).forEach(y=>{w.shouldOpenInNewTab(y.href)&&!y.hasAttribute("target")&&y.setAttribute("target","_blank")})};return E}e._inheritsLoose(m,f);var k=m.prototype;k.renderLoading=function(){return c.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},c.tsx("div",{class:"esri-feature-content__loader"}))};
k.renderCreated=function(){var E;const r=null==(E=this.viewModel)?void 0:E.created;return r?r instanceof HTMLElement?c.tsx("div",{key:r,bind:r,afterCreate:this._attachToNode}):h.isWidget(r)?c.tsx("div",{key:r},!r.destroyed&&r.render()):c.tsx("div",{key:r,innerHTML:r,afterCreate:this._addTargetToAnchors}):null};k.render=function(){var E;const r=null==(E=this.viewModel)?void 0:E.state;return c.tsx("div",{class:"esri-feature-content"},"loading"===r?this.renderLoading():this.renderCreated())};k._attachToNode=
function(E){E.appendChild(this)};return m}(T);d.__decorate([b.aliasOf("viewModel.creator")],z.prototype,"creator",void 0);d.__decorate([b.aliasOf("viewModel.graphic")],z.prototype,"graphic",void 0);d.__decorate([Q.property({type:H})],z.prototype,"viewModel",void 0);return z=d.__decorate([V.subclass("esri.widgets.Feature.FeatureContent")],z)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h){z=function(c){function f(k){var E=c.call(this,k)||this;E._loadingPromise=null;E.created=null;E.creator=null;E.destroyer=null;E.graphic=null;E.handles.add(I.init(e._assertThisInitialized(E),"creator",r=>{E._destroyContent();E._createContent(r)}));return E}e._inheritsLoose(f,c);var m=f.prototype;m.destroy=function(){this._destroyContent()};m._destroyContent=function(){const {created:k,graphic:E,destroyer:r}=this;k&&(h.graphicCallback(r,{graphic:E}).catch(()=>null),
this._set("created",null))};m._createContent=function(){var k=e._asyncToGenerator(function*(E){var {graphic:r}=this;this._loadingPromise=E=h.graphicCallback(E,{graphic:r}).catch(()=>null);this.notifyChange("state");r=yield E;E===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))});return function(E){return k.apply(this,arguments)}}();e._createClass(f,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return f}(x.HandleOwnerMixin(z));
d.__decorate([Q.property({readOnly:!0})],z.prototype,"created",void 0);d.__decorate([Q.property()],z.prototype,"creator",void 0);d.__decorate([Q.property()],z.prototype,"destroyer",void 0);d.__decorate([Q.property({type:b})],z.prototype,"graphic",void 0);d.__decorate([Q.property({readOnly:!0})],z.prototype,"state",null);return z=d.__decorate([w.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],z)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k){x=function(E){function r(y,F){y=E.call(this,y,F)||this;y.viewModel=new c;return y}e._inheritsLoose(r,E);var l=r.prototype;l.initialize=function(){b.init(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())};l.destroy=function(){var y;null==(y=this._contentWidget)?void 0:y.destroy();this._contentWidget=null};l.renderLoading=function(){return k.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},k.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};l.render=function(){var y;const {state:F}=this.viewModel;return k.tsx("div",{class:"esri-feature-expression"},"loading"===F?this.renderLoading():"disabled"===F?null:null==(y=this._contentWidget)?void 0:y.render())};l._setupExpressionWidget=function(){var y;const {contentElementViewModel:F,contentElement:J}=this.viewModel,t=null==J?void 0:J.type;null==(y=this._contentWidget)?void 0:y.destroy();this._contentWidget=null;this._contentWidget=F?"fields"===t?new w({viewModel:F}):
"media"===t?new h({viewModel:F}):"text"===t?new H({viewModel:F}):null:null;this.scheduleRender()};return r}(T);d.__decorate([z.property({type:c})],x.prototype,"viewModel",void 0);return x=d.__decorate([V.subclass("esri.widgets.Feature.FeatureExpression")],x)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E){x=function(r){function l(F,J){F=r.call(this,F,J)||this;F._featureElementInfo=null;F.attributes=null;F.description=null;F.expressionInfos=null;F.fieldInfos=null;F.title=null;F.viewModel=new w;F.messages=null;F.messagesURIUtils=null;return F}e._inheritsLoose(l,r);var y=l.prototype;y.initialize=function(){this._featureElementInfo=new h;b.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};y.destroy=function(){this._featureElementInfo.destroy()};
y.renderFieldInfo=function(F,J){var {attributes:t}=this.viewModel;const q=F.fieldName,O=F.label||q;t=t?null==t[q]?"":t[q]:"";F=!(!F.format||!F.format.dateFormat);t="number"!==typeof t||F?c.autoLink(this.messagesURIUtils,t):this._forceLTR(t);F={["esri-feature-fields__field-data--date"]:F};return E.tsx("tr",{key:`fields-element-info-row-${q}-${J}`},E.tsx("th",{key:`fields-element-info-row-header-${q}-${J}`,class:"esri-feature-fields__field-header",innerHTML:O}),E.tsx("td",{key:`fields-element-info-row-data-${q}-${J}`,
class:this.classes("esri-feature-fields__field-data",F),innerHTML:t}))};y.renderFields=function(){const {formattedFieldInfos:F}=this.viewModel;return null!=F&&F.length?E.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},E.tsx("tbody",null,F.map((J,t)=>this.renderFieldInfo(J,t)))):null};y.render=function(){var F;return E.tsx("div",{class:"esri-feature-fields"},null==(F=this._featureElementInfo)?void 0:F.render(),this.renderFields())};y._setupFeatureElementInfo=function(){const {description:F,
title:J}=this;this._featureElementInfo.set({description:F,title:J})};y._forceLTR=function(F){return`&lrm;${F}`};return l}(H);d.__decorate([z.aliasOf("viewModel.attributes")],x.prototype,"attributes",void 0);d.__decorate([z.aliasOf("viewModel.description")],x.prototype,"description",void 0);d.__decorate([z.aliasOf("viewModel.expressionInfos")],x.prototype,"expressionInfos",void 0);d.__decorate([z.aliasOf("viewModel.fieldInfos")],x.prototype,"fieldInfos",void 0);d.__decorate([z.aliasOf("viewModel.title")],
x.prototype,"title",void 0);d.__decorate([V.property({type:w})],x.prototype,"viewModel",void 0);d.__decorate([V.property(),m.messageBundle("esri/widgets/Feature/t9n/Feature")],x.prototype,"messages",void 0);d.__decorate([V.property(),m.messageBundle("esri/widgets/support/t9n/uriUtils")],x.prototype,"messagesURIUtils",void 0);return x=d.__decorate([T.subclass("esri.widgets.Feature.FeatureFields")],x)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w){b=function(h){function c(f){f=h.call(this,f)||this;f.attributes=null;f.expressionInfos=null;f.description=null;f.fieldInfos=null;f.title=null;return f}e._inheritsLoose(c,h);e._createClass(c,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:f,fieldInfos:m}=this,k=[];null==m?void 0:m.forEach(E=>{if(!E.hasOwnProperty("visible")||E.visible)E=E.clone(),E.label=w.getFieldInfoLabel(E,f),k.push(E)});return k}}]);return c}(b);d.__decorate([z.property()],b.prototype,
"attributes",void 0);d.__decorate([z.property({type:[T]})],b.prototype,"expressionInfos",void 0);d.__decorate([z.property()],b.prototype,"description",void 0);d.__decorate([z.property({type:[H]})],b.prototype,"fieldInfos",void 0);d.__decorate([z.property({readOnly:!0})],b.prototype,"formattedFieldInfos",null);d.__decorate([z.property()],b.prototype,"title",void 0);return b=d.__decorate([V.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],b)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(e,d){function b(x){let I=null;z.some(Q=>{Q.pattern.test(x)&&(I=Q);return!!I});return I}const z=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];e.autoLink=function(x,I){if("string"!==typeof I||!I)return I;const Q=b(I);if(!Q)return I;const V=I.match(Q.pattern);
x=d.replace(d.replace(Q.label,{messages:x,hierPart:V&&V[2]}),{appName:Q.appName});return I.replace(Q.pattern,`<a${Q.target?` target="${Q.target}"`:""} href="$1"${"_blank"===Q.target?' rel\x3d"noreferrer"':""}>${x}</a>`)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l){I=function(y){function F(t,q){var O=y.call(this,t,q)||this;O._refreshTimer=null;O._refreshIntervalInfo=null;O._featureElementInfo=null;O.attributes=null;O.activeMediaInfoIndex=null;O.description=null;O.fieldInfoMap=null;O.layer=null;O.mediaInfos=null;O.popupTemplate=null;O.relatedInfos=null;O.title=null;O.viewModel=new h;O.messages=null;O._getChartDependencies=function(){var L=e._asyncToGenerator(function*(n){const G=yield m.loadChartsModule();var {viewModel:C}=
e._assertThisInitialized(O);C&&({activeMediaInfo:C}=C,O._renderChart({chartDiv:n,mediaInfo:C,chartsModule:G}))});return function(n){return L.apply(this,arguments)}}();return O}e._inheritsLoose(F,y);var J=F.prototype;J.initialize=function(){this._featureElementInfo=new c;this.own(z.init(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),z.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};J.destroy=function(){this._clearMediaRefreshTimer();
this._featureElementInfo.destroy()};J.render=function(){var t;return l.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(t=this._featureElementInfo)?void 0:t.render(),this.renderMedia())};J.renderMedia=function(){const {formattedMediaInfoCount:t}=this.viewModel;return t?l.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};J.renderImageMediaInfo=
function(t){var {_refreshIntervalInfo:q}=this;const {activeMediaInfoIndex:O,formattedMediaInfoCount:L}=this.viewModel,{value:n,refreshInterval:G,altText:C,title:B,type:D}=t,{sourceURL:A,linkURL:K}=n;t=f.shouldOpenInNewTab(K)?"_blank":"_self";const P="_blank"===t?"noreferrer":"";q=G?q:null;q=l.tsx("img",{alt:C||B,key:`media-${D}-${O}-${L}-${q?q.timestamp:0}`,src:q?q.sourceURL:A});return(t=K?l.tsx("a",{title:B,href:K,rel:P,target:t},q):null)?t:q};J.renderChartMediaInfo=function(t){const {activeMediaInfoIndex:q,
formattedMediaInfoCount:O}=this.viewModel;return l.tsx("div",{key:`media-${t.type}-${q}-${O}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};J.renderMediaInfoType=function(){const {activeMediaInfo:t}=this.viewModel;return t?"image"===t.type?this.renderImageMediaInfo(t):-1!==t.type.indexOf("chart")?this.renderChartMediaInfo(t):null:null};J.renderMediaInfo=function(){var {activeMediaInfo:t}=this.viewModel;if(!t)return null;const q=t.title?l.tsx("div",{key:"media-title",
class:"esri-feature-media__item-title",innerHTML:t.title}):null;t=t.caption?l.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:t.caption}):null;return l.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},l.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),q,t)};J.renderMediaPageButton=function(t){if(2>this.viewModel.formattedMediaInfoCount)return null;const q=(t="previous"===t)?this.messages.previous:
this.messages.next,O=t?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),L=t?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),n=t?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):
this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return l.tsx("button",{type:"button",key:t?"media-previous":"media-next",title:q,"aria-label":q,tabIndex:0,class:O,bind:this,onclick:t?this._previous:this._next},l.tsx("span",{"aria-hidden":"true",class:L}),l.tsx("span",{"aria-hidden":"true",class:n}))};J._setupFeatureElementInfo=function(){const {description:t,title:q}=this;this._featureElementInfo.set({description:t,title:q})};J._next=function(){this.viewModel.next()};
J._previous=function(){this.viewModel.previous()};J._handleMediaKeyup=function(t){const q=b.eventKey(t);"ArrowLeft"===q&&(t.stopPropagation(),this.viewModel.previous());"ArrowRight"===q&&(t.stopPropagation(),this.viewModel.next())};J._renderChart=function(t){const {chartsModule:q,chartDiv:O,mediaInfo:L}=t,{value:n,type:G}=L,{am4core:C}=q,B=m.getColorSet(C);k.isDarkTheme()&&C.useTheme(q.am4themes_dark);C.useTheme(q.am4themes_animated);C.useTheme(function(D){D instanceof C.ColorSet&&B&&(D.list=B)});
t="pie-chart"===G?this._createPieChart(t):this._createXYChart(t);O.setAttribute("aria-label",L.altText||L.title);t.data=n.series.map(D=>({tooltip:D.tooltip,value:D.value})).filter(D=>"pie-chart"===G?0<D.value:!0)};J._customizeChartTooltip=function(t,q){t.label.wrap=!0;t.label.maxWidth=200;t.autoTextColor=!1;t.getFillFromObject=!1;t.label.fill=q.color("#ffffff");t.background.fill=q.color({r:0,g:0,b:0,a:.7})};J._createPieChart=function(t){const {chartDiv:q,chartsModule:O}=t,{am4core:L,am4charts:n}=
O;t=L.create(q,n.PieChart);t.rtl=k.isRTL(this.container);const G=t.series.push(new n.PieSeries);G.labels.template.disabled=!0;G.ticks.template.disabled=!0;G.dataFields.value="value";G.dataFields.category="tooltip";this._customizeChartTooltip(G.tooltip,L);return t};J._getMinSeriesValue=function(t){let q=0;t.forEach(O=>q=Math.min(O.value,q));return q};J._createColumnChart=function(t,q){const {chartsModule:O,mediaInfo:L}=q;({value:q}=L);const {am4core:n,am4charts:G}=O,C=t.xAxes.push(new G.CategoryAxis);
C.dataFields.category="tooltip";C.renderer.labels.template.disabled=!0;this._customizeChartTooltip(C.tooltip,n);C.tooltip.events.on("sizechanged",()=>{C.tooltip.dy=-C.tooltip.contentHeight});var B=t.yAxes.push(new G.ValueAxis);const D=B.renderer.labels.template;B.renderer.minLabelPosition=.05;B.renderer.maxLabelPosition=.95;B.min=this._getMinSeriesValue(q.series);this._customizeChartTooltip(B.tooltip,n);D.wrap=!0;B=t.series.push(new G.ColumnSeries);B.dataFields.valueY="value";B.dataFields.categoryX=
"tooltip";t.cursor=new G.XYCursor;15<q.series.length&&(t.scrollbarX=new n.Scrollbar)};J._createBarChart=function(t,q){const {chartsModule:O,mediaInfo:L}=q;({value:q}=L);const {am4core:n,am4charts:G}=O,C=t.yAxes.push(new G.CategoryAxis);C.dataFields.category="tooltip";C.renderer.inversed=!0;C.renderer.labels.template.disabled=!0;this._customizeChartTooltip(C.tooltip,n);C.tooltip.events.on("sizechanged",()=>{C.tooltip.dx=C.tooltip.contentWidth});var B=t.xAxes.push(new G.ValueAxis);const D=B.renderer.labels.template;
B.renderer.minLabelPosition=.05;B.renderer.maxLabelPosition=.95;B.min=this._getMinSeriesValue(q.series);this._customizeChartTooltip(B.tooltip,n);D.wrap=!0;B=t.series.push(new G.ColumnSeries);B.dataFields.valueX="value";B.dataFields.categoryY="tooltip";t.cursor=new G.XYCursor;15<q.series.length&&(t.scrollbarY=new n.Scrollbar)};J._createLineChart=function(t,q){const {chartsModule:O,mediaInfo:L}=q;({value:q}=L);const {am4core:n,am4charts:G}=O,C=t.xAxes.push(new G.CategoryAxis);C.dataFields.category=
"tooltip";C.renderer.labels.template.disabled=!0;this._customizeChartTooltip(C.tooltip,n);C.tooltip.events.on("sizechanged",()=>{C.tooltip.dy=-C.tooltip.contentHeight});var B=t.yAxes.push(new G.ValueAxis);const D=B.renderer.labels.template;B.renderer.minLabelPosition=.05;B.renderer.maxLabelPosition=.95;B.min=this._getMinSeriesValue(q.series);this._customizeChartTooltip(B.tooltip,n);D.wrap=!0;B=t.series.push(new G.LineSeries);B.dataFields.categoryX="tooltip";B.dataFields.valueY="value";t.cursor=new G.XYCursor;
15<q.series.length&&(t.scrollbarX=new n.Scrollbar)};J._createXYChart=function(t){const {chartDiv:q,chartsModule:O,mediaInfo:L}=t,{type:n}=L,{am4core:G,am4charts:C}=O,B=G.create(q,C.XYChart);B.rtl=k.isRTL(this.container);"column-chart"===n&&this._createColumnChart(B,t);"bar-chart"===n&&this._createBarChart(B,t);"line-chart"===n&&this._createLineChart(B,t);return B};J._clearMediaRefreshTimer=function(){const {_refreshTimer:t}=this;t&&(clearTimeout(t),this._refreshTimer=null)};J._updateMediaInfoTimestamp=
function(t){const q=Date.now();this._refreshIntervalInfo={timestamp:q,sourceURL:this._getImageSource(t,q)};this.scheduleRender()};J._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:t}=this.viewModel;t&&"image"===t.type&&t.refreshInterval&&this._setRefreshTimeout(t)};J._setRefreshTimeout=function(t){const {refreshInterval:q,value:O}=t;q&&(t=6E4*q,this._updateMediaInfoTimestamp(O.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(O.sourceURL)},
t))};J._getImageSource=function(t,q){const O=-1!==t.indexOf("?")?"\x26":"?",[L,n=""]=t.split("#");return`${L}${O}timestamp=${q}${n?"#":""}${n}`};return F}(w);d.__decorate([x.aliasOf("viewModel.attributes")],I.prototype,"attributes",void 0);d.__decorate([x.aliasOf("viewModel.activeMediaInfoIndex")],I.prototype,"activeMediaInfoIndex",void 0);d.__decorate([x.aliasOf("viewModel.description")],I.prototype,"description",void 0);d.__decorate([x.aliasOf("viewModel.fieldInfoMap")],I.prototype,"fieldInfoMap",
void 0);d.__decorate([x.aliasOf("viewModel.layer")],I.prototype,"layer",void 0);d.__decorate([x.aliasOf("viewModel.mediaInfos")],I.prototype,"mediaInfos",void 0);d.__decorate([x.aliasOf("viewModel.popupTemplate")],I.prototype,"popupTemplate",void 0);d.__decorate([x.aliasOf("viewModel.relatedInfos")],I.prototype,"relatedInfos",void 0);d.__decorate([x.aliasOf("viewModel.title")],I.prototype,"title",void 0);d.__decorate([T.property({type:h})],I.prototype,"viewModel",void 0);d.__decorate([T.property(),
E.messageBundle("esri/widgets/Feature/t9n/Feature")],I.prototype,"messages",void 0);return I=d.__decorate([H.subclass("esri.widgets.Feature.FeatureMedia")],I)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h){b=function(c){function f(k){k=c.call(this,k)||this;k.activeMediaInfoIndex=0;k.attributes=null;k.description=null;k.fieldInfoMap=null;k.formattedAttributes=null;k.expressionAttributes=null;k.layer=null;k.mediaInfos=null;k.popupTemplate=null;k.relatedInfos=null;k.title=null;return k}e._inheritsLoose(f,c);var m=f.prototype;m.setActiveMedia=function(k){this._setContentElementMedia(k)};m.next=function(){this._pageContentElementMedia(1)};m.previous=function(){this._pageContentElementMedia(-1)};
m._setContentElementMedia=function(k){const {formattedMediaInfoCount:E}=this;this.activeMediaInfoIndex=(k+E)%E};m._pageContentElementMedia=function(k){const {activeMediaInfoIndex:E}=this;this._setContentElementMedia(E+k)};m._formatMediaInfos=function(){const {attributes:k,mediaInfos:E,formattedAttributes:r,expressionAttributes:l,fieldInfoMap:y,layer:F}=this;return null==E?void 0:E.map(J=>{J=null==J?void 0:J.clone();if(!J)return null;J.title=w.substituteFieldsInLinksAndAttributes({attributes:k,fieldInfoMap:y,
globalAttributes:r,expressionAttributes:l,layer:F,text:J.title});J.caption=w.substituteFieldsInLinksAndAttributes({attributes:k,fieldInfoMap:y,globalAttributes:r,expressionAttributes:l,layer:F,text:J.caption});J.altText=w.substituteFieldsInLinksAndAttributes({attributes:k,fieldInfoMap:y,globalAttributes:r,expressionAttributes:l,layer:F,text:J.altText});if("image"===J.type){var {value:t}=J;this._setImageValue({value:t,formattedAttributes:r,layer:F});return J.value.sourceURL?J:void 0}return"pie-chart"===
J.type||"line-chart"===J.type||"column-chart"===J.type||"bar-chart"===J.type?({value:t}=J,this._setChartValue({value:t,chartType:J.type,attributes:k,formattedAttributes:r,layer:F}),J):null}).filter(Boolean)};m._setImageValue=function(k){const {fieldInfoMap:E}=this,{value:r,formattedAttributes:l,layer:y}=k,{linkURL:F,sourceURL:J}=r;J&&(k=w.fixTokens(J,y),r.sourceURL=w.substituteAttributes({formattedAttributes:l,template:k,fieldInfoMap:E}));F&&(k=w.fixTokens(F,y),r.linkURL=w.substituteAttributes({formattedAttributes:l,
template:k,fieldInfoMap:E}))};m._setChartValue=function(k){const {value:E,attributes:r,formattedAttributes:l,chartType:y,layer:F}=k,{popupTemplate:J,relatedInfos:t}=this,{fields:q,normalizeField:O}=E;E.fields=w.getFixedFieldNames(q,F);O&&(E.normalizeField=w.getFixedFieldName(O,F));if(q.some(n=>!!(null!=l[n]||w.isRelatedField(n)&&t.size))){var L=null==J?void 0:J.fieldInfos;q.forEach(n=>{w.isRelatedField(n)?E.series=[...E.series,...this._getRelatedChartInfos({fieldInfos:L,fieldName:n,formattedAttributes:l,
chartType:y,value:E})]:(n=this._getChartOption({value:E,attributes:r,chartType:y,formattedAttributes:l,fieldName:n,fieldInfos:L}),E.series.push(n))})}};m._getRelatedChartInfos=function(k){var E;const {fieldInfos:r,fieldName:l,formattedAttributes:y,chartType:F,value:J}=k,t=[];k=h.getRelatedFieldInfo(l);const {layerId:q,fieldName:O}=k;k=null==(E=this.relatedInfos)?void 0:E.get(q.toString());if(!k)return t;const {relatedFeatures:L,relation:n}=k;if(!n||!L)return t;({cardinality:E}=n);L.forEach(G=>{const {attributes:C}=
G;C&&Object.keys(C).forEach(B=>{B===O&&t.push(this._getChartOption({value:J,attributes:C,formattedAttributes:y,fieldName:l,chartType:F,relatedFieldName:B,fieldInfos:r}))})});return"one-to-many"===E||"many-to-many"===E?t:[t[0]]};m._getTooltip=function({label:k,value:E,chartType:r}){return"pie-chart"===r?k:`${k}: ${E}`};m._getChartOption=function(k){const {value:E,attributes:r,formattedAttributes:l,fieldName:y,relatedFieldName:F,fieldInfos:J,chartType:t}=k;var {layer:q}=this;const {normalizeField:O,
tooltipField:L}=E;var n=O?w.isRelatedField(O)?r[h.getRelatedFieldInfo(O).fieldName]:r[O]:null;k=F&&void 0!==r[F]?r[F]:void 0!==r[y]?r[y]:l[y];const G=void 0===k?null:k&&n?k/n:k;k=new H({value:G});if(w.isRelatedField(y)){var C=h.getRelatedFieldInfo(y);var B=h.getRelatedFieldInfo(L);B=B?B.fieldName:null;q=w.formatValueToFieldInfo(G,{fieldInfos:J,fieldName:F,layer:q,preventPlacesFormatting:!!n});C=C?C.label||C.fieldName:F;k.tooltip=this._getTooltip({label:B&&void 0!==r[B]?r[B]:C,value:q,chartType:t});
return k}n=w.getFieldInfo(J,y);q=w.getFixedFieldName(y,q);n=L&&void 0!==l[L]?l[L]:w.getFieldInfoLabel(n||new T({fieldName:q}),null==(C=this.popupTemplate)?void 0:C.expressionInfos);k.tooltip=this._getTooltip({label:n,value:l[q],chartType:t});return k};e._createClass(f,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);
return f}(b);d.__decorate([z.property()],b.prototype,"activeMediaInfoIndex",void 0);d.__decorate([z.property({readOnly:!0})],b.prototype,"activeMediaInfo",null);d.__decorate([z.property()],b.prototype,"attributes",void 0);d.__decorate([z.property()],b.prototype,"description",void 0);d.__decorate([z.property()],b.prototype,"fieldInfoMap",void 0);d.__decorate([z.property()],b.prototype,"formattedAttributes",void 0);d.__decorate([z.property()],b.prototype,"expressionAttributes",void 0);d.__decorate([z.property({readOnly:!0})],
b.prototype,"formattedMediaInfos",null);d.__decorate([z.property()],b.prototype,"layer",void 0);d.__decorate([z.property({readOnly:!0})],b.prototype,"formattedMediaInfoCount",null);d.__decorate([z.property()],b.prototype,"mediaInfos",void 0);d.__decorate([z.property()],b.prototype,"popupTemplate",void 0);d.__decorate([z.property()],b.prototype,"relatedInfos",void 0);d.__decorate([z.property()],b.prototype,"title",void 0);return b=d.__decorate([V.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],
b)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),function(e,d,b,z,x,I,Q,V,T,H,w,h){function c(t,q){if(!q.relationships)return null;let O=null;
({relationships:q}=q);q.some(L=>L.id===parseInt(t,10)?(O=L,!0):!1);return O}function f({originRelationship:t,relationships:q,layerId:O}){let L;q&&q.some(n=>{`${n.relatedTableId}`===O&&n.id===t.id&&(L=n);return!!L});return L}function m(t,q){q=q.toLowerCase();for(const O in t)if(O.toLowerCase()===q)return t[O];return null}function k(t,q,O,L){const n=new T;n.outFields=["*"];n.relationshipId="number"===typeof q.id?q.id:parseInt(q.id,10);n.objectIds=[t.attributes[O.objectIdField]];return O.queryRelatedFeatures(n,
L)}function E(t,q,O){let L=0;const n=[];for(;L<q.length;)n.push(`${t} IN (${q.slice(L,O+L)})`),L+=O;return n.join(" OR ")}function r(t,q,O,L){return l.apply(this,arguments)}function l(){l=d._asyncToGenerator(function*(t,q,O,L){var n=O.layerId.toString();const {layerInfo:G,queryTask:C,relation:B,relatedFields:D,outStatistics:A}=q;n=f({originRelationship:B,relationships:G.relationships,layerId:n});if(n.relationshipTableId&&n.keyFieldInRelationshipTable){O=(yield k(t,n,O,L))[t.attributes[O.objectIdField]];
if(!O)return null;const K=O.features.map(P=>P.attributes[G.objectIdField]);if(0<(null==A?void 0:A.length)&&G.supportsStatistics)return q=new V,q.where=E(G.objectIdField,K,1E3),q.outFields=D,q.outStatistics=A,q={features:Promise.resolve(O),statsFeatures:C.execute(q)},I.eachAlways(q)}return(n=null==n?void 0:n.keyField)?(O=Q.isNumericField(y(G.fields,n)),t=m(t.attributes,B.keyField),n=O?`${n}=${t}`:`${n}='${t}'`,t=C.execute(new V({where:n,outFields:q.relatedFields}),L),q=q.outStatistics&&0<q.outStatistics.length&&
G.supportsStatistics?C.execute(new V({where:n,outFields:q.relatedFields,outStatistics:q.outStatistics}),L):null,L={features:t},q&&(L.statsFeatures=q),I.eachAlways(L)):null});return l.apply(this,arguments)}function y(t,q){if(null!=t){q=q.toLowerCase();for(const O of t)if(O&&O.name.toLowerCase()===q)return O}return null}const F=x.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),J=new Map;e.createRelatedInfo=function(t,q){if(t=c(t,q)){var O=`${q.url}/${t.relatedTableId}`;q=new w({url:O,
sourceSpatialReference:q.spatialReference});return{url:O,queryTask:q,relation:t,relatedFields:[],outStatistics:[]}}};e.getDestinationRelation=f;e.getRelatedFieldInfo=function(t){if(!h.isRelatedField(t))return null;const [q,O]=t.split("/").slice(1);return{layerId:q,fieldName:O}};e.queryLayerInfos=function({relatedInfos:t,layer:q},O){const L={};t.forEach((n,G)=>{({relation:n}=n);if(!n)throw G=new z("relation-required","A relation is required on a layer to retrieve related records."),F.error(G),G;({relatedTableId:n}=
n);if("number"!==typeof n)throw G=new z("A related table ID is required on a layer to retrieve related records."),F.error(G),G;n=`${q.url}/${n}`;const C=J.get(n),B=C?C:b(n,{query:{f:"json"},signal:O&&O.signal});C||J.set(n,B);L[G]=B});return I.eachAlways(L)};e.queryRelatedFeatures=function({graphic:t,relatedInfos:q,layer:O},L){const n={};q.forEach((G,C)=>{G.layerInfo&&(n[C]=r(t,G,O,L))});return I.eachAlways(n)};e.setRelatedFeatures=function(t,q){if(q&&t){var {features:O,statsFeatures:L}=t;t=O&&O.value;
q.relatedFeatures=t?t.features:[];t=L&&L.value;q.relatedStatsFeatures=t?t.features:[]}};e.updateRelatedInfo=function({relatedInfo:t,fieldName:q,fieldInfo:O}){t.relatedFields.push(q);O.statisticType&&(q=new H({statisticType:O.statisticType,onStatisticField:q,outStatisticFieldName:q}),t.outStatistics.push(q))};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(e,d,b,z,x,I){function Q(c){if(!c)return"en-us";if(H.has(c.toLowerCase()))return c.toLowerCase();{c=c.split("-")[0].toLowerCase();let m=null;for(f of H.keys())if(f.startsWith(c)){m=f;break}var f=m}return f||"en-us"}function V(){V=b._asyncToGenerator(function*(c=I.getLocale()){c=Q(c);if(w&&c===h)return w;w=(new Promise((f,m)=>e(["../../chunks/index"],f,m))).then(f=>f.index);h=c;try{const [f,m]=yield Promise.all([w,H.get(h)()]);h===c&&(f.am4core.options.defaultLocale=m.default);f.am4core.options.suppressWarnings=
!0;f.am4core.options.autoDispose=!0}catch{return h=w=null}return w});return V.apply(this,arguments)}z="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var T=[{name:"default",colors:[].concat(z.slice(30,39),z.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const H=new Map([["ar",()=>(new Promise((c,f)=>e(["../../chunks/ar2"],c,f))).then(c=>c.ar)],["bg-bg",()=>(new Promise((c,
f)=>e(["../../chunks/bg_BG"],c,f))).then(c=>c.bg_BG)],["bs-ba",()=>(new Promise((c,f)=>e(["../../chunks/bs_BA"],c,f))).then(c=>c.bs_BA)],["ca-es",()=>(new Promise((c,f)=>e(["../../chunks/ca_ES"],c,f))).then(c=>c.ca_ES)],["cs-cz",()=>(new Promise((c,f)=>e(["../../chunks/cs_CZ"],c,f))).then(c=>c.cs_CZ)],["da-dk",()=>(new Promise((c,f)=>e(["../../chunks/da_DK"],c,f))).then(c=>c.da_DK)],["de-de",()=>(new Promise((c,f)=>e(["../../chunks/de_DE"],c,f))).then(c=>c.de_DE)],["de-ch",()=>(new Promise((c,f)=>
e(["../../chunks/de_CH"],c,f))).then(c=>c.de_CH)],["el-gr",()=>(new Promise((c,f)=>e(["../../chunks/el_GR"],c,f))).then(c=>c.el_GR)],["en-us",()=>(new Promise((c,f)=>e(["../../chunks/en_US"],c,f))).then(c=>c.en_US)],["en-ca",()=>(new Promise((c,f)=>e(["../../chunks/en_CA"],c,f))).then(c=>c.en_CA)],["es-es",()=>(new Promise((c,f)=>e(["../../chunks/es_ES"],c,f))).then(c=>c.es_ES)],["et-ee",()=>(new Promise((c,f)=>e(["../../chunks/et_EE"],c,f))).then(c=>c.et_EE)],["fi-fi",()=>(new Promise((c,f)=>e(["../../chunks/fi_FI"],
c,f))).then(c=>c.fi_FI)],["fr-fr",()=>(new Promise((c,f)=>e(["../../chunks/fr_FR"],c,f))).then(c=>c.fr_FR)],["he-il",()=>(new Promise((c,f)=>e(["../../chunks/he_IL"],c,f))).then(c=>c.he_IL)],["hr-hr",()=>(new Promise((c,f)=>e(["../../chunks/hr_HR"],c,f))).then(c=>c.hr_HR)],["hu-hu",()=>(new Promise((c,f)=>e(["../../chunks/hu_HU"],c,f))).then(c=>c.hu_HU)],["id-id",()=>(new Promise((c,f)=>e(["../../chunks/id_ID"],c,f))).then(c=>c.id_ID)],["it-it",()=>(new Promise((c,f)=>e(["../../chunks/it_IT"],c,f))).then(c=>
c.it_IT)],["ja-jp",()=>(new Promise((c,f)=>e(["../../chunks/ja_JP"],c,f))).then(c=>c.ja_JP)],["ko-kr",()=>(new Promise((c,f)=>e(["../../chunks/ko_KR"],c,f))).then(c=>c.ko_KR)],["lt-lt",()=>(new Promise((c,f)=>e(["../../chunks/lt_LT"],c,f))).then(c=>c.lt_LT)],["lv-lv",()=>(new Promise((c,f)=>e(["../../chunks/lv_LV"],c,f))).then(c=>c.lv_LV)],["nb-no",()=>(new Promise((c,f)=>e(["../../chunks/nb_NO"],c,f))).then(c=>c.nb_NO)],["nl-nl",()=>(new Promise((c,f)=>e(["../../chunks/nl_NL"],c,f))).then(c=>c.nl_NL)],
["pl-pl",()=>(new Promise((c,f)=>e(["../../chunks/pl_PL"],c,f))).then(c=>c.pl_PL)],["pt-br",()=>(new Promise((c,f)=>e(["../../chunks/pt_BR"],c,f))).then(c=>c.pt_BR)],["pt-pt",()=>(new Promise((c,f)=>e(["../../chunks/pt_PT"],c,f))).then(c=>c.pt_PT)],["ro-ro",()=>(new Promise((c,f)=>e(["../../chunks/ro_RO"],c,f))).then(c=>c.ro_RO)],["ru-ru",()=>(new Promise((c,f)=>e(["../../chunks/ru_RU"],c,f))).then(c=>c.ru_RU)],["sk-sk",()=>(new Promise((c,f)=>e(["../../chunks/sk_SK"],c,f))).then(c=>c.sk_SK)],["sl-sl",
()=>(new Promise((c,f)=>e(["../../chunks/sl_SL"],c,f))).then(c=>c.sl_SL)],["sr-rs",()=>(new Promise((c,f)=>e(["../../chunks/sr_RS"],c,f))).then(c=>c.sr_RS)],["sv-se",()=>(new Promise((c,f)=>e(["../../chunks/sv_SE"],c,f))).then(c=>c.sv_SE)],["th-th",()=>(new Promise((c,f)=>e(["../../chunks/th_TH"],c,f))).then(c=>c.th_TH)],["tr-tr",()=>(new Promise((c,f)=>e(["../../chunks/tr_TR"],c,f))).then(c=>c.tr_TR)],["uk-ua",()=>(new Promise((c,f)=>e(["../../chunks/uk_UA"],c,f))).then(c=>c.uk_UA)],["vi-vn",()=>
(new Promise((c,f)=>e(["../../chunks/vi_VN"],c,f))).then(c=>c.vi_VN)],["zh-cn",()=>(new Promise((c,f)=>e(["../../chunks/zh_Hans"],c,f))).then(c=>c.zh_Hans)],["zh-hk",()=>(new Promise((c,f)=>e(["../../chunks/zh_Hant"],c,f))).then(c=>c.zh_Hant)],["zh-tw",()=>(new Promise((c,f)=>e(["../../chunks/zh_Hant"],c,f))).then(c=>c.zh_Hant)]]);let w,h;d.getChartLocale=Q;d.getColorSet=function(c,f="default"){const m=T.find(k=>k.name===f);return m?m.colors.map(k=>c.color(k)):null};d.loadChartsModule=function(){return V.apply(this,
arguments)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/throttle ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J,t,q,O){x=function(L){function n(G){var C=L.call(this,G)||this;C._abortController=null;C.expressionInfo=null;C.graphic=null;C.contentElement=null;C.contentElementViewModel=null;C.interceptor=null;C.view=null;C._cancelQuery=()=>{const {_abortController:B}=e._assertThisInitialized(C);B&&B.abort();C._abortController=null};C._createVM=()=>{var B,D;const A=null==(B=C.contentElement)?void 0:B.type;null==(D=C.contentElementViewModel)?void 0:D.destroy();
B="fields"===A?new t:"media"===A?new q:"text"===A?new J:null;C._set("contentElementViewModel",B)};C._compile=e._asyncToGenerator(function*(){C._cancelQuery();const B=new AbortController;C._abortController=B;yield C._compileExpression();C._abortController===B&&(C._abortController=null)});C._compileThrottled=Q.throttle(C._compile,1,e._assertThisInitialized(C));C._compileExpression=e._asyncToGenerator(function*(){const {expressionInfo:B,graphic:D,interceptor:A,spatialReference:K,map:P,view:N,_abortController:g}=
e._assertThisInitialized(C);if(B&&D&&K&&P&&N){var v=yield O.loadArcadeUtils();if(g===C._abortController)if((v=yield O.createCompiledExpression({arcadeUtils:v,expressionInfo:B,graphic:D,interceptor:A,map:P,spatialReference:K,view:N}))&&"esri.arcade.Dictionary"===v.declaredClass){v=yield z.castAsJsonAsync(v,g.signal);var u=null==v?void 0:v.type;v="media"===u?l.fromJSON(v):"text"===u?y.fromJSON(v):"fields"===u?r.fromJSON(v):null;C._set("contentElement",v)}else C._set("contentElement",null)}else C._set("contentElement",
null)});C.handles.add([V.init(e._assertThisInitialized(C),["expressionInfo","graphic","map","spatialReference","view"],C._compileThrottled),V.init(e._assertThisInitialized(C),"contentElement",C._createVM)]);return C}e._inheritsLoose(n,L);n.prototype.destroy=function(){var G;this._cancelQuery();null==(G=this.contentElementViewModel)?void 0:G.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};e._createClass(n,[{key:"spatialReference",get:function(){var G;return(null==
(G=this.view)?void 0:G.spatialReference)||null},set:function(G){void 0===G?this._clearOverride("spatialReference"):this._override("spatialReference",G)}},{key:"state",get:function(){const {_abortController:G,contentElement:C,contentElementViewModel:B}=this;return G?"loading":C||B?"ready":"disabled"}},{key:"map",get:function(){var G;return(null==(G=this.view)?void 0:G.map)||null},set:function(G){void 0===G?this._clearOverride("map"):this._override("map",G)}}]);return n}(I.HandleOwnerMixin(x));d.__decorate([T.property()],
x.prototype,"_abortController",void 0);d.__decorate([T.property({type:F})],x.prototype,"expressionInfo",void 0);d.__decorate([T.property({type:b})],x.prototype,"graphic",void 0);d.__decorate([T.property({readOnly:!0})],x.prototype,"contentElement",void 0);d.__decorate([T.property({readOnly:!0})],x.prototype,"contentElementViewModel",void 0);d.__decorate([T.property()],x.prototype,"interceptor",void 0);d.__decorate([T.property()],x.prototype,"spatialReference",null);d.__decorate([T.property({readOnly:!0})],
x.prototype,"state",null);d.__decorate([T.property()],x.prototype,"map",null);d.__decorate([T.property()],x.prototype,"view",void 0);return x=d.__decorate([c.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],x)})},"esri/chunks/languageUtils":function(){define("exports ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E){function r(M,da,oa){return""===da||null===da||void 0===da||da===oa||da===oa?M:M=M.split(da).join(oa)}function l(M){return M instanceof ab||M instanceof d||M instanceof kb}function y(M){return J(M)||q(M)||B(M)||t(M)||null===M||M===Ta||"number"===typeof M?!0:!1}function F(M,da){return void 0===M?da:M}function J(M){return"string"===typeof M||M instanceof String}function t(M){return"boolean"===typeof M}function q(M){return"number"===typeof M}function O(M){return"number"===
typeof M&&isFinite(M)&&Math.floor(M)===M}function L(M){return M instanceof Array}function n(M){return!0===(M&&M.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===M.declaredRootClass)}function G(M){return!0===(M&&M.declaredRootClass&&"esri.arcade.featureSetCollection"===M.declaredRootClass)}function C(M){return M instanceof b}function B(M){return M instanceof Date}function D(M,da,oa){if(M.length<da||M.length>oa)throw Error("Function called with wrong number of Parameters");}function A(M){return 0>
M?-Math.round(-M):Math.round(M)}function K(){let M=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(da){const oa=(M+16*Math.random())%16|0;M=Math.floor(M/16);return("x"===da?oa:oa&3|8).toString(16)})}function P(M,da){if(!1===isNaN(M)){if(void 0===da||null===da||""===da)return M.toString();da=r(da,"\u2030","");da=r(da,"\u00a4","");return m.format(M,{pattern:da})}return M.toString()}function N(M,da){M=c.DateTime.fromJSDate(M);return void 0===da||null===da||
""===da?M.toISO({suppressMilliseconds:!0}):M.toFormat(g(da),{locale:E.getLocale(),numberingSystem:"latn"})}function g(M){M=M.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let da="";const oa=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const za of M.match(oa))switch(za){case "D":da+="d";break;case "DD":da+="dd";break;case "DDD":da+="o";break;
case "d":da+="c";break;case "ddd":da+="ccc";break;case "dddd":da+="cccc";break;case "M":da+="L";break;case "MM":da+="LL";break;case "MMM":da+="LLL";break;case "MMMM":da+="LLLL";break;case "YY":da+="yy";break;case "Y":case "YYYY":da+="yyyy";break;case "Q":da+="q";break;case "Z":da+="ZZ";break;case "ZZ":da+="ZZZ";break;case "S":da+="'S'";break;case "SS":da+="'SS'";break;case "SSS":da+="u";break;case "A":case "a":da+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":da+=
za;break;default:da=2<=za.length&&"["===za.slice(0,1)&&"]"===za.slice(-1)?da+`'${za.slice(1,-1)}'`:da+`'${za}'`}return da}function v(M,da,oa){switch(oa){case "\x3e":return M>da;case "\x3c":return M<da;case "\x3e\x3d":return M>=da;case "\x3c\x3d":return M<=da}return!1}function u(M,da,oa){if(null===M){if(null===da||da===Ta)return v(null,null,oa);if(q(da))return v(0,da,oa);if(J(da)||t(da))return v(0,va(da),oa);if(B(da))return v(0,da.getTime(),oa)}if(M===Ta){if(null===da||da===Ta)return v(null,null,oa);
if(q(da))return v(0,da,oa);if(J(da)||t(da))return v(0,va(da),oa);if(B(da))return v(0,da.getTime(),oa)}else if(q(M)){if(q(da))return v(M,da,oa);if(t(da))return v(M,va(da),oa);if(null===da||da===Ta)return v(M,0,oa);if(J(da))return v(M,va(da),oa);if(B(da))return v(M,da.getTime(),oa)}else if(J(M)){if(J(da))return v(X(M),X(da),oa);if(B(da))return v(va(M),da.getTime(),oa);if(q(da))return v(va(M),da,oa);if(null===da||da===Ta)return v(va(M),0,oa);if(t(da))return v(va(M),va(da),oa)}else if(B(M)){if(B(da))return v(M,
da,oa);if(null===da||da===Ta)return v(M.getTime(),0,oa);if(q(da))return v(M.getTime(),da,oa);if(t(da)||J(da))return v(M.getTime(),va(da),oa)}else if(t(M)){if(t(da))return v(M,da,oa);if(q(da))return v(va(M),va(da),oa);if(B(da))return v(va(M),da.getTime(),oa);if(null===da||da===Ta)return v(va(M),0,oa);if(J(da))return v(va(M),va(da),oa)}return!U(M,da)||"\x3c\x3d"!==oa&&"\x3e\x3d"!==oa?!1:!0}function U(M,da){if(M===da||null===M&&da===Ta||null===da&&M===Ta)return!0;if(B(M)&&B(da))return M.getTime()===
da.getTime();if(M instanceof z||M instanceof x)return M.equalityTest(da);if(M instanceof H&&da instanceof H){const oa=M.cache._arcadeCacheId,za=da.cache._arcadeCacheId;if(void 0!==oa&&null!==oa)return oa===za}return void 0!==M&&void 0!==da&&null!==M&&null!==da&&"object"===typeof M&&"object"===typeof da&&(M._arcadeCacheId===da._arcadeCacheId&&void 0!==M._arcadeCacheId&&null!==M._arcadeCacheId||M._underlyingGraphic===da._underlyingGraphic&&void 0!==M._underlyingGraphic&&null!==M._underlyingGraphic)?
!0:!1}function X(M,da){if(J(M))return M;if(null===M)return"";if(q(M))return P(M,da);if(t(M))return M.toString();if(B(M))return N(M,da);if(M instanceof V)return JSON.stringify(M.toJSON());if(L(M)){da=[];for(var oa=0;oa<M.length;oa++)da[oa]=ta(M[oa]);return"["+da.join(",")+"]"}if(M instanceof b){da=[];for(oa=0;oa<M.length();oa++)da[oa]=ta(M.get(oa));return"["+da.join(",")+"]"}return null!==M&&"object"===typeof M&&void 0!==M.castToText?M.castToText():l(M)?"object, Function":""}function fa(M){const da=
[];if(!1===L(M))return null;if(M instanceof b){for(var oa=0;oa<M.length();oa++)da[oa]=va(M.get(oa));return da}for(oa=0;oa<M.length;oa++)da[oa]=va(M[oa]);return da}function ma(M,da){if(J(M))return M;if(null===M)return"";if(q(M))return P(M,da);if(t(M))return M.toString();if(B(M))return N(M,da);if(M instanceof V)return M instanceof Q?'{"xmin":'+M.xmin.toString()+',"ymin":'+M.ymin.toString()+","+(M.hasZ?'"zmin":'+M.zmin.toString()+",":"")+(M.hasM?'"mmin":'+M.mmin.toString()+",":"")+'"xmax":'+M.xmax.toString()+
',"ymax":'+M.ymax.toString()+","+(M.hasZ?'"zmax":'+M.zmax.toString()+",":"")+(M.hasM?'"mmax":'+M.mmax.toString()+",":"")+'"spatialReference":'+ja(M.spatialReference)+"}":ja(M.toJSON(),(za,ya)=>za.key===ya.key?0:"spatialReference"===za.key?1:"spatialReference"===ya.key||za.key<ya.key?-1:za.key>ya.key?1:0);if(L(M)){da=[];for(var oa=0;oa<M.length;oa++)da[oa]=ta(M[oa]);return"["+da.join(",")+"]"}if(M instanceof b){da=[];for(oa=0;oa<M.length();oa++)da[oa]=ta(M.get(oa));return"["+da.join(",")+"]"}return null!==
M&&"object"===typeof M&&void 0!==M.castToText?M.castToText():l(M)?"object, Function":""}function ta(M){return null===M?"null":t(M)||q(M)||J(M)?JSON.stringify(M):M instanceof V||M instanceof b||M instanceof Array?ma(M):M instanceof Date?JSON.stringify(N(M,"")):null!==M&&"object"===typeof M&&void 0!==M.castToText?M.castToText():"null"}function va(M,da){return q(M)?M:null===M||""===M?0:B(M)?NaN:t(M)?M?1:0:L(M)||""===M||void 0===M?NaN:void 0!==da&&J(M)?(da=r(da,"\u2030",""),da=r(da,"\u00a4",""),m.parse(M,
{pattern:da})):M===Ta?0:Number(M)}function Ba(M){return B(M)?M:J(M)&&(M=la(M))?M.toJSDate():null}function Da(M){return B(M)?c.DateTime.fromJSDate(M):J(M)?la(M):null}function la(M){const da=/ (\d\d)/;let oa=c.DateTime.fromISO(M);return oa.isValid||da.test(M)&&(M=M.replace(da,"T$1"),oa=c.DateTime.fromISO(M),oa.isValid)?oa:null}function ba(M){return t(M)?M:J(M)?(M=M.toLowerCase(),"true"===M?!0:!1):q(M)?0===M||isNaN(M)?!1:!0:!1}function aa(M,da){if(f.isNone(M))return null;if(null===M.spatialReference||
void 0===M.spatialReference)M.spatialReference=da;return M}function R(M){if(null===M)return null;if(M instanceof H)return"NaN"===M.x||null===M.x||isNaN(M.x)?null:M;if(M instanceof w){if(0===M.rings.length)return null;for(const da of M.rings)if(0<da.length)return M;return null}if(M instanceof h){if(0===M.paths.length)return null;for(const da of M.paths)if(0<da.length)return M;return null}return M instanceof T?0===M.points.length?null:M:M instanceof Q?"NaN"===M.xmin||null===M.xmin||isNaN(M.xmin)?null:
M:null}function Y(M,da){if(!M||!M.domain)return da;let oa=null;if("string"===M.field.type||"esriFieldTypeString"===M.field.type)da=X(da);else{if(null===da||void 0===da)return null;if(""===da)return da;da=va(da)}for(let za=0;za<M.domain.codedValues.length;za++){const ya=M.domain.codedValues[za];ya.code===da&&(oa=ya)}return null===oa?da:oa.name}function W(M,da){if(!M||!M.domain)return da;let oa=null;da=X(da);for(let za=0;za<M.domain.codedValues.length;za++){const ya=M.domain.codedValues[za];ya.name===
da&&(oa=ya)}return null===oa?da:oa.code}function ca(M,da,oa=null,za){if(!da||!da.fields)return null;let ya=null;for(let Ua=0;Ua<da.fields.length;Ua++){const Ra=da.fields[Ua];Ra.name.toLowerCase()===M.toString().toLowerCase()&&(ya=Ra)}if(null===ya)throw Error("Field not found");let Ia,Na;za||(za=oa&&da.typeIdField&&oa._field(da.typeIdField));null!=za&&da.types.some(function(Ua){return Ua.id===za?((Ia=Ua.domains&&Ua.domains[ya.name])&&"inherited"===Ia.type&&(Ia=ia(ya.name,da),Na=!0),!0):!1});Na||Ia||
(Ia=ia(M,da));return{field:ya,domain:Ia}}function ia(M,da){let oa;da.fields.some(function(za){za.name.toLowerCase()===M.toLowerCase()&&(oa=za.domain);return!!oa});return oa}function ja(M,da){da||(da={});"function"===typeof da&&(da={cmp:da});const oa="boolean"===typeof da.cycles?da.cycles:!1,za=da.cmp&&function(Ia){return function(Na){return function(Ua,Ra){return Ia({key:Ua,value:Na[Ua]},{key:Ra,value:Na[Ra]})}}}(da.cmp),ya=[];return function Ua(Na){Na&&Na.toJSON&&"function"===typeof Na.toJSON&&(Na=
Na.toJSON());if(void 0!==Na){if("number"===typeof Na)return isFinite(Na)?""+Na:"null";if("object"!==typeof Na)return JSON.stringify(Na);var Ra;if(Array.isArray(Na)){var cb="[";for(Ra=0;Ra<Na.length;Ra++)Ra&&(cb+=","),cb+=Ua(Na[Ra])||"null";return cb+"]"}if(null===Na)return"null";if(-1!==ya.indexOf(Na)){if(oa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var hb=ya.push(Na)-1,eb=Object.keys(Na).sort(za&&za(Na));cb="";for(Ra=0;Ra<eb.length;Ra++){const ub=
eb[Ra],vb=Ua(Na[ub]);vb&&(cb&&(cb+=","),cb+=JSON.stringify(ub)+":"+vb)}ya.splice(hb,1);return"{"+cb+"}"}}(M)}function na(M){if(null===M)return null;const da=[];for(const oa of M)oa&&(oa.declaredClass&&"esri.arcade.Feature"===oa.declaredClass||"FeatureSetReader"===oa.type)?da.push(oa.geometry()):da.push(oa);return da}function ka(M,da){if(da instanceof H)M.push(da.hasZ?da.hasM?[da.x,da.y,da.z,da.m]:[da.x,da.y,da.z]:[da.x,da.y]);else throw Error("Invalid Argument");}function Aa(M,da){if(L(M)||C(M)){let oa=
!1,za=!1,ya=[];if(L(M)){for(const Ia of M)ka(ya,Ia);0<ya.length&&(da=M[0].spatialReference,oa=M[0].hasZ,za=M[0].hasM)}else if(M instanceof x)ya=M._elements,0<ya.length&&(oa=M._hasZ,za=M._hasM,da=M.get(0).spatialReference);else if(C(M)){for(const Ia of M.toArray())ka(ya,Ia);0<ya.length&&(da=M.get(0).spatialReference,oa=!0===M.get(0).hasZ,za=!0===M.get(0).hasM)}else throw Error("Invalid Argument");if(0===ya.length)return null;!1===k.isClockwise(ya,za,oa)&&(ya=ya.slice(0).reverse());return new w({rings:[ya],
spatialReference:da,hasZ:oa,hasM:za})}return M}function qa(M,da){if(L(M)||C(M)){let oa=!1,za=!1,ya=[];if(L(M)){for(const Ia of M)ka(ya,Ia);0<ya.length&&(da=M[0].spatialReference,oa=!0===M[0].hasZ,za=!0===M[0].hasM)}else if(M instanceof x)ya=M._elements,0<ya.length&&(oa=M._hasZ,za=M._hasM,da=M.get(0).spatialReference);else if(C(M)){for(const Ia of M.toArray())ka(ya,Ia);0<ya.length&&(da=M.get(0).spatialReference,oa=!0===M.get(0).hasZ,za=!0===M.get(0).hasM)}return 0===ya.length?null:new h({paths:[ya],
spatialReference:da,hasZ:oa,hasM:za})}return M}function sa(M,da){if(L(M)||C(M)){let oa=!1,za=!1,ya=[];if(L(M)){for(const Ia of M)ka(ya,Ia);0<ya.length&&(da=M[0].spatialReference,oa=!0===M[0].hasZ,za=!0===M[0].hasM)}else if(M instanceof x)ya=M._elements,0<ya.length&&(oa=M._hasZ,za=M._hasM,da=M.get(0).spatialReference);else if(C(M)){for(const Ia of M.toArray())ka(ya,Ia);0<ya.length&&(da=M.get(0).spatialReference,oa=!0===M.get(0).hasZ,za=!0===M.get(0).hasM)}return 0===ya.length?null:new T({points:ya,
spatialReference:da,hasZ:oa,hasM:za})}return M}function ra(M,da=!1){const oa=[];if(null===M)return oa;if(!0===L(M)){for(var za=0;za<M.length;za++){var ya=X(M[za]);""===ya&&!0!==da||oa.push(ya)}return oa}if(M instanceof b){for(za=0;za<M.length();za++)ya=X(M.get(za)),""===ya&&!0!==da||oa.push(ya);return oa}return y(M)?(M=X(M),""===M&&!0!==da||oa.push(M),oa):[]}function wa(M){mb++;return 0===mb%100?(mb=0,I.create(da=>{setTimeout(()=>{da(M)},0)})):M}function Ea(M,da,oa){switch(oa){case "\x26":return M&
da;case "|":return M|da;case "^":return M^da;case "\x3c\x3c":return M<<da;case "\x3e\x3e":return M>>da;case "\x3e\x3e\x3e":return M>>>da}}function Ca(M,da=null){if(null!=M){if(t(M)||q(M)||J(M))return M;if(M instanceof V)return!0===(null==da?void 0:da.keepGeometryType)?M:M.toJSON();if(M instanceof b)return M.toArray().map(oa=>Ca(oa,da));if(M instanceof Array)return M.map(oa=>Ca(oa,da));if(M instanceof Date)return M;if(null!==M&&"object"===typeof M&&void 0!==M.castAsJson)return M.castAsJson(da)}return null}
function Ha(M,da,oa,za,ya){return Oa(M,da,oa).then(Ia=>{ya[za]=Ia})}function Oa(M,da=null,oa=null){M instanceof b&&(M=M.toArray());if(null!=M){if(y(M)||M instanceof V||M instanceof Date)return I.resolve(Ca(M,oa));if(M instanceof Array){const za=[],ya=[];for(const Ia of M)null===Ia||y(Ia)||Ia instanceof V||Ia instanceof Date?ya.push(Ca(Ia,oa)):(ya.push(null),za.push(Ha(Ia,da,oa,ya.length-1,ya)));return 0<za.length?I.all(za).then(()=>ya):I.resolve(ya)}if(null!==M&&"object"===typeof M&&void 0!==M.castAsJsonAsync)return M.castAsJsonAsync(da,
oa)}return I.resolve(null)}let Xa=function(M){this.value=M},Ya=function(M){this.value=M},ab=function(M){this.fn=M},kb=function(M,da){this.paramCount=da;this.fn=M};const qb=ab,Va=kb,Ta={type:"VOID"},sb={type:"BREAK"},lb={type:"CONTINUE"};let mb=0;const tb=Object.freeze({__proto__:null,ReturnResultE:Xa,ImplicitResultE:Ya,NativeFunctionE:ab,SizzleFunctionE:kb,NativeFunction:qb,ImplicitResult:Ya,ReturnResult:Xa,SizzleFunction:Va,voidOperation:Ta,breakResult:sb,continueResult:lb,multiReplace:r,isFunctionParameter:l,
isSimpleType:y,defaultUndefined:F,isString:J,isBoolean:t,isNumber:q,isInteger:O,isArray:L,isFeatureSet:n,isFeatureSetCollection:G,isImmutableArray:C,isDate:B,pcCheck:D,absRound:A,generateUUID:K,formatNumber:P,formatDate:N,standardiseDateFormat:g,greaterThanLessThan:u,equalityTest:U,toString:X,toNumberArray:fa,toStringExplicit:ma,toNumber:va,toDate:Ba,toDateTime:Da,toBoolean:ba,fixSpatialReference:aa,fixNullGeometry:R,getDomainValue:Y,getDomainCode:W,getDomain:ca,stableStringify:ja,autoCastFeatureToGeometry:na,
autoCastArrayOfPointsToPolygon:Aa,autoCastArrayOfPointsToPolyline:qa,autoCastArrayOfPointsToMultiPoint:sa,toStringArray:ra,tick:wa,binaryOperator:Ea,castAsJson:Ca,castAsJsonAsync:Oa});e.ImplicitResult=Ya;e.ImplicitResultE=Ya;e.NativeFunction=qb;e.NativeFunctionE=ab;e.ReturnResult=Xa;e.ReturnResultE=Xa;e.SizzleFunction=Va;e.SizzleFunctionE=kb;e.absRound=A;e.autoCastArrayOfPointsToMultiPoint=sa;e.autoCastArrayOfPointsToPolygon=Aa;e.autoCastArrayOfPointsToPolyline=qa;e.autoCastFeatureToGeometry=na;e.binaryOperator=
Ea;e.breakResult=sb;e.castAsJson=Ca;e.castAsJsonAsync=Oa;e.continueResult=lb;e.defaultUndefined=F;e.equalityTest=U;e.fixNullGeometry=R;e.fixSpatialReference=aa;e.formatDate=N;e.formatNumber=P;e.generateUUID=K;e.getDomain=ca;e.getDomainCode=W;e.getDomainValue=Y;e.greaterThanLessThan=u;e.isArray=L;e.isBoolean=t;e.isDate=B;e.isFeatureSet=n;e.isFeatureSetCollection=G;e.isFunctionParameter=l;e.isImmutableArray=C;e.isInteger=O;e.isNumber=q;e.isSimpleType=y;e.isString=J;e.lc=tb;e.multiReplace=r;e.pcCheck=
D;e.stableStringify=ja;e.standardiseDateFormat=g;e.tick=wa;e.toBoolean=ba;e.toDate=Ba;e.toDateTime=Da;e.toNumber=va;e.toNumberArray=fa;e.toString=X;e.toStringArray=ra;e.toStringExplicit=ma;e.voidOperation=Ta})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(e,d){this.context=this.definition=null;this.definition=e;this.context=d}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function e(b=[]){this._elements=b}var d=e.prototype;d.length=function(){return this._elements.length};
d.get=function(b){return this._elements[b]};d.toArray=function(){const b=[];for(let z=0;z<this.length();z++)b.push(this.get(z));return b};return e}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(e,d,b){return function(z){function x(Q,V,T,H,w){Q=z.call(this,Q)||this;Q._lazyPath=[];Q._hasZ=!1;Q._hasM=!1;Q._hasZ=T;Q._hasM=H;Q._spRef=V;Q._cacheId=w;return Q}e._inheritsLoose(x,z);var I=x.prototype;I.get=
function(Q){if(void 0===this._lazyPath[Q]){const V=this._elements[Q];if(void 0===V)return;this._lazyPath[Q]=new b(V,this._spRef,this._hasZ,this._hasM,this._cacheId,Q)}return this._lazyPath[Q]};I.equalityTest=function(Q){return Q===this?!0:null===Q||!1===Q instanceof x?!1:Q.getUniqueHash()===this.getUniqueHash()};I.getUniqueHash=function(){return this._cacheId.toString()};return x}(d)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],
function(e,d,b){return function(z){function x(Q,V,T,H,w,h){Q=z.call(this,Q)||this;Q._lazyPt=[];Q._hasZ=!1;Q._hasM=!1;Q._spRef=V;Q._hasZ=T;Q._hasM=H;Q._cacheId=w;Q._partId=h;return Q}e._inheritsLoose(x,z);var I=x.prototype;I.get=function(Q){if(void 0===this._lazyPt[Q]){const V=this._elements[Q];if(void 0===V)return;const T=this._hasZ,H=this._hasM;let w=null;w=T&&!H?new b(V[0],V[1],V[2],void 0,this._spRef):H&&!T?new b(V[0],V[1],void 0,V[2],this._spRef):T&&H?new b(V[0],V[1],V[2],V[3],this._spRef):new b(V[0],
V[1],this._spRef);w.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+Q.toString();this._lazyPt[Q]=w}return this._lazyPt[Q]};I.equalityTest=function(Q){return Q===this?!0:null===Q||!1===Q instanceof x?!1:Q.getUniqueHash()===this.getUniqueHash()};I.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return x}(d)})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(e,d,b){function z(h){h||(h=b.getLocale());
let c=h in T;if(!c){const E=h.split("-");1<E.length&&E[0]in T&&(h=E[0],c=!0);c||(h="en")}const [f,m,k="#,##0.###"]=T[h];return{decimal:f,group:m,pattern:k}}function x(h,c,f){f=f||{};!0===f.places&&(f.places=0);Infinity===f.places&&(f.places=6);c=c.split(".");var m="string"===typeof f.places&&f.places.indexOf(","),k=f.places;m?k=f.places.substring(m+1):0<=k||(k=(c[1]||[]).length);0>f.round||(h=Number(h.toFixed(Number(k))));h=String(Math.abs(h)).split(".");const E=h[1]||"";c[1]||f.places?(m&&(f.places=
f.places.substring(0,m)),m=void 0!==f.places?f.places:c[1]&&c[1].lastIndexOf("0")+1,m>E.length&&(h[1]=E.padEnd(Number(m),"0")),k<E.length&&(h[1]=E.substr(0,Number(k)))):h[1]&&h.pop();k=c[0].replace(",","");m=k.indexOf("0");-1!==m&&(m=k.length-m,m>h[0].length&&(h[0]=h[0].padStart(m,"0")),-1===k.indexOf("#")&&(h[0]=h[0].substr(h[0].length-m)));k=c[0].lastIndexOf(",");let r,l;-1!==k&&(r=c[0].length-k-1,c=c[0].substr(0,k),k=c.lastIndexOf(","),-1!==k&&(l=c.length-k-1));c=[];for(k=h[0];k;)m=k.length-r,
c.push(0<m?k.substr(m):k),k=0<m?k.slice(0,m):"",l&&(r=l,l=void 0);h[0]=c.reverse().join(f.group||",");return h.join(f.decimal||".")}function I(h){h=h||{};var c=z(h.locale);const f=h.pattern||c.pattern,m=c.group,k=c.decimal;let E=1;if(-1!==f.indexOf("%"))E/=100;else if(-1!==f.indexOf("\u2030"))E/=1E3;else if(-1!==f.indexOf("\u00a4"))throw Error("currency notation not supported");c=f.split(";");1===c.length&&c.push("-"+c[0]);return{regexp:w(c,function(r){r="(?:"+d.escapeRegExpString(r,".")+")";return r.replace(H,
function(l){const y={signed:!1,separator:h.strict?m:[m,""],fractional:h.fractional,decimal:k,exponent:!1};l=l.split(".");let F=h.places;1===l.length&&1!==E&&(l[1]="###");1===l.length||0===F?y.fractional=!1:(void 0===F&&(F=h.pattern?l[1].lastIndexOf("0")+1:Infinity),F&&null==h.fractional&&(y.fractional=!0),!h.places&&F<l[1].length&&(F+=","+l[1].length),y.places=F);l=l[0].split(",");1<l.length&&(y.groupSize=l.pop().length,1<l.length&&(y.groupSize2=l.pop().length));return"("+Q(y)+")"})},!0).replace(/[\xa0 ]/g,
"[\\s\\xa0]"),group:m,decimal:k,factor:E}}function Q(h){h=h||{};"places"in h||(h.places=Infinity);"string"!==typeof h.decimal&&(h.decimal=".");"fractional"in h&&!/^0/.test(String(h.places))||(h.fractional=[!0,!1]);"exponent"in h||(h.exponent=[!0,!1]);"eSigned"in h||(h.eSigned=[!0,!1]);var c=V(h);const f=w(h.fractional,function(k){let E="";k&&0!==h.places&&(E="\\"+h.decimal,E=Infinity===h.places?"(?:"+E+"\\d+)?":E+("\\d{"+h.places+"}"));return E},!0),m=w(h.exponent,function(k){return k?"([eE]"+V({signed:h.eSigned})+
")":""});c+=f;f&&(c="(?:(?:"+c+")|(?:"+f+"))");return c+m}function V(h){h=h||{};"signed"in h||(h.signed=[!0,!1]);"separator"in h?"groupSize"in h||(h.groupSize=3):h.separator="";const c=w(h.signed,function(m){return m?"[-+]":""},!0),f=w(h.separator,function(m){if(!m)return"(?:\\d+)";m=d.escapeRegExpString(m);" "===m?m="\\s":"\u00a0"===m&&(m="\\s\\xa0");const k=h.groupSize,E=h.groupSize2;return E?(m="(?:0|[1-9]\\d{0,"+(E-1)+"}(?:["+m+"]\\d{"+E+"})*["+m+"]\\d{"+k+"})",0<k-E?"(?:"+m+"|(?:0|[1-9]\\d{0,"+
(k-1)+"}))":m):"(?:0|[1-9]\\d{0,"+(k-1)+"}(?:["+m+"]\\d{"+k+"})*)"},!0);return c+f}const T={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],
ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},H=/[#0,]*[#0](?:\.0*#*)?/,w=function(h,c,f){if(!(h instanceof Array))return c(h);const m=[];for(let k=0;k<h.length;k++)m.push(c(h[k]));h=m.join("|");return"("+(f?"?:":"")+h+")"};e._parseInfo=
I;e.format=function(h,c){c={...c};var f=z(c.locale);c.customs=f;var m=c.pattern||f.pattern;if(isNaN(h)||Infinity===Math.abs(h))return null;{c=c||{};f=c.customs.group;const E=c.customs.decimal;m=m.split(";");var k=m[0];m=m[0>h?1:0]||"-"+k;if(-1!==m.indexOf("%"))h*=100;else if(-1!==m.indexOf("\u2030"))h*=1E3;else{if(-1!==m.indexOf("\u00a4"))throw Error("currency notation not supported");if(-1!==m.indexOf("E"))throw Error("exponential notation not supported");}const r=H;k=k.match(r);if(!k)throw Error("unable to find a number expression in pattern: "+
m);!1===c.fractional&&(c.places=0);h=m.replace(r,x(h,k[0],{decimal:E,group:f,places:c.places,round:c.round}))}return h};e.getCustoms=z;e.parse=function(h,c){c=I(c);h=(new RegExp("^"+c.regexp+"$")).exec(h);if(!h)return NaN;let f=h[1];if(!h[1]){if(!h[2])return NaN;f=h[2];c.factor*=-1}f=f.replace(new RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,".");return Number(f)*c.factor};e.regexp=function(h){return I(h).regexp};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),
function(e,d,b,z,x,I,Q){function V(l){return`<ul class="esri-widget__list">${l.map(y=>`<li>${"string"===typeof y?Q.applyTextFormattingHTML(Q.htmlEntities(y)):y}</li>`).join("")}</ul>`}function T(l){return`<table class="esri-widget__table">${l.keys().map(y=>{var F=l.field(y);F="string"===typeof F?Q.applyTextFormattingHTML(Q.htmlEntities(F)):F;return`<tr><th>${y}</th><td>${F}</td></tr>`}).join("")}</table>`}function H({aggregatedFeatures:l,arcadeUtils:y,featureSetVars:F,context:J,viewInfo:t,map:q,graphic:O,
interceptor:L}){F.forEach(n=>{n=n.toLowerCase();var G={map:q,spatialReference:t.sr,interceptor:L};"$map"===n&&(J.vars[n]=y.convertMapToFeatureSetCollection(G));"$layer"===n&&(J.vars[n]=y.convertFeatureLayerToFeatureSet({layer:O.sourceLayer,spatialReference:t.sr,interceptor:L}));"$datastore"===n&&(J.vars[n]=y.convertServiceUrlToWorkspace({url:O.sourceLayer.url,spatialReference:t.sr,interceptor:L}));if("$aggregatedfeatures"===n){G=O.layer;const {fields:C,objectIdField:B,geometryType:D,spatialReference:A,
displayField:K}=G;G=new I({fields:C,objectIdField:B,geometryType:D,spatialReference:A,displayField:K,..."feature"===G.type?{templates:G.templates,typeIdField:G.typeIdField,types:G.types}:null,source:l});J.vars[n]=y.convertFeatureLayerToFeatureSet({layer:G,spatialReference:t.sr,interceptor:L})}})}function w(){return new Promise((l,y)=>e(["../../../support/arcadeUtils"],l,y))}function h(l){return c.apply(this,arguments)}function c(){c=b._asyncToGenerator(function*({graphic:l,view:y}){const {isAggregate:F,
layer:J}=l;if(!F||!J||"2d"!==(null==y?void 0:y.type))return[];y=yield y.whenLayerView(J);if(!y.createQuery||!y.queryFeatures)return[];const t=y.createQuery();t.aggregateIds=[l.getObjectId()];({features:l}=yield y.queryFeatures(t));return l});return c.apply(this,arguments)}function f(l){return m.apply(this,arguments)}function m(){m=b._asyncToGenerator(function*({expressionInfo:l,arcadeUtils:y,interceptor:F,spatialReference:J,map:t,graphic:q,view:O}){if(!l||!l.expression)return null;const L=y.createSyntaxTree(l.expression),
n=E.filter(C=>y.hasVariable(L,C));[O]=yield x.all([h({graphic:q,view:O}),y.loadScriptDependencies(L,!0,n)]);const G=y.getViewInfo({spatialReference:J});J=y.createExecContext(q,G);J.interceptor=F;J.useAsync=!0;H({aggregatedFeatures:O,arcadeUtils:y,featureSetVars:n,context:J,viewInfo:G,map:t,graphic:q,interceptor:F});F=y.createFunction(L,J);return y.executeAsyncFunction(F,J).catch(C=>r.error("arcade-execution-error",{error:C,graphic:q,expressionInfo:l}))});return m.apply(this,arguments)}function k(){k=
b._asyncToGenerator(function*({expressionInfos:l,spatialReference:y,graphic:F,interceptor:J,map:t,view:q}){if(!l||!l.length)return{};const O=yield w(),L={};for(const n of l)L[`expression/${n.name}`]=f({expressionInfo:n,arcadeUtils:O,interceptor:J,spatialReference:y,map:t,graphic:F,view:q});l=yield x.eachAlways(L);y={};for(const n in l)F=l[n].value,F="string"===typeof F?Q.applyTextFormattingHTML(Q.htmlEntities(F)):Array.isArray(F)?V(F):"esri.arcade.Dictionary"===(null==F?void 0:F.declaredClass)?T(F):
F,y[n]=F;return y});return k.apply(this,arguments)}const E=["$datastore","$map","$layer","$aggregatedfeatures"],r=z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");d.createCompiledExpression=f;d.createCompiledExpressions=function(l){return k.apply(this,arguments)};d.loadArcadeUtils=w;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J,t,q,O){var L;const n=Q.getLogger("esri.widgets.FeatureViewModel"),G={attachmentsContent:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};x=L=function(C){function B(A){var K=C.call(this,A)||this;K._handles=new I;K._error=null;K._featureAbortController=null;K.graphicChangedThrottled=H.throttle(K.graphicChanged,1,e._assertThisInitialized(K));K._expressionAttributes=null;K._graphicExpressionAttributes=null;K.abilities=
{...G};K.content=null;K.contentViewModels=[];K.defaultPopupTemplateEnabled=!1;K.formattedAttributes=null;K.lastEditInfo=null;K.relatedInfos=new Map;K.title="";K.view=null;K._isAllowedContentType=P=>{const {abilities:N}=e._assertThisInitialized(K);return"attachments"===P.type&&N.attachmentsContent||"custom"===P.type&&N.customContent||"fields"===P.type&&N.fieldsContent||"media"===P.type&&N.mediaContent||"text"===P.type&&N.textContent||"expression"===P.type&&N.expressionContent};K._handles.add(w.init(e._assertThisInitialized(K),
["graphic","_effectivePopupTemplate","abilities"],()=>K.graphicChangedThrottled()));return K}e._inheritsLoose(B,C);var D=B.prototype;D.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};D.castAbilities=function(A){return{...G,...A}};D.setActiveMedia=function(A,K){A=this.contentViewModels[A];A instanceof J&&A.setActiveMedia(K)};D.nextMedia=function(A){A=this.contentViewModels[A];
A instanceof J&&A.next()};D.previousMedia=function(A){A=this.contentViewModels[A];A instanceof J&&A.previous()};D._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};D.graphicChanged=function(){var A=e._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:K}=this;if(K){var P=new AbortController;this._featureAbortController=P;try{yield this._queryFeature({signal:P.signal})}catch(N){T.isAbortError(N)||
(this._error=N,n.error("error","The popupTemplate could not be displayed for this feature.",{error:N,graphic:K,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===P&&(this._featureAbortController=null)}});return function(){return A.apply(this,arguments)}}();D._cancelFeatureQuery=function(){const {_featureAbortController:A}=this;A&&A.abort();this._featureAbortController=null};D._compileContentElement=function(A,K){if("attachments"===A.type)return this._compileAttachments(A,
K);if("custom"===A.type)return this._compileCustom(A,K);if("fields"===A.type)return this._compileFields(A,K);if("media"===A.type)return this._compileMedia(A,K);if("text"===A.type)return this._compileText(A,K);if("expression"===A.type)return this._compileExpression(A,K)};D._compileContent=function(A){this._destroyContentViewModels();if(this.graphic)return Array.isArray(A)?A.filter(this._isAllowedContentType).map((K,P)=>this._compileContentElement(K,P)):"string"===typeof A?this._compileText(new E({text:A}),
0).text:A};D._destroyContentViewModels=function(){var A;null==(A=this._handles)?void 0:A.remove("content-view-models");this.contentViewModels.forEach(K=>K&&!K.destroyed&&K.destroy());this._set("contentViewModels",[])};D._setExpressionContentVM=function(A,K){const {formattedAttributes:P}=this,{contentElement:N,contentElementViewModel:g}=A;A=null==N?void 0:N.type;g&&A&&("fields"===A&&(this._createFieldsFormattedAttributes({contentElement:N,contentElementIndex:K,formattedAttributes:P}),g.set(this._createFieldsVMParams(N,
K))),"media"===A&&(this._createMediaFormattedAttributes({contentElement:N,contentElementIndex:K,formattedAttributes:P}),g.set(this._createMediaVMParams(N,K))),"text"===A&&g.set(this._createTextVMParams(N)))};D._compileExpression=function(A,K){const {expressionInfo:P}=A,{graphic:N,map:g,spatialReference:v,view:u}=this,U=new y({expressionInfo:P,graphic:N,interceptor:L.interceptor,map:g,spatialReference:v,view:u});this.contentViewModels[K]=U;this._handles.add(w.init(U,"contentElementViewModel",()=>this._setExpressionContentVM(U,
K)),"content-view-models");return A};D._compileAttachments=function(A,K){const {graphic:P}=this,{description:N,title:g}=A;this.contentViewModels[K]=new r({graphic:P,...this._compileTitleAndDesc({title:g,description:N})});return A};D._compileCustom=function(A,K){const {graphic:P}=this,{creator:N,destroyer:g}=A;this.contentViewModels[K]=new l({graphic:P,creator:N,destroyer:g});return A};D._compileTitleAndDesc=function({title:A,description:K}){const {_fieldInfoMap:P,_sourceLayer:N,graphic:g,formattedAttributes:v,
_expressionAttributes:u}=this,{attributes:U}=g,X=v.global;return{title:q.substituteFieldsInLinksAndAttributes({attributes:U,fieldInfoMap:P,globalAttributes:X,expressionAttributes:u,layer:N,text:A}),description:q.substituteFieldsInLinksAndAttributes({attributes:U,fieldInfoMap:P,globalAttributes:X,expressionAttributes:u,layer:N,text:K})}};D._createFieldsVMParams=function(A,K){const {_effectivePopupTemplate:P,formattedAttributes:N}=this,g={...N.global,...N.content[K]};K=(null==A?void 0:A.fieldInfos)||
(null==P?void 0:P.fieldInfos);K=null==K?void 0:K.filter(({fieldName:X})=>q.isExpressionField(X)||q.isRelatedField(X)||g.hasOwnProperty(X));const v=null==P?void 0:P.expressionInfos,{description:u,title:U}=A;return{attributes:g,expressionInfos:v,fieldInfos:K,...this._compileTitleAndDesc({title:U,description:u})}};D._compileFields=function(A,K){const P=A.clone();A=new F(this._createFieldsVMParams(A,K));this.contentViewModels[K]=A;P.fieldInfos=A.formattedFieldInfos.slice(0);return P};D._createMediaVMParams=
function(A,K){const {graphic:P,_fieldInfoMap:N,formattedAttributes:g,_effectivePopupTemplate:v,relatedInfos:u,_sourceLayer:U,_expressionAttributes:X}=this,{attributes:fa}=P,{description:ma,mediaInfos:ta,title:va}=A;return{activeMediaInfoIndex:A.activeMediaInfoIndex||0,attributes:fa,layer:U,fieldInfoMap:N,formattedAttributes:{...g.global,...g.content[K]},expressionAttributes:X,mediaInfos:ta,popupTemplate:v,relatedInfos:u,...this._compileTitleAndDesc({title:va,description:ma})}};D._compileMedia=function(A,
K){const P=A.clone();A=new J(this._createMediaVMParams(A,K));P.mediaInfos=A.formattedMediaInfos.slice(0);this.contentViewModels[K]=A;return P};D._createTextVMParams=function(A){const {graphic:K,_fieldInfoMap:P,_sourceLayer:N,_expressionAttributes:g}=this;if(A&&A.text){const {attributes:v}=K;A.text=q.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:P,globalAttributes:this.formattedAttributes.global,expressionAttributes:g,layer:N,text:A.text})}return{graphic:K,creator:A.text}};D._compileText=
function(A,K){A=A.clone();this.contentViewModels[K]=new l(this._createTextVMParams(A));return A};D._compileLastEditInfo=function(){const {_effectivePopupTemplate:A,_sourceLayer:K,graphic:P}=this;if(A){var {lastEditInfoEnabled:N}=A,g=null==K?void 0:K.editFieldsInfo;if(N&&g)return q.formatEditInfo(g,P.attributes)}};D._compileTitle=function(A){const {_fieldInfoMap:K,_sourceLayer:P,graphic:N,_expressionAttributes:g}=this,{attributes:v}=N;return q.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:K,
globalAttributes:this.formattedAttributes.global,expressionAttributes:g,layer:P,text:A})};D._getTitle=function(){var A=e._asyncToGenerator(function*(){const {_effectivePopupTemplate:K,graphic:P}=this;return q.graphicCallback(null==K?void 0:K.title,{graphic:P})});return function(){return A.apply(this,arguments)}}();D._getContent=function(){var A=e._asyncToGenerator(function*(){const {_effectivePopupTemplate:K,graphic:P}=this;return q.graphicCallback(null==K?void 0:K.content,{graphic:P})});return function(){return A.apply(this,
arguments)}}();D._queryFeature=function(){var A=e._asyncToGenerator(function*(K){const {_featureAbortController:P,_sourceLayer:N,graphic:g,_effectivePopupTemplate:v,spatialReference:u,map:U,view:X}=this,{content:{value:fa},title:{value:ma}}=yield T.eachAlways({content:this._getContent(),title:this._getTitle()});P===this._featureAbortController&&g&&(yield q.queryUpdatedFeature({graphic:g,popupTemplate:v,layer:N,spatialReference:u},K),{expressionAttributes:{value:K}}=yield T.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(K),
expressionAttributes:t.createCompiledExpressions({expressionInfos:null==v?void 0:v.expressionInfos,spatialReference:u,graphic:g,map:U,interceptor:L.interceptor,view:X})}),P===this._featureAbortController&&g&&(this._expressionAttributes=K,this._graphicExpressionAttributes={...g.attributes,...K},this._set("formattedAttributes",this._createFormattedAttributes(fa)),this._set("title",this._compileTitle(ma)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(fa)||
null)))});return function(K){return A.apply(this,arguments)}}();D._createMediaFormattedAttributes=function({contentElement:A,contentElementIndex:K,formattedAttributes:P}){const {_effectivePopupTemplate:N,graphic:g,relatedInfos:v,_sourceLayer:u,_fieldInfoMap:U,_graphicExpressionAttributes:X}=this;P.content[K]=q.formatAttributes({fieldInfos:null==N?void 0:N.fieldInfos,graphic:g,attributes:{...X,...A.attributes},layer:u,fieldInfoMap:U,relatedInfos:v})};D._createFieldsFormattedAttributes=function({contentElement:A,
contentElementIndex:K,formattedAttributes:P}){if(A.fieldInfos){const {graphic:N,relatedInfos:g,_sourceLayer:v,_fieldInfoMap:u,_graphicExpressionAttributes:U}=this;P.content[K]=q.formatAttributes({fieldInfos:A.fieldInfos,graphic:N,attributes:{...U,...A.attributes},layer:v,fieldInfoMap:u,relatedInfos:g})}};D._createFormattedAttributes=function(A){const {_effectivePopupTemplate:K,graphic:P,relatedInfos:N,_sourceLayer:g,_fieldInfoMap:v,_graphicExpressionAttributes:u}=this,U={global:q.formatAttributes({fieldInfos:null==
K?void 0:K.fieldInfos,graphic:P,attributes:u,layer:g,fieldInfoMap:v,relatedInfos:N}),content:[]};Array.isArray(A)&&A.forEach((X,fa)=>{"fields"===X.type&&this._createFieldsFormattedAttributes({contentElement:X,contentElementIndex:fa,formattedAttributes:U});"media"===X.type&&this._createMediaFormattedAttributes({contentElement:X,contentElementIndex:fa,formattedAttributes:U})});return U};D._checkForRelatedFeatures=function(A){const {graphic:K,_effectivePopupTemplate:P}=this;return this._queryRelatedInfos(K,
q.getAllFieldInfos(P),A)};D._queryRelatedInfos=function(){var A=e._asyncToGenerator(function*(K,P,N){const {relatedInfos:g,_sourceLayer:v}=this;g.clear();const u=V.isSome(v.associatedLayer)?yield v.associatedLayer.load(N):v;if(u){var U=P.filter(ma=>ma&&q.isRelatedField(ma.fieldName));if(U&&U.length){P.forEach(ma=>this._configureRelatedInfo(ma,u));var X=yield O.queryLayerInfos({relatedInfos:g,layer:u},N);Object.keys(X).forEach(ma=>{var ta;const va=g.get(ma.toString());ma=null==(ta=X[ma])?void 0:ta.value;
va&&ma&&(va.layerInfo=ma.data)});var fa=yield O.queryRelatedFeatures({graphic:K,relatedInfos:g,layer:u},N);Object.keys(fa).forEach(ma=>{var ta;O.setRelatedFeatures(null==(ta=fa[ma])?void 0:ta.value,g.get(ma.toString()))})}}});return function(K,P,N){return A.apply(this,arguments)}}();D._configureRelatedInfo=function(A,K){const {relatedInfos:P}=this,N=O.getRelatedFieldInfo(A.fieldName);if(N){var {layerId:g,fieldName:v}=N;g&&(K=P.get(g.toString())||O.createRelatedInfo(g,K))&&(O.updateRelatedInfo({relatedInfo:K,
fieldName:v,fieldInfo:A}),this.relatedInfos.set(g,K))}};e._createClass(B,[{key:"_effectivePopupTemplate",get:function(){return V.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return q.createfieldInfoMap(q.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return q.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":
this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(A){this._set("graphic",A?A.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(A){void 0===A?this._clearOverride("spatialReference"):this._override("spatialReference",A)}},{key:"map",get:function(){return this.get("view.map")||null},set:function(A){void 0===A?this._clearOverride("map"):this._override("map",A)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);
return B}(x);x.interceptor=new z.FeatureSetQueryInterceptor(q.preLayerQueryCallback,q.preRequestCallback);d.__decorate([h.property()],x.prototype,"_error",void 0);d.__decorate([h.property()],x.prototype,"_featureAbortController",void 0);d.__decorate([h.property({readOnly:!0})],x.prototype,"_effectivePopupTemplate",null);d.__decorate([h.property({readOnly:!0})],x.prototype,"_fieldInfoMap",null);d.__decorate([h.property({readOnly:!0})],x.prototype,"_sourceLayer",null);d.__decorate([h.property()],x.prototype,
"abilities",void 0);d.__decorate([m.cast("abilities")],x.prototype,"castAbilities",null);d.__decorate([h.property({readOnly:!0})],x.prototype,"content",void 0);d.__decorate([h.property({readOnly:!0})],x.prototype,"contentViewModels",void 0);d.__decorate([h.property({type:Boolean})],x.prototype,"defaultPopupTemplateEnabled",void 0);d.__decorate([h.property({readOnly:!0})],x.prototype,"state",null);d.__decorate([h.property({readOnly:!0})],x.prototype,"formattedAttributes",void 0);d.__decorate([h.property({type:b,
value:null})],x.prototype,"graphic",null);d.__decorate([h.property({readOnly:!0})],x.prototype,"lastEditInfo",void 0);d.__decorate([h.property({readOnly:!0})],x.prototype,"relatedInfos",void 0);d.__decorate([h.property()],x.prototype,"spatialReference",null);d.__decorate([h.property({readOnly:!0})],x.prototype,"title",void 0);d.__decorate([h.property()],x.prototype,"map",null);d.__decorate([h.property({readOnly:!0})],x.prototype,"waitingForContent",null);d.__decorate([h.property()],x.prototype,"view",
void 0);return x=L=d.__decorate([k.subclass("esri.widgets.FeatureViewModel")],x)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(e){e.FeatureSetQueryInterceptor=function(d,b){this.preLayerQueryCallback=d;this.preRequestCallback=b;this.preLayerQueryCallback||(this.preLayerQueryCallback=z=>{});this.preRequestCallback||(this.preLayerQueryCallback=z=>{})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w){e.FeatureContentMixin=h=>{h=function(c){function f(){var m=c.apply(this,arguments)||this;m.renderNodeContent=k=>H.isWidget(k)&&!k.destroyed?w.tsx("div",{key:k},k.render()):k instanceof HTMLElement?w.tsx("div",{key:k,bind:k,afterCreate:m._attachToNode}):H.hasDomNode(k)?w.tsx("div",{key:k,bind:k.domNode,afterCreate:m._attachToNode}):null;return m}d._inheritsLoose(f,c);f.prototype._attachToNode=function(m){m.appendChild(this)};return f}(h);return h=b.__decorate([T.subclass("esri.widgets.Feature.ContentMixin")],
h)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J,t,q,O,L,n,G,C,B,D){const A=I.ofType({key:"type",defaultKeyValue:"button",base:l,typeMap:{button:y,toggle:F}}),K=T.getLogger("esri.widgets.Popup.PopupViewModel");b=function(P){function N(v){v=P.call(this,v)||this;v._handles=new V;v._pendingPromises=new Set;v._fetchFeaturesController=null;v._selectedClusterFeature=null;v.featurePage=null;v.actions=new A;v.defaultPopupTemplateEnabled=!1;v.autoCloseEnabled=!1;v.autoOpenEnabled=!0;v.browseClusterEnabled=
!1;v.content=null;v.featuresPerPage=20;v.featureViewModelAbilities=null;v.featureViewModels=[];v.highlightEnabled=!0;v.includeDefaultActions=!0;v.selectedClusterBoundaryFeature=new z({symbol:new D({outline:{width:1.5,color:"cyan"},style:"none"})});v.title=null;v.updateLocationEnabled=!1;v.view=null;v.visible=!1;v.zoomFactor=4;v.zoomToLocation=null;return v}e._inheritsLoose(N,P);var g=N.prototype;g.initialize=function(){this._handles.add([w.init(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),
this.on("view-change",()=>this._autoClose()),w.watch(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),w.watch(this,"view.animation.state",v=>this._animationStateChange(v)),w.watch(this,"location",v=>this._locationChange(v)),w.watch(this,"selectedFeature",v=>this._selectedFeatureChange(v)),w.watch(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),w.watch(this,["featurePage","selectedFeatureIndex","featureCount",
"featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),w.watch(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",v=>n.triggerAction({event:v,view:this.view})),w.whenFalse(this,"waitingForResult",()=>this._waitingForResultChange(),!0),w.watch(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),w.watch(this,["view.scale"],this._viewScaleChange),w.whenFalse(this,"visible",()=>this.browseClusterEnabled=
!1),w.watch(this,"browseClusterEnabled",v=>v?this.enableClusterBrowsing():this.disableClusterBrowsing())])};g.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};g.centerAtLocation=function(){var {view:v}=this;const u=n.getSelectedTarget(this);return u?this.callGoTo({target:{target:u,scale:v.scale}}):(v=new Q("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",
{target:u,view:v}),K.error(v),Promise.reject(v))};g.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};g.fetchFeatures=function(v,u){const {view:U}=this;return U&&v?U.fetchPopupFeatures(v,{event:u&&u.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:u&&u.signal}):(v=new Q("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:v,view:U}),K.error(v),Promise.reject(v))};g.open=
function(v){v={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...v,visible:!0};const {fetchFeatures:u}=v;delete v.fetchFeatures;u&&this._setFetchFeaturesPromises(v.location);this.set(v)};g.triggerAction=function(v){(v=this.allActions.getItemAt(v))&&!v.disabled&&this.emit("trigger-action",{action:v})};g.next=function(){this.selectedFeatureIndex+=1;return this};g.previous=function(){--this.selectedFeatureIndex;return this};g.disableClusterBrowsing=function(){n.removeClusteredFeaturesForBrowsing(this);
this._clearBrowsedClusterGraphics()};g.enableClusterBrowsing=function(){var v=e._asyncToGenerator(function*(){yield n.displayClusterExtent(this);yield n.browseAggregateFeatures(this)});return function(){return v.apply(this,arguments)}}();g._animationStateChange=function(v){this.zoomToLocation||(L.zoomToFeature.disabled="waiting-for-target"===v)};g._clearBrowsedClusterGraphics=function(){var v;const u=null==(v=this.view)?void 0:v.graphics;u&&(u.remove(this.selectedClusterBoundaryFeature),u.remove(this._selectedClusterFeature));
this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};g._viewScaleChange=function(){var v;if(null!=(v=this.selectedFeature)&&v.isAggregate||this.browseClusterEnabled)this.visible=this.browseClusterEnabled=!1};g._locationChange=function(v){const {selectedFeature:u,updateLocationEnabled:U}=this;U&&v&&(!u||u.geometry)&&this.centerAtLocation()};g._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+
1:null};g._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};g._setGraphicOnFeatureViewModels=function(){const {features:v,featureCount:u,featurePage:U,featuresPerPage:X,featureViewModels:fa}=this;if(null!==U){var ma=((U-1)*X+u)%u;fa.slice(ma,ma+X).forEach((ta,va)=>{ta&&!ta.graphic&&(ta.graphic=v[ma+va])})}};g._selectedFeatureChange=function(){var v=e._asyncToGenerator(function*(u){if(u){var {location:U,updateLocationEnabled:X,view:fa}=this;this.browseClusterEnabled?
(this._selectedClusterFeature&&(fa.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),u.isAggregate||(u.symbol=yield J.getDisplayedSymbol(u),this._selectedClusterFeature=u,fa.graphics.add(this._selectedClusterFeature))):!X&&U||!u.geometry?X&&!u.geometry&&this.centerAtLocation().then(()=>{this.location=fa.center.clone()}):this.location=H.unwrap(this._getPointFromGeometry(u.geometry))}});return function(u){return v.apply(this,arguments)}}();g._waitingForResultChange=function(){!this.featureCount&&
this.promises&&(this.visible=!1)};g._setFetchFeaturesPromises=function(v){return this._fetchFeaturesWithController(this._getScreenPoint(v||this.location)).then(u=>{const {clientOnlyGraphics:U,promisesPerLayerView:X}=u;u=Promise.resolve(U);const fa=X.map(ma=>ma.promise);this.promises=[u,...fa]})};g._destroyFeatureVMs=function(){this.featureViewModels.forEach(v=>v&&!v.destroyed&&v.destroy());this._set("featureViewModels",[])};g._updateFeatureVMs=function(){const {selectedFeature:v,features:u,featureViewModels:U}=
this;null!=v&&v.isAggregate||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(u&&u.length){var X=U.slice(0),fa=[];u.forEach((ma,ta)=>{if(ma){var va=null;X.some((la,ba)=>{la&&la.graphic===ma&&(va=la,X.splice(ba,1));return!!va});if(va)fa[ta]=va;else{var Ba,Da;const la=new O({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(Ba=this.view)?void 0:Ba.spatialReference,graphic:ma===v?ma:null,map:null==(Da=this.view)?void 0:
Da.map,view:this.view});fa[ta]=la}}});X.forEach(ma=>ma&&!ma.destroyed&&ma.destroy());this._set("featureViewModels",fa)}};g._getScreenPoint=function(v){const {view:u}=this;return u&&v&&"function"===typeof u.toScreen?u.toScreen(v):null};g._autoOpenEnabledChange=function(){const {_handles:v,autoOpenEnabled:u}=this;v.remove("auto-fetch-features");if(u&&this.view){const U=this.view.on("click",X=>{"mouse"===X.pointerType&&0!==X.button||this._fetchFeaturesAndOpen(X)},t.ViewEventPriorities.WIDGET);v.add(U,
"auto-fetch-features")}};g._cancelFetchingFeatures=function(){const v=this._fetchFeaturesController;v&&v.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};g._fetchFeaturesWithController=function(v,u){this._cancelFetchingFeatures();const U=new AbortController,{signal:X}=U;this._fetchFeaturesController=U;this.notifyChange("waitingForResult");v=this.fetchFeatures(v,{signal:X,event:u});v.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});
return v};g._fetchFeaturesAndOpen=function(v){const {screenPoint:u,mapPoint:U}=v,{view:X}=this;this._fetchFeaturesWithController(u,v).then(fa=>{const {clientOnlyGraphics:ma,promisesPerLayerView:ta,location:va}=fa,Ba=[Promise.resolve(ma),...ta.map(Da=>Da.promise)];X.popup.open({location:va||U,promises:Ba});return fa})};g._updatePendingPromises=function(v){v&&this._pendingPromises.has(v)&&(this._pendingPromises.delete(v),this.notifyChange("pendingPromisesCount"))};g._autoClose=function(){this.autoCloseEnabled&&
(this.visible=!1)};g._getPointFromGeometry=function(v){return H.isNone(v)?null:"point"===v.type?v:"extent"===v.type?v.center:"polygon"===v.type?v.centroid:"multipoint"===v.type||"polyline"===v.type?v.extent.center:null};g._getLayerView=function(){var v=e._asyncToGenerator(function*(u,U){yield u.when();return u.whenLayerView(U)});return function(u,U){return v.apply(this,arguments)}}();g._highlightFeature=function(){var v=e._asyncToGenerator(function*(){this._handles.remove("highlight");const {selectedFeature:u,
highlightEnabled:U,view:X,visible:fa}=this;if(u&&X&&U&&fa){var {layer:ma,sourceLayer:ta}=u;if("map-notes"===(null==ta?void 0:ta.type)||"subtype-group"===(null==ta?void 0:ta.type))ma=ta;if(ma&&ma instanceof r){var va=this._getLayerView(X,ma);this._highlightPromise=va;var Ba=yield va;if(Ba&&q.highlightsSupported(Ba)&&this._highlightPromise===va&&this.selectedFeature&&this.highlightEnabled&&this.visible){va="objectIdField"in ma&&ma.objectIdField;var Da=u.attributes;Ba=Ba.highlight(Da&&va&&Da[va]||u);
this._handles.add(Ba,"highlight")}}}});return function(){return v.apply(this,arguments)}}();g._updateFeatures=function(v){const {features:u}=this;v&&v.length&&(u.length?(v=v.filter(U=>-1===u.indexOf(U)),this.features=u.concat(v)):this.features=v)};e._createClass(N,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(v=>v.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const v=this._get("allActions")||
new A;v.removeAll();const {actions:u,defaultActions:U,defaultPopupTemplateEnabled:X,includeDefaultActions:fa,selectedFeature:ma}=this;var ta=fa?U.concat(u):u;const va=ma&&("function"===typeof ma.getEffectivePopupTemplate&&ma.getEffectivePopupTemplate(X)||ma.popupTemplate),Ba=va&&va.actions;(ta=va&&va.overwriteActions?Ba:Ba?Ba.concat(ta):ta)&&ta.filter(Boolean).forEach(Da=>v.add(Da));return v}},{key:"defaultActions",get:function(){var v;const u=this._get("defaultActions")||new A;u.removeAll();u.addMany(null!=
(v=this.selectedFeature)&&v.isAggregate?[L.zoomToClusteredFeatures.clone(),L.browseClusteredFeatures.clone()]:[L.zoomToFeature.clone()]);return u}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(v){v=v||[];this._set("features",v);const {pendingPromisesCount:u,promiseCount:U,selectedFeatureIndex:X}=this,fa=U&&v.length;fa&&u&&-1===X?this.selectedFeatureIndex=0:fa&&-1!==X||(this.selectedFeatureIndex=v.length?
0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(v){const u=this.get("view.spatialReference.isWebMercator");v&&v.get("spatialReference.isWGS84")&&u&&(v=E.geographicToWebMercator(v));this._set("location",v)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},
{key:"promises",get:function(){return this._get("promises")||[]},set:function(v){this._pendingPromises.clear();this.features=[];Array.isArray(v)&&v.length?(this._set("promises",v),v=v.slice(0),v.forEach(u=>{this._pendingPromises.add(u);u.then(U=>{this._pendingPromises.has(u)&&this._updateFeatures(U);this._updatePendingPromises(u)},()=>this._updatePendingPromises(u))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:v,selectedFeatureIndex:u}=
this;return-1===u?null:v[u]||null}},{key:"selectedFeatureIndex",get:function(){const v=this._get("selectedFeatureIndex");return"number"===typeof v?v:-1},set:function(v){const {featureCount:u}=this;v=isNaN(v)||-1>v||!u?-1:(v+u)%u;this._set("selectedFeatureIndex",v)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return N}(C.GoToMixin(G));d.__decorate([h.property()],
b.prototype,"featurePage",void 0);d.__decorate([h.property()],b.prototype,"isLoadingFeature",null);d.__decorate([h.property({type:A})],b.prototype,"actions",void 0);d.__decorate([h.property({readOnly:!0})],b.prototype,"active",null);d.__decorate([h.property({readOnly:!0})],b.prototype,"allActions",null);d.__decorate([h.property({type:Boolean})],b.prototype,"defaultPopupTemplateEnabled",void 0);d.__decorate([h.property()],b.prototype,"autoCloseEnabled",void 0);d.__decorate([h.property()],b.prototype,
"autoOpenEnabled",void 0);d.__decorate([h.property()],b.prototype,"browseClusterEnabled",void 0);d.__decorate([h.property()],b.prototype,"content",void 0);d.__decorate([h.property({type:A,readOnly:!0})],b.prototype,"defaultActions",null);d.__decorate([h.property({readOnly:!0})],b.prototype,"featureCount",null);d.__decorate([h.property()],b.prototype,"features",null);d.__decorate([h.property()],b.prototype,"featuresPerPage",void 0);d.__decorate([h.property()],b.prototype,"featureViewModelAbilities",
void 0);d.__decorate([h.property({readOnly:!0})],b.prototype,"featureViewModels",void 0);d.__decorate([h.property()],b.prototype,"highlightEnabled",void 0);d.__decorate([h.property()],b.prototype,"includeDefaultActions",void 0);d.__decorate([h.property({type:B})],b.prototype,"location",null);d.__decorate([h.property({readOnly:!0})],b.prototype,"pendingPromisesCount",null);d.__decorate([h.property({readOnly:!0})],b.prototype,"selectedClusterBoundaryFeature",void 0);d.__decorate([h.property({readOnly:!0})],
b.prototype,"waitingForResult",null);d.__decorate([h.property({readOnly:!0})],b.prototype,"promiseCount",null);d.__decorate([h.property()],b.prototype,"promises",null);d.__decorate([h.property({value:null,readOnly:!0})],b.prototype,"selectedFeature",null);d.__decorate([h.property({value:-1})],b.prototype,"selectedFeatureIndex",null);d.__decorate([h.property({readOnly:!0})],b.prototype,"selectedFeatureViewModel",null);d.__decorate([h.property({readOnly:!0})],b.prototype,"state",null);d.__decorate([h.property()],
b.prototype,"title",void 0);d.__decorate([h.property()],b.prototype,"updateLocationEnabled",void 0);d.__decorate([h.property()],b.prototype,"view",void 0);d.__decorate([h.property()],b.prototype,"visible",void 0);d.__decorate([h.property()],b.prototype,"zoomFactor",void 0);d.__decorate([h.property()],b.prototype,"zoomToLocation",void 0);d.__decorate([h.property()],b.prototype,"centerAtLocation",null);return b=d.__decorate([k.subclass("esri.widgets.Popup.PopupViewModel")],b)})},"esri/widgets/Popup/actions":function(){define(["exports",
"../../support/actions/ActionButton"],function(e,d){const b=new d({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),z=new d({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),x=new d({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});d=new d({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});e.all=[b,z,d,x];e.browseClusteredFeatures=
d;e.removeSelectedFeature=z;e.zoomToClusteredFeatures=x;e.zoomToFeature=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),function(e,d,b,z,x,I){function Q(k){const {selectedFeature:E,location:r,view:l}=k;return l?"3d"===l.type?E||r:k.get("selectedFeature.geometry")||r:null}function V(k,E){if("3d"!==(null==E?void 0:E.type)||
!k||"esri.Graphic"!==k.declaredClass)return!0;if((E=E.getViewForGraphic(k))&&"whenGraphicBounds"in E){let r=!1;E.whenGraphicBounds(k,{useViewElevation:!0}).then(l=>{r=!l||!l.boundingBox||l.boundingBox[0]===l.boundingBox[3]&&l.boundingBox[1]===l.boundingBox[4]&&l.boundingBox[2]===l.boundingBox[5]}).catch(()=>{const l=new b("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:k});m.error(l)});return r}return!0}function T(k){return H.apply(this,arguments)}function H(){H=
d._asyncToGenerator(function*(k){const {location:E,selectedFeature:r,view:l,zoomFactor:y}=k,F=Q(k);if(!F)return k=new b("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:F,view:l}),m.error(k),Promise.reject(k);const J=l.scale/y,t=k.get("selectedFeature.geometry")||E,q=t&&"point"===t.type&&V(r,l);I.zoomToFeature.active=!0;I.zoomToFeature.disabled=!0;try{yield k.view.goTo({target:F,scale:q?J:void 0})}finally{I.zoomToFeature.active=!1,I.zoomToFeature.disabled=
!1,k.zoomToLocation=null,q&&(k.location=t)}});return H.apply(this,arguments)}function w(k){return h.apply(this,arguments)}function h(){h=d._asyncToGenerator(function*(k){const {selectedFeature:E,view:r}=k;if("2d"!==(null==r?void 0:r.type))throw k=new b("zoomToCluster:invalid-view","View must be 2d MapView.",{view:r}),m.error(k),k;if(!E.isAggregate)throw k=new b("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:E}),m.error(k),k;
k=yield r.whenLayerView(E.sourceLayer);const l=k.createQuery();l.aggregateIds=[E.getObjectId()];I.zoomToClusteredFeatures.active=!0;I.zoomToClusteredFeatures.disabled=!0;({extent:k}=yield k.queryExtent(l));yield r.goTo({target:k});I.zoomToClusteredFeatures.active=!1;I.zoomToClusteredFeatures.disabled=!1});return h.apply(this,arguments)}function c(){c=d._asyncToGenerator(function*(k){const {selectedFeature:E,view:r}=k;if("2d"!==(null==r?void 0:r.type))throw k=new b("displayClusterExtent:invalid-view",
"View must be 2d MapView.",{view:r}),m.error(k),k;if(!E.isAggregate)throw k=new b("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:E}),m.error(k),k;var l=yield r.whenLayerView(E.sourceLayer);const y=l.createQuery();y.aggregateIds=[E.getObjectId()];({extent:l}=yield l.queryExtent(y));k.selectedClusterBoundaryFeature.geometry=l;r.graphics.add(k.selectedClusterBoundaryFeature)});return c.apply(this,arguments)}function f(){f=d._asyncToGenerator(function*(k){const {selectedFeature:E,
view:r}=k;if("2d"!==(null==r?void 0:r.type))throw k=new b("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:r}),m.error(k),k;if(!E.isAggregate)throw k=new b("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:E}),m.error(k),k;k=yield r.whenLayerView(E.sourceLayer);const l=k.createQuery();l.aggregateIds=[E.getObjectId()];I.browseClusteredFeatures.active=!0;I.browseClusteredFeatures.disabled=!0;({features:k}=
yield k.queryFeatures(l));I.browseClusteredFeatures.active=!1;I.browseClusteredFeatures.disabled=!1;r.popup.open({features:[E].concat(k),featureMenuOpen:!0})});return f.apply(this,arguments)}const m=z.getLogger("esri.widgets.Popup.PopupViewModel");e.browseAggregateFeatures=function(k){return f.apply(this,arguments)};e.displayClusterExtent=function(k){return c.apply(this,arguments)};e.getSelectedTarget=Q;e.isZoomScreenSize=V;e.removeClusteredFeaturesForBrowsing=function(k){k.features=k.features.filter(E=>
E.isAggregate)};e.triggerAction=function(k){const {event:E,view:r}=k;({action:k}=E);var l=r&&r.popup;if(!k)return Promise.reject(new b("trigger-action:missing-arguments","Event has no action"));if(!l)return Promise.reject(new b("trigger-action:missing-arguments","view.popup is missing"));const {disabled:y,id:F}=k;if(!F)return Promise.reject(new b("trigger-action:invalid-action","action.id is missing"));if(y)return Promise.reject(new b("trigger-action:invalid-action","Action is disabled"));if(F===
I.zoomToFeature.id)return T(l.viewModel).catch(x.throwIfNotAbortError);if(F===I.zoomToClusteredFeatures.id)return w(l.viewModel);if(F===I.browseClusteredFeatures.id)return l.featureMenuOpen=!l.featureMenuOpen,l.viewModel.browseClusterEnabled=!l.viewModel.browseClusterEnabled,Promise.resolve();l.viewModel.browseClusterEnabled=!1;if(F===I.removeSelectedFeature.id){l.close();({selectedFeature:k}=l);if(!k)return Promise.reject(new b(`trigger-action:${I.removeSelectedFeature.id}`,"selectedFeature is required",
{selectedFeature:k}));({sourceLayer:l}=k);l?l.remove(k):r.graphics.remove(k)}return Promise.resolve()};e.zoomToClusterExtent=w;e.zoomToLocation=T;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(e,
d,b,z,x,I,Q,V){e.GoToMixin=T=>{T=function(H){function w(...h){h=H.call(this,...h)||this;h.goToOverride=null;h.view=null;return h}d._inheritsLoose(w,H);w.prototype.callGoTo=function(h){const {view:c}=this;return this.goToOverride?this.goToOverride(c,h):c.goTo(h.target,h.options)};return w}(T);b.__decorate([z.property()],T.prototype,"goToOverride",void 0);b.__decorate([z.property()],T.prototype,"view",void 0);return T=b.__decorate([V.subclass("esri.widgets.support.GoTo")],T)};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(e,d){e.isSupportedGraphicResultMessage=function(b){switch(b){case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports",
"../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(e,d,b,z){e.isSupportedGraphic=function(x){var I;if("graphics"!==(null==(I=x.layer)?void 0:I.type))return 1;if(b.isNone(x.geometry))return 2;switch(x.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return 3;default:return 3}return"on-the-ground"!==z.getGraphicEffectiveElevationMode(x)&&z.hasGraphicFeatureExpressionInfo(x)?4:0};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/support/elevationInfoUtils":function(){define(["exports","../core/maybe","../symbols/support/unitConversionUtils"],function(e,d,b){function z(H,w){return d.isNone(w)||!w.mode?H?"absolute-height":"on-the-ground":w.mode}function x(H,w){return z(d.isSome(H)?H.hasZ:!1,w)}function I(H){const w=Q(H);return x(H.geometry,w)}function Q(H){return H.layer&&"elevationInfo"in H.layer?H.layer.elevationInfo:null}function V(H,w,h,c,f,m,k=null){if(!d.isNone(m)){var E=d.isSome(k)?
k.mode:"absolute-height";if("on-the-ground"===E)return 0;a:{m=T(w,h,c,f,H,m);k=d.isSome(k)&&d.isSome(k.offset)?k.offset:0;switch(E){case "absolute-height":H=m-k;break a;case "relative-to-ground":H=m-(d.unwrapOr(H.elevationProvider.getElevation(w,h,c,f,"ground"),0)+k);break a;case "relative-to-scene":H=m-(d.unwrapOr(H.elevationProvider.getElevation(w,h,c,f,"scene"),0)+k);break a}H=void 0}return H}}function T(H,w,h,c,f,m){const k=d.isSome(m.offset)?m.offset:0;switch(m.mode){case "absolute-height":return h+
k;case "on-the-ground":return d.unwrapOr(f.elevationProvider.getElevation(H,w,0,c,"ground"),0);case "relative-to-ground":return h+d.unwrapOr(f.elevationProvider.getElevation(H,w,h,c,"ground"),0)+k;case "relative-to-scene":return h+d.unwrapOr(f.elevationProvider.getElevation(H,w,h,c,"scene"),0)+k}}e.getConvertedElevation=function(H,w,h,c=null){return V(H,w.x,w.y,w.hasZ?w.z:0,w.spatialReference,h,c)};e.getConvertedElevationFromVector=function(H,w,h,c,f=null){return V(H,w[0],w[1],2<w.length?w[2]:0,h,
c,f)};e.getEffectiveElevationMode=z;e.getGeometryEffectiveElevationMode=x;e.getGraphicEffectiveElevationInfo=function(H){var w=Q(H);H=x(H.geometry,w);w=d.isSome(w)&&"on-the-ground"!==H?d.unwrapOr(w.offset,0)*b.getMetersPerUnit(d.unwrapOr(w.unit,"meters")):0;return{mode:H,offset:w}};e.getGraphicEffectiveElevationMode=I;e.getZForElevationMode=function(H,w,h){if(!d.isNone(h)&&h.mode){var c=H.hasZ?H.z:0,f=d.isSome(h.offset)?h.offset:0;switch(h.mode){case "absolute-height":return c-f;case "on-the-ground":return 0;
case "relative-to-ground":return H=d.unwrapOr(w.elevationProvider.getElevation(H.x,H.y,H.z,H.spatialReference,"ground"),0)+f,c-H;case "relative-to-scene":return H=d.unwrapOr(w.elevationProvider.getElevation(H.x,H.y,H.z,H.spatialReference,"scene"),0)+f,c-H}}};e.hasGraphicFeatureExpressionInfo=function(H){if("on-the-ground"===I(H))return!1;H=Q(H);H=d.isSome(H)&&H.featureExpressionInfo?H.featureExpressionInfo.expression:null;return!(!H||"0"===H)};e.zValueInAbsoluteHeightMode=T;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils"],function(e,d,b,z){function x(I){var Q;return"graphics"!==(null==(Q=I.layer)?void 0:Q.type)?{result:1,geometry:null}:d.isNone(I.geometry)?{result:2,geometry:null}:"on-the-ground"!==z.getGraphicEffectiveElevationMode(I)&&z.hasGraphicFeatureExpressionInfo(I)?{result:4,
geometry:null}:"point"!==I.geometry.type&&"polyline"!==I.geometry.type&&("polygon"!==I.geometry.type||I.geometry instanceof b)?{result:3,geometry:null}:{result:0,geometry:I.geometry}}e.geometryOfSupportedGraphic=function(I){return x(I).geometry};e.isSupportedGraphic=function(I){return x(I).result};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Point ./Polygon ./projectionEllipsoid ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f){var m;x=m=function(k){function E(...l){l=k.call(this,...l)||this;l.center=null;l.geodesic=!1;l.numberOfPoints=60;l.radius=1E3;l.radiusUnit="meters";return l}e._inheritsLoose(E,k);var r=E.prototype;r.normalizeCtorArgs=function(l,y){if(!l||!l.center){if(l&&l.rings)return k.prototype.normalizeCtorArgs.call(this,l,y);l={center:l}}return{...k.prototype.normalizeCtorArgs.call(this),...l,...y}};r.initialize=function(){var l=this.center;const y=this.numberOfPoints;this.hasZ=
l&&l.hasZ;if(0===this.rings.length&&l){var F=b.convertUnit(this.radius,this.radiusUnit,"meters"),J=l.spatialReference,t="geographic";if(J.isWebMercator)t="webMercator";else if(null!=f[J.wkid]||J.wkt&&0===J.wkt.indexOf("PROJCS"))t="projected";if(this.geodesic){let q;switch(t){case "webMercator":q=c.webMercatorToGeographic(l);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":q=
l}l=this._createGeodesicCircle(q,F,y);"webMercator"===t&&(l=c.geographicToWebMercator(l))}else{let q;"webMercator"===t||"projected"===t?q=F/this._convert2Meters(1,l.spatialReference):"geographic"===t&&(q=b.lengthToDegrees(F,"meters",w.getReferenceEllipsoid(l.spatialReference).radius));l=this._createPlanarCircle(l,q,y)}this.spatialReference=l.spatialReference;this.addRing(l.rings[0])}};r.clone=function(){const {center:l,numberOfPoints:y,radius:F,radiusUnit:J,geodesic:t}=this;return new m({center:l.clone(),
numberOfPoints:y,radius:F,radiusUnit:J,geodesic:t})};r._createGeodesicCircle=function(l,y,F){let J=0;const t=[];for(;360>J;){const q=[0,0];h.directGeodeticSolver(q,[l.x,l.y],J,y);this.hasZ&&q.push(l.z);t.push(q);J+=360/F}t.push(t[0]);return new H(t)};r._createPlanarCircle=function(l,y,F){const J=[],t=2*Math.PI/F;for(let O=0;O<F;++O){var q=t*O;q=[l.x+Math.cos(-q)*y,l.y+Math.sin(-q)*y];this.hasZ&&q.push(l.z);J.push(q)}J.push(J[0]);return new H({spatialReference:l.spatialReference,rings:[J]})};r._convert2Meters=
function(l,y){if(null!=f[y.wkid])y=f.values[f[y.wkid]];else{y=y.wkt;const F=y.lastIndexOf(",")+1,J=y.lastIndexOf("]]");y=parseFloat(y.substring(F,J))}return l*y};return E}(H);d.__decorate([z.property({type:T})],x.prototype,"center",void 0);d.__decorate([z.property()],x.prototype,"geodesic",void 0);d.__decorate([z.property()],x.prototype,"numberOfPoints",void 0);d.__decorate([z.property()],x.prototype,"radius",void 0);d.__decorate([z.property()],x.prototype,"radiusUnit",void 0);return x=m=d.__decorate([V.subclass("esri.geometry.Circle")],
x)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),function(e,d,b,z,x,I,Q,V,T){function H(r){if(!r)return null;if(r.isGeographic&&r.wkid){var l=x.spheroids[r.wkid];if(l)return l}return r.wkt&&((r=x.WKT_SPHEROID_REGEX.exec(r.wkt))&&2===r.length?(l=r[1].split(","),!l||3>l.length?r=null:(r=parseFloat(l[1]),l=parseFloat(l[2]),r=isNaN(r)||isNaN(l)?
null:{a:r,f:0===l?0:1/l})):r=null,r)?r:null}function w(r){r=H(r||T.WGS84);if("b"in r&&"eSq"in r&&"radius"in r)return r;const l=r.a*(1-r.f);return Object.assign(r,{b:l,eSq:1-(l/r.a)**2,radius:(2*r.a+l)/3,densificationRatio:1E4/((2*r.a+l)/3)})}function h(r){return 0>r?r+360:r}function c(r,l,y){const {a:F,eSq:J}=w(y);y=Math.sqrt(J);const t=Math.sin(l[1]*x.toRadians);l=F*l[0]*x.toRadians;y=0<J?F*(1-J)*(t/(1-J*t*t)-1/(2*y)*Math.log((1-y*t)/(1+y*t)))*.5:F*t;r[0]=l;r[1]=y;return r}function f(r){return null!==
H(r)}function m(r,l){if("polyline"!==r.type&&"polygon"!==r.type)throw new b("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:y}=r;if(!f(y))throw new b("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var F="polyline"===r.type?r.paths:r.rings;const J=[],t=[0,0],q={distance:null};for(const n of F){F=[];J.push(F);F.push([n[0][0],n[0][1]]);var O=n[0][0],L=n[0][1];let G,C;for(let B=0;B<
n.length-1;B++){G=n[B+1][0];C=n[B+1][1];if(O===G&&L===C)continue;const D=[O,L];E(q,[O,L],[G,C],y);const {azimuth:A,distance:K}=q;O=K/l;if(1<O){for(L=1;L<=O-1;L++)k(t,D,A,L*l,y),F.push(t.slice(0));k(t,D,A,(K+Math.floor(O-1)*l)/2,y);F.push(t.slice(0))}k(t,D,A,K,y);F.push(t.slice(0));O=t[0];L=t[1]}}return"polyline"===r.type?new I({paths:J,spatialReference:y}):new Q({rings:J,spatialReference:y})}function k(r,l,y,F,J){const t=l[0]*x.toRadians;l=l[1]*x.toRadians;y*=x.toRadians;const {a:q,b:O,f:L}=w(J);
J=Math.sin(y);y=Math.cos(y);var n=(1-L)*Math.tan(l);l=1/Math.sqrt(1+n*n);const G=n*l,C=Math.atan2(n,y);n=l*J;const B=n*n;var D=1-B,A=D*(q*q-O*O)/(O*O);const K=1+A/16384*(4096+A*(-768+A*(320-175*A))),P=A/1024*(256+A*(-128+A*(74-47*A)));A=F/(O*K);let N=2*Math.PI,g,v,u,U;for(;1E-12<Math.abs(A-N);)u=Math.cos(2*C+A),g=Math.sin(A),v=Math.cos(A),U=P*g*(u+P/4*(v*(-1+2*u*u)-P/6*u*(-3+4*g*g)*(-3+4*u*u))),N=A,A=F/(O*K)+U;F=G*g-l*v*y;D=L/16*D*(4+L*(4-3*D));F=Math.atan2(G*v+l*g*y,(1-L)*Math.sqrt(B+F*F))/x.toRadians;
r[0]=(t+(Math.atan2(g*J,l*v-G*g*y)-(1-D)*L*n*(A+D*g*(u+D*v*(-1+2*u*u)))))/x.toRadians;r[1]=F;return r}function E(r,l,y,F){var J=l[0]*x.toRadians;l=l[1]*x.toRadians;var t=y[0]*x.toRadians;y=y[1]*x.toRadians;const {a:q,b:O,f:L,radius:n}=w(F),G=t-J;var C=Math.atan((1-L)*Math.tan(l)),B=Math.atan((1-L)*Math.tan(y));F=Math.sin(C);C=Math.cos(C);const D=Math.sin(B);B=Math.cos(B);let A=1E3,K=G,P,N,g;let v,u,U;do{var X=Math.sin(K);var fa=Math.cos(K);g=Math.sqrt(B*X*B*X+(C*D-F*B*fa)*(C*D-F*B*fa));if(0===g)return r.distance=
0,r.azimuth=void 0,r.reverseAzimuth=void 0,r;fa=F*D+C*B*fa;v=Math.atan2(g,fa);u=C*B*X/g;N=1-u*u;X=fa-2*F*D/N;isNaN(X)&&(X=0);U=L/16*N*(4+L*(4-3*N));P=K;K=G+(1-U)*L*u*(v+U*g*(X+U*fa*(-1+2*X*X)))}while(1E-12<Math.abs(K-P)&&0<--A);if(0===A)return F=Math.acos(Math.sin(l)*Math.sin(y)+Math.cos(l)*Math.cos(y)*Math.cos(t-J))*n,J=t-J,r.azimuth=Math.atan2(Math.sin(J)*Math.cos(y),Math.cos(l)*Math.sin(y)-Math.sin(l)*Math.cos(y)*Math.cos(J))/x.toRadians,r.distance=F,r.reverseAzimuth=void 0,r;J=N*(q*q-O*O)/(O*
O);l=J/1024*(256+J*(-128+J*(74-47*J)));t=Math.atan2(C*Math.sin(K),C*D*Math.cos(K)-F*B);r.azimuth=Math.atan2(B*Math.sin(K),C*D-F*B*Math.cos(K))/x.toRadians;r.distance=O*(1+J/16384*(4096+J*(-768+J*(320-175*J))))*(v-l*g*(X+l/4*(fa*(-1+2*X*X)-l/6*X*(-3+4*g*g)*(-3+4*X*X))));r.reverseAzimuth=t/x.toRadians;return r}e.directGeodeticSolver=k;e.geodesicAreas=function(r,l="square-meters"){if(r.some(t=>!f(t.spatialReference)))throw new b("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");
const y=[];for(var F=0;F<r.length;F++){var J=r[F];const {radius:t,densificationRatio:q}=w(J.spatialReference);y.push(m(J,t*q))}r=[];F=[0,0];J=[0,0];for(let t=0;t<y.length;t++){const {rings:q,spatialReference:O}=y[t];let L=0;for(let n=0;n<q.length;n++){const G=q[n];c(F,G[0],O);c(J,G[G.length-1],O);let C=J[0]*F[1]-F[0]*J[1];for(let B=0;B<G.length-1;B++)c(F,G[B+1],O),c(J,G[B],O),C+=J[0]*F[1]-F[0]*J[1];L+=C}L=z.convertUnit(L,"square-meters",l);r.push(L/-2)}return r};e.geodesicDensify=m;e.geodesicDistance=
function(r,l,y="meters"){if(!r||!l)throw new b("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!r.spatialReference||!l.spatialReference)throw new b("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!r.spatialReference.equals(l.spatialReference))throw new b("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:F}=r;if(!f(F))throw new b("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");if(r.equals(l))return{distance:0,azimuth:0,reverseAzimuth:0};const J={distance:null};E(J,[r.x,r.y],[l.x,l.y],F);J.distance=z.convertUnit(J.distance,"meters",y);J.azimuth=h(J.azimuth);J.reverseAzimuth=h(J.reverseAzimuth);return J};e.geodesicLengths=function(r,l="meters"){if(!r)throw new b("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(r.some(J=>!f(J.spatialReference)))throw new b("geodesic-lengths:invalid-spatial-reference",
"the input geometries spatial reference is not supported");const y=[];for(let J=0;J<r.length;J++){var F=r[J];const {spatialReference:t}=F;F="polyline"===F.type?F.paths:F.rings;let q=0;for(let O=0;O<F.length;O++){const L=F[O];let n=0;for(let G=1;G<L.length;G++){const C=L[G-1][0],B=L[G][0],D=L[G-1][1],A=L[G][1];if(D!==A||C!==B){const K={distance:null};E(K,[C,D],[B,A],t);n+=K.distance}}q+=n}q=z.convertUnit(q,"meters",l);y.push(q)}return y};e.inverseGeodeticSolver=E;e.isSupported=f;e.pointFromDistance=
function(r,l,y){if(!r||null==l||null==y)throw new b("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>y||360<y)throw new b("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!r.spatialReference)throw new b("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:F}=r;if(!f(F))throw new b("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");const J=[0,0];k(J,[r.x,r.y],y,l,F);return new V({x:J[0],y:J[1],spatialReference:F})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(e,d,b,z){e.isSupportedGraphic=function(x){var I;if("graphics"!==(null==(I=x.layer)?void 0:I.type))return 1;
if(b.isNone(x.geometry))return 2;switch(x.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return 0;default:return 3}return(I=b.isSome(x.symbol)&&"point-3d"===x.symbol.type&&x.symbol.symbolLayers)&&0<I.length&&I.some(Q=>"object"===Q.type)?"on-the-ground"!==z.getGraphicEffectiveElevationMode(x)&&z.hasGraphicFeatureExpressionInfo(x)?4:0:5};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/draw/support/layerUtils":function(){define(["exports"],
function(e){e.addUniqueLayer=function(d,b,z){if(b&&d&&d.map){({map:d}=d);var x=d.layers.find(I=>I===b);x||d.add(b,z);void 0!==z&&null!==z&&d.layers.reorder(x,z)}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(e){e.SKETCH_KEYS={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};Object.defineProperty(e,"__esModule",
{value:!0})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../../geometry/SpatialReference ./FeatureSnappingEngine ./SelfSnappingEngine ./SnappingOptions ./snappingUtils ./candidates/IntersectionSnappingCandidate".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y){e.SnappingManager=function(F){function J(q){q=F.call(this,q)||this;q.options=new r;q.engines=[];q._currentMainCandidate=null;q._currentOtherActiveCandidates=[];return q}d._inheritsLoose(J,F);var t=J.prototype;t.initialize=function(){this.handles.add([V.react(()=>{const {effectiveFeatureEnabled:q,effectiveSelfEnabled:O,touchSensitivityMultiplier:L,distance:n}=this.options;return{effectiveFeatureEnabled:q,effectiveSelfEnabled:O,touchSensitivityMultiplier:L,
distance:n}},()=>{this.doneSnapping();this.emit("changed")},V.sync),V.react(()=>this.options,q=>{for(const O of this.engines)O.options=q},V.sync),V.react(()=>this.view.ready,q=>this.onViewReady(q),V.syncAndInitial)])};t.destroy=function(){this.destroyEngines()};t.onViewReady=function(q){this.destroyEngines();if(q){var O,L;this.engines=[new E.SelfSnappingEngine({view:this.view,options:this.options}),new k.FeatureSnappingEngine({view:this.view,spatialReference:null!=(O=null==(L=this.view)?void 0:L.spatialReference)?
O:m.WGS84,options:this.options})]}};t.destroyEngines=function(){for(const q of this.engines)q.destroy();this.engines.length=0};t.snap=function(){var q=d._asyncToGenerator(function*(O,L,n){const G=L.coordinateHelper.pointToVector(O),C=yield this.fetchCandidates(G,L,n);return{get valid(){return!Q.isAborted(n)},apply:()=>{const {snappedPoint:B,hints:D}=this.processCandidates(G,C,L);this.removeVisualization();I.isSome(L.visualizer)&&this.handles.add(L.visualizer.draw(D,{coordinateHelper:L.coordinateHelper,
elevationInfo:L.elevationInfo,view:this.view}),"visualization-handle");return B}}});return function(O,L,n){return q.apply(this,arguments)}}();t.update=function(q,O){this.removeVisualization();let L=q;const n=[];if(I.isSome(this._currentMainCandidate)){const G=O.coordinateHelper;q=G.pointToVector(q);const C=this._currentMainCandidate.constraint.closestTo(q);if(l.squareDistance(l.anyMapPointToScreenPoint(q,G,O.elevationInfo,this.view),l.anyMapPointToScreenPoint(C,G,O.elevationInfo,this.view))<this.squaredPointProximityThreshold(O.pointer)){L=
G.vectorToDehydratedPoint(C);this._currentMainCandidate.targetPoint=C;n.push(...this._currentMainCandidate.hints);for(const B of this._currentOtherActiveCandidates)B.targetPoint=C,n.push(...B.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}I.isSome(O.visualizer)&&this.handles.add(O.visualizer.draw(n,{coordinateHelper:O.coordinateHelper,elevationInfo:O.elevationInfo,view:this.view}),"visualization-handle");return L};t.doneSnapping=function(){this.removeVisualization();
this._currentMainCandidate=null;this._currentOtherActiveCandidates=[]};t.removeVisualization=function(){this.handles.remove("visualization-handle")};t.fetchCandidates=function(){var q=d._asyncToGenerator(function*(O,L,n){return(yield Promise.all(this.engines.map(G=>G.fetchCandidates(O,L,n)))).flat()});return function(O,L,n){return q.apply(this,arguments)}}();t.processCandidates=function(q,O,L){if(1>O.length)return this.doneSnapping(),{snappedPoint:L.coordinateHelper.vectorToDehydratedPoint(q),hints:[]};
l.sortCandidatesInPlace(q,O);const n=this._currentMainCandidate;if(I.isSome(n)){const G=this.findOldConstraintInNewCandidates(n,O);if(0<=G)if(O[G]instanceof y.IntersectionSnappingCandidate){if(f.squaredDistance(q,n.targetPoint)<this.squaredPointProximityThreshold(L.pointer))return this.updateSnappingCandidate(n,O,L)}else return this.intersectWithOtherCandidates(G,O,q,L)}return this.intersectWithOtherCandidates(0,O,q,L)};t.findOldConstraintInNewCandidates=function(q,O){return q instanceof y.IntersectionSnappingCandidate?
0<=this.findOldCandidateIndex(O,q.first)&&0<=this.findOldCandidateIndex(O,q.second)?0:-1:this.findOldCandidateIndex(O,q)};t.intersectWithOtherCandidates=function(q,O,L,n){const G=O[q],C=[],B=n.coordinateHelper;for(let D=0;D<O.length;++D){if(D===q)continue;const A=O[D];for(const K of G.constraint.intersect(A.constraint)){const P=B.fromXYZ(K.intersection,G.targetPoint[2]);C.push([new y.IntersectionSnappingCandidate(B,P,G,A),l.squareDistance(l.anyMapPointToScreenPoint(L,n.coordinateHelper,n.elevationInfo,
this.view),l.anyMapPointToScreenPoint(P,n.coordinateHelper,n.elevationInfo,this.view))])}}return 0<C.length&&(C.sort((D,A)=>D[1]-A[1]),C[0][1]<this.squaredPointProximityThreshold(n.pointer))?this.updateSnappingCandidate(C[0][0],O,n):this.updateSnappingCandidate(G,O,n)};t.updateSnappingCandidate=function(q,O,L){this.doneSnapping();this._currentMainCandidate=q;const n=this._currentMainCandidate.targetPoint,G=[];G.push(...q.hints);for(const C of O){if(q instanceof y.IntersectionSnappingCandidate){if(C.constraint.objectEqual(q.first.constraint)||
C.constraint.objectEqual(q.second.constraint))continue}else if(C.constraint.objectEqual(q.constraint))continue;C.constraint.check(n)&&(C.targetPoint=n,this._currentOtherActiveCandidates.push(C),G.push(...C.hints))}return{snappedPoint:L.coordinateHelper.vectorToDehydratedPoint(n),hints:G}};t.squaredPointProximityThreshold=function(q){return"touch"===q?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};t.findOldCandidateIndex=function(q,O){let L=-1;for(let n=0;n<q.length;++n)if(O.constraint.objectEqual(q[n].constraint)){L=
n;break}return L};d._createClass(J,[{key:"updating",get:function(){return this.engines.some(q=>q.updating)}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:q,touchSensitivityMultiplier:O}=this.options,L=q*O;return L*L}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle"),engines:this.engines}}}]);return J}(z.EventedMixin(x.HandleOwner));
b.__decorate([T.property({constructOnly:!0})],e.SnappingManager.prototype,"view",void 0);b.__decorate([T.property()],e.SnappingManager.prototype,"options",void 0);b.__decorate([T.property({readOnly:!0})],e.SnappingManager.prototype,"updating",null);b.__decorate([T.property()],e.SnappingManager.prototype,"engines",void 0);b.__decorate([T.property()],e.SnappingManager.prototype,"squaredMouseProximityTreshold",null);b.__decorate([T.property()],e.SnappingManager.prototype,"squaredTouchProximityThreshold",
null);e.SnappingManager=b.__decorate([c.subclass("esri.views.interactive.snapping.SnappingManager")],e.SnappingManager);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(e,d){function b(u,U){u[0]=U[0];u[1]=U[1];return u}function z(u,U,X){u[0]=U;u[1]=X;return u}function x(u,U,X){u[0]=U[0]+X[0];u[1]=U[1]+X[1];return u}function I(u,U,X){u[0]=U[0]-X[0];u[1]=U[1]-X[1];return u}function Q(u,U,X){u[0]=U[0]*X[0];u[1]=U[1]*X[1];return u}
function V(u,U,X){u[0]=U[0]/X[0];u[1]=U[1]/X[1];return u}function T(u,U){u[0]=Math.ceil(U[0]);u[1]=Math.ceil(U[1]);return u}function H(u,U){u[0]=Math.floor(U[0]);u[1]=Math.floor(U[1]);return u}function w(u,U,X){u[0]=Math.min(U[0],X[0]);u[1]=Math.min(U[1],X[1]);return u}function h(u,U,X){u[0]=Math.max(U[0],X[0]);u[1]=Math.max(U[1],X[1]);return u}function c(u,U){u[0]=Math.round(U[0]);u[1]=Math.round(U[1]);return u}function f(u,U,X){u[0]=U[0]*X;u[1]=U[1]*X;return u}function m(u,U,X,fa){u[0]=U[0]+X[0]*
fa;u[1]=U[1]+X[1]*fa;return u}function k(u,U){const X=U[0]-u[0];u=U[1]-u[1];return Math.sqrt(X*X+u*u)}function E(u,U){const X=U[0]-u[0];u=U[1]-u[1];return X*X+u*u}function r(u){const U=u[0];u=u[1];return Math.sqrt(U*U+u*u)}function l(u){const U=u[0];u=u[1];return U*U+u*u}function y(u,U){u[0]=-U[0];u[1]=-U[1];return u}function F(u,U){u[0]=1/U[0];u[1]=1/U[1];return u}function J(u,U){var X=U[0];const fa=U[1];X=X*X+fa*fa;0<X&&(X=1/Math.sqrt(X),u[0]=U[0]*X,u[1]=U[1]*X);return u}function t(u,U){return u[0]*
U[0]+u[1]*U[1]}function q(u,U,X){U=U[0]*X[1]-U[1]*X[0];u[0]=u[1]=0;u[2]=U;return u}function O(u,U,X,fa){const ma=U[0];U=U[1];u[0]=ma+fa*(X[0]-ma);u[1]=U+fa*(X[1]-U);return u}function L(u,U){U=U||1;const X=2*d.RANDOM()*Math.PI;u[0]=Math.cos(X)*U;u[1]=Math.sin(X)*U;return u}function n(u,U,X){const fa=U[0];U=U[1];u[0]=X[0]*fa+X[2]*U;u[1]=X[1]*fa+X[3]*U;return u}function G(u,U,X){const fa=U[0];U=U[1];u[0]=X[0]*fa+X[2]*U+X[4];u[1]=X[1]*fa+X[3]*U+X[5];return u}function C(u,U,X){const fa=U[0];U=U[1];u[0]=
X[0]*fa+X[3]*U+X[6];u[1]=X[1]*fa+X[4]*U+X[7];return u}function B(u,U,X){const fa=U[0];U=U[1];u[0]=X[0]*fa+X[4]*U+X[12];u[1]=X[1]*fa+X[5]*U+X[13];return u}function D(u,U,X,fa){const ma=U[0]-X[0];U=U[1]-X[1];const ta=Math.sin(fa);fa=Math.cos(fa);u[0]=ma*fa-U*ta+X[0];u[1]=ma*ta+U*fa+X[1];return u}function A(u,U){var X=u[0];u=u[1];const fa=U[0];U=U[1];let ma=X*X+u*u;0<ma&&(ma=1/Math.sqrt(ma));let ta=fa*fa+U*U;0<ta&&(ta=1/Math.sqrt(ta));X=(X*fa+u*U)*ma*ta;return 1<X?0:-1>X?Math.PI:Math.acos(X)}function K(u){return"vec2("+
u[0]+", "+u[1]+")"}function P(u,U){return u[0]===U[0]&&u[1]===U[1]}function N(u,U){const X=u[0];u=u[1];const fa=U[0];U=U[1];return Math.abs(X-fa)<=d.EPSILON*Math.max(1,Math.abs(X),Math.abs(fa))&&Math.abs(u-U)<=d.EPSILON*Math.max(1,Math.abs(u),Math.abs(U))}function g(u,U,X,fa,ma){let ta=U[0]-X[0];X=U[1]-X[1];ma=(fa[0]*ta+fa[1]*X)*(ma-1);ta=fa[0]*ma;X=fa[1]*ma;u[0]=U[0]+ta;u[1]=U[1]+X;return u}const v=Object.freeze({__proto__:null,copy:b,set:z,add:x,subtract:I,multiply:Q,divide:V,ceil:T,floor:H,min:w,
max:h,round:c,scale:f,scaleAndAdd:m,distance:k,squaredDistance:E,length:r,squaredLength:l,negate:y,inverse:F,normalize:J,dot:t,cross:q,lerp:O,random:L,transformMat2:n,transformMat2d:G,transformMat3:C,transformMat4:B,rotate:D,angle:A,str:K,exactEquals:P,equals:N,projectAndScale:g,len:r,sub:I,mul:Q,div:V,dist:k,sqrDist:E,sqrLen:l});e.add=x;e.angle=A;e.ceil=T;e.copy=b;e.cross=q;e.dist=k;e.distance=k;e.div=V;e.divide=V;e.dot=t;e.equals=N;e.exactEquals=P;e.floor=H;e.inverse=F;e.len=r;e.length=r;e.lerp=
O;e.max=h;e.min=w;e.mul=Q;e.multiply=Q;e.negate=y;e.normalize=J;e.projectAndScale=g;e.random=L;e.rotate=D;e.round=c;e.scale=f;e.scaleAndAdd=m;e.set=z;e.sqrDist=E;e.sqrLen=l;e.squaredDistance=E;e.squaredLength=l;e.str=K;e.sub=I;e.subtract=I;e.transformMat2=n;e.transformMat2d=G;e.transformMat3=C;e.transformMat4=B;e.vec2=v})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/HandleOwner ../../../core/Handles ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ./SnappingConstraint ./snappingUtils ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F){d.FeatureSnappingEngine=function(q){function O(n){n=q.call(this,n)||this;n.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}};return n}b._inheritsLoose(O,q);var L=O.prototype;L.initialize=function(){this.updatingHandles.add(this,"snappingSources",()=>{this.notifyChange("updating")},1);V.isSome(this.view)&&this.handles.add([this.view.on("layerview-create",n=>this.updateLayerView(n.layer,
n.layerView)),this.view.on("layerview-destroy",n=>this.updateLayerView(n.layer,null))])};L.updateLayerView=function(n,G){for(const [,C]of this.snappingSources)C.snappingSource.layerSource.layer===n&&(C.layerView=G)};L.destroy=function(){this._set("options",null);for(const [,n]of this.snappingSources)n.destroy()};L.fetchCandidates=function(){var n=b._asyncToGenerator(function*(G,C,B){if(!this.options.effectiveFeatureEnabled)return[];var D=[];const A=this.computeScreeenSizeDistanceParameters(G,C),K=
{distance:A,point:G,coordinateHelper:C.coordinateHelper,types:this.types,filter:null};for(const [,{snappingSource:P,layerView:N}]of this.snappingSources)!P.layerSource.enabled||V.isSome(N)&&N.suspended||D.push(P.fetchCandidates(K,B).then(g=>g.filter(v=>!this.candidateIsExcluded(P,v,C.excludeFeature))));D=(yield T.eachAlwaysValues(D)).flat();this.addRightAngleCandidates(D,G,A,C);T.throwIfAborted(B);r.sortCandidatesInPlace(G,D);return D});return function(G,C,B){return n.apply(this,arguments)}}();L.addRightAngleCandidates=
function(n,G,C,B){var D,A,K,P,N,g,v,u;const U=V.isSome(B.vertexHandle)?null==(D=B.vertexHandle.rightEdge)?void 0:null==(A=D.rightVertex)?void 0:A.pos:V.isSome(B.editGeometryOperations)&&"polygon"===B.editGeometryOperations.data.type?null==(K=V.unwrap(null==(P=B.editGeometryOperations.data.components[0])?void 0:P.getFirstVertex()))?void 0:K.pos:null;D=V.isSome(B.vertexHandle)?null==(N=B.vertexHandle.leftEdge)?void 0:null==(g=N.leftVertex)?void 0:g.pos:V.isSome(B.editGeometryOperations)?null==(v=V.unwrap(null==
(u=B.editGeometryOperations.data.components[0])?void 0:u.getLastVertex()))?void 0:v.pos:null;N=n.length;for(g=0;g<N;g++)this.addRightAngleCandidate(n[g],D,G,C,B,n),this.addRightAngleCandidate(n[g],U,G,C,B,n)};L.addRightAngleCandidate=function(n,G,C,B,D,A){if(!V.isNone(G)&&n instanceof l.EdgeSnappingCandidate){var K=n.constraint.closestTo(G),P=(K[0]-C[0])/B.x;C=(K[1]-C[1])/B.y;1>=P*P+C*C&&(D=D.coordinateHelper,A.push(new F.RightAngleSnappingCandidate({coordinateHelper:D,targetPoint:K,otherVertex:G,
otherVertexType:0,previousVertex:n.constraint.start,constraint:new E.RayConstraint(D,G,K),objectId:n.objectId})))}};L.computeScreeenSizeDistanceParameters=function(n,G){const C=this.options.distance*("touch"===G.pointer?this.options.touchSensitivityMultiplier:1);return V.isNone(this.view)?{x:C,y:C}:"2d"===this.view.type?{x:C*this.view.resolution,y:C*this.view.resolution}:this.computeScreeenSizeDistanceParameters3D(n,C,this.view,G)};L.computeScreeenSizeDistanceParameters3D=function(n,G,C,B){const {coordinateHelper:D,
elevationInfo:A}=B,K=C.state.camera.computeScreenPixelSizeAt(r.anyMapPointToRender(n,D,A,C,t))*C.renderCoordsHelper.unitInMeters/C.mapCoordsHelper.unitInMeters;G*=K;const P=this.computeScreenMagnitudeOfMapOffset(n,K,0,C,B);n=this.computeScreenMagnitudeOfMapOffset(n,0,K,C,B);return{x:G/P,y:G/n}};L.computeScreenMagnitudeOfMapOffset=function(n,G,C,B,{coordinateHelper:D,elevationInfo:A}){const K=D.clone(n);K[0]+=G;K[1]+=C;n=r.anyMapPointToScreenPoint(n,D,A,B);D=r.anyMapPointToScreenPoint(K,D,A,B);B=D.x-
n.x;D=D.y-n.y;return Math.sqrt(B*B+D*D)};L.candidateIsExcluded=function(n,G,C){if(V.isNone(C))return!1;G=this.getCandidateObjectId(G);if(V.isNone(G))return!1;n=n.layerSource.layer;return"graphics"===n.type?C.uid===G:C.sourceLayer===n&&C.attributes&&"objectIdField"in n?C.attributes[n.objectIdField]===G:!1};L.getCandidateObjectId=function(n){return n instanceof y.FeatureSnappingCandidate?n.objectId:null};L.createSourceInfo=function(n){const G=this.createFeatureSnappingSourceType(n);if(V.isNone(G))return null;
if("loading"in G)return this.updatingHandles.addPromise(G.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const C=V.isSome(this.view)?this.view.allLayerViews.find(B=>B.layer===n.layer):null;return new J(G.source,C)};L.createFeatureSnappingSourceType=function(n){switch(n.layer.type){case "feature":case "geojson":case "csv":case "subtype-group":case "wfs":return this.createFeatureSnappingSourceFeatureLayer(n);case "graphics":return this.createFeatureSnappingSourceGraphicsLayer(n)}return null};
L.createFeatureSnappingSourceFeatureLayer=function(n){switch(n.layer.source.type){case "feature-layer":var G=this.getSourceModule("featureService");return V.isSome(G.module)?{source:new G.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:n})}:{loading:G.loader};case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==n.layer.geometryType)return G=this.getSourceModule("featureCollection"),V.isSome(G.module)?{source:new G.module.FeatureCollectionSnappingSource({layerSource:n})}:
{loading:G.loader}}return null};L.createFeatureSnappingSourceGraphicsLayer=function(n){const G=this.getSourceModule("graphics");return V.isSome(G.module)?{source:new G.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:n})}:{loading:G.loader}};L.getSourceModule=function(n){const G=this.sourceModules[n];return V.isNone(G.loader)?(n=this.loadSourceModule(n).then(C=>{G.module=C}),G.loader=n,{module:G.module,loader:n}):{module:G.module,loader:G.loader}};L.loadSourceModule=
function(n){switch(n){case "featureService":return this.updatingHandles.addPromise(new Promise((G,C)=>e(["./featureSources/FeatureServiceSnappingSource"],G,C)));case "featureCollection":return this.updatingHandles.addPromise(new Promise((G,C)=>e(["./featureSources/FeatureCollectionSnappingSource"],G,C)));case "graphics":return this.updatingHandles.addPromise(new Promise((G,C)=>e(["./featureSources/GraphicsSnappingSource"],G,C)))}return null};b._createClass(O,[{key:"updating",get:function(){return Q.someMap(this.snappingSources,
({snappingSource:n})=>n.updating)||this.updatingHandles.updating}},{key:"snappingSources",get:function(){var n;const G=this._get("snappingSources")||new Map,C=new Map;if(null!=(n=this.options)&&n.featureSources)for(const D of this.options.featureSources.items){n=D.layer.uid;var B=G.get(n);B?(G.delete(n),C.set(n,B)):D.layer.loaded?(B=this.createSourceInfo(D),V.isSome(B)&&C.set(n,B)):this.updatingHandles.addPromise(D.layer.load())}for(const [,D]of G)D.destroy();return C}},{key:"types",get:function(){return 3}}]);
return O}(x.HandleOwner);z.__decorate([w.property({constructOnly:!0})],d.FeatureSnappingEngine.prototype,"spatialReference",void 0);z.__decorate([w.property({constructOnly:!0})],d.FeatureSnappingEngine.prototype,"view",void 0);z.__decorate([w.property()],d.FeatureSnappingEngine.prototype,"options",void 0);z.__decorate([w.property({readOnly:!0})],d.FeatureSnappingEngine.prototype,"updating",null);z.__decorate([w.property({readOnly:!0})],d.FeatureSnappingEngine.prototype,"snappingSources",null);d.FeatureSnappingEngine=
z.__decorate([m.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],d.FeatureSnappingEngine);let J=function(){function q(O,L){this.snappingSource=O;this.layerView=L;this.handles=new I;L=this.snappingSource.layerSource.layer;"refresh"in L&&this.handles.add(L.on("refresh",()=>O.refresh()));this.handles.add([H.init(O,"updating",n=>O.layerSource.updating=n,!0),H.init(O,"availability",n=>O.layerSource.availability=n,!0)])}q.prototype.destroy=function(){this.snappingSource.destroy();this.handles.destroy()};
return q}();const t=k.create();Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./snappingUtils ../../support/geometry2dUtils".split(" "),function(e,d,b,z,x,I,Q){let V=function(m){this.coordinateHelper=m},T=function(m){function k(r,l){r=m.call(this,r)||this;r.point=l;return r}d._inheritsLoose(k,m);var E=k.prototype;E.objectEqual=
function(r){return r instanceof k?I.objectEqual(this.point,r.point):!1};E.check=function(r){return b.squaredDistance(r,this.point)<x.defaults.pointThreshold};E.closestTo=function(){return this.coordinateHelper.clone(this.point)};E.intersect=function(r){const l=[];r instanceof H?l.push(...Q.intersectLineAndPoint({start:r.start,end:r.end,type:r instanceof h?1:0},this.point)):r instanceof f&&l.push(...Q.intersectCircleAndPoint(r.center,r.radius,this.point));return l.map(y=>new c(this.coordinateHelper,
y,this,r))};return k}(V),H=function(m){function k(r,l,y){r=m.call(this,r)||this;r.start=l;r.end=y;return r}d._inheritsLoose(k,m);var E=k.prototype;E.objectEqual=function(r){return r instanceof k?I.objectEqual(this.start,r.start)&&I.objectEqual(this.end,r.end):!1};E.intersect=function(r){const l=[];r instanceof T?l.push(...Q.intersectLineAndPoint({start:this.start,end:this.end,type:this instanceof h?1:0},r.point)):r instanceof k?l.push(...Q.intersectLineAndRay({start:this.start,end:this.end,type:this instanceof
h?1:0},{start:r.start,end:r.end,type:r instanceof h?1:0})):r instanceof f&&l.push(...Q.intersectLineLikeAndCircle({start:this.start,end:this.end,type:this instanceof h?1:0},r.center,r.radius));return l.map(y=>new c(this.coordinateHelper,y,this,r))};return k}(V),w=function(m){function k(r,l,y){r=m.call(this,r,l,y)||this;r.dir=z.create();r.p=z.create();return r}d._inheritsLoose(k,m);var E=k.prototype;E.objectEqual=function(r){return r instanceof k?m.prototype.objectEqual.call(this,r):!1};E.check=function(r){b.subtract(this.dir,
this.end,this.start);b.subtract(this.p,r,this.start);return 0<=b.dot(this.dir,this.p)?Q.pointToLineDistance(r,this.start,this.end)<x.defaults.pointOnLineThreshold:!1};E.closestTo=function(r){const l=this.coordinateHelper.clone(r);Q.projectPointToRay(l,r,this.start,this.end);return l};return k}(H),h=function(m){function k(r,l,y){return m.call(this,r,l,y)||this}d._inheritsLoose(k,m);var E=k.prototype;E.objectEqual=function(r){return r instanceof k?m.prototype.objectEqual.call(this,r):!1};E.check=function(r){return Q.pointToLineDistance(r,
this.start,this.end)<x.defaults.pointOnLineThreshold};E.closestTo=function(r){const l=this.coordinateHelper.clone(r);Q.projectPointToLine(l,r,this.start,this.end);return l};return k}(H),c=function(m){function k(r,l,y,F){r=m.call(this,r)||this;r.intersection=l;r.first=y;r.second=F;return r}d._inheritsLoose(k,m);var E=k.prototype;E.objectEqual=function(r){return r instanceof k?this.first.objectEqual(r.first)&&this.second.objectEqual(r.second):!1};E.check=function(){return!1};E.closestTo=function(r){r=
this.coordinateHelper.clone(r);b.copy(r,this.intersection);return r};E.intersect=function(){return[]};return k}(V),f=function(m){function k(r,l,y){r=m.call(this,r)||this;r.center=l;r.radius=y;return r}d._inheritsLoose(k,m);var E=k.prototype;E.objectEqual=function(r){return r instanceof k?this.center[0]===r.center[0]&&this.center[1]===r.center[1]&&this.radius===r.radius:!1};E.check=function(){return!1};E.closestTo=function(r){const l=this.coordinateHelper.clone(r);Q.projectPointToCircle(l,r,this.center,
this.radius);return l};E.intersect=function(r){const l=[];r instanceof H?l.push(...Q.intersectLineLikeAndCircle({start:r.start,end:r.end,type:r instanceof h?1:0},this.center,this.radius)):r instanceof T&&l.push(...Q.intersectCircleAndPoint(this.center,this.radius,r.point));return l.map(y=>new c(this.coordinateHelper,y,this,r))};return k}(V);e.IntersectionConstraint=c;e.LineConstraint=h;e.LineLikeConstraint=H;e.PlanarCircleConstraint=f;e.PointConstraint=T;e.RayConstraint=w;e.SnappingConstraint=V;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/chunks/vec2f64":function(){define(["exports"],function(e){function d(){return[0,0]}function b(k){return[k[0],k[1]]}function z(k,E){return[k,E]}function x(k){const E=[0,0],r=Math.min(2,k.length);for(let l=0;l<r;++l)E[l]=k[l];return E}function I(k,E){return new Float64Array(k,E,2)}function Q(){return[0,0]}function V(){return[1,1]}function T(){return[1,0]}function H(){return[0,1]}const w=[0,0],h=[1,1],c=[1,0],f=[0,1],m=Object.freeze({__proto__:null,create:d,clone:b,
fromValues:z,fromArray:x,createView:I,zeros:Q,ones:V,unitX:T,unitY:H,ZEROS:w,ONES:h,UNIT_X:c,UNIT_Y:f});e.ONES=h;e.UNIT_X=c;e.UNIT_Y=f;e.ZEROS=w;e.clone=b;e.create=d;e.createView=I;e.fromArray=x;e.fromValues=z;e.ones=V;e.unitX=T;e.unitY=H;e.vec2f64=m;e.zeros=Q})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3f64 ../../../geometry/Point ../../../support/elevationInfoUtils".split(" "),function(e,d,b,z,x,
I){function Q(w,h,c,f,m=z.create()){w=h.toXYZ(w);w[2]=I.getConvertedElevationFromVector(f,w,h.spatialReference,c)||0;f.renderCoordsHelper.toRenderCoords(w,h.spatialReference,m);return m}const V=z.create(),T=d.createScreenPointArray(),H=new x;e.anyMapPointToRender=Q;e.anyMapPointToScreenPoint=function(w,h,c,f){if("2d"===f.type)return f.toScreen(h.vectorToPoint(w,H));Q(w,h,c,f,V);f.state.camera.projectToScreen(V,T);return d.createScreenPoint(T[0],T[1])};e.anyMapPointsToRenderWithEqualZ=function(w,h,
c,f,m,k,E){w=c.toXYZ(w);h=c.toXYZ(h);const r=I.getConvertedElevationFromVector(m,w,c.spatialReference,f);f=I.getConvertedElevationFromVector(m,h,c.spatialReference,f);f=(null==r?f:null==f?r:Math.min(r,f))||0;w[2]=f;h[2]=f;m.renderCoordsHelper.toRenderCoords(w,c.spatialReference,k);m.renderCoordsHelper.toRenderCoords(h,c.spatialReference,E)};e.objectEqual=function(w,h){const c=w.length===h.length&&w[0]===h[0]&&w[1]===h[1];switch(w.length){case 2:return c;case 3:return c&&w[2]===h[2];case 4:return c&&
w[3]===h[3]}return!1};e.sortCandidatesInPlace=function(w,h){h.sort((c,f)=>{c=b.squaredDistance(c.targetPoint,w);f=b.squaredDistance(f.targetPoint,w);return c-f})};e.squareDistance=function(w,h){const c=w.x-h.x;w=w.y-h.y;return c*c+w*w};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(e,d,b,z){function x(c,f){return c[0]*f[1]-c[1]*f[0]}function I(c,f,m){f=
b.dot(m,f)/b.squaredLength(m);return b.scale(c,m,f)}function Q(c,f,m,k,E=m){b.subtract(T,k,m);b.subtract(w,f,E);I(h,w,T);return b.add(c,E,h)}function V(c,f,m,k){b.subtract(T,f,m);f=k/b.length(T);return b.scaleAndAdd(c,m,T,f)}const T=z.create(),H=z.create(),w=z.create(),h=z.create();e.cross=x;e.intersectCircleAndPoint=function(c,f,m){V(w,m,c,f);return d.floatEqualAbsolute(w[0],m[0])&&d.floatEqualAbsolute(w[1],m[1])?[z.clone(m)]:[]};e.intersectLineAndPoint=function(c,f){Q(w,f,c.start,c.end);return d.floatEqualAbsolute(w[0],
f[0])&&d.floatEqualAbsolute(w[1],f[1])?[z.clone(f)]:[]};e.intersectLineAndRay=function(c,f){const m=c.start;var k=f.start,E=f.end;const r=b.subtract(T,c.end,m);var l=b.subtract(H,E,k);E=x(r,l);if(1E-6>=Math.abs(E))return[];k=b.subtract(w,m,k);l=x(l,k)/E;E=x(r,k)/E;if(0<=l){if(0<=E||1===f.type)return[b.scaleAndAdd(h,m,r,l)]}else if(1===c.type&&(0<=E||1===f.type))return[b.scaleAndAdd(h,m,r,l)];return[]};e.intersectLineLikeAndCircle=function(c,f,m){const k=[],E=b.subtract(T,c.end,c.start);var r=b.subtract(H,
c.start,f);f=b.squaredLength(E);const l=2*b.dot(E,r);m=b.squaredLength(r)-m*m;m=l*l-4*f*m;0===m?(f=-l/(2*f),(1===c.type||0<=f)&&k.push(b.scaleAndAdd(h,c.start,E,f))):0<m&&(m=Math.sqrt(m),r=(-l+m)/(2*f),(1===c.type||0<=r)&&k.push(b.scaleAndAdd(h,c.start,E,r)),f=(-l-m)/(2*f),(1===c.type||0<=f)&&k.push(b.scaleAndAdd(w,c.start,E,f)));return k};e.pointToLineDistance=function(c,f,m){return Math.abs((f[0]-c[0])*(m[1]-c[1])-(f[1]-c[1])*(m[0]-c[0]))/b.distance(f,m)};e.projectPoint=I;e.projectPointToCircle=
V;e.projectPointToLine=Q;e.projectPointToRay=function(c,f,m,k){b.subtract(T,k,m);b.subtract(w,f,m);f=b.dot(T,w)/b.squaredLength(T);return 0<f?b.scaleAndAdd(c,m,T,f):b.copy(c,m)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./FeatureSnappingCandidate","../hints/LineSnappingHint"],function(e,d,b,z,x){z=function(I){function Q(V){return I.call(this,
{...V,constraint:new b.LineConstraint(V.coordinateHelper,V.edgeStart,V.edgeEnd)})||this}d._inheritsLoose(Q,I);d._createClass(Q,[{key:"hints",get:function(){return[new x.LineSnappingHint(1,this.constraint.start,this.constraint.end)]}}]);return Q}(z.FeatureSnappingCandidate);e.EdgeSnappingCandidate=z;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate"],
function(e,d,b){b=function(z){function x({coordinateHelper:I,targetPoint:Q,objectId:V,constraint:T}){I=z.call(this,I,Q,T)||this;I.objectId=V;return I}d._inheritsLoose(x,z);return x}(b.SnappingCandidate);e.FeatureSnappingCandidate=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(e){e.SnappingCandidate=function(d,b,z){this.coordinateHelper=d;this.targetPoint=b;this.constraint=z};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(e,d,b,z,x,I){z.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");b=function(Q){function V(T,H,w,h=!0,c=!0){var f=Q.call(this)||this;f.type=T;f.lineStart=H;f.lineEnd=w;f.fadeLeft=h;f.fadeRight=c;return f}d._inheritsLoose(V,Q);V.prototype.equals=
function(T){return T instanceof V?this.type===T.type&&x.objectEqual(this.lineStart,T.lineStart)&&x.objectEqual(this.lineEnd,T.lineEnd)&&this.fadeLeft===T.fadeLeft&&this.fadeRight===T.fadeRight:!1};return V}(I.SnappingHint);e.LineSnappingHint=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(e){e.SnappingHint=function(){};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate","../hints/LineSnappingHint","../hints/RightAngleSnappingHint"],function(e,d,b,z,x){b=function(I){function Q({coordinateHelper:V,targetPoint:T,constraint:H,previousVertex:w,otherVertex:h,otherVertexType:c,objectId:f}){V=I.call(this,V,T,H)||this;V.previousVertex=w;V.otherVertex=h;V.otherVertexType=c;V.objectId=f;return V}d._inheritsLoose(Q,I);d._createClass(Q,[{key:"hints",get:function(){const V=this.previousVertex,T=1===this.otherVertexType?
this.otherVertex:this.targetPoint,H=1===this.otherVertexType?this.targetPoint:this.otherVertex;return[new z.LineSnappingHint(0,T,H),new z.LineSnappingHint(1,V,T),new x.RightAngleSnappingHint(this.previousVertex,T,H)]}}]);return Q}(b.SnappingCandidate);e.RightAngleSnappingCandidate=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),
function(e,d,b,z,x,I){z.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");b=function(Q){function V(T,H,w){var h=Q.call(this)||this;h.previousVertex=T;h.centerVertex=H;h.nextVertex=w;return h}d._inheritsLoose(V,Q);V.prototype.equals=function(T){return T instanceof V?x.objectEqual(this.previousVertex,T.previousVertex)&&x.objectEqual(this.centerVertex,T.centerVertex)&&x.objectEqual(this.nextVertex,T.nextVertex):!1};return V}(I.SnappingHint);e.RightAngleSnappingHint=b;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./snappingUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H,w,h,c,f,m){e.SelfSnappingEngine=function(k){function E(l){l=k.call(this,l)||this;l.updating=!1;l._snappers=new x;return l}d._inheritsLoose(E,k);var r=E.prototype;r.initialize=function(){this._snappers.push(new h.ParallelLineSnapper(this.view,this.options),new w.LineSnapper(this.view,this.options),new c.RightAngleSnapper(this.view,this.options),new f.RightAngleTriangleSnapper(this.view,this.options))};r.fetchCandidates=function(){var l=d._asyncToGenerator(function*(y,F){if(!this.options.effectiveSelfEnabled)return[];
const J=[];for(const t of this._snappers.items)J.push(...t.snap(y,F));m.sortCandidatesInPlace(y,J);return J});return function(y,F){return l.apply(this,arguments)}}();d._createClass(E,[{key:"options",set:function(l){this._set("options",l);for(const y of this._snappers)y.options=l}}]);return E}(z);b.__decorate([I.property({readOnly:!0})],e.SelfSnappingEngine.prototype,"updating",void 0);b.__decorate([I.property({constructOnly:!0})],e.SelfSnappingEngine.prototype,"view",void 0);b.__decorate([I.property()],
e.SelfSnappingEngine.prototype,"options",null);e.SelfSnappingEngine=b.__decorate([H.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],e.SelfSnappingEngine);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/LineSnappingCandidate ../../support/geometry2dUtils".split(" "),function(e,
d,b,z,x,I,Q,V){x=function(T){function H(){return T.apply(this,arguments)||this}d._inheritsLoose(H,T);var w=H.prototype;w.snapNewVertex=function(h,c){var f=c.editGeometryOperations.data.components[0],m=f.edges.length;const k=[];if(1>m)return k;const E=I.anyMapPointToScreenPoint(h,c.coordinateHelper,c.elevationInfo,this.view);m=f=f.edges[m-1];do this.edgeExceedsShortLineThreshold(m,c)&&this._processCandidateProposal(m.leftVertex.pos,m.rightVertex.pos,h,E,c,k),m=m.leftVertex.leftEdge;while(m&&m!==f);
return k};w.snapExistingVertex=function(h,c){const f=[],m=b.unwrap(c.vertexHandle);var k=m.component;if(2>k.edges.length)return f;const E=I.anyMapPointToScreenPoint(h,c.coordinateHelper,c.elevationInfo,this.view);var r=m.leftEdge;const l=m.rightEdge;r&&l&&this.edgeExceedsShortLineThreshold(r,c)&&this.edgeExceedsShortLineThreshold(l,c)&&this._processCandidateProposal(r.leftVertex.pos,l.rightVertex.pos,h,E,c,f);r=k=k.edges[0];do r!==m.leftEdge&&r!==m.rightEdge&&this.edgeExceedsShortLineThreshold(r,
c)&&this._processCandidateProposal(r.leftVertex.pos,r.rightVertex.pos,h,E,c,f),r=r.rightVertex.rightEdge;while(r&&r!==k);return f};w._processCandidateProposal=function(h,c,f,m,k,E){const r=V.projectPointToLine(z.create(),f,h,c),l=k.coordinateHelper;f=l.fromXYZ(r,l.getZ(f,0));I.squareDistance(m,I.anyMapPointToScreenPoint(f,l,k.elevationInfo,this.view))<this.squaredProximityTreshold(k.pointer)&&E.push(new Q.LineSnappingCandidate({coordinateHelper:k.coordinateHelper,lineStart:h,lineEnd:c,targetPoint:f}))};
return H}(x.SnappingAlgorithm);e.LineSnapper=x;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./Settings","./snappingUtils"],function(e,d,b,z,x){let I=function(){function Q(T,H){this.view=T;this.options=H;this.squaredShortLineThreshold=z.defaults.shortLineThreshold*z.defaults.shortLineThreshold}var V=Q.prototype;V.snap=function(T,H){return b.isSome(H.vertexHandle)?
"vertex"!==H.vertexHandle.type?[]:this.snapExistingVertex(T,H):this.snapNewVertex(T,H)};V.edgeExceedsShortLineThreshold=function(T,H){return this.exceedsShortLineThreshold(T.leftVertex.pos,T.rightVertex.pos,H)};V.exceedsShortLineThreshold=function(T,H,{elevationInfo:w,editGeometryOperations:h}){h=h.data.coordinateHelper;return 0===this.squaredShortLineThreshold||x.squareDistance(x.anyMapPointToScreenPoint(H,h,w,this.view),x.anyMapPointToScreenPoint(T,h,w,this.view))>this.squaredShortLineThreshold};
V.squaredProximityTreshold=function(T){return"touch"===T?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};d._createClass(Q,[{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:T,touchSensitivityMultiplier:H}=this.options,w=T*H;return w*w}}]);return Q}();e.SnappingAlgorithm=I;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint".split(" "),
function(e,d,b,z,x,I,Q){I=function(H){function w({coordinateHelper:h,lineStart:c,lineEnd:f,targetPoint:m}){h=H.call(this,h,m,new x.LineConstraint(h,c,f))||this;h.referenceLineHint=new Q.LineSnappingHint(2,c,f);return h}d._inheritsLoose(w,H);w.prototype.lineEndClosestToTarget=function(){const h=this.constraint.start,c=this.constraint.end;return 0<Math.sign(b.dot(b.subtract(T,c,h),b.subtract(V,this.targetPoint,h)))?c:h};d._createClass(w,[{key:"hints",get:function(){return[this.referenceLineHint,new Q.LineSnappingHint(0,
this.lineEndClosestToTarget(),this.targetPoint)]}}]);return w}(I.SnappingCandidate);const V=z.create(),T=z.create();e.LineSnappingCandidate=I;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./SnappingAlgorithm ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T,H){Q=function(w){function h(){var f=w.apply(this,arguments)||this;f._tmpProjection=x.create();return f}d._inheritsLoose(h,w);var c=h.prototype;c.snapNewVertex=function(f,m){var k=m.editGeometryOperations.data.components[0],E=k.edges.length,r=k.vertices.length;const l=[];if(2>E)return l;const y=V.anyMapPointToScreenPoint(f,m.coordinateHelper,m.elevationInfo,this.view);r=k.vertices[r-1];const F=k.vertices[0];E=k=k.edges[E-1];do this.edgeExceedsShortLineThreshold(E,m)&&(this._checkEdgeForParalleLines(E,
r.pos,f,y,m,l),this._checkEdgeForParalleLines(E,F.pos,f,y,m,l)),E=E.leftVertex.leftEdge;while(E&&E!==k);return l};c.snapExistingVertex=function(f,m){const k=[],E=b.unwrap(m.vertexHandle);var r=E.component;if(3>r.edges.length)return k;const l=V.anyMapPointToScreenPoint(f,m.coordinateHelper,m.elevationInfo,this.view),y=E.leftEdge,F=E.rightEdge,J=r.vertices[0],t=r.vertices[r.vertices.length-1];let q=r=r.edges[0];do q!==y&&q!==F&&this.edgeExceedsShortLineThreshold(q,m)&&(y&&this._checkEdgeForParalleLines(q,
y.leftVertex.pos,f,l,m,k),F&&this._checkEdgeForParalleLines(q,F.rightVertex.pos,f,l,m,k),E===J?this._checkEdgeForParalleLines(q,t.pos,f,l,m,k):E===t&&this._checkEdgeForParalleLines(q,J.pos,f,l,m,k)),q=q.rightVertex.rightEdge;while(q&&q!==r);return k};c._checkEdgeForParalleLines=function(f,m,k,E,r,l){var y=f.leftVertex.pos;const F=f.rightVertex.pos;H.projectPointToLine(this._tmpProjection,m,y,F);z.squaredDistance(this._tmpProjection,m)<I.defaults.parallelLineThreshold||(H.projectPointToLine(this._tmpProjection,
k,y,F,m),y=r.coordinateHelper,k=y.fromXYZ(this._tmpProjection,y.getZ(k,0)),V.squareDistance(E,V.anyMapPointToScreenPoint(k,y,r.elevationInfo,this.view))<this.squaredProximityTreshold(r.pointer)&&!this.parallelToPreviousCandidate(f,l)&&l.push(new T.ParallelLineSnappingCandidate({coordinateHelper:y,referenceLine:f,lineStart:m,targetPoint:k})))};c.parallelToPreviousCandidate=function(f,m){const k=f.leftVertex.pos,E=f.rightVertex.pos;for(const r of m)if(H.projectPointToLine(this._tmpProjection,E,r.constraint.start,
r.constraint.end,k),z.squaredDistance(this._tmpProjection,E)<I.defaults.parallelLineThreshold)return r.addReferenceLine(f),!0;return!1};return h}(Q.SnappingAlgorithm);e.ParallelLineSnapper=Q;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),
function(e,d,b,z,x,I,Q){x=function(V){function T({coordinateHelper:H,referenceLine:w,lineStart:h,targetPoint:c}){const f=H.clone(h);b.subtract(f,b.add(f,f,w.rightVertex.pos),w.leftVertex.pos);H=V.call(this,H,c,new z.LineConstraint(H,h,f))||this;H._referenceLines=[{edge:w,fadeLeft:!0,fadeRight:!0}];return H}d._inheritsLoose(T,V);T.prototype.addReferenceLine=function(H){const w={edge:H,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(h=>{H.rightVertex.rightEdge===h.edge&&(h.fadeLeft=!1,w.fadeRight=
!1);H.leftVertex.leftEdge===h.edge&&(h.fadeRight=!1,w.fadeLeft=!1)});this._referenceLines.push(w)};d._createClass(T,[{key:"hints",get:function(){return[new I.LineSnappingHint(0,this.constraint.start,this.targetPoint),new Q.ParallelSnappingHint(this.constraint.start,this.targetPoint),...this._referenceLines.map(H=>new I.LineSnappingHint(1,H.edge.leftVertex.pos,H.edge.rightVertex.pos,H.fadeLeft,H.fadeRight))]}}]);return T}(x.SnappingCandidate);e.ParallelLineSnappingCandidate=x;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(e,d,b,z,x,I){z.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");b=function(Q){function V(T,H){var w=Q.call(this)||this;w.lineStart=T;w.lineEnd=H;return w}d._inheritsLoose(V,Q);V.prototype.equals=function(T){return T instanceof
V?x.objectEqual(this.lineStart,T.lineStart)&&x.objectEqual(this.lineEnd,T.lineEnd):!1};return V}(I.SnappingHint);e.ParallelSnappingHint=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./SnappingConstraint ./snappingUtils ./candidates/RightAngleSnappingCandidate".split(" "),function(e,d,b,
z,x,I,Q,V,T){I=function(H){function w(){var c=H.apply(this,arguments)||this;c._tmp=x.create();return c}d._inheritsLoose(w,H);var h=w.prototype;h.snapNewVertex=function(c,f){var m=f.editGeometryOperations.data.components[0],k=m.vertices.length;const E=[];if(2>k)return E;const r=V.anyMapPointToScreenPoint(c,f.coordinateHelper,f.elevationInfo,this.view);k=m.vertices[k-1];this._checkForSnappingCandidate(E,k.leftEdge,k.pos,c,k.leftEdge.leftVertex.pos,k.pos,f,c,r);m=m.vertices[0];this._checkForSnappingCandidate(E,
m.rightEdge,m.pos,c,m.rightEdge.rightVertex.pos,m.pos,f,c,r);return E};h.snapExistingVertex=function(c,f){const m=[];var k=b.unwrap(f.vertexHandle),E=k.component;const r=E.vertices.length;if(3>r)return m;const l=V.anyMapPointToScreenPoint(c,f.coordinateHelper,f.elevationInfo,this.view);var y=k.leftEdge;k=k.rightEdge;const F=E.vertices[0];E=E.vertices[r-1];if(!y)return this._checkForSnappingCandidate(m,F.rightEdge.rightVertex.rightEdge,F.rightEdge.rightVertex.pos,c,F.rightEdge.rightVertex.rightEdge.rightVertex.pos,
F.rightEdge.rightVertex.pos,f,c,l),m;if(!k)return this._checkForSnappingCandidate(m,E.leftEdge.leftVertex.leftEdge,E.leftEdge.leftVertex.pos,c,E.leftEdge.leftVertex.leftEdge.leftVertex.pos,E.leftEdge.leftVertex.pos,f,c,l),m;y&&y.leftVertex.leftEdge&&(E=y.leftVertex.leftEdge,this._checkForSnappingCandidate(m,E,y.leftVertex.pos,c,E.leftVertex.pos,y.leftVertex.pos,f,c,l));k&&k.rightVertex.rightEdge&&(y=k.rightVertex.rightEdge,this._checkForSnappingCandidate(m,y,k.rightVertex.pos,c,y.rightVertex.pos,
k.rightVertex.pos,f,c,l));return m};h._checkForSnappingCandidate=function(c,f,m,k,E,r,l,y,F){this.edgeExceedsShortLineThreshold(f,l)&&(z.subtract(this._tmp,f.rightVertex.pos,f.leftVertex.pos),f=x.fromValues(this._tmp[1],-this._tmp[0]),m=z.dot(f,z.subtract(this._tmp,k,m))/z.squaredLength(f),k=l.coordinateHelper,y=k.fromXYZ(z.scaleAndAdd(x.create(),r,f,m),k.getZ(y,0)),V.squareDistance(F,V.anyMapPointToScreenPoint(y,k,l.elevationInfo,this.view))<this.squaredProximityTreshold(l.pointer)&&c.push(new T.RightAngleSnappingCandidate({coordinateHelper:k,
targetPoint:y,constraint:new Q.RayConstraint(k,r,z.scaleAndAdd(k.createVector(),r,f,Math.sign(m))),previousVertex:E,otherVertex:r,otherVertexType:1})))};return w}(I.SnappingAlgorithm);e.RightAngleSnapper=I;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(e,d,b,z,x,I,Q,V,T){I=function(H){function w(){return H.apply(this,arguments)||this}d._inheritsLoose(w,H);var h=w.prototype;h.snapNewVertex=function(c,f){const m=f.editGeometryOperations.data.components[0],k=[],E=m.vertices.length;if("polygon"!==f.editGeometryOperations.data.type||2>E)return k;this._processCandidateProposal(m.vertices[0].pos,m.vertices[E-1].pos,c,f,k);return k};h.snapExistingVertex=function(c,f){const m=[],k=b.unwrap(f.vertexHandle),E=k.component;if(2>E.edges.length||"polyline"===
f.editGeometryOperations.data.type&&(0===k.index||k.index===E.vertices.length-1))return m;this._processCandidateProposal(k.leftEdge.leftVertex.pos,k.rightEdge.rightVertex.pos,c,f,m);return m};h._processCandidateProposal=function(c,f,m,k,E){if(this.exceedsShortLineThreshold(c,f,k)){var r=z.lerp(x.create(),c,f,.5),l=.5*z.distance(c,f);l=T.projectPointToCircle(x.create(),m,r,l);r=k.coordinateHelper;l=r.fromXYZ(l,r.getZ(m,0));m=Q.anyMapPointToScreenPoint(m,r,k.elevationInfo,this.view);Q.squareDistance(m,
Q.anyMapPointToScreenPoint(l,r,k.elevationInfo,this.view))<this.squaredProximityTreshold(k.pointer)&&E.push(new V.RightAngleTriangleSnappingCandidate({coordinateHelper:r,targetPoint:l,point1:c,point2:f}))}};return w}(I.SnappingAlgorithm);e.RightAngleTriangleSnapper=I;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(e,d,b,z,x,I,Q,V){I=function(H){function w({coordinateHelper:h,targetPoint:c,point1:f,point2:m}){h=H.call(this,h,c,new x.PlanarCircleConstraint(h,b.lerp(T,f,m,.5),.5*b.distance(f,m)))||this;h.p1=f;h.p2=m;return h}d._inheritsLoose(w,H);d._createClass(w,[{key:"hints",get:function(){return[new Q.LineSnappingHint(1,this.targetPoint,this.p1),new Q.LineSnappingHint(1,this.targetPoint,this.p2),new V.RightAngleSnappingHint(this.p1,this.targetPoint,this.p2)]}}]);return w}(I.SnappingCandidate);const T=
z.create();e.RightAngleTriangleSnappingCandidate=I;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./SnappingCandidate","../hints/IntersectionSnappingHint"],function(e,d,b,z,x){z=function(I){function Q(V,T,H,w){V=I.call(this,V,T,new b.IntersectionConstraint(V,T,H.constraint,w.constraint))||this;V.first=H;V.second=w;return V}
d._inheritsLoose(Q,I);d._createClass(Q,[{key:"hints",get:function(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new x.IntersectionSnappingHint(this.targetPoint)]}}]);return Q}(z.SnappingCandidate);e.IntersectionSnappingCandidate=z;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../snappingUtils","./SnappingHint"],function(e,d,b,z){z=function(x){function I(Q){var V=x.call(this)||this;V.intersectionPoint=Q;return V}d._inheritsLoose(I,x);I.prototype.equals=function(Q){return Q instanceof I?b.objectEqual(this.intersectionPoint,Q.intersectionPoint):!1};return I}(z.SnappingHint);e.IntersectionSnappingHint=z;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(e,d,b,z,x,I,Q,V,T,H){e.OperationHandle=function(w){function h(f){f=w.call(this,f)||this;f.cancelled=!1;f.history={undo:[],redo:[]};f.type=null;return f}d._inheritsLoose(h,w);var c=h.prototype;c.addToHistory=function(f){this.history.redo=[];this.history.undo.push(f)};c.resetHistory=function(){this.history.redo=[];this.history.undo=[]};c.canUndo=function(){return 0<this.history.undo.length};c.canRedo=function(){return 0<this.history.redo.length};c.complete=function(){this.reset();this.onEnd();
this.emit("complete")};c.cancel=function(){this.cancelled=!0;this.complete()};c.reset=function(){this.activeComponent.reset()};c.refreshComponent=function(){const f=this.activeComponent;f&&("box"!==f.type&&"reshape"!==f.type&&"graphic-mover"!==f.type||f.refresh())};d._createClass(h,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw-2d":case "draw-3d":return this.activeComponent.geometryType;default:z.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(f){this._set("undo",()=>{this.canUndo()&&f()})}},{key:"redo",set:function(f){this._set("redo",()=>{this.canRedo()&&f()})}}]);return h}(x.EventedAccessor);b.__decorate([I.property()],e.OperationHandle.prototype,"activeComponent",void 0);b.__decorate([I.property()],e.OperationHandle.prototype,"cancelled",void 0);b.__decorate([I.property()],e.OperationHandle.prototype,
"history",void 0);b.__decorate([I.property()],e.OperationHandle.prototype,"tool",null);b.__decorate([I.property()],e.OperationHandle.prototype,"type",void 0);b.__decorate([I.property()],e.OperationHandle.prototype,"canUndo",null);b.__decorate([I.property()],e.OperationHandle.prototype,"canRedo",null);b.__decorate([I.property()],e.OperationHandle.prototype,"onEnd",void 0);b.__decorate([I.property()],e.OperationHandle.prototype,"undo",null);b.__decorate([I.property()],e.OperationHandle.prototype,"redo",
null);b.__decorate([I.property()],e.OperationHandle.prototype,"toggleTool",void 0);b.__decorate([I.property()],e.OperationHandle.prototype,"addToSelection",void 0);b.__decorate([I.property()],e.OperationHandle.prototype,"removeFromSelection",void 0);e.OperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.OperationHandle")],e.OperationHandle);e.CreateOperationHandle=function(w){function h(){return w.apply(this,arguments)||this}d._inheritsLoose(h,w);return h}(e.OperationHandle);b.__decorate([I.property()],
e.CreateOperationHandle.prototype,"activeComponent",void 0);e.CreateOperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.CreateOperationHandle")],e.CreateOperationHandle);e.UpdateOperationHandle=function(w){function h(c){return w.call(this,c)||this}d._inheritsLoose(h,w);return h}(e.OperationHandle);b.__decorate([I.property()],e.UpdateOperationHandle.prototype,"activeComponent",void 0);e.UpdateOperationHandle=b.__decorate([H.subclass("esri.widgets.Sketch.support.UpdateOperationHandle")],
e.UpdateOperationHandle);Object.defineProperty(e,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/HandleOwner ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ../views/interactive/snapping/SnappingOptions ./Attachments ./FeatureForm ./FeatureTemplates ./Spinner ./Widget ./Editor/EditorViewModel ./FeatureTemplates/ItemList ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),function(e,
d,b,z,x,I,Q,V,T,H,w,h,c,f,m,k,E,r,l,y,F,J,t,q,O,L,n,G,C){function B(D){D.focus()}b=function(D){function A(P,N){var g=D.call(this,P,N)||this;g._candidateCommitted=!1;g._featureForm=new k;g._attachments=new m({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}});g._featureTemplates=new E;g._filterText="";g._prompt=null;g._spinner=new r;g.activeWorkflow=null;g.allowedWorkflows=null;g.headingLevel=4;g.iconClass=
"esri-icon-edit";g.label=void 0;g.layerInfos=null;g.messages=null;g.messagesCommon=null;g.messagesTemplates=null;g.snappingOptions=new f;g.supportingWidgetDefaults=null;g.view=null;g.viewModel=new y;g._handleHeaderClickOrKeyDown=v=>{v.currentTarget["data-prevent-back"]||g._handleBack.call(e._assertThisInitialized(g),v)};g._setCandidateFeature=(v,u=!1)=>{if(!g._candidateCommitted){var U=g._assertActiveUpdateWorkflow();U.data.edits.feature=v;u&&(U.next(),g._candidateCommitted=!0)}};g._handleSave=g._handleSave.bind(e._assertThisInitialized(g));
g._handleBack=g._handleBack.bind(e._assertThisInitialized(g));g._handleDone=g._handleDone.bind(e._assertThisInitialized(g));g._handleDelete=g._handleDelete.bind(e._assertThisInitialized(g));g._handleAdd=g._handleAdd.bind(e._assertThisInitialized(g));g._handleEdit=g._handleEdit.bind(e._assertThisInitialized(g));g._handleAttachmentAdd=g._handleAttachmentAdd.bind(e._assertThisInitialized(g));g._handleAttachmentUpdate=g._handleAttachmentUpdate.bind(e._assertThisInitialized(g));g._handleAttachmentDelete=
g._handleAttachmentDelete.bind(e._assertThisInitialized(g));return g}e._inheritsLoose(A,D);var K=A.prototype;K.initialize=function(){this.own([I.init(this,"headingLevel",P=>{this._featureForm.headingLevel=P+1;this._featureTemplates.headingLevel=P+1}),I.init(this,"viewModel",P=>{this._featureForm.viewModel=P?P.featureFormViewModel:null;this._attachments.viewModel=P?P.attachmentsViewModel:null;this._featureTemplates.viewModel=P?P.featureTemplatesViewModel:null;this._spinner.viewModel=P?P.spinnerViewModel:
null}),I.init(this,"view",(P,N)=>{const g=`editor-${this.id}-spinner`;N&&N.ui.remove(this._spinner,g);P&&P.ui.add(this._spinner,{key:g,position:"manual"})}),I.on(this,"viewModel.sketchViewModel","create",()=>{this.scheduleRender()}),I.on(this,"viewModel.activeWorkflow","cancel-request",({controller:P})=>{const {messages:N,messagesCommon:g}=this;this._prompt={title:N.cancelRequestTitle,message:N.cancelRequestWarningMessage,options:[{label:g.form.no,type:"neutral",action:()=>{P.deny();return this._prompt=
null}},{label:g.form.yes,type:"negative",action:()=>{P.allow();this._prompt=null}}]};this.scheduleRender()}),I.init(this,"supportingWidgetDefaults",P=>{P&&(this._featureForm.set(P.featureForm),this._attachments.set(P.attachments),this._featureTemplates.set(P.featureTemplates),this.viewModel.sketchViewModel.set(P.sketch))}),I.watch(this,"_attachments.error",P=>{if(P){var {messages:N,messagesCommon:g}=this;this._prompt={title:N.errorWarningTitle,message:P.message,options:[{label:g.form.ok,type:"neutral",
action:()=>{this._prompt=null}}]}}}),I.watch(this,"viewModel.failures",P=>{if(P){var {messages:N}=this,[{error:g,retry:v,cancel:u}]=P;this._prompt={title:N.errorWarningTitle,message:C.substitute(N.errorWarningMessageTemplate,{errorMessage:g.message}),options:[{label:N.retry,type:"positive",action:()=>{v();this._prompt=null}},{label:N.ignore,type:"neutral",action:()=>{u();return this._prompt=null}}]}}}),I.watch(this,"viewModel.state",P=>{"awaiting-update-feature-candidate"===P&&(this._candidateCommitted=
!1)}),I.watch(this,["_attachments.selectedFile","_attachments.submitting"],()=>this.scheduleRender()),I.whenNot(this,"viewModel.activeWorkflow",()=>this._featureTemplates.filterText="")])};K.destroy=function(){this._attachments.destroy();this._featureForm.destroy();this._featureTemplates.destroy()};K.startCreateWorkflowAtFeatureTypeSelection=function(){return this.viewModel.startCreateWorkflowAtFeatureTypeSelection()};K.startCreateWorkflowAtFeatureCreation=function(P){return this.viewModel.startCreateWorkflowAtFeatureCreation(P)};
K.startCreateWorkflowAtFeatureEdit=function(P){return this.viewModel.startCreateWorkflowAtFeatureEdit(P)};K.startUpdateWorkflowAtFeatureSelection=function(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()};K.startUpdateWorkflowAtMultipleFeatureSelection=function(P){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(P)};K.startUpdateWorkflowAtFeatureEdit=function(P){return this.viewModel.startUpdateWorkflowAtFeatureEdit(P)};K.deleteFeatureFromWorkflow=function(){return this.viewModel.deleteFeatureFromWorkflow()};
K.cancelWorkflow=function(P){return this.viewModel.cancelWorkflow(P)};K.render=function(){const {_attachments:P,viewModel:N}=this;if(!N)return n.tsx("div",{class:"esri-editor esri-widget esri-widget--panel"});const {state:g}=N,v=this._prompt?n.tsx("div",{class:"esri-editor__overlay",key:"overlay"},this.renderPrompt({message:this._prompt.message,title:this._prompt.title,options:this._prompt.options})):null;return n.tsx("div",{class:"esri-editor esri-widget esri-widget--panel"},N.syncing||P.submitting?
this.renderProgressBar():null,"disabled"===g?null:"ready"===g?this.renderLanding():"awaiting-feature-creation-info"===g?this.renderTemplates():"editing-new-feature"===g||"editing-existing-feature"===g?this.renderAttributeEditing():"awaiting-feature-to-update"===g?this.renderFeatureUpdating():"awaiting-update-feature-candidate"===g?this.renderFeatureList():"awaiting-feature-to-create"===g?this.renderFeatureCreation():"adding-attachment"===g?this.renderAttachmentAdding():"editing-attachment"===g?this.renderAttachmentEditing():
null,v)};K.renderTemplates=function(){return n.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(this.messages.selectTemplate,!0),n.tsx("div",{key:"content",class:"esri-editor__content"},this._featureTemplates.render()))};K.renderAttributeEditing=function(){var {viewModel:P}=this;const N=P.featureFormViewModel;var g=this._assertActiveCreateOrUpdateWorklow();const v=g.data.edits.feature;var u="update"===g.type&&!g.data.edits.modified||P.syncing||0<N.inputFields.length&&
!N.valid;const {messages:U,messagesCommon:X}=this;P="create"===g.type?X.add:X.update;u=[{label:P,type:"primary",disabled:u,clickHandler:this._handleSave}];let fa=!1;"update"===g.type&&(g.data.editableItem.hasAttachments&&(fa=!0),g.data.editableItem.supports.includes("delete")&&u.push({label:X.delete,type:"tertiary",clickHandler:this._handleDelete}));g=this._getLabel(v);return n.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(g,!0),n.tsx("div",{key:"content",class:this.classes("esri-editor__content",
"esri-editor__scroller")},n.tsx("div",{class:"esri-editor__content-group"},0<N.inputFields.length?this._featureForm.render():this.renderMessage(C.substitute(U.clickToFinishTemplate,{button:P})),fa?n.tsx("div",{key:"attachments"},n.tsx("div",null,U.attachments),this._attachments.render()):null)),this.renderControls(u))};K.renderAttachmentAdding=function(){const {_attachments:P,messages:N,messagesCommon:g}=this,v=[{label:P.submitting?g.cancel:g.add,disabled:P.submitting||!P.selectedFile,type:"primary",
clickHandler:this._handleAttachmentAdd}];return n.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(N.addAttachment,!0,P.submitting),n.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},P.render()),this.renderControls(v))};K.renderAttachmentEditing=function(){const {_attachments:P,messages:N,messagesCommon:g}=this,v=[{label:g.update,disabled:P.submitting||!P.selectedFile,type:"primary",clickHandler:this._handleAttachmentUpdate},
{label:g.delete,disabled:P.submitting,type:"tertiary",clickHandler:this._handleAttachmentDelete}];return n.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(N.editAttachment,!0,P.submitting),n.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},P.render()),this.renderControls(v))};K.renderFeatureUpdating=function(){const {messages:P}=this;return n.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(P.selectFeature,
!0),n.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},this.renderMessage(P.selectFeatureToEdit)))};K.renderMessage=function(P){return n.tsx("div",{class:"esri-editor__message"},P)};K.renderFeatureCreation=function(){const {messages:P,viewModel:N}=this;var g=N.sketchViewModel,v=this._assertActiveCreateWorkflow().data.creationInfo.layer;g=g.canUndo()&&g.createGraphic?g.createGraphic:null;v=this._getSketchingTip(v.geometryType,g);return n.tsx("div",{class:"esri-editor__temp-wrapper",
key:"wrapper"},this.renderHeader(P.placeFeature,!0),n.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},this.renderMessage(v)))};K.renderControls=function(P){return n.tsx("div",{class:"esri-editor__controls",key:"controls"},P.map(({disabled:N=!1,label:g,type:v,clickHandler:u},U)=>this.renderButton({label:g,class:this.classes("esri-editor__control-button","esri-button","secondary"===v?"esri-button--secondary":"tertiary"===v?"esri-button--tertiary":null,N?
"esri-button--disabled":null),disabled:N,clickHandler:u,key:U})))};K.renderPrompt=function({title:P,message:N,options:g=[]}){return n.tsx("div",{class:"esri-editor__warning-card",role:"alert"},n.tsx("div",{class:"esri-editor__warning-header"},n.tsx("span",{class:"esri-icon-notice-triangle","aria-hidden":"true"}),n.tsx(J.Heading,{class:"esri-editor__warning-heading",level:this.headingLevel},P)),n.tsx("div",{class:"esri-editor__warning-message"},N),n.tsx("div",{class:"esri-editor__warning-divider"}),
g.map(({label:v,action:u,type:U},X)=>{const fa=0===X;return n.tsx("div",{afterCreate:fa?B:null,class:this.classes("esri-editor__warning-option",fa?"esri-editor__warning-option--primary":null,"positive"===U?"esri-editor__warning-option--positive":"negative"===U?"esri-editor__warning-option--negative":null),key:X,onclick:u,onkeydown:ma=>{const ta=z.eventKey(ma);G.isActivationKey(ta)&&(ma.preventDefault(),u.call(null))},tabIndex:0,role:"button"},v)}))};K.renderProgressBar=function(){return n.tsx("div",
{class:this.classes("esri-editor__progress-bar"),key:"progress-bar"})};K.renderButton=function(P){return n.tsx("button",{class:P.class,disabled:P.disabled,key:P.key,onclick:P.clickHandler,type:"button"},P.label)};K.renderHeader=function(P,N=!1,g=!1){const {messagesCommon:v}=this;return n.tsx("header",{class:"esri-editor__header",key:"header"},N?n.tsx("div",{"aria-label":v.back,class:this.classes("esri-editor__back-button","esri-interactive",g?"esri-button--disabled":null),key:"back-button","data-prevent-back":g,
onclick:this._handleHeaderClickOrKeyDown,onkeydown:this._handleHeaderClickOrKeyDown,role:"button",tabIndex:0,title:v.back},n.tsx("span",{"aria-hidden":"true",class:G.isRTL(this.container)?"esri-icon-right":"esri-icon-left"})):null,n.tsx(J.Heading,{class:"esri-editor__title",level:this.headingLevel},P))};K.renderLanding=function(){const {messages:P}=this,{allowedWorkflows:N,canCreate:g,canUpdate:v}=this.viewModel,u=G.isRTL(this.container)?"esri-icon-left":"esri-icon-right";return n.tsx("div",{class:"esri-editor__temp-wrapper",
key:"wrapper"},this.renderHeader(P.widgetLabel),n.tsx("div",{key:"content",class:"esri-editor__content",role:"group"},n.tsx("div",{class:"esri-editor__mode-selection",key:"mode-selection"},-1<N.indexOf("update")?n.tsx("div",{"aria-disabled":v?"false":"true",class:this.classes("esri-editor__feature-list-item",v?null:"esri-editor__feature-list-item--disabled"),key:"update",onclick:this._handleEdit,onkeydown:this._handleEdit,role:"button",tabIndex:v?0:-1},n.tsx("span",{class:"esri-editor__feature-list-name"},
P.editFeature),n.tsx("span",{"aria-hidden":"true",class:this.classes("esri-editor__feature-list-icon",u)})):null,-1<N.indexOf("create")?n.tsx("div",{class:this.classes("esri-editor__feature-list-item",g?null:"esri-editor__feature-list-item--disabled"),key:"create",onclick:this._handleAdd,onkeydown:this._handleAdd,role:"button",tabIndex:g?0:-1},n.tsx("span",{class:"esri-editor__feature-list-name"},P.addFeature),n.tsx("span",{"aria-hidden":"true",class:this.classes("esri-editor__feature-list-icon",
u)})):null)))};K.renderFeatureList=function(){const {messages:P,messagesTemplates:N,viewModel:{editableItems:g}}=this;var v=this._assertActiveUpdateWorkflow().data.candidates;const u=C.substitute(P.multipleFeaturesTemplate,{total:v.length}),U=new Map;v.map(X=>({label:this._getLabel(X),id:X.attributes[X.layer.objectIdField],data:X})).filter(X=>{const {label:fa,data:ma}=X;X=this._filterText.toLowerCase();const {title:ta}=ma.layer;return-1<this.viewModel.editableItems.find(va=>va.layer===ma.layer).supports.indexOf("update")&&
(!X||-1<fa.toLowerCase().indexOf(X)||-1<ta.toLowerCase().indexOf(X))}).forEach(X=>{const fa=X.data.layer;U.has(fa)?U.get(fa).items.push(X):U.set(fa,{id:`${fa.id}`,label:fa.title,items:[X]})});v=g.filter(({layer:X})=>U.has(X)).map(({layer:X})=>U.get(X)).toArray();return n.tsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(u,!0),n.tsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},F.ItemList({id:this.id,filterText:this._filterText,
items:v,messages:{filterPlaceholder:N.filterPlaceholder,noItems:N.noItems,noMatches:N.noMatches},onItemMouseEnter:({data:X})=>this._setCandidateFeature(X),onItemMouseLeave:()=>this._setCandidateFeature(null),onItemSelect:({data:X})=>this._setCandidateFeature(X,!0),onFilterChange:X=>this._filterText=X})))};K._getSketchingTip=function(P,N){const {messages:g}=this;if("point"===P)return g.tips.clickToAddPoint;if("polygon"===P||"polyline"===P){if(!N)return g.tips.clickToStart;[N]=N.geometry["polygon"===
P?"rings":"paths"];return"polygon"===P&&4>N?g.tips.clickToContinue:g.tips.clickToContinueThenDoubleClickToEnd}return g.tips.clickToAddFeature};K._getLabel=function(P){var N=P.layer;if(!N)return null;const {objectIdField:g}=N;({attributes:P}=P);return(N=c.getDisplayFieldName(N))&&P[N]&&`${P[N]}`||C.substitute(this.messages.untitledFeatureTemplate,{id:P[g]})};K._handleDelete=function(){const {messages:P,messagesCommon:N}=this;this._prompt={title:P.deleteWarningTitle,message:P.deleteWarningMessage,options:[{label:P.keepFeature,
type:"neutral",action:()=>this._prompt=null},{label:N.delete,type:"positive",action:()=>{this.viewModel.deleteFeatureFromWorkflow();this._prompt=null}}]}};K._handleSave=function(){this.viewModel.activeWorkflow.commit()};K._handleAttachmentAdd=function(){const {_attachments:P}=this,{activeWorkflow:N}=this.viewModel;P.addAttachment().then(()=>N.previous())};K._handleAttachmentUpdate=function(){const {_attachments:P}=this,{activeWorkflow:N}=this.viewModel;P.updateAttachment().then(()=>N.previous())};
K._handleAttachmentDelete=function(){const {messages:P,messagesCommon:N}=this;this._prompt={title:P.deleteAttachmentWarningTitle,message:P.deleteAttachmentWarningMessage,options:[{label:P.keepAttachment,type:"neutral",action:()=>this._prompt=null},{label:N.delete,type:"positive",action:()=>{const {_attachments:g}=this,{activeWorkflow:v}=this.viewModel;g.deleteAttachment(g.viewModel.activeAttachmentInfo).then(()=>{v.previous();this._prompt=null})}}]}};K._handleAdd=function(){this.viewModel.canCreate&&
this.viewModel.startCreateWorkflowAtFeatureTypeSelection()};K._handleEdit=function(){this.viewModel.canUpdate&&this.viewModel.startUpdateWorkflowAtFeatureSelection()};K._handleDone=function(){this.viewModel.cancelWorkflow({force:!0})};K._handleBack=function(){const {messages:P}=this,N=this._assertActiveCreateOrUpdateWorklow(),{stepId:g,data:v,type:u}=N,U=()=>{N.hasPreviousStep?N.previous({cancelCurrentStep:!0}):this.viewModel.cancelWorkflow({force:!0})};"editing-new-feature"===g||"editing-existing-feature"===
g&&v.edits.modified?this._prompt={title:"create"===u?P.cancelAddTitle:P.cancelEditTitle,message:"create"===u?P.cancelAddWarningMessage:P.cancelEditWarningMessage,options:[{label:"create"===u?P.continueAdding:P.continueEditing,type:"neutral",action:()=>this._prompt=null},{label:"create"===u?P.discardFeature:P.discardEdits,type:"negative",action:()=>{U();this._prompt=null}}]}:U()};K._assertActiveCreateWorkflow=function(){if("create"===this.viewModel.activeWorkflow.type)return this.viewModel.activeWorkflow;
throw Error("Expected activeWorkflow to be a CreateWorkflow");};K._assertActiveUpdateWorkflow=function(){if("update"===this.viewModel.activeWorkflow.type)return this.viewModel.activeWorkflow;throw Error("Expected activeWorkflow to be an UpdateWorkflow");};K._assertActiveCreateOrUpdateWorklow=function(){switch(this.viewModel.activeWorkflow.type){case "create":case "update":return this.viewModel.activeWorkflow}throw Error("Expected activeWorkflow to be either CreateWorkflow or UpdateWorkflow");};return A}(x.HandleOwnerMixin(l));
d.__decorate([w.property()],b.prototype,"_attachments",void 0);d.__decorate([Q.aliasOf("viewModel.activeWorkflow")],b.prototype,"activeWorkflow",void 0);d.__decorate([Q.aliasOf("viewModel.allowedWorkflows")],b.prototype,"allowedWorkflows",void 0);d.__decorate([w.property()],b.prototype,"headingLevel",void 0);d.__decorate([w.property()],b.prototype,"iconClass",void 0);d.__decorate([w.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);d.__decorate([Q.aliasOf("viewModel.layerInfos")],
b.prototype,"layerInfos",void 0);d.__decorate([w.property(),q.messageBundle("esri/widgets/Editor/t9n/Editor")],b.prototype,"messages",void 0);d.__decorate([w.property(),q.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);d.__decorate([w.property(),q.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],b.prototype,"messagesTemplates",void 0);d.__decorate([Q.aliasOf("viewModel.snappingOptions")],b.prototype,"snappingOptions",void 0);d.__decorate([w.property()],b.prototype,
"supportingWidgetDefaults",void 0);d.__decorate([Q.aliasOf("viewModel.view")],b.prototype,"view",void 0);d.__decorate([w.property(),L.vmEvent(["workflow-cancel","workflow-commit"])],b.prototype,"viewModel",void 0);d.__decorate([t.accessibleHandler()],b.prototype,"_handleDelete",null);d.__decorate([t.accessibleHandler()],b.prototype,"_handleAttachmentAdd",null);d.__decorate([t.accessibleHandler()],b.prototype,"_handleAttachmentUpdate",null);d.__decorate([t.accessibleHandler()],b.prototype,"_handleAttachmentDelete",
null);d.__decorate([t.accessibleHandler()],b.prototype,"_handleAdd",null);d.__decorate([t.accessibleHandler()],b.prototype,"_handleEdit",null);d.__decorate([t.accessibleHandler()],b.prototype,"_handleDone",null);d.__decorate([t.accessibleHandler()],b.prototype,"_handleBack",null);return b=d.__decorate([h.subclass("esri.widgets.Editor")],b)});