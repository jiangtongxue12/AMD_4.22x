// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ../../support/featureFlags".split(" "),function(e,q,r,m,t,n,u,v,w){function x(a,b){return k.apply(this,arguments)}function k(){k=q._asyncToGenerator(function*(a,b){try{return{data:(yield p(a,b)).data,baseUrl:n.removeFile(a),styleUrl:a}}catch(c){return t.throwIfAbortError(c),null}});return k.apply(this,arguments)}function y(a,
b,c){b=b&&b.portal||u.getDefault();let d;const f=`${b.url} - ${b.user&&b.user.username} - ${a}`;l[f]||(l[f]=z(a,b,c).then(g=>{d=g;return g.fetchData()}).then(g=>({data:g,baseUrl:d.itemUrl,styleName:a})));return l[f]}function z(a,b,c){return b.load(c).then(()=>{const d=new v({disableExtraQuery:!0,query:`owner:${"esri_en"} AND type:${"Style"} AND typekeywords:"${a}"`});return b.queryItems(d,c)}).then(({results:d})=>{let f=null;const g=a.toLowerCase();if(d&&Array.isArray(d))for(const h of d)if(h.typeKeywords.some(A=>
A.toLowerCase()===g)&&"Style"===h.type&&"esri_en"===h.owner){f=h;break}if(!f)throw new m("symbolstyleutils:style-not-found",`The style '${a}' could not be found`,{styleName:a});return f.load(c)})}function p(a,b){b={responseType:"json",query:{f:"json"},...b};return r(n.normalize(a),b)}const l={};e.Style2DUrlTemplate="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f\x3djson";e.fetchStyle=function(a,b,c){return a.styleUrl?x(a.styleUrl,
c):a.styleName?y(a.styleName,b,c):Promise.reject(new m("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))};e.makeCIMSymbolRef=function(a){return null===a||"CIMSymbolReference"===a.type?a:{type:"CIMSymbolReference",symbol:a}};e.requestJSON=p;e.styleNameFromItem=function(a){for(const b of a.typeKeywords)if(/^Esri.*Style$/.test(b)&&"Esri Style"!==b)return b};e.symbolUrlFromStyleItem=function(a,b){if("cimRef"===b)return a.cimRef;if(a.formatInfos&&
!w.enableWebStyleForceWOSR())for(const c of a.formatInfos)if("gltf"===c.type)return c.href;return a.webRef};Object.defineProperty(e,"__esModule",{value:!0})});