// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
define("exports ../../Color ../../core/has ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../core/Logger ../../widgets/support/jsxFactory".split(" "),function(w,B,F,G,r,C,ka,k){function z(a,b){a*=W/180;return Math.abs(b*Math.sin(a))+Math.abs(b*Math.cos(a))}function H(a){return a.map(b=>`${b.command} ${b.values.join(" ")}`).join(" ").trim()}function I(a,b,c,d){if(a){if("circle"===a.type)return k.tsx("circle",{fill:b,"fill-rule":"evenodd",stroke:c.color,"stroke-width":c.width,
"stroke-linecap":c.cap,"stroke-linejoin":c.join,"stroke-dasharray":c.dashArray,"stroke-miterlimit":"4",cx:a.cx,cy:a.cy,r:a.r});if("ellipse"===a.type)return k.tsx("ellipse",{fill:b,"fill-rule":"evenodd",stroke:c.color,"stroke-width":c.width,"stroke-linecap":c.cap,"stroke-linejoin":c.join,"stroke-dasharray":c.dashArray,"stroke-miterlimit":"4",cx:a.cx,cy:a.cy,rx:a.rx,ry:a.ry});if("rect"===a.type)return k.tsx("rect",{fill:b,"fill-rule":"evenodd",stroke:c.color,"stroke-width":c.width,"stroke-linecap":c.cap,
"stroke-linejoin":c.join,"stroke-dasharray":c.dashArray,"stroke-miterlimit":"4",x:a.x,y:a.y,width:a.width,height:a.height});if("image"===a.type)return k.tsx("image",{href:a.src,x:a.x,y:a.y,width:a.width,height:a.height,preserveAspectRatio:"none"});if("path"===a.type)return a="string"!==typeof a.path?H(a.path):a.path,k.tsx("path",{fill:b,"fill-rule":"evenodd",stroke:c.color,"stroke-width":c.width,"stroke-linecap":c.cap,"stroke-linejoin":c.join,"stroke-dasharray":c.dashArray,"stroke-miterlimit":"4",
d:a});if("text"===a.type)return k.tsx("text",{fill:b,"fill-rule":"evenodd",stroke:c.color,"stroke-width":c.width,"stroke-linecap":c.cap,"stroke-linejoin":c.join,"stroke-dasharray":c.dashArray,"stroke-miterlimit":"4","text-anchor":d.align,"text-decoration":d.decoration,kerning:d.kerning,rotate:d.rotate,"text-rendering":X,"font-style":d.font.style,"font-variant":d.font.variant,"font-weight":d.font.weight,"font-size":d.font.size,"font-family":d.font.family,x:a.x,y:a.y},a.text)}return null}function J(a){const b=
{fill:"none",pattern:null,linearGradient:null};if(a)if("type"in a&&"pattern"===a.type){var c=`patternId-${++Y}`;b.fill=`url(#${c})`;b.pattern={id:c,x:a.x,y:a.y,width:a.width,height:a.height,image:{x:0,y:0,width:a.width,height:a.height,href:a.src}}}else"type"in a&&"linear"===a.type?(c=`linearGradientId-${++Z}`,b.fill=`url(#${c})`,b.linearGradient={id:c,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,stops:a.colors.map(d=>({offset:d.offset,color:d.color&&(new B(d.color)).toString()}))}):a&&(a=new B(a),b.fill=a.toString());
return b}function K(a){const b={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(a&&(null!=a.width&&(b.width=a.width),a.cap&&(b.cap=a.cap),a.join&&(b.join=a.join.toString()),a.color&&(b.color=(new B(a.color)).toString()),a.style)){let d=null;a.style in L&&(d=L[a.style]);if(Array.isArray(d)){d=d.slice(0);for(var c=0;c<d.length;++c)d[c]*=a.width;if("butt"!==a.cap){for(c=0;c<d.length;c+=2)d[c]-=a.width,1>d[c]&&(d[c]=1);for(c=1;c<d.length;c+=2)d[c]+=a.width}d=d.join(",")}b.dashArray=d}return b}
function M(a,b){const c={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};a&&(c.align=a.align,c.decoration=a.decoration,c.kerning=a.kerning?"auto":"0",c.rotate=a.rotated?"90":"0",c.font.style=b.style||"normal",c.font.variant=b.variant||"normal",c.font.weight=b.weight||"normal",c.font.size=b.size&&b.size.toString()||"10pt",c.font.family=b.family||"serif");return c}function N(a){const {pattern:b,linearGradient:c}=a;return b?k.tsx("pattern",
{id:b.id,patternUnits:"userSpaceOnUse",x:b.x,y:b.y,width:b.width,height:b.height},k.tsx("image",{x:b.image.x,y:b.image.y,width:b.image.width,height:b.image.height,href:b.image.href})):c?(a=c.stops.map((d,f)=>k.tsx("stop",{key:`${f}-stop`,offset:d.offset,"stop-color":d.color})),k.tsx("linearGradient",{id:c.id,gradientUnits:"userSpaceOnUse",x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2},a)):null}function O(a,b,c){return r.translate(a,r.identity(a),[b,c])}function P(a,b,c,d,f){r.scale(a,r.identity(a),[b,c]);a[4]=
a[4]*b-d*b+d;a[5]=a[5]*c-f*c+f;return a}function aa(a,b,c,d){var f=b%360*Math.PI/180;r.rotate(a,r.identity(a),f);b=Math.cos(f);f=Math.sin(f);const g=a[4],l=a[5];a[4]=g*b-l*f+d*f-c*b+c;a[5]=l*b+g*f-c*f-d*b+d;return a}function n(a,b){m&&"left"in m?(m.left>a&&(m.left=a),m.right<a&&(m.right=a),m.top>b&&(m.top=b),m.bottom<b&&(m.bottom=b)):m={left:a,bottom:b,right:a,top:b}}function Q(a){const b=a.args,c=b.length;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(a=0;a<c;a+=2)n(b[a],
b[a+1]);e.x=b[c-2];e.y=b[c-1];break;case "H":for(a=0;a<c;++a)n(b[a],e.y);e.x=b[c-1];break;case "V":for(a=0;a<c;++a)n(e.x,b[a]);e.y=b[c-1];break;case "m":a=0;"x"in e||(n(e.x=b[0],e.y=b[1]),a=2);for(;a<c;a+=2)n(e.x+=b[a],e.y+=b[a+1]);break;case "l":case "t":for(a=0;a<c;a+=2)n(e.x+=b[a],e.y+=b[a+1]);break;case "h":for(a=0;a<c;++a)n(e.x+=b[a],e.y);break;case "v":for(a=0;a<c;++a)n(e.x,e.y+=b[a]);break;case "c":for(a=0;a<c;a+=6)n(e.x+b[a],e.y+b[a+1]),n(e.x+b[a+2],e.y+b[a+3]),n(e.x+=b[a+4],e.y+=b[a+5]);
break;case "s":case "q":for(a=0;a<c;a+=4)n(e.x+b[a],e.y+b[a+1]),n(e.x+=b[a+2],e.y+=b[a+3]);break;case "A":for(a=0;a<c;a+=7)n(b[a+5],b[a+6]);e.x=b[c-2];e.y=b[c-1];break;case "a":for(a=0;a<c;a+=7)n(e.x+=b[a+5],e.y+=b[a+6])}}function R(a,b,c){const d=ba[a.toLowerCase()];"number"===typeof d&&(d?b.length>=d&&(a={action:a,args:b.slice(0,b.length-b.length%d)},c.push(a),Q(a)):(a={action:a,args:[]},c.push(a),Q(a)))}function S(a){const b={x:0,y:0,width:0,height:0};if("circle"===a.type)b.x=a.cx-a.r,b.y=a.cy-
a.r,b.width=2*a.r,b.height=2*a.r;else if("ellipse"===a.type)b.x=a.cx-a.rx,b.y=a.cy-a.ry,b.width=2*a.rx,b.height=2*a.ry;else if("image"===a.type||"rect"===a.type)b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height;else if("path"===a.type){{const f=("string"!==typeof a.path?H(a.path):a.path).match(ca),g=[];m={};e={};if(f){a="";var c=[],d=f.length;for(let l=0;l<d;++l){const q=f[l],h=parseFloat(q);isNaN(h)?(a&&R(a,c,g),c=[],a=q):c.push(h)}R(a,c,g);a={x:0,y:0,width:0,height:0};m&&"left"in m&&(a.x=m.left,
a.y=m.top,a.width=m.right-m.left,a.height=m.bottom-m.top)}else a=null}b.x=a.x;b.y=a.y;b.width=a.width;b.height=a.height}return b}function T(a){const b={x:0,y:0,width:0,height:0};let c=null,d=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY;for(const g of a)c?(c.x=Math.min(c.x,g.x),c.y=Math.min(c.y,g.y),d=Math.max(d,g.x+g.width),f=Math.max(f,g.y+g.height)):(c=b,c.x=g.x,c.y=g.y,d=g.x+g.width,f=g.y+g.height);c&&(c.width=d-c.x,c.height=f-c.y);return c}function U(a,b,c,d,f,g,l,q,h){var p=(l&&g?z(g,
b):b)/2,x=(l&&g?z(g,c):c)/2;h&&(p=h[0],x=h[1],p=(l&&g?z(g,p):p)/2,x=(l&&g?z(g,x):x)/2);const t=a.width+d,u=a.height+d;l=G.create();h=G.create();var v=!1;if(f&&0!==t&&0!==u){f=t/u;v=b>c?b:c;let A=1,y=1;isNaN(v)||(1<f?(A=v/t,y=v/f/u):(y=v/u,A=v*f/t));r.multiply(h,h,P(l,A,y,p,x));v=!0}f=a.x+(t-d)/2;a=a.y+(u-d)/2;r.multiply(h,h,O(l,p-f,x-a));!v&&(t>b||u>c)&&(d=t/b>u/c,b=(d?b:c)/(d?t:u),r.multiply(h,h,P(l,b,b,f,a)));g&&r.multiply(h,h,aa(l,g,f,a));q&&r.multiply(h,h,O(l,q[0],q[1]));return`matrix(${h[0]},${h[1]},${h[2]},${h[3]},${h[4]},${h[5]})`}
function da(a,b,c){a=null==a?void 0:a.effects.find(q=>"bloom"===q.type);if(!a)return null;const {strength:d,radius:f}=a;a=0<d?f:0;const g=(d+a)*b,l=4*d+1;return k.tsx("filter",{id:`bloom${c}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},k.tsx("feMorphology",{operator:"dilate",radius:(d+.5*a)*5**(b/100)*(.4+b/100),in:"SourceGraphic",result:"dilate"}),k.tsx("feGaussianBlur",{in:"dilate",stdDeviation:g/25,result:"blur"}),k.tsx("feGaussianBlur",{in:"blur",stdDeviation:g/
50,result:"intensityBlur"}),k.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},k.tsx("feFuncR",{type:"linear",slope:l}),k.tsx("feFuncG",{type:"linear",slope:l}),k.tsx("feFuncB",{type:"linear",slope:l})),k.tsx("feMerge",null,k.tsx("feMergeNode",{in:"intensityBlur"}),k.tsx("feMergeNode",{in:"intensityBrightness"}),k.tsx("feGaussianBlur",{stdDeviation:d/10})))}let Y=0,Z=0;C=F("android");const X=F("chrome")||C&&4<=C?"auto":"optimizeLegibility",ba={m:2,l:2,h:1,v:1,c:6,s:4,q:4,
t:2,a:7,z:0},ca=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let m={},e={};const L={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},W=Math.PI;let ea=1;w.computeBBox=T;w.generateFillAttributes=J;w.generateStrokeAttributes=K;w.generateTextAttributes=M;w.getBoundingBox=S;w.getTransformMatrix=U;w.renderDef=N;w.renderSVG=function(a,b,c,d){const f=
[],g=[],l=++ea,q=da(null==d?void 0:d.effectView,b,l);var h=null;if(q){var p;h=null==d?void 0:null==(p=d.effectView)?void 0:p.effects.find(x=>"bloom"===x.type);h=(h.strength?h.strength+h.radius/2:0)/3;h=[Math.max(b+b*h,10),Math.max(c+c*h,10)]}for(const x of a){a=[];p=[];let t=0,u=0,v=0;for(const A of x){const {shape:y,fill:fa,stroke:D,font:ha,offset:E}=A;t+=D&&D.width||0;const V=J(fa),ia=K(D),ja="text"===y.type?M(y,ha):null;f.push(N(V));a.push(I(y,V.fill,ia,ja));p.push(S(y));E&&(u+=E[0],v+=E[1])}p=
U(T(p),b,c,t,null==d?void 0:d.scale,null==d?void 0:d.rotation,null==d?void 0:d.useRotationSize,[u,v],h);g.push(k.tsx("g",{transform:p},a))}null!=d&&d.useRotationSize&&null!=d&&d.rotation&&(b=z(null==d?void 0:d.rotation,b),c=z(null==d?void 0:d.rotation,c));q&&(b=h[0],c=h[1]);return k.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:b,height:c},q,k.tsx("defs",null,f),q?k.tsx("g",{filter:`url(#bloom${l})`},g):g)};w.renderShape=I;Object.defineProperty(w,"__esModule",{value:!0})});