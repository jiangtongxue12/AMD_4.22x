// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.22/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(a,g){a.updateOrigins=function(c){c&&c.writtenProperties&&c.writtenProperties.forEach(p=>{const q=p.target;p.newOrigin&&p.oldOrigin!==p.newOrigin&&g.isMultiOriginJSONMixin(q)&&q.updateOrigin(p.propName,p.newOrigin)})};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(a){a.isMultiOriginJSONMixin=
function(g){return g&&"getAtOrigin"in g&&"originOf"in g};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(a,
g,c,p,q,t,A,d,x,D,k){c=function(B){function e(u){u=B.call(this,u)||this;u.levelLayer=null;u.facilityLayer=null;u.siteLayer=null;return u}a._inheritsLoose(e,B);return e}(c.JSONSupport);g.__decorate([p.property({type:D,json:{write:!0}})],c.prototype,"levelLayer",void 0);g.__decorate([p.property({type:x,json:{write:!0}})],c.prototype,"facilityLayer",void 0);g.__decorate([p.property({type:k,json:{write:!0}})],c.prototype,"siteLayer",void 0);return c=g.__decorate([d.subclass("esri.support.MapFloorInfo")],
c)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,g,c,p,q,t,A,d){c=function(x){function D(k){k=x.call(this,k)||this;k.facilityIdField=null;k.layerId=null;k.nameField=null;k.siteIdField=null;k.sublayerId=null;return k}
a._inheritsLoose(D,x);return D}(c.JSONSupport);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"facilityIdField",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"layerId",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"nameField",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"siteIdField",void 0);g.__decorate([p.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},
origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"sublayerId",void 0);return c=g.__decorate([d.subclass("esri.layers.support.FacilityLayerInfo")],c)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,g,c,p,q,
t,A,d){c=function(x){function D(k){k=x.call(this,k)||this;k.facilityIdField=null;k.layerId=null;k.levelIdField=null;k.levelNumberField=null;k.longNameField=null;k.shortNameField=null;k.sublayerId=null;k.verticalOrderField=null;return k}a._inheritsLoose(D,x);return D}(c.JSONSupport);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"facilityIdField",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"layerId",void 0);g.__decorate([p.property({type:String,
json:{write:!0}})],c.prototype,"levelIdField",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"levelNumberField",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"longNameField",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"shortNameField",void 0);g.__decorate([p.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"sublayerId",
void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"verticalOrderField",void 0);return c=g.__decorate([d.subclass("esri.layers.support.LevelLayerInfo")],c)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,g,c,p,q,t,A,d){c=function(x){function D(k){k=x.call(this,k)||this;k.layerId=null;k.nameField=null;k.siteIdField=null;k.sublayerId=null;return k}a._inheritsLoose(D,x);return D}(c.JSONSupport);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"layerId",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"nameField",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"siteIdField",void 0);g.__decorate([p.property({type:Number,
json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"sublayerId",void 0);return c=g.__decorate([d.subclass("esri.layers.support.SiteLayerInfo")],c)})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(a,g){a.createCopyError=function(){return new g("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};a.createSchemaValidationError=function(c){return new g("webscene:schema-validation",
"Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:c})};a.isCopyError=function(c){return c&&"webscene:failed-to-copy-embedded-resources"===c.name};a.isSchemaValidationError=function(c){return c&&"webscene:schema-validation"===c.name};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports"],function(a){a.isSpatialReferenceSupported=function(g,c){return null==g?!1:
null==c?!0:2===c?g.isGeographic?g.isWGS84||4490===g.wkid:!0:g.isWebMercator||g.isWGS84||4490===g.wkid||104971===g.wkid||104905===g.wkid||104903===g.wkid};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/asyncUtils ../../core/Error ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),function(a,g,c,p,q,t,A){function d(){d=g._asyncToGenerator(function*(e,
u,h){if(u&&u.resources){var y=u.portalItem===e.portalItem?new Set(e.paths):new Set;e.paths.length=0;e.portalItem=u.portalItem;var G=new Set(u.resources.toKeep.map(L=>L.resource.path)),N=new Set,P=[];G.forEach(L=>{y.delete(L);e.paths.push(L)});for(const L of u.resources.toUpdate)if(y.delete(L.resource.path),G.has(L.resource.path)||N.has(L.resource.path)){const {resource:X,content:ea,finish:v,error:K}=L,V=A.getSiblingOfSameTypeI(X,t.generateUUID());e.paths.push(V.path);P.push(x({resource:V,content:ea,
finish:v,error:K},h))}else e.paths.push(L.resource.path),P.push(k(L,h)),N.add(L.resource.path);for(const L of u.resources.toAdd)P.push(x(L,h)),e.paths.push(L.resource.path);y.forEach(L=>{L=u.portalItem.resourceFromPath(L);P.push(L.portalItem.removeResource(L).catch(()=>{}))});if(0!==P.length&&(G=yield q.eachAlways(P),q.throwIfAborted(h),h=G.filter(L=>"error"in L).map(L=>L.error),0<h.length))throw new p("save:resources","Failed to save one or more resources",{errors:h});}});return d.apply(this,arguments)}
function x(e,u){return D.apply(this,arguments)}function D(){D=g._asyncToGenerator(function*(e,u){u=yield c.result(e.resource.portalItem.addResource(e.resource,e.content,u));if(!0===u.ok)e.finish&&e.finish(e.resource);else throw e.error&&e.error(u.error),u.error;});return D.apply(this,arguments)}function k(e,u){return B.apply(this,arguments)}function B(){B=g._asyncToGenerator(function*(e,u){u=yield c.result(e.resource.update(e.content,u));if(!0===u.ok)e.finish(e.resource);else throw e.error(u.error),
u.error;});return B.apply(this,arguments)}a.saveResources=function(e,u,h){return d.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/portal/support/resourceUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/maybe ../../core/urlUtils".split(" "),function(a,g,c,p,q,t){function A(){A=g._asyncToGenerator(function*(h,y={},G){yield h.load(G);var N=t.join(h.itemUrl,"resources");const {start:P=1,num:L=10,sortOrder:X=
"asc",sortField:ea="created"}=y;y={query:{start:P,num:L,sortOrder:X,sortField:ea,token:h.apiKey},signal:q.get(G,"signal")};N=yield h.portal._request(N,y);return{total:N.total,nextStart:N.nextStart,resources:N.resources.map(({created:v,size:K,resource:V})=>({created:new Date(v),size:K,resource:h.resourceFromPath(V)}))}});return A.apply(this,arguments)}function d(){d=g._asyncToGenerator(function*(h,y,G,N){if(!h.hasPath())throw new p(`portal-item-resource-${y}:invalid-path`,"Resource does not have a valid path");
const P=h.portalItem;yield P.load(N);y=t.join(P.userItemUrl,"add"===y?"addResources":"updateResources");const [L,X]=k(h.path);G=yield e(G);const ea=new FormData;L&&"."!==L&&ea.append("resourcesPrefix",L);ea.append("fileName",X);ea.append("file",G,X);ea.append("f","json");q.isSome(N)&&N.access&&ea.append("access",N.access);yield P.portal._request(y,{method:"post",body:ea,signal:q.get(N,"signal")});return h});return d.apply(this,arguments)}function x(){x=g._asyncToGenerator(function*(h,y,G){if(!y.hasPath())throw new p("portal-item-resources-remove:invalid-path",
"Resource does not have a valid path");yield h.load(G);const N=t.join(h.userItemUrl,"removeResources");yield h.portal._request(N,{method:"post",query:{resource:y.path},signal:q.get(G,"signal")});y.portalItem=null});return x.apply(this,arguments)}function D(){D=g._asyncToGenerator(function*(h,y){yield h.load(y);const G=t.join(h.userItemUrl,"removeResources");return h.portal._request(G,{method:"post",query:{deleteAll:!0},signal:q.get(y,"signal")})});return D.apply(this,arguments)}function k(h){const y=
h.lastIndexOf("/");return-1===y?[".",h]:[h.slice(0,y),h.slice(y+1)]}function B(h){{const L=t.getPathExtension(h);h=q.isNone(L)?[h,""]:[h.slice(0,h.length-L.length-1),`.${L}`]}const [y,G]=h,[N,P]=k(y);return[N,P,G]}function e(h){return u.apply(this,arguments)}function u(){u=g._asyncToGenerator(function*(h){return h instanceof Blob?h:(yield c(h.url,{responseType:"blob"})).data});return u.apply(this,arguments)}a.addOrUpdateResource=function(h,y,G,N){return d.apply(this,arguments)};a.contentToBlob=e;
a.fetchResources=function(h){return A.apply(this,arguments)};a.getSiblingOfSameType=function(h,y){if(!h.hasPath())return null;const [G,,N]=B(h.path);return h.portalItem.resourceFromPath(t.join(G,y+N))};a.getSiblingOfSameTypeI=function(h,y){if(!h.hasPath())return null;const [G,,N]=B(h.path);return h.portalItem.resourceFromPath(t.join(G,y+N))};a.removeAllResources=function(h,y){return D.apply(this,arguments)};a.removeResource=function(h,y,G){return x.apply(this,arguments)};a.splitPrefixFileNameAndExtension=
B;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(a){const g={width:600,height:400};a.getOptimalThumbnailSize=function(c,p){p=p||g;let {width:q,height:t}=p;p=q/t;1.5>p?t=q/1.5:1.5<p&&(q=1.5*t);q>c.width&&(t*=c.width/q,q=c.width);t>c.height&&(q*=c.height/t,t=c.height);return{width:Math.round(q),height:Math.round(t)}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(a,g,c,p,q,t,A,d,x){var D;c=D=function(k){function B(e){e=k.call(this,e)||this;e.viewing=null;return e}a._inheritsLoose(B,k);B.prototype.clone=function(){return new D({viewing:this.viewing?this.viewing.clone():null})};return B}(c.JSONSupport);g.__decorate([p.property({type:x,json:{write:!0}})],c.prototype,"viewing",void 0);return c=D=g.__decorate([d.subclass("esri.webscene.ApplicationProperties")],c)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(a,g,c,p,q,t,A,d){var x;c=x=function(D){function k(B){B=D.call(this,B)||this;B.search=null;return B}a._inheritsLoose(k,D);k.prototype.clone=function(){return new x(p.clone({search:this.search}))};return k}(c.JSONSupport);g.__decorate([q.property({type:d,json:{write:!0}})],c.prototype,"search",void 0);return c=x=g.__decorate([A.subclass("esri.webdoc.applicationProperties.Viewing")],c)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(a,g,c,p,q,t,A,d,x,D,k,B,e){var u;const h=c.ofType(B),y=c.ofType(e);c=u=function(G){function N(L){L=G.call(this,L)||this;L.addressSearchEnabled=!0;L.enabled=!0;L.hintText=null;L.layers=new h;L.tables=new y;return L}a._inheritsLoose(N,G);var P=N.prototype;P.readAddressSearchEnabled=function(L){return!L};P.writeAddressSearchEnabled=function(L,X,ea){X[ea]=!L};P.clone=function(){return new u(q.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,
tables:this.tables}))};return N}(p.JSONSupport);g.__decorate([t.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"addressSearchEnabled",void 0);g.__decorate([d.reader("addressSearchEnabled")],c.prototype,"readAddressSearchEnabled",null);g.__decorate([D.writer("addressSearchEnabled")],c.prototype,"writeAddressSearchEnabled",null);g.__decorate([t.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],c.prototype,"enabled",void 0);g.__decorate([t.property({type:String,json:{write:!0}})],c.prototype,"hintText",void 0);g.__decorate([t.property({type:h,json:{write:{overridePolicy:k.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],c.prototype,"layers",void 0);g.__decorate([t.property({type:y,json:{read:!0,write:{overridePolicy:k.writeNonEmptyCollectionPolicy}}})],
c.prototype,"tables",void 0);return c=u=g.__decorate([x.subclass("esri.webdoc.applicationProperties.Search")],c)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(a){a.writeNonEmptyCollectionPolicy=function(g){return{enabled:!(null==g||!g.length)}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(a,g,c,p,q,t,A,d){var x;c=x=function(D){function k(B){B=D.call(this,B)||this;B.field=null;B.id=null;B.subLayer=null;return B}a._inheritsLoose(k,D);k.prototype.clone=function(){return new x(p.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return k}(c.JSONSupport);g.__decorate([q.property({type:d,json:{write:{isRequired:!0}}})],c.prototype,"field",void 0);g.__decorate([q.property({type:String,json:{write:{isRequired:!0}}})],c.prototype,"id",void 0);g.__decorate([q.property({type:t.Integer,
json:{write:!0}})],c.prototype,"subLayer",void 0);return c=x=g.__decorate([A.subclass("esri.webdoc.applicationProperties.SearchLayer")],c)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,g,c,p,q,t,A,d,x,D){var k;c=k=function(B){function e(u){u=B.call(this,u)||this;u.exactMatch=!1;u.name=null;u.type=null;return u}a._inheritsLoose(e,B);e.prototype.clone=function(){return new k({exactMatch:this.exactMatch,type:this.type,name:this.name})};return e}(c.JSONSupport);g.__decorate([p.property({type:Boolean,json:{write:!0}})],c.prototype,"exactMatch",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);g.__decorate([d.enumeration(D.kebabDict)],
c.prototype,"type",void 0);return c=k=g.__decorate([x.subclass("esri.webdoc.applicationProperties.SearchLayerField")],c)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(a,g,c,p,q,t,A,d){var x;c=x=function(D){function k(B){B=
D.call(this,B)||this;B.field=null;B.id=null;return B}a._inheritsLoose(k,D);k.prototype.clone=function(){return new x(p.clone({field:this.field,id:this.id}))};return k}(c.JSONSupport);g.__decorate([q.property({type:d,json:{write:{isRequired:!0}}})],c.prototype,"field",void 0);g.__decorate([q.property({type:String,json:{write:{isRequired:!0}}})],c.prototype,"id",void 0);return c=x=g.__decorate([A.subclass("esri.webdoc.applicationProperties.SearchTable")],c)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,g,c,p,q,t,A,d,x,D){var k;c=k=function(B){function e(u){u=B.call(this,u)||this;u.exactMatch=!1;u.name=null;u.type=null;return u}a._inheritsLoose(e,B);e.prototype.clone=function(){return new k({exactMatch:this.exactMatch,type:this.type,name:this.name})};return e}(c.JSONSupport);g.__decorate([p.property({type:Boolean,json:{write:!0}})],c.prototype,"exactMatch",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);g.__decorate([d.enumeration(D.kebabDict)],
c.prototype,"type",void 0);return c=k=g.__decorate([x.subclass("esri.webdoc.applicationProperties.SearchTableField")],c)})},"esri/webscene/Environment":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Lighting ./background/utils".split(" "),function(a,g,c,p,q,t,A,d,x){var D;t=(k,B,e)=>({enabled:!e||!e.isPresentation});
c=D=function(k){function B(u){u=k.call(this,u)||this;u.lighting=new d;u.background=null;u.atmosphereEnabled=!0;u.starsEnabled=!0;return u}a._inheritsLoose(B,k);var e=B.prototype;e.clone=function(){return new D(this.cloneConstructProperties())};e.cloneConstructProperties=function(){return{lighting:d.prototype.clone.call(this.lighting),background:p.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled}};return B}(c.JSONSupport);g.__decorate([q.property({type:d,
json:{write:!0}})],c.prototype,"lighting",void 0);g.__decorate([q.property(x.backgroundProperty)],c.prototype,"background",void 0);g.__decorate([q.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:t}}})],c.prototype,"atmosphereEnabled",void 0);g.__decorate([q.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:t}}})],c.prototype,"starsEnabled",void 0);return c=D=g.__decorate([A.subclass("esri.webscene.Environment")],c)})},"esri/webscene/Lighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),
function(a,g,c,p,q,t,A,d,x,D){var k;c=k=function(B){function e(h){h=B.call(this,h)||this;h.date=null;h.directShadowsEnabled=!1;h.displayUTCOffset=null;return h}a._inheritsLoose(e,B);var u=e.prototype;u.readDate=function(h,y){return null!=y.datetime&&new Date(y.datetime)||null};u.writeDate=function(h,y,G){y[G]=h.getTime()};u.readDirectShadowsEnabled=function(h,y){return!!y.directShadows};u.writedirectShadowsEnabled=function(h,y,G){h&&(y[G]=h)};u.writeDisplayUTCOffset=function(h,y){null!=h&&(y.displayUTCOffset=
h)};u.clone=function(){return new k(this.cloneConstructProperties())};u.cloneConstructProperties=function(){const h={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(h.date=new Date(this.date.getTime()));return h};return e}(c.JSONSupport);g.__decorate([p.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],c.prototype,"date",void 0);g.__decorate([d.reader("date",["datetime"])],c.prototype,"readDate",
null);g.__decorate([D.writer("date")],c.prototype,"writeDate",null);g.__decorate([p.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],c.prototype,"directShadowsEnabled",void 0);g.__decorate([d.reader("directShadowsEnabled",["directShadows"])],c.prototype,"readDirectShadowsEnabled",null);g.__decorate([D.writer("directShadowsEnabled")],c.prototype,"writedirectShadowsEnabled",null);g.__decorate([p.property({type:Number,json:{write:!0}})],c.prototype,"displayUTCOffset",void 0);
g.__decorate([D.writer("displayUTCOffset")],c.prototype,"writeDisplayUTCOffset",null);return c=k=g.__decorate([x.subclass("esri.webscene.Lighting")],c)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(a,g,c){g={base:g,key:"type",typeMap:{color:c}};g={types:g,json:{read:function(p){return(q,t,A)=>{if(!q)return q;for(const d in p.typeMap)if(q.type===d)return t=new p.typeMap[d],t.read(q,A),t}}(g),write:{overridePolicy:(p,q,t)=>({enabled:!t||
!t.isPresentation})}}};a.backgroundProperty=g;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webscene/background/Background":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,g,c,p,q,t,A,d){c=function(x){function D(k){return x.call(this,k)||this}
a._inheritsLoose(D,x);D.prototype.clone=function(){};return D}(c.JSONSupport);g.__decorate([p.property({readOnly:!0,json:{read:!1}})],c.prototype,"type",void 0);return c=g.__decorate([d.subclass("esri.webscene.background.Background")],c)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),
function(a,g,c,p,q,t,A,d,x,D,k){var B;q={...D.colorAndTransparencyProperty,nonNullable:!0};k=B=function(e){function u(y){y=e.call(this,y)||this;y.type="color";y.color=new c([0,0,0,1]);return y}a._inheritsLoose(u,e);var h=u.prototype;h.clone=function(){return new B(this.cloneProperties())};h.cloneProperties=function(){return{color:this.color.clone()}};return u}(k);g.__decorate([d.enumeration({color:"color"},{readOnly:!0})],k.prototype,"type",void 0);g.__decorate([p.property(q)],k.prototype,"color",
void 0);return k=B=g.__decorate([x.subclass("esri.webscene.background.ColorBackground")],k)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ./Environment".split(" "),function(a,g,c,p,q,t,A,d,x,D,k){var B;p=B=function(e){function u(h){h=
e.call(this,h)||this;h.environment=new k;h.spatialReference=null;h.viewpoint=null;return h}a._inheritsLoose(u,e);u.prototype.clone=function(){return new B({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};a._createClass(u,[{key:"viewingMode",set:function(h){this._set("viewingMode",h)}}]);return u}(p.JSONSupport);g.__decorate([q.property({type:k,json:{write:{isRequired:!0}}})],
p.prototype,"environment",void 0);g.__decorate([q.property({type:D})],p.prototype,"spatialReference",void 0);g.__decorate([q.property({type:["local","global"]})],p.prototype,"viewingMode",null);g.__decorate([q.property({type:c,json:{write:{isRequired:!0}}})],p.prototype,"viewpoint",void 0);return p=B=g.__decorate([x.subclass("esri.webscene.InitialViewProperties")],p)})},"esri/webscene/Presentation":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(a,g,c,p,q,t,A,d,x,D,k){const B=c.ofType(k);c=function(e){function u(y){y=e.call(this,y)||this;y.slides=new B;return y}a._inheritsLoose(u,e);var h=u.prototype;h.destroy=function(){this.slides.forEach(y=>y.destroy());this.slides.removeAll()};h.clone=function(){return new this.constructor({slides:this.slides.clone()})};a._createClass(u,[{key:"slides",set:function(y){y&&(y=y.filter(G=>!!G.viewpoint));this._set("slides",p.referenceSetter(y,this._get("slides"),B))}}]);return u}(q.JSONSupport);
g.__decorate([t.property({type:B,nonNullable:!0,json:{write:!0}}),x.cast(p.castForReferenceSetter)],c.prototype,"slides",null);return c=g.__decorate([D.subclass("esri.webscene.Presentation")],c)})},"esri/webscene/Slide":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec3 ../chunks/vec3f64 ../layers/Layer ../layers/mixins/OperationalLayer ../support/basemapUtils ../views/3d/support/mathUtils ../views/3d/support/viewpointUtils ../views/support/Scheduler ../webdoc/support/Thumbnail ./Lighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(a,g,c,p,q,t,A,d,x,D,k,B,e,u,h,y,G,N,P,L,X,ea,v,K,V,r,U,Y,aa,ka,oa,la){function pa(F){if("building-scene"===F.type||"map-image"===F.type)return F.allSublayers.toArray()}function b(F){if(F=pa(F))return F.filter(Q=>Q.visible).map(Q=>Q.id)}function m(F,Q){F=Q-F;43200<F&&(F-=86400);-43200>F&&(F+=86400);return F}let S=0;const ha=t.ofType(oa.default),C=x.getLogger("esri.webscene.Slide");d=function(F){function Q(f){f=F.call(this,f)||this;f.id=Date.now().toString(16)+"-slide-"+S++;f.title=new la;
f.description=new Y;f.thumbnail=new r;f.viewpoint=null;f.basemap=null;f.ground=null;f.environment=new aa.SlideEnvironment;f.visibleLayers=new ha;return f}a._inheritsLoose(Q,F);var I=Q.prototype;I.destroy=function(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail&&this.thumbnail.destroy();this.thumbnail=this.title=this.description=null};I.castTitle=function(f){return"string"===typeof f?new la({text:f}):G.ensureType(la,f)};I.castDescription=function(f){return"string"===typeof f?new Y({text:f}):
G.ensureType(Y,f)};I.castThumbnail=function(f){return"string"===typeof f?new r({url:f}):G.ensureType(r,f)};I.castBasemap=function(f){return ea.ensureType(f)};I.castVisibleLayers=function(f){return f&&"function"===typeof f.map?f.map(l=>{if("string"===typeof l)return{id:l};if(l instanceof L){const J=b(l);return{id:l.id,sublayerIds:J}}if(l.id)return{id:l.id,sublayerIds:l.sublayerIds};C.warn('Invalid visible layer, expected { id }, Layer or "id"');return l}):null};I.clone=function(){return new this.constructor({id:this.id,
title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})};I._updateVisibleLayersFrom=function(f){const l=[];return k.eachAlways(this._getLayers(f.map).map(J=>f.whenLayerView(J).then(T=>
{if(T.visible){const da=b(J);l.push(new oa.default({id:T.layer.id,sublayerIds:da}))}})).toArray()).then(()=>{this.visibleLayers.removeAll();this.visibleLayers.addMany(l)})};I.updateFrom=function(f,l){l={screenshot:{format:"png",quality:80,width:120,height:75,disableDecorations:!0,...l&&l.screenshot}};return f.when(()=>{this.viewpoint=f.viewpoint.clone();this.environment.lighting=U.prototype.clone.apply(f.environment.lighting);this.basemap=f.map.basemap&&f.map.basemap.clone()||null;this.ground=f.map.ground?
ka.fromGround(f.map.ground):null;return this._updateVisibleLayersFrom(f)}).then(()=>f.takeScreenshot(l.screenshot)).then(J=>{this.thumbnail=new r({url:J.dataUrl});return this})};I.applyTo=function(){var f=a._asyncToGenerator(function*(l,J){var T=this;D.isSome(this._applyToController)&&this._applyToController.abort();let da=new AbortController;this._applyToController=da;const z=k.onAbortOrThrow(J,()=>da.abort()),M=l.resourceController.scheduler.registerTask(V.TaskPriority.SLIDE);let ca=!1;J={animate:!0,
...J,signal:this._applyToController.signal};var ia=function(){var ba=a._asyncToGenerator(function*(){yield k.all([M.schedule(()=>ca=T._setViewpointOfInterest(l,J)),M.schedule(()=>T._applyBasemap(l,J),J.signal)]);yield k.all([M.schedule(()=>T._applyLayerVisibility(l),J.signal),M.schedule(()=>T._applyGround(l),J.signal),M.schedule(()=>T._applyViewpoint(l,J),J.signal)])});return function(){return ba.apply(this,arguments)}}();ia=yield q.result(l.addUpdatingPromise(ia()));ca&&(l.contentCamera=null);M.remove();
this._applyToController===da&&(this._applyToController=null);da=null;null==z?void 0:z.remove();if(!1===ia.ok)throw ia.error;return this});return function(l,J){return f.apply(this,arguments)}}();I._applyBasemap=function(){var f=a._asyncToGenerator(function*(l,J){if(this.basemap){try{yield this.basemap.load(J)}catch(T){if(k.isAbortError(T))throw T;}l.map.basemap=ea.clonePreservingTiledLayers(this.basemap,l.map.basemap)}});return function(l,J){return f.apply(this,arguments)}}();I._applyGround=function(f){this.ground&&
(f.map.ground=this.ground.cloneAndApplyTo(f.map.ground))};I._getLayers=function(f){const l=new t;this._collectLayers(f,l);this._collectLayers(f.ground,l);return l};I._collectLayers=function(f,l){f.layers.forEach(J=>{X.isOperationalLayer(J)&&(l.add(J),"layers"in J&&this._collectLayers(J,l))})};I._applyLayerVisibility=function(f){this.visibleLayers&&this._getLayers(f.map).forEach(l=>{var J=this.visibleLayers.find(da=>da.id===l.id);l.visible=null!=J;const T=J&&J.sublayerIds;J=pa(l);T&&J&&J.forEach(da=>
da.visible=0<=T.indexOf(da.id))})};I._setViewpointOfInterest=function(f,l){if(f.state.fixedContentCamera||!this.viewpoint||l.ignoreViewpoint||!l.useDestinationCamera)return!1;l=K.toCamera(f,this.viewpoint);f.contentCamera=l;return D.isSome(l)};I._applyViewpoint=function(){var f=a._asyncToGenerator(function*(l,J){if(this.viewpoint&&!J.ignoreViewpoint){D.isSome(this.viewpoint.camera)&&(this.viewpoint.camera.fov=l.camera.fov);if(J.animate&&this.get("environment.lighting.date")){yield this._animateToLighting(l,
J);return}J.animate&&(l.environment.applyLighting(this.environment.lighting.clone()),yield l.goTo(this.viewpoint,J));l.viewpoint=this.viewpoint}l.environment.applyLighting(this.environment.lighting.clone())});return function(l,J){return f.apply(this,arguments)}}();I._animateToLighting=function(){var f=a._asyncToGenerator(function*(l,J){let T=null;"global"===l.viewingMode&&(T=this._animateLightingWithCamera(l));l.environment.lighting.cameraTrackingEnabled=!1;l.environment.lighting.directShadowsEnabled=
this.environment.lighting.directShadowsEnabled;null!=this.environment.lighting.displayUTCOffset&&(l.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return l.goTo(this.viewpoint,J).then(()=>{l.environment.applyLighting(this.environment.lighting.clone());T&&T.remove();l.environment.lighting.cameraTrackingEnabled=!0},da=>{T&&T.remove();l.environment.lighting.cameraTrackingEnabled=!0;throw da;})});return function(l,J){return f.apply(this,arguments)}}();I._getTime=function(f){const l=
f.getTime();f=3600*f.getUTCHours()+60*f.getUTCMinutes()+f.getUTCSeconds();return[l,f]};I._setTime=function(f,l,J){f.setTime(l);f.setUTCHours(J/3600);f.setUTCMinutes(J%3600/60);f.setUTCSeconds(J%3600%60);return f};I._animateLightingWithCamera=function(f){const [l,J]=this._getTime(new Date(f.environment.lighting.date.toString())),[T,da]=this._getTime(this.environment.lighting.date),z=m(J,da),M=f.renderCoordsHelper,ca=P.create();M.toRenderCoords(f.camera.position,ca);const ia=P.create(),ba=P.create();
D.isSome(this.viewpoint.camera)&&M.toRenderCoords(this.viewpoint.camera.position,ia);const E=new Date;return f.watch("camera",w=>{M.toRenderCoords(w.position,ba);var n=N.squaredDistance(ca,ba);const H=N.squaredDistance(ia,ba);w=0;0!==n+H&&(w=n/(n+H));n=l+(T-l)*w;w=v.moduloPositive(J+z*w,86400);f.environment.lighting.date=this._setTime(E,n,w)})};Q.createFrom=function(f,l){return(new this).updateFrom(f,l)};a._createClass(Q,[{key:"visibleLayers",set:function(f){this._set("visibleLayers",A.referenceSetter(f,
this._get("visibleLayers"),ha))}}]);return Q}(d.JSONSupport);g.__decorate([B.property({type:String,json:{write:{isRequired:!0}}})],d.prototype,"id",void 0);g.__decorate([B.property({type:la,json:{default:()=>new la({text:""}),write:{isRequired:!0}}})],d.prototype,"title",void 0);g.__decorate([h.cast("title")],d.prototype,"castTitle",null);g.__decorate([B.property({type:Y,json:{write:{overridePolicy(F){return{enabled:!(!F||!F.text)}}}}})],d.prototype,"description",void 0);g.__decorate([h.cast("description")],
d.prototype,"castDescription",null);g.__decorate([B.property({type:r,json:{default:()=>new r({url:""}),write:{isRequired:!0}}})],d.prototype,"thumbnail",void 0);g.__decorate([h.cast("thumbnail")],d.prototype,"castThumbnail",null);g.__decorate([B.property({type:p,nonNullable:!0,json:{write:{isRequired:!0}}})],d.prototype,"viewpoint",void 0);g.__decorate([B.property({type:c,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],d.prototype,"basemap",void 0);g.__decorate([h.cast("basemap")],d.prototype,
"castBasemap",null);g.__decorate([B.property({type:ka,json:{write:!0}})],d.prototype,"ground",void 0);g.__decorate([B.property({type:ha,json:{write:{isRequired:!0}}})],d.prototype,"visibleLayers",null);g.__decorate([h.cast("visibleLayers")],d.prototype,"castVisibleLayers",null);g.__decorate([B.property({type:aa.SlideEnvironment,json:{write:!0}})],d.prototype,"environment",void 0);return d=g.__decorate([y.subclass("esri.webscene.Slide")],d)})},"esri/views/3d/support/viewpointUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../geometry ../../../Graphic ../../../Viewpoint ../../../core/asyncUtils ../../../core/has ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../chunks/mat3 ../../../chunks/mat3f64 ../../../chunks/mat4f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/frustum ../../../geometry/support/webMercatorUtils ../camera/intersectionUtils ./cameraUtils ./ElevationProvider ./mathUtils ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Geometry".split(" "),
function(a,g,c,p,q,t,A,d,x,D,k,B,e,u,h,y,G,N,P,L,X,ea,v,K,V,r,U,Y,aa){function ka(O){return 360-V.cyclicalDeg.normalize(O)}function oa(O){return V.cyclicalDeg.normalize(360-O)}function la(O){D.isSome(O)&&O.resolver&&O.resolver.reject();return null}function pa(O,R,fa,ja=null){if(!R)return la(ja);var ma=O.spatialReference||U.WGS84;if(D.isSome(R.camera)){O=X.project(R.camera.position,ma);if(D.isNone(O))return la(ja);R=R.camera.clone();R.position=O;O=R;D.isSome(ja)&&ja.resolver&&ja.resolver.resolve(O);
return O}if(D.isNone(R.targetGeometry))return la(ja);var qa=R.get("targetGeometry.spatialReference");if(qa&&!X.canProject(qa,ma))return la(ja);ma=v.internalToExternal(O,O.state.camera);qa=1;null!=R.rotation&&(ma.heading=ka(R.rotation),qa=0);null!=fa&&(ma.tilt=fa);if("point"===R.targetGeometry.type){const sa=R.targetGeometry;fa=R.targetGeometry.clone();R=null!=R.scale?v.scaleToDistance(O,R.scale,sa.latitude):O.state.camera.distance;return v.fromCenterDistance(O,fa,R,ma,qa,ja)}return v.fromExtent(O,
R.targetGeometry.extent,ma.heading,ma.tilt,qa,ja)}function b(){b=g._asyncToGenerator(function*(O,R,fa){if(R&&O.spatialReference){var ja={target:null};if("declaredClass"in R||Array.isArray(R))ja.target=R;else{for(var ma in R)ja[ma]=R[ma];R.center&&!ja.target&&(ja.target=R.center)}R=ja}else R=null;if(!R)throw new x("viewpointutils-create:no-target","Missing target for creating viewpoint");ja=new c({fov:O.camera.fov});ma=new t({camera:ja});if(R.target instanceof t)return O=yield l(O,R.target,R,fa,ma),
n(O);if(R.target instanceof c)return n(T(O,R.target,ma));var qa=null!=R.scale||null!=R.zoom;if(R.target instanceof Y){var sa=R.target.xmin===R.target.xmax||R.target.ymin===R.target.ymax;return qa||sa?n(yield da(O,R,R.target.center,ja,fa,ma)):n(yield ia(O,R,R.target,ja,fa,ma))}sa={boundingBox:N.empty(),hasZ:!1,screenSpaceObjects:[]};var ua=qa?v.scaleToResolution(O,m(O,R)):void 0;yield I(O,R.target,ua,sa);if(isFinite(sa.boundingBox[0])){N.center(sa.boundingBox,H);wa.x=H[0];wa.y=H[1];wa.z=H[2];wa.spatialReference=
O.spatialReference;isFinite(wa.z)&&sa.hasZ?ua=N.isPoint(sa.boundingBox):(wa.z=void 0,ua=P.isPoint(N.toRect(sa.boundingBox,ra)));if(qa||ua)return n(yield da(O,R,wa,ja,fa,ma));qa=sa.screenSpaceObjects;if(qa.length){ua=Number.NEGATIVE_INFINITY;for(let ya=0;ya<qa.length;ya++){const xa=qa[ya].screenSpaceBoundingRect;ua=Math.max(ua,Math.abs(xa[0]),Math.abs(xa[1]),Math.abs(xa[2]),Math.abs(xa[3]))}qa=.66-ua/Math.min(O.width,O.height)*2}else qa=.66;return n(yield E(O,R,wa,sa.boundingBox,qa,ja,fa,ma))}return R.position?
(fa=ea.cameraOnContentAlongViewDirection(O),h.copy(ta,fa.viewForward),v.directionToHeadingTilt(O,fa.eye,ta,fa.up,Ba),ja.position=new r(R.position),ja.heading=null!=R.heading?R.heading:Ba.heading,ja.tilt=null!=R.tilt?R.tilt:Ba.tilt,O=ha(O,null,ja,ma),n(O)):n(yield M(O,R,ja,fa,ma))});return b.apply(this,arguments)}function m(O,R){return null==R.scale&&null!=R.zoom?v.zoomToScale(O,R.zoom):R.scale}function S(O,R){let fa=!1;null!=R.heading?(O.heading=R.heading,fa=!0):null!=R.rotation&&(O.heading=ka(R.rotation),
fa=!0);null!=R.tilt&&(O.tilt=R.tilt,fa=!0);null!=R.fov&&(O.fov=R.fov);return fa}function ha(O,R,fa,ja){const ma=O.spatialReference||U.WGS84;R=D.isSome(R)?R:v.externalToInternal(O,fa);if(D.isNone(R))return ja;ja.targetGeometry=G.projectVectorToPoint(R.center,O.renderSpatialReference,ma);ja.scale=v.computeScale(O,R);ja.rotation=oa(fa.heading);ja.camera=fa;return ja}function C(O,R,fa){if(R){if(!X.canProject(R.spatialReference,O.spatialReference))throw new x("viewpointutils:incompatible-spatialreference",
`Spatial reference (${R.spatialReference?R.spatialReference.wkid:"unknown"}) is incompatible with the view (${O.spatialReference.wkid})`,{geometry:R});var ja=[];if(!R.hasZ&&O.basemapTerrain){switch(R.type){case "point":var ma=R;break;case "multipoint":case "polyline":ma=R.extent.center;break;case "mesh":ma=R.origin;break;case "extent":ma=R.center;break;case "polygon":ma=R.centroid}ma&&X.canProject(ma,O.basemapTerrain.spatialReference)?H[2]=D.unwrapOr(K.getElevationAtPoint(O.elevationProvider,ma),
0):H[2]=0}(0,Ea[R.type])(R,sa=>{ja.push(sa[0],sa[1],sa[2])},H);var qa=ja.length/3;if(0!==qa&&(ma=Array(ja.length),G.projectBuffer(ja,R.spatialReference,0,ma,O.spatialReference,0,qa)))for(R.hasZ&&(fa.hasZ=!0),O=0;O<ma.length;O+=3)R.hasZ?(H[0]=ma[O+0],H[1]=ma[O+1],H[2]=ma[O+2]):(H[0]=ma[O+0],H[1]=ma[O+1]),N.expandWithVec3(fa.boundingBox,H)}}function F(O,R,fa,ja){return Q.apply(this,arguments)}function Q(){Q=g._asyncToGenerator(function*(O,R,fa,ja){const ma=yield A.result(O.whenViewForGraphic(R));if(!1!==
ma.ok&&!D.isNone(ma.value)&&"whenGraphicBounds"in ma.value)if(fa=yield A.result(ma.value.whenGraphicBounds(R,{minDemResolution:fa})),!1===fa.ok)C(O,R.geometry,ja);else{var {screenSpaceObjects:qa,boundingBox:sa}=fa.value;N.expandWithAABB(ja.boundingBox,sa);qa&&qa.forEach(ua=>{ja.screenSpaceObjects.push(ua)});isFinite(sa[2])&&(ja.hasZ=!0)}else C(O,R.geometry,ja)});return Q.apply(this,arguments)}function I(O,R,fa,ja){return f.apply(this,arguments)}function f(){f=g._asyncToGenerator(function*(O,R,fa,
ja){if(Array.isArray(R)&&2===R.length){const ma=R[0],qa=R[1];if("number"===typeof ma&&"number"===typeof qa){wa.x=ma;wa.y=qa;wa.z=void 0;wa.spatialReference=O.spatialReference.isGeographic?O.spatialReference:U.WGS84;C(O,wa,ja);return}}R&&"function"===typeof R.map?yield k.eachAlways(R.map(ma=>I(O,ma,fa,ja))):R instanceof aa?C(O,R,ja):R instanceof q&&(yield F(O,R,fa,ja))});return f.apply(this,arguments)}function l(O,R,fa,ja,ma){return J.apply(this,arguments)}function J(){J=g._asyncToGenerator(function*(O,
R,fa,ja,ma){if(D.isSome(R.camera))return T(O,R.camera,ma);ma.scale=R.scale;ma.rotation=R.rotation;ma.targetGeometry=D.isSome(R.targetGeometry)?R.targetGeometry.clone():null;ma.camera=null;null!=fa.heading?ma.rotation=oa(fa.heading):null!=fa.rotation&&(ma.rotation=fa.rotation);R=m(O,fa);null!=R&&(ma.scale=R);ja=new v.AsyncContext(ja);pa(O,ma,fa.tilt,ja);ma.camera=yield ja.resolver.promise;return ma});return J.apply(this,arguments)}function T(O,R,fa){const ja=X.project(R.position,O.spatialReference);
if(D.isNone(ja))return null;R=R.clone();R.fov=O.camera.fov;R.position=ja;return ha(O,null,R,fa)}function da(O,R,fa,ja,ma,qa){return z.apply(this,arguments)}function z(){z=g._asyncToGenerator(function*(O,R,fa,ja,ma,qa){if(D.isNone(fa))throw new x("createfromcenter","invalid point");qa.targetGeometry=fa.clone();const sa=ea.cameraOnContentAlongViewDirection(O);if(R.position)return fa=qa.targetGeometry,ma=O.renderSpatialReference,G.projectPointToVector(R.position,va,ma),G.projectPointToVector(fa,za,ma),
qa.targetGeometry=new r(fa),ja.position=new r(R.position),h.subtract(ta,za,va),v.directionToHeadingTilt(O,va,ta,sa.up,ja),qa.scale=v.distanceToScale(O,h.distance(va,za),qa.targetGeometry.latitude),qa.rotation=oa(ja.heading),qa.camera=ja,qa;if(R.zoomFactor){var ua=sa.distance/R.zoomFactor;const ya=h.scale(H,sa.viewForward,-ua);sa.eye=h.add(H,sa.center,ya);qa.scale=v.distanceToScale(O,ua,fa.latitude)}v.internalToExternal(O,sa,ja);ua=S(ja,R)?0:1;R.zoomFactor||(qa.scale=m(O,R),null==qa.scale&&(G.projectPointToVector(fa,
H,O.renderSpatialReference),L.intersectsPoint(sa.frustum,H)?qa.scale=v.distanceToScale(O,h.distance(sa.eye,H),fa.latitude):qa.scale=v.computeScale(O,sa)),R=new v.AsyncContext(ma),v.fromCenterScale(O,qa.targetGeometry,qa.scale,ja,ua,R),qa.camera=yield R.resolver.promise);return qa});return z.apply(this,arguments)}function M(O,R,fa,ja,ma){return ca.apply(this,arguments)}function ca(){ca=g._asyncToGenerator(function*(O,R,fa,ja,ma){var qa=ea.cameraOnContentAlongViewDirection(O);qa=G.projectVectorToPoint(qa.center,
O.renderSpatialReference,O.spatialReference);return da(O,R,qa,fa,ja,ma)});return ca.apply(this,arguments)}function ia(O,R,fa,ja,ma,qa){return ba.apply(this,arguments)}function ba(){ba=g._asyncToGenerator(function*(O,R,fa,ja,ma,qa){qa.targetGeometry=fa.clone();const sa=ea.cameraOnContentAlongViewDirection(O);v.internalToExternal(O,sa,ja);R=S(ja,R)?0:1;ma=new v.AsyncContext(ma);v.fromExtent(O,fa,ja.heading,ja.tilt,R,ma);qa.camera=yield ma.resolver.promise;return qa});return ba.apply(this,arguments)}
function E(O,R,fa,ja,ma,qa,sa,ua){return w.apply(this,arguments)}function w(){w=g._asyncToGenerator(function*(O,R,fa,ja,ma,qa,sa,ua){ua.targetGeometry=fa.clone();const ya=ea.cameraOnContentAlongViewDirection(O);var xa=0;fa.hasZ?xa=fa.z:O.basemapTerrain&&(xa=D.unwrap(K.getElevationAtPoint(O.elevationProvider,fa)));h.set(H,fa.x,fa.y,xa);G.computeTranslationToOriginAndRotation(O.spatialReference,H,W,O.renderSpatialReference);B.fromMat4(Z,W);B.transpose(Z,Z);N.empty(na);fa=[[0,1,2],[3,1,2],[0,4,2],[3,
4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(var Aa=0;Aa<fa.length;Aa++){const Ca=fa[Aa];let Da=ja[Ca[2]];isFinite(Da)||(Da=xa);h.set(H,ja[Ca[0]],ja[Ca[1]],Da);G.projectVectorToVector(H,O.spatialReference,H,O.renderSpatialReference);N.expandWithVec3(na,h.transformMat3(H,H,Z))}ja=N.width(na);xa=N.height(na);fa=N.depth(na);Aa=1/Math.tan(ya.fovY/2);ma=Math.max(.5*Math.sqrt(ja*ja+fa*fa)*Math.max(Aa,1/Math.tan(ya.fovX/2))+.5*xa,.5*xa*Aa+.5*Math.max(ja,fa))/ma;v.internalToExternal(O,ya,qa);R=S(qa,R)?0:1;ua.scale=
v.distanceToScale(O,ma,ua.targetGeometry.latitude);sa=new v.AsyncContext(sa);v.fromCenterScale(O,ua.targetGeometry,ua.scale,qa,R,sa);ua.camera=yield sa.resolver.promise;return ua});return w.apply(this,arguments)}function n(O){O&&D.isSome(O.camera)&&(O.rotation=oa(O.camera.heading));return O}const H=y.create(),W=u.create(),Z=e.create(),na=N.create(),ra=P.create(),ta=y.create(),va=y.create(),za=y.create(),Ba={heading:0,tilt:0},wa=new r,Ea={point(O,R,fa){fa[0]=O.x;fa[1]=O.y;O.hasZ&&(fa[2]=O.z);R(fa)},
polygon(O,R,fa){const ja=O.hasZ;for(let ma=0;ma<O.rings.length;ma++){const qa=O.rings[ma];for(let sa=0;sa<qa.length;sa++)fa[0]=qa[sa][0],fa[1]=qa[sa][1],ja&&(fa[2]=qa[sa][2]),R(fa)}},polyline(O,R,fa){const ja=O.hasZ;for(let ma=0;ma<O.paths.length;ma++){const qa=O.paths[ma];for(let sa=0;sa<qa.length;sa++)fa[0]=qa[sa][0],fa[1]=qa[sa][1],ja&&(fa[2]=qa[sa][2]),R(fa)}},multipoint(O,R,fa){const ja=O.points;O=O.hasZ;for(let ma=0;ma<ja.length;ma++)fa[0]=ja[ma][0],fa[1]=ja[ma][1],O&&(fa[2]=ja[ma][2]),R(fa)},
extent(O,R,fa){O.hasZ?(R(h.set(fa,O.xmin,O.ymin,O.zmin)),R(h.set(fa,O.xmax,O.ymin,O.zmin)),R(h.set(fa,O.xmin,O.ymax,O.zmin)),R(h.set(fa,O.xmax,O.ymax,O.zmin)),R(h.set(fa,O.xmin,O.ymin,O.zmax)),R(h.set(fa,O.xmax,O.ymin,O.zmax)),R(h.set(fa,O.xmin,O.ymax,O.zmax)),R(h.set(fa,O.xmax,O.ymax,O.zmax))):(R(h.set(fa,O.xmin,O.ymin,fa[2])),R(h.set(fa,O.xmax,O.ymin,fa[2])),R(h.set(fa,O.xmin,O.ymax,fa[2])),R(h.set(fa,O.xmax,O.ymax,fa[2])))},mesh(O,R,fa){if(O=O.vertexAttributes&&O.vertexAttributes.position)for(let ja=
0;ja<O.length;ja+=3)R(h.set(fa,O[ja+0],O[ja+1],O[ja+2]))}};a.create=function(O,R,fa){return b.apply(this,arguments)};a.fromCamera=function(O,R,fa=null){D.isNone(fa)&&(fa=new t);return ha(O,null,R.clone(),fa)};a.headingToRotation=oa;a.rotationToHeading=ka;a.toCamera=pa;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(a,g){function c(b,m){b[0]=m[0];b[1]=m[1];b[2]=m[2];b[3]=m[4];b[4]=m[5];b[5]=m[6];b[6]=m[8];b[7]=m[9];b[8]=m[10];
return b}function p(b,m){b[0]=m[0];b[1]=m[1];b[2]=m[2];b[3]=m[3];b[4]=m[4];b[5]=m[5];b[6]=m[6];b[7]=m[7];b[8]=m[8];return b}function q(b,m,S,ha,C,F,Q,I,f,l){b[0]=m;b[1]=S;b[2]=ha;b[3]=C;b[4]=F;b[5]=Q;b[6]=I;b[7]=f;b[8]=l;return b}function t(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b}function A(b,m){if(b===m){const S=m[1],ha=m[2],C=m[5];b[1]=m[3];b[2]=m[6];b[3]=S;b[5]=m[7];b[6]=ha;b[7]=C}else b[0]=m[0],b[1]=m[3],b[2]=m[6],b[3]=m[1],b[4]=m[4],b[5]=m[7],b[6]=m[2],b[7]=
m[5],b[8]=m[8];return b}function d(b,m){const S=m[0],ha=m[1],C=m[2],F=m[3],Q=m[4],I=m[5],f=m[6],l=m[7];m=m[8];const J=m*Q-I*l,T=-m*F+I*f,da=l*F-Q*f;let z=S*J+ha*T+C*da;if(!z)return null;z=1/z;b[0]=J*z;b[1]=(-m*ha+C*l)*z;b[2]=(I*ha-C*Q)*z;b[3]=T*z;b[4]=(m*S-C*f)*z;b[5]=(-I*S+C*F)*z;b[6]=da*z;b[7]=(-l*S+ha*f)*z;b[8]=(Q*S-ha*F)*z;return b}function x(b,m){const S=m[0],ha=m[1],C=m[2],F=m[3],Q=m[4],I=m[5],f=m[6],l=m[7];m=m[8];b[0]=Q*m-I*l;b[1]=C*l-ha*m;b[2]=ha*I-C*Q;b[3]=I*f-F*m;b[4]=S*m-C*f;b[5]=C*F-S*
I;b[6]=F*l-Q*f;b[7]=ha*f-S*l;b[8]=S*Q-ha*F;return b}function D(b){const m=b[3],S=b[4],ha=b[5],C=b[6],F=b[7],Q=b[8];return b[0]*(Q*S-ha*F)+b[1]*(-Q*m+ha*C)+b[2]*(F*m-S*C)}function k(b,m,S){const ha=m[0],C=m[1],F=m[2],Q=m[3],I=m[4],f=m[5],l=m[6],J=m[7];m=m[8];const T=S[0],da=S[1],z=S[2],M=S[3],ca=S[4],ia=S[5],ba=S[6],E=S[7];S=S[8];b[0]=T*ha+da*Q+z*l;b[1]=T*C+da*I+z*J;b[2]=T*F+da*f+z*m;b[3]=M*ha+ca*Q+ia*l;b[4]=M*C+ca*I+ia*J;b[5]=M*F+ca*f+ia*m;b[6]=ba*ha+E*Q+S*l;b[7]=ba*C+E*I+S*J;b[8]=ba*F+E*f+S*m;return b}
function B(b,m,S){const ha=m[0],C=m[1],F=m[2],Q=m[3],I=m[4],f=m[5],l=m[6],J=m[7];m=m[8];const T=S[0];S=S[1];b[0]=ha;b[1]=C;b[2]=F;b[3]=Q;b[4]=I;b[5]=f;b[6]=T*ha+S*Q+l;b[7]=T*C+S*I+J;b[8]=T*F+S*f+m;return b}function e(b,m,S){const ha=m[0],C=m[1],F=m[2],Q=m[3],I=m[4],f=m[5],l=m[6],J=m[7];m=m[8];const T=Math.sin(S);S=Math.cos(S);b[0]=S*ha+T*Q;b[1]=S*C+T*I;b[2]=S*F+T*f;b[3]=S*Q-T*ha;b[4]=S*I-T*C;b[5]=S*f-T*F;b[6]=l;b[7]=J;b[8]=m;return b}function u(b,m,S){const ha=S[0],C=S[1];S=S[2];b[0]=ha*m[0];b[1]=
ha*m[1];b[2]=ha*m[2];b[3]=C*m[3];b[4]=C*m[4];b[5]=C*m[5];b[6]=S*m[6];b[7]=S*m[7];b[8]=S*m[8];return b}function h(b,m,S){const ha=S[0];S=S[1];b[0]=ha*m[0];b[1]=ha*m[1];b[2]=ha*m[2];b[3]=S*m[3];b[4]=S*m[4];b[5]=S*m[5];return b}function y(b,m){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=m[0];b[7]=m[1];b[8]=1;return b}function G(b,m){const S=Math.sin(m);m=Math.cos(m);b[0]=m;b[1]=S;b[2]=0;b[3]=-S;b[4]=m;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b}function N(b,m){b[0]=m[0];b[1]=0;b[2]=0;b[3]=0;b[4]=m[1];b[5]=
0;b[6]=0;b[7]=0;b[8]=1;return b}function P(b,m){b[0]=m[0];b[1]=m[1];b[2]=0;b[3]=m[2];b[4]=m[3];b[5]=0;b[6]=m[4];b[7]=m[5];b[8]=1;return b}function L(b,m){var S=m[0],ha=m[1],C=m[2];m=m[3];var F=S+S,Q=ha+ha;const I=C+C;S*=F;const f=ha*F;ha*=Q;const l=C*F,J=C*Q;C*=I;F*=m;Q*=m;m*=I;b[0]=1-ha-C;b[3]=f-m;b[6]=l+Q;b[1]=f+m;b[4]=1-S-C;b[7]=J-F;b[2]=l-Q;b[5]=J+F;b[8]=1-S-ha;return b}function X(b,m){const S=m[0],ha=m[1],C=m[2],F=m[4],Q=m[5],I=m[6],f=m[8],l=m[9];m=m[10];const J=m*Q-I*l,T=-m*F+I*f,da=l*F-Q*f;
var z=S*J+ha*T+C*da;if(!z)return null;z=1/z;b[0]=J*z;b[1]=(-m*ha+C*l)*z;b[2]=(I*ha-C*Q)*z;b[3]=T*z;b[4]=(m*S-C*f)*z;b[5]=(-I*S+C*F)*z;b[6]=da*z;b[7]=(-l*S+ha*f)*z;b[8]=(Q*S-ha*F)*z;return b}function ea(b,m){const S=m[0],ha=m[1],C=m[2],F=m[3],Q=m[4],I=m[5],f=m[6],l=m[7];var J=m[8],T=m[9],da=m[10],z=m[11];const M=m[12],ca=m[13],ia=m[14];m=m[15];const ba=S*I-ha*Q,E=S*f-C*Q,w=S*l-F*Q,n=ha*f-C*I,H=ha*l-F*I,W=C*l-F*f,Z=J*ca-T*M,na=J*ia-da*M;J=J*m-z*M;const ra=T*ia-da*ca;T=T*m-z*ca;da=da*m-z*ia;z=ba*da-
E*T+w*ra+n*J-H*na+W*Z;if(!z)return null;z=1/z;b[0]=(I*da-f*T+l*ra)*z;b[1]=(f*J-Q*da-l*na)*z;b[2]=(Q*T-I*J+l*Z)*z;b[3]=(C*T-ha*da-F*ra)*z;b[4]=(S*da-C*J+F*na)*z;b[5]=(ha*J-S*T-F*Z)*z;b[6]=(ca*W-ia*H+m*n)*z;b[7]=(ia*w-M*W-m*E)*z;b[8]=(M*H-ca*w+m*ba)*z;return b}function v(b,m,S){b[0]=2/m;b[1]=0;b[2]=0;b[3]=0;b[4]=-2/S;b[5]=0;b[6]=-1;b[7]=1;b[8]=1;return b}function K(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"}function V(b){return Math.sqrt(b[0]**
2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2)}function r(b,m,S){b[0]=m[0]+S[0];b[1]=m[1]+S[1];b[2]=m[2]+S[2];b[3]=m[3]+S[3];b[4]=m[4]+S[4];b[5]=m[5]+S[5];b[6]=m[6]+S[6];b[7]=m[7]+S[7];b[8]=m[8]+S[8];return b}function U(b,m,S){b[0]=m[0]-S[0];b[1]=m[1]-S[1];b[2]=m[2]-S[2];b[3]=m[3]-S[3];b[4]=m[4]-S[4];b[5]=m[5]-S[5];b[6]=m[6]-S[6];b[7]=m[7]-S[7];b[8]=m[8]-S[8];return b}function Y(b,m,S){b[0]=m[0]*S;b[1]=m[1]*S;b[2]=m[2]*S;b[3]=m[3]*S;b[4]=m[4]*S;b[5]=m[5]*S;b[6]=m[6]*S;b[7]=m[7]*
S;b[8]=m[8]*S;return b}function aa(b,m,S,ha){b[0]=m[0]+S[0]*ha;b[1]=m[1]+S[1]*ha;b[2]=m[2]+S[2]*ha;b[3]=m[3]+S[3]*ha;b[4]=m[4]+S[4]*ha;b[5]=m[5]+S[5]*ha;b[6]=m[6]+S[6]*ha;b[7]=m[7]+S[7]*ha;b[8]=m[8]+S[8]*ha;return b}function ka(b,m){return b[0]===m[0]&&b[1]===m[1]&&b[2]===m[2]&&b[3]===m[3]&&b[4]===m[4]&&b[5]===m[5]&&b[6]===m[6]&&b[7]===m[7]&&b[8]===m[8]}function oa(b,m){const S=b[0],ha=b[1],C=b[2],F=b[3],Q=b[4],I=b[5],f=b[6],l=b[7];b=b[8];const J=m[0],T=m[1],da=m[2],z=m[3],M=m[4],ca=m[5],ia=m[6],
ba=m[7];m=m[8];return Math.abs(S-J)<=g.EPSILON*Math.max(1,Math.abs(S),Math.abs(J))&&Math.abs(ha-T)<=g.EPSILON*Math.max(1,Math.abs(ha),Math.abs(T))&&Math.abs(C-da)<=g.EPSILON*Math.max(1,Math.abs(C),Math.abs(da))&&Math.abs(F-z)<=g.EPSILON*Math.max(1,Math.abs(F),Math.abs(z))&&Math.abs(Q-M)<=g.EPSILON*Math.max(1,Math.abs(Q),Math.abs(M))&&Math.abs(I-ca)<=g.EPSILON*Math.max(1,Math.abs(I),Math.abs(ca))&&Math.abs(f-ia)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(ia))&&Math.abs(l-ba)<=g.EPSILON*Math.max(1,
Math.abs(l),Math.abs(ba))&&Math.abs(b-m)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(m))}function la(b){const m=g.EPSILON,S=b[0],ha=b[1],C=b[2],F=b[3],Q=b[4],I=b[5],f=b[6],l=b[7];b=b[8];return Math.abs(1-(S*S+F*F+f*f))<=m&&Math.abs(1-(ha*ha+Q*Q+l*l))<=m&&Math.abs(1-(C*C+I*I+b*b))<=m}const pa=Object.freeze({__proto__:null,fromMat4:c,copy:p,set:q,identity:t,transpose:A,invert:d,adjoint:x,determinant:D,multiply:k,translate:B,rotate:e,scale:u,scaleByVec2:h,fromTranslation:y,fromRotation:G,fromScaling:N,
fromMat2d:P,fromQuat:L,normalFromMat4Legacy:X,normalFromMat4:ea,projection:v,str:K,frob:V,add:r,subtract:U,multiplyScalar:Y,multiplyScalarAndAdd:aa,exactEquals:ka,equals:oa,isOrthoNormal:la,mul:k,sub:U});a.add=r;a.adjoint=x;a.copy=p;a.determinant=D;a.equals=oa;a.exactEquals=ka;a.frob=V;a.fromMat2d=P;a.fromMat4=c;a.fromQuat=L;a.fromRotation=G;a.fromScaling=N;a.fromTranslation=y;a.identity=t;a.invert=d;a.isOrthoNormal=la;a.mat3=pa;a.mul=k;a.multiply=k;a.multiplyScalar=Y;a.multiplyScalarAndAdd=aa;a.normalFromMat4=
ea;a.normalFromMat4Legacy=X;a.projection=v;a.rotate=e;a.scale=u;a.scaleByVec2=h;a.set=q;a.str=K;a.sub=U;a.subtract=U;a.translate=B;a.transpose=A})},"esri/chunks/mat3f64":function(){define(["exports"],function(a){function g(){return[1,0,0,0,1,0,0,0,1]}function c(A){return[A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],A[8]]}function p(A,d,x,D,k,B,e,u,h){return[A,d,x,D,k,B,e,u,h]}function q(A,d){return new Float64Array(A,d,9)}const t=Object.freeze({__proto__:null,create:g,clone:c,fromValues:p,createView:q});
a.clone=c;a.create=g;a.createView=q;a.fromValues=p;a.mat3f64=t})},"esri/chunks/mat4f64":function(){define(["exports"],function(a){function g(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function c(d){return[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]]}function p(d,x,D,k,B,e,u,h,y,G,N,P,L,X,ea,v){return[d,x,D,k,B,e,u,h,y,G,N,P,L,X,ea,v]}function q(d,x){return new Float64Array(d,x,16)}const t=g(),A=Object.freeze({__proto__:null,create:g,clone:c,fromValues:p,createView:q,
IDENTITY:t});a.IDENTITY=t;a.clone=c;a.create=g;a.createView=q;a.fromValues=p;a.mat4f64=A})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(a,g,c,p,q,t,A,d,x,D){function k(N){return N?[x.create(N[0]),x.create(N[1]),x.create(N[2]),x.create(N[3]),x.create(N[4]),x.create(N[5])]:[x.create(),x.create(),x.create(),x.create(),
x.create(),x.create()]}function B(){return[q.create(),q.create(),q.create(),q.create(),q.create(),q.create(),q.create(),q.create()]}function e(N,P){x.fromPoints(P[4],P[0],P[3],N[0]);x.fromPoints(P[1],P[5],P[6],N[1]);x.fromPoints(P[4],P[5],P[1],N[2]);x.fromPoints(P[3],P[2],P[6],N[3]);x.fromPoints(P[0],P[1],P[2],N[4]);x.fromPoints(P[5],P[4],P[7],N[5])}function u(N,P){for(let L=0;6>L;L++)if(!x.clip(N[L],P))return!1;return!0}const h=[A.fromValues(-1,-1,-1,1),A.fromValues(1,-1,-1,1),A.fromValues(1,1,-1,
1),A.fromValues(-1,1,-1,1),A.fromValues(-1,-1,1,1),A.fromValues(1,-1,1,1),A.fromValues(1,1,1,1),A.fromValues(-1,1,1,1)],y=new g.ObjectStack(d.create),G=B();a.computePlanes=e;a.copy=function(N,P=k()){for(let L=0;6>L;L++)x.copy(N[L],P[L])};a.create=k;a.createPoints=B;a.fromMatrix=function(N,P,L,X=G){N=c.multiply(D.sm4d.get(),P,N);c.invert(N,N);for(P=0;8>P;++P){const ea=t.transformMat4(D.sv4d.get(),h[P],N);p.set(X[P],ea[0]/ea[3],ea[1]/ea[3],ea[2]/ea[3])}e(L,X)};a.intersectClipRay=function(N,P){for(let L=
0;6>L;L++)if(!x.clipInfinite(N[L],P))return!1;return!0};a.intersectsAABB=function(N,P){for(let L=0;6>L;L++)if(x.isAABBFullyInside(N[L],P))return!1;return!0};a.intersectsLineSegment=function(N,P,L){return u(N,d.fromLineSegmentAndDirection(P,L,y.get()))};a.intersectsPoint=function(N,P){for(let L=0;6>L;L++)if(0<x.signedDistance(N[L],P))return!1;return!0};a.intersectsRay=function(N,P){return u(N,d.fromRay(P,y.get()))};a.intersectsSphere=function(N,P){for(let L=0;6>L;L++){const X=N[L];if(X[0]*P[0]+X[1]*
P[1]+X[2]*P[2]+X[3]>=P[3])return!1}return!0};a.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(a,g){let c=function(){function p(t){this.allocator=t;this._items=[];this._itemsPtr=0;this.grow()}var q=p.prototype;q.get=function(){0===this._itemsPtr&&g.nextTick(()=>this.reset());this._itemsPtr===this._items.length&&
this.grow();return this._items[this._itemsPtr++]};q.reset=function(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0};q.grow=function(){for(let t=0;t<Math.max(8,Math.min(this._items.length,1024));t++)this._items.push(this.allocator())};return p}();a.ObjectStack=c;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/vec4f64":function(){define(["exports"],function(a){function g(){return[0,0,0,0]}function c(L){return[L[0],
L[1],L[2],L[3]]}function p(L,X,ea,v){return[L,X,ea,v]}function q(L){const X=g(),ea=Math.min(4,L.length);for(let v=0;v<ea;++v)X[v]=L[v];return X}function t(L,X){return new Float64Array(L,X,4)}function A(){return g()}function d(){return[1,1,1,1]}function x(){return[1,0,0,0]}function D(){return[0,1,0,0]}function k(){return[0,0,1,0]}function B(){return[0,0,0,1]}const e=g(),u=d(),h=x(),y=D(),G=k(),N=B(),P=Object.freeze({__proto__:null,create:g,clone:c,fromValues:p,fromArray:q,createView:t,zeros:A,ones:d,
unitX:x,unitY:D,unitZ:k,unitW:B,ZEROS:e,ONES:u,UNIT_X:h,UNIT_Y:y,UNIT_Z:G,UNIT_W:N});a.ONES=u;a.UNIT_W=N;a.UNIT_X=h;a.UNIT_Y=y;a.UNIT_Z=G;a.ZEROS=e;a.clone=c;a.create=g;a.createView=t;a.fromArray=q;a.fromValues=p;a.ones=d;a.unitW=B;a.unitX=x;a.unitY=D;a.unitZ=k;a.vec4f64=P;a.zeros=A})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray","./vectorStacks"],function(a,g,c,p,q){function t(k){return k?{ray:p.create(k.ray),c0:k.c0,c1:k.c1}:{ray:p.create(),
c0:0,c1:Number.MAX_VALUE}}function A(k,B,e,u=t()){p.copy(k,u.ray);u.c0=B;u.c1=e;return u}function d(k,B,e=t()){const u=c.length(k.vector);p.fromValues(k.origin,B,e.ray);e.c0=0;e.c1=u;return e}function x(k,B,e){return c.add(e,k.ray.origin,c.scale(e,k.ray.direction,B))}const D=new g.ObjectStack(()=>({c0:0,c1:0,ray:null}));a.copy=function(k,B=t()){return A(k.ray,k.c0,k.c1,B)};a.create=t;a.fromLineSegment=function(k,B=t()){const e=c.normalize(q.sv3d.get(),k.vector);return d(k,e,B)};a.fromLineSegmentAndDirection=
d;a.fromRay=function(k,B=t()){p.copy(k,B.ray);B.c0=0;B.c1=Number.MAX_VALUE;return B};a.fromValues=A;a.getAt=x;a.getEnd=function(k,B){return x(k,k.c1,B)};a.getStart=function(k,B){return x(k,k.c0,B)};a.wrap=function(k,B,e){const u=D.get();u.ray=k;u.c0=B;u.c1=e;return u};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,g,c,
p,q,t){function A(k){return k?{origin:q.clone(k.origin),direction:q.clone(k.direction)}:{origin:q.create(),direction:q.create()}}function d(k,B,e=A()){p.copy(e.origin,k);p.copy(e.direction,B);return e}function x(k,B){k=p.cross(t.sv3d.get(),p.normalize(t.sv3d.get(),k.direction),p.subtract(t.sv3d.get(),B,k.origin));return p.dot(k,k)}const D=new c.ObjectStack(function(){return{origin:null,direction:null}});a.closestPoint=function(k,B,e){B=p.dot(k.direction,p.subtract(e,B,k.origin));p.add(e,k.origin,
p.scale(e,k.direction,B));return e};a.copy=function(k,B=A()){return d(k.origin,k.direction,B)};a.create=A;a.distance=function(k,B){return Math.sqrt(x(k,B))};a.distance2=x;a.equals=function(k,B){return g.equals(k.origin,B.origin)&&g.equals(k.direction,B.direction)};a.fromPoints=function(k,B,e=A()){p.copy(e.origin,k);p.subtract(e.direction,B,k);return e};a.fromValues=d;a.wrap=function(k,B){const e=D.get();e.origin=k;e.direction=B;return e};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/support/vectorStacks":function(){define(["exports",
"../../core/VectorStack"],function(a,g){const c=g.VectorStack.createVec2f64(),p=g.VectorStack.createVec3f64(),q=g.VectorStack.createVec4f64(),t=g.VectorStack.createMat3f64(),A=g.VectorStack.createMat4f64();g=g.VectorStack.createQuatf64();a.sm3d=t;a.sm4d=A;a.sq4d=g;a.sv2d=c;a.sv3d=p;a.sv4d=q;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),
function(a,g,c,p,q,t,A,d,x){let D=function(){function k(e,u,h){this.itemByteSize=e;this.itemCreate=u;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(h/this.itemByteSize)}var B=k.prototype;B.get=function(){0===this._itemsPtr&&c.nextTick(()=>this.reset());const e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){const u=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let h=0;h<this._itemsPerBuffer;++h)this._items.push(this.itemCreate(u,
h*this.itemByteSize));this._buffers.push(u)}return this._items[this._itemsPtr++]};B.reset=function(){const e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0};k.createVec2f64=function(e=4096){return new k(16,A.createView,e)};k.createVec3f64=function(e=4096){return new k(24,d.createView,e)};k.createVec4f64=function(e=4096){return new k(32,x.createView,e)};k.createMat3f64=
function(e=4096){return new k(72,p.createView,e)};k.createMat4f64=function(e=4096){return new k(128,q.createView,e)};k.createQuatf64=function(e=4096){return new k(32,t.createView,e)};g._createClass(k,[{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}]);return k}();a.VectorStack=D;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/quatf64":function(){define(["exports"],function(a){function g(){return[0,0,0,1]}function c(d){return[d[0],
d[1],d[2],d[3]]}function p(d,x,D,k){return[d,x,D,k]}function q(d,x){return new Float64Array(d,x,4)}const t=g(),A=Object.freeze({__proto__:null,create:g,clone:c,fromValues:p,createView:q,IDENTITY:t});a.IDENTITY=t;a.clone=c;a.create=g;a.createView=q;a.fromValues=p;a.quatf64=A})},"esri/chunks/vec2f64":function(){define(["exports"],function(a){function g(){return[0,0]}function c(y){return[y[0],y[1]]}function p(y,G){return[y,G]}function q(y){const G=[0,0],N=Math.min(2,y.length);for(let P=0;P<N;++P)G[P]=
y[P];return G}function t(y,G){return new Float64Array(y,G,2)}function A(){return[0,0]}function d(){return[1,1]}function x(){return[1,0]}function D(){return[0,1]}const k=[0,0],B=[1,1],e=[1,0],u=[0,1],h=Object.freeze({__proto__:null,create:g,clone:c,fromValues:p,fromArray:q,createView:t,zeros:A,ones:d,unitX:x,unitY:D,ZEROS:k,ONES:B,UNIT_X:e,UNIT_Y:u});a.ONES=B;a.UNIT_X=e;a.UNIT_Y=u;a.ZEROS=k;a.clone=c;a.create=g;a.createView=t;a.fromArray=q;a.fromValues=p;a.ones=d;a.unitX=x;a.unitY=D;a.vec2f64=h;a.zeros=
A})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vectorStacks".split(" "),function(a,g,c,p,q,t,A){function d(v=ea){return[v[0],v[1],v[2],v[3]]}function x(v,K=d()){return D(v[0],v[1],v[2],v[3],K)}function D(v,K,V,r,U=d()){U[0]=v;U[1]=K;U[2]=V;U[3]=r;return U}function k(v,K,V){var r=K[0]*K[0]+K[1]*K[1]+K[2]*K[2];r=1E-5<Math.abs(r-1)&&1E-12<r?1/Math.sqrt(r):1;V[0]=K[0]*r;V[1]=K[1]*r;V[2]=K[2]*
r;V[3]=-(V[0]*v[0]+V[1]*v[1]+V[2]*v[2]);return V}function B(v,K,V,r=d()){var U=V[0]-K[0],Y=V[1]-K[1],aa=V[2]-K[2];V=v[0]-K[0];const ka=v[1]-K[1],oa=v[2]-K[2];K=Y*oa-aa*ka;aa=aa*V-U*oa;U=U*ka-Y*V;Y=K*K+aa*aa+U*U;Y=1E-5<Math.abs(Y-1)&&1E-12<Y?1/Math.sqrt(Y):1;r[0]=K*Y;r[1]=aa*Y;r[2]=U*Y;r[3]=-(r[0]*v[0]+r[1]*v[1]+r[2]*v[2])}function e(v,K,V,r,U){if(3>v.count)return!1;v.getVec(V,G);let Y=r,aa=!1;for(;Y<v.count-1&&!aa;)v.getVec(Y,N),Y++,aa=!p.exactEquals(G,N);if(!aa)return!1;Y=Math.max(Y,U);for(aa=!1;Y<
v.count&&!aa;)v.getVec(Y,P),Y++,p.subtract(L,G,N),p.normalize(L,L),p.subtract(X,N,P),p.normalize(X,X),aa=!p.exactEquals(G,P)&&!p.exactEquals(N,P)&&.99619469809>Math.abs(p.dot(L,X));if(!aa)return 0===V&&1===r&&2===U?!1:e(v,K,0,1,2);B(G,N,P,K);return!0}function u(v,K,V){v=p.scale(A.sv3d.get(),v,p.dot(v,K));p.subtract(V,K,v);return V}function h(v,K){return p.dot(v,K)+v[3]}function y(v,K,V,r,U){const Y=p.dot(v,V);if(0===Y)return!1;v=-(p.dot(v,K)+v[3])/Y;r&1&&(v=g.clamp(v,0,1));if(!(r&4)&&0>v||!(r&8)&&
1<v)return!1;p.add(U,K,p.scale(U,V,v));return!0}const G=q.create(),N=q.create(),P=q.create(),L=q.create(),X=q.create(),ea=[0,0,1,0];a.UP=ea;a.clip=function(v,K){const V=p.dot(v,K.ray.direction);v=-h(v,K.ray.origin);if(0>v&&0<=V)return!1;if(-1E-6<V&&1E-6>V)return 0<v;if((0>v||0>V)&&!(0>v&&0>V))return!0;v/=V;0<V?v<K.c1&&(K.c1=v):v>K.c0&&(K.c0=v);return K.c0<=K.c1};a.clipInfinite=function(v,K){const V=p.dot(v,K.ray.direction);v=-h(v,K.ray.origin);if(-1E-6<V&&1E-6>V)return 0<v;v/=V;0<V?v<K.c1&&(K.c1=
v):v>K.c0&&(K.c0=v);return K.c0<=K.c1};a.copy=x;a.create=d;a.distance=function(v,K){return Math.abs(h(v,K))};a.fromManyPoints=function(v,K){return e(v,K,0,1,2)};a.fromManyPointsSampleAt=e;a.fromNormalAndOffset=function(v,K,V){p.copy(V,v);V[3]=K;return V};a.fromPoints=B;a.fromPositionAndNormal=k;a.fromValues=D;a.fromVectorsAndPoint=function(v,K,V,r){p.cross(P,K,v);return k(V,P,r)};a.intersectLine=function(v,K,V,r){V=p.subtract(A.sv3d.get(),V,K);return y(v,K,V,12,r)};a.intersectLineSegment=function(v,
K,V){return y(v,K.origin,K.vector,0,V)};a.intersectLineSegmentClamp=function(v,K,V){return y(v,K.origin,K.vector,1,V)};a.intersectRay=function(v,K,V){return c.isSome(K)?y(v,K.origin,K.direction,8,V):!1};a.isAABBFullyInside=function(v,K){const V=K[0],r=K[1],U=K[2],Y=K[3],aa=K[4];K=K[5];return 0<=v[0]*(0<v[0]?V:Y)+v[1]*(0<v[1]?r:aa)+v[2]*(0<v[2]?U:K)+v[3]};a.isPointInside=function(v,K){return 0<=h(v,K)};a.isPointOutside=function(v,K){return 0>h(v,K)};a.isSphereFullyInside=function(v,K){return 0<=h(v,
t.getCenter(K))-K[3]};a.isSphereFullyOutside=function(v,K){return 0>h(v,t.getCenter(K))+K[3]};a.negate=function(v,K){K[0]=-v[0];K[1]=-v[1];K[2]=-v[2];K[3]=-v[3];return K};a.normal=function(v){return v};a.projectPoint=function(v,K,V){const r=p.scale(A.sv3d.get(),v,-v[3]);K=p.subtract(A.sv3d.get(),K,r);v=u(v,K,A.sv3d.get());p.add(V,v,r);return V};a.projectVector=u;a.setOffsetFromPoint=function(v,K,V){v!==V&&x(v,V);V[3]=-p.dot(V,K);return V};a.signedDistance=h;a.wrap=function(v,K,V,r){return D(v,K,V,
r,A.sv4d.get())};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(a,g,c,p,q,t,A,d,x,D,k,B,e){function u(){return D.create()}function h(I,f=u()){return x.copy(f,I)}function y(I,f){return D.fromValues(I[0],I[1],I[2],f)}function G(I){return I}function N(I){I[0]=
I[1]=I[2]=I[3]=0}function P(I){return I}function L(I){return Array.isArray(I)?I[3]:I}function X(I){return Array.isArray(I)?I:F}function ea(I,f,l,J){return D.fromValues(I,f,l,J)}function v(I,f,l){I!==l&&A.copy(l,I);l[3]=I[3]+f;return l}function K(I,f,l){S.error("sphere.setExtent is not yet supported");return I===l?l:h(I,l)}function V(I,f,l){if(q.isNone(f))return!1;const {origin:J,direction:T}=f;var da=ha;da[0]=J[0]-I[0];da[1]=J[1]-I[1];da[2]=J[2]-I[2];f=T[0]*T[0]+T[1]*T[1]+T[2]*T[2];const z=2*(T[0]*
da[0]+T[1]*da[1]+T[2]*da[2]);I=z*z-4*f*(da[0]*da[0]+da[1]*da[1]+da[2]*da[2]-I[3]*I[3]);if(0>I)return!1;da=Math.sqrt(I);I=(-z-da)/(2*f);f=(-z+da)/(2*f);if(0>I||f<I&&0<f)I=f;if(0>I)return!1;l&&(l[0]=J[0]+T[0]*I,l[1]=J[1]+T[1]*I,l[2]=J[2]+T[2]*I);return!0}function r(I,f){return V(I,f,null)}function U(I,f,l){if(V(I,f,l))return l;I=Y(I,f,e.sv3d.get());A.add(l,f.origin,A.scale(e.sv3d.get(),f.direction,A.distance(f.origin,I)/A.length(f.direction)));return l}function Y(I,f,l){const J=e.sv3d.get(),T=e.sm4d.get();
A.cross(J,f.origin,f.direction);const da=L(I);A.cross(l,J,f.origin);A.scale(l,l,1/A.length(l)*da);I=la(I,f.origin);f=B.angle(f.origin,l);t.identity(T);t.rotate(T,T,f+I,J);A.transformMat4(l,l,T);return l}function aa(I,f,l){if(V(I,f,l))return l;k.closestPoint(f,X(I),l);return ka(I,l,l)}function ka(I,f,l){f=A.subtract(e.sv3d.get(),f,X(I));f=A.scale(e.sv3d.get(),f,I[3]/A.length(f));return A.add(l,f,X(I))}function oa(I,f){f=A.subtract(e.sv3d.get(),f,X(I));f=A.squaredLength(f);return Math.sqrt(Math.abs(f-
I[3]*I[3]))}function la(I,f){f=A.subtract(e.sv3d.get(),f,X(I));f=A.length(f);I=L(I);return p.acosClamped(I/(I+Math.abs(I-f)))}function pa(I,f,l,J){I=A.subtract(C,f,X(I));switch(l){case 0:return l=p.cartesianToSpherical(I,C)[2],A.set(J,-Math.sin(l),Math.cos(l),0);case 1:return I=p.cartesianToSpherical(I,C),l=I[1],I=I[2],f=Math.sin(l),A.set(J,-f*Math.cos(I),-f*Math.sin(I),Math.cos(l));case 2:return A.normalize(J,I)}}function b(I,f){f=A.subtract(Q,f,X(I));return A.length(f)-I[3]}function m(I,f,l,J){const T=
b(I,f);I=pa(I,f,2,Q);l=A.scale(Q,I,l-T);return A.add(J,f,l)}const S=c.getLogger("esri.geometry.support.sphere"),ha=d.create(),C=d.create(),F=d.create(),Q=d.create();g=Object.freeze({__proto__:null,create:u,copy:h,fromCenterAndRadius:y,wrap:G,clear:N,fromRadius:P,getRadius:L,getCenter:X,fromValues:ea,elevate:v,setExtent:K,intersectRay:V,intersectsRay:r,intersectRayClosestSilhouette:U,closestPointOnSilhouette:Y,closestPoint:aa,projectPoint:ka,distanceToSilhouette:oa,angleToSilhouette:la,axisAt:pa,altitudeAt:b,
setAltitudeAt:m});a.altitudeAt=b;a.angleToSilhouette=la;a.axisAt=pa;a.clear=N;a.closestPoint=aa;a.closestPointOnSilhouette=Y;a.copy=h;a.create=u;a.distanceToSilhouette=oa;a.elevate=v;a.fromCenterAndRadius=y;a.fromRadius=P;a.fromValues=ea;a.getCenter=X;a.getRadius=L;a.intersectRay=V;a.intersectRayClosestSilhouette=U;a.intersectsRay=r;a.projectPoint=ka;a.setAltitudeAt=m;a.setExtent=K;a.sphere=g;a.wrap=G})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec3",
"../../chunks/vec3f64"],function(a,g,c,p){const q=p.create(),t=p.create();a.angle=function(A,d){A=c.dot(A,d)/(c.length(A)*c.length(d));return-g.acosClamped(A)};a.angleAroundAxis=function(A,d,x){c.normalize(q,A);c.normalize(t,d);A=c.dot(q,t);A=g.acosClamped(A);d=c.cross(q,q,t);return 0>c.dot(d,x)?2*Math.PI-A:A};a.projectPoint=function(A,d,x){d=c.dot(A,d)/c.dot(A,A);return c.scale(x,A,d)};a.projectPointSignedLength=function(A,d){return c.dot(A,d)/c.length(A)};Object.defineProperty(a,"__esModule",{value:!0})})},
"esri/views/3d/camera/intersectionUtils":function(){define("exports ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projectionEllipsoid ../../../geometry/support/aaBoundingRect ../webgl-engine/lib/Intersector".split(" "),function(a,g,c,p,q,t,A){function d(h,y){return h.elevationProvider?g.unwrapOr(h.elevationProvider.getElevation(y[0],y[1],y[2],h.renderCoordsHelper.spatialReference,"ground"),0):0}function x(h,y,G){if(!h.state.isGlobal)return!1;const N=d(h,y);({far:h}=
h.stateManager.constraintsManager.nearFarHeuristic.compute(y,G,h.renderDataExtent,N,u));h*=h;return c.squaredDistance(y,G)>h}const D={},k=p.create(),B=p.create(),e=p.create(),u={near:0,far:0};a.cameraOnContentAlongViewDirection=function(h,y,G,N){const P=h.state.camera.clone();y&&(P.eye=y,P.center=G,P.up=N);y=P.ray;G=D[h.viewingMode];G||(G=A.newIntersector(h.state.viewingMode),G.options.backfacesTerrain=!h.state.isGlobal,G.options.invisibleTerrain=!0,D[h.viewingMode]=G);({isGlobal:N}=h.state);h.sceneIntersectionHelper.intersectRay(y,
G,B)&&!x(h,y.origin,B)?y=!0:!h.renderCoordsHelper.intersectManifold(y,0,B)||x(h,y.origin,B)?N?(G=q.getReferenceEllipsoid(h.spatialReference).radius,G=c.dot(y.origin,y.origin)-G*G,c.scale(B,y.direction,(0<G?Math.sqrt(G)/3:1)/c.length(y.direction)),c.add(B,B,y.origin),y=!0):y=!1:y=!0;y||c.copy(B,P.center);G=h.state.constraints;N=G.minimumPoiDistance;c.squaredDistance(P.eye,B)<N&&(y=G.collision.enabled,c.copy(e,P.viewForward),c.scale(e,e,N),y?P.eye=c.subtract(k,B,e):c.add(B,P.eye,e),h=h.renderCoordsHelper,
N=h.getAltitude(P.eye),G=G.collision.elevationMargin,y&&N<G&&(c.subtract(e,B,P.eye),P.eye=h.setAltitude(k,G,P.eye),c.add(B,P.eye,e)));P.center=B;return P};a.eyeWithinExtent=function(h,y,G,N){return g.isSome(h.renderCoordsHelper.fromRenderCoords(y.eye,k,N))&&t.containsPoint(G,k)};a.surfaceElevationBelowRenderLocation=d;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/ray ./IntersectorInterfaces ./intersectorUtils ./verticalOffsetUtils ../materials/renderers/utils".split(" "),
function(a,g,c,p,q,t,A,d,x,D,k,B,e,u){function h(X){return new N(X)}let y=function(){function X(v){this.options=new k.IntersectorOptions;this._results=new G;this.transform=new e.IntersectorTransform;this.tolerance=1E-5;this.verticalOffset=null;this._ray=D.create();this._rayEnd=A.create();this._rayBeginTransformed=A.create();this._rayEndTransformed=A.create();this.viewingMode=null==v?1:v}var ea=X.prototype;ea.reset=function(v,K,V){this.resetWithRay(D.fromPoints(v,K,this._ray),V)};ea.resetWithRay=function(v,
K){this.camera=K;v!==this._ray&&D.copy(v,this._ray);0!==this.options.verticalOffset?2===this.viewingMode?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null;t.add(this._rayEnd,this._ray.origin,this._ray.direction);this._results.init(this._ray)};ea.intersect=function(v=null,K,V,r,U){this.point=K;this.filterPredicate=r;this.tolerance=null==V?1E-5:V;K=e.getVerticalOffsetObject3D(this.verticalOffset);if(c.isSome(v)&&0<v.length){const Y=
U?aa=>{U(aa)&&this.intersectObject(aa)}:aa=>{this.intersectObject(aa)};for(const aa of v)v=aa.getSpatialQueryAccelerator&&aa.getSpatialQueryAccelerator(),c.isSome(v)?(c.isSome(K)?v.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,Y,K):v.forEachAlongRay(this._ray.origin,this._ray.direction,Y),this.options.selectionMode&&this.options.hud&&v.forEachDegenerateObject(Y)):aa.objects.forAll(ka=>Y(ka))}this.sortResults()};ea.intersectObject=function(v){const K=v.geometryRecords;if(K){var V=
v.transformation,r=e.getVerticalOffsetObject3D(this.verticalOffset);for(const U of K){const {geometry:Y,material:aa,instanceParameters:ka}=U;if(u.isInstanceHidden(ka))continue;const oa=Y.id;this.transform.setAndInvalidateLazyTransforms(V,U.getShaderTransformation());t.transformMat4(this._rayBeginTransformed,this.rayBegin,this.transform.inverse);t.transformMat4(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const la=this.transform.transform;c.isSome(r)&&(r.objectTransform=this.transform);
aa.intersect(Y,ka,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,(pa,b,m,S,ha,C)=>{0<=pa&&(!c.isSome(this.filterPredicate)||this.filterPredicate(this._ray.origin,this._rayEnd,pa))&&(S?(null==this._results.hud.dist||pa<this._results.hud.dist)&&this._results.hud.set(1,{object:v,geometryId:oa,triangleNr:m,center:C},pa,b,q.IDENTITY,ha):((null==this._results.min.drapedLayerOrder||ha>=this._results.min.drapedLayerOrder)&&(null==this._results.min.dist||pa<this._results.min.dist)&&
this._results.min.set(0,{object:v,geometryId:oa,triangleNr:m},pa,b,la,ha),0!==this.options.store&&(null==this._results.max.drapedLayerOrder||ha<this._results.max.drapedLayerOrder)&&(null==this._results.max.dist||pa>this._results.max.dist)&&this._results.max.set(0,{object:v,geometryId:oa,triangleNr:m},pa,b,la,ha),2===this.options.store&&(S=h(this._ray),S.set(0,{object:v,geometryId:oa,triangleNr:m},pa,b,la),this._results.all.push(S))))},U.shaderTransformation)}}};ea.sortResults=function(){this._results.all.sort((v,
K)=>v.dist!==K.dist?c.unwrapOr(v.dist,0)-c.unwrapOr(K.dist,0):v.drapedLayerOrder!==K.drapedLayerOrder?c.unwrapOr(v.drapedLayerOrder,Number.MAX_VALUE)-c.unwrapOr(K.drapedLayerOrder,Number.MAX_VALUE):c.unwrapOr(K.drapedLayerGraphicOrder,Number.MIN_VALUE)-c.unwrapOr(v.drapedLayerGraphicOrder,Number.MIN_VALUE))};g._createClass(X,[{key:"results",get:function(){return this._results}},{key:"ray",get:function(){return this._ray}},{key:"rayBegin",get:function(){return this._ray.origin}},{key:"rayEnd",get:function(){return this._rayEnd}}]);
return X}(),G=function(){function X(){this._min=new N(D.create());this._max=new N(D.create());this._hud=new N(D.create());this._ground=new N(D.create())}X.prototype.init=function(ea){this._min.init(ea);this._max.init(ea);this._hud.init(ea);this._ground.init(ea);this.all=[]};g._createClass(X,[{key:"min",get:function(){return this._min}},{key:"max",get:function(){return this._max}},{key:"hud",get:function(){return this._hud}},{key:"ground",get:function(){return this._ground}}]);return X}(),N=function(){function X(v){this.intersector=
0;this.normal=A.create();this.transformation=q.create();this._ray=D.create();this.init(v)}var ea=X.prototype;ea.getIntersectionPoint=function(v){if(!B.isValidIntersectorResult(this))return!1;t.scale(P,this.ray.direction,this.dist);t.add(v,this.ray.origin,P);return!0};ea.getTransformedNormal=function(v){t.copy(L,this.normal);L[3]=0;d.transformMat4(L,L,this.transformation);t.copy(v,L);return t.normalize(v,v)};ea.init=function(v){this.drapedLayerGraphicOrder=this.drapedLayerOrder=this.target=this.dist=
null;this.intersector=0;D.copy(v,this._ray)};ea.set=function(v,K,V,r,U,Y,aa){this.intersector=v;this.dist=V;t.copy(this.normal,c.unwrapOr(r,A.UNIT_Z));p.copy(this.transformation,c.unwrapOr(U,q.IDENTITY));this.target=K;this.drapedLayerOrder=Y;this.drapedLayerGraphicOrder=aa};ea.copy=function(v){D.copy(v.ray,this._ray);this.intersector=v.intersector;this.dist=v.dist;this.target=v.target;this.drapedLayerOrder=v.drapedLayerOrder;this.drapedLayerGraphicOrder=v.drapedLayerGraphicOrder;t.copy(this.normal,
v.normal);p.copy(this.transformation,v.transformation)};g._createClass(X,[{key:"ray",get:function(){return this._ray}},{key:"distanceInRenderSpace",get:function(){return c.isSome(this.dist)?(t.scale(P,this.ray.direction,this.dist),t.length(P)):null}}]);return X}();const P=A.create(),L=x.create();a.DEFAULT_TOLERANCE=1E-5;a.newIntersector=function(X){return new y(X)};a.newIntersectorResult=h;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/IntersectorInterfaces":function(){define(["exports"],
function(a){a.IntersectorOptions=function(){this.verticalOffset=0;this.selectionMode=!1;this.selectOpaqueTerrainOnly=this.hud=!0;this.invisibleTerrain=!1;this.backfacesTerrain=!0;this.isFiltered=!1;this.store=2};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define(["exports","../../../../core/maybe","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../chunks/boundedPlane"],function(a,g,c,p,q){function t(d){return g.isSome(d)&&
g.isSome(d.dist)}const A=p.create();a.isHudIntersectorResult=function(d){return t(d)&&1===d.intersector&&!!d.target&&g.isSome(d.target.center)};a.isObjectIntersectorResult=function(d){return t(d)&&0===d.intersector&&!!d.target};a.isValidIntersectorResult=t;a.sliceFilterPredicate=function(d){return(x,D,k)=>{c.lerp(A,x,D,k);return!q.extrusionContainsPoint(d,A)}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/boundedPlane":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/ObjectStack ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/support/lineSegment ../geometry/support/plane ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(a,g,c,p,q,t,A,d,x,D,k,B,e,u){function h(n=da){return{plane:k.create(n.plane),origin:x.clone(n.origin),basis1:x.clone(n.basis1),basis2:x.clone(n.basis2)}}function y(n,H,W){const Z=ia.get();Z.origin=n;Z.basis1=H;Z.basis2=W;Z.plane=k.wrap(0,0,0,0);L(Z);return Z}function G(n,H=h()){return P(n.origin,n.basis1,n.basis2,H)}function N(n,H){d.copy(H.origin,n.origin);d.copy(H.basis1,n.basis1);d.copy(H.basis2,n.basis2);k.copy(n.plane,H.plane)}function P(n,H,W,Z=h()){d.copy(Z.origin,n);d.copy(Z.basis1,
H);d.copy(Z.basis2,W);L(Z);1E-6<Math.abs(d.dot(Z.basis1,Z.basis2)/(d.length(Z.basis1)*d.length(Z.basis2)))&&T.warn("fromValues()","Provided basis vectors are not perpendicular");1E-6<Math.abs(d.dot(Z.basis1,Q(Z)))&&T.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-d.dot(Q(Z),Z.origin)-Z.plane[3])&&T.warn("fromValues()","Plane offset is not consistent with plane origin");return Z}function L(n){k.fromVectorsAndPoint(n.basis2,n.basis1,n.origin,n.plane)}function X(n,
H,W){n!==W&&G(n,W);n=d.scale(u.sv3d.get(),Q(n),H);d.add(W.origin,W.origin,n);W.plane[3]-=H;return W}function ea(n,H,W){v(H,W);X(W,m(n,n.origin),W);return W}function v(n,H=h()){const W=(n[2]-n[0])/2,Z=(n[3]-n[1])/2;d.set(H.origin,n[0]+W,n[1]+Z,0);d.set(H.basis1,W,0,0);d.set(H.basis2,0,Z,0);k.fromValues(0,0,1,0,H.plane);return H}function K(n,H,W){return k.intersectRay(n.plane,H,W)?I(n,W):!1}function V(n,H,W){if(K(n,H,W))return W;n=r(n,H,u.sv3d.get());d.add(W,H.origin,d.scale(u.sv3d.get(),H.direction,
d.distance(H.origin,n)/d.length(H.direction)));return W}function r(n,H,W){const Z=z.get();var na=z.get();J(n,H,Z,na);na=Number.POSITIVE_INFINITY;for(const ta of ba){var ra=l(n,ta,M.get());const va=u.sv3d.get();k.intersectLineSegment(Z,ra,va)&&(ra=d.direction(u.sv3d.get(),H.origin,va),ra=Math.abs(p.acosClamped(d.dot(H.direction,ra))),ra<na&&(na=ra,d.copy(W,va)))}return na===Number.POSITIVE_INFINITY?U(n,H,W):W}function U(n,H,W){if(K(n,H,W))return W;const Z=z.get(),na=z.get();J(n,H,Z,na);let ra=Number.POSITIVE_INFINITY;
for(const va of ba){var ta=l(n,va,M.get());const za=u.sv3d.get();k.intersectLineSegmentClamp(Z,ta,za)&&(ta=B.distance2(H,za),k.isPointInside(na,za)&&ta<ra&&(ra=ta,d.copy(W,za)))}ka(n,H.origin)<ra&&Y(n,H.origin,W);return W}function Y(n,H,W){var Z=k.projectPoint(n.plane,H,u.sv3d.get());H=D.projectPointClamp(f(n,n.basis1),Z,-1,1,u.sv3d.get());Z=D.projectPointClamp(f(n,n.basis2),Z,-1,1,u.sv3d.get());d.subtract(W,d.add(u.sv3d.get(),H,Z),n.origin);return W}function aa(n,H,W){const {origin:Z,basis1:na,basis2:ra}=
n,ta=d.subtract(u.sv3d.get(),H,Z);H=e.projectPointSignedLength(na,ta);const va=e.projectPointSignedLength(ra,ta);n=e.projectPointSignedLength(Q(n),ta);return d.set(W,H,va,n)}function ka(n,H){H=aa(n,H,u.sv3d.get());const {basis1:W,basis2:Z}=n;n=d.length(W);var na=d.length(Z);n=Math.max(Math.abs(H[0])-n,0);na=Math.max(Math.abs(H[1])-na,0);H=H[2];return n*n+na*na+H*H}function oa(n,H){return Math.sqrt(ka(n,H))}function la(n,H){let W=Number.NEGATIVE_INFINITY;for(const na of ba){var Z=l(n,na,M.get());Z=
D.distance2(Z,H);Z>W&&(W=Z)}return Math.sqrt(W)}function pa(n,H){return k.isPointInside(n.plane,H)&&I(n,H)}function b(n,H,W,Z){switch(W){case 0:d.copy(Z,n.basis1);d.normalize(Z,Z);break;case 1:d.copy(Z,n.basis2);d.normalize(Z,Z);break;case 2:d.copy(Z,Q(n))}return Z}function m(n,H){const W=-n.plane[3];return e.projectPointSignedLength(Q(n),H)-W}function S(n,H,W,Z){const na=m(n,H);n=d.scale(ca,Q(n),W-na);d.add(Z,H,n);return Z}function ha(n,H){return d.exactEquals(n.basis1,H.basis1)&&d.exactEquals(n.basis2,
H.basis2)&&d.exactEquals(n.origin,H.origin)}function C(n,H,W){n!==W&&G(n,W);t.invert(E,H);t.transpose(E,E);d.transformMat4(W.basis1,n.basis1,E);d.transformMat4(W.basis2,n.basis2,E);d.transformMat4(k.normal(W.plane),k.normal(n.plane),E);d.transformMat4(W.origin,n.origin,H);k.setOffsetFromPoint(W.plane,W.origin,W.plane);return W}function F(n,H,W,Z){n!==Z&&G(n,Z);t.rotate(w,t.identity(w),H,W);d.transformMat4(Z.basis1,n.basis1,w);d.transformMat4(Z.basis2,n.basis2,w);L(Z);return Z}function Q(n){return k.normal(n.plane)}
function I(n,H){const W=d.subtract(u.sv3d.get(),H,n.origin);H=d.squaredLength(n.basis1);const Z=d.squaredLength(n.basis2),na=d.dot(n.basis1,W);n=d.dot(n.basis2,W);return 0>-na-H&&0>na-H&&0>-n-Z&&0>n-Z}function f(n,H){const W=M.get();d.copy(W.origin,n.origin);d.copy(W.vector,H);return W}function l(n,H,W){const {basis1:Z,basis2:na,origin:ra}=n;n=d.scale(u.sv3d.get(),Z,H.origin[0]);const ta=d.scale(u.sv3d.get(),na,H.origin[1]);d.add(W.origin,n,ta);d.add(W.origin,W.origin,ra);n=d.scale(u.sv3d.get(),Z,
H.direction[0]);H=d.scale(u.sv3d.get(),na,H.direction[1]);d.scale(W.vector,d.add(n,n,H),2);return W}function J(n,H,W,Z){n=Q(n);k.fromVectorsAndPoint(n,H.direction,H.origin,W);k.fromVectorsAndPoint(k.normal(W),n,H.origin,Z)}const T=c.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");g=function(){this.plane=k.create();this.origin=x.create();this.basis1=x.create();this.basis2=x.create()};const da={plane:k.create(),origin:x.fromValues(0,0,0),basis1:x.fromValues(1,0,0),basis2:x.fromValues(0,
1,0)},z=new q.ObjectStack(k.create),M=new q.ObjectStack(D.create),ca=x.create(),ia=new q.ObjectStack(()=>({origin:null,basis1:null,basis2:null,plane:null})),ba=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],E=A.create(),w=A.create();q=Object.freeze({__proto__:null,BoundedPlaneClass:g,create:h,wrap:y,copy:G,copyWithoutVerify:N,fromValues:P,updateUnboundedPlane:L,elevate:X,setExtent:ea,fromAABoundingRect:v,intersectRay:K,
intersectRayClosestSilhouette:V,closestPointOnSilhouette:r,closestPoint:U,projectPoint:Y,projectPointLocal:aa,distance2:ka,distance:oa,distanceToSilhouette:la,extrusionContainsPoint:pa,axisAt:b,altitudeAt:m,setAltitudeAt:S,equals:ha,transform:C,rotate:F,normal:Q,UP:da});a.BoundedPlaneClass=g;a.UP=da;a.altitudeAt=m;a.axisAt=b;a.boundedPlane=q;a.closestPoint=U;a.closestPointOnSilhouette=r;a.copy=G;a.copyWithoutVerify=N;a.create=h;a.distance=oa;a.distance2=ka;a.distanceToSilhouette=la;a.elevate=X;a.equals=
ha;a.extrusionContainsPoint=pa;a.fromAABoundingRect=v;a.fromValues=P;a.intersectRay=K;a.intersectRayClosestSilhouette=V;a.normal=Q;a.projectPoint=Y;a.projectPointLocal=aa;a.rotate=F;a.setAltitudeAt=S;a.setExtent=ea;a.transform=C;a.updateUnboundedPlane=L;a.wrap=y})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,g,c,p,q,t){function A(h){return h?{origin:q.clone(h.origin),
vector:q.clone(h.vector)}:{origin:q.create(),vector:q.create()}}function d(h,y){const G=u.get();G.origin=h;G.vector=y;return G}function x(h,y,G=A()){p.copy(G.origin,h);p.copy(G.vector,y);return G}function D(h,y){y=p.subtract(t.sv3d.get(),y,h.origin);var G=p.dot(h.vector,y);const N=p.dot(h.vector,h.vector);G=g.clamp(G/N,0,1);h=p.subtract(t.sv3d.get(),p.scale(t.sv3d.get(),h.vector,G),y);return p.dot(h,h)}function k(h,y,G,N,P){const {vector:L,origin:X}=h;y=p.subtract(t.sv3d.get(),y,X);y=p.dot(L,y)/p.squaredLength(L);
p.scale(P,L,g.clamp(y,G,N));return p.add(P,P,h.origin)}function B(h,y,G,N){const P=h.origin;var L=p.add(t.sv3d.get(),P,h.vector);h=y.origin;var X=p.add(t.sv3d.get(),h,y.vector),ea=t.sv3d.get();y=t.sv3d.get();ea[0]=P[0]-h[0];ea[1]=P[1]-h[1];ea[2]=P[2]-h[2];y[0]=X[0]-h[0];y[1]=X[1]-h[1];y[2]=X[2]-h[2];if(1E-6>Math.abs(y[0])&&1E-6>Math.abs(y[1])&&1E-6>Math.abs(y[2]))return!1;X=t.sv3d.get();X[0]=L[0]-P[0];X[1]=L[1]-P[1];X[2]=L[2]-P[2];if(1E-6>Math.abs(X[0])&&1E-6>Math.abs(X[1])&&1E-6>Math.abs(X[2]))return!1;
L=ea[0]*y[0]+ea[1]*y[1]+ea[2]*y[2];var v=y[0]*X[0]+y[1]*X[1]+y[2]*X[2];const K=y[0]*y[0]+y[1]*y[1]+y[2]*y[2],V=(X[0]*X[0]+X[1]*X[1]+X[2]*X[2])*K-v*v;if(1E-6>Math.abs(V))return!1;ea=(L*v-(ea[0]*X[0]+ea[1]*X[1]+ea[2]*X[2])*K)/V;L=(L+v*ea)/K;G&&(ea=g.clamp(ea,0,1),L=g.clamp(L,0,1));G=t.sv3d.get();v=t.sv3d.get();G[0]=P[0]+ea*X[0];G[1]=P[1]+ea*X[1];G[2]=P[2]+ea*X[2];v[0]=h[0]+L*y[0];v[1]=h[1]+L*y[1];v[2]=h[2]+L*y[2];N.tA=ea;N.tB=L;N.pA=G;N.pB=v;N.distance2=p.squaredDistance(G,v);return!0}const e={tA:0,
tB:0,pA:q.create(),pB:q.create(),distance2:0},u=new c.ObjectStack(()=>({origin:null,vector:null}));a.closestLineSegmentDistance2=function(h,y){return B(h,y,!0,e)?e.distance2:null};a.closestLineSegmentPoint=function(h,y,G){return B(h,y,!0,e)?(p.copy(G,e.pA),!0):!1};a.closestRayDistance2=function(h,y){if(B(h,d(y.origin,y.direction),!1,e)){const {tA:G,pB:N,distance2:P}=e;if(0<=G&&1>=G)return P;if(0>G)return p.squaredDistance(h.origin,N);if(1<G)return p.squaredDistance(p.add(t.sv3d.get(),h.origin,h.vector),
N)}return null};a.copy=function(h,y=A()){return x(h.origin,h.vector,y)};a.create=A;a.distance=function(h,y){return Math.sqrt(D(h,y))};a.distance2=D;a.fromPoints=function(h,y,G=A()){p.copy(G.origin,h);p.subtract(G.vector,y,h);return G};a.fromValues=x;a.pointAt=function(h,y,G){return p.add(G,h.origin,p.scale(G,h.vector,y))};a.projectPoint=function(h,y,G){return k(h,y,0,1,G)};a.projectPointClamp=k;a.wrap=d;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/verticalOffsetUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f64 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/quat ../../../../chunks/quatf64 ../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../chunks/sphere".split(" "),
function(a,g,c,p,q,t,A,d,x,D,k,B,e,u){let h=function(){function K(){this._transform=A.create();this._transformInverse=new y({value:this._transform},t.invert,A.create);this._transformInverseTranspose=new y(this._transformInverse,t.transpose,A.create);this._transformTranspose=new y({value:this._transform},t.transpose,A.create);this._transformInverseRotation=new y({value:this._transform},p.normalFromMat4Legacy,q.create)}var V=K.prototype;V.invalidateLazyTransforms=function(){this._transformInverse.invalidate();
this._transformInverseTranspose.invalidate();this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()};V.setTransformMatrix=function(r){t.copy(this._transform,r)};V.multiplyTransform=function(r){t.multiply(this._transform,this._transform,r)};V.set=function(r){t.copy(this._transform,r);this.invalidateLazyTransforms()};V.setAndInvalidateLazyTransforms=function(r,U){this.setTransformMatrix(r);this.multiplyTransform(U);this.invalidateLazyTransforms()};g._createClass(K,[{key:"transform",
get:function(){return this._transform}},{key:"inverse",get:function(){return this._transformInverse.value}},{key:"inverseTranspose",get:function(){return this._transformInverseTranspose.value}},{key:"inverseRotation",get:function(){return this._transformInverseRotation.value}},{key:"transpose",get:function(){return this._transformTranspose.value}}]);return K}(),y=function(){function K(V,r,U){this.original=V;this.update=r;this.dirty=!0;this.transform=U()}K.prototype.invalidate=function(){this.dirty=
!0};g._createClass(K,[{key:"value",get:function(){this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1);return this.transform}}]);return K}(),G=function(){function K(r=0){this.offset=r;this.tmpVertex=B.create()}var V=K.prototype;V.applyToVertex=function(r,U,Y){const aa=r+this.localOrigin[0],ka=U+this.localOrigin[1],oa=Y+this.localOrigin[2],la=this.offset/Math.sqrt(aa*aa+ka*ka+oa*oa);this.tmpVertex[0]=r+aa*la;this.tmpVertex[1]=U+ka*la;this.tmpVertex[2]=Y+oa*la;return this.tmpVertex};
V.applyToAabb=function(r){var U=r[0]+this.localOrigin[0];const Y=r[1]+this.localOrigin[1],aa=r[2]+this.localOrigin[2],ka=r[3]+this.localOrigin[0],oa=r[4]+this.localOrigin[1],la=r[5]+this.localOrigin[2],pa=this.offset/Math.sqrt(U*U+Y*Y+aa*aa);r[0]+=U*pa;r[1]+=Y*pa;r[2]+=aa*pa;U=this.offset/Math.sqrt(ka*ka+oa*oa+la*la);r[3]+=ka*U;r[4]+=oa*U;r[5]+=la*U;return r};return K}(),N=function(){function K(r=0){this.offset=r;this.componentLocalOriginLength=0;this.tmpVertex=B.create();this.mbs=e.create();this.obb=
{center:B.create(),halfSize:k.create(),quaternion:null}}var V=K.prototype;V.applyToVertex=function(r,U,Y){const aa=Y+this.componentLocalOriginLength,ka=this.offset/Math.sqrt(r*r+U*U+aa*aa);this.tmpVertex[0]=r+r*ka;this.tmpVertex[1]=U+U*ka;this.tmpVertex[2]=Y+aa*ka;return this.tmpVertex};V.applyToAabb=function(r){var U=r[0];const Y=r[1],aa=r[2]+this.componentLocalOriginLength,ka=r[3],oa=r[4],la=r[5]+this.componentLocalOriginLength,pa=this.offset/Math.sqrt(U*U+Y*Y+aa*aa);r[0]+=U*pa;r[1]+=Y*pa;r[2]+=
aa*pa;U=this.offset/Math.sqrt(ka*ka+oa*oa+la*la);r[3]+=ka*U;r[4]+=oa*U;r[5]+=la*U;return r};V.applyToMbs=function(r){const U=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),Y=this.offset/U;this.mbs[0]=r[0]+r[0]*Y;this.mbs[1]=r[1]+r[1]*Y;this.mbs[2]=r[2]+r[2]*Y;this.mbs[3]=r[3]+r[3]*this.offset/U;return this.mbs};V.applyToObb=function(r){var U=r.center;const Y=this.offset/Math.sqrt(U[0]*U[0]+U[1]*U[1]+U[2]*U[2]);this.obb.center[0]=U[0]+U[0]*Y;this.obb.center[1]=U[1]+U[1]*Y;this.obb.center[2]=U[2]+U[2]*Y;
D.transformQuat(this.obb.halfSize,r.halfSize,r.quaternion);D.add(this.obb.halfSize,this.obb.halfSize,r.center);U=this.offset/Math.sqrt(this.obb.halfSize[0]*this.obb.halfSize[0]+this.obb.halfSize[1]*this.obb.halfSize[1]+this.obb.halfSize[2]*this.obb.halfSize[2]);this.obb.halfSize[0]+=this.obb.halfSize[0]*U;this.obb.halfSize[1]+=this.obb.halfSize[1]*U;this.obb.halfSize[2]+=this.obb.halfSize[2]*U;D.subtract(this.obb.halfSize,this.obb.halfSize,r.center);d.conjugate(v,r.quaternion);D.transformQuat(this.obb.halfSize,
this.obb.halfSize,v);this.obb.halfSize[0]*=0>this.obb.halfSize[0]?-1:1;this.obb.halfSize[1]*=0>this.obb.halfSize[1]?-1:1;this.obb.halfSize[2]*=0>this.obb.halfSize[2]?-1:1;this.obb.quaternion=r.quaternion;return this.obb};g._createClass(K,[{key:"localOrigin",set:function(r){this.componentLocalOriginLength=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2])}}]);return K}(),P=function(){function K(r=0){this.offset=r;this.sphere=u.create();this.tmpVertex=B.create()}var V=K.prototype;V.applyToVertex=function(r,U,
Y){const aa=this.objectTransform.transform;let ka=aa[0]*r+aa[4]*U+aa[8]*Y+aa[12],oa=aa[1]*r+aa[5]*U+aa[9]*Y+aa[13];r=aa[2]*r+aa[6]*U+aa[10]*Y+aa[14];U=this.offset/Math.sqrt(ka*ka+oa*oa+r*r);ka+=ka*U;oa+=oa*U;r+=r*U;U=this.objectTransform.inverse;this.tmpVertex[0]=U[0]*ka+U[4]*oa+U[8]*r+U[12];this.tmpVertex[1]=U[1]*ka+U[5]*oa+U[9]*r+U[13];this.tmpVertex[2]=U[2]*ka+U[6]*oa+U[10]*r+U[14];return this.tmpVertex};V.applyToMinMax=function(r,U){const Y=this.offset/Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);
r[0]+=r[0]*Y;r[1]+=r[1]*Y;r[2]+=r[2]*Y;r=this.offset/Math.sqrt(U[0]*U[0]+U[1]*U[1]+U[2]*U[2]);U[0]+=U[0]*r;U[1]+=U[1]*r;U[2]+=U[2]*r};V.applyToAabb=function(r){var U=this.offset/Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]+=r[0]*U;r[1]+=r[1]*U;r[2]+=r[2]*U;U=this.offset/Math.sqrt(r[3]*r[3]+r[4]*r[4]+r[5]*r[5]);r[3]+=r[3]*U;r[4]+=r[4]*U;r[5]+=r[5]*U;return r};V.applyToBoundingSphere=function(r){const U=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),Y=this.offset/U;this.sphere[0]=r[0]+r[0]*Y;this.sphere[1]=
r[1]+r[1]*Y;this.sphere[2]=r[2]+r[2]*Y;this.sphere[3]=r[3]+r[3]*this.offset/U;return this.sphere};return K}();const L=new P,X=new N,ea=new G,v=x.create();a.I3SVerticalOffsetGlobalViewingMode=N;a.IntersectorTransform=h;a.Object3DVerticalOffsetGlobalViewingMode=P;a.TERRAIN_ID="terrain";a.TerrainVerticalOffsetGlobalViewingMode=G;a.getVerticalOffsetI3S=function(K){return c.isSome(K)?(X.offset=K,X):null};a.getVerticalOffsetObject3D=function(K){return c.isSome(K)?(L.offset=K,L):null};a.getVerticalOffsetTerrain=
function(K){return c.isSome(K)?(ea.offset=K,ea):null};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/quat":function(){define("exports ./mat3f64 ./quatf64 ./vec3f64 ./common ./vec3 ./vec4".split(" "),function(a,g,c,p,q,t,A){function d(f){f[0]=0;f[1]=0;f[2]=0;f[3]=1;return f}function x(f,l,J){J*=.5;const T=Math.sin(J);f[0]=T*l[0];f[1]=T*l[1];f[2]=T*l[2];f[3]=Math.cos(J);return f}function D(f,l){const J=2*Math.acos(l[3]),T=Math.sin(J/2);T>q.EPSILON?(f[0]=l[0]/T,f[1]=l[1]/T,f[2]=l[2]/
T):(f[0]=1,f[1]=0,f[2]=0);return J}function k(f,l,J){const T=l[0],da=l[1],z=l[2];l=l[3];const M=J[0],ca=J[1],ia=J[2];J=J[3];f[0]=T*J+l*M+da*ia-z*ca;f[1]=da*J+l*ca+z*M-T*ia;f[2]=z*J+l*ia+T*ca-da*M;f[3]=l*J-T*M-da*ca-z*ia;return f}function B(f,l,J){J*=.5;const T=l[0],da=l[1],z=l[2];l=l[3];const M=Math.sin(J);J=Math.cos(J);f[0]=T*J+l*M;f[1]=da*J+z*M;f[2]=z*J-da*M;f[3]=l*J-T*M;return f}function e(f,l,J){J*=.5;const T=l[0],da=l[1],z=l[2];l=l[3];const M=Math.sin(J);J=Math.cos(J);f[0]=T*J-z*M;f[1]=da*J+
l*M;f[2]=z*J+T*M;f[3]=l*J-da*M;return f}function u(f,l,J){J*=.5;const T=l[0],da=l[1],z=l[2];l=l[3];const M=Math.sin(J);J=Math.cos(J);f[0]=T*J+da*M;f[1]=da*J-T*M;f[2]=z*J+l*M;f[3]=l*J-z*M;return f}function h(f,l){const J=l[0],T=l[1];l=l[2];f[0]=J;f[1]=T;f[2]=l;f[3]=Math.sqrt(Math.abs(1-J*J-T*T-l*l));return f}function y(f,l,J,T){const da=l[0],z=l[1],M=l[2];l=l[3];let ca=J[0],ia=J[1],ba=J[2];J=J[3];let E;let w;var n=da*ca+z*ia+M*ba+l*J;0>n&&(n=-n,ca=-ca,ia=-ia,ba=-ba,J=-J);1-n>q.EPSILON?(E=Math.acos(n),
w=Math.sin(E),n=Math.sin((1-T)*E)/w,T=Math.sin(T*E)/w):n=1-T;f[0]=n*da+T*ca;f[1]=n*z+T*ia;f[2]=n*M+T*ba;f[3]=n*l+T*J;return f}function G(f){var l=q.RANDOM();const J=q.RANDOM(),T=q.RANDOM(),da=Math.sqrt(1-l);l=Math.sqrt(l);f[0]=da*Math.sin(2*Math.PI*J);f[1]=da*Math.cos(2*Math.PI*J);f[2]=l*Math.sin(2*Math.PI*T);f[3]=l*Math.cos(2*Math.PI*T);return f}function N(f,l){const J=l[0],T=l[1],da=l[2];l=l[3];var z=J*J+T*T+da*da+l*l;z=z?1/z:0;f[0]=-J*z;f[1]=-T*z;f[2]=-da*z;f[3]=l*z;return f}function P(f,l){f[0]=
-l[0];f[1]=-l[1];f[2]=-l[2];f[3]=l[3];return f}function L(f,l){var J=l[0]+l[4]+l[8];if(0<J)J=Math.sqrt(J+1),f[3]=.5*J,J=.5/J,f[0]=(l[5]-l[7])*J,f[1]=(l[6]-l[2])*J,f[2]=(l[1]-l[3])*J;else{let T=0;l[4]>l[0]&&(T=1);l[8]>l[3*T+T]&&(T=2);const da=(T+1)%3,z=(T+2)%3;J=Math.sqrt(l[3*T+T]-l[3*da+da]-l[3*z+z]+1);f[T]=.5*J;J=.5/J;f[3]=(l[3*da+z]-l[3*z+da])*J;f[da]=(l[3*da+T]+l[3*T+da])*J;f[z]=(l[3*z+T]+l[3*T+z])*J}return f}function X(f,l,J,T){var da=.5*Math.PI/180;l*=da;J*=da;T*=da;da=Math.sin(l);l=Math.cos(l);
const z=Math.sin(J);J=Math.cos(J);const M=Math.sin(T);T=Math.cos(T);f[0]=da*J*T-l*z*M;f[1]=l*z*T+da*J*M;f[2]=l*J*M-da*z*T;f[3]=l*J*T+da*z*M;return f}function ea(f){return"quat("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"}function v(f,l,J){const T=t.dot(l,J);if(-.999999>T)return t.cross(S,ha,l),1E-6>t.len(S)&&t.cross(S,C,l),t.normalize(S,S),x(f,S,Math.PI),f;if(.999999<T)return f[0]=0,f[1]=0,f[2]=0,f[3]=1,f;t.cross(S,l,J);f[0]=S[0];f[1]=S[1];f[2]=S[2];f[3]=1+T;return b(f,f)}function K(f,l,J,T,da,z){y(F,
l,da,z);y(Q,J,T,z);y(f,F,Q,2*z*(1-z));return f}function V(f,l,J,T){const da=I;da[0]=J[0];da[3]=J[1];da[6]=J[2];da[1]=T[0];da[4]=T[1];da[7]=T[2];da[2]=-l[0];da[5]=-l[1];da[8]=-l[2];return b(f,L(f,da))}const r=A.copy,U=A.set,Y=A.add,aa=A.scale,ka=A.dot,oa=A.lerp,la=A.length,pa=A.squaredLength,b=A.normalize,m=A.exactEquals;A=A.equals;const S=p.create(),ha=p.fromValues(1,0,0),C=p.fromValues(0,1,0),F=c.create(),Q=c.create(),I=g.create();g=Object.freeze({__proto__:null,identity:d,setAxisAngle:x,getAxisAngle:D,
multiply:k,rotateX:B,rotateY:e,rotateZ:u,calculateW:h,slerp:y,random:G,invert:N,conjugate:P,fromMat3:L,fromEuler:X,str:ea,copy:r,set:U,add:Y,mul:k,scale:aa,dot:ka,lerp:oa,length:la,len:la,squaredLength:pa,sqrLen:pa,normalize:b,exactEquals:m,equals:A,rotationTo:v,sqlerp:K,setAxes:V});a.add=Y;a.calculateW=h;a.conjugate=P;a.copy=r;a.dot=ka;a.equals=A;a.exactEquals=m;a.fromEuler=X;a.fromMat3=L;a.getAxisAngle=D;a.identity=d;a.invert=N;a.len=la;a.length=la;a.lerp=oa;a.mul=k;a.multiply=k;a.normalize=b;a.quat=
g;a.random=G;a.rotateX=B;a.rotateY=e;a.rotateZ=u;a.rotationTo=v;a.scale=aa;a.set=U;a.setAxes=V;a.setAxisAngle=x;a.slerp=y;a.sqlerp=K;a.sqrLen=pa;a.squaredLength=pa;a.str=ea})},"esri/chunks/vec3f32":function(){define(["exports"],function(a){function g(){return new Float32Array(3)}function c(G){const N=new Float32Array(3);N[0]=G[0];N[1]=G[1];N[2]=G[2];return N}function p(G,N,P){const L=new Float32Array(3);L[0]=G;L[1]=N;L[2]=P;return L}function q(G,N){return new Float32Array(G,N,3)}function t(){return g()}
function A(){return p(1,1,1)}function d(){return p(1,0,0)}function x(){return p(0,1,0)}function D(){return p(0,0,1)}const k=g(),B=A(),e=d(),u=x(),h=D(),y=Object.freeze({__proto__:null,create:g,clone:c,fromValues:p,createView:q,zeros:t,ones:A,unitX:d,unitY:x,unitZ:D,ZEROS:k,ONES:B,UNIT_X:e,UNIT_Y:u,UNIT_Z:h});a.ONES=B;a.UNIT_X=e;a.UNIT_Y=u;a.UNIT_Z=h;a.ZEROS=k;a.clone=c;a.create=g;a.createView=q;a.fromValues=p;a.ones=A;a.unitX=d;a.unitY=x;a.unitZ=D;a.vec3f32=y;a.zeros=t})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/Util ../../../../webgl/doublePrecisionUtils".split(" "),
function(a,g,c,p,q,t){const A=new Float64Array(3),d=new Float32Array(6),x=p.create();a.addObject3DStateID=function(D,k){g.isNone(D)&&(D=[]);D.push(k);return D};a.calculateTransformRelativeToOrigin=function(D,k,B){const e=D.origin.vec3;q.setMatrixTranslation3(x,-e[0],-e[1],-e[2]);g.isSome(D.transformation)?c.multiply(k,x,D.transformation):c.copy(k,x);B&&(c.invert(B,k),c.transpose(B,B))};a.encodeDoubleVec3=function(D,k,B,e,u){A[0]=D.get(k,0);A[1]=D.get(k,1);A[2]=D.get(k,2);t.encodeDoubleArray(A,d,3);
B.set(u,0,d[0]);e.set(u,0,d[1]);B.set(u,1,d[2]);e.set(u,1,d[3]);B.set(u,2,d[4]);e.set(u,2,d[5])};a.isInstanceHidden=function(D){return g.isSome(D)?!D.visible:!1};a.removeObject3DStateID=function(D,k){if(g.isNone(D))return null;D=D.filter(B=>B!==k);return 0===D.length?null:D};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Util":function(){define("exports ../../../../core/mathUtils ../../../../chunks/mat4 ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64".split(" "),
function(a,g,c,p,q,t,A,d){function x(e,u){if(!e)throw u=u||"assert",e=Error(u),e.stack&&console.log(e.stack),new B(u);}function D(e,u){e[12]=u[0];e[13]=u[1];e[14]=u[2]}const k=d.create();let B=function(){function e(u){this.message=u}e.prototype.toString=function(){return`AssertException: ${this.message}`};return e}();a.AssertException=B;a.assert=x;a.createTranslationMatrix=function(e,u){e=c.identity(e);D(e,u);return e};a.dec2hex=function(e){e=e.toString(16);return"00000000".substr(0,8-e.length)+e};
a.encodeInt16=function(e){return g.clamp(Math.round(32767*e),-32767,32767)};a.encodeNormal=function(e,u){const h=Math.abs(e[0]),y=Math.abs(e[1]),G=1/(h+y+Math.abs(e[2])),N=Math.min(e[2]*G,0);u[0]=(0>e[0]?-1:1)*(h*G-N);u[1]=(0>e[1]?-1:1)*(y*G-N)};a.fallbackIfUndefined=function(e,u){return void 0===e?u:e};a.fovd2fovx=function(e,u,h){return 2*Math.atan(u*Math.tan(.5*e)/Math.sqrt(u*u+h*h))};a.fovd2fovy=function(e,u,h){return 2*Math.atan(h*Math.tan(.5*e)/Math.sqrt(u*u+h*h))};a.fovx2fovd=function(e,u,h){return 2*
Math.atan(Math.sqrt(u*u+h*h)*Math.tan(.5*e)/u)};a.fovx2fovy=function(e,u,h){return 2*Math.atan(h*Math.tan(.5*e)/u)};a.fovy2fovd=function(e,u,h){return 2*Math.atan(Math.sqrt(u*u+h*h)*Math.tan(.5*e)/h)};a.fovy2fovx=function(e,u,h){return 2*Math.atan(u*Math.tan(.5*e)/h)};a.getFirstObjectKey=function(e){for(const u in e)return u};a.getMatrixTranslation=function(e,u=t.create()){u[0]=e[12];u[1]=e[13];u[2]=e[14];return u};a.hex2rgb=function(e){e=Math.floor(e);return[(e>>16&255)/255,(e>>8&255)/255,(e&255)/
255]};a.inverseProjectionInfo=function(e,u,h,y,G){0===e[11]?(y[0]=2/(u*e[0]),y[1]=2/(h*e[5]),y[2]=(1+e[12])/e[0],y[3]=(1+e[13])/e[5],p.set(G,0,1)):(y[0]=-2/(u*e[0]),y[1]=-2/(h*e[5]),y[2]=(1-e[8])/e[0],y[3]=(1-e[9])/e[5],p.set(G,1,0))};a.isTranslationMatrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]};a.logWithBase=function(e,u){return Math.log(e)/Math.log(u)};a.objectEmpty=function(e){for(const u in e)return!1;
return!0};a.project=function(e,u,h,y,G){G||(G=e);k[0]=e[0];k[1]=e[1];k[2]=e[2];k[3]=1;A.transformMat4(k,k,u);2<G.length&&(G[2]=-k[2]);A.transformMat4(k,k,h);x(0!==k[3]);G[0]=k[0]/k[3];G[1]=k[1]/k[3];G[2]=k[2]/k[3];G[0]=(.5*G[0]+.5)*y[2]+y[0];G[1]=(.5*G[1]+.5)*y[3]+y[1]};a.rayBoxTest=function(e,u,h,y){let G,N=(h[0]-e[0])/u[0],P=(y[0]-e[0])/u[0];N>P&&(G=N,N=P,P=G);let L=(h[1]-e[1])/u[1],X=(y[1]-e[1])/u[1];L>X&&(G=L,L=X,X=G);if(N>X||L>P)return!1;L>N&&(N=L);X<P&&(P=X);h=(h[2]-e[2])/u[2];e=(y[2]-e[2])/
u[2];h>e&&(G=h,h=e,e=G);if(N>e||h>P)return!1;e<P&&(P=e);return 0>P?!1:!0};a.rayRay2D=function(e,u,h,y,G,N=q.create()){const P=(y[G]-h[G])*(u[0]-e[0])-(y[0]-h[0])*(u[G]-e[G]);if(0===P)return!1;h=((y[0]-h[0])*(e[G]-h[G])-(y[G]-h[G])*(e[0]-h[0]))/P;N[0]=e[0]+h*(u[0]-e[0]);N[1]=e[G]+h*(u[G]-e[G]);return!0};a.rayTriangle3D=function(e,u,h,y,G,N,P,L,X=t.create()){var ea=y[P]-h[N];const v=y[P+1]-h[N+1],K=y[P+2]-h[N+2];y=G[L]-h[N];P=G[L+1]-h[N+1];G=G[L+2]-h[N+2];const V=u[1]*G-P*u[2],r=u[2]*y-G*u[0],U=u[0]*
P-y*u[1];L=ea*V+v*r+K*U;if(-1E-5<L&&1E-5>L)return!1;L=1/L;const Y=e[0]-h[N],aa=e[1]-h[N+1];e=e[2]-h[N+2];X[1]=L*(Y*V+aa*r+e*U);if(0>X[1]||1<X[1])return!1;h=aa*K-v*e;e=e*ea-K*Y;ea=Y*v-ea*aa;X[2]=L*(u[0]*h+u[1]*e+u[2]*ea);if(0>X[2]||1<X[1]+X[2])return!1;X[0]=L*(y*h+P*e+G*ea);return!0};a.rgb2hex=function(e){const u=g.clamp(Math.round(255*e[0]),0,255),h=g.clamp(Math.round(255*e[1]),0,255);e=g.clamp(Math.round(255*e[2]),0,255);return"0x"+((u<<16)+(h<<8)+e).toString(16)};a.setMatrixTranslation=D;a.setMatrixTranslation3=
function(e,u,h,y){e[12]=u;e[13]=h;e[14]=y};a.verify=function(e,u){e||console.warn("Verify failed: "+(u||"")+"\n"+Error("verify").stack)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(a,g){function c(C,F){C[0]=F[0];C[1]=F[1];return C}function p(C,F,Q){C[0]=F;C[1]=Q;return C}function q(C,F,Q){C[0]=F[0]+Q[0];C[1]=F[1]+Q[1];return C}function t(C,F,Q){C[0]=F[0]-Q[0];C[1]=F[1]-Q[1];return C}function A(C,F,Q){C[0]=F[0]*Q[0];C[1]=
F[1]*Q[1];return C}function d(C,F,Q){C[0]=F[0]/Q[0];C[1]=F[1]/Q[1];return C}function x(C,F){C[0]=Math.ceil(F[0]);C[1]=Math.ceil(F[1]);return C}function D(C,F){C[0]=Math.floor(F[0]);C[1]=Math.floor(F[1]);return C}function k(C,F,Q){C[0]=Math.min(F[0],Q[0]);C[1]=Math.min(F[1],Q[1]);return C}function B(C,F,Q){C[0]=Math.max(F[0],Q[0]);C[1]=Math.max(F[1],Q[1]);return C}function e(C,F){C[0]=Math.round(F[0]);C[1]=Math.round(F[1]);return C}function u(C,F,Q){C[0]=F[0]*Q;C[1]=F[1]*Q;return C}function h(C,F,
Q,I){C[0]=F[0]+Q[0]*I;C[1]=F[1]+Q[1]*I;return C}function y(C,F){const Q=F[0]-C[0];C=F[1]-C[1];return Math.sqrt(Q*Q+C*C)}function G(C,F){const Q=F[0]-C[0];C=F[1]-C[1];return Q*Q+C*C}function N(C){const F=C[0];C=C[1];return Math.sqrt(F*F+C*C)}function P(C){const F=C[0];C=C[1];return F*F+C*C}function L(C,F){C[0]=-F[0];C[1]=-F[1];return C}function X(C,F){C[0]=1/F[0];C[1]=1/F[1];return C}function ea(C,F){var Q=F[0];const I=F[1];Q=Q*Q+I*I;0<Q&&(Q=1/Math.sqrt(Q),C[0]=F[0]*Q,C[1]=F[1]*Q);return C}function v(C,
F){return C[0]*F[0]+C[1]*F[1]}function K(C,F,Q){F=F[0]*Q[1]-F[1]*Q[0];C[0]=C[1]=0;C[2]=F;return C}function V(C,F,Q,I){const f=F[0];F=F[1];C[0]=f+I*(Q[0]-f);C[1]=F+I*(Q[1]-F);return C}function r(C,F){F=F||1;const Q=2*g.RANDOM()*Math.PI;C[0]=Math.cos(Q)*F;C[1]=Math.sin(Q)*F;return C}function U(C,F,Q){const I=F[0];F=F[1];C[0]=Q[0]*I+Q[2]*F;C[1]=Q[1]*I+Q[3]*F;return C}function Y(C,F,Q){const I=F[0];F=F[1];C[0]=Q[0]*I+Q[2]*F+Q[4];C[1]=Q[1]*I+Q[3]*F+Q[5];return C}function aa(C,F,Q){const I=F[0];F=F[1];
C[0]=Q[0]*I+Q[3]*F+Q[6];C[1]=Q[1]*I+Q[4]*F+Q[7];return C}function ka(C,F,Q){const I=F[0];F=F[1];C[0]=Q[0]*I+Q[4]*F+Q[12];C[1]=Q[1]*I+Q[5]*F+Q[13];return C}function oa(C,F,Q,I){const f=F[0]-Q[0];F=F[1]-Q[1];const l=Math.sin(I);I=Math.cos(I);C[0]=f*I-F*l+Q[0];C[1]=f*l+F*I+Q[1];return C}function la(C,F){var Q=C[0];C=C[1];const I=F[0];F=F[1];let f=Q*Q+C*C;0<f&&(f=1/Math.sqrt(f));let l=I*I+F*F;0<l&&(l=1/Math.sqrt(l));Q=(Q*I+C*F)*f*l;return 1<Q?0:-1>Q?Math.PI:Math.acos(Q)}function pa(C){return"vec2("+C[0]+
", "+C[1]+")"}function b(C,F){return C[0]===F[0]&&C[1]===F[1]}function m(C,F){const Q=C[0];C=C[1];const I=F[0];F=F[1];return Math.abs(Q-I)<=g.EPSILON*Math.max(1,Math.abs(Q),Math.abs(I))&&Math.abs(C-F)<=g.EPSILON*Math.max(1,Math.abs(C),Math.abs(F))}function S(C,F,Q,I,f){let l=F[0]-Q[0];Q=F[1]-Q[1];f=(I[0]*l+I[1]*Q)*(f-1);l=I[0]*f;Q=I[1]*f;C[0]=F[0]+l;C[1]=F[1]+Q;return C}const ha=Object.freeze({__proto__:null,copy:c,set:p,add:q,subtract:t,multiply:A,divide:d,ceil:x,floor:D,min:k,max:B,round:e,scale:u,
scaleAndAdd:h,distance:y,squaredDistance:G,length:N,squaredLength:P,negate:L,inverse:X,normalize:ea,dot:v,cross:K,lerp:V,random:r,transformMat2:U,transformMat2d:Y,transformMat3:aa,transformMat4:ka,rotate:oa,angle:la,str:pa,exactEquals:b,equals:m,projectAndScale:S,len:N,sub:t,mul:A,div:d,dist:y,sqrDist:G,sqrLen:P});a.add=q;a.angle=la;a.ceil=x;a.copy=c;a.cross=K;a.dist=y;a.distance=y;a.div=d;a.divide=d;a.dot=v;a.equals=m;a.exactEquals=b;a.floor=D;a.inverse=X;a.len=N;a.length=N;a.lerp=V;a.max=B;a.min=
k;a.mul=A;a.multiply=A;a.negate=L;a.normalize=ea;a.projectAndScale=S;a.random=r;a.rotate=oa;a.round=e;a.scale=u;a.scaleAndAdd=h;a.set=p;a.sqrDist=G;a.sqrLen=P;a.squaredDistance=G;a.squaredLength=P;a.str=pa;a.sub=t;a.subtract=t;a.transformMat2=U;a.transformMat2d=Y;a.transformMat3=aa;a.transformMat4=ka;a.vec2=ha})},"esri/views/webgl/doublePrecisionUtils":function(){define(["exports"],function(a){function g(q,t,A){for(let d=0;d<A;++d)t[2*d]=q[d],t[2*d+1]=q[d]-t[2*d]}const c=new Float64Array(1),p=new Float32Array(2);
a.decodeDoubleArray=function(q,t,A){for(let d=0;d<A;++d)t[d]=q[2*d]+q[2*d+1]};a.encodeDouble=function(q,t){p[0]=q;p[1]=q-p[0];t[0]=p[0];t[1]=p[1]};a.encodeDoubleArray=g;a.encodeDoubleArraySplit=function(q,t,A,d){for(let x=0;x<d;++x)c[0]=q[x],g(c,p,1),t[x]=p[0],A[x]=p[1]};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/cameraUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../core/Logger ../../../core/mathUtils ../../../core/maybe ../../../core/promiseUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Point ../../../geometry/projection ../../../geometry/projectionEllipsoid ../../../geometry/SpatialReference ../../../geometry/support/scaleUtils ../camera/intersectionUtils ../../../chunks/cameraUtilsPlanar ../../../chunks/cameraUtilsSpherical ./earthUtils ./ElevationProvider ./mathUtils ../../support/spatialReferenceSupport".split(" "),
function(a,g,c,p,q,t,A,d,x,D,k,B,e,u,h,y,G,N,P,L,X){function ea(z){return"global"===z.viewingMode?G.cameraUtilsSpherical:y.cameraUtilsPlanar}function v(z,M,ca){const ia=z.state.camera,ba=ia.width/2/ia.pixelRatio;1===z.renderCoordsHelper.viewingMode&&null!=ca&&(M*=Math.cos(q.deg2rad(ca)));M/=z.renderCoordsHelper.unitInMeters;return ba/(96*39.37/M)/Math.tan(ia.fovX/2)}function K(z,M,ca){const ia=z.state.camera;M=96*39.37/(ia.width/2/ia.pixelRatio/(M*Math.tan(ia.fovX/2)));1===z.renderCoordsHelper.viewingMode&&
(M/=Math.cos(q.deg2rad(ca)));return M*=z.renderCoordsHelper.unitInMeters}function V(z,M,ca,ia,ba,E){if(ha(E)){const w=new da(E.signal);pa(z,ia.heading,ia.tilt,M,ca,ba,w);w.resolver.promise.then(n=>{n=S(z,n,ia.fov);if(t.isNone(n))E.resolver.reject();else return E.resolver.resolve(n)},n=>E.resolver.reject(n))}else return M=pa(z,ia.heading,ia.tilt,M,ca,ba),S(z,M,ia.fov,E)}function r(z,M,ca,ia,ba){return ea(z).directionToHeadingTilt(M,ca,ia,ba)}function U(z,M){return!!(z.basemapTerrain&&z.renderCoordsHelper.fromRenderCoords(M,
f,z.spatialReference)&&t.unwrapOr(P.getElevationAtPoint(z.elevationProvider,f),0)>f.z-1)}function Y(z,M,ca){return aa.apply(this,arguments)}function aa(){aa=g._asyncToGenerator(function*(z,M,ca){if(!z.renderCoordsHelper.fromRenderCoords(M,f,z.spatialReference))return!1;z=yield z.elevationProvider.queryElevation(f.x,f.y,f.z,f.spatialReference,"ground",ca);return t.unwrapOr(z,0)>f.z-1});return aa.apply(this,arguments)}function ka(z,M,ca){return oa.apply(this,arguments)}function oa(){oa=g._asyncToGenerator(function*(z,
M,ca){const ia=x.create();M?M instanceof D?(k.projectPointToVector(M,ia,z.renderSpatialReference),null==M.z&&null!=z.basemapTerrain&&(M=yield z.elevationProvider.queryElevation(M.x,M.y,M.z,M.spatialReference,"ground",ca),t.isSome(M)&&z.renderCoordsHelper.setAltitude(ia,M))):d.copy(ia,M):d.copy(ia,z.state.camera.center);return ia});return oa.apply(this,arguments)}function la(z,M){const ca=x.create();M&&M instanceof D?(k.projectPointToVector(M,ca,z.renderSpatialReference),null==M.z&&null!=z.basemapTerrain&&
(M=P.getElevationAtPoint(z.elevationProvider,M),t.isSome(M)&&z.renderCoordsHelper.setAltitude(ca,M))):M?d.copy(ca,M):d.copy(ca,z.state.camera.center);return ca}function pa(z,M,ca,ia,ba,E,w){const n=ia&&ia instanceof D?ia:null;if(ha(w))return ka(z,ia,w.signal).then(H=>{b(z,M,ca,n,H,ba,E,w)},H=>w.resolver.reject(H)),null;ia=la(z,ia);return b(z,M,ca,n,ia,ba,E,w)}function b(z,M,ca,ia,ba,E,w,n){if(t.isNone(ia)&&(ia=k.projectVectorToPoint(ba,z.renderSpatialReference,z.spatialReference||e.WGS84),t.isNone(ia)))return null;
E=Math.max(E,z.state.constraints.minimumPoiDistance);var H=m(z,M,ca,ba,E,w);const W=ea(z).eyeForCenterWithHeadingTilt,Z=W(ba,E,H.heading,H.tilt);if(1===w&&"global"===z.viewingMode&&0<ca){const na=()=>{var ra=E,ta=E;var va=z.state.constraints.tilt(ta);ta=ea(z).eyeTiltToLookAtTilt(ca,ba,ta);ta=Math.min(ta,.5*Math.PI);va=va.min*(1-.7)+.7*ta;ra=ea(z).lookAtTiltToEyeTilt(va,ba,ra);w=1>ca-ra?0:1;return b(z,M,ra,ia,ba,E,w,n)};H=z.map.ground.navigationConstraint;if(!H||"stay-above"===H.type){if(U(z,Z.eye))return na();
if(ha(n))return Y(z,Z.eye,n.signal).then(ra=>{if(ra)return na();n.resolver.resolve({eye:Z.eye,up:Z.up,center:x.clone(ba),heading:Z.heading,tilt:Z.tilt});return null}),null}}H=!n||ha(n)?{center:x.create(),eye:x.create(),up:x.create(),tilt:0,heading:0}:n;H.eye=Z.eye;H.up=Z.up;H.center=x.clone(ba);H.heading=Z.heading;H.tilt=Z.tilt;ha(n)&&n.resolver.resolve(H);return H}function m(z,M,ca,ia,ba,E){var w=0;if(E=1===E)if(w=z.pointsOfInterest.centerOnSurfaceFrequent.distance,8<Math.log(ba/w)/Math.LN2)E=!0;
else{var n=z.renderSpatialReference,H=z.spatialReference||e.WGS84;E=k.projectVectorToPoint(ia,n,H);n=k.projectVectorToPoint(z.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,n,H);t.isNone(E)||t.isNone(n)?E=!1:(w*=Math.tan(.5*z.state.camera.fov),E=5<n.distance(E)/w)}E?(M=0,E=z.state.constraints.tilt(ba),E.max=Math.min(E.max,.5*Math.PI),E=E.min*(1-.7)+.7*E.max,ca=ea(z).eyeTiltToLookAtTilt(ca,ia,ba),w=Math.min(ca,E)):w=ea(z).eyeTiltToLookAtTilt(ca,ia,ba);ca=w=z.state.constraints.clampTilt(ba,
w);ca=ea(z).lookAtTiltToEyeTilt(ca,ia,ba);return{heading:M,tilt:ca}}function S(z,M,ca,ia){if(t.isNone(M))return null;z=k.projectVectorToPoint(M.eye,z.renderSpatialReference,z.spatialReference||e.WGS84);return t.isNone(z)?null:t.isSome(ia)?(ia.position=z,ia.heading=M.heading,ia.tilt=M.tilt,ia.fov=ca,ia):new c(z,M.heading,M.tilt,ca)}function ha(z){return z&&"resolver"in z}const C=p.getLogger("esri.views.3d.support.cameraUtils"),F=x.create(),Q=x.create(),I={heading:0,tilt:0},f=new D,l=new L.Cyclical(-2.0037508342788905E7,
2.0037508342788905E7),J=new L.Cyclical(-180,180),T=x.create();let da=function(z){this.signal=z;this.resolver=A.createResolver()};a.AsyncContext=da;a.computeScale=function(z,M,ca){const ia=z.renderSpatialReference;M||(M=z.state.camera);var ba=e.WGS84;M instanceof c?(ba=M.position.latitude,k.projectPointToVector(M.position,F,ia),k.projectPointToVector(ca,Q,ia),M=d.distance(F,Q)):(k.projectVectorToVector(M.center,ia,Q,ba),ba=Q[1],M=M.distance);return K(z,M,ba)};a.directionToHeadingTilt=r;a.distanceToScale=
K;a.externalToInternal=function(z,M){if(t.isNone(M))return null;var ca=z.renderSpatialReference;const ia=ea(z).headingTiltToDirectionUp,ba=x.create();if(!k.projectPointToVector(M.position,ba,ca))return null;ca=ia(ba,M.heading,M.tilt);d.scale(ca.direction,ca.direction,z.state.camera.distance);d.add(ca.direction,ca.direction,ba);z=h.cameraOnContentAlongViewDirection(z,ba,ca.direction,ca.up);z.fov=q.deg2rad(M.fov);return z};a.fromCenterDistance=V;a.fromCenterScale=function(z,M,ca,ia,ba,E){ca=v(z,ca,
M.latitude);return V(z,M,ca,ia,ba,E)};a.fromExtent=function(z,M,ca,ia,ba,E=null){var w=null!=M.zmax&&null!=M.zmin;let n;if(z.state.isGlobal){if(!X.isSpatialReferenceSupported(M.spatialReference,1))return ha(E)&&E.resolver.reject(),null;var H=new D(M.xmin,M.ymin,M.spatialReference);const na=new D(M.xmax,M.ymax,M.spatialReference),ra=M.spatialReference.isGeographic?J:l;var W=new D({x:ra.center(H.x,na.x),y:(na.y+H.y)/2,z:w?(M.zmax+M.zmin)/2:null,spatialReference:M.spatialReference});const ta=B.getReferenceEllipsoid(M.spatialReference);
var Z=N.getGreatCircleSpanAt(W,H,na);n=Z.lon;Z=Z.lat;ra.diff(H.x,na.x)>ra.range/2&&(n+=ta.halfCircumference);n=Math.min(n,ta.halfCircumference);Z=Math.min(Z,ta.halfCircumference)}else W=t.unwrapOr(z.renderSpatialReference,M.spatialReference),W.equals(M.spatialReference)||(M=k.project(M,W)),n=M.xmax-M.xmin,Z=M.ymax-M.ymin,W=new D({x:M.xmin+.5*n,y:M.ymin+.5*Z,z:w?(M.zmax+M.zmin)/2:null,spatialReference:W});H=z.state.camera;M=Math.max(1/Math.tan(H.fovX/2)*n*.5,1/Math.tan(H.fovY/2)*Z*.5,1/Math.tan(H.fov/
2)*(w?M.zmax-M.zmin:0)*.5)/1;if(ha(E))w=new da(E.signal),pa(z,ca,ia,W,M,ba,w),w.resolver.promise.then(na=>{na=S(z,na,z.camera.fov);if(t.isNone(na))E.resolver.reject();else return E.resolver.resolve(na)},na=>E.resolver.reject(na));else return ca=pa(z,ca,ia,W,M,ba),S(z,ca,z.camera.fov,E)};a.getObserverForPointAtDistance=pa;a.headingTiltToDirectionUp=function(z,M,ca,ia,ba){return ea(z).headingTiltToDirectionUp(M,ca,ia,ba)};a.internalToExternal=function(z,M,ca){const ia=z.renderSpatialReference,ba=r(z,
M.eye,M.viewForward,M.up,I);z=z.spatialReference||e.WGS84;k.projectVectorToVector(M.eye,ia,T,z)||(z=e.WGS84,k.projectVectorToVector(M.eye,ia,T,z));if(t.isNone(ca))return new c(new D(T,z),ba.heading,ba.tilt,q.rad2deg(M.fov));ca.position.x=T[0];ca.position.y=T[1];ca.position.z=T[2];ca.position.spatialReference=z;ca.heading=ba.heading;ca.tilt=ba.tilt;ca.fov=q.rad2deg(M.fov);return ca};a.observerToCamera=S;a.scaleToDistance=v;a.scaleToResolution=function(z,M){return z.spatialReference?u.getResolutionForScale(M,
z.spatialReference):void 0};a.scaleToZoom=function(z,M){var ca;if(z=null==(ca=z.basemapTerrain)?void 0:ca.tilingScheme)return z.levelAtScale(M);C.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")};a.toExtent=function(z,M,ca){const ia=k.projectVectorToPoint(ca,z.renderSpatialReference,z.spatialReference||e.WGS84);if(t.isNone(ia))return null;var ba=Math.tan(M.fovX/2),E=Math.tan(M.fovY/2);M=d.dist(M.eye,ca);ba*=2*M;E*=2*M;return"global"===z.viewingMode?G.toExtent(z,ia,
ba,E):y.toExtent(z,ia,ba,E)};a.zoomToScale=function(z,M){var ca;if(z=null==(ca=z.basemapTerrain)?void 0:ca.tilingScheme)return z.scaleAtLevel(M);C.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/cameraUtilsPlanar":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projection ../views/3d/support/cameraUtilsInternal".split(" "),function(a,g,c,
p,q,t,A,d,x){function D(X,ea,v,K=x.createDirectionUp()){c.identity(N);const {direction:V,up:r}=K;c.rotateZ(N,N,-g.deg2rad(ea));c.rotateX(N,N,g.deg2rad(v));q.transformMat4(V,G,N);q.scale(V,V,-1);q.transformMat4(r,y,N);return K}function k(X,ea,v,K){return x.directionToHeadingTilt(ea,v,K,G,y)}function B(X,ea,v,K){const V=D(X,v,K),r=t.create();q.scale(r,V.direction,-ea);q.add(r,r,X);return{up:V.up,eye:r,heading:v,tilt:K}}function e(X){return g.rad2deg(X)}function u(X){return g.deg2rad(X)}function h(X,
ea,v,K,V){const r=X.renderSpatialReference;X=X.map&&X.spatialReference||ea.spatialReference;d.projectPointToVector(ea,P,r);d.projectPointToVector(ea,L,r);P[0]-=v/2;L[0]+=v/2;P[1]-=K/2;L[1]+=K/2;d.projectVectorToVector(P,r,P,X);d.projectVectorToVector(L,r,L,X);V?(V.xmin=P[0],V.ymin=P[1],V.xmax=L[0],V.ymax=L[1],V.spatialReference=X):V=new A(P[0],P[1],L[0],L[1],X);return V}const y=t.fromValues(0,1,0),G=t.fromValues(0,0,1),N=p.create(),P=t.create(),L=t.create();p=Object.freeze({__proto__:null,headingTiltToDirectionUp:D,
directionToHeadingTilt:k,eyeForCenterWithHeadingTilt:B,lookAtTiltToEyeTilt:e,eyeTiltToLookAtTilt:u,toExtent:h});a.cameraUtilsPlanar=p;a.directionToHeadingTilt=k;a.eyeForCenterWithHeadingTilt=B;a.eyeTiltToLookAtTilt=u;a.headingTiltToDirectionUp=D;a.lookAtTiltToEyeTilt=e;a.toExtent=h})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,g,c,p){const q=p.create(),t=p.create();a.createDirectionUp=
function(){return{direction:p.create(),up:p.create()}};a.directionToHeadingTilt=function(A,d,x,D,k){let B=c.normalize(q,A),e=c.dot(B,D);const u=0<e;e=Math.abs(e);.99<e&&(e=Math.abs(c.dot(d,D)),.99>e?(c.copy(B,d),u&&c.scale(B,B,-1)):B=null);d=0;B&&(c.scale(t,D,c.dot(D,B)),c.subtract(B,B,t),d=c.dot(B,k)/(c.length(B)*c.length(k)),c.cross(t,B,k),d=(0<c.dot(t,D)?1:-1)*g.rad2deg(g.acosClamped(d)));A=g.rad2deg(g.acosClamped(-c.dot(D,A)/c.length(A)));if(!x)return{heading:d,tilt:A};x.heading=d;x.tilt=A;return x};
Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/cameraUtilsSpherical":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../views/3d/support/cameraUtilsInternal ../views/3d/support/earthUtils ../views/3d/support/mathUtils".split(" "),function(a,g,c,p,q,t,A,d,x,D,k,B,e){function u(Y,aa,ka,oa=k.createDirectionUp()){q.cross(r,Y,ea);0===q.dot(r,
r)&&q.cross(r,Y,v);c.identity(V);c.rotate(V,V,-g.deg2rad(aa),Y);c.rotate(V,V,-g.deg2rad(ka),r);const {up:la,direction:pa}=oa;q.cross(la,r,Y);q.normalize(la,la);q.transformMat4(la,la,V);q.normalize(pa,Y);q.negate(pa,pa);q.transformMat4(pa,pa,V);return oa}function h(Y,aa,ka,oa){const la=r,pa=U;q.normalize(la,Y);q.cross(U,la,ea);0===q.dot(U,U)&&q.cross(U,la,v);q.cross(pa,U,la);return k.directionToHeadingTilt(aa,ka,oa,la,pa)}function y(Y,aa,ka,oa){const la={eye:t.create(),up:null,tilt:oa,heading:ka},
pa=r;pa[0]=Y[0];pa[1]=Y[2];pa[2]=-Y[1];ka=g.deg2rad(ka);var b=g.deg2rad(oa);oa=Math.sin(ka);ka=Math.cos(ka);var m=Math.sin(b),S=Math.cos(b);const ha=q.length(pa);if(1E-8>Math.abs(b))b=aa+ha;else{var C=ha/m,F=g.asinClamped(aa/C);b=C*Math.sin(Math.PI-b-F)}S*=aa;C=aa*aa*m*m;F=ka*ka*C;const Q=b-S,I=Q*Q;var f=F*(F+I-pa[1]*pa[1]);if(0>f)return q.scale(la.eye,pa,b/ha),la.tilt=0,la;var l=Math.sqrt(f);const J=pa[1]*Q;f=F+I;l=0<ka?-l+J:l+J;if(1E-8>Math.abs(f))return 1E-8>ha?(la.eye[0]=0,la.eye[1]=0,la.eye[2]=
aa):q.scale(la.eye,pa,b/ha),la.tilt=0,G(la.eye),N(la,Y);la.eye[1]=l/f;aa*=m;l=la.eye[1]*la.eye[1];m=1-l;f=Math.sqrt(m);C=F*l+oa*oa*C-2*ka*aa*la.eye[1]*f*Q+m*I;if(1E-8>Math.abs(C))return q.scale(la.eye,pa,b/ha),la.tilt=0,G(la.eye),N(la,Y);la.eye[0]=(m*(b*pa[0]-S*pa[0])-aa*f*(pa[0]*la.eye[1]*ka+pa[2]*oa))/C;la.eye[2]=(m*(b*pa[2]-S*pa[2])-aa*f*(pa[2]*la.eye[1]*ka-pa[0]*oa))/C;q.scale(la.eye,la.eye,b);G(la.eye);return N(la,Y)}function G(Y){const aa=Y[1];Y[1]=-Y[2];Y[2]=aa}function N(Y,aa){aa=u(aa,Y.heading,
Y.tilt);Y.up=aa.up;return Y}function P(Y,aa,ka){aa=q.length(aa);ka=g.asinClamped(ka/(Math.sqrt(ka*ka+aa*aa-2*ka*aa*Math.cos(Math.PI-Y))/Math.sin(Y)));return g.rad2deg(Y-ka)}function L(Y,aa,ka){Y=g.deg2rad(Y);aa=q.length(aa);return g.asinClamped(ka/(aa/Math.sin(Y)))+Y}function X(Y,aa,ka,oa,la){function pa(ha){const C=Math.PI/2;ha=e.cyclical2PI.normalize(ha,-C);ha>C&&(ha=Math.PI-ha);return ha}var b=aa.latitude;aa=aa.longitude;var m=B.getLonDeltaForDistance(b,ka,d.getReferenceEllipsoid(Y.spatialReference).radius)/
2;ka=aa-m;aa+=m;b=g.deg2rad(b);m=d.getReferenceEllipsoid(Y.spatialReference).radius;b=(1+Math.sin(b))/(1-Math.sin(b));const S=(b+1)*Math.tan(oa/m/2);b=1.5*Math.PI-2*Math.atan(.5*(S+Math.sqrt(4*b+S*S)));oa=b+oa/m;b=pa(b);oa=pa(oa);oa<b&&(m=oa,oa=b,b=m);b=Math.max(g.rad2deg(b),-90);oa=Math.min(g.rad2deg(oa),90);aa=K.monotonic(ka,aa);180<aa-ka&&(m=(aa-ka-180)/2,ka+=m,aa-=m);m=Y.spatialReference&&Y.spatialReference.isGeographic?Y.spatialReference:x.WGS84;la?(la.xmin=ka,la.ymin=b,la.xmax=aa,la.ymax=oa,
la.spatialReference=m):la=new A(ka,b,aa,oa,m);Y.spatialReference&&Y.spatialReference.isWebMercator&&D.geographicToWebMercator(la,!1,la);return la}const ea=t.fromValues(0,0,1),v=q.normalize(t.create(),t.fromValues(1,1,1)),K=new e.Cyclical(-180,180),V=p.create(),r=t.create(),U=t.create();p=Object.freeze({__proto__:null,headingTiltToDirectionUp:u,directionToHeadingTilt:h,eyeForCenterWithHeadingTilt:y,lookAtTiltToEyeTilt:P,eyeTiltToLookAtTilt:L,toExtent:X});a.cameraUtilsSpherical=p;a.directionToHeadingTilt=
h;a.eyeForCenterWithHeadingTilt=y;a.eyeTiltToLookAtTilt=L;a.headingTiltToDirectionUp=u;a.lookAtTiltToEyeTilt=P;a.toExtent=X})},"esri/views/3d/support/earthUtils":function(){define(["exports","../../../core/mathUtils","../../../geometry/Point","../../../geometry/projectionEllipsoid"],function(a,g,c,p){function q(d,x,D){return t(d,x.longitude,x.latitude,D.longitude,D.latitude)}function t(d,x,D,k,B){D=g.deg2rad(D);B=g.deg2rad(B);x=g.deg2rad(x);const e=g.deg2rad(k);k=Math.sin((D-B)/2);x=Math.sin((x-e)/
2);D=2*g.asinClamped(Math.sqrt(k*k+Math.cos(D)*Math.cos(B)*x*x));return Math.round(D*d*1E4)/1E4}function A(d,x){d/=15;x||(d=Math.round(d));return d}a.getGreatCircleDistance=t;a.getGreatCircleDistanceFromPoints=q;a.getGreatCircleSpanAt=function(d,x,D){const k=x.spatialReference,B=p.getReferenceEllipsoid(k),e=new c(x.x,d.y,k),u=new c(D.x,d.y,k);x=new c(d.x,x.y,k);d=new c(d.x,D.y,k);return{lon:q(B.radius,e,u),lat:q(B.radius,x,d)}};a.getLatDeltaForDistance=function(d,x){return g.rad2deg(d/x)};a.getLonDeltaForDistance=
function(d,x,D){x/=D;d=g.deg2rad(d);x=Math.sin(x/2);d=Math.cos(d);d=2*g.asinClamped(Math.sqrt(x*x/(d*d)));return g.rad2deg(d)};a.getMaxCameraAltitude=function(d,x){d=g.deg2rad(d/2);return(1-Math.sin(d))*x/Math.sin(d)};a.longitudeToTimezone=A;a.pointToTimezone=function(d,x){return A(d.longitude,x)};a.positionToTimezoneInfo=function(d,x){x||(x={hours:0,minutes:0,seconds:0});x.hours=A(d[0],!0);d=x.hours%1;x.hours-=d;x.minutes=60*d;d=x.minutes%1;x.minutes-=d;x.seconds=Math.round(60*d);return x};Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports","../../../core/maybe","../../../layers/graphics/dehydratedFeatureUtils"],function(a,g,c){function p(q){return"array"in q}a.SamplePosition=function(q,t=null,A=0){this.array=q;this.spatialReference=t;this.offset=A};a.getElevationAtPoint=function(q,t,A="ground"){if(c.isDehydratedPoint(t))return q.getElevation(t.x,t.y,t.z||0,t.spatialReference,A);if(p(t)){let d=t.offset;return q.getElevation(t.array[d++],
t.array[d++],t.array[d]||0,g.unwrapOr(t.spatialReference,q.spatialReference),A)}return q.getElevation(t[0],t[1],t[2]||0,q.spatialReference,A)};a.isSamplePosition=p;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/layers/graphics/dehydratedFeatureUtils":function(){define(["exports"],function(a){a.isDehydratedPoint=function(g){return"point"===g.type};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webdoc/support/Thumbnail":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,g,c,p,q,t,A,d){var x;c=x=function(D){function k(){var e=D.apply(this,arguments)||this;e.url="";return e}a._inheritsLoose(k,D);var B=k.prototype;B.destroy=function(){this.url=""};B.clone=function(){return new x({url:this.url})};return k}(c.JSONSupport);g.__decorate([p.property({type:String,json:{write:{isRequired:!0}}})],c.prototype,"url",void 0);return c=x=g.__decorate([d.subclass("esri.webdoc.support.Thumbnail")],c)})},"esri/webscene/support/Description":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,g,c,p,q,t,A,d){var x;c=x=function(D){function k(){var B=D.apply(this,arguments)||this;B.text="";return B}a._inheritsLoose(k,D);k.prototype.clone=function(){return new x({text:this.text})};return k}(c.JSONSupport);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);return c=x=g.__decorate([d.subclass("esri.webscene.support.Description")],c)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Lighting".split(" "),
function(a,g,c,p,q,t,A,d,x,D){var k;a.SlideEnvironment=k=function(B){function e(){var u=B.apply(this,arguments)||this;u.lighting=new D;return u}g._inheritsLoose(e,B);e.prototype.clone=function(){return new k({lighting:D.prototype.clone.call(this.lighting)})};return e}(p.JSONSupport);c.__decorate([q.property({type:D,json:{write:!0}})],a.SlideEnvironment.prototype,"lighting",void 0);a.SlideEnvironment=k=c.__decorate([x.subclass("esri.webscene.Environment")],a.SlideEnvironment);Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),function(a,g,c,p,q,t,A,d,x,D){var k;p=k=function(B){function e(){var h=B.apply(this,arguments)||this;h.opacity=
null;return h}a._inheritsLoose(e,B);var u=e.prototype;u.clone=function(){return new k({opacity:this.opacity})};u.cloneAndApplyTo=function(h){if(null==this.opacity)return h;h=null!=h?h.clone():new c;h.opacity=this.opacity;return h};e.fromGround=function(h){return new k({opacity:h.opacity})};return e}(p.JSONSupport);g.__decorate([q.property({type:Number,json:{type:d.Integer,read:{reader:D.transparencyToOpacity,source:"transparency"},write:{writer:(B,e)=>{e.transparency=D.opacityToTransparency(B)},target:"transparency"}}})],
p.prototype,"opacity",void 0);return p=k=g.__decorate([x.subclass("esri.webscene.support.SlideGround")],p)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,g,c,p,q,t,A,d){var x;a.SlideVisibleLayer=x=function(D){function k(B){B=
D.call(this,B)||this;B.id="";B.sublayerIds=null;return B}g._inheritsLoose(k,D);k.prototype.clone=function(){return new x({id:this.id,sublayerIds:q.clone(this.sublayerIds)})};return k}(p.JSONSupport);c.__decorate([t.property({type:String,json:{write:!0}})],a.SlideVisibleLayer.prototype,"id",void 0);c.__decorate([t.property({type:[A.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],a.SlideVisibleLayer.prototype,"sublayerIds",void 0);a.SlideVisibleLayer=x=c.__decorate([d.subclass("esri.webscene.support.SlideVisibleLayer")],
a.SlideVisibleLayer);a.default=a.SlideVisibleLayer;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webscene/support/Title":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,g,c,p,q,t,A,d){var x;c=x=function(D){function k(){var B=D.apply(this,arguments)||
this;B.text="";return B}a._inheritsLoose(k,D);k.prototype.clone=function(){return new x({text:this.text})};return k}(c.JSONSupport);g.__decorate([p.property({type:String,json:{write:{isRequired:!0}}})],c.prototype,"text",void 0);return c=x=g.__decorate([d.subclass("esri.webscene.support.Title")],c)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(a,g,c,p,q,t,A,d){var x;c=x=function(D){function k(B){return D.call(this,B)||this}a._inheritsLoose(k,D);k.prototype.clone=function(){return new x({name:this.name,path:this.path,title:this.title})};return k}(c.JSONSupport);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"path",void 0);g.__decorate([p.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=x=g.__decorate([d.subclass("esri.webscene.TransportationNetwork")],
c)})},"esri/webscene/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(a,g,c){c=function(p){function q(t,A){return p.call(this,t,A,"webscene")||this}g._inheritsLoose(q,p);g._createClass(q,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]);return q}(c.Version);a.Version=c;a.default=c;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/Version":function(){define(["exports",
"./Error"],function(a,g){let c=function(){function p(t,A,d=""){this.major=t;this.minor=A;this._context=d}var q=p.prototype;q.lessThan=function(t,A){return this.major<t||t===this.major&&this.minor<A};q.since=function(t,A){return!this.lessThan(t,A)};q.validate=function(t){if(this.major!==t.major)throw new g((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t});
};q.clone=function(){return new p(this.major,this.minor,this._context)};p.parse=function(t,A=""){const [d,x]=t.split(".");var D=/^\s*\d+\s*$/;if(!d||!d.match||!d.match(D))throw new g((A&&A+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!x||!x.match||!x.match(D))throw new g((A&&A+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});t=parseInt(d,10);D=parseInt(x,10);return new p(t,D,A)};return p}();a.Version=
c;Object.defineProperty(a,"__esModule",{value:!0})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/Handles ./core/has ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./support/MapFloorInfo ./support/webSceneUtils ./views/support/spatialReferenceSupport ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version".split(" "),function(a,
g,c,p,q,t,A,d,x,D,k,B,e,u,h,y,G,N,P,L,X,ea,v,K,V,r,U,Y,aa,ka,oa,la,pa,b,m,S,ha,C,F,Q,I,f,l,J,T,da){const z=u.getLogger("esri.WebScene"),M=new da.Version(1,26);q=function(ca){function ia(E){var w=ca.call(this,E)||this;w._handles=new x;w.applicationProperties=null;w.clippingArea=null;w.clippingEnabled=!1;w.floorInfo=null;w.heightModelInfo=null;w.sourceVersion=null;w.transportationNetworks=null;w.presentation=new J;w.initialViewProperties=new l;w.portalItem=null;w.resourceInfo=null;w.debouncedSaveOperations=
N.debounce(function(){var n=g._asyncToGenerator(function*(H,W,Z){switch(H){case 0:return w._saveImpl(W);case 1:return w._saveAsImpl(Z,W)}});return function(H,W,Z){return n.apply(this,arguments)}}());w.resourceReferences={portalItem:null,paths:[]};w.authoringApp=null;w.authoringAppVersion=null;w._isAuthoringAppSetByUser=!1;w._isAuthoringAppVersionSetByUser=!1;return w}g._inheritsLoose(ia,ca);var ba=ia.prototype;ba.initialize=function(){this.when().catch(E=>{z.error("#load()","Failed to load web scene",
E)});if(this.resourceInfo){let E;try{E=this._validateJSON(this.resourceInfo)}catch(w){this.addResolvingPromise(Promise.reject(w));return}this.read(E);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",()=>this._scheduleLayersIdGC()))};ba.destroy=function(){this._unscheduleLayersIdGC();this._handles.destroy();this.presentation&&this.presentation.destroy();const E=this.portalItem;this.portalItem=
null;null==E?void 0:E.destroy()};ba.writeClippingArea=function(E,w){w.clippingArea||(w.clippingArea={});w.clippingArea.geometry=E.toJSON()};ba.readClippingEnabled=function(E,w){return w.clippingArea?!!w.clippingArea.clip:!1};ba.writeClippingEnabled=function(E,w){this.clippingArea&&(w.clippingArea||(w.clippingArea={}),w.clippingArea.clip=E)};ba.writeLayers=function(E,w,n,H){const W={...H,layerContainerType:"operational-layers"};E=E.map(Z=>this.verifyWriteLayer(Z,H)?Z.write({},W):null).filter(Z=>!!Z);
w[n]=E.toArray()};ba.verifyWriteLayer=function(E,w){return"write"in E?!0:(w&&w.messages&&w.messages.push(new d("layer:unsupported",`Layers (${E.title}, ${E.id}) of type '${E.declaredClass}' cannot be persisted in web scenes`,{layer:E})),!1)};ba.readSourceVersion=function(E,w){const [n,H]=w.version.split(".");return new da.Version(parseInt(n,10),parseInt(H,10))};ba.writeSourceVersion=function(E,w,n){w[n]=`${M.major}.${M.minor}`};ba.writeAuthoringApp=function(E,w){w.authoringApp=E&&this._isAuthoringAppSetByUser?
E:"ArcGIS API for JavaScript"};ba.writeAuthoringAppVersion=function(E,w){w.authoringAppVersion=E&&this._isAuthoringAppVersionSetByUser?E:p.version};ba.writeGround=function(E,w,n,H){w[n]=E?E.write({},H):{transparency:0,layers:[]}};ba.readInitialViewProperties=function(E,w){E={};w.initialState&&w.initialState.environment&&(E.environment=f.fromJSON(w.initialState.environment));E.spatialReference=w.spatialReference?ka.fromJSON(w.spatialReference):ka.WebMercator;E.viewingMode=w.viewingMode||"global";w.initialState&&
w.initialState.viewpoint&&(E.viewpoint=t.fromJSON(w.initialState.viewpoint));return new l(E)};ba.load=function(E){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};ba.loadAll=function(){return e.loadAll(this,E=>{const w=this.presentation&&this.presentation.slides;E(this.ground,this.basemap,this.layers,w&&w.map(n=>n.basemap))})};ba.read=function(E,w){w={...w,origin:"web-scene"};const n=this._isAuthoringAppVersionSetByUser,H=this._isAuthoringAppSetByUser;r.readLoadable(this,
E,W=>ca.prototype.read.call(this,E,W),w);H||(this._isAuthoringAppSetByUser=!1);n||(this._isAuthoringAppVersionSetByUser=!1);if(E.baseMap&&Array.isArray(E.baseMap.elevationLayers)&&this.sourceVersion.supportsVisibleElevationLayersInSlides){w=E.baseMap.elevationLayers.map(ra=>({id:ra.id}));const W=this.presentation.slides,Z=(ra,ta)=>ra.visibleLayers.some(va=>va.id===ta),na=w.filter(ra=>!W.some(ta=>Z(ta,ra.id)));W.forEach(ra=>{ra.visibleLayers.addMany(na)})}};ba._writeBasemapElevationLayers=function(E){const w=
E.ground&&E.ground.layers;!E.baseMap&&w&&w.length&&(E.baseMap={title:"Basemap",baseMapLayers:[]});E.baseMap&&(E.baseMap.elevationLayers=k.clone(w))};ba.write=function(E,w){var n;if("loaded"!==this.loadStatus)throw w=new d("webscene:not-loaded","Web scene must be loaded before it can be serialized"),z.error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),w;this._runLayersIdGC();var H=!(null!=(n=w)&&n.messages);w={messages:[],...w,origin:"web-scene"};
E=ca.prototype.write.call(this,E,w);if(H&&(w=w.messages.filter(W=>"web-document-write:property-required"===W.name),w.length))throw H=new d("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:w}),z.error("#toJSON()","One or more properties that are required in the webscene JSON are missing",w),H;this._writeBasemapElevationLayers(E);return E};ba.save=function(){var E=g._asyncToGenerator(function*(w){return this.debouncedSaveOperations(0,
w)});return function(w){return E.apply(this,arguments)}}();ba._saveImpl=function(){var E=g._asyncToGenerator(function*(w){this.portalItem||(z.error("save(): requires the .portalItem property to be set"),yield Promise.reject(new d("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene")));"Web Scene"!==this.portalItem.type&&(yield Promise.reject(new d("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"')));const n=this._updateFromPromise;yield this._ensureLoadBeforeSave();
const H=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl&&P.urlToObject(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||b.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),W=this.write({},H);yield Promise.all(H.resources.pendingOperations);yield this._verifySave(W,H,w);this._updateTypeKeywords(this.portalItem);yield this.portalItem.update({data:W});
yield F.saveResources(this.resourceReferences,H,null);V.updateOrigins(H);n&&(yield n);yield this._saveThumbnail();return this.portalItem});return function(w){return E.apply(this,arguments)}}();ba.saveAs=function(){var E=g._asyncToGenerator(function*(w,n){return this.debouncedSaveOperations(1,n,w)});return function(w,n){return E.apply(this,arguments)}}();ba._saveAsImpl=function(){var E=g._asyncToGenerator(function*(w,n){w=m.from(w);w||(z.error("saveAs(portalItem): requires a portal item parameter"),
yield Promise.reject(new d("webscene:portal-item-required","saveAs requires a portal item to save to")));w.id&&(w=w.clone(),w.id=null);const H=w.portal||b.getDefault();yield this._ensureLoadBeforeSave();w.type="Web Scene";w.portal=H;const W=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:H,portalItem:w,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),Z=this.write({},W);yield Promise.all(W.resources.pendingOperations);
yield this._verifySaveAs(Z,W,n);const na=this.thumbnailUrl,ra=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(w);yield H._signIn();yield H.user.addItem({item:w,folder:n&&n.folder,data:Z});yield F.saveResources(this.resourceReferences,W,null);this.portalItem=w;y.MultiOriginJSONSupport.prototype.read.call(this,{version:Z.version,authoringApp:Z.authoringApp,authoringAppVersion:Z.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:w.itemUrl&&P.urlToObject(w.itemUrl)});V.updateOrigins(W);
na&&(this.thumbnailUrl=ra?P.addQueryParameter(na,"w","8192"):na);W.portalItem=w;yield this._saveThumbnail();return w});return function(w,n){return E.apply(this,arguments)}}();ba._saveThumbnail=function(){var E=g._asyncToGenerator(function*(){this._isOverridden("thumbnailUrl")&&(yield this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))});return function(){return E.apply(this,arguments)}}();ba._verifySave=function(E,w,
n,H=!1){if(!pa.isEarth(this.spatialReference))return Promise.reject(new d("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));let W=w.messages.filter(na=>"error"===na.type).map(na=>new d(na.name,na.message,na.details));w.blockedRelativeUrls&&(W=W.concat(w.blockedRelativeUrls.map(na=>new d("url:unsupported",`Relative url '${na}' is not supported in Web Scene`))));n&&n.ignoreUnsupported&&(W=W.filter(na=>"layer:unsupported"!==
na.name&&"symbol:unsupported"!==na.name&&"symbol-layer:unsupported"!==na.name&&"property:unsupported"!==na.name&&"url:unsupported"!==na.name&&"scenemodification:unsupported"!==na.name));null!=n&&n.requiredPropertyChecksDisabled&&(W=W.filter(na=>"web-document-write:property-required"!==na.name));const Z=n&&n.strictSchemaValidationEnabled;return(Z?(new Promise((na,ra)=>a(["./webscene/support/schemaValidator"],na,ra))).then(na=>{na=na.validate(E);if(0<na.length){const ra=`webscene did not validate:\n${na.join("\n")}`;
z.error(`${H?"saveAs":"save"}(): ${ra}`)}return na.map(ra=>new d("webscene:schema-validation",ra))}).then(na=>{if(Z&&0<na.length)throw ha.createSchemaValidationError(na.concat(W));return W}):Promise.resolve(W)).then(na=>{if(0<na.length)return Promise.reject(new d("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:na}))})};ba._verifySaveAs=function(E,w,n){return this.canNotSaveAs(w)?Promise.reject(ha.createCopyError()):
this._verifySave(E,w,n,!0)};ba.verifySaveAs=function(E){const w=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),n=this.write({},w);return this._verifySaveAs(n,w,E)};ba.canNotSaveAs=function(E){E||(E=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write({},E));return E.verifyItemRelativeUrls&&0<E.verifyItemRelativeUrls.writtenUrls.length};ba.updateFrom=function(){var E=g._asyncToGenerator(function*(w,n={}){this._updateFromPromise=w=this._updateFromInternal(w,
n);yield w;this._updateFromPromise===w&&(this._updateFromPromise=null)});return function(w){return E.apply(this,arguments)}}();ba._updateFromInternal=function(){var E=g._asyncToGenerator(function*(w,n={}){yield w.whenReady();!n.environmentExcluded&&w.environment&&(this.initialViewProperties.environment=f.prototype.clone.apply(w.environment));!n.viewpointExcluded&&w.viewpoint&&(this.initialViewProperties.viewpoint=w.viewpoint.clone());this.initialViewProperties.spatialReference=w.spatialReference.clone();
this.initialViewProperties.viewingMode=w.viewingMode;h.isSome(w.clippingArea)?w.clippingArea!==this.clippingArea&&(this.clippingArea=w.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;w.heightModelInfo&&(this.heightModelInfo=w.heightModelInfo.clone());if(w.map===this)for(const H of w.allLayerViews)"visible"in H&&"visible"in H.layer&&H._isOverridden("visible")&&(H.layer.visible=H.visible);if(!1===n.thumbnailExcluded||null==n.thumbnailExcluded&&!n.viewpointExcluded)yield this._updateFromThumbnail(w,
n.thumbnailSize||void 0)});return function(w){return E.apply(this,arguments)}}();ba._updateFromThumbnail=function(){var E=g._asyncToGenerator(function*(w,n){n=Q.getOptimalThumbnailSize(w,n);this.thumbnailUrl=(yield w.takeScreenshot({format:"jpg",width:n.width,height:n.height,disableDecorations:!0})).dataUrl});return function(w,n){return E.apply(this,arguments)}}();ba._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?
this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()};ba._readAndLoadFromJSON=function(E,w){E=this._validateJSON(E);this.read(E,w);return this._loadFromJSON(E,w)};ba._extractOperationalLayers=function(E){const w=[];if(!this.sourceVersion.supportsGround&&E.baseMap&&Array.isArray(E.baseMap.elevationLayers))for(const W of E.baseMap.elevationLayers)w.push(W);const n=[],H=W=>{W.layers&&(W.layers=W.layers.filter(H));return"ArcGISTiledElevationServiceLayer"===W.layerType?(this.sourceVersion.supportsGround||
n.push(W),!1):!0};return{operationalLayers:E.operationalLayers?E.operationalLayers.filter(H):[],operationalElevationLayers:n,basemapElevationLayers:w}};ba._loadFromJSON=function(E,w){const n=new A;return this._validateSpatialReference().then(()=>this._validateHeightModelInfo()).then(()=>new Promise((H,W)=>a(["./layers/support/layersCreator"],H,W))).then(({populateOperationalLayers:H})=>{const {operationalLayers:W,operationalElevationLayers:Z,basemapElevationLayers:na}=this._extractOperationalLayers(E),
ra=[],ta={context:{...w,layerContainerType:"operational-layers"}};this.portalItem&&(ta.context.portal=this.portalItem.portal||b.getDefault());0<na.length&&ra.push(H(this.ground.layers,na,{...ta,context:{...ta.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<Z.length&&ra.push(H(n,Z,{...ta,context:{...ta.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));W&&0<W.length&&ra.push(H(this.layers,W,ta));return N.eachAlways(ra).then(()=>
{})}).then(()=>this._loadObjectsWithLayers()).then(()=>{this.ground.layers.addMany(n)})};ba._ensureLoadBeforeSave=function(){var E=g._asyncToGenerator(function*(){yield this.load();yield this._loadObjectsWithLayers();const w=[];for(const n of this.allLayers.items)if("beforeSave"in n&&"function"===typeof n.beforeSave){const H=n.beforeSave();H&&w.push(H)}yield N.eachAlways(w)});return function(){return E.apply(this,arguments)}}();ba._loadObjectsWithLayers=function(){var E=g._asyncToGenerator(function*(){const w=
[];this.ground&&w.push(this.ground.load());this.basemap&&w.push(this.basemap.load());this.presentation.slides.forEach(n=>{n.basemap&&w.push(n.basemap.load())});yield N.eachAlways(w)});return function(){return E.apply(this,arguments)}}();ba._loadFromItem=function(){var E=g._asyncToGenerator(function*(w){yield w.load().catch(W=>{throw new d("webscene:load-portal-item","Failed to load portal item",{error:W});});if("Web Scene"!==w.type)throw new d("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",
{type:w.type});const n=yield w.fetchData();this.resourceInfo=n;const H={origin:"web-scene",url:P.urlToObject(w.itemUrl),portal:w.portal||b.getDefault(),portalItem:w,readResourcePaths:[]};yield this._readAndLoadFromJSON(n,H);this.resourceReferences={portalItem:w,paths:H.readResourcePaths}});return function(w){return E.apply(this,arguments)}}();ba._validateSpatialReference=function(){const E=this.initialViewProperties,w=this._sceneSpatialReference;let n;if("local"!==E.viewingMode){if(!C.isSpatialReferenceSupported(w,
1))return Promise.reject(new d("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:w,viewingMode:E.viewingMode}));n=Z=>!Z||aa.canProjectWithoutEngine(Z,w)}else{if(!C.isSpatialReferenceSupported(w,2))return Promise.reject(new d("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",
{spatialReference:w,viewingMode:E.viewingMode}));n=Z=>!Z||Z.equals(w)}const H=Z=>Z&&(h.isSome(Z.camera)&&Z.camera.position&&Z.camera.position.spatialReference||h.isSome(Z.targetGeometry)&&Z.targetGeometry.spatialReference);var W=H(E.viewpoint);return W&&!n(W)?Promise.reject(new d("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:W,sceneSpatialReference:w,
viewingMode:E.viewingMode})):(W=this.presentation.slides.find(Z=>!n(H(Z.viewpoint))))?(W=H(W.viewpoint),Promise.reject(new d("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:W,sceneSpatialReference:w,viewingMode:E.viewingMode}))):Promise.resolve()};ba._validateHeightModelInfo=function(){const E=oa.validateWebSceneError(this.heightModelInfo,
this._sceneSpatialReference);return E?Promise.reject(E):Promise.resolve()};ba._validateJSON=function(E){const w=da.Version.parse(E.version||"","webscene");M.validate(w);E.version=`${w.major}.${w.minor}`;1===w.major&&2>=w.minor&&(E.spatialReference=ka.WebMercator.toJSON());return E};ba._updateTypeKeywords=function(E){"local"===this.initialViewProperties.viewingMode?E.typeKeywords?-1===E.typeKeywords.indexOf("ViewingMode-Local")&&E.typeKeywords.push("ViewingMode-Local"):E.typeKeywords=["ViewingMode-Local"]:
"global"===this.initialViewProperties.viewingMode&&E.typeKeywords&&(E.typeKeywords=E.typeKeywords.filter(w=>"ViewingMode-Local"!==w));E.typeKeywords&&(E.typeKeywords=E.typeKeywords.filter((w,n,H)=>H.indexOf(w)===n))};ba._enableVerifyItemRelativeUrls=function(E){const w=this._verifyItemRelativeRootPath;w&&(E.verifyItemRelativeUrls={rootPath:w,writtenUrls:[]});return E};ba._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=
0)};ba._scheduleLayersIdGC=function(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)};ba._runLayersIdGC=function(){this._unscheduleLayersIdGC();var E=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search;const w=n=>!!this.allLayers.find(H=>H.id===n);E&&E.layers&&(E.layers=E.layers.filter(n=>w(n.id)));(E=this.presentation&&this.presentation.slides)&&E.forEach(n=>{n.visibleLayers&&
(n.visibleLayers=n.visibleLayers.filter(H=>w(H.id)))})};ia.fromJSON=function(E){if(!E)throw new d("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:E})};g._createClass(ia,[{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(E){E?this._override("thumbnailUrl",E):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(E){this._isAuthoringAppSetByUser=
!0;this._set("authoringApp",E)}},{key:"authoringAppVersion",set:function(E){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",E)}},{key:"spatialReference",get:function(){var E,w;return null!=(E=null==(w=this.initialViewProperties)?void 0:w.spatialReference)?E:ka.WebMercator}},{key:"viewingMode",get:function(){var E,w;return null!=(E=null==(w=this.initialViewProperties)?void 0:w.viewingMode)?E:"global"}},{key:"_sceneSpatialReference",get:function(){return this.initialViewProperties.spatialReference||
ka.WebMercator}},{key:"_verifyItemRelativeRootPath",get:function(){return this.portalItem&&this.portalItem.itemUrl?P.urlToObject(this.portalItem.itemUrl).path:null}}]);return ia}(B.LoadableMixin(G.EsriPromiseMixin(y.MultiOriginJSONMixin(q))));q.VERSION=M;c.__decorate([L.property({type:I,json:{write:!0}})],q.prototype,"applicationProperties",void 0);c.__decorate([L.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],q.prototype,"basemap",void 0);c.__decorate([L.property({type:U,json:{read:{source:"clippingArea.geometry",
reader:la.fromJSON},write:{target:"clippingArea.geometry"}}})],q.prototype,"clippingArea",void 0);c.__decorate([K.writer("clippingArea")],q.prototype,"writeClippingArea",null);c.__decorate([L.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],q.prototype,"clippingEnabled",void 0);c.__decorate([ea.reader("clippingEnabled",["clippingArea"])],q.prototype,"readClippingEnabled",null);c.__decorate([K.writer("clippingEnabled")],q.prototype,"writeClippingEnabled",null);c.__decorate([L.property({type:S,
json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],q.prototype,"floorInfo",void 0);c.__decorate([L.property({type:Y,json:{write:!0}})],q.prototype,"heightModelInfo",void 0);c.__decorate([L.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],q.prototype,"layers",void 0);c.__decorate([K.writer("layers")],q.prototype,"writeLayers",null);c.__decorate([L.property({readOnly:!0,type:da.Version,json:{type:(()=>{const ca=[],ia=M.major;for(let ba=8;ba<=M.minor;ba++)ca.push(`${ia}.${ba}`);
return ca})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],q.prototype,"sourceVersion",void 0);c.__decorate([ea.reader("sourceVersion",["version"])],q.prototype,"readSourceVersion",null);c.__decorate([K.writer("sourceVersion")],q.prototype,"writeSourceVersion",null);c.__decorate([L.property({json:{read:!1,write:!1}})],q.prototype,"tables",void 0);c.__decorate([L.property()],q.prototype,"thumbnailUrl",null);c.__decorate([L.property({type:String,
json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],q.prototype,"authoringApp",null);c.__decorate([K.writer("authoringApp")],q.prototype,"writeAuthoringApp",null);c.__decorate([L.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],q.prototype,"authoringAppVersion",null);c.__decorate([K.writer("authoringAppVersion")],q.prototype,"writeAuthoringAppVersion",null);c.__decorate([L.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],q.prototype,
"ground",void 0);c.__decorate([K.writer("ground")],q.prototype,"writeGround",null);c.__decorate([L.property({type:A.ofType(T),json:{write:!0}})],q.prototype,"transportationNetworks",void 0);c.__decorate([L.property({type:J,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(ca,ia,ba,E)=>{ca.slides&&0<ca.slides.length&&(ia.presentation=ca.write({},{...E,isPresentation:!0}))}}}})],q.prototype,"presentation",void 0);c.__decorate([L.property({type:l,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,
ignoreOrigin:!0},default:()=>new l({viewingMode:"global",spatialReference:ka.WebMercator})}})],q.prototype,"initialViewProperties",void 0);c.__decorate([ea.reader("initialViewProperties",["initialState.environment","spatialReference","viewingMode","initialState.viewpoint"])],q.prototype,"readInitialViewProperties",null);c.__decorate([L.property({type:ka,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],q.prototype,"spatialReference",null);c.__decorate([L.property({type:["local","global"],json:{read:!1,
write:{isRequired:!0,ignoreOrigin:!0}}})],q.prototype,"viewingMode",null);c.__decorate([L.property({type:m})],q.prototype,"portalItem",void 0);c.__decorate([L.property()],q.prototype,"resourceInfo",void 0);return q=c.__decorate([v.subclass("esri.WebScene")],q)});